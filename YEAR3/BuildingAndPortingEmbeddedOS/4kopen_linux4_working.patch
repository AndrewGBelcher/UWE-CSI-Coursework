diff -urNp a/arch/arm/boot/compressed/head.S b/arch/arm/boot/compressed/head.S
--- a/arch/arm/boot/compressed/head.S	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/compressed/head.S	2019-10-07 14:53:07.696512000 +0100
@@ -172,6 +172,7 @@ not_angel:
 		mov	r4, pc
 		and	r4, r4, #0xf8000000
 		add	r4, r4, #TEXT_OFFSET
+
 #else
 		ldr	r4, =zreladdr
 #endif
diff -urNp a/arch/arm/boot/dts/Makefile b/arch/arm/boot/dts/Makefile
--- a/arch/arm/boot/dts/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/Makefile	2019-09-26 21:23:27.092619100 +0100
@@ -1,158 +1,73 @@
 ifeq ($(CONFIG_OF),y)
 
-dtb-$(CONFIG_MACH_ASM9260) += \
-	alphascale-asm9260-devkit.dtb
 # Keep at91 dtb files sorted alphabetically for each SoC
-dtb-$(CONFIG_SOC_SAM_V4_V5) += \
-	at91rm9200ek.dtb \
-	mpa1600.dtb \
-	animeo_ip.dtb \
-	at91-qil_a9260.dtb \
-	aks-cdu.dtb \
-	ethernut5.dtb \
-	evk-pro3.dtb \
-	tny_a9260.dtb \
-	usb_a9260.dtb \
-	at91sam9261ek.dtb \
-	at91sam9263ek.dtb \
-	tny_a9263.dtb \
-	usb_a9263.dtb \
-	at91-foxg20.dtb \
-	at91sam9g20ek.dtb \
-	at91sam9g20ek_2mmc.dtb \
-	kizbox.dtb \
-	tny_a9g20.dtb \
-	usb_a9g20.dtb \
-	usb_a9g20_lpw.dtb \
-	at91sam9m10g45ek.dtb \
-	pm9g45.dtb \
-	at91sam9n12ek.dtb \
-	at91sam9rlek.dtb \
-	at91-ariag25.dtb \
-	at91-cosino_mega2560.dtb \
-	at91sam9g15ek.dtb \
-	at91sam9g25ek.dtb \
-	at91sam9g35ek.dtb \
-	at91sam9x25ek.dtb \
-	at91sam9x35ek.dtb
-dtb-$(CONFIG_SOC_SAM_V7) += \
-	at91-sama5d3_xplained.dtb \
-	sama5d31ek.dtb \
-	sama5d33ek.dtb \
-	sama5d34ek.dtb \
-	sama5d35ek.dtb \
-	sama5d36ek.dtb \
-	at91-sama5d4ek.dtb
-dtb-$(CONFIG_ARCH_ATLAS6) += \
-	atlas6-evb.dtb
-dtb-$(CONFIG_ARCH_ATLAS7) += \
-	atlas7-evb.dtb
-dtb-$(CONFIG_ARCH_AXXIA) += \
-	axm5516-amarillo.dtb
-dtb-$(CONFIG_ARCH_BCM2835) += \
-	bcm2835-rpi-b.dtb \
-	bcm2835-rpi-b-plus.dtb
-dtb-$(CONFIG_ARCH_BCM_5301X) += \
-	bcm4708-buffalo-wzr-1750dhp.dtb \
-	bcm4708-luxul-xwc-1000.dtb \
-	bcm4708-netgear-r6250.dtb \
-	bcm4708-netgear-r6300-v2.dtb \
-	bcm47081-asus-rt-n18u.dtb \
-	bcm47081-buffalo-wzr-600dhp2.dtb \
-	bcm47081-buffalo-wzr-900dhp.dtb
-dtb-$(CONFIG_ARCH_BCM_63XX) += \
-	bcm963138dvt.dtb
-dtb-$(CONFIG_ARCH_BCM_CYGNUS) += \
-	bcm911360_entphn.dtb \
-	bcm911360k.dtb \
-	bcm958300k.dtb
-dtb-$(CONFIG_ARCH_BCM_MOBILE) += \
-	bcm28155-ap.dtb \
-	bcm21664-garnet.dtb
-dtb-$(CONFIG_ARCH_BERLIN) += \
-	berlin2-sony-nsz-gs7.dtb \
-	berlin2cd-google-chromecast.dtb \
-	berlin2q-marvell-dmp.dtb
-dtb-$(CONFIG_ARCH_BRCMSTB) += \
-	bcm7445-bcm97445svmb.dtb
-dtb-$(CONFIG_ARCH_DAVINCI) += \
-	da850-enbw-cmc.dtb \
+# rm9200
+dtb-$(CONFIG_ARCH_AT91) += at91rm9200ek.dtb
+dtb-$(CONFIG_ARCH_AT91) += mpa1600.dtb
+# sam9260
+dtb-$(CONFIG_ARCH_AT91) += animeo_ip.dtb
+dtb-$(CONFIG_ARCH_AT91) += aks-cdu.dtb
+dtb-$(CONFIG_ARCH_AT91) += ethernut5.dtb
+dtb-$(CONFIG_ARCH_AT91) += evk-pro3.dtb
+dtb-$(CONFIG_ARCH_AT91) += tny_a9260.dtb
+dtb-$(CONFIG_ARCH_AT91) += usb_a9260.dtb
+# sam9263
+dtb-$(CONFIG_ARCH_AT91) += at91sam9263ek.dtb
+dtb-$(CONFIG_ARCH_AT91) += tny_a9263.dtb
+dtb-$(CONFIG_ARCH_AT91) += usb_a9263.dtb
+# sam9g20
+dtb-$(CONFIG_ARCH_AT91) += at91sam9g20ek.dtb
+dtb-$(CONFIG_ARCH_AT91) += at91sam9g20ek_2mmc.dtb
+dtb-$(CONFIG_ARCH_AT91) += kizbox.dtb
+dtb-$(CONFIG_ARCH_AT91) += tny_a9g20.dtb
+dtb-$(CONFIG_ARCH_AT91) += usb_a9g20.dtb
+# sam9g45
+dtb-$(CONFIG_ARCH_AT91) += at91sam9m10g45ek.dtb
+dtb-$(CONFIG_ARCH_AT91) += pm9g45.dtb
+# sam9n12
+dtb-$(CONFIG_ARCH_AT91) += at91sam9n12ek.dtb
+# sam9x5
+dtb-$(CONFIG_ARCH_AT91) += at91-ariag25.dtb
+dtb-$(CONFIG_ARCH_AT91) += at91sam9g15ek.dtb
+dtb-$(CONFIG_ARCH_AT91) += at91sam9g25ek.dtb
+dtb-$(CONFIG_ARCH_AT91) += at91sam9g35ek.dtb
+dtb-$(CONFIG_ARCH_AT91) += at91sam9x25ek.dtb
+dtb-$(CONFIG_ARCH_AT91) += at91sam9x35ek.dtb
+# sama5d3
+dtb-$(CONFIG_ARCH_AT91)	+= sama5d31ek.dtb
+dtb-$(CONFIG_ARCH_AT91)	+= sama5d33ek.dtb
+dtb-$(CONFIG_ARCH_AT91)	+= sama5d34ek.dtb
+dtb-$(CONFIG_ARCH_AT91)	+= sama5d35ek.dtb
+
+dtb-$(CONFIG_ARCH_BCM2835) += bcm2835-rpi-b.dtb
+dtb-$(CONFIG_ARCH_BCM) += bcm11351-brt.dtb
+dtb-$(CONFIG_ARCH_DAVINCI) += da850-enbw-cmc.dtb \
 	da850-evm.dtb
-dtb-$(CONFIG_ARCH_DIGICOLOR) += \
-	cx92755_equinox.dtb
-dtb-$(CONFIG_ARCH_EFM32) += \
-	efm32gg-dk3750.dtb
-dtb-$(CONFIG_ARCH_EXYNOS3) += \
-	exynos3250-monk.dtb \
-	exynos3250-rinato.dtb
-dtb-$(CONFIG_ARCH_EXYNOS4) += \
-	exynos4210-origen.dtb \
+dtb-$(CONFIG_ARCH_DOVE) += dove-cm-a510.dtb \
+	dove-cubox.dtb \
+	dove-dove-db.dtb
+dtb-$(CONFIG_ARCH_EXYNOS) += exynos4210-origen.dtb \
 	exynos4210-smdkv310.dtb \
 	exynos4210-trats.dtb \
 	exynos4210-universal_c210.dtb \
-	exynos4412-odroidu3.dtb \
 	exynos4412-odroidx.dtb \
-	exynos4412-odroidx2.dtb \
-	exynos4412-origen.dtb \
 	exynos4412-smdk4412.dtb \
-	exynos4412-tiny4412.dtb \
-	exynos4412-trats2.dtb
-dtb-$(CONFIG_ARCH_EXYNOS5) += \
+	exynos4412-origen.dtb \
 	exynos5250-arndale.dtb \
+	exynos5440-sd5v1.dtb \
 	exynos5250-smdk5250.dtb \
 	exynos5250-snow.dtb \
-	exynos5250-spring.dtb \
-	exynos5260-xyref5260.dtb \
-	exynos5410-smdk5410.dtb \
-	exynos5420-arndale-octa.dtb \
-	exynos5420-peach-pit.dtb \
-	exynos5420-smdk5420.dtb \
-	exynos5422-odroidxu3.dtb \
-	exynos5440-sd5v1.dtb \
-	exynos5440-ssdk5440.dtb \
-	exynos5800-peach-pi.dtb
-dtb-$(CONFIG_ARCH_HI3xxx) += \
-	hi3620-hi4511.dtb
-dtb-$(CONFIG_ARCH_HIX5HD2) += \
-	hisi-x5hd2-dkb.dtb
-dtb-$(CONFIG_ARCH_HIGHBANK) += \
-	highbank.dtb \
+	exynos5440-ssdk5440.dtb
+dtb-$(CONFIG_ARCH_HIGHBANK) += highbank.dtb \
 	ecx-2000.dtb
-dtb-$(CONFIG_ARCH_HIP01) += \
-	hip01-ca9x2.dtb
-dtb-$(CONFIG_ARCH_HIP04) += \
-	hip04-d01.dtb
-dtb-$(CONFIG_ARCH_INTEGRATOR) += \
-	integratorap.dtb \
+dtb-$(CONFIG_ARCH_INTEGRATOR) += integratorap.dtb \
 	integratorcp.dtb
-dtb-$(CONFIG_ARCH_KEYSTONE) += \
-	k2hk-evm.dtb \
-	k2l-evm.dtb \
-	k2e-evm.dtb
-dtb-$(CONFIG_MACH_KIRKWOOD) += \
-	kirkwood-b3.dtb \
-	kirkwood-blackarmor-nas220.dtb \
-	kirkwood-cloudbox.dtb \
-	kirkwood-d2net.dtb \
-	kirkwood-db-88f6281.dtb \
-	kirkwood-db-88f6282.dtb \
-	kirkwood-dir665.dtb \
+dtb-$(CONFIG_ARCH_LPC32XX) += ea3250.dtb phy3250.dtb
+dtb-$(CONFIG_ARCH_KIRKWOOD) += kirkwood-cloudbox.dtb \
 	kirkwood-dns320.dtb \
 	kirkwood-dns325.dtb \
 	kirkwood-dockstar.dtb \
 	kirkwood-dreamplug.dtb \
-	kirkwood-ds109.dtb \
-	kirkwood-ds110jv10.dtb \
-	kirkwood-ds111.dtb \
-	kirkwood-ds209.dtb \
-	kirkwood-ds210.dtb \
-	kirkwood-ds212.dtb \
-	kirkwood-ds212j.dtb \
-	kirkwood-ds409.dtb \
-	kirkwood-ds409slim.dtb \
-	kirkwood-ds411.dtb \
-	kirkwood-ds411j.dtb \
-	kirkwood-ds411slim.dtb \
 	kirkwood-goflexnet.dtb \
 	kirkwood-guruplug-server-plus.dtb \
 	kirkwood-ib62x0.dtb \
@@ -160,159 +75,53 @@ dtb-$(CONFIG_MACH_KIRKWOOD) += \
 	kirkwood-iomega_ix2_200.dtb \
 	kirkwood-is2.dtb \
 	kirkwood-km_kirkwood.dtb \
-	kirkwood-laplug.dtb \
 	kirkwood-lschlv2.dtb \
 	kirkwood-lsxhl.dtb \
 	kirkwood-mplcec4.dtb \
-	kirkwood-mv88f6281gtw-ge.dtb \
-	kirkwood-net2big.dtb \
-	kirkwood-net5big.dtb \
 	kirkwood-netgear_readynas_duo_v2.dtb \
-	kirkwood-netgear_readynas_nv+_v2.dtb \
 	kirkwood-ns2.dtb \
 	kirkwood-ns2lite.dtb \
 	kirkwood-ns2max.dtb \
 	kirkwood-ns2mini.dtb \
 	kirkwood-nsa310.dtb \
-	kirkwood-nsa310a.dtb \
-	kirkwood-openblocks_a6.dtb \
-	kirkwood-openblocks_a7.dtb \
-	kirkwood-openrd-base.dtb \
-	kirkwood-openrd-client.dtb \
-	kirkwood-openrd-ultimate.dtb \
-	kirkwood-pogo_e02.dtb \
-	kirkwood-rd88f6192.dtb \
-	kirkwood-rd88f6281-z0.dtb \
-	kirkwood-rd88f6281-a.dtb \
-	kirkwood-rs212.dtb \
-	kirkwood-rs409.dtb \
-	kirkwood-rs411.dtb \
-	kirkwood-sheevaplug.dtb \
-	kirkwood-sheevaplug-esata.dtb \
-	kirkwood-t5325.dtb \
 	kirkwood-topkick.dtb \
 	kirkwood-ts219-6281.dtb \
 	kirkwood-ts219-6282.dtb \
-	kirkwood-ts419-6281.dtb \
-	kirkwood-ts419-6282.dtb
-dtb-$(CONFIG_ARCH_LPC32XX) += \
-	ea3250.dtb phy3250.dtb
-dtb-$(CONFIG_MACH_MESON6) += \
-	meson6-atv1200.dtb
-dtb-$(CONFIG_ARCH_MMP) += \
-	pxa168-aspenite.dtb \
-	pxa910-dkb.dtb \
-	mmp2-brownstone.dtb
-dtb-$(CONFIG_ARCH_MOXART) += \
-	moxart-uc7112lx.dtb
-dtb-$(CONFIG_SOC_IMX1) += \
-	imx1-ads.dtb \
-	imx1-apf9328.dtb
-dtb-$(CONFIG_SOC_IMX25) += \
-	imx25-eukrea-mbimxsd25-baseboard.dtb \
-	imx25-eukrea-mbimxsd25-baseboard-cmo-qvga.dtb \
-	imx25-eukrea-mbimxsd25-baseboard-dvi-svga.dtb \
-	imx25-eukrea-mbimxsd25-baseboard-dvi-vga.dtb \
+	kirkwood-openblocks_a6.dtb
+dtb-$(CONFIG_ARCH_MARCO) += marco-evb.dtb
+dtb-$(CONFIG_ARCH_MSM) += msm8660-surf.dtb \
+	msm8960-cdp.dtb
+dtb-$(CONFIG_ARCH_MVEBU) += armada-370-db.dtb \
+	armada-370-mirabox.dtb \
+	armada-370-rd.dtb \
+	armada-xp-db.dtb \
+	armada-xp-gp.dtb \
+	armada-xp-openblocks-ax3-4.dtb
+dtb-$(CONFIG_ARCH_MXC) += \
 	imx25-karo-tx25.dtb \
-	imx25-pdk.dtb
-dtb-$(CONFIG_SOC_IMX31) += \
+	imx25-pdk.dtb \
 	imx27-apf27.dtb \
 	imx27-apf27dev.dtb \
-	imx27-eukrea-mbimxsd27-baseboard.dtb \
 	imx27-pdk.dtb \
-	imx27-phytec-phycore-rdk.dtb \
-	imx27-phytec-phycard-s-rdk.dtb
-dtb-$(CONFIG_SOC_IMX31) += \
-	imx31-bug.dtb
-dtb-$(CONFIG_SOC_IMX35) += \
-	imx35-eukrea-mbimxsd35-baseboard.dtb \
-	imx35-pdk.dtb
-dtb-$(CONFIG_SOC_IMX50) += \
-	imx50-evk.dtb
-dtb-$(CONFIG_SOC_IMX51) += \
+	imx27-phytec-phycore.dtb \
+	imx31-bug.dtb \
 	imx51-apf51.dtb \
 	imx51-apf51dev.dtb \
 	imx51-babbage.dtb \
-	imx51-digi-connectcore-jsk.dtb \
-	imx51-eukrea-mbimxsd51-baseboard.dtb
-dtb-$(CONFIG_SOC_IMX53) += \
 	imx53-ard.dtb \
-	imx53-m53evk.dtb \
+	imx53-evk.dtb \
 	imx53-mba53.dtb \
 	imx53-qsb.dtb \
-	imx53-qsrb.dtb \
 	imx53-smd.dtb \
-	imx53-tx53-x03x.dtb \
-	imx53-tx53-x13x.dtb \
-	imx53-voipac-bsb.dtb
-dtb-$(CONFIG_SOC_IMX6Q) += \
-	imx6dl-aristainetos_4.dtb \
-	imx6dl-aristainetos_7.dtb \
-	imx6dl-cubox-i.dtb \
-	imx6dl-dfi-fs700-m60.dtb \
-	imx6dl-gw51xx.dtb \
-	imx6dl-gw52xx.dtb \
-	imx6dl-gw53xx.dtb \
-	imx6dl-gw54xx.dtb \
-	imx6dl-gw552x.dtb \
-	imx6dl-hummingboard.dtb \
-	imx6dl-nitrogen6x.dtb \
-	imx6dl-phytec-pbab01.dtb \
-	imx6dl-rex-basic.dtb \
-	imx6dl-riotboard.dtb \
 	imx6dl-sabreauto.dtb \
-	imx6dl-sabrelite.dtb \
 	imx6dl-sabresd.dtb \
-	imx6dl-tx6dl-comtft.dtb \
-	imx6dl-tx6u-801x.dtb \
-	imx6dl-tx6u-811x.dtb \
-	imx6dl-udoo.dtb \
 	imx6dl-wandboard.dtb \
-	imx6dl-wandboard-revb1.dtb \
 	imx6q-arm2.dtb \
-	imx6q-cm-fx6.dtb \
-	imx6q-cubox-i.dtb \
-	imx6q-dfi-fs700-m60.dtb \
-	imx6q-dmo-edmqmx6.dtb \
-	imx6q-gk802.dtb \
-	imx6q-gw51xx.dtb \
-	imx6q-gw52xx.dtb \
-	imx6q-gw53xx.dtb \
-	imx6q-gw5400-a.dtb \
-	imx6q-gw54xx.dtb \
-	imx6q-gw552x.dtb \
-	imx6q-hummingboard.dtb \
-	imx6q-nitrogen6x.dtb \
-	imx6q-phytec-pbab01.dtb \
-	imx6q-rex-pro.dtb \
 	imx6q-sabreauto.dtb \
 	imx6q-sabrelite.dtb \
 	imx6q-sabresd.dtb \
-	imx6q-sbc6x.dtb \
-	imx6q-tbs2910.dtb \
-	imx6q-tx6q-1010.dtb \
-	imx6q-tx6q-1010-comtft.dtb \
-	imx6q-tx6q-1020.dtb \
-	imx6q-tx6q-1020-comtft.dtb \
-	imx6q-tx6q-1110.dtb \
-	imx6q-udoo.dtb \
-	imx6q-wandboard.dtb \
-	imx6q-wandboard-revb1.dtb
-dtb-$(CONFIG_SOC_IMX6SL) += \
-	imx6sl-evk.dtb
-dtb-$(CONFIG_SOC_IMX6SX) += \
-	imx6sx-sabreauto.dtb \
-	imx6sx-sdb.dtb
-dtb-$(CONFIG_SOC_LS1021A) += \
-	ls1021a-qds.dtb \
-	ls1021a-twr.dtb
-dtb-$(CONFIG_SOC_VF610) += \
-	vf500-colibri-eval-v3.dtb \
-	vf610-colibri-eval-v3.dtb \
-	vf610-cosmic.dtb \
-	vf610-twr.dtb
-dtb-$(CONFIG_ARCH_MXS) += \
-	imx23-evk.dtb \
+	imx6q-sbc6x.dtb
+dtb-$(CONFIG_ARCH_MXS) += imx23-evk.dtb \
 	imx23-olinuxino.dtb \
 	imx23-stmp378x_devb.dtb \
 	imx28-apf28.dtb \
@@ -321,240 +130,114 @@ dtb-$(CONFIG_ARCH_MXS) += \
 	imx28-cfa10036.dtb \
 	imx28-cfa10037.dtb \
 	imx28-cfa10049.dtb \
-	imx28-cfa10055.dtb \
-	imx28-cfa10056.dtb \
-	imx28-cfa10057.dtb \
-	imx28-cfa10058.dtb \
-	imx28-duckbill.dtb \
-	imx28-eukrea-mbmx283lc.dtb \
-	imx28-eukrea-mbmx287lc.dtb \
 	imx28-evk.dtb \
-	imx28-m28cu3.dtb \
 	imx28-m28evk.dtb \
 	imx28-sps1.dtb \
 	imx28-tx28.dtb
-dtb-$(CONFIG_ARCH_NOMADIK) += \
-	ste-nomadik-s8815.dtb \
-	ste-nomadik-nhk15.dtb
-dtb-$(CONFIG_ARCH_NSPIRE) += \
-	nspire-cx.dtb \
-	nspire-tp.dtb \
-	nspire-clp.dtb
-dtb-$(CONFIG_ARCH_OMAP2) += \
-	omap2420-h4.dtb \
-	omap2420-n800.dtb \
-	omap2420-n810.dtb \
-	omap2420-n810-wimax.dtb \
-	omap2430-sdp.dtb
-dtb-$(CONFIG_ARCH_OMAP3) += \
-	am3517-craneboard.dtb \
-	am3517-evm.dtb \
-	am3517_mt_ventoux.dtb \
+dtb-$(CONFIG_ARCH_NOMADIK) += ste-nomadik-s8815.dtb
+dtb-$(CONFIG_ARCH_OMAP2PLUS) += omap2420-h4.dtb \
 	omap3430-sdp.dtb \
 	omap3-beagle.dtb \
-	omap3-beagle-xm.dtb \
-	omap3-beagle-xm-ab.dtb \
-	omap3-cm-t3517.dtb \
-	omap3-cm-t3530.dtb \
-	omap3-cm-t3730.dtb \
 	omap3-devkit8000.dtb \
+	omap3-beagle-xm.dtb \
 	omap3-evm.dtb \
-	omap3-evm-37xx.dtb \
-	omap3-gta04a3.dtb \
-	omap3-gta04a4.dtb \
-	omap3-gta04a5.dtb \
-	omap3-ha.dtb \
-	omap3-ha-lcd.dtb \
+	omap3-tobi.dtb \
 	omap3-igep0020.dtb \
-	omap3-igep0020-rev-f.dtb \
 	omap3-igep0030.dtb \
-	omap3-igep0030-rev-g.dtb \
-	omap3-ldp.dtb \
-	omap3-lilly-dbb056.dtb \
-	omap3-n900.dtb \
-	omap3-n9.dtb \
-	omap3-n950.dtb \
-	omap3-overo-alto35.dtb \
-	omap3-overo-chestnut43.dtb \
-	omap3-overo-gallop43.dtb \
-	omap3-overo-palo43.dtb \
-	omap3-overo-storm-alto35.dtb \
-	omap3-overo-storm-chestnut43.dtb \
-	omap3-overo-storm-gallop43.dtb \
-	omap3-overo-storm-palo43.dtb \
-	omap3-overo-storm-summit.dtb \
-	omap3-overo-storm-tobi.dtb \
-	omap3-overo-summit.dtb \
-	omap3-overo-tobi.dtb \
-	omap3-sbc-t3517.dtb \
-	omap3-sbc-t3530.dtb \
-	omap3-sbc-t3730.dtb \
-	omap3-thunder.dtb \
-	omap3-zoom3.dtb
-dtb-$(CONFIG_SOC_TI81XX) += \
-	dm8168-evm.dtb
-dtb-$(CONFIG_SOC_AM33XX) += \
-	am335x-base0033.dtb \
-	am335x-bone.dtb \
-	am335x-boneblack.dtb \
-	am335x-evm.dtb \
-	am335x-evmsk.dtb \
-	am335x-nano.dtb \
-	am335x-pepper.dtb \
-	am335x-lxm.dtb
-dtb-$(CONFIG_ARCH_OMAP4) += \
-	omap4-duovero-parlor.dtb \
 	omap4-panda.dtb \
 	omap4-panda-a4.dtb \
 	omap4-panda-es.dtb \
+	omap4-var-som.dtb \
 	omap4-sdp.dtb \
-	omap4-sdp-es23plus.dtb \
-	omap4-var-dvk-om44.dtb \
-	omap4-var-stk-om44.dtb
-dtb-$(CONFIG_SOC_AM43XX) += \
-	am43x-epos-evm.dtb \
-	am437x-sk-evm.dtb \
-	am437x-idk-evm.dtb \
-	am437x-gp-evm.dtb
-dtb-$(CONFIG_SOC_OMAP5) += \
-	omap5-cm-t54.dtb \
-	omap5-sbc-t54.dtb \
-	omap5-uevm.dtb
-dtb-$(CONFIG_SOC_DRA7XX) += \
-	dra7-evm.dtb \
-	am57xx-beagle-x15.dtb \
-	dra72-evm.dtb
-dtb-$(CONFIG_ARCH_ORION5X) += \
-	orion5x-lacie-d2-network.dtb \
-	orion5x-lacie-ethernet-disk-mini-v2.dtb \
-	orion5x-maxtor-shared-storage-2.dtb \
-	orion5x-rd88f5182-nas.dtb
-dtb-$(CONFIG_ARCH_PRIMA2) += \
-	prima2-evb.dtb
-dtb-$(CONFIG_ARCH_QCOM) += \
-	qcom-apq8064-cm-qs600.dtb \
-	qcom-apq8064-ifc6410.dtb \
-	qcom-apq8074-dragonboard.dtb \
-	qcom-apq8084-ifc6540.dtb \
-	qcom-apq8084-mtp.dtb \
-	qcom-ipq8064-ap148.dtb \
-	qcom-msm8660-surf.dtb \
-	qcom-msm8960-cdp.dtb \
-	qcom-msm8974-sony-xperia-honami.dtb
-dtb-$(CONFIG_ARCH_REALVIEW) += \
-	arm-realview-pb1176.dtb
-dtb-$(CONFIG_ARCH_ROCKCHIP) += \
-	rk3066a-bqcurie2.dtb \
-	rk3066a-marsboard.dtb \
-	rk3066a-rayeager.dtb \
-	rk3188-radxarock.dtb \
-	rk3288-evb-act8846.dtb \
-	rk3288-evb-rk808.dtb \
-	rk3288-firefly-beta.dtb \
-	rk3288-firefly.dtb
-dtb-$(CONFIG_ARCH_S3C24XX) += \
-	s3c2416-smdk2416.dtb
-dtb-$(CONFIG_ARCH_S3C64XX) += \
-	s3c6410-mini6410.dtb \
-	s3c6410-smdk6410.dtb
-dtb-$(CONFIG_ARCH_S5PV210) += \
-	s5pv210-aquila.dtb \
-	s5pv210-goni.dtb \
-	s5pv210-smdkc110.dtb \
-	s5pv210-smdkv210.dtb \
-	s5pv210-torbreck.dtb
-dtb-$(CONFIG_ARCH_SHMOBILE_LEGACY) += \
-	r8a73a4-ape6evm.dtb \
-	r8a73a4-ape6evm-reference.dtb \
+	omap5-evm.dtb \
+	am335x-evm.dtb \
+	am335x-evmsk.dtb \
+	am335x-bone.dtb
+dtb-$(CONFIG_ARCH_ORION5X) += orion5x-lacie-ethernet-disk-mini-v2.dtb
+dtb-$(CONFIG_ARCH_PRIMA2) += prima2-evb.dtb
+dtb-$(CONFIG_ARCH_U8500) += snowball.dtb \
+	hrefprev60.dtb \
+	hrefv60plus.dtb \
+	ccu9540.dtb
+dtb-$(CONFIG_ARCH_SHMOBILE) += emev2-kzm9d.dtb \
 	r8a7740-armadillo800eva.dtb \
 	r8a7778-bockw.dtb \
-	r8a7778-bockw-reference.dtb \
-	r8a7779-marzen.dtb \
-	sh7372-mackerel.dtb \
+	r8a7779-marzen-reference.dtb \
+	r8a7790-lager.dtb \
 	sh73a0-kzm9g.dtb \
-	sh73a0-kzm9g-reference.dtb
-dtb-$(CONFIG_ARCH_SHMOBILE_MULTI) += \
-	emev2-kzm9d.dtb \
-	r7s72100-genmai.dtb \
+	sh73a0-kzm9g-reference.dtb \
 	r8a73a4-ape6evm.dtb \
-	r8a7740-armadillo800eva.dtb \
-	r8a7779-marzen.dtb \
-	r8a7790-lager.dtb \
-	r8a7791-henninger.dtb \
-	r8a7791-koelsch.dtb \
-	r8a7794-alt.dtb
-dtb-$(CONFIG_ARCH_SOCFPGA) += \
-	socfpga_arria5_socdk.dtb \
-	socfpga_arria10_socdk.dtb \
-	socfpga_cyclone5_socdk.dtb \
-	socfpga_cyclone5_sockit.dtb \
-	socfpga_cyclone5_socrates.dtb \
+	sh7372-mackerel.dtb
+dtb-$(CONFIG_ARCH_SOCFPGA) += socfpga_cyclone5.dtb \
 	socfpga_vt.dtb
-dtb-$(CONFIG_ARCH_SPEAR13XX) += \
-	spear1310-evb.dtb \
+dtb-$(CONFIG_ARCH_SPEAR13XX) += spear1310-evb.dtb \
 	spear1340-evb.dtb
-dtb-$(CONFIG_ARCH_SPEAR3XX) += \
-	spear300-evb.dtb \
+dtb-$(CONFIG_ARCH_SPEAR3XX)+= spear300-evb.dtb \
 	spear310-evb.dtb \
 	spear320-evb.dtb \
 	spear320-hmi.dtb
-dtb-$(CONFIG_ARCH_SPEAR6XX) += \
-	spear600-evb.dtb
-dtb-$(CONFIG_ARCH_STI) += \
+dtb-$(CONFIG_ARCH_SPEAR6XX)+= spear600-evb.dtb
+dtb-$(CONFIG_ARCH_STI)+= stih416-b2000.dtb \
+	stid127-b2112.dtb \
+	stid127-b2147.dtb \
+	stid127-b2163a.dtb \
+	stid127-b2163b.dtb \
+	stid325-b2212.dtb \
+	stid325-b2235.dtb \
+	stid325-b2236.dtb \
+	stid325-b2239.dtb \
+	stih301-b2120.dtb \
+	stih301-b2173.dtb \
+	stih301-b2196.dtb \
+	stih301cut1-b2173.dtb \
+	stih305-b2089.dtb \
+	stih305-b2120.dtb \
+	stih305-b2148.dtb \
+	stih310-b2089.dtb \
+	stih310-b2120.dtb \
+	stih312-b2120.dtb \
+	stih310cut1-b2120.dtb \
+	stih310-b2148.dtb \
+	stih310cut1-b2148.dtb \
+	stih314-b2188.dtb \
+	stih314-b2199.dtb \
+	stih314-b2206.dtb \
+	stih314cut0-b2188.dtb \
+	stih314cut0-b2199.dtb \
+	stih314cut0-b2206.dtb \
+	stih390-b2214.dtb \
+	stih390-b2216.dtb \
+	stih407-b2089.dtb \
 	stih407-b2120.dtb \
+	stih407-b2148.dtb \
+	stih407-b2172.dtb \
+	stih410-b2089.dtb \
 	stih410-b2120.dtb \
-	stih415-b2000.dtb \
-	stih415-b2020.dtb \
-	stih416-b2000.dtb \
+	stih410-b2120d.dtb \
+	stih410-b2148.dtb \
+	stih410cut1-b2120.dtb \
+	stih410cut1-b2148.dtb \
+	stih410cut1-b2163.dtb \
+	stih412-b2120.dtb \
+	stih414-b2188.dtb \
+	stih414-b2199.dtb \
+	stih414-b2206.dtb \
 	stih416-b2020.dtb \
 	stih416-b2020e.dtb \
-	stih418-b2199.dtb
-dtb-$(CONFIG_MACH_SUN4I) += \
-	sun4i-a10-a1000.dtb \
-	sun4i-a10-ba10-tvbox.dtb \
-	sun4i-a10-chuwi-v7-cw0825.dtb \
+	stih416-b2105.dtb \
+	stih418-b2188.dtb \
+	stih418-b2199.dtb \
+	stih418-b2206.dtb \
+	stih419-b2188.dtb \
+	stih419-b2199.dtb \
+	stih419-b2206.dtb \
+	stih812-b2187.dtb
+dtb-$(CONFIG_ARCH_SUNXI) += \
 	sun4i-a10-cubieboard.dtb \
-	sun4i-a10-marsboard.dtb \
 	sun4i-a10-mini-xplus.dtb \
-	sun4i-a10-mk802.dtb \
-	sun4i-a10-mk802ii.dtb \
 	sun4i-a10-hackberry.dtb \
-	sun4i-a10-hyundai-a7hd.dtb \
-	sun4i-a10-inet97fv2.dtb \
-	sun4i-a10-olinuxino-lime.dtb \
-	sun4i-a10-pcduino.dtb
-dtb-$(CONFIG_MACH_SUN5I) += \
-	sun5i-a10s-mk802.dtb \
-	sun5i-a10s-olinuxino-micro.dtb \
-	sun5i-a10s-r7-tv-dongle.dtb \
-	sun5i-a13-hsg-h702.dtb \
-	sun5i-a13-olinuxino.dtb \
-	sun5i-a13-olinuxino-micro.dtb
-dtb-$(CONFIG_MACH_SUN6I) += \
-	sun6i-a31-app4-evb1.dtb \
-	sun6i-a31-colombus.dtb \
-	sun6i-a31-hummingbird.dtb \
-	sun6i-a31-m9.dtb \
-	sun6i-a31s-cs908.dtb
-dtb-$(CONFIG_MACH_SUN7I) += \
-	sun7i-a20-bananapi.dtb \
-	sun7i-a20-bananapro.dtb \
-	sun7i-a20-cubieboard2.dtb \
-	sun7i-a20-cubietruck.dtb \
-	sun7i-a20-hummingbird.dtb \
-	sun7i-a20-i12-tvbox.dtb \
-	sun7i-a20-m3.dtb \
-	sun7i-a20-olinuxino-lime.dtb \
-	sun7i-a20-olinuxino-lime2.dtb \
-	sun7i-a20-olinuxino-micro.dtb \
-	sun7i-a20-pcduino3.dtb
-dtb-$(CONFIG_MACH_SUN8I) += \
-	sun8i-a23-ippo-q8h-v5.dtb \
-	sun8i-a23-ippo-q8h-v1.2.dtb
-dtb-$(CONFIG_MACH_SUN9I) += \
-	sun9i-a80-optimus.dtb
-dtb-$(CONFIG_ARCH_TEGRA_2x_SOC) += \
-	tegra20-harmony.dtb \
+	sun5i-a13-olinuxino.dtb
+dtb-$(CONFIG_ARCH_TEGRA) += tegra20-harmony.dtb \
 	tegra20-iris-512.dtb \
 	tegra20-medcom-wide.dtb \
 	tegra20-paz00.dtb \
@@ -563,89 +246,32 @@ dtb-$(CONFIG_ARCH_TEGRA_2x_SOC) += \
 	tegra20-tec.dtb \
 	tegra20-trimslice.dtb \
 	tegra20-ventana.dtb \
-	tegra20-whistler.dtb
-dtb-$(CONFIG_ARCH_TEGRA_3x_SOC) += \
-	tegra30-apalis-eval.dtb \
+	tegra20-whistler.dtb \
 	tegra30-beaver.dtb \
 	tegra30-cardhu-a02.dtb \
 	tegra30-cardhu-a04.dtb \
-	tegra30-colibri-eval-v3.dtb
-dtb-$(CONFIG_ARCH_TEGRA_114_SOC) += \
 	tegra114-dalmore.dtb \
-	tegra114-roth.dtb \
-	tegra114-tn7.dtb
-dtb-$(CONFIG_ARCH_TEGRA_124_SOC) += \
-	tegra124-jetson-tk1.dtb \
-	tegra124-nyan-big.dtb \
-	tegra124-venice2.dtb
-dtb-$(CONFIG_ARCH_U300) += \
-	ste-u300.dtb
-dtb-$(CONFIG_ARCH_U8500) += \
-	ste-snowball.dtb \
-	ste-hrefprev60-stuib.dtb \
-	ste-hrefprev60-tvk.dtb \
-	ste-hrefv60plus-stuib.dtb \
-	ste-hrefv60plus-tvk.dtb \
-	ste-ccu8540.dtb \
-	ste-ccu9540.dtb
-dtb-$(CONFIG_ARCH_VERSATILE) += \
-	versatile-ab.dtb \
+	tegra114-pluto.dtb
+dtb-$(CONFIG_ARCH_VERSATILE) += versatile-ab.dtb \
 	versatile-pb.dtb
-dtb-$(CONFIG_ARCH_VEXPRESS) += \
-	vexpress-v2p-ca5s.dtb \
+dtb-$(CONFIG_ARCH_VEXPRESS) += vexpress-v2p-ca5s.dtb \
 	vexpress-v2p-ca9.dtb \
 	vexpress-v2p-ca15-tc1.dtb \
 	vexpress-v2p-ca15_a7.dtb
-dtb-$(CONFIG_ARCH_VIRT) += \
-	xenvm-4.2.dtb
-dtb-$(CONFIG_ARCH_VT8500) += \
-	vt8500-bv07.dtb \
+dtb-$(CONFIG_ARCH_VIRT) += xenvm-4.2.dtb
+dtb-$(CONFIG_ARCH_VT8500) += vt8500-bv07.dtb \
 	wm8505-ref.dtb \
 	wm8650-mid.dtb \
-	wm8750-apc8750.dtb \
 	wm8850-w70v2.dtb
-dtb-$(CONFIG_ARCH_ZYNQ) += \
-	zynq-parallella.dtb \
-	zynq-zc702.dtb \
-	zynq-zc706.dtb \
-	zynq-zed.dtb \
-	zynq-zybo.dtb
-dtb-$(CONFIG_MACH_ARMADA_370) += \
-	armada-370-db.dtb \
-	armada-370-mirabox.dtb \
-	armada-370-netgear-rn102.dtb \
-	armada-370-netgear-rn104.dtb \
-	armada-370-rd.dtb \
-	armada-370-synology-ds213j.dtb
-dtb-$(CONFIG_MACH_ARMADA_375) += \
-	armada-375-db.dtb
-dtb-$(CONFIG_MACH_ARMADA_38X) += \
-	armada-385-db-ap.dtb \
-	armada-388-db.dtb \
-	armada-388-gp.dtb \
-	armada-388-rd.dtb
-dtb-$(CONFIG_MACH_ARMADA_XP) += \
-	armada-xp-axpwifiap.dtb \
-	armada-xp-db.dtb \
-	armada-xp-gp.dtb \
-	armada-xp-lenovo-ix4-300d.dtb \
-	armada-xp-matrix.dtb \
-	armada-xp-netgear-rn2120.dtb \
-	armada-xp-openblocks-ax3-4.dtb \
-	armada-xp-synology-ds414.dtb
-dtb-$(CONFIG_MACH_DOVE) += \
-	dove-cm-a510.dtb \
-	dove-cubox.dtb \
-	dove-cubox-es.dtb \
-	dove-d2plug.dtb \
-	dove-d3plug.dtb \
-	dove-dove-db.dtb
-dtb-$(CONFIG_ARCH_MEDIATEK) += \
-	mt6589-aquaris5.dtb \
-	mt6592-evb.dtb \
-	mt8127-moose.dtb \
-	mt8135-evbp1.dtb
+dtb-$(CONFIG_ARCH_ZYNQ) += zynq-zc702.dtb
+
+targets += dtbs
+targets += $(dtb-y)
 endif
 
-always		:= $(dtb-y)
-clean-files	:= *.dtb
+# *.dtb used to be generated in the directory above. Clean out the
+# old build results so people don't accidentally use them.
+dtbs: $(addprefix $(obj)/, $(dtb-y))
+	$(Q)rm -f $(obj)/../*.dtb
+
+clean-files := *.dtb
diff -urNp a/arch/arm/boot/dts/aks-cdu.dts b/arch/arm/boot/dts/aks-cdu.dts
--- a/arch/arm/boot/dts/aks-cdu.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/aks-cdu.dts	2015-10-27 00:45:05.000000000 +0000
@@ -9,19 +9,13 @@
 
 /dts-v1/;
 
-#include "ge863-pro3.dtsi"
+/include/ "ge863-pro3.dtsi"
 
 / {
 	chosen {
 		bootargs = "console=ttyS0,115200 ubi.mtd=4 root=ubi0:rootfs rootfstype=ubifs";
 	};
 
-	clocks {
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-	};
-
 	ahb {
 		apb {
 			usart0: serial@fffb0000 {
@@ -52,7 +46,7 @@
 			};
 
 			usb1: gadget@fffa4000 {
-				atmel,vbus-gpio = <&pioC 15 GPIO_ACTIVE_HIGH>;
+				atmel,vbus-gpio = <&pioC 15 0>;
 				status = "okay";
 			};
 		};
@@ -96,23 +90,23 @@
 		compatible = "gpio-leds";
 
 		red {
-			gpios = <&pioC 10 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioC 10 0>;
 			linux,default-trigger = "none";
 		};
 
 		green {
-			gpios = <&pioA 5 GPIO_ACTIVE_LOW>;
+			gpios = <&pioA 5 1>;
 			linux,default-trigger = "none";
 			default-state = "on";
 		};
 
 		yellow {
-			gpios = <&pioB 20 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 20 1>;
 			linux,default-trigger = "none";
 		};
 
 		blue {
-			gpios = <&pioB 21 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 21 1>;
 			linux,default-trigger = "none";
 		};
 	};
diff -urNp a/arch/arm/boot/dts/am335x-bone.dts b/arch/arm/boot/dts/am335x-bone.dts
--- a/arch/arm/boot/dts/am335x-bone.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/am335x-bone.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,20 +7,132 @@
  */
 /dts-v1/;
 
-#include "am33xx.dtsi"
-#include "am335x-bone-common.dtsi"
+/include/ "am33xx.dtsi"
 
 / {
 	model = "TI AM335x BeagleBone";
 	compatible = "ti,am335x-bone", "ti,am33xx";
+
+	cpus {
+		cpu@0 {
+			cpu0-supply = <&dcdc2_reg>;
+		};
+	};
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x10000000>; /* 256 MB */
+	};
+
+	am33xx_pinmux: pinmux@44e10800 {
+		pinctrl-names = "default";
+		pinctrl-0 = <&user_leds_s0>;
+
+		user_leds_s0: user_leds_s0 {
+			pinctrl-single,pins = <
+				0x54 0x7	/* gpmc_a5.gpio1_21, OUTPUT | MODE7 */
+				0x58 0x17	/* gpmc_a6.gpio1_22, OUTPUT_PULLUP | MODE7 */
+				0x5c 0x7	/* gpmc_a7.gpio1_23, OUTPUT | MODE7 */
+				0x60 0x17	/* gpmc_a8.gpio1_24, OUTPUT_PULLUP | MODE7 */
+			>;
+		};
+	};
+
+	ocp {
+		uart1: serial@44e09000 {
+			status = "okay";
+		};
+
+		i2c0: i2c@44e0b000 {
+			status = "okay";
+			clock-frequency = <400000>;
+
+			tps: tps@24 {
+				reg = <0x24>;
+			};
+
+		};
+	};
+
+	leds {
+		compatible = "gpio-leds";
+
+		led@2 {
+			label = "beaglebone:green:heartbeat";
+			gpios = <&gpio1 21 0>;
+			linux,default-trigger = "heartbeat";
+			default-state = "off";
+		};
+
+		led@3 {
+			label = "beaglebone:green:mmc0";
+			gpios = <&gpio1 22 0>;
+			linux,default-trigger = "mmc0";
+			default-state = "off";
+		};
+
+		led@4 {
+			label = "beaglebone:green:usr2";
+			gpios = <&gpio1 23 0>;
+			default-state = "off";
+		};
+
+		led@5 {
+			label = "beaglebone:green:usr3";
+			gpios = <&gpio1 24 0>;
+			default-state = "off";
+		};
+	};
+};
+
+/include/ "tps65217.dtsi"
+
+&tps {
+	regulators {
+		dcdc1_reg: regulator@0 {
+			regulator-always-on;
+		};
+
+		dcdc2_reg: regulator@1 {
+			/* VDD_MPU voltage limits 0.95V - 1.26V with +/-4% tolerance */
+			regulator-name = "vdd_mpu";
+			regulator-min-microvolt = <925000>;
+			regulator-max-microvolt = <1325000>;
+			regulator-boot-on;
+			regulator-always-on;
+		};
+
+		dcdc3_reg: regulator@2 {
+			/* VDD_CORE voltage limits 0.95V - 1.1V with +/-4% tolerance */
+			regulator-name = "vdd_core";
+			regulator-min-microvolt = <925000>;
+			regulator-max-microvolt = <1150000>;
+			regulator-boot-on;
+			regulator-always-on;
+		};
+
+		ldo1_reg: regulator@3 {
+			regulator-always-on;
+		};
+
+		ldo2_reg: regulator@4 {
+			regulator-always-on;
+		};
+
+		ldo3_reg: regulator@5 {
+			regulator-always-on;
+		};
+
+		ldo4_reg: regulator@6 {
+			regulator-always-on;
+		};
+	};
 };
 
-&ldo3_reg {
-	regulator-min-microvolt = <1800000>;
-	regulator-max-microvolt = <3300000>;
-	regulator-always-on;
+&cpsw_emac0 {
+	phy_id = <&davinci_mdio>, <0>;
 };
 
-&mmc1 {
-	vmmc-supply = <&ldo3_reg>;
+&cpsw_emac1 {
+	phy_id = <&davinci_mdio>, <1>;
 };
diff -urNp a/arch/arm/boot/dts/am335x-evm.dts b/arch/arm/boot/dts/am335x-evm.dts
--- a/arch/arm/boot/dts/am335x-evm.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/am335x-evm.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,7 +7,7 @@
  */
 /dts-v1/;
 
-#include "am33xx.dtsi"
+/include/ "am33xx.dtsi"
 
 / {
 	model = "TI AM335x EVM";
@@ -24,6 +24,86 @@
 		reg = <0x80000000 0x10000000>; /* 256 MB */
 	};
 
+	am33xx_pinmux: pinmux@44e10800 {
+		pinctrl-names = "default";
+		pinctrl-0 = <&matrix_keypad_s0 &volume_keys_s0>;
+
+		matrix_keypad_s0: matrix_keypad_s0 {
+			pinctrl-single,pins = <
+				0x54 0x7	/* gpmc_a5.gpio1_21, OUTPUT | MODE7 */
+				0x58 0x7	/* gpmc_a6.gpio1_22, OUTPUT | MODE7 */
+				0x64 0x27	/* gpmc_a9.gpio1_25, INPUT | MODE7 */
+				0x68 0x27	/* gpmc_a10.gpio1_26, INPUT | MODE7 */
+				0x6c 0x27	/* gpmc_a11.gpio1_27, INPUT | MODE7 */
+			>;
+		};
+
+		volume_keys_s0: volume_keys_s0 {
+			pinctrl-single,pins = <
+				0x150 0x27	/* spi0_sclk.gpio0_2, INPUT | MODE7 */
+				0x154 0x27	/* spi0_d0.gpio0_3, INPUT | MODE7 */
+			>;
+		};
+	};
+
+	ocp {
+		uart1: serial@44e09000 {
+			status = "okay";
+		};
+
+		i2c0: i2c@44e0b000 {
+			status = "okay";
+			clock-frequency = <400000>;
+
+			tps: tps@2d {
+				reg = <0x2d>;
+			};
+		};
+
+		i2c1: i2c@4802a000 {
+			status = "okay";
+			clock-frequency = <100000>;
+
+			lis331dlh: lis331dlh@18 {
+				compatible = "st,lis331dlh", "st,lis3lv02d";
+				reg = <0x18>;
+				Vdd-supply = <&lis3_reg>;
+				Vdd_IO-supply = <&lis3_reg>;
+
+				st,click-single-x;
+				st,click-single-y;
+				st,click-single-z;
+				st,click-thresh-x = <10>;
+				st,click-thresh-y = <10>;
+				st,click-thresh-z = <10>;
+				st,irq1-click;
+				st,irq2-click;
+				st,wakeup-x-lo;
+				st,wakeup-x-hi;
+				st,wakeup-y-lo;
+				st,wakeup-y-hi;
+				st,wakeup-z-lo;
+				st,wakeup-z-hi;
+				st,min-limit-x = <120>;
+				st,min-limit-y = <120>;
+				st,min-limit-z = <140>;
+				st,max-limit-x = <550>;
+				st,max-limit-y = <550>;
+				st,max-limit-z = <750>;
+			};
+
+			tsl2550: tsl2550@39 {
+				compatible = "taos,tsl2550";
+				reg = <0x39>;
+			};
+
+			tmp275: tmp275@48 {
+				compatible = "ti,tmp275";
+				reg = <0x48>;
+			};
+		};
+	};
+
 	vbat: fixedregulator@0 {
 		compatible = "regulator-fixed";
 		regulator-name = "vbat";
@@ -43,12 +123,12 @@
 		debounce-delay-ms = <5>;
 		col-scan-delay-us = <2>;
 
-		row-gpios = <&gpio1 25 GPIO_ACTIVE_HIGH		/* Bank1, pin25 */
-			     &gpio1 26 GPIO_ACTIVE_HIGH		/* Bank1, pin26 */
-			     &gpio1 27 GPIO_ACTIVE_HIGH>;	/* Bank1, pin27 */
+		row-gpios = <&gpio1 25 0	/* Bank1, pin25 */
+			     &gpio1 26 0	/* Bank1, pin26 */
+			     &gpio1 27 0>;	/* Bank1, pin27 */
 
-		col-gpios = <&gpio1 21 GPIO_ACTIVE_HIGH		/* Bank1, pin21 */
-			     &gpio1 22 GPIO_ACTIVE_HIGH>;	/* Bank1, pin22 */
+		col-gpios = <&gpio1 21 0	/* Bank1, pin21 */
+			     &gpio1 22 0>;	/* Bank1, pin22 */
 
 		linux,keymap = <0x0000008b	/* MENU */
 				0x0100009e	/* BACK */
@@ -67,478 +147,20 @@
 		switch@9 {
 			label = "volume-up";
 			linux,code = <115>;
-			gpios = <&gpio0 2 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 2 1>;
 			gpio-key,wakeup;
 		};
 
 		switch@10 {
 			label = "volume-down";
 			linux,code = <114>;
-			gpios = <&gpio0 3 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 3 1>;
 			gpio-key,wakeup;
 		};
 	};
-
-	backlight {
-		compatible = "pwm-backlight";
-		pwms = <&ecap0 0 50000 0>;
-		brightness-levels = <0 51 53 56 62 75 101 152 255>;
-		default-brightness-level = <8>;
-	};
-
-	panel {
-		compatible = "ti,tilcdc,panel";
-		status = "okay";
-		pinctrl-names = "default";
-		pinctrl-0 = <&lcd_pins_s0>;
-		panel-info {
-			ac-bias           = <255>;
-			ac-bias-intrpt    = <0>;
-			dma-burst-sz      = <16>;
-			bpp               = <32>;
-			fdd               = <0x80>;
-			sync-edge         = <0>;
-			sync-ctrl         = <1>;
-			raster-order      = <0>;
-			fifo-th           = <0>;
-		};
-
-		display-timings {
-			800x480p62 {
-				clock-frequency = <30000000>;
-				hactive = <800>;
-				vactive = <480>;
-				hfront-porch = <39>;
-				hback-porch = <39>;
-				hsync-len = <47>;
-				vback-porch = <29>;
-				vfront-porch = <13>;
-				vsync-len = <2>;
-				hsync-active = <1>;
-				vsync-active = <1>;
-			};
-		};
-	};
-
-	sound {
-		compatible = "ti,da830-evm-audio";
-		ti,model = "AM335x-EVM";
-		ti,audio-codec = <&tlv320aic3106>;
-		ti,mcasp-controller = <&mcasp1>;
-		ti,codec-clock-rate = <12000000>;
-		ti,audio-routing =
-			"Headphone Jack",       "HPLOUT",
-			"Headphone Jack",       "HPROUT",
-			"LINE1L",               "Line In",
-			"LINE1R",               "Line In";
-	};
-};
-
-&am33xx_pinmux {
-	pinctrl-names = "default";
-	pinctrl-0 = <&matrix_keypad_s0 &volume_keys_s0 &clkout2_pin>;
-
-	matrix_keypad_s0: matrix_keypad_s0 {
-		pinctrl-single,pins = <
-			0x54 (PIN_OUTPUT_PULLDOWN | MUX_MODE7)	/* gpmc_a5.gpio1_21 */
-			0x58 (PIN_OUTPUT_PULLDOWN | MUX_MODE7)	/* gpmc_a6.gpio1_22 */
-			0x64 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_a9.gpio1_25 */
-			0x68 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_a10.gpio1_26 */
-			0x6c (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_a11.gpio1_27 */
-		>;
-	};
-
-	volume_keys_s0: volume_keys_s0 {
-		pinctrl-single,pins = <
-			0x150 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* spi0_sclk.gpio0_2 */
-			0x154 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* spi0_d0.gpio0_3 */
-		>;
-	};
-
-	i2c0_pins: pinmux_i2c0_pins {
-		pinctrl-single,pins = <
-			0x188 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c0_sda.i2c0_sda */
-			0x18c (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c0_scl.i2c0_scl */
-		>;
-	};
-
-	i2c1_pins: pinmux_i2c1_pins {
-		pinctrl-single,pins = <
-			0x158 (PIN_INPUT_PULLUP | MUX_MODE2)	/* spi0_d1.i2c1_sda */
-			0x15c (PIN_INPUT_PULLUP | MUX_MODE2)	/* spi0_cs0.i2c1_scl */
-		>;
-	};
-
-	uart0_pins: pinmux_uart0_pins {
-		pinctrl-single,pins = <
-			0x170 (PIN_INPUT_PULLUP | MUX_MODE0)	/* uart0_rxd.uart0_rxd */
-			0x174 (PIN_OUTPUT_PULLDOWN | MUX_MODE0)	/* uart0_txd.uart0_txd */
-		>;
-	};
-
-	clkout2_pin: pinmux_clkout2_pin {
-		pinctrl-single,pins = <
-			0x1b4 (PIN_OUTPUT_PULLDOWN | MUX_MODE3)	/* xdma_event_intr1.clkout2 */
-		>;
-	};
-
-	nandflash_pins_s0: nandflash_pins_s0 {
-		pinctrl-single,pins = <
-			0x0 (PIN_INPUT_PULLUP | MUX_MODE0)	/* gpmc_ad0.gpmc_ad0 */
-			0x4 (PIN_INPUT_PULLUP | MUX_MODE0)	/* gpmc_ad1.gpmc_ad1 */
-			0x8 (PIN_INPUT_PULLUP | MUX_MODE0)	/* gpmc_ad2.gpmc_ad2 */
-			0xc (PIN_INPUT_PULLUP | MUX_MODE0)	/* gpmc_ad3.gpmc_ad3 */
-			0x10 (PIN_INPUT_PULLUP | MUX_MODE0)	/* gpmc_ad4.gpmc_ad4 */
-			0x14 (PIN_INPUT_PULLUP | MUX_MODE0)	/* gpmc_ad5.gpmc_ad5 */
-			0x18 (PIN_INPUT_PULLUP | MUX_MODE0)	/* gpmc_ad6.gpmc_ad6 */
-			0x1c (PIN_INPUT_PULLUP | MUX_MODE0)	/* gpmc_ad7.gpmc_ad7 */
-			0x70 (PIN_INPUT_PULLUP | MUX_MODE0)	/* gpmc_wait0.gpmc_wait0 */
-			0x74 (PIN_INPUT_PULLUP | MUX_MODE7)	/* gpmc_wpn.gpio0_30 */
-			0x7c (PIN_OUTPUT | MUX_MODE0)		/* gpmc_csn0.gpmc_csn0  */
-			0x90 (PIN_OUTPUT | MUX_MODE0)		/* gpmc_advn_ale.gpmc_advn_ale */
-			0x94 (PIN_OUTPUT | MUX_MODE0)		/* gpmc_oen_ren.gpmc_oen_ren */
-			0x98 (PIN_OUTPUT | MUX_MODE0)		/* gpmc_wen.gpmc_wen */
-			0x9c (PIN_OUTPUT | MUX_MODE0)		/* gpmc_be0n_cle.gpmc_be0n_cle */
-		>;
-	};
-
-	ecap0_pins: backlight_pins {
-		pinctrl-single,pins = <
-			0x164 0x0	/* eCAP0_in_PWM0_out.eCAP0_in_PWM0_out MODE0 */
-		>;
-	};
-
-	cpsw_default: cpsw_default {
-		pinctrl-single,pins = <
-			/* Slave 1 */
-			0x114 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txen.rgmii1_tctl */
-			0x118 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxdv.rgmii1_rctl */
-			0x11c (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txd3.rgmii1_td3 */
-			0x120 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txd2.rgmii1_td2 */
-			0x124 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txd1.rgmii1_td1 */
-			0x128 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txd0.rgmii1_td0 */
-			0x12c (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txclk.rgmii1_tclk */
-			0x130 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxclk.rgmii1_rclk */
-			0x134 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxd3.rgmii1_rd3 */
-			0x138 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxd2.rgmii1_rd2 */
-			0x13c (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxd1.rgmii1_rd1 */
-			0x140 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxd0.rgmii1_rd0 */
-		>;
-	};
-
-	cpsw_sleep: cpsw_sleep {
-		pinctrl-single,pins = <
-			/* Slave 1 reset value */
-			0x114 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x118 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x11c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x120 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x124 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x128 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x12c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x130 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x134 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x138 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x13c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x140 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-		>;
-	};
-
-	davinci_mdio_default: davinci_mdio_default {
-		pinctrl-single,pins = <
-			/* MDIO */
-			0x148 (PIN_INPUT_PULLUP | SLEWCTRL_FAST | MUX_MODE0)	/* mdio_data.mdio_data */
-			0x14c (PIN_OUTPUT_PULLUP | MUX_MODE0)			/* mdio_clk.mdio_clk */
-		>;
-	};
-
-	davinci_mdio_sleep: davinci_mdio_sleep {
-		pinctrl-single,pins = <
-			/* MDIO reset value */
-			0x148 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x14c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-		>;
-	};
-
-	mmc1_pins: pinmux_mmc1_pins {
-		pinctrl-single,pins = <
-			0x160 (PIN_INPUT | MUX_MODE7) /* spi0_cs1.gpio0_6 */
-		>;
-	};
-
-	lcd_pins_s0: lcd_pins_s0 {
-		pinctrl-single,pins = <
-			0x20 (PIN_OUTPUT | MUX_MODE1)		/* gpmc_ad8.lcd_data23 */
-			0x24 (PIN_OUTPUT | MUX_MODE1)		/* gpmc_ad9.lcd_data22 */
-			0x28 (PIN_OUTPUT | MUX_MODE1)		/* gpmc_ad10.lcd_data21 */
-			0x2c (PIN_OUTPUT | MUX_MODE1)		/* gpmc_ad11.lcd_data20 */
-			0x30 (PIN_OUTPUT | MUX_MODE1)		/* gpmc_ad12.lcd_data19 */
-			0x34 (PIN_OUTPUT | MUX_MODE1)		/* gpmc_ad13.lcd_data18 */
-			0x38 (PIN_OUTPUT | MUX_MODE1)		/* gpmc_ad14.lcd_data17 */
-			0x3c (PIN_OUTPUT | MUX_MODE1)		/* gpmc_ad15.lcd_data16 */
-			0xa0 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data0.lcd_data0 */
-			0xa4 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data1.lcd_data1 */
-			0xa8 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data2.lcd_data2 */
-			0xac (PIN_OUTPUT | MUX_MODE0)		/* lcd_data3.lcd_data3 */
-			0xb0 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data4.lcd_data4 */
-			0xb4 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data5.lcd_data5 */
-			0xb8 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data6.lcd_data6 */
-			0xbc (PIN_OUTPUT | MUX_MODE0)		/* lcd_data7.lcd_data7 */
-			0xc0 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data8.lcd_data8 */
-			0xc4 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data9.lcd_data9 */
-			0xc8 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data10.lcd_data10 */
-			0xcc (PIN_OUTPUT | MUX_MODE0)		/* lcd_data11.lcd_data11 */
-			0xd0 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data12.lcd_data12 */
-			0xd4 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data13.lcd_data13 */
-			0xd8 (PIN_OUTPUT | MUX_MODE0)		/* lcd_data14.lcd_data14 */
-			0xdc (PIN_OUTPUT | MUX_MODE0)		/* lcd_data15.lcd_data15 */
-			0xe0 (PIN_OUTPUT | MUX_MODE0)		/* lcd_vsync.lcd_vsync */
-			0xe4 (PIN_OUTPUT | MUX_MODE0)		/* lcd_hsync.lcd_hsync */
-			0xe8 (PIN_OUTPUT | MUX_MODE0)		/* lcd_pclk.lcd_pclk */
-			0xec (PIN_OUTPUT | MUX_MODE0)		/* lcd_ac_bias_en.lcd_ac_bias_en */
-		>;
-	};
-
-	am335x_evm_audio_pins: am335x_evm_audio_pins {
-		pinctrl-single,pins = <
-			0x10c (PIN_INPUT_PULLDOWN | MUX_MODE4) /* mii1_crs.mcasp1_aclkx */
-			0x110 (PIN_INPUT_PULLDOWN | MUX_MODE4) /* mii1_rxerr.mcasp1_fsx */
-			0x108 (PIN_OUTPUT_PULLDOWN | MUX_MODE4) /* mii1_col.mcasp1_axr2 */
-			0x144 (PIN_INPUT_PULLDOWN | MUX_MODE4) /* rmii1_ref_clk.mcasp1_axr3 */
-		>;
-	};
-
-	dcan1_pins_default: dcan1_pins_default {
-		pinctrl-single,pins = <
-			0x168 (PIN_OUTPUT | MUX_MODE2) /* uart0_ctsn.d_can1_tx */
-			0x16c (PIN_INPUT_PULLDOWN | MUX_MODE2) /* uart0_rtsn.d_can1_rx */
-		>;
-	};
-};
-
-&uart0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&uart0_pins>;
-
-	status = "okay";
-};
-
-&i2c0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&i2c0_pins>;
-
-	status = "okay";
-	clock-frequency = <400000>;
-
-	tps: tps@2d {
-		reg = <0x2d>;
-	};
-};
-
-&usb {
-	status = "okay";
-};
-
-&usb_ctrl_mod {
-	status = "okay";
-};
-
-&usb0_phy {
-	status = "okay";
-};
-
-&usb1_phy {
-	status = "okay";
-};
-
-&usb0 {
-	status = "okay";
-};
-
-&usb1 {
-	status = "okay";
-	dr_mode = "host";
-};
-
-&cppi41dma  {
-	status = "okay";
-};
-
-&i2c1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&i2c1_pins>;
-
-	status = "okay";
-	clock-frequency = <100000>;
-
-	lis331dlh: lis331dlh@18 {
-		compatible = "st,lis331dlh", "st,lis3lv02d";
-		reg = <0x18>;
-		Vdd-supply = <&lis3_reg>;
-		Vdd_IO-supply = <&lis3_reg>;
-
-		st,click-single-x;
-		st,click-single-y;
-		st,click-single-z;
-		st,click-thresh-x = <10>;
-		st,click-thresh-y = <10>;
-		st,click-thresh-z = <10>;
-		st,irq1-click;
-		st,irq2-click;
-		st,wakeup-x-lo;
-		st,wakeup-x-hi;
-		st,wakeup-y-lo;
-		st,wakeup-y-hi;
-		st,wakeup-z-lo;
-		st,wakeup-z-hi;
-		st,min-limit-x = <120>;
-		st,min-limit-y = <120>;
-		st,min-limit-z = <140>;
-		st,max-limit-x = <550>;
-		st,max-limit-y = <550>;
-		st,max-limit-z = <750>;
-	};
-
-	tsl2550: tsl2550@39 {
-		compatible = "taos,tsl2550";
-		reg = <0x39>;
-	};
-
-	tmp275: tmp275@48 {
-		compatible = "ti,tmp275";
-		reg = <0x48>;
-	};
-
-	tlv320aic3106: tlv320aic3106@1b {
-		compatible = "ti,tlv320aic3106";
-		reg = <0x1b>;
-		status = "okay";
-
-		/* Regulators */
-		AVDD-supply = <&vaux2_reg>;
-		IOVDD-supply = <&vaux2_reg>;
-		DRVDD-supply = <&vaux2_reg>;
-		DVDD-supply = <&vbat>;
-	};
-};
-
-&lcdc {
-	status = "okay";
-};
-
-&elm {
-	status = "okay";
-};
-
-&epwmss0 {
-	status = "okay";
-
-	ecap0: ecap@48300100 {
-		status = "okay";
-		pinctrl-names = "default";
-		pinctrl-0 = <&ecap0_pins>;
-	};
-};
-
-&gpmc {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&nandflash_pins_s0>;
-	ranges = <0 0 0x08000000 0x1000000>;	/* CS0: 16MB for NAND */
-	nand@0,0 {
-		reg = <0 0 4>; /* CS0, offset 0, IO size 4 */
-		ti,nand-ecc-opt = "bch8";
-		ti,elm-id = <&elm>;
-		nand-bus-width = <8>;
-		gpmc,device-width = <1>;
-		gpmc,sync-clk-ps = <0>;
-		gpmc,cs-on-ns = <0>;
-		gpmc,cs-rd-off-ns = <44>;
-		gpmc,cs-wr-off-ns = <44>;
-		gpmc,adv-on-ns = <6>;
-		gpmc,adv-rd-off-ns = <34>;
-		gpmc,adv-wr-off-ns = <44>;
-		gpmc,we-on-ns = <0>;
-		gpmc,we-off-ns = <40>;
-		gpmc,oe-on-ns = <0>;
-		gpmc,oe-off-ns = <54>;
-		gpmc,access-ns = <64>;
-		gpmc,rd-cycle-ns = <82>;
-		gpmc,wr-cycle-ns = <82>;
-		gpmc,wait-on-read = "true";
-		gpmc,wait-on-write = "true";
-		gpmc,bus-turnaround-ns = <0>;
-		gpmc,cycle2cycle-delay-ns = <0>;
-		gpmc,clk-activation-ns = <0>;
-		gpmc,wait-monitoring-ns = <0>;
-		gpmc,wr-access-ns = <40>;
-		gpmc,wr-data-mux-bus-ns = <0>;
-		/* MTD partition table */
-		/* All SPL-* partitions are sized to minimal length
-		 * which can be independently programmable. For
-		 * NAND flash this is equal to size of erase-block */
-		#address-cells = <1>;
-		#size-cells = <1>;
-		partition@0 {
-			label = "NAND.SPL";
-			reg = <0x00000000 0x000020000>;
-		};
-		partition@1 {
-			label = "NAND.SPL.backup1";
-			reg = <0x00020000 0x00020000>;
-		};
-		partition@2 {
-			label = "NAND.SPL.backup2";
-			reg = <0x00040000 0x00020000>;
-		};
-		partition@3 {
-			label = "NAND.SPL.backup3";
-			reg = <0x00060000 0x00020000>;
-		};
-		partition@4 {
-			label = "NAND.u-boot-spl-os";
-			reg = <0x00080000 0x00040000>;
-		};
-		partition@5 {
-			label = "NAND.u-boot";
-			reg = <0x000C0000 0x00100000>;
-		};
-		partition@6 {
-			label = "NAND.u-boot-env";
-			reg = <0x001C0000 0x00020000>;
-		};
-		partition@7 {
-			label = "NAND.u-boot-env.backup1";
-			reg = <0x001E0000 0x00020000>;
-		};
-		partition@8 {
-			label = "NAND.kernel";
-			reg = <0x00200000 0x00800000>;
-		};
-		partition@9 {
-			label = "NAND.file-system";
-			reg = <0x00A00000 0x0F600000>;
-		};
-	};
 };
 
-#include "tps65910.dtsi"
-
-&mcasp1 {
-		pinctrl-names = "default";
-		pinctrl-0 = <&am335x_evm_audio_pins>;
-
-		status = "okay";
-
-		op-mode = <0>;          /* MCASP_IIS_MODE */
-		tdm-slots = <2>;
-		/* 4 serializers */
-		serial-dir = <  /* 0: INACTIVE, 1: TX, 2: RX */
-			0 0 1 2
-		>;
-		tx-num-evt = <32>;
-		rx-num-evt = <32>;
-};
+/include/ "tps65910.dtsi"
 
 &tps {
 	vcc1-supply = <&vbat>;
@@ -610,71 +232,15 @@
 		};
 
 		vmmc_reg: regulator@12 {
-			regulator-min-microvolt = <1800000>;
-			regulator-max-microvolt = <3300000>;
 			regulator-always-on;
 		};
 	};
 };
 
-&mac {
-	pinctrl-names = "default", "sleep";
-	pinctrl-0 = <&cpsw_default>;
-	pinctrl-1 = <&cpsw_sleep>;
-	status = "okay";
-};
-
-&davinci_mdio {
-	pinctrl-names = "default", "sleep";
-	pinctrl-0 = <&davinci_mdio_default>;
-	pinctrl-1 = <&davinci_mdio_sleep>;
-	status = "okay";
-};
-
 &cpsw_emac0 {
 	phy_id = <&davinci_mdio>, <0>;
-	phy-mode = "rgmii-txid";
 };
 
 &cpsw_emac1 {
 	phy_id = <&davinci_mdio>, <1>;
-	phy-mode = "rgmii-txid";
-};
-
-&tscadc {
-	status = "okay";
-	tsc {
-		ti,wires = <4>;
-		ti,x-plate-resistance = <200>;
-		ti,coordinate-readouts = <5>;
-		ti,wire-config = <0x00 0x11 0x22 0x33>;
-		ti,charge-delay = <0x400>;
-	};
-
-	adc {
-		ti,adc-channels = <4 5 6 7>;
-	};
-};
-
-&mmc1 {
-	status = "okay";
-	vmmc-supply = <&vmmc_reg>;
-	bus-width = <4>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&mmc1_pins>;
-	cd-gpios = <&gpio0 6 GPIO_ACTIVE_HIGH>;
-};
-
-&sham {
-	status = "okay";
-};
-
-&aes {
-	status = "okay";
-};
-
-&dcan1 {
-	status = "disabled";	/* Enable only if Profile 1 is selected */
-	pinctrl-names = "default";
-	pinctrl-0 = <&dcan1_pins_default>;
 };
diff -urNp a/arch/arm/boot/dts/am335x-evmsk.dts b/arch/arm/boot/dts/am335x-evmsk.dts
--- a/arch/arm/boot/dts/am335x-evmsk.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/am335x-evmsk.dts	2015-10-27 00:45:05.000000000 +0000
@@ -13,8 +13,7 @@
 
 /dts-v1/;
 
-#include "am33xx.dtsi"
-#include <dt-bindings/pwm/pwm.h>
+/include/ "am33xx.dtsi"
 
 / {
 	model = "TI AM335x EVM-SK";
@@ -31,6 +30,72 @@
 		reg = <0x80000000 0x10000000>; /* 256 MB */
 	};
 
+	am33xx_pinmux: pinmux@44e10800 {
+		pinctrl-names = "default";
+		pinctrl-0 = <&user_leds_s0 &gpio_keys_s0>;
+
+		user_leds_s0: user_leds_s0 {
+			pinctrl-single,pins = <
+				0x10 0x7	/* gpmc_ad4.gpio1_4, OUTPUT | MODE7 */
+				0x14 0x7	/* gpmc_ad5.gpio1_5, OUTPUT | MODE7 */
+				0x18 0x7	/* gpmc_ad6.gpio1_6, OUTPUT | MODE7 */
+				0x1c 0x7	/* gpmc_ad7.gpio1_7, OUTPUT | MODE7 */
+			>;
+		};
+
+		gpio_keys_s0: gpio_keys_s0 {
+			pinctrl-single,pins = <
+				0x94 0x27	/* gpmc_oen_ren.gpio2_3, INPUT | MODE7 */
+				0x90 0x27	/* gpmc_advn_ale.gpio2_2, INPUT | MODE7 */
+				0x70 0x27	/* gpmc_wait0.gpio0_30, INPUT | MODE7 */
+				0x9c 0x27	/* gpmc_ben0_cle.gpio2_5, INPUT | MODE7 */
+			>;
+		};
+	};
+
+	ocp {
+		uart1: serial@44e09000 {
+			status = "okay";
+		};
+
+		i2c0: i2c@44e0b000 {
+			status = "okay";
+			clock-frequency = <400000>;
+
+			tps: tps@2d {
+				reg = <0x2d>;
+			};
+
+			lis331dlh: lis331dlh@18 {
+				compatible = "st,lis331dlh", "st,lis3lv02d";
+				reg = <0x18>;
+				Vdd-supply = <&lis3_reg>;
+				Vdd_IO-supply = <&lis3_reg>;
+
+				st,click-single-x;
+				st,click-single-y;
+				st,click-single-z;
+				st,click-thresh-x = <10>;
+				st,click-thresh-y = <10>;
+				st,click-thresh-z = <10>;
+				st,irq1-click;
+				st,irq2-click;
+				st,wakeup-x-lo;
+				st,wakeup-x-hi;
+				st,wakeup-y-lo;
+				st,wakeup-y-hi;
+				st,wakeup-z-lo;
+				st,wakeup-z-hi;
+				st,min-limit-x = <120>;
+				st,min-limit-y = <120>;
+				st,min-limit-z = <140>;
+				st,max-limit-x = <550>;
+				st,max-limit-y = <550>;
+				st,max-limit-z = <750>;
+			};
+		};
+	};
+
 	vbat: fixedregulator@0 {
 		compatible = "regulator-fixed";
 		regulator-name = "vbat";
@@ -45,57 +110,31 @@
 		regulator-boot-on;
 	};
 
-	wl12xx_vmmc: fixedregulator@2 {
-		pinctrl-names = "default";
-		pinctrl-0 = <&wl12xx_gpio>;
-		compatible = "regulator-fixed";
-		regulator-name = "vwl1271";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <1800000>;
-		gpio = <&gpio1 29 0>;
-		startup-delay-us = <70000>;
-		enable-active-high;
-	};
-
-	vtt_fixed: fixedregulator@3 {
-		compatible = "regulator-fixed";
-		regulator-name = "vtt";
-		regulator-min-microvolt = <1500000>;
-		regulator-max-microvolt = <1500000>;
-		gpio = <&gpio0 7 GPIO_ACTIVE_HIGH>;
-		regulator-always-on;
-		regulator-boot-on;
-		enable-active-high;
-	};
-
 	leds {
-		pinctrl-names = "default";
-		pinctrl-0 = <&user_leds_s0>;
-
 		compatible = "gpio-leds";
 
 		led@1 {
 			label = "evmsk:green:usr0";
-			gpios = <&gpio1 4 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 4 0>;
 			default-state = "off";
 		};
 
 		led@2 {
 			label = "evmsk:green:usr1";
-			gpios = <&gpio1 5 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 5 0>;
 			default-state = "off";
 		};
 
 		led@3 {
 			label = "evmsk:green:mmc0";
-			gpios = <&gpio1 6 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 6 0>;
 			linux,default-trigger = "mmc0";
 			default-state = "off";
 		};
 
 		led@4 {
 			label = "evmsk:green:heartbeat";
-			gpios = <&gpio1 7 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 7 0>;
 			linux,default-trigger = "heartbeat";
 			default-state = "off";
 		};
@@ -109,410 +148,31 @@
 		switch@1 {
 			label = "button0";
 			linux,code = <0x100>;
-			gpios = <&gpio2 3 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio2 3 0>;
 		};
 
 		switch@2 {
 			label = "button1";
 			linux,code = <0x101>;
-			gpios = <&gpio2 2 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio2 2 0>;
 		};
 
 		switch@3 {
 			label = "button2";
 			linux,code = <0x102>;
-			gpios = <&gpio0 30 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 30 0>;
 			gpio-key,wakeup;
 		};
 
 		switch@4 {
 			label = "button3";
 			linux,code = <0x103>;
-			gpios = <&gpio2 5 GPIO_ACTIVE_HIGH>;
-		};
-	};
-
-	backlight {
-		compatible = "pwm-backlight";
-		pwms = <&ecap2 0 50000 PWM_POLARITY_INVERTED>;
-		brightness-levels = <0 58 61 66 75 90 125 170 255>;
-		default-brightness-level = <8>;
-	};
-
-	sound {
-		compatible = "ti,da830-evm-audio";
-		ti,model = "AM335x-EVMSK";
-		ti,audio-codec = <&tlv320aic3106>;
-		ti,mcasp-controller = <&mcasp1>;
-		ti,codec-clock-rate = <24000000>;
-		ti,audio-routing =
-			"Headphone Jack",       "HPLOUT",
-			"Headphone Jack",       "HPROUT";
-	};
-
-	panel {
-		compatible = "ti,tilcdc,panel";
-		pinctrl-names = "default", "sleep";
-		pinctrl-0 = <&lcd_pins_default>;
-		pinctrl-1 = <&lcd_pins_sleep>;
-		status = "okay";
-		panel-info {
-			ac-bias           = <255>;
-			ac-bias-intrpt    = <0>;
-			dma-burst-sz      = <16>;
-			bpp               = <32>;
-			fdd               = <0x80>;
-			sync-edge         = <0>;
-			sync-ctrl         = <1>;
-			raster-order      = <0>;
-			fifo-th           = <0>;
-		};
-		display-timings {
-			480x272 {
-				hactive         = <480>;
-				vactive         = <272>;
-				hback-porch     = <43>;
-				hfront-porch    = <8>;
-				hsync-len       = <4>;
-				vback-porch     = <12>;
-				vfront-porch    = <4>;
-				vsync-len       = <10>;
-				clock-frequency = <9000000>;
-				hsync-active    = <0>;
-				vsync-active    = <0>;
-			};
+			gpios = <&gpio2 5 0>;
 		};
 	};
 };
 
-&am33xx_pinmux {
-	pinctrl-names = "default";
-	pinctrl-0 = <&gpio_keys_s0 &clkout2_pin>;
-
-	lcd_pins_default: lcd_pins_default {
-		pinctrl-single,pins = <
-			0x20 (PIN_OUTPUT | MUX_MODE1)	/* gpmc_ad8.lcd_data23 */
-			0x24 (PIN_OUTPUT | MUX_MODE1)	/* gpmc_ad9.lcd_data22 */
-			0x28 (PIN_OUTPUT | MUX_MODE1)	/* gpmc_ad10.lcd_data21 */
-			0x2c (PIN_OUTPUT | MUX_MODE1)	/* gpmc_ad11.lcd_data20 */
-			0x30 (PIN_OUTPUT | MUX_MODE1)	/* gpmc_ad12.lcd_data19 */
-			0x34 (PIN_OUTPUT | MUX_MODE1)	/* gpmc_ad13.lcd_data18 */
-			0x38 (PIN_OUTPUT | MUX_MODE1)	/* gpmc_ad14.lcd_data17 */
-			0x3c (PIN_OUTPUT | MUX_MODE1)	/* gpmc_ad15.lcd_data16 */
-			0xa0 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data0.lcd_data0 */
-			0xa4 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data1.lcd_data1 */
-			0xa8 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data2.lcd_data2 */
-			0xac (PIN_OUTPUT | MUX_MODE0)	/* lcd_data3.lcd_data3 */
-			0xb0 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data4.lcd_data4 */
-			0xb4 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data5.lcd_data5 */
-			0xb8 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data6.lcd_data6 */
-			0xbc (PIN_OUTPUT | MUX_MODE0)	/* lcd_data7.lcd_data7 */
-			0xc0 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data8.lcd_data8 */
-			0xc4 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data9.lcd_data9 */
-			0xc8 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data10.lcd_data10 */
-			0xcc (PIN_OUTPUT | MUX_MODE0)	/* lcd_data11.lcd_data11 */
-			0xd0 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data12.lcd_data12 */
-			0xd4 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data13.lcd_data13 */
-			0xd8 (PIN_OUTPUT | MUX_MODE0)	/* lcd_data14.lcd_data14 */
-			0xdc (PIN_OUTPUT | MUX_MODE0)	/* lcd_data15.lcd_data15 */
-			0xe0 (PIN_OUTPUT | MUX_MODE0)	/* lcd_vsync.lcd_vsync */
-			0xe4 (PIN_OUTPUT | MUX_MODE0)	/* lcd_hsync.lcd_hsync */
-			0xe8 (PIN_OUTPUT | MUX_MODE0)	/* lcd_pclk.lcd_pclk */
-			0xec (PIN_OUTPUT | MUX_MODE0)	/* lcd_ac_bias_en.lcd_ac_bias_en */
-		>;
-	};
-
-	lcd_pins_sleep: lcd_pins_sleep {
-		pinctrl-single,pins = <
-			0x20 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad8.lcd_data23 */
-			0x24 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad9.lcd_data22 */
-			0x28 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad10.lcd_data21 */
-			0x2c (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad11.lcd_data20 */
-			0x30 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad12.lcd_data19 */
-			0x34 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad13.lcd_data18 */
-			0x38 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad14.lcd_data17 */
-			0x3c (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad15.lcd_data16 */
-			0xa0 (PULL_DISABLE | MUX_MODE7)	/* lcd_data0.lcd_data0 */
-			0xa4 (PULL_DISABLE | MUX_MODE7)	/* lcd_data1.lcd_data1 */
-			0xa8 (PULL_DISABLE | MUX_MODE7)	/* lcd_data2.lcd_data2 */
-			0xac (PULL_DISABLE | MUX_MODE7)	/* lcd_data3.lcd_data3 */
-			0xb0 (PULL_DISABLE | MUX_MODE7)	/* lcd_data4.lcd_data4 */
-			0xb4 (PULL_DISABLE | MUX_MODE7)	/* lcd_data5.lcd_data5 */
-			0xb8 (PULL_DISABLE | MUX_MODE7)	/* lcd_data6.lcd_data6 */
-			0xbc (PULL_DISABLE | MUX_MODE7)	/* lcd_data7.lcd_data7 */
-			0xc0 (PULL_DISABLE | MUX_MODE7)	/* lcd_data8.lcd_data8 */
-			0xc4 (PULL_DISABLE | MUX_MODE7)	/* lcd_data9.lcd_data9 */
-			0xc8 (PULL_DISABLE | MUX_MODE7)	/* lcd_data10.lcd_data10 */
-			0xcc (PULL_DISABLE | MUX_MODE7)	/* lcd_data11.lcd_data11 */
-			0xd0 (PULL_DISABLE | MUX_MODE7)	/* lcd_data12.lcd_data12 */
-			0xd4 (PULL_DISABLE | MUX_MODE7)	/* lcd_data13.lcd_data13 */
-			0xd8 (PULL_DISABLE | MUX_MODE7)	/* lcd_data14.lcd_data14 */
-			0xdc (PULL_DISABLE | MUX_MODE7)	/* lcd_data15.lcd_data15 */
-			0xe0 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* lcd_vsync.lcd_vsync */
-			0xe4 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* lcd_hsync.lcd_hsync */
-			0xe8 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* lcd_pclk.lcd_pclk */
-			0xec (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* lcd_ac_bias_en.lcd_ac_bias_en */
-		>;
-	};
-
-
-	user_leds_s0: user_leds_s0 {
-		pinctrl-single,pins = <
-			0x10 (PIN_OUTPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad4.gpio1_4 */
-			0x14 (PIN_OUTPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad5.gpio1_5 */
-			0x18 (PIN_OUTPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad6.gpio1_6 */
-			0x1c (PIN_OUTPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ad7.gpio1_7 */
-		>;
-	};
-
-	gpio_keys_s0: gpio_keys_s0 {
-		pinctrl-single,pins = <
-			0x94 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_oen_ren.gpio2_3 */
-			0x90 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_advn_ale.gpio2_2 */
-			0x70 (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_wait0.gpio0_30 */
-			0x9c (PIN_INPUT_PULLDOWN | MUX_MODE7)	/* gpmc_ben0_cle.gpio2_5 */
-		>;
-	};
-
-	i2c0_pins: pinmux_i2c0_pins {
-		pinctrl-single,pins = <
-			0x188 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c0_sda.i2c0_sda */
-			0x18c (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c0_scl.i2c0_scl */
-		>;
-	};
-
-	uart0_pins: pinmux_uart0_pins {
-		pinctrl-single,pins = <
-			0x170 (PIN_INPUT_PULLUP | MUX_MODE0)	/* uart0_rxd.uart0_rxd */
-			0x174 (PIN_OUTPUT_PULLDOWN | MUX_MODE0)		/* uart0_txd.uart0_txd */
-		>;
-	};
-
-	clkout2_pin: pinmux_clkout2_pin {
-		pinctrl-single,pins = <
-			0x1b4 (PIN_OUTPUT_PULLDOWN | MUX_MODE3)		/* xdma_event_intr1.clkout2 */
-		>;
-	};
-
-	ecap2_pins: backlight_pins {
-		pinctrl-single,pins = <
-			0x19c 0x4	/* mcasp0_ahclkr.ecap2_in_pwm2_out MODE4 */
-		>;
-	};
-
-	cpsw_default: cpsw_default {
-		pinctrl-single,pins = <
-			/* Slave 1 */
-			0x114 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txen.rgmii1_tctl */
-			0x118 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxdv.rgmii1_rctl */
-			0x11c (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txd3.rgmii1_td3 */
-			0x120 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txd2.rgmii1_td2 */
-			0x124 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txd1.rgmii1_td1 */
-			0x128 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txd0.rgmii1_td0 */
-			0x12c (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* mii1_txclk.rgmii1_tclk */
-			0x130 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxclk.rgmii1_rclk */
-			0x134 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxd3.rgmii1_rd3 */
-			0x138 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxd2.rgmii1_rd2 */
-			0x13c (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxd1.rgmii1_rd1 */
-			0x140 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* mii1_rxd0.rgmii1_rd0 */
-
-			/* Slave 2 */
-			0x40 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a0.rgmii2_tctl */
-			0x44 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a1.rgmii2_rctl */
-			0x48 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a2.rgmii2_td3 */
-			0x4c (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a3.rgmii2_td2 */
-			0x50 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a4.rgmii2_td1 */
-			0x54 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a5.rgmii2_td0 */
-			0x58 (PIN_OUTPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a6.rgmii2_tclk */
-			0x5c (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a7.rgmii2_rclk */
-			0x60 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a8.rgmii2_rd3 */
-			0x64 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a9.rgmii2_rd2 */
-			0x68 (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a10.rgmii2_rd1 */
-			0x6c (PIN_INPUT_PULLDOWN | MUX_MODE2)	/* gpmc_a11.rgmii2_rd0 */
-		>;
-	};
-
-	cpsw_sleep: cpsw_sleep {
-		pinctrl-single,pins = <
-			/* Slave 1 reset value */
-			0x114 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x118 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x11c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x120 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x124 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x128 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x12c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x130 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x134 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x138 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x13c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x140 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-
-			/* Slave 2 reset value*/
-			0x40 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x44 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x48 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x4c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x50 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x54 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x58 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x5c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x60 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x64 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x68 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x6c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-		>;
-	};
-
-	davinci_mdio_default: davinci_mdio_default {
-		pinctrl-single,pins = <
-			/* MDIO */
-			0x148 (PIN_INPUT_PULLUP | SLEWCTRL_FAST | MUX_MODE0)	/* mdio_data.mdio_data */
-			0x14c (PIN_OUTPUT_PULLUP | MUX_MODE0)			/* mdio_clk.mdio_clk */
-		>;
-	};
-
-	davinci_mdio_sleep: davinci_mdio_sleep {
-		pinctrl-single,pins = <
-			/* MDIO reset value */
-			0x148 (PIN_INPUT_PULLDOWN | MUX_MODE7)
-			0x14c (PIN_INPUT_PULLDOWN | MUX_MODE7)
-		>;
-	};
-
-	mmc1_pins: pinmux_mmc1_pins {
-		pinctrl-single,pins = <
-			0x160 (PIN_INPUT | MUX_MODE7) /* spi0_cs1.gpio0_6 */
-		>;
-	};
-
-	mcasp1_pins: mcasp1_pins {
-		pinctrl-single,pins = <
-			0x10c (PIN_INPUT_PULLDOWN | MUX_MODE4) /* mii1_crs.mcasp1_aclkx */
-			0x110 (PIN_INPUT_PULLDOWN | MUX_MODE4) /* mii1_rxerr.mcasp1_fsx */
-			0x108 (PIN_OUTPUT_PULLDOWN | MUX_MODE4) /* mii1_col.mcasp1_axr2 */
-			0x144 (PIN_INPUT_PULLDOWN | MUX_MODE4) /* rmii1_ref_clk.mcasp1_axr3 */
-		>;
-	};
-
-	mmc2_pins: pinmux_mmc2_pins {
-		pinctrl-single,pins = <
-			0x74 (PIN_INPUT_PULLUP | MUX_MODE7) /* gpmc_wpn.gpio0_31 */
-			0x80 (PIN_INPUT_PULLUP | MUX_MODE2) /* gpmc_csn1.mmc1_clk */
-			0x84 (PIN_INPUT_PULLUP | MUX_MODE2) /* gpmc_csn2.mmc1_cmd */
-			0x00 (PIN_INPUT_PULLUP | MUX_MODE1) /* gpmc_ad0.mmc1_dat0 */
-			0x04 (PIN_INPUT_PULLUP | MUX_MODE1) /* gpmc_ad1.mmc1_dat1 */
-			0x08 (PIN_INPUT_PULLUP | MUX_MODE1) /* gpmc_ad2.mmc1_dat2 */
-			0x0c (PIN_INPUT_PULLUP | MUX_MODE1) /* gpmc_ad3.mmc1_dat3 */
-		>;
-	};
-
-	wl12xx_gpio: pinmux_wl12xx_gpio {
-		pinctrl-single,pins = <
-			0x7c (PIN_OUTPUT_PULLUP | MUX_MODE7) /* gpmc_csn0.gpio1_29 */
-		>;
-	};
-};
-
-&uart0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&uart0_pins>;
-
-	status = "okay";
-};
-
-&i2c0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&i2c0_pins>;
-
-	status = "okay";
-	clock-frequency = <400000>;
-
-	tps: tps@2d {
-		reg = <0x2d>;
-	};
-
-	lis331dlh: lis331dlh@18 {
-		compatible = "st,lis331dlh", "st,lis3lv02d";
-		reg = <0x18>;
-		Vdd-supply = <&lis3_reg>;
-		Vdd_IO-supply = <&lis3_reg>;
-
-		st,click-single-x;
-		st,click-single-y;
-		st,click-single-z;
-		st,click-thresh-x = <10>;
-		st,click-thresh-y = <10>;
-		st,click-thresh-z = <10>;
-		st,irq1-click;
-		st,irq2-click;
-		st,wakeup-x-lo;
-		st,wakeup-x-hi;
-		st,wakeup-y-lo;
-		st,wakeup-y-hi;
-		st,wakeup-z-lo;
-		st,wakeup-z-hi;
-		st,min-limit-x = <120>;
-		st,min-limit-y = <120>;
-		st,min-limit-z = <140>;
-		st,max-limit-x = <550>;
-		st,max-limit-y = <550>;
-		st,max-limit-z = <750>;
-	};
-
-	tlv320aic3106: tlv320aic3106@1b {
-		compatible = "ti,tlv320aic3106";
-		reg = <0x1b>;
-		status = "okay";
-
-		/* Regulators */
-		AVDD-supply = <&vaux2_reg>;
-		IOVDD-supply = <&vaux2_reg>;
-		DRVDD-supply = <&vaux2_reg>;
-		DVDD-supply = <&vbat>;
-	};
-};
-
-&usb {
-	status = "okay";
-};
-
-&usb_ctrl_mod {
-	status = "okay";
-};
-
-&usb0_phy {
-	status = "okay";
-};
-
-&usb1_phy {
-	status = "okay";
-};
-
-&usb0 {
-	status = "okay";
-};
-
-&usb1 {
-	status = "okay";
-	dr_mode = "host";
-};
-
-&cppi41dma  {
-	status = "okay";
-};
-
-&epwmss2 {
-	status = "okay";
-
-	ecap2: ecap@48304100 {
-		status = "okay";
-		pinctrl-names = "default";
-		pinctrl-0 = <&ecap2_pins>;
-	};
-};
-
-#include "tps65910.dtsi"
+/include/ "tps65910.dtsi"
 
 &tps {
 	vcc1-supply = <&vbat>;
@@ -584,97 +244,7 @@
 		};
 
 		vmmc_reg: regulator@12 {
-			regulator-min-microvolt = <1800000>;
-			regulator-max-microvolt = <3300000>;
 			regulator-always-on;
 		};
 	};
 };
-
-&mac {
-	pinctrl-names = "default", "sleep";
-	pinctrl-0 = <&cpsw_default>;
-	pinctrl-1 = <&cpsw_sleep>;
-	dual_emac = <1>;
-	status = "okay";
-};
-
-&davinci_mdio {
-	pinctrl-names = "default", "sleep";
-	pinctrl-0 = <&davinci_mdio_default>;
-	pinctrl-1 = <&davinci_mdio_sleep>;
-	status = "okay";
-};
-
-&cpsw_emac0 {
-	phy_id = <&davinci_mdio>, <0>;
-	phy-mode = "rgmii-txid";
-	dual_emac_res_vlan = <1>;
-};
-
-&cpsw_emac1 {
-	phy_id = <&davinci_mdio>, <1>;
-	phy-mode = "rgmii-txid";
-	dual_emac_res_vlan = <2>;
-};
-
-&mmc1 {
-	status = "okay";
-	vmmc-supply = <&vmmc_reg>;
-	bus-width = <4>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&mmc1_pins>;
-	cd-gpios = <&gpio0 6 GPIO_ACTIVE_HIGH>;
-};
-
-&sham {
-	status = "okay";
-};
-
-&aes {
-	status = "okay";
-};
-
-&gpio0 {
-	ti,no-reset-on-init;
-};
-
-&mmc2 {
-	status = "okay";
-	vmmc-supply = <&wl12xx_vmmc>;
-	ti,non-removable;
-	bus-width = <4>;
-	cap-power-off-card;
-	pinctrl-names = "default";
-	pinctrl-0 = <&mmc2_pins>;
-};
-
-&mcasp1 {
-		pinctrl-names = "default";
-		pinctrl-0 = <&mcasp1_pins>;
-
-		status = "okay";
-
-		op-mode = <0>;          /* MCASP_IIS_MODE */
-		tdm-slots = <2>;
-		/* 4 serializers */
-		serial-dir = <  /* 0: INACTIVE, 1: TX, 2: RX */
-			0 0 1 2
-		>;
-		tx-num-evt = <32>;
-		rx-num-evt = <32>;
-};
-
-&tscadc {
-	status = "okay";
-	tsc {
-		ti,wires = <4>;
-		ti,x-plate-resistance = <200>;
-		ti,coordinate-readouts = <5>;
-		ti,wire-config = <0x00 0x11 0x22 0x33>;
-	};
-};
-
-&lcdc {
-      status = "okay";
-};
diff -urNp a/arch/arm/boot/dts/am33xx.dtsi b/arch/arm/boot/dts/am33xx.dtsi
--- a/arch/arm/boot/dts/am33xx.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/am33xx.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,42 +8,26 @@
  * kind, whether express or implied.
  */
 
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/pinctrl/am33xx.h>
-
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	compatible = "ti,am33xx";
 	interrupt-parent = <&intc>;
 
 	aliases {
-		i2c0 = &i2c0;
-		i2c1 = &i2c1;
-		i2c2 = &i2c2;
-		serial0 = &uart0;
-		serial1 = &uart1;
-		serial2 = &uart2;
-		serial3 = &uart3;
-		serial4 = &uart4;
-		serial5 = &uart5;
+		serial0 = &uart1;
+		serial1 = &uart2;
+		serial2 = &uart3;
+		serial3 = &uart4;
+		serial4 = &uart5;
+		serial5 = &uart6;
 		d_can0 = &dcan0;
 		d_can1 = &dcan1;
-		usb0 = &usb0;
-		usb1 = &usb1;
-		phy0 = &usb0_phy;
-		phy1 = &usb1_phy;
-		ethernet0 = &cpsw_emac0;
-		ethernet1 = &cpsw_emac1;
 	};
 
 	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
 		cpu@0 {
 			compatible = "arm,cortex-a8";
-			device_type = "cpu";
-			reg = <0>;
 
 			/*
 			 * To consider voltage drop between PMIC and SoC,
@@ -58,21 +42,12 @@
 				275000  1125000
 			>;
 			voltage-tolerance = <2>; /* 2 percentage */
-
-			clocks = <&dpll_mpu_ck>;
-			clock-names = "cpu";
-
 			clock-latency = <300000>; /* From omap-cpufreq driver */
 		};
 	};
 
-	pmu {
-		compatible = "arm,cortex-a8-pmu";
-		interrupts = <3>;
-	};
-
 	/*
-	 * The soc node represents the soc top level view. It is used for IPs
+	 * The soc node represents the soc top level view. It is uses for IPs
 	 * that are not memory mapped in the MPU view or for the MPU itself.
 	 */
 	soc {
@@ -83,11 +58,6 @@
 		};
 	};
 
-	am33xx_control_module: control_module@4a002000 {
-		compatible = "syscon";
-		reg = <0x44e10000 0x7fc>;
-	};
-
 	am33xx_pinmux: pinmux@44e10800 {
 		compatible = "pinctrl-single";
 		reg = <0x44e10800 0x0238>;
@@ -99,8 +69,8 @@
 
 	/*
 	 * XXX: Use a flat representation of the AM33XX interconnect.
-	 * The real AM33XX interconnect network is quite complex. Since
-	 * it will not bring real advantage to represent that in DT
+	 * The real AM33XX interconnect network is quite complex.Since
+	 * that will not bring real advantage to represent that in DT
 	 * for the moment, just use a fake OCP bus entry to represent
 	 * the whole bus hierarchy.
 	 */
@@ -111,60 +81,21 @@
 		ranges;
 		ti,hwmods = "l3_main";
 
-		prcm: prcm@44e00000 {
-			compatible = "ti,am3-prcm";
-			reg = <0x44e00000 0x4000>;
-
-			prcm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			prcm_clockdomains: clockdomains {
-			};
-		};
-
-		scrm: scrm@44e10000 {
-			compatible = "ti,am3-scrm";
-			reg = <0x44e10000 0x2000>;
-
-			scrm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			scrm_clockdomains: clockdomains {
-			};
-		};
-
-		cm: syscon@44e10000 {
-			compatible = "ti,am33xx-controlmodule", "syscon";
-			reg = <0x44e10000 0x800>;
-		};
-
 		intc: interrupt-controller@48200000 {
-			compatible = "ti,am33xx-intc";
+			compatible = "ti,omap2-intc";
 			interrupt-controller;
 			#interrupt-cells = <1>;
+			ti,intc-size = <128>;
 			reg = <0x48200000 0x1000>;
 		};
 
-		edma: edma@49000000 {
-			compatible = "ti,edma3";
-			ti,hwmods = "tpcc", "tptc0", "tptc1", "tptc2";
-			reg =	<0x49000000 0x10000>,
-				<0x44e10f90 0x40>;
-			interrupts = <12 13 14>;
-			#dma-cells = <1>;
-		};
-
 		gpio0: gpio@44e07000 {
 			compatible = "ti,omap4-gpio";
 			ti,hwmods = "gpio1";
 			gpio-controller;
 			#gpio-cells = <2>;
 			interrupt-controller;
-			#interrupt-cells = <2>;
+			#interrupt-cells = <1>;
 			reg = <0x44e07000 0x1000>;
 			interrupts = <96>;
 		};
@@ -175,7 +106,7 @@
 			gpio-controller;
 			#gpio-cells = <2>;
 			interrupt-controller;
-			#interrupt-cells = <2>;
+			#interrupt-cells = <1>;
 			reg = <0x4804c000 0x1000>;
 			interrupts = <98>;
 		};
@@ -186,7 +117,7 @@
 			gpio-controller;
 			#gpio-cells = <2>;
 			interrupt-controller;
-			#interrupt-cells = <2>;
+			#interrupt-cells = <1>;
 			reg = <0x481ac000 0x1000>;
 			interrupts = <32>;
 		};
@@ -197,45 +128,39 @@
 			gpio-controller;
 			#gpio-cells = <2>;
 			interrupt-controller;
-			#interrupt-cells = <2>;
+			#interrupt-cells = <1>;
 			reg = <0x481ae000 0x1000>;
 			interrupts = <62>;
 		};
 
-		uart0: serial@44e09000 {
+		uart1: serial@44e09000 {
 			compatible = "ti,omap3-uart";
 			ti,hwmods = "uart1";
 			clock-frequency = <48000000>;
 			reg = <0x44e09000 0x2000>;
 			interrupts = <72>;
 			status = "disabled";
-			dmas = <&edma 26>, <&edma 27>;
-			dma-names = "tx", "rx";
 		};
 
-		uart1: serial@48022000 {
+		uart2: serial@48022000 {
 			compatible = "ti,omap3-uart";
 			ti,hwmods = "uart2";
 			clock-frequency = <48000000>;
 			reg = <0x48022000 0x2000>;
 			interrupts = <73>;
 			status = "disabled";
-			dmas = <&edma 28>, <&edma 29>;
-			dma-names = "tx", "rx";
 		};
 
-		uart2: serial@48024000 {
+		uart3: serial@48024000 {
 			compatible = "ti,omap3-uart";
 			ti,hwmods = "uart3";
 			clock-frequency = <48000000>;
 			reg = <0x48024000 0x2000>;
 			interrupts = <74>;
 			status = "disabled";
-			dmas = <&edma 30>, <&edma 31>;
-			dma-names = "tx", "rx";
 		};
 
-		uart3: serial@481a6000 {
+		uart4: serial@481a6000 {
 			compatible = "ti,omap3-uart";
 			ti,hwmods = "uart4";
 			clock-frequency = <48000000>;
@@ -244,7 +169,7 @@
 			status = "disabled";
 		};
 
-		uart4: serial@481a8000 {
+		uart5: serial@481a8000 {
 			compatible = "ti,omap3-uart";
 			ti,hwmods = "uart5";
 			clock-frequency = <48000000>;
@@ -253,7 +178,7 @@
 			status = "disabled";
 		};
 
-		uart5: serial@481aa000 {
+		uart6: serial@481aa000 {
 			compatible = "ti,omap3-uart";
 			ti,hwmods = "uart6";
 			clock-frequency = <48000000>;
@@ -292,51 +217,6 @@
 			status = "disabled";
 		};
 
-		mmc1: mmc@48060000 {
-			compatible = "ti,omap4-hsmmc";
-			ti,hwmods = "mmc1";
-			ti,dual-volt;
-			ti,needs-special-reset;
-			ti,needs-special-hs-handling;
-			dmas = <&edma 24
-				&edma 25>;
-			dma-names = "tx", "rx";
-			interrupts = <64>;
-			interrupt-parent = <&intc>;
-			reg = <0x48060000 0x1000>;
-			status = "disabled";
-		};
-
-		mmc2: mmc@481d8000 {
-			compatible = "ti,omap4-hsmmc";
-			ti,hwmods = "mmc2";
-			ti,needs-special-reset;
-			dmas = <&edma 2
-				&edma 3>;
-			dma-names = "tx", "rx";
-			interrupts = <28>;
-			interrupt-parent = <&intc>;
-			reg = <0x481d8000 0x1000>;
-			status = "disabled";
-		};
-
-		mmc3: mmc@47810000 {
-			compatible = "ti,omap4-hsmmc";
-			ti,hwmods = "mmc3";
-			ti,needs-special-reset;
-			interrupts = <29>;
-			interrupt-parent = <&intc>;
-			reg = <0x47810000 0x1000>;
-			status = "disabled";
-		};
-
-		hwspinlock: spinlock@480ca000 {
-			compatible = "ti,omap4-hwspinlock";
-			reg = <0x480ca000 0x1000>;
-			ti,hwmods = "spinlock";
-			#hwlock-cells = <1>;
-		};
-
 		wdt2: wdt@44e35000 {
 			compatible = "ti,omap3-wdt";
 			ti,hwmods = "wd_timer2";
@@ -344,42 +224,24 @@
 			interrupts = <91>;
 		};
 
-		dcan0: can@481cc000 {
-			compatible = "ti,am3352-d_can";
+		dcan0: d_can@481cc000 {
+			compatible = "bosch,d_can";
 			ti,hwmods = "d_can0";
-			reg = <0x481cc000 0x2000>;
-			clocks = <&dcan0_fck>;
-			clock-names = "fck";
-			syscon-raminit = <&am33xx_control_module 0x644 0>;
+			reg = <0x481cc000 0x2000
+				0x44e10644 0x4>;
 			interrupts = <52>;
 			status = "disabled";
 		};
 
-		dcan1: can@481d0000 {
-			compatible = "ti,am3352-d_can";
+		dcan1: d_can@481d0000 {
+			compatible = "bosch,d_can";
 			ti,hwmods = "d_can1";
-			reg = <0x481d0000 0x2000>;
-			clocks = <&dcan1_fck>;
-			clock-names = "fck";
-			syscon-raminit = <&am33xx_control_module 0x644 1>;
+			reg = <0x481d0000 0x2000
+				0x44e10644 0x4>;
 			interrupts = <55>;
 			status = "disabled";
 		};
 
-		mailbox: mailbox@480C8000 {
-			compatible = "ti,omap4-mailbox";
-			reg = <0x480C8000 0x200>;
-			interrupts = <77>;
-			ti,hwmods = "mailbox";
-			#mbox-cells = <1>;
-			ti,mbox-num-users = <4>;
-			ti,mbox-num-fifos = <8>;
-			mbox_wkupm3: wkup_m3 {
-				ti,mbox-tx = <0 0 0>;
-				ti,mbox-rx = <0 0 3>;
-			};
-		};
-
 		timer1: timer@44e31000 {
 			compatible = "ti,am335x-timer-1ms";
 			reg = <0x44e31000 0x400>;
@@ -434,8 +296,8 @@
 			ti,timer-pwm;
 		};
 
-		rtc: rtc@44e3e000 {
-			compatible = "ti,am3352-rtc", "ti,da830-rtc";
+		rtc@44e3e000 {
+			compatible = "ti,da830-rtc";
 			reg = <0x44e3e000 0x1000>;
 			interrupts = <75
 				      76>;
@@ -450,11 +312,6 @@
 			interrupts = <65>;
 			ti,spi-num-cs = <2>;
 			ti,hwmods = "spi0";
-			dmas = <&edma 16
-				&edma 17
-				&edma 18
-				&edma 19>;
-			dma-names = "tx0", "rx0", "tx1", "rx1";
 			status = "disabled";
 		};
 
@@ -466,237 +323,29 @@
 			interrupts = <125>;
 			ti,spi-num-cs = <2>;
 			ti,hwmods = "spi1";
-			dmas = <&edma 42
-				&edma 43
-				&edma 44
-				&edma 45>;
-			dma-names = "tx0", "rx0", "tx1", "rx1";
 			status = "disabled";
 		};
 
-		usb: usb@47400000 {
-			compatible = "ti,am33xx-usb";
-			reg = <0x47400000 0x1000>;
-			ranges;
-			#address-cells = <1>;
-			#size-cells = <1>;
+		usb@47400000 {
+			compatible = "ti,musb-am33xx";
+			reg = <0x47400000 0x1000	/* usbss */
+			       0x47401000 0x800		/* musb instance 0 */
+			       0x47401800 0x800>;	/* musb instance 1 */
+			interrupts = <17		/* usbss */
+				      18		/* musb instance 0 */
+				      19>;		/* musb instance 1 */
+			multipoint = <1>;
+			num-eps = <16>;
+			ram-bits = <12>;
+			port0-mode = <3>;
+			port1-mode = <3>;
+			power = <250>;
 			ti,hwmods = "usb_otg_hs";
-			status = "disabled";
-
-			usb_ctrl_mod: control@44e10620 {
-				compatible = "ti,am335x-usb-ctrl-module";
-				reg = <0x44e10620 0x10
-					0x44e10648 0x4>;
-				reg-names = "phy_ctrl", "wakeup";
-				status = "disabled";
-			};
-
-			usb0_phy: usb-phy@47401300 {
-				compatible = "ti,am335x-usb-phy";
-				reg = <0x47401300 0x100>;
-				reg-names = "phy";
-				status = "disabled";
-				ti,ctrl_mod = <&usb_ctrl_mod>;
-			};
-
-			usb0: usb@47401000 {
-				compatible = "ti,musb-am33xx";
-				status = "disabled";
-				reg = <0x47401400 0x400
-					0x47401000 0x200>;
-				reg-names = "mc", "control";
-
-				interrupts = <18>;
-				interrupt-names = "mc";
-				dr_mode = "otg";
-				mentor,multipoint = <1>;
-				mentor,num-eps = <16>;
-				mentor,ram-bits = <12>;
-				mentor,power = <500>;
-				phys = <&usb0_phy>;
-
-				dmas = <&cppi41dma  0 0 &cppi41dma  1 0
-					&cppi41dma  2 0 &cppi41dma  3 0
-					&cppi41dma  4 0 &cppi41dma  5 0
-					&cppi41dma  6 0 &cppi41dma  7 0
-					&cppi41dma  8 0 &cppi41dma  9 0
-					&cppi41dma 10 0 &cppi41dma 11 0
-					&cppi41dma 12 0 &cppi41dma 13 0
-					&cppi41dma 14 0 &cppi41dma  0 1
-					&cppi41dma  1 1 &cppi41dma  2 1
-					&cppi41dma  3 1 &cppi41dma  4 1
-					&cppi41dma  5 1 &cppi41dma  6 1
-					&cppi41dma  7 1 &cppi41dma  8 1
-					&cppi41dma  9 1 &cppi41dma 10 1
-					&cppi41dma 11 1 &cppi41dma 12 1
-					&cppi41dma 13 1 &cppi41dma 14 1>;
-				dma-names =
-					"rx1", "rx2", "rx3", "rx4", "rx5", "rx6", "rx7",
-					"rx8", "rx9", "rx10", "rx11", "rx12", "rx13",
-					"rx14", "rx15",
-					"tx1", "tx2", "tx3", "tx4", "tx5", "tx6", "tx7",
-					"tx8", "tx9", "tx10", "tx11", "tx12", "tx13",
-					"tx14", "tx15";
-			};
-
-			usb1_phy: usb-phy@47401b00 {
-				compatible = "ti,am335x-usb-phy";
-				reg = <0x47401b00 0x100>;
-				reg-names = "phy";
-				status = "disabled";
-				ti,ctrl_mod = <&usb_ctrl_mod>;
-			};
-
-			usb1: usb@47401800 {
-				compatible = "ti,musb-am33xx";
-				status = "disabled";
-				reg = <0x47401c00 0x400
-					0x47401800 0x200>;
-				reg-names = "mc", "control";
-				interrupts = <19>;
-				interrupt-names = "mc";
-				dr_mode = "otg";
-				mentor,multipoint = <1>;
-				mentor,num-eps = <16>;
-				mentor,ram-bits = <12>;
-				mentor,power = <500>;
-				phys = <&usb1_phy>;
-
-				dmas = <&cppi41dma 15 0 &cppi41dma 16 0
-					&cppi41dma 17 0 &cppi41dma 18 0
-					&cppi41dma 19 0 &cppi41dma 20 0
-					&cppi41dma 21 0 &cppi41dma 22 0
-					&cppi41dma 23 0 &cppi41dma 24 0
-					&cppi41dma 25 0 &cppi41dma 26 0
-					&cppi41dma 27 0 &cppi41dma 28 0
-					&cppi41dma 29 0 &cppi41dma 15 1
-					&cppi41dma 16 1 &cppi41dma 17 1
-					&cppi41dma 18 1 &cppi41dma 19 1
-					&cppi41dma 20 1 &cppi41dma 21 1
-					&cppi41dma 22 1 &cppi41dma 23 1
-					&cppi41dma 24 1 &cppi41dma 25 1
-					&cppi41dma 26 1 &cppi41dma 27 1
-					&cppi41dma 28 1 &cppi41dma 29 1>;
-				dma-names =
-					"rx1", "rx2", "rx3", "rx4", "rx5", "rx6", "rx7",
-					"rx8", "rx9", "rx10", "rx11", "rx12", "rx13",
-					"rx14", "rx15",
-					"tx1", "tx2", "tx3", "tx4", "tx5", "tx6", "tx7",
-					"tx8", "tx9", "tx10", "tx11", "tx12", "tx13",
-					"tx14", "tx15";
-			};
-
-			cppi41dma: dma-controller@47402000 {
-				compatible = "ti,am3359-cppi41";
-				reg =  <0x47400000 0x1000
-					0x47402000 0x1000
-					0x47403000 0x1000
-					0x47404000 0x4000>;
-				reg-names = "glue", "controller", "scheduler", "queuemgr";
-				interrupts = <17>;
-				interrupt-names = "glue";
-				#dma-cells = <2>;
-				#dma-channels = <30>;
-				#dma-requests = <256>;
-				status = "disabled";
-			};
-		};
-
-		epwmss0: epwmss@48300000 {
-			compatible = "ti,am33xx-pwmss";
-			reg = <0x48300000 0x10>;
-			ti,hwmods = "epwmss0";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			status = "disabled";
-			ranges = <0x48300100 0x48300100 0x80   /* ECAP */
-				  0x48300180 0x48300180 0x80   /* EQEP */
-				  0x48300200 0x48300200 0x80>; /* EHRPWM */
-
-			ecap0: ecap@48300100 {
-				compatible = "ti,am33xx-ecap";
-				#pwm-cells = <3>;
-				reg = <0x48300100 0x80>;
-				interrupts = <31>;
-				interrupt-names = "ecap0";
-				ti,hwmods = "ecap0";
-				status = "disabled";
-			};
-
-			ehrpwm0: ehrpwm@48300200 {
-				compatible = "ti,am33xx-ehrpwm";
-				#pwm-cells = <3>;
-				reg = <0x48300200 0x80>;
-				ti,hwmods = "ehrpwm0";
-				status = "disabled";
-			};
-		};
-
-		epwmss1: epwmss@48302000 {
-			compatible = "ti,am33xx-pwmss";
-			reg = <0x48302000 0x10>;
-			ti,hwmods = "epwmss1";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			status = "disabled";
-			ranges = <0x48302100 0x48302100 0x80   /* ECAP */
-				  0x48302180 0x48302180 0x80   /* EQEP */
-				  0x48302200 0x48302200 0x80>; /* EHRPWM */
-
-			ecap1: ecap@48302100 {
-				compatible = "ti,am33xx-ecap";
-				#pwm-cells = <3>;
-				reg = <0x48302100 0x80>;
-				interrupts = <47>;
-				interrupt-names = "ecap1";
-				ti,hwmods = "ecap1";
-				status = "disabled";
-			};
-
-			ehrpwm1: ehrpwm@48302200 {
-				compatible = "ti,am33xx-ehrpwm";
-				#pwm-cells = <3>;
-				reg = <0x48302200 0x80>;
-				ti,hwmods = "ehrpwm1";
-				status = "disabled";
-			};
-		};
-
-		epwmss2: epwmss@48304000 {
-			compatible = "ti,am33xx-pwmss";
-			reg = <0x48304000 0x10>;
-			ti,hwmods = "epwmss2";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			status = "disabled";
-			ranges = <0x48304100 0x48304100 0x80   /* ECAP */
-				  0x48304180 0x48304180 0x80   /* EQEP */
-				  0x48304200 0x48304200 0x80>; /* EHRPWM */
-
-			ecap2: ecap@48304100 {
-				compatible = "ti,am33xx-ecap";
-				#pwm-cells = <3>;
-				reg = <0x48304100 0x80>;
-				interrupts = <61>;
-				interrupt-names = "ecap2";
-				ti,hwmods = "ecap2";
-				status = "disabled";
-			};
-
-			ehrpwm2: ehrpwm@48304200 {
-				compatible = "ti,am33xx-ehrpwm";
-				#pwm-cells = <3>;
-				reg = <0x48304200 0x80>;
-				ti,hwmods = "ehrpwm2";
-				status = "disabled";
-			};
 		};
 
 		mac: ethernet@4a100000 {
 			compatible = "ti,cpsw";
 			ti,hwmods = "cpgmac0";
-			clocks = <&cpsw_125mhz_gclk>, <&cpsw_cpts_rft_clk>;
-			clock-names = "fck", "cpts";
 			cpdma_channels = <8>;
 			ale_entries = <1024>;
 			bd_ram_size = <0x2000>;
@@ -720,8 +369,6 @@
 			 */
 			interrupts = <40 41 42 43>;
 			ranges;
-			syscon = <&cm>;
-			status = "disabled";
 
 			davinci_mdio: mdio@4a101000 {
 				compatible = "ti,davinci_mdio";
@@ -730,7 +377,6 @@
 				ti,hwmods = "davinci_mdio";
 				bus_freq = <1000000>;
 				reg = <0x4a101000 0x100>;
-				status = "disabled";
 			};
 
 			cpsw_emac0: slave@4a100200 {
@@ -742,17 +388,13 @@
 				/* Filled in by U-Boot */
 				mac-address = [ 00 00 00 00 00 00 ];
 			};
-
-			phy_sel: cpsw-phy-sel@44e10650 {
-				compatible = "ti,am3352-cpsw-phy-sel";
-				reg= <0x44e10650 0x4>;
-				reg-names = "gmii-sel";
-			};
 		};
 
 		ocmcram: ocmcram@40300000 {
-			compatible = "mmio-sram";
-			reg = <0x40300000 0x10000>; /* 64k */
+			compatible = "ti,am3352-ocmcram";
+			reg = <0x40300000 0x10000>;
+			ti,hwmods = "ocmcram";
+			ti,no_idle_on_suspend;
 		};
 
 		wkup_m3: wkup_m3@44d00000 {
@@ -760,47 +402,11 @@
 			reg = <0x44d00000 0x4000	/* M3 UMEM */
 			       0x44d80000 0x2000>;	/* M3 DMEM */
 			ti,hwmods = "wkup_m3";
-			ti,no-reset-on-init;
-		};
-
-		elm: elm@48080000 {
-			compatible = "ti,am3352-elm";
-			reg = <0x48080000 0x2000>;
-			interrupts = <4>;
-			ti,hwmods = "elm";
-			status = "disabled";
-		};
-
-		lcdc: lcdc@4830e000 {
-			compatible = "ti,am33xx-tilcdc";
-			reg = <0x4830e000 0x1000>;
-			interrupt-parent = <&intc>;
-			interrupts = <36>;
-			ti,hwmods = "lcdc";
-			status = "disabled";
-		};
-
-		tscadc: tscadc@44e0d000 {
-			compatible = "ti,am3359-tscadc";
-			reg = <0x44e0d000 0x1000>;
-			interrupt-parent = <&intc>;
-			interrupts = <16>;
-			ti,hwmods = "adc_tsc";
-			status = "disabled";
-
-			tsc {
-				compatible = "ti,am3359-tsc";
-			};
-			am335x_adc: adc {
-				#io-channel-cells = <1>;
-				compatible = "ti,am3359-adc";
-			};
 		};
 
 		gpmc: gpmc@50000000 {
 			compatible = "ti,am3352-gpmc";
 			ti,hwmods = "gpmc";
-			ti,no-idle-on-init;
 			reg = <0x50000000 0x2000>;
 			interrupts = <100>;
 			gpmc,num-cs = <7>;
@@ -809,61 +415,5 @@
 			#size-cells = <1>;
 			status = "disabled";
 		};
-
-		sham: sham@53100000 {
-			compatible = "ti,omap4-sham";
-			ti,hwmods = "sham";
-			reg = <0x53100000 0x200>;
-			interrupts = <109>;
-			dmas = <&edma 36>;
-			dma-names = "rx";
-		};
-
-		aes: aes@53500000 {
-			compatible = "ti,omap4-aes";
-			ti,hwmods = "aes";
-			reg = <0x53500000 0xa0>;
-			interrupts = <103>;
-			dmas = <&edma 6>,
-			       <&edma 5>;
-			dma-names = "tx", "rx";
-		};
-
-		mcasp0: mcasp@48038000 {
-			compatible = "ti,am33xx-mcasp-audio";
-			ti,hwmods = "mcasp0";
-			reg = <0x48038000 0x2000>,
-			      <0x46000000 0x400000>;
-			reg-names = "mpu", "dat";
-			interrupts = <80>, <81>;
-			interrupt-names = "tx", "rx";
-			status = "disabled";
-			dmas = <&edma 8>,
-				<&edma 9>;
-			dma-names = "tx", "rx";
-		};
-
-		mcasp1: mcasp@4803C000 {
-			compatible = "ti,am33xx-mcasp-audio";
-			ti,hwmods = "mcasp1";
-			reg = <0x4803C000 0x2000>,
-			      <0x46400000 0x400000>;
-			reg-names = "mpu", "dat";
-			interrupts = <82>, <83>;
-			interrupt-names = "tx", "rx";
-			status = "disabled";
-			dmas = <&edma 10>,
-				<&edma 11>;
-			dma-names = "tx", "rx";
-		};
-
-		rng: rng@48310000 {
-			compatible = "ti,omap4-rng";
-			ti,hwmods = "rng";
-			reg = <0x48310000 0x2000>;
-			interrupts = <111>;
-		};
 	};
 };
-
-/include/ "am33xx-clocks.dtsi"
diff -urNp a/arch/arm/boot/dts/am3517-evm.dts b/arch/arm/boot/dts/am3517-evm.dts
--- a/arch/arm/boot/dts/am3517-evm.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/am3517-evm.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,31 +7,16 @@
  */
 /dts-v1/;
 
-#include "am3517.dtsi"
+/include/ "omap34xx.dtsi"
 
 / {
-	model = "TI AM3517 EVM (AM3517/05 TMDSEVM3517)";
-	compatible = "ti,am3517-evm", "ti,am3517", "ti,omap3";
+	model = "TI AM3517 EVM (AM3517/05)";
+	compatible = "ti,am3517-evm", "ti,omap3";
 
 	memory {
 		device_type = "memory";
 		reg = <0x80000000 0x10000000>; /* 256 MB */
 	};
-
-        vmmc_fixed: vmmc {
-                compatible = "regulator-fixed";
-                regulator-name = "vmmc_fixed";
-                regulator-min-microvolt = <3300000>;
-                regulator-max-microvolt = <3300000>;
-        };
-};
-
-&davinci_emac {
-	     status = "okay";
-};
-
-&davinci_mdio {
-	     status = "okay";
 };
 
 &i2c1 {
@@ -45,17 +30,3 @@
 &i2c3 {
 	clock-frequency = <400000>;
 };
-
-&mmc1 {
-	vmmc-supply = <&vmmc_fixed>;
-	bus-width = <4>;
-};
-
-&mmc2 {
-      status = "disabled";
-};
-
-&mmc3 {
-      status = "disabled";
-};
-
diff -urNp a/arch/arm/boot/dts/am3517_mt_ventoux.dts b/arch/arm/boot/dts/am3517_mt_ventoux.dts
--- a/arch/arm/boot/dts/am3517_mt_ventoux.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/am3517_mt_ventoux.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,7 +7,7 @@
  */
 /dts-v1/;
 
-#include "omap34xx.dtsi"
+/include/ "omap34xx.dtsi"
 
 / {
 	model = "TeeJet Mt.Ventoux";
diff -urNp a/arch/arm/boot/dts/animeo_ip.dts b/arch/arm/boot/dts/animeo_ip.dts
--- a/arch/arm/boot/dts/animeo_ip.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/animeo_ip.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,7 +7,7 @@
  */
 
 /dts-v1/;
-#include "at91sam9260.dtsi"
+/include/ "at91sam9260.dtsi"
 
 / {
 	model = "Somfy Animeo IP";
@@ -40,14 +40,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <18432000>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <18432000>;
-		};
 	};
 
 	ahb {
@@ -98,25 +90,40 @@
 			nand-on-flash-bbt;
 			status = "okay";
 
-			barebox@0 {
+			at91bootstrap@0 {
+				label = "at91bootstrap";
+				reg = <0x0 0x8000>;
+			};
+
+			barebox@8000 {
 				label = "barebox";
-				reg = <0x0 0x58000>;
+				reg = <0x8000 0x40000>;
+			};
+
+			bareboxenv@48000 {
+				label = "bareboxenv";
+				reg = <0x48000 0x8000>;
+			};
+
+			user_block@0x50000 {
+				label = "user_block";
+				reg = <0x50000 0xb0000>;
 			};
 
-			u_boot_env@58000 {
-				label = "u_boot_env";
-				reg = <0x58000 0x8000>;
+			kernel@100000 {
+				label = "kernel";
+				reg = <0x100000 0x1b0000>;
 			};
 
-			ubi@60000 {
-				label = "ubi";
-				reg = <0x60000 0x1FA0000>;
+			root@2b0000 {
+				label = "root";
+				reg = <0x2b0000 0x1D50000>;
 			};
 		};
 
 		usb0: ohci@00500000 {
 			num-ports = <2>;
-			atmel,vbus-gpio = <&pioB 15 GPIO_ACTIVE_LOW>;
+			atmel,vbus-gpio = <&pioB 15 1>;
 			status = "okay";
 		};
 	};
@@ -126,23 +133,23 @@
 
 		power_green {
 			label = "power_green";
-			gpios = <&pioC 17 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioC 17 0>;
 			linux,default-trigger = "heartbeat";
 		};
 
 		power_red {
 			label = "power_red";
-			gpios = <&pioA 2 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioA 2 0>;
 		};
 
 		tx_green {
 			label = "tx_green";
-			gpios = <&pioC 19 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioC 19 0>;
 		};
 
 		tx_red {
 			label = "tx_red";
-			gpios = <&pioC 18 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioC 18 0>;
 		};
 	};
 
@@ -153,21 +160,21 @@
 
 		keyswitch_in {
 			label = "keyswitch_in";
-			gpios = <&pioB 1 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioB 1 0>;
 			linux,code = <28>;
 			gpio-key,wakeup;
 		};
 
 		error_in {
 			label = "error_in";
-			gpios = <&pioB 2 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioB 2 0>;
 			linux,code = <29>;
 			gpio-key,wakeup;
 		};
 
 		btn {
 			label = "btn";
-			gpios = <&pioC 23 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioC 23 0>;
 			linux,code = <31>;
 			gpio-key,wakeup;
 		};
diff -urNp a/arch/arm/boot/dts/armada-370-db.dts b/arch/arm/boot/dts/armada-370-db.dts
--- a/arch/arm/boot/dts/armada-370-db.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-370-db.dts	2015-10-27 00:45:05.000000000 +0000
@@ -8,47 +8,13 @@
  * Gregory CLEMENT <gregory.clement@free-electrons.com>
  * Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  */
 
 /dts-v1/;
-#include "armada-370.dtsi"
+/include/ "armada-370.dtsi"
 
 / {
 	model = "Marvell Armada 370 Evaluation Board";
@@ -64,11 +30,9 @@
 	};
 
 	soc {
-		ranges = <MBUS_ID(0xf0, 0x01) 0 0xd0000000 0x100000
-			  MBUS_ID(0x01, 0xe0) 0 0xfff00000 0x100000>;
-
 		internal-regs {
 			serial@12000 {
+				clock-frequency = <200000000>;
 				status = "okay";
 			};
 			sata@a0000 {
@@ -77,8 +41,6 @@
 			};
 
 			mdio {
-				pinctrl-0 = <&mdio_pins>;
-				pinctrl-names = "default";
 				phy0: ethernet-phy@0 {
 					reg = <0>;
 				};
@@ -89,38 +51,16 @@
 			};
 
 			ethernet@70000 {
-				pinctrl-0 = <&ge0_rgmii_pins>;
-				pinctrl-names = "default";
 				status = "okay";
 				phy = <&phy0>;
 				phy-mode = "rgmii-id";
 			};
 			ethernet@74000 {
-				pinctrl-0 = <&ge1_rgmii_pins>;
-				pinctrl-names = "default";
 				status = "okay";
 				phy = <&phy1>;
 				phy-mode = "rgmii-id";
 			};
 
-			i2c@11000 {
-				pinctrl-0 = <&i2c0_pins>;
-				pinctrl-names = "default";
-				clock-frequency = <100000>;
-				status = "okay";
-				audio_codec: audio-codec@4a {
-					#sound-dai-cells = <0>;
-					compatible = "cirrus,cs42l51";
-					reg = <0x4a>;
-				};
-			};
-
-			audio-controller@30000 {
-				pinctrl-0 = <&i2s_pins2>;
-				pinctrl-names = "default";
-				status = "okay";
-			};
-
 			mvsdio@d4000 {
 				pinctrl-0 = <&sdio_pins1>;
 				pinctrl-names = "default";
@@ -134,7 +74,6 @@
 				 */
 				status = "disabled";
 				/* No CD or WP GPIOs */
-				broken-cd;
 			};
 
 			usb@50000 {
@@ -146,8 +85,6 @@
 			};
 
 			spi0: spi@10600 {
-				pinctrl-0 = <&spi0_pins2>;
-				pinctrl-names = "default";
 				status = "okay";
 
 				spi-flash@0 {
@@ -158,82 +95,23 @@
 					spi-max-frequency = <50000000>;
 				};
 			};
-		};
-
-		pcie-controller {
-			status = "okay";
-			/*
-			 * The two PCIe units are accessible through
-			 * both standard PCIe slots and mini-PCIe
-			 * slots on the board.
-			 */
-			pcie@1,0 {
-				/* Port 0, Lane 0 */
-				status = "okay";
-			};
 
-			pcie@2,0 {
-				/* Port 1, Lane 0 */
+			pcie-controller {
 				status = "okay";
+				/*
+				 * The two PCIe units are accessible through
+				 * both standard PCIe slots and mini-PCIe
+				 * slots on the board.
+				 */
+				pcie@1,0 {
+					/* Port 0, Lane 0 */
+					status = "okay";
+				};
+				pcie@2,0 {
+					/* Port 1, Lane 0 */
+					status = "okay";
+				};
 			};
 		};
 	};
-
-	sound {
-		compatible = "simple-audio-card";
-		simple-audio-card,name = "Armada 370 DB Audio";
-		simple-audio-card,mclk-fs = <256>;
-		simple-audio-card,widgets =
-			"Headphone", "Out Jack",
-			"Line", "In Jack";
-		simple-audio-card,routing =
-			"Out Jack", "HPL",
-			"Out Jack", "HPR",
-			"AIN1L", "In Jack",
-			"AIN1L", "In Jack";
-		status = "okay";
-
-		simple-audio-card,dai-link@0 {
-			format = "i2s";
-			cpu {
-				sound-dai = <&audio_controller 0>;
-			};
-
-			codec {
-				sound-dai = <&audio_codec>;
-			};
-		};
-
-		simple-audio-card,dai-link@1 {
-			format = "i2s";
-			cpu {
-				sound-dai = <&audio_controller 1>;
-			};
-
-			codec {
-				sound-dai = <&spdif_out>;
-			};
-		};
-
-		simple-audio-card,dai-link@2 {
-			format = "i2s";
-			cpu {
-				sound-dai = <&audio_controller 1>;
-			};
-
-			codec {
-				sound-dai = <&spdif_in>;
-			};
-		};
-	};
-
-	spdif_out: spdif-out {
-		#sound-dai-cells = <0>;
-		compatible = "linux,spdif-dit";
-	};
-
-	spdif_in: spdif-in {
-		#sound-dai-cells = <0>;
-		compatible = "linux,spdif-dir";
-	};
 };
diff -urNp a/arch/arm/boot/dts/armada-370-mirabox.dts b/arch/arm/boot/dts/armada-370-mirabox.dts
--- a/arch/arm/boot/dts/armada-370-mirabox.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-370-mirabox.dts	2015-10-27 00:45:05.000000000 +0000
@@ -3,48 +3,13 @@
  *
  * Gregory CLEMENT <gregory.clement@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  */
 
 /dts-v1/;
-#include <dt-bindings/gpio/gpio.h>
-#include "armada-370.dtsi"
+/include/ "armada-370.dtsi"
 
 / {
 	model = "Globalscale Mirabox";
@@ -60,27 +25,9 @@
 	};
 
 	soc {
-		ranges = <MBUS_ID(0xf0, 0x01) 0 0xd0000000 0x100000
-			  MBUS_ID(0x01, 0xe0) 0 0xfff00000 0x100000>;
-
-		pcie-controller {
-			status = "okay";
-
-			/* Internal mini-PCIe connector */
-			pcie@1,0 {
-				/* Port 0, Lane 0 */
-				status = "okay";
-			};
-
-			/* Connected on the PCB to a USB 3.0 XHCI controller */
-			pcie@2,0 {
-				/* Port 1, Lane 0 */
-				status = "okay";
-			};
-		};
-
 		internal-regs {
 			serial@12000 {
+				clock-frequency = <200000000>;
 				status = "okay";
 			};
 			timer@20300 {
@@ -88,6 +35,18 @@
 				status = "okay";
 			};
 
+			pinctrl {
+				pwr_led_pin: pwr-led-pin {
+					marvell,pins = "mpp63";
+					marvell,function = "gpo";
+				};
+
+				stat_led_pins: stat-led-pins {
+					marvell,pins = "mpp64", "mpp65";
+					marvell,function = "gpio";
+				};
+			};
+
 			gpio_leds {
 				compatible = "gpio-leds";
 				pinctrl-names = "default";
@@ -95,26 +54,24 @@
 
 				green_pwr_led {
 					label = "mirabox:green:pwr";
-					gpios = <&gpio1 31 GPIO_ACTIVE_LOW>;
-					default-state = "keep";
+					gpios = <&gpio1 31 1>;
+					linux,default-trigger = "heartbeat";
 				};
 
 				blue_stat_led {
 					label = "mirabox:blue:stat";
-					gpios = <&gpio2 0 GPIO_ACTIVE_LOW>;
-					default-state = "off";
+					gpios = <&gpio2 0 1>;
+					linux,default-trigger = "cpu0";
 				};
 
 				green_stat_led {
 					label = "mirabox:green:stat";
-					gpios = <&gpio2 1 GPIO_ACTIVE_LOW>;
+					gpios = <&gpio2 1 1>;
 					default-state = "off";
 				};
 			};
 
 			mdio {
-				pinctrl-0 = <&mdio_pins>;
-				pinctrl-names = "default";
 				phy0: ethernet-phy@0 {
 					reg = <0>;
 				};
@@ -124,15 +81,11 @@
 				};
 			};
 			ethernet@70000 {
-				pinctrl-0 = <&ge0_rgmii_pins>;
-				pinctrl-names = "default";
 				status = "okay";
 				phy = <&phy0>;
 				phy-mode = "rgmii-id";
 			};
 			ethernet@74000 {
-				pinctrl-0 = <&ge1_rgmii_pins>;
-				pinctrl-names = "default";
 				status = "okay";
 				phy = <&phy1>;
 				phy-mode = "rgmii-id";
@@ -146,7 +99,6 @@
 				 * No CD or WP GPIOs: SDIO interface used for
 				 * Wifi/Bluetooth chip
 				 */
-				 broken-cd;
 			};
 
 			usb@50000 {
@@ -168,39 +120,21 @@
 				};
 			};
 
-			nand@d0000 {
+			pcie-controller {
 				status = "okay";
-				num-cs = <1>;
-				marvell,nand-keep-config;
-				marvell,nand-enable-arbiter;
-				nand-on-flash-bbt;
-
-				partition@0 {
-					label = "U-Boot";
-					reg = <0 0x400000>;
-				};
-				partition@400000 {
-					label = "Linux";
-					reg = <0x400000 0x400000>;
-				};
-				partition@800000 {
-					label = "Filesystem";
-					reg = <0x800000 0x3f800000>;
+
+				/* Internal mini-PCIe connector */
+				pcie@1,0 {
+					/* Port 0, Lane 0 */
+					status = "okay";
+				};
+
+				/* Connected on the PCB to a USB 3.0 XHCI controller */
+				pcie@2,0 {
+					/* Port 1, Lane 0 */
+					status = "okay";
 				};
 			};
 		};
 	};
 };
-
-&pinctrl {
-	pwr_led_pin: pwr-led-pin {
-		marvell,pins = "mpp63";
-		marvell,function = "gpo";
-	};
-
-	stat_led_pins: stat-led-pins {
-		marvell,pins = "mpp64", "mpp65";
-		marvell,function = "gpio";
-	};
-};
-
diff -urNp a/arch/arm/boot/dts/armada-370-rd.dts b/arch/arm/boot/dts/armada-370-rd.dts
--- a/arch/arm/boot/dts/armada-370-rd.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-370-rd.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,58 +6,13 @@
  *
  *  Copyright (C) 2013 Florian Fainelli <florian@openwrt.org>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
- *
- * Note: this Device Tree assumes that the bootloader has remapped the
- * internal registers to 0xf1000000 (instead of the default
- * 0xd0000000). The 0xf1000000 is the default used by the recent,
- * DT-capable, U-Boot bootloaders provided by Marvell. Some earlier
- * boards were delivered with an older version of the bootloader that
- * left internal registers mapped at 0xd0000000. If you are in this
- * situation, you should either update your bootloader (preferred
- * solution) or the below Device Tree should be adjusted.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  */
 
 /dts-v1/;
-#include <dt-bindings/input/input.h>
-#include <dt-bindings/gpio/gpio.h>
-#include "armada-370.dtsi"
+/include/ "armada-370.dtsi"
 
 / {
 	model = "Marvell Armada 370 Reference Design";
@@ -73,27 +28,9 @@
 	};
 
 	soc {
-		ranges = <MBUS_ID(0xf0, 0x01) 0 0xf1000000 0x100000
-			  MBUS_ID(0x01, 0xe0) 0 0xfff00000 0x100000>;
-
-		pcie-controller {
-			status = "okay";
-
-			/* Internal mini-PCIe connector */
-			pcie@1,0 {
-				/* Port 0, Lane 0 */
-				status = "okay";
-			};
-
-			/* Internal mini-PCIe connector */
-			pcie@2,0 {
-				/* Port 1, Lane 0 */
-				status = "okay";
-			};
-		};
-
 		internal-regs {
 			serial@12000 {
+				clock-frequency = <200000000>;
 				status = "okay";
 			};
 			sata@a0000 {
@@ -102,11 +39,13 @@
 			};
 
 			mdio {
-				pinctrl-0 = <&mdio_pins>;
-				pinctrl-names = "default";
 				phy0: ethernet-phy@0 {
 					reg = <0>;
 				};
+
+				phy1: ethernet-phy@1 {
+					reg = <1>;
+				};
 			};
 
 			ethernet@70000 {
@@ -115,14 +54,9 @@
 				phy-mode = "sgmii";
 			};
 			ethernet@74000 {
-				pinctrl-0 = <&ge1_rgmii_pins>;
-				pinctrl-names = "default";
 				status = "okay";
+				phy = <&phy1>;
 				phy-mode = "rgmii-id";
-				fixed-link {
-					   speed = <1000>;
-					   full-duplex;
-				};
 			};
 
 			mvsdio@d4000 {
@@ -130,7 +64,6 @@
 				pinctrl-names = "default";
 				status = "okay";
 				/* No CD or WP GPIOs */
-				broken-cd;
 			};
 
 			usb@50000 {
@@ -147,103 +80,10 @@
 				#size-cells = <0>;
 				button@1 {
 					label = "Software Button";
-					linux,code = <KEY_POWER>;
-					gpios = <&gpio0 6 GPIO_ACTIVE_LOW>;
-				};
-			};
-
-			gpio-fan {
-				compatible = "gpio-fan";
-				gpios = <&gpio0 8 GPIO_ACTIVE_HIGH>;
-				gpio-fan,speed-map = <0 0 3000 1>;
-				pinctrl-0 = <&fan_pins>;
-				pinctrl-names = "default";
-			};
-
-			gpio_leds {
-				compatible = "gpio-leds";
-				pinctrl-names = "default";
-				pinctrl-0 = <&led_pins>;
-
-				sw_led {
-					label = "370rd:green:sw";
-					gpios = <&gpio1 0 GPIO_ACTIVE_LOW>;
-					default-state = "keep";
-				};
-			};
-
-			nand@d0000 {
-				status = "okay";
-				num-cs = <1>;
-				marvell,nand-keep-config;
-				marvell,nand-enable-arbiter;
-				nand-on-flash-bbt;
-
-				partition@0 {
-					label = "U-Boot";
-					reg = <0 0x800000>;
-				};
-				partition@800000 {
-					label = "Linux";
-					reg = <0x800000 0x800000>;
-				};
-				partition@1000000 {
-					label = "Filesystem";
-					reg = <0x1000000 0x3f000000>;
+					linux,code = <116>;
+					gpios = <&gpio0 6 1>;
 				};
 			};
 		};
 	};
-
-	dsa@0 {
-		compatible = "marvell,dsa";
-		#address-cells = <2>;
-		#size-cells = <0>;
-
-		dsa,ethernet = <&eth1>;
-		dsa,mii-bus = <&mdio>;
-
-		switch@0 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <0x10 0>;	/* MDIO address 16, switch 0 in tree */
-
-			port@0 {
-				reg = <0>;
-				label = "lan0";
-			};
-
-			port@1 {
-			       reg = <1>;
-			       label = "lan1";
-			};
-
-			port@2 {
-			       reg = <2>;
-			       label = "lan2";
-			};
-
-			port@3 {
-			       reg = <3>;
-			       label = "lan3";
-			};
-
-			port@5 {
-			      reg = <5>;
-			      label = "cpu";
-			};
-		};
-	 };
  };
-
-&pinctrl {
-	fan_pins: fan-pins {
-		marvell,pins = "mpp8";
-		marvell,function = "gpio";
-	};
-
-	led_pins: led-pins {
-		marvell,pins = "mpp32";
-		marvell,function = "gpio";
-	};
-};
diff -urNp a/arch/arm/boot/dts/armada-370-xp.dtsi b/arch/arm/boot/dts/armada-370-xp.dtsi
--- a/arch/arm/boot/dts/armada-370-xp.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-370-xp.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,43 +8,9 @@
  * Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
  * Ben Dooks <ben.dooks@codethink.co.uk>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  *
  * This file contains the definitions that are common to the Armada
  * 370 and Armada XP SoC.
@@ -52,121 +18,102 @@
 
 /include/ "skeleton64.dtsi"
 
-#define MBUS_ID(target,attributes) (((target) << 24) | ((attributes) << 16))
-
 / {
 	model = "Marvell Armada 370 and XP SoC";
 	compatible = "marvell,armada-370-xp";
 
-	aliases {
-		eth0 = &eth0;
-		eth1 = &eth1;
-	};
-
 	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
 		cpu@0 {
 			compatible = "marvell,sheeva-v7";
-			device_type = "cpu";
-			reg = <0>;
 		};
 	};
 
 	soc {
-		#address-cells = <2>;
+		#address-cells = <1>;
 		#size-cells = <1>;
-		controller = <&mbusc>;
+		compatible = "simple-bus";
 		interrupt-parent = <&mpic>;
-		pcie-mem-aperture = <0xf8000000 0x7e00000>;
-		pcie-io-aperture  = <0xffe00000 0x100000>;
-
-		devbus-bootcs {
-			compatible = "marvell,mvebu-devbus";
-			reg = <MBUS_ID(0xf0, 0x01) 0x10400 0x8>;
-			ranges = <0 MBUS_ID(0x01, 0x2f) 0 0xffffffff>;
-			#address-cells = <1>;
-			#size-cells = <1>;
-			clocks = <&coreclk 0>;
-			status = "disabled";
-		};
+		ranges = <0          0 0xd0000000 0x0100000 /* internal registers */
+			  0xe0000000 0 0xe0000000 0x8100000 /* PCIe */>;
 
-		devbus-cs0 {
-			compatible = "marvell,mvebu-devbus";
-			reg = <MBUS_ID(0xf0, 0x01) 0x10408 0x8>;
-			ranges = <0 MBUS_ID(0x01, 0x3e) 0 0xffffffff>;
+		internal-regs {
+			compatible = "simple-bus";
 			#address-cells = <1>;
 			#size-cells = <1>;
-			clocks = <&coreclk 0>;
-			status = "disabled";
-		};
+			ranges;
 
-		devbus-cs1 {
-			compatible = "marvell,mvebu-devbus";
-			reg = <MBUS_ID(0xf0, 0x01) 0x10410 0x8>;
-			ranges = <0 MBUS_ID(0x01, 0x3d) 0 0xffffffff>;
-			#address-cells = <1>;
-			#size-cells = <1>;
-			clocks = <&coreclk 0>;
-			status = "disabled";
-		};
+			mpic: interrupt-controller@20000 {
+				compatible = "marvell,mpic";
+				#interrupt-cells = <1>;
+				#size-cells = <1>;
+				interrupt-controller;
+			};
 
-		devbus-cs2 {
-			compatible = "marvell,mvebu-devbus";
-			reg = <MBUS_ID(0xf0, 0x01) 0x10418 0x8>;
-			ranges = <0 MBUS_ID(0x01, 0x3b) 0 0xffffffff>;
-			#address-cells = <1>;
-			#size-cells = <1>;
-			clocks = <&coreclk 0>;
-			status = "disabled";
-		};
+			coherency-fabric@20200 {
+				compatible = "marvell,coherency-fabric";
+				reg = <0x20200 0xb0>, <0x21010 0x1c>;
+			};
 
-		devbus-cs3 {
-			compatible = "marvell,mvebu-devbus";
-			reg = <MBUS_ID(0xf0, 0x01) 0x10420 0x8>;
-			ranges = <0 MBUS_ID(0x01, 0x37) 0 0xffffffff>;
-			#address-cells = <1>;
-			#size-cells = <1>;
-			clocks = <&coreclk 0>;
-			status = "disabled";
-		};
+			serial@12000 {
+				compatible = "snps,dw-apb-uart";
+				reg = <0x12000 0x100>;
+				reg-shift = <2>;
+				interrupts = <41>;
+				reg-io-width = <1>;
+				status = "disabled";
+			};
+			serial@12100 {
+				compatible = "snps,dw-apb-uart";
+				reg = <0x12100 0x100>;
+				reg-shift = <2>;
+				interrupts = <42>;
+				reg-io-width = <1>;
+				status = "disabled";
+			};
 
-		internal-regs {
-			compatible = "simple-bus";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges = <0 MBUS_ID(0xf0, 0x01) 0 0x100000>;
+			timer@20300 {
+				compatible = "marvell,armada-370-xp-timer";
+				reg = <0x20300 0x30>, <0x21040 0x30>;
+				interrupts = <37>, <38>, <39>, <40>, <5>, <6>;
+				clocks = <&coreclk 2>;
+			};
 
-			rtc@10300 {
-				compatible = "marvell,orion-rtc";
-				reg = <0x10300 0x20>;
-				interrupts = <50>;
+			sata@a0000 {
+				compatible = "marvell,orion-sata";
+				reg = <0xa0000 0x2400>;
+				interrupts = <55>;
+				clocks = <&gateclk 15>, <&gateclk 30>;
+				clock-names = "0", "1";
+				status = "disabled";
 			};
 
-			spi0: spi@10600 {
-				compatible = "marvell,armada-370-spi", "marvell,orion-spi";
-				reg = <0x10600 0x28>;
+			mdio {
 				#address-cells = <1>;
 				#size-cells = <0>;
-				cell-index = <0>;
-				interrupts = <30>;
-				clocks = <&coreclk 0>;
+				compatible = "marvell,orion-mdio";
+				reg = <0x72004 0x4>;
+				clocks = <&gateclk 4>;
+			};
+
+			ethernet@70000 {
+				compatible = "marvell,armada-370-neta";
+				reg = <0x70000 0x2500>;
+				interrupts = <8>;
+				clocks = <&gateclk 4>;
 				status = "disabled";
 			};
 
-			spi1: spi@10680 {
-				compatible = "marvell,armada-370-spi", "marvell,orion-spi";
-				reg = <0x10680 0x28>;
-				#address-cells = <1>;
-				#size-cells = <0>;
-				cell-index = <1>;
-				interrupts = <92>;
-				clocks = <&coreclk 0>;
+			ethernet@74000 {
+				compatible = "marvell,armada-370-neta";
+				reg = <0x74000 0x2500>;
+				interrupts = <10>;
+				clocks = <&gateclk 3>;
 				status = "disabled";
 			};
 
 			i2c0: i2c@11000 {
 				compatible = "marvell,mv64xxx-i2c";
+				reg = <0x11000 0x20>;
 				#address-cells = <1>;
 				#size-cells = <0>;
 				interrupts = <31>;
@@ -177,6 +124,7 @@
 
 			i2c1: i2c@11100 {
 				compatible = "marvell,mv64xxx-i2c";
+				reg = <0x11100 0x20>;
 				#address-cells = <1>;
 				#size-cells = <0>;
 				interrupts = <32>;
@@ -185,71 +133,20 @@
 				status = "disabled";
 			};
 
-			uart0: serial@12000 {
-				compatible = "snps,dw-apb-uart";
-				reg = <0x12000 0x100>;
-				reg-shift = <2>;
-				interrupts = <41>;
-				reg-io-width = <1>;
-				clocks = <&coreclk 0>;
-				status = "disabled";
+			rtc@10300 {
+				compatible = "marvell,orion-rtc";
+				reg = <0x10300 0x20>;
+				interrupts = <50>;
 			};
 
-			uart1: serial@12100 {
-				compatible = "snps,dw-apb-uart";
-				reg = <0x12100 0x100>;
-				reg-shift = <2>;
-				interrupts = <42>;
-				reg-io-width = <1>;
-				clocks = <&coreclk 0>;
+			mvsdio@d4000 {
+				compatible = "marvell,orion-sdio";
+				reg = <0xd4000 0x200>;
+				interrupts = <54>;
+				clocks = <&gateclk 17>;
 				status = "disabled";
 			};
 
-			pinctrl: pin-ctrl@18000 {
-				reg = <0x18000 0x38>;
-			};
-
-			coredivclk: corediv-clock@18740 {
-				compatible = "marvell,armada-370-corediv-clock";
-				reg = <0x18740 0xc>;
-				#clock-cells = <1>;
-				clocks = <&mainpll>;
-				clock-output-names = "nand";
-			};
-
-			mbusc: mbus-controller@20000 {
-				compatible = "marvell,mbus-controller";
-				reg = <0x20000 0x100>, <0x20180 0x20>,
-				      <0x20250 0x8>;
-			};
-
-			mpic: interrupt-controller@20000 {
-				compatible = "marvell,mpic";
-				#interrupt-cells = <1>;
-				#size-cells = <1>;
-				interrupt-controller;
-				msi-controller;
-			};
-
-			coherency-fabric@20200 {
-				compatible = "marvell,coherency-fabric";
-				reg = <0x20200 0xb0>, <0x21010 0x1c>;
-			};
-
-			timer@20300 {
-				reg = <0x20300 0x30>, <0x21040 0x30>;
-				interrupts = <37>, <38>, <39>, <40>, <5>, <6>;
-			};
-
-			watchdog@20300 {
-				reg = <0x20300 0x34>, <0x20704 0x4>;
-			};
-
-			pmsu@22000 {
-				compatible = "marvell,armada-370-pmsu";
-				reg = <0x22000 0x1000>;
-			};
-
 			usb@50000 {
 				compatible = "marvell,orion-ehci";
 				reg = <0x50000 0x500>;
@@ -264,69 +161,72 @@
 				status = "disabled";
 			};
 
-			eth0: ethernet@70000 {
-				compatible = "marvell,armada-370-neta";
-				reg = <0x70000 0x4000>;
-				interrupts = <8>;
-				clocks = <&gateclk 4>;
+			spi0: spi@10600 {
+				compatible = "marvell,orion-spi";
+				reg = <0x10600 0x28>;
+				#address-cells = <1>;
+				#size-cells = <0>;
+				cell-index = <0>;
+				interrupts = <30>;
+				clocks = <&coreclk 0>;
 				status = "disabled";
 			};
 
-			mdio: mdio {
+			spi1: spi@10680 {
+				compatible = "marvell,orion-spi";
+				reg = <0x10680 0x28>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				compatible = "marvell,orion-mdio";
-				reg = <0x72004 0x4>;
-				clocks = <&gateclk 4>;
+				cell-index = <1>;
+				interrupts = <92>;
+				clocks = <&coreclk 0>;
+				status = "disabled";
 			};
 
-			eth1: ethernet@74000 {
-				compatible = "marvell,armada-370-neta";
-				reg = <0x74000 0x4000>;
-				interrupts = <10>;
-				clocks = <&gateclk 3>;
+			devbus-bootcs@10400 {
+				compatible = "marvell,mvebu-devbus";
+				reg = <0x10400 0x8>;
+				#address-cells = <1>;
+				#size-cells = <1>;
+				clocks = <&coreclk 0>;
 				status = "disabled";
 			};
 
-			sata@a0000 {
-				compatible = "marvell,armada-370-sata";
-				reg = <0xa0000 0x5000>;
-				interrupts = <55>;
-				clocks = <&gateclk 15>, <&gateclk 30>;
-				clock-names = "0", "1";
+			devbus-cs0@10408 {
+				compatible = "marvell,mvebu-devbus";
+				reg = <0x10408 0x8>;
+				#address-cells = <1>;
+				#size-cells = <1>;
+				clocks = <&coreclk 0>;
 				status = "disabled";
 			};
 
-			nand@d0000 {
-				compatible = "marvell,armada370-nand";
-				reg = <0xd0000 0x54>;
+			devbus-cs1@10410 {
+				compatible = "marvell,mvebu-devbus";
+				reg = <0x10410 0x8>;
 				#address-cells = <1>;
 				#size-cells = <1>;
-				interrupts = <113>;
-				clocks = <&coredivclk 0>;
+				clocks = <&coreclk 0>;
 				status = "disabled";
 			};
 
-			mvsdio@d4000 {
-				compatible = "marvell,orion-sdio";
-				reg = <0xd4000 0x200>;
-				interrupts = <54>;
-				clocks = <&gateclk 17>;
-				bus-width = <4>;
-				cap-sdio-irq;
-				cap-sd-highspeed;
-				cap-mmc-highspeed;
+			devbus-cs2@10418 {
+				compatible = "marvell,mvebu-devbus";
+				reg = <0x10418 0x8>;
+				#address-cells = <1>;
+				#size-cells = <1>;
+				clocks = <&coreclk 0>;
 				status = "disabled";
 			};
-		};
-	};
 
-	clocks {
-		/* 2 GHz fixed main PLL */
-		mainpll: mainpll {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <2000000000>;
+			devbus-cs3@10420 {
+				compatible = "marvell,mvebu-devbus";
+				reg = <0x10420 0x8>;
+				#address-cells = <1>;
+				#size-cells = <1>;
+				clocks = <&coreclk 0>;
+				status = "disabled";
+			};
 		};
 	};
  };
diff -urNp a/arch/arm/boot/dts/armada-370.dtsi b/arch/arm/boot/dts/armada-370.dtsi
--- a/arch/arm/boot/dts/armada-370.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-370.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -7,49 +7,15 @@
  * Gregory CLEMENT <gregory.clement@free-electrons.com>
  * Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  *
  * Contains definitions specific to the Armada 370 SoC that are not
  * common to all Armada SoCs.
  */
 
-#include "armada-370-xp.dtsi"
+/include/ "armada-370-xp.dtsi"
 /include/ "skeleton.dtsi"
 
 / {
@@ -63,96 +29,46 @@
 	};
 
 	soc {
-		compatible = "marvell,armada370-mbus", "simple-bus";
-
-		bootrom {
-			compatible = "marvell,bootrom";
-			reg = <MBUS_ID(0x01, 0xe0) 0 0x100000>;
-		};
-
-		pcie-controller {
-			compatible = "marvell,armada-370-pcie";
-			status = "disabled";
-			device_type = "pci";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-
-			msi-parent = <&mpic>;
-			bus-range = <0x00 0xff>;
-
-			ranges =
-			       <0x82000000 0 0x40000 MBUS_ID(0xf0, 0x01) 0x40000 0 0x00002000
-				0x82000000 0 0x80000 MBUS_ID(0xf0, 0x01) 0x80000 0 0x00002000
-				0x82000000 0x1 0     MBUS_ID(0x04, 0xe8) 0       1 0 /* Port 0.0 MEM */
-				0x81000000 0x1 0     MBUS_ID(0x04, 0xe0) 0       1 0 /* Port 0.0 IO  */
-				0x82000000 0x2 0     MBUS_ID(0x08, 0xe8) 0       1 0 /* Port 1.0 MEM */
-				0x81000000 0x2 0     MBUS_ID(0x08, 0xe0) 0       1 0 /* Port 1.0 IO  */>;
-
-			pcie@1,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x40000 0 0x2000>;
-				reg = <0x0800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-                                ranges = <0x82000000 0 0 0x82000000 0x1 0 1 0
-                                          0x81000000 0 0 0x81000000 0x1 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 58>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 5>;
-				status = "disabled";
-			};
-
-			pcie@2,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82002800 0 0x80000 0 0x2000>;
-				reg = <0x1000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-                                ranges = <0x82000000 0 0 0x82000000 0x2 0 1 0
-                                          0x81000000 0 0 0x81000000 0x2 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 62>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 9>;
-				status = "disabled";
+		ranges = <0          0xd0000000 0x0100000 /* internal registers */
+			  0xe0000000 0xe0000000 0x8100000 /* PCIe */>;
+		internal-regs {
+			system-controller@18200 {
+				compatible = "marvell,armada-370-xp-system-controller";
+				reg = <0x18200 0x100>;
 			};
-		};
 
-		internal-regs {
 			L2: l2-cache {
 				compatible = "marvell,aurora-outer-cache";
 				reg = <0x08000 0x1000>;
 				cache-id-part = <0x100>;
-				cache-unified;
 				wt-override;
 			};
 
-			/*
-			 * Default SPI pinctrl setting, can be overwritten on
-			 * board level if a different configuration is used.
-			 */
-			spi0: spi@10600 {
-				pinctrl-0 = <&spi0_pins1>;
-				pinctrl-names = "default";
+			interrupt-controller@20000 {
+				reg = <0x20a00 0x1d0>, <0x21870 0x58>;
 			};
 
-			spi1: spi@10680 {
-				pinctrl-0 = <&spi1_pins>;
-				pinctrl-names = "default";
-			};
+			pinctrl {
+				compatible = "marvell,mv88f6710-pinctrl";
+				reg = <0x18000 0x38>;
+
+				sdio_pins1: sdio-pins1 {
+					marvell,pins = "mpp9",  "mpp11", "mpp12",
+							"mpp13", "mpp14", "mpp15";
+					marvell,function = "sd0";
+				};
 
-			i2c0: i2c@11000 {
-				reg = <0x11000 0x20>;
-			};
+				sdio_pins2: sdio-pins2 {
+					marvell,pins = "mpp47", "mpp48", "mpp49",
+							"mpp50", "mpp51", "mpp52";
+					marvell,function = "sd0";
+				};
 
-			i2c1: i2c@11100 {
-				reg = <0x11100 0x20>;
+				sdio_pins3: sdio-pins3 {
+					marvell,pins = "mpp48", "mpp49", "mpp50",
+							"mpp51", "mpp52", "mpp53";
+					marvell,function = "sd0";
+				};
 			};
 
 			gpio0: gpio@18100 {
@@ -162,7 +78,7 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <82>, <83>, <84>, <85>;
 			};
 
@@ -173,7 +89,7 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <87>, <88>, <89>, <90>;
 			};
 
@@ -184,89 +100,21 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <91>;
 			};
 
-			/*
-			 * Default UART pinctrl setting without RTS/CTS, can
-			 * be overwritten on board level if a different
-			 * configuration is used.
-			 */
-			uart0: serial@12000 {
-				pinctrl-0 = <&uart0_pins>;
-				pinctrl-names = "default";
-			};
-
-			uart1: serial@12100 {
-				pinctrl-0 = <&uart1_pins>;
-				pinctrl-names = "default";
-			};
-
-			system-controller@18200 {
-				compatible = "marvell,armada-370-xp-system-controller";
-				reg = <0x18200 0x100>;
-			};
-
-			gateclk: clock-gating-control@18220 {
-				compatible = "marvell,armada-370-gating-clock";
-				reg = <0x18220 0x4>;
-				clocks = <&coreclk 0>;
-				#clock-cells = <1>;
-			};
-
 			coreclk: mvebu-sar@18230 {
 				compatible = "marvell,armada-370-core-clock";
 				reg = <0x18230 0x08>;
 				#clock-cells = <1>;
 			};
 
-			thermal@18300 {
-				compatible = "marvell,armada370-thermal";
-				reg = <0x18300 0x4
-					0x18304 0x4>;
-				status = "okay";
-			};
-
-			sscg@18330 {
-				reg = <0x18330 0x4>;
-			};
-
-			interrupt-controller@20000 {
-				reg = <0x20a00 0x1d0>, <0x21870 0x58>;
-			};
-
-			timer@20300 {
-				compatible = "marvell,armada-370-timer";
-				clocks = <&coreclk 2>;
-			};
-
-			watchdog@20300 {
-				compatible = "marvell,armada-370-wdt";
-				clocks = <&coreclk 2>;
-			};
-
-			cpurst@20800 {
-				compatible = "marvell,armada-370-cpu-reset";
-				reg = <0x20800 0x8>;
-			};
-
-			audio_controller: audio-controller@30000 {
-				#sound-dai-cells = <1>;
-				compatible = "marvell,armada370-audio";
-				reg = <0x30000 0x4000>;
-				interrupts = <93>;
-				clocks = <&gateclk 0>;
-				clock-names = "internal";
-				status = "disabled";
-			};
-
-			usb@50000 {
-				clocks = <&coreclk 0>;
-			};
-
-			usb@51000 {
+			gateclk: clock-gating-control@18220 {
+				compatible = "marvell,armada-370-gating-clock";
+				reg = <0x18220 0x4>;
 				clocks = <&coreclk 0>;
+				#clock-cells = <1>;
 			};
 
 			xor@60800 {
@@ -306,94 +154,73 @@
 					dmacap,memset;
 				};
 			};
-		};
-	};
-};
-
-&pinctrl {
-	compatible = "marvell,mv88f6710-pinctrl";
-
-	spi0_pins1: spi0-pins1 {
-		marvell,pins = "mpp33", "mpp34",
-			       "mpp35", "mpp36";
-		marvell,function = "spi0";
-	};
-
-	spi0_pins2: spi0_pins2 {
-		marvell,pins = "mpp32", "mpp63",
-			       "mpp64", "mpp65";
-		marvell,function = "spi0";
-	};
-
-	spi1_pins: spi1-pins {
-		marvell,pins = "mpp49", "mpp50",
-			       "mpp51", "mpp52";
-		marvell,function = "spi1";
-	};
-
-	uart0_pins: uart0-pins {
-		marvell,pins = "mpp0", "mpp1";
-		marvell,function = "uart0";
-	};
 
-	uart1_pins: uart1-pins {
-		marvell,pins = "mpp41", "mpp42";
-		marvell,function = "uart1";
-	};
+			usb@50000 {
+				clocks = <&coreclk 0>;
+			};
 
-	sdio_pins1: sdio-pins1 {
-		marvell,pins = "mpp9",  "mpp11", "mpp12",
-				"mpp13", "mpp14", "mpp15";
-		marvell,function = "sd0";
-	};
+			usb@51000 {
+				clocks = <&coreclk 0>;
+			};
 
-	sdio_pins2: sdio-pins2 {
-		marvell,pins = "mpp47", "mpp48", "mpp49",
-				"mpp50", "mpp51", "mpp52";
-		marvell,function = "sd0";
-	};
+			thermal@18300 {
+				compatible = "marvell,armada370-thermal";
+				reg = <0x18300 0x4
+					0x18304 0x4>;
+				status = "okay";
+			};
 
-	sdio_pins3: sdio-pins3 {
-		marvell,pins = "mpp48", "mpp49", "mpp50",
-				"mpp51", "mpp52", "mpp53";
-		marvell,function = "sd0";
-	};
+			pcie-controller {
+				compatible = "marvell,armada-370-pcie";
+				status = "disabled";
+				device_type = "pci";
 
-	i2c0_pins: i2c0-pins {
-		marvell,pins = "mpp2", "mpp3";
-		marvell,function = "i2c0";
-	};
+				#address-cells = <3>;
+				#size-cells = <2>;
 
-	i2s_pins1: i2s-pins1 {
-		marvell,pins = "mpp5", "mpp6", "mpp7",
-			       "mpp8", "mpp9", "mpp10",
-			       "mpp12", "mpp13";
-		marvell,function = "audio";
-	};
+				bus-range = <0x00 0xff>;
 
-	i2s_pins2: i2s-pins2 {
-		marvell,pins = "mpp49", "mpp47", "mpp50",
-			       "mpp59", "mpp57", "mpp61",
-			       "mpp62", "mpp60", "mpp58";
-		marvell,function = "audio";
-	};
+				reg = <0x40000 0x2000>, <0x80000 0x2000>;
 
-	mdio_pins: mdio-pins {
-		marvell,pins = "mpp17", "mpp18";
-		marvell,function = "ge";
-	};
+				reg-names = "pcie0.0", "pcie1.0";
 
-	ge0_rgmii_pins: ge0-rgmii-pins {
-		marvell,pins = "mpp5", "mpp6", "mpp7", "mpp8",
-			       "mpp9", "mpp10", "mpp11", "mpp12",
-			       "mpp13", "mpp14", "mpp15", "mpp16";
-		marvell,function = "ge0";
-	};
+				ranges = <0x82000000 0 0x40000 0x40000 0 0x00002000   /* Port 0.0 registers */
+					0x82000000 0 0x80000 0x80000 0 0x00002000   /* Port 1.0 registers */
+					0x82000000 0 0xe0000000 0xe0000000 0 0x08000000   /* non-prefetchable memory */
+					0x81000000 0 0          0xe8000000 0 0x00100000>; /* downstream I/O */
+
+				pcie@1,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x40000 0 0x2000>;
+					reg = <0x0800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 58>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 5>;
+					status = "disabled";
+				};
 
-	ge1_rgmii_pins: ge1-rgmii-pins {
-		marvell,pins = "mpp19", "mpp20", "mpp21", "mpp22",
-			       "mpp23", "mpp24", "mpp25", "mpp26",
-			       "mpp27", "mpp28", "mpp29", "mpp30";
-		marvell,function = "ge1";
+				pcie@2,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82002800 0 0x80000 0 0x2000>;
+					reg = <0x1000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 62>;
+					marvell,pcie-port = <1>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 9>;
+					status = "disabled";
+				};
+			};
+		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/armada-xp-db.dts b/arch/arm/boot/dts/armada-xp-db.dts
--- a/arch/arm/boot/dts/armada-xp-db.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-xp-db.dts	2015-10-27 00:45:05.000000000 +0000
@@ -2,62 +2,19 @@
  * Device Tree file for Marvell Armada XP evaluation board
  * (DB-78460-BP)
  *
- * Copyright (C) 2012-2014 Marvell
+ * Copyright (C) 2012 Marvell
  *
  * Lior Amsalem <alior@marvell.com>
  * Gregory CLEMENT <gregory.clement@free-electrons.com>
  * Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
-  *
- * Note: this Device Tree assumes that the bootloader has remapped the
- * internal registers to 0xf1000000 (instead of the default
- * 0xd0000000). The 0xf1000000 is the default used by the recent,
- * DT-capable, U-Boot bootloaders provided by Marvell. Some earlier
- * boards were delivered with an older version of the bootloader that
- * left internal registers mapped at 0xd0000000. If you are in this
- * situation, you should either update your bootloader (preferred
- * solution) or the below Device Tree should be adjusted.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  */
 
 /dts-v1/;
-#include "armada-xp-mv78460.dtsi"
+/include/ "armada-xp-mv78460.dtsi"
 
 / {
 	model = "Marvell Armada XP Evaluation Board";
@@ -73,82 +30,21 @@
 	};
 
 	soc {
-		ranges = <MBUS_ID(0xf0, 0x01) 0 0 0xf1000000 0x100000
-			  MBUS_ID(0x01, 0x1d) 0 0 0xfff00000 0x100000
-			  MBUS_ID(0x01, 0x2f) 0 0 0xf0000000 0x1000000>;
-
-		devbus-bootcs {
-			status = "okay";
-
-			/* Device Bus parameters are required */
-
-			/* Read parameters */
-			devbus,bus-width    = <16>;
-			devbus,turn-off-ps  = <60000>;
-			devbus,badr-skew-ps = <0>;
-			devbus,acc-first-ps = <124000>;
-			devbus,acc-next-ps  = <248000>;
-			devbus,rd-setup-ps  = <0>;
-			devbus,rd-hold-ps   = <0>;
-
-			/* Write parameters */
-			devbus,sync-enable = <0>;
-			devbus,wr-high-ps  = <60000>;
-			devbus,wr-low-ps   = <60000>;
-			devbus,ale-wr-ps   = <60000>;
-
-			/* NOR 16 MiB */
-			nor@0 {
-				compatible = "cfi-flash";
-				reg = <0 0x1000000>;
-				bank-width = <2>;
-			};
-		};
-
-		pcie-controller {
-			status = "okay";
-
-			/*
-			 * All 6 slots are physically present as
-			 * standard PCIe slots on the board.
-			 */
-			pcie@1,0 {
-				/* Port 0, Lane 0 */
-				status = "okay";
-			};
-			pcie@2,0 {
-				/* Port 0, Lane 1 */
-				status = "okay";
-			};
-			pcie@3,0 {
-				/* Port 0, Lane 2 */
-				status = "okay";
-			};
-			pcie@4,0 {
-				/* Port 0, Lane 3 */
-				status = "okay";
-			};
-			pcie@9,0 {
-				/* Port 2, Lane 0 */
-				status = "okay";
-			};
-			pcie@10,0 {
-				/* Port 3, Lane 0 */
-				status = "okay";
-			};
-		};
-
 		internal-regs {
 			serial@12000 {
+				clock-frequency = <250000000>;
 				status = "okay";
 			};
 			serial@12100 {
+				clock-frequency = <250000000>;
 				status = "okay";
 			};
 			serial@12200 {
+				clock-frequency = <250000000>;
 				status = "okay";
 			};
 			serial@12300 {
+				clock-frequency = <250000000>;
 				status = "okay";
 			};
 
@@ -201,7 +97,6 @@
 				pinctrl-names = "default";
 				status = "okay";
 				/* No CD or WP GPIOs */
-				broken-cd;
 			};
 
 			usb@50000 {
@@ -227,6 +122,39 @@
 					spi-max-frequency = <20000000>;
 				};
 			};
+
+			pcie-controller {
+				status = "okay";
+
+				/*
+				 * All 6 slots are physically present as
+				 * standard PCIe slots on the board.
+				 */
+				pcie@1,0 {
+					/* Port 0, Lane 0 */
+					status = "okay";
+				};
+				pcie@2,0 {
+					/* Port 0, Lane 1 */
+					status = "okay";
+				};
+				pcie@3,0 {
+					/* Port 0, Lane 2 */
+					status = "okay";
+				};
+				pcie@4,0 {
+					/* Port 0, Lane 3 */
+					status = "okay";
+				};
+				pcie@9,0 {
+					/* Port 2, Lane 0 */
+					status = "okay";
+				};
+				pcie@10,0 {
+					/* Port 3, Lane 0 */
+					status = "okay";
+				};
+			};
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/armada-xp-gp.dts b/arch/arm/boot/dts/armada-xp-gp.dts
--- a/arch/arm/boot/dts/armada-xp-gp.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-xp-gp.dts	2015-10-27 00:45:05.000000000 +0000
@@ -2,63 +2,19 @@
  * Device Tree file for Marvell Armada XP development board
  * (DB-MV784MP-GP)
  *
- * Copyright (C) 2013-2014 Marvell
+ * Copyright (C) 2013 Marvell
  *
  * Lior Amsalem <alior@marvell.com>
  * Gregory CLEMENT <gregory.clement@free-electrons.com>
  * Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
- *
- * Note: this Device Tree assumes that the bootloader has remapped the
- * internal registers to 0xf1000000 (instead of the default
- * 0xd0000000). The 0xf1000000 is the default used by the recent,
- * DT-capable, U-Boot bootloaders provided by Marvell. Some earlier
- * boards were delivered with an older version of the bootloader that
- * left internal registers mapped at 0xd0000000. If you are in this
- * situation, you should either update your bootloader (preferred
- * solution) or the below Device Tree should be adjusted.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  */
 
 /dts-v1/;
-#include <dt-bindings/gpio/gpio.h>
-#include "armada-xp-mv78460.dtsi"
+/include/ "armada-xp-mv78460.dtsi"
 
 / {
 	model = "Marvell Armada XP Development Board DB-MV784MP-GP";
@@ -74,99 +30,37 @@
                  * 8 GB of plug-in RAM modules by default.The amount
                  * of memory available can be changed by the
                  * bootloader according the size of the module
-                 * actually plugged. However, memory between
-                 * 0xF0000000 to 0xFFFFFFFF cannot be used, as it is
-                 * the address range used for I/O (internal registers,
-                 * MBus windows).
+                 * actually plugged. Only 7GB are usable because
+                 * addresses from 0xC0000000 to 0xffffffff are used by
+                 * the internal registers of the SoC.
 		 */
-		reg = <0x00000000 0x00000000 0x00000000 0xf0000000>,
+		reg = <0x00000000 0x00000000 0x00000000 0xC0000000>,
 		      <0x00000001 0x00000000 0x00000001 0x00000000>;
 	};
 
-	cpus {
-		pm_pic {
-			ctrl-gpios = <&gpio0 16 GPIO_ACTIVE_LOW>,
-				     <&gpio0 17 GPIO_ACTIVE_LOW>,
-				     <&gpio0 18 GPIO_ACTIVE_LOW>;
-		};
-	};
-
 	soc {
-		ranges = <MBUS_ID(0xf0, 0x01) 0 0 0xf1000000 0x100000
-			  MBUS_ID(0x01, 0x1d) 0 0 0xfff00000 0x100000
-			  MBUS_ID(0x01, 0x2f) 0 0 0xf0000000 0x1000000>;
-
-		devbus-bootcs {
-			status = "okay";
-
-			/* Device Bus parameters are required */
-
-			/* Read parameters */
-			devbus,bus-width    = <16>;
-			devbus,turn-off-ps  = <60000>;
-			devbus,badr-skew-ps = <0>;
-			devbus,acc-first-ps = <124000>;
-			devbus,acc-next-ps  = <248000>;
-			devbus,rd-setup-ps  = <0>;
-			devbus,rd-hold-ps   = <0>;
-
-			/* Write parameters */
-			devbus,sync-enable = <0>;
-			devbus,wr-high-ps  = <60000>;
-			devbus,wr-low-ps   = <60000>;
-			devbus,ale-wr-ps   = <60000>;
-
-			/* NOR 16 MiB */
-			nor@0 {
-				compatible = "cfi-flash";
-				reg = <0 0x1000000>;
-				bank-width = <2>;
-			};
-		};
-
-		pcie-controller {
-			status = "okay";
-
-			/*
-			 * The 3 slots are physically present as
-			 * standard PCIe slots on the board.
-			 */
-			pcie@1,0 {
-				/* Port 0, Lane 0 */
-				status = "okay";
-			};
-			pcie@9,0 {
-				/* Port 2, Lane 0 */
-				status = "okay";
-			};
-			pcie@10,0 {
-				/* Port 3, Lane 0 */
-				status = "okay";
-			};
-		};
+		ranges = <0          0 0xd0000000 0x100000  /* Internal registers 1MiB */
+			  0xe0000000 0 0xe0000000 0x8100000 /* PCIe */
+			  0xf0000000 0 0xf0000000 0x1000000 /* Device Bus, NOR 16MiB  */>;
 
 		internal-regs {
 			serial@12000 {
+				clock-frequency = <250000000>;
 				status = "okay";
 			};
 			serial@12100 {
+				clock-frequency = <250000000>;
 				status = "okay";
 			};
 			serial@12200 {
+				clock-frequency = <250000000>;
 				status = "okay";
 			};
 			serial@12300 {
+				clock-frequency = <250000000>;
 				status = "okay";
 			};
-			pinctrl {
-				pinctrl-0 = <&pic_pins>;
-				pinctrl-names = "default";
-				pic_pins: pic-pins-0 {
-					marvell,pins = "mpp16", "mpp17",
-						       "mpp18";
-					marvell,function = "gpio";
-				};
-			};
+
 			sata@a0000 {
 				nr-ports = <2>;
 				status = "okay";
@@ -193,32 +87,22 @@
 			ethernet@70000 {
 				status = "okay";
 				phy = <&phy0>;
-				phy-mode = "qsgmii";
+				phy-mode = "rgmii-id";
 			};
 			ethernet@74000 {
 				status = "okay";
 				phy = <&phy1>;
-				phy-mode = "qsgmii";
+				phy-mode = "rgmii-id";
 			};
 			ethernet@30000 {
 				status = "okay";
 				phy = <&phy2>;
-				phy-mode = "qsgmii";
+				phy-mode = "rgmii-id";
 			};
 			ethernet@34000 {
 				status = "okay";
 				phy = <&phy3>;
-				phy-mode = "qsgmii";
-			};
-
-			/* Front-side USB slot */
-			usb@50000 {
-				status = "okay";
-			};
-
-			/* Back-side USB slot */
-			usb@51000 {
-				status = "okay";
+				phy-mode = "rgmii-id";
 			};
 
 			spi0: spi@10600 {
@@ -233,12 +117,54 @@
 				};
 			};
 
-			nand@d0000 {
+			devbus-bootcs@10400 {
 				status = "okay";
-				num-cs = <1>;
-				marvell,nand-keep-config;
-				marvell,nand-enable-arbiter;
-				nand-on-flash-bbt;
+				ranges = <0 0xf0000000 0x1000000>; /* @addr 0xf000000, size 0x1000000 */
+
+				/* Device Bus parameters are required */
+
+				/* Read parameters */
+				devbus,bus-width    = <16>;
+				devbus,turn-off-ps  = <60000>;
+				devbus,badr-skew-ps = <0>;
+				devbus,acc-first-ps = <124000>;
+				devbus,acc-next-ps  = <248000>;
+				devbus,rd-setup-ps  = <0>;
+				devbus,rd-hold-ps   = <0>;
+
+				/* Write parameters */
+				devbus,sync-enable = <0>;
+				devbus,wr-high-ps  = <60000>;
+				devbus,wr-low-ps   = <60000>;
+				devbus,ale-wr-ps   = <60000>;
+
+				/* NOR 16 MiB */
+				nor@0 {
+					compatible = "cfi-flash";
+					reg = <0 0x1000000>;
+					bank-width = <2>;
+				};
+			};
+
+			pcie-controller {
+				status = "okay";
+
+				/*
+				 * The 3 slots are physically present as
+				 * standard PCIe slots on the board.
+				 */
+				pcie@1,0 {
+					/* Port 0, Lane 0 */
+					status = "okay";
+				};
+				pcie@9,0 {
+					/* Port 2, Lane 0 */
+					status = "okay";
+				};
+				pcie@10,0 {
+					/* Port 3, Lane 0 */
+					status = "okay";
+				};
 			};
 		};
 	};
diff -urNp a/arch/arm/boot/dts/armada-xp-mv78230.dtsi b/arch/arm/boot/dts/armada-xp-mv78230.dtsi
--- a/arch/arm/boot/dts/armada-xp-mv78230.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-xp-mv78230.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -5,49 +5,15 @@
  *
  * Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  *
  * Contains definitions specific to the Armada XP MV78230 SoC that are not
  * common to all Armada XP SoCs.
  */
 
-#include "armada-xp.dtsi"
+/include/ "armada-xp.dtsi"
 
 / {
 	model = "Marvell Armada XP MV78230 SoC";
@@ -61,14 +27,12 @@
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		enable-method = "marvell,armada-xp-smp";
 
 		cpu@0 {
 			device_type = "cpu";
 			compatible = "marvell,sheeva-v7";
 			reg = <0>;
 			clocks = <&cpuclk 0>;
-			clock-latency = <1000000>;
 		};
 
 		cpu@1 {
@@ -76,131 +40,22 @@
 			compatible = "marvell,sheeva-v7";
 			reg = <1>;
 			clocks = <&cpuclk 1>;
-			clock-latency = <1000000>;
 		};
 	};
 
 	soc {
-		/*
-		 * MV78230 has 2 PCIe units Gen2.0: One unit can be
-		 * configured as x4 or quad x1 lanes. One unit is
-		 * x1 only.
-		 */
-		pcie-controller {
-			compatible = "marvell,armada-xp-pcie";
-			status = "disabled";
-			device_type = "pci";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-
-			msi-parent = <&mpic>;
-			bus-range = <0x00 0xff>;
-
-			ranges =
-			       <0x82000000 0 0x40000 MBUS_ID(0xf0, 0x01) 0x40000 0 0x00002000   /* Port 0.0 registers */
-				0x82000000 0 0x44000 MBUS_ID(0xf0, 0x01) 0x44000 0 0x00002000   /* Port 0.1 registers */
-				0x82000000 0 0x48000 MBUS_ID(0xf0, 0x01) 0x48000 0 0x00002000   /* Port 0.2 registers */
-				0x82000000 0 0x4c000 MBUS_ID(0xf0, 0x01) 0x4c000 0 0x00002000   /* Port 0.3 registers */
-				0x82000000 0 0x80000 MBUS_ID(0xf0, 0x01) 0x80000 0 0x00002000   /* Port 1.0 registers */
-				0x82000000 0x1 0       MBUS_ID(0x04, 0xe8) 0 1 0 /* Port 0.0 MEM */
-				0x81000000 0x1 0       MBUS_ID(0x04, 0xe0) 0 1 0 /* Port 0.0 IO  */
-				0x82000000 0x2 0       MBUS_ID(0x04, 0xd8) 0 1 0 /* Port 0.1 MEM */
-				0x81000000 0x2 0       MBUS_ID(0x04, 0xd0) 0 1 0 /* Port 0.1 IO  */
-				0x82000000 0x3 0       MBUS_ID(0x04, 0xb8) 0 1 0 /* Port 0.2 MEM */
-				0x81000000 0x3 0       MBUS_ID(0x04, 0xb0) 0 1 0 /* Port 0.2 IO  */
-				0x82000000 0x4 0       MBUS_ID(0x04, 0x78) 0 1 0 /* Port 0.3 MEM */
-				0x81000000 0x4 0       MBUS_ID(0x04, 0x70) 0 1 0 /* Port 0.3 IO  */
-				0x82000000 0x5 0       MBUS_ID(0x08, 0xe8) 0 1 0 /* Port 1.0 MEM */
-				0x81000000 0x5 0       MBUS_ID(0x08, 0xe0) 0 1 0 /* Port 1.0 IO  */>;
-
-			pcie@1,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x40000 0 0x2000>;
-				reg = <0x0800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x1 0 1 0
-					  0x81000000 0 0 0x81000000 0x1 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 58>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 5>;
-				status = "disabled";
-			};
-
-			pcie@2,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x44000 0 0x2000>;
-				reg = <0x1000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x2 0 1 0
-					  0x81000000 0 0 0x81000000 0x2 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 59>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <1>;
-				clocks = <&gateclk 6>;
-				status = "disabled";
-			};
-
-			pcie@3,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x48000 0 0x2000>;
-				reg = <0x1800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x3 0 1 0
-					  0x81000000 0 0 0x81000000 0x3 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 60>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <2>;
-				clocks = <&gateclk 7>;
-				status = "disabled";
-			};
-
-			pcie@4,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x4c000 0 0x2000>;
-				reg = <0x2000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x4 0 1 0
-					  0x81000000 0 0 0x81000000 0x4 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 61>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <3>;
-				clocks = <&gateclk 8>;
-				status = "disabled";
-			};
-
-			pcie@5,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x80000 0 0x2000>;
-				reg = <0x2800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x5 0 1 0
-					  0x81000000 0 0 0x81000000 0x5 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 62>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 9>;
-				status = "disabled";
+		internal-regs {
+			pinctrl {
+				compatible = "marvell,mv78230-pinctrl";
+				reg = <0x18000 0x38>;
+
+				sdio_pins: sdio-pins {
+					marvell,pins = "mpp30", "mpp31", "mpp32",
+						       "mpp33", "mpp34", "mpp35";
+					marvell,function = "sd0";
+				};
 			};
-		};
 
-		internal-regs {
 			gpio0: gpio@18100 {
 				compatible = "marvell,orion-gpio";
 				reg = <0x18100 0x40>;
@@ -208,7 +63,7 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <82>, <83>, <84>, <85>;
 			};
 
@@ -219,13 +74,113 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <87>, <88>, <89>;
 			};
+
+			/*
+			 * MV78230 has 2 PCIe units Gen2.0: One unit can be
+			 * configured as x4 or quad x1 lanes. One unit is
+			 * x1 only.
+			 */
+			pcie-controller {
+				compatible = "marvell,armada-xp-pcie";
+				status = "disabled";
+				device_type = "pci";
+
+#address-cells = <3>;
+#size-cells = <2>;
+
+				bus-range = <0x00 0xff>;
+
+				ranges = <0x82000000 0 0x40000 0x40000 0 0x00002000   /* Port 0.0 registers */
+					0x82000000 0 0x44000 0x44000 0 0x00002000   /* Port 0.1 registers */
+					0x82000000 0 0x48000 0x48000 0 0x00002000   /* Port 0.2 registers */
+					0x82000000 0 0x4c000 0x4c000 0 0x00002000   /* Port 0.3 registers */
+					0x82000000 0 0x80000 0x80000 0 0x00002000   /* Port 1.0 registers */
+					0x82000000 0 0xe0000000 0xe0000000 0 0x08000000   /* non-prefetchable memory */
+					0x81000000 0 0	  0xe8000000 0 0x00100000>; /* downstream I/O */
+
+				pcie@1,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x40000 0 0x2000>;
+					reg = <0x0800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 58>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 5>;
+					status = "disabled";
+				};
+
+				pcie@2,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x44000 0 0x2000>;
+					reg = <0x1000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 59>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <1>;
+					clocks = <&gateclk 6>;
+					status = "disabled";
+				};
+
+				pcie@3,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x48000 0 0x2000>;
+					reg = <0x1800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 60>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <2>;
+					clocks = <&gateclk 7>;
+					status = "disabled";
+				};
+
+				pcie@4,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x4c000 0 0x2000>;
+					reg = <0x2000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 61>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <3>;
+					clocks = <&gateclk 8>;
+					status = "disabled";
+				};
+
+				pcie@5,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x80000 0 0x2000>;
+					reg = <0x2800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 62>;
+					marvell,pcie-port = <1>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 9>;
+					status = "disabled";
+				};
+			};
 		};
 	};
 };
-
-&pinctrl {
-	compatible = "marvell,mv78230-pinctrl";
-};
diff -urNp a/arch/arm/boot/dts/armada-xp-mv78260.dtsi b/arch/arm/boot/dts/armada-xp-mv78260.dtsi
--- a/arch/arm/boot/dts/armada-xp-mv78260.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-xp-mv78260.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -5,49 +5,15 @@
  *
  * Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  *
  * Contains definitions specific to the Armada XP MV78260 SoC that are not
  * common to all Armada XP SoCs.
  */
 
-#include "armada-xp.dtsi"
+/include/ "armada-xp.dtsi"
 
 / {
 	model = "Marvell Armada XP MV78260 SoC";
@@ -57,20 +23,17 @@
 		gpio0 = &gpio0;
 		gpio1 = &gpio1;
 		gpio2 = &gpio2;
-		eth3 = &eth3;
 	};
 
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		enable-method = "marvell,armada-xp-smp";
 
 		cpu@0 {
 			device_type = "cpu";
 			compatible = "marvell,sheeva-v7";
 			reg = <0>;
 			clocks = <&cpuclk 0>;
-			clock-latency = <1000000>;
 		};
 
 		cpu@1 {
@@ -78,213 +41,22 @@
 			compatible = "marvell,sheeva-v7";
 			reg = <1>;
 			clocks = <&cpuclk 1>;
-			clock-latency = <1000000>;
 		};
 	};
 
 	soc {
-		/*
-		 * MV78260 has 3 PCIe units Gen2.0: Two units can be
-		 * configured as x4 or quad x1 lanes. One unit is
-		 * x4 only.
-		 */
-		pcie-controller {
-			compatible = "marvell,armada-xp-pcie";
-			status = "disabled";
-			device_type = "pci";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-
-			msi-parent = <&mpic>;
-			bus-range = <0x00 0xff>;
-
-			ranges =
-			       <0x82000000 0 0x40000 MBUS_ID(0xf0, 0x01) 0x40000 0 0x00002000   /* Port 0.0 registers */
-				0x82000000 0 0x42000 MBUS_ID(0xf0, 0x01) 0x42000 0 0x00002000   /* Port 2.0 registers */
-				0x82000000 0 0x44000 MBUS_ID(0xf0, 0x01) 0x44000 0 0x00002000   /* Port 0.1 registers */
-				0x82000000 0 0x48000 MBUS_ID(0xf0, 0x01) 0x48000 0 0x00002000   /* Port 0.2 registers */
-				0x82000000 0 0x4c000 MBUS_ID(0xf0, 0x01) 0x4c000 0 0x00002000   /* Port 0.3 registers */
-				0x82000000 0 0x80000 MBUS_ID(0xf0, 0x01) 0x80000 0 0x00002000   /* Port 1.0 registers */
-				0x82000000 0 0x84000 MBUS_ID(0xf0, 0x01) 0x84000 0 0x00002000   /* Port 1.1 registers */
-				0x82000000 0 0x88000 MBUS_ID(0xf0, 0x01) 0x88000 0 0x00002000   /* Port 1.2 registers */
-				0x82000000 0 0x8c000 MBUS_ID(0xf0, 0x01) 0x8c000 0 0x00002000   /* Port 1.3 registers */
-				0x82000000 0x1 0     MBUS_ID(0x04, 0xe8) 0 1 0 /* Port 0.0 MEM */
-				0x81000000 0x1 0     MBUS_ID(0x04, 0xe0) 0 1 0 /* Port 0.0 IO  */
-				0x82000000 0x2 0     MBUS_ID(0x04, 0xd8) 0 1 0 /* Port 0.1 MEM */
-				0x81000000 0x2 0     MBUS_ID(0x04, 0xd0) 0 1 0 /* Port 0.1 IO  */
-				0x82000000 0x3 0     MBUS_ID(0x04, 0xb8) 0 1 0 /* Port 0.2 MEM */
-				0x81000000 0x3 0     MBUS_ID(0x04, 0xb0) 0 1 0 /* Port 0.2 IO  */
-				0x82000000 0x4 0     MBUS_ID(0x04, 0x78) 0 1 0 /* Port 0.3 MEM */
-				0x81000000 0x4 0     MBUS_ID(0x04, 0x70) 0 1 0 /* Port 0.3 IO  */
-
-				0x82000000 0x5 0     MBUS_ID(0x08, 0xe8) 0 1 0 /* Port 1.0 MEM */
-				0x81000000 0x5 0     MBUS_ID(0x08, 0xe0) 0 1 0 /* Port 1.0 IO  */
-				0x82000000 0x6 0     MBUS_ID(0x08, 0xd8) 0 1 0 /* Port 1.1 MEM */
-				0x81000000 0x6 0     MBUS_ID(0x08, 0xd0) 0 1 0 /* Port 1.1 IO  */
-				0x82000000 0x7 0     MBUS_ID(0x08, 0xb8) 0 1 0 /* Port 1.2 MEM */
-				0x81000000 0x7 0     MBUS_ID(0x08, 0xb0) 0 1 0 /* Port 1.2 IO  */
-				0x82000000 0x8 0     MBUS_ID(0x08, 0x78) 0 1 0 /* Port 1.3 MEM */
-				0x81000000 0x8 0     MBUS_ID(0x08, 0x70) 0 1 0 /* Port 1.3 IO  */
-
-				0x82000000 0x9 0     MBUS_ID(0x04, 0xf8) 0 1 0 /* Port 2.0 MEM */
-				0x81000000 0x9 0     MBUS_ID(0x04, 0xf0) 0 1 0 /* Port 2.0 IO  */>;
-
-			pcie@1,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x40000 0 0x2000>;
-				reg = <0x0800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x1 0 1 0
-					  0x81000000 0 0 0x81000000 0x1 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 58>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 5>;
-				status = "disabled";
-			};
-
-			pcie@2,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x44000 0 0x2000>;
-				reg = <0x1000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x2 0 1 0
-					  0x81000000 0 0 0x81000000 0x2 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 59>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <1>;
-				clocks = <&gateclk 6>;
-				status = "disabled";
-			};
-
-			pcie@3,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x48000 0 0x2000>;
-				reg = <0x1800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x3 0 1 0
-					  0x81000000 0 0 0x81000000 0x3 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 60>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <2>;
-				clocks = <&gateclk 7>;
-				status = "disabled";
-			};
-
-			pcie@4,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x4c000 0 0x2000>;
-				reg = <0x2000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x4 0 1 0
-					  0x81000000 0 0 0x81000000 0x4 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 61>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <3>;
-				clocks = <&gateclk 8>;
-				status = "disabled";
-			};
-
-			pcie@5,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x80000 0 0x2000>;
-				reg = <0x2800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x5 0 1 0
-					  0x81000000 0 0 0x81000000 0x5 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 62>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 9>;
-				status = "disabled";
-			};
-
-			pcie@6,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x84000 0 0x2000>;
-				reg = <0x3000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x6 0 1 0
-					  0x81000000 0 0 0x81000000 0x6 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 63>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <1>;
-				clocks = <&gateclk 10>;
-				status = "disabled";
-			};
-
-			pcie@7,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x88000 0 0x2000>;
-				reg = <0x3800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x7 0 1 0
-					  0x81000000 0 0 0x81000000 0x7 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 64>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <2>;
-				clocks = <&gateclk 11>;
-				status = "disabled";
-			};
-
-			pcie@8,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x8c000 0 0x2000>;
-				reg = <0x4000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x8 0 1 0
-					  0x81000000 0 0 0x81000000 0x8 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 65>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <3>;
-				clocks = <&gateclk 12>;
-				status = "disabled";
-			};
-
-			pcie@9,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x42000 0 0x2000>;
-				reg = <0x4800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x9 0 1 0
-					  0x81000000 0 0 0x81000000 0x9 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 99>;
-				marvell,pcie-port = <2>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 26>;
-				status = "disabled";
+		internal-regs {
+			pinctrl {
+				compatible = "marvell,mv78260-pinctrl";
+				reg = <0x18000 0x38>;
+
+				sdio_pins: sdio-pins {
+					marvell,pins = "mpp30", "mpp31", "mpp32",
+						       "mpp33", "mpp34", "mpp35";
+					marvell,function = "sd0";
+				};
 			};
-		};
 
-		internal-regs {
 			gpio0: gpio@18100 {
 				compatible = "marvell,orion-gpio";
 				reg = <0x18100 0x40>;
@@ -292,7 +64,7 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <82>, <83>, <84>, <85>;
 			};
 
@@ -303,7 +75,7 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <87>, <88>, <89>, <90>;
 			};
 
@@ -314,21 +86,189 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <91>;
 			};
 
-			eth3: ethernet@34000 {
+			ethernet@34000 {
 				compatible = "marvell,armada-370-neta";
-				reg = <0x34000 0x4000>;
+				reg = <0x34000 0x2500>;
 				interrupts = <14>;
 				clocks = <&gateclk 1>;
 				status = "disabled";
 			};
+
+			/*
+			 * MV78260 has 3 PCIe units Gen2.0: Two units can be
+			 * configured as x4 or quad x1 lanes. One unit is
+			 * x4 only.
+			 */
+			pcie-controller {
+				compatible = "marvell,armada-xp-pcie";
+				status = "disabled";
+				device_type = "pci";
+
+				#address-cells = <3>;
+				#size-cells = <2>;
+
+				bus-range = <0x00 0xff>;
+
+				ranges = <0x82000000 0 0x40000 0x40000 0 0x00002000   /* Port 0.0 registers */
+					0x82000000 0 0x42000 0x42000 0 0x00002000   /* Port 2.0 registers */
+					0x82000000 0 0x44000 0x44000 0 0x00002000   /* Port 0.1 registers */
+					0x82000000 0 0x48000 0x48000 0 0x00002000   /* Port 0.2 registers */
+					0x82000000 0 0x4c000 0x4c000 0 0x00002000   /* Port 0.3 registers */
+					0x82000000 0 0x80000 0x80000 0 0x00002000   /* Port 1.0 registers */
+					0x82000000 0 0x84000 0x84000 0 0x00002000   /* Port 1.1 registers */
+					0x82000000 0 0x88000 0x88000 0 0x00002000   /* Port 1.2 registers */
+					0x82000000 0 0x8c000 0x8c000 0 0x00002000   /* Port 1.3 registers */
+					0x82000000 0 0xe0000000 0xe0000000 0 0x08000000   /* non-prefetchable memory */
+					0x81000000 0 0	  0xe8000000 0 0x00100000>; /* downstream I/O */
+
+				pcie@1,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x40000 0 0x2000>;
+					reg = <0x0800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 58>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 5>;
+					status = "disabled";
+				};
+
+				pcie@2,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x44000 0 0x2000>;
+					reg = <0x1000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 59>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <1>;
+					clocks = <&gateclk 6>;
+					status = "disabled";
+				};
+
+				pcie@3,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x48000 0 0x2000>;
+					reg = <0x1800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 60>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <2>;
+					clocks = <&gateclk 7>;
+					status = "disabled";
+				};
+
+				pcie@4,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x4c000 0 0x2000>;
+					reg = <0x2000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 61>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <3>;
+					clocks = <&gateclk 8>;
+					status = "disabled";
+				};
+
+				pcie@5,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x80000 0 0x2000>;
+					reg = <0x2800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 62>;
+					marvell,pcie-port = <1>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 9>;
+					status = "disabled";
+				};
+
+				pcie@6,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x84000 0 0x2000>;
+					reg = <0x3000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 63>;
+					marvell,pcie-port = <1>;
+					marvell,pcie-lane = <1>;
+					clocks = <&gateclk 10>;
+					status = "disabled";
+				};
+
+				pcie@7,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x88000 0 0x2000>;
+					reg = <0x3800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 64>;
+					marvell,pcie-port = <1>;
+					marvell,pcie-lane = <2>;
+					clocks = <&gateclk 11>;
+					status = "disabled";
+				};
+
+				pcie@8,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x8c000 0 0x2000>;
+					reg = <0x4000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 65>;
+					marvell,pcie-port = <1>;
+					marvell,pcie-lane = <3>;
+					clocks = <&gateclk 12>;
+					status = "disabled";
+				};
+
+				pcie@9,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x42000 0 0x2000>;
+					reg = <0x4800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 99>;
+					marvell,pcie-port = <2>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 26>;
+					status = "disabled";
+				};
+			};
 		};
 	};
 };
-
-&pinctrl {
-	compatible = "marvell,mv78260-pinctrl";
-};
diff -urNp a/arch/arm/boot/dts/armada-xp-mv78460.dtsi b/arch/arm/boot/dts/armada-xp-mv78460.dtsi
--- a/arch/arm/boot/dts/armada-xp-mv78460.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-xp-mv78460.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -5,49 +5,15 @@
  *
  * Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  *
  * Contains definitions specific to the Armada XP MV78460 SoC that are not
  * common to all Armada XP SoCs.
  */
 
-#include "armada-xp.dtsi"
+/include/ "armada-xp.dtsi"
 
 / {
 	model = "Marvell Armada XP MV78460 SoC";
@@ -57,21 +23,18 @@
 		gpio0 = &gpio0;
 		gpio1 = &gpio1;
 		gpio2 = &gpio2;
-		eth3 = &eth3;
 	};
 
 
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		enable-method = "marvell,armada-xp-smp";
 
 		cpu@0 {
 			device_type = "cpu";
 			compatible = "marvell,sheeva-v7";
 			reg = <0>;
 			clocks = <&cpuclk 0>;
-			clock-latency = <1000000>;
 		};
 
 		cpu@1 {
@@ -79,7 +42,6 @@
 			compatible = "marvell,sheeva-v7";
 			reg = <1>;
 			clocks = <&cpuclk 1>;
-			clock-latency = <1000000>;
 		};
 
 		cpu@2 {
@@ -87,7 +49,6 @@
 			compatible = "marvell,sheeva-v7";
 			reg = <2>;
 			clocks = <&cpuclk 2>;
-			clock-latency = <1000000>;
 		};
 
 		cpu@3 {
@@ -95,234 +56,22 @@
 			compatible = "marvell,sheeva-v7";
 			reg = <3>;
 			clocks = <&cpuclk 3>;
-			clock-latency = <1000000>;
 		};
 	};
 
 	soc {
-		/*
-		 * MV78460 has 4 PCIe units Gen2.0: Two units can be
-		 * configured as x4 or quad x1 lanes. Two units are
-		 * x4/x1.
-		 */
-		pcie-controller {
-			compatible = "marvell,armada-xp-pcie";
-			status = "disabled";
-			device_type = "pci";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-
-			msi-parent = <&mpic>;
-			bus-range = <0x00 0xff>;
-
-			ranges =
-			       <0x82000000 0 0x40000 MBUS_ID(0xf0, 0x01) 0x40000 0 0x00002000   /* Port 0.0 registers */
-				0x82000000 0 0x42000 MBUS_ID(0xf0, 0x01) 0x42000 0 0x00002000   /* Port 2.0 registers */
-				0x82000000 0 0x44000 MBUS_ID(0xf0, 0x01) 0x44000 0 0x00002000   /* Port 0.1 registers */
-				0x82000000 0 0x48000 MBUS_ID(0xf0, 0x01) 0x48000 0 0x00002000   /* Port 0.2 registers */
-				0x82000000 0 0x4c000 MBUS_ID(0xf0, 0x01) 0x4c000 0 0x00002000   /* Port 0.3 registers */
-				0x82000000 0 0x80000 MBUS_ID(0xf0, 0x01) 0x80000 0 0x00002000   /* Port 1.0 registers */
-				0x82000000 0 0x82000 MBUS_ID(0xf0, 0x01) 0x82000 0 0x00002000   /* Port 3.0 registers */
-				0x82000000 0 0x84000 MBUS_ID(0xf0, 0x01) 0x84000 0 0x00002000   /* Port 1.1 registers */
-				0x82000000 0 0x88000 MBUS_ID(0xf0, 0x01) 0x88000 0 0x00002000   /* Port 1.2 registers */
-				0x82000000 0 0x8c000 MBUS_ID(0xf0, 0x01) 0x8c000 0 0x00002000   /* Port 1.3 registers */
-				0x82000000 0x1 0     MBUS_ID(0x04, 0xe8) 0 1 0 /* Port 0.0 MEM */
-				0x81000000 0x1 0     MBUS_ID(0x04, 0xe0) 0 1 0 /* Port 0.0 IO  */
-				0x82000000 0x2 0     MBUS_ID(0x04, 0xd8) 0 1 0 /* Port 0.1 MEM */
-				0x81000000 0x2 0     MBUS_ID(0x04, 0xd0) 0 1 0 /* Port 0.1 IO  */
-				0x82000000 0x3 0     MBUS_ID(0x04, 0xb8) 0 1 0 /* Port 0.2 MEM */
-				0x81000000 0x3 0     MBUS_ID(0x04, 0xb0) 0 1 0 /* Port 0.2 IO  */
-				0x82000000 0x4 0     MBUS_ID(0x04, 0x78) 0 1 0 /* Port 0.3 MEM */
-				0x81000000 0x4 0     MBUS_ID(0x04, 0x70) 0 1 0 /* Port 0.3 IO  */
-
-				0x82000000 0x5 0     MBUS_ID(0x08, 0xe8) 0 1 0 /* Port 1.0 MEM */
-				0x81000000 0x5 0     MBUS_ID(0x08, 0xe0) 0 1 0 /* Port 1.0 IO  */
-				0x82000000 0x6 0     MBUS_ID(0x08, 0xd8) 0 1 0 /* Port 1.1 MEM */
-				0x81000000 0x6 0     MBUS_ID(0x08, 0xd0) 0 1 0 /* Port 1.1 IO  */
-				0x82000000 0x7 0     MBUS_ID(0x08, 0xb8) 0 1 0 /* Port 1.2 MEM */
-				0x81000000 0x7 0     MBUS_ID(0x08, 0xb0) 0 1 0 /* Port 1.2 IO  */
-				0x82000000 0x8 0     MBUS_ID(0x08, 0x78) 0 1 0 /* Port 1.3 MEM */
-				0x81000000 0x8 0     MBUS_ID(0x08, 0x70) 0 1 0 /* Port 1.3 IO  */
-
-				0x82000000 0x9 0     MBUS_ID(0x04, 0xf8) 0 1 0 /* Port 2.0 MEM */
-				0x81000000 0x9 0     MBUS_ID(0x04, 0xf0) 0 1 0 /* Port 2.0 IO  */
-
-				0x82000000 0xa 0     MBUS_ID(0x08, 0xf8) 0 1 0 /* Port 3.0 MEM */
-				0x81000000 0xa 0     MBUS_ID(0x08, 0xf0) 0 1 0 /* Port 3.0 IO  */>;
-
-			pcie@1,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x40000 0 0x2000>;
-				reg = <0x0800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x1 0 1 0
-					  0x81000000 0 0 0x81000000 0x1 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 58>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 5>;
-				status = "disabled";
-			};
-
-			pcie@2,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82001000 0 0x44000 0 0x2000>;
-				reg = <0x1000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x2 0 1 0
-					  0x81000000 0 0 0x81000000 0x2 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 59>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <1>;
-				clocks = <&gateclk 6>;
-				status = "disabled";
-			};
-
-			pcie@3,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82001800 0 0x48000 0 0x2000>;
-				reg = <0x1800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x3 0 1 0
-					  0x81000000 0 0 0x81000000 0x3 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 60>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <2>;
-				clocks = <&gateclk 7>;
-				status = "disabled";
-			};
-
-			pcie@4,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82002000 0 0x4c000 0 0x2000>;
-				reg = <0x2000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x4 0 1 0
-					  0x81000000 0 0 0x81000000 0x4 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 61>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <3>;
-				clocks = <&gateclk 8>;
-				status = "disabled";
-			};
-
-			pcie@5,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82002800 0 0x80000 0 0x2000>;
-				reg = <0x2800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x5 0 1 0
-					  0x81000000 0 0 0x81000000 0x5 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 62>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 9>;
-				status = "disabled";
-			};
-
-			pcie@6,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82003000 0 0x84000 0 0x2000>;
-				reg = <0x3000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x6 0 1 0
-					  0x81000000 0 0 0x81000000 0x6 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 63>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <1>;
-				clocks = <&gateclk 10>;
-				status = "disabled";
-			};
-
-			pcie@7,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82003800 0 0x88000 0 0x2000>;
-				reg = <0x3800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x7 0 1 0
-					  0x81000000 0 0 0x81000000 0x7 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 64>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <2>;
-				clocks = <&gateclk 11>;
-				status = "disabled";
-			};
-
-			pcie@8,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82004000 0 0x8c000 0 0x2000>;
-				reg = <0x4000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x8 0 1 0
-					  0x81000000 0 0 0x81000000 0x8 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 65>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <3>;
-				clocks = <&gateclk 12>;
-				status = "disabled";
-			};
-
-			pcie@9,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82004800 0 0x42000 0 0x2000>;
-				reg = <0x4800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x9 0 1 0
-					  0x81000000 0 0 0x81000000 0x9 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 99>;
-				marvell,pcie-port = <2>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 26>;
-				status = "disabled";
-			};
-
-			pcie@10,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82005000 0 0x82000 0 0x2000>;
-				reg = <0x5000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0xa 0 1 0
-					  0x81000000 0 0 0x81000000 0xa 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &mpic 103>;
-				marvell,pcie-port = <3>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gateclk 27>;
-				status = "disabled";
+		internal-regs {
+			pinctrl {
+				compatible = "marvell,mv78460-pinctrl";
+				reg = <0x18000 0x38>;
+
+				sdio_pins: sdio-pins {
+					marvell,pins = "mpp30", "mpp31", "mpp32",
+						       "mpp33", "mpp34", "mpp35";
+					marvell,function = "sd0";
+				};
 			};
-		};
 
-		internal-regs {
 			gpio0: gpio@18100 {
 				compatible = "marvell,orion-gpio";
 				reg = <0x18100 0x40>;
@@ -330,7 +79,7 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <82>, <83>, <84>, <85>;
 			};
 
@@ -341,7 +90,7 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <87>, <88>, <89>, <90>;
 			};
 
@@ -352,21 +101,205 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
-				#interrupt-cells = <2>;
+				#interrupts-cells = <2>;
 				interrupts = <91>;
 			};
 
-			eth3: ethernet@34000 {
+			ethernet@34000 {
 				compatible = "marvell,armada-370-neta";
-				reg = <0x34000 0x4000>;
+				reg = <0x34000 0x2500>;
 				interrupts = <14>;
 				clocks = <&gateclk 1>;
 				status = "disabled";
 			};
+
+			/*
+			 * MV78460 has 4 PCIe units Gen2.0: Two units can be
+			 * configured as x4 or quad x1 lanes. Two units are
+			 * x4/x1.
+			 */
+			pcie-controller {
+				compatible = "marvell,armada-xp-pcie";
+				status = "disabled";
+				device_type = "pci";
+
+				#address-cells = <3>;
+				#size-cells = <2>;
+
+				bus-range = <0x00 0xff>;
+
+				ranges = <0x82000000 0 0x40000 0x40000 0 0x00002000   /* Port 0.0 registers */
+					0x82000000 0 0x42000 0x42000 0 0x00002000   /* Port 2.0 registers */
+					0x82000000 0 0x44000 0x44000 0 0x00002000   /* Port 0.1 registers */
+					0x82000000 0 0x48000 0x48000 0 0x00002000   /* Port 0.2 registers */
+					0x82000000 0 0x4c000 0x4c000 0 0x00002000   /* Port 0.3 registers */
+					0x82000000 0 0x80000 0x80000 0 0x00002000   /* Port 1.0 registers */
+					0x82000000 0 0x82000 0x82000 0 0x00002000   /* Port 3.0 registers */
+					0x82000000 0 0x84000 0x84000 0 0x00002000   /* Port 1.1 registers */
+					0x82000000 0 0x88000 0x88000 0 0x00002000   /* Port 1.2 registers */
+					0x82000000 0 0x8c000 0x8c000 0 0x00002000   /* Port 1.3 registers */
+					0x82000000 0 0xe0000000 0xe0000000 0 0x08000000   /* non-prefetchable memory */
+					0x81000000 0 0	  0xe8000000 0 0x00100000>; /* downstream I/O */
+
+				pcie@1,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82000800 0 0x40000 0 0x2000>;
+					reg = <0x0800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 58>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 5>;
+					status = "disabled";
+				};
+
+				pcie@2,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82001000 0 0x44000 0 0x2000>;
+					reg = <0x1000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 59>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <1>;
+					clocks = <&gateclk 6>;
+					status = "disabled";
+				};
+
+				pcie@3,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82001800 0 0x48000 0 0x2000>;
+					reg = <0x1800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 60>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <2>;
+					clocks = <&gateclk 7>;
+					status = "disabled";
+				};
+
+				pcie@4,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82002000 0 0x4c000 0 0x2000>;
+					reg = <0x2000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 61>;
+					marvell,pcie-port = <0>;
+					marvell,pcie-lane = <3>;
+					clocks = <&gateclk 8>;
+					status = "disabled";
+				};
+
+				pcie@5,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82002800 0 0x80000 0 0x2000>;
+					reg = <0x2800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 62>;
+					marvell,pcie-port = <1>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 9>;
+					status = "disabled";
+				};
+
+				pcie@6,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82003000 0 0x84000 0 0x2000>;
+					reg = <0x3000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 63>;
+					marvell,pcie-port = <1>;
+					marvell,pcie-lane = <1>;
+					clocks = <&gateclk 10>;
+					status = "disabled";
+				};
+
+				pcie@7,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82003800 0 0x88000 0 0x2000>;
+					reg = <0x3800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 64>;
+					marvell,pcie-port = <1>;
+					marvell,pcie-lane = <2>;
+					clocks = <&gateclk 11>;
+					status = "disabled";
+				};
+
+				pcie@8,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82004000 0 0x8c000 0 0x2000>;
+					reg = <0x4000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 65>;
+					marvell,pcie-port = <1>;
+					marvell,pcie-lane = <3>;
+					clocks = <&gateclk 12>;
+					status = "disabled";
+				};
+				pcie@9,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82004800 0 0x42000 0 0x2000>;
+					reg = <0x4800 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 99>;
+					marvell,pcie-port = <2>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 26>;
+					status = "disabled";
+				};
+
+				pcie@10,0 {
+					device_type = "pci";
+					assigned-addresses = <0x82005000 0 0x82000 0 0x2000>;
+					reg = <0x5000 0 0 0 0>;
+					#address-cells = <3>;
+					#size-cells = <2>;
+					#interrupt-cells = <1>;
+					ranges;
+					interrupt-map-mask = <0 0 0 0>;
+					interrupt-map = <0 0 0 0 &mpic 103>;
+					marvell,pcie-port = <3>;
+					marvell,pcie-lane = <0>;
+					clocks = <&gateclk 27>;
+					status = "disabled";
+				};
+			};
 		};
 	};
 };
-
-&pinctrl {
-	compatible = "marvell,mv78460-pinctrl";
-};
diff -urNp a/arch/arm/boot/dts/armada-xp-openblocks-ax3-4.dts b/arch/arm/boot/dts/armada-xp-openblocks-ax3-4.dts
--- a/arch/arm/boot/dts/armada-xp-openblocks-ax3-4.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-xp-openblocks-ax3-4.dts	2015-10-27 00:45:05.000000000 +0000
@@ -5,49 +5,13 @@
  *
  * Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  */
 
 /dts-v1/;
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-#include "armada-xp-mv78260.dtsi"
+/include/ "armada-xp-mv78260.dtsi"
 
 / {
 	model = "PlatHome OpenBlocks AX3-4 board";
@@ -59,59 +23,33 @@
 
 	memory {
 		device_type = "memory";
-		reg = <0 0x00000000 0 0x40000000>; /* 1 GB soldered on */
+		reg = <0 0x00000000 0 0xC0000000>; /* 3 GB */
 	};
 
 	soc {
-		ranges = <MBUS_ID(0xf0, 0x01) 0 0 0xd0000000 0x100000
-			  MBUS_ID(0x01, 0x1d) 0 0 0xfff00000 0x100000
-			  MBUS_ID(0x01, 0x2f) 0 0 0xf0000000 0x8000000>;
-
-		devbus-bootcs {
-			status = "okay";
-
-			/* Device Bus parameters are required */
-
-			/* Read parameters */
-			devbus,bus-width    = <16>;
-			devbus,turn-off-ps  = <60000>;
-			devbus,badr-skew-ps = <0>;
-			devbus,acc-first-ps = <124000>;
-			devbus,acc-next-ps  = <248000>;
-			devbus,rd-setup-ps  = <0>;
-			devbus,rd-hold-ps   = <0>;
-
-			/* Write parameters */
-			devbus,sync-enable = <0>;
-			devbus,wr-high-ps  = <60000>;
-			devbus,wr-low-ps   = <60000>;
-			devbus,ale-wr-ps   = <60000>;
-
-			/* NOR 128 MiB */
-			nor@0 {
-				compatible = "cfi-flash";
-				reg = <0 0x8000000>;
-				bank-width = <2>;
-			};
-		};
-
-		pcie-controller {
-			status = "okay";
-			/* Internal mini-PCIe connector */
-			pcie@1,0 {
-				/* Port 0, Lane 0 */
-				status = "okay";
-			};
-		};
+		ranges = <0          0 0xd0000000 0x100000	/* Internal registers 1MiB */
+			  0xe0000000 0 0xe0000000 0x8100000     /* PCIe */
+			  0xf0000000 0 0xf0000000 0x8000000     /* Device Bus, NOR 128MiB   */>;
 
 		internal-regs {
+			rtc@10300 {
+				/* No crystal connected to the internal RTC */
+				status = "disabled";
+			};
 			serial@12000 {
+				clock-frequency = <250000000>;
 				status = "okay";
 			};
 			serial@12100 {
+				clock-frequency = <250000000>;
 				status = "okay";
 			};
-
+			pinctrl {
+				led_pins: led-pins-0 {
+					marvell,pins = "mpp49", "mpp51", "mpp53";
+					marvell,function = "gpio";
+				};
+			};
 			leds {
 				compatible = "gpio-leds";
 				pinctrl-names = "default";
@@ -119,20 +57,21 @@
 
 				red_led {
 					label = "red_led";
-					gpios = <&gpio1 17 GPIO_ACTIVE_LOW>;
+					gpios = <&gpio1 17 1>;
 					default-state = "off";
 				};
 
 				yellow_led {
 					label = "yellow_led";
-					gpios = <&gpio1 19 GPIO_ACTIVE_LOW>;
+					gpios = <&gpio1 19 1>;
 					default-state = "off";
 				};
 
 				green_led {
 					label = "green_led";
-					gpios = <&gpio1 21 GPIO_ACTIVE_LOW>;
-					default-state = "keep";
+					gpios = <&gpio1 21 1>;
+					default-state = "off";
+					linux,default-trigger = "heartbeat";
 				};
 			};
 
@@ -143,8 +82,8 @@
 
 				button@1 {
 					label = "Init Button";
-					linux,code = <KEY_POWER>;
-					gpios = <&gpio1 28 GPIO_ACTIVE_HIGH>;
+					linux,code = <116>;
+					gpios = <&gpio1 28 0>;
 				};
 			};
 
@@ -203,23 +142,50 @@
 				nr-ports = <2>;
 				status = "okay";
 			};
-
-			/* Front side USB 0 */
 			usb@50000 {
 				status = "okay";
 			};
-
-			/* Front side USB 1 */
 			usb@51000 {
 				status = "okay";
 			};
-		};
-	};
-};
 
-&pinctrl {
-	led_pins: led-pins-0 {
-		marvell,pins = "mpp49", "mpp51", "mpp53";
-		marvell,function = "gpio";
+			devbus-bootcs@10400 {
+				status = "okay";
+				ranges = <0 0xf0000000 0x8000000>; /* @addr 0xf000000, size 0x8000000 */
+
+				/* Device Bus parameters are required */
+
+				/* Read parameters */
+				devbus,bus-width    = <16>;
+				devbus,turn-off-ps  = <60000>;
+				devbus,badr-skew-ps = <0>;
+				devbus,acc-first-ps = <124000>;
+				devbus,acc-next-ps  = <248000>;
+				devbus,rd-setup-ps  = <0>;
+				devbus,rd-hold-ps   = <0>;
+
+				/* Write parameters */
+				devbus,sync-enable = <0>;
+				devbus,wr-high-ps  = <60000>;
+				devbus,wr-low-ps   = <60000>;
+				devbus,ale-wr-ps   = <60000>;
+
+				/* NOR 128 MiB */
+				nor@0 {
+					compatible = "cfi-flash";
+					reg = <0 0x8000000>;
+					bank-width = <2>;
+				};
+			};
+
+			pcie-controller {
+				status = "okay";
+				/* Internal mini-PCIe connector */
+				pcie@1,0 {
+					/* Port 0, Lane 0 */
+					status = "okay";
+				};
+			};
+		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/armada-xp.dtsi b/arch/arm/boot/dts/armada-xp.dtsi
--- a/arch/arm/boot/dts/armada-xp.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/armada-xp.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,129 +8,57 @@
  * Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
  * Ben Dooks <ben.dooks@codethink.co.uk>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- * Or, alternatively
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED , WITHOUT WARRANTY OF ANY KIND
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
  *
  * Contains definitions specific to the Armada XP SoC that are not
  * common to all Armada SoCs.
  */
 
-#include "armada-370-xp.dtsi"
+/include/ "armada-370-xp.dtsi"
 
 / {
 	model = "Marvell Armada XP family SoC";
 	compatible = "marvell,armadaxp", "marvell,armada-370-xp";
 
-	aliases {
-		eth2 = &eth2;
-	};
-
 	soc {
-		compatible = "marvell,armadaxp-mbus", "simple-bus";
-
-		bootrom {
-			compatible = "marvell,bootrom";
-			reg = <MBUS_ID(0x01, 0x1d) 0 0x100000>;
-		};
-
 		internal-regs {
-			sdramc@1400 {
-				compatible = "marvell,armada-xp-sdram-controller";
-				reg = <0x1400 0x500>;
-			};
-
 			L2: l2-cache {
 				compatible = "marvell,aurora-system-cache";
 				reg = <0x08000 0x1000>;
 				cache-id-part = <0x100>;
-				cache-unified;
 				wt-override;
 			};
 
-			spi0: spi@10600 {
-				pinctrl-0 = <&spi0_pins>;
-				pinctrl-names = "default";
-			};
-
-			i2c0: i2c@11000 {
-				compatible = "marvell,mv78230-i2c", "marvell,mv64xxx-i2c";
-				reg = <0x11000 0x100>;
+			interrupt-controller@20000 {
+			      reg = <0x20a00 0x2d0>, <0x21070 0x58>;
 			};
 
-			i2c1: i2c@11100 {
-				compatible = "marvell,mv78230-i2c", "marvell,mv64xxx-i2c";
-				reg = <0x11100 0x100>;
+			armada-370-xp-pmsu@22000 {
+				compatible = "marvell,armada-370-xp-pmsu";
+				reg = <0x22100 0x430>, <0x20800 0x20>;
 			};
 
-			uart2: serial@12200 {
+			serial@12200 {
 				compatible = "snps,dw-apb-uart";
-				pinctrl-0 = <&uart2_pins>;
-				pinctrl-names = "default";
 				reg = <0x12200 0x100>;
 				reg-shift = <2>;
 				interrupts = <43>;
 				reg-io-width = <1>;
-				clocks = <&coreclk 0>;
 				status = "disabled";
 			};
-
-			uart3: serial@12300 {
+			serial@12300 {
 				compatible = "snps,dw-apb-uart";
-				pinctrl-0 = <&uart3_pins>;
-				pinctrl-names = "default";
 				reg = <0x12300 0x100>;
 				reg-shift = <2>;
 				interrupts = <44>;
 				reg-io-width = <1>;
-				clocks = <&coreclk 0>;
 				status = "disabled";
 			};
 
-			system-controller@18200 {
-				compatible = "marvell,armada-370-xp-system-controller";
-				reg = <0x18200 0x500>;
-			};
-
-			gateclk: clock-gating-control@18220 {
-				compatible = "marvell,armada-xp-gating-clock";
-				reg = <0x18220 0x4>;
-				clocks = <&coreclk 0>;
-				#clock-cells = <1>;
+			timer@20300 {
+				marvell,timer-25Mhz;
 			};
 
 			coreclk: mvebu-sar@18230 {
@@ -139,65 +67,33 @@
 				#clock-cells = <1>;
 			};
 
-			thermal@182b0 {
-				compatible = "marvell,armadaxp-thermal";
-				reg = <0x182b0 0x4
-					0x184d0 0x4>;
-				status = "okay";
-			};
-
 			cpuclk: clock-complex@18700 {
 				#clock-cells = <1>;
 				compatible = "marvell,armada-xp-cpu-clock";
-				reg = <0x18700 0xA0>, <0x1c054 0x10>;
+				reg = <0x18700 0xA0>;
 				clocks = <&coreclk 1>;
 			};
 
-			interrupt-controller@20000 {
-			      reg = <0x20a00 0x2d0>, <0x21070 0x58>;
-			};
-
-			timer@20300 {
-				compatible = "marvell,armada-xp-timer";
-				clocks = <&coreclk 2>, <&refclk>;
-				clock-names = "nbclk", "fixed";
-			};
-
-			watchdog@20300 {
-				compatible = "marvell,armada-xp-wdt";
-				clocks = <&coreclk 2>, <&refclk>;
-				clock-names = "nbclk", "fixed";
+			gateclk: clock-gating-control@18220 {
+				compatible = "marvell,armada-xp-gating-clock";
+				reg = <0x18220 0x4>;
+				clocks = <&coreclk 0>;
+				#clock-cells = <1>;
 			};
 
-			cpurst@20800 {
-				compatible = "marvell,armada-370-cpu-reset";
-				reg = <0x20800 0x20>;
+			system-controller@18200 {
+				compatible = "marvell,armada-370-xp-system-controller";
+				reg = <0x18200 0x500>;
 			};
 
-			eth2: ethernet@30000 {
+			ethernet@30000 {
 				compatible = "marvell,armada-370-neta";
-				reg = <0x30000 0x4000>;
+				reg = <0x30000 0x2500>;
 				interrupts = <12>;
 				clocks = <&gateclk 2>;
 				status = "disabled";
 			};
 
-			usb@50000 {
-				clocks = <&gateclk 18>;
-			};
-
-			usb@51000 {
-				clocks = <&gateclk 19>;
-			};
-
-			usb@52000 {
-				compatible = "marvell,orion-ehci";
-				reg = <0x52000 0x500>;
-				interrupts = <47>;
-				clocks = <&gateclk 20>;
-				status = "disabled";
-			};
-
 			xor@60900 {
 				compatible = "marvell,orion-xor";
 				reg = <0x60900 0x100
@@ -237,66 +133,29 @@
 					dmacap,memset;
 				};
 			};
-		};
-	};
-
-	clocks {
-		/* 25 MHz reference crystal */
-		refclk: oscillator {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <25000000>;
-		};
-	};
-};
-
-&pinctrl {
-	ge0_gmii_pins: ge0-gmii-pins {
-		marvell,pins =
-		     "mpp0",  "mpp1",  "mpp2",  "mpp3",
-		     "mpp4",  "mpp5",  "mpp6",  "mpp7",
-		     "mpp8",  "mpp9",  "mpp10", "mpp11",
-		     "mpp12", "mpp13", "mpp14", "mpp15",
-		     "mpp16", "mpp17", "mpp18", "mpp19",
-		     "mpp20", "mpp21", "mpp22", "mpp23";
-		marvell,function = "ge0";
-	};
-
-	ge0_rgmii_pins: ge0-rgmii-pins {
-		marvell,pins =
-		     "mpp0", "mpp1", "mpp2", "mpp3",
-		     "mpp4", "mpp5", "mpp6", "mpp7",
-		     "mpp8", "mpp9", "mpp10", "mpp11";
-		marvell,function = "ge0";
-	};
-
-	ge1_rgmii_pins: ge1-rgmii-pins {
-		marvell,pins =
-		     "mpp12", "mpp13", "mpp14", "mpp15",
-		     "mpp16", "mpp17", "mpp18", "mpp19",
-		     "mpp20", "mpp21", "mpp22", "mpp23";
-		marvell,function = "ge1";
-	};
 
-	sdio_pins: sdio-pins {
-		marvell,pins = "mpp30", "mpp31", "mpp32",
-			       "mpp33", "mpp34", "mpp35";
-		marvell,function = "sd0";
-	};
+			usb@50000 {
+				clocks = <&gateclk 18>;
+			};
 
-	spi0_pins: spi0-pins {
-		marvell,pins = "mpp36", "mpp37",
-			       "mpp38", "mpp39";
-		marvell,function = "spi";
-	};
+			usb@51000 {
+				clocks = <&gateclk 19>;
+			};
 
-	uart2_pins: uart2-pins {
-		marvell,pins = "mpp42", "mpp43";
-		marvell,function = "uart2";
-	};
+			usb@52000 {
+				compatible = "marvell,orion-ehci";
+				reg = <0x52000 0x500>;
+				interrupts = <47>;
+				clocks = <&gateclk 20>;
+				status = "disabled";
+			};
 
-	uart3_pins: uart3-pins {
-		marvell,pins = "mpp44", "mpp45";
-		marvell,function = "uart3";
+			thermal@182b0 {
+				compatible = "marvell,armadaxp-thermal";
+				reg = <0x182b0 0x4
+					0x184d0 0x4>;
+				status = "okay";
+			};
+		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/at91-ariag25.dts b/arch/arm/boot/dts/at91-ariag25.dts
--- a/arch/arm/boot/dts/at91-ariag25.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91-ariag25.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,7 +7,7 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "at91sam9g25.dtsi"
+/include/ "at91sam9g25.dtsi"
 
 / {
 	model = "Acme Systems Aria G25";
@@ -21,7 +21,6 @@
 		serial3 = &usart2;
 		serial4 = &usart3;
 		serial5 = &uart0;
-		serial6 = &uart1;
 	};
 
 	chosen {
@@ -42,14 +41,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <12000000>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <12000000>;
-		};
 	};
 
 	ahb {
@@ -121,22 +112,19 @@
 				status = "okay";
 			};
 
-			/*
-			 * UART0/1 pins are marked as GPIO on
-			 * Aria documentation.
-			 * Change to "okay" if you need additional serial ports
-			 */
 			uart0: serial@f8040000 {
-				status = "disabled";
-			};
-
-			uart1: serial@f8044000 {
-				status = "disabled";
+				compatible = "atmel,at91sam9260-usart";
+				reg = <0xf8040000 0x200>;
+				interrupts = <15 4 5>;
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_uart0>;
+				status = "okay";
 			};
 
 			adc0: adc@f804c000 {
 				status = "okay";
 				atmel,adc-channels-used = <0xf>;
+				atmel,adc-num-channels = <4>;
 			};
 
 			dbgu: serial@fffff200 {
@@ -150,10 +138,6 @@
 					};
 				};
 			};
-
-			rtc@fffffeb0 {
-				status = "okay";
-			};
 		};
 
 		usb0: ohci@00600000 {
@@ -172,7 +156,7 @@
 		/* little green LED in middle of Aria G25 module */
 		aria_led {
 			label = "aria_led";
-			gpios = <&pioB 8 GPIO_ACTIVE_HIGH>; /* PB8 */
+			gpios = <&pioB 8 0>; /* PB8 */
 			linux,default-trigger = "heartbeat";
 		};
 
@@ -180,7 +164,7 @@
 
 	onewire@0 {
 		compatible = "w1-gpio";
-		gpios = <&pioA 21 GPIO_ACTIVE_LOW>;
+		gpios = <&pioA 21 1>;
 		pinctrl-names = "default";
 		pinctrl-0 = <&pinctrl_w1_0>;
 	};
diff -urNp a/arch/arm/boot/dts/at91rm9200.dtsi b/arch/arm/boot/dts/at91rm9200.dtsi
--- a/arch/arm/boot/dts/at91rm9200.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91rm9200.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -10,11 +10,7 @@
  * Licensed under GPLv2 or later.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/pinctrl/at91.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/clock/at91.h>
+/include/ "skeleton.dtsi"
 
 / {
 	model = "Atmel AT91RM9200 family SoC";
@@ -52,25 +48,6 @@
 		reg = <0x20000000 0x04000000>;
 	};
 
-	clocks {
-		slow_xtal: slow_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		main_xtal: main_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-	};
-
-	sram: sram@00200000 {
-		compatible = "mmio-sram";
-		reg = <0x00200000 0x4000>;
-	};
-
 	ahb {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -99,302 +76,32 @@
 			pmc: pmc@fffffc00 {
 				compatible = "atmel,at91rm9200-pmc";
 				reg = <0xfffffc00 0x100>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				interrupt-controller;
-				#address-cells = <1>;
-				#size-cells = <0>;
-				#interrupt-cells = <1>;
-
-				main_osc: main_osc {
-					compatible = "atmel,at91rm9200-clk-main-osc";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MOSCS>;
-					clocks = <&main_xtal>;
-				};
-
-				main: mainck {
-					compatible = "atmel,at91rm9200-clk-main";
-					#clock-cells = <0>;
-					clocks = <&main_osc>;
-				};
-
-				plla: pllack {
-					compatible = "atmel,at91rm9200-clk-pll";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKA>;
-					clocks = <&main>;
-					reg = <0>;
-					atmel,clk-input-range = <1000000 32000000>;
-					#atmel,pll-clk-output-range-cells = <3>;
-					atmel,pll-clk-output-ranges = <80000000 160000000 0>,
-								<150000000 180000000 2>;
-				};
-
-				pllb: pllbck {
-					compatible = "atmel,at91rm9200-clk-pll";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKB>;
-					clocks = <&main>;
-					reg = <1>;
-					atmel,clk-input-range = <1000000 32000000>;
-					#atmel,pll-clk-output-range-cells = <3>;
-					atmel,pll-clk-output-ranges = <80000000 160000000 0>,
-								<150000000 180000000 2>;
-				};
-
-				mck: masterck {
-					compatible = "atmel,at91rm9200-clk-master";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MCKRDY>;
-					clocks = <&slow_xtal>, <&main>, <&plla>, <&pllb>;
-					atmel,clk-output-range = <0 80000000>;
-					atmel,clk-divisors = <1 2 3 4>;
-				};
-
-				usb: usbck {
-					compatible = "atmel,at91rm9200-clk-usb";
-					#clock-cells = <0>;
-					atmel,clk-divisors = <1 2 0 0>;
-					clocks = <&pllb>;
-				};
-
-				prog: progck {
-					compatible = "atmel,at91rm9200-clk-programmable";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					interrupt-parent = <&pmc>;
-					clocks = <&slow_xtal>, <&main>, <&plla>, <&pllb>;
-
-					prog0: prog0 {
-						#clock-cells = <0>;
-						reg = <0>;
-						interrupts = <AT91_PMC_PCKRDY(0)>;
-					};
-
-					prog1: prog1 {
-						#clock-cells = <0>;
-						reg = <1>;
-						interrupts = <AT91_PMC_PCKRDY(1)>;
-					};
-
-					prog2: prog2 {
-						#clock-cells = <0>;
-						reg = <2>;
-						interrupts = <AT91_PMC_PCKRDY(2)>;
-					};
-
-					prog3: prog3 {
-						#clock-cells = <0>;
-						reg = <3>;
-						interrupts = <AT91_PMC_PCKRDY(3)>;
-					};
-				};
-
-				systemck {
-					compatible = "atmel,at91rm9200-clk-system";
-					#address-cells = <1>;
-					#size-cells = <0>;
-
-					udpck: udpck {
-						#clock-cells = <0>;
-						reg = <2>;
-						clocks = <&usb>;
-					};
-
-					uhpck: uhpck {
-						#clock-cells = <0>;
-						reg = <4>;
-						clocks = <&usb>;
-					};
-
-					pck0: pck0 {
-						#clock-cells = <0>;
-						reg = <8>;
-						clocks = <&prog0>;
-					};
-
-					pck1: pck1 {
-						#clock-cells = <0>;
-						reg = <9>;
-						clocks = <&prog1>;
-					};
-
-					pck2: pck2 {
-						#clock-cells = <0>;
-						reg = <10>;
-						clocks = <&prog2>;
-					};
-
-					pck3: pck3 {
-						#clock-cells = <0>;
-						reg = <11>;
-						clocks = <&prog3>;
-					};
-				};
-
-				periphck {
-					compatible = "atmel,at91rm9200-clk-peripheral";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					clocks = <&mck>;
-
-					pioA_clk: pioA_clk {
-						#clock-cells = <0>;
-						reg = <2>;
-					};
-
-					pioB_clk: pioB_clk {
-						#clock-cells = <0>;
-						reg = <3>;
-					};
-
-					pioC_clk: pioC_clk {
-						#clock-cells = <0>;
-						reg = <4>;
-					};
-
-					pioD_clk: pioD_clk {
-						#clock-cells = <0>;
-						reg = <5>;
-					};
-
-					usart0_clk: usart0_clk {
-						#clock-cells = <0>;
-						reg = <6>;
-					};
-
-					usart1_clk: usart1_clk {
-						#clock-cells = <0>;
-						reg = <7>;
-					};
-
-					usart2_clk: usart2_clk {
-						#clock-cells = <0>;
-						reg = <8>;
-					};
-
-					usart3_clk: usart3_clk {
-						#clock-cells = <0>;
-						reg = <9>;
-					};
-
-					mci0_clk: mci0_clk {
-						#clock-cells = <0>;
-						reg = <10>;
-					};
-
-					udc_clk: udc_clk {
-						#clock-cells = <0>;
-						reg = <11>;
-					};
-
-					twi0_clk: twi0_clk {
-						reg = <12>;
-						#clock-cells = <0>;
-					};
-
-					spi0_clk: spi0_clk {
-						#clock-cells = <0>;
-						reg = <13>;
-					};
-
-					ssc0_clk: ssc0_clk {
-						#clock-cells = <0>;
-						reg = <14>;
-					};
-
-					ssc1_clk: ssc1_clk {
-						#clock-cells = <0>;
-						reg = <15>;
-					};
-
-					ssc2_clk: ssc2_clk {
-						#clock-cells = <0>;
-						reg = <16>;
-					};
-
-					tc0_clk: tc0_clk {
-						#clock-cells = <0>;
-						reg = <17>;
-					};
-
-					tc1_clk: tc1_clk {
-						#clock-cells = <0>;
-						reg = <18>;
-					};
-
-					tc2_clk: tc2_clk {
-						#clock-cells = <0>;
-						reg = <19>;
-					};
-
-					tc3_clk: tc3_clk {
-						#clock-cells = <0>;
-						reg = <20>;
-					};
-
-					tc4_clk: tc4_clk {
-						#clock-cells = <0>;
-						reg = <21>;
-					};
-
-					tc5_clk: tc5_clk {
-						#clock-cells = <0>;
-						reg = <22>;
-					};
-
-					ohci_clk: ohci_clk {
-						#clock-cells = <0>;
-						reg = <23>;
-					};
-
-					macb0_clk: macb0_clk {
-						#clock-cells = <0>;
-						reg = <24>;
-					};
-				};
 			};
 
 			st: timer@fffffd00 {
 				compatible = "atmel,at91rm9200-st";
 				reg = <0xfffffd00 0x100>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-			};
-
-			rtc: rtc@fffffe00 {
-				compatible = "atmel,at91rm9200-rtc";
-				reg = <0xfffffe00 0x40>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				status = "disabled";
+				interrupts = <1 4 7>;
 			};
 
 			tcb0: timer@fffa0000 {
 				compatible = "atmel,at91rm9200-tcb";
 				reg = <0xfffa0000 0x100>;
-				interrupts = <17 IRQ_TYPE_LEVEL_HIGH 0
-					      18 IRQ_TYPE_LEVEL_HIGH 0
-					      19 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tc0_clk>, <&tc1_clk>, <&tc2_clk>;
-				clock-names = "t0_clk", "t1_clk", "t2_clk";
+				interrupts = <17 4 0 18 4 0 19 4 0>;
 			};
 
 			tcb1: timer@fffa4000 {
 				compatible = "atmel,at91rm9200-tcb";
 				reg = <0xfffa4000 0x100>;
-				interrupts = <20 IRQ_TYPE_LEVEL_HIGH 0
-					      21 IRQ_TYPE_LEVEL_HIGH 0
-					      22 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tc3_clk>, <&tc4_clk>, <&tc5_clk>;
-				clock-names = "t0_clk", "t1_clk", "t2_clk";
+				interrupts = <20 4 0 21 4 0 22 4 0>;
 			};
 
 			i2c0: i2c@fffb8000 {
 				compatible = "atmel,at91rm9200-i2c";
 				reg = <0xfffb8000 0x4000>;
-				interrupts = <12 IRQ_TYPE_LEVEL_HIGH 6>;
+				interrupts = <12 4 6>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_twi>;
-				clocks = <&twi0_clk>;
 				#address-cells = <1>;
 				#size-cells = <0>;
 				status = "disabled";
@@ -403,57 +110,46 @@
 			mmc0: mmc@fffb4000 {
 				compatible = "atmel,hsmci";
 				reg = <0xfffb4000 0x4000>;
-				interrupts = <10 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&mci0_clk>;
-				clock-names = "mci_clk";
+				interrupts = <10 4 0>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				pinctrl-names = "default";
 				status = "disabled";
 			};
 
 			ssc0: ssc@fffd0000 {
 				compatible = "atmel,at91rm9200-ssc";
 				reg = <0xfffd0000 0x4000>;
-				interrupts = <14 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <14 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc0_tx &pinctrl_ssc0_rx>;
-				clocks = <&ssc0_clk>;
-				clock-names = "pclk";
 				status = "disable";
 			};
 
 			ssc1: ssc@fffd4000 {
 				compatible = "atmel,at91rm9200-ssc";
 				reg = <0xfffd4000 0x4000>;
-				interrupts = <15 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <15 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc1_tx &pinctrl_ssc1_rx>;
-				clocks = <&ssc1_clk>;
-				clock-names = "pclk";
 				status = "disable";
 			};
 
 			ssc2: ssc@fffd8000 {
 				compatible = "atmel,at91rm9200-ssc";
 				reg = <0xfffd8000 0x4000>;
-				interrupts = <16 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <16 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc2_tx &pinctrl_ssc2_rx>;
-				clocks = <&ssc2_clk>;
-				clock-names = "pclk";
 				status = "disable";
 			};
 
 			macb0: ethernet@fffbc000 {
 				compatible = "cdns,at91rm9200-emac", "cdns,emac";
 				reg = <0xfffbc000 0x4000>;
-				interrupts = <24 IRQ_TYPE_LEVEL_HIGH 3>;
+				interrupts = <24 4 3>;
 				phy-mode = "rmii";
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_macb_rmii>;
-				clocks = <&macb0_clk>;
-				clock-names = "ether_clk";
 				status = "disabled";
 			};
 
@@ -475,442 +171,328 @@
 				dbgu {
 					pinctrl_dbgu: dbgu-0 {
 						atmel,pins =
-							<AT91_PIOA 30 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA30 periph A */
-							 AT91_PIOA 31 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA31 periph with pullup */
+							<0 30 0x1 0x0	/* PA30 periph A */
+							 0 31 0x1 0x1>;	/* PA31 periph with pullup */
 					};
 				};
 
 				uart0 {
 					pinctrl_uart0: uart0-0 {
 						atmel,pins =
-							<AT91_PIOA 17 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA17 periph A */
-							 AT91_PIOA 18 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA18 periph A */
+							<0 17 0x1 0x0	/* PA17 periph A */
+							 0 18 0x1 0x0>;	/* PA18 periph A */
 					};
 
-					pinctrl_uart0_cts: uart0_cts-0 {
+					pinctrl_uart0_rts: uart0_rts-0 {
 						atmel,pins =
-							<AT91_PIOA 20 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA20 periph A */
+							<0 20 0x1 0x0>;	/* PA20 periph A */
 					};
 
-					pinctrl_uart0_rts: uart0_rts-0 {
+					pinctrl_uart0_cts: uart0_cts-0 {
 						atmel,pins =
-							<AT91_PIOA 21 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA21 periph A */
+							<0 21 0x1 0x0>;	/* PA21 periph A */
 					};
 				};
 
 				uart1 {
 					pinctrl_uart1: uart1-0 {
 						atmel,pins =
-							<AT91_PIOB 20 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB20 periph A with pullup */
-							 AT91_PIOB 21 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB21 periph A */
+							<1 20 0x1 0x1	/* PB20 periph A with pullup */
+							 1 21 0x1 0x0>;	/* PB21 periph A */
 					};
 
 					pinctrl_uart1_rts: uart1_rts-0 {
 						atmel,pins =
-							<AT91_PIOB 24 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB24 periph A */
+							<1 24 0x1 0x0>;	/* PB24 periph A */
 					};
 
 					pinctrl_uart1_cts: uart1_cts-0 {
 						atmel,pins =
-							<AT91_PIOB 26 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB26 periph A */
+							<1 26 0x1 0x0>;	/* PB26 periph A */
 					};
 
 					pinctrl_uart1_dtr_dsr: uart1_dtr_dsr-0 {
 						atmel,pins =
-							<AT91_PIOB 19 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB19 periph A */
-							 AT91_PIOB 25 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB25 periph A */
+							<1 19 0x1 0x0	/* PB19 periph A */
+							 1 25 0x1 0x0>;	/* PB25 periph A */
 					};
 
 					pinctrl_uart1_dcd: uart1_dcd-0 {
 						atmel,pins =
-							<AT91_PIOB 23 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB23 periph A */
+							<1 23 0x1 0x0>;	/* PB23 periph A */
 					};
 
 					pinctrl_uart1_ri: uart1_ri-0 {
 						atmel,pins =
-							<AT91_PIOB 18 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB18 periph A */
+							<1 18 0x1 0x0>;	/* PB18 periph A */
 					};
 				};
 
 				uart2 {
 					pinctrl_uart2: uart2-0 {
 						atmel,pins =
-							<AT91_PIOA 22 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA22 periph A */
-							 AT91_PIOA 23 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA23 periph A with pullup */
+							<0 22 0x1 0x0	/* PA22 periph A */
+							 0 23 0x1 0x1>;	/* PA23 periph A with pullup */
 					};
 
 					pinctrl_uart2_rts: uart2_rts-0 {
 						atmel,pins =
-							<AT91_PIOA 30 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA30 periph B */
+							<0 30 0x2 0x0>;	/* PA30 periph B */
 					};
 
 					pinctrl_uart2_cts: uart2_cts-0 {
 						atmel,pins =
-							<AT91_PIOA 31 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA31 periph B */
+							<0 31 0x2 0x0>;	/* PA31 periph B */
 					};
 				};
 
 				uart3 {
 					pinctrl_uart3: uart3-0 {
 						atmel,pins =
-							<AT91_PIOA 5 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA5 periph B with pullup */
-							 AT91_PIOA 6 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA6 periph B */
+							<0 5 0x2 0x1	/* PA5 periph B with pullup */
+							 0 6 0x2 0x0>;	/* PA6 periph B */
 					};
 
 					pinctrl_uart3_rts: uart3_rts-0 {
 						atmel,pins =
-							<AT91_PIOB 0 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB0 periph B */
+							<1 0 0x2 0x0>;	/* PB0 periph B */
 					};
 
 					pinctrl_uart3_cts: uart3_cts-0 {
 						atmel,pins =
-							<AT91_PIOB 1 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB1 periph B */
+							<1 1 0x2 0x0>;	/* PB1 periph B */
 					};
 				};
 
 				nand {
 					pinctrl_nand: nand-0 {
 						atmel,pins =
-							<AT91_PIOC 2 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP	/* PC2 gpio RDY pin pull_up */
-							 AT91_PIOB 1 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP>;	/* PB1 gpio CD pin pull_up */
+							<2 2 0x0 0x1	/* PC2 gpio RDY pin pull_up */
+							 1 1 0x0 0x1>;	/* PB1 gpio CD pin pull_up */
 					};
 				};
 
 				macb {
 					pinctrl_macb_rmii: macb_rmii-0 {
 						atmel,pins =
-							<AT91_PIOA 7 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA7 periph A */
-							 AT91_PIOA 8 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA8 periph A */
-							 AT91_PIOA 9 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA9 periph A */
-							 AT91_PIOA 10 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA10 periph A */
-							 AT91_PIOA 11 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA11 periph A */
-							 AT91_PIOA 12 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA12 periph A */
-							 AT91_PIOA 13 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA13 periph A */
-							 AT91_PIOA 14 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA14 periph A */
-							 AT91_PIOA 15 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA15 periph A */
-							 AT91_PIOA 16 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA16 periph A */
+							<0 7 0x1 0x0	/* PA7 periph A */
+							 0 8 0x1 0x0	/* PA8 periph A */
+							 0 9 0x1 0x0	/* PA9 periph A */
+							 0 10 0x1 0x0	/* PA10 periph A */
+							 0 11 0x1 0x0	/* PA11 periph A */
+							 0 12 0x1 0x0	/* PA12 periph A */
+							 0 13 0x1 0x0	/* PA13 periph A */
+							 0 14 0x1 0x0	/* PA14 periph A */
+							 0 15 0x1 0x0	/* PA15 periph A */
+							 0 16 0x1 0x0>;	/* PA16 periph A */
 					};
 
 					pinctrl_macb_rmii_mii: macb_rmii_mii-0 {
 						atmel,pins =
-							<AT91_PIOB 12 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB12 periph B */
-							 AT91_PIOB 13 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB13 periph B */
-							 AT91_PIOB 14 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB14 periph B */
-							 AT91_PIOB 15 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB15 periph B */
-							 AT91_PIOB 16 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB16 periph B */
-							 AT91_PIOB 17 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB17 periph B */
-							 AT91_PIOB 18 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB18 periph B */
-							 AT91_PIOB 19 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB19 periph B */
+							<1 12 0x2 0x0	/* PB12 periph B */
+							 1 13 0x2 0x0	/* PB13 periph B */
+							 1 14 0x2 0x0	/* PB14 periph B */
+							 1 15 0x2 0x0	/* PB15 periph B */
+							 1 16 0x2 0x0	/* PB16 periph B */
+							 1 17 0x2 0x0	/* PB17 periph B */
+							 1 18 0x2 0x0	/* PB18 periph B */
+							 1 19 0x2 0x0>;	/* PB19 periph B */
 					};
 				};
 
 				mmc0 {
 					pinctrl_mmc0_clk: mmc0_clk-0 {
 						atmel,pins =
-							<AT91_PIOA 27 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA27 periph A */
+							<0 27 0x1 0x0>;	/* PA27 periph A */
 					};
 
 					pinctrl_mmc0_slot0_cmd_dat0: mmc0_slot0_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 28 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA28 periph A with pullup */
-							 AT91_PIOA 29 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA29 periph A with pullup */
+							<0 28 0x1 0x1	/* PA28 periph A with pullup */
+							 0 29 0x1 0x1>;	/* PA29 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot0_dat1_3: mmc0_slot0_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOB 3 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PB3 periph B with pullup */
-							 AT91_PIOB 4 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PB4 periph B with pullup */
-							 AT91_PIOB 5 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PB5 periph B with pullup */
+							<1 3 0x2 0x1	/* PB3 periph B with pullup */
+							 1 4 0x2 0x1	/* PB4 periph B with pullup */
+							 1 5 0x2 0x1>;	/* PB5 periph B with pullup */
 					};
 
 					pinctrl_mmc0_slot1_cmd_dat0: mmc0_slot1_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 8 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA8 periph B with pullup */
-							 AT91_PIOA 9 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PA9 periph B with pullup */
+							<0 8 0x2 0x1	/* PA8 periph B with pullup */
+							 0 9 0x2 0x1>;	/* PA9 periph B with pullup */
 					};
 
 					pinctrl_mmc0_slot1_dat1_3: mmc0_slot1_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 10 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA10 periph B with pullup */
-							 AT91_PIOA 11 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA11 periph B with pullup */
-							 AT91_PIOA 12 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PA12 periph B with pullup */
+							<0 10 0x2 0x1	/* PA10 periph B with pullup */
+							 0 11 0x2 0x1	/* PA11 periph B with pullup */
+							 0 12 0x2 0x1>;	/* PA12 periph B with pullup */
 					};
 				};
 
 				ssc0 {
 					pinctrl_ssc0_tx: ssc0_tx-0 {
 						atmel,pins =
-							<AT91_PIOB 0 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB0 periph A */
-							 AT91_PIOB 1 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB1 periph A */
-							 AT91_PIOB 2 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB2 periph A */
+							<1 0 0x1 0x0	/* PB0 periph A */
+							 1 1 0x1 0x0	/* PB1 periph A */
+							 1 2 0x1 0x0>;	/* PB2 periph A */
 					};
 
 					pinctrl_ssc0_rx: ssc0_rx-0 {
 						atmel,pins =
-							<AT91_PIOB 3 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB3 periph A */
-							 AT91_PIOB 4 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB4 periph A */
-							 AT91_PIOB 5 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB5 periph A */
+							<1 3 0x1 0x0	/* PB3 periph A */
+							 1 4 0x1 0x0	/* PB4 periph A */
+							 1 5 0x1 0x0>;	/* PB5 periph A */
 					};
 				};
 
 				ssc1 {
 					pinctrl_ssc1_tx: ssc1_tx-0 {
 						atmel,pins =
-							<AT91_PIOB 6 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB6 periph A */
-							 AT91_PIOB 7 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB7 periph A */
-							 AT91_PIOB 8 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB8 periph A */
+							<1 6 0x1 0x0	/* PB6 periph A */
+							 1 7 0x1 0x0	/* PB7 periph A */
+							 1 8 0x1 0x0>;	/* PB8 periph A */
 					};
 
 					pinctrl_ssc1_rx: ssc1_rx-0 {
 						atmel,pins =
-							<AT91_PIOB 9 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB9 periph A */
-							 AT91_PIOB 10 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB10 periph A */
-							 AT91_PIOB 11 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB11 periph A */
+							<1 9 0x1 0x0	/* PB9 periph A */
+							 1 10 0x1 0x0	/* PB10 periph A */
+							 1 11 0x1 0x0>;	/* PB11 periph A */
 					};
 				};
 
 				ssc2 {
 					pinctrl_ssc2_tx: ssc2_tx-0 {
 						atmel,pins =
-							<AT91_PIOB 12 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB12 periph A */
-							 AT91_PIOB 13 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB13 periph A */
-							 AT91_PIOB 14 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB14 periph A */
+							<1 12 0x1 0x0	/* PB12 periph A */
+							 1 13 0x1 0x0	/* PB13 periph A */
+							 1 14 0x1 0x0>;	/* PB14 periph A */
 					};
 
 					pinctrl_ssc2_rx: ssc2_rx-0 {
 						atmel,pins =
-							<AT91_PIOB 15 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB15 periph A */
-							 AT91_PIOB 16 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB16 periph A */
-							 AT91_PIOB 17 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB17 periph A */
+							<1 15 0x1 0x0	/* PB15 periph A */
+							 1 16 0x1 0x0	/* PB16 periph A */
+							 1 17 0x1 0x0>;	/* PB17 periph A */
 					};
 				};
 
 				twi {
 					pinctrl_twi: twi-0 {
 						atmel,pins =
-							<AT91_PIOA 25 AT91_PERIPH_A AT91_PINCTRL_MULTI_DRIVE	/* PA25 periph A with multi drive */
-							 AT91_PIOA 26 AT91_PERIPH_A AT91_PINCTRL_MULTI_DRIVE>;	/* PA26 periph A with multi drive */
+							<0 25 0x1 0x2	/* PA25 periph A with multi drive */
+							 0 26 0x1 0x2>;	/* PA26 periph A with multi drive */
 					};
 
 					pinctrl_twi_gpio: twi_gpio-0 {
 						atmel,pins =
-							<AT91_PIOA 25 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE	/* PA25 GPIO with multi drive */
-							 AT91_PIOA 26 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE>;	/* PA26 GPIO with multi drive */
-					};
-				};
-
-				tcb0 {
-					pinctrl_tcb0_tclk0: tcb0_tclk0-0 {
-						atmel,pins = <AT91_PIOA 13 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk1: tcb0_tclk1-0 {
-						atmel,pins = <AT91_PIOA 14 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk2: tcb0_tclk2-0 {
-						atmel,pins = <AT91_PIOA 15 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa0: tcb0_tioa0-0 {
-						atmel,pins = <AT91_PIOA 17 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa1: tcb0_tioa1-0 {
-						atmel,pins = <AT91_PIOA 19 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa2: tcb0_tioa2-0 {
-						atmel,pins = <AT91_PIOA 21 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob0: tcb0_tiob0-0 {
-						atmel,pins = <AT91_PIOA 18 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob1: tcb0_tiob1-0 {
-						atmel,pins = <AT91_PIOA 20 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob2: tcb0_tiob2-0 {
-						atmel,pins = <AT91_PIOA 22 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-				};
-
-				tcb1 {
-					pinctrl_tcb1_tclk0: tcb1_tclk0-0 {
-						atmel,pins = <AT91_PIOA 27 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tclk1: tcb1_tclk1-0 {
-						atmel,pins = <AT91_PIOA 28 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tclk2: tcb1_tclk2-0 {
-						atmel,pins = <AT91_PIOA 29 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa0: tcb1_tioa0-0 {
-						atmel,pins = <AT91_PIOB 6 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa1: tcb1_tioa1-0 {
-						atmel,pins = <AT91_PIOB 8 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa2: tcb1_tioa2-0 {
-						atmel,pins = <AT91_PIOB 10 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob0: tcb1_tiob0-0 {
-						atmel,pins = <AT91_PIOB 7 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob1: tcb1_tiob1-0 {
-						atmel,pins = <AT91_PIOB 9 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob2: tcb1_tiob2-0 {
-						atmel,pins = <AT91_PIOB 11 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-				};
-
-				spi0 {
-					pinctrl_spi0: spi0-0 {
-						atmel,pins =
-							<AT91_PIOA 0 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA0 periph A SPI0_MISO pin */
-							 AT91_PIOA 1 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA1 periph A SPI0_MOSI pin */
-							 AT91_PIOA 2 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA2 periph A SPI0_SPCK pin */
+							<0 25 0x0 0x2	/* PA25 GPIO with multi drive */
+							 0 26 0x0 0x2>;	/* PA26 GPIO with multi drive */
 					};
 				};
 
 				pioA: gpio@fffff400 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff400 0x200>;
-					interrupts = <2 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <2 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioA_clk>;
 				};
 
 				pioB: gpio@fffff600 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff600 0x200>;
-					interrupts = <3 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <3 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioB_clk>;
 				};
 
 				pioC: gpio@fffff800 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff800 0x200>;
-					interrupts = <4 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <4 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioC_clk>;
 				};
 
 				pioD: gpio@fffffa00 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffffa00 0x200>;
-					interrupts = <5 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <5 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioD_clk>;
 				};
 			};
 
 			dbgu: serial@fffff200 {
 				compatible = "atmel,at91rm9200-usart";
 				reg = <0xfffff200 0x200>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
+				interrupts = <1 4 7>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_dbgu>;
-				clocks = <&mck>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart0: serial@fffc0000 {
 				compatible = "atmel,at91rm9200-usart";
 				reg = <0xfffc0000 0x200>;
-				interrupts = <6 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <6 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_uart0>;
-				clocks = <&usart0_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart1: serial@fffc4000 {
 				compatible = "atmel,at91rm9200-usart";
 				reg = <0xfffc4000 0x200>;
-				interrupts = <7 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <7 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_uart1>;
-				clocks = <&usart1_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart2: serial@fffc8000 {
 				compatible = "atmel,at91rm9200-usart";
 				reg = <0xfffc8000 0x200>;
-				interrupts = <8 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <8 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_uart2>;
-				clocks = <&usart2_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart3: serial@fffcc000 {
 				compatible = "atmel,at91rm9200-usart";
 				reg = <0xfffcc000 0x200>;
-				interrupts = <23 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <23 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_uart3>;
-				clocks = <&usart3_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usb1: gadget@fffb0000 {
 				compatible = "atmel,at91rm9200-udc";
 				reg = <0xfffb0000 0x4000>;
-				interrupts = <11 IRQ_TYPE_LEVEL_HIGH 2>;
-				clocks = <&udc_clk>, <&udpck>;
-				clock-names = "pclk", "hclk";
-				status = "disabled";
-			};
-
-			spi0: spi@fffe0000 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				compatible = "atmel,at91rm9200-spi";
-				reg = <0xfffe0000 0x200>;
-				interrupts = <13 IRQ_TYPE_LEVEL_HIGH 3>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_spi0>;
-				clocks = <&spi0_clk>;
-				clock-names = "spi_clk";
+				interrupts = <11 4 2>;
 				status = "disabled";
 			};
 		};
@@ -925,9 +507,9 @@
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_nand>;
 			nand-ecc-mode = "soft";
-			gpios = <&pioC 2 GPIO_ACTIVE_HIGH
+			gpios = <&pioC 2 0
 				 0
-				 &pioB 1 GPIO_ACTIVE_HIGH
+				 &pioB 1 0
 				>;
 			status = "disabled";
 		};
@@ -935,17 +517,15 @@
 		usb0: ohci@00300000 {
 			compatible = "atmel,at91rm9200-ohci", "usb-ohci";
 			reg = <0x00300000 0x100000>;
-			interrupts = <23 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&usb>, <&ohci_clk>, <&ohci_clk>, <&uhpck>;
-			clock-names = "usb_clk", "ohci_clk", "hclk", "uhpck";
+			interrupts = <23 4 2>;
 			status = "disabled";
 		};
 	};
 
 	i2c@0 {
 		compatible = "i2c-gpio";
-		gpios = <&pioA 25 GPIO_ACTIVE_HIGH /* sda */
-			 &pioA 26 GPIO_ACTIVE_HIGH /* scl */
+		gpios = <&pioA 25 0 /* sda */
+			 &pioA 26 0 /* scl */
 			>;
 		i2c-gpio,sda-open-drain;
 		i2c-gpio,scl-open-drain;
diff -urNp a/arch/arm/boot/dts/at91rm9200ek.dts b/arch/arm/boot/dts/at91rm9200ek.dts
--- a/arch/arm/boot/dts/at91rm9200ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91rm9200ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2 only
  */
 /dts-v1/;
-#include "at91rm9200.dtsi"
+/include/ "at91rm9200.dtsi"
 
 / {
 	model = "Atmel AT91RM9200 evaluation kit";
@@ -25,32 +25,12 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <18432000>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <18432000>;
-		};
 	};
 
 	ahb {
 		apb {
-			usb1: gadget@fffb0000 {
-				atmel,vbus-gpio = <&pioD 4 GPIO_ACTIVE_HIGH>;
-				atmel,pullup-gpio = <&pioD 5 GPIO_ACTIVE_HIGH>;
-				status = "okay";
-			};
-
-			macb0: ethernet@fffbc000 {
-				phy-mode = "rmii";
+			dbgu: serial@fffff200 {
 				status = "okay";
-
-				phy0: ethernet-phy {
-					interrupt-parent = <&pioC>;
-					interrupts = <4 IRQ_TYPE_EDGE_BOTH>;
-				};
 			};
 
 			usart1: serial@fffc4000 {
@@ -64,21 +44,13 @@
 				status = "okay";
 			};
 
-			spi0: spi@fffe0000 {
-				status = "okay";
-				cs-gpios = <&pioA 3 0>, <0>, <0>, <0>;
-				mtd_dataflash@0 {
-					compatible = "atmel,at45", "atmel,dataflash";
-					spi-max-frequency = <15000000>;
-					reg = <0>;
-				};
-			};
-
-			dbgu: serial@fffff200 {
+			macb0: ethernet@fffbc000 {
+				phy-mode = "rmii";
 				status = "okay";
 			};
 
-			rtc: rtc@fffffe00 {
+			usb1: gadget@fffb0000 {
+				atmel,vbus-gpio = <&pioD 4 0>;
 				status = "okay";
 			};
 		};
@@ -87,35 +59,6 @@
 			num-ports = <2>;
 			status = "okay";
 		};
-
-		nor_flash@10000000 {
-			compatible = "cfi-flash";
-			reg = <0x10000000 0x800000>;
-			linux,mtd-name = "physmap-flash.0";
-			bank-width = <2>;
-			#address-cells = <1>;
-			#size-cells = <1>;
-
-			barebox@0 {
-				label = "barebox";
-				reg = <0x00000 0x40000>;
-			};
-
-			bareboxenv@40000 {
-				label = "bareboxenv";
-				reg = <0x40000 0x10000>;
-			};
-
-			kernel@50000 {
-				label = "kernel";
-				reg = <0x50000 0x300000>;
-			};
-
-			root@350000  {
-				label = "root";
-				reg = <0x350000 0x4B0000>;
-			};
-		};
 	};
 
 	leds {
@@ -123,19 +66,19 @@
 
 		ds2 {
 			label = "green";
-			gpios = <&pioB 0 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 0 0x1>;
 			linux,default-trigger = "mmc0";
 		};
 
 		ds4 {
 			label = "yellow";
-			gpios = <&pioB 1 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 1 0x1>;
 			linux,default-trigger = "heartbeat";
 		};
 
 		ds6 {
 			label = "red";
-			gpios = <&pioB 2 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 2 0x1>;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/at91sam9260.dtsi b/arch/arm/boot/dts/at91sam9260.dtsi
--- a/arch/arm/boot/dts/at91sam9260.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9260.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,11 +8,7 @@
  * Licensed under GPLv2 or later.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/pinctrl/at91.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/clock/at91.h>
+/include/ "skeleton.dtsi"
 
 / {
 	model = "Atmel AT91SAM9260 family SoC";
@@ -49,31 +45,6 @@
 		reg = <0x20000000 0x04000000>;
 	};
 
-	clocks {
-		slow_xtal: slow_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		main_xtal: main_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		adc_op_clk: adc_op_clk{
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <5000000>;
-		};
-	};
-
-	sram0: sram@002ff000 {
-		compatible = "mmio-sram";
-		reg = <0x002ff000 0x2000>;
-	};
-
 	ahb {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -100,260 +71,8 @@
 			};
 
 			pmc: pmc@fffffc00 {
-				compatible = "atmel,at91sam9260-pmc";
+				compatible = "atmel,at91rm9200-pmc";
 				reg = <0xfffffc00 0x100>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				interrupt-controller;
-				#address-cells = <1>;
-				#size-cells = <0>;
-				#interrupt-cells = <1>;
-
-				main_osc: main_osc {
-					compatible = "atmel,at91rm9200-clk-main-osc";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MOSCS>;
-					clocks = <&main_xtal>;
-				};
-
-				main: mainck {
-					compatible = "atmel,at91rm9200-clk-main";
-					#clock-cells = <0>;
-					clocks = <&main_osc>;
-				};
-
-				slow_rc_osc: slow_rc_osc {
-					compatible = "fixed-clock";
-					#clock-cells = <0>;
-					clock-frequency = <32768>;
-					clock-accuracy = <50000000>;
-				};
-
-				clk32k: slck {
-					compatible = "atmel,at91sam9260-clk-slow";
-					#clock-cells = <0>;
-					clocks = <&slow_rc_osc>, <&slow_xtal>;
-				};
-
-				plla: pllack {
-					compatible = "atmel,at91rm9200-clk-pll";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKA>;
-					clocks = <&main>;
-					reg = <0>;
-					atmel,clk-input-range = <1000000 32000000>;
-					#atmel,pll-clk-output-range-cells = <4>;
-					atmel,pll-clk-output-ranges = <80000000 160000000 0 1>,
-								<150000000 240000000 2 1>;
-				};
-
-				pllb: pllbck {
-					compatible = "atmel,at91rm9200-clk-pll";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKB>;
-					clocks = <&main>;
-					reg = <1>;
-					atmel,clk-input-range = <1000000 5000000>;
-					#atmel,pll-clk-output-range-cells = <4>;
-					atmel,pll-clk-output-ranges = <70000000 130000000 1 1>;
-				};
-
-				mck: masterck {
-					compatible = "atmel,at91rm9200-clk-master";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MCKRDY>;
-					clocks = <&clk32k>, <&main>, <&plla>, <&pllb>;
-					atmel,clk-output-range = <0 105000000>;
-					atmel,clk-divisors = <1 2 4 0>;
-				};
-
-				usb: usbck {
-					compatible = "atmel,at91rm9200-clk-usb";
-					#clock-cells = <0>;
-					atmel,clk-divisors = <1 2 4 0>;
-					clocks = <&pllb>;
-				};
-
-				prog: progck {
-					compatible = "atmel,at91rm9200-clk-programmable";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					interrupt-parent = <&pmc>;
-					clocks = <&clk32k>, <&main>, <&plla>, <&pllb>;
-
-					prog0: prog0 {
-						#clock-cells = <0>;
-						reg = <0>;
-						interrupts = <AT91_PMC_PCKRDY(0)>;
-					};
-
-					prog1: prog1 {
-						#clock-cells = <0>;
-						reg = <1>;
-						interrupts = <AT91_PMC_PCKRDY(1)>;
-					};
-				};
-
-				systemck {
-					compatible = "atmel,at91rm9200-clk-system";
-					#address-cells = <1>;
-					#size-cells = <0>;
-
-					uhpck: uhpck {
-						#clock-cells = <0>;
-						reg = <6>;
-						clocks = <&usb>;
-					};
-
-					udpck: udpck {
-						#clock-cells = <0>;
-						reg = <7>;
-						clocks = <&usb>;
-					};
-
-					pck0: pck0 {
-						#clock-cells = <0>;
-						reg = <8>;
-						clocks = <&prog0>;
-					};
-
-					pck1: pck1 {
-						#clock-cells = <0>;
-						reg = <9>;
-						clocks = <&prog1>;
-					};
-				};
-
-				periphck {
-					compatible = "atmel,at91rm9200-clk-peripheral";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					clocks = <&mck>;
-
-					pioA_clk: pioA_clk {
-						#clock-cells = <0>;
-						reg = <2>;
-					};
-
-					pioB_clk: pioB_clk {
-						#clock-cells = <0>;
-						reg = <3>;
-					};
-
-					pioC_clk: pioC_clk {
-						#clock-cells = <0>;
-						reg = <4>;
-					};
-
-					adc_clk: adc_clk {
-						#clock-cells = <0>;
-						reg = <5>;
-					};
-
-					usart0_clk: usart0_clk {
-						#clock-cells = <0>;
-						reg = <6>;
-					};
-
-					usart1_clk: usart1_clk {
-						#clock-cells = <0>;
-						reg = <7>;
-					};
-
-					usart2_clk: usart2_clk {
-						#clock-cells = <0>;
-						reg = <8>;
-					};
-
-					mci0_clk: mci0_clk {
-						#clock-cells = <0>;
-						reg = <9>;
-					};
-
-					udc_clk: udc_clk {
-						#clock-cells = <0>;
-						reg = <10>;
-					};
-
-					twi0_clk: twi0_clk {
-						reg = <11>;
-						#clock-cells = <0>;
-					};
-
-					spi0_clk: spi0_clk {
-						#clock-cells = <0>;
-						reg = <12>;
-					};
-
-					spi1_clk: spi1_clk {
-						#clock-cells = <0>;
-						reg = <13>;
-					};
-
-					ssc0_clk: ssc0_clk {
-						#clock-cells = <0>;
-						reg = <14>;
-					};
-
-					tc0_clk: tc0_clk {
-						#clock-cells = <0>;
-						reg = <17>;
-					};
-
-					tc1_clk: tc1_clk {
-						#clock-cells = <0>;
-						reg = <18>;
-					};
-
-					tc2_clk: tc2_clk {
-						#clock-cells = <0>;
-						reg = <19>;
-					};
-
-					ohci_clk: ohci_clk {
-						#clock-cells = <0>;
-						reg = <20>;
-					};
-
-					macb0_clk: macb0_clk {
-						#clock-cells = <0>;
-						reg = <21>;
-					};
-
-					isi_clk: isi_clk {
-						#clock-cells = <0>;
-						reg = <22>;
-					};
-
-					usart3_clk: usart3_clk {
-						#clock-cells = <0>;
-						reg = <23>;
-					};
-
-					uart0_clk: uart0_clk {
-						#clock-cells = <0>;
-						reg = <24>;
-					};
-
-					uart1_clk: uart1_clk {
-						#clock-cells = <0>;
-						reg = <25>;
-					};
-
-					tc3_clk: tc3_clk {
-						#clock-cells = <0>;
-						reg = <26>;
-					};
-
-					tc4_clk: tc4_clk {
-						#clock-cells = <0>;
-						reg = <27>;
-					};
-
-					tc5_clk: tc5_clk {
-						#clock-cells = <0>;
-						reg = <28>;
-					};
-				};
 			};
 
 			rstc@fffffd00 {
@@ -369,28 +88,19 @@
 			pit: timer@fffffd30 {
 				compatible = "atmel,at91sam9260-pit";
 				reg = <0xfffffd30 0xf>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				clocks = <&mck>;
+				interrupts = <1 4 7>;
 			};
 
 			tcb0: timer@fffa0000 {
 				compatible = "atmel,at91rm9200-tcb";
 				reg = <0xfffa0000 0x100>;
-				interrupts = <17 IRQ_TYPE_LEVEL_HIGH 0
-					      18 IRQ_TYPE_LEVEL_HIGH 0
-					      19 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tc0_clk>, <&tc1_clk>, <&tc2_clk>;
-				clock-names = "t0_clk", "t1_clk", "t2_clk";
+				interrupts = <17 4 0 18 4 0 19 4 0>;
 			};
 
 			tcb1: timer@fffdc000 {
 				compatible = "atmel,at91rm9200-tcb";
 				reg = <0xfffdc000 0x100>;
-				interrupts = <26 IRQ_TYPE_LEVEL_HIGH 0
-					      27 IRQ_TYPE_LEVEL_HIGH 0
-					      28 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tc3_clk>, <&tc4_clk>, <&tc5_clk>;
-				clock-names = "t0_clk", "t1_clk", "t2_clk";
+				interrupts = <26 4 0 27 4 0 28 4 0>;
 			};
 
 			pinctrl@fffff400 {
@@ -410,487 +120,384 @@
 				dbgu {
 					pinctrl_dbgu: dbgu-0 {
 						atmel,pins =
-							<AT91_PIOB 14 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB14 periph A */
-							 AT91_PIOB 15 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PB15 periph with pullup */
+							<1 14 0x1 0x0	/* PB14 periph A */
+							 1 15 0x1 0x1>;	/* PB15 periph with pullup */
 					};
 				};
 
 				usart0 {
 					pinctrl_usart0: usart0-0 {
 						atmel,pins =
-							<AT91_PIOB 4 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB4 periph A */
-							 AT91_PIOB 5 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB5 periph A */
+							<1 4 0x1 0x0	/* PB4 periph A */
+							 1 5 0x1 0x0>;	/* PB5 periph A */
 					};
 
 					pinctrl_usart0_rts: usart0_rts-0 {
 						atmel,pins =
-							<AT91_PIOB 26 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB26 periph A */
+							<1 26 0x1 0x0>;	/* PB26 periph A */
 					};
 
 					pinctrl_usart0_cts: usart0_cts-0 {
 						atmel,pins =
-							<AT91_PIOB 27 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB27 periph A */
+							<1 27 0x1 0x0>;	/* PB27 periph A */
 					};
 
 					pinctrl_usart0_dtr_dsr: usart0_dtr_dsr-0 {
 						atmel,pins =
-							<AT91_PIOB 24 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB24 periph A */
-							 AT91_PIOB 22 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB22 periph A */
+							<1 24 0x1 0x0	/* PB24 periph A */
+							 1 22 0x1 0x0>;	/* PB22 periph A */
 					};
 
 					pinctrl_usart0_dcd: usart0_dcd-0 {
 						atmel,pins =
-							<AT91_PIOB 23 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB23 periph A */
+							<1 23 0x1 0x0>;	/* PB23 periph A */
 					};
 
 					pinctrl_usart0_ri: usart0_ri-0 {
 						atmel,pins =
-							<AT91_PIOB 25 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB25 periph A */
+							<1 25 0x1 0x0>;	/* PB25 periph A */
 					};
 				};
 
 				usart1 {
 					pinctrl_usart1: usart1-0 {
 						atmel,pins =
-							<AT91_PIOB 6 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB6 periph A with pullup */
-							 AT91_PIOB 7 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB7 periph A */
+							<1 6 0x1 0x1	/* PB6 periph A with pullup */
+							 1 7 0x1 0x0>;	/* PB7 periph A */
 					};
 
 					pinctrl_usart1_rts: usart1_rts-0 {
 						atmel,pins =
-							<AT91_PIOB 28 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB28 periph A */
+							<1 28 0x1 0x0>;	/* PB28 periph A */
 					};
 
 					pinctrl_usart1_cts: usart1_cts-0 {
 						atmel,pins =
-							<AT91_PIOB 29 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB29 periph A */
+							<1 29 0x1 0x0>;	/* PB29 periph A */
 					};
 				};
 
 				usart2 {
 					pinctrl_usart2: usart2-0 {
 						atmel,pins =
-							<AT91_PIOB 8 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB8 periph A with pullup */
-							 AT91_PIOB 9 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB9 periph A */
+							<1 8 0x1 0x1	/* PB8 periph A with pullup */
+							 1 9 0x1 0x0>;	/* PB9 periph A */
 					};
 
 					pinctrl_usart2_rts: usart2_rts-0 {
 						atmel,pins =
-							<AT91_PIOA 4 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA4 periph A */
+							<0 4 0x1 0x0>;	/* PA4 periph A */
 					};
 
 					pinctrl_usart2_cts: usart2_cts-0 {
 						atmel,pins =
-							<AT91_PIOA 5 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA5 periph A */
+							<0 5 0x1 0x0>;	/* PA5 periph A */
 					};
 				};
 
 				usart3 {
 					pinctrl_usart3: usart3-0 {
 						atmel,pins =
-							<AT91_PIOB 10 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB10 periph A with pullup */
-							 AT91_PIOB 11 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB11 periph A */
+							<1 10 0x1 0x1	/* PB10 periph A with pullup */
+							 1 11 0x1 0x0>;	/* PB11 periph A */
 					};
 
 					pinctrl_usart3_rts: usart3_rts-0 {
 						atmel,pins =
-							<AT91_PIOC 8 AT91_PERIPH_B AT91_PINCTRL_NONE>;
+							<2 8 0x2 0x0>;	/* PC8 periph B */
 					};
 
 					pinctrl_usart3_cts: usart3_cts-0 {
 						atmel,pins =
-							<AT91_PIOC 10 AT91_PERIPH_B AT91_PINCTRL_NONE>;
+							<2 10 0x2 0x0>;	/* PC10 periph B */
 					};
 				};
 
 				uart0 {
 					pinctrl_uart0: uart0-0 {
 						atmel,pins =
-							<AT91_PIOA 31 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA31 periph B with pullup */
-							 AT91_PIOA 30 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA30 periph B */
+							<0 31 0x2 0x1	/* PA31 periph B with pullup */
+							 0 30 0x2 0x0>;	/* PA30 periph B */
 					};
 				};
 
 				uart1 {
 					pinctrl_uart1: uart1-0 {
 						atmel,pins =
-							<AT91_PIOB 12 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB12 periph A with pullup */
-							 AT91_PIOB 13 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB13 periph A */
+							<1 12 0x1 0x1	/* PB12 periph A with pullup */
+							 1 13 0x1 0x0>;	/* PB13 periph A */
 					};
 				};
 
 				nand {
 					pinctrl_nand: nand-0 {
 						atmel,pins =
-							<AT91_PIOC 13 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP	/* PC13 gpio RDY pin pull_up */
-							 AT91_PIOC 14 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP>;	/* PC14 gpio enable pin pull_up */
+							<2 13 0x0 0x1	/* PC13 gpio RDY pin pull_up */
+							 2 14 0x0 0x1>;	/* PC14 gpio enable pin pull_up */
 					};
 				};
 
 				macb {
 					pinctrl_macb_rmii: macb_rmii-0 {
 						atmel,pins =
-							<AT91_PIOA 12 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA12 periph A */
-							 AT91_PIOA 13 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA13 periph A */
-							 AT91_PIOA 14 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA14 periph A */
-							 AT91_PIOA 15 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA15 periph A */
-							 AT91_PIOA 16 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA16 periph A */
-							 AT91_PIOA 17 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA17 periph A */
-							 AT91_PIOA 18 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA18 periph A */
-							 AT91_PIOA 19 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA19 periph A */
-							 AT91_PIOA 20 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA20 periph A */
-							 AT91_PIOA 21 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA21 periph A */
+							<0 12 0x1 0x0	/* PA12 periph A */
+							 0 13 0x1 0x0	/* PA13 periph A */
+							 0 14 0x1 0x0	/* PA14 periph A */
+							 0 15 0x1 0x0	/* PA15 periph A */
+							 0 16 0x1 0x0	/* PA16 periph A */
+							 0 17 0x1 0x0	/* PA17 periph A */
+							 0 18 0x1 0x0	/* PA18 periph A */
+							 0 19 0x1 0x0	/* PA19 periph A */
+							 0 20 0x1 0x0	/* PA20 periph A */
+							 0 21 0x1 0x0>;	/* PA21 periph A */
 					};
 
 					pinctrl_macb_rmii_mii: macb_rmii_mii-0 {
 						atmel,pins =
-							<AT91_PIOA 22 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA22 periph B */
-							 AT91_PIOA 23 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA23 periph B */
-							 AT91_PIOA 24 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA24 periph B */
-							 AT91_PIOA 25 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA25 periph B */
-							 AT91_PIOA 26 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA26 periph B */
-							 AT91_PIOA 27 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA27 periph B */
-							 AT91_PIOA 28 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA28 periph B */
-							 AT91_PIOA 29 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA29 periph B */
+							<0 22 0x2 0x0	/* PA22 periph B */
+							 0 23 0x2 0x0	/* PA23 periph B */
+							 0 24 0x2 0x0	/* PA24 periph B */
+							 0 25 0x2 0x0	/* PA25 periph B */
+							 0 26 0x2 0x0	/* PA26 periph B */
+							 0 27 0x2 0x0	/* PA27 periph B */
+							 0 28 0x2 0x0	/* PA28 periph B */
+							 0 29 0x2 0x0>;	/* PA29 periph B */
 					};
 
 					pinctrl_macb_rmii_mii_alt: macb_rmii_mii-1 {
 						atmel,pins =
-							<AT91_PIOA 10 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA10 periph B */
-							 AT91_PIOA 11 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA11 periph B */
-							 AT91_PIOA 22 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA22 periph B */
-							 AT91_PIOA 25 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA25 periph B */
-							 AT91_PIOA 26 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA26 periph B */
-							 AT91_PIOA 27 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA27 periph B */
-							 AT91_PIOA 28 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA28 periph B */
-							 AT91_PIOA 29 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA29 periph B */
+							<0 10 0x2 0x0	/* PA10 periph B */
+							 0 11 0x2 0x0	/* PA11 periph B */
+							 0 22 0x2 0x0	/* PA22 periph B */
+							 0 25 0x2 0x0	/* PA25 periph B */
+							 0 26 0x2 0x0	/* PA26 periph B */
+							 0 27 0x2 0x0	/* PA27 periph B */
+							 0 28 0x2 0x0	/* PA28 periph B */
+							 0 29 0x2 0x0>;	/* PA29 periph B */
 					};
 				};
 
 				mmc0 {
 					pinctrl_mmc0_clk: mmc0_clk-0 {
 						atmel,pins =
-							<AT91_PIOA 8 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA8 periph A */
+							<0 8 0x1 0x0>;	/* PA8 periph A */
 					};
 
 					pinctrl_mmc0_slot0_cmd_dat0: mmc0_slot0_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 7 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA7 periph A with pullup */
-							 AT91_PIOA 6 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA6 periph A with pullup */
+							<0 7 0x1 0x1	/* PA7 periph A with pullup */
+							 0 6 0x1 0x1>;	/* PA6 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot0_dat1_3: mmc0_slot0_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 9 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA9 periph A with pullup */
-							 AT91_PIOA 10 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA10 periph A with pullup */
-							 AT91_PIOA 11 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA11 periph A with pullup */
+							<0 9 0x1 0x1	/* PA9 periph A with pullup */
+							 0 10 0x1 0x1	/* PA10 periph A with pullup */
+							 0 11 0x1 0x1>;	/* PA11 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot1_cmd_dat0: mmc0_slot1_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 1 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA1 periph B with pullup */
-							 AT91_PIOA 0 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PA0 periph B with pullup */
+							<0 1 0x2 0x1	/* PA1 periph B with pullup */
+							 0 0 0x2 0x1>;	/* PA0 periph B with pullup */
 					};
 
 					pinctrl_mmc0_slot1_dat1_3: mmc0_slot1_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 5 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA5 periph B with pullup */
-							 AT91_PIOA 4 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA4 periph B with pullup */
-							 AT91_PIOA 3 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PA3 periph B with pullup */
+							<0 5 0x2 0x1	/* PA5 periph B with pullup */
+							 0 4 0x2 0x1	/* PA4 periph B with pullup */
+							 0 3 0x2 0x1>;	/* PA3 periph B with pullup */
 					};
 				};
 
 				ssc0 {
 					pinctrl_ssc0_tx: ssc0_tx-0 {
 						atmel,pins =
-							<AT91_PIOB 16 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB16 periph A */
-							 AT91_PIOB 17 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB17 periph A */
-							 AT91_PIOB 18 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB18 periph A */
+							<1 16 0x1 0x0	/* PB16 periph A */
+							 1 17 0x1 0x0	/* PB17 periph A */
+							 1 18 0x1 0x0>;	/* PB18 periph A */
 					};
 
 					pinctrl_ssc0_rx: ssc0_rx-0 {
 						atmel,pins =
-							<AT91_PIOB 19 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB19 periph A */
-							 AT91_PIOB 20 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB20 periph A */
-							 AT91_PIOB 21 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB21 periph A */
+							<1 19 0x1 0x0	/* PB19 periph A */
+							 1 20 0x1 0x0	/* PB20 periph A */
+							 1 21 0x1 0x0>;	/* PB21 periph A */
 					};
 				};
 
 				spi0 {
 					pinctrl_spi0: spi0-0 {
 						atmel,pins =
-							<AT91_PIOA 0 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA0 periph A SPI0_MISO pin */
-							 AT91_PIOA 1 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA1 periph A SPI0_MOSI pin */
-							 AT91_PIOA 2 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA2 periph A SPI0_SPCK pin */
+							<0 0 0x1 0x0	/* PA0 periph A SPI0_MISO pin */
+							 0 1 0x1 0x0	/* PA1 periph A SPI0_MOSI pin */
+							 0 2 0x1 0x0>;	/* PA2 periph A SPI0_SPCK pin */
 					};
 				};
 
 				spi1 {
 					pinctrl_spi1: spi1-0 {
 						atmel,pins =
-							<AT91_PIOB 0 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB0 periph A SPI1_MISO pin */
-							 AT91_PIOB 1 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB1 periph A SPI1_MOSI pin */
-							 AT91_PIOB 2 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB2 periph A SPI1_SPCK pin */
+							<1 0 0x1 0x0	/* PB0 periph A SPI1_MISO pin */
+							 1 1 0x1 0x0	/* PB1 periph A SPI1_MOSI pin */
+							 1 2 0x1 0x0>;	/* PB2 periph A SPI1_SPCK pin */
 					};
 				};
 
 				i2c_gpio0 {
 					pinctrl_i2c_gpio0: i2c_gpio0-0 {
 						atmel,pins =
-							<AT91_PIOA 23 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE
-							 AT91_PIOA 24 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE>;
-					};
-				};
-
-				tcb0 {
-					pinctrl_tcb0_tclk0: tcb0_tclk0-0 {
-						atmel,pins = <AT91_PIOA 25 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk1: tcb0_tclk1-0 {
-						atmel,pins = <AT91_PIOB 6 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk2: tcb0_tclk2-0 {
-						atmel,pins = <AT91_PIOB 7 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa0: tcb0_tioa0-0 {
-						atmel,pins = <AT91_PIOA 26 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa1: tcb0_tioa1-0 {
-						atmel,pins = <AT91_PIOA 27 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa2: tcb0_tioa2-0 {
-						atmel,pins = <AT91_PIOA 28 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob0: tcb0_tiob0-0 {
-						atmel,pins = <AT91_PIOC 9 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob1: tcb0_tiob1-0 {
-						atmel,pins = <AT91_PIOC 7 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob2: tcb0_tiob2-0 {
-						atmel,pins = <AT91_PIOC 6 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-				};
-
-				tcb1 {
-					pinctrl_tcb1_tclk0: tcb1_tclk0-0 {
-						atmel,pins = <AT91_PIOB 16 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tclk1: tcb1_tclk1-0 {
-						atmel,pins = <AT91_PIOB 17 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tclk2: tcb1_tclk2-0 {
-						atmel,pins = <AT91_PIOC 22 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa0: tcb1_tioa0-0 {
-						atmel,pins = <AT91_PIOB 0 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa1: tcb1_tioa1-0 {
-						atmel,pins = <AT91_PIOB 2 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa2: tcb1_tioa2-0 {
-						atmel,pins = <AT91_PIOB 3 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob0: tcb1_tiob0-0 {
-						atmel,pins = <AT91_PIOB 1 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob1: tcb1_tiob1-0 {
-						atmel,pins = <AT91_PIOB 18 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob2: tcb1_tiob2-0 {
-						atmel,pins = <AT91_PIOB 19 AT91_PERIPH_B AT91_PINCTRL_NONE>;
+							<0 23 0x0 0x3   /* PA23 gpio I2C_SDA pin */
+							 0 24 0x0 0x3>; /* PA24 gpio I2C_SCL pin */
 					};
 				};
 
 				pioA: gpio@fffff400 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff400 0x200>;
-					interrupts = <2 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <2 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioA_clk>;
 				};
 
 				pioB: gpio@fffff600 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff600 0x200>;
-					interrupts = <3 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <3 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioB_clk>;
 				};
 
 				pioC: gpio@fffff800 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff800 0x200>;
-					interrupts = <4 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <4 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioC_clk>;
 				};
 			};
 
 			dbgu: serial@fffff200 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfffff200 0x200>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
+				interrupts = <1 4 7>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_dbgu>;
-				clocks = <&mck>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart0: serial@fffb0000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfffb0000 0x200>;
-				interrupts = <6 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <6 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart0>;
-				clocks = <&usart0_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart1: serial@fffb4000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfffb4000 0x200>;
-				interrupts = <7 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <7 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart1>;
-				clocks = <&usart1_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart2: serial@fffb8000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfffb8000 0x200>;
-				interrupts = <8 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <8 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart2>;
-				clocks = <&usart2_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart3: serial@fffd0000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfffd0000 0x200>;
-				interrupts = <23 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <23 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart3>;
-				clocks = <&usart3_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			uart0: serial@fffd4000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfffd4000 0x200>;
-				interrupts = <24 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <24 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_uart0>;
-				clocks = <&uart0_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			uart1: serial@fffd8000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfffd8000 0x200>;
-				interrupts = <25 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <25 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_uart1>;
-				clocks = <&uart1_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			macb0: ethernet@fffc4000 {
 				compatible = "cdns,at32ap7000-macb", "cdns,macb";
 				reg = <0xfffc4000 0x100>;
-				interrupts = <21 IRQ_TYPE_LEVEL_HIGH 3>;
+				interrupts = <21 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_macb_rmii>;
-				clocks = <&macb0_clk>, <&macb0_clk>;
-				clock-names = "hclk", "pclk";
 				status = "disabled";
 			};
 
 			usb1: gadget@fffa4000 {
-				compatible = "atmel,at91sam9260-udc";
+				compatible = "atmel,at91rm9200-udc";
 				reg = <0xfffa4000 0x4000>;
-				interrupts = <10 IRQ_TYPE_LEVEL_HIGH 2>;
-				clocks = <&udc_clk>, <&udpck>;
-				clock-names = "pclk", "hclk";
+				interrupts = <10 4 2>;
 				status = "disabled";
 			};
 
 			i2c0: i2c@fffac000 {
 				compatible = "atmel,at91sam9260-i2c";
 				reg = <0xfffac000 0x100>;
-				interrupts = <11 IRQ_TYPE_LEVEL_HIGH 6>;
+				interrupts = <11 4 6>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&twi0_clk>;
 				status = "disabled";
 			};
 
 			mmc0: mmc@fffa8000 {
 				compatible = "atmel,hsmci";
 				reg = <0xfffa8000 0x600>;
-				interrupts = <9 IRQ_TYPE_LEVEL_HIGH 0>;
+				interrupts = <9 4 0>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				pinctrl-names = "default";
-				clocks = <&mci0_clk>;
-				clock-names = "mci_clk";
 				status = "disabled";
 			};
 
 			ssc0: ssc@fffbc000 {
 				compatible = "atmel,at91rm9200-ssc";
 				reg = <0xfffbc000 0x4000>;
-				interrupts = <14 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <14 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc0_tx &pinctrl_ssc0_rx>;
-				clocks = <&ssc0_clk>;
-				clock-names = "pclk";
 				status = "disabled";
 			};
 
@@ -899,11 +506,9 @@
 				#size-cells = <0>;
 				compatible = "atmel,at91rm9200-spi";
 				reg = <0xfffc8000 0x200>;
-				interrupts = <12 IRQ_TYPE_LEVEL_HIGH 3>;
+				interrupts = <12 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi0>;
-				clocks = <&spi0_clk>;
-				clock-names = "spi_clk";
 				status = "disabled";
 			};
 
@@ -912,76 +517,53 @@
 				#size-cells = <0>;
 				compatible = "atmel,at91rm9200-spi";
 				reg = <0xfffcc000 0x200>;
-				interrupts = <13 IRQ_TYPE_LEVEL_HIGH 3>;
+				interrupts = <13 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi1>;
-				clocks = <&spi1_clk>;
-				clock-names = "spi_clk";
 				status = "disabled";
 			};
 
 			adc0: adc@fffe0000 {
-				#address-cells = <1>;
-				#size-cells = <0>;
 				compatible = "atmel,at91sam9260-adc";
 				reg = <0xfffe0000 0x100>;
-				interrupts = <5 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&adc_clk>, <&adc_op_clk>;
-				clock-names = "adc_clk", "adc_op_clk";
+				interrupts = <5 4 0>;
 				atmel,adc-use-external-triggers;
 				atmel,adc-channels-used = <0xf>;
 				atmel,adc-vref = <3300>;
+				atmel,adc-num-channels = <4>;
 				atmel,adc-startup-time = <15>;
+				atmel,adc-channel-base = <0x30>;
+				atmel,adc-drdy-mask = <0x10000>;
+				atmel,adc-status-register = <0x1c>;
+				atmel,adc-trigger-register = <0x04>;
 				atmel,adc-res = <8 10>;
 				atmel,adc-res-names = "lowres", "highres";
 				atmel,adc-use-res = "highres";
 
 				trigger@0 {
-					reg = <0>;
 					trigger-name = "timer-counter-0";
 					trigger-value = <0x1>;
 				};
 				trigger@1 {
-					reg = <1>;
 					trigger-name = "timer-counter-1";
 					trigger-value = <0x3>;
 				};
 
 				trigger@2 {
-					reg = <2>;
 					trigger-name = "timer-counter-2";
 					trigger-value = <0x5>;
 				};
 
 				trigger@3 {
-					reg = <3>;
 					trigger-name = "external";
-					trigger-value = <0xd>;
+					trigger-value = <0x13>;
 					trigger-external;
 				};
 			};
 
-			rtc@fffffd20 {
-				compatible = "atmel,at91sam9260-rtt";
-				reg = <0xfffffd20 0x10>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				clocks = <&clk32k>;
-				status = "disabled";
-			};
-
 			watchdog@fffffd40 {
 				compatible = "atmel,at91sam9260-wdt";
 				reg = <0xfffffd40 0x10>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				atmel,watchdog-type = "hardware";
-				atmel,reset-type = "all";
-				atmel,dbg-halt;
-				status = "disabled";
-			};
-
-			gpbr: syscon@fffffd50 {
-				compatible = "atmel,at91sam9260-gpbr", "syscon";
-				reg = <0xfffffd50 0x10>;
 				status = "disabled";
 			};
 		};
@@ -997,8 +579,8 @@
 			atmel,nand-cmd-offset = <22>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_nand>;
-			gpios = <&pioC 13 GPIO_ACTIVE_HIGH
-				 &pioC 14 GPIO_ACTIVE_HIGH
+			gpios = <&pioC 13 0
+				 &pioC 14 0
 				 0
 				>;
 			status = "disabled";
@@ -1007,17 +589,15 @@
 		usb0: ohci@00500000 {
 			compatible = "atmel,at91rm9200-ohci", "usb-ohci";
 			reg = <0x00500000 0x100000>;
-			interrupts = <20 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&usb>, <&ohci_clk>, <&ohci_clk>, <&uhpck>;
-			clock-names = "usb_clk", "ohci_clk", "hclk", "uhpck";
+			interrupts = <20 4 2>;
 			status = "disabled";
 		};
 	};
 
 	i2c@0 {
 		compatible = "i2c-gpio";
-		gpios = <&pioA 23 GPIO_ACTIVE_HIGH /* sda */
-			 &pioA 24 GPIO_ACTIVE_HIGH /* scl */
+		gpios = <&pioA 23 0 /* sda */
+			 &pioA 24 0 /* scl */
 			>;
 		i2c-gpio,sda-open-drain;
 		i2c-gpio,scl-open-drain;
diff -urNp a/arch/arm/boot/dts/at91sam9263.dtsi b/arch/arm/boot/dts/at91sam9263.dtsi
--- a/arch/arm/boot/dts/at91sam9263.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9263.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,11 +6,7 @@
  * Licensed under GPLv2 only.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/pinctrl/at91.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/clock/at91.h>
+/include/ "skeleton.dtsi"
 
 / {
 	model = "Atmel AT91SAM9263 family SoC";
@@ -31,9 +27,7 @@
 		i2c0 = &i2c0;
 		ssc0 = &ssc0;
 		ssc1 = &ssc1;
-		pwm0 = &pwm0;
 	};
-
 	cpus {
 		#address-cells = <0>;
 		#size-cells = <0>;
@@ -48,30 +42,6 @@
 		reg = <0x20000000 0x08000000>;
 	};
 
-	clocks {
-		main_xtal: main_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		slow_xtal: slow_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-	};
-
-	sram0: sram@00300000 {
-		compatible = "mmio-sram";
-		reg = <0x00300000 0x14000>;
-	};
-
-	sram1: sram@00500000 {
-		compatible = "mmio-sram";
-		reg = <0x00500000 0x4000>;
-	};
-
 	ahb {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -95,290 +65,24 @@
 			pmc: pmc@fffffc00 {
 				compatible = "atmel,at91rm9200-pmc";
 				reg = <0xfffffc00 0x100>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				interrupt-controller;
-				#address-cells = <1>;
-				#size-cells = <0>;
-				#interrupt-cells = <1>;
-
-				main_osc: main_osc {
-					compatible = "atmel,at91rm9200-clk-main-osc";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MOSCS>;
-					clocks = <&main_xtal>;
-				};
-
-				main: mainck {
-					compatible = "atmel,at91rm9200-clk-main";
-					#clock-cells = <0>;
-					clocks = <&main_osc>;
-				};
-
-				plla: pllack {
-					compatible = "atmel,at91rm9200-clk-pll";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKA>;
-					clocks = <&main>;
-					reg = <0>;
-					atmel,clk-input-range = <1000000 32000000>;
-					#atmel,pll-clk-output-range-cells = <4>;
-					atmel,pll-clk-output-ranges = <80000000 200000000 0 1>,
-								<190000000 240000000 2 1>;
-				};
-
-				pllb: pllbck {
-					compatible = "atmel,at91rm9200-clk-pll";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKB>;
-					clocks = <&main>;
-					reg = <1>;
-					atmel,clk-input-range = <1000000 32000000>;
-					#atmel,pll-clk-output-range-cells = <4>;
-					atmel,pll-clk-output-ranges = <80000000 200000000 0 1>,
-								<190000000 240000000 2 1>;
-				};
-
-				mck: masterck {
-					compatible = "atmel,at91rm9200-clk-master";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MCKRDY>;
-					clocks = <&slow_xtal>, <&main>, <&plla>, <&pllb>;
-					atmel,clk-output-range = <0 120000000>;
-					atmel,clk-divisors = <1 2 4 0>;
-				};
-
-				usb: usbck {
-					compatible = "atmel,at91rm9200-clk-usb";
-					#clock-cells = <0>;
-					atmel,clk-divisors = <1 2 4 0>;
-					clocks = <&pllb>;
-				};
-
-				prog: progck {
-					compatible = "atmel,at91rm9200-clk-programmable";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					interrupt-parent = <&pmc>;
-					clocks = <&slow_xtal>, <&main>, <&plla>, <&pllb>;
-
-					prog0: prog0 {
-						#clock-cells = <0>;
-						reg = <0>;
-						interrupts = <AT91_PMC_PCKRDY(0)>;
-					};
-
-					prog1: prog1 {
-						#clock-cells = <0>;
-						reg = <1>;
-						interrupts = <AT91_PMC_PCKRDY(1)>;
-					};
-
-					prog2: prog2 {
-						#clock-cells = <0>;
-						reg = <2>;
-						interrupts = <AT91_PMC_PCKRDY(2)>;
-					};
-
-					prog3: prog3 {
-						#clock-cells = <0>;
-						reg = <3>;
-						interrupts = <AT91_PMC_PCKRDY(3)>;
-					};
-				};
-
-				systemck {
-					compatible = "atmel,at91rm9200-clk-system";
-					#address-cells = <1>;
-					#size-cells = <0>;
-
-					uhpck: uhpck {
-						#clock-cells = <0>;
-						reg = <6>;
-						clocks = <&usb>;
-					};
-
-					udpck: udpck {
-						#clock-cells = <0>;
-						reg = <7>;
-						clocks = <&usb>;
-					};
-
-					pck0: pck0 {
-						#clock-cells = <0>;
-						reg = <8>;
-						clocks = <&prog0>;
-					};
-
-					pck1: pck1 {
-						#clock-cells = <0>;
-						reg = <9>;
-						clocks = <&prog1>;
-					};
-
-					pck2: pck2 {
-						#clock-cells = <0>;
-						reg = <10>;
-						clocks = <&prog2>;
-					};
-
-					pck3: pck3 {
-						#clock-cells = <0>;
-						reg = <11>;
-						clocks = <&prog3>;
-					};
-				};
-
-				periphck {
-					compatible = "atmel,at91rm9200-clk-peripheral";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					clocks = <&mck>;
-
-					pioA_clk: pioA_clk {
-						#clock-cells = <0>;
-						reg = <2>;
-					};
-
-					pioB_clk: pioB_clk {
-						#clock-cells = <0>;
-						reg = <3>;
-					};
-
-					pioCDE_clk: pioCDE_clk {
-						#clock-cells = <0>;
-						reg = <4>;
-					};
-
-					usart0_clk: usart0_clk {
-						#clock-cells = <0>;
-						reg = <7>;
-					};
-
-					usart1_clk: usart1_clk {
-						#clock-cells = <0>;
-						reg = <8>;
-					};
-
-					usart2_clk: usart2_clk {
-						#clock-cells = <0>;
-						reg = <9>;
-					};
-
-					mci0_clk: mci0_clk {
-						#clock-cells = <0>;
-						reg = <10>;
-					};
-
-					mci1_clk: mci1_clk {
-						#clock-cells = <0>;
-						reg = <11>;
-					};
-
-					can_clk: can_clk {
-						#clock-cells = <0>;
-						reg = <12>;
-					};
-
-					twi0_clk: twi0_clk {
-						#clock-cells = <0>;
-						reg = <13>;
-					};
-
-					spi0_clk: spi0_clk {
-						#clock-cells = <0>;
-						reg = <14>;
-					};
-
-					spi1_clk: spi1_clk {
-						#clock-cells = <0>;
-						reg = <15>;
-					};
-
-					ssc0_clk: ssc0_clk {
-						#clock-cells = <0>;
-						reg = <16>;
-					};
-
-					ssc1_clk: ssc1_clk {
-						#clock-cells = <0>;
-						reg = <17>;
-					};
-
-					ac97_clk: ac97_clk {
-						#clock-cells = <0>;
-						reg = <18>;
-					};
-
-					tcb_clk: tcb_clk {
-						#clock-cells = <0>;
-						reg = <19>;
-					};
-
-					pwm_clk: pwm_clk {
-						#clock-cells = <0>;
-						reg = <20>;
-					};
-
-					macb0_clk: macb0_clk {
-						#clock-cells = <0>;
-						reg = <21>;
-					};
-
-					g2de_clk: g2de_clk {
-						#clock-cells = <0>;
-						reg = <23>;
-					};
-
-					udc_clk: udc_clk {
-						#clock-cells = <0>;
-						reg = <24>;
-					};
-
-					isi_clk: isi_clk {
-						#clock-cells = <0>;
-						reg = <25>;
-					};
-
-					lcd_clk: lcd_clk {
-						#clock-cells = <0>;
-						reg = <26>;
-					};
-
-					dma_clk: dma_clk {
-						#clock-cells = <0>;
-						reg = <27>;
-					};
-
-					ohci_clk: ohci_clk {
-						#clock-cells = <0>;
-						reg = <29>;
-					};
-				};
 			};
 
-			ramc0: ramc@ffffe200 {
+			ramc: ramc@ffffe200 {
 				compatible = "atmel,at91sam9260-sdramc";
-				reg = <0xffffe200 0x200>;
-			};
-
-			ramc1: ramc@ffffe800 {
-				compatible = "atmel,at91sam9260-sdramc";
-				reg = <0xffffe800 0x200>;
+				reg = <0xffffe200 0x200
+				       0xffffe800 0x200>;
 			};
 
 			pit: timer@fffffd30 {
 				compatible = "atmel,at91sam9260-pit";
 				reg = <0xfffffd30 0xf>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				clocks = <&mck>;
+				interrupts = <1 4 7>;
 			};
 
 			tcb0: timer@fff7c000 {
 				compatible = "atmel,at91rm9200-tcb";
 				reg = <0xfff7c000 0x100>;
-				interrupts = <19 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tcb_clk>;
-				clock-names = "t0_clk";
+				interrupts = <19 4 0>;
 			};
 
 			rstc@fffffd00 {
@@ -410,501 +114,374 @@
 				dbgu {
 					pinctrl_dbgu: dbgu-0 {
 						atmel,pins =
-							<AT91_PIOC 30 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC30 periph A */
-							 AT91_PIOC 31 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PC31 periph with pullup */
+							<2 30 0x1 0x0	/* PC30 periph A */
+							 2 31 0x1 0x1>;	/* PC31 periph with pullup */
 					};
 				};
 
 				usart0 {
 					pinctrl_usart0: usart0-0 {
 						atmel,pins =
-							<AT91_PIOA 26 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA26 periph A with pullup */
-							 AT91_PIOA 27 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA27 periph A */
+							<0 26 0x1 0x1	/* PA26 periph A with pullup */
+							 0 27 0x1 0x0>;	/* PA27 periph A */
 					};
 
 					pinctrl_usart0_rts: usart0_rts-0 {
 						atmel,pins =
-							<AT91_PIOA 28 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA28 periph A */
+							<0 28 0x1 0x0>;	/* PA28 periph A */
 					};
 
 					pinctrl_usart0_cts: usart0_cts-0 {
 						atmel,pins =
-							<AT91_PIOA 29 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA29 periph A */
+							<0 29 0x1 0x0>;	/* PA29 periph A */
 					};
 				};
 
 				usart1 {
 					pinctrl_usart1: usart1-0 {
 						atmel,pins =
-							<AT91_PIOD 0 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PD0 periph A with pullup */
-							 AT91_PIOD 1 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD1 periph A */
+							<3 0 0x1 0x1	/* PD0 periph A with pullup */
+							 3 1 0x1 0x0>;	/* PD1 periph A */
 					};
 
 					pinctrl_usart1_rts: usart1_rts-0 {
 						atmel,pins =
-							<AT91_PIOD 7 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PD7 periph B */
+							<3 7 0x2 0x0>;	/* PD7 periph B */
 					};
 
 					pinctrl_usart1_cts: usart1_cts-0 {
 						atmel,pins =
-							<AT91_PIOD 8 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PD8 periph B */
+							<3 8 0x2 0x0>;	/* PD8 periph B */
 					};
 				};
 
 				usart2 {
 					pinctrl_usart2: usart2-0 {
 						atmel,pins =
-							<AT91_PIOD 2 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PD2 periph A with pullup */
-							 AT91_PIOD 3 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD3 periph A */
+							<3 2 0x1 0x1	/* PD2 periph A with pullup */
+							 3 3 0x1 0x0>;	/* PD3 periph A */
 					};
 
 					pinctrl_usart2_rts: usart2_rts-0 {
 						atmel,pins =
-							<AT91_PIOD 5 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PD5 periph B */
+							<3 5 0x2 0x0>;	/* PD5 periph B */
 					};
 
 					pinctrl_usart2_cts: usart2_cts-0 {
 						atmel,pins =
-							<AT91_PIOD 6 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PD6 periph B */
+							<4 6 0x2 0x0>;	/* PD6 periph B */
 					};
 				};
 
 				nand {
 					pinctrl_nand: nand-0 {
 						atmel,pins =
-							<AT91_PIOA 22 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP	/* PA22 gpio RDY pin pull_up*/
-							 AT91_PIOD 15 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP>;	/* PD15 gpio enable pin pull_up */
+							<0 22 0x0 0x1	/* PA22 gpio RDY pin pull_up*/
+							 3 15 0x0 0x1>;	/* PD15 gpio enable pin pull_up */
 					};
 				};
 
 				macb {
 					pinctrl_macb_rmii: macb_rmii-0 {
 						atmel,pins =
-							<AT91_PIOC 25 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC25 periph B */
-							 AT91_PIOE 21 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE21 periph A */
-							 AT91_PIOE 23 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE23 periph A */
-							 AT91_PIOE 24 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE24 periph A */
-							 AT91_PIOE 25 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE25 periph A */
-							 AT91_PIOE 26 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE26 periph A */
-							 AT91_PIOE 27 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE27 periph A */
-							 AT91_PIOE 28 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE28 periph A */
-							 AT91_PIOE 29 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE29 periph A */
-							 AT91_PIOE 30 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PE30 periph A */
+							<2 25 0x2 0x0	/* PC25 periph B */
+							 4 21 0x1 0x0	/* PE21 periph A */
+							 4 23 0x1 0x0	/* PE23 periph A */
+							 4 24 0x1 0x0	/* PE24 periph A */
+							 4 25 0x1 0x0	/* PE25 periph A */
+							 4 26 0x1 0x0	/* PE26 periph A */
+							 4 27 0x1 0x0	/* PE27 periph A */
+							 4 28 0x1 0x0	/* PE28 periph A */
+							 4 29 0x1 0x0	/* PE29 periph A */
+							 4 30 0x1 0x0>;	/* PE30 periph A */
 					};
 
 					pinctrl_macb_rmii_mii: macb_rmii_mii-0 {
 						atmel,pins =
-							<AT91_PIOC 20 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC20 periph B */
-							 AT91_PIOC 21 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC21 periph B */
-							 AT91_PIOC 22 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC22 periph B */
-							 AT91_PIOC 23 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC23 periph B */
-							 AT91_PIOC 24 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC24 periph B */
-							 AT91_PIOC 25 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC25 periph B */
-							 AT91_PIOC 27 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC27 periph B */
-							 AT91_PIOE 22 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PE22 periph B */
+							<2 20 0x2 0x0	/* PC20 periph B */
+							 2 21 0x2 0x0	/* PC21 periph B */
+							 2 22 0x2 0x0	/* PC22 periph B */
+							 2 23 0x2 0x0	/* PC23 periph B */
+							 2 24 0x2 0x0	/* PC24 periph B */
+							 2 25 0x2 0x0	/* PC25 periph B */
+							 2 27 0x2 0x0	/* PC27 periph B */
+							 4 22 0x2 0x0>;	/* PE22 periph B */
 					};
 				};
 
 				mmc0 {
 					pinctrl_mmc0_clk: mmc0_clk-0 {
 						atmel,pins =
-							<AT91_PIOA 12 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA12 periph A */
+							<0 12 0x1 0x0>;	/* PA12 periph A */
 					};
 
 					pinctrl_mmc0_slot0_cmd_dat0: mmc0_slot0_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 1 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA1 periph A with pullup */
-							 AT91_PIOA 0 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA0 periph A with pullup */
+							<0 1 0x1 0x1	/* PA1 periph A with pullup */
+							 0 0 0x1 0x1>;	/* PA0 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot0_dat1_3: mmc0_slot0_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 3 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA3 periph A with pullup */
-							 AT91_PIOA 4 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA4 periph A with pullup */
-							 AT91_PIOA 5 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA5 periph A with pullup */
+							<0 3 0x1 0x1	/* PA3 periph A with pullup */
+							 0 4 0x1 0x1	/* PA4 periph A with pullup */
+							 0 5 0x1 0x1>;	/* PA5 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot1_cmd_dat0: mmc0_slot1_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 16 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA16 periph A with pullup */
-							 AT91_PIOA 17 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA17 periph A with pullup */
+							<0 16 0x1 0x1	/* PA16 periph A with pullup */
+							 0 17 0x1 0x1>;	/* PA17 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot1_dat1_3: mmc0_slot1_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 18 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA18 periph A with pullup */
-							 AT91_PIOA 19 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA19 periph A with pullup */
-							 AT91_PIOA 20 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA20 periph A with pullup */
+							<0 18 0x1 0x1	/* PA18 periph A with pullup */
+							 0 19 0x1 0x1	/* PA19 periph A with pullup */
+							 0 20 0x1 0x1>;	/* PA20 periph A with pullup */
 					};
 				};
 
 				mmc1 {
 					pinctrl_mmc1_clk: mmc1_clk-0 {
 						atmel,pins =
-							<AT91_PIOA 6 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA6 periph A */
+							<0 6 0x1 0x0>;	/* PA6 periph A */
 					};
 
 					pinctrl_mmc1_slot0_cmd_dat0: mmc1_slot0_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 7 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA7 periph A with pullup */
-							 AT91_PIOA 8 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA8 periph A with pullup */
+							<0 7 0x1 0x1	/* PA7 periph A with pullup */
+							 0 8 0x1 0x1>;	/* PA8 periph A with pullup */
 					};
 
 					pinctrl_mmc1_slot0_dat1_3: mmc1_slot0_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 9 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA9 periph A with pullup */
-							 AT91_PIOA 10 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA10 periph A with pullup */
-							 AT91_PIOA 11 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA11 periph A with pullup */
+							<0 9 0x1 0x1	/* PA9 periph A with pullup */
+							 0 10 0x1 0x1	/* PA10 periph A with pullup */
+							 0 11 0x1 0x1>;	/* PA11 periph A with pullup */
 					};
 
 					pinctrl_mmc1_slot1_cmd_dat0: mmc1_slot1_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 21 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA21 periph A with pullup */
-							 AT91_PIOA 22 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA22 periph A with pullup */
+							<0 21 0x1 0x1	/* PA21 periph A with pullup */
+							 0 22 0x1 0x1>;	/* PA22 periph A with pullup */
 					};
 
 					pinctrl_mmc1_slot1_dat1_3: mmc1_slot1_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 23 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA23 periph A with pullup */
-							 AT91_PIOA 24 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA24 periph A with pullup */
-							 AT91_PIOA 25 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA25 periph A with pullup */
+							<0 23 0x1 0x1	/* PA23 periph A with pullup */
+							 0 24 0x1 0x1	/* PA24 periph A with pullup */
+							 0 25 0x1 0x1>;	/* PA25 periph A with pullup */
 					};
 				};
 
 				ssc0 {
 					pinctrl_ssc0_tx: ssc0_tx-0 {
 						atmel,pins =
-							<AT91_PIOB 0 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB0 periph B */
-							 AT91_PIOB 1 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB1 periph B */
-							 AT91_PIOB 2 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB2 periph B */
+							<1 0 0x2 0x0	/* PB0 periph B */
+							 1 1 0x2 0x0	/* PB1 periph B */
+							 1 2 0x2 0x0>;	/* PB2 periph B */
 					};
 
 					pinctrl_ssc0_rx: ssc0_rx-0 {
 						atmel,pins =
-							<AT91_PIOB 3 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB3 periph B */
-							 AT91_PIOB 4 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB4 periph B */
-							 AT91_PIOB 5 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB5 periph B */
+							<1 3 0x2 0x0	/* PB3 periph B */
+							 1 4 0x2 0x0	/* PB4 periph B */
+							 1 5 0x2 0x0>;	/* PB5 periph B */
 					};
 				};
 
 				ssc1 {
 					pinctrl_ssc1_tx: ssc1_tx-0 {
 						atmel,pins =
-							<AT91_PIOB 6 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB6 periph A */
-							 AT91_PIOB 7 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB7 periph A */
-							 AT91_PIOB 8 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB8 periph A */
+							<1 6 0x1 0x0	/* PB6 periph A */
+							 1 7 0x1 0x0	/* PB7 periph A */
+							 1 8 0x1 0x0>;	/* PB8 periph A */
 					};
 
 					pinctrl_ssc1_rx: ssc1_rx-0 {
 						atmel,pins =
-							<AT91_PIOB 9 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB9 periph A */
-							 AT91_PIOB 10 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB10 periph A */
-							 AT91_PIOB 11 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB11 periph A */
+							<1 9 0x1 0x0	/* PB9 periph A */
+							 1 10 0x1 0x0	/* PB10 periph A */
+							 1 11 0x1 0x0>;	/* PB11 periph A */
 					};
 				};
 
 				spi0 {
 					pinctrl_spi0: spi0-0 {
 						atmel,pins =
-							<AT91_PIOA 0 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA0 periph B SPI0_MISO pin */
-							 AT91_PIOA 1 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA1 periph B SPI0_MOSI pin */
-							 AT91_PIOA 2 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA2 periph B SPI0_SPCK pin */
+							<0 0 0x2 0x0	/* PA0 periph B SPI0_MISO pin */
+							 0 1 0x2 0x0	/* PA1 periph B SPI0_MOSI pin */
+							 0 2 0x2 0x0>;	/* PA2 periph B SPI0_SPCK pin */
 					};
 				};
 
 				spi1 {
 					pinctrl_spi1: spi1-0 {
 						atmel,pins =
-							<AT91_PIOB 12 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB12 periph A SPI1_MISO pin */
-							 AT91_PIOB 13 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB13 periph A SPI1_MOSI pin */
-							 AT91_PIOB 14 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB14 periph A SPI1_SPCK pin */
-					};
-				};
-
-				tcb0 {
-					pinctrl_tcb0_tclk0: tcb0_tclk0-0 {
-						atmel,pins = <AT91_PIOB 28 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk1: tcb0_tclk1-0 {
-						atmel,pins = <AT91_PIOC 28 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk2: tcb0_tclk2-0 {
-						atmel,pins = <AT91_PIOA 15 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa0: tcb0_tioa0-0 {
-						atmel,pins = <AT91_PIOE 18 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa1: tcb0_tioa1-0 {
-						atmel,pins = <AT91_PIOE 8 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa2: tcb0_tioa2-0 {
-						atmel,pins = <AT91_PIOB 17 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob0: tcb0_tiob0-0 {
-						atmel,pins = <AT91_PIOE 19 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob1: tcb0_tiob1-0 {
-						atmel,pins = <AT91_PIOE 9 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob2: tcb0_tiob2-0 {
-						atmel,pins = <AT91_PIOB 18 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-				};
-
-				fb {
-					pinctrl_fb: fb-0 {
-						atmel,pins =
-							<AT91_PIOC 1 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC1 periph A */
-							 AT91_PIOC 2 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC2 periph A */
-							 AT91_PIOC 3 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC3 periph A */
-							 AT91_PIOB 9 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB9 periph B */
-							 AT91_PIOC 6 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC6 periph A */
-							 AT91_PIOC 7 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC7 periph A */
-							 AT91_PIOC 8 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC8 periph A */
-							 AT91_PIOC 9 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC9 periph A */
-							 AT91_PIOC 10 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC10 periph A */
-							 AT91_PIOC 11 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC11 periph A */
-							 AT91_PIOC 14 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC14 periph A */
-							 AT91_PIOC 15 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC15 periph A */
-							 AT91_PIOC 16 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC16 periph A */
-							 AT91_PIOC 12 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC12 periph B */
-							 AT91_PIOC 18 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC18 periph A */
-							 AT91_PIOC 19 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC19 periph A */
-							 AT91_PIOC 22 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC22 periph A */
-							 AT91_PIOC 23 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC23 periph A */
-							 AT91_PIOC 24 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC24 periph A */
-							 AT91_PIOC 17 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC17 periph B */
-							 AT91_PIOC 26 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC26 periph A */
-							 AT91_PIOC 27 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PC27 periph A */
-					};
-				};
-
-				can {
-					pinctrl_can_rx_tx: can_rx_tx {
-						atmel,pins =
-							<AT91_PIOA 14 AT91_PERIPH_A AT91_PINCTRL_NONE	/* CANRX, conflicts with IRQ0 */
-							 AT91_PIOA 13 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* CANTX, conflicts with PCK0 */
-					};
-				};
-
-				ac97 {
-					pinctrl_ac97: ac97-0 {
-						atmel,pins =
-							<AT91_PIOB 0 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB12 periph A AC97FS pin */
-							 AT91_PIOB 1 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB13 periph A AC97CK pin */
-							 AT91_PIOB 2 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB14 periph A AC97TX pin */
-							 AT91_PIOB 3 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB14 periph A AC97RX pin */
+							<1 12 0x1 0x0	/* PB12 periph A SPI1_MISO pin */
+							 1 13 0x1 0x0	/* PB13 periph A SPI1_MOSI pin */
+							 1 14 0x1 0x0>;	/* PB14 periph A SPI1_SPCK pin */
 					};
 				};
 
 				pioA: gpio@fffff200 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff200 0x200>;
-					interrupts = <2 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <2 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioA_clk>;
 				};
 
 				pioB: gpio@fffff400 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff400 0x200>;
-					interrupts = <3 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <3 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioB_clk>;
 				};
 
 				pioC: gpio@fffff600 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff600 0x200>;
-					interrupts = <4 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <4 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioCDE_clk>;
 				};
 
 				pioD: gpio@fffff800 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff800 0x200>;
-					interrupts = <4 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <4 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioCDE_clk>;
 				};
 
 				pioE: gpio@fffffa00 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffffa00 0x200>;
-					interrupts = <4 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <4 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioCDE_clk>;
 				};
 			};
 
 			dbgu: serial@ffffee00 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xffffee00 0x200>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
+				interrupts = <1 4 7>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_dbgu>;
-				clocks = <&mck>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart0: serial@fff8c000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfff8c000 0x200>;
-				interrupts = <7 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <7 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart0>;
-				clocks = <&usart0_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart1: serial@fff90000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfff90000 0x200>;
-				interrupts = <8 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <8 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart1>;
-				clocks = <&usart1_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart2: serial@fff94000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfff94000 0x200>;
-				interrupts = <9 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <9 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart2>;
-				clocks = <&usart2_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			ssc0: ssc@fff98000 {
 				compatible = "atmel,at91rm9200-ssc";
 				reg = <0xfff98000 0x4000>;
-				interrupts = <16 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <16 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc0_tx &pinctrl_ssc0_rx>;
-				clocks = <&ssc0_clk>;
-				clock-names = "pclk";
 				status = "disabled";
 			};
 
 			ssc1: ssc@fff9c000 {
 				compatible = "atmel,at91rm9200-ssc";
 				reg = <0xfff9c000 0x4000>;
-				interrupts = <17 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <17 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc1_tx &pinctrl_ssc1_rx>;
-				clocks = <&ssc1_clk>;
-				clock-names = "pclk";
-				status = "disabled";
-			};
-
-			ac97: sound@fffa0000 {
-				compatible = "atmel,at91sam9263-ac97c";
-				reg = <0xfffa0000 0x4000>;
-				interrupts = <18 IRQ_TYPE_LEVEL_HIGH 5>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_ac97>;
-				clocks = <&ac97_clk>;
-				clock-names = "ac97_clk";
 				status = "disabled";
 			};
 
 			macb0: ethernet@fffbc000 {
 				compatible = "cdns,at32ap7000-macb", "cdns,macb";
 				reg = <0xfffbc000 0x100>;
-				interrupts = <21 IRQ_TYPE_LEVEL_HIGH 3>;
+				interrupts = <21 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_macb_rmii>;
-				clocks = <&macb0_clk>, <&macb0_clk>;
-				clock-names = "hclk", "pclk";
 				status = "disabled";
 			};
 
 			usb1: gadget@fff78000 {
-				compatible = "atmel,at91sam9263-udc";
+				compatible = "atmel,at91rm9200-udc";
 				reg = <0xfff78000 0x4000>;
-				interrupts = <24 IRQ_TYPE_LEVEL_HIGH 2>;
-				clocks = <&udc_clk>, <&udpck>;
-				clock-names = "pclk", "hclk";
+				interrupts = <24 4 2>;
 				status = "disabled";
 			};
 
 			i2c0: i2c@fff88000 {
-				compatible = "atmel,at91sam9260-i2c";
+				compatible = "atmel,at91sam9263-i2c";
 				reg = <0xfff88000 0x100>;
-				interrupts = <13 IRQ_TYPE_LEVEL_HIGH 6>;
+				interrupts = <13 4 6>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&twi0_clk>;
 				status = "disabled";
 			};
 
 			mmc0: mmc@fff80000 {
 				compatible = "atmel,hsmci";
 				reg = <0xfff80000 0x600>;
-				interrupts = <10 IRQ_TYPE_LEVEL_HIGH 0>;
-				pinctrl-names = "default";
+				interrupts = <10 4 0>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&mci0_clk>;
-				clock-names = "mci_clk";
 				status = "disabled";
 			};
 
 			mmc1: mmc@fff84000 {
 				compatible = "atmel,hsmci";
 				reg = <0xfff84000 0x600>;
-				interrupts = <11 IRQ_TYPE_LEVEL_HIGH 0>;
-				pinctrl-names = "default";
+				interrupts = <11 4 0>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&mci1_clk>;
-				clock-names = "mci_clk";
 				status = "disabled";
 			};
 
 			watchdog@fffffd40 {
 				compatible = "atmel,at91sam9260-wdt";
 				reg = <0xfffffd40 0x10>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				atmel,watchdog-type = "hardware";
-				atmel,reset-type = "all";
-				atmel,dbg-halt;
 				status = "disabled";
 			};
 
@@ -913,11 +490,9 @@
 				#size-cells = <0>;
 				compatible = "atmel,at91rm9200-spi";
 				reg = <0xfffa4000 0x200>;
-				interrupts = <14 IRQ_TYPE_LEVEL_HIGH 3>;
+				interrupts = <14 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi0>;
-				clocks = <&spi0_clk>;
-				clock-names = "spi_clk";
 				status = "disabled";
 			};
 
@@ -926,66 +501,11 @@
 				#size-cells = <0>;
 				compatible = "atmel,at91rm9200-spi";
 				reg = <0xfffa8000 0x200>;
-				interrupts = <15 IRQ_TYPE_LEVEL_HIGH 3>;
+				interrupts = <15 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi1>;
-				clocks = <&spi1_clk>;
-				clock-names = "spi_clk";
 				status = "disabled";
 			};
-
-			pwm0: pwm@fffb8000 {
-				compatible = "atmel,at91sam9rl-pwm";
-				reg = <0xfffb8000 0x300>;
-				interrupts = <20 IRQ_TYPE_LEVEL_HIGH 4>;
-				#pwm-cells = <3>;
-				clocks = <&pwm_clk>;
-				clock-names = "pwm_clk";
-				status = "disabled";
-			};
-
-			can: can@fffac000 {
-				compatible = "atmel,at91sam9263-can";
-				reg = <0xfffac000 0x300>;
-				interrupts = <12 IRQ_TYPE_LEVEL_HIGH 3>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_can_rx_tx>;
-				clocks = <&can_clk>;
-				clock-names = "can_clk";
-			};
-
-			rtc@fffffd20 {
-				compatible = "atmel,at91sam9260-rtt";
-				reg = <0xfffffd20 0x10>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				clocks = <&slow_xtal>;
-				status = "disabled";
-			};
-
-			rtc@fffffd50 {
-				compatible = "atmel,at91sam9260-rtt";
-				reg = <0xfffffd50 0x10>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				clocks = <&slow_xtal>;
-				status = "disabled";
-			};
-
-			gpbr: syscon@fffffd60 {
-				compatible = "atmel,at91sam9260-gpbr", "syscon";
-				reg = <0xfffffd60 0x50>;
-				status = "disabled";
-			};
-		};
-
-		fb0: fb@0x00700000 {
-			compatible = "atmel,at91sam9263-lcdc";
-			reg = <0x00700000 0x1000>;
-			interrupts = <26 IRQ_TYPE_LEVEL_HIGH 3>;
-			pinctrl-names = "default";
-			pinctrl-0 = <&pinctrl_fb>;
-			clocks = <&lcd_clk>, <&lcd_clk>;
-			clock-names = "lcdc_clk", "hclk";
-			status = "disabled";
 		};
 
 		nand0: nand@40000000 {
@@ -999,8 +519,8 @@
 			atmel,nand-cmd-offset = <22>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_nand>;
-			gpios = <&pioA 22 GPIO_ACTIVE_HIGH
-				 &pioD 15 GPIO_ACTIVE_HIGH
+			gpios = <&pioA 22 0
+				 &pioD 15 0
 				 0
 				>;
 			status = "disabled";
@@ -1009,17 +529,15 @@
 		usb0: ohci@00a00000 {
 			compatible = "atmel,at91rm9200-ohci", "usb-ohci";
 			reg = <0x00a00000 0x100000>;
-			interrupts = <29 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&usb>, <&ohci_clk>, <&ohci_clk>, <&uhpck>;
-			clock-names = "usb_clk", "ohci_clk", "hclk", "uhpck";
+			interrupts = <29 4 2>;
 			status = "disabled";
 		};
 	};
 
 	i2c@0 {
 		compatible = "i2c-gpio";
-		gpios = <&pioB 4 GPIO_ACTIVE_HIGH /* sda */
-			 &pioB 5 GPIO_ACTIVE_HIGH /* scl */
+		gpios = <&pioB 4 0 /* sda */
+			 &pioB 5 0 /* scl */
 			>;
 		i2c-gpio,sda-open-drain;
 		i2c-gpio,scl-open-drain;
diff -urNp a/arch/arm/boot/dts/at91sam9263ek.dts b/arch/arm/boot/dts/at91sam9263ek.dts
--- a/arch/arm/boot/dts/at91sam9263ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9263ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2 only
  */
 /dts-v1/;
-#include "at91sam9263.dtsi"
+/include/ "at91sam9263.dtsi"
 
 / {
 	model = "Atmel at91sam9263ek";
@@ -29,14 +29,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <16367660>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <16367660>;
-		};
 	};
 
 	ahb {
@@ -59,7 +51,7 @@
 			};
 
 			usb1: gadget@fff78000 {
-				atmel,vbus-gpio = <&pioA 25 GPIO_ACTIVE_HIGH>;
+				atmel,vbus-gpio = <&pioA 25 0>;
 				status = "okay";
 			};
 
@@ -73,8 +65,8 @@
 				slot@0 {
 					reg = <0>;
 					bus-width = <4>;
-					cd-gpios = <&pioE 18 GPIO_ACTIVE_HIGH>;
-					wp-gpios = <&pioE 19 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioE 18 0>;
+					wp-gpios = <&pioE 19 0>;
 				};
 			};
 
@@ -82,8 +74,8 @@
 				mmc0 {
 					pinctrl_board_mmc0: mmc0-board {
 						atmel,pins =
-							<AT91_PIOE 18 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH 	/* PE18 gpio CD pin pull up and deglitch */
-							 AT91_PIOE 19 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP>;	/* PE19 gpio WP pin pull up */
+							<5 18 0x0 0x5	/* PE18 gpio CD pin pull up and deglitch */
+							 5 19 0x0 0x1>;	/* PE19 gpio WP pin pull up */
 					};
 				};
 			};
@@ -97,40 +89,6 @@
 					reg = <0>;
 				};
 			};
-
-			watchdog@fffffd40 {
-				status = "okay";
-			};
-		};
-
-		fb0: fb@0x00700000 {
-			display = <&display0>;
-			status = "okay";
-
-			display0: display {
-				bits-per-pixel = <16>;
-				atmel,lcdcon-backlight;
-				atmel,dmacon = <0x1>;
-				atmel,lcdcon2 = <0x80008002>;
-				atmel,guard-time = <1>;
-
-				display-timings {
-					native-mode = <&timing0>;
-					timing0: timing0 {
-						clock-frequency = <4965000>;
-						hactive = <240>;
-						vactive = <320>;
-						hback-porch = <1>;
-						hfront-porch = <33>;
-						vback-porch = <1>;
-						vfront-porch = <0>;
-						hsync-len = <5>;
-						vsync-len = <1>;
-						hsync-active = <1>;
-						vsync-active = <1>;
-					};
-				};
-			};
 		};
 
 		nand0: nand@40000000 {
@@ -183,8 +141,8 @@
 		usb0: ohci@00a00000 {
 			num-ports = <2>;
 			status = "okay";
-			atmel,vbus-gpio = <&pioA 24 GPIO_ACTIVE_HIGH
-					   &pioA 21 GPIO_ACTIVE_HIGH
+			atmel,vbus-gpio = <&pioA 24 0
+					   &pioA 21 0
 					  >;
 		};
 	};
@@ -194,13 +152,13 @@
 
 		d3 {
 			label = "d3";
-			gpios = <&pioB 7 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioB 7 0>;
 			linux,default-trigger = "heartbeat";
 		};
 
 		d2 {
 			label = "d2";
-			gpios = <&pioC 29 GPIO_ACTIVE_LOW>;
+			gpios = <&pioC 29 1>;
 			linux,default-trigger = "nand-disk";
 		};
 	};
@@ -210,14 +168,14 @@
 
 		left_click {
 			label = "left_click";
-			gpios = <&pioC 5 GPIO_ACTIVE_LOW>;
+			gpios = <&pioC 5 1>;
 			linux,code = <272>;
 			gpio-key,wakeup;
 		};
 
 		right_click {
 			label = "right_click";
-			gpios = <&pioC 4 GPIO_ACTIVE_LOW>;
+			gpios = <&pioC 4 1>;
 			linux,code = <273>;
 			gpio-key,wakeup;
 		};
diff -urNp a/arch/arm/boot/dts/at91sam9g15.dtsi b/arch/arm/boot/dts/at91sam9g15.dtsi
--- a/arch/arm/boot/dts/at91sam9g15.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g15.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2.
  */
 
-#include "at91sam9x5.dtsi"
+/include/ "at91sam9x5.dtsi"
 
 / {
 	model = "Atmel AT91SAM9G15 SoC";
diff -urNp a/arch/arm/boot/dts/at91sam9g15ek.dts b/arch/arm/boot/dts/at91sam9g15ek.dts
--- a/arch/arm/boot/dts/at91sam9g15ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g15ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,8 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "at91sam9g15.dtsi"
-#include "at91sam9x5ek.dtsi"
+/include/ "at91sam9g15.dtsi"
+/include/ "at91sam9x5ek.dtsi"
 
 / {
 	model = "Atmel AT91SAM9G15-EK";
diff -urNp a/arch/arm/boot/dts/at91sam9g20.dtsi b/arch/arm/boot/dts/at91sam9g20.dtsi
--- a/arch/arm/boot/dts/at91sam9g20.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g20.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2.
  */
 
-#include "at91sam9260.dtsi"
+/include/ "at91sam9260.dtsi"
 
 / {
 	model = "Atmel AT91SAM9G20 family SoC";
@@ -16,53 +16,15 @@
 		reg = <0x20000000 0x08000000>;
 	};
 
-	sram0: sram@002ff000 {
-		status = "disabled";
-	};
-
-	sram1: sram@002fc000 {
-		compatible = "mmio-sram";
-		reg = <0x002fc000 0x8000>;
-	};
-
 	ahb {
 		apb {
 			i2c0: i2c@fffac000 {
 				compatible = "atmel,at91sam9g20-i2c";
 			};
 
-			ssc0: ssc@fffbc000 {
-				compatible = "atmel,at91sam9rl-ssc";
-			};
-
 			adc0: adc@fffe0000 {
 				atmel,adc-startup-time = <40>;
 			};
-
-			pmc: pmc@fffffc00 {
-				plla: pllack {
-					atmel,clk-input-range = <2000000 32000000>;
-					atmel,pll-clk-output-ranges = <745000000 800000000 0 0>,
-								<695000000 750000000 1 0>,
-								<645000000 700000000 2 0>,
-								<595000000 650000000 3 0>,
-								<545000000 600000000 0 1>,
-								<495000000 550000000 1 1>,
-								<445000000 500000000 2 1>,
-								<400000000 450000000 3 1>;
-				};
-
-				pllb: pllbck {
-					compatible = "atmel,at91sam9g20-clk-pllb";
-					atmel,clk-input-range = <2000000 32000000>;
-					atmel,pll-clk-output-ranges = <30000000 100000000 0 0>;
-				};
-
-				mck: masterck {
-					atmel,clk-output-range = <0 133000000>;
-					atmel,clk-divisors = <1 2 4 6>;
-				};
-			};
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/at91sam9g20ek.dts b/arch/arm/boot/dts/at91sam9g20ek.dts
--- a/arch/arm/boot/dts/at91sam9g20ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g20ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2.
  */
 /dts-v1/;
-#include "at91sam9g20ek_common.dtsi"
+/include/ "at91sam9g20ek_common.dtsi"
 
 / {
 	model = "Atmel at91sam9g20ek";
@@ -17,13 +17,13 @@
 
 		ds1 {
 			label = "ds1";
-			gpios = <&pioA 9 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioA 9 0>;
 			linux,default-trigger = "heartbeat";
 		};
 
 		ds5 {
 			label = "ds5";
-			gpios = <&pioA 6 GPIO_ACTIVE_LOW>;
+			gpios = <&pioA 6 1>;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/at91sam9g20ek_2mmc.dts b/arch/arm/boot/dts/at91sam9g20ek_2mmc.dts
--- a/arch/arm/boot/dts/at91sam9g20ek_2mmc.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g20ek_2mmc.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2.
  */
 /dts-v1/;
-#include "at91sam9g20ek_common.dtsi"
+/include/ "at91sam9g20ek_common.dtsi"
 
 / {
 	model = "Atmel at91sam9g20ek 2 mmc";
@@ -23,7 +23,7 @@
 				slot@0 {
 					reg = <0>;
 					bus-width = <4>;
-					cd-gpios = <&pioC 2 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioC 2 0>;
 				};
 			};
 
@@ -31,7 +31,7 @@
 				mmc0_slot0 {
 					pinctrl_board_mmc0_slot0: mmc0_slot0-board {
 						atmel,pins =
-							<AT91_PIOC 2 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>;	/* PC2 gpio CD pin pull up and deglitch */
+							<2 2 0x0 0x5>;	/* PC2 gpio CD pin pull up and deglitch */
 					};
 				};
 			};
@@ -43,13 +43,13 @@
 
 		ds1 {
 			label = "ds1";
-			gpios = <&pioB 9 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioB 9 0>;
 			linux,default-trigger = "heartbeat";
 		};
 
 		ds5 {
 			label = "ds5";
-			gpios = <&pioB 8 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 8 1>;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/at91sam9g20ek_common.dtsi b/arch/arm/boot/dts/at91sam9g20ek_common.dtsi
--- a/arch/arm/boot/dts/at91sam9g20ek_common.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g20ek_common.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -5,7 +5,7 @@
  *
  * Licensed under GPLv2.
  */
-#include "at91sam9g20.dtsi"
+/include/ "at91sam9g20.dtsi"
 
 / {
 
@@ -26,14 +26,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <18432000>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <18432000>;
-		};
 	};
 
 	ahb {
@@ -42,17 +34,10 @@
 				board {
 					pinctrl_pck0_as_mck: pck0_as_mck {
 						atmel,pins =
-							<AT91_PIOC 1 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PC1 periph B */
+							<2 1 0x2 0x0>;	/* PC1 periph B */
 					};
 
 				};
-
-				mmc0_slot1 {
-					pinctrl_board_mmc0_slot1: mmc0_slot1-board {
-						atmel,pins =
-							<AT91_PIOC 9 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>;	/* PC9 gpio CD pin pull up and deglitch */
-					};
-				};
 			};
 
 			dbgu: serial@fffff200 {
@@ -80,7 +65,7 @@
 			};
 
 			usb1: gadget@fffa4000 {
-				atmel,vbus-gpio = <&pioC 5 GPIO_ACTIVE_HIGH>;
+				atmel,vbus-gpio = <&pioC 5 0>;
 				status = "okay";
 			};
 
@@ -94,7 +79,16 @@
 				slot@1 {
 					reg = <1>;
 					bus-width = <4>;
-					cd-gpios = <&pioC 9 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioC 9 0>;
+				};
+			};
+
+			pinctrl@fffff400 {
+				mmc0_slot1 {
+					pinctrl_board_mmc0_slot1: mmc0_slot1-board {
+						atmel,pins =
+							<2 9 0x0 0x5>;	/* PC9 gpio CD pin pull up and deglitch */
+					};
 				};
 			};
 
@@ -104,6 +98,7 @@
 			};
 
 			spi0: spi@fffc8000 {
+				status = "okay";
 				cs-gpios = <0>, <&pioC 11 0>, <0>, <0>;
 				mtd_dataflash@0 {
 					compatible = "atmel,at45", "atmel,dataflash";
@@ -111,24 +106,6 @@
 					reg = <1>;
 				};
 			};
-
-			shdwc@fffffd10 {
-				atmel,wakeup-counter = <10>;
-				atmel,wakeup-rtt-timer;
-			};
-
-			rtc@fffffd20 {
-				atmel,rtt-rtc-time-reg = <&gpbr 0x0>;
-				status = "okay";
-			};
-
-			watchdog@fffffd40 {
-				status = "okay";
-			};
-
-			gpbr: syscon@fffffd50 {
-				status = "okay";
-			};
 		};
 
 		nand0: nand@40000000 {
@@ -203,14 +180,14 @@
 
 		btn3 {
 			label = "Button 3";
-			gpios = <&pioA 30 GPIO_ACTIVE_LOW>;
+			gpios = <&pioA 30 1>;
 			linux,code = <0x103>;
 			gpio-key,wakeup;
 		};
 
 		btn4 {
 			label = "Button 4";
-			gpios = <&pioA 31 GPIO_ACTIVE_LOW>;
+			gpios = <&pioA 31 1>;
 			linux,code = <0x104>;
 			gpio-key,wakeup;
 		};
diff -urNp a/arch/arm/boot/dts/at91sam9g25.dtsi b/arch/arm/boot/dts/at91sam9g25.dtsi
--- a/arch/arm/boot/dts/at91sam9g25.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g25.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,9 +6,7 @@
  * Licensed under GPLv2.
  */
 
-#include "at91sam9x5.dtsi"
-#include "at91sam9x5_usart3.dtsi"
-#include "at91sam9x5_macb0.dtsi"
+/include/ "at91sam9x5.dtsi"
 
 / {
 	model = "Atmel AT91SAM9G25 SoC";
diff -urNp a/arch/arm/boot/dts/at91sam9g25ek.dts b/arch/arm/boot/dts/at91sam9g25ek.dts
--- a/arch/arm/boot/dts/at91sam9g25ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g25ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,8 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "at91sam9g25.dtsi"
-#include "at91sam9x5ek.dtsi"
+/include/ "at91sam9g25.dtsi"
+/include/ "at91sam9x5ek.dtsi"
 
 / {
 	model = "Atmel AT91SAM9G25-EK";
diff -urNp a/arch/arm/boot/dts/at91sam9g35.dtsi b/arch/arm/boot/dts/at91sam9g35.dtsi
--- a/arch/arm/boot/dts/at91sam9g35.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g35.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,8 +6,7 @@
  * Licensed under GPLv2.
  */
 
-#include "at91sam9x5.dtsi"
-#include "at91sam9x5_macb0.dtsi"
+/include/ "at91sam9x5.dtsi"
 
 / {
 	model = "Atmel AT91SAM9G35 SoC";
diff -urNp a/arch/arm/boot/dts/at91sam9g35ek.dts b/arch/arm/boot/dts/at91sam9g35ek.dts
--- a/arch/arm/boot/dts/at91sam9g35ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g35ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,8 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "at91sam9g35.dtsi"
-#include "at91sam9x5ek.dtsi"
+/include/ "at91sam9g35.dtsi"
+/include/ "at91sam9x5ek.dtsi"
 
 / {
 	model = "Atmel AT91SAM9G35-EK";
diff -urNp a/arch/arm/boot/dts/at91sam9g45.dtsi b/arch/arm/boot/dts/at91sam9g45.dtsi
--- a/arch/arm/boot/dts/at91sam9g45.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9g45.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -9,12 +9,7 @@
  * Licensed under GPLv2 or later.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/dma/at91.h>
-#include <dt-bindings/pinctrl/at91.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/clock/at91.h>
+/include/ "skeleton.dtsi"
 
 / {
 	model = "Atmel AT91SAM9G45 family SoC";
@@ -38,7 +33,6 @@
 		i2c1 = &i2c1;
 		ssc0 = &ssc0;
 		ssc1 = &ssc1;
-		pwm0 = &pwm0;
 	};
 	cpus {
 		#address-cells = <0>;
@@ -54,31 +48,6 @@
 		reg = <0x70000000 0x10000000>;
 	};
 
-	clocks {
-		slow_xtal: slow_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		main_xtal: main_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		adc_op_clk: adc_op_clk{
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <300000>;
-		};
-	};
-
-	sram: sram@00300000 {
-		compatible = "mmio-sram";
-		reg = <0x00300000 0x10000>;
-	};
-
 	ahb {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -101,287 +70,13 @@
 
 			ramc0: ramc@ffffe400 {
 				compatible = "atmel,at91sam9g45-ddramc";
-				reg = <0xffffe400 0x200>;
-				clocks = <&ddrck>;
-				clock-names = "ddrck";
-			};
-
-			ramc1: ramc@ffffe600 {
-				compatible = "atmel,at91sam9g45-ddramc";
-				reg = <0xffffe600 0x200>;
-				clocks = <&ddrck>;
-				clock-names = "ddrck";
+				reg = <0xffffe400 0x200
+				       0xffffe600 0x200>;
 			};
 
 			pmc: pmc@fffffc00 {
-				compatible = "atmel,at91sam9g45-pmc";
+				compatible = "atmel,at91rm9200-pmc";
 				reg = <0xfffffc00 0x100>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				interrupt-controller;
-				#address-cells = <1>;
-				#size-cells = <0>;
-				#interrupt-cells = <1>;
-
-				main_osc: main_osc {
-					compatible = "atmel,at91rm9200-clk-main-osc";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MOSCS>;
-					clocks = <&main_xtal>;
-				};
-
-				main: mainck {
-					compatible = "atmel,at91rm9200-clk-main";
-					#clock-cells = <0>;
-					clocks = <&main_osc>;
-				};
-
-				plla: pllack {
-					compatible = "atmel,at91rm9200-clk-pll";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKA>;
-					clocks = <&main>;
-					reg = <0>;
-					atmel,clk-input-range = <2000000 32000000>;
-					#atmel,pll-clk-output-range-cells = <4>;
-					atmel,pll-clk-output-ranges = <745000000 800000000 0 0
-								       695000000 750000000 1 0
-								       645000000 700000000 2 0
-								       595000000 650000000 3 0
-								       545000000 600000000 0 1
-								       495000000 555000000 1 1
-								       445000000 500000000 2 1
-								       400000000 450000000 3 1>;
-				};
-
-				plladiv: plladivck {
-					compatible = "atmel,at91sam9x5-clk-plldiv";
-					#clock-cells = <0>;
-					clocks = <&plla>;
-				};
-
-				utmi: utmick {
-					compatible = "atmel,at91sam9x5-clk-utmi";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKU>;
-					clocks = <&main>;
-				};
-
-				mck: masterck {
-					compatible = "atmel,at91rm9200-clk-master";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MCKRDY>;
-					clocks = <&clk32k>, <&main>, <&plladiv>, <&utmi>;
-					atmel,clk-output-range = <0 133333333>;
-					atmel,clk-divisors = <1 2 4 3>;
-				};
-
-				usb: usbck {
-					compatible = "atmel,at91sam9x5-clk-usb";
-					#clock-cells = <0>;
-					clocks = <&plladiv>, <&utmi>;
-				};
-
-				prog: progck {
-					compatible = "atmel,at91sam9g45-clk-programmable";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					interrupt-parent = <&pmc>;
-					clocks = <&clk32k>, <&main>, <&plladiv>, <&utmi>, <&mck>;
-
-					prog0: prog0 {
-						#clock-cells = <0>;
-						reg = <0>;
-						interrupts = <AT91_PMC_PCKRDY(0)>;
-					};
-
-					prog1: prog1 {
-						#clock-cells = <0>;
-						reg = <1>;
-						interrupts = <AT91_PMC_PCKRDY(1)>;
-					};
-				};
-
-				systemck {
-					compatible = "atmel,at91rm9200-clk-system";
-					#address-cells = <1>;
-					#size-cells = <0>;
-
-					ddrck: ddrck {
-						#clock-cells = <0>;
-						reg = <2>;
-						clocks = <&mck>;
-					};
-
-					uhpck: uhpck {
-						#clock-cells = <0>;
-						reg = <6>;
-						clocks = <&usb>;
-					};
-
-					pck0: pck0 {
-						#clock-cells = <0>;
-						reg = <8>;
-						clocks = <&prog0>;
-					};
-
-					pck1: pck1 {
-						#clock-cells = <0>;
-						reg = <9>;
-						clocks = <&prog1>;
-					};
-				};
-
-				periphck {
-					compatible = "atmel,at91rm9200-clk-peripheral";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					clocks = <&mck>;
-
-					pioA_clk: pioA_clk {
-						#clock-cells = <0>;
-						reg = <2>;
-					};
-
-					pioB_clk: pioB_clk {
-						#clock-cells = <0>;
-						reg = <3>;
-					};
-
-					pioC_clk: pioC_clk {
-						#clock-cells = <0>;
-						reg = <4>;
-					};
-
-					pioDE_clk: pioDE_clk {
-						#clock-cells = <0>;
-						reg = <5>;
-					};
-
-					trng_clk: trng_clk {
-						#clock-cells = <0>;
-						reg = <6>;
-					};
-
-					usart0_clk: usart0_clk {
-						#clock-cells = <0>;
-						reg = <7>;
-					};
-
-					usart1_clk: usart1_clk {
-						#clock-cells = <0>;
-						reg = <8>;
-					};
-
-					usart2_clk: usart2_clk {
-						#clock-cells = <0>;
-						reg = <9>;
-					};
-
-					usart3_clk: usart3_clk {
-						#clock-cells = <0>;
-						reg = <10>;
-					};
-
-					mci0_clk: mci0_clk {
-						#clock-cells = <0>;
-						reg = <11>;
-					};
-
-					twi0_clk: twi0_clk {
-						#clock-cells = <0>;
-						reg = <12>;
-					};
-
-					twi1_clk: twi1_clk {
-						#clock-cells = <0>;
-						reg = <13>;
-					};
-
-					spi0_clk: spi0_clk {
-						#clock-cells = <0>;
-						reg = <14>;
-					};
-
-					spi1_clk: spi1_clk {
-						#clock-cells = <0>;
-						reg = <15>;
-					};
-
-					ssc0_clk: ssc0_clk {
-						#clock-cells = <0>;
-						reg = <16>;
-					};
-
-					ssc1_clk: ssc1_clk {
-						#clock-cells = <0>;
-						reg = <17>;
-					};
-
-					tcb0_clk: tcb0_clk {
-						#clock-cells = <0>;
-						reg = <18>;
-					};
-
-					pwm_clk: pwm_clk {
-						#clock-cells = <0>;
-						reg = <19>;
-					};
-
-					adc_clk: adc_clk {
-						#clock-cells = <0>;
-						reg = <20>;
-					};
-
-					dma0_clk: dma0_clk {
-						#clock-cells = <0>;
-						reg = <21>;
-					};
-
-					uhphs_clk: uhphs_clk {
-						#clock-cells = <0>;
-						reg = <22>;
-					};
-
-					lcd_clk: lcd_clk {
-						#clock-cells = <0>;
-						reg = <23>;
-					};
-
-					ac97_clk: ac97_clk {
-						#clock-cells = <0>;
-						reg = <24>;
-					};
-
-					macb0_clk: macb0_clk {
-						#clock-cells = <0>;
-						reg = <25>;
-					};
-
-					isi_clk: isi_clk {
-						#clock-cells = <0>;
-						reg = <26>;
-					};
-
-					udphs_clk: udphs_clk {
-						#clock-cells = <0>;
-						reg = <27>;
-					};
-
-					aestdessha_clk: aestdessha_clk {
-						#clock-cells = <0>;
-						reg = <28>;
-					};
-
-					mci1_clk: mci1_clk {
-						#clock-cells = <0>;
-						reg = <29>;
-					};
-
-					vdec_clk: vdec_clk {
-						#clock-cells = <0>;
-						reg = <30>;
-					};
-				};
 			};
 
 			rstc@fffffd00 {
@@ -392,8 +87,7 @@
 			pit: timer@fffffd30 {
 				compatible = "atmel,at91sam9260-pit";
 				reg = <0xfffffd30 0xf>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				clocks = <&mck>;
+				interrupts = <1 4 7>;
 			};
 
 
@@ -405,26 +99,20 @@
 			tcb0: timer@fff7c000 {
 				compatible = "atmel,at91rm9200-tcb";
 				reg = <0xfff7c000 0x100>;
-				interrupts = <18 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tcb0_clk>, <&tcb0_clk>, <&tcb0_clk>;
-				clock-names = "t0_clk", "t1_clk", "t2_clk";
+				interrupts = <18 4 0>;
 			};
 
 			tcb1: timer@fffd4000 {
 				compatible = "atmel,at91rm9200-tcb";
 				reg = <0xfffd4000 0x100>;
-				interrupts = <18 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tcb0_clk>, <&tcb0_clk>, <&tcb0_clk>;
-				clock-names = "t0_clk", "t1_clk", "t2_clk";
+				interrupts = <18 4 0>;
 			};
 
 			dma: dma-controller@ffffec00 {
 				compatible = "atmel,at91sam9g45-dma";
 				reg = <0xffffec00 0x200>;
-				interrupts = <21 IRQ_TYPE_LEVEL_HIGH 0>;
+				interrupts = <21 4 0>;
 				#dma-cells = <2>;
-				clocks = <&dma0_clk>;
-				clock-names = "dma_clk";
 			};
 
 			pinctrl@fffff200 {
@@ -443,679 +131,434 @@
 				      >;
 
 				/* shared pinctrl settings */
-				adc0 {
-					pinctrl_adc0_adtrg: adc0_adtrg {
-						atmel,pins = <AT91_PIOD 28 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-					pinctrl_adc0_ad0: adc0_ad0 {
-						atmel,pins = <AT91_PIOD 20 AT91_PERIPH_GPIO AT91_PINCTRL_NONE>;
-					};
-					pinctrl_adc0_ad1: adc0_ad1 {
-						atmel,pins = <AT91_PIOD 21 AT91_PERIPH_GPIO AT91_PINCTRL_NONE>;
-					};
-					pinctrl_adc0_ad2: adc0_ad2 {
-						atmel,pins = <AT91_PIOD 22 AT91_PERIPH_GPIO AT91_PINCTRL_NONE>;
-					};
-					pinctrl_adc0_ad3: adc0_ad3 {
-						atmel,pins = <AT91_PIOD 23 AT91_PERIPH_GPIO AT91_PINCTRL_NONE>;
-					};
-					pinctrl_adc0_ad4: adc0_ad4 {
-						atmel,pins = <AT91_PIOD 24 AT91_PERIPH_GPIO AT91_PINCTRL_NONE>;
-					};
-					pinctrl_adc0_ad5: adc0_ad5 {
-						atmel,pins = <AT91_PIOD 25 AT91_PERIPH_GPIO AT91_PINCTRL_NONE>;
-					};
-					pinctrl_adc0_ad6: adc0_ad6 {
-						atmel,pins = <AT91_PIOD 26 AT91_PERIPH_GPIO AT91_PINCTRL_NONE>;
-					};
-					pinctrl_adc0_ad7: adc0_ad7 {
-						atmel,pins = <AT91_PIOD 27 AT91_PERIPH_GPIO AT91_PINCTRL_NONE>;
-					};
-				};
-
 				dbgu {
 					pinctrl_dbgu: dbgu-0 {
 						atmel,pins =
-							<AT91_PIOB 12 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB12 periph A */
-							 AT91_PIOB 13 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB13 periph A */
-					};
-				};
-
-				i2c0 {
-					pinctrl_i2c0: i2c0-0 {
-						atmel,pins =
-							<AT91_PIOA 21 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA21 periph A TWCK0 */
-							 AT91_PIOA 20 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA20 periph A TWD0 */
-					};
-				};
-
-				i2c1 {
-					pinctrl_i2c1: i2c1-0 {
-						atmel,pins =
-							<AT91_PIOB 11 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB11 periph A TWCK1 */
-							 AT91_PIOB 10 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB10 periph A TWD1 */
-					};
-				};
-
-				isi {
-					pinctrl_isi: isi-0 {
-						atmel,pins = <AT91_PIOB 8 AT91_PERIPH_B AT91_PINCTRL_NONE /* D8 */
-							      AT91_PIOB 9 AT91_PERIPH_B AT91_PINCTRL_NONE /* D9 */
-							      AT91_PIOB 10 AT91_PERIPH_B AT91_PINCTRL_NONE /* D10 */
-							      AT91_PIOB 11 AT91_PERIPH_B AT91_PINCTRL_NONE /* D11 */
-							      AT91_PIOB 20 AT91_PERIPH_A AT91_PINCTRL_NONE /* D0 */
-							      AT91_PIOB 21 AT91_PERIPH_A AT91_PINCTRL_NONE /* D1 */
-							      AT91_PIOB 22 AT91_PERIPH_A AT91_PINCTRL_NONE /* D2 */
-							      AT91_PIOB 23 AT91_PERIPH_A AT91_PINCTRL_NONE /* D3 */
-							      AT91_PIOB 24 AT91_PERIPH_A AT91_PINCTRL_NONE /* D4 */
-							      AT91_PIOB 25 AT91_PERIPH_A AT91_PINCTRL_NONE /* D5 */
-							      AT91_PIOB 26 AT91_PERIPH_A AT91_PINCTRL_NONE /* D6 */
-							      AT91_PIOB 27 AT91_PERIPH_A AT91_PINCTRL_NONE /* D7 */
-							      AT91_PIOB 28 AT91_PERIPH_A AT91_PINCTRL_NONE /* PCK */
-							      AT91_PIOB 29 AT91_PERIPH_A AT91_PINCTRL_NONE /* VSYNC */
-							      AT91_PIOB 30 AT91_PERIPH_A AT91_PINCTRL_NONE /* HSYNC */
-							      AT91_PIOB 31 AT91_PERIPH_A AT91_PINCTRL_NONE /* MCK */>;
+							<1 12 0x1 0x0	/* PB12 periph A */
+							 1 13 0x1 0x0>;	/* PB13 periph A */
 					};
 				};
 
 				usart0 {
 					pinctrl_usart0: usart0-0 {
 						atmel,pins =
-							<AT91_PIOB 19 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB19 periph A with pullup */
-							 AT91_PIOB 18 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB18 periph A */
+							<1 19 0x1 0x1	/* PB19 periph A with pullup */
+							 1 18 0x1 0x0>;	/* PB18 periph A */
 					};
 
 					pinctrl_usart0_rts: usart0_rts-0 {
 						atmel,pins =
-							<AT91_PIOB 17 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB17 periph B */
+							<1 17 0x2 0x0>;	/* PB17 periph B */
 					};
 
 					pinctrl_usart0_cts: usart0_cts-0 {
 						atmel,pins =
-							<AT91_PIOB 15 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB15 periph B */
+							<1 15 0x2 0x0>;	/* PB15 periph B */
 					};
 				};
 
 				uart1 {
 					pinctrl_usart1: usart1-0 {
 						atmel,pins =
-							<AT91_PIOB 4 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB4 periph A with pullup */
-							 AT91_PIOB 5 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB5 periph A */
+							<1 4 0x1 0x1	/* PB4 periph A with pullup */
+							 1 5 0x1 0x0>;	/* PB5 periph A */
 					};
 
 					pinctrl_usart1_rts: usart1_rts-0 {
 						atmel,pins =
-							<AT91_PIOD 16 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD16 periph A */
+							<3 16 0x1 0x0>;	/* PD16 periph A */
 					};
 
 					pinctrl_usart1_cts: usart1_cts-0 {
 						atmel,pins =
-							<AT91_PIOD 17 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD17 periph A */
+							<3 17 0x1 0x0>;	/* PD17 periph A */
 					};
 				};
 
 				usart2 {
 					pinctrl_usart2: usart2-0 {
 						atmel,pins =
-							<AT91_PIOB 6 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB6 periph A with pullup */
-							 AT91_PIOB 7 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB7 periph A */
+							<1 6 0x1 0x1	/* PB6 periph A with pullup */
+							 1 7 0x1 0x0>;	/* PB7 periph A */
 					};
 
 					pinctrl_usart2_rts: usart2_rts-0 {
 						atmel,pins =
-							<AT91_PIOC 9 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PC9 periph B */
+							<2 9 0x2 0x0>;	/* PC9 periph B */
 					};
 
 					pinctrl_usart2_cts: usart2_cts-0 {
 						atmel,pins =
-							<AT91_PIOC 11 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PC11 periph B */
+							<2 11 0x2 0x0>;	/* PC11 periph B */
 					};
 				};
 
 				usart3 {
 					pinctrl_usart3: usart3-0 {
 						atmel,pins =
-							<AT91_PIOB 8 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB9 periph A with pullup */
-							 AT91_PIOB 9 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB8 periph A */
+							<1 8 0x1 0x1	/* PB9 periph A with pullup */
+							 1 9 0x1 0x0>;	/* PB8 periph A */
 					};
 
 					pinctrl_usart3_rts: usart3_rts-0 {
 						atmel,pins =
-							<AT91_PIOA 23 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA23 periph B */
+							<0 23 0x2 0x0>;	/* PA23 periph B */
 					};
 
 					pinctrl_usart3_cts: usart3_cts-0 {
 						atmel,pins =
-							<AT91_PIOA 24 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA24 periph B */
+							<0 24 0x2 0x0>;	/* PA24 periph B */
 					};
 				};
 
 				nand {
 					pinctrl_nand: nand-0 {
 						atmel,pins =
-							<AT91_PIOC 8 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP	/* PC8 gpio RDY pin pull_up*/
-							 AT91_PIOC 14 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP>;	/* PC14 gpio enable pin pull_up */
+							<2 8 0x0 0x1	/* PC8 gpio RDY pin pull_up*/
+							 2 14 0x0 0x1>;	/* PC14 gpio enable pin pull_up */
 					};
 				};
 
 				macb {
 					pinctrl_macb_rmii: macb_rmii-0 {
 						atmel,pins =
-							<AT91_PIOA 10 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA10 periph A */
-							 AT91_PIOA 11 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA11 periph A */
-							 AT91_PIOA 12 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA12 periph A */
-							 AT91_PIOA 13 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA13 periph A */
-							 AT91_PIOA 14 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA14 periph A */
-							 AT91_PIOA 15 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA15 periph A */
-							 AT91_PIOA 16 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA16 periph A */
-							 AT91_PIOA 17 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA17 periph A */
-							 AT91_PIOA 18 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA18 periph A */
-							 AT91_PIOA 19 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA19 periph A */
+							<0 10 0x1 0x0	/* PA10 periph A */
+							 0 11 0x1 0x0	/* PA11 periph A */
+							 0 12 0x1 0x0	/* PA12 periph A */
+							 0 13 0x1 0x0	/* PA13 periph A */
+							 0 14 0x1 0x0	/* PA14 periph A */
+							 0 15 0x1 0x0	/* PA15 periph A */
+							 0 16 0x1 0x0	/* PA16 periph A */
+							 0 17 0x1 0x0	/* PA17 periph A */
+							 0 18 0x1 0x0	/* PA18 periph A */
+							 0 19 0x1 0x0>;	/* PA19 periph A */
 					};
 
 					pinctrl_macb_rmii_mii: macb_rmii_mii-0 {
 						atmel,pins =
-							<AT91_PIOA 6 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA6 periph B */
-							 AT91_PIOA 7 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA7 periph B */
-							 AT91_PIOA 8 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA8 periph B */
-							 AT91_PIOA 9 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA9 periph B */
-							 AT91_PIOA 27 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA27 periph B */
-							 AT91_PIOA 28 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA28 periph B */
-							 AT91_PIOA 29 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA29 periph B */
-							 AT91_PIOA 30 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA30 periph B */
+							<0 6 0x2 0x0	/* PA6 periph B */
+							 0 7 0x2 0x0	/* PA7 periph B */
+							 0 8 0x2 0x0	/* PA8 periph B */
+							 0 9 0x2 0x0	/* PA9 periph B */
+							 0 27 0x2 0x0	/* PA27 periph B */
+							 0 28 0x2 0x0	/* PA28 periph B */
+							 0 29 0x2 0x0	/* PA29 periph B */
+							 0 30 0x2 0x0>;	/* PA30 periph B */
 					};
 				};
 
 				mmc0 {
 					pinctrl_mmc0_slot0_clk_cmd_dat0: mmc0_slot0_clk_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 0 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA0 periph A */
-							 AT91_PIOA 1 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA1 periph A with pullup */
-							 AT91_PIOA 2 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA2 periph A with pullup */
+							<0 0 0x1 0x0	/* PA0 periph A */
+							 0 1 0x1 0x1	/* PA1 periph A with pullup */
+							 0 2 0x1 0x1>;	/* PA2 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot0_dat1_3: mmc0_slot0_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 3 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA3 periph A with pullup */
-							 AT91_PIOA 4 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA4 periph A with pullup */
-							 AT91_PIOA 5 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA5 periph A with pullup */
+							<0 3 0x1 0x1	/* PA3 periph A with pullup */
+							 0 4 0x1 0x1	/* PA4 periph A with pullup */
+							 0 5 0x1 0x1>;	/* PA5 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot0_dat4_7: mmc0_slot0_dat4_7-0 {
 						atmel,pins =
-							<AT91_PIOA 6 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA6 periph A with pullup */
-							 AT91_PIOA 7 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA7 periph A with pullup */
-							 AT91_PIOA 8 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA8 periph A with pullup */
-							 AT91_PIOA 9 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA9 periph A with pullup */
+							<0 6 0x1 0x1	/* PA6 periph A with pullup */
+							 0 7 0x1 0x1	/* PA7 periph A with pullup */
+							 0 8 0x1 0x1	/* PA8 periph A with pullup */
+							 0 9 0x1 0x1>;	/* PA9 periph A with pullup */
 					};
 				};
 
 				mmc1 {
 					pinctrl_mmc1_slot0_clk_cmd_dat0: mmc1_slot0_clk_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 31 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA31 periph A */
-							 AT91_PIOA 22 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA22 periph A with pullup */
-							 AT91_PIOA 23 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA23 periph A with pullup */
+							<0 31 0x1 0x0	/* PA31 periph A */
+							 0 22 0x1 0x1	/* PA22 periph A with pullup */
+							 0 23 0x1 0x1>;	/* PA23 periph A with pullup */
 					};
 
 					pinctrl_mmc1_slot0_dat1_3: mmc1_slot0_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 24 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA24 periph A with pullup */
-							 AT91_PIOA 25 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA25 periph A with pullup */
-							 AT91_PIOA 26 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA26 periph A with pullup */
+							<0 24 0x1 0x1	/* PA24 periph A with pullup */
+							 0 25 0x1 0x1	/* PA25 periph A with pullup */
+							 0 26 0x1 0x1>;	/* PA26 periph A with pullup */
 					};
 
 					pinctrl_mmc1_slot0_dat4_7: mmc1_slot0_dat4_7-0 {
 						atmel,pins =
-							<AT91_PIOA 27 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA27 periph A with pullup */
-							 AT91_PIOA 28 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA28 periph A with pullup */
-							 AT91_PIOA 29 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA29 periph A with pullup */
-							 AT91_PIOA 20 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA30 periph A with pullup */
+							<0 27 0x1 0x1	/* PA27 periph A with pullup */
+							 0 28 0x1 0x1	/* PA28 periph A with pullup */
+							 0 29 0x1 0x1	/* PA29 periph A with pullup */
+							 0 20 0x1 0x1>;	/* PA30 periph A with pullup */
 					};
 				};
 
 				ssc0 {
 					pinctrl_ssc0_tx: ssc0_tx-0 {
 						atmel,pins =
-							<AT91_PIOD 0 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD0 periph A */
-							 AT91_PIOD 1 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD1 periph A */
-							 AT91_PIOD 2 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD2 periph A */
+							<3 0 0x1 0x0	/* PD0 periph A */
+							 3 1 0x1 0x0	/* PD1 periph A */
+							 3 2 0x1 0x0>;	/* PD2 periph A */
 					};
 
 					pinctrl_ssc0_rx: ssc0_rx-0 {
 						atmel,pins =
-							<AT91_PIOD 3 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD3 periph A */
-							 AT91_PIOD 4 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD4 periph A */
-							 AT91_PIOD 5 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD5 periph A */
+							<3 3 0x1 0x0	/* PD3 periph A */
+							 3 4 0x1 0x0	/* PD4 periph A */
+							 3 5 0x1 0x0>;	/* PD5 periph A */
 					};
 				};
 
 				ssc1 {
 					pinctrl_ssc1_tx: ssc1_tx-0 {
 						atmel,pins =
-							<AT91_PIOD 10 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD10 periph A */
-							 AT91_PIOD 11 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD11 periph A */
-							 AT91_PIOD 12 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD12 periph A */
+							<3 10 0x1 0x0	/* PD10 periph A */
+							 3 11 0x1 0x0	/* PD11 periph A */
+							 3 12 0x1 0x0>;	/* PD12 periph A */
 					};
 
 					pinctrl_ssc1_rx: ssc1_rx-0 {
 						atmel,pins =
-							<AT91_PIOD 13 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD13 periph A */
-							 AT91_PIOD 14 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD14 periph A */
-							 AT91_PIOD 15 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD15 periph A */
+							<3 13 0x1 0x0	/* PD13 periph A */
+							 3 14 0x1 0x0	/* PD14 periph A */
+							 3 15 0x1 0x0>;	/* PD15 periph A */
 					};
 				};
 
 				spi0 {
 					pinctrl_spi0: spi0-0 {
 						atmel,pins =
-							<AT91_PIOB 0 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB0 periph A SPI0_MISO pin */
-							 AT91_PIOB 1 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB1 periph A SPI0_MOSI pin */
-							 AT91_PIOB 2 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB2 periph A SPI0_SPCK pin */
+							<1 0 0x1 0x0	/* PB0 periph A SPI0_MISO pin */
+							 1 1 0x1 0x0	/* PB1 periph A SPI0_MOSI pin */
+							 1 2 0x1 0x0>;	/* PB2 periph A SPI0_SPCK pin */
 					};
 				};
 
 				spi1 {
 					pinctrl_spi1: spi1-0 {
 						atmel,pins =
-							<AT91_PIOB 14 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB14 periph A SPI1_MISO pin */
-							 AT91_PIOB 15 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB15 periph A SPI1_MOSI pin */
-							 AT91_PIOB 16 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB16 periph A SPI1_SPCK pin */
-					};
-				};
-
-				tcb0 {
-					pinctrl_tcb0_tclk0: tcb0_tclk0-0 {
-						atmel,pins = <AT91_PIOD 23 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk1: tcb0_tclk1-0 {
-						atmel,pins = <AT91_PIOD 29 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk2: tcb0_tclk2-0 {
-						atmel,pins = <AT91_PIOC 10 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa0: tcb0_tioa0-0 {
-						atmel,pins = <AT91_PIOD 20 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa1: tcb0_tioa1-0 {
-						atmel,pins = <AT91_PIOD 21 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa2: tcb0_tioa2-0 {
-						atmel,pins = <AT91_PIOD 22 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob0: tcb0_tiob0-0 {
-						atmel,pins = <AT91_PIOD 30 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob1: tcb0_tiob1-0 {
-						atmel,pins = <AT91_PIOD 31 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob2: tcb0_tiob2-0 {
-						atmel,pins = <AT91_PIOA 26 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-				};
-
-				tcb1 {
-					pinctrl_tcb1_tclk0: tcb1_tclk0-0 {
-						atmel,pins = <AT91_PIOA 0 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tclk1: tcb1_tclk1-0 {
-						atmel,pins = <AT91_PIOA 3 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tclk2: tcb1_tclk2-0 {
-						atmel,pins = <AT91_PIOD 9 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa0: tcb1_tioa0-0 {
-						atmel,pins = <AT91_PIOA 1 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa1: tcb1_tioa1-0 {
-						atmel,pins = <AT91_PIOA 4 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa2: tcb1_tioa2-0 {
-						atmel,pins = <AT91_PIOD 7 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob0: tcb1_tiob0-0 {
-						atmel,pins = <AT91_PIOA 2 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob1: tcb1_tiob1-0 {
-						atmel,pins = <AT91_PIOA 5 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob2: tcb1_tiob2-0 {
-						atmel,pins = <AT91_PIOD 8 AT91_PERIPH_B AT91_PINCTRL_NONE>;
-					};
-				};
-
-				fb {
-					pinctrl_fb: fb-0 {
-						atmel,pins =
-							<AT91_PIOE 0 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE0 periph A */
-							 AT91_PIOE 2 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE2 periph A */
-							 AT91_PIOE 3 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE3 periph A */
-							 AT91_PIOE 4 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE4 periph A */
-							 AT91_PIOE 5 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE5 periph A */
-							 AT91_PIOE 6 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE6 periph A */
-							 AT91_PIOE 7 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE7 periph A */
-							 AT91_PIOE 8 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE8 periph A */
-							 AT91_PIOE 9 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE9 periph A */
-							 AT91_PIOE 10 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE10 periph A */
-							 AT91_PIOE 11 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE11 periph A */
-							 AT91_PIOE 12 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE12 periph A */
-							 AT91_PIOE 13 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE13 periph A */
-							 AT91_PIOE 14 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE14 periph A */
-							 AT91_PIOE 15 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE15 periph A */
-							 AT91_PIOE 16 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE16 periph A */
-							 AT91_PIOE 17 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE17 periph A */
-							 AT91_PIOE 18 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE18 periph A */
-							 AT91_PIOE 19 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE19 periph A */
-							 AT91_PIOE 20 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE20 periph A */
-							 AT91_PIOE 21 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE21 periph A */
-							 AT91_PIOE 22 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE22 periph A */
-							 AT91_PIOE 23 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE23 periph A */
-							 AT91_PIOE 24 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE24 periph A */
-							 AT91_PIOE 25 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE25 periph A */
-							 AT91_PIOE 26 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE26 periph A */
-							 AT91_PIOE 27 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE27 periph A */
-							 AT91_PIOE 28 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE28 periph A */
-							 AT91_PIOE 29 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PE29 periph A */
-							 AT91_PIOE 30 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PE30 periph A */
+							<1 14 0x1 0x0	/* PB14 periph A SPI1_MISO pin */
+							 1 15 0x1 0x0	/* PB15 periph A SPI1_MOSI pin */
+							 1 16 0x1 0x0>;	/* PB16 periph A SPI1_SPCK pin */
 					};
 				};
 
 				pioA: gpio@fffff200 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff200 0x200>;
-					interrupts = <2 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <2 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioA_clk>;
 				};
 
 				pioB: gpio@fffff400 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff400 0x200>;
-					interrupts = <3 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <3 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioB_clk>;
 				};
 
 				pioC: gpio@fffff600 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff600 0x200>;
-					interrupts = <4 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <4 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioC_clk>;
 				};
 
 				pioD: gpio@fffff800 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffff800 0x200>;
-					interrupts = <5 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <5 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioDE_clk>;
 				};
 
 				pioE: gpio@fffffa00 {
 					compatible = "atmel,at91rm9200-gpio";
 					reg = <0xfffffa00 0x200>;
-					interrupts = <5 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <5 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioDE_clk>;
 				};
 			};
 
 			dbgu: serial@ffffee00 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xffffee00 0x200>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
+				interrupts = <1 4 7>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_dbgu>;
-				clocks = <&mck>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart0: serial@fff8c000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfff8c000 0x200>;
-				interrupts = <7 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <7 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart0>;
-				clocks = <&usart0_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart1: serial@fff90000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfff90000 0x200>;
-				interrupts = <8 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <8 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart1>;
-				clocks = <&usart1_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart2: serial@fff94000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfff94000 0x200>;
-				interrupts = <9 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <9 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart2>;
-				clocks = <&usart2_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart3: serial@fff98000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfff98000 0x200>;
-				interrupts = <10 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <10 4 5>;
 				atmel,use-dma-rx;
 				atmel,use-dma-tx;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart3>;
-				clocks = <&usart3_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			macb0: ethernet@fffbc000 {
 				compatible = "cdns,at32ap7000-macb", "cdns,macb";
 				reg = <0xfffbc000 0x100>;
-				interrupts = <25 IRQ_TYPE_LEVEL_HIGH 3>;
+				interrupts = <25 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_macb_rmii>;
-				clocks = <&macb0_clk>, <&macb0_clk>;
-				clock-names = "hclk", "pclk";
 				status = "disabled";
 			};
 
-			trng@fffcc000 {
-				compatible = "atmel,at91sam9g45-trng";
-				reg = <0xfffcc000 0x4000>;
-				interrupts = <6 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&trng_clk>;
-			};
-
 			i2c0: i2c@fff84000 {
 				compatible = "atmel,at91sam9g10-i2c";
 				reg = <0xfff84000 0x100>;
-				interrupts = <12 IRQ_TYPE_LEVEL_HIGH 6>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_i2c0>;
+				interrupts = <12 4 6>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&twi0_clk>;
 				status = "disabled";
 			};
 
 			i2c1: i2c@fff88000 {
 				compatible = "atmel,at91sam9g10-i2c";
 				reg = <0xfff88000 0x100>;
-				interrupts = <13 IRQ_TYPE_LEVEL_HIGH 6>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_i2c1>;
+				interrupts = <13 4 6>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&twi1_clk>;
 				status = "disabled";
 			};
 
 			ssc0: ssc@fff9c000 {
 				compatible = "atmel,at91sam9g45-ssc";
 				reg = <0xfff9c000 0x4000>;
-				interrupts = <16 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <16 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc0_tx &pinctrl_ssc0_rx>;
-				clocks = <&ssc0_clk>;
-				clock-names = "pclk";
 				status = "disabled";
 			};
 
 			ssc1: ssc@fffa0000 {
 				compatible = "atmel,at91sam9g45-ssc";
 				reg = <0xfffa0000 0x4000>;
-				interrupts = <17 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <17 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc1_tx &pinctrl_ssc1_rx>;
-				clocks = <&ssc1_clk>;
-				clock-names = "pclk";
 				status = "disabled";
 			};
 
 			adc0: adc@fffb0000 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				compatible = "atmel,at91sam9g45-adc";
+				compatible = "atmel,at91sam9260-adc";
 				reg = <0xfffb0000 0x100>;
-				interrupts = <20 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&adc_clk>, <&adc_op_clk>;
-				clock-names = "adc_clk", "adc_op_clk";
+				interrupts = <20 4 0>;
+				atmel,adc-use-external-triggers;
 				atmel,adc-channels-used = <0xff>;
 				atmel,adc-vref = <3300>;
+				atmel,adc-num-channels = <8>;
 				atmel,adc-startup-time = <40>;
+				atmel,adc-channel-base = <0x30>;
+				atmel,adc-drdy-mask = <0x10000>;
+				atmel,adc-status-register = <0x1c>;
+				atmel,adc-trigger-register = <0x08>;
 				atmel,adc-res = <8 10>;
 				atmel,adc-res-names = "lowres", "highres";
 				atmel,adc-use-res = "highres";
 
 				trigger@0 {
-					reg = <0>;
 					trigger-name = "external-rising";
 					trigger-value = <0x1>;
 					trigger-external;
 				};
 				trigger@1 {
-					reg = <1>;
 					trigger-name = "external-falling";
 					trigger-value = <0x2>;
 					trigger-external;
 				};
 
 				trigger@2 {
-					reg = <2>;
 					trigger-name = "external-any";
 					trigger-value = <0x3>;
 					trigger-external;
 				};
 
 				trigger@3 {
-					reg = <3>;
 					trigger-name = "continuous";
 					trigger-value = <0x6>;
 				};
 			};
 
-			isi@fffb4000 {
-				compatible = "atmel,at91sam9g45-isi";
-				reg = <0xfffb4000 0x4000>;
-				interrupts = <26 IRQ_TYPE_LEVEL_HIGH 5>;
-				clocks = <&isi_clk>;
-				clock-names = "isi_clk";
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_isi>;
-				status = "disabled";
-			};
-
-			pwm0: pwm@fffb8000 {
-				compatible = "atmel,at91sam9rl-pwm";
-				reg = <0xfffb8000 0x300>;
-				interrupts = <19 IRQ_TYPE_LEVEL_HIGH 4>;
-				#pwm-cells = <3>;
-				clocks = <&pwm_clk>;
-				status = "disabled";
-			};
-
 			mmc0: mmc@fff80000 {
 				compatible = "atmel,hsmci";
 				reg = <0xfff80000 0x600>;
-				interrupts = <11 IRQ_TYPE_LEVEL_HIGH 0>;
-				pinctrl-names = "default";
-				dmas = <&dma 1 AT91_DMA_CFG_PER_ID(0)>;
+				interrupts = <11 4 0>;
+				dmas = <&dma 1 0>;
 				dma-names = "rxtx";
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&mci0_clk>;
-				clock-names = "mci_clk";
 				status = "disabled";
 			};
 
 			mmc1: mmc@fffd0000 {
 				compatible = "atmel,hsmci";
 				reg = <0xfffd0000 0x600>;
-				interrupts = <29 IRQ_TYPE_LEVEL_HIGH 0>;
-				pinctrl-names = "default";
-				dmas = <&dma 1 AT91_DMA_CFG_PER_ID(13)>;
+				interrupts = <29 4 0>;
+				dmas = <&dma 1 13>;
 				dma-names = "rxtx";
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&mci1_clk>;
-				clock-names = "mci_clk";
 				status = "disabled";
 			};
 
 			watchdog@fffffd40 {
 				compatible = "atmel,at91sam9260-wdt";
 				reg = <0xfffffd40 0x10>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				atmel,watchdog-type = "hardware";
-				atmel,reset-type = "all";
-				atmel,dbg-halt;
 				status = "disabled";
 			};
 
@@ -1127,8 +570,6 @@
 				interrupts = <14 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi0>;
-				clocks = <&spi0_clk>;
-				clock-names = "spi_clk";
 				status = "disabled";
 			};
 
@@ -1140,132 +581,8 @@
 				interrupts = <15 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi1>;
-				clocks = <&spi1_clk>;
-				clock-names = "spi_clk";
-				status = "disabled";
-			};
-
-			usb2: gadget@fff78000 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				compatible = "atmel,at91sam9rl-udc";
-				reg = <0x00600000 0x80000
-				       0xfff78000 0x400>;
-				interrupts = <27 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&udphs_clk>, <&utmi>;
-				clock-names = "pclk", "hclk";
-				status = "disabled";
-
-				ep0 {
-					reg = <0>;
-					atmel,fifo-size = <64>;
-					atmel,nb-banks = <1>;
-				};
-
-				ep1 {
-					reg = <1>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <2>;
-					atmel,can-dma;
-					atmel,can-isoc;
-				};
-
-				ep2 {
-					reg = <2>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <2>;
-					atmel,can-dma;
-					atmel,can-isoc;
-				};
-
-				ep3 {
-					reg = <3>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <3>;
-					atmel,can-dma;
-				};
-
-				ep4 {
-					reg = <4>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <3>;
-					atmel,can-dma;
-				};
-
-				ep5 {
-					reg = <5>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <3>;
-					atmel,can-dma;
-					atmel,can-isoc;
-				};
-
-				ep6 {
-					reg = <6>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <3>;
-					atmel,can-dma;
-					atmel,can-isoc;
-				};
-			};
-
-			sckc@fffffd50 {
-				compatible = "atmel,at91sam9x5-sckc";
-				reg = <0xfffffd50 0x4>;
-
-				slow_osc: slow_osc {
-					compatible = "atmel,at91sam9x5-clk-slow-osc";
-					#clock-cells = <0>;
-					atmel,startup-time-usec = <1200000>;
-					clocks = <&slow_xtal>;
-				};
-
-				slow_rc_osc: slow_rc_osc {
-					compatible = "atmel,at91sam9x5-clk-slow-rc-osc";
-					#clock-cells = <0>;
-					atmel,startup-time-usec = <75>;
-					clock-frequency = <32768>;
-					clock-accuracy = <50000000>;
-				};
-
-				clk32k: slck {
-					compatible = "atmel,at91sam9x5-clk-slow";
-					#clock-cells = <0>;
-					clocks = <&slow_rc_osc &slow_osc>;
-				};
-			};
-
-			rtc@fffffd20 {
-				compatible = "atmel,at91sam9260-rtt";
-				reg = <0xfffffd20 0x10>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				clocks = <&clk32k>;
-				status = "disabled";
-			};
-
-			rtc@fffffdb0 {
-				compatible = "atmel,at91rm9200-rtc";
-				reg = <0xfffffdb0 0x30>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
 				status = "disabled";
 			};
-
-			gpbr: syscon@fffffd60 {
-				compatible = "atmel,at91sam9260-gpbr", "syscon";
-				reg = <0xfffffd60 0x10>;
-				status = "disabled";
-			};
-		};
-
-		fb0: fb@0x00500000 {
-			compatible = "atmel,at91sam9g45-lcdc";
-			reg = <0x00500000 0x1000>;
-			interrupts = <23 IRQ_TYPE_LEVEL_HIGH 3>;
-			pinctrl-names = "default";
-			pinctrl-0 = <&pinctrl_fb>;
-			clocks = <&lcd_clk>, <&lcd_clk>;
-			clock-names = "hclk", "lcdc_clk";
-			status = "disabled";
 		};
 
 		nand0: nand@40000000 {
@@ -1277,11 +594,10 @@
 			      >;
 			atmel,nand-addr-offset = <21>;
 			atmel,nand-cmd-offset = <22>;
-			atmel,nand-has-dma;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_nand>;
-			gpios = <&pioC 8 GPIO_ACTIVE_HIGH
-				 &pioC 14 GPIO_ACTIVE_HIGH
+			gpios = <&pioC 8 0
+				 &pioC 14 0
 				 0
 				>;
 			status = "disabled";
@@ -1290,26 +606,22 @@
 		usb0: ohci@00700000 {
 			compatible = "atmel,at91rm9200-ohci", "usb-ohci";
 			reg = <0x00700000 0x100000>;
-			interrupts = <22 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&usb>, <&uhphs_clk>, <&uhphs_clk>, <&uhpck>;
-			clock-names = "usb_clk", "ohci_clk", "hclk", "uhpck";
+			interrupts = <22 4 2>;
 			status = "disabled";
 		};
 
 		usb1: ehci@00800000 {
 			compatible = "atmel,at91sam9g45-ehci", "usb-ehci";
 			reg = <0x00800000 0x100000>;
-			interrupts = <22 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&utmi>, <&uhphs_clk>, <&uhphs_clk>, <&uhpck>;
-			clock-names = "usb_clk", "ehci_clk", "hclk", "uhpck";
+			interrupts = <22 4 2>;
 			status = "disabled";
 		};
 	};
 
 	i2c@0 {
 		compatible = "i2c-gpio";
-		gpios = <&pioA 20 GPIO_ACTIVE_HIGH /* sda */
-			 &pioA 21 GPIO_ACTIVE_HIGH /* scl */
+		gpios = <&pioA 20 0 /* sda */
+			 &pioA 21 0 /* scl */
 			>;
 		i2c-gpio,sda-open-drain;
 		i2c-gpio,scl-open-drain;
diff -urNp a/arch/arm/boot/dts/at91sam9m10g45ek.dts b/arch/arm/boot/dts/at91sam9m10g45ek.dts
--- a/arch/arm/boot/dts/at91sam9m10g45ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9m10g45ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,7 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "at91sam9g45.dtsi"
-#include <dt-bindings/pwm/pwm.h>
+/include/ "at91sam9g45.dtsi"
 
 / {
 	model = "Atmel AT91SAM9M10G45-EK";
@@ -31,14 +30,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <12000000>;
 		};
-
-		slow_xtal {
-		      clock-frequency = <32768>;
-		};
-
-		main_xtal {
-		      clock-frequency = <12000000>;
-		};
 	};
 
 	ahb {
@@ -68,10 +59,6 @@
 				status = "okay";
 			};
 
-			watchdog@fffffd40 {
-				status = "okay";
-			};
-
 			mmc0: mmc@fff80000 {
 				pinctrl-0 = <
 					&pinctrl_board_mmc0
@@ -81,7 +68,7 @@
 				slot@0 {
 					reg = <0>;
 					bus-width = <4>;
-					cd-gpios = <&pioD 10 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioD 10 0>;
 				};
 			};
 
@@ -94,8 +81,8 @@
 				slot@0 {
 					reg = <0>;
 					bus-width = <4>;
-					cd-gpios = <&pioD 11 GPIO_ACTIVE_HIGH>;
-					wp-gpios = <&pioD 29 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioD 11 0>;
+					wp-gpios = <&pioD 29 0>;
 				};
 			};
 
@@ -103,23 +90,15 @@
 				mmc0 {
 					pinctrl_board_mmc0: mmc0-board {
 						atmel,pins =
-							<AT91_PIOD 10 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>;	/* PD10 gpio CD pin pull up and deglitch */
+							<3 10 0x0 0x5>;	/* PD10 gpio CD pin pull up and deglitch */
 					};
 				};
 
 				mmc1 {
 					pinctrl_board_mmc1: mmc1-board {
 						atmel,pins =
-							<AT91_PIOD 11 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH	/* PD11 gpio CD pin pull up and deglitch */
-							 AT91_PIOD 29 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP>;	/* PD29 gpio WP pin pull up */
-					};
-				};
-
-				pwm0 {
-					pinctrl_pwm_leds: pwm-led {
-						atmel,pins =
-							<AT91_PIOD 0  AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PD0 periph B */
-							 AT91_PIOD 31 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PD31 periph B */
+							<3 11 0x0 0x5	/* PD11 gpio CD pin pull up and deglitch */
+							 3 29 0x0 0x1>;	/* PD29 gpio WP pin pull up */
 					};
 				};
 			};
@@ -133,75 +112,6 @@
 					reg = <0>;
 				};
 			};
-
-			usb2: gadget@fff78000 {
-				atmel,vbus-gpio = <&pioB 19 GPIO_ACTIVE_HIGH>;
-				status = "okay";
-			};
-
-			adc0: adc@fffb0000 {
-				pinctrl-names = "default";
-				pinctrl-0 = <
-					&pinctrl_adc0_ad0
-					&pinctrl_adc0_ad1
-					&pinctrl_adc0_ad2
-					&pinctrl_adc0_ad3
-					&pinctrl_adc0_ad4
-					&pinctrl_adc0_ad5
-					&pinctrl_adc0_ad6
-					&pinctrl_adc0_ad7>;
-				atmel,adc-ts-wires = <4>;
-				status = "okay";
-			};
-
-			pwm0: pwm@fffb8000 {
-				status = "okay";
-
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_pwm_leds>;
-			};
-
-			rtc@fffffd20 {
-				atmel,rtt-rtc-time-reg = <&gpbr 0x0>;
-				status = "okay";
-			};
-
-			gpbr: syscon@fffffd60 {
-				status = "okay";
-			};
-
-			rtc@fffffdb0 {
-				status = "okay";
-			};
-		};
-
-		fb0: fb@0x00500000 {
-			display = <&display0>;
-			status = "okay";
-
-			display0: display {
-				bits-per-pixel = <32>;
-				atmel,lcdcon-backlight;
-				atmel,dmacon = <0x1>;
-				atmel,lcdcon2 = <0x80008002>;
-				atmel,guard-time = <9>;
-				atmel,lcd-wiring-mode = "RGB";
-
-				display-timings {
-					native-mode = <&timing0>;
-					timing0: timing0 {
-						clock-frequency = <9000000>;
-						hactive = <480>;
-						vactive = <272>;
-						hback-porch = <1>;
-						hfront-porch = <1>;
-						vback-porch = <40>;
-						vfront-porch = <1>;
-						hsync-len = <45>;
-						vsync-len = <1>;
-					};
-				};
-			};
 		};
 
 		nand0: nand@40000000 {
@@ -229,8 +139,8 @@
 		usb0: ohci@00700000 {
 			status = "okay";
 			num-ports = <2>;
-			atmel,vbus-gpio = <&pioD 1 GPIO_ACTIVE_LOW
-					   &pioD 3 GPIO_ACTIVE_LOW>;
+			atmel,vbus-gpio = <&pioD 1 1
+					   &pioD 3 1>;
 		};
 
 		usb1: ehci@00800000 {
@@ -243,25 +153,19 @@
 
 		d8 {
 			label = "d8";
-			gpios = <&pioD 30 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioD 30 0>;
 			linux,default-trigger = "heartbeat";
 		};
-	};
-
-	pwmleds {
-		compatible = "pwm-leds";
 
 		d6 {
 			label = "d6";
-			pwms = <&pwm0 3 5000 PWM_POLARITY_INVERTED>;
-			max-brightness = <255>;
+			gpios = <&pioD 0 1>;
 			linux,default-trigger = "nand-disk";
 		};
 
 		d7 {
 			label = "d7";
-			pwms = <&pwm0 1 5000 PWM_POLARITY_INVERTED>;
-			max-brightness = <255>;
+			gpios = <&pioD 31 1>;
 			linux,default-trigger = "mmc0";
 		};
 	};
@@ -271,45 +175,45 @@
 
 		left_click {
 			label = "left_click";
-			gpios = <&pioB 6 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 6 1>;
 			linux,code = <272>;
 			gpio-key,wakeup;
 		};
 
 		right_click {
 			label = "right_click";
-			gpios = <&pioB 7 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 7 1>;
 			linux,code = <273>;
 			gpio-key,wakeup;
 		};
 
 		left {
 			label = "Joystick Left";
-			gpios = <&pioB 14 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 14 1>;
 			linux,code = <105>;
 		};
 
 		right {
 			label = "Joystick Right";
-			gpios = <&pioB 15 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 15 1>;
 			linux,code = <106>;
 		};
 
 		up {
 			label = "Joystick Up";
-			gpios = <&pioB 16 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 16 1>;
 			linux,code = <103>;
 		};
 
 		down {
 			label = "Joystick Down";
-			gpios = <&pioB 17 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 17 1>;
 			linux,code = <108>;
 		};
 
 		enter {
 			label = "Joystick Press";
-			gpios = <&pioB 18 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 18 1>;
 			linux,code = <28>;
 		};
 	};
diff -urNp a/arch/arm/boot/dts/at91sam9n12.dtsi b/arch/arm/boot/dts/at91sam9n12.dtsi
--- a/arch/arm/boot/dts/at91sam9n12.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9n12.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -7,12 +7,7 @@
  * Licensed under GPLv2 or later.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/dma/at91.h>
-#include <dt-bindings/pinctrl/at91.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/clock/at91.h>
+/include/ "skeleton.dtsi"
 
 / {
 	model = "Atmel AT91SAM9N12 SoC";
@@ -34,7 +29,6 @@
 		i2c0 = &i2c0;
 		i2c1 = &i2c1;
 		ssc0 = &ssc0;
-		pwm0 = &pwm0;
 	};
 	cpus {
 		#address-cells = <0>;
@@ -50,25 +44,6 @@
 		reg = <0x20000000 0x10000000>;
 	};
 
-	clocks {
-		slow_xtal: slow_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		main_xtal: main_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-	};
-
-	sram: sram@00300000 {
-		compatible = "mmio-sram";
-		reg = <0x00300000 0x8000>;
-	};
-
 	ahb {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -92,285 +67,11 @@
 			ramc0: ramc@ffffe800 {
 				compatible = "atmel,at91sam9g45-ddramc";
 				reg = <0xffffe800 0x200>;
-				clocks = <&ddrck>;
-				clock-names = "ddrck";
 			};
 
 			pmc: pmc@fffffc00 {
-				compatible = "atmel,at91sam9n12-pmc";
-				reg = <0xfffffc00 0x200>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				interrupt-controller;
-				#address-cells = <1>;
-				#size-cells = <0>;
-				#interrupt-cells = <1>;
-
-				main_rc_osc: main_rc_osc {
-					compatible = "atmel,at91sam9x5-clk-main-rc-osc";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MOSCRCS>;
-					clock-frequency = <12000000>;
-					clock-accuracy = <50000000>;
-				};
-
-				main_osc: main_osc {
-					compatible = "atmel,at91rm9200-clk-main-osc";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MOSCS>;
-					clocks = <&main_xtal>;
-				};
-
-				main: mainck {
-					compatible = "atmel,at91sam9x5-clk-main";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MOSCSELS>;
-					clocks = <&main_rc_osc>, <&main_osc>;
-				};
-
-				plla: pllack {
-					compatible = "atmel,at91rm9200-clk-pll";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKA>;
-					clocks = <&main>;
-					reg = <0>;
-					atmel,clk-input-range = <2000000 32000000>;
-					#atmel,pll-clk-output-range-cells = <4>;
-					atmel,pll-clk-output-ranges = <745000000 800000000 0 0>,
-								      <695000000 750000000 1 0>,
-								      <645000000 700000000 2 0>,
-								      <595000000 650000000 3 0>,
-								      <545000000 600000000 0 1>,
-								      <495000000 555000000 1 1>,
-								      <445000000 500000000 2 1>,
-								      <400000000 450000000 3 1>;
-				};
-
-				plladiv: plladivck {
-					compatible = "atmel,at91sam9x5-clk-plldiv";
-					#clock-cells = <0>;
-					clocks = <&plla>;
-				};
-
-				pllb: pllbck {
-					compatible = "atmel,at91rm9200-clk-pll";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKB>;
-					clocks = <&main>;
-					reg = <1>;
-					atmel,clk-input-range = <2000000 32000000>;
-					#atmel,pll-clk-output-range-cells = <3>;
-					atmel,pll-clk-output-ranges = <30000000 100000000 0>;
-				};
-
-				mck: masterck {
-					compatible = "atmel,at91sam9x5-clk-master";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MCKRDY>;
-					clocks = <&clk32k>, <&main>, <&plladiv>, <&pllb>;
-					atmel,clk-output-range = <0 133333333>;
-					atmel,clk-divisors = <1 2 4 3>;
-					atmel,master-clk-have-div3-pres;
-				};
-
-				usb: usbck {
-					compatible = "atmel,at91sam9n12-clk-usb";
-					#clock-cells = <0>;
-					clocks = <&pllb>;
-				};
-
-				prog: progck {
-					compatible = "atmel,at91sam9x5-clk-programmable";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					interrupt-parent = <&pmc>;
-					clocks = <&clk32k>, <&main>, <&plladiv>, <&pllb>, <&mck>;
-
-					prog0: prog0 {
-						#clock-cells = <0>;
-						reg = <0>;
-						interrupts = <AT91_PMC_PCKRDY(0)>;
-					};
-
-					prog1: prog1 {
-						#clock-cells = <0>;
-						reg = <1>;
-						interrupts = <AT91_PMC_PCKRDY(1)>;
-					};
-				};
-
-				systemck {
-					compatible = "atmel,at91rm9200-clk-system";
-					#address-cells = <1>;
-					#size-cells = <0>;
-
-					ddrck: ddrck {
-						#clock-cells = <0>;
-						reg = <2>;
-						clocks = <&mck>;
-					};
-
-					lcdck: lcdck {
-						#clock-cells = <0>;
-						reg = <3>;
-						clocks = <&mck>;
-					};
-
-					uhpck: uhpck {
-						#clock-cells = <0>;
-						reg = <6>;
-						clocks = <&usb>;
-					};
-
-					udpck: udpck {
-						#clock-cells = <0>;
-						reg = <7>;
-						clocks = <&usb>;
-					};
-
-					pck0: pck0 {
-						#clock-cells = <0>;
-						reg = <8>;
-						clocks = <&prog0>;
-					};
-
-					pck1: pck1 {
-						#clock-cells = <0>;
-						reg = <9>;
-						clocks = <&prog1>;
-					};
-				};
-
-				periphck {
-					compatible = "atmel,at91sam9x5-clk-peripheral";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					clocks = <&mck>;
-
-					pioAB_clk: pioAB_clk {
-						#clock-cells = <0>;
-						reg = <2>;
-					};
-
-					pioCD_clk: pioCD_clk {
-						#clock-cells = <0>;
-						reg = <3>;
-					};
-
-					fuse_clk: fuse_clk {
-						#clock-cells = <0>;
-						reg = <4>;
-					};
-
-					usart0_clk: usart0_clk {
-						#clock-cells = <0>;
-						reg = <5>;
-					};
-
-					usart1_clk: usart1_clk {
-						#clock-cells = <0>;
-						reg = <6>;
-					};
-
-					usart2_clk: usart2_clk {
-						#clock-cells = <0>;
-						reg = <7>;
-					};
-
-					usart3_clk: usart3_clk {
-						#clock-cells = <0>;
-						reg = <8>;
-					};
-
-					twi0_clk: twi0_clk {
-						reg = <9>;
-						#clock-cells = <0>;
-					};
-
-					twi1_clk: twi1_clk {
-						#clock-cells = <0>;
-						reg = <10>;
-					};
-
-					mci0_clk: mci0_clk {
-						#clock-cells = <0>;
-						reg = <12>;
-					};
-
-					spi0_clk: spi0_clk {
-						#clock-cells = <0>;
-						reg = <13>;
-					};
-
-					spi1_clk: spi1_clk {
-						#clock-cells = <0>;
-						reg = <14>;
-					};
-
-					uart0_clk: uart0_clk {
-						#clock-cells = <0>;
-						reg = <15>;
-					};
-
-					uart1_clk: uart1_clk {
-						#clock-cells = <0>;
-						reg = <16>;
-					};
-
-					tcb_clk: tcb_clk {
-						#clock-cells = <0>;
-						reg = <17>;
-					};
-
-					pwm_clk: pwm_clk {
-						#clock-cells = <0>;
-						reg = <18>;
-					};
-
-					adc_clk: adc_clk {
-						#clock-cells = <0>;
-						reg = <19>;
-					};
-
-					dma0_clk: dma0_clk {
-						#clock-cells = <0>;
-						reg = <20>;
-					};
-
-					uhphs_clk: uhphs_clk {
-						#clock-cells = <0>;
-						reg = <22>;
-					};
-
-					udphs_clk: udphs_clk {
-						#clock-cells = <0>;
-						reg = <23>;
-					};
-
-					lcdc_clk: lcdc_clk {
-						#clock-cells = <0>;
-						reg = <25>;
-					};
-
-					sha_clk: sha_clk {
-						#clock-cells = <0>;
-						reg = <27>;
-					};
-
-					ssc0_clk: ssc0_clk {
-						#clock-cells = <0>;
-						reg = <28>;
-					};
-
-					aes_clk: aes_clk {
-						#clock-cells = <0>;
-						reg = <29>;
-					};
-
-					trng_clk: trng_clk {
-						#clock-cells = <0>;
-						reg = <30>;
-					};
-				};
+				compatible = "atmel,at91rm9200-pmc";
+				reg = <0xfffffc00 0x100>;
 			};
 
 			rstc@fffffe00 {
@@ -381,8 +82,7 @@
 			pit: timer@fffffe30 {
 				compatible = "atmel,at91sam9260-pit";
 				reg = <0xfffffe30 0xf>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				clocks = <&mck>;
+				interrupts = <1 4 7>;
 			};
 
 			shdwc@fffffe10 {
@@ -390,38 +90,12 @@
 				reg = <0xfffffe10 0x10>;
 			};
 
-			sckc@fffffe50 {
-				compatible = "atmel,at91sam9x5-sckc";
-				reg = <0xfffffe50 0x4>;
-
-				slow_osc: slow_osc {
-					compatible = "atmel,at91sam9x5-clk-slow-osc";
-					#clock-cells = <0>;
-					clocks = <&slow_xtal>;
-				};
-
-				slow_rc_osc: slow_rc_osc {
-					compatible = "atmel,at91sam9x5-clk-slow-rc-osc";
-					#clock-cells = <0>;
-					clock-frequency = <32768>;
-					clock-accuracy = <50000000>;
-				};
-
-				clk32k: slck {
-					compatible = "atmel,at91sam9x5-clk-slow";
-					#clock-cells = <0>;
-					clocks = <&slow_rc_osc>, <&slow_osc>;
-				};
-			};
-
 			mmc0: mmc@f0008000 {
 				compatible = "atmel,hsmci";
 				reg = <0xf0008000 0x600>;
-				interrupts = <12 IRQ_TYPE_LEVEL_HIGH 0>;
-				dmas = <&dma 1 AT91_DMA_CFG_PER_ID(0)>;
+				interrupts = <12 4 0>;
+				dmas = <&dma 1 0>;
 				dma-names = "rxtx";
-				clocks = <&mci0_clk>;
-				clock-names = "mci_clk";
 				#address-cells = <1>;
 				#size-cells = <0>;
 				status = "disabled";
@@ -430,26 +104,20 @@
 			tcb0: timer@f8008000 {
 				compatible = "atmel,at91sam9x5-tcb";
 				reg = <0xf8008000 0x100>;
-				interrupts = <17 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tcb_clk>;
-				clock-names = "t0_clk";
+				interrupts = <17 4 0>;
 			};
 
 			tcb1: timer@f800c000 {
 				compatible = "atmel,at91sam9x5-tcb";
 				reg = <0xf800c000 0x100>;
-				interrupts = <17 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tcb_clk>;
-				clock-names = "t0_clk";
+				interrupts = <17 4 0>;
 			};
 
 			dma: dma-controller@ffffec00 {
 				compatible = "atmel,at91sam9g45-dma";
 				reg = <0xffffec00 0x200>;
-				interrupts = <20 IRQ_TYPE_LEVEL_HIGH 0>;
+				interrupts = <20 4 0>;
 				#dma-cells = <2>;
-				clocks = <&dma0_clk>;
-				clock-names = "dma_clk";
 			};
 
 			pinctrl@fffff400 {
@@ -470,388 +138,271 @@
 				dbgu {
 					pinctrl_dbgu: dbgu-0 {
 						atmel,pins =
-							<AT91_PIOA 9 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA9 periph A */
-							 AT91_PIOA 10 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA10 periph with pullup */
+							<0 9 0x1 0x0	/* PA9 periph A */
+							 0 10 0x1 0x1>;	/* PA10 periph with pullup */
 					};
 				};
 
 				usart0 {
 					pinctrl_usart0: usart0-0 {
 						atmel,pins =
-							<AT91_PIOA 1 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA1 periph A with pullup */
-							 AT91_PIOA 0 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA0 periph A */
+							<0 1 0x1 0x1	/* PA1 periph A with pullup */
+							 0 0 0x1 0x0>;	/* PA0 periph A */
 					};
 
 					pinctrl_usart0_rts: usart0_rts-0 {
 						atmel,pins =
-							<AT91_PIOA 2 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA2 periph A */
+							<0 2 0x1 0x0>;	/* PA2 periph A */
 					};
 
 					pinctrl_usart0_cts: usart0_cts-0 {
 						atmel,pins =
-							<AT91_PIOA 3 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA3 periph A */
+							<0 3 0x1 0x0>;	/* PA3 periph A */
 					};
 				};
 
 				usart1 {
 					pinctrl_usart1: usart1-0 {
 						atmel,pins =
-							<AT91_PIOA 6 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA6 periph A with pullup */
-							 AT91_PIOA 5 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA5 periph A */
+							<0 6 0x1 0x1	/* PA6 periph A with pullup */
+							 0 5 0x1 0x0>;	/* PA5 periph A */
 					};
 				};
 
 				usart2 {
 					pinctrl_usart2: usart2-0 {
 						atmel,pins =
-							<AT91_PIOA 8 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA8 periph A with pullup */
-							 AT91_PIOA 7 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA7 periph A */
+							<0 8 0x1 0x1	/* PA8 periph A with pullup */
+							 0 7 0x1 0x0>;	/* PA7 periph A */
 					};
 
 					pinctrl_usart2_rts: usart2_rts-0 {
 						atmel,pins =
-							<AT91_PIOB 0 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB0 periph B */
+							<1 0 0x2 0x0>;	/* PB0 periph B */
 					};
 
 					pinctrl_usart2_cts: usart2_cts-0 {
 						atmel,pins =
-							<AT91_PIOB 1 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB1 periph B */
+							<1 1 0x2 0x0>;	/* PB1 periph B */
 					};
 				};
 
 				usart3 {
 					pinctrl_usart3: usart3-0 {
 						atmel,pins =
-							<AT91_PIOC 23 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PC23 periph B with pullup */
-							 AT91_PIOC 22 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PC22 periph B */
+							<2 23 0x2 0x1	/* PC23 periph B with pullup */
+							 2 22 0x2 0x0>;	/* PC22 periph B */
 					};
 
 					pinctrl_usart3_rts: usart3_rts-0 {
 						atmel,pins =
-							<AT91_PIOC 24 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PC24 periph B */
+							<2 24 0x2 0x0>;	/* PC24 periph B */
 					};
 
 					pinctrl_usart3_cts: usart3_cts-0 {
 						atmel,pins =
-							<AT91_PIOC 25 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PC25 periph B */
+							<2 25 0x2 0x0>;	/* PC25 periph B */
 					};
 				};
 
 				uart0 {
 					pinctrl_uart0: uart0-0 {
 						atmel,pins =
-							<AT91_PIOC 9 AT91_PERIPH_C AT91_PINCTRL_PULL_UP	/* PC9 periph C with pullup */
-							 AT91_PIOC 8 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* PC8 periph C */
+							<2 9 0x3 0x1	/* PC9 periph C with pullup */
+							 2 8 0x3 0x0>;	/* PC8 periph C */
 					};
 				};
 
 				uart1 {
 					pinctrl_uart1: uart1-0 {
 						atmel,pins =
-							<AT91_PIOC 16 AT91_PERIPH_C AT91_PINCTRL_PULL_UP	/* PC17 periph C with pullup */
-							 AT91_PIOC 17 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* PC16 periph C */
+							<2 16 0x3 0x1	/* PC17 periph C with pullup */
+							 2 17 0x3 0x0>;	/* PC16 periph C */
 					};
 				};
 
 				nand {
 					pinctrl_nand: nand-0 {
 						atmel,pins =
-							<AT91_PIOD 5 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP	/* PD5 gpio RDY pin pull_up*/
-							 AT91_PIOD 4 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP>;	/* PD4 gpio enable pin pull_up */
+							<3 5 0x0 0x1	/* PD5 gpio RDY pin pull_up*/
+							 3 4 0x0 0x1>;	/* PD4 gpio enable pin pull_up */
 					};
 				};
 
 				mmc0 {
 					pinctrl_mmc0_slot0_clk_cmd_dat0: mmc0_slot0_clk_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 17 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA17 periph A */
-							 AT91_PIOA 16 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA16 periph A with pullup */
-							 AT91_PIOA 15 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA15 periph A with pullup */
+							<0 17 0x1 0x0	/* PA17 periph A */
+							 0 16 0x1 0x1	/* PA16 periph A with pullup */
+							 0 15 0x1 0x1>;	/* PA15 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot0_dat1_3: mmc0_slot0_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 18 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA18 periph A with pullup */
-							 AT91_PIOA 19 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA19 periph A with pullup */
-							 AT91_PIOA 20 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA20 periph A with pullup */
+							<0 18 0x1 0x1	/* PA18 periph A with pullup */
+							 0 19 0x1 0x1	/* PA19 periph A with pullup */
+							 0 20 0x1 0x1>;	/* PA20 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot0_dat4_7: mmc0_slot0_dat4_7-0 {
 						atmel,pins =
-							<AT91_PIOA 11 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA11 periph B with pullup */
-							 AT91_PIOA 12 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA12 periph B with pullup */
-							 AT91_PIOA 13 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA13 periph B with pullup */
-							 AT91_PIOA 14 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PA14 periph B with pullup */
+							<0 11 0x2 0x1	/* PA11 periph B with pullup */
+							 0 12 0x2 0x1	/* PA12 periph B with pullup */
+							 0 13 0x2 0x1	/* PA13 periph B with pullup */
+							 0 14 0x2 0x1>;	/* PA14 periph B with pullup */
 					};
 				};
 
 				ssc0 {
 					pinctrl_ssc0_tx: ssc0_tx-0 {
 						atmel,pins =
-							<AT91_PIOA 24 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA24 periph B */
-							 AT91_PIOA 25 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA25 periph B */
-							 AT91_PIOA 26 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA26 periph B */
+							<0 24 0x2 0x0	/* PA24 periph B */
+							 0 25 0x2 0x0	/* PA25 periph B */
+							 0 26 0x2 0x0>;	/* PA26 periph B */
 					};
 
 					pinctrl_ssc0_rx: ssc0_rx-0 {
 						atmel,pins =
-							<AT91_PIOA 27 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA27 periph B */
-							 AT91_PIOA 28 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA28 periph B */
-							 AT91_PIOA 29 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA29 periph B */
+							<0 27 0x2 0x0	/* PA27 periph B */
+							 0 28 0x2 0x0	/* PA28 periph B */
+							 0 29 0x2 0x0>;	/* PA29 periph B */
 					};
 				};
 
 				spi0 {
 					pinctrl_spi0: spi0-0 {
 						atmel,pins =
-							<AT91_PIOA 11 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA11 periph A SPI0_MISO pin */
-							 AT91_PIOA 12 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA12 periph A SPI0_MOSI pin */
-							 AT91_PIOA 13 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA13 periph A SPI0_SPCK pin */
+							<0 11 0x1 0x0	/* PA11 periph A SPI0_MISO pin */
+							 0 12 0x1 0x0	/* PA12 periph A SPI0_MOSI pin */
+							 0 13 0x1 0x0>;	/* PA13 periph A SPI0_SPCK pin */
 					};
 				};
 
 				spi1 {
 					pinctrl_spi1: spi1-0 {
 						atmel,pins =
-							<AT91_PIOA 21 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA21 periph B SPI1_MISO pin */
-							 AT91_PIOA 22 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA22 periph B SPI1_MOSI pin */
-							 AT91_PIOA 23 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA23 periph B SPI1_SPCK pin */
-					};
-				};
-
-				i2c0 {
-					pinctrl_i2c0: i2c0-0 {
-						atmel,pins =
-							<AT91_PIOA 30 AT91_PERIPH_A AT91_PINCTRL_NONE
-							 AT91_PIOA 31 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-				};
-
-				i2c1 {
-					pinctrl_i2c1: i2c1-0 {
-						atmel,pins =
-							<AT91_PIOC 0 AT91_PERIPH_C AT91_PINCTRL_NONE
-							 AT91_PIOC 1 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-				};
-
-				tcb0 {
-					pinctrl_tcb0_tclk0: tcb0_tclk0-0 {
-						atmel,pins = <AT91_PIOA 24 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk1: tcb0_tclk1-0 {
-						atmel,pins = <AT91_PIOA 25 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk2: tcb0_tclk2-0 {
-						atmel,pins = <AT91_PIOA 26 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa0: tcb0_tioa0-0 {
-						atmel,pins = <AT91_PIOA 21 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa1: tcb0_tioa1-0 {
-						atmel,pins = <AT91_PIOA 22 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa2: tcb0_tioa2-0 {
-						atmel,pins = <AT91_PIOA 23 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob0: tcb0_tiob0-0 {
-						atmel,pins = <AT91_PIOA 27 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob1: tcb0_tiob1-0 {
-						atmel,pins = <AT91_PIOA 28 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob2: tcb0_tiob2-0 {
-						atmel,pins = <AT91_PIOA 29 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-				};
-
-				tcb1 {
-					pinctrl_tcb1_tclk0: tcb1_tclk0-0 {
-						atmel,pins = <AT91_PIOC 4 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tclk1: tcb1_tclk1-0 {
-						atmel,pins = <AT91_PIOC 7 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tclk2: tcb1_tclk2-0 {
-						atmel,pins = <AT91_PIOC 14 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa0: tcb1_tioa0-0 {
-						atmel,pins = <AT91_PIOC 2 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa1: tcb1_tioa1-0 {
-						atmel,pins = <AT91_PIOC 5 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa2: tcb1_tioa2-0 {
-						atmel,pins = <AT91_PIOC 12 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob0: tcb1_tiob0-0 {
-						atmel,pins = <AT91_PIOC 3 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob1: tcb1_tiob1-0 {
-						atmel,pins = <AT91_PIOC 6 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob2: tcb1_tiob2-0 {
-						atmel,pins = <AT91_PIOC 13 AT91_PERIPH_C AT91_PINCTRL_NONE>;
+							<0 21 0x2 0x0	/* PA21 periph B SPI1_MISO pin */
+							 0 22 0x2 0x0	/* PA22 periph B SPI1_MOSI pin */
+							 0 23 0x2 0x0>;	/* PA23 periph B SPI1_SPCK pin */
 					};
 				};
 
 				pioA: gpio@fffff400 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffff400 0x200>;
-					interrupts = <2 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <2 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioAB_clk>;
 				};
 
 				pioB: gpio@fffff600 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffff600 0x200>;
-					interrupts = <2 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <2 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioAB_clk>;
 				};
 
 				pioC: gpio@fffff800 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffff800 0x200>;
-					interrupts = <3 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <3 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioCD_clk>;
 				};
 
 				pioD: gpio@fffffa00 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffffa00 0x200>;
-					interrupts = <3 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <3 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioCD_clk>;
 				};
 			};
 
 			dbgu: serial@fffff200 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfffff200 0x200>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
+				interrupts = <1 4 7>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_dbgu>;
-				clocks = <&mck>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			ssc0: ssc@f0010000 {
 				compatible = "atmel,at91sam9g45-ssc";
 				reg = <0xf0010000 0x4000>;
-				interrupts = <28 IRQ_TYPE_LEVEL_HIGH 5>;
-				dmas = <&dma 0 AT91_DMA_CFG_PER_ID(21)>,
-				       <&dma 0 AT91_DMA_CFG_PER_ID(22)>;
-				dma-names = "tx", "rx";
+				interrupts = <28 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc0_tx &pinctrl_ssc0_rx>;
-				clocks = <&ssc0_clk>;
-				clock-names = "pclk";
 				status = "disabled";
 			};
 
 			usart0: serial@f801c000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf801c000 0x4000>;
-				interrupts = <5 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <5 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart0>;
-				clocks = <&usart0_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart1: serial@f8020000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf8020000 0x4000>;
-				interrupts = <6 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <6 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart1>;
-				clocks = <&usart1_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart2: serial@f8024000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf8024000 0x4000>;
-				interrupts = <7 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <7 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart2>;
-				clocks = <&usart2_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart3: serial@f8028000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf8028000 0x4000>;
-				interrupts = <8 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <8 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart3>;
-				clocks = <&usart3_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			i2c0: i2c@f8010000 {
 				compatible = "atmel,at91sam9x5-i2c";
 				reg = <0xf8010000 0x100>;
-				interrupts = <9 IRQ_TYPE_LEVEL_HIGH 6>;
-				dmas = <&dma 1 AT91_DMA_CFG_PER_ID(13)>,
-				       <&dma 1 AT91_DMA_CFG_PER_ID(14)>;
+				interrupts = <9 4 6>;
+				dmas = <&dma 1 13>,
+				       <&dma 1 14>;
 				dma-names = "tx", "rx";
 				#address-cells = <1>;
 				#size-cells = <0>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_i2c0>;
-				clocks = <&twi0_clk>;
 				status = "disabled";
 			};
 
 			i2c1: i2c@f8014000 {
 				compatible = "atmel,at91sam9x5-i2c";
 				reg = <0xf8014000 0x100>;
-				interrupts = <10 IRQ_TYPE_LEVEL_HIGH 6>;
-				dmas = <&dma 1 AT91_DMA_CFG_PER_ID(15)>,
-				       <&dma 1 AT91_DMA_CFG_PER_ID(16)>;
+				interrupts = <10 4 6>;
+				dmas = <&dma 1 15>,
+				       <&dma 1 16>;
 				dma-names = "tx", "rx";
 				#address-cells = <1>;
 				#size-cells = <0>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_i2c1>;
-				clocks = <&twi1_clk>;
 				status = "disabled";
 			};
 
@@ -860,14 +411,9 @@
 				#size-cells = <0>;
 				compatible = "atmel,at91rm9200-spi";
 				reg = <0xf0000000 0x100>;
-				interrupts = <13 IRQ_TYPE_LEVEL_HIGH 3>;
-				dmas = <&dma 1 AT91_DMA_CFG_PER_ID(1)>,
-				       <&dma 1 AT91_DMA_CFG_PER_ID(2)>;
-				dma-names = "tx", "rx";
+				interrupts = <13 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi0>;
-				clocks = <&spi0_clk>;
-				clock-names = "spi_clk";
 				status = "disabled";
 			};
 
@@ -876,40 +422,9 @@
 				#size-cells = <0>;
 				compatible = "atmel,at91rm9200-spi";
 				reg = <0xf0004000 0x100>;
-				interrupts = <14 IRQ_TYPE_LEVEL_HIGH 3>;
-				dmas = <&dma 1 AT91_DMA_CFG_PER_ID(3)>,
-				       <&dma 1 AT91_DMA_CFG_PER_ID(4)>;
-				dma-names = "tx", "rx";
+				interrupts = <14 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi1>;
-				clocks = <&spi1_clk>;
-				clock-names = "spi_clk";
-				status = "disabled";
-			};
-
-			watchdog@fffffe40 {
-				compatible = "atmel,at91sam9260-wdt";
-				reg = <0xfffffe40 0x10>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				atmel,watchdog-type = "hardware";
-				atmel,reset-type = "all";
-				atmel,dbg-halt;
-				status = "disabled";
-			};
-
-			rtc@fffffeb0 {
-				compatible = "atmel,at91rm9200-rtc";
-				reg = <0xfffffeb0 0x40>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				status = "disabled";
-			};
-
-			pwm0: pwm@f8034000 {
-				compatible = "atmel,at91sam9rl-pwm";
-				reg = <0xf8034000 0x300>;
-				interrupts = <18 IRQ_TYPE_LEVEL_HIGH 4>;
-				#pwm-cells = <3>;
-				clocks = <&pwm_clk>;
 				status = "disabled";
 			};
 		};
@@ -926,11 +441,10 @@
 			atmel,pmecc-lookup-table-offset = <0x0 0x8000>;
 			atmel,nand-addr-offset = <21>;
 			atmel,nand-cmd-offset = <22>;
-			atmel,nand-has-dma;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_nand>;
-			gpios = <&pioD 5 GPIO_ACTIVE_HIGH
-				 &pioD 4 GPIO_ACTIVE_HIGH
+			gpios = <&pioD 5 0
+				 &pioD 4 0
 				 0
 				>;
 			status = "disabled";
@@ -939,18 +453,15 @@
 		usb0: ohci@00500000 {
 			compatible = "atmel,at91rm9200-ohci", "usb-ohci";
 			reg = <0x00500000 0x00100000>;
-			interrupts = <22 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&usb>, <&uhphs_clk>, <&uhphs_clk>,
-				 <&uhpck>;
-			clock-names = "usb_clk", "ohci_clk", "hclk", "uhpck";
+			interrupts = <22 4 2>;
 			status = "disabled";
 		};
 	};
 
 	i2c@0 {
 		compatible = "i2c-gpio";
-		gpios = <&pioA 30 GPIO_ACTIVE_HIGH /* sda */
-			 &pioA 31 GPIO_ACTIVE_HIGH /* scl */
+		gpios = <&pioA 30 0 /* sda */
+			 &pioA 31 0 /* scl */
 			>;
 		i2c-gpio,sda-open-drain;
 		i2c-gpio,scl-open-drain;
diff -urNp a/arch/arm/boot/dts/at91sam9n12ek.dts b/arch/arm/boot/dts/at91sam9n12ek.dts
--- a/arch/arm/boot/dts/at91sam9n12ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9n12ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,7 +7,7 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "at91sam9n12.dtsi"
+/include/ "at91sam9n12.dtsi"
 
 / {
 	model = "Atmel AT91SAM9N12-EK";
@@ -30,14 +30,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <16000000>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <16000000>;
-		};
 	};
 
 	ahb {
@@ -46,28 +38,8 @@
 				status = "okay";
 			};
 
-			ssc0: ssc@f0010000 {
-				status = "okay";
-			};
-
 			i2c0: i2c@f8010000 {
 				status = "okay";
-
-				wm8904: codec@1a {
-					compatible = "wlf,wm8904";
-					reg = <0x1a>;
-					clocks = <&pck0>;
-					clock-names = "mclk";
-				};
-
-				qt1070: keyboard@1b {
-					compatible = "qt1070";
-					reg = <0x1b>;
-					interrupt-parent = <&pioA>;
-					interrupts = <2 IRQ_TYPE_EDGE_FALLING>;
-					pinctrl-names = "default";
-					pinctrl-0 = <&pinctrl_qt1070_irq>;
-				};
 			};
 
 			i2c1: i2c@f8014000 {
@@ -83,7 +55,7 @@
 				slot@0 {
 					reg = <0>;
 					bus-width = <4>;
-					cd-gpios = <&pioA 7 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioA 7 0>;
 				};
 			};
 
@@ -91,21 +63,7 @@
 				mmc0 {
 					pinctrl_board_mmc0: mmc0-board {
 						atmel,pins =
-							<AT91_PIOA 7 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>;	/* PA7 gpio CD pin pull up and deglitch */
-					};
-				};
-
-				qt1070 {
-					pinctrl_qt1070_irq: qt1070_irq {
-						atmel,pins =
-							<AT91_PIOA 2 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>;
-					};
-				};
-
-				sound {
-					pinctrl_pck0_as_audio_mck: pck0_as_audio_mck {
-						atmel,pins =
-							<AT91_PIOB 10 AT91_PERIPH_B AT91_PINCTRL_NONE>;
+							<0 7 0x0 0x5>;	/* PA7 gpio CD pin pull up and deglitch */
 					};
 				};
 			};
@@ -119,10 +77,6 @@
 					reg = <0>;
 				};
 			};
-
-			watchdog@fffffe40 {
-				status = "okay";
-			};
 		};
 
 		nand0: nand@40000000 {
@@ -134,12 +88,6 @@
 			nand-on-flash-bbt;
 			status = "okay";
 		};
-
-		usb0: ohci@00500000 {
-			num-ports = <1>;
-			atmel,vbus-gpio = <&pioB 7 GPIO_ACTIVE_LOW>;
-			status = "okay";
-		};
 	};
 
 	leds {
@@ -147,19 +95,19 @@
 
 		d8 {
 			label = "d8";
-			gpios = <&pioB 4 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 4 1>;
 			linux,default-trigger = "mmc0";
 		};
 
 		d9 {
 			label = "d6";
-			gpios = <&pioB 5 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 5 1>;
 			linux,default-trigger = "nand-disk";
 		};
 
 		d10 {
 			label = "d7";
-			gpios = <&pioB 6 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioB 6 0>;
 			linux,default-trigger = "heartbeat";
 		};
 	};
@@ -169,27 +117,9 @@
 
 		enter {
 			label = "Enter";
-			gpios = <&pioB 3 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 4 1>;
 			linux,code = <28>;
 			gpio-key,wakeup;
 		};
 	};
-
-	sound {
-		compatible = "atmel,asoc-wm8904";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_pck0_as_audio_mck>;
-
-		atmel,model = "wm8904 @ AT91SAM9N12";
-		atmel,audio-routing =
-			"Headphone Jack", "HPOUTL",
-			"Headphone Jack", "HPOUTR",
-			"IN2L", "Line In Jack",
-			"IN2R", "Line In Jack",
-			"Mic", "MICBIAS",
-			"IN1L", "Mic";
-
-		atmel,ssc-controller = <&ssc0>;
-		atmel,audio-codec = <&wm8904>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/at91sam9x25.dtsi b/arch/arm/boot/dts/at91sam9x25.dtsi
--- a/arch/arm/boot/dts/at91sam9x25.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9x25.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,11 +6,7 @@
  * Licensed under GPLv2.
  */
 
-#include "at91sam9x5.dtsi"
-#include "at91sam9x5_usart3.dtsi"
-#include "at91sam9x5_macb0.dtsi"
-#include "at91sam9x5_macb1.dtsi"
-#include "at91sam9x5_can.dtsi"
+/include/ "at91sam9x5.dtsi"
 
 / {
 	model = "Atmel AT91SAM9X25 SoC";
@@ -26,6 +22,27 @@
 				       0x80000000 0xfffd0000 0xb83fffff  /* pioC */
 				       0x003fffff 0x003f8000 0x00000000  /* pioD */
 				      >;
+
+				macb1 {
+					pinctrl_macb1_rmii: macb1_rmii-0 {
+						atmel,pins =
+							<2 16 0x2 0x0	/* PC16 periph B */
+							 2 18 0x2 0x0	/* PC18 periph B */
+							 2 19 0x2 0x0	/* PC19 periph B */
+							 2 20 0x2 0x0	/* PC20 periph B */
+							 2 21 0x2 0x0	/* PC21 periph B */
+							 2 27 0x2 0x0	/* PC27 periph B */
+							 2 28 0x2 0x0	/* PC28 periph B */
+							 2 29 0x2 0x0	/* PC29 periph B */
+							 2 30 0x2 0x0	/* PC30 periph B */
+							 2 31 0x2 0x0>;	/* PC31 periph B */
+					};
+				};
+			};
+
+			macb1: ethernet@f8030000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_macb1_rmii>;
 			};
 		};
 	};
diff -urNp a/arch/arm/boot/dts/at91sam9x25ek.dts b/arch/arm/boot/dts/at91sam9x25ek.dts
--- a/arch/arm/boot/dts/at91sam9x25ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9x25ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,8 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "at91sam9x25.dtsi"
-#include "at91sam9x5ek.dtsi"
+/include/ "at91sam9x25.dtsi"
+/include/ "at91sam9x5ek.dtsi"
 
 / {
 	model = "Atmel AT91SAM9X25-EK";
diff -urNp a/arch/arm/boot/dts/at91sam9x35.dtsi b/arch/arm/boot/dts/at91sam9x35.dtsi
--- a/arch/arm/boot/dts/at91sam9x35.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9x35.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,9 +6,7 @@
  * Licensed under GPLv2.
  */
 
-#include "at91sam9x5.dtsi"
-#include "at91sam9x5_macb0.dtsi"
-#include "at91sam9x5_can.dtsi"
+/include/ "at91sam9x5.dtsi"
 
 / {
 	model = "Atmel AT91SAM9X35 SoC";
diff -urNp a/arch/arm/boot/dts/at91sam9x35ek.dts b/arch/arm/boot/dts/at91sam9x35ek.dts
--- a/arch/arm/boot/dts/at91sam9x35ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9x35ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,8 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "at91sam9x35.dtsi"
-#include "at91sam9x5ek.dtsi"
+/include/ "at91sam9x35.dtsi"
+/include/ "at91sam9x5ek.dtsi"
 
 / {
 	model = "Atmel AT91SAM9X35-EK";
diff -urNp a/arch/arm/boot/dts/at91sam9x5.dtsi b/arch/arm/boot/dts/at91sam9x5.dtsi
--- a/arch/arm/boot/dts/at91sam9x5.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9x5.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -9,12 +9,7 @@
  * Licensed under GPLv2 or later.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/dma/at91.h>
-#include <dt-bindings/pinctrl/at91.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/clock/at91.h>
+/include/ "skeleton.dtsi"
 
 / {
 	model = "Atmel AT91SAM9x5 family SoC";
@@ -36,7 +31,6 @@
 		i2c1 = &i2c1;
 		i2c2 = &i2c2;
 		ssc0 = &ssc0;
-		pwm0 = &pwm0;
 	};
 	cpus {
 		#address-cells = <0>;
@@ -52,31 +46,6 @@
 		reg = <0x20000000 0x10000000>;
 	};
 
-	clocks {
-		slow_xtal: slow_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		main_xtal: main_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		adc_op_clk: adc_op_clk{
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <5000000>;
-		};
-	};
-
-	sram: sram@00300000 {
-		compatible = "mmio-sram";
-		reg = <0x00300000 0x8000>;
-	};
-
 	ahb {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -100,277 +69,11 @@
 			ramc0: ramc@ffffe800 {
 				compatible = "atmel,at91sam9g45-ddramc";
 				reg = <0xffffe800 0x200>;
-				clocks = <&ddrck>;
-				clock-names = "ddrck";
 			};
 
 			pmc: pmc@fffffc00 {
-				compatible = "atmel,at91sam9x5-pmc";
+				compatible = "atmel,at91rm9200-pmc";
 				reg = <0xfffffc00 0x100>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				interrupt-controller;
-				#address-cells = <1>;
-				#size-cells = <0>;
-				#interrupt-cells = <1>;
-
-				main_rc_osc: main_rc_osc {
-					compatible = "atmel,at91sam9x5-clk-main-rc-osc";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MOSCRCS>;
-					clock-frequency = <12000000>;
-					clock-accuracy = <50000000>;
-				};
-
-				main_osc: main_osc {
-					compatible = "atmel,at91rm9200-clk-main-osc";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MOSCS>;
-					clocks = <&main_xtal>;
-				};
-
-				main: mainck {
-					compatible = "atmel,at91sam9x5-clk-main";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MOSCSELS>;
-					clocks = <&main_rc_osc>, <&main_osc>;
-				};
-
-				plla: pllack {
-					compatible = "atmel,at91rm9200-clk-pll";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKA>;
-					clocks = <&main>;
-					reg = <0>;
-					atmel,clk-input-range = <2000000 32000000>;
-					#atmel,pll-clk-output-range-cells = <4>;
-					atmel,pll-clk-output-ranges = <745000000 800000000 0 0
-								       695000000 750000000 1 0
-								       645000000 700000000 2 0
-								       595000000 650000000 3 0
-								       545000000 600000000 0 1
-								       495000000 555000000 1 1
-								       445000000 500000000 2 1
-								       400000000 450000000 3 1>;
-				};
-
-				plladiv: plladivck {
-					compatible = "atmel,at91sam9x5-clk-plldiv";
-					#clock-cells = <0>;
-					clocks = <&plla>;
-				};
-
-				utmi: utmick {
-					compatible = "atmel,at91sam9x5-clk-utmi";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_LOCKU>;
-					clocks = <&main>;
-				};
-
-				mck: masterck {
-					compatible = "atmel,at91sam9x5-clk-master";
-					#clock-cells = <0>;
-					interrupts-extended = <&pmc AT91_PMC_MCKRDY>;
-					clocks = <&clk32k>, <&main>, <&plladiv>, <&utmi>;
-					atmel,clk-output-range = <0 133333333>;
-					atmel,clk-divisors = <1 2 4 3>;
-					atmel,master-clk-have-div3-pres;
-				};
-
-				usb: usbck {
-					compatible = "atmel,at91sam9x5-clk-usb";
-					#clock-cells = <0>;
-					clocks = <&plladiv>, <&utmi>;
-				};
-
-				prog: progck {
-					compatible = "atmel,at91sam9x5-clk-programmable";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					interrupt-parent = <&pmc>;
-					clocks = <&clk32k>, <&main>, <&plladiv>, <&utmi>, <&mck>;
-
-					prog0: prog0 {
-						#clock-cells = <0>;
-						reg = <0>;
-						interrupts = <AT91_PMC_PCKRDY(0)>;
-					};
-
-					prog1: prog1 {
-						#clock-cells = <0>;
-						reg = <1>;
-						interrupts = <AT91_PMC_PCKRDY(1)>;
-					};
-				};
-
-				smd: smdclk {
-					compatible = "atmel,at91sam9x5-clk-smd";
-					#clock-cells = <0>;
-					clocks = <&plladiv>, <&utmi>;
-				};
-
-				systemck {
-					compatible = "atmel,at91rm9200-clk-system";
-					#address-cells = <1>;
-					#size-cells = <0>;
-
-					ddrck: ddrck {
-						#clock-cells = <0>;
-						reg = <2>;
-						clocks = <&mck>;
-					};
-
-					smdck: smdck {
-						#clock-cells = <0>;
-						reg = <4>;
-						clocks = <&smd>;
-					};
-
-					uhpck: uhpck {
-						#clock-cells = <0>;
-						reg = <6>;
-						clocks = <&usb>;
-					};
-
-					udpck: udpck {
-						#clock-cells = <0>;
-						reg = <7>;
-						clocks = <&usb>;
-					};
-
-					pck0: pck0 {
-						#clock-cells = <0>;
-						reg = <8>;
-						clocks = <&prog0>;
-					};
-
-					pck1: pck1 {
-						#clock-cells = <0>;
-						reg = <9>;
-						clocks = <&prog1>;
-					};
-				};
-
-				periphck {
-					compatible = "atmel,at91sam9x5-clk-peripheral";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					clocks = <&mck>;
-
-					pioAB_clk: pioAB_clk {
-						#clock-cells = <0>;
-						reg = <2>;
-					};
-
-					pioCD_clk: pioCD_clk {
-						#clock-cells = <0>;
-						reg = <3>;
-					};
-
-					smd_clk: smd_clk {
-						#clock-cells = <0>;
-						reg = <4>;
-					};
-
-					usart0_clk: usart0_clk {
-						#clock-cells = <0>;
-						reg = <5>;
-					};
-
-					usart1_clk: usart1_clk {
-						#clock-cells = <0>;
-						reg = <6>;
-					};
-
-					usart2_clk: usart2_clk {
-						#clock-cells = <0>;
-						reg = <7>;
-					};
-
-					twi0_clk: twi0_clk {
-						reg = <9>;
-						#clock-cells = <0>;
-					};
-
-					twi1_clk: twi1_clk {
-						#clock-cells = <0>;
-						reg = <10>;
-					};
-
-					twi2_clk: twi2_clk {
-						#clock-cells = <0>;
-						reg = <11>;
-					};
-
-					mci0_clk: mci0_clk {
-						#clock-cells = <0>;
-						reg = <12>;
-					};
-
-					spi0_clk: spi0_clk {
-						#clock-cells = <0>;
-						reg = <13>;
-					};
-
-					spi1_clk: spi1_clk {
-						#clock-cells = <0>;
-						reg = <14>;
-					};
-
-					uart0_clk: uart0_clk {
-						#clock-cells = <0>;
-						reg = <15>;
-					};
-
-					uart1_clk: uart1_clk {
-						#clock-cells = <0>;
-						reg = <16>;
-					};
-
-					tcb0_clk: tcb0_clk {
-						#clock-cells = <0>;
-						reg = <17>;
-					};
-
-					pwm_clk: pwm_clk {
-						#clock-cells = <0>;
-						reg = <18>;
-					};
-
-					adc_clk: adc_clk {
-						#clock-cells = <0>;
-						reg = <19>;
-					};
-
-					dma0_clk: dma0_clk {
-						#clock-cells = <0>;
-						reg = <20>;
-					};
-
-					dma1_clk: dma1_clk {
-						#clock-cells = <0>;
-						reg = <21>;
-					};
-
-					uhphs_clk: uhphs_clk {
-						#clock-cells = <0>;
-						reg = <22>;
-					};
-
-					udphs_clk: udphs_clk {
-						#clock-cells = <0>;
-						reg = <23>;
-					};
-
-					mci1_clk: mci1_clk {
-						#clock-cells = <0>;
-						reg = <26>;
-					};
-
-					ssc0_clk: ssc0_clk {
-						#clock-cells = <0>;
-						reg = <28>;
-					};
-				};
 			};
 
 			rstc@fffffe00 {
@@ -386,66 +89,33 @@
 			pit: timer@fffffe30 {
 				compatible = "atmel,at91sam9260-pit";
 				reg = <0xfffffe30 0xf>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				clocks = <&mck>;
-			};
-
-			sckc@fffffe50 {
-				compatible = "atmel,at91sam9x5-sckc";
-				reg = <0xfffffe50 0x4>;
-
-				slow_osc: slow_osc {
-					compatible = "atmel,at91sam9x5-clk-slow-osc";
-					#clock-cells = <0>;
-					clocks = <&slow_xtal>;
-				};
-
-				slow_rc_osc: slow_rc_osc {
-					compatible = "atmel,at91sam9x5-clk-slow-rc-osc";
-					#clock-cells = <0>;
-					clock-frequency = <32768>;
-					clock-accuracy = <50000000>;
-				};
-
-				clk32k: slck {
-					compatible = "atmel,at91sam9x5-clk-slow";
-					#clock-cells = <0>;
-					clocks = <&slow_rc_osc>, <&slow_osc>;
-				};
+				interrupts = <1 4 7>;
 			};
 
 			tcb0: timer@f8008000 {
 				compatible = "atmel,at91sam9x5-tcb";
 				reg = <0xf8008000 0x100>;
-				interrupts = <17 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tcb0_clk>;
-				clock-names = "t0_clk";
+				interrupts = <17 4 0>;
 			};
 
 			tcb1: timer@f800c000 {
 				compatible = "atmel,at91sam9x5-tcb";
 				reg = <0xf800c000 0x100>;
-				interrupts = <17 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tcb0_clk>;
-				clock-names = "t0_clk";
+				interrupts = <17 4 0>;
 			};
 
 			dma0: dma-controller@ffffec00 {
 				compatible = "atmel,at91sam9g45-dma";
 				reg = <0xffffec00 0x200>;
-				interrupts = <20 IRQ_TYPE_LEVEL_HIGH 0>;
+				interrupts = <20 4 0>;
 				#dma-cells = <2>;
-				clocks = <&dma0_clk>;
-				clock-names = "dma_clk";
 			};
 
 			dma1: dma-controller@ffffee00 {
 				compatible = "atmel,at91sam9g45-dma";
 				reg = <0xffffee00 0x200>;
-				interrupts = <21 IRQ_TYPE_LEVEL_HIGH 0>;
+				interrupts = <21 4 0>;
 				#dma-cells = <2>;
-				clocks = <&dma1_clk>;
-				clock-names = "dma_clk";
 			};
 
 			pinctrl@fffff400 {
@@ -458,388 +128,351 @@
 				dbgu {
 					pinctrl_dbgu: dbgu-0 {
 						atmel,pins =
-							<AT91_PIOA 9 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA9 periph A */
-							 AT91_PIOA 10 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA10 periph A with pullup */
+							<0 9 0x1 0x0	/* PA9 periph A */
+							 0 10 0x1 0x1>;	/* PA10 periph A with pullup */
 					};
 				};
 
 				usart0 {
 					pinctrl_usart0: usart0-0 {
 						atmel,pins =
-							<AT91_PIOA 0 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA0 periph A with pullup */
-							 AT91_PIOA 1 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA1 periph A */
+							<0 0 0x1 0x1	/* PA0 periph A with pullup */
+							 0 1 0x1 0x0>;	/* PA1 periph A */
 					};
 
 					pinctrl_usart0_rts: usart0_rts-0 {
 						atmel,pins =
-							<AT91_PIOA 2 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA2 periph A */
+							<0 2 0x1 0x0>;	/* PA2 periph A */
 					};
 
 					pinctrl_usart0_cts: usart0_cts-0 {
 						atmel,pins =
-							<AT91_PIOA 3 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA3 periph A */
+							<0 3 0x1 0x0>;	/* PA3 periph A */
 					};
 
 					pinctrl_usart0_sck: usart0_sck-0 {
 						atmel,pins =
-							<AT91_PIOA 4 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA4 periph A */
+							<0 4 0x1 0x0>;	/* PA4 periph A */
 					};
 				};
 
 				usart1 {
 					pinctrl_usart1: usart1-0 {
 						atmel,pins =
-							<AT91_PIOA 5 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA5 periph A with pullup */
-							 AT91_PIOA 6 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA6 periph A */
+							<0 5 0x1 0x1	/* PA5 periph A with pullup */
+							 0 6 0x1 0x0>;	/* PA6 periph A */
 					};
 
 					pinctrl_usart1_rts: usart1_rts-0 {
 						atmel,pins =
-							<AT91_PIOC 27 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* PC27 periph C */
+							<2 27 0x3 0x0>;	/* PC27 periph C */
 					};
 
 					pinctrl_usart1_cts: usart1_cts-0 {
 						atmel,pins =
-							<AT91_PIOC 28 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* PC28 periph C */
+							<2 28 0x3 0x0>;	/* PC28 periph C */
 					};
 
 					pinctrl_usart1_sck: usart1_sck-0 {
 						atmel,pins =
-							<AT91_PIOC 28 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* PC29 periph C */
+							<2 28 0x3 0x0>;	/* PC29 periph C */
 					};
 				};
 
 				usart2 {
 					pinctrl_usart2: usart2-0 {
 						atmel,pins =
-							<AT91_PIOA 7 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA7 periph A with pullup */
-							 AT91_PIOA 8 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA8 periph A */
+							<0 7 0x1 0x1	/* PA7 periph A with pullup */
+							 0 8 0x1 0x0>;	/* PA8 periph A */
 					};
 
-					pinctrl_usart2_rts: usart2_rts-0 {
+					pinctrl_uart2_rts: uart2_rts-0 {
 						atmel,pins =
-							<AT91_PIOB 0 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB0 periph B */
+							<1 0 0x2 0x0>;	/* PB0 periph B */
 					};
 
-					pinctrl_usart2_cts: usart2_cts-0 {
+					pinctrl_uart2_cts: uart2_cts-0 {
 						atmel,pins =
-							<AT91_PIOB 1 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB1 periph B */
+							<1 1 0x2 0x0>;	/* PB1 periph B */
 					};
 
 					pinctrl_usart2_sck: usart2_sck-0 {
 						atmel,pins =
-							<AT91_PIOB 2 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB2 periph B */
+							<1 2 0x2 0x0>;	/* PB2 periph B */
+					};
+				};
+
+				usart3 {
+					pinctrl_usart3: usart3-0 {
+						atmel,pins =
+							<2 22 0x2 0x1	/* PC22 periph B with pullup */
+							 2 23 0x2 0x0>;	/* PC23 periph B */
+					};
+
+					pinctrl_usart3_rts: usart3_rts-0 {
+						atmel,pins =
+							<2 24 0x2 0x0>;	/* PC24 periph B */
+					};
+
+					pinctrl_usart3_cts: usart3_cts-0 {
+						atmel,pins =
+							<2 25 0x2 0x0>;	/* PC25 periph B */
+					};
+
+					pinctrl_usart3_sck: usart3_sck-0 {
+						atmel,pins =
+							<2 26 0x2 0x0>;	/* PC26 periph B */
 					};
 				};
 
 				uart0 {
 					pinctrl_uart0: uart0-0 {
 						atmel,pins =
-							<AT91_PIOC 8 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PC8 periph C */
-							 AT91_PIOC 9 AT91_PERIPH_C AT91_PINCTRL_PULL_UP>;	/* PC9 periph C with pullup */
+							<2 8 0x3 0x0	/* PC8 periph C */
+							 2 9 0x3 0x1>;	/* PC9 periph C with pullup */
 					};
 				};
 
 				uart1 {
 					pinctrl_uart1: uart1-0 {
 						atmel,pins =
-							<AT91_PIOC 16 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PC16 periph C */
-							 AT91_PIOC 17 AT91_PERIPH_C AT91_PINCTRL_PULL_UP>;	/* PC17 periph C with pullup */
+							<2 16 0x3 0x0	/* PC16 periph C */
+							 2 17 0x3 0x1>;	/* PC17 periph C with pullup */
 					};
 				};
 
 				nand {
 					pinctrl_nand: nand-0 {
 						atmel,pins =
-							<AT91_PIOD 0 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD0 periph A Read Enable */
-							 AT91_PIOD 1 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD1 periph A Write Enable */
-							 AT91_PIOD 2 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD2 periph A Address Latch Enable */
-							 AT91_PIOD 3 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD3 periph A Command Latch Enable */
-							 AT91_PIOD 4 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP	/* PD4 gpio Chip Enable pin pull_up */
-							 AT91_PIOD 5 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP	/* PD5 gpio RDY/BUSY pin pull_up */
-							 AT91_PIOD 6 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD6 periph A Data bit 0 */
-							 AT91_PIOD 7 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD7 periph A Data bit 1 */
-							 AT91_PIOD 8 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD8 periph A Data bit 2 */
-							 AT91_PIOD 9 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD9 periph A Data bit 3 */
-							 AT91_PIOD 10 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD10 periph A Data bit 4 */
-							 AT91_PIOD 11 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD11 periph A Data bit 5 */
-							 AT91_PIOD 12 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD12 periph A Data bit 6 */
-							 AT91_PIOD 13 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD13 periph A Data bit 7 */
+							<3 0 0x1 0x0	/* PD0 periph A Read Enable */
+							 3 1 0x1 0x0	/* PD1 periph A Write Enable */
+							 3 2 0x1 0x0	/* PD2 periph A Address Latch Enable */
+							 3 3 0x1 0x0	/* PD3 periph A Command Latch Enable */
+							 3 4 0x0 0x1	/* PD4 gpio Chip Enable pin pull_up */
+							 3 5 0x0 0x1	/* PD5 gpio RDY/BUSY pin pull_up */
+							 3 6 0x1 0x0	/* PD6 periph A Data bit 0 */
+							 3 7 0x1 0x0	/* PD7 periph A Data bit 1 */
+							 3 8 0x1 0x0	/* PD8 periph A Data bit 2 */
+							 3 9 0x1 0x0	/* PD9 periph A Data bit 3 */
+							 3 10 0x1 0x0	/* PD10 periph A Data bit 4 */
+							 3 11 0x1 0x0	/* PD11 periph A Data bit 5 */
+							 3 12 0x1 0x0	/* PD12 periph A Data bit 6 */
+							 3 13 0x1 0x0>;	/* PD13 periph A Data bit 7 */
 					};
 
 					pinctrl_nand_16bits: nand_16bits-0 {
 						atmel,pins =
-							<AT91_PIOD 14 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD14 periph A Data bit 8 */
-							 AT91_PIOD 15 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD15 periph A Data bit 9 */
-							 AT91_PIOD 16 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD16 periph A Data bit 10 */
-							 AT91_PIOD 17 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD17 periph A Data bit 11 */
-							 AT91_PIOD 18 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD18 periph A Data bit 12 */
-							 AT91_PIOD 19 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD19 periph A Data bit 13 */
-							 AT91_PIOD 20 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD20 periph A Data bit 14 */
-							 AT91_PIOD 21 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD21 periph A Data bit 15 */
+							<3 14 0x1 0x0	/* PD14 periph A Data bit 8 */
+							 3 15 0x1 0x0	/* PD15 periph A Data bit 9 */
+							 3 16 0x1 0x0	/* PD16 periph A Data bit 10 */
+							 3 17 0x1 0x0	/* PD17 periph A Data bit 11 */
+							 3 18 0x1 0x0	/* PD18 periph A Data bit 12 */
+							 3 19 0x1 0x0	/* PD19 periph A Data bit 13 */
+							 3 20 0x1 0x0	/* PD20 periph A Data bit 14 */
+							 3 21 0x1 0x0>;	/* PD21 periph A Data bit 15 */
+					};
+				};
+
+				macb0 {
+					pinctrl_macb0_rmii: macb0_rmii-0 {
+						atmel,pins =
+							<1 0 0x1 0x0	/* PB0 periph A */
+							 1 1 0x1 0x0	/* PB1 periph A */
+							 1 2 0x1 0x0	/* PB2 periph A */
+							 1 3 0x1 0x0	/* PB3 periph A */
+							 1 4 0x1 0x0	/* PB4 periph A */
+							 1 5 0x1 0x0	/* PB5 periph A */
+							 1 6 0x1 0x0	/* PB6 periph A */
+							 1 7 0x1 0x0	/* PB7 periph A */
+							 1 9 0x1 0x0	/* PB9 periph A */
+							 1 10 0x1 0x0>;	/* PB10 periph A */
+					};
+
+					pinctrl_macb0_rmii_mii: macb0_rmii_mii-0 {
+						atmel,pins =
+							<1 8 0x1 0x0	/* PB8 periph A */
+							 1 11 0x1 0x0	/* PB11 periph A */
+							 1 12 0x1 0x0	/* PB12 periph A */
+							 1 13 0x1 0x0	/* PB13 periph A */
+							 1 14 0x1 0x0	/* PB14 periph A */
+							 1 15 0x1 0x0	/* PB15 periph A */
+							 1 16 0x1 0x0	/* PB16 periph A */
+							 1 17 0x1 0x0>;	/* PB17 periph A */
 					};
 				};
 
 				mmc0 {
 					pinctrl_mmc0_slot0_clk_cmd_dat0: mmc0_slot0_clk_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 17 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA17 periph A */
-							 AT91_PIOA 16 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA16 periph A with pullup */
-							 AT91_PIOA 15 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA15 periph A with pullup */
+							<0 17 0x1 0x0	/* PA17 periph A */
+							 0 16 0x1 0x1	/* PA16 periph A with pullup */
+							 0 15 0x1 0x1>;	/* PA15 periph A with pullup */
 					};
 
 					pinctrl_mmc0_slot0_dat1_3: mmc0_slot0_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 18 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA18 periph A with pullup */
-							 AT91_PIOA 19 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PA19 periph A with pullup */
-							 AT91_PIOA 20 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PA20 periph A with pullup */
+							<0 18 0x1 0x1	/* PA18 periph A with pullup */
+							 0 19 0x1 0x1	/* PA19 periph A with pullup */
+							 0 20 0x1 0x1>;	/* PA20 periph A with pullup */
 					};
 				};
 
 				mmc1 {
 					pinctrl_mmc1_slot0_clk_cmd_dat0: mmc1_slot0_clk_cmd_dat0-0 {
 						atmel,pins =
-							<AT91_PIOA 13 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA13 periph B */
-							 AT91_PIOA 12 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA12 periph B with pullup */
-							 AT91_PIOA 11 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PA11 periph B with pullup */
+							<0 13 0x2 0x0	/* PA13 periph B */
+							 0 12 0x2 0x1	/* PA12 periph B with pullup */
+							 0 11 0x2 0x1>;	/* PA11 periph B with pullup */
 					};
 
 					pinctrl_mmc1_slot0_dat1_3: mmc1_slot0_dat1_3-0 {
 						atmel,pins =
-							<AT91_PIOA 2 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA2 periph B with pullup */
-							 AT91_PIOA 3 AT91_PERIPH_B AT91_PINCTRL_PULL_UP	/* PA3 periph B with pullup */
-							 AT91_PIOA 4 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PA4 periph B with pullup */
+							<0 2 0x2 0x1	/* PA2 periph B with pullup */
+							 0 3 0x2 0x1	/* PA3 periph B with pullup */
+							 0 4 0x2 0x1>;	/* PA4 periph B with pullup */
 					};
 				};
 
 				ssc0 {
 					pinctrl_ssc0_tx: ssc0_tx-0 {
 						atmel,pins =
-							<AT91_PIOA 24 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA24 periph B */
-							 AT91_PIOA 25 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA25 periph B */
-							 AT91_PIOA 26 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA26 periph B */
+							<0 24 0x2 0x0	/* PA24 periph B */
+							 0 25 0x2 0x0	/* PA25 periph B */
+							 0 26 0x2 0x0>;	/* PA26 periph B */
 					};
 
 					pinctrl_ssc0_rx: ssc0_rx-0 {
 						atmel,pins =
-							<AT91_PIOA 27 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA27 periph B */
-							 AT91_PIOA 28 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA28 periph B */
-							 AT91_PIOA 29 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA29 periph B */
+							<0 27 0x2 0x0	/* PA27 periph B */
+							 0 28 0x2 0x0	/* PA28 periph B */
+							 0 29 0x2 0x0>;	/* PA29 periph B */
 					};
 				};
 
 				spi0 {
 					pinctrl_spi0: spi0-0 {
 						atmel,pins =
-							<AT91_PIOA 11 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA11 periph A SPI0_MISO pin */
-							 AT91_PIOA 12 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA12 periph A SPI0_MOSI pin */
-							 AT91_PIOA 13 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA13 periph A SPI0_SPCK pin */
+							<0 11 0x1 0x0	/* PA11 periph A SPI0_MISO pin */
+							 0 12 0x1 0x0	/* PA12 periph A SPI0_MOSI pin */
+							 0 13 0x1 0x0>;	/* PA13 periph A SPI0_SPCK pin */
 					};
 				};
 
 				spi1 {
 					pinctrl_spi1: spi1-0 {
 						atmel,pins =
-							<AT91_PIOA 21 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA21 periph B SPI1_MISO pin */
-							 AT91_PIOA 22 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PA22 periph B SPI1_MOSI pin */
-							 AT91_PIOA 23 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PA23 periph B SPI1_SPCK pin */
+							<0 21 0x2 0x0	/* PA21 periph B SPI1_MISO pin */
+							 0 22 0x2 0x0	/* PA22 periph B SPI1_MOSI pin */
+							 0 23 0x2 0x0>;	/* PA23 periph B SPI1_SPCK pin */
 					};
 				};
 
 				i2c0 {
 					pinctrl_i2c0: i2c0-0 {
 						atmel,pins =
-							<AT91_PIOA 30 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA30 periph A I2C0 data */
-							 AT91_PIOA 31 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA31 periph A I2C0 clock */
+							<0 30 0x1 0x0	/* PA30 periph A I2C0 data */
+							 0 31 0x1 0x0>;	/* PA31 periph A I2C0 clock */
 					};
 				};
 
 				i2c1 {
 					pinctrl_i2c1: i2c1-0 {
 						atmel,pins =
-							<AT91_PIOC 0 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PC0 periph C I2C1 data */
-							 AT91_PIOC 1 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* PC1 periph C I2C1 clock */
+							<2 0 0x3 0x0	/* PC0 periph C I2C1 data */
+							 2 1 0x3 0x0>;	/* PC1 periph C I2C1 clock */
 					};
 				};
 
 				i2c2 {
 					pinctrl_i2c2: i2c2-0 {
 						atmel,pins =
-							<AT91_PIOB 4 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB4 periph B I2C2 data */
-							 AT91_PIOB 5 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB5 periph B I2C2 clock */
+							<1 4 0x2 0x0	/* PB4 periph B I2C2 data */
+							 1 5 0x2 0x0>;	/* PB5 periph B I2C2 clock */
 					};
 				};
 
 				i2c_gpio0 {
 					pinctrl_i2c_gpio0: i2c_gpio0-0 {
 						atmel,pins =
-							<AT91_PIOA 30 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE	/* PA30 gpio multidrive I2C0 data */
-							 AT91_PIOA 31 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE>;	/* PA31 gpio multidrive I2C0 clock */
+							<0 30 0x0 0x2	/* PA30 gpio multidrive I2C0 data */
+							 0 31 0x0 0x2>;	/* PA31 gpio multidrive I2C0 clock */
 					};
 				};
 
 				i2c_gpio1 {
 					pinctrl_i2c_gpio1: i2c_gpio1-0 {
 						atmel,pins =
-							<AT91_PIOC 0 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE	/* PC0 gpio multidrive I2C1 data */
-							 AT91_PIOC 1 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE>;	/* PC1 gpio multidrive I2C1 clock */
+							<2 0 0x0 0x2	/* PC0 gpio multidrive I2C1 data */
+							 2 1 0x0 0x2>;	/* PC1 gpio multidrive I2C1 clock */
 					};
 				};
 
 				i2c_gpio2 {
 					pinctrl_i2c_gpio2: i2c_gpio2-0 {
 						atmel,pins =
-							<AT91_PIOB 4 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE	/* PB4 gpio multidrive I2C2 data */
-							 AT91_PIOB 5 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE>;	/* PB5 gpio multidrive I2C2 clock */
-					};
-				};
-
-				tcb0 {
-					pinctrl_tcb0_tclk0: tcb0_tclk0-0 {
-						atmel,pins = <AT91_PIOA 24 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk1: tcb0_tclk1-0 {
-						atmel,pins = <AT91_PIOA 25 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tclk2: tcb0_tclk2-0 {
-						atmel,pins = <AT91_PIOA 26 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa0: tcb0_tioa0-0 {
-						atmel,pins = <AT91_PIOA 21 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa1: tcb0_tioa1-0 {
-						atmel,pins = <AT91_PIOA 22 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tioa2: tcb0_tioa2-0 {
-						atmel,pins = <AT91_PIOA 23 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob0: tcb0_tiob0-0 {
-						atmel,pins = <AT91_PIOA 27 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob1: tcb0_tiob1-0 {
-						atmel,pins = <AT91_PIOA 28 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb0_tiob2: tcb0_tiob2-0 {
-						atmel,pins = <AT91_PIOA 29 AT91_PERIPH_A AT91_PINCTRL_NONE>;
-					};
-				};
-
-				tcb1 {
-					pinctrl_tcb1_tclk0: tcb1_tclk0-0 {
-						atmel,pins = <AT91_PIOC 4 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tclk1: tcb1_tclk1-0 {
-						atmel,pins = <AT91_PIOC 7 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tclk2: tcb1_tclk2-0 {
-						atmel,pins = <AT91_PIOC 14 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa0: tcb1_tioa0-0 {
-						atmel,pins = <AT91_PIOC 2 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa1: tcb1_tioa1-0 {
-						atmel,pins = <AT91_PIOC 5 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tioa2: tcb1_tioa2-0 {
-						atmel,pins = <AT91_PIOC 12 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob0: tcb1_tiob0-0 {
-						atmel,pins = <AT91_PIOC 3 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob1: tcb1_tiob1-0 {
-						atmel,pins = <AT91_PIOC 6 AT91_PERIPH_C AT91_PINCTRL_NONE>;
-					};
-
-					pinctrl_tcb1_tiob2: tcb1_tiob2-0 {
-						atmel,pins = <AT91_PIOC 13 AT91_PERIPH_C AT91_PINCTRL_NONE>;
+							<1 4 0x0 0x2	/* PB4 gpio multidrive I2C2 data */
+							 1 5 0x0 0x2>;	/* PB5 gpio multidrive I2C2 clock */
 					};
 				};
 
 				pioA: gpio@fffff400 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffff400 0x200>;
-					interrupts = <2 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <2 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioAB_clk>;
 				};
 
 				pioB: gpio@fffff600 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffff600 0x200>;
-					interrupts = <2 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <2 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					#gpio-lines = <19>;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioAB_clk>;
 				};
 
 				pioC: gpio@fffff800 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffff800 0x200>;
-					interrupts = <3 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <3 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioCD_clk>;
 				};
 
 				pioD: gpio@fffffa00 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffffa00 0x200>;
-					interrupts = <3 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <3 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					#gpio-lines = <22>;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioCD_clk>;
 				};
 			};
 
 			ssc0: ssc@f0010000 {
 				compatible = "atmel,at91sam9g45-ssc";
 				reg = <0xf0010000 0x4000>;
-				interrupts = <28 IRQ_TYPE_LEVEL_HIGH 5>;
-				dmas = <&dma0 1 AT91_DMA_CFG_PER_ID(13)>,
-				       <&dma0 1 AT91_DMA_CFG_PER_ID(14)>;
-				dma-names = "tx", "rx";
+				interrupts = <28 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc0_tx &pinctrl_ssc0_rx>;
-				clocks = <&ssc0_clk>;
-				clock-names = "pclk";
 				status = "disabled";
 			};
 
 			mmc0: mmc@f0008000 {
 				compatible = "atmel,hsmci";
 				reg = <0xf0008000 0x600>;
-				interrupts = <12 IRQ_TYPE_LEVEL_HIGH 0>;
-				dmas = <&dma0 1 AT91_DMA_CFG_PER_ID(0)>;
+				interrupts = <12 4 0>;
+				dmas = <&dma0 1 0>;
 				dma-names = "rxtx";
-				pinctrl-names = "default";
-				clocks = <&mci0_clk>;
-				clock-names = "mci_clk";
 				#address-cells = <1>;
 				#size-cells = <0>;
 				status = "disabled";
@@ -848,12 +481,9 @@
 			mmc1: mmc@f000c000 {
 				compatible = "atmel,hsmci";
 				reg = <0xf000c000 0x600>;
-				interrupts = <26 IRQ_TYPE_LEVEL_HIGH 0>;
-				dmas = <&dma1 1 AT91_DMA_CFG_PER_ID(0)>;
+				interrupts = <26 4 0>;
+				dmas = <&dma1 1 0>;
 				dma-names = "rxtx";
-				pinctrl-names = "default";
-				clocks = <&mci1_clk>;
-				clock-names = "mci_clk";
 				#address-cells = <1>;
 				#size-cells = <0>;
 				status = "disabled";
@@ -862,166 +492,133 @@
 			dbgu: serial@fffff200 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xfffff200 0x200>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
+				interrupts = <1 4 7>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_dbgu>;
-				dmas = <&dma1 1 AT91_DMA_CFG_PER_ID(8)>,
-				       <&dma1 1 (AT91_DMA_CFG_PER_ID(9) | AT91_DMA_CFG_FIFOCFG_ASAP)>;
-				dma-names = "tx", "rx";
-				clocks = <&mck>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart0: serial@f801c000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf801c000 0x200>;
-				interrupts = <5 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <5 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart0>;
-				dmas = <&dma0 1 AT91_DMA_CFG_PER_ID(3)>,
-				       <&dma0 1 (AT91_DMA_CFG_PER_ID(4) | AT91_DMA_CFG_FIFOCFG_ASAP)>;
-				dma-names = "tx", "rx";
-				clocks = <&usart0_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart1: serial@f8020000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf8020000 0x200>;
-				interrupts = <6 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <6 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart1>;
-				dmas = <&dma0 1 AT91_DMA_CFG_PER_ID(5)>,
-				       <&dma0 1 (AT91_DMA_CFG_PER_ID(6) | AT91_DMA_CFG_FIFOCFG_ASAP)>;
-				dma-names = "tx", "rx";
-				clocks = <&usart1_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart2: serial@f8024000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf8024000 0x200>;
-				interrupts = <7 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <7 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart2>;
-				dmas = <&dma1 1 AT91_DMA_CFG_PER_ID(12)>,
-				       <&dma1 1 (AT91_DMA_CFG_PER_ID(13) | AT91_DMA_CFG_FIFOCFG_ASAP)>;
-				dma-names = "tx", "rx";
-				clocks = <&usart2_clk>;
-				clock-names = "usart";
+				status = "disabled";
+			};
+
+			macb0: ethernet@f802c000 {
+				compatible = "cdns,at32ap7000-macb", "cdns,macb";
+				reg = <0xf802c000 0x100>;
+				interrupts = <24 4 3>;
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_macb0_rmii>;
+				status = "disabled";
+			};
+
+			macb1: ethernet@f8030000 {
+				compatible = "cdns,at32ap7000-macb", "cdns,macb";
+				reg = <0xf8030000 0x100>;
+				interrupts = <27 4 3>;
 				status = "disabled";
 			};
 
 			i2c0: i2c@f8010000 {
 				compatible = "atmel,at91sam9x5-i2c";
 				reg = <0xf8010000 0x100>;
-				interrupts = <9 IRQ_TYPE_LEVEL_HIGH 6>;
-				dmas = <&dma0 1 AT91_DMA_CFG_PER_ID(7)>,
-				       <&dma0 1 AT91_DMA_CFG_PER_ID(8)>;
+				interrupts = <9 4 6>;
+				dmas = <&dma0 1 7>,
+				       <&dma0 1 8>;
 				dma-names = "tx", "rx";
 				#address-cells = <1>;
 				#size-cells = <0>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_i2c0>;
-				clocks = <&twi0_clk>;
 				status = "disabled";
 			};
 
 			i2c1: i2c@f8014000 {
 				compatible = "atmel,at91sam9x5-i2c";
 				reg = <0xf8014000 0x100>;
-				interrupts = <10 IRQ_TYPE_LEVEL_HIGH 6>;
-				dmas = <&dma1 1 AT91_DMA_CFG_PER_ID(5)>,
-				       <&dma1 1 AT91_DMA_CFG_PER_ID(6)>;
+				interrupts = <10 4 6>;
+				dmas = <&dma1 1 5>,
+				       <&dma1 1 6>;
 				dma-names = "tx", "rx";
 				#address-cells = <1>;
 				#size-cells = <0>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_i2c1>;
-				clocks = <&twi1_clk>;
 				status = "disabled";
 			};
 
 			i2c2: i2c@f8018000 {
 				compatible = "atmel,at91sam9x5-i2c";
 				reg = <0xf8018000 0x100>;
-				interrupts = <11 IRQ_TYPE_LEVEL_HIGH 6>;
-				dmas = <&dma0 1 AT91_DMA_CFG_PER_ID(9)>,
-				       <&dma0 1 AT91_DMA_CFG_PER_ID(10)>;
+				interrupts = <11 4 6>;
+				dmas = <&dma0 1 9>,
+				       <&dma0 1 10>;
 				dma-names = "tx", "rx";
 				#address-cells = <1>;
 				#size-cells = <0>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_i2c2>;
-				clocks = <&twi2_clk>;
-				status = "disabled";
-			};
-
-			uart0: serial@f8040000 {
-				compatible = "atmel,at91sam9260-usart";
-				reg = <0xf8040000 0x200>;
-				interrupts = <15 IRQ_TYPE_LEVEL_HIGH 5>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_uart0>;
-				clocks = <&uart0_clk>;
-				clock-names = "usart";
-				status = "disabled";
-			};
-
-			uart1: serial@f8044000 {
-				compatible = "atmel,at91sam9260-usart";
-				reg = <0xf8044000 0x200>;
-				interrupts = <16 IRQ_TYPE_LEVEL_HIGH 5>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_uart1>;
-				clocks = <&uart1_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			adc0: adc@f804c000 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				compatible = "atmel,at91sam9x5-adc";
+				compatible = "atmel,at91sam9260-adc";
 				reg = <0xf804c000 0x100>;
-				interrupts = <19 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&adc_clk>,
-					 <&adc_op_clk>;
-				clock-names = "adc_clk", "adc_op_clk";
-				atmel,adc-use-external-triggers;
+				interrupts = <19 4 0>;
+				atmel,adc-use-external;
 				atmel,adc-channels-used = <0xffff>;
 				atmel,adc-vref = <3300>;
+				atmel,adc-num-channels = <12>;
 				atmel,adc-startup-time = <40>;
+				atmel,adc-channel-base = <0x50>;
+				atmel,adc-drdy-mask = <0x1000000>;
+				atmel,adc-status-register = <0x30>;
+				atmel,adc-trigger-register = <0xc0>;
 				atmel,adc-res = <8 10>;
 				atmel,adc-res-names = "lowres", "highres";
 				atmel,adc-use-res = "highres";
 
 				trigger@0 {
-					reg = <0>;
 					trigger-name = "external-rising";
 					trigger-value = <0x1>;
 					trigger-external;
 				};
 
 				trigger@1 {
-					reg = <1>;
 					trigger-name = "external-falling";
 					trigger-value = <0x2>;
 					trigger-external;
 				};
 
 				trigger@2 {
-					reg = <2>;
 					trigger-name = "external-any";
 					trigger-value = <0x3>;
 					trigger-external;
 				};
 
 				trigger@3 {
-					reg = <3>;
 					trigger-name = "continuous";
 					trigger-value = <0x6>;
 				};
@@ -1032,14 +629,9 @@
 				#size-cells = <0>;
 				compatible = "atmel,at91rm9200-spi";
 				reg = <0xf0000000 0x100>;
-				interrupts = <13 IRQ_TYPE_LEVEL_HIGH 3>;
-				dmas = <&dma0 1 AT91_DMA_CFG_PER_ID(1)>,
-				       <&dma0 1 AT91_DMA_CFG_PER_ID(2)>;
-				dma-names = "tx", "rx";
+				interrupts = <13 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi0>;
-				clocks = <&spi0_clk>;
-				clock-names = "spi_clk";
 				status = "disabled";
 			};
 
@@ -1048,104 +640,16 @@
 				#size-cells = <0>;
 				compatible = "atmel,at91rm9200-spi";
 				reg = <0xf0004000 0x100>;
-				interrupts = <14 IRQ_TYPE_LEVEL_HIGH 3>;
-				dmas = <&dma1 1 AT91_DMA_CFG_PER_ID(1)>,
-				       <&dma1 1 AT91_DMA_CFG_PER_ID(2)>;
-				dma-names = "tx", "rx";
+				interrupts = <14 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi1>;
-				clocks = <&spi1_clk>;
-				clock-names = "spi_clk";
-				status = "disabled";
-			};
-
-			usb2: gadget@f803c000 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				compatible = "atmel,at91sam9rl-udc";
-				reg = <0x00500000 0x80000
-				       0xf803c000 0x400>;
-				interrupts = <23 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&utmi>, <&udphs_clk>;
-				clock-names = "hclk", "pclk";
-				status = "disabled";
-
-				ep0 {
-					reg = <0>;
-					atmel,fifo-size = <64>;
-					atmel,nb-banks = <1>;
-				};
-
-				ep1 {
-					reg = <1>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <2>;
-					atmel,can-dma;
-					atmel,can-isoc;
-				};
-
-				ep2 {
-					reg = <2>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <2>;
-					atmel,can-dma;
-					atmel,can-isoc;
-				};
-
-				ep3 {
-					reg = <3>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <3>;
-					atmel,can-dma;
-				};
-
-				ep4 {
-					reg = <4>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <3>;
-					atmel,can-dma;
-				};
-
-				ep5 {
-					reg = <5>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <3>;
-					atmel,can-dma;
-					atmel,can-isoc;
-				};
-
-				ep6 {
-					reg = <6>;
-					atmel,fifo-size = <1024>;
-					atmel,nb-banks = <3>;
-					atmel,can-dma;
-					atmel,can-isoc;
-				};
-			};
-
-			watchdog@fffffe40 {
-				compatible = "atmel,at91sam9260-wdt";
-				reg = <0xfffffe40 0x10>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				atmel,watchdog-type = "hardware";
-				atmel,reset-type = "all";
-				atmel,dbg-halt;
 				status = "disabled";
 			};
 
 			rtc@fffffeb0 {
 				compatible = "atmel,at91sam9x5-rtc";
 				reg = <0xfffffeb0 0x40>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				status = "disabled";
-			};
-
-			pwm0: pwm@f8034000 {
-				compatible = "atmel,at91sam9rl-pwm";
-				reg = <0xf8034000 0x300>;
-				interrupts = <18 IRQ_TYPE_LEVEL_HIGH 4>;
-				clocks = <&pwm_clk>;
-				#pwm-cells = <3>;
+				interrupts = <1 4 7>;
 				status = "disabled";
 			};
 		};
@@ -1162,11 +666,10 @@
 			atmel,pmecc-lookup-table-offset = <0x0 0x8000>;
 			atmel,nand-addr-offset = <21>;
 			atmel,nand-cmd-offset = <22>;
-			atmel,nand-has-dma;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_nand>;
-			gpios = <&pioD 5 GPIO_ACTIVE_HIGH
-				 &pioD 4 GPIO_ACTIVE_HIGH
+			gpios = <&pioD 5 0
+				 &pioD 4 0
 				 0
 				>;
 			status = "disabled";
@@ -1175,26 +678,22 @@
 		usb0: ohci@00600000 {
 			compatible = "atmel,at91rm9200-ohci", "usb-ohci";
 			reg = <0x00600000 0x100000>;
-			interrupts = <22 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&usb>, <&uhphs_clk>, <&uhphs_clk>, <&uhpck>;
-			clock-names = "usb_clk", "ohci_clk", "hclk", "uhpck";
+			interrupts = <22 4 2>;
 			status = "disabled";
 		};
 
 		usb1: ehci@00700000 {
 			compatible = "atmel,at91sam9g45-ehci", "usb-ehci";
 			reg = <0x00700000 0x100000>;
-			interrupts = <22 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&utmi>, <&uhphs_clk>, <&uhpck>;
-			clock-names = "usb_clk", "ehci_clk", "uhpck";
+			interrupts = <22 4 2>;
 			status = "disabled";
 		};
 	};
 
 	i2c@0 {
 		compatible = "i2c-gpio";
-		gpios = <&pioA 30 GPIO_ACTIVE_HIGH /* sda */
-			 &pioA 31 GPIO_ACTIVE_HIGH /* scl */
+		gpios = <&pioA 30 0 /* sda */
+			 &pioA 31 0 /* scl */
 			>;
 		i2c-gpio,sda-open-drain;
 		i2c-gpio,scl-open-drain;
@@ -1208,8 +707,8 @@
 
 	i2c@1 {
 		compatible = "i2c-gpio";
-		gpios = <&pioC 0 GPIO_ACTIVE_HIGH /* sda */
-			 &pioC 1 GPIO_ACTIVE_HIGH /* scl */
+		gpios = <&pioC 0 0 /* sda */
+			 &pioC 1 0 /* scl */
 			>;
 		i2c-gpio,sda-open-drain;
 		i2c-gpio,scl-open-drain;
@@ -1223,8 +722,8 @@
 
 	i2c@2 {
 		compatible = "i2c-gpio";
-		gpios = <&pioB 4 GPIO_ACTIVE_HIGH /* sda */
-			 &pioB 5 GPIO_ACTIVE_HIGH /* scl */
+		gpios = <&pioB 4 0 /* sda */
+			 &pioB 5 0 /* scl */
 			>;
 		i2c-gpio,sda-open-drain;
 		i2c-gpio,scl-open-drain;
diff -urNp a/arch/arm/boot/dts/at91sam9x5cm.dtsi b/arch/arm/boot/dts/at91sam9x5cm.dtsi
--- a/arch/arm/boot/dts/at91sam9x5cm.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9x5cm.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -23,22 +23,12 @@
 		};
 	};
 
-	clocks {
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <12000000>;
-		};
-	};
-
 	ahb {
 		apb {
 			pinctrl@fffff400 {
 				1wire_cm {
 					pinctrl_1wire_cm: 1wire_cm-0 {
-						atmel,pins = <AT91_PIOB 18 AT91_PERIPH_GPIO AT91_PINCTRL_MULTI_DRIVE>; /* PB18 multidrive, conflicts with led */
+						atmel,pins = <1 18 0x0 0x2>; /* PB18 multidrive, conflicts with led */
 					};
 				};
 			};
@@ -85,19 +75,19 @@
 
 		pb18 {
 			label = "pb18";
-			gpios = <&pioB 18 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 18 1>;
 			linux,default-trigger = "heartbeat";
 		};
 
 		pd21 {
 			label = "pd21";
-			gpios = <&pioD 21 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioD 21 0>;
 		};
 	};
 
 	1wire_cm {
 		compatible = "w1-gpio";
-		gpios = <&pioB 18 GPIO_ACTIVE_HIGH>;
+		gpios = <&pioB 18 0>;
 		linux,open-drain;
 		pinctrl-names = "default";
 		pinctrl-0 = <&pinctrl_1wire_cm>;
diff -urNp a/arch/arm/boot/dts/at91sam9x5ek.dtsi b/arch/arm/boot/dts/at91sam9x5ek.dtsi
--- a/arch/arm/boot/dts/at91sam9x5ek.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/at91sam9x5ek.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  *
  * Licensed under GPLv2 or later.
  */
-#include "at91sam9x5cm.dtsi"
+/include/ "at91sam9x5cm.dtsi"
 
 / {
 	model = "Atmel AT91SAM9X5-EK";
@@ -27,7 +27,7 @@
 				slot@0 {
 					reg = <0>;
 					bus-width = <4>;
-					cd-gpios = <&pioD 15 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioD 15 0>;
 				};
 			};
 
@@ -40,7 +40,7 @@
 				slot@0 {
 					reg = <0>;
 					bus-width = <4>;
-					cd-gpios = <&pioD 14 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioD 14 0>;
 				};
 			};
 
@@ -52,41 +52,22 @@
 				status = "okay";
 			};
 
-			usb2: gadget@f803c000 {
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_board_usb2>;
-				atmel,vbus-gpio = <&pioB 16 GPIO_ACTIVE_HIGH>;
-				status = "okay";
-			};
-
 			i2c0: i2c@f8010000 {
 				status = "okay";
-
-				wm8731: wm8731@1a {
-					compatible = "wm8731";
-					reg = <0x1a>;
-				};
 			};
 
 			pinctrl@fffff400 {
 				mmc0 {
 					pinctrl_board_mmc0: mmc0-board {
 						atmel,pins =
-							<AT91_PIOD 15 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>;	/* PD15 gpio CD pin pull up and deglitch */
+							<3 15 0x0 0x5>;	/* PD15 gpio CD pin pull up and deglitch */
 					};
 				};
 
 				mmc1 {
 					pinctrl_board_mmc1: mmc1-board {
 						atmel,pins =
-							<AT91_PIOD 14 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>;	/* PD14 gpio CD pin pull up and deglitch */
-					};
-				};
-
-				usb2 {
-					pinctrl_board_usb2: usb2-board {
-						atmel,pins =
-							<AT91_PIOB 16 AT91_PERIPH_GPIO AT91_PINCTRL_DEGLITCH>;		/* PB16 gpio vbus sense, deglitch */
+							<3 14 0x0 0x5>;	/* PD14 gpio CD pin pull up and deglitch */
 					};
 				};
 			};
@@ -100,22 +81,13 @@
 					reg = <0>;
 				};
 			};
-
-			watchdog@fffffe40 {
-				status = "okay";
-			};
-
-			ssc0: ssc@f0010000 {
-				status = "okay";
-			};
 		};
 
 		usb0: ohci@00600000 {
 			status = "okay";
-			num-ports = <3>;
-			atmel,vbus-gpio = <0 /* &pioD 18 GPIO_ACTIVE_LOW *//* Activate to have access to port A */
-					   &pioD 19 GPIO_ACTIVE_LOW
-					   &pioD 20 GPIO_ACTIVE_LOW
+			num-ports = <2>;
+			atmel,vbus-gpio = <&pioD 19 1
+					   &pioD 20 1
 					  >;
 		};
 
@@ -123,19 +95,4 @@
 			status = "okay";
 		};
 	};
-
-	sound {
-		compatible = "atmel,sam9x5-wm8731-audio";
-
-		atmel,model = "wm8731 @ AT91SAM9X5EK";
-
-		atmel,audio-routing =
-			"Headphone Jack", "RHPOUT",
-			"Headphone Jack", "LHPOUT",
-			"LLINEIN", "Line In Jack",
-			"RLINEIN", "Line In Jack";
-
-		atmel,ssc-controller = <&ssc0>;
-		atmel,audio-codec = <&wm8731>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/atlas6.dtsi b/arch/arm/boot/dts/atlas6.dtsi
--- a/arch/arm/boot/dts/atlas6.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/atlas6.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -27,23 +27,9 @@
 			timebase-frequency = <0>;
 			bus-frequency = <0>;
 			clock-frequency = <0>;
-			clocks = <&clks 12>;
-			operating-points = <
-				/* kHz    uV */
-				200000  1025000
-				400000  1025000
-				600000  1050000
-				800000  1100000
-			>;
-			clock-latency = <150000>;
 		};
 	};
 
-	arm-pmu {
-		compatible = "arm,cortex-a9-pmu";
-		interrupts = <29>;
-	};
-
 	axi {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -70,22 +56,15 @@
 				#clock-cells = <1>;
 			};
 
-			rstc: reset-controller@88010000 {
+			reset-controller@88010000 {
 				compatible = "sirf,prima2-rstc";
 				reg = <0x88010000 0x1000>;
-				#reset-cells = <1>;
 			};
 
 			rsc-controller@88020000 {
 				compatible = "sirf,prima2-rsc";
 				reg = <0x88020000 0x1000>;
 			};
-
-			cphifbg@88030000 {
-				compatible = "sirf,prima2-cphifbg";
-				reg = <0x88030000 0x1000>;
-				clocks = <&clks 42>;
-			};
 		};
 
 		mem-iobg {
@@ -96,17 +75,10 @@
 
 			memory-controller@90000000 {
 				compatible = "sirf,prima2-memc";
-				reg = <0x90000000 0x2000>;
+				reg = <0x90000000 0x10000>;
 				interrupts = <27>;
 				clocks = <&clks 5>;
 			};
-
-			memc-monitor {
-				compatible = "sirf,prima2-memcmon";
-				reg = <0x90002000 0x200>;
-				interrupts = <4>;
-				clocks = <&clks 32>;
-			};
 		};
 
 		disp-iobg {
@@ -131,7 +103,6 @@
 				reg = <0x90020000 0x10000>;
 				interrupts = <31>;
 				clocks = <&clks 35>;
-				resets = <&rstc 6>;
 			};
 		};
 
@@ -149,20 +120,6 @@
 			};
 		};
 
-		graphics2d-iobg {
-			compatible = "simple-bus";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges = <0xa0000000 0xa0000000 0x8000000>;
-
-			ble@a0000000 {
-				compatible = "sirf,atlas6-ble";
-				reg = <0xa0000000 0x2000>;
-				interrupts = <5>;
-				clocks = <&clks 33>;
-			};
-		};
-
 		dsp-iobg {
 			compatible = "simple-bus";
 			#address-cells = <1>;
@@ -173,7 +130,6 @@
 				compatible = "sirf,prima2-dspif";
 				reg = <0xa8000000 0x10000>;
 				interrupts = <9>;
-				resets = <&rstc 1>;
 			};
 
 			gps@a8010000 {
@@ -181,7 +137,6 @@
 				reg = <0xa8010000 0x10000>;
 				interrupts = <7>;
 				clocks = <&clks 9>;
-				resets = <&rstc 2>;
 			};
 
 			dsp@a9000000 {
@@ -189,7 +144,6 @@
 				reg = <0xa9000000 0x1000000>;
 				interrupts = <8>;
 				clocks = <&clks 8>;
-				resets = <&rstc 0>;
 			};
 		};
 
@@ -204,7 +158,6 @@
 				compatible = "sirf,prima2-tick";
 				reg = <0xb0020000 0x1000>;
 				interrupts = <0>;
-				clocks = <&clks 11>;
 			};
 
 			nand@b0030000 {
@@ -228,8 +181,6 @@
 				interrupts = <17>;
 				fifosize = <128>;
 				clocks = <&clks 13>;
-				dmas = <&dmac1 5>, <&dmac0 2>;
-				dma-names = "rx", "tx";
 			};
 
 			uart1: uart@b0060000 {
@@ -239,7 +190,6 @@
 				interrupts = <18>;
 				fifosize = <32>;
 				clocks = <&clks 14>;
-				dma-names = "no-rx", "no-tx";
 			};
 
 			uart2: uart@b0070000 {
@@ -249,8 +199,6 @@
 				interrupts = <19>;
 				fifosize = <128>;
 				clocks = <&clks 15>;
-				dmas = <&dmac0 6>, <&dmac0 7>;
-				dma-names = "rx", "tx";
 			};
 
 			usp0: usp@b0080000 {
@@ -258,10 +206,7 @@
 				compatible = "sirf,prima2-usp";
 				reg = <0xb0080000 0x10000>;
 				interrupts = <20>;
-				fifosize = <128>;
 				clocks = <&clks 28>;
-				dmas = <&dmac1 1>, <&dmac1 2>;
-				dma-names = "rx", "tx";
 			};
 
 			usp1: usp@b0090000 {
@@ -269,10 +214,7 @@
 				compatible = "sirf,prima2-usp";
 				reg = <0xb0090000 0x10000>;
 				interrupts = <21>;
-				fifosize = <128>;
 				clocks = <&clks 29>;
-				dmas = <&dmac0 14>, <&dmac0 15>;
-				dma-names = "rx", "tx";
 			};
 
 			dmac0: dma-controller@b00b0000 {
@@ -281,7 +223,6 @@
 				reg = <0xb00b0000 0x10000>;
 				interrupts = <12>;
 				clocks = <&clks 24>;
-				#dma-cells = <1>;
 			};
 
 			dmac1: dma-controller@b0160000 {
@@ -290,15 +231,12 @@
 				reg = <0xb0160000 0x10000>;
 				interrupts = <13>;
 				clocks = <&clks 25>;
-				#dma-cells = <1>;
 			};
 
 			vip@b00C0000 {
 				compatible = "sirf,prima2-vip";
 				reg = <0xb00C0000 0x10000>;
 				clocks = <&clks 31>;
-				interrupts = <14>;
-				sirf,vip-dma-rx-channel = <16>;
 			};
 
 			spi0: spi@b00d0000 {
@@ -307,13 +245,12 @@
 				reg = <0xb00d0000 0x10000>;
 				interrupts = <15>;
 				sirf,spi-num-chipselects = <1>;
-				dmas = <&dmac1 9>,
-				     <&dmac1 4>;
-				dma-names = "rx", "tx";
+				cs-gpios = <&gpio 0 0>;
+				sirf,spi-dma-rx-channel = <25>;
+				sirf,spi-dma-tx-channel = <20>;
 				#address-cells = <1>;
 				#size-cells = <0>;
 				clocks = <&clks 19>;
-				resets = <&rstc 26>;
 				status = "disabled";
 			};
 
@@ -322,14 +259,7 @@
 				compatible = "sirf,prima2-spi";
 				reg = <0xb0170000 0x10000>;
 				interrupts = <16>;
-				sirf,spi-num-chipselects = <1>;
-				dmas = <&dmac0 12>,
-				     <&dmac0 13>;
-				dma-names = "rx", "tx";
-				#address-cells = <1>;
-				#size-cells = <0>;
 				clocks = <&clks 20>;
-				resets = <&rstc 27>;
 				status = "disabled";
 			};
 
@@ -399,12 +329,6 @@
 						sirf,function = "uart0";
 					};
 				};
-				uart0_noflow_pins_a: uart0@1 {
-					uart {
-						sirf,pins = "uart0_nostreamctrlgrp";
-						sirf,function = "uart0_nostreamctrl";
-					};
-				};
 				uart1_pins_a: uart1@0 {
 					uart {
 						sirf,pins = "uart1grp";
@@ -525,18 +449,6 @@
                                                 sirf,function = "sdmmc5";
                                         };
                                 };
-				i2s_mclk_pins_a: i2s_mclk@0 {
-                                        i2s_mclk {
-                                                sirf,pins = "i2smclkgrp";
-                                                sirf,function = "i2s_mclk";
-                                        };
-                                };
-				i2s_ext_clk_input_pins_a: i2s_ext_clk_input@0 {
-                                        i2s_ext_clk_input {
-                                                sirf,pins = "i2s_ext_clk_inputgrp";
-                                                sirf,function = "i2s_ext_clk_input";
-                                        };
-                                };
                                 i2s_pins_a: i2s@0 {
                                         i2s {
                                                 sirf,pins = "i2sgrp";
@@ -573,36 +485,12 @@
                                                 sirf,function = "usp0";
                                         };
                                 };
-				usp0_uart_nostreamctrl_pins_a: usp0@1 {
-                                        usp0 {
-                                                sirf,pins = "usp0_uart_nostreamctrl_grp";
-                                                sirf,function = "usp0_uart_nostreamctrl";
-                                        };
-                                };
-				usp0_only_utfs_pins_a: usp0@2 {
-					usp0 {
-						sirf,pins = "usp0_only_utfs_grp";
-						sirf,function = "usp0_only_utfs";
-					};
-				};
-				usp0_only_urfs_pins_a: usp0@3 {
-					usp0 {
-						sirf,pins = "usp0_only_urfs_grp";
-						sirf,function = "usp0_only_urfs";
-					};
-				};
                                 usp1_pins_a: usp1@0 {
                                         usp1 {
                                                 sirf,pins = "usp1grp";
                                                 sirf,function = "usp1";
                                         };
                                 };
-				usp1_uart_nostreamctrl_pins_a: usp1@1 {
-                                        usp1 {
-                                                sirf,pins = "usp1_uart_nostreamctrl_grp";
-                                                sirf,function = "usp1_uart_nostreamctrl";
-                                        };
-                                };
                                 usb0_upli_drvbus_pins_a: usb0_upli_drvbus@0 {
                                         usb0_upli_drvbus {
                                                 sirf,pins = "usb0_upli_drvbusgrp";
@@ -615,18 +503,6 @@
                                                 sirf,function = "usb1_utmi_drvbus";
                                         };
                                 };
-                                usb1_dp_dn_pins_a: usb1_dp_dn@0 {
-                                        usb1_dp_dn {
-                                                sirf,pins = "usb1_dp_dngrp";
-                                                sirf,function = "usb1_dp_dn";
-                                        };
-                                };
-                                uart1_route_io_usb1_pins_a: uart1_route_io_usb1@0 {
-                                        uart1_route_io_usb1 {
-                                                sirf,pins = "uart1_route_io_usb1grp";
-                                                sirf,function = "uart1_route_io_usb1";
-                                        };
-                                };
                                 warm_rst_pins_a: warm_rst@0 {
                                         warm_rst {
                                                 sirf,pins = "warm_rstgrp";
@@ -639,16 +515,16 @@
                                                 sirf,function = "pulse_count";
                                         };
                                 };
-                                cko0_pins_a: cko0@0 {
-                                        cko0 {
-                                                sirf,pins = "cko0grp";
-                                                sirf,function = "cko0";
+                                cko0_rst_pins_a: cko0_rst@0 {
+                                        cko0_rst {
+                                                sirf,pins = "cko0_rstgrp";
+                                                sirf,function = "cko0_rst";
                                         };
                                 };
-                                cko1_pins_a: cko1@0 {
-                                        cko1 {
-                                                sirf,pins = "cko1grp";
-                                                sirf,function = "cko1";
+                                cko1_rst_pins_a: cko1_rst@0 {
+                                        cko1_rst {
+                                                sirf,pins = "cko1_rstgrp";
+                                                sirf,function = "cko1_rst";
                                         };
                                 };
 			};
@@ -693,7 +569,6 @@
 					reg = <0x56100000 0x100000>;
 					interrupts = <38>;
 					status = "disabled";
-					bus-width = <4>;
 					clocks = <&clks 36>;
 				};
 
@@ -703,7 +578,6 @@
 					reg = <0x56200000 0x100000>;
 					interrupts = <23>;
 					status = "disabled";
-					bus-width = <4>;
 					clocks = <&clks 37>;
 				};
 
@@ -713,7 +587,6 @@
 					reg = <0x56300000 0x100000>;
 					interrupts = <23>;
 					status = "disabled";
-					bus-width = <4>;
 					clocks = <&clks 37>;
 				};
 
@@ -723,7 +596,6 @@
 					reg = <0x56500000 0x100000>;
 					interrupts = <39>;
 					status = "disabled";
-					bus-width = <4>;
 					clocks = <&clks 38>;
 				};
 
@@ -741,7 +613,7 @@
 		};
 
 		rtc-iobg {
-			compatible = "sirf,prima2-rtciobg", "sirf-prima2-rtciobg-bus", "simple-bus";
+			compatible = "sirf,prima2-rtciobg", "sirf-prima2-rtciobg-bus";
 			#address-cells = <1>;
 			#size-cells = <1>;
 			reg = <0x80030000 0x10000>;
@@ -758,12 +630,6 @@
 				interrupts = <52 53 54>;
 			};
 
-			minigpsrtc@2000 {
-				compatible = "sirf,prima2-minigpsrtc";
-				reg = <0x2000 0x1000>;
-				interrupts = <54>;
-			};
-
 			pwrc@3000 {
 				compatible = "sirf,prima2-pwrc";
 				reg = <0x3000 0x1000>;
diff -urNp a/arch/arm/boot/dts/bcm11351-brt.dts b/arch/arm/boot/dts/bcm11351-brt.dts
--- a/arch/arm/boot/dts/bcm11351-brt.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/bcm11351-brt.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,30 @@
+/*
+ * Copyright (C) 2012 Broadcom Corporation
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License as
+ * published by the Free Software Foundation version 2.
+ *
+ * This program is distributed "as is" WITHOUT ANY WARRANTY of any
+ * kind, whether express or implied; without even the implied warranty
+ * of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+/dts-v1/;
+
+/include/ "bcm11351.dtsi"
+
+/ {
+	model = "BCM11351 BRT board";
+	compatible = "bcm,bcm11351-brt", "bcm,bcm11351";
+
+	memory {
+		reg = <0x80000000 0x40000000>; /* 1 GB */
+	};
+
+	uart@3e000000 {
+		status = "okay";
+	};
+
+};
diff -urNp a/arch/arm/boot/dts/bcm11351.dtsi b/arch/arm/boot/dts/bcm11351.dtsi
--- a/arch/arm/boot/dts/bcm11351.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/bcm11351.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2012-2013 Broadcom Corporation
+ * Copyright (C) 2012 Broadcom Corporation
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License as
@@ -11,41 +11,17 @@
  * GNU General Public License for more details.
  */
 
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-
-#include "dt-bindings/clock/bcm281xx.h"
-
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	model = "BCM11351 SoC";
-	compatible = "brcm,bcm11351";
+	compatible = "bcm,bcm11351";
 	interrupt-parent = <&gic>;
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8";
 	};
 
-	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		enable-method = "brcm,bcm11351-cpu-method";
-		secondary-boot-reg = <0x3500417c>;
-
-		cpu0: cpu@0 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <0>;
-		};
-
-		cpu1: cpu@1 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <1>;
-		};
-	};
-
 	gic: interrupt-controller@3ff00100 {
 		compatible = "arm,cortex-a9-gic";
 		#interrupt-cells = <3>;
@@ -56,369 +32,32 @@
 	};
 
 	smc@0x3404c000 {
-		compatible = "brcm,bcm11351-smc", "brcm,kona-smc";
-		reg = <0x3404c000 0x400>; /* 1 KiB in SRAM */
+		compatible = "bcm,bcm11351-smc", "bcm,kona-smc";
+		reg = <0x3404c000 0x400>; //1 KiB in SRAM
 	};
 
 	uart@3e000000 {
-		compatible = "brcm,bcm11351-dw-apb-uart", "snps,dw-apb-uart";
+		compatible = "bcm,bcm11351-dw-apb-uart", "snps,dw-apb-uart";
 		status = "disabled";
 		reg = <0x3e000000 0x1000>;
-		clocks = <&slave_ccu BCM281XX_SLAVE_CCU_UARTB>;
-		interrupts = <GIC_SPI 67 IRQ_TYPE_LEVEL_HIGH>;
-		reg-shift = <2>;
-		reg-io-width = <4>;
-	};
-
-	uart@3e001000 {
-		compatible = "brcm,bcm11351-dw-apb-uart", "snps,dw-apb-uart";
-		status = "disabled";
-		reg = <0x3e001000 0x1000>;
-		clocks = <&slave_ccu BCM281XX_SLAVE_CCU_UARTB2>;
-		interrupts = <GIC_SPI 66 IRQ_TYPE_LEVEL_HIGH>;
-		reg-shift = <2>;
-		reg-io-width = <4>;
-	};
-
-	uart@3e002000 {
-		compatible = "brcm,bcm11351-dw-apb-uart", "snps,dw-apb-uart";
-		status = "disabled";
-		reg = <0x3e002000 0x1000>;
-		clocks = <&slave_ccu BCM281XX_SLAVE_CCU_UARTB3>;
-		interrupts = <GIC_SPI 65 IRQ_TYPE_LEVEL_HIGH>;
-		reg-shift = <2>;
-		reg-io-width = <4>;
-	};
-
-	uart@3e003000 {
-		compatible = "brcm,bcm11351-dw-apb-uart", "snps,dw-apb-uart";
-		status = "disabled";
-		reg = <0x3e003000 0x1000>;
-		clocks = <&slave_ccu BCM281XX_SLAVE_CCU_UARTB4>;
-		interrupts = <GIC_SPI 64 IRQ_TYPE_LEVEL_HIGH>;
+		clock-frequency = <13000000>;
+		interrupts = <0x0 67 0x4>;
 		reg-shift = <2>;
 		reg-io-width = <4>;
 	};
 
 	L2: l2-cache {
-		compatible = "brcm,bcm11351-a2-pl310-cache";
-		reg = <0x3ff20000 0x1000>;
-		cache-unified;
-		cache-level = <2>;
-	};
-
-	watchdog@35002f40 {
-		compatible = "brcm,bcm11351-wdt", "brcm,kona-wdt";
-		reg = <0x35002f40 0x6c>;
+		    compatible = "arm,pl310-cache";
+		    reg = <0x3ff20000 0x1000>;
+		    cache-unified;
+		    cache-level = <2>;
 	};
 
 	timer@35006000 {
-		compatible = "brcm,kona-timer";
+		compatible = "bcm,kona-timer";
 		reg = <0x35006000 0x1000>;
-		interrupts = <GIC_SPI 7 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&aon_ccu BCM281XX_AON_CCU_HUB_TIMER>;
-	};
-
-	gpio: gpio@35003000 {
-		compatible = "brcm,bcm11351-gpio", "brcm,kona-gpio";
-		reg = <0x35003000 0x800>;
-		interrupts =
-		       <GIC_SPI 106 IRQ_TYPE_LEVEL_HIGH
-			GIC_SPI 115 IRQ_TYPE_LEVEL_HIGH
-			GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH
-			GIC_SPI 113 IRQ_TYPE_LEVEL_HIGH
-			GIC_SPI 112 IRQ_TYPE_LEVEL_HIGH
-			GIC_SPI 111 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		#interrupt-cells = <2>;
-		gpio-controller;
-		interrupt-controller;
-	};
-
-	sdio1: sdio@3f180000 {
-		compatible = "brcm,kona-sdhci";
-		reg = <0x3f180000 0x10000>;
-		interrupts = <GIC_SPI 77 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&master_ccu BCM281XX_MASTER_CCU_SDIO1>;
-		status = "disabled";
-	};
-
-	sdio2: sdio@3f190000 {
-		compatible = "brcm,kona-sdhci";
-		reg = <0x3f190000 0x10000>;
-		interrupts = <GIC_SPI 76 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&master_ccu BCM281XX_MASTER_CCU_SDIO2>;
-		status = "disabled";
-	};
-
-	sdio3: sdio@3f1a0000 {
-		compatible = "brcm,kona-sdhci";
-		reg = <0x3f1a0000 0x10000>;
-		interrupts = <GIC_SPI 74 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&master_ccu BCM281XX_MASTER_CCU_SDIO3>;
-		status = "disabled";
-	};
-
-	sdio4: sdio@3f1b0000 {
-		compatible = "brcm,kona-sdhci";
-		reg = <0x3f1b0000 0x10000>;
-		interrupts = <GIC_SPI 73 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&master_ccu BCM281XX_MASTER_CCU_SDIO4>;
-		status = "disabled";
-	};
-
-	pinctrl@35004800 {
-		compatible = "brcm,bcm11351-pinctrl";
-		reg = <0x35004800 0x430>;
-	};
-
-	i2c@3e016000 {
-		compatible = "brcm,bcm11351-i2c", "brcm,kona-i2c";
-		reg = <0x3e016000 0x80>;
-		interrupts = <GIC_SPI 103 IRQ_TYPE_LEVEL_HIGH>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		clocks = <&slave_ccu BCM281XX_SLAVE_CCU_BSC1>;
-		status = "disabled";
-	};
-
-	i2c@3e017000 {
-		compatible = "brcm,bcm11351-i2c", "brcm,kona-i2c";
-		reg = <0x3e017000 0x80>;
-		interrupts = <GIC_SPI 102 IRQ_TYPE_LEVEL_HIGH>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		clocks = <&slave_ccu BCM281XX_SLAVE_CCU_BSC2>;
-		status = "disabled";
-	};
-
-	i2c@3e018000 {
-		compatible = "brcm,bcm11351-i2c", "brcm,kona-i2c";
-		reg = <0x3e018000 0x80>;
-		interrupts = <GIC_SPI 169 IRQ_TYPE_LEVEL_HIGH>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		clocks = <&slave_ccu BCM281XX_SLAVE_CCU_BSC3>;
-		status = "disabled";
-	};
-
-	i2c@3500d000 {
-		compatible = "brcm,bcm11351-i2c", "brcm,kona-i2c";
-		reg = <0x3500d000 0x80>;
-		interrupts = <GIC_SPI 14 IRQ_TYPE_LEVEL_HIGH>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		clocks = <&aon_ccu BCM281XX_AON_CCU_PMU_BSC>;
-		status = "disabled";
-	};
-
-	pwm: pwm@3e01a000 {
-		compatible = "brcm,bcm11351-pwm", "brcm,kona-pwm";
-		reg = <0x3e01a000 0xcc>;
-		clocks = <&slave_ccu BCM281XX_SLAVE_CCU_PWM>;
-		#pwm-cells = <3>;
-		status = "disabled";
-	};
-
-	clocks {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges;
-
-		root_ccu: root_ccu {
-			compatible = "brcm,bcm11351-root-ccu";
-			reg = <0x35001000 0x0f00>;
-			#clock-cells = <1>;
-			clock-output-names = "frac_1m";
-		};
-
-		hub_ccu: hub_ccu {
-			compatible = "brcm,bcm11351-hub-ccu";
-			reg = <0x34000000 0x0f00>;
-			#clock-cells = <1>;
-			clock-output-names = "tmon_1m";
-		};
-
-		aon_ccu: aon_ccu {
-			compatible = "brcm,bcm11351-aon-ccu";
-			reg = <0x35002000 0x0f00>;
-			#clock-cells = <1>;
-			clock-output-names = "hub_timer",
-					     "pmu_bsc",
-					     "pmu_bsc_var";
-		};
-
-		master_ccu: master_ccu {
-			compatible = "brcm,bcm11351-master-ccu";
-			reg = <0x3f001000 0x0f00>;
-			#clock-cells = <1>;
-			clock-output-names = "sdio1",
-					     "sdio2",
-					     "sdio3",
-					     "sdio4",
-					     "usb_ic",
-					     "hsic2_48m",
-					     "hsic2_12m";
-		};
-
-		slave_ccu: slave_ccu {
-			compatible = "brcm,bcm11351-slave-ccu";
-			reg = <0x3e011000 0x0f00>;
-			#clock-cells = <1>;
-			clock-output-names = "uartb",
-					     "uartb2",
-					     "uartb3",
-					     "uartb4",
-					     "ssp0",
-					     "ssp2",
-					     "bsc1",
-					     "bsc2",
-					     "bsc3",
-					     "pwm";
-		};
-
-		ref_1m_clk: ref_1m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <1000000>;
-		};
-
-		ref_32k_clk: ref_32k {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <32768>;
-		};
-
-		bbl_32k_clk: bbl_32k {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <32768>;
-		};
-
-		ref_13m_clk: ref_13m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <13000000>;
-		};
-
-		var_13m_clk: var_13m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <13000000>;
-		};
-
-		dft_19_5m_clk: dft_19_5m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <19500000>;
-		};
-
-		ref_crystal_clk: ref_crystal {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <26000000>;
-		};
-
-		ref_cx40_clk: ref_cx40 {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <40000000>;
-		};
-
-		ref_52m_clk: ref_52m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <52000000>;
-		};
-
-		var_52m_clk: var_52m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <52000000>;
-		};
-
-		usb_otg_ahb_clk: usb_otg_ahb {
-			compatible = "fixed-clock";
-			clock-frequency = <52000000>;
-			#clock-cells = <0>;
-		};
-
-		ref_96m_clk: ref_96m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <96000000>;
-		};
-
-		var_96m_clk: var_96m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <96000000>;
-		};
-
-		ref_104m_clk: ref_104m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <104000000>;
-		};
-
-		var_104m_clk: var_104m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <104000000>;
-		};
-
-		ref_156m_clk: ref_156m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <156000000>;
-		};
-
-		var_156m_clk: var_156m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <156000000>;
-		};
-
-		ref_208m_clk: ref_208m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <208000000>;
-		};
-
-		var_208m_clk: var_208m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <208000000>;
-		};
-
-		ref_312m_clk: ref_312m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <312000000>;
-		};
-
-		var_312m_clk: var_312m {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <312000000>;
-		};
+		interrupts = <0x0 7 0x4>;
+		clock-frequency = <32768>;
 	};
 
-	usbotg: usb@3f120000 {
-		compatible = "snps,dwc2";
-		reg = <0x3f120000 0x10000>;
-		interrupts = <GIC_SPI 47 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&usb_otg_ahb_clk>;
-		clock-names = "otg";
-		phys = <&usbphy>;
-		phy-names = "usb2-phy";
-		status = "disabled";
-	};
-
-	usbphy: usb-phy@3f130000 {
-		compatible = "brcm,kona-usb2-phy";
-		reg = <0x3f130000 0x28>;
-		#phy-cells = <0>;
-		status = "disabled";
-	};
 };
diff -urNp a/arch/arm/boot/dts/bcm2835-rpi-b.dts b/arch/arm/boot/dts/bcm2835-rpi-b.dts
--- a/arch/arm/boot/dts/bcm2835-rpi-b.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/bcm2835-rpi-b.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,23 +1,41 @@
 /dts-v1/;
-/include/ "bcm2835-rpi.dtsi"
+/include/ "bcm2835.dtsi"
 
 / {
 	compatible = "raspberrypi,model-b", "brcm,bcm2835";
 	model = "Raspberry Pi Model B";
 
-	leds {
-		act {
-			gpios = <&gpio 16 1>;
-		};
+	memory {
+		reg = <0 0x10000000>;
 	};
 };
 
 &gpio {
-	pinctrl-0 = <&gpioout &alt0 &i2s_alt2 &alt3>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&alt0 &alt3>;
 
-	/* I2S interface */
-	i2s_alt2: i2s_alt2 {
-		brcm,pins = <28 29 30 31>;
-		brcm,function = <6>; /* alt2 */
+	alt0: alt0 {
+		brcm,pins = <0 1 2 3 4 5 6 7 8 9 10 11 14 15 40 45>;
+		brcm,function = <4>; /* alt0 */
 	};
+
+	alt3: alt3 {
+		brcm,pins = <48 49 50 51 52 53>;
+		brcm,function = <7>; /* alt3 */
+	};
+};
+
+&i2c0 {
+	status = "okay";
+	clock-frequency = <100000>;
+};
+
+&i2c1 {
+	status = "okay";
+	clock-frequency = <100000>;
+};
+
+&sdhci {
+	status = "okay";
+	bus-width = <4>;
 };
diff -urNp a/arch/arm/boot/dts/bcm2835.dtsi b/arch/arm/boot/dts/bcm2835.dtsi
--- a/arch/arm/boot/dts/bcm2835.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/bcm2835.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -15,52 +15,39 @@
 		#size-cells = <1>;
 		ranges = <0x7e000000 0x20000000 0x02000000>;
 
-		timer@7e003000 {
+		timer {
 			compatible = "brcm,bcm2835-system-timer";
 			reg = <0x7e003000 0x1000>;
 			interrupts = <1 0>, <1 1>, <1 2>, <1 3>;
 			clock-frequency = <1000000>;
 		};
 
-		dma: dma@7e007000 {
-			compatible = "brcm,bcm2835-dma";
-			reg = <0x7e007000 0xf00>;
-			interrupts = <1 16>,
-				     <1 17>,
-				     <1 18>,
-				     <1 19>,
-				     <1 20>,
-				     <1 21>,
-				     <1 22>,
-				     <1 23>,
-				     <1 24>,
-				     <1 25>,
-				     <1 26>,
-				     <1 27>,
-				     <1 28>;
-
-			#dma-cells = <1>;
-			brcm,dma-channel-mask = <0x7f35>;
-		};
-
-		intc: interrupt-controller@7e00b200 {
+		intc: interrupt-controller {
 			compatible = "brcm,bcm2835-armctrl-ic";
 			reg = <0x7e00b200 0x200>;
 			interrupt-controller;
 			#interrupt-cells = <2>;
 		};
 
-		watchdog@7e100000 {
+		watchdog {
 			compatible = "brcm,bcm2835-pm-wdt";
 			reg = <0x7e100000 0x28>;
 		};
 
-		rng@7e104000 {
+		rng {
 			compatible = "brcm,bcm2835-rng";
 			reg = <0x7e104000 0x10>;
 		};
 
-		gpio: gpio@7e200000 {
+		uart@20201000 {
+			compatible = "brcm,bcm2835-pl011", "arm,pl011", "arm,primecell";
+			reg = <0x7e201000 0x1000>;
+			interrupts = <2 25>;
+			clock-frequency = <3000000>;
+			arm,primecell-periphid = <0x00241011>;
+		};
+
+		gpio: gpio {
 			compatible = "brcm,bcm2835-gpio";
 			reg = <0x7e200000 0xb4>;
 			/*
@@ -83,26 +70,7 @@
 			#interrupt-cells = <2>;
 		};
 
-		uart@7e201000 {
-			compatible = "brcm,bcm2835-pl011", "arm,pl011", "arm,primecell";
-			reg = <0x7e201000 0x1000>;
-			interrupts = <2 25>;
-			clock-frequency = <3000000>;
-			arm,primecell-periphid = <0x00241011>;
-		};
-
-		i2s: i2s@7e203000 {
-			compatible = "brcm,bcm2835-i2s";
-			reg = <0x7e203000 0x20>,
-			      <0x7e101098 0x02>;
-
-			dmas = <&dma 2>,
-			       <&dma 3>;
-			dma-names = "tx", "rx";
-			status = "disabled";
-		};
-
-		spi: spi@7e204000 {
+		spi: spi@20204000 {
 			compatible = "brcm,bcm2835-spi";
 			reg = <0x7e204000 0x1000>;
 			interrupts = <2 22>;
@@ -122,15 +90,7 @@
 			status = "disabled";
 		};
 
-		sdhci: sdhci@7e300000 {
-			compatible = "brcm,bcm2835-sdhci";
-			reg = <0x7e300000 0x100>;
-			interrupts = <2 30>;
-			clocks = <&clk_mmc>;
-			status = "disabled";
-		};
-
-		i2c1: i2c@7e804000 {
+		i2c1: i2c@20804000 {
 			compatible = "brcm,bcm2835-i2c";
 			reg = <0x7e804000 0x1000>;
 			interrupts = <2 21>;
@@ -140,14 +100,12 @@
 			status = "disabled";
 		};
 
-		usb@7e980000 {
-			compatible = "brcm,bcm2835-usb";
-			reg = <0x7e980000 0x10000>;
-			interrupts = <1 9>;
-		};
-
-		arm-pmu {
-			compatible = "arm,arm1176-pmu";
+		sdhci: sdhci {
+			compatible = "brcm,bcm2835-sdhci";
+			reg = <0x7e300000 0x100>;
+			interrupts = <2 30>;
+			clocks = <&clk_mmc>;
+			status = "disabled";
 		};
 	};
 
@@ -156,27 +114,24 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk_mmc: clock@0 {
+		clk_mmc: mmc {
 			compatible = "fixed-clock";
 			reg = <0>;
 			#clock-cells = <0>;
-			clock-output-names = "mmc";
 			clock-frequency = <100000000>;
 		};
 
-		clk_i2c: clock@1 {
+		clk_i2c: i2c {
 			compatible = "fixed-clock";
 			reg = <1>;
 			#clock-cells = <0>;
-			clock-output-names = "i2c";
 			clock-frequency = <250000000>;
 		};
 
-		clk_spi: clock@2 {
+		clk_spi: spi {
 			compatible = "fixed-clock";
 			reg = <2>;
 			#clock-cells = <0>;
-			clock-output-names = "spi";
 			clock-frequency = <250000000>;
 		};
 	};
diff -urNp a/arch/arm/boot/dts/ccu9540.dts b/arch/arm/boot/dts/ccu9540.dts
--- a/arch/arm/boot/dts/ccu9540.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/ccu9540.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,72 @@
+/*
+ * Copyright 2012 ST-Ericsson AB
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/dts-v1/;
+/include/ "dbx5x0.dtsi"
+
+/ {
+	model = "ST-Ericsson CCU9540 platform with Device Tree";
+	compatible = "st-ericsson,ccu9540", "st-ericsson,u9540";
+
+	memory {
+		reg = <0x00000000 0x20000000>;
+	};
+
+	soc-u9500 {
+		uart@80120000 {
+			status = "okay";
+		};
+
+		uart@80121000 {
+			status = "okay";
+		};
+
+		uart@80007000 {
+			status = "okay";
+		};
+
+		// External Micro SD slot
+		sdi0_per1@80126000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <100000000>;
+			bus-width = <4>;
+			mmc-cap-sd-highspeed;
+			mmc-cap-mmc-highspeed;
+			vmmc-supply = <&ab8500_ldo_aux3_reg>;
+
+			cd-gpios  = <&gpio7 6 0x4>; // 230
+			cd-inverted;
+
+			status = "okay";
+		};
+
+
+		// WLAN SDIO channel
+		sdi1_per2@80118000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <50000000>;
+			bus-width = <4>;
+
+			status = "okay";
+		};
+
+		// On-board eMMC
+		sdi4_per2@80114000 {
+			arm,primecell-periphid = <0x10480180>;
+		        max-frequency = <100000000>;
+			bus-width = <8>;
+			mmc-cap-mmc-highspeed;
+			vmmc-supply = <&ab8500_ldo_aux2_reg>;
+
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/cros5250-common.dtsi b/arch/arm/boot/dts/cros5250-common.dtsi
--- a/arch/arm/boot/dts/cros5250-common.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/cros5250-common.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,328 @@
+/*
+ * Common device tree include for all Exynos 5250 boards based off of Daisy.
+ *
+ * Copyright (c) 2012 Google, Inc
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+*/
+
+/ {
+	aliases {
+	};
+
+	memory {
+		reg = <0x40000000 0x80000000>;
+	};
+
+	chosen {
+	};
+
+	pinctrl@11400000 {
+		/*
+		 * Disabled pullups since external part has its own pullups and
+		 * double-pulling gets us out of spec in some cases.
+		 */
+		i2c2_bus: i2c2-bus {
+			samsung,pin-pud = <0>;
+		};
+
+		max77686_irq: max77686-irq {
+			samsung,pins = "gpx3-2";
+			samsung,pin-function = <0>;
+			samsung,pin-pud = <0>;
+			samsung,pin-drv = <0>;
+		};
+	};
+
+	i2c@12C60000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <378000>;
+
+		max77686@09 {
+			compatible = "maxim,max77686";
+			interrupt-parent = <&gpx3>;
+			interrupts = <2 0>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&max77686_irq>;
+			wakeup-source;
+			reg = <0x09>;
+
+			voltage-regulators {
+				ldo1_reg: LDO1 {
+					regulator-name = "P1.0V_LDO_OUT1";
+					regulator-min-microvolt = <1000000>;
+					regulator-max-microvolt = <1000000>;
+					regulator-always-on;
+				};
+
+				ldo2_reg: LDO2 {
+					regulator-name = "P1.8V_LDO_OUT2";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+				};
+
+				ldo3_reg: LDO3 {
+					regulator-name = "P1.8V_LDO_OUT3";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+				};
+
+				ldo7_reg: LDO7 {
+					regulator-name = "P1.1V_LDO_OUT7";
+					regulator-min-microvolt = <1100000>;
+					regulator-max-microvolt = <1100000>;
+					regulator-always-on;
+				};
+
+				ldo8_reg: LDO8 {
+					regulator-name = "P1.0V_LDO_OUT8";
+					regulator-min-microvolt = <1000000>;
+					regulator-max-microvolt = <1000000>;
+					regulator-always-on;
+				};
+
+				ldo10_reg: LDO10 {
+					regulator-name = "P1.8V_LDO_OUT10";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+				};
+
+				ldo12_reg: LDO12 {
+					regulator-name = "P3.0V_LDO_OUT12";
+					regulator-min-microvolt = <3000000>;
+					regulator-max-microvolt = <3000000>;
+					regulator-always-on;
+				};
+
+				ldo14_reg: LDO14 {
+					regulator-name = "P1.8V_LDO_OUT14";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+				};
+
+				ldo15_reg: LDO15 {
+					regulator-name = "P1.0V_LDO_OUT15";
+					regulator-min-microvolt = <1000000>;
+					regulator-max-microvolt = <1000000>;
+					regulator-always-on;
+				};
+
+				ldo16_reg: LDO16 {
+					regulator-name = "P1.8V_LDO_OUT16";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+				};
+
+				buck1_reg: BUCK1 {
+					regulator-name = "vdd_mif";
+					regulator-min-microvolt = <950000>;
+					regulator-max-microvolt = <1300000>;
+					regulator-always-on;
+					regulator-boot-on;
+				};
+
+				buck2_reg: BUCK2 {
+					regulator-name = "vdd_arm";
+					regulator-min-microvolt = <850000>;
+					regulator-max-microvolt = <1350000>;
+					regulator-always-on;
+					regulator-boot-on;
+				};
+
+				buck3_reg: BUCK3 {
+					regulator-name = "vdd_int";
+					regulator-min-microvolt = <900000>;
+					regulator-max-microvolt = <1200000>;
+					regulator-always-on;
+					regulator-boot-on;
+				};
+
+				buck4_reg: BUCK4 {
+					regulator-name = "vdd_g3d";
+					regulator-min-microvolt = <850000>;
+					regulator-max-microvolt = <1300000>;
+					regulator-always-on;
+					regulator-boot-on;
+				};
+
+				buck5_reg: BUCK5 {
+					regulator-name = "P1.8V_BUCK_OUT5";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+					regulator-boot-on;
+				};
+
+				buck6_reg: BUCK6 {
+					regulator-name = "P1.35V_BUCK_OUT6";
+					regulator-min-microvolt = <1350000>;
+					regulator-max-microvolt = <1350000>;
+					regulator-always-on;
+				};
+
+				buck7_reg: BUCK7 {
+					regulator-name = "P2.0V_BUCK_OUT7";
+					regulator-min-microvolt = <2000000>;
+					regulator-max-microvolt = <2000000>;
+					regulator-always-on;
+				};
+
+				buck8_reg: BUCK8 {
+					regulator-name = "P2.85V_BUCK_OUT8";
+					regulator-min-microvolt = <2850000>;
+					regulator-max-microvolt = <2850000>;
+					regulator-always-on;
+				};
+			};
+		};
+	};
+
+	i2c@12C70000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <378000>;
+
+		trackpad {
+			reg = <0x67>;
+			compatible = "cypress,cyapa";
+			interrupts = <2 0>;
+			interrupt-parent = <&gpx1>;
+			wakeup-source;
+		};
+	};
+
+	i2c@12C80000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <66000>;
+
+		hdmiddc@50 {
+			compatible = "samsung,exynos5-hdmiddc";
+			reg = <0x50>;
+		};
+	};
+
+	i2c@12C90000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <66000>;
+	};
+
+	i2c@12CA0000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <66000>;
+	};
+
+	i2c@12CB0000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <66000>;
+	};
+
+	i2c@12CC0000 {
+		status = "disabled";
+	};
+
+	i2c@12CD0000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <66000>;
+	};
+
+	i2c@12CE0000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <378000>;
+
+		hdmiphy@38 {
+			compatible = "samsung,exynos5-hdmiphy";
+			reg = <0x38>;
+		};
+	};
+
+	dwmmc0@12200000 {
+		num-slots = <1>;
+		supports-highspeed;
+		broken-cd;
+		fifo-depth = <0x80>;
+		card-detect-delay = <200>;
+		samsung,dw-mshc-ciu-div = <3>;
+		samsung,dw-mshc-sdr-timing = <2 3>;
+		samsung,dw-mshc-ddr-timing = <1 2>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&sd0_clk &sd0_cmd &sd0_cd &sd0_bus4 &sd0_bus8>;
+
+		slot@0 {
+			reg = <0>;
+			bus-width = <8>;
+		};
+	};
+
+	dwmmc1@12210000 {
+		status = "disabled";
+	};
+
+	dwmmc2@12220000 {
+		num-slots = <1>;
+		supports-highspeed;
+		fifo-depth = <0x80>;
+		card-detect-delay = <200>;
+		samsung,dw-mshc-ciu-div = <3>;
+		samsung,dw-mshc-sdr-timing = <2 3>;
+		samsung,dw-mshc-ddr-timing = <1 2>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&sd2_clk &sd2_cmd &sd2_cd &sd2_bus4>;
+
+		slot@0 {
+			reg = <0>;
+			bus-width = <4>;
+			wp-gpios = <&gpc2 1 0>;
+		};
+	};
+
+	dwmmc3@12230000 {
+		num-slots = <1>;
+		supports-highspeed;
+		broken-cd;
+		fifo-depth = <0x80>;
+		card-detect-delay = <200>;
+		samsung,dw-mshc-ciu-div = <3>;
+		samsung,dw-mshc-sdr-timing = <2 3>;
+		samsung,dw-mshc-ddr-timing = <1 2>;
+		/* See board-specific dts files for pin setup */
+
+		slot@0 {
+			reg = <0>;
+			bus-width = <4>;
+		};
+	};
+
+	spi_0: spi@12d20000 {
+		status = "disabled";
+	};
+
+	spi_1: spi@12d30000 {
+		samsung,spi-src-clk = <0>;
+		num-cs = <1>;
+	};
+
+	spi_2: spi@12d40000 {
+		status = "disabled";
+	};
+
+	hdmi {
+		hpd-gpio = <&gpx3 7 0>;
+	};
+
+	gpio-keys {
+		compatible = "gpio-keys";
+
+		power {
+			label = "Power";
+			gpios = <&gpx1 3 1>;
+			linux,code = <116>; /* KEY_POWER */
+			gpio-key,wakeup;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/da850-enbw-cmc.dts b/arch/arm/boot/dts/da850-enbw-cmc.dts
--- a/arch/arm/boot/dts/da850-enbw-cmc.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/da850-enbw-cmc.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,7 +10,7 @@
  * option) any later version.
  */
 /dts-v1/;
-#include "da850.dtsi"
+/include/ "da850.dtsi"
 
 / {
 	compatible = "enbw,cmc", "ti,da850";
diff -urNp a/arch/arm/boot/dts/da850-evm.dts b/arch/arm/boot/dts/da850-evm.dts
--- a/arch/arm/boot/dts/da850-evm.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/da850-evm.dts	2015-10-27 00:45:05.000000000 +0000
@@ -8,7 +8,7 @@
  * Free Software Foundation, version 2.
  */
 /dts-v1/;
-#include "da850.dtsi"
+/include/ "da850.dtsi"
 
 / {
 	compatible = "ti,da850-evm", "ti,da850";
@@ -17,18 +17,6 @@
 	soc {
 		pmx_core: pinmux@1c14120 {
 			status = "okay";
-
-			mcasp0_pins: pinmux_mcasp0_pins {
-				pinctrl-single,bits = <
-					/*
-					 * AHCLKX, ACLKX, AFSX, AHCLKR, ACLKR,
-					 * AFSR, AMUTE
-					 */
-					0x00 0x11111111 0xffffffff
-					/* AXR11, AXR12 */
-					0x04 0x00011000 0x000ff000
-				>;
-			};
 		};
 		serial0: serial@1c42000 {
 			status = "okay";
@@ -51,20 +39,6 @@
 			tps: tps@48 {
 				reg = <0x48>;
 			};
-			tlv320aic3106: tlv320aic3106@18 {
-				#sound-dai-cells = <0>;
-				compatible = "ti,tlv320aic3106";
-				reg = <0x18>;
-				status = "okay";
-
-				/* Regulators */
-				IOVDD-supply = <&vdcdc2_reg>;
-				/* Derived from VBAT: Baseboard 3.3V / 1.8V */
-				AVDD-supply = <&vbat>;
-				DRVDD-supply = <&vbat>;
-				DVDD-supply = <&vbat>;
-			};
-
 		};
 		wdt: wdt@1c21000 {
 			status = "okay";
@@ -116,20 +90,6 @@
 				};
 			};
 		};
-		mdio: mdio@1e24000 {
-			status = "okay";
-			pinctrl-names = "default";
-			pinctrl-0 = <&mdio_pins>;
-			bus_freq = <2200000>;
-		};
-		eth0: ethernet@1e20000 {
-			status = "okay";
-			pinctrl-names = "default";
-			pinctrl-0 = <&mii_pins>;
-		};
-		gpio: gpio@1e26000 {
-			status = "okay";
-		};
 	};
 	nand_cs3@62000000 {
 		status = "okay";
@@ -143,33 +103,6 @@
 		regulator-max-microvolt = <5000000>;
 		regulator-boot-on;
 	};
-
-	sound {
-		compatible = "simple-audio-card";
-		simple-audio-card,name = "DA850/OMAP-L138 EVM";
-		simple-audio-card,widgets =
-			"Line", "Line In",
-			"Line", "Line Out";
-		simple-audio-card,routing =
-			"LINE1L", "Line In",
-			"LINE1R", "Line In",
-			"Line Out", "LLOUT",
-			"Line Out", "RLOUT";
-		simple-audio-card,format = "dsp_b";
-		simple-audio-card,bitclock-master = <&link0_codec>;
-		simple-audio-card,frame-master = <&link0_codec>;
-		simple-audio-card,bitclock-inversion;
-
-		simple-audio-card,cpu {
-			sound-dai = <&mcasp0>;
-			system-clock-frequency = <24576000>;
-		};
-
-		link0_codec: simple-audio-card,codec {
-			sound-dai = <&tlv320aic3106>;
-			system-clock-frequency = <24576000>;
-		};
-	};
 };
 
 /include/ "tps6507x.dtsi"
@@ -223,22 +156,3 @@
 		};
 	};
 };
-
-&mcasp0 {
-	#sound-dai-cells = <0>;
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&mcasp0_pins>;
-
-	op-mode = <0>;          /* MCASP_IIS_MODE */
-	tdm-slots = <2>;
-	/* 4 serializer */
-	serial-dir = <  /* 0: INACTIVE, 1: TX, 2: RX */
-		0 0 0 0
-		0 0 0 0
-		0 0 0 1
-		2 0 0 0
-	>;
-	tx-num-evt = <32>;
-	rx-num-evt = <32>;
-};
diff -urNp a/arch/arm/boot/dts/da850.dtsi b/arch/arm/boot/dts/da850.dtsi
--- a/arch/arm/boot/dts/da850.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/da850.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,7 @@
  * Free Software Foundation;  either version 2 of the  License, or (at your
  * option) any later version.
  */
-#include "skeleton.dtsi"
-#include <dt-bindings/interrupt-controller/irq.h>
+/include/ "skeleton.dtsi"
 
 / {
 	arm {
@@ -38,7 +37,7 @@
 			#size-cells = <0>;
 			pinctrl-single,bit-per-mux;
 			pinctrl-single,register-width = <32>;
-			pinctrl-single,function-mask = <0xf>;
+			pinctrl-single,function-mask = <0xffffffff>;
 			status = "disabled";
 
 			nand_cs3_pins: pinmux_nand_pins {
@@ -126,39 +125,11 @@
 					0x14 0x00000010 0x000000f0
 				>;
 			};
-			mdio_pins: pinmux_mdio_pins {
-				pinctrl-single,bits = <
-					/* MDIO_CLK, MDIO_D */
-					0x10 0x00000088 0x000000ff
-				>;
-			};
-			mii_pins: pinmux_mii_pins {
-				pinctrl-single,bits = <
-					/*
-					 * MII_TXEN, MII_TXCLK, MII_COL
-					 * MII_TXD_3, MII_TXD_2, MII_TXD_1
-					 * MII_TXD_0
-					 */
-					0x8 0x88888880 0xfffffff0
-					/*
-					 * MII_RXER, MII_CRS, MII_RXCLK
-					 * MII_RXDV, MII_RXD_3, MII_RXD_2
-					 * MII_RXD_1, MII_RXD_0
-					 */
-					0xc 0x88888888 0xffffffff
-				>;
-			};
-
-		};
-		edma0: edma@01c00000 {
-			compatible = "ti,edma3";
-			reg =	<0x0 0x10000>;
-			interrupts = <11 13 12>;
-			#dma-cells = <1>;
 		};
 		serial0: serial@1c42000 {
 			compatible = "ns16550a";
 			reg = <0x42000 0x100>;
+			clock-frequency = <150000000>;
 			reg-shift = <2>;
 			interrupts = <25>;
 			status = "disabled";
@@ -166,6 +137,7 @@
 		serial1: serial@1d0c000 {
 			compatible = "ns16550a";
 			reg = <0x10c000 0x100>;
+			clock-frequency = <150000000>;
 			reg-shift = <2>;
 			interrupts = <53>;
 			status = "disabled";
@@ -173,6 +145,7 @@
 		serial2: serial@1d0d000 {
 			compatible = "ns16550a";
 			reg = <0x10d000 0x100>;
+			clock-frequency = <150000000>;
 			reg-shift = <2>;
 			interrupts = <61>;
 			status = "disabled";
@@ -243,52 +216,6 @@
 			interrupts = <56>;
 			status = "disabled";
 		};
-		mdio: mdio@1e24000 {
-			compatible = "ti,davinci_mdio";
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <0x224000 0x1000>;
-		};
-		eth0: ethernet@1e20000 {
-			compatible = "ti,davinci-dm6467-emac";
-			reg = <0x220000 0x4000>;
-			ti,davinci-ctrl-reg-offset = <0x3000>;
-			ti,davinci-ctrl-mod-reg-offset = <0x2000>;
-			ti,davinci-ctrl-ram-offset = <0>;
-			ti,davinci-ctrl-ram-size = <0x2000>;
-			local-mac-address = [ 00 00 00 00 00 00 ];
-			interrupts = <33
-					34
-					35
-					36
-					>;
-		};
-		gpio: gpio@1e26000 {
-			compatible = "ti,dm6441-gpio";
-			gpio-controller;
-			reg = <0x226000 0x1000>;
-			interrupts = <42 IRQ_TYPE_EDGE_BOTH
-				43 IRQ_TYPE_EDGE_BOTH 44 IRQ_TYPE_EDGE_BOTH
-				45 IRQ_TYPE_EDGE_BOTH 46 IRQ_TYPE_EDGE_BOTH
-				47 IRQ_TYPE_EDGE_BOTH 48 IRQ_TYPE_EDGE_BOTH
-				49 IRQ_TYPE_EDGE_BOTH 50 IRQ_TYPE_EDGE_BOTH>;
-			ti,ngpio = <144>;
-			ti,davinci-gpio-unbanked = <0>;
-			status = "disabled";
-		};
-
-		mcasp0: mcasp@01d00000 {
-			compatible = "ti,da830-mcasp-audio";
-			reg = <0x100000 0x2000>,
-			      <0x102000 0x400000>;
-			reg-names = "mpu", "dat";
-			interrupts = <54>;
-			interrupt-names = "common";
-			status = "disabled";
-			dmas = <&edma0 1>,
-				<&edma0 0>;
-			dma-names = "tx", "rx";
-		};
 	};
 	nand_cs3@62000000 {
 		compatible = "ti,davinci-nand";
diff -urNp a/arch/arm/boot/dts/dbx5x0.dtsi b/arch/arm/boot/dts/dbx5x0.dtsi
--- a/arch/arm/boot/dts/dbx5x0.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/dbx5x0.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,690 @@
+/*
+ * Copyright 2012 Linaro Ltd
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/include/ "skeleton.dtsi"
+
+/ {
+	soc-u9500 {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "stericsson,db8500";
+		interrupt-parent = <&intc>;
+		ranges;
+
+		intc: interrupt-controller@a0411000 {
+			compatible = "arm,cortex-a9-gic";
+			#interrupt-cells = <3>;
+			#address-cells = <1>;
+			interrupt-controller;
+			reg = <0xa0411000 0x1000>,
+			      <0xa0410100 0x100>;
+		};
+
+		L2: l2-cache {
+			compatible = "arm,pl310-cache";
+			reg = <0xa0412000 0x1000>;
+			interrupts = <0 13 4>;
+			cache-unified;
+			cache-level = <2>;
+		};
+
+		pmu {
+			compatible = "arm,cortex-a9-pmu";
+			interrupts = <0 7 0x4>;
+		};
+
+		timer@a0410600 {
+			compatible = "arm,cortex-a9-twd-timer";
+			reg = <0xa0410600 0x20>;
+			interrupts = <1 13 0x304>;
+		};
+
+		rtc@80154000 {
+			compatible = "arm,rtc-pl031", "arm,primecell";
+			reg = <0x80154000 0x1000>;
+			interrupts = <0 18 0x4>;
+		};
+
+		gpio0: gpio@8012e000 {
+			compatible = "stericsson,db8500-gpio",
+				"st,nomadik-gpio";
+			reg =  <0x8012e000 0x80>;
+			interrupts = <0 119 0x4>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			st,supports-sleepmode;
+			gpio-controller;
+			#gpio-cells = <2>;
+			gpio-bank = <0>;
+		};
+
+		gpio1: gpio@8012e080 {
+			compatible = "stericsson,db8500-gpio",
+				"st,nomadik-gpio";
+			reg =  <0x8012e080 0x80>;
+			interrupts = <0 120 0x4>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			st,supports-sleepmode;
+			gpio-controller;
+			#gpio-cells = <2>;
+			gpio-bank = <1>;
+		};
+
+		gpio2: gpio@8000e000 {
+			compatible = "stericsson,db8500-gpio",
+				"st,nomadik-gpio";
+			reg =  <0x8000e000 0x80>;
+			interrupts = <0 121 0x4>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			st,supports-sleepmode;
+			gpio-controller;
+			#gpio-cells = <2>;
+			gpio-bank = <2>;
+		};
+
+		gpio3: gpio@8000e080 {
+			compatible = "stericsson,db8500-gpio",
+				"st,nomadik-gpio";
+			reg =  <0x8000e080 0x80>;
+			interrupts = <0 122 0x4>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			st,supports-sleepmode;
+			gpio-controller;
+			#gpio-cells = <2>;
+			gpio-bank = <3>;
+		};
+
+		gpio4: gpio@8000e100 {
+			compatible = "stericsson,db8500-gpio",
+				"st,nomadik-gpio";
+			reg =  <0x8000e100 0x80>;
+			interrupts = <0 123 0x4>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			st,supports-sleepmode;
+			gpio-controller;
+			#gpio-cells = <2>;
+			gpio-bank = <4>;
+		};
+
+		gpio5: gpio@8000e180 {
+			compatible = "stericsson,db8500-gpio",
+				"st,nomadik-gpio";
+			reg =  <0x8000e180 0x80>;
+			interrupts = <0 124 0x4>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			st,supports-sleepmode;
+			gpio-controller;
+			#gpio-cells = <2>;
+			gpio-bank = <5>;
+		};
+
+		gpio6: gpio@8011e000 {
+			compatible = "stericsson,db8500-gpio",
+				"st,nomadik-gpio";
+			reg =  <0x8011e000 0x80>;
+			interrupts = <0 125 0x4>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			st,supports-sleepmode;
+			gpio-controller;
+			#gpio-cells = <2>;
+			gpio-bank = <6>;
+		};
+
+		gpio7: gpio@8011e080 {
+			compatible = "stericsson,db8500-gpio",
+				"st,nomadik-gpio";
+			reg =  <0x8011e080 0x80>;
+			interrupts = <0 126 0x4>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			st,supports-sleepmode;
+			gpio-controller;
+			#gpio-cells = <2>;
+			gpio-bank = <7>;
+		};
+
+		gpio8: gpio@a03fe000 {
+			compatible = "stericsson,db8500-gpio",
+				"st,nomadik-gpio";
+			reg =  <0xa03fe000 0x80>;
+			interrupts = <0 127 0x4>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			st,supports-sleepmode;
+			gpio-controller;
+			#gpio-cells = <2>;
+			gpio-bank = <8>;
+		};
+
+		pinctrl {
+			compatible = "stericsson,nmk-pinctrl";
+			prcm = <&prcmu>;
+		};
+
+		usb@a03e0000 {
+			compatible = "stericsson,db8500-musb",
+				"mentor,musb";
+			reg = <0xa03e0000 0x10000>;
+			interrupts = <0 23 0x4>;
+		};
+
+		dma-controller@801C0000 {
+			compatible = "stericsson,db8500-dma40",
+					"stericsson,dma40";
+			reg = <0x801C0000 0x1000 0x40010000 0x800>;
+			interrupts = <0 25 0x4>;
+		};
+
+		prcmu: prcmu@80157000 {
+			compatible = "stericsson,db8500-prcmu";
+			reg = <0x80157000 0x2000>, <0x801b0000 0x8000>, <0x801b8000 0x1000>;
+			reg-names = "prcmu", "prcmu-tcpm", "prcmu-tcdm";
+			interrupts = <0 47 0x4>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			ranges;
+
+			prcmu-timer-4@80157450 {
+				compatible = "stericsson,db8500-prcmu-timer-4";
+				reg = <0x80157450 0xC>;
+			};
+
+			thermal@801573c0 {
+				compatible = "stericsson,db8500-thermal";
+				reg = <0x801573c0 0x40>;
+				interrupts = <21 0x4>, <22 0x4>;
+				interrupt-names = "IRQ_HOTMON_LOW", "IRQ_HOTMON_HIGH";
+				status = "disabled";
+			 };
+
+			db8500-prcmu-regulators {
+				compatible = "stericsson,db8500-prcmu-regulator";
+
+				// DB8500_REGULATOR_VAPE
+				db8500_vape_reg: db8500_vape {
+					regulator-compatible = "db8500_vape";
+					regulator-always-on;
+				};
+
+				// DB8500_REGULATOR_VARM
+				db8500_varm_reg: db8500_varm {
+					regulator-compatible = "db8500_varm";
+				};
+
+				// DB8500_REGULATOR_VMODEM
+				db8500_vmodem_reg: db8500_vmodem {
+					regulator-compatible = "db8500_vmodem";
+				};
+
+				// DB8500_REGULATOR_VPLL
+				db8500_vpll_reg: db8500_vpll {
+					regulator-compatible = "db8500_vpll";
+				};
+
+				// DB8500_REGULATOR_VSMPS1
+				db8500_vsmps1_reg: db8500_vsmps1 {
+					regulator-compatible = "db8500_vsmps1";
+				};
+
+				// DB8500_REGULATOR_VSMPS2
+				db8500_vsmps2_reg: db8500_vsmps2 {
+					regulator-compatible = "db8500_vsmps2";
+				};
+
+				// DB8500_REGULATOR_VSMPS3
+				db8500_vsmps3_reg: db8500_vsmps3 {
+					regulator-compatible = "db8500_vsmps3";
+				};
+
+				// DB8500_REGULATOR_VRF1
+				db8500_vrf1_reg: db8500_vrf1 {
+					regulator-compatible = "db8500_vrf1";
+				};
+
+				// DB8500_REGULATOR_SWITCH_SVAMMDSP
+				db8500_sva_mmdsp_reg: db8500_sva_mmdsp {
+					regulator-compatible = "db8500_sva_mmdsp";
+				};
+
+				// DB8500_REGULATOR_SWITCH_SVAMMDSPRET
+				db8500_sva_mmdsp_ret_reg: db8500_sva_mmdsp_ret {
+					regulator-compatible = "db8500_sva_mmdsp_ret";
+				};
+
+				// DB8500_REGULATOR_SWITCH_SVAPIPE
+				db8500_sva_pipe_reg: db8500_sva_pipe {
+					regulator-compatible = "db8500_sva_pipe";
+				};
+
+				// DB8500_REGULATOR_SWITCH_SIAMMDSP
+				db8500_sia_mmdsp_reg: db8500_sia_mmdsp {
+					regulator-compatible = "db8500_sia_mmdsp";
+				};
+
+				// DB8500_REGULATOR_SWITCH_SIAMMDSPRET
+				db8500_sia_mmdsp_ret_reg: db8500_sia_mmdsp_ret {
+				};
+
+				// DB8500_REGULATOR_SWITCH_SIAPIPE
+				db8500_sia_pipe_reg: db8500_sia_pipe {
+					regulator-compatible = "db8500_sia_pipe";
+				};
+
+				// DB8500_REGULATOR_SWITCH_SGA
+				db8500_sga_reg: db8500_sga {
+					regulator-compatible = "db8500_sga";
+					vin-supply = <&db8500_vape_reg>;
+				};
+
+				// DB8500_REGULATOR_SWITCH_B2R2_MCDE
+				db8500_b2r2_mcde_reg: db8500_b2r2_mcde {
+					regulator-compatible = "db8500_b2r2_mcde";
+					vin-supply = <&db8500_vape_reg>;
+				};
+
+				// DB8500_REGULATOR_SWITCH_ESRAM12
+				db8500_esram12_reg: db8500_esram12 {
+					regulator-compatible = "db8500_esram12";
+				};
+
+				// DB8500_REGULATOR_SWITCH_ESRAM12RET
+				db8500_esram12_ret_reg: db8500_esram12_ret {
+					regulator-compatible = "db8500_esram12_ret";
+				};
+
+				// DB8500_REGULATOR_SWITCH_ESRAM34
+				db8500_esram34_reg: db8500_esram34 {
+					regulator-compatible = "db8500_esram34";
+				};
+
+				// DB8500_REGULATOR_SWITCH_ESRAM34RET
+				db8500_esram34_ret_reg: db8500_esram34_ret {
+					regulator-compatible = "db8500_esram34_ret";
+				};
+			};
+
+			ab8500 {
+				compatible = "stericsson,ab8500";
+				interrupt-parent = <&intc>;
+				interrupts = <0 40 0x4>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+
+				ab8500-rtc {
+					compatible = "stericsson,ab8500-rtc";
+					interrupts = <17 0x4
+					              18 0x4>;
+					interrupt-names = "60S", "ALARM";
+				};
+
+				ab8500-gpadc {
+					compatible = "stericsson,ab8500-gpadc";
+					interrupts = <32 0x4
+						      39 0x4>;
+					interrupt-names = "HW_CONV_END", "SW_CONV_END";
+					vddadc-supply = <&ab8500_ldo_tvout_reg>;
+				};
+
+				ab8500_battery: ab8500_battery {
+					stericsson,battery-type = "LIPO";
+					thermistor-on-batctrl;
+				};
+
+				ab8500_fg {
+					compatible = "stericsson,ab8500-fg";
+					battery	   = <&ab8500_battery>;
+				};
+
+				ab8500_btemp {
+					compatible = "stericsson,ab8500-btemp";
+					battery	   = <&ab8500_battery>;
+				};
+
+				ab8500_charger {
+					compatible	= "stericsson,ab8500-charger";
+					battery		= <&ab8500_battery>;
+					vddadc-supply	= <&ab8500_ldo_tvout_reg>;
+				};
+
+				ab8500_chargalg {
+					compatible	= "stericsson,ab8500-chargalg";
+					battery		= <&ab8500_battery>;
+				};
+
+				ab8500_usb {
+					compatible = "stericsson,ab8500-usb";
+					interrupts = < 90 0x4
+						       96 0x4
+						       14 0x4
+						       15 0x4
+						       79 0x4
+						       74 0x4
+						       75 0x4>;
+					interrupt-names = "ID_WAKEUP_R",
+							  "ID_WAKEUP_F",
+							  "VBUS_DET_F",
+							  "VBUS_DET_R",
+							  "USB_LINK_STATUS",
+							  "USB_ADP_PROBE_PLUG",
+							  "USB_ADP_PROBE_UNPLUG";
+					vddulpivio18-supply = <&ab8500_ldo_initcore_reg>;
+					v-ape-supply = <&db8500_vape_reg>;
+					musb_1v8-supply = <&db8500_vsmps2_reg>;
+				};
+
+				ab8500-ponkey {
+					compatible = "stericsson,ab8500-poweron-key";
+					interrupts = <6 0x4
+						      7 0x4>;
+					interrupt-names = "ONKEY_DBF", "ONKEY_DBR";
+				};
+
+				ab8500-sysctrl {
+					compatible = "stericsson,ab8500-sysctrl";
+				};
+
+				ab8500-pwm {
+					compatible = "stericsson,ab8500-pwm";
+				};
+
+				ab8500-debugfs {
+					compatible = "stericsson,ab8500-debug";
+				};
+
+				codec: ab8500-codec {
+					compatible = "stericsson,ab8500-codec";
+
+					stericsson,earpeice-cmv = <950>; /* Units in mV. */
+				};
+
+				ab8500-regulators {
+					compatible = "stericsson,ab8500-regulator";
+
+					// supplies to the display/camera
+					ab8500_ldo_aux1_reg: ab8500_ldo_aux1 {
+						regulator-compatible = "ab8500_ldo_aux1";
+						regulator-min-microvolt = <2500000>;
+						regulator-max-microvolt = <2900000>;
+						regulator-boot-on;
+						/* BUG: If turned off MMC will be affected. */
+						regulator-always-on;
+					};
+
+					// supplies to the on-board eMMC
+					ab8500_ldo_aux2_reg: ab8500_ldo_aux2 {
+						regulator-compatible = "ab8500_ldo_aux2";
+						regulator-min-microvolt = <1100000>;
+						regulator-max-microvolt = <3300000>;
+					};
+
+					// supply for VAUX3; SDcard slots
+					ab8500_ldo_aux3_reg: ab8500_ldo_aux3 {
+						regulator-compatible = "ab8500_ldo_aux3";
+						regulator-min-microvolt = <1100000>;
+						regulator-max-microvolt = <3300000>;
+					};
+
+					// supply for v-intcore12; VINTCORE12 LDO
+					ab8500_ldo_initcore_reg: ab8500_ldo_initcore {
+						regulator-compatible = "ab8500_ldo_initcore";
+					};
+
+					// supply for tvout; gpadc; TVOUT LDO
+					ab8500_ldo_tvout_reg: ab8500_ldo_tvout {
+						regulator-compatible = "ab8500_ldo_tvout";
+					};
+
+					// supply for ab8500-usb; USB LDO
+					ab8500_ldo_usb_reg: ab8500_ldo_usb {
+						regulator-compatible = "ab8500_ldo_usb";
+					};
+
+					// supply for ab8500-vaudio; VAUDIO LDO
+					ab8500_ldo_audio_reg: ab8500_ldo_audio {
+						regulator-compatible = "ab8500_ldo_audio";
+					};
+
+					// supply for v-anamic1 VAMic1-LDO
+					ab8500_ldo_anamic1_reg: ab8500_ldo_anamic1 {
+						regulator-compatible = "ab8500_ldo_anamic1";
+					};
+
+					// supply for v-amic2; VAMIC2 LDO; reuse constants for AMIC1
+					ab8500_ldo_amamic2_reg: ab8500_ldo_amamic2 {
+						regulator-compatible = "ab8500_ldo_amamic2";
+					};
+
+					// supply for v-dmic; VDMIC LDO
+					ab8500_ldo_dmic_reg: ab8500_ldo_dmic {
+						regulator-compatible = "ab8500_ldo_dmic";
+					};
+
+					// supply for U8500 CSI/DSI; VANA LDO
+					ab8500_ldo_ana_reg: ab8500_ldo_ana {
+						regulator-compatible = "ab8500_ldo_ana";
+					};
+				};
+			};
+		};
+
+		i2c@80004000 {
+			compatible = "stericsson,db8500-i2c", "st,nomadik-i2c", "arm,primecell";
+			reg = <0x80004000 0x1000>;
+			interrupts = <0 21 0x4>;
+			arm,primecell-periphid = <0x180024>;
+
+			#address-cells = <1>;
+			#size-cells = <0>;
+			v-i2c-supply = <&db8500_vape_reg>;
+
+			clock-frequency = <400000>;
+		};
+
+		i2c@80122000 {
+			compatible = "stericsson,db8500-i2c", "st,nomadik-i2c", "arm,primecell";
+			reg = <0x80122000 0x1000>;
+			interrupts = <0 22 0x4>;
+			arm,primecell-periphid = <0x180024>;
+
+			#address-cells = <1>;
+			#size-cells = <0>;
+			v-i2c-supply = <&db8500_vape_reg>;
+
+			clock-frequency = <400000>;
+		};
+
+		i2c@80128000 {
+			compatible = "stericsson,db8500-i2c", "st,nomadik-i2c", "arm,primecell";
+			reg = <0x80128000 0x1000>;
+			interrupts = <0 55 0x4>;
+			arm,primecell-periphid = <0x180024>;
+
+			#address-cells = <1>;
+			#size-cells = <0>;
+			v-i2c-supply = <&db8500_vape_reg>;
+
+			clock-frequency = <400000>;
+		};
+
+		i2c@80110000 {
+			compatible = "stericsson,db8500-i2c", "st,nomadik-i2c", "arm,primecell";
+			reg = <0x80110000 0x1000>;
+			interrupts = <0 12 0x4>;
+			arm,primecell-periphid = <0x180024>;
+
+			#address-cells = <1>;
+			#size-cells = <0>;
+			v-i2c-supply = <&db8500_vape_reg>;
+
+			clock-frequency = <400000>;
+		};
+
+		i2c@8012a000 {
+			compatible = "stericsson,db8500-i2c", "st,nomadik-i2c", "arm,primecell";
+			reg = <0x8012a000 0x1000>;
+			interrupts = <0 51 0x4>;
+			arm,primecell-periphid = <0x180024>;
+
+			#address-cells = <1>;
+			#size-cells = <0>;
+			v-i2c-supply = <&db8500_vape_reg>;
+
+			clock-frequency = <400000>;
+		};
+
+		ssp@80002000 {
+			compatible = "arm,pl022", "arm,primecell";
+			reg = <0x80002000 0x1000>;
+			interrupts = <0 14 0x4>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			status = "disabled";
+
+			// Add one of these for each child device
+			cs-gpios = <&gpio0 31 0x4 &gpio4 14 0x4 &gpio4 16 0x4
+				    &gpio6 22 0x4 &gpio7 0 0x4>;
+
+		};
+
+		uart@80120000 {
+			compatible = "arm,pl011", "arm,primecell";
+			reg = <0x80120000 0x1000>;
+			interrupts = <0 11 0x4>;
+			status = "disabled";
+		};
+		uart@80121000 {
+			compatible = "arm,pl011", "arm,primecell";
+			reg = <0x80121000 0x1000>;
+			interrupts = <0 19 0x4>;
+			status = "disabled";
+		};
+		uart@80007000 {
+			compatible = "arm,pl011", "arm,primecell";
+			reg = <0x80007000 0x1000>;
+			interrupts = <0 26 0x4>;
+			status = "disabled";
+		};
+
+		sdi0_per1@80126000 {
+			compatible = "arm,pl18x", "arm,primecell";
+			reg = <0x80126000 0x1000>;
+			interrupts = <0 60 0x4>;
+			status = "disabled";
+		};
+
+		sdi1_per2@80118000 {
+			compatible = "arm,pl18x", "arm,primecell";
+			reg = <0x80118000 0x1000>;
+			interrupts = <0 50 0x4>;
+			status = "disabled";
+		};
+
+		sdi2_per3@80005000 {
+			compatible = "arm,pl18x", "arm,primecell";
+			reg = <0x80005000 0x1000>;
+			interrupts = <0 41 0x4>;
+			status = "disabled";
+		};
+
+		sdi3_per2@80119000 {
+			compatible = "arm,pl18x", "arm,primecell";
+			reg = <0x80119000 0x1000>;
+			interrupts = <0 59 0x4>;
+			status = "disabled";
+		};
+
+		sdi4_per2@80114000 {
+			compatible = "arm,pl18x", "arm,primecell";
+			reg = <0x80114000 0x1000>;
+			interrupts = <0 99 0x4>;
+			status = "disabled";
+		};
+
+		sdi5_per3@80008000 {
+			compatible = "arm,pl18x", "arm,primecell";
+			reg = <0x80008000 0x1000>;
+			interrupts = <0 100 0x4>;
+			status = "disabled";
+		};
+
+		msp0: msp@80123000 {
+			compatible = "stericsson,ux500-msp-i2s";
+			reg = <0x80123000 0x1000>;
+			interrupts = <0 31 0x4>;
+			v-ape-supply = <&db8500_vape_reg>;
+			status = "disabled";
+		};
+
+		msp1: msp@80124000 {
+			compatible = "stericsson,ux500-msp-i2s";
+			reg = <0x80124000 0x1000>;
+			interrupts = <0 62 0x4>;
+			v-ape-supply = <&db8500_vape_reg>;
+			status = "disabled";
+		};
+
+		// HDMI sound
+		msp2: msp@80117000 {
+			compatible = "stericsson,ux500-msp-i2s";
+			reg = <0x80117000 0x1000>;
+			interrupts = <0 98 0x4>;
+			v-ape-supply = <&db8500_vape_reg>;
+			status = "disabled";
+		};
+
+		msp3: msp@80125000 {
+			compatible = "stericsson,ux500-msp-i2s";
+			reg = <0x80125000 0x1000>;
+			interrupts = <0 62 0x4>;
+			v-ape-supply = <&db8500_vape_reg>;
+			status = "disabled";
+		};
+
+		external-bus@50000000 {
+			compatible = "simple-bus";
+			reg = <0x50000000 0x4000000>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0 0x50000000 0x4000000>;
+			status = "disabled";
+		};
+
+		cpufreq-cooling {
+			compatible = "stericsson,db8500-cpufreq-cooling";
+			status = "disabled";
+		 };
+
+		vmmci: regulator-gpio {
+			compatible = "regulator-gpio";
+
+			regulator-min-microvolt = <1800000>;
+			regulator-max-microvolt = <2900000>;
+			regulator-name = "mmci-reg";
+			regulator-type = "voltage";
+
+			startup-delay-us = <100>;
+			enable-active-high;
+
+			states = <1800000 0x1
+				  2900000 0x0>;
+
+			status = "disabled";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/dove-cm-a510.dts b/arch/arm/boot/dts/dove-cm-a510.dts
--- a/arch/arm/boot/dts/dove-cm-a510.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/dove-cm-a510.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "dove.dtsi"
+/include/ "dove.dtsi"
 
 / {
 	model = "Compulab CM-A510";
diff -urNp a/arch/arm/boot/dts/dove-cubox.dts b/arch/arm/boot/dts/dove-cubox.dts
--- a/arch/arm/boot/dts/dove-cubox.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/dove-cubox.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "dove.dtsi"
+/include/ "dove.dtsi"
 
 / {
 	model = "SolidRun CuBox";
@@ -23,7 +23,7 @@
 		power {
 			label = "Power";
 			gpios = <&gpio0 18 1>;
-			default-state = "keep";
+			linux,default-trigger = "default-on";
 		};
 	};
 
@@ -42,75 +42,18 @@
 			regulator-always-on;
 			regulator-boot-on;
 			gpio = <&gpio0 1 0>;
-			pinctrl-0 = <&pmx_gpio_1>;
-			pinctrl-names = "default";
 		};
 	};
-
-	clocks {
-		/* 25MHz reference crystal */
-		ref25: oscillator {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <25000000>;
-		};
-	};
-
-	ir_recv: ir-receiver {
-		compatible = "gpio-ir-receiver";
-		gpios = <&gpio0 19 1>;
-		pinctrl-0 = <&pmx_gpio_19>;
-		pinctrl-names = "default";
-	};
 };
 
 &uart0 { status = "okay"; };
 &sata0 { status = "okay"; };
-&mdio { status = "okay"; };
-&eth { status = "okay"; };
-
-&ethphy {
-	compatible = "marvell,88e1310";
-	reg = <1>;
-};
-
-&i2c0 {
-	status = "okay";
-	clock-frequency = <100000>;
-
-	si5351: clock-generator {
-		compatible = "silabs,si5351a-msop";
-		reg = <0x60>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		#clock-cells = <1>;
-
-		/* connect xtal input to 25MHz reference */
-		clocks = <&ref25>;
-
-		/* connect xtal input as source of pll0 and pll1 */
-		silabs,pll-source = <0 0>, <1 0>;
-
-		clkout0 {
-			reg = <0>;
-			silabs,drive-strength = <8>;
-			silabs,multisynth-source = <0>;
-			silabs,clock-source = <0>;
-			silabs,pll-master;
-		};
-
-		clkout2 {
-			reg = <2>;
-			silabs,drive-strength = <8>;
-			silabs,multisynth-source = <1>;
-			silabs,clock-source = <0>;
-			silabs,pll-master;
-		};
-	};
-};
+&i2c0 { status = "okay"; };
 
 &sdio0 {
 	status = "okay";
+	/* sdio0 card detect is connected to wrong pin on CuBox */
+	cd-gpios = <&gpio0 12 1>;
 };
 
 &spi0 {
@@ -124,10 +67,22 @@
 	};
 };
 
-&audio1 {
-	status = "okay";
-	clocks = <&gate_clk 13>, <&si5351 2>;
-	clock-names = "internal", "extclk";
-	pinctrl-0 = <&pmx_audio1_i2s1_spdifo &pmx_audio1_extclk>;
+&pinctrl {
+	pinctrl-0 = <&pmx_gpio_1 &pmx_gpio_12>;
 	pinctrl-names = "default";
+
+	pmx_gpio_1: pmx-gpio-1 {
+		marvell,pins = "mpp1";
+		marvell,function = "gpio";
+	};
+
+	pmx_gpio_12: pmx-gpio-12 {
+		marvell,pins = "mpp12";
+		marvell,function = "gpio";
+	};
+
+	pmx_gpio_18: pmx-gpio-18 {
+		marvell,pins = "mpp18";
+		marvell,function = "gpio";
+	};
 };
diff -urNp a/arch/arm/boot/dts/dove-dove-db.dts b/arch/arm/boot/dts/dove-dove-db.dts
--- a/arch/arm/boot/dts/dove-dove-db.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/dove-dove-db.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "dove.dtsi"
+/include/ "dove.dtsi"
 
 / {
 	model = "Marvell DB-MV88AP510-BP Development Board";
diff -urNp a/arch/arm/boot/dts/dove.dtsi b/arch/arm/boot/dts/dove.dtsi
--- a/arch/arm/boot/dts/dove.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/dove.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,11 +1,8 @@
 /include/ "skeleton.dtsi"
 
-#define MBUS_ID(target,attributes) (((target) << 24) | ((attributes) << 16))
-
 / {
 	compatible = "marvell,dove";
 	model = "Marvell Armada 88AP510 SoC";
-	interrupt-parent = <&intc>;
 
 	aliases {
 		gpio0 = &gpio0;
@@ -13,636 +10,252 @@
 		gpio2 = &gpio2;
 	};
 
-	cpus {
+	soc@f1000000 {
+		compatible = "simple-bus";
 		#address-cells = <1>;
-		#size-cells = <0>;
-
-		cpu0: cpu@0 {
-			compatible = "marvell,pj4a", "marvell,sheeva-v7";
-			device_type = "cpu";
-			next-level-cache = <&l2>;
-			reg = <0>;
-		};
-	};
-
-	l2: l2-cache {
-		compatible = "marvell,tauros2-cache";
-		marvell,tauros2-cache-features = <0>;
-	};
-
-	mbus {
-		compatible = "marvell,dove-mbus", "marvell,mbus", "simple-bus";
-		#address-cells = <2>;
 		#size-cells = <1>;
-		controller = <&mbusc>;
-		pcie-mem-aperture = <0xe0000000 0x10000000>; /* 256M MEM space */
-		pcie-io-aperture  = <0xf2000000 0x00200000>; /*   2M I/O space */
-
-		ranges = <MBUS_ID(0xf0, 0x01) 0 0xf1000000 0x0100000   /* MBUS regs  1M */
-			  MBUS_ID(0xf0, 0x02) 0 0xf1800000 0x1000000   /* AXI  regs 16M */
-			  MBUS_ID(0x01, 0xfd) 0 0xf8000000 0x8000000   /* BootROM  128M */
-			  MBUS_ID(0x03, 0x01) 0 0xc8000000 0x0100000   /* CESA SRAM  1M */
-			  MBUS_ID(0x0d, 0x00) 0 0xf0000000 0x0100000>; /* PMU  SRAM  1M */
-
-		pcie: pcie-controller {
-			compatible = "marvell,dove-pcie";
-			status = "disabled";
-			device_type = "pci";
-			#address-cells = <3>;
-			#size-cells = <2>;
-
-			msi-parent = <&intc>;
-			bus-range = <0x00 0xff>;
-
-			ranges = <0x82000000 0x0 0x40000 MBUS_ID(0xf0, 0x01) 0x40000 0 0x2000
-			          0x82000000 0x0 0x80000 MBUS_ID(0xf0, 0x01) 0x80000 0 0x2000
-				  0x82000000 0x1 0x0 MBUS_ID(0x04, 0xe8) 0 1 0   /* Port 0.0 Mem */
-				  0x81000000 0x1 0x0 MBUS_ID(0x04, 0xe0) 0 1 0   /* Port 0.0 I/O */
-				  0x82000000 0x2 0x0 MBUS_ID(0x08, 0xe8) 0 1 0   /* Port 1.0 Mem */
-				  0x81000000 0x2 0x0 MBUS_ID(0x08, 0xe0) 0 1 0>; /* Port 1.0 I/O */
-
-			pcie-port@0 {
-				device_type = "pci";
-				status = "disabled";
-				assigned-addresses = <0x82000800 0 0x40000 0 0x2000>;
-				reg = <0x0800 0 0 0 0>;
-				clocks = <&gate_clk 4>;
-				marvell,pcie-port = <0>;
-
-				#address-cells = <3>;
-				#size-cells = <2>;
-				ranges = <0x82000000 0 0 0x82000000 0x1 0 1 0
-				          0x81000000 0 0 0x81000000 0x1 0 1 0>;
-
-				#interrupt-cells = <1>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &intc 16>;
-			};
+		interrupt-parent = <&intc>;
 
-			pcie-port@1 {
-				device_type = "pci";
-				status = "disabled";
-				assigned-addresses = <0x82002800 0 0x80000 0 0x2000>;
-				reg = <0x1000 0 0 0 0>;
-				clocks = <&gate_clk 5>;
-				marvell,pcie-port = <1>;
-
-				#address-cells = <3>;
-				#size-cells = <2>;
-				ranges = <0x82000000 0 0 0x82000000 0x2 0 1 0
-				          0x81000000 0 0 0x81000000 0x2 0 1 0>;
-
-				#interrupt-cells = <1>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &intc 18>;
-			};
+		ranges = <0xc8000000 0xc8000000 0x0100000   /* CESA SRAM   1M */
+		          0xe0000000 0xe0000000 0x8000000   /* PCIe0 Mem 128M */
+		          0xe8000000 0xe8000000 0x8000000   /* PCIe1 Mem 128M */
+		          0xf0000000 0xf0000000 0x0100000   /* ScratchPad  1M */
+		          0x00000000 0xf1000000 0x1000000   /* SB/NB regs 16M */
+		          0xf2000000 0xf2000000 0x0100000   /* PCIe0 I/O   1M */
+		          0xf2100000 0xf2100000 0x0100000   /* PCIe0 I/O   1M */
+		          0xf8000000 0xf8000000 0x8000000>; /* BootROM   128M */
+
+		l2: l2-cache {
+			compatible = "marvell,tauros2-cache";
+			marvell,tauros2-cache-features = <0>;
 		};
 
-		internal-regs {
-			compatible = "simple-bus";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges = <0x00000000 MBUS_ID(0xf0, 0x01) 0 0x0100000   /* MBUS regs  1M */
-				  0x00800000 MBUS_ID(0xf0, 0x02) 0 0x1000000   /* AXI  regs 16M */
-				  0xffffe000 MBUS_ID(0x03, 0x01) 0 0x0000800   /* CESA SRAM  2k */
-				  0xfffff000 MBUS_ID(0x0d, 0x00) 0 0x0000800>; /* PMU  SRAM  2k */
-
-			spi0: spi-ctrl@10600 {
-				compatible = "marvell,orion-spi";
-				#address-cells = <1>;
-				#size-cells = <0>;
-				cell-index = <0>;
-				interrupts = <6>;
-				reg = <0x10600 0x28>;
-				clocks = <&core_clk 0>;
-				pinctrl-0 = <&pmx_spi0>;
-				pinctrl-names = "default";
-				status = "disabled";
-			};
-
-			i2c0: i2c-ctrl@11000 {
-				compatible = "marvell,mv64xxx-i2c";
-				reg = <0x11000 0x20>;
-				#address-cells = <1>;
-				#size-cells = <0>;
-				interrupts = <11>;
-				clock-frequency = <400000>;
-				timeout-ms = <1000>;
-				clocks = <&core_clk 0>;
-				status = "disabled";
-			};
-
-			uart0: serial@12000 {
-				compatible = "ns16550a";
-				reg = <0x12000 0x100>;
-				reg-shift = <2>;
-				interrupts = <7>;
-				clocks = <&core_clk 0>;
-				status = "disabled";
-			};
-
-			uart1: serial@12100 {
-				compatible = "ns16550a";
-				reg = <0x12100 0x100>;
-				reg-shift = <2>;
-				interrupts = <8>;
-				clocks = <&core_clk 0>;
-				pinctrl-0 = <&pmx_uart1>;
-				pinctrl-names = "default";
-				status = "disabled";
-			};
-
-			uart2: serial@12200 {
-				compatible = "ns16550a";
-				reg = <0x12000 0x100>;
-				reg-shift = <2>;
-				interrupts = <9>;
-				clocks = <&core_clk 0>;
-				status = "disabled";
-			};
-
-			uart3: serial@12300 {
-				compatible = "ns16550a";
-				reg = <0x12100 0x100>;
-				reg-shift = <2>;
-				interrupts = <10>;
-				clocks = <&core_clk 0>;
-				status = "disabled";
-			};
-
-			spi1: spi-ctrl@14600 {
-				compatible = "marvell,orion-spi";
-				#address-cells = <1>;
-				#size-cells = <0>;
-				cell-index = <1>;
-				interrupts = <5>;
-				reg = <0x14600 0x28>;
-				clocks = <&core_clk 0>;
-				status = "disabled";
-			};
-
-			mbusc: mbus-ctrl@20000 {
-				compatible = "marvell,mbus-controller";
-				reg = <0x20000 0x80>, <0x800100 0x8>;
-			};
-
-			sysc: system-ctrl@20000 {
-				compatible = "marvell,orion-system-controller";
-				reg = <0x20000 0x110>;
-			};
-
-			bridge_intc: bridge-interrupt-ctrl@20110 {
-				compatible = "marvell,orion-bridge-intc";
-				interrupt-controller;
-				#interrupt-cells = <1>;
-				reg = <0x20110 0x8>;
-				interrupts = <0>;
-				marvell,#interrupts = <5>;
-			};
-
-			intc: main-interrupt-ctrl@20200 {
-				compatible = "marvell,orion-intc";
-				interrupt-controller;
-				#interrupt-cells = <1>;
-				reg = <0x20200 0x10>, <0x20210 0x10>;
-			};
-
-			timer: timer@20300 {
-				compatible = "marvell,orion-timer";
-				reg = <0x20300 0x20>;
-				interrupt-parent = <&bridge_intc>;
-				interrupts = <1>, <2>;
-				clocks = <&core_clk 0>;
-			};
-
-			watchdog@20300 {
-				compatible = "marvell,orion-wdt";
-				reg = <0x20300 0x28>, <0x20108 0x4>;
-				interrupt-parent = <&bridge_intc>;
-				interrupts = <3>;
-				clocks = <&core_clk 0>;
-			};
-
-			crypto: crypto-engine@30000 {
-				compatible = "marvell,orion-crypto";
-				reg = <0x30000 0x10000>,
-				      <0xffffe000 0x800>;
-				reg-names = "regs", "sram";
-				interrupts = <31>;
-				clocks = <&gate_clk 15>;
-				status = "okay";
-			};
+		intc: interrupt-controller {
+			compatible = "marvell,orion-intc";
+			interrupt-controller;
+			#interrupt-cells = <1>;
+			reg = <0x20204 0x04>, <0x20214 0x04>;
+		};
 
-			ehci0: usb-host@50000 {
-				compatible = "marvell,orion-ehci";
-				reg = <0x50000 0x1000>;
-				interrupts = <24>;
-				clocks = <&gate_clk 0>;
-				status = "okay";
-			};
+		core_clk: core-clocks@d0214 {
+			compatible = "marvell,dove-core-clock";
+			reg = <0xd0214 0x4>;
+			#clock-cells = <1>;
+		};
 
-			ehci1: usb-host@51000 {
-				compatible = "marvell,orion-ehci";
-				reg = <0x51000 0x1000>;
-				interrupts = <25>;
-				clocks = <&gate_clk 1>;
-				status = "okay";
-			};
+		gate_clk: clock-gating-control@d0038 {
+			compatible = "marvell,dove-gating-clock";
+			reg = <0xd0038 0x4>;
+			clocks = <&core_clk 0>;
+			#clock-cells = <1>;
+		};
 
-			xor0: dma-engine@60800 {
-				compatible = "marvell,orion-xor";
-				reg = <0x60800 0x100
-				       0x60a00 0x100>;
-				clocks = <&gate_clk 23>;
-				status = "okay";
-
-				channel0 {
-					interrupts = <39>;
-					dmacap,memcpy;
-					dmacap,xor;
-				};
-
-				channel1 {
-					interrupts = <40>;
-					dmacap,memcpy;
-					dmacap,xor;
-				};
-			};
+		thermal: thermal@d001c {
+			compatible = "marvell,dove-thermal";
+			reg = <0xd001c 0x0c>, <0xd005c 0x08>;
+		};
 
-			xor1: dma-engine@60900 {
-				compatible = "marvell,orion-xor";
-				reg = <0x60900 0x100
-				       0x60b00 0x100>;
-				clocks = <&gate_clk 24>;
-				status = "okay";
-
-				channel0 {
-					interrupts = <42>;
-					dmacap,memcpy;
-					dmacap,xor;
-				};
-
-				channel1 {
-					interrupts = <43>;
-					dmacap,memcpy;
-					dmacap,xor;
-				};
-			};
+		uart0: serial@12000 {
+			compatible = "ns16550a";
+			reg = <0x12000 0x100>;
+			reg-shift = <2>;
+			interrupts = <7>;
+			clocks = <&core_clk 0>;
+			status = "disabled";
+		};
 
-			sdio1: sdio-host@90000 {
-				compatible = "marvell,dove-sdhci";
-				reg = <0x90000 0x100>;
-				interrupts = <36>, <38>;
-				clocks = <&gate_clk 9>;
-				pinctrl-0 = <&pmx_sdio1>;
-				pinctrl-names = "default";
-				status = "disabled";
-			};
+		uart1: serial@12100 {
+			compatible = "ns16550a";
+			reg = <0x12100 0x100>;
+			reg-shift = <2>;
+			interrupts = <8>;
+			clocks = <&core_clk 0>;
+			status = "disabled";
+		};
 
-			eth: ethernet-ctrl@72000 {
-				compatible = "marvell,orion-eth";
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <0x72000 0x4000>;
-				clocks = <&gate_clk 2>;
-				marvell,tx-checksum-limit = <1600>;
-				status = "disabled";
-
-				ethernet-port@0 {
-					compatible = "marvell,orion-eth-port";
-					reg = <0>;
-					interrupts = <29>;
-					/* overwrite MAC address in bootloader */
-					local-mac-address = [00 00 00 00 00 00];
-					phy-handle = <&ethphy>;
-				};
-			};
+		uart2: serial@12200 {
+			compatible = "ns16550a";
+			reg = <0x12200 0x100>;
+			reg-shift = <2>;
+			interrupts = <9>;
+			clocks = <&core_clk 0>;
+			status = "disabled";
+		};
 
-			mdio: mdio-bus@72004 {
-				compatible = "marvell,orion-mdio";
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <0x72004 0x84>;
-				interrupts = <30>;
-				clocks = <&gate_clk 2>;
-				status = "disabled";
-
-				ethphy: ethernet-phy {
-					/* set phy address in board file */
-				};
-			};
+		uart3: serial@12300 {
+			compatible = "ns16550a";
+			reg = <0x12300 0x100>;
+			reg-shift = <2>;
+			interrupts = <10>;
+			clocks = <&core_clk 0>;
+			status = "disabled";
+		};
 
-			sdio0: sdio-host@92000 {
-				compatible = "marvell,dove-sdhci";
-				reg = <0x92000 0x100>;
-				interrupts = <35>, <37>;
-				clocks = <&gate_clk 8>;
-				pinctrl-0 = <&pmx_sdio0>;
-				pinctrl-names = "default";
-				status = "disabled";
-			};
+		gpio0: gpio@d0400 {
+			compatible = "marvell,orion-gpio";
+			#gpio-cells = <2>;
+			gpio-controller;
+			reg = <0xd0400 0x20>;
+			ngpios = <32>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			interrupts = <12>, <13>, <14>, <60>;
+		};
 
-			sata0: sata-host@a0000 {
-				compatible = "marvell,orion-sata";
-				reg = <0xa0000 0x2400>;
-				interrupts = <62>;
-				clocks = <&gate_clk 3>;
-				phys = <&sata_phy0>;
-				phy-names = "port0";
-				nr-ports = <1>;
-				status = "disabled";
-			};
+		gpio1: gpio@d0420 {
+			compatible = "marvell,orion-gpio";
+			#gpio-cells = <2>;
+			gpio-controller;
+			reg = <0xd0420 0x20>;
+			ngpios = <32>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			interrupts = <61>;
+		};
 
-			sata_phy0: sata-phy@a2000 {
-				compatible = "marvell,mvebu-sata-phy";
-				reg = <0xa2000 0x0334>;
-				clocks = <&gate_clk 3>;
-				clock-names = "sata";
-				#phy-cells = <0>;
-				status = "ok";
-			};
+		gpio2: gpio@e8400 {
+			compatible = "marvell,orion-gpio";
+			#gpio-cells = <2>;
+			gpio-controller;
+			reg = <0xe8400 0x0c>;
+			ngpios = <8>;
+		};
 
-			audio0: audio-controller@b0000 {
-				compatible = "marvell,dove-audio";
-				reg = <0xb0000 0x2210>;
-				interrupts = <19>, <20>;
-				clocks = <&gate_clk 12>;
-				clock-names = "internal";
-				status = "disabled";
-			};
+		pinctrl: pinctrl@d0200 {
+			compatible = "marvell,dove-pinctrl";
+			reg = <0xd0200 0x10>;
+			clocks = <&gate_clk 22>;
+		};
 
-			audio1: audio-controller@b4000 {
-				compatible = "marvell,dove-audio";
-				reg = <0xb4000 0x2210>;
-				interrupts = <21>, <22>;
-				clocks = <&gate_clk 13>;
-				clock-names = "internal";
-				status = "disabled";
-			};
+		spi0: spi@10600 {
+			compatible = "marvell,orion-spi";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			cell-index = <0>;
+			interrupts = <6>;
+			reg = <0x10600 0x28>;
+			clocks = <&core_clk 0>;
+			status = "disabled";
+		};
 
-			thermal: thermal-diode@d001c {
-				compatible = "marvell,dove-thermal";
-				reg = <0xd001c 0x0c>, <0xd005c 0x08>;
-			};
+		spi1: spi@14600 {
+			compatible = "marvell,orion-spi";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			cell-index = <1>;
+			interrupts = <5>;
+			reg = <0x14600 0x28>;
+			clocks = <&core_clk 0>;
+			status = "disabled";
+		};
 
-			gate_clk: clock-gating-ctrl@d0038 {
-				compatible = "marvell,dove-gating-clock";
-				reg = <0xd0038 0x4>;
-				clocks = <&core_clk 0>;
-				#clock-cells = <1>;
-			};
+		i2c0: i2c@11000 {
+			compatible = "marvell,mv64xxx-i2c";
+			reg = <0x11000 0x20>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			interrupts = <11>;
+			clock-frequency = <400000>;
+			timeout-ms = <1000>;
+			clocks = <&core_clk 0>;
+			status = "disabled";
+		};
 
-			pinctrl: pin-ctrl@d0200 {
-				compatible = "marvell,dove-pinctrl";
-				reg = <0xd0200 0x14>,
-				      <0xd0440 0x04>;
-				clocks = <&gate_clk 22>;
-
-				pmx_gpio_0: pmx-gpio-0 {
-					marvell,pins = "mpp0";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_1: pmx-gpio-1 {
-					marvell,pins = "mpp1";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_2: pmx-gpio-2 {
-					marvell,pins = "mpp2";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_3: pmx-gpio-3 {
-					marvell,pins = "mpp3";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_4: pmx-gpio-4 {
-					marvell,pins = "mpp4";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_5: pmx-gpio-5 {
-					marvell,pins = "mpp5";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_6: pmx-gpio-6 {
-					marvell,pins = "mpp6";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_7: pmx-gpio-7 {
-					marvell,pins = "mpp7";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_8: pmx-gpio-8 {
-					marvell,pins = "mpp8";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_9: pmx-gpio-9 {
-					marvell,pins = "mpp9";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_10: pmx-gpio-10 {
-					marvell,pins = "mpp10";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_11: pmx-gpio-11 {
-					marvell,pins = "mpp11";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_12: pmx-gpio-12 {
-					marvell,pins = "mpp12";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_13: pmx-gpio-13 {
-					marvell,pins = "mpp13";
-					marvell,function = "gpio";
-				};
-
-				pmx_audio1_extclk: pmx-audio1-extclk {
-					marvell,pins = "mpp13";
-					marvell,function = "audio1";
-				};
-
-				pmx_gpio_14: pmx-gpio-14 {
-					marvell,pins = "mpp14";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_15: pmx-gpio-15 {
-					marvell,pins = "mpp15";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_16: pmx-gpio-16 {
-					marvell,pins = "mpp16";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_17: pmx-gpio-17 {
-					marvell,pins = "mpp17";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_18: pmx-gpio-18 {
-					marvell,pins = "mpp18";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_19: pmx-gpio-19 {
-					marvell,pins = "mpp19";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_20: pmx-gpio-20 {
-					marvell,pins = "mpp20";
-					marvell,function = "gpio";
-				};
-
-				pmx_gpio_21: pmx-gpio-21 {
-					marvell,pins = "mpp21";
-					marvell,function = "gpio";
-				};
-
-				pmx_camera: pmx-camera {
-					marvell,pins = "mpp_camera";
-					marvell,function = "camera";
-				};
-
-				pmx_camera_gpio: pmx-camera-gpio {
-					marvell,pins = "mpp_camera";
-					marvell,function = "gpio";
-				};
-
-				pmx_sdio0: pmx-sdio0 {
-					marvell,pins = "mpp_sdio0";
-					marvell,function = "sdio0";
-				};
-
-				pmx_sdio0_gpio: pmx-sdio0-gpio {
-					marvell,pins = "mpp_sdio0";
-					marvell,function = "gpio";
-				};
-
-				pmx_sdio1: pmx-sdio1 {
-					marvell,pins = "mpp_sdio1";
-					marvell,function = "sdio1";
-				};
-
-				pmx_sdio1_gpio: pmx-sdio1-gpio {
-					marvell,pins = "mpp_sdio1";
-					marvell,function = "gpio";
-				};
-
-				pmx_audio1_gpio: pmx-audio1-gpio {
-					marvell,pins = "mpp_audio1";
-					marvell,function = "gpio";
-				};
-
-				pmx_audio1_i2s1_spdifo: pmx-audio1-i2s1-spdifo {
-					marvell,pins = "mpp_audio1";
-					marvell,function = "i2s1/spdifo";
-				};
-
-				pmx_spi0: pmx-spi0 {
-					marvell,pins = "mpp_spi0";
-					marvell,function = "spi0";
-				};
-
-				pmx_spi0_gpio: pmx-spi0-gpio {
-					marvell,pins = "mpp_spi0";
-					marvell,function = "gpio";
-				};
-
-				pmx_uart1: pmx-uart1 {
-					marvell,pins = "mpp_uart1";
-					marvell,function = "uart1";
-				};
-
-				pmx_uart1_gpio: pmx-uart1-gpio {
-					marvell,pins = "mpp_uart1";
-					marvell,function = "gpio";
-				};
-
-				pmx_nand: pmx-nand {
-					marvell,pins = "mpp_nand";
-					marvell,function = "nand";
-				};
-
-				pmx_nand_gpo: pmx-nand-gpo {
-					marvell,pins = "mpp_nand";
-					marvell,function = "gpo";
-				};
-			};
+		ehci0: usb-host@50000 {
+			compatible = "marvell,orion-ehci";
+			reg = <0x50000 0x1000>;
+			interrupts = <24>;
+			clocks = <&gate_clk 0>;
+			status = "okay";
+		};
 
-			core_clk: core-clocks@d0214 {
-				compatible = "marvell,dove-core-clock";
-				reg = <0xd0214 0x4>;
-				#clock-cells = <1>;
-			};
+		ehci1: usb-host@51000 {
+			compatible = "marvell,orion-ehci";
+			reg = <0x51000 0x1000>;
+			interrupts = <25>;
+			clocks = <&gate_clk 1>;
+			status = "okay";
+		};
 
-			gpio0: gpio-ctrl@d0400 {
-				compatible = "marvell,orion-gpio";
-				#gpio-cells = <2>;
-				gpio-controller;
-				reg = <0xd0400 0x20>;
-				ngpios = <32>;
-				interrupt-controller;
-				#interrupt-cells = <2>;
-				interrupts = <12>, <13>, <14>, <60>;
-			};
+		sdio0: sdio@92000 {
+			compatible = "marvell,dove-sdhci";
+			reg = <0x92000 0x100>;
+			interrupts = <35>, <37>;
+			clocks = <&gate_clk 8>;
+			status = "disabled";
+		};
 
-			gpio1: gpio-ctrl@d0420 {
-				compatible = "marvell,orion-gpio";
-				#gpio-cells = <2>;
-				gpio-controller;
-				reg = <0xd0420 0x20>;
-				ngpios = <32>;
-				interrupt-controller;
-				#interrupt-cells = <2>;
-				interrupts = <61>;
-			};
+		sdio1: sdio@90000 {
+			compatible = "marvell,dove-sdhci";
+			reg = <0x90000 0x100>;
+			interrupts = <36>, <38>;
+			clocks = <&gate_clk 9>;
+			status = "disabled";
+		};
 
-			rtc: real-time-clock@d8500 {
-				compatible = "marvell,orion-rtc";
-				reg = <0xd8500 0x20>;
-			};
+		sata0: sata@a0000 {
+			compatible = "marvell,orion-sata";
+			reg = <0xa0000 0x2400>;
+			interrupts = <62>;
+			clocks = <&gate_clk 3>;
+			nr-ports = <1>;
+			status = "disabled";
+		};
 
-			gconf: global-config@e802c {
-				compatible = "marvell,dove-global-config",
-				             "syscon";
-				reg = <0xe802c 0x14>;
-			};
+		rtc@d8500 {
+			compatible = "marvell,orion-rtc";
+			reg = <0xd8500 0x20>;
+		};
 
-			gpio2: gpio-ctrl@e8400 {
-				compatible = "marvell,orion-gpio";
-				#gpio-cells = <2>;
-				gpio-controller;
-				reg = <0xe8400 0x0c>;
-				ngpios = <8>;
-			};
+		crypto: crypto@30000 {
+			compatible = "marvell,orion-crypto";
+			reg = <0x30000 0x10000>,
+			      <0xc8000000 0x800>;
+			reg-names = "regs", "sram";
+			interrupts = <31>;
+			clocks = <&gate_clk 15>;
+			status = "okay";
+		};
 
-			lcd1: lcd-controller@810000 {
-				compatible = "marvell,dove-lcd";
-				reg = <0x810000 0x1000>;
-				interrupts = <46>;
-				status = "disabled";
+		xor0: dma-engine@60800 {
+			compatible = "marvell,orion-xor";
+			reg = <0x60800 0x100
+			       0x60a00 0x100>;
+			clocks = <&gate_clk 23>;
+			status = "okay";
+
+			channel0 {
+				interrupts = <39>;
+				dmacap,memcpy;
+				dmacap,xor;
+			};
+
+			channel1 {
+				interrupts = <40>;
+				dmacap,memset;
+				dmacap,memcpy;
+				dmacap,xor;
 			};
+		};
 
-			lcd0: lcd-controller@820000 {
-				compatible = "marvell,dove-lcd";
-				reg = <0x820000 0x1000>;
-				interrupts = <47>;
-				status = "disabled";
+		xor1: dma-engine@60900 {
+			compatible = "marvell,orion-xor";
+			reg = <0x60900 0x100
+			       0x60b00 0x100>;
+			clocks = <&gate_clk 24>;
+			status = "okay";
+
+			channel0 {
+				interrupts = <42>;
+				dmacap,memcpy;
+				dmacap,xor;
+			};
+
+			channel1 {
+				interrupts = <43>;
+				dmacap,memset;
+				dmacap,memcpy;
+				dmacap,xor;
 			};
 		};
 	};
diff -urNp a/arch/arm/boot/dts/ecx-2000.dts b/arch/arm/boot/dts/ecx-2000.dts
--- a/arch/arm/boot/dts/ecx-2000.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/ecx-2000.dts	2015-10-27 00:45:05.000000000 +0000
@@ -85,12 +85,6 @@
 				<1 10 0xf08>;
 		};
 
-		memory-controller@fff00000 {
-			compatible = "calxeda,ecx-2000-ddr-ctrl";
-			reg = <0xfff00000 0x1000>;
-			interrupts = <0 91 4>;
-		};
-
 		intc: interrupt-controller@fff11000 {
 			compatible = "arm,cortex-a15-gic";
 			#interrupt-cells = <3>;
diff -urNp a/arch/arm/boot/dts/ecx-common.dtsi b/arch/arm/boot/dts/ecx-common.dtsi
--- a/arch/arm/boot/dts/ecx-common.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/ecx-common.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -19,14 +19,6 @@
 		bootargs = "console=ttyAMA0";
 	};
 
-	psci {
-		compatible	= "arm,psci";
-		method		= "smc";
-		cpu_suspend	= <0x84000002>;
-		cpu_off		= <0x84000004>;
-		cpu_on		= <0x84000006>;
-	};
-
 	soc {
 		#address-cells = <1>;
 		#size-cells = <1>;
@@ -41,8 +33,6 @@
 			calxeda,port-phys = <&combophy5 0 &combophy0 0
 					     &combophy0 1 &combophy0 2
 					     &combophy0 3>;
-			calxeda,sgpio-gpio =<&gpioh 5 1 &gpioh 6 1 &gpioh 7 1>;
-			calxeda,led-order = <4 0 1 2 3>;
 		};
 
 		sdhci@ffe0e000 {
@@ -53,6 +43,12 @@
 			status = "disabled";
 		};
 
+		memory-controller@fff00000 {
+			compatible = "calxeda,hb-ddr-ctrl";
+			reg = <0xfff00000 0x1000>;
+			interrupts = <0 91 4>;
+		};
+
 		ipc@fff20000 {
 			compatible = "arm,pl320", "arm,primecell";
 			reg = <0xfff20000 0x1000>;
diff -urNp a/arch/arm/boot/dts/emev2-kzm9d.dts b/arch/arm/boot/dts/emev2-kzm9d.dts
--- a/arch/arm/boot/dts/emev2-kzm9d.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/emev2-kzm9d.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /*
  * Device Tree Source for the KZM9D board
  *
- * Copyright (C) 2013 Renesas Solutions Corp.
+ * Copyright (C) 2012 Renesas Solutions Corp.
  *
  * This file is licensed under the terms of the GNU General Public License
  * version 2.  This program is licensed "as is" without any warranty of any
@@ -9,10 +9,7 @@
  */
 /dts-v1/;
 
-#include "emev2.dtsi"
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-#include <dt-bindings/interrupt-controller/irq.h>
+/include/ "emev2.dtsi"
 
 / {
 	model = "EMEV2 KZM9D Board";
@@ -24,73 +21,6 @@
 	};
 
 	chosen {
-		bootargs = "console=ttyS1,115200n81 ignore_loglevel root=/dev/nfs ip=dhcp";
-		stdout-path = &uart1;
-	};
-
-	gpio_keys {
-		compatible = "gpio-keys";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		button@1 {
-			debounce_interval = <50>;
-			wakeup = <1>;
-			label = "DSW2-1";
-			linux,code = <KEY_1>;
-			gpios = <&gpio0 14 GPIO_ACTIVE_HIGH>;
-		};
-		button@2 {
-			debounce_interval = <50>;
-			wakeup = <1>;
-			label = "DSW2-2";
-			linux,code = <KEY_2>;
-			gpios = <&gpio0 15 GPIO_ACTIVE_HIGH>;
-		};
-		button@3 {
-			debounce_interval = <50>;
-			wakeup = <1>;
-			label = "DSW2-3";
-			linux,code = <KEY_3>;
-			gpios = <&gpio0 16 GPIO_ACTIVE_HIGH>;
-		};
-		button@4 {
-			debounce_interval = <50>;
-			wakeup = <1>;
-			label = "DSW2-4";
-			linux,code = <KEY_4>;
-			gpios = <&gpio0 17 GPIO_ACTIVE_HIGH>;
-		};
-	};
-
-	reg_1p8v: regulator@0 {
-		compatible = "regulator-fixed";
-		regulator-name = "fixed-1.8V";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <1800000>;
-		regulator-always-on;
-		regulator-boot-on;
-	};
-
-	reg_3p3v: regulator@1 {
-		compatible = "regulator-fixed";
-		regulator-name = "fixed-3.3V";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		regulator-always-on;
-		regulator-boot-on;
-	};
-
-	lan9220@20000000 {
-		compatible = "smsc,lan9220", "smsc,lan9115";
-		reg = <0x20000000 0x10000>;
-		phy-mode = "mii";
-		interrupt-parent = <&gpio0>;
-		interrupts = <1 IRQ_TYPE_EDGE_RISING>;
-		reg-io-width = <4>;
-		smsc,irq-active-high;
-		smsc,irq-push-pull;
-		vddvario-supply = <&reg_1p8v>;
-		vdd33a-supply = <&reg_3p3v>;
+		bootargs = "console=tty0 console=ttyS1,115200n81 earlyprintk=serial8250-em.1,115200n81 mem=128M@0x40000000 ignore_loglevel root=/dev/nfs ip=dhcp nfsroot=,rsize=4096,wsize=4096";
 	};
 };
diff -urNp a/arch/arm/boot/dts/emev2.dtsi b/arch/arm/boot/dts/emev2.dtsi
--- a/arch/arm/boot/dts/emev2.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/emev2.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,21 +8,12 @@
  * kind, whether express or implied.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/interrupt-controller/irq.h>
+/include/ "skeleton.dtsi"
 
 / {
 	compatible = "renesas,emev2";
 	interrupt-parent = <&gic>;
 
-	aliases {
-		gpio0 = &gpio0;
-		gpio1 = &gpio1;
-		gpio2 = &gpio2;
-		gpio3 = &gpio3;
-		gpio4 = &gpio4;
-	};
-
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
@@ -31,13 +22,11 @@
 			device_type = "cpu";
 			compatible = "arm,cortex-a9";
 			reg = <0>;
-			clock-frequency = <533000000>;
 		};
 		cpu@1 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a9";
 			reg = <1>;
-			clock-frequency = <533000000>;
 		};
 	};
 
@@ -49,179 +38,33 @@
 		      <0xe0020000 0x0100>;
 	};
 
-	pmu {
-		compatible = "arm,cortex-a9-pmu";
-		interrupts = <0 120 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 121 IRQ_TYPE_LEVEL_HIGH>;
-	};
-
-	clocks@e0110000 {
-		compatible = "renesas,emev2-smu";
-		reg = <0xe0110000 0x10000>;
-		#address-cells = <2>;
-		#size-cells = <0>;
-
-		c32ki: c32ki {
-			compatible = "fixed-clock";
-			clock-frequency = <32768>;
-			#clock-cells = <0>;
-		};
-		pll3_fo: pll3_fo {
-			compatible = "fixed-factor-clock";
-			clocks = <&c32ki>;
-			clock-div = <1>;
-			clock-mult = <7000>;
-			#clock-cells = <0>;
-		};
-		usia_u0_sclkdiv: usia_u0_sclkdiv {
-			compatible = "renesas,emev2-smu-clkdiv";
-			reg = <0x610 0>;
-			clocks = <&pll3_fo>;
-			#clock-cells = <0>;
-		};
-		usib_u1_sclkdiv: usib_u1_sclkdiv {
-			compatible = "renesas,emev2-smu-clkdiv";
-			reg = <0x65c 0>;
-			clocks = <&pll3_fo>;
-			#clock-cells = <0>;
-		};
-		usib_u2_sclkdiv: usib_u2_sclkdiv {
-			compatible = "renesas,emev2-smu-clkdiv";
-			reg = <0x65c 16>;
-			clocks = <&pll3_fo>;
-			#clock-cells = <0>;
-		};
-		usib_u3_sclkdiv: usib_u3_sclkdiv {
-			compatible = "renesas,emev2-smu-clkdiv";
-			reg = <0x660 0>;
-			clocks = <&pll3_fo>;
-			#clock-cells = <0>;
-		};
-		usia_u0_sclk: usia_u0_sclk {
-			compatible = "renesas,emev2-smu-gclk";
-			reg = <0x4a0 1>;
-			clocks = <&usia_u0_sclkdiv>;
-			#clock-cells = <0>;
-		};
-		usib_u1_sclk: usib_u1_sclk {
-			compatible = "renesas,emev2-smu-gclk";
-			reg = <0x4b8 1>;
-			clocks = <&usib_u1_sclkdiv>;
-			#clock-cells = <0>;
-		};
-		usib_u2_sclk: usib_u2_sclk {
-			compatible = "renesas,emev2-smu-gclk";
-			reg = <0x4bc 1>;
-			clocks = <&usib_u2_sclkdiv>;
-			#clock-cells = <0>;
-		};
-		usib_u3_sclk: usib_u3_sclk {
-			compatible = "renesas,emev2-smu-gclk";
-			reg = <0x4c0 1>;
-			clocks = <&usib_u3_sclkdiv>;
-			#clock-cells = <0>;
-		};
-		sti_sclk: sti_sclk {
-			compatible = "renesas,emev2-smu-gclk";
-			reg = <0x528 1>;
-			clocks = <&c32ki>;
-			#clock-cells = <0>;
-		};
-	};
-
-	timer@e0180000 {
+	sti@e0180000 {
 		compatible = "renesas,em-sti";
 		reg = <0xe0180000 0x54>;
-		interrupts = <0 125 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&sti_sclk>;
-		clock-names = "sclk";
+		interrupts = <0 125 0>;
 	};
 
-	uart0: serial@e1020000 {
+	uart@e1020000 {
 		compatible = "renesas,em-uart";
 		reg = <0xe1020000 0x38>;
-		interrupts = <0 8 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&usia_u0_sclk>;
-		clock-names = "sclk";
+		interrupts = <0 8 0>;
 	};
 
-	uart1: serial@e1030000 {
+	uart@e1030000 {
 		compatible = "renesas,em-uart";
 		reg = <0xe1030000 0x38>;
-		interrupts = <0 9 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&usib_u1_sclk>;
-		clock-names = "sclk";
+		interrupts = <0 9 0>;
 	};
 
-	uart2: serial@e1040000 {
+	uart@e1040000 {
 		compatible = "renesas,em-uart";
 		reg = <0xe1040000 0x38>;
-		interrupts = <0 10 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&usib_u2_sclk>;
-		clock-names = "sclk";
+		interrupts = <0 10 0>;
 	};
 
-	uart3: serial@e1050000 {
+	uart@e1050000 {
 		compatible = "renesas,em-uart";
 		reg = <0xe1050000 0x38>;
-		interrupts = <0 11 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&usib_u3_sclk>;
-		clock-names = "sclk";
-	};
-
-	gpio0: gpio@e0050000 {
-		compatible = "renesas,em-gio";
-		reg = <0xe0050000 0x2c>, <0xe0050040 0x20>;
-		interrupts = <0 67 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 68 IRQ_TYPE_LEVEL_HIGH>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		ngpios = <32>;
-		interrupt-controller;
-		#interrupt-cells = <2>;
-	};
-	gpio1: gpio@e0050080 {
-		compatible = "renesas,em-gio";
-		reg = <0xe0050080 0x2c>, <0xe00500c0 0x20>;
-		interrupts = <0 69 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 70 IRQ_TYPE_LEVEL_HIGH>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		ngpios = <32>;
-		interrupt-controller;
-		#interrupt-cells = <2>;
-	};
-	gpio2: gpio@e0050100 {
-		compatible = "renesas,em-gio";
-		reg = <0xe0050100 0x2c>, <0xe0050140 0x20>;
-		interrupts = <0 71 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 72 IRQ_TYPE_LEVEL_HIGH>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		ngpios = <32>;
-		interrupt-controller;
-		#interrupt-cells = <2>;
-	};
-	gpio3: gpio@e0050180 {
-		compatible = "renesas,em-gio";
-		reg = <0xe0050180 0x2c>, <0xe00501c0 0x20>;
-		interrupts = <0 73 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 74 IRQ_TYPE_LEVEL_HIGH>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		ngpios = <32>;
-		interrupt-controller;
-		#interrupt-cells = <2>;
-	};
-	gpio4: gpio@e0050200 {
-		compatible = "renesas,em-gio";
-		reg = <0xe0050200 0x2c>, <0xe0050240 0x20>;
-		interrupts = <0 75 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 76 IRQ_TYPE_LEVEL_HIGH>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		ngpios = <31>;
-		interrupt-controller;
-		#interrupt-cells = <2>;
+		interrupts = <0 11 0>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/ethernut5.dts b/arch/arm/boot/dts/ethernut5.dts
--- a/arch/arm/boot/dts/ethernut5.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/ethernut5.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2.
  */
 /dts-v1/;
-#include "at91sam9xe.dtsi"
+/include/ "at91sam9260.dtsi"
 
 / {
 	model = "Ethernut 5";
@@ -20,16 +20,6 @@
 		reg = <0x20000000 0x08000000>;
 	};
 
-	clocks {
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <18432000>;
-		};
-	};
-
 	ahb {
 		apb {
 			dbgu: serial@fffff200 {
@@ -50,7 +40,7 @@
 			};
 
 			usb1: gadget@fffa4000 {
-				atmel,vbus-gpio = <&pioC 5 GPIO_ACTIVE_HIGH>;
+				atmel,vbus-gpio = <&pioC 5 0>;
 				status = "okay";
 			};
 		};
@@ -62,7 +52,7 @@
 			status = "okay";
 
 			gpios = <0
-				 &pioC 14 GPIO_ACTIVE_HIGH
+				 &pioC 14 0
 				 0
 				>;
 
diff -urNp a/arch/arm/boot/dts/evk-pro3.dts b/arch/arm/boot/dts/evk-pro3.dts
--- a/arch/arm/boot/dts/evk-pro3.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/evk-pro3.dts	2015-10-27 00:45:05.000000000 +0000
@@ -9,18 +9,12 @@
 
 /dts-v1/;
 
-#include "ge863-pro3.dtsi"
+/include/ "ge863-pro3.dtsi"
 
 / {
 	model = "Telit EVK-PRO3 for Telit GE863-PRO3";
 	compatible = "telit,evk-pro3", "atmel,at91sam9260", "atmel,at91sam9";
 
-	clocks {
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-	};
-
 	ahb {
 		apb {
 			macb0: ethernet@fffc4000 {
@@ -37,7 +31,7 @@
 			};
 
 			usb1: gadget@fffa4000 {
-				atmel,vbus-gpio = <&pioC 5 GPIO_ACTIVE_HIGH>;
+				atmel,vbus-gpio = <&pioC 5 0>;
 				status = "okay";
 			};
 
@@ -56,4 +50,4 @@
 		status = "okay";
 	};
 
-};
+};
\ No newline at end of file
diff -urNp a/arch/arm/boot/dts/exynos4.dtsi b/arch/arm/boot/dts/exynos4.dtsi
--- a/arch/arm/boot/dts/exynos4.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -19,9 +19,7 @@
  * published by the Free Software Foundation.
  */
 
-#include <dt-bindings/clock/exynos4.h>
-#include <dt-bindings/clock/exynos-audss-clk.h>
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	interrupt-parent = <&gic>;
@@ -38,37 +36,6 @@
 		i2c5 = &i2c_5;
 		i2c6 = &i2c_6;
 		i2c7 = &i2c_7;
-		i2c8 = &i2c_8;
-		csis0 = &csis_0;
-		csis1 = &csis_1;
-		fimc0 = &fimc_0;
-		fimc1 = &fimc_1;
-		fimc2 = &fimc_2;
-		fimc3 = &fimc_3;
-		serial0 = &serial_0;
-		serial1 = &serial_1;
-		serial2 = &serial_2;
-		serial3 = &serial_3;
-	};
-
-	clock_audss: clock-controller@03810000 {
-		compatible = "samsung,exynos4210-audss-clock";
-		reg = <0x03810000 0x0C>;
-		#clock-cells = <1>;
-	};
-
-	i2s0: i2s@03830000 {
-		compatible = "samsung,s5pv210-i2s";
-		reg = <0x03830000 0x100>;
-		clocks = <&clock_audss EXYNOS_I2S_BUS>;
-		clock-names = "iis";
-		#clock-cells = <1>;
-		clock-output-names = "i2s_cdclk0";
-		dmas = <&pdma0 12>, <&pdma0 11>, <&pdma0 10>;
-		dma-names = "tx", "rx", "tx-sec";
-		samsung,idma-addr = <0x03000000>;
-		#sound-dai-cells = <1>;
-		status = "disabled";
 	};
 
 	chipid@10000000 {
@@ -76,189 +43,60 @@
 		reg = <0x10000000 0x100>;
 	};
 
-	mipi_phy: video-phy@10020710 {
-		compatible = "samsung,s5pv210-mipi-video-phy";
-		reg = <0x10020710 8>;
-		#phy-cells = <1>;
-		syscon = <&pmu_system_controller>;
-	};
-
 	pd_mfc: mfc-power-domain@10023C40 {
 		compatible = "samsung,exynos4210-pd";
 		reg = <0x10023C40 0x20>;
-		#power-domain-cells = <0>;
 	};
 
 	pd_g3d: g3d-power-domain@10023C60 {
 		compatible = "samsung,exynos4210-pd";
 		reg = <0x10023C60 0x20>;
-		#power-domain-cells = <0>;
 	};
 
 	pd_lcd0: lcd0-power-domain@10023C80 {
 		compatible = "samsung,exynos4210-pd";
 		reg = <0x10023C80 0x20>;
-		#power-domain-cells = <0>;
 	};
 
 	pd_tv: tv-power-domain@10023C20 {
 		compatible = "samsung,exynos4210-pd";
 		reg = <0x10023C20 0x20>;
-		#power-domain-cells = <0>;
-		power-domains = <&pd_lcd0>;
 	};
 
 	pd_cam: cam-power-domain@10023C00 {
 		compatible = "samsung,exynos4210-pd";
 		reg = <0x10023C00 0x20>;
-		#power-domain-cells = <0>;
 	};
 
 	pd_gps: gps-power-domain@10023CE0 {
 		compatible = "samsung,exynos4210-pd";
 		reg = <0x10023CE0 0x20>;
-		#power-domain-cells = <0>;
-	};
-
-	pd_gps_alive: gps-alive-power-domain@10023D00 {
-		compatible = "samsung,exynos4210-pd";
-		reg = <0x10023D00 0x20>;
-		#power-domain-cells = <0>;
 	};
 
-	gic: interrupt-controller@10490000 {
+	gic:interrupt-controller@10490000 {
 		compatible = "arm,cortex-a9-gic";
 		#interrupt-cells = <3>;
 		interrupt-controller;
-		reg = <0x10490000 0x10000>, <0x10480000 0x10000>;
+		reg = <0x10490000 0x1000>, <0x10480000 0x100>;
 	};
 
-	combiner: interrupt-controller@10440000 {
+	combiner:interrupt-controller@10440000 {
 		compatible = "samsung,exynos4210-combiner";
 		#interrupt-cells = <2>;
 		interrupt-controller;
 		reg = <0x10440000 0x1000>;
 	};
 
-	pmu {
-		compatible = "arm,cortex-a9-pmu";
-		interrupt-parent = <&combiner>;
-		interrupts = <2 2>, <3 2>;
-	};
-
-	sys_reg: syscon@10010000 {
+	sys_reg: sysreg {
 		compatible = "samsung,exynos4-sysreg", "syscon";
 		reg = <0x10010000 0x400>;
 	};
 
-	pmu_system_controller: system-controller@10020000 {
-		compatible = "samsung,exynos4210-pmu", "syscon";
-		reg = <0x10020000 0x4000>;
-	};
-
-	dsi_0: dsi@11C80000 {
-		compatible = "samsung,exynos4210-mipi-dsi";
-		reg = <0x11C80000 0x10000>;
-		interrupts = <0 79 0>;
-		power-domains = <&pd_lcd0>;
-		phys = <&mipi_phy 1>;
-		phy-names = "dsim";
-		clocks = <&clock CLK_DSIM0>, <&clock CLK_SCLK_MIPI0>;
-		clock-names = "bus_clk", "pll_clk";
-		status = "disabled";
-		#address-cells = <1>;
-		#size-cells = <0>;
-	};
-
-	camera {
-		compatible = "samsung,fimc", "simple-bus";
-		status = "disabled";
-		#address-cells = <1>;
-		#size-cells = <1>;
-		#clock-cells = <1>;
-		clock-output-names = "cam_a_clkout", "cam_b_clkout";
-		ranges;
-
-		fimc_0: fimc@11800000 {
-			compatible = "samsung,exynos4210-fimc";
-			reg = <0x11800000 0x1000>;
-			interrupts = <0 84 0>;
-			clocks = <&clock CLK_FIMC0>, <&clock CLK_SCLK_FIMC0>;
-			clock-names = "fimc", "sclk_fimc";
-			power-domains = <&pd_cam>;
-			samsung,sysreg = <&sys_reg>;
-			status = "disabled";
-		};
-
-		fimc_1: fimc@11810000 {
-			compatible = "samsung,exynos4210-fimc";
-			reg = <0x11810000 0x1000>;
-			interrupts = <0 85 0>;
-			clocks = <&clock CLK_FIMC1>, <&clock CLK_SCLK_FIMC1>;
-			clock-names = "fimc", "sclk_fimc";
-			power-domains = <&pd_cam>;
-			samsung,sysreg = <&sys_reg>;
-			status = "disabled";
-		};
-
-		fimc_2: fimc@11820000 {
-			compatible = "samsung,exynos4210-fimc";
-			reg = <0x11820000 0x1000>;
-			interrupts = <0 86 0>;
-			clocks = <&clock CLK_FIMC2>, <&clock CLK_SCLK_FIMC2>;
-			clock-names = "fimc", "sclk_fimc";
-			power-domains = <&pd_cam>;
-			samsung,sysreg = <&sys_reg>;
-			status = "disabled";
-		};
-
-		fimc_3: fimc@11830000 {
-			compatible = "samsung,exynos4210-fimc";
-			reg = <0x11830000 0x1000>;
-			interrupts = <0 87 0>;
-			clocks = <&clock CLK_FIMC3>, <&clock CLK_SCLK_FIMC3>;
-			clock-names = "fimc", "sclk_fimc";
-			power-domains = <&pd_cam>;
-			samsung,sysreg = <&sys_reg>;
-			status = "disabled";
-		};
-
-		csis_0: csis@11880000 {
-			compatible = "samsung,exynos4210-csis";
-			reg = <0x11880000 0x4000>;
-			interrupts = <0 78 0>;
-			clocks = <&clock CLK_CSIS0>, <&clock CLK_SCLK_CSIS0>;
-			clock-names = "csis", "sclk_csis";
-			bus-width = <4>;
-			power-domains = <&pd_cam>;
-			phys = <&mipi_phy 0>;
-			phy-names = "csis";
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		csis_1: csis@11890000 {
-			compatible = "samsung,exynos4210-csis";
-			reg = <0x11890000 0x4000>;
-			interrupts = <0 80 0>;
-			clocks = <&clock CLK_CSIS1>, <&clock CLK_SCLK_CSIS1>;
-			clock-names = "csis", "sclk_csis";
-			bus-width = <2>;
-			power-domains = <&pd_cam>;
-			phys = <&mipi_phy 2>;
-			phy-names = "csis";
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-	};
-
 	watchdog@10060000 {
 		compatible = "samsung,s3c2410-wdt";
 		reg = <0x10060000 0x100>;
 		interrupts = <0 43 0>;
-		clocks = <&clock CLK_WDT>;
+		clocks = <&clock 345>;
 		clock-names = "watchdog";
 		status = "disabled";
 	};
@@ -267,7 +105,7 @@
 		compatible = "samsung,s3c6410-rtc";
 		reg = <0x10070000 0x100>;
 		interrupts = <0 44 0>, <0 45 0>;
-		clocks = <&clock CLK_RTC>;
+		clocks = <&clock 346>;
 		clock-names = "rtc";
 		status = "disabled";
 	};
@@ -276,7 +114,7 @@
 		compatible = "samsung,s5pv210-keypad";
 		reg = <0x100A0000 0x100>;
 		interrupts = <0 109 0>;
-		clocks = <&clock CLK_KEYIF>;
+		clocks = <&clock 347>;
 		clock-names = "keypad";
 		status = "disabled";
 	};
@@ -285,7 +123,7 @@
 		compatible = "samsung,exynos4210-sdhci";
 		reg = <0x12510000 0x100>;
 		interrupts = <0 73 0>;
-		clocks = <&clock CLK_SDMMC0>, <&clock CLK_SCLK_MMC0>;
+		clocks = <&clock 297>, <&clock 145>;
 		clock-names = "hsmmc", "mmc_busclk.2";
 		status = "disabled";
 	};
@@ -294,7 +132,7 @@
 		compatible = "samsung,exynos4210-sdhci";
 		reg = <0x12520000 0x100>;
 		interrupts = <0 74 0>;
-		clocks = <&clock CLK_SDMMC1>, <&clock CLK_SCLK_MMC1>;
+		clocks = <&clock 298>, <&clock 146>;
 		clock-names = "hsmmc", "mmc_busclk.2";
 		status = "disabled";
 	};
@@ -303,7 +141,7 @@
 		compatible = "samsung,exynos4210-sdhci";
 		reg = <0x12530000 0x100>;
 		interrupts = <0 75 0>;
-		clocks = <&clock CLK_SDMMC2>, <&clock CLK_SCLK_MMC2>;
+		clocks = <&clock 299>, <&clock 147>;
 		clock-names = "hsmmc", "mmc_busclk.2";
 		status = "disabled";
 	};
@@ -312,142 +150,51 @@
 		compatible = "samsung,exynos4210-sdhci";
 		reg = <0x12540000 0x100>;
 		interrupts = <0 76 0>;
-		clocks = <&clock CLK_SDMMC3>, <&clock CLK_SCLK_MMC3>;
+		clocks = <&clock 300>, <&clock 148>;
 		clock-names = "hsmmc", "mmc_busclk.2";
 		status = "disabled";
 	};
 
-	exynos_usbphy: exynos-usbphy@125B0000 {
-		compatible = "samsung,exynos4210-usb2-phy";
-		reg = <0x125B0000 0x100>;
-		samsung,pmureg-phandle = <&pmu_system_controller>;
-		clocks = <&clock CLK_USB_DEVICE>, <&clock CLK_XUSBXTI>;
-		clock-names = "phy", "ref";
-		#phy-cells = <1>;
-		status = "disabled";
-	};
-
-	hsotg@12480000 {
-		compatible = "samsung,s3c6400-hsotg";
-		reg = <0x12480000 0x20000>;
-		interrupts = <0 71 0>;
-		clocks = <&clock CLK_USB_DEVICE>;
-		clock-names = "otg";
-		phys = <&exynos_usbphy 0>;
-		phy-names = "usb2-phy";
-		status = "disabled";
-	};
-
-	ehci@12580000 {
-		compatible = "samsung,exynos4210-ehci";
-		reg = <0x12580000 0x100>;
-		interrupts = <0 70 0>;
-		clocks = <&clock CLK_USB_HOST>;
-		clock-names = "usbhost";
-		status = "disabled";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		port@0 {
-		    reg = <0>;
-		    phys = <&exynos_usbphy 1>;
-		    status = "disabled";
-		};
-		port@1 {
-		    reg = <1>;
-		    phys = <&exynos_usbphy 2>;
-		    status = "disabled";
-		};
-		port@2 {
-		    reg = <2>;
-		    phys = <&exynos_usbphy 3>;
-		    status = "disabled";
-		};
-	};
-
-	ohci@12590000 {
-		compatible = "samsung,exynos4210-ohci";
-		reg = <0x12590000 0x100>;
-		interrupts = <0 70 0>;
-		clocks = <&clock CLK_USB_HOST>;
-		clock-names = "usbhost";
-		status = "disabled";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		port@0 {
-		    reg = <0>;
-		    phys = <&exynos_usbphy 1>;
-		    status = "disabled";
-		};
-	};
-
-	i2s1: i2s@13960000 {
-		compatible = "samsung,s3c6410-i2s";
-		reg = <0x13960000 0x100>;
-		clocks = <&clock CLK_I2S1>;
-		clock-names = "iis";
-		#clock-cells = <1>;
-		clock-output-names = "i2s_cdclk1";
-		dmas = <&pdma1 12>, <&pdma1 11>;
-		dma-names = "tx", "rx";
-		#sound-dai-cells = <1>;
-		status = "disabled";
-	};
-
-	i2s2: i2s@13970000 {
-		compatible = "samsung,s3c6410-i2s";
-		reg = <0x13970000 0x100>;
-		clocks = <&clock CLK_I2S2>;
-		clock-names = "iis";
-		#clock-cells = <1>;
-		clock-output-names = "i2s_cdclk2";
-		dmas = <&pdma0 14>, <&pdma0 13>;
-		dma-names = "tx", "rx";
-		#sound-dai-cells = <1>;
-		status = "disabled";
-	};
-
 	mfc: codec@13400000 {
 		compatible = "samsung,mfc-v5";
 		reg = <0x13400000 0x10000>;
 		interrupts = <0 94 0>;
-		power-domains = <&pd_mfc>;
-		clocks = <&clock CLK_MFC>, <&clock CLK_SCLK_MFC>;
-		clock-names = "mfc", "sclk_mfc";
+		samsung,power-domain = <&pd_mfc>;
 		status = "disabled";
 	};
 
-	serial_0: serial@13800000 {
+	serial@13800000 {
 		compatible = "samsung,exynos4210-uart";
 		reg = <0x13800000 0x100>;
 		interrupts = <0 52 0>;
-		clocks = <&clock CLK_UART0>, <&clock CLK_SCLK_UART0>;
+		clocks = <&clock 312>, <&clock 151>;
 		clock-names = "uart", "clk_uart_baud0";
 		status = "disabled";
 	};
 
-	serial_1: serial@13810000 {
+	serial@13810000 {
 		compatible = "samsung,exynos4210-uart";
 		reg = <0x13810000 0x100>;
 		interrupts = <0 53 0>;
-		clocks = <&clock CLK_UART1>, <&clock CLK_SCLK_UART1>;
+		clocks = <&clock 313>, <&clock 152>;
 		clock-names = "uart", "clk_uart_baud0";
 		status = "disabled";
 	};
 
-	serial_2: serial@13820000 {
+	serial@13820000 {
 		compatible = "samsung,exynos4210-uart";
 		reg = <0x13820000 0x100>;
 		interrupts = <0 54 0>;
-		clocks = <&clock CLK_UART2>, <&clock CLK_SCLK_UART2>;
+		clocks = <&clock 314>, <&clock 153>;
 		clock-names = "uart", "clk_uart_baud0";
 		status = "disabled";
 	};
 
-	serial_3: serial@13830000 {
+	serial@13830000 {
 		compatible = "samsung,exynos4210-uart";
 		reg = <0x13830000 0x100>;
 		interrupts = <0 55 0>;
-		clocks = <&clock CLK_UART3>, <&clock CLK_SCLK_UART3>;
+		clocks = <&clock 315>, <&clock 154>;
 		clock-names = "uart", "clk_uart_baud0";
 		status = "disabled";
 	};
@@ -458,7 +205,7 @@
 		compatible = "samsung,s3c2440-i2c";
 		reg = <0x13860000 0x100>;
 		interrupts = <0 58 0>;
-		clocks = <&clock CLK_I2C0>;
+		clocks = <&clock 317>;
 		clock-names = "i2c";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2c0_bus>;
@@ -471,7 +218,7 @@
 		compatible = "samsung,s3c2440-i2c";
 		reg = <0x13870000 0x100>;
 		interrupts = <0 59 0>;
-		clocks = <&clock CLK_I2C1>;
+		clocks = <&clock 318>;
 		clock-names = "i2c";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2c1_bus>;
@@ -484,10 +231,8 @@
 		compatible = "samsung,s3c2440-i2c";
 		reg = <0x13880000 0x100>;
 		interrupts = <0 60 0>;
-		clocks = <&clock CLK_I2C2>;
+		clocks = <&clock 319>;
 		clock-names = "i2c";
-		pinctrl-names = "default";
-		pinctrl-0 = <&i2c2_bus>;
 		status = "disabled";
 	};
 
@@ -497,10 +242,8 @@
 		compatible = "samsung,s3c2440-i2c";
 		reg = <0x13890000 0x100>;
 		interrupts = <0 61 0>;
-		clocks = <&clock CLK_I2C3>;
+		clocks = <&clock 320>;
 		clock-names = "i2c";
-		pinctrl-names = "default";
-		pinctrl-0 = <&i2c3_bus>;
 		status = "disabled";
 	};
 
@@ -510,10 +253,8 @@
 		compatible = "samsung,s3c2440-i2c";
 		reg = <0x138A0000 0x100>;
 		interrupts = <0 62 0>;
-		clocks = <&clock CLK_I2C4>;
+		clocks = <&clock 321>;
 		clock-names = "i2c";
-		pinctrl-names = "default";
-		pinctrl-0 = <&i2c4_bus>;
 		status = "disabled";
 	};
 
@@ -523,10 +264,8 @@
 		compatible = "samsung,s3c2440-i2c";
 		reg = <0x138B0000 0x100>;
 		interrupts = <0 63 0>;
-		clocks = <&clock CLK_I2C5>;
+		clocks = <&clock 322>;
 		clock-names = "i2c";
-		pinctrl-names = "default";
-		pinctrl-0 = <&i2c5_bus>;
 		status = "disabled";
 	};
 
@@ -536,10 +275,8 @@
 		compatible = "samsung,s3c2440-i2c";
 		reg = <0x138C0000 0x100>;
 		interrupts = <0 64 0>;
-		clocks = <&clock CLK_I2C6>;
+		clocks = <&clock 323>;
 		clock-names = "i2c";
-		pinctrl-names = "default";
-		pinctrl-0 = <&i2c6_bus>;
 		status = "disabled";
 	};
 
@@ -549,38 +286,20 @@
 		compatible = "samsung,s3c2440-i2c";
 		reg = <0x138D0000 0x100>;
 		interrupts = <0 65 0>;
-		clocks = <&clock CLK_I2C7>;
-		clock-names = "i2c";
-		pinctrl-names = "default";
-		pinctrl-0 = <&i2c7_bus>;
-		status = "disabled";
-	};
-
-	i2c_8: i2c@138E0000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "samsung,s3c2440-hdmiphy-i2c";
-		reg = <0x138E0000 0x100>;
-		interrupts = <0 93 0>;
-		clocks = <&clock CLK_I2C_HDMI>;
+		clocks = <&clock 324>;
 		clock-names = "i2c";
 		status = "disabled";
-
-		hdmi_i2c_phy: hdmiphy@38 {
-			compatible = "exynos4210-hdmiphy";
-			reg = <0x38>;
-		};
 	};
 
 	spi_0: spi@13920000 {
 		compatible = "samsung,exynos4210-spi";
 		reg = <0x13920000 0x100>;
 		interrupts = <0 66 0>;
-		dmas = <&pdma0 7>, <&pdma0 6>;
-		dma-names = "tx", "rx";
+		tx-dma-channel = <&pdma0 7>; /* preliminary */
+		rx-dma-channel = <&pdma0 6>; /* preliminary */
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_SPI0>, <&clock CLK_SCLK_SPI0>;
+		clocks = <&clock 327>, <&clock 159>;
 		clock-names = "spi", "spi_busclk0";
 		pinctrl-names = "default";
 		pinctrl-0 = <&spi0_bus>;
@@ -591,11 +310,11 @@
 		compatible = "samsung,exynos4210-spi";
 		reg = <0x13930000 0x100>;
 		interrupts = <0 67 0>;
-		dmas = <&pdma1 7>, <&pdma1 6>;
-		dma-names = "tx", "rx";
+		tx-dma-channel = <&pdma1 7>; /* preliminary */
+		rx-dma-channel = <&pdma1 6>; /* preliminary */
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_SPI1>, <&clock CLK_SCLK_SPI1>;
+		clocks = <&clock 328>, <&clock 160>;
 		clock-names = "spi", "spi_busclk0";
 		pinctrl-names = "default";
 		pinctrl-0 = <&spi1_bus>;
@@ -606,11 +325,11 @@
 		compatible = "samsung,exynos4210-spi";
 		reg = <0x13940000 0x100>;
 		interrupts = <0 68 0>;
-		dmas = <&pdma0 9>, <&pdma0 8>;
-		dma-names = "tx", "rx";
+		tx-dma-channel = <&pdma0 9>; /* preliminary */
+		rx-dma-channel = <&pdma0 8>; /* preliminary */
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_SPI2>, <&clock CLK_SCLK_SPI2>;
+		clocks = <&clock 329>, <&clock 161>;
 		clock-names = "spi", "spi_busclk0";
 		pinctrl-names = "default";
 		pinctrl-0 = <&spi2_bus>;
@@ -621,9 +340,7 @@
 		compatible = "samsung,exynos4210-pwm";
 		reg = <0x139D0000 0x1000>;
 		interrupts = <0 37 0>, <0 38 0>, <0 39 0>, <0 40 0>, <0 41 0>;
-		clocks = <&clock CLK_PWM>;
-		clock-names = "timers";
-		#pwm-cells = <3>;
+		#pwm-cells = <2>;
 		status = "disabled";
 	};
 
@@ -638,7 +355,7 @@
 			compatible = "arm,pl330", "arm,primecell";
 			reg = <0x12680000 0x1000>;
 			interrupts = <0 35 0>;
-			clocks = <&clock CLK_PDMA0>;
+			clocks = <&clock 292>;
 			clock-names = "apb_pclk";
 			#dma-cells = <1>;
 			#dma-channels = <8>;
@@ -649,7 +366,7 @@
 			compatible = "arm,pl330", "arm,primecell";
 			reg = <0x12690000 0x1000>;
 			interrupts = <0 36 0>;
-			clocks = <&clock CLK_PDMA1>;
+			clocks = <&clock 293>;
 			clock-names = "apb_pclk";
 			#dma-cells = <1>;
 			#dma-channels = <8>;
@@ -660,7 +377,7 @@
 			compatible = "arm,pl330", "arm,primecell";
 			reg = <0x12850000 0x1000>;
 			interrupts = <0 34 0>;
-			clocks = <&clock CLK_MDMA>;
+			clocks = <&clock 279>;
 			clock-names = "apb_pclk";
 			#dma-cells = <1>;
 			#dma-channels = <8>;
@@ -674,145 +391,9 @@
 		reg = <0x11c00000 0x20000>;
 		interrupt-names = "fifo", "vsync", "lcd_sys";
 		interrupts = <11 0>, <11 1>, <11 2>;
-		clocks = <&clock CLK_SCLK_FIMD0>, <&clock CLK_FIMD0>;
+		clocks = <&clock 140>, <&clock 283>;
 		clock-names = "sclk_fimd", "fimd";
-		power-domains = <&pd_lcd0>;
-		samsung,sysreg = <&sys_reg>;
-		status = "disabled";
-	};
-
-	tmu: tmu@100C0000 {
-		#include "exynos4412-tmu-sensor-conf.dtsi"
-	};
-
-	hdmi: hdmi@12D00000 {
-		compatible = "samsung,exynos4210-hdmi";
-		reg = <0x12D00000 0x70000>;
-		interrupts = <0 92 0>;
-		clock-names = "hdmi", "sclk_hdmi", "sclk_pixel", "sclk_hdmiphy",
-			"mout_hdmi";
-		clocks = <&clock CLK_HDMI>, <&clock CLK_SCLK_HDMI>,
-			<&clock CLK_SCLK_PIXEL>, <&clock CLK_SCLK_HDMIPHY>,
-			<&clock CLK_MOUT_HDMI>;
-		phy = <&hdmi_i2c_phy>;
-		power-domains = <&pd_tv>;
-		samsung,syscon-phandle = <&pmu_system_controller>;
-		status = "disabled";
-	};
-
-	mixer: mixer@12C10000 {
-		compatible = "samsung,exynos4210-mixer";
-		interrupts = <0 91 0>;
-		reg = <0x12C10000 0x2100>, <0x12c00000 0x300>;
-		power-domains = <&pd_tv>;
-		status = "disabled";
-	};
-
-	ppmu_dmc0: ppmu_dmc0@106a0000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x106a0000 0x2000>;
-		clocks = <&clock CLK_PPMUDMC0>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_dmc1: ppmu_dmc1@106b0000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x106b0000 0x2000>;
-		clocks = <&clock CLK_PPMUDMC1>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_cpu: ppmu_cpu@106c0000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x106c0000 0x2000>;
-		clocks = <&clock CLK_PPMUCPU>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_acp: ppmu_acp@10ae0000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x106e0000 0x2000>;
-		status = "disabled";
-	};
-
-	ppmu_rightbus: ppmu_rightbus@112a0000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x112a0000 0x2000>;
-		clocks = <&clock CLK_PPMURIGHT>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_leftbus: ppmu_leftbus0@116a0000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x116a0000 0x2000>;
-		clocks = <&clock CLK_PPMULEFT>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_camif: ppmu_camif@11ac0000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x11ac0000 0x2000>;
-		clocks = <&clock CLK_PPMUCAMIF>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_lcd0: ppmu_lcd0@11e40000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x11e40000 0x2000>;
-		clocks = <&clock CLK_PPMULCD0>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_fsys: ppmu_g3d@12630000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x12630000 0x2000>;
-		status = "disabled";
-	};
-
-	ppmu_image: ppmu_image@12aa0000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x12aa0000 0x2000>;
-		clocks = <&clock CLK_PPMUIMAGE>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_tv: ppmu_tv@12e40000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x12e40000 0x2000>;
-		clocks = <&clock CLK_PPMUTV>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_g3d: ppmu_g3d@13220000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x13220000 0x2000>;
-		clocks = <&clock CLK_PPMUG3D>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_mfc_left: ppmu_mfc_left@13660000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x13660000 0x2000>;
-		clocks = <&clock CLK_PPMUMFC_L>;
-		clock-names = "ppmu";
-		status = "disabled";
-	};
-
-	ppmu_mfc_right: ppmu_mfc_right@13670000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x13670000 0x2000>;
-		clocks = <&clock CLK_PPMUMFC_R>;
-		clock-names = "ppmu";
+		samsung,power-domain = <&pd_lcd0>;
 		status = "disabled";
 	};
 };
diff -urNp a/arch/arm/boot/dts/exynos4210-origen.dts b/arch/arm/boot/dts/exynos4210-origen.dts
--- a/arch/arm/boot/dts/exynos4210-origen.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4210-origen.dts	2015-10-27 00:45:05.000000000 +0000
@@ -15,12 +15,11 @@
 */
 
 /dts-v1/;
-#include "exynos4210.dtsi"
-#include <dt-bindings/input/input.h>
+/include/ "exynos4210.dtsi"
 
 / {
 	model = "Insignal Origen evaluation board based on Exynos4210";
-	compatible = "insignal,origen", "samsung,exynos4210", "samsung,exynos4";
+	compatible = "insignal,origen", "samsung,exynos4210";
 
 	memory {
 		reg = <0x40000000 0x10000000
@@ -31,35 +30,15 @@
 
 	chosen {
 		bootargs ="root=/dev/ram0 rw ramdisk=8192 initrd=0x41000000,8M console=ttySAC2,115200 init=/linuxrc";
-		stdout-path = &serial_2;
 	};
 
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		mmc_reg: regulator@0 {
-			compatible = "regulator-fixed";
-			reg = <0>;
-			regulator-name = "VMEM_VDD_2.8V";
-			regulator-min-microvolt = <2800000>;
-			regulator-max-microvolt = <2800000>;
-			gpio = <&gpx1 1 0>;
-			enable-active-high;
-		};
-	};
-
-	watchdog@10060000 {
-		status = "okay";
-	};
-
-	rtc@10070000 {
-		status = "okay";
-	};
-
-	tmu@100C0000 {
-		status = "okay";
+	mmc_reg: voltage-regulator {
+	        compatible = "regulator-fixed";
+		regulator-name = "VMEM_VDD_2.8V";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		gpio = <&gpx1 1 0>;
+		enable-active-high;
 	};
 
 	sdhci@12530000 {
@@ -104,155 +83,6 @@
 		status = "okay";
 	};
 
-	i2c@13860000 {
-		status = "okay";
-		samsung,i2c-sda-delay = <100>;
-		samsung,i2c-max-bus-freq = <20000>;
-		pinctrl-0 = <&i2c0_bus>;
-		pinctrl-names = "default";
-
-		max8997_pmic@66 {
-			compatible = "maxim,max8997-pmic";
-			reg = <0x66>;
-			interrupt-parent = <&gpx0>;
-			interrupts = <4 0>, <3 0>;
-
-			max8997,pmic-buck1-dvs-voltage = <1350000>;
-			max8997,pmic-buck2-dvs-voltage = <1100000>;
-			max8997,pmic-buck5-dvs-voltage = <1200000>;
-
-			regulators {
-				ldo1_reg: LDO1 {
-					regulator-name = "VDD_ABB_3.3V";
-					regulator-min-microvolt = <3300000>;
-					regulator-max-microvolt = <3300000>;
-				};
-
-				ldo2_reg: LDO2 {
-					regulator-name = "VDD_ALIVE_1.1V";
-					regulator-min-microvolt = <1100000>;
-					regulator-max-microvolt = <1100000>;
-					regulator-always-on;
-				};
-
-				ldo3_reg: LDO3 {
-					regulator-name = "VMIPI_1.1V";
-					regulator-min-microvolt = <1100000>;
-					regulator-max-microvolt = <1100000>;
-				};
-
-				ldo4_reg: LDO4 {
-					regulator-name = "VDD_RTC_1.8V";
-					regulator-min-microvolt = <1800000>;
-					regulator-max-microvolt	= <1800000>;
-					regulator-always-on;
-				};
-
-				ldo6_reg: LDO6 {
-					regulator-name = "VMIPI_1.8V";
-					regulator-min-microvolt = <1800000>;
-					regulator-max-microvolt	= <1800000>;
-					regulator-always-on;
-				};
-
-				ldo7_reg: LDO7 {
-					regulator-name = "VDD_AUD_1.8V";
-					regulator-min-microvolt = <1800000>;
-					regulator-max-microvolt	= <1800000>;
-				};
-
-				ldo8_reg: LDO8 {
-					regulator-name = "VADC_3.3V";
-					regulator-min-microvolt = <3300000>;
-					regulator-max-microvolt	= <3300000>;
-				};
-
-				ldo9_reg: LDO9 {
-					regulator-name = "DVDD_SWB_2.8V";
-					regulator-min-microvolt = <2800000>;
-					regulator-max-microvolt	= <2800000>;
-					regulator-always-on;
-				};
-
-				ldo10_reg: LDO10 {
-					regulator-name = "VDD_PLL_1.1V";
-					regulator-min-microvolt = <1100000>;
-					regulator-max-microvolt	= <1100000>;
-					regulator-always-on;
-				};
-
-				ldo11_reg: LDO11 {
-					regulator-name = "VDD_AUD_3V";
-					regulator-min-microvolt = <3000000>;
-					regulator-max-microvolt	= <3000000>;
-				};
-
-				ldo14_reg: LDO14 {
-					regulator-name = "AVDD18_SWB_1.8V";
-					regulator-min-microvolt = <1800000>;
-					regulator-max-microvolt	= <1800000>;
-					regulator-always-on;
-				};
-
-				ldo17_reg: LDO17 {
-					regulator-name = "VDD_SWB_3.3V";
-					regulator-min-microvolt = <3300000>;
-					regulator-max-microvolt	= <3300000>;
-					regulator-always-on;
-				};
-
-				ldo21_reg: LDO21 {
-					regulator-name = "VDD_MIF_1.2V";
-					regulator-min-microvolt = <1200000>;
-					regulator-max-microvolt	= <1200000>;
-					regulator-always-on;
-				};
-
-				buck1_reg: BUCK1 {
-					/*
-					* HACK: The real name is VDD_ARM_1.2V,
-					* but exynos-cpufreq does not support
-					* DT-based regulator lookup yet.
-					*/
-					regulator-name = "vdd_arm";
-					regulator-min-microvolt = <950000>;
-					regulator-max-microvolt	= <1350000>;
-					regulator-always-on;
-					regulator-boot-on;
-				};
-
-				buck2_reg: BUCK2 {
-					regulator-name = "VDD_INT_1.1V";
-					regulator-min-microvolt = <900000>;
-					regulator-max-microvolt	= <1100000>;
-					regulator-always-on;
-					regulator-boot-on;
-				};
-
-				buck3_reg: BUCK3 {
-					regulator-name = "VDD_G3D_1.1V";
-					regulator-min-microvolt = <900000>;
-					regulator-max-microvolt = <1100000>;
-				};
-
-				buck5_reg: BUCK5 {
-					regulator-name = "VDDQ_M1M2_1.2V";
-					regulator-min-microvolt = <1200000>;
-					regulator-max-microvolt = <1200000>;
-					regulator-always-on;
-				};
-
-				buck7_reg: BUCK7 {
-					regulator-name = "VDD_LCD_3.3V";
-					regulator-min-microvolt = <3300000>;
-					regulator-max-microvolt = <3300000>;
-					regulator-boot-on;
-					regulator-always-on;
-				};
-			};
-		};
-	};
-
 	gpio_keys {
 		compatible = "gpio-keys";
 		#address-cells = <1>;
@@ -261,35 +91,35 @@
 		up {
 			label = "Up";
 			gpios = <&gpx2 0 1>;
-			linux,code = <KEY_UP>;
+			linux,code = <103>;
 			gpio-key,wakeup;
 		};
 
 		down {
 			label = "Down";
 			gpios = <&gpx2 1 1>;
-			linux,code = <KEY_DOWN>;
+			linux,code = <108>;
 			gpio-key,wakeup;
 		};
 
 		back {
 			label = "Back";
 			gpios = <&gpx1 7 1>;
-			linux,code = <KEY_BACK>;
+			linux,code = <158>;
 			gpio-key,wakeup;
 		};
 
 		home {
 			label = "Home";
 			gpios = <&gpx1 6 1>;
-			linux,code = <KEY_HOME>;
+			linux,code = <102>;
 			gpio-key,wakeup;
 		};
 
 		menu {
 			label = "Menu";
 			gpios = <&gpx1 5 1>;
-			linux,code = <KEY_MENU>;
+			linux,code = <139>;
 			gpio-key,wakeup;
 		};
 	};
@@ -313,25 +143,4 @@
 			clock-frequency = <24000000>;
 		};
 	};
-
-	fimd@11c00000 {
-		pinctrl-0 = <&lcd_en &lcd_clk &lcd_data24 &pwm0_out>;
-		pinctrl-names = "default";
-		status = "okay";
-	};
-
-	display-timings {
-		native-mode = <&timing0>;
-		timing0: timing {
-			clock-frequency = <47500000>;
-			hactive = <1024>;
-			vactive = <600>;
-			hfront-porch = <64>;
-			hback-porch = <16>;
-			hsync-len = <48>;
-			vback-porch = <64>;
-			vfront-porch = <16>;
-			vsync-len = <3>;
-		};
-	};
 };
diff -urNp a/arch/arm/boot/dts/exynos4210-pinctrl.dtsi b/arch/arm/boot/dts/exynos4210-pinctrl.dtsi
--- a/arch/arm/boot/dts/exynos4210-pinctrl.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4210-pinctrl.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -330,95 +330,6 @@
 			samsung,pin-pud = <3>;
 			samsung,pin-drv = <0>;
 		};
-
-		pwm0_out: pwm0-out {
-			samsung,pins = "gpd0-0";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		pwm1_out: pwm1-out {
-			samsung,pins = "gpd0-1";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		pwm2_out: pwm2-out {
-			samsung,pins = "gpd0-2";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		pwm3_out: pwm3-out {
-			samsung,pins = "gpd0-3";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		lcd_ctrl: lcd-ctrl {
-			samsung,pins = "gpd0-0", "gpd0-1";
-			samsung,pin-function = <3>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		lcd_sync: lcd-sync {
-			samsung,pins = "gpf0-0", "gpf0-1";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		lcd_en: lcd-en {
-			samsung,pins = "gpe3-4";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		lcd_clk: lcd-clk {
-			samsung,pins = "gpf0-0", "gpf0-1", "gpf0-2", "gpf0-3";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		lcd_data16: lcd-data-width16 {
-			samsung,pins = "gpf0-7", "gpf1-0", "gpf1-1", "gpf1-2",
-					"gpf1-3", "gpf1-6", "gpf1-7", "gpf2-0",
-					"gpf2-1", "gpf2-2", "gpf2-3", "gpf2-7",
-					"gpf3-0", "gpf3-1", "gpf3-2", "gpf3-3";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		lcd_data18: lcd-data-width18 {
-			samsung,pins = "gpf0-6", "gpf0-7", "gpf1-0", "gpf1-1",
-					"gpf1-2", "gpf1-3", "gpf1-6", "gpf1-7",
-					"gpf2-0", "gpf2-1", "gpf2-2", "gpf2-3",
-					"gpf2-6", "gpf2-7", "gpf3-0", "gpf3-1",
-					"gpf3-2", "gpf3-3";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		lcd_data24: lcd-data-width24 {
-			samsung,pins = "gpf0-4", "gpf0-5", "gpf0-6", "gpf0-7",
-					"gpf1-0", "gpf1-1", "gpf1-2", "gpf1-3",
-					"gpf1-4", "gpf1-5", "gpf1-6", "gpf1-7",
-					"gpf2-0", "gpf2-1", "gpf2-2", "gpf2-3",
-					"gpf2-4", "gpf2-5", "gpf2-6", "gpf2-7",
-					"gpf3-0", "gpf3-1", "gpf3-2", "gpf3-3";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
 	};
 
 	pinctrl@11000000 {
@@ -797,29 +708,6 @@
 			samsung,pin-pud = <0>;
 			samsung,pin-drv = <0>;
 		};
-
-		cam_port_a_io: cam-port-a-io {
-			samsung,pins = "gpj0-0", "gpj0-1", "gpj0-2", "gpj0-3",
-					"gpj0-4", "gpj0-5", "gpj0-6", "gpj0-7",
-					"gpj1-0", "gpj1-1", "gpj1-2", "gpj1-4";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		cam_port_a_clk_active: cam-port-a-clk-active {
-			samsung,pins = "gpj1-3";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <3>;
-		};
-
-		cam_port_a_clk_idle: cam-port-a-clk-idle {
-			samsung,pins = "gpj1-3";
-			samsung,pin-function = <0>;
-			samsung,pin-pud = <1>;
-			samsung,pin-drv = <0>;
-		};
 	};
 
 	pinctrl@03860000 {
diff -urNp a/arch/arm/boot/dts/exynos4210-smdkv310.dts b/arch/arm/boot/dts/exynos4210-smdkv310.dts
--- a/arch/arm/boot/dts/exynos4210-smdkv310.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4210-smdkv310.dts	2015-10-27 00:45:05.000000000 +0000
@@ -15,11 +15,11 @@
 */
 
 /dts-v1/;
-#include "exynos4210.dtsi"
+/include/ "exynos4210.dtsi"
 
 / {
 	model = "Samsung smdkv310 evaluation board based on Exynos4210";
-	compatible = "samsung,smdkv310", "samsung,exynos4210", "samsung,exynos4";
+	compatible = "samsung,smdkv310", "samsung,exynos4210";
 
 	memory {
 		reg = <0x40000000 0x80000000>;
@@ -27,7 +27,6 @@
 
 	chosen {
 		bootargs = "root=/dev/ram0 rw ramdisk=8192 initrd=0x41000000,8M console=ttySAC1,115200 init=/linuxrc";
-		stdout-path = &serial_1;
 	};
 
 	sdhci@12530000 {
@@ -169,7 +168,6 @@
 	};
 
 	spi_2: spi@13940000 {
-		cs-gpios = <&gpc1 2 0>;
 		status = "okay";
 
 		w25x80@0 {
@@ -180,6 +178,7 @@
 			spi-max-frequency = <1000000>;
 
 			controller-data {
+				cs-gpio = <&gpc1 2 0>;
 				samsung,spi-feedback-delay = <0>;
 			};
 
diff -urNp a/arch/arm/boot/dts/exynos4210-trats.dts b/arch/arm/boot/dts/exynos4210-trats.dts
--- a/arch/arm/boot/dts/exynos4210-trats.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4210-trats.dts	2015-10-27 00:45:05.000000000 +0000
@@ -13,11 +13,11 @@
 */
 
 /dts-v1/;
-#include "exynos4210.dtsi"
+/include/ "exynos4210.dtsi"
 
 / {
 	model = "Samsung Trats based on Exynos4210";
-	compatible = "samsung,trats", "samsung,exynos4210", "samsung,exynos4";
+	compatible = "samsung,trats", "samsung,exynos4210";
 
 	memory {
 		reg =  <0x40000000 0x10000000
@@ -28,72 +28,15 @@
 
 	chosen {
 		bootargs = "console=ttySAC2,115200N8 root=/dev/mmcblk0p5 rootwait earlyprintk panic=5";
-		stdout-path = &serial_2;
 	};
 
-	regulators {
-		compatible = "simple-bus";
-
-		vemmc_reg: regulator-0 {
-			compatible = "regulator-fixed";
-			regulator-name = "VMEM_VDD_2.8V";
-			regulator-min-microvolt = <2800000>;
-			regulator-max-microvolt = <2800000>;
-			gpio = <&gpk0 2 0>;
-			enable-active-high;
-		};
-
-		tsp_reg: regulator-1 {
-			compatible = "regulator-fixed";
-			regulator-name = "TSP_FIXED_VOLTAGES";
-			regulator-min-microvolt = <2800000>;
-			regulator-max-microvolt = <2800000>;
-			gpio = <&gpl0 3 0>;
-			enable-active-high;
-		};
-
-		cam_af_28v_reg: regulator-2 {
-			compatible = "regulator-fixed";
-			regulator-name = "8M_AF_2.8V_EN";
-			regulator-min-microvolt = <2800000>;
-			regulator-max-microvolt = <2800000>;
-			gpio = <&gpk1 1 0>;
-			enable-active-high;
-		};
-
-		cam_io_en_reg: regulator-3 {
-			compatible = "regulator-fixed";
-			regulator-name = "CAM_IO_EN";
-			regulator-min-microvolt = <2800000>;
-			regulator-max-microvolt = <2800000>;
-			gpio = <&gpe2 1 0>;
-			enable-active-high;
-		};
-
-		cam_io_12v_reg: regulator-4 {
-			compatible = "regulator-fixed";
-			regulator-name = "8M_1.2V_EN";
-			regulator-min-microvolt = <1200000>;
-			regulator-max-microvolt = <1200000>;
-			gpio = <&gpe2 5 0>;
-			enable-active-high;
-		};
-
-		vt_core_15v_reg: regulator-5 {
-			compatible = "regulator-fixed";
-			regulator-name = "VT_CORE_1.5V";
-			regulator-min-microvolt = <1500000>;
-			regulator-max-microvolt = <1500000>;
-			gpio = <&gpe2 2 0>;
-			enable-active-high;
-		};
-	};
-
-	hsotg@12480000 {
-		vusb_d-supply = <&vusb_reg>;
-		vusb_a-supply = <&vusbdac_reg>;
-		dr_mode = "peripheral";
-		status = "okay";
+	vemmc_reg: voltage-regulator@0 {
+	        compatible = "regulator-fixed";
+		regulator-name = "VMEM_VDD_2.8V";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		gpio = <&gpk0 2 0>;
+		enable-active-high;
 	};
 
 	sdhci_emmc: sdhci@12510000 {
@@ -105,10 +48,6 @@
 		status = "okay";
 	};
 
-	exynos-usbphy@125B0000 {
-		status = "okay";
-	};
-
 	serial@13800000 {
 		status = "okay";
 	};
@@ -158,6 +97,15 @@
 		};
 	};
 
+	tsp_reg: voltage-regulator {
+		compatible = "regulator-fixed";
+		regulator-name = "TSP_FIXED_VOLTAGES";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		gpio = <&gpl0 3 0>;
+		enable-active-high;
+	};
+
 	i2c@13890000 {
 		samsung,i2c-sda-delay = <100>;
 		samsung,i2c-slave-addr = <0x10>;
@@ -270,12 +218,6 @@
 				     regulator-always-on;
 				};
 
-				vtcam_reg: LDO12 {
-				     regulator-name = "VT_CAM_1.8V";
-				     regulator-min-microvolt = <1800000>;
-				     regulator-max-microvolt = <1800000>;
-				};
-
 				vcclcd_reg: LDO13 {
 				     regulator-name = "VCC_3.3V_LCD";
 				     regulator-min-microvolt = <3300000>;
@@ -302,12 +244,7 @@
 				};
 
 				varm_breg: BUCK1 {
-				     /*
-				      * HACK: The real name is VARM_1.2V_C210,
-				      * but exynos-cpufreq does not support
-				      * DT-based regulator lookup yet.
-				      */
-				     regulator-name = "vdd_arm";
+				     regulator-name = "VARM_1.2V_C210";
 				     regulator-min-microvolt = <900000>;
 				     regulator-max-microvolt = <1350000>;
 				     regulator-always-on;
@@ -364,122 +301,4 @@
 			clock-frequency = <24000000>;
 		};
 	};
-
-	dsi_0: dsi@11C80000 {
-		vddcore-supply = <&vusb_reg>;
-		vddio-supply = <&vmipi_reg>;
-		samsung,pll-clock-frequency = <24000000>;
-		status = "okay";
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@1 {
-				reg = <1>;
-
-				dsi_out: endpoint {
-					remote-endpoint = <&dsi_in>;
-					samsung,burst-clock-frequency = <500000000>;
-					samsung,esc-clock-frequency = <20000000>;
-				};
-			};
-		};
-
-		panel@0 {
-			reg = <0>;
-			compatible = "samsung,s6e8aa0";
-			vdd3-supply = <&vcclcd_reg>;
-			vci-supply = <&vlcd_reg>;
-			reset-gpios = <&gpy4 5 0>;
-			power-on-delay= <50>;
-			reset-delay = <100>;
-			init-delay = <100>;
-			flip-horizontal;
-			flip-vertical;
-			panel-width-mm = <58>;
-			panel-height-mm = <103>;
-
-			display-timings {
-				timing-0 {
-					clock-frequency = <57153600>;
-					hactive = <720>;
-					vactive = <1280>;
-					hfront-porch = <5>;
-					hback-porch = <5>;
-					hsync-len = <5>;
-					vfront-porch = <13>;
-					vback-porch = <1>;
-					vsync-len = <2>;
-				};
-			};
-
-			port {
-				dsi_in: endpoint {
-					remote-endpoint = <&dsi_out>;
-				};
-			};
-		};
-	};
-
-	fimd@11c00000 {
-		status = "okay";
-	};
-
-	tmu@100C0000 {
-		status = "okay";
-	};
-
-	thermal-zones {
-		cpu_thermal: cpu-thermal {
-			cooling-maps {
-				map0 {
-				     /* Corresponds to 800MHz at freq_table */
-				     cooling-device = <&cpu0 2 2>;
-				};
-				map1 {
-				     /* Corresponds to 200MHz at freq_table */
-				     cooling-device = <&cpu0 4 4>;
-			       };
-		       };
-		};
-	};
-
-	camera {
-		pinctrl-names = "default";
-		pinctrl-0 = <>;
-		status = "okay";
-
-		fimc_0: fimc@11800000 {
-			status = "okay";
-			assigned-clocks = <&clock CLK_MOUT_FIMC0>,
-					<&clock CLK_SCLK_FIMC0>;
-			assigned-clock-parents = <&clock CLK_SCLK_MPLL>;
-			assigned-clock-rates = <0>, <160000000>;
-		};
-
-		fimc_1: fimc@11810000 {
-			status = "okay";
-			assigned-clocks = <&clock CLK_MOUT_FIMC1>,
-					<&clock CLK_SCLK_FIMC1>;
-			assigned-clock-parents = <&clock CLK_SCLK_MPLL>;
-			assigned-clock-rates = <0>, <160000000>;
-		};
-
-		fimc_2: fimc@11820000 {
-			status = "okay";
-			assigned-clocks = <&clock CLK_MOUT_FIMC2>,
-					<&clock CLK_SCLK_FIMC2>;
-			assigned-clock-parents = <&clock CLK_SCLK_MPLL>;
-			assigned-clock-rates = <0>, <160000000>;
-		};
-
-		fimc_3: fimc@11830000 {
-			status = "okay";
-			assigned-clocks = <&clock CLK_MOUT_FIMC3>,
-					<&clock CLK_SCLK_FIMC3>;
-			assigned-clock-parents = <&clock CLK_SCLK_MPLL>;
-			assigned-clock-rates = <0>, <160000000>;
-		};
-	};
 };
diff -urNp a/arch/arm/boot/dts/exynos4210-universal_c210.dts b/arch/arm/boot/dts/exynos4210-universal_c210.dts
--- a/arch/arm/boot/dts/exynos4210-universal_c210.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4210-universal_c210.dts	2015-10-27 00:45:05.000000000 +0000
@@ -13,11 +13,11 @@
 */
 
 /dts-v1/;
-#include "exynos4210.dtsi"
+/include/ "exynos4210.dtsi"
 
 / {
 	model = "Samsung Universal C210 based on Exynos4210 rev0";
-	compatible = "samsung,universal_c210", "samsung,exynos4210", "samsung,exynos4";
+	compatible = "samsung,universal_c210", "samsung,exynos4210";
 
 	memory {
 		reg =  <0x40000000 0x10000000
@@ -26,22 +26,6 @@
 
 	chosen {
 		bootargs = "console=ttySAC2,115200N8 root=/dev/mmcblk0p5 rw rootwait earlyprintk panic=5 maxcpus=1";
-		stdout-path = &serial_2;
-	};
-
-	sysram@02020000 {
-		smp-sysram@0 {
-			status = "disabled";
-		};
-
-		smp-sysram@5000 {
-			compatible = "samsung,exynos4210-sysram";
-			reg = <0x5000 0x1000>;
-		};
-
-		smp-sysram@1f000 {
-			status = "disabled";
-		};
 	};
 
 	mct@10050000 {
@@ -69,13 +53,6 @@
 		enable-active-high;
 	};
 
-	hsotg@12480000 {
-		vusb_d-supply = <&ldo3_reg>;
-		vusb_a-supply = <&ldo8_reg>;
-		dr_mode = "peripheral";
-		status = "okay";
-	};
-
 	sdhci_emmc: sdhci@12510000 {
 		bus-width = <8>;
 		non-removable;
@@ -85,34 +62,6 @@
 		status = "okay";
 	};
 
-	sdhci_sd: sdhci@12530000 {
-		bus-width = <4>;
-		pinctrl-0 = <&sd2_clk &sd2_cmd &sd2_bus4>;
-		pinctrl-names = "default";
-		vmmc-supply = <&ldo5_reg>;
-		cd-gpios = <&gpx3 4 0>;
-		cd-inverted;
-		status = "okay";
-	};
-
-	ehci@12580000 {
-		status = "okay";
-		port@0 {
-			status = "okay";
-		};
-	};
-
-	ohci@12590000 {
-		status = "okay";
-		port@0 {
-			status = "okay";
-		};
-	};
-
-	exynos-usbphy@125B0000 {
-		status = "okay";
-	};
-
 	serial@13800000 {
 		status = "okay";
 	};
@@ -252,7 +201,6 @@
 					regulator-name = "VUSB+MIPI_1.1V";
 					regulator-min-microvolt = <1100000>;
 					regulator-max-microvolt = <1100000>;
-					regulator-always-on;
 				};
 
 				ldo4_reg: LDO4 {
@@ -283,7 +231,6 @@
 					regulator-name = "VUSB+VDAC_3.3V";
 					regulator-min-microvolt = <3300000>;
 					regulator-max-microvolt = <3300000>;
-					regulator-always-on;
 				};
 
 				ldo9_reg: LDO9 {
@@ -398,172 +345,8 @@
 		};
 	};
 
-	spi-lcd {
-		compatible = "spi-gpio";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		gpio-sck = <&gpy3 1 0>;
-		gpio-mosi = <&gpy3 3 0>;
-		num-chipselects = <1>;
-		cs-gpios = <&gpy4 3 0>;
-
-		lcd@0 {
-			compatible = "samsung,ld9040";
-			reg = <0>;
-			vdd3-supply = <&ldo7_reg>;
-			vci-supply = <&ldo17_reg>;
-			reset-gpios = <&gpy4 5 0>;
-			spi-max-frequency = <1200000>;
-			spi-cpol;
-			spi-cpha;
-			power-on-delay = <10>;
-			reset-delay = <10>;
-			panel-width-mm = <90>;
-			panel-height-mm = <154>;
-			display-timings {
-				timing {
-					clock-frequency = <23492370>;
-					hactive = <480>;
-					vactive = <800>;
-					hback-porch = <16>;
-					hfront-porch = <16>;
-					vback-porch = <2>;
-					vfront-porch = <28>;
-					hsync-len = <2>;
-					vsync-len = <1>;
-					hsync-active = <0>;
-					vsync-active = <0>;
-					de-active = <0>;
-					pixelclk-active = <0>;
-				};
-			};
-			port {
-				lcd_ep: endpoint {
-					remote-endpoint = <&fimd_dpi_ep>;
-				};
-			};
-		};
-	};
-
-	fimd: fimd@11c00000 {
-		pinctrl-0 = <&lcd_clk>, <&lcd_data24>;
-		pinctrl-names = "default";
-		status = "okay";
-		samsung,invert-vden;
-		samsung,invert-vclk;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		port@3 {
-			reg = <3>;
-			fimd_dpi_ep: endpoint {
-				remote-endpoint = <&lcd_ep>;
-			};
-		};
-	};
-
 	pwm@139D0000 {
 		compatible = "samsung,s5p6440-pwm";
 		status = "okay";
 	};
-
-	camera {
-		status = "okay";
-
-		pinctrl-names = "default";
-		pinctrl-0 = <>;
-
-		fimc_0: fimc@11800000 {
-			status = "okay";
-			assigned-clocks = <&clock CLK_MOUT_FIMC0>,
-					<&clock CLK_SCLK_FIMC0>;
-			assigned-clock-parents = <&clock CLK_SCLK_MPLL>;
-			assigned-clock-rates = <0>, <160000000>;
-		};
-
-		fimc_1: fimc@11810000 {
-			status = "okay";
-			assigned-clocks = <&clock CLK_MOUT_FIMC1>,
-					<&clock CLK_SCLK_FIMC1>;
-			assigned-clock-parents = <&clock CLK_SCLK_MPLL>;
-			assigned-clock-rates = <0>, <160000000>;
-		};
-
-		fimc_2: fimc@11820000 {
-			status = "okay";
-			assigned-clocks = <&clock CLK_MOUT_FIMC2>,
-					<&clock CLK_SCLK_FIMC2>;
-			assigned-clock-parents = <&clock CLK_SCLK_MPLL>;
-			assigned-clock-rates = <0>, <160000000>;
-		};
-
-		fimc_3: fimc@11830000 {
-			status = "okay";
-			assigned-clocks = <&clock CLK_MOUT_FIMC3>,
-					<&clock CLK_SCLK_FIMC3>;
-			assigned-clock-parents = <&clock CLK_SCLK_MPLL>;
-			assigned-clock-rates = <0>, <160000000>;
-		};
-	};
-
-	hdmi_en: voltage-regulator-hdmi-5v {
-		compatible = "regulator-fixed";
-		regulator-name = "HDMI_5V";
-		regulator-min-microvolt = <5000000>;
-		regulator-max-microvolt = <5000000>;
-		gpio = <&gpe0 1 0>;
-		enable-active-high;
-	};
-
-	hdmi_ddc: i2c-ddc {
-		compatible = "i2c-gpio";
-		gpios = <&gpe4 2 0 &gpe4 3 0>;
-		i2c-gpio,delay-us = <100>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		pinctrl-0 = <&i2c_ddc_bus>;
-		pinctrl-names = "default";
-		status = "okay";
-	};
-
-	mixer@12C10000 {
-		status = "okay";
-	};
-
-	hdmi@12D00000 {
-		hpd-gpio = <&gpx3 7 0>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&hdmi_hpd>;
-		hdmi-en-supply = <&hdmi_en>;
-		vdd-supply = <&ldo3_reg>;
-		vdd_osc-supply = <&ldo4_reg>;
-		vdd_pll-supply = <&ldo3_reg>;
-		ddc = <&hdmi_ddc>;
-		status = "okay";
-	};
-
-	i2c@138E0000 {
-		status = "okay";
-	};
-};
-
-&pinctrl_1 {
-	hdmi_hpd: hdmi-hpd {
-		samsung,pins = "gpx3-7";
-		samsung,pin-pud = <0>;
-	};
-};
-
-&pinctrl_0 {
-	i2c_ddc_bus: i2c-ddc-bus {
-		samsung,pins = "gpe4-2", "gpe4-3";
-		samsung,pin-function = <2>;
-		samsung,pin-pud = <3>;
-		samsung,pin-drv = <0>;
-	};
-};
-
-&mdma1 {
-	reg = <0x12840000 0x1000>;
 };
diff -urNp a/arch/arm/boot/dts/exynos4210.dtsi b/arch/arm/boot/dts/exynos4210.dtsi
--- a/arch/arm/boot/dts/exynos4210.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4210.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -19,12 +19,11 @@
  * published by the Free Software Foundation.
 */
 
-#include "exynos4.dtsi"
-#include "exynos4210-pinctrl.dtsi"
-#include "exynos4-cpu-thermal.dtsi"
+/include/ "exynos4.dtsi"
+/include/ "exynos4210-pinctrl.dtsi"
 
 / {
-	compatible = "samsung,exynos4210", "samsung,exynos4";
+	compatible = "samsung,exynos4210";
 
 	aliases {
 		pinctrl0 = &pinctrl_0;
@@ -32,74 +31,16 @@
 		pinctrl2 = &pinctrl_2;
 	};
 
-	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		cpu0: cpu@900 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <0x900>;
-			cooling-min-level = <4>;
-			cooling-max-level = <2>;
-			#cooling-cells = <2>; /* min followed by max */
-		};
-
-		cpu@901 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <0x901>;
-		};
-	};
-
-	pmu_system_controller: system-controller@10020000 {
-		clock-names = "clkout0", "clkout1", "clkout2", "clkout3",
-				"clkout4", "clkout8", "clkout9";
-		clocks = <&clock CLK_OUT_DMC>, <&clock CLK_OUT_TOP>,
-			<&clock CLK_OUT_LEFTBUS>, <&clock CLK_OUT_RIGHTBUS>,
-			<&clock CLK_OUT_CPU>, <&clock CLK_XXTI>,
-			<&clock CLK_XUSBXTI>;
-		#clock-cells = <1>;
-	};
-
-	sysram@02020000 {
-		compatible = "mmio-sram";
-		reg = <0x02020000 0x20000>;
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges = <0 0x02020000 0x20000>;
-
-		smp-sysram@0 {
-			compatible = "samsung,exynos4210-sysram";
-			reg = <0x0 0x1000>;
-		};
-
-		smp-sysram@1f000 {
-			compatible = "samsung,exynos4210-sysram-ns";
-			reg = <0x1f000 0x1000>;
-		};
-	};
-
 	pd_lcd1: lcd1-power-domain@10023CA0 {
 		compatible = "samsung,exynos4210-pd";
 		reg = <0x10023CA0 0x20>;
-		#power-domain-cells = <0>;
 	};
 
-	l2c: l2-cache-controller@10502000 {
-		compatible = "arm,pl310-cache";
-		reg = <0x10502000 0x1000>;
-		cache-unified;
-		cache-level = <2>;
-		arm,tag-latency = <2 2 1>;
-		arm,data-latency = <2 2 1>;
-	};
-
-	gic: interrupt-controller@10490000 {
+	gic:interrupt-controller@10490000 {
 		cpu-offset = <0x8000>;
 	};
 
-	combiner: interrupt-controller@10440000 {
+	combiner:interrupt-controller@10440000 {
 		samsung,combiner-nr = <16>;
 		interrupts = <0 0 0>, <0 1 0>, <0 2 0>, <0 3 0>,
 			     <0 4 0>, <0 5 0>, <0 6 0>, <0 7 0>,
@@ -110,30 +51,39 @@
 	mct@10050000 {
 		compatible = "samsung,exynos4210-mct";
 		reg = <0x10050000 0x800>;
+		interrupt-controller;
+		#interrups-cells = <2>;
 		interrupt-parent = <&mct_map>;
-		interrupts = <0>, <1>, <2>, <3>, <4>, <5>;
-		clocks = <&clock CLK_FIN_PLL>, <&clock CLK_MCT>;
+		interrupts = <0 0>, <1 0>, <2 0>, <3 0>,
+			     <4 0>, <5 0>;
+		clocks = <&clock 3>, <&clock 344>;
 		clock-names = "fin_pll", "mct";
 
 		mct_map: mct-map {
-			#interrupt-cells = <1>;
+			#interrupt-cells = <2>;
 			#address-cells = <0>;
 			#size-cells = <0>;
-			interrupt-map = <0 &gic 0 57 0>,
-					<1 &gic 0 69 0>,
-					<2 &combiner 12 6>,
-					<3 &combiner 12 7>,
-					<4 &gic 0 42 0>,
-					<5 &gic 0 48 0>;
+			interrupt-map = <0x0 0 &gic 0 57 0>,
+					<0x1 0 &gic 0 69 0>,
+					<0x2 0 &combiner 12 6>,
+					<0x3 0 &combiner 12 7>,
+					<0x4 0 &gic 0 42 0>,
+					<0x5 0 &gic 0 48 0>;
 		};
 	};
 
-	clock: clock-controller@10030000 {
+	clock: clock-controller@0x10030000 {
 		compatible = "samsung,exynos4210-clock";
 		reg = <0x10030000 0x20000>;
 		#clock-cells = <1>;
 	};
 
+	pmu {
+		compatible = "arm,cortex-a9-pmu";
+		interrupt-parent = <&combiner>;
+		interrupts = <2 2>, <3 2>;
+	};
+
 	pinctrl_0: pinctrl@11400000 {
 		compatible = "samsung,exynos4210-pinctrl";
 		reg = <0x11400000 0x1000>;
@@ -157,91 +107,17 @@
 		reg = <0x03860000 0x1000>;
 	};
 
-	tmu: tmu@100C0000 {
+	tmu@100C0000 {
 		compatible = "samsung,exynos4210-tmu";
 		interrupt-parent = <&combiner>;
 		reg = <0x100C0000 0x100>;
 		interrupts = <2 4>;
-		clocks = <&clock CLK_TMU_APBIF>;
-		clock-names = "tmu_apbif";
-		samsung,tmu_gain = <15>;
-		samsung,tmu_reference_voltage = <7>;
-		status = "disabled";
-	};
-
-	thermal-zones {
-		cpu_thermal: cpu-thermal {
-			polling-delay-passive = <0>;
-			polling-delay = <0>;
-			thermal-sensors = <&tmu 0>;
-
-			trips {
-			      cpu_alert0: cpu-alert-0 {
-				      temperature = <85000>; /* millicelsius */
-			      };
-			      cpu_alert1: cpu-alert-1 {
-				      temperature = <100000>; /* millicelsius */
-			      };
-			      cpu_alert2: cpu-alert-2 {
-				      temperature = <110000>; /* millicelsius */
-			      };
-			};
-		};
 	};
 
 	g2d@12800000 {
 		compatible = "samsung,s5pv210-g2d";
 		reg = <0x12800000 0x1000>;
 		interrupts = <0 89 0>;
-		clocks = <&clock CLK_SCLK_FIMG2D>, <&clock CLK_G2D>;
-		clock-names = "sclk_fimg2d", "fimg2d";
-		status = "disabled";
-	};
-
-	camera {
-		clocks = <&clock CLK_SCLK_CAM0>, <&clock CLK_SCLK_CAM1>,
-			 <&clock CLK_PIXELASYNCM0>, <&clock CLK_PIXELASYNCM1>;
-		clock-names = "sclk_cam0", "sclk_cam1", "pxl_async0", "pxl_async1";
-
-		fimc_0: fimc@11800000 {
-			samsung,pix-limits = <4224 8192 1920 4224>;
-			samsung,mainscaler-ext;
-			samsung,cam-if;
-		};
-
-		fimc_1: fimc@11810000 {
-			samsung,pix-limits = <4224 8192 1920 4224>;
-			samsung,mainscaler-ext;
-			samsung,cam-if;
-		};
-
-		fimc_2: fimc@11820000 {
-			samsung,pix-limits = <4224 8192 1920 4224>;
-			samsung,mainscaler-ext;
-			samsung,lcd-wb;
-		};
-
-		fimc_3: fimc@11830000 {
-			samsung,pix-limits = <1920 8192 1366 1920>;
-			samsung,rotators = <0>;
-			samsung,mainscaler-ext;
-			samsung,lcd-wb;
-		};
-	};
-
-	mixer: mixer@12C10000 {
-		clock-names = "mixer", "hdmi", "sclk_hdmi", "vp", "mout_mixer",
-			"sclk_mixer";
-		clocks = <&clock CLK_MIXER>, <&clock CLK_HDMI>,
-			<&clock CLK_SCLK_HDMI>, <&clock CLK_VP>,
-			<&clock CLK_MOUT_MIXER>, <&clock CLK_SCLK_MIXER>;
-	};
-
-	ppmu_lcd1: ppmu_lcd1@12240000 {
-		compatible = "samsung,exynos-ppmu";
-		reg = <0x12240000 0x2000>;
-		clocks = <&clock CLK_PPMULCD1>;
-		clock-names = "ppmu";
 		status = "disabled";
 	};
 };
diff -urNp a/arch/arm/boot/dts/exynos4212.dtsi b/arch/arm/boot/dts/exynos4212.dtsi
--- a/arch/arm/boot/dts/exynos4212.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4212.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -17,36 +17,43 @@
  * published by the Free Software Foundation.
 */
 
-#include "exynos4x12.dtsi"
+/include/ "exynos4x12.dtsi"
 
 / {
-	compatible = "samsung,exynos4212", "samsung,exynos4";
+	compatible = "samsung,exynos4212";
 
-	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		cpu0: cpu@A00 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <0xA00>;
-			cooling-min-level = <13>;
-			cooling-max-level = <7>;
-			#cooling-cells = <2>; /* min followed by max */
-		};
-
-		cpu@A01 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <0xA01>;
-		};
+	gic:interrupt-controller@10490000 {
+		cpu-offset = <0x8000>;
 	};
 
-	combiner: interrupt-controller@10440000 {
+	interrupt-controller@10440000 {
 		samsung,combiner-nr = <18>;
+		interrupts = <0 0 0>, <0 1 0>, <0 2 0>, <0 3 0>,
+			     <0 4 0>, <0 5 0>, <0 6 0>, <0 7 0>,
+			     <0 8 0>, <0 9 0>, <0 10 0>, <0 11 0>,
+			     <0 12 0>, <0 13 0>, <0 14 0>, <0 15 0>,
+			     <0 107 0>, <0 108 0>;
 	};
 
-	gic: interrupt-controller@10490000 {
-		cpu-offset = <0x8000>;
+	mct@10050000 {
+		compatible = "samsung,exynos4412-mct";
+		reg = <0x10050000 0x800>;
+		interrupt-controller;
+		#interrups-cells = <2>;
+		interrupt-parent = <&mct_map>;
+		interrupts = <0 0>, <1 0>, <2 0>, <3 0>,
+			     <4 0>, <5 0>;
+
+		mct_map: mct-map {
+			#interrupt-cells = <2>;
+			#address-cells = <0>;
+			#size-cells = <0>;
+			interrupt-map = <0x0 0 &gic 0 57 0>,
+					<0x1 0 &combiner 12 5>,
+					<0x2 0 &combiner 12 6>,
+					<0x3 0 &combiner 12 7>,
+					<0x4 0 &gic 1 12 0>,
+					<0x5 0 &gic 1 12 0>;
+		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/exynos4412-odroidx.dts b/arch/arm/boot/dts/exynos4412-odroidx.dts
--- a/arch/arm/boot/dts/exynos4412-odroidx.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4412-odroidx.dts	2015-10-27 00:45:05.000000000 +0000
@@ -3,8 +3,8 @@
  *
  * Copyright (c) 2012 Dongjin Kim <tobetter@gmail.com>
  *
- * Device tree source file for Hardkernel's ODROID-X board which is based
- * on Samsung's Exynos4412 SoC.
+ * Device tree source file for Hardkernel's ODROID-X board which is based on
+ * Samsung's Exynos4412 SoC.
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
@@ -12,14 +12,14 @@
 */
 
 /dts-v1/;
-#include "exynos4412-odroid-common.dtsi"
+/include/ "exynos4412.dtsi"
 
 / {
 	model = "Hardkernel ODROID-X board based on Exynos4412";
-	compatible = "hardkernel,odroid-x", "samsung,exynos4412", "samsung,exynos4";
+	compatible = "hardkernel,odroid-x", "samsung,exynos4412";
 
 	memory {
-		reg = <0x40000000 0x3FF00000>;
+		reg = <0x40000000 0x40000000>;
 	};
 
 	leds {
@@ -38,25 +38,25 @@
 		};
 	};
 
-	serial@13820000 {
-		status = "okay";
-	};
-
-	serial@13830000 {
+	mshc@12550000 {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		pinctrl-0 = <&sd4_clk &sd4_cmd &sd4_bus4 &sd4_bus8>;
+		pinctrl-names = "default";
 		status = "okay";
-	};
 
-	gpio_keys {
-		pinctrl-0 = <&gpio_power_key &gpio_home_key>;
-
-		home_key {
-			interrupt-parent = <&gpx2>;
-			interrupts = <2 0>;
-			gpios = <&gpx2 2 0>;
-			linux,code = <KEY_HOME>;
-			label = "home key";
-			debounce-interval = <10>;
-			gpio-key,wakeup;
+		num-slots = <1>;
+		supports-highspeed;
+		broken-cd;
+		fifo-depth = <0x80>;
+		card-detect-delay = <200>;
+		samsung,dw-mshc-ciu-div = <3>;
+		samsung,dw-mshc-sdr-timing = <2 3>;
+		samsung,dw-mshc-ddr-timing = <1 2>;
+
+		slot@0 {
+			reg = <0>;
+			bus-width = <8>;
 		};
 	};
 
@@ -67,19 +67,45 @@
 		regulator-max-microvolt = <3300000>;
 		gpio = <&gpa1 1 1>;
 		enable-active-high;
-		regulator-always-on;
+		regulator-boot-on;
 	};
-};
 
-&ehci {
-	port@1 {
+	rtc@10070000 {
+		status = "okay";
+	};
+
+	sdhci@12530000 {
+		bus-width = <4>;
+		pinctrl-0 = <&sd2_clk &sd2_cmd &sd2_cd &sd2_bus4>;
+		pinctrl-names = "default";
+		status = "okay";
+	};
+
+	serial@13800000 {
 		status = "okay";
 	};
-};
 
-&pinctrl_1 {
-	gpio_home_key: home_key {
-		samsung,pins = "gpx2-2";
-		samsung,pin-pud = <0>;
+	serial@13810000 {
+		status = "okay";
+	};
+
+	serial@13820000 {
+		status = "okay";
+	};
+
+	serial@13830000 {
+		status = "okay";
+	};
+
+	fixed-rate-clocks {
+		xxti {
+			compatible = "samsung,clock-xxti";
+			clock-frequency = <0>;
+		};
+
+		xusbxti {
+			compatible = "samsung,clock-xusbxti";
+			clock-frequency = <24000000>;
+		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/exynos4412-origen.dts b/arch/arm/boot/dts/exynos4412-origen.dts
--- a/arch/arm/boot/dts/exynos4412-origen.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4412-origen.dts	2015-10-27 00:45:05.000000000 +0000
@@ -13,12 +13,11 @@
 */
 
 /dts-v1/;
-#include "exynos4412.dtsi"
-#include <dt-bindings/input/input.h>
+/include/ "exynos4412.dtsi"
 
 / {
 	model = "Insignal Origen evaluation board based on Exynos4412";
-	compatible = "insignal,origen4412", "samsung,exynos4412", "samsung,exynos4";
+	compatible = "insignal,origen4412", "samsung,exynos4412";
 
 	memory {
 		reg = <0x40000000 0x40000000>;
@@ -26,102 +25,15 @@
 
 	chosen {
 		bootargs ="console=ttySAC2,115200";
-		stdout-path = &serial_2;
 	};
 
-	firmware@0203F000 {
-		compatible = "samsung,secure-firmware";
-		reg = <0x0203F000 0x1000>;
-	};
-
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		mmc_reg: regulator@0 {
-			compatible = "regulator-fixed";
-			reg = <0>;
-			regulator-name = "VMEM_VDD_2.8V";
-			regulator-min-microvolt = <2800000>;
-			regulator-max-microvolt = <2800000>;
-			gpio = <&gpx1 1 0>;
-			enable-active-high;
-		};
-	};
-
-	watchdog@10060000 {
-		status = "okay";
-	};
-
-	rtc@10070000 {
-		status = "okay";
-	};
-
-	pinctrl@11000000 {
-		keypad_rows: keypad-rows {
-			samsung,pins = "gpx2-0", "gpx2-1", "gpx2-2";
-			samsung,pin-function = <3>;
-			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
-		};
-
-		keypad_cols: keypad-cols {
-			samsung,pins = "gpx1-0", "gpx1-1";
-			samsung,pin-function = <3>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-	};
-
-	keypad@100A0000 {
-		samsung,keypad-num-rows = <3>;
-		samsung,keypad-num-columns = <2>;
-		linux,keypad-no-autorepeat;
-		linux,keypad-wakeup;
-		pinctrl-0 = <&keypad_rows &keypad_cols>;
-		pinctrl-names = "default";
-		status = "okay";
-
-		key_home {
-			keypad,row = <0>;
-			keypad,column = <0>;
-			linux,code = <KEY_HOME>;
-		};
-
-		key_down {
-			keypad,row = <0>;
-			keypad,column = <1>;
-			linux,code = <KEY_DOWN>;
-		};
-
-		key_up {
-			keypad,row = <1>;
-			keypad,column = <0>;
-			linux,code = <KEY_UP>;
-		};
-
-		key_menu {
-			keypad,row = <1>;
-			keypad,column = <1>;
-			linux,code = <KEY_MENU>;
-		};
-
-		key_back {
-			keypad,row = <2>;
-			keypad,column = <0>;
-			linux,code = <KEY_BACK>;
-		};
-
-		key_enter {
-			keypad,row = <2>;
-			keypad,column = <1>;
-			linux,code = <KEY_ENTER>;
-		};
-	};
-
-	g2d@10800000 {
-		status = "okay";
+	mmc_reg: voltage-regulator {
+		compatible = "regulator-fixed";
+		regulator-name = "VMEM_VDD_2.8V";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		gpio = <&gpx1 1 0>;
+		enable-active-high;
 	};
 
 	sdhci@12530000 {
@@ -132,19 +44,26 @@
 		status = "okay";
 	};
 
-	mmc@12550000 {
+	mshc@12550000 {
+		#address-cells = <1>;
+		#size-cells = <0>;
 		pinctrl-0 = <&sd4_clk &sd4_cmd &sd4_bus4 &sd4_bus8>;
 		pinctrl-names = "default";
 		status = "okay";
 
 		num-slots = <1>;
+		supports-highspeed;
 		broken-cd;
+		fifo-depth = <0x80>;
 		card-detect-delay = <200>;
 		samsung,dw-mshc-ciu-div = <3>;
 		samsung,dw-mshc-sdr-timing = <2 3>;
 		samsung,dw-mshc-ddr-timing = <1 2>;
-		bus-width = <8>;
-		cap-mmc-highspeed;
+
+		slot@0 {
+			reg = <0>;
+			bus-width = <8>;
+		};
 	};
 
 	codec@13400000 {
@@ -162,7 +81,7 @@
 	display-timings {
 		native-mode = <&timing0>;
 		timing0: timing {
-			clock-frequency = <47500000>;
+			clock-frequency = <50000>;
 			hactive = <1024>;
 			vactive = <600>;
 			hfront-porch = <64>;
@@ -465,8 +384,8 @@
 
 				buck2_reg: BUCK2 {
 					regulator-name = "vdd_arm";
-					regulator-min-microvolt = <900000>;
-					regulator-max-microvolt	= <1350000>;
+					regulator-min-microvolt = <925000>;
+					regulator-max-microvolt	= <1300000>;
 					regulator-always-on;
 					regulator-boot-on;
 					op_mode = <1>; /* Normal Mode */
diff -urNp a/arch/arm/boot/dts/exynos4412-smdk4412.dts b/arch/arm/boot/dts/exynos4412-smdk4412.dts
--- a/arch/arm/boot/dts/exynos4412-smdk4412.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4412-smdk4412.dts	2015-10-27 00:45:05.000000000 +0000
@@ -13,11 +13,11 @@
 */
 
 /dts-v1/;
-#include "exynos4412.dtsi"
+/include/ "exynos4412.dtsi"
 
 / {
 	model = "Samsung SMDK evaluation board based on Exynos4412";
-	compatible = "samsung,smdk4412", "samsung,exynos4412", "samsung,exynos4";
+	compatible = "samsung,smdk4412", "samsung,exynos4412";
 
 	memory {
 		reg = <0x40000000 0x40000000>;
@@ -25,98 +25,14 @@
 
 	chosen {
 		bootargs ="root=/dev/ram0 rw ramdisk=8192 initrd=0x41000000,8M console=ttySAC1,115200 init=/linuxrc";
-		stdout-path = &serial_1;
 	};
 
 	g2d@10800000 {
 		status = "okay";
 	};
 
-	pinctrl@11000000 {
-		keypad_rows: keypad-rows {
-			samsung,pins = "gpx2-0", "gpx2-1", "gpx2-2";
-			samsung,pin-function = <3>;
-			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
-		};
-
-		keypad_cols: keypad-cols {
-			samsung,pins = "gpx1-0", "gpx1-1", "gpx1-2", "gpx1-3",
-				       "gpx1-4", "gpx1-5", "gpx1-6", "gpx1-7";
-			samsung,pin-function = <3>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-	};
-
-	keypad@100A0000 {
-		samsung,keypad-num-rows = <3>;
-		samsung,keypad-num-columns = <8>;
-		linux,keypad-no-autorepeat;
-		linux,keypad-wakeup;
-		pinctrl-0 = <&keypad_rows &keypad_cols>;
-		pinctrl-names = "default";
+	g2d@10800000 {
 		status = "okay";
-
-		key_1 {
-			keypad,row = <1>;
-			keypad,column = <3>;
-			linux,code = <2>;
-		};
-
-		key_2 {
-			keypad,row = <1>;
-			keypad,column = <4>;
-			linux,code = <3>;
-		};
-
-		key_3 {
-			keypad,row = <1>;
-			keypad,column = <5>;
-			linux,code = <4>;
-		};
-
-		key_4 {
-			keypad,row = <1>;
-			keypad,column = <6>;
-			linux,code = <5>;
-		};
-
-		key_5 {
-			keypad,row = <1>;
-			keypad,column = <7>;
-			linux,code = <6>;
-		};
-
-		key_A {
-			keypad,row = <2>;
-			keypad,column = <6>;
-			linux,code = <30>;
-		};
-
-		key_B {
-			keypad,row = <2>;
-			keypad,column = <7>;
-			linux,code = <48>;
-		};
-
-		key_C {
-			keypad,row = <0>;
-			keypad,column = <5>;
-			linux,code = <46>;
-		};
-
-		key_D {
-			keypad,row = <2>;
-			keypad,column = <5>;
-			linux,code = <32>;
-		};
-
-		key_E {
-			keypad,row = <0>;
-			keypad,column = <7>;
-			linux,code = <18>;
-		};
 	};
 
 	sdhci@12530000 {
diff -urNp a/arch/arm/boot/dts/exynos4412.dtsi b/arch/arm/boot/dts/exynos4412.dtsi
--- a/arch/arm/boot/dts/exynos4412.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4412.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -17,56 +17,55 @@
  * published by the Free Software Foundation.
 */
 
-#include "exynos4x12.dtsi"
+/include/ "exynos4x12.dtsi"
 
 / {
-	compatible = "samsung,exynos4412", "samsung,exynos4";
+	compatible = "samsung,exynos4412";
 
-	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		cpu0: cpu@A00 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <0xA00>;
-			cooling-min-level = <13>;
-			cooling-max-level = <7>;
-			#cooling-cells = <2>; /* min followed by max */
-		};
-
-		cpu@A01 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <0xA01>;
-		};
-
-		cpu@A02 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <0xA02>;
-		};
-
-		cpu@A03 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <0xA03>;
-		};
+	gic:interrupt-controller@10490000 {
+		cpu-offset = <0x4000>;
 	};
 
-	combiner: interrupt-controller@10440000 {
+	interrupt-controller@10440000 {
 		samsung,combiner-nr = <20>;
+		interrupts = <0 0 0>, <0 1 0>, <0 2 0>, <0 3 0>,
+			     <0 4 0>, <0 5 0>, <0 6 0>, <0 7 0>,
+			     <0 8 0>, <0 9 0>, <0 10 0>, <0 11 0>,
+			     <0 12 0>, <0 13 0>, <0 14 0>, <0 15 0>,
+			     <0 107 0>, <0 108 0>, <0 48 0>, <0 42 0>;
 	};
 
-	pmu {
-		interrupts = <2 2>, <3 2>, <18 2>, <19 2>;
-	};
-
-	gic: interrupt-controller@10490000 {
-		cpu-offset = <0x4000>;
+	mct@10050000 {
+		compatible = "samsung,exynos4412-mct";
+		reg = <0x10050000 0x800>;
+		interrupt-controller;
+		#interrups-cells = <2>;
+		interrupt-parent = <&mct_map>;
+		interrupts = <0 0>, <1 0>, <2 0>, <3 0>,
+			     <4 0>, <5 0>, <6 0>, <7 0>;
+		clocks = <&clock 3>, <&clock 344>;
+		clock-names = "fin_pll", "mct";
+
+		mct_map: mct-map {
+			#interrupt-cells = <2>;
+			#address-cells = <0>;
+			#size-cells = <0>;
+			interrupt-map = <0x0 0 &gic 0 57 0>,
+					<0x1 0 &combiner 12 5>,
+					<0x2 0 &combiner 12 6>,
+					<0x3 0 &combiner 12 7>,
+					<0x4 0 &gic 1 12 0>,
+					<0x5 0 &gic 1 12 0>,
+					<0x6 0 &gic 1 12 0>,
+					<0x7 0 &gic 1 12 0>;
+		};
 	};
 
-	pmu_system_controller: system-controller@10020000 {
-		compatible = "samsung,exynos4412-pmu", "syscon";
+	mshc@12550000 {
+		compatible = "samsung,exynos4412-dw-mshc";
+		reg = <0x12550000 0x1000>;
+		interrupts = <0 77 0>;
+		#address-cells = <1>;
+		#size-cells = <0>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/exynos4x12-pinctrl.dtsi b/arch/arm/boot/dts/exynos4x12-pinctrl.dtsi
--- a/arch/arm/boot/dts/exynos4x12-pinctrl.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4x12-pinctrl.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -12,22 +12,6 @@
  * published by the Free Software Foundation.
 */
 
-#define PIN_PULL_NONE		0
-#define PIN_PULL_DOWN		1
-#define PIN_PULL_UP		3
-
-#define PIN_PDN_OUT0		0
-#define PIN_PDN_OUT1		1
-#define PIN_PDN_INPUT		2
-#define PIN_PDN_PREV		3
-
-#define PIN_SLP(_pin, _mode, _pull)				\
-	_pin {							\
-		samsung,pins = #_pin;				\
-		samsung,pin-con-pdn = <PIN_PDN_ ##_mode>;	\
-		samsung,pin-pud-pdn = <PIN_PULL_ ##_pull>;	\
-	}
-
 / {
 	pinctrl@11400000 {
 		gpa0: gpa0 {
@@ -417,26 +401,13 @@
 			samsung,pin-drv = <0>;
 		};
 
-		cam_port_a_io: cam-port-a-io {
+		cam_port_a: cam-port-a {
 			samsung,pins = "gpj0-0", "gpj0-1", "gpj0-2", "gpj0-3",
 					"gpj0-4", "gpj0-5", "gpj0-6", "gpj0-7",
-					"gpj1-0", "gpj1-1", "gpj1-2", "gpj1-4";
+					"gpj1-0", "gpj1-1", "gpj1-2", "gpj1-3",
+					"gpj1-4";
 			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		cam_port_a_clk_active: cam-port-a-clk-active {
-			samsung,pins = "gpj1-3";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <3>;
-		};
-
-		cam_port_a_clk_idle: cam-port-a-clk-idle {
-			samsung,pins = "gpj1-3";
-			samsung,pin-function = <0>;
-			samsung,pin-pud = <1>;
+			samsung,pin-pud = <3>;
 			samsung,pin-drv = <0>;
 		};
 	};
@@ -691,7 +662,7 @@
 		sd4_bus8: sd4-bus-width8 {
 			samsung,pins = "gpk1-3", "gpk1-4", "gpk1-5", "gpk1-6";
 			samsung,pin-function = <4>;
-			samsung,pin-pud = <3>;
+			samsung,pin-pud = <4>;
 			samsung,pin-drv = <3>;
 		};
 
@@ -807,26 +778,69 @@
 			samsung,pin-drv = <3>;
 		};
 
-		cam_port_b_io: cam-port-b-io {
-			samsung,pins = "gpm0-0", "gpm0-1", "gpm0-2", "gpm0-3",
-					"gpm0-4", "gpm0-5", "gpm0-6", "gpm0-7",
-					"gpm1-0", "gpm1-1", "gpm2-0", "gpm2-1";
+		keypad_col0: keypad-col0 {
+			samsung,pins = "gpl2-0";
 			samsung,pin-function = <3>;
-			samsung,pin-pud = <3>;
+			samsung,pin-pud = <0>;
 			samsung,pin-drv = <0>;
 		};
 
-		cam_port_b_clk_active: cam-port-b-clk-active {
-			samsung,pins = "gpm2-2";
+		keypad_col1: keypad-col1 {
+			samsung,pins = "gpl2-1";
 			samsung,pin-function = <3>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <3>;
+			samsung,pin-drv = <0>;
 		};
 
-		cam_port_b_clk_idle: cam-port-b-clk-idle {
-			samsung,pins = "gpm2-2";
-			samsung,pin-function = <0>;
-			samsung,pin-pud = <1>;
+		keypad_col2: keypad-col2 {
+			samsung,pins = "gpl2-2";
+			samsung,pin-function = <3>;
+			samsung,pin-pud = <0>;
+			samsung,pin-drv = <0>;
+		};
+
+		keypad_col3: keypad-col3 {
+			samsung,pins = "gpl2-3";
+			samsung,pin-function = <3>;
+			samsung,pin-pud = <0>;
+			samsung,pin-drv = <0>;
+		};
+
+		keypad_col4: keypad-col4 {
+			samsung,pins = "gpl2-4";
+			samsung,pin-function = <3>;
+			samsung,pin-pud = <0>;
+			samsung,pin-drv = <0>;
+		};
+
+		keypad_col5: keypad-col5 {
+			samsung,pins = "gpl2-5";
+			samsung,pin-function = <3>;
+			samsung,pin-pud = <0>;
+			samsung,pin-drv = <0>;
+		};
+
+		keypad_col6: keypad-col6 {
+			samsung,pins = "gpl2-6";
+			samsung,pin-function = <3>;
+			samsung,pin-pud = <0>;
+			samsung,pin-drv = <0>;
+		};
+
+		keypad_col7: keypad-col7 {
+			samsung,pins = "gpl2-7";
+			samsung,pin-function = <3>;
+			samsung,pin-pud = <0>;
+			samsung,pin-drv = <0>;
+		};
+
+		cam_port_b: cam-port-b {
+			samsung,pins = "gpm0-0", "gpm0-1", "gpm0-2", "gpm0-3",
+					"gpm0-4", "gpm0-5", "gpm0-6", "gpm0-7",
+					"gpm1-0", "gpm1-1", "gpm2-0", "gpm2-1",
+					"gpm2-2";
+			samsung,pin-function = <3>;
+			samsung,pin-pud = <3>;
 			samsung,pin-drv = <0>;
 		};
 
@@ -864,27 +878,6 @@
 			samsung,pin-pud = <0>;
 			samsung,pin-drv = <0>;
 		};
-
-		fimc_is_i2c0: fimc-is-i2c0 {
-			samsung,pins = "gpm4-0", "gpm4-1";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		fimc_is_i2c1: fimc-is-i2c1 {
-			samsung,pins = "gpm4-2", "gpm4-3";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		fimc_is_uart: fimc-is-uart {
-			samsung,pins = "gpm3-5", "gpm3-7";
-			samsung,pin-function = <3>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
 	};
 
 	pinctrl@03860000 {
diff -urNp a/arch/arm/boot/dts/exynos4x12.dtsi b/arch/arm/boot/dts/exynos4x12.dtsi
--- a/arch/arm/boot/dts/exynos4x12.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos4x12.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -17,9 +17,8 @@
  * published by the Free Software Foundation.
 */
 
-#include "exynos4.dtsi"
-#include "exynos4x12-pinctrl.dtsi"
-#include "exynos4-cpu-thermal.dtsi"
+/include/ "exynos4.dtsi"
+/include/ "exynos4x12-pinctrl.dtsi"
 
 / {
 	aliases {
@@ -27,83 +26,22 @@
 		pinctrl1 = &pinctrl_1;
 		pinctrl2 = &pinctrl_2;
 		pinctrl3 = &pinctrl_3;
-		fimc-lite0 = &fimc_lite_0;
-		fimc-lite1 = &fimc_lite_1;
-		mshc0 = &mshc_0;
 	};
 
-	sysram@02020000 {
-		compatible = "mmio-sram";
-		reg = <0x02020000 0x40000>;
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges = <0 0x02020000 0x40000>;
-
-		smp-sysram@0 {
-			compatible = "samsung,exynos4210-sysram";
-			reg = <0x0 0x1000>;
-		};
-
-		smp-sysram@2f000 {
-			compatible = "samsung,exynos4210-sysram-ns";
-			reg = <0x2f000 0x1000>;
-		};
-	};
-
-	pd_isp: isp-power-domain@10023CA0 {
-		compatible = "samsung,exynos4210-pd";
-		reg = <0x10023CA0 0x20>;
-		#power-domain-cells = <0>;
-	};
-
-	l2c: l2-cache-controller@10502000 {
-		compatible = "arm,pl310-cache";
-		reg = <0x10502000 0x1000>;
-		cache-unified;
-		cache-level = <2>;
-		arm,tag-latency = <2 2 1>;
-		arm,data-latency = <3 2 1>;
-		arm,double-linefill = <1>;
-		arm,double-linefill-incr = <0>;
-		arm,double-linefill-wrap = <1>;
-		arm,prefetch-drop = <1>;
-		arm,prefetch-offset = <7>;
+	combiner:interrupt-controller@10440000 {
+		interrupts = <0 0 0>, <0 1 0>, <0 2 0>, <0 3 0>,
+			     <0 4 0>, <0 5 0>, <0 6 0>, <0 7 0>,
+			     <0 8 0>, <0 9 0>, <0 10 0>, <0 11 0>,
+			     <0 12 0>, <0 13 0>, <0 14 0>, <0 15 0>,
+			     <0 16 0>, <0 17 0>, <0 18 0>, <0 19 0>;
 	};
 
-	clock: clock-controller@10030000 {
+	clock: clock-controller@0x10030000 {
 		compatible = "samsung,exynos4412-clock";
 		reg = <0x10030000 0x20000>;
 		#clock-cells = <1>;
 	};
 
-	mct@10050000 {
-		compatible = "samsung,exynos4412-mct";
-		reg = <0x10050000 0x800>;
-		interrupt-parent = <&mct_map>;
-		interrupts = <0>, <1>, <2>, <3>, <4>;
-		clocks = <&clock CLK_FIN_PLL>, <&clock CLK_MCT>;
-		clock-names = "fin_pll", "mct";
-
-		mct_map: mct-map {
-			#interrupt-cells = <1>;
-			#address-cells = <0>;
-			#size-cells = <0>;
-			interrupt-map = <0 &gic 0 57 0>,
-					<1 &combiner 12 5>,
-					<2 &combiner 12 6>,
-					<3 &combiner 12 7>,
-					<4 &gic 1 12 0>;
-		};
-	};
-
-	combiner: interrupt-controller@10440000 {
-		interrupts = <0 0 0>, <0 1 0>, <0 2 0>, <0 3 0>,
-			     <0 4 0>, <0 5 0>, <0 6 0>, <0 7 0>,
-			     <0 8 0>, <0 9 0>, <0 10 0>, <0 11 0>,
-			     <0 12 0>, <0 13 0>, <0 14 0>, <0 15 0>,
-			     <0 107 0>, <0 108 0>, <0 48 0>, <0 42 0>;
-	};
-
 	pinctrl_0: pinctrl@11400000 {
 		compatible = "samsung,exynos4x12-pinctrl";
 		reg = <0x11400000 0x1000>;
@@ -122,19 +60,6 @@
 		};
 	};
 
-	adc: adc@126C0000 {
-		compatible = "samsung,exynos-adc-v1";
-		reg = <0x126C0000 0x100>;
-		interrupt-parent = <&combiner>;
-		interrupts = <10 3>;
-		clocks = <&clock CLK_TSADC>;
-		clock-names = "adc";
-		#io-channel-cells = <1>;
-		io-channel-ranges;
-		samsung,syscon-phandle = <&pmu_system_controller>;
-		status = "disabled";
-	};
-
 	pinctrl_2: pinctrl@03860000 {
 		compatible = "samsung,exynos4x12-pinctrl";
 		reg = <0x03860000 0x1000>;
@@ -148,165 +73,10 @@
 		interrupts = <0 72 0>;
 	};
 
-	pmu_system_controller: system-controller@10020000 {
-		compatible = "samsung,exynos4212-pmu", "syscon";
-		clock-names = "clkout0", "clkout1", "clkout2", "clkout3",
-				"clkout4", "clkout8", "clkout9";
-		clocks = <&clock CLK_OUT_DMC>, <&clock CLK_OUT_TOP>,
-			<&clock CLK_OUT_LEFTBUS>, <&clock CLK_OUT_RIGHTBUS>,
-			<&clock CLK_OUT_CPU>, <&clock CLK_XXTI>,
-			<&clock CLK_XUSBXTI>;
-		#clock-cells = <1>;
-	};
-
 	g2d@10800000 {
 		compatible = "samsung,exynos4212-g2d";
 		reg = <0x10800000 0x1000>;
 		interrupts = <0 89 0>;
-		clocks = <&clock CLK_SCLK_FIMG2D>, <&clock CLK_G2D>;
-		clock-names = "sclk_fimg2d", "fimg2d";
-		status = "disabled";
-	};
-
-	camera {
-		clocks = <&clock CLK_SCLK_CAM0>, <&clock CLK_SCLK_CAM1>,
-			 <&clock CLK_PIXELASYNCM0>, <&clock CLK_PIXELASYNCM1>;
-		clock-names = "sclk_cam0", "sclk_cam1", "pxl_async0", "pxl_async1";
-
-		fimc_0: fimc@11800000 {
-			compatible = "samsung,exynos4212-fimc";
-			samsung,pix-limits = <4224 8192 1920 4224>;
-			samsung,mainscaler-ext;
-			samsung,isp-wb;
-			samsung,cam-if;
-		};
-
-		fimc_1: fimc@11810000 {
-			compatible = "samsung,exynos4212-fimc";
-			samsung,pix-limits = <4224 8192 1920 4224>;
-			samsung,mainscaler-ext;
-			samsung,isp-wb;
-			samsung,cam-if;
-		};
-
-		fimc_2: fimc@11820000 {
-			compatible = "samsung,exynos4212-fimc";
-			samsung,pix-limits = <4224 8192 1920 4224>;
-			samsung,mainscaler-ext;
-			samsung,isp-wb;
-			samsung,lcd-wb;
-			samsung,cam-if;
-		};
-
-		fimc_3: fimc@11830000 {
-			compatible = "samsung,exynos4212-fimc";
-			samsung,pix-limits = <1920 8192 1366 1920>;
-			samsung,rotators = <0>;
-			samsung,mainscaler-ext;
-			samsung,isp-wb;
-			samsung,lcd-wb;
-		};
-
-		fimc_lite_0: fimc-lite@12390000 {
-			compatible = "samsung,exynos4212-fimc-lite";
-			reg = <0x12390000 0x1000>;
-			interrupts = <0 105 0>;
-			power-domains = <&pd_isp>;
-			clocks = <&clock CLK_FIMC_LITE0>;
-			clock-names = "flite";
-			status = "disabled";
-		};
-
-		fimc_lite_1: fimc-lite@123A0000 {
-			compatible = "samsung,exynos4212-fimc-lite";
-			reg = <0x123A0000 0x1000>;
-			interrupts = <0 106 0>;
-			power-domains = <&pd_isp>;
-			clocks = <&clock CLK_FIMC_LITE1>;
-			clock-names = "flite";
-			status = "disabled";
-		};
-
-		fimc_is: fimc-is@12000000 {
-			compatible = "samsung,exynos4212-fimc-is", "simple-bus";
-			reg = <0x12000000 0x260000>;
-			interrupts = <0 90 0>, <0 95 0>;
-			power-domains = <&pd_isp>;
-			clocks = <&clock CLK_FIMC_LITE0>,
-				 <&clock CLK_FIMC_LITE1>, <&clock CLK_PPMUISPX>,
-				 <&clock CLK_PPMUISPMX>,
-				 <&clock CLK_MOUT_MPLL_USER_T>,
-				 <&clock CLK_FIMC_ISP>, <&clock CLK_FIMC_DRC>,
-				 <&clock CLK_FIMC_FD>, <&clock CLK_MCUISP>,
-				 <&clock CLK_DIV_ISP0>,<&clock CLK_DIV_ISP1>,
-				 <&clock CLK_DIV_MCUISP0>,
-				 <&clock CLK_DIV_MCUISP1>,
-				 <&clock CLK_UART_ISP_SCLK>,
-				 <&clock CLK_ACLK200>, <&clock CLK_DIV_ACLK200>,
-				 <&clock CLK_ACLK400_MCUISP>,
-				 <&clock CLK_DIV_ACLK400_MCUISP>;
-			clock-names = "lite0", "lite1", "ppmuispx",
-				      "ppmuispmx", "mpll", "isp",
-				      "drc", "fd", "mcuisp",
-				      "ispdiv0", "ispdiv1", "mcuispdiv0",
-				      "mcuispdiv1", "uart", "aclk200",
-				      "div_aclk200", "aclk400mcuisp",
-				      "div_aclk400mcuisp";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges;
-			status = "disabled";
-
-			pmu {
-				reg = <0x10020000 0x3000>;
-			};
-
-			i2c1_isp: i2c-isp@12140000 {
-				compatible = "samsung,exynos4212-i2c-isp";
-				reg = <0x12140000 0x100>;
-				clocks = <&clock CLK_I2C1_ISP>;
-				clock-names = "i2c_isp";
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-		};
-	};
-
-	mshc_0: mmc@12550000 {
-		compatible = "samsung,exynos4412-dw-mshc";
-		reg = <0x12550000 0x1000>;
-		interrupts = <0 77 0>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		fifo-depth = <0x80>;
-		clocks = <&clock CLK_SDMMC4>, <&clock CLK_SCLK_MMC4>;
-		clock-names = "biu", "ciu";
 		status = "disabled";
 	};
-
-	exynos-usbphy@125B0000 {
-		compatible = "samsung,exynos4x12-usb2-phy";
-		samsung,sysreg-phandle = <&sys_reg>;
-	};
-
-	tmu@100C0000 {
-		compatible = "samsung,exynos4412-tmu";
-		interrupt-parent = <&combiner>;
-		interrupts = <2 4>;
-		reg = <0x100C0000 0x100>;
-		clocks = <&clock 383>;
-		clock-names = "tmu_apbif";
-		status = "disabled";
-	};
-
-	hdmi: hdmi@12D00000 {
-		compatible = "samsung,exynos4212-hdmi";
-	};
-
-	mixer: mixer@12C10000 {
-		compatible = "samsung,exynos4212-mixer";
-		clock-names = "mixer", "hdmi", "sclk_hdmi", "vp";
-		clocks = <&clock CLK_MIXER>, <&clock CLK_HDMI>,
-			 <&clock CLK_SCLK_HDMI>, <&clock CLK_VP>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/exynos5250-arndale.dts b/arch/arm/boot/dts/exynos5250-arndale.dts
--- a/arch/arm/boot/dts/exynos5250-arndale.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos5250-arndale.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,17 +7,14 @@
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
- */
+*/
 
 /dts-v1/;
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/input/input.h>
-#include "exynos5250.dtsi"
+/include/ "exynos5250.dtsi"
 
 / {
 	model = "Insignal Arndale evaluation board based on EXYNOS5250";
-	compatible = "insignal,arndale", "samsung,exynos5250", "samsung,exynos5";
+	compatible = "insignal,arndale", "samsung,exynos5250";
 
 	memory {
 		reg = <0x40000000 0x80000000>;
@@ -27,78 +24,424 @@
 		bootargs = "console=ttySAC2,115200";
 	};
 
+	codec@11000000 {
+		samsung,mfc-r = <0x43000000 0x800000>;
+		samsung,mfc-l = <0x51000000 0x800000>;
+	};
+
+	i2c@12C60000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <20000>;
+		samsung,i2c-slave-addr = <0x66>;
+
+		s5m8767_pmic@66 {
+			compatible = "samsung,s5m8767-pmic";
+			reg = <0x66>;
+
+			s5m8767,pmic-buck2-dvs-voltage = <1300000>;
+			s5m8767,pmic-buck3-dvs-voltage = <1100000>;
+			s5m8767,pmic-buck4-dvs-voltage = <1200000>;
+			s5m8767,pmic-buck-dvs-gpios = <&gpd1 0 0>,
+							<&gpd1 1 0>,
+							<&gpd1 2 0>;
+			s5m8767,pmic-buck-ds-gpios = <&gpx2 3 0>,
+							<&gpx2 4 0>,
+							<&gpx2 5 0>;
+			regulators {
+				ldo1_reg: LDO1 {
+					regulator-name = "VDD_ALIVE_1.0V";
+					regulator-min-microvolt = <1100000>;
+					regulator-max-microvolt = <1100000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo2_reg: LDO2 {
+					regulator-name = "VDD_28IO_DP_1.35V";
+					regulator-min-microvolt = <1200000>;
+					regulator-max-microvolt = <1200000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo3_reg: LDO3 {
+					regulator-name = "VDD_COMMON1_1.8V";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo4_reg: LDO4 {
+					regulator-name = "VDD_IOPERI_1.8V";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					op_mode = <1>;
+				};
+
+				ldo5_reg: LDO5 {
+					regulator-name = "VDD_EXT_1.8V";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo6_reg: LDO6 {
+					regulator-name = "VDD_MPLL_1.1V";
+					regulator-min-microvolt = <1100000>;
+					regulator-max-microvolt = <1100000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo7_reg: LDO7 {
+					regulator-name = "VDD_XPLL_1.1V";
+					regulator-min-microvolt = <1100000>;
+					regulator-max-microvolt = <1100000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo8_reg: LDO8 {
+					regulator-name = "VDD_COMMON2_1.0V";
+					regulator-min-microvolt = <1000000>;
+					regulator-max-microvolt = <1000000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo9_reg: LDO9 {
+					regulator-name = "VDD_33ON_3.0V";
+					regulator-min-microvolt = <3000000>;
+					regulator-max-microvolt = <3000000>;
+					op_mode = <1>;
+				};
+
+				ldo10_reg: LDO10 {
+					regulator-name = "VDD_COMMON3_1.8V";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo11_reg: LDO11 {
+					regulator-name = "VDD_ABB2_1.8V";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo12_reg: LDO12 {
+					regulator-name = "VDD_USB_3.0V";
+					regulator-min-microvolt = <3000000>;
+					regulator-max-microvolt = <3000000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo13_reg: LDO13 {
+					regulator-name = "VDDQ_C2C_W_1.8V";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo14_reg: LDO14 {
+					regulator-name = "VDD18_ABB0_3_1.8V";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo15_reg: LDO15 {
+					regulator-name = "VDD10_COMMON4_1.0V";
+					regulator-min-microvolt = <1000000>;
+					regulator-max-microvolt = <1000000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo16_reg: LDO16 {
+					regulator-name = "VDD18_HSIC_1.8V";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo17_reg: LDO17 {
+					regulator-name = "VDDQ_MMC2_3_2.8V";
+					regulator-min-microvolt = <2800000>;
+					regulator-max-microvolt = <2800000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				ldo18_reg: LDO18 {
+					regulator-name = "VDD_33ON_2.8V";
+					regulator-min-microvolt = <2800000>;
+					regulator-max-microvolt = <2800000>;
+					op_mode = <1>;
+				};
+
+				ldo22_reg: LDO22 {
+					regulator-name = "EXT_33_OFF";
+					regulator-min-microvolt = <3300000>;
+					regulator-max-microvolt = <3300000>;
+					op_mode = <1>;
+				};
+
+				ldo23_reg: LDO23 {
+					regulator-name = "EXT_28_OFF";
+					regulator-min-microvolt = <2800000>;
+					regulator-max-microvolt = <2800000>;
+					op_mode = <1>;
+				};
+
+				ldo25_reg: LDO25 {
+					regulator-name = "PVDD_LDO25";
+					regulator-min-microvolt = <1200000>;
+					regulator-max-microvolt = <1200000>;
+					op_mode = <1>;
+				};
+
+				ldo26_reg: LDO26 {
+					regulator-name = "EXT_18_OFF";
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
+					op_mode = <1>;
+				};
+
+				buck1_reg: BUCK1 {
+					regulator-name = "vdd_mif";
+					regulator-min-microvolt = <950000>;
+					regulator-max-microvolt = <1200000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				buck2_reg: BUCK2 {
+					regulator-name = "vdd_arm";
+					regulator-min-microvolt = <925000>;
+					regulator-max-microvolt = <1300000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				buck3_reg: BUCK3 {
+					regulator-name = "vdd_int";
+					regulator-min-microvolt = <900000>;
+					regulator-max-microvolt = <1200000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				buck4_reg: BUCK4 {
+					regulator-name = "vdd_g3d";
+					regulator-min-microvolt = <1000000>;
+					regulator-max-microvolt = <1000000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				buck5_reg: BUCK5 {
+					regulator-name = "VDD_MEM_1.35V";
+					regulator-min-microvolt = <750000>;
+					regulator-max-microvolt = <1355000>;
+					regulator-always-on;
+					regulator-boot-on;
+					op_mode = <1>;
+				};
+
+				buck9_reg: BUCK9 {
+					regulator-name = "VDD_33_OFF_EXT1";
+					regulator-min-microvolt = <750000>;
+					regulator-max-microvolt = <3000000>;
+					op_mode = <1>;
+				};
+			};
+		};
+	};
+
+	i2c@12C70000 {
+		status = "disabled";
+	};
+
+	i2c@12C80000 {
+		status = "disabled";
+	};
+
+	i2c@12C90000 {
+		status = "disabled";
+	};
+
+	i2c@12CA0000 {
+		status = "disabled";
+	};
+
+	i2c@12CB0000 {
+		status = "disabled";
+	};
+
+	i2c@12CC0000 {
+		status = "disabled";
+	};
+
+	i2c@12CD0000 {
+		status = "disabled";
+	};
+
+	i2c@121D0000 {
+		status = "disabled";
+	};
+
+	dwmmc_0: dwmmc0@12200000 {
+		num-slots = <1>;
+		supports-highspeed;
+		broken-cd;
+		fifo-depth = <0x80>;
+		card-detect-delay = <200>;
+		samsung,dw-mshc-ciu-div = <3>;
+		samsung,dw-mshc-sdr-timing = <2 3>;
+		samsung,dw-mshc-ddr-timing = <1 2>;
+		vmmc-supply = <&mmc_reg>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&sd0_clk &sd0_cmd &sd0_bus4 &sd0_bus8>;
+
+		slot@0 {
+			reg = <0>;
+			bus-width = <8>;
+		};
+	};
+
+	dwmmc_1: dwmmc1@12210000 {
+		status = "disabled";
+	};
+
+	dwmmc_2: dwmmc2@12220000 {
+		num-slots = <1>;
+		supports-highspeed;
+		fifo-depth = <0x80>;
+		card-detect-delay = <200>;
+		samsung,dw-mshc-ciu-div = <3>;
+		samsung,dw-mshc-sdr-timing = <2 3>;
+		samsung,dw-mshc-ddr-timing = <1 2>;
+		vmmc-supply = <&mmc_reg>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&sd2_clk &sd2_cmd &sd2_cd &sd2_bus4>;
+
+		slot@0 {
+			reg = <0>;
+			bus-width = <4>;
+			disable-wp;
+		};
+	};
+
+	dwmmc_3: dwmmc3@12230000 {
+		status = "disabled";
+	};
+
+	spi_0: spi@12d20000 {
+		status = "disabled";
+	};
+
+	spi_1: spi@12d30000 {
+		status = "disabled";
+	};
+
+	spi_2: spi@12d40000 {
+		status = "disabled";
+	};
+
 	gpio_keys {
 		compatible = "gpio-keys";
 
 		menu {
 			label = "SW-TACT2";
-			gpios = <&gpx1 4 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_MENU>;
+			gpios = <&gpx1 4 1>;
+			linux,code = <139>;
 			gpio-key,wakeup;
 		};
 
 		home {
 			label = "SW-TACT3";
-			gpios = <&gpx1 5 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_HOME>;
+			gpios = <&gpx1 5 1>;
+			linux,code = <102>;
 			gpio-key,wakeup;
 		};
 
 		up {
 			label = "SW-TACT4";
-			gpios = <&gpx1 6 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_UP>;
+			gpios = <&gpx1 6 1>;
+			linux,code = <103>;
 			gpio-key,wakeup;
 		};
 
 		down {
 			label = "SW-TACT5";
-			gpios = <&gpx1 7 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_DOWN>;
+			gpios = <&gpx1 7 1>;
+			linux,code = <108>;
 			gpio-key,wakeup;
 		};
 
 		back {
 			label = "SW-TACT6";
-			gpios = <&gpx2 0 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_BACK>;
+			gpios = <&gpx2 0 1>;
+			linux,code = <158>;
 			gpio-key,wakeup;
 		};
 
 		wakeup {
 			label = "SW-TACT7";
-			gpios = <&gpx2 1 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_WAKEUP>;
+			gpios = <&gpx2 1 1>;
+			linux,code = <143>;
 			gpio-key,wakeup;
 		};
 	};
 
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		main_dc_reg: regulator@0 {
-			compatible = "regulator-fixed";
-			reg = <0>;
-			regulator-name = "MAIN_DC";
-		};
-
-		mmc_reg: regulator@1 {
-			compatible = "regulator-fixed";
-			reg = <1>;
-			regulator-name = "VDD_33ON_2.8V";
-			regulator-min-microvolt = <2800000>;
-			regulator-max-microvolt = <2800000>;
-			gpio = <&gpx1 1 GPIO_ACTIVE_LOW>;
-			enable-active-high;
-		};
-
-		reg_hdmi_en: regulator@2 {
-			compatible = "regulator-fixed";
-			reg = <2>;
-			regulator-name = "hdmi-en";
-		};
+	hdmi {
+		hpd-gpio = <&gpx3 7 2>;
+		vdd_osc-supply = <&ldo10_reg>;
+		vdd_pll-supply = <&ldo8_reg>;
+		vdd-supply = <&ldo8_reg>;
+	};
+
+	mmc_reg: voltage-regulator {
+		compatible = "regulator-fixed";
+		regulator-name = "VDD_33ON_2.8V";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		gpio = <&gpx1 1 1>;
+		enable-active-high;
+	};
+
+	reg_hdmi_en: fixedregulator@0 {
+		compatible = "regulator-fixed";
+		regulator-name = "hdmi-en";
 	};
 
 	fixed-rate-clocks {
@@ -107,456 +450,4 @@
 			clock-frequency = <24000000>;
 		};
 	};
-
-	// SMSC USB3503 connected in hardware only mode as a PHY
-	usb_hub: usb-hub {
-		compatible = "smsc,usb3503a";
-
-		reset-gpios = <&gpx3 5 GPIO_ACTIVE_LOW>;
-		connect-gpios = <&gpd1 7 GPIO_ACTIVE_LOW>;
-	};
-};
-
-&dp {
-	status = "okay";
-	samsung,color-space = <0>;
-	samsung,dynamic-range = <0>;
-	samsung,ycbcr-coeff = <0>;
-	samsung,color-depth = <1>;
-	samsung,link-rate = <0x0a>;
-	samsung,lane-count = <4>;
-};
-
-&fimd {
-	status = "okay";
-
-	display-timings {
-		native-mode = <&timing0>;
-
-		timing0: timing@0 {
-			/* 2560x1600 DP panel */
-			clock-frequency = <50000>;
-			hactive = <2560>;
-			vactive = <1600>;
-			hfront-porch = <48>;
-			hback-porch = <80>;
-			hsync-len = <32>;
-			vback-porch = <16>;
-			vfront-porch = <8>;
-			vsync-len = <6>;
-		};
-	};
-};
-
-&hdmi {
-	hpd-gpio = <&gpx3 7 GPIO_ACTIVE_LOW>;
-	vdd_osc-supply = <&ldo10_reg>;
-	vdd_pll-supply = <&ldo8_reg>;
-	vdd-supply = <&ldo8_reg>;
-};
-
-&i2c_0 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <20000>;
-	samsung,i2c-slave-addr = <0x66>;
-
-	s5m8767_pmic@66 {
-		compatible = "samsung,s5m8767-pmic";
-		reg = <0x66>;
-		interrupt-parent = <&gpx3>;
-		interrupts = <2 IRQ_TYPE_LEVEL_LOW>;
-
-		vinb1-supply = <&main_dc_reg>;
-		vinb2-supply = <&main_dc_reg>;
-		vinb3-supply = <&main_dc_reg>;
-		vinb4-supply = <&main_dc_reg>;
-		vinb5-supply = <&main_dc_reg>;
-		vinb6-supply = <&main_dc_reg>;
-		vinb7-supply = <&main_dc_reg>;
-		vinb8-supply = <&main_dc_reg>;
-		vinb9-supply = <&main_dc_reg>;
-
-		vinl1-supply = <&buck7_reg>;
-		vinl2-supply = <&buck7_reg>;
-		vinl3-supply = <&buck7_reg>;
-		vinl4-supply = <&main_dc_reg>;
-		vinl5-supply = <&main_dc_reg>;
-		vinl6-supply = <&main_dc_reg>;
-		vinl7-supply = <&main_dc_reg>;
-		vinl8-supply = <&buck8_reg>;
-		vinl9-supply = <&buck8_reg>;
-
-		s5m8767,pmic-buck2-dvs-voltage = <1300000>;
-		s5m8767,pmic-buck3-dvs-voltage = <1100000>;
-		s5m8767,pmic-buck4-dvs-voltage = <1200000>;
-		s5m8767,pmic-buck-dvs-gpios = <&gpd1 0 GPIO_ACTIVE_HIGH>,
-		                              <&gpd1 1 GPIO_ACTIVE_HIGH>,
-		                              <&gpd1 2 GPIO_ACTIVE_HIGH>;
-		s5m8767,pmic-buck-ds-gpios = <&gpx2 3 GPIO_ACTIVE_HIGH>,
-		                             <&gpx2 4 GPIO_ACTIVE_HIGH>,
-		                             <&gpx2 5 GPIO_ACTIVE_HIGH>;
-
-		regulators {
-			ldo1_reg: LDO1 {
-				regulator-name = "VDD_ALIVE_1.0V";
-				regulator-min-microvolt = <1100000>;
-				regulator-max-microvolt = <1100000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo2_reg: LDO2 {
-				regulator-name = "VDD_28IO_DP_1.35V";
-				regulator-min-microvolt = <1200000>;
-				regulator-max-microvolt = <1200000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo3_reg: LDO3 {
-				regulator-name = "VDD_COMMON1_1.8V";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo4_reg: LDO4 {
-				regulator-name = "VDD_IOPERI_1.8V";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				op_mode = <1>;
-			};
-
-			ldo5_reg: LDO5 {
-				regulator-name = "VDD_EXT_1.8V";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo6_reg: LDO6 {
-				regulator-name = "VDD_MPLL_1.1V";
-				regulator-min-microvolt = <1100000>;
-				regulator-max-microvolt = <1100000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo7_reg: LDO7 {
-				regulator-name = "VDD_XPLL_1.1V";
-				regulator-min-microvolt = <1100000>;
-				regulator-max-microvolt = <1100000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo8_reg: LDO8 {
-				regulator-name = "VDD_COMMON2_1.0V";
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <1000000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo9_reg: LDO9 {
-				regulator-name = "VDD_33ON_3.0V";
-				regulator-min-microvolt = <3000000>;
-				regulator-max-microvolt = <3000000>;
-				op_mode = <1>;
-			};
-
-			ldo10_reg: LDO10 {
-				regulator-name = "VDD_COMMON3_1.8V";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo11_reg: LDO11 {
-				regulator-name = "VDD_ABB2_1.8V";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo12_reg: LDO12 {
-				regulator-name = "VDD_USB_3.0V";
-				regulator-min-microvolt = <3000000>;
-				regulator-max-microvolt = <3000000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo13_reg: LDO13 {
-				regulator-name = "VDDQ_C2C_W_1.8V";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo14_reg: LDO14 {
-				regulator-name = "VDD18_ABB0_3_1.8V";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo15_reg: LDO15 {
-				regulator-name = "VDD10_COMMON4_1.0V";
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <1000000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo16_reg: LDO16 {
-				regulator-name = "VDD18_HSIC_1.8V";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo17_reg: LDO17 {
-				regulator-name = "VDDQ_MMC2_3_2.8V";
-				regulator-min-microvolt = <2800000>;
-				regulator-max-microvolt = <2800000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			ldo18_reg: LDO18 {
-				regulator-name = "VDD_33ON_2.8V";
-				regulator-min-microvolt = <2800000>;
-				regulator-max-microvolt = <2800000>;
-				op_mode = <1>;
-			};
-
-			ldo22_reg: LDO22 {
-				regulator-name = "EXT_33_OFF";
-				regulator-min-microvolt = <3300000>;
-				regulator-max-microvolt = <3300000>;
-				op_mode = <1>;
-			};
-
-			ldo23_reg: LDO23 {
-				regulator-name = "EXT_28_OFF";
-				regulator-min-microvolt = <2800000>;
-				regulator-max-microvolt = <2800000>;
-				op_mode = <1>;
-			};
-
-			ldo25_reg: LDO25 {
-				regulator-name = "PVDD_LDO25";
-				regulator-min-microvolt = <1200000>;
-				regulator-max-microvolt = <1200000>;
-				op_mode = <1>;
-			};
-
-			ldo26_reg: LDO26 {
-				regulator-name = "EXT_18_OFF";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				op_mode = <1>;
-			};
-
-			buck1_reg: BUCK1 {
-				regulator-name = "vdd_mif";
-				regulator-min-microvolt = <950000>;
-				regulator-max-microvolt = <1200000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			buck2_reg: BUCK2 {
-				regulator-name = "vdd_arm";
-				regulator-min-microvolt = <912500>;
-				regulator-max-microvolt = <1300000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			buck3_reg: BUCK3 {
-				regulator-name = "vdd_int";
-				regulator-min-microvolt = <900000>;
-				regulator-max-microvolt = <1200000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			buck4_reg: BUCK4 {
-				regulator-name = "vdd_g3d";
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <1000000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			buck5_reg: BUCK5 {
-				regulator-name = "VDD_MEM_1.35V";
-				regulator-min-microvolt = <750000>;
-				regulator-max-microvolt = <1355000>;
-				regulator-always-on;
-				regulator-boot-on;
-				op_mode = <1>;
-			};
-
-			buck7_reg: BUCK7 {
-				regulator-name = "PVDD_BUCK7";
-				regulator-always-on;
-				op_mode = <1>;
-			};
-
-			buck8_reg: BUCK8 {
-				regulator-name = "PVDD_BUCK8";
-				regulator-always-on;
-				op_mode = <1>;
-			};
-
-			buck9_reg: BUCK9 {
-				regulator-name = "VDD_33_OFF_EXT1";
-				regulator-min-microvolt = <750000>;
-				regulator-max-microvolt = <3000000>;
-				op_mode = <1>;
-			};
-		};
-	};
-};
-
-&i2c_2 {
-	status = "okay";
-
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <66000>;
-	samsung,i2c-slave-addr = <0x50>;
-
-	hdmiddc@50 {
-		compatible = "samsung,exynos4210-hdmiddc";
-		reg = <0x50>;
-	};
-};
-
-&i2c_3 {
-	status = "okay";
-
-	wm1811a@1a {
-		compatible = "wlf,wm1811";
-		reg = <0x1a>;
-
-		AVDD2-supply = <&main_dc_reg>;
-		CPVDD-supply = <&main_dc_reg>;
-		DBVDD1-supply = <&main_dc_reg>;
-		DBVDD2-supply = <&main_dc_reg>;
-		DBVDD3-supply = <&main_dc_reg>;
-		LDO1VDD-supply = <&main_dc_reg>;
-		SPKVDD1-supply = <&main_dc_reg>;
-		SPKVDD2-supply = <&main_dc_reg>;
-
-		wlf,ldo1ena = <&gpb0 0 GPIO_ACTIVE_HIGH>;
-		wlf,ldo2ena = <&gpb0 1 GPIO_ACTIVE_HIGH>;
-	};
-};
-
-&i2c_8 {
-	status = "okay";
-
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <66000>;
-	samsung,i2c-slave-addr = <0x38>;
-
-	hdmiphy@38 {
-		compatible = "samsung,exynos4212-hdmiphy";
-		reg = <0x38>;
-	};
-};
-
-&i2c_9 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <40000>;
-	samsung,i2c-slave-addr = <0x38>;
-
-	sata_phy_i2c:sata-phy@38 {
-		compatible = "samsung,exynos-sataphy-i2c";
-		reg = <0x38>;
-	};
-};
-
-&i2s0 {
-	status = "okay";
-};
-
-&mfc {
-	samsung,mfc-r = <0x43000000 0x800000>;
-	samsung,mfc-l = <0x51000000 0x800000>;
-};
-
-&mmc_0 {
-	status = "okay";
-	num-slots = <1>;
-	broken-cd;
-	card-detect-delay = <200>;
-	samsung,dw-mshc-ciu-div = <3>;
-	samsung,dw-mshc-sdr-timing = <2 3>;
-	samsung,dw-mshc-ddr-timing = <1 2>;
-	vmmc-supply = <&mmc_reg>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&sd0_clk &sd0_cmd &sd0_bus4 &sd0_bus8>;
-	bus-width = <8>;
-	cap-mmc-highspeed;
-};
-
-&mmc_2 {
-	status = "okay";
-	num-slots = <1>;
-	card-detect-delay = <200>;
-	samsung,dw-mshc-ciu-div = <3>;
-	samsung,dw-mshc-sdr-timing = <2 3>;
-	samsung,dw-mshc-ddr-timing = <1 2>;
-	vmmc-supply = <&mmc_reg>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&sd2_clk &sd2_cmd &sd2_cd &sd2_bus4>;
-	bus-width = <4>;
-	disable-wp;
-	cap-sd-highspeed;
-};
-
-&rtc {
-	status = "okay";
-};
-
-&sata {
-	status = "okay";
-};
-
-&sata_phy {
-	status = "okay";
-	samsung,exynos-sataphy-i2c-phandle = <&sata_phy_i2c>;
 };
diff -urNp a/arch/arm/boot/dts/exynos5250-pinctrl.dtsi b/arch/arm/boot/dts/exynos5250-pinctrl.dtsi
--- a/arch/arm/boot/dts/exynos5250-pinctrl.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos5250-pinctrl.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -210,21 +210,21 @@
 			samsung,pins = "gpa0-2", "gpa0-3";
 			samsung,pin-function = <2>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		i2c2_bus: i2c2-bus {
 			samsung,pins = "gpa0-6", "gpa0-7";
 			samsung,pin-function = <3>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		i2c2_hs_bus: i2c2-hs-bus {
 			samsung,pins = "gpa0-6", "gpa0-7";
 			samsung,pin-function = <4>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		uart2_data: uart2-data {
@@ -238,21 +238,21 @@
 			samsung,pins = "gpa1-2", "gpa1-3";
 			samsung,pin-function = <2>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		i2c3_bus: i2c3-bus {
 			samsung,pins = "gpa1-2", "gpa1-3";
 			samsung,pin-function = <3>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		i2c3_hs_bus: i2c3-hs-bus {
 			samsung,pins = "gpa1-2", "gpa1-3";
 			samsung,pin-function = <4>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		uart3_data: uart3-data {
@@ -273,14 +273,14 @@
 			samsung,pins = "gpa2-0", "gpa2-1";
 			samsung,pin-function = <3>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		i2c5_bus: i2c5-bus {
 			samsung,pins = "gpa2-2", "gpa2-3";
 			samsung,pin-function = <3>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		spi1_bus: spi1-bus {
@@ -351,34 +351,6 @@
 			samsung,pin-drv = <0>;
 		};
 
-		pwm0_out: pwm0-out {
-			samsung,pins = "gpb2-0";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		pwm1_out: pwm1-out {
-			samsung,pins = "gpb2-1";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		pwm2_out: pwm2-out {
-			samsung,pins = "gpb2-2";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		pwm3_out: pwm3-out {
-			samsung,pins = "gpb2-3";
-			samsung,pin-function = <2>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
 		i2c7_bus: i2c7-bus {
 			samsung,pins = "gpb2-2", "gpb2-3";
 			samsung,pin-function = <3>;
@@ -404,14 +376,14 @@
 			samsung,pins = "gpb3-0", "gpb3-1";
 			samsung,pin-function = <4>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		i2c1_hs_bus: i2c1-hs-bus {
 			samsung,pins = "gpb3-2", "gpb3-3";
 			samsung,pin-function = <4>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		sd0_clk: sd0-clk {
@@ -579,14 +551,7 @@
 			samsung,pins = "gpd0-2", "gpd0-3";
 			samsung,pin-function = <2>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
-		};
-
-		dp_hpd: dp_hpd {
-			samsung,pins = "gpx0-7";
-			samsung,pin-function = <3>;
-			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 	};
 
@@ -677,42 +642,42 @@
 				       "gpf1-0", "gpf1-1", "gpf1-2", "gpf1-3";
 			samsung,pin-function = <3>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		cam_i2c2_bus: cam-i2c2-bus {
 			samsung,pins = "gpe0-6", "gpe1-0";
 			samsung,pin-function = <4>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		cam_spi1_bus: cam-spi1-bus {
 			samsung,pins = "gpe0-4", "gpe0-5", "gpf0-2", "gpf0-3";
 			samsung,pin-function = <4>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		cam_i2c1_bus: cam-i2c1-bus {
 			samsung,pins = "gpf0-2", "gpf0-3";
 			samsung,pin-function = <2>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		cam_i2c0_bus: cam-i2c0-bus {
 			samsung,pins = "gpf0-0", "gpf0-1";
 			samsung,pin-function = <2>;
 			samsung,pin-pud = <3>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		cam_spi0_bus: cam-spi0-bus {
 			samsung,pins = "gpf1-0", "gpf1-1", "gpf1-2", "gpf1-3";
 			samsung,pin-function = <2>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		cam_bayrgb_bus: cam-bayrgb-bus {
@@ -723,7 +688,7 @@
 				       "gpg2-0", "gpg2-1";
 			samsung,pin-function = <2>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		cam_port_a: cam-port-a {
@@ -732,7 +697,7 @@
 				       "gph1-4", "gph1-5", "gph1-6", "gph1-7";
 			samsung,pin-function = <2>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 	};
 
@@ -784,7 +749,7 @@
 				       "gpv1-4", "gpv1-5", "gpv1-6", "gpv1-7";
 			samsung,pin-function = <2>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 
 		c2c_txd: c2c-txd {
@@ -794,7 +759,7 @@
 				       "gpv3-4", "gpv3-5", "gpv3-6", "gpv3-7";
 			samsung,pin-function = <2>;
 			samsung,pin-pud = <0>;
-			samsung,pin-drv = <0>;
+			samaung,pin-drv = <0>;
 		};
 	};
 
diff -urNp a/arch/arm/boot/dts/exynos5250-smdk5250.dts b/arch/arm/boot/dts/exynos5250-smdk5250.dts
--- a/arch/arm/boot/dts/exynos5250-smdk5250.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos5250-smdk5250.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,16 +7,14 @@
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
- */
+*/
 
 /dts-v1/;
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include "exynos5250.dtsi"
+/include/ "exynos5250.dtsi"
 
 / {
 	model = "SAMSUNG SMDK5250 board based on EXYNOS5250";
-	compatible = "samsung,smdk5250", "samsung,exynos5250", "samsung,exynos5";
+	compatible = "samsung,smdk5250", "samsung,exynos5250";
 
 	aliases {
 	};
@@ -29,384 +27,225 @@
 		bootargs = "root=/dev/ram0 rw ramdisk=8192 initrd=0x41000000,8M console=ttySAC2,115200 init=/linuxrc";
 	};
 
-	vdd: fixed-regulator@0 {
-		compatible = "regulator-fixed";
-		regulator-name = "vdd-supply";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <1800000>;
-		regulator-always-on;
-	};
-
-	dbvdd: fixed-regulator@1 {
-		compatible = "regulator-fixed";
-		regulator-name = "dbvdd-supply";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		regulator-always-on;
-	};
-
-	spkvdd: fixed-regulator@2 {
-		compatible = "regulator-fixed";
-		regulator-name = "spkvdd-supply";
-		regulator-min-microvolt = <5000000>;
-		regulator-max-microvolt = <5000000>;
-		regulator-always-on;
-	};
-
-	sound {
-		compatible = "samsung,smdk-wm8994";
+	i2c@12C60000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <20000>;
 
-		samsung,i2s-controller = <&i2s0>;
-		samsung,audio-codec = <&wm8994>;
+		eeprom@50 {
+			compatible = "samsung,s524ad0xd1";
+			reg = <0x50>;
+		};
 	};
 
-	fixed-rate-clocks {
-		xxti {
-			compatible = "samsung,clock-xxti";
-			clock-frequency = <24000000>;
+	i2c@12C70000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <20000>;
+
+		eeprom@51 {
+			compatible = "samsung,s524ad0xd1";
+			reg = <0x51>;
 		};
 
-		codec_mclk: codec-mclk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <16934000>;
+		wm8994: wm8994@1a {
+			 compatible = "wlf,wm8994";
+			 reg = <0x1a>;
 		};
 	};
-};
 
-&dp {
-	samsung,color-space = <0>;
-	samsung,dynamic-range = <0>;
-	samsung,ycbcr-coeff = <0>;
-	samsung,color-depth = <1>;
-	samsung,link-rate = <0x0a>;
-	samsung,lane-count = <4>;
-
-	pinctrl-names = "default";
-	pinctrl-0 = <&dp_hpd>;
-	status = "okay";
-};
+	i2c@121D0000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <40000>;
+		samsung,i2c-slave-addr = <0x38>;
 
-&ehci {
-	samsung,vbus-gpio = <&gpx2 6 GPIO_ACTIVE_HIGH>;
-};
-
-&fimd {
-	status = "okay";
-
-	display-timings {
-		native-mode = <&timing0>;
-
-		timing0: timing@0 {
-			/* 1280x800 */
-			clock-frequency = <50000>;
-			hactive = <1280>;
-			vactive = <800>;
-			hfront-porch = <4>;
-			hback-porch = <4>;
-			hsync-len = <4>;
-			vback-porch = <4>;
-			vfront-porch = <4>;
-			vsync-len = <4>;
+		sata-phy {
+			compatible = "samsung,sata-phy";
+			reg = <0x38>;
 		};
 	};
-};
 
-&hdmi {
-	hpd-gpio = <&gpx3 7 GPIO_ACTIVE_HIGH>;
-};
+	sata@122F0000 {
+		samsung,sata-freq = <66>;
+	};
 
-&i2c_0 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <20000>;
-
-	eeprom@50 {
-		compatible = "samsung,s524ad0xd1";
-		reg = <0x50>;
-	};
-
-	max77686@09 {
-		compatible = "maxim,max77686";
-		reg = <0x09>;
-		interrupt-parent = <&gpx3>;
-		interrupts = <2 IRQ_TYPE_NONE>;
-
-		voltage-regulators {
-			ldo1_reg: LDO1 {
-				regulator-name = "P1.0V_LDO_OUT1";
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <1000000>;
-				regulator-always-on;
-			};
+	i2c@12C80000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <66000>;
 
-			ldo2_reg: LDO2 {
-				regulator-name = "P1.2V_LDO_OUT2";
-				regulator-min-microvolt = <1200000>;
-				regulator-max-microvolt = <1200000>;
-				regulator-always-on;
-			};
+		hdmiddc@50 {
+			compatible = "samsung,exynos5-hdmiddc";
+			reg = <0x50>;
+		};
+	};
 
-			ldo3_reg: LDO3 {
-				regulator-name = "P1.8V_LDO_OUT3";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-			};
+	i2c@12C90000 {
+		status = "disabled";
+	};
 
-			ldo4_reg: LDO4 {
-				regulator-name = "P2.8V_LDO_OUT4";
-				regulator-min-microvolt = <2800000>;
-				regulator-max-microvolt = <2800000>;
-			};
+	i2c@12CA0000 {
+		status = "disabled";
+	};
 
-			ldo5_reg: LDO5 {
-				regulator-name = "P1.8V_LDO_OUT5";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-			};
+	i2c@12CB0000 {
+		status = "disabled";
+	};
 
-			ldo6_reg: LDO6 {
-				regulator-name = "P1.1V_LDO_OUT6";
-				regulator-min-microvolt = <1100000>;
-				regulator-max-microvolt = <1100000>;
-				regulator-always-on;
-			};
+	i2c@12CC0000 {
+		status = "disabled";
+	};
 
-			ldo7_reg: LDO7 {
-				regulator-name = "P1.1V_LDO_OUT7";
-				regulator-min-microvolt = <1100000>;
-				regulator-max-microvolt = <1100000>;
-				regulator-always-on;
-			};
+	i2c@12CD0000 {
+		status = "disabled";
+	};
 
-			ldo8_reg: LDO8 {
-				regulator-name = "P1.0V_LDO_OUT8";
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <1000000>;
-			};
+	i2c@12CE0000 {
+		samsung,i2c-sda-delay = <100>;
+		samsung,i2c-max-bus-freq = <66000>;
 
-			ldo10_reg: LDO10 {
-				regulator-name = "P1.8V_LDO_OUT10";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-			};
+		hdmiphy@38 {
+			compatible = "samsung,exynos5-hdmiphy";
+			reg = <0x38>;
+		};
+	};
 
-			ldo11_reg: LDO11 {
-				regulator-name = "P1.8V_LDO_OUT11";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-			};
+	dwmmc0@12200000 {
+		num-slots = <1>;
+		supports-highspeed;
+		broken-cd;
+		fifo-depth = <0x80>;
+		card-detect-delay = <200>;
+		samsung,dw-mshc-ciu-div = <3>;
+		samsung,dw-mshc-sdr-timing = <2 3>;
+		samsung,dw-mshc-ddr-timing = <1 2>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&sd0_clk &sd0_cmd &sd0_bus4 &sd0_bus8>;
 
-			ldo12_reg: LDO12 {
-				regulator-name = "P3.0V_LDO_OUT12";
-				regulator-min-microvolt = <3000000>;
-				regulator-max-microvolt = <3000000>;
-			};
+		slot@0 {
+			reg = <0>;
+			bus-width = <8>;
+		};
+	};
 
-			ldo13_reg: LDO13 {
-				regulator-name = "P1.8V_LDO_OUT13";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-			};
+	dwmmc1@12210000 {
+		status = "disabled";
+	};
 
-			ldo14_reg: LDO14 {
-				regulator-name = "P1.8V_LDO_OUT14";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-			};
+	dwmmc2@12220000 {
+		num-slots = <1>;
+		supports-highspeed;
+		fifo-depth = <0x80>;
+		card-detect-delay = <200>;
+		samsung,dw-mshc-ciu-div = <3>;
+		samsung,dw-mshc-sdr-timing = <2 3>;
+		samsung,dw-mshc-ddr-timing = <1 2>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&sd2_clk &sd2_cmd &sd2_cd &sd2_bus4>;
 
-			ldo15_reg: LDO15 {
-				regulator-name = "P1.0V_LDO_OUT15";
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <1000000>;
-			};
+		slot@0 {
+			reg = <0>;
+			bus-width = <4>;
+			disable-wp;
+		};
+	};
 
-			ldo16_reg: LDO16 {
-				regulator-name = "P1.8V_LDO_OUT16";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-			};
+	dwmmc3@12230000 {
+		status = "disabled";
+	};
 
-			buck1_reg: BUCK1 {
-				regulator-name = "vdd_mif";
-				regulator-min-microvolt = <950000>;
-				regulator-max-microvolt = <1300000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
+	spi_0: spi@12d20000 {
+		status = "disabled";
+	};
 
-			buck2_reg: BUCK2 {
-				regulator-name = "vdd_arm";
-				regulator-min-microvolt = <850000>;
-				regulator-max-microvolt = <1350000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
+	spi_1: spi@12d30000 {
+		w25q80bw@0 {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "w25x80";
+			reg = <0>;
+			spi-max-frequency = <1000000>;
 
-			buck3_reg: BUCK3 {
-				regulator-name = "vdd_int";
-				regulator-min-microvolt = <900000>;
-				regulator-max-microvolt = <1200000>;
-				regulator-always-on;
-				regulator-boot-on;
+			controller-data {
+				cs-gpio = <&gpa2 5 0>;
+				samsung,spi-feedback-delay = <0>;
 			};
 
-			buck4_reg: BUCK4 {
-				regulator-name = "vdd_g3d";
-				regulator-min-microvolt = <850000>;
-				regulator-max-microvolt = <1300000>;
-				regulator-always-on;
-				regulator-boot-on;
+			partition@0 {
+				label = "U-Boot";
+				reg = <0x0 0x40000>;
+				read-only;
 			};
 
-			buck5_reg: BUCK5 {
-				regulator-name = "P1.8V_BUCK_OUT5";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				regulator-boot-on;
+			partition@40000 {
+				label = "Kernel";
+				reg = <0x40000 0xc0000>;
 			};
 		};
 	};
-};
 
-&i2c_1 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <20000>;
-
-	eeprom@51 {
-		compatible = "samsung,s524ad0xd1";
-		reg = <0x51>;
-	};
-
-	wm8994: wm8994@1a {
-		compatible = "wlf,wm8994";
-		reg = <0x1a>;
-
-		gpio-controller;
-		#gpio-cells = <2>;
-
-		clocks = <&codec_mclk>;
-		clock-names = "MCLK1";
-
-		AVDD2-supply = <&vdd>;
-		CPVDD-supply = <&vdd>;
-		DBVDD-supply = <&dbvdd>;
-		SPKVDD1-supply = <&spkvdd>;
-		SPKVDD2-supply = <&spkvdd>;
+	spi_2: spi@12d40000 {
+		status = "disabled";
 	};
-};
 
-&i2c_2 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <66000>;
-
-	hdmiddc@50 {
-		compatible = "samsung,exynos4210-hdmiddc";
-		reg = <0x50>;
+	hdmi {
+		hpd-gpio = <&gpx3 7 0>;
 	};
-};
 
-&i2c_8 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <66000>;
-
-	hdmiphy@38 {
-		compatible = "samsung,exynos4212-hdmiphy";
-		reg = <0x38>;
+	codec@11000000 {
+		samsung,mfc-r = <0x43000000 0x800000>;
+		samsung,mfc-l = <0x51000000 0x800000>;
 	};
-};
 
-&i2c_9 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <40000>;
-	samsung,i2c-slave-addr = <0x38>;
-
-	sata_phy_i2c: sata-phy@38 {
-		compatible = "samsung,exynos-sataphy-i2c";
-		reg = <0x38>;
+	i2s0: i2s@03830000 {
+		status = "okay";
 	};
-};
 
-&i2s0 {
-	status = "okay";
-};
+	i2s1: i2s@12D60000 {
+		status = "disabled";
+	};
 
-&mfc {
-	samsung,mfc-r = <0x43000000 0x800000>;
-	samsung,mfc-l = <0x51000000 0x800000>;
-};
+	i2s2: i2s@12D70000 {
+		status = "disabled";
+	};
 
-&mmc_0 {
-	status = "okay";
-	num-slots = <1>;
-	broken-cd;
-	card-detect-delay = <200>;
-	samsung,dw-mshc-ciu-div = <3>;
-	samsung,dw-mshc-sdr-timing = <2 3>;
-	samsung,dw-mshc-ddr-timing = <1 2>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&sd0_clk &sd0_cmd &sd0_bus4 &sd0_bus8>;
-	bus-width = <8>;
-	cap-mmc-highspeed;
-};
+	sound {
+		compatible = "samsung,smdk-wm8994";
 
-&mmc_2 {
-	status = "okay";
-	num-slots = <1>;
-	card-detect-delay = <200>;
-	samsung,dw-mshc-ciu-div = <3>;
-	samsung,dw-mshc-sdr-timing = <2 3>;
-	samsung,dw-mshc-ddr-timing = <1 2>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&sd2_clk &sd2_cmd &sd2_cd &sd2_bus4>;
-	bus-width = <4>;
-	disable-wp;
-	cap-sd-highspeed;
-};
+		samsung,i2s-controller = <&i2s0>;
+		samsung,audio-codec = <&wm8994>;
+	};
 
-&rtc {
-	status = "okay";
-};
+	usb@12110000 {
+		samsung,vbus-gpio = <&gpx2 6 0>;
+	};
 
-&sata {
-	status = "okay";
-};
+	dp-controller {
+		samsung,color-space = <0>;
+		samsung,dynamic-range = <0>;
+		samsung,ycbcr-coeff = <0>;
+		samsung,color-depth = <1>;
+		samsung,link-rate = <0x0a>;
+		samsung,lane-count = <4>;
+	};
 
-&sata_phy {
-	status = "okay";
-	samsung,exynos-sataphy-i2c-phandle = <&sata_phy_i2c>;
-};
+	display-timings {
+		native-mode = <&timing0>;
+		timing0: timing@0 {
+			/* 1280x800 */
+			clock-frequency = <50000>;
+			hactive = <1280>;
+			vactive = <800>;
+			hfront-porch = <4>;
+			hback-porch = <4>;
+			hsync-len = <4>;
+			vback-porch = <4>;
+			vfront-porch = <4>;
+			vsync-len = <4>;
+		};
+	};
 
-&spi_1 {
-	status = "okay";
-	cs-gpios = <&gpa2 5 GPIO_ACTIVE_HIGH>;
-
-	w25q80bw@0 {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		compatible = "w25x80";
-		reg = <0>;
-		spi-max-frequency = <1000000>;
-
-		controller-data {
-			samsung,spi-feedback-delay = <0>;
-		};
-
-		partition@0 {
-			label = "U-Boot";
-			reg = <0x0 0x40000>;
-			read-only;
-		};
-
-		partition@40000 {
-			label = "Kernel";
-			reg = <0x40000 0xc0000>;
+	fixed-rate-clocks {
+		xxti {
+			compatible = "samsung,clock-xxti";
+			clock-frequency = <24000000>;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/exynos5250-snow.dts b/arch/arm/boot/dts/exynos5250-snow.dts
--- a/arch/arm/boot/dts/exynos5250-snow.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos5250-snow.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,46 +6,41 @@
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
- */
+*/
 
 /dts-v1/;
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/clock/maxim,max77686.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/input/input.h>
-#include "exynos5250.dtsi"
+/include/ "exynos5250.dtsi"
+/include/ "cros5250-common.dtsi"
 
 / {
 	model = "Google Snow";
-	compatible = "google,snow", "samsung,exynos5250", "samsung,exynos5";
+	compatible = "google,snow", "samsung,exynos5250";
 
 	aliases {
 		i2c104 = &i2c_104;
 	};
 
-	memory {
-		reg = <0x40000000 0x80000000>;
-	};
+	pinctrl@11400000 {
+		sd3_clk: sd3-clk {
+			samsung,pin-drv = <0>;
+		};
 
-	chosen {
-		bootargs = "console=tty1";
+		sd3_cmd: sd3-cmd {
+			samsung,pin-pud = <3>;
+			samsung,pin-drv = <0>;
+		};
+
+		sd3_bus4: sd3-bus-width4 {
+			samsung,pin-drv = <0>;
+		};
 	};
 
 	gpio-keys {
 		compatible = "gpio-keys";
-		pinctrl-names = "default";
-		pinctrl-0 = <&power_key_irq &lid_irq>;
-
-		power {
-			label = "Power";
-			gpios = <&gpx1 3 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_POWER>;
-			gpio-key,wakeup;
-		};
 
 		lid-switch {
 			label = "Lid";
-			gpios = <&gpx3 5 GPIO_ACTIVE_LOW>;
+			gpios = <&gpx3 5 1>;
 			linux,input-type = <5>; /* EV_SW */
 			linux,code = <0>; /* SW_LID */
 			debounce-interval = <1>;
@@ -53,12 +48,6 @@
 		};
 	};
 
-	vbat: vbat-fixed-regulator {
-		compatible = "regulator-fixed";
-		regulator-name = "vbat-supply";
-		regulator-boot-on;
-	};
-
 	i2c-arbitrator {
 		compatible = "i2c-arb-gpio-challenge";
 		#address-cells = <1>;
@@ -66,15 +55,12 @@
 
 		i2c-parent = <&{/i2c@12CA0000}>;
 
-		our-claim-gpio = <&gpf0 3 GPIO_ACTIVE_LOW>;
-		their-claim-gpios = <&gpe0 4 GPIO_ACTIVE_LOW>;
+		our-claim-gpio = <&gpf0 3 1>;
+		their-claim-gpios = <&gpe0 4 1>;
 		slew-delay-us = <10>;
 		wait-retry-us = <3000>;
 		wait-free-us = <50000>;
 
-		pinctrl-names = "default";
-		pinctrl-0 = <&arb_our_claim &arb_their_claim>;
-
 		/* Use ID 104 as a hint that we're on physical bus 4 */
 		i2c_104: i2c@0 {
 			reg = <0>;
@@ -87,123 +73,117 @@
 				sbs,poll-retry-count = <1>;
 			};
 
-			cros_ec: embedded-controller {
+			ec: embedded-controller {
 				compatible = "google,cros-ec-i2c";
 				reg = <0x1e>;
-				interrupts = <6 IRQ_TYPE_NONE>;
+				interrupts = <6 0>;
 				interrupt-parent = <&gpx1>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&ec_irq>;
 				wakeup-source;
-			};
-
-			power-regulator {
-				compatible = "ti,tps65090";
-				reg = <0x48>;
-
-				/*
-				 * Config irq to disable internal pulls
-				 * even though we run in polling mode.
-				 */
-				pinctrl-names = "default";
-				pinctrl-0 = <&tps65090_irq>;
-
-				vsys1-supply = <&vbat>;
-				vsys2-supply = <&vbat>;
-				vsys3-supply = <&vbat>;
-				infet1-supply = <&vbat>;
-				infet2-supply = <&vbat>;
-				infet3-supply = <&vbat>;
-				infet4-supply = <&vbat>;
-				infet5-supply = <&vbat>;
-				infet6-supply = <&vbat>;
-				infet7-supply = <&vbat>;
-				vsys-l1-supply = <&vbat>;
-				vsys-l2-supply = <&vbat>;
-
-				regulators {
-					dcdc1 {
-						ti,enable-ext-control;
-					};
-					dcdc2 {
-						ti,enable-ext-control;
-					};
-					dcdc3 {
-						ti,enable-ext-control;
-					};
-					fet1: fet1 {
-						regulator-name = "vcd_led";
-						ti,overcurrent-wait = <3>;
-					};
-					tps65090_fet2: fet2 {
-						regulator-name = "video_mid";
-						regulator-always-on;
-						ti,overcurrent-wait = <3>;
-					};
-					fet3 {
-						regulator-name = "wwan_r";
-						regulator-always-on;
-						ti,overcurrent-wait = <3>;
-					};
-					fet4 {
-						regulator-name = "sdcard";
-						ti,overcurrent-wait = <3>;
-					};
-					fet5 {
-						regulator-name = "camout";
-						regulator-always-on;
-						ti,overcurrent-wait = <3>;
-					};
-					fet6: fet6 {
-						regulator-name = "lcd_vdd";
-						ti,overcurrent-wait = <3>;
-					};
-					tps65090_fet7: fet7 {
-						regulator-name = "video_mid_1a";
-						regulator-always-on;
-						ti,overcurrent-wait = <3>;
-					};
-					ldo1 {
-					};
-					ldo2 {
-					};
-				};
 
-				charger {
-					compatible = "ti,tps65090-charger";
+				keyboard-controller {
+				        compatible = "google,cros-ec-keyb";
+				        keypad,num-rows = <8>;
+				        keypad,num-columns = <13>;
+				        google,needs-ghost-filter;
+					linux,keymap = <0x0001003a	/* CAPSLK */
+							0x0002003b	/* F1 */
+							0x00030030	/* B */
+							0x00040044	/* F10 */
+							0x00060031	/* N */
+							0x0008000d	/* = */
+							0x000a0064	/* R_ALT */
+
+							0x01010001	/* ESC */
+							0x0102003e	/* F4 */
+							0x01030022	/* G */
+							0x01040041	/* F7 */
+							0x01060023	/* H */
+							0x01080028	/* ' */
+							0x01090043	/* F9 */
+							0x010b000e	/* BKSPACE */
+
+							0x0200001d	/* L_CTRL */
+							0x0201000f	/* TAB */
+							0x0202003d	/* F3 */
+							0x02030014	/* T */
+							0x02040040	/* F6 */
+							0x0205001b	/* ] */
+							0x02060015	/* Y */
+							0x02070056	/* 102ND */
+							0x0208001a	/* [ */
+							0x02090042	/* F8 */
+
+							0x03010029	/* GRAVE */
+							0x0302003c	/* F2 */
+							0x03030006	/* 5 */
+							0x0304003f	/* F5 */
+							0x03060007	/* 6 */
+							0x0308000c	/* - */
+							0x030b002b	/* \ */
+
+							0x04000061	/* R_CTRL */
+							0x0401001e	/* A */
+							0x04020020	/* D */
+							0x04030021	/* F */
+							0x0404001f	/* S */
+							0x04050025	/* K */
+							0x04060024	/* J */
+							0x04080027	/* ; */
+							0x04090026	/* L */
+							0x040b001c	/* ENTER */
+
+							0x0501002c	/* Z */
+							0x0502002e	/* C */
+							0x0503002f	/* V */
+							0x0504002d	/* X */
+							0x05050033	/* , */
+							0x05060032	/* M */
+							0x0507002a	/* L_SHIFT */
+							0x05080035	/* / */
+							0x05090034	/* . */
+							0x050B0039	/* SPACE */
+
+							0x06010002	/* 1 */
+							0x06020004	/* 3 */
+							0x06030005	/* 4 */
+							0x06040003	/* 2 */
+							0x06050009	/* 8 */
+							0x06060008	/* 7 */
+							0x0608000b	/* 0 */
+							0x0609000a	/* 9 */
+							0x060a0038	/* L_ALT */
+							0x060b006c	/* DOWN */
+							0x060c006a	/* RIGHT */
+
+							0x07010010	/* Q */
+							0x07020012	/* E */
+							0x07030013	/* R */
+							0x07040011	/* W */
+							0x07050017	/* I */
+							0x07060016	/* U */
+							0x07070036	/* R_SHIFT */
+							0x07080019	/* P */
+							0x07090018	/* O */
+							0x070b0067	/* UP */
+							0x070c0069>;	/* LEFT */
 				};
 			};
 		};
 	};
 
-	i2c@12CD0000 {
-		ptn3460: lvds-bridge@20 {
-			compatible = "nxp,ptn3460";
-			reg = <0x20>;
-			powerdown-gpios = <&gpy2 5 GPIO_ACTIVE_HIGH>;
-			reset-gpios = <&gpx1 5 GPIO_ACTIVE_HIGH>;
-			edid-emulation = <5>;
-			panel = <&panel>;
+	/*
+	 * On Snow we've got SIP WiFi and so can keep drive strengths low to
+	 * reduce EMI.
+	 */
+	dwmmc3@12230000 {
+		slot@0 {
+			pinctrl-names = "default";
+			pinctrl-0 = <&sd3_clk &sd3_cmd &sd3_bus4>;
 		};
 	};
 
-	sound {
-		compatible = "google,snow-audio-max98095";
-
-		samsung,model = "Snow-I2S-MAX98095";
-		samsung,i2s-controller = <&i2s0>;
-		samsung,audio-codec = <&max98095>;
-	};
-
-	usb3_vbus_reg: regulator-usb3 {
-		compatible = "regulator-fixed";
-		regulator-name = "P5.0V_USB3CON";
-		regulator-min-microvolt = <5000000>;
-		regulator-max-microvolt = <5000000>;
-		gpio = <&gpx2 7 GPIO_ACTIVE_HIGH>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&usb3_vbus_en>;
-		enable-active-high;
+	usb@12110000 {
+		samsung,vbus-gpio = <&gpx1 1 0>;
 	};
 
 	fixed-rate-clocks {
@@ -212,440 +192,4 @@
 			clock-frequency = <24000000>;
 		};
 	};
-
-	backlight: backlight {
-		compatible = "pwm-backlight";
-		pwms = <&pwm 0 1000000 0>;
-		brightness-levels = <0 100 500 1000 1500 2000 2500 2800>;
-		default-brightness-level = <7>;
-		enable-gpios = <&gpx3 0 GPIO_ACTIVE_HIGH>;
-		power-supply = <&fet1>;
-		pinctrl-0 = <&pwm0_out>;
-		pinctrl-names = "default";
-	};
-
-	panel: panel {
-		compatible = "auo,b116xw03";
-		power-supply = <&fet6>;
-		backlight = <&backlight>;
-	};
 };
-
-&dp {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&dp_hpd>;
-	samsung,color-space = <0>;
-	samsung,dynamic-range = <0>;
-	samsung,ycbcr-coeff = <0>;
-	samsung,color-depth = <1>;
-	samsung,link-rate = <0x0a>;
-	samsung,lane-count = <2>;
-	samsung,hpd-gpio = <&gpx0 7 GPIO_ACTIVE_HIGH>;
-	bridge = <&ptn3460>;
-};
-
-&ehci {
-	samsung,vbus-gpio = <&gpx1 1 GPIO_ACTIVE_HIGH>;
-};
-
-&fimd {
-	status = "okay";
-	samsung,invert-vclk;
-};
-
-&hdmi {
-	hpd-gpio = <&gpx3 7 GPIO_ACTIVE_HIGH>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&hdmi_hpd_irq>;
-	phy = <&hdmiphy>;
-	ddc = <&i2c_2>;
-	hdmi-en-supply = <&tps65090_fet7>;
-	vdd-supply = <&ldo8_reg>;
-	vdd_osc-supply = <&ldo10_reg>;
-	vdd_pll-supply = <&ldo8_reg>;
-};
-
-&i2c_0 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <378000>;
-
-	max77686: max77686@09 {
-		compatible = "maxim,max77686";
-		interrupt-parent = <&gpx3>;
-		interrupts = <2 IRQ_TYPE_NONE>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&max77686_irq>;
-		wakeup-source;
-		reg = <0x09>;
-		#clock-cells = <1>;
-
-		voltage-regulators {
-			ldo1_reg: LDO1 {
-				regulator-name = "P1.0V_LDO_OUT1";
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <1000000>;
-				regulator-always-on;
-			};
-
-			ldo2_reg: LDO2 {
-				regulator-name = "P1.8V_LDO_OUT2";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-			};
-
-			ldo3_reg: LDO3 {
-				regulator-name = "P1.8V_LDO_OUT3";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-			};
-
-			ldo7_reg: LDO7 {
-				regulator-name = "P1.1V_LDO_OUT7";
-				regulator-min-microvolt = <1100000>;
-				regulator-max-microvolt = <1100000>;
-				regulator-always-on;
-			};
-
-			ldo8_reg: LDO8 {
-				regulator-name = "P1.0V_LDO_OUT8";
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <1000000>;
-				regulator-always-on;
-			};
-
-			ldo10_reg: LDO10 {
-				regulator-name = "P1.8V_LDO_OUT10";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-			};
-
-			ldo12_reg: LDO12 {
-				regulator-name = "P3.0V_LDO_OUT12";
-				regulator-min-microvolt = <3000000>;
-				regulator-max-microvolt = <3000000>;
-				regulator-always-on;
-			};
-
-			ldo14_reg: LDO14 {
-				regulator-name = "P1.8V_LDO_OUT14";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-			};
-
-			ldo15_reg: LDO15 {
-				regulator-name = "P1.0V_LDO_OUT15";
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <1000000>;
-				regulator-always-on;
-			};
-
-			ldo16_reg: LDO16 {
-				regulator-name = "P1.8V_LDO_OUT16";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-			};
-
-			buck1_reg: BUCK1 {
-				regulator-name = "vdd_mif";
-				regulator-min-microvolt = <950000>;
-				regulator-max-microvolt = <1300000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-
-			buck2_reg: BUCK2 {
-				regulator-name = "vdd_arm";
-				regulator-min-microvolt = <850000>;
-				regulator-max-microvolt = <1350000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-
-			buck3_reg: BUCK3 {
-				regulator-name = "vdd_int";
-				regulator-min-microvolt = <900000>;
-				regulator-max-microvolt = <1200000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-
-			buck4_reg: BUCK4 {
-				regulator-name = "vdd_g3d";
-				regulator-min-microvolt = <850000>;
-				regulator-max-microvolt = <1300000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-
-			buck5_reg: BUCK5 {
-				regulator-name = "P1.8V_BUCK_OUT5";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-
-			buck6_reg: BUCK6 {
-				regulator-name = "P1.35V_BUCK_OUT6";
-				regulator-min-microvolt = <1350000>;
-				regulator-max-microvolt = <1350000>;
-				regulator-always-on;
-			};
-
-			buck7_reg: BUCK7 {
-				regulator-name = "P2.0V_BUCK_OUT7";
-				regulator-min-microvolt = <2000000>;
-				regulator-max-microvolt = <2000000>;
-				regulator-always-on;
-			};
-
-			buck8_reg: BUCK8 {
-				regulator-name = "P2.85V_BUCK_OUT8";
-				regulator-min-microvolt = <2850000>;
-				regulator-max-microvolt = <2850000>;
-				regulator-always-on;
-			};
-		};
-	};
-};
-
-&i2c_1 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <378000>;
-
-	trackpad {
-		reg = <0x67>;
-		compatible = "cypress,cyapa";
-		interrupts = <2 IRQ_TYPE_NONE>;
-		interrupt-parent = <&gpx1>;
-		wakeup-source;
-	};
-};
-
-/*
- * Disabled pullups since external part has its own pullups and
- * double-pulling gets us out of spec in some cases.
- */
-&i2c2_bus {
-	samsung,pin-pud = <0>;
-};
-
-&i2c_2 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <66000>;
-
-	hdmiddc@50 {
-		compatible = "samsung,exynos4210-hdmiddc";
-		reg = <0x50>;
-	};
-};
-
-&i2c_3 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <66000>;
-};
-
-&i2c_4 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <66000>;
-};
-
-&i2c_5 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <66000>;
-};
-
-&i2c_7 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <66000>;
-
-	max98095: codec@11 {
-		compatible = "maxim,max98095";
-		reg = <0x11>;
-		pinctrl-0 = <&max98095_en>;
-		pinctrl-names = "default";
-	};
-};
-
-&i2c_8 {
-	status = "okay";
-	samsung,i2c-sda-delay = <100>;
-	samsung,i2c-max-bus-freq = <378000>;
-
-	hdmiphy: hdmiphy@38 {
-		compatible = "samsung,exynos4212-hdmiphy";
-		reg = <0x38>;
-	};
-};
-
-&i2s0 {
-	status = "okay";
-};
-
-&mmc_0 {
-	status = "okay";
-	num-slots = <1>;
-	broken-cd;
-	card-detect-delay = <200>;
-	samsung,dw-mshc-ciu-div = <3>;
-	samsung,dw-mshc-sdr-timing = <2 3>;
-	samsung,dw-mshc-ddr-timing = <1 2>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&sd0_clk &sd0_cmd &sd0_cd &sd0_bus4 &sd0_bus8>;
-	bus-width = <8>;
-	cap-mmc-highspeed;
-};
-
-&mmc_2 {
-	status = "okay";
-	num-slots = <1>;
-	card-detect-delay = <200>;
-	samsung,dw-mshc-ciu-div = <3>;
-	samsung,dw-mshc-sdr-timing = <2 3>;
-	samsung,dw-mshc-ddr-timing = <1 2>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&sd2_clk &sd2_cmd &sd2_cd &sd2_bus4>;
-	bus-width = <4>;
-	wp-gpios = <&gpc2 1 GPIO_ACTIVE_HIGH>;
-	cap-sd-highspeed;
-};
-
-/*
- * On Snow we've got SIP WiFi and so can keep drive strengths low to
- * reduce EMI.
- */
-&mmc_3 {
-	status = "okay";
-	num-slots = <1>;
-	broken-cd;
-	card-detect-delay = <200>;
-	samsung,dw-mshc-ciu-div = <3>;
-	samsung,dw-mshc-sdr-timing = <2 3>;
-	samsung,dw-mshc-ddr-timing = <1 2>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&sd3_clk &sd3_cmd &sd3_bus4>;
-	bus-width = <4>;
-	cap-sd-highspeed;
-};
-
-&pinctrl_0 {
-	power_key_irq: power-key-irq {
-		samsung,pins = "gpx1-3";
-		samsung,pin-function = <0xf>;
-		samsung,pin-pud = <0>;
-		samsung,pin-drv = <0>;
-	};
-
-	ec_irq: ec-irq {
-		samsung,pins = "gpx1-6";
-		samsung,pin-function = <0>;
-		samsung,pin-pud = <0>;
-		samsung,pin-drv = <0>;
-	};
-
-	max98095_en: max98095-en {
-		samsung,pins = "gpx1-7";
-		samsung,pin-function = <0>;
-		samsung,pin-pud = <3>;
-		samsung,pin-drv = <0>;
-	};
-
-	tps65090_irq: tps65090-irq {
-		samsung,pins = "gpx2-6";
-		samsung,pin-function = <0>;
-		samsung,pin-pud = <0>;
-		samsung,pin-drv = <0>;
-	};
-
-	usb3_vbus_en: usb3-vbus-en {
-		samsung,pins = "gpx2-7";
-		samsung,pin-function = <1>;
-		samsung,pin-pud = <0>;
-		samsung,pin-drv = <0>;
-	};
-
-	max77686_irq: max77686-irq {
-		samsung,pins = "gpx3-2";
-		samsung,pin-function = <0>;
-		samsung,pin-pud = <0>;
-		samsung,pin-drv = <0>;
-	};
-
-	lid_irq: lid-irq {
-		samsung,pins = "gpx3-5";
-		samsung,pin-function = <0xf>;
-		samsung,pin-pud = <0>;
-		samsung,pin-drv = <0>;
-	};
-
-	hdmi_hpd_irq: hdmi-hpd-irq {
-		samsung,pins = "gpx3-7";
-		samsung,pin-function = <0>;
-		samsung,pin-pud = <1>;
-		samsung,pin-drv = <0>;
-	};
-};
-
-&pinctrl_1 {
-	arb_their_claim: arb-their-claim {
-		samsung,pins = "gpe0-4";
-		samsung,pin-function = <0>;
-		samsung,pin-pud = <3>;
-		samsung,pin-drv = <0>;
-	};
-
-	arb_our_claim: arb-our-claim {
-		samsung,pins = "gpf0-3";
-		samsung,pin-function = <1>;
-		samsung,pin-pud = <0>;
-		samsung,pin-drv = <0>;
-	};
-};
-
-&rtc {
-	status = "okay";
-	clocks = <&clock CLK_RTC>, <&max77686 MAX77686_CLK_AP>;
-	clock-names = "rtc", "rtc_src";
-};
-
-&sd3_bus4 {
-	samsung,pin-drv = <0>;
-};
-
-&sd3_clk {
-	samsung,pin-drv = <0>;
-};
-
-&sd3_cmd {
-	samsung,pin-pud = <3>;
-	samsung,pin-drv = <0>;
-};
-
-&spi_1 {
-	status = "okay";
-	samsung,spi-src-clk = <0>;
-	num-cs = <1>;
-};
-
-&usbdrd_dwc3 {
-	dr_mode = "host";
-};
-
-&usbdrd_phy {
-	vbus-supply = <&usb3_vbus_reg>;
-};
-
-#include "cros-ec-keyboard.dtsi"
diff -urNp a/arch/arm/boot/dts/exynos5250.dtsi b/arch/arm/boot/dts/exynos5250.dtsi
--- a/arch/arm/boot/dts/exynos5250.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos5250.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -17,14 +17,12 @@
  * published by the Free Software Foundation.
 */
 
-#include <dt-bindings/clock/exynos5250.h>
-#include "exynos5.dtsi"
-#include "exynos5250-pinctrl.dtsi"
-#include "exynos4-cpu-thermal.dtsi"
-#include <dt-bindings/clock/exynos-audss-clk.h>
+/include/ "skeleton.dtsi"
+/include/ "exynos5250-pinctrl.dtsi"
 
 / {
-	compatible = "samsung,exynos5250", "samsung,exynos5";
+	compatible = "samsung,exynos5250";
+	interrupt-parent = <&gic>;
 
 	aliases {
 		spi0 = &spi_0;
@@ -34,10 +32,10 @@
 		gsc1 = &gsc_1;
 		gsc2 = &gsc_2;
 		gsc3 = &gsc_3;
-		mshc0 = &mmc_0;
-		mshc1 = &mmc_1;
-		mshc2 = &mmc_2;
-		mshc3 = &mmc_3;
+		mshc0 = &dwmmc_0;
+		mshc1 = &dwmmc_1;
+		mshc2 = &dwmmc_2;
+		mshc3 = &dwmmc_3;
 		i2c0 = &i2c_0;
 		i2c1 = &i2c_1;
 		i2c2 = &i2c_2;
@@ -47,83 +45,42 @@
 		i2c6 = &i2c_6;
 		i2c7 = &i2c_7;
 		i2c8 = &i2c_8;
-		i2c9 = &i2c_9;
 		pinctrl0 = &pinctrl_0;
 		pinctrl1 = &pinctrl_1;
 		pinctrl2 = &pinctrl_2;
 		pinctrl3 = &pinctrl_3;
 	};
 
-	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		cpu0: cpu@0 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a15";
-			reg = <0>;
-			clock-frequency = <1700000000>;
-			cooling-min-level = <15>;
-			cooling-max-level = <9>;
-			#cooling-cells = <2>; /* min followed by max */
-		};
-		cpu@1 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a15";
-			reg = <1>;
-			clock-frequency = <1700000000>;
-		};
+	chipid@10000000 {
+		compatible = "samsung,exynos4210-chipid";
+		reg = <0x10000000 0x100>;
 	};
 
-	sysram@02020000 {
-		compatible = "mmio-sram";
-		reg = <0x02020000 0x30000>;
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges = <0 0x02020000 0x30000>;
-
-		smp-sysram@0 {
-			compatible = "samsung,exynos4210-sysram";
-			reg = <0x0 0x1000>;
-		};
-
-		smp-sysram@2f000 {
-			compatible = "samsung,exynos4210-sysram-ns";
-			reg = <0x2f000 0x1000>;
-		};
-	};
-
-	pd_gsc: gsc-power-domain@10044000 {
+	pd_gsc: gsc-power-domain@0x10044000 {
 		compatible = "samsung,exynos4210-pd";
 		reg = <0x10044000 0x20>;
-		#power-domain-cells = <0>;
 	};
 
-	pd_mfc: mfc-power-domain@10044040 {
+	pd_mfc: mfc-power-domain@0x10044040 {
 		compatible = "samsung,exynos4210-pd";
 		reg = <0x10044040 0x20>;
-		#power-domain-cells = <0>;
-	};
-
-	pd_disp1: disp1-power-domain@100440A0 {
-		compatible = "samsung,exynos4210-pd";
-		reg = <0x100440A0 0x20>;
-		#power-domain-cells = <0>;
 	};
 
-	clock: clock-controller@10010000 {
+	clock: clock-controller@0x10010000 {
 		compatible = "samsung,exynos5250-clock";
 		reg = <0x10010000 0x30000>;
 		#clock-cells = <1>;
 	};
 
-	clock_audss: audss-clock-controller@3810000 {
-		compatible = "samsung,exynos5250-audss-clock";
-		reg = <0x03810000 0x0C>;
-		#clock-cells = <1>;
-		clocks = <&clock CLK_FIN_PLL>, <&clock CLK_FOUT_EPLL>,
-			 <&clock CLK_SCLK_AUDIO0>, <&clock CLK_DIV_PCM0>;
-		clock-names = "pll_ref", "pll_in", "sclk_audio", "sclk_pcm_in";
+	gic:interrupt-controller@10481000 {
+		compatible = "arm,cortex-a15-gic", "arm,cortex-a9-gic";
+		#interrupt-cells = <3>;
+		interrupt-controller;
+		reg = <0x10481000 0x1000>,
+		      <0x10482000 0x1000>,
+		      <0x10484000 0x2000>,
+		      <0x10486000 0x2000>;
+		interrupts = <1 9 0xf04>;
 	};
 
 	timer {
@@ -132,11 +89,22 @@
 			     <1 14 0xf08>,
 			     <1 11 0xf08>,
 			     <1 10 0xf08>;
-		/* Unfortunately we need this since some versions of U-Boot
-		 * on Exynos don't set the CNTFRQ register, so we need the
-		 * value from DT.
-		 */
-		clock-frequency = <24000000>;
+	};
+
+	combiner:interrupt-controller@10440000 {
+		compatible = "samsung,exynos4210-combiner";
+		#interrupt-cells = <2>;
+		interrupt-controller;
+		samsung,combiner-nr = <32>;
+		reg = <0x10440000 0x1000>;
+		interrupts = <0 0 0>, <0 1 0>, <0 2 0>, <0 3 0>,
+			     <0 4 0>, <0 5 0>, <0 6 0>, <0 7 0>,
+			     <0 8 0>, <0 9 0>, <0 10 0>, <0 11 0>,
+			     <0 12 0>, <0 13 0>, <0 14 0>, <0 15 0>,
+			     <0 16 0>, <0 17 0>, <0 18 0>, <0 19 0>,
+			     <0 20 0>, <0 21 0>, <0 22 0>, <0 23 0>,
+			     <0 24 0>, <0 25 0>, <0 26 0>, <0 27 0>,
+			     <0 28 0>, <0 29 0>, <0 30 0>, <0 31 0>;
 	};
 
 	mct@101C0000 {
@@ -147,7 +115,7 @@
 		interrupt-parent = <&mct_map>;
 		interrupts = <0 0>, <1 0>, <2 0>, <3 0>,
 			     <4 0>, <5 0>;
-		clocks = <&clock CLK_FIN_PLL>, <&clock CLK_MCT>;
+		clocks = <&clock 1>, <&clock 335>;
 		clock-names = "fin_pll", "mct";
 
 		mct_map: mct-map {
@@ -199,119 +167,81 @@
 		interrupts = <0 47 0>;
 	};
 
-	pmu_system_controller: system-controller@10040000 {
-		compatible = "samsung,exynos5250-pmu", "syscon";
-		reg = <0x10040000 0x5000>;
-		clock-names = "clkout16";
-		clocks = <&clock CLK_FIN_PLL>;
-		#clock-cells = <1>;
-	};
-
-	sysreg_system_controller: syscon@10050000 {
-		compatible = "samsung,exynos5-sysreg", "syscon";
-		reg = <0x10050000 0x5000>;
-	};
-
-	watchdog@101D0000 {
-		compatible = "samsung,exynos5250-wdt";
+	watchdog {
+		compatible = "samsung,s3c2410-wdt";
 		reg = <0x101D0000 0x100>;
 		interrupts = <0 42 0>;
-		clocks = <&clock CLK_WDT>;
+		clocks = <&clock 336>;
 		clock-names = "watchdog";
-		samsung,syscon-phandle = <&pmu_system_controller>;
 	};
 
-	g2d@10850000 {
-		compatible = "samsung,exynos5250-g2d";
-		reg = <0x10850000 0x1000>;
-		interrupts = <0 91 0>;
-		clocks = <&clock CLK_G2D>;
-		clock-names = "fimg2d";
-	};
-
-	mfc: codec@11000000 {
+	codec@11000000 {
 		compatible = "samsung,mfc-v6";
 		reg = <0x11000000 0x10000>;
 		interrupts = <0 96 0>;
-		power-domains = <&pd_mfc>;
-		clocks = <&clock CLK_MFC>;
-		clock-names = "mfc";
+		samsung,power-domain = <&pd_mfc>;
 	};
 
-	rtc: rtc@101E0000 {
-		clocks = <&clock CLK_RTC>;
+	rtc {
+		compatible = "samsung,s3c6410-rtc";
+		reg = <0x101E0000 0x100>;
+		interrupts = <0 43 0>, <0 44 0>;
+		clocks = <&clock 337>;
 		clock-names = "rtc";
 		status = "disabled";
 	};
 
-	tmu: tmu@10060000 {
+	tmu@10060000 {
 		compatible = "samsung,exynos5250-tmu";
 		reg = <0x10060000 0x100>;
 		interrupts = <0 65 0>;
-		clocks = <&clock CLK_TMU>;
+		clocks = <&clock 338>;
 		clock-names = "tmu_apbif";
-		#include "exynos4412-tmu-sensor-conf.dtsi"
-	};
-
-	thermal-zones {
-		cpu_thermal: cpu-thermal {
-			polling-delay-passive = <0>;
-			polling-delay = <0>;
-			thermal-sensors = <&tmu 0>;
-
-			cooling-maps {
-				map0 {
-				     /* Corresponds to 800MHz at freq_table */
-				     cooling-device = <&cpu0 9 9>;
-				};
-				map1 {
-				     /* Corresponds to 200MHz at freq_table */
-				     cooling-device = <&cpu0 15 15>;
-			       };
-		       };
-		};
 	};
 
 	serial@12C00000 {
-		clocks = <&clock CLK_UART0>, <&clock CLK_SCLK_UART0>;
+		compatible = "samsung,exynos4210-uart";
+		reg = <0x12C00000 0x100>;
+		interrupts = <0 51 0>;
+		clocks = <&clock 289>, <&clock 146>;
 		clock-names = "uart", "clk_uart_baud0";
 	};
 
 	serial@12C10000 {
-		clocks = <&clock CLK_UART1>, <&clock CLK_SCLK_UART1>;
+		compatible = "samsung,exynos4210-uart";
+		reg = <0x12C10000 0x100>;
+		interrupts = <0 52 0>;
+		clocks = <&clock 290>, <&clock 147>;
 		clock-names = "uart", "clk_uart_baud0";
 	};
 
 	serial@12C20000 {
-		clocks = <&clock CLK_UART2>, <&clock CLK_SCLK_UART2>;
+		compatible = "samsung,exynos4210-uart";
+		reg = <0x12C20000 0x100>;
+		interrupts = <0 53 0>;
+		clocks = <&clock 291>, <&clock 148>;
 		clock-names = "uart", "clk_uart_baud0";
 	};
 
 	serial@12C30000 {
-		clocks = <&clock CLK_UART3>, <&clock CLK_SCLK_UART3>;
+		compatible = "samsung,exynos4210-uart";
+		reg = <0x12C30000 0x100>;
+		interrupts = <0 54 0>;
+		clocks = <&clock 292>, <&clock 149>;
 		clock-names = "uart", "clk_uart_baud0";
 	};
 
-	sata: sata@122F0000 {
-		compatible = "snps,dwc-ahci";
-		samsung,sata-freq = <66>;
+	sata@122F0000 {
+		compatible = "samsung,exynos5-sata-ahci";
 		reg = <0x122F0000 0x1ff>;
 		interrupts = <0 115 0>;
-		clocks = <&clock CLK_SATA>, <&clock CLK_SCLK_SATA>;
+		clocks = <&clock 277>, <&clock 143>;
 		clock-names = "sata", "sclk_sata";
-		phys = <&sata_phy>;
-		phy-names = "sata-phy";
-		status = "disabled";
 	};
 
-	sata_phy: sata-phy@12170000 {
-		compatible = "samsung,exynos5250-sata-phy";
+	sata-phy@12170000 {
+		compatible = "samsung,exynos5-sata-phy";
 		reg = <0x12170000 0x1ff>;
-		clocks = <&clock CLK_SATA_PHYCTRL>;
-		clock-names = "sata_phyctrl";
-		#phy-cells = <0>;
-		samsung,syscon-phandle = <&pmu_system_controller>;
-		status = "disabled";
 	};
 
 	i2c_0: i2c@12C60000 {
@@ -320,12 +250,10 @@
 		interrupts = <0 56 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_I2C0>;
+		clocks = <&clock 294>;
 		clock-names = "i2c";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2c0_bus>;
-		samsung,sysreg-phandle = <&sysreg_system_controller>;
-		status = "disabled";
 	};
 
 	i2c_1: i2c@12C70000 {
@@ -334,12 +262,10 @@
 		interrupts = <0 57 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_I2C1>;
+		clocks = <&clock 295>;
 		clock-names = "i2c";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2c1_bus>;
-		samsung,sysreg-phandle = <&sysreg_system_controller>;
-		status = "disabled";
 	};
 
 	i2c_2: i2c@12C80000 {
@@ -348,12 +274,10 @@
 		interrupts = <0 58 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_I2C2>;
+		clocks = <&clock 296>;
 		clock-names = "i2c";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2c2_bus>;
-		samsung,sysreg-phandle = <&sysreg_system_controller>;
-		status = "disabled";
 	};
 
 	i2c_3: i2c@12C90000 {
@@ -362,12 +286,10 @@
 		interrupts = <0 59 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_I2C3>;
+		clocks = <&clock 297>;
 		clock-names = "i2c";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2c3_bus>;
-		samsung,sysreg-phandle = <&sysreg_system_controller>;
-		status = "disabled";
 	};
 
 	i2c_4: i2c@12CA0000 {
@@ -376,11 +298,10 @@
 		interrupts = <0 60 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_I2C4>;
+		clocks = <&clock 298>;
 		clock-names = "i2c";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2c4_bus>;
-		status = "disabled";
 	};
 
 	i2c_5: i2c@12CB0000 {
@@ -389,11 +310,10 @@
 		interrupts = <0 61 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_I2C5>;
+		clocks = <&clock 299>;
 		clock-names = "i2c";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2c5_bus>;
-		status = "disabled";
 	};
 
 	i2c_6: i2c@12CC0000 {
@@ -402,11 +322,10 @@
 		interrupts = <0 62 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_I2C6>;
+		clocks = <&clock 300>;
 		clock-names = "i2c";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2c6_bus>;
-		status = "disabled";
 	};
 
 	i2c_7: i2c@12CD0000 {
@@ -415,11 +334,10 @@
 		interrupts = <0 63 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_I2C7>;
+		clocks = <&clock 301>;
 		clock-names = "i2c";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2c7_bus>;
-		status = "disabled";
 	};
 
 	i2c_8: i2c@12CE0000 {
@@ -428,24 +346,21 @@
 		interrupts = <0 64 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_I2C_HDMI>;
+		clocks = <&clock 302>;
 		clock-names = "i2c";
-		status = "disabled";
 	};
 
-	i2c_9: i2c@121D0000 {
+	i2c@121D0000 {
                 compatible = "samsung,exynos5-sata-phy-i2c";
                 reg = <0x121D0000 0x100>;
                 #address-cells = <1>;
                 #size-cells = <0>;
-		clocks = <&clock CLK_SATA_PHYI2C>;
+		clocks = <&clock 288>;
 		clock-names = "i2c";
-		status = "disabled";
 	};
 
 	spi_0: spi@12d20000 {
 		compatible = "samsung,exynos4210-spi";
-		status = "disabled";
 		reg = <0x12d20000 0x100>;
 		interrupts = <0 66 0>;
 		dmas = <&pdma0 5
@@ -453,7 +368,7 @@
 		dma-names = "tx", "rx";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_SPI0>, <&clock CLK_SCLK_SPI0>;
+		clocks = <&clock 304>, <&clock 154>;
 		clock-names = "spi", "spi_busclk0";
 		pinctrl-names = "default";
 		pinctrl-0 = <&spi0_bus>;
@@ -461,7 +376,6 @@
 
 	spi_1: spi@12d30000 {
 		compatible = "samsung,exynos4210-spi";
-		status = "disabled";
 		reg = <0x12d30000 0x100>;
 		interrupts = <0 67 0>;
 		dmas = <&pdma1 5
@@ -469,7 +383,7 @@
 		dma-names = "tx", "rx";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_SPI1>, <&clock CLK_SCLK_SPI1>;
+		clocks = <&clock 305>, <&clock 155>;
 		clock-names = "spi", "spi_busclk0";
 		pinctrl-names = "default";
 		pinctrl-0 = <&spi1_bus>;
@@ -477,7 +391,6 @@
 
 	spi_2: spi@12d40000 {
 		compatible = "samsung,exynos4210-spi";
-		status = "disabled";
 		reg = <0x12d40000 0x100>;
 		interrupts = <0 68 0>;
 		dmas = <&pdma0 7
@@ -485,176 +398,118 @@
 		dma-names = "tx", "rx";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_SPI2>, <&clock CLK_SCLK_SPI2>;
+		clocks = <&clock 306>, <&clock 156>;
 		clock-names = "spi", "spi_busclk0";
 		pinctrl-names = "default";
 		pinctrl-0 = <&spi2_bus>;
 	};
 
-	mmc_0: mmc@12200000 {
+	dwmmc_0: dwmmc0@12200000 {
 		compatible = "samsung,exynos5250-dw-mshc";
+		reg = <0x12200000 0x1000>;
 		interrupts = <0 75 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		reg = <0x12200000 0x1000>;
-		clocks = <&clock CLK_SDMMC0>, <&clock CLK_SCLK_MMC0>;
+		clocks = <&clock 280>, <&clock 139>;
 		clock-names = "biu", "ciu";
-		fifo-depth = <0x80>;
-		status = "disabled";
 	};
 
-	mmc_1: mmc@12210000 {
+	dwmmc_1: dwmmc1@12210000 {
 		compatible = "samsung,exynos5250-dw-mshc";
+		reg = <0x12210000 0x1000>;
 		interrupts = <0 76 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		reg = <0x12210000 0x1000>;
-		clocks = <&clock CLK_SDMMC1>, <&clock CLK_SCLK_MMC1>;
+		clocks = <&clock 281>, <&clock 140>;
 		clock-names = "biu", "ciu";
-		fifo-depth = <0x80>;
-		status = "disabled";
 	};
 
-	mmc_2: mmc@12220000 {
+	dwmmc_2: dwmmc2@12220000 {
 		compatible = "samsung,exynos5250-dw-mshc";
+		reg = <0x12220000 0x1000>;
 		interrupts = <0 77 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		reg = <0x12220000 0x1000>;
-		clocks = <&clock CLK_SDMMC2>, <&clock CLK_SCLK_MMC2>;
+		clocks = <&clock 282>, <&clock 141>;
 		clock-names = "biu", "ciu";
-		fifo-depth = <0x80>;
-		status = "disabled";
 	};
 
-	mmc_3: mmc@12230000 {
+	dwmmc_3: dwmmc3@12230000 {
 		compatible = "samsung,exynos5250-dw-mshc";
 		reg = <0x12230000 0x1000>;
 		interrupts = <0 78 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_SDMMC3>, <&clock CLK_SCLK_MMC3>;
+		clocks = <&clock 283>, <&clock 142>;
 		clock-names = "biu", "ciu";
-		fifo-depth = <0x80>;
-		status = "disabled";
 	};
 
 	i2s0: i2s@03830000 {
-		compatible = "samsung,s5pv210-i2s";
-		status = "disabled";
+		compatible = "samsung,i2s-v5";
 		reg = <0x03830000 0x100>;
 		dmas = <&pdma0 10
 			&pdma0 9
 			&pdma0 8>;
 		dma-names = "tx", "rx", "tx-sec";
-		clocks = <&clock_audss EXYNOS_I2S_BUS>,
-			<&clock_audss EXYNOS_I2S_BUS>,
-			<&clock_audss EXYNOS_SCLK_I2S>;
-		clock-names = "iis", "i2s_opclk0", "i2s_opclk1";
+		samsung,supports-6ch;
+		samsung,supports-rstclr;
+		samsung,supports-secdai;
 		samsung,idma-addr = <0x03000000>;
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2s0_bus>;
 	};
 
 	i2s1: i2s@12D60000 {
-		compatible = "samsung,s3c6410-i2s";
-		status = "disabled";
+		compatible = "samsung,i2s-v5";
 		reg = <0x12D60000 0x100>;
 		dmas = <&pdma1 12
 			&pdma1 11>;
 		dma-names = "tx", "rx";
-		clocks = <&clock CLK_I2S1>, <&clock CLK_DIV_I2S1>;
-		clock-names = "iis", "i2s_opclk0";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2s1_bus>;
 	};
 
 	i2s2: i2s@12D70000 {
-		compatible = "samsung,s3c6410-i2s";
-		status = "disabled";
+		compatible = "samsung,i2s-v5";
 		reg = <0x12D70000 0x100>;
 		dmas = <&pdma0 12
 			&pdma0 11>;
 		dma-names = "tx", "rx";
-		clocks = <&clock CLK_I2S2>, <&clock CLK_DIV_I2S2>;
-		clock-names = "iis", "i2s_opclk0";
 		pinctrl-names = "default";
 		pinctrl-0 = <&i2s2_bus>;
 	};
 
-	usb@12000000 {
-		compatible = "samsung,exynos5250-dwusb3";
-		clocks = <&clock CLK_USB3>;
-		clock-names = "usbdrd30";
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges;
-
-		usbdrd_dwc3: dwc3 {
-			compatible = "synopsys,dwc3";
-			reg = <0x12000000 0x10000>;
-			interrupts = <0 72 0>;
-			phys = <&usbdrd_phy 0>, <&usbdrd_phy 1>;
-			phy-names = "usb2-phy", "usb3-phy";
-		};
-	};
-
-	usbdrd_phy: phy@12100000 {
-		compatible = "samsung,exynos5250-usbdrd-phy";
-		reg = <0x12100000 0x100>;
-		clocks = <&clock CLK_USB3>, <&clock CLK_FIN_PLL>;
-		clock-names = "phy", "ref";
-		samsung,pmu-syscon = <&pmu_system_controller>;
-		#phy-cells = <1>;
-	};
-
-	ehci: usb@12110000 {
+	usb@12110000 {
 		compatible = "samsung,exynos4210-ehci";
 		reg = <0x12110000 0x100>;
 		interrupts = <0 71 0>;
 
-		clocks = <&clock CLK_USB2>;
+		clocks = <&clock 285>;
 		clock-names = "usbhost";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		port@0 {
-			reg = <0>;
-			phys = <&usb2_phy_gen 1>;
-		};
 	};
 
-	ohci: usb@12120000 {
+	usb@12120000 {
 		compatible = "samsung,exynos4210-ohci";
 		reg = <0x12120000 0x100>;
 		interrupts = <0 71 0>;
 
-		clocks = <&clock CLK_USB2>;
+		clocks = <&clock 285>;
 		clock-names = "usbhost";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		port@0 {
-			reg = <0>;
-			phys = <&usb2_phy_gen 1>;
-		};
 	};
 
-	usb2_phy_gen: phy@12130000 {
-		compatible = "samsung,exynos5250-usb2-phy";
+	usbphy@12130000 {
+		compatible = "samsung,exynos5250-usb2phy";
 		reg = <0x12130000 0x100>;
-		clocks = <&clock CLK_USB2>, <&clock CLK_FIN_PLL>;
-		clock-names = "phy", "ref";
-		#phy-cells = <1>;
-		samsung,sysreg-phandle = <&sysreg_system_controller>;
-		samsung,pmureg-phandle = <&pmu_system_controller>;
-	};
+		clocks = <&clock 1>, <&clock 285>;
+		clock-names = "ext_xtal", "usbhost";
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges;
 
-	pwm: pwm@12dd0000 {
-		compatible = "samsung,exynos4210-pwm";
-		reg = <0x12dd0000 0x100>;
-		samsung,pwm-outputs = <0>, <1>, <2>, <3>;
-		#pwm-cells = <3>;
-		clocks = <&clock CLK_PWM>;
-		clock-names = "timers";
+		usbphy-sys {
+			reg = <0x10040704 0x8>,
+			      <0x10050230 0x4>;
+		};
 	};
 
 	amba {
@@ -668,7 +523,7 @@
 			compatible = "arm,pl330", "arm,primecell";
 			reg = <0x121A0000 0x1000>;
 			interrupts = <0 34 0>;
-			clocks = <&clock CLK_PDMA0>;
+			clocks = <&clock 275>;
 			clock-names = "apb_pclk";
 			#dma-cells = <1>;
 			#dma-channels = <8>;
@@ -679,7 +534,7 @@
 			compatible = "arm,pl330", "arm,primecell";
 			reg = <0x121B0000 0x1000>;
 			interrupts = <0 35 0>;
-			clocks = <&clock CLK_PDMA1>;
+			clocks = <&clock 276>;
 			clock-names = "apb_pclk";
 			#dma-cells = <1>;
 			#dma-channels = <8>;
@@ -690,7 +545,7 @@
 			compatible = "arm,pl330", "arm,primecell";
 			reg = <0x10800000 0x1000>;
 			interrupts = <0 33 0>;
-			clocks = <&clock CLK_MDMA0>;
+			clocks = <&clock 346>;
 			clock-names = "apb_pclk";
 			#dma-cells = <1>;
 			#dma-channels = <8>;
@@ -701,7 +556,7 @@
 			compatible = "arm,pl330", "arm,primecell";
 			reg = <0x11C10000 0x1000>;
 			interrupts = <0 124 0>;
-			clocks = <&clock CLK_MDMA1>;
+			clocks = <&clock 271>;
 			clock-names = "apb_pclk";
 			#dma-cells = <1>;
 			#dma-channels = <8>;
@@ -709,102 +564,79 @@
 		};
 	};
 
-	gsc_0:  gsc@13e00000 {
+	gsc_0:  gsc@0x13e00000 {
 		compatible = "samsung,exynos5-gsc";
 		reg = <0x13e00000 0x1000>;
 		interrupts = <0 85 0>;
-		power-domains = <&pd_gsc>;
-		clocks = <&clock CLK_GSCL0>;
+		samsung,power-domain = <&pd_gsc>;
+		clocks = <&clock 256>;
 		clock-names = "gscl";
 	};
 
-	gsc_1:  gsc@13e10000 {
+	gsc_1:  gsc@0x13e10000 {
 		compatible = "samsung,exynos5-gsc";
 		reg = <0x13e10000 0x1000>;
 		interrupts = <0 86 0>;
-		power-domains = <&pd_gsc>;
-		clocks = <&clock CLK_GSCL1>;
+		samsung,power-domain = <&pd_gsc>;
+		clocks = <&clock 257>;
 		clock-names = "gscl";
 	};
 
-	gsc_2:  gsc@13e20000 {
+	gsc_2:  gsc@0x13e20000 {
 		compatible = "samsung,exynos5-gsc";
 		reg = <0x13e20000 0x1000>;
 		interrupts = <0 87 0>;
-		power-domains = <&pd_gsc>;
-		clocks = <&clock CLK_GSCL2>;
+		samsung,power-domain = <&pd_gsc>;
+		clocks = <&clock 258>;
 		clock-names = "gscl";
 	};
 
-	gsc_3:  gsc@13e30000 {
+	gsc_3:  gsc@0x13e30000 {
 		compatible = "samsung,exynos5-gsc";
 		reg = <0x13e30000 0x1000>;
 		interrupts = <0 88 0>;
-		power-domains = <&pd_gsc>;
-		clocks = <&clock CLK_GSCL3>;
+		samsung,power-domain = <&pd_gsc>;
+		clocks = <&clock 259>;
 		clock-names = "gscl";
 	};
 
-	hdmi: hdmi {
-		compatible = "samsung,exynos4212-hdmi";
+	hdmi {
+		compatible = "samsung,exynos5-hdmi";
 		reg = <0x14530000 0x70000>;
-		power-domains = <&pd_disp1>;
 		interrupts = <0 95 0>;
-		clocks = <&clock CLK_HDMI>, <&clock CLK_SCLK_HDMI>,
-			 <&clock CLK_SCLK_PIXEL>, <&clock CLK_SCLK_HDMIPHY>,
-			 <&clock CLK_MOUT_HDMI>;
+		clocks = <&clock 333>, <&clock 136>, <&clock 137>,
+				<&clock 333>, <&clock 333>;
 		clock-names = "hdmi", "sclk_hdmi", "sclk_pixel",
-				"sclk_hdmiphy", "mout_hdmi";
-		samsung,syscon-phandle = <&pmu_system_controller>;
+				"sclk_hdmiphy", "hdmiphy";
 	};
 
 	mixer {
-		compatible = "samsung,exynos5250-mixer";
+		compatible = "samsung,exynos5-mixer";
 		reg = <0x14450000 0x10000>;
-		power-domains = <&pd_disp1>;
 		interrupts = <0 94 0>;
-		clocks = <&clock CLK_MIXER>, <&clock CLK_HDMI>,
-			 <&clock CLK_SCLK_HDMI>;
-		clock-names = "mixer", "hdmi", "sclk_hdmi";
 	};
 
-	dp_phy: video-phy@10040720 {
-		compatible = "samsung,exynos5250-dp-video-phy";
-		samsung,pmu-syscon = <&pmu_system_controller>;
-		#phy-cells = <0>;
-	};
+	dp-controller {
+		compatible = "samsung,exynos5-dp";
+		reg = <0x145b0000 0x1000>;
+		interrupts = <10 3>;
+		interrupt-parent = <&combiner>;
+		#address-cells = <1>;
+		#size-cells = <0>;
 
-	dp: dp-controller@145B0000 {
-		power-domains = <&pd_disp1>;
-		clocks = <&clock CLK_DP>;
-		clock-names = "dp";
-		phys = <&dp_phy>;
-		phy-names = "dp";
+		dptx-phy {
+			reg = <0x10040720>;
+			samsung,enable-mask = <1>;
+		};
 	};
 
-	fimd: fimd@14400000 {
-		power-domains = <&pd_disp1>;
-		clocks = <&clock CLK_SCLK_FIMD1>, <&clock CLK_FIMD1>;
+	fimd {
+		compatible = "samsung,exynos5250-fimd";
+		interrupt-parent = <&combiner>;
+		reg = <0x14400000 0x40000>;
+		interrupt-names = "fifo", "vsync", "lcd_sys";
+		interrupts = <18 4>, <18 5>, <18 6>;
+		clocks = <&clock 133>, <&clock 339>;
 		clock-names = "sclk_fimd", "fimd";
 	};
-
-	adc: adc@12D10000 {
-		compatible = "samsung,exynos-adc-v1";
-		reg = <0x12D10000 0x100>;
-		interrupts = <0 106 0>;
-		clocks = <&clock CLK_ADC>;
-		clock-names = "adc";
-		#io-channel-cells = <1>;
-		io-channel-ranges;
-		samsung,syscon-phandle = <&pmu_system_controller>;
-		status = "disabled";
-	};
-
-	sss@10830000 {
-		compatible = "samsung,exynos4210-secss";
-		reg = <0x10830000 0x10000>;
-		interrupts = <0 112 0>;
-		clocks = <&clock CLK_SSS>;
-		clock-names = "secss";
-	};
 };
diff -urNp a/arch/arm/boot/dts/exynos5440-sd5v1.dts b/arch/arm/boot/dts/exynos5440-sd5v1.dts
--- a/arch/arm/boot/dts/exynos5440-sd5v1.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos5440-sd5v1.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,14 +10,14 @@
 */
 
 /dts-v1/;
-#include "exynos5440.dtsi"
+/include/ "exynos5440.dtsi"
 
 / {
 	model = "SAMSUNG SD5v1 board based on EXYNOS5440";
-	compatible = "samsung,sd5v1", "samsung,exynos5440", "samsung,exynos5";
+	compatible = "samsung,sd5v1", "samsung,exynos5440";
 
 	chosen {
-		bootargs = "root=/dev/sda2 rw rootwait ignore_loglevel earlyprintk no_console_suspend mem=2048M@0x80000000 mem=6144M@0x100000000 console=ttySAC0,115200";
+		bootargs = "root=/dev/sda2 rw rootwait ignore_loglevel early_printk no_console_suspend mem=2048M@0x80000000 console=ttySAC0,115200";
 	};
 
 	fixed-rate-clocks {
diff -urNp a/arch/arm/boot/dts/exynos5440-ssdk5440.dts b/arch/arm/boot/dts/exynos5440-ssdk5440.dts
--- a/arch/arm/boot/dts/exynos5440-ssdk5440.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos5440-ssdk5440.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,53 +10,18 @@
 */
 
 /dts-v1/;
-#include "exynos5440.dtsi"
+/include/ "exynos5440.dtsi"
 
 / {
 	model = "SAMSUNG SSDK5440 board based on EXYNOS5440";
-	compatible = "samsung,ssdk5440", "samsung,exynos5440", "samsung,exynos5";
+	compatible = "samsung,ssdk5440", "samsung,exynos5440";
 
 	chosen {
-		bootargs = "root=/dev/sda2 rw rootwait ignore_loglevel earlyprintk no_console_suspend mem=2048M@0x80000000 mem=6144M@0x100000000 console=ttySAC0,115200";
+		bootargs = "root=/dev/sda2 rw rootwait ignore_loglevel early_printk no_console_suspend mem=2048M@0x80000000 console=ttySAC0,115200";
 	};
 
-	spi_0: spi@D0000 {
-
-		flash: w25q128@0 {
-			#address-cells = <1>;
-			#size-cells = <1>;
-			compatible = "winbond,w25q128";
-			spi-max-frequency = <15625000>;
-			reg = <0>;
-			controller-data {
-				samsung,spi-feedback-delay = <0>;
-			};
-
-			partition@00000 {
-				label = "BootLoader";
-				reg = <0x60000 0x80000>;
-				read-only;
-			};
-
-			partition@e0000 {
-				label = "Recovery-Kernel";
-				reg = <0xe0000 0x300000>;
-				read-only;
-			};
-
-			partition@3e0000 {
-				label = "CRAM-FS";
-				reg = <0x3e0000 0x700000>;
-				read-only;
-			};
-
-			partition@ae0000 {
-				label = "User-Data";
-				reg = <0xae0000 0x520000>;
-			};
-
-		};
-
+	spi {
+		status = "disabled";
 	};
 
 	fixed-rate-clocks {
@@ -65,14 +30,4 @@
 			clock-frequency = <50000000>;
 		};
 	};
-
-	pcie@290000 {
-		reset-gpio = <&pin_ctrl 5 0>;
-		status = "okay";
-	};
-
-	pcie@2a0000 {
-		reset-gpio = <&pin_ctrl 22 0>;
-		status = "okay";
-	};
 };
diff -urNp a/arch/arm/boot/dts/exynos5440.dtsi b/arch/arm/boot/dts/exynos5440.dtsi
--- a/arch/arm/boot/dts/exynos5440.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/exynos5440.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -9,30 +9,20 @@
  * published by the Free Software Foundation.
 */
 
-#include <dt-bindings/clock/exynos5440.h>
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
-	compatible = "samsung,exynos5440", "samsung,exynos5";
+	compatible = "samsung,exynos5440";
 
 	interrupt-parent = <&gic>;
 
-	aliases {
-		serial0 = &serial_0;
-		serial1 = &serial_1;
-		spi0 = &spi_0;
-		tmuctrl0 = &tmuctrl_0;
-		tmuctrl1 = &tmuctrl_1;
-		tmuctrl2 = &tmuctrl_2;
-	};
-
-	clock: clock-controller@160000 {
+	clock: clock-controller@0x160000 {
 		compatible = "samsung,exynos5440-clock";
 		reg = <0x160000 0x1000>;
 		#clock-cells = <1>;
 	};
 
-	gic: interrupt-controller@2E0000 {
+	gic:interrupt-controller@2E0000 {
 		compatible = "arm,cortex-a15-gic";
 		#interrupt-cells = <3>;
 		interrupt-controller;
@@ -48,22 +38,18 @@
 		#size-cells = <0>;
 
 		cpu@0 {
-			device_type = "cpu";
 			compatible = "arm,cortex-a15";
 			reg = <0>;
 		};
 		cpu@1 {
-			device_type = "cpu";
 			compatible = "arm,cortex-a15";
 			reg = <1>;
 		};
 		cpu@2 {
-			device_type = "cpu";
 			compatible = "arm,cortex-a15";
 			reg = <2>;
 		};
 		cpu@3 {
-			device_type = "cpu";
 			compatible = "arm,cortex-a15";
 			reg = <3>;
 		};
@@ -93,46 +79,41 @@
 		interrupts = <0 57 0>;
 		operating-points = <
 				/* KHz	  uV */
-				1500000 1100000
-				1400000 1075000
-				1300000 1050000
 				1200000 1025000
-				1100000 1000000
 				1000000 975000
-				900000  950000
 				800000  925000
 		>;
 	};
 
-	serial_0: serial@B0000 {
+	serial@B0000 {
 		compatible = "samsung,exynos4210-uart";
 		reg = <0xB0000 0x1000>;
 		interrupts = <0 2 0>;
-		clocks = <&clock CLK_B_125>, <&clock CLK_B_125>;
+		clocks = <&clock 21>, <&clock 21>;
 		clock-names = "uart", "clk_uart_baud0";
 	};
 
-	serial_1: serial@C0000 {
+	serial@C0000 {
 		compatible = "samsung,exynos4210-uart";
 		reg = <0xC0000 0x1000>;
 		interrupts = <0 3 0>;
-		clocks = <&clock CLK_B_125>, <&clock CLK_B_125>;
+		clocks = <&clock 21>, <&clock 21>;
 		clock-names = "uart", "clk_uart_baud0";
 	};
 
-	spi_0: spi@D0000 {
-		compatible = "samsung,exynos5440-spi";
-		reg = <0xD0000 0x100>;
+	spi {
+		compatible = "samsung,exynos4210-spi";
+		reg = <0xD0000 0x1000>;
 		interrupts = <0 4 0>;
+		tx-dma-channel = <&pdma0 5>; /* preliminary */
+		rx-dma-channel = <&pdma0 4>; /* preliminary */
 		#address-cells = <1>;
 		#size-cells = <0>;
-		samsung,spi-src-clk = <0>;
-		num-cs = <1>;
-		clocks = <&clock CLK_B_125>, <&clock CLK_SPI_BAUD>;
+		clocks = <&clock 21>, <&clock 16>;
 		clock-names = "spi", "spi_busclk0";
 	};
 
-	pin_ctrl: pinctrl {
+	pinctrl {
 		compatible = "samsung,exynos5440-pinctrl";
 		reg = <0xE0000 0x1000>;
 		interrupts = <0 37 0>, <0 38 0>, <0 39 0>, <0 40 0>,
@@ -164,7 +145,7 @@
 		interrupts = <0 5 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_B_125>;
+		clocks = <&clock 21>;
 		clock-names = "i2c";
 	};
 
@@ -174,15 +155,15 @@
 		interrupts = <0 6 0>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&clock CLK_B_125>;
+		clocks = <&clock 21>;
 		clock-names = "i2c";
 	};
 
-	watchdog@110000 {
+	watchdog {
 		compatible = "samsung,s3c2410-wdt";
 		reg = <0x110000 0x1000>;
 		interrupts = <0 1 0>;
-		clocks = <&clock CLK_B_125>;
+		clocks = <&clock 21>;
 		clock-names = "watchdog";
 	};
 
@@ -193,7 +174,7 @@
 		interrupts = <0 31 4>;
 		interrupt-names = "macirq";
 		phy-mode = "sgmii";
-		clocks = <&clock CLK_GMAC0>;
+		clocks = <&clock 25>;
 		clock-names = "stmmaceth";
 	};
 
@@ -203,121 +184,36 @@
 		compatible = "arm,amba-bus";
 		interrupt-parent = <&gic>;
 		ranges;
+
+		pdma0: pdma@00121000 {
+			compatible = "arm,pl330", "arm,primecell";
+			reg = <0x121000 0x1000>;
+			interrupts = <0 46 0>;
+			clocks = <&clock 8>;
+			clock-names = "apb_pclk";
+			#dma-cells = <1>;
+			#dma-channels = <8>;
+			#dma-requests = <32>;
+		};
+
+		pdma1: pdma@00120000 {
+			compatible = "arm,pl330", "arm,primecell";
+			reg = <0x120000 0x1000>;
+			interrupts = <0 47 0>;
+			clocks = <&clock 8>;
+			clock-names = "apb_pclk";
+			#dma-cells = <1>;
+			#dma-channels = <8>;
+			#dma-requests = <32>;
+		};
 	};
 
 	rtc {
 		compatible = "samsung,s3c6410-rtc";
 		reg = <0x130000 0x1000>;
 		interrupts = <0 17 0>, <0 16 0>;
-		clocks = <&clock CLK_B_125>;
+		clocks = <&clock 21>;
 		clock-names = "rtc";
-	};
-
-	tmuctrl_0: tmuctrl@160118 {
-		compatible = "samsung,exynos5440-tmu";
-		reg = <0x160118 0x230>, <0x160368 0x10>;
-		interrupts = <0 58 0>;
-		clocks = <&clock CLK_B_125>;
-		clock-names = "tmu_apbif";
-		#include "exynos5440-tmu-sensor-conf.dtsi"
-	};
-
-	tmuctrl_1: tmuctrl@16011C {
-		compatible = "samsung,exynos5440-tmu";
-		reg = <0x16011C 0x230>, <0x160368 0x10>;
-		interrupts = <0 58 0>;
-		clocks = <&clock CLK_B_125>;
-		clock-names = "tmu_apbif";
-		#include "exynos5440-tmu-sensor-conf.dtsi"
-	};
-
-	tmuctrl_2: tmuctrl@160120 {
-		compatible = "samsung,exynos5440-tmu";
-		reg = <0x160120 0x230>, <0x160368 0x10>;
-		interrupts = <0 58 0>;
-		clocks = <&clock CLK_B_125>;
-		clock-names = "tmu_apbif";
-		#include "exynos5440-tmu-sensor-conf.dtsi"
-	};
-
-	thermal-zones {
-		cpu0_thermal: cpu0-thermal {
-			thermal-sensors = <&tmuctrl_0>;
-			#include "exynos5440-trip-points.dtsi"
-		};
-		cpu1_thermal: cpu1-thermal {
-		       thermal-sensors = <&tmuctrl_1>;
-		       #include "exynos5440-trip-points.dtsi"
-		};
-		cpu2_thermal: cpu2-thermal {
-		       thermal-sensors = <&tmuctrl_2>;
-		       #include "exynos5440-trip-points.dtsi"
-		};
-	};
-
-	sata@210000 {
-		compatible = "snps,exynos5440-ahci";
-		reg = <0x210000 0x10000>;
-		interrupts = <0 30 0>;
-		clocks = <&clock CLK_SATA>;
-		clock-names = "sata";
-	};
-
-	ohci@220000 {
-		compatible = "samsung,exynos5440-ohci";
-		reg = <0x220000 0x1000>;
-		interrupts = <0 29 0>;
-		clocks = <&clock CLK_USB>;
-		clock-names = "usbhost";
-	};
-
-	ehci@221000 {
-		compatible = "samsung,exynos5440-ehci";
-		reg = <0x221000 0x1000>;
-		interrupts = <0 29 0>;
-		clocks = <&clock CLK_USB>;
-		clock-names = "usbhost";
-	};
-
-	pcie@290000 {
-		compatible = "samsung,exynos5440-pcie", "snps,dw-pcie";
-		reg = <0x290000 0x1000
-			0x270000 0x1000
-			0x271000 0x40>;
-		interrupts = <0 20 0>, <0 21 0>, <0 22 0>;
-		clocks = <&clock CLK_PR0_250_O>, <&clock CLK_PB0_250_O>;
-		clock-names = "pcie", "pcie_bus";
-		#address-cells = <3>;
-		#size-cells = <2>;
-		device_type = "pci";
-		ranges = <0x00000800 0 0x40000000 0x40000000 0 0x00001000   /* configuration space */
-			  0x81000000 0 0	  0x40001000 0 0x00010000   /* downstream I/O */
-			  0x82000000 0 0x40011000 0x40011000 0 0x1ffef000>; /* non-prefetchable memory */
-		#interrupt-cells = <1>;
-		interrupt-map-mask = <0 0 0 0>;
-		interrupt-map = <0x0 0 &gic 53>;
-		num-lanes = <4>;
-		status = "disabled";
-	};
-
-	pcie@2a0000 {
-		compatible = "samsung,exynos5440-pcie", "snps,dw-pcie";
-		reg = <0x2a0000 0x1000
-			0x272000 0x1000
-			0x271040 0x40>;
-		interrupts = <0 23 0>, <0 24 0>, <0 25 0>;
-		clocks = <&clock CLK_PR1_250_O>, <&clock CLK_PB0_250_O>;
-		clock-names = "pcie", "pcie_bus";
-		#address-cells = <3>;
-		#size-cells = <2>;
-		device_type = "pci";
-		ranges = <0x00000800 0 0x60000000 0x60000000 0 0x00001000   /* configuration space */
-			  0x81000000 0 0	  0x60001000 0 0x00010000   /* downstream I/O */
-			  0x82000000 0 0x60011000 0x60011000 0 0x1ffef000>; /* non-prefetchable memory */
-		#interrupt-cells = <1>;
-		interrupt-map-mask = <0 0 0 0>;
-		interrupt-map = <0x0 0 &gic 56>;
-		num-lanes = <4>;
 		status = "disabled";
 	};
 };
diff -urNp a/arch/arm/boot/dts/ge863-pro3.dtsi b/arch/arm/boot/dts/ge863-pro3.dtsi
--- a/arch/arm/boot/dts/ge863-pro3.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/ge863-pro3.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -7,7 +7,7 @@
  * Licensed under GPLv2 or later.
  */
 
-#include "at91sam9260.dtsi"
+/include/ "at91sam9260.dtsi"
 
 / {
 	clocks {
@@ -19,10 +19,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <6000000>;
 		};
-
-		main_xtal {
-			clock-frequency = <6000000>;
-		};
 	};
 
 	ahb {
diff -urNp a/arch/arm/boot/dts/highbank.dts b/arch/arm/boot/dts/highbank.dts
--- a/arch/arm/boot/dts/highbank.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/highbank.dts	2015-10-27 00:45:05.000000000 +0000
@@ -86,12 +86,6 @@
 	soc {
 		ranges = <0x00000000 0x00000000 0xffffffff>;
 
-		memory-controller@fff00000 {
-			compatible = "calxeda,hb-ddr-ctrl";
-			reg = <0xfff00000 0x1000>;
-			interrupts = <0 91 4>;
-		};
-
 		timer@fff10600 {
 			compatible = "arm,cortex-a9-twd-timer";
 			reg = <0xfff10600 0x20>;
diff -urNp a/arch/arm/boot/dts/href.dtsi b/arch/arm/boot/dts/href.dtsi
--- a/arch/arm/boot/dts/href.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/href.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,274 @@
+/*
+ * Copyright 2012 ST-Ericsson AB
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/include/ "dbx5x0.dtsi"
+
+/ {
+	memory {
+		reg = <0x00000000 0x20000000>;
+	};
+
+	gpio_keys {
+		compatible = "gpio-keys";
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		button@1 {
+			linux,code = <11>;
+			label = "SFH7741 Proximity Sensor";
+		};
+	};
+
+	soc-u9500 {
+		uart@80120000 {
+			status = "okay";
+		};
+
+		uart@80121000 {
+			status = "okay";
+		};
+
+		uart@80007000 {
+			status = "okay";
+		};
+
+		i2c@80004000 {
+			tc3589x@42 {
+				compatible = "tc3589x";
+				reg = <0x42>;
+				interrupt-parent = <&gpio6>;
+				interrupts = <25 0x1>;
+
+				interrupt-controller;
+				#interrupt-cells = <2>;
+
+				tc3589x_gpio: tc3589x_gpio {
+					compatible = "tc3589x-gpio";
+					interrupts = <0 0x1>;
+
+					interrupt-controller;
+					#interrupt-cells = <2>;
+					gpio-controller;
+					#gpio-cells = <2>;
+				};
+			};
+		};
+
+		i2c@80128000 {
+			lp5521@0x33 {
+				compatible = "lp5521";
+				reg = <0x33>;
+			};
+
+			lp5521@0x34 {
+				compatible = "lp5521";
+				reg = <0x34>;
+			};
+
+			bh1780@0x29 {
+				compatible = "rohm,bh1780gli";
+				reg = <0x33>;
+			};
+		};
+
+		// External Micro SD slot
+		sdi0_per1@80126000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <50000000>;
+			bus-width = <4>;
+			mmc-cap-sd-highspeed;
+			mmc-cap-mmc-highspeed;
+			vmmc-supply = <&ab8500_ldo_aux3_reg>;
+			vqmmc-supply = <&vmmci>;
+
+			cd-gpios  = <&tc3589x_gpio 3 0x4>;
+
+			status = "okay";
+		};
+
+		// WLAN SDIO channel
+		sdi1_per2@80118000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <50000000>;
+			bus-width = <4>;
+
+			status = "okay";
+		};
+
+		// PoP:ed eMMC
+		sdi2_per3@80005000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <50000000>;
+			bus-width = <8>;
+			mmc-cap-mmc-highspeed;
+
+			status = "okay";
+		};
+
+		// On-board eMMC
+		sdi4_per2@80114000 {
+			arm,primecell-periphid = <0x10480180>;
+		        max-frequency = <50000000>;
+			bus-width = <8>;
+			mmc-cap-mmc-highspeed;
+			vmmc-supply = <&ab8500_ldo_aux2_reg>;
+
+			status = "okay";
+		};
+
+		sound {
+			compatible = "stericsson,snd-soc-mop500";
+
+			stericsson,cpu-dai = <&msp1 &msp3>;
+			stericsson,audio-codec = <&codec>;
+		};
+
+		msp1: msp@80124000 {
+			status = "okay";
+		};
+
+		msp3: msp@80125000 {
+			status = "okay";
+		};
+
+		prcmu@80157000 {
+			db8500-prcmu-regulators {
+				db8500_vape_reg: db8500_vape {
+					regulator-name = "db8500-vape";
+				};
+
+				db8500_varm_reg: db8500_varm {
+					regulator-name = "db8500-varm";
+				};
+
+				db8500_vmodem_reg: db8500_vmodem {
+					regulator-name = "db8500-vmodem";
+				};
+
+				db8500_vpll_reg: db8500_vpll {
+					regulator-name = "db8500-vpll";
+				};
+
+				db8500_vsmps1_reg: db8500_vsmps1 {
+					regulator-name = "db8500-vsmps1";
+				};
+
+				db8500_vsmps2_reg: db8500_vsmps2 {
+					regulator-name = "db8500-vsmps2";
+				};
+
+				db8500_vsmps3_reg: db8500_vsmps3 {
+					regulator-name = "db8500-vsmps3";
+				};
+
+				db8500_vrf1_reg: db8500_vrf1 {
+					regulator-name = "db8500-vrf1";
+				};
+
+				db8500_sva_mmdsp_reg: db8500_sva_mmdsp {
+					regulator-name = "db8500-sva-mmdsp";
+				};
+
+				db8500_sva_mmdsp_ret_reg: db8500_sva_mmdsp_ret {
+					regulator-name = "db8500-sva-mmdsp-ret";
+				};
+
+				db8500_sva_pipe_reg: db8500_sva_pipe {
+					regulator-name = "db8500_sva_pipe";
+				};
+
+				db8500_sia_mmdsp_reg: db8500_sia_mmdsp {
+					regulator-name = "db8500_sia_mmdsp";
+				};
+
+				db8500_sia_mmdsp_ret_reg: db8500_sia_mmdsp_ret {
+					regulator-name = "db8500-sia-mmdsp-ret";
+				};
+
+				db8500_sia_pipe_reg: db8500_sia_pipe {
+					regulator-name = "db8500-sia-pipe";
+				};
+
+				db8500_sga_reg: db8500_sga {
+					regulator-name = "db8500-sga";
+				};
+
+				db8500_b2r2_mcde_reg: db8500_b2r2_mcde {
+					regulator-name = "db8500-b2r2-mcde";
+				};
+
+				db8500_esram12_reg: db8500_esram12 {
+					regulator-name = "db8500-esram12";
+				};
+
+				db8500_esram12_ret_reg: db8500_esram12_ret {
+					regulator-name = "db8500-esram12-ret";
+				};
+
+				db8500_esram34_reg: db8500_esram34 {
+					regulator-name = "db8500-esram34";
+				};
+
+				db8500_esram34_ret_reg: db8500_esram34_ret {
+					regulator-name = "db8500-esram34-ret";
+				};
+			};
+
+			ab8500 {
+				ab8500-regulators {
+					ab8500_ldo_aux1_reg: ab8500_ldo_aux1 {
+						regulator-name = "V-DISPLAY";
+					};
+
+					ab8500_ldo_aux2_reg: ab8500_ldo_aux2 {
+						regulator-name = "V-eMMC1";
+					};
+
+					ab8500_ldo_aux3_reg: ab8500_ldo_aux3 {
+						regulator-name = "V-MMC-SD";
+					};
+
+					ab8500_ldo_initcore_reg: ab8500_ldo_initcore {
+						regulator-name = "V-INTCORE";
+					};
+
+					ab8500_ldo_tvout_reg: ab8500_ldo_tvout {
+						regulator-name = "V-TVOUT";
+					};
+
+					ab8500_ldo_usb_reg: ab8500_ldo_usb {
+						regulator-name = "dummy";
+					};
+
+					ab8500_ldo_audio_reg: ab8500_ldo_audio {
+						regulator-name = "V-AUD";
+					};
+
+					ab8500_ldo_anamic1_reg: ab8500_ldo_anamic1 {
+						regulator-name = "V-AMIC1";
+					};
+
+					ab8500_ldo_amamic2_reg: ab8500_ldo_amamic2 {
+						regulator-name = "V-AMIC2";
+					};
+
+					ab8500_ldo_dmic_reg: ab8500_ldo_dmic {
+						regulator-name = "V-DMIC";
+					};
+
+					ab8500_ldo_ana_reg: ab8500_ldo_ana {
+						regulator-name = "V-CSI/DSI";
+					};
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/hrefprev60.dts b/arch/arm/boot/dts/hrefprev60.dts
--- a/arch/arm/boot/dts/hrefprev60.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/hrefprev60.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,56 @@
+/*
+ * Copyright 2012 ST-Ericsson AB
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/dts-v1/;
+/include/ "dbx5x0.dtsi"
+/include/ "href.dtsi"
+/include/ "stuib.dtsi"
+
+/ {
+	model = "ST-Ericsson HREF (pre-v60) platform with Device Tree";
+	compatible = "st-ericsson,mop500", "st-ericsson,u8500";
+
+	gpio_keys {
+		button@1 {
+			gpios = <&tc3589x_gpio 7 0x4>;
+		};
+	};
+
+	soc-u9500 {
+		prcmu@80157000 {
+			ab8500@5 {
+				ab8500-gpio {
+					compatible = "stericsson,ab8500-gpio";
+				};
+			};
+		};
+
+		i2c@80004000 {
+			tps61052@33 {
+				compatible = "tps61052";
+				reg = <0x33>;
+			};
+		};
+
+		i2c@80110000 {
+			bu21013_tp@0x5c {
+				reset-gpio = <&tc3589x_gpio 13 0x4>;
+			};
+		};
+
+		vmmci: regulator-gpio {
+			gpios = <&tc3589x_gpio 18 0x4>;
+			enable-gpio = <&tc3589x_gpio 17 0x4>;
+
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/hrefv60plus.dts b/arch/arm/boot/dts/hrefv60plus.dts
--- a/arch/arm/boot/dts/hrefv60plus.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/hrefv60plus.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,210 @@
+/*
+ * Copyright 2012 ST-Ericsson AB
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/dts-v1/;
+/include/ "dbx5x0.dtsi"
+/include/ "href.dtsi"
+/include/ "stuib.dtsi"
+
+/ {
+	model = "ST-Ericsson HREF (v60+) platform with Device Tree";
+	compatible = "st-ericsson,hrefv60+", "st-ericsson,u8500";
+
+	gpio_keys {
+		button@1 {
+			gpios = <&gpio6 25 0x4>;
+		};
+	};
+
+	soc-u9500 {
+		i2c@80110000 {
+			bu21013_tp@0x5c {
+				reset-gpio = <&gpio4 15 0x4>;
+			};
+		};
+
+		// External Micro SD slot
+		sdi0_per1@80126000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <50000000>;
+			bus-width = <4>;
+			mmc-cap-sd-highspeed;
+			mmc-cap-mmc-highspeed;
+			vmmc-supply = <&ab8500_ldo_aux3_reg>;
+
+			cd-gpios  = <&tc3589x_gpio 3 0x4>;
+
+			status = "okay";
+		};
+
+		// WLAN SDIO channel
+		sdi1_per2@80118000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <50000000>;
+			bus-width = <4>;
+
+			status = "okay";
+		};
+
+		// PoP:ed eMMC
+		sdi2_per3@80005000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <50000000>;
+			bus-width = <8>;
+			mmc-cap-mmc-highspeed;
+
+			status = "okay";
+		};
+
+		// On-board eMMC
+		sdi4_per2@80114000 {
+			arm,primecell-periphid = <0x10480180>;
+		        max-frequency = <50000000>;
+			bus-width = <8>;
+			mmc-cap-mmc-highspeed;
+			vmmc-supply = <&ab8500_ldo_aux2_reg>;
+
+			status = "okay";
+		};
+
+		prcmu@80157000 {
+			db8500-prcmu-regulators {
+				db8500_vape_reg: db8500_vape {
+					regulator-name = "db8500-vape";
+				};
+
+				db8500_varm_reg: db8500_varm {
+					regulator-name = "db8500-varm";
+				};
+
+				db8500_vmodem_reg: db8500_vmodem {
+					regulator-name = "db8500-vmodem";
+				};
+
+				db8500_vpll_reg: db8500_vpll {
+					regulator-name = "db8500-vpll";
+				};
+
+				db8500_vsmps1_reg: db8500_vsmps1 {
+					regulator-name = "db8500-vsmps1";
+				};
+
+				db8500_vsmps2_reg: db8500_vsmps2 {
+					regulator-name = "db8500-vsmps2";
+				};
+
+				db8500_vsmps3_reg: db8500_vsmps3 {
+					regulator-name = "db8500-vsmps3";
+				};
+
+				db8500_vrf1_reg: db8500_vrf1 {
+					regulator-name = "db8500-vrf1";
+				};
+
+				db8500_sva_mmdsp_reg: db8500_sva_mmdsp {
+					regulator-name = "db8500-sva-mmdsp";
+				};
+
+				db8500_sva_mmdsp_ret_reg: db8500_sva_mmdsp_ret {
+					regulator-name = "db8500-sva-mmdsp-ret";
+				};
+
+				db8500_sva_pipe_reg: db8500_sva_pipe {
+					regulator-name = "db8500_sva_pipe";
+				};
+
+				db8500_sia_mmdsp_reg: db8500_sia_mmdsp {
+					regulator-name = "db8500_sia_mmdsp";
+				};
+
+				db8500_sia_mmdsp_ret_reg: db8500_sia_mmdsp_ret {
+					regulator-name = "db8500-sia-mmdsp-ret";
+				};
+
+				db8500_sia_pipe_reg: db8500_sia_pipe {
+					regulator-name = "db8500-sia-pipe";
+				};
+
+				db8500_sga_reg: db8500_sga {
+					regulator-name = "db8500-sga";
+				};
+
+				db8500_b2r2_mcde_reg: db8500_b2r2_mcde {
+					regulator-name = "db8500-b2r2-mcde";
+				};
+
+				db8500_esram12_reg: db8500_esram12 {
+					regulator-name = "db8500-esram12";
+				};
+
+				db8500_esram12_ret_reg: db8500_esram12_ret {
+					regulator-name = "db8500-esram12-ret";
+				};
+
+				db8500_esram34_reg: db8500_esram34 {
+					regulator-name = "db8500-esram34";
+				};
+
+				db8500_esram34_ret_reg: db8500_esram34_ret {
+					regulator-name = "db8500-esram34-ret";
+				};
+			};
+
+			ab8500 {
+				ab8500-regulators {
+					ab8500_ldo_aux1_reg: ab8500_ldo_aux1 {
+						regulator-name = "V-DISPLAY";
+					};
+
+					ab8500_ldo_aux2_reg: ab8500_ldo_aux2 {
+						regulator-name = "V-eMMC1";
+					};
+
+					ab8500_ldo_aux3_reg: ab8500_ldo_aux3 {
+						regulator-name = "V-MMC-SD";
+					};
+
+					ab8500_ldo_initcore_reg: ab8500_ldo_initcore {
+						regulator-name = "V-INTCORE";
+					};
+
+					ab8500_ldo_tvout_reg: ab8500_ldo_tvout {
+						regulator-name = "V-TVOUT";
+					};
+
+					ab8500_ldo_usb_reg: ab8500_ldo_usb {
+						regulator-name = "dummy";
+					};
+
+					ab8500_ldo_audio_reg: ab8500_ldo_audio {
+						regulator-name = "V-AUD";
+					};
+
+					ab8500_ldo_anamic1_reg: ab8500_ldo_anamic1 {
+						regulator-name = "V-AMIC1";
+					};
+
+					ab8500_ldo_amamic2_reg: ab8500_ldo_amamic2 {
+						regulator-name = "V-AMIC2";
+					};
+
+					ab8500_ldo_dmic_reg: ab8500_ldo_dmic {
+						regulator-name = "V-DMIC";
+					};
+
+					ab8500_ldo_ana_reg: ab8500_ldo_ana {
+						regulator-name = "V-CSI/DSI";
+					};
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/imx23-evk.dts b/arch/arm/boot/dts/imx23-evk.dts
--- a/arch/arm/boot/dts/imx23-evk.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx23-evk.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,7 +10,7 @@
  */
 
 /dts-v1/;
-#include "imx23.dtsi"
+/include/ "imx23.dtsi"
 
 / {
 	model = "Freescale i.MX23 Evaluation Kit";
@@ -45,14 +45,14 @@
 				hog_pins_a: hog@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_LCD_RESET__GPIO_1_18
-						MX23_PAD_PWM3__GPIO_1_29
-						MX23_PAD_PWM4__GPIO_1_30
-						MX23_PAD_SSP1_DETECT__SSP1_DETECT
+						0x1123 /* MX23_PAD_LCD_RESET__GPIO_1_18 */
+						0x11d3 /* MX23_PAD_PWM3__GPIO_1_29 */
+						0x11e3 /* MX23_PAD_PWM4__GPIO_1_30 */
+						0x2010 /* MX23_PAD_SSP1_DETECT__SSP1_DETECT */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 			};
 
@@ -60,10 +60,10 @@
 				pinctrl-names = "default";
 				pinctrl-0 = <&lcdif_24bit_pins_a>;
 				lcd-supply = <&reg_lcd_3v3>;
-				display = <&display0>;
+				display = <&display>;
 				status = "okay";
 
-				display0: display0 {
+				display: display {
 					bits-per-pixel = <32>;
 					bus-width = <24>;
 
@@ -90,11 +90,6 @@
 		};
 
 		apbx@80040000 {
-			lradc@80050000 {
-				status = "okay";
-				fsl,lradc-touchscreen-wires = <4>;
-			};
-
 			pwm: pwm@80064000 {
 				pinctrl-names = "default";
 				pinctrl-0 = <&pwm2_pins_a>;
@@ -112,36 +107,22 @@
 				pinctrl-0 = <&duart_pins_a>;
 				status = "okay";
 			};
-
-			usbphy0: usbphy@8007c000 {
-				status = "okay";
-			};
-		};
-	};
-
-	ahb@80080000 {
-		usb0: usb@80080000 {
-			status = "okay";
 		};
 	};
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_vddio_sd0: regulator@0 {
+		reg_vddio_sd0: vddio-sd0 {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "vddio-sd0";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			gpio = <&gpio1 29 0>;
 		};
 
-		reg_lcd_3v3: regulator@1 {
+		reg_lcd_3v3: lcd-3v3 {
 			compatible = "regulator-fixed";
-			reg = <1>;
 			regulator-name = "lcd-3v3";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
diff -urNp a/arch/arm/boot/dts/imx23-olinuxino.dts b/arch/arm/boot/dts/imx23-olinuxino.dts
--- a/arch/arm/boot/dts/imx23-olinuxino.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx23-olinuxino.dts	2015-10-27 00:45:05.000000000 +0000
@@ -12,7 +12,7 @@
  */
 
 /dts-v1/;
-#include "imx23.dtsi"
+/include/ "imx23.dtsi"
 
 / {
 	model = "i.MX23 Olinuxino Low Cost Board";
@@ -40,21 +40,21 @@
 				hog_pins_a: hog@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_GPMI_ALE__GPIO_0_17
+						0x0113 /* MX23_PAD_GPMI_ALE__GPIO_0_17 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				led_pin_gpio2_1: led_gpio2_1@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_SSP1_DETECT__GPIO_2_1
+						0x2013 /* MX23_PAD_SSP1_DETECT__GPIO_2_1 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 			};
 
@@ -69,10 +69,6 @@
 		};
 
 		apbx@80040000 {
-			lradc@80050000 {
-				status = "okay";
-			};
-
 			duart: serial@80070000 {
 				pinctrl-names = "default";
 				pinctrl-0 = <&duart_pins_a>;
@@ -93,6 +89,7 @@
 
 	ahb@80080000 {
 		usb0: usb@80080000 {
+			dr_mode = "host";
 			vbus-supply = <&reg_usb0_vbus>;
 			status = "okay";
 		};
@@ -100,12 +97,9 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_usb0_vbus: regulator@0 {
+		reg_usb0_vbus: usb0_vbus {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "usb0_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
diff -urNp a/arch/arm/boot/dts/imx23-stmp378x_devb.dts b/arch/arm/boot/dts/imx23-stmp378x_devb.dts
--- a/arch/arm/boot/dts/imx23-stmp378x_devb.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx23-stmp378x_devb.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,7 +10,7 @@
  */
 
 /dts-v1/;
-#include "imx23.dtsi"
+/include/ "imx23.dtsi"
 
 / {
 	model = "Freescale STMP378x Development Board";
@@ -39,12 +39,12 @@
 				hog_pins_a: hog@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_PWM3__GPIO_1_29
-						MX23_PAD_PWM4__GPIO_1_30
+						0x11d3 /* MX23_PAD_PWM3__GPIO_1_29 */
+						0x11e3 /* MX23_PAD_PWM4__GPIO_1_30 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 			};
 		};
@@ -66,12 +66,9 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_vddio_sd0: regulator@0 {
+		reg_vddio_sd0: vddio-sd0 {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "vddio-sd0";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
diff -urNp a/arch/arm/boot/dts/imx23.dtsi b/arch/arm/boot/dts/imx23.dtsi
--- a/arch/arm/boot/dts/imx23.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx23.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -9,8 +9,7 @@
  * http://www.gnu.org/copyleft/gpl.html
  */
 
-#include "skeleton.dtsi"
-#include "imx23-pinfunc.h"
+/include/ "skeleton.dtsi"
 
 / {
 	interrupt-parent = <&icoll>;
@@ -21,9 +20,6 @@
 		gpio2 = &gpio2;
 		serial0 = &auart0;
 		serial1 = &auart1;
-		spi0 = &ssp0;
-		spi1 = &ssp1;
-		usbphy0 = &usbphy0;
 	};
 
 	cpus {
@@ -80,21 +76,23 @@
 				#size-cells = <1>;
 				reg = <0x8000c000 0x2000>, <0x8000a000 0x2000>;
 				reg-names = "gpmi-nand", "bch";
-				interrupts = <56>;
-				interrupt-names = "bch";
+				interrupts = <13>, <56>;
+				interrupt-names = "gpmi-dma", "bch";
 				clocks = <&clks 34>;
 				clock-names = "gpmi_io";
 				dmas = <&dma_apbh 4>;
 				dma-names = "rx-tx";
+				fsl,gpmi-dma-channel = <4>;
 				status = "disabled";
 			};
 
 			ssp0: ssp@80010000 {
 				reg = <0x80010000 0x2000>;
-				interrupts = <15>;
+				interrupts = <15 14>;
 				clocks = <&clks 33>;
 				dmas = <&dma_apbh 1>;
 				dma-names = "rx-tx";
+				fsl,ssp-dma-channel = <1>;
 				status = "disabled";
 			};
 
@@ -139,174 +137,174 @@
 				duart_pins_a: duart@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_PWM0__DUART_RX
-						MX23_PAD_PWM1__DUART_TX
+						0x11a2 /* MX23_PAD_PWM0__DUART_RX */
+						0x11b2 /* MX23_PAD_PWM1__DUART_TX */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				auart0_pins_a: auart0@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_AUART1_RX__AUART1_RX
-						MX23_PAD_AUART1_TX__AUART1_TX
-						MX23_PAD_AUART1_CTS__AUART1_CTS
-						MX23_PAD_AUART1_RTS__AUART1_RTS
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x01c0 /* MX23_PAD_AUART1_RX__AUART1_RX */
+						0x01d0 /* MX23_PAD_AUART1_TX__AUART1_TX */
+						0x01a0 /* MX23_PAD_AUART1_CTS__AUART1_CTS */
+						0x01b0 /* MX23_PAD_AUART1_RTS__AUART1_RTS */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				auart0_2pins_a: auart0-2pins@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_I2C_SCL__AUART1_TX
-						MX23_PAD_I2C_SDA__AUART1_RX
+						0x01e2 /* MX23_PAD_I2C_SCL__AUART1_TX */
+						0x01f2 /* MX23_PAD_I2C_SDA__AUART1_RX */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				gpmi_pins_a: gpmi-nand@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_GPMI_D00__GPMI_D00
-						MX23_PAD_GPMI_D01__GPMI_D01
-						MX23_PAD_GPMI_D02__GPMI_D02
-						MX23_PAD_GPMI_D03__GPMI_D03
-						MX23_PAD_GPMI_D04__GPMI_D04
-						MX23_PAD_GPMI_D05__GPMI_D05
-						MX23_PAD_GPMI_D06__GPMI_D06
-						MX23_PAD_GPMI_D07__GPMI_D07
-						MX23_PAD_GPMI_CLE__GPMI_CLE
-						MX23_PAD_GPMI_ALE__GPMI_ALE
-						MX23_PAD_GPMI_RDY0__GPMI_RDY0
-						MX23_PAD_GPMI_RDY1__GPMI_RDY1
-						MX23_PAD_GPMI_WPN__GPMI_WPN
-						MX23_PAD_GPMI_WRN__GPMI_WRN
-						MX23_PAD_GPMI_RDN__GPMI_RDN
-						MX23_PAD_GPMI_CE1N__GPMI_CE1N
-						MX23_PAD_GPMI_CE0N__GPMI_CE0N
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x0000 /* MX23_PAD_GPMI_D00__GPMI_D00 */
+						0x0010 /* MX23_PAD_GPMI_D01__GPMI_D01 */
+						0x0020 /* MX23_PAD_GPMI_D02__GPMI_D02 */
+						0x0030 /* MX23_PAD_GPMI_D03__GPMI_D03 */
+						0x0040 /* MX23_PAD_GPMI_D04__GPMI_D04 */
+						0x0050 /* MX23_PAD_GPMI_D05__GPMI_D05 */
+						0x0060 /* MX23_PAD_GPMI_D06__GPMI_D06 */
+						0x0070 /* MX23_PAD_GPMI_D07__GPMI_D07 */
+						0x0100 /* MX23_PAD_GPMI_CLE__GPMI_CLE */
+						0x0110 /* MX23_PAD_GPMI_ALE__GPMI_ALE */
+						0x0130 /* MX23_PAD_GPMI_RDY0__GPMI_RDY0 */
+						0x0140 /* MX23_PAD_GPMI_RDY1__GPMI_RDY1 */
+						0x0170 /* MX23_PAD_GPMI_WPN__GPMI_WPN */
+						0x0180 /* MX23_PAD_GPMI_WRN__GPMI_WRN */
+						0x0190 /* MX23_PAD_GPMI_RDN__GPMI_RDN */
+						0x21b0 /* MX23_PAD_GPMI_CE1N__GPMI_CE1N */
+						0x21c0 /* MX23_PAD_GPMI_CE0N__GPMI_CE0N	*/
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				gpmi_pins_fixup: gpmi-pins-fixup {
 					fsl,pinmux-ids = <
-						MX23_PAD_GPMI_WPN__GPMI_WPN
-						MX23_PAD_GPMI_WRN__GPMI_WRN
-						MX23_PAD_GPMI_RDN__GPMI_RDN
+						0x0170 /* MX23_PAD_GPMI_WPN__GPMI_WPN */
+						0x0180 /* MX23_PAD_GPMI_WRN__GPMI_WRN */
+						0x0190 /* MX23_PAD_GPMI_RDN__GPMI_RDN */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
+					fsl,drive-strength = <2>;
 				};
 
 				mmc0_4bit_pins_a: mmc0-4bit@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_SSP1_DATA0__SSP1_DATA0
-						MX23_PAD_SSP1_DATA1__SSP1_DATA1
-						MX23_PAD_SSP1_DATA2__SSP1_DATA2
-						MX23_PAD_SSP1_DATA3__SSP1_DATA3
-						MX23_PAD_SSP1_CMD__SSP1_CMD
-						MX23_PAD_SSP1_SCK__SSP1_SCK
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x2020 /* MX23_PAD_SSP1_DATA0__SSP1_DATA0 */
+						0x2030 /* MX23_PAD_SSP1_DATA1__SSP1_DATA1 */
+						0x2040 /* MX23_PAD_SSP1_DATA2__SSP1_DATA2 */
+						0x2050 /* MX23_PAD_SSP1_DATA3__SSP1_DATA3 */
+						0x2000 /* MX23_PAD_SSP1_CMD__SSP1_CMD */
+						0x2060 /* MX23_PAD_SSP1_SCK__SSP1_SCK */
+					>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				mmc0_8bit_pins_a: mmc0-8bit@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_SSP1_DATA0__SSP1_DATA0
-						MX23_PAD_SSP1_DATA1__SSP1_DATA1
-						MX23_PAD_SSP1_DATA2__SSP1_DATA2
-						MX23_PAD_SSP1_DATA3__SSP1_DATA3
-						MX23_PAD_GPMI_D08__SSP1_DATA4
-						MX23_PAD_GPMI_D09__SSP1_DATA5
-						MX23_PAD_GPMI_D10__SSP1_DATA6
-						MX23_PAD_GPMI_D11__SSP1_DATA7
-						MX23_PAD_SSP1_CMD__SSP1_CMD
-						MX23_PAD_SSP1_DETECT__SSP1_DETECT
-						MX23_PAD_SSP1_SCK__SSP1_SCK
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x2020 /* MX23_PAD_SSP1_DATA0__SSP1_DATA0 */
+						0x2030 /* MX23_PAD_SSP1_DATA1__SSP1_DATA1 */
+						0x2040 /* MX23_PAD_SSP1_DATA2__SSP1_DATA2 */
+						0x2050 /* MX23_PAD_SSP1_DATA3__SSP1_DATA3 */
+						0x0082 /* MX23_PAD_GPMI_D08__SSP1_DATA4 */
+						0x0092 /* MX23_PAD_GPMI_D09__SSP1_DATA5 */
+						0x00a2 /* MX23_PAD_GPMI_D10__SSP1_DATA6 */
+						0x00b2 /* MX23_PAD_GPMI_D11__SSP1_DATA7 */
+						0x2000 /* MX23_PAD_SSP1_CMD__SSP1_CMD */
+						0x2010 /* MX23_PAD_SSP1_DETECT__SSP1_DETECT */
+						0x2060 /* MX23_PAD_SSP1_SCK__SSP1_SCK */
+					>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				mmc0_pins_fixup: mmc0-pins-fixup {
 					fsl,pinmux-ids = <
-						MX23_PAD_SSP1_DETECT__SSP1_DETECT
-						MX23_PAD_SSP1_SCK__SSP1_SCK
+						0x2010 /* MX23_PAD_SSP1_DETECT__SSP1_DETECT */
+						0x2060 /* MX23_PAD_SSP1_SCK__SSP1_SCK */
 					>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,pull-up = <0>;
 				};
 
 				pwm2_pins_a: pwm2@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_PWM2__PWM2
+						0x11c0 /* MX23_PAD_PWM2__PWM2 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				lcdif_24bit_pins_a: lcdif-24bit@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_LCD_D00__LCD_D00
-						MX23_PAD_LCD_D01__LCD_D01
-						MX23_PAD_LCD_D02__LCD_D02
-						MX23_PAD_LCD_D03__LCD_D03
-						MX23_PAD_LCD_D04__LCD_D04
-						MX23_PAD_LCD_D05__LCD_D05
-						MX23_PAD_LCD_D06__LCD_D06
-						MX23_PAD_LCD_D07__LCD_D07
-						MX23_PAD_LCD_D08__LCD_D08
-						MX23_PAD_LCD_D09__LCD_D09
-						MX23_PAD_LCD_D10__LCD_D10
-						MX23_PAD_LCD_D11__LCD_D11
-						MX23_PAD_LCD_D12__LCD_D12
-						MX23_PAD_LCD_D13__LCD_D13
-						MX23_PAD_LCD_D14__LCD_D14
-						MX23_PAD_LCD_D15__LCD_D15
-						MX23_PAD_LCD_D16__LCD_D16
-						MX23_PAD_LCD_D17__LCD_D17
-						MX23_PAD_GPMI_D08__LCD_D18
-						MX23_PAD_GPMI_D09__LCD_D19
-						MX23_PAD_GPMI_D10__LCD_D20
-						MX23_PAD_GPMI_D11__LCD_D21
-						MX23_PAD_GPMI_D12__LCD_D22
-						MX23_PAD_GPMI_D13__LCD_D23
-						MX23_PAD_LCD_DOTCK__LCD_DOTCK
-						MX23_PAD_LCD_ENABLE__LCD_ENABLE
-						MX23_PAD_LCD_HSYNC__LCD_HSYNC
-						MX23_PAD_LCD_VSYNC__LCD_VSYNC
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x1000 /* MX23_PAD_LCD_D00__LCD_D0 */
+						0x1010 /* MX23_PAD_LCD_D01__LCD_D1 */
+						0x1020 /* MX23_PAD_LCD_D02__LCD_D2 */
+						0x1030 /* MX23_PAD_LCD_D03__LCD_D3 */
+						0x1040 /* MX23_PAD_LCD_D04__LCD_D4 */
+						0x1050 /* MX23_PAD_LCD_D05__LCD_D5 */
+						0x1060 /* MX23_PAD_LCD_D06__LCD_D6 */
+						0x1070 /* MX23_PAD_LCD_D07__LCD_D7 */
+						0x1080 /* MX23_PAD_LCD_D08__LCD_D8 */
+						0x1090 /* MX23_PAD_LCD_D09__LCD_D9 */
+						0x10a0 /* MX23_PAD_LCD_D10__LCD_D10 */
+						0x10b0 /* MX23_PAD_LCD_D11__LCD_D11 */
+						0x10c0 /* MX23_PAD_LCD_D12__LCD_D12 */
+						0x10d0 /* MX23_PAD_LCD_D13__LCD_D13 */
+						0x10e0 /* MX23_PAD_LCD_D14__LCD_D14 */
+						0x10f0 /* MX23_PAD_LCD_D15__LCD_D15 */
+						0x1100 /* MX23_PAD_LCD_D16__LCD_D16 */
+						0x1110 /* MX23_PAD_LCD_D17__LCD_D17 */
+						0x0081 /* MX23_PAD_GPMI_D08__LCD_D18 */
+						0x0091 /* MX23_PAD_GPMI_D09__LCD_D19 */
+						0x00a1 /* MX23_PAD_GPMI_D10__LCD_D20 */
+						0x00b1 /* MX23_PAD_GPMI_D11__LCD_D21 */
+						0x00c1 /* MX23_PAD_GPMI_D12__LCD_D22 */
+						0x00d1 /* MX23_PAD_GPMI_D13__LCD_D23 */
+						0x1160 /* MX23_PAD_LCD_DOTCK__LCD_DOTCK */
+						0x1170 /* MX23_PAD_LCD_ENABLE__LCD_ENABLE */
+						0x1180 /* MX23_PAD_LCD_HSYNC__LCD_HSYNC */
+						0x1190 /* MX23_PAD_LCD_VSYNC__LCD_VSYNC */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				spi2_pins_a: spi2@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX23_PAD_GPMI_WRN__SSP2_SCK
-						MX23_PAD_GPMI_RDY1__SSP2_CMD
-						MX23_PAD_GPMI_D00__SSP2_DATA0
-						MX23_PAD_GPMI_D03__SSP2_DATA3
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x0182 /* MX23_PAD_GPMI_WRN__SSP2_SCK */
+						0x0142 /* MX23_PAD_GPMI_RDY1__SSP2_CMD */
+						0x0002 /* MX23_PAD_GPMI_D00__SSP2_DATA0 */
+						0x0032 /* MX23_PAD_GPMI_D03__SSP2_DATA3 */
+					>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 			};
 
@@ -338,10 +336,8 @@
 			};
 
 			dcp@80028000 {
-				compatible = "fsl,imx23-dcp";
 				reg = <0x80028000 0x2000>;
-				interrupts = <53 54>;
-				status = "okay";
+				status = "disabled";
 			};
 
 			pxp@8002a000 {
@@ -370,10 +366,11 @@
 
 			ssp1: ssp@80034000 {
 				reg = <0x80034000 0x2000>;
-				interrupts = <2>;
+				interrupts = <2 20>;
 				clocks = <&clks 33>;
 				dmas = <&dma_apbh 2>;
 				dma-names = "rx-tx";
+				fsl,ssp-dma-channel = <2>;
 				status = "disabled";
 			};
 
@@ -429,12 +426,11 @@
 				status = "disabled";
 			};
 
-			lradc: lradc@80050000 {
+			lradc@80050000 {
 				compatible = "fsl,imx23-lradc";
 				reg = <0x80050000 0x2000>;
 				interrupts = <36 37 38 39 40 41 42 43 44>;
 				status = "disabled";
-				clocks = <&clks 26>;
 			};
 
 			spdif@80054000 {
@@ -476,7 +472,7 @@
 			auart0: serial@8006c000 {
 				compatible = "fsl,imx23-auart";
 				reg = <0x8006c000 0x2000>;
-				interrupts = <24>;
+				interrupts = <24 25 23>;
 				clocks = <&clks 32>;
 				dmas = <&dma_apbx 6>, <&dma_apbx 7>;
 				dma-names = "rx", "tx";
@@ -486,7 +482,7 @@
 			auart1: serial@8006e000 {
 				compatible = "fsl,imx23-auart";
 				reg = <0x8006e000 0x2000>;
-				interrupts = <59>;
+				interrupts = <59 60 58>;
 				clocks = <&clks 32>;
 				dmas = <&dma_apbx 8>, <&dma_apbx 9>;
 				dma-names = "rx", "tx";
@@ -527,9 +523,4 @@
 			status = "disabled";
 		};
 	};
-
-	iio_hwmon {
-		compatible = "iio-hwmon";
-		io-channels = <&lradc 8>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/imx25-karo-tx25.dts b/arch/arm/boot/dts/imx25-karo-tx25.dts
--- a/arch/arm/boot/dts/imx25-karo-tx25.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx25-karo-tx25.dts	2015-10-27 00:45:05.000000000 +0000
@@ -16,98 +16,21 @@
 	model = "Ka-Ro TX25";
 	compatible = "karo,imx25-tx25", "fsl,imx25";
 
-	chosen {
-		stdout-path = &uart1;
-	};
-
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		reg_fec_phy: regulator@0 {
-			compatible = "regulator-fixed";
-			reg = <0>;
-			regulator-name = "fec-phy";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			gpio = <&gpio4 9 0>;
-			enable-active-high;
-		};
-	};
-
 	memory {
 		reg = <0x80000000 0x02000000 0x90000000 0x02000000>;
 	};
 };
 
-&iomuxc {
-	pinctrl_uart1: uart1grp {
-		fsl,pins = <
-			MX25_PAD_UART1_TXD__UART1_TXD 0x80000000
-			MX25_PAD_UART1_RXD__UART1_RXD 0x80000000
-			MX25_PAD_UART1_CTS__UART1_CTS 0x80000000
-			MX25_PAD_UART1_RTS__UART1_RTS 0x80000000
-		>;
-	};
-
-	pinctrl_fec: fecgrp {
-		fsl,pins = <
-			MX25_PAD_D11__GPIO_4_9		0x80000000 /* FEC PHY power on pin */
-			MX25_PAD_D13__GPIO_4_7		0x80000000 /* FEC reset */
-			MX25_PAD_FEC_MDC__FEC_MDC	0x80000000
-			MX25_PAD_FEC_MDIO__FEC_MDIO	0x80000000
-			MX25_PAD_FEC_TDATA0__FEC_TDATA0	0x80000000
-			MX25_PAD_FEC_TDATA1__FEC_TDATA1	0x80000000
-			MX25_PAD_FEC_TX_EN__FEC_TX_EN	0x80000000
-			MX25_PAD_FEC_RDATA0__FEC_RDATA0	0x80000000
-			MX25_PAD_FEC_RDATA1__FEC_RDATA1	0x80000000
-			MX25_PAD_FEC_RX_DV__FEC_RX_DV	0x80000000
-			MX25_PAD_FEC_TX_CLK__FEC_TX_CLK	0x80000000
-		>;
-	};
-
-	pinctrl_nfc: nfcgrp {
-		fsl,pins = <
-			MX25_PAD_NF_CE0__NF_CE0		0x80000000
-			MX25_PAD_NFWE_B__NFWE_B		0x80000000
-			MX25_PAD_NFRE_B__NFRE_B		0x80000000
-			MX25_PAD_NFALE__NFALE		0x80000000
-			MX25_PAD_NFCLE__NFCLE		0x80000000
-			MX25_PAD_NFWP_B__NFWP_B		0x80000000
-			MX25_PAD_NFRB__NFRB		0x80000000
-			MX25_PAD_D7__D7			0x80000000
-			MX25_PAD_D6__D6			0x80000000
-			MX25_PAD_D5__D5			0x80000000
-			MX25_PAD_D4__D4			0x80000000
-			MX25_PAD_D3__D3			0x80000000
-			MX25_PAD_D2__D2			0x80000000
-			MX25_PAD_D1__D1			0x80000000
-			MX25_PAD_D0__D0			0x80000000
-		>;
-	};
-};
-
 &uart1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1>;
 	status = "okay";
 };
 
 &fec {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_fec>;
-	phy-reset-gpios = <&gpio3 7 0>;
 	phy-mode = "rmii";
-	phy-supply = <&reg_fec_phy>;
 	status = "okay";
 };
 
 &nfc {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_nfc>;
 	nand-on-flash-bbt;
-	nand-ecc-mode = "hw";
-	nand-bus-width = <8>;
 	status = "okay";
 };
diff -urNp a/arch/arm/boot/dts/imx25-pdk.dts b/arch/arm/boot/dts/imx25-pdk.dts
--- a/arch/arm/boot/dts/imx25-pdk.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx25-pdk.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,7 +10,6 @@
  */
 
 /dts-v1/;
-#include <dt-bindings/input/input.h>
 #include "imx25.dtsi"
 
 / {
@@ -20,238 +19,18 @@
 	memory {
 		reg = <0x80000000 0x4000000>;
 	};
-
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		reg_fec_3v3: regulator@0 {
-			compatible = "regulator-fixed";
-			reg = <0>;
-			regulator-name = "fec-3v3";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			gpio = <&gpio2 3 0>;
-			enable-active-high;
-		};
-
-		reg_2p5v: regulator@1 {
-			compatible = "regulator-fixed";
-			reg = <1>;
-			regulator-name = "2P5V";
-			regulator-min-microvolt = <2500000>;
-			regulator-max-microvolt = <2500000>;
-		};
-
-		reg_3p3v: regulator@2 {
-			compatible = "regulator-fixed";
-			reg = <2>;
-			regulator-name = "3P3V";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-		};
-
-		reg_can_3v3: regulator@3 {
-			compatible = "regulator-fixed";
-			reg = <3>;
-			regulator-name = "can-3v3";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			gpio = <&gpio4 6 0>;
-		};
-	};
-
-	sound {
-		compatible = "fsl,imx25-pdk-sgtl5000",
-			     "fsl,imx-audio-sgtl5000";
-		model = "imx25-pdk-sgtl5000";
-		ssi-controller = <&ssi1>;
-		audio-codec = <&codec>;
-		audio-routing =
-			"MIC_IN", "Mic Jack",
-			"Mic Jack", "Mic Bias",
-			"Headphone Jack", "HP_OUT";
-		mux-int-port = <1>;
-		mux-ext-port = <4>;
-	};
-};
-
-&audmux {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_audmux>;
-	status = "okay";
-};
-
-&can1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_can1>;
-	xceiver-supply = <&reg_can_3v3>;
-	status = "okay";
 };
 
-&esdhc1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc1>;
-	cd-gpios = <&gpio2 1 0>;
-	wp-gpios = <&gpio2 0 0>;
+&uart1 {
 	status = "okay";
 };
 
 &fec {
 	phy-mode = "rmii";
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_fec>;
-	phy-supply = <&reg_fec_3v3>;
-	phy-reset-gpios = <&gpio4 8 0>;
 	status = "okay";
 };
 
-&i2c1 {
-	clock-frequency = <100000>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c1>;
-	status = "okay";
-
-	codec: sgtl5000@0a {
-		compatible = "fsl,sgtl5000";
-		reg = <0x0a>;
-		clocks = <&clks 129>;
-		VDDA-supply = <&reg_2p5v>;
-		VDDIO-supply = <&reg_3p3v>;
-	};
-};
-
-&iomuxc {
-	imx25-pdk {
-		pinctrl_audmux: audmuxgrp {
-			fsl,pins = <
-				MX25_PAD_RW__AUD4_TXFS			0xe0
-				MX25_PAD_OE__AUD4_TXC			0xe0
-				MX25_PAD_EB0__AUD4_TXD			0xe0
-				MX25_PAD_EB1__AUD4_RXD			0xe0
-			>;
-		};
-
-		pinctrl_can1: can1grp {
-			fsl,pins = <
-				MX25_PAD_GPIO_A__CAN1_TX		0x0
-				MX25_PAD_GPIO_B__CAN1_RX		0x0
-				MX25_PAD_D14__GPIO_4_6 			0x80000000
-			>;
-		};
-
-		pinctrl_esdhc1: esdhc1grp {
-			fsl,pins = <
-				MX25_PAD_SD1_CMD__SD1_CMD		0x80000000
-				MX25_PAD_SD1_CLK__SD1_CLK		0x80000000
-				MX25_PAD_SD1_DATA0__SD1_DATA0		0x80000000
-				MX25_PAD_SD1_DATA1__SD1_DATA1		0x80000000
-				MX25_PAD_SD1_DATA2__SD1_DATA2		0x80000000
-				MX25_PAD_SD1_DATA3__SD1_DATA3		0x80000000
-				MX25_PAD_A14__GPIO_2_0			0x80000000
-				MX25_PAD_A15__GPIO_2_1			0x80000000
-			>;
-		};
-
-		pinctrl_fec: fecgrp {
-			fsl,pins = <
-				MX25_PAD_FEC_MDC__FEC_MDC		0x80000000
-				MX25_PAD_FEC_MDIO__FEC_MDIO		0x400001e0
-				MX25_PAD_FEC_TDATA0__FEC_TDATA0		0x80000000
-				MX25_PAD_FEC_TDATA1__FEC_TDATA1		0x80000000
-				MX25_PAD_FEC_TX_EN__FEC_TX_EN		0x80000000
-				MX25_PAD_FEC_RDATA0__FEC_RDATA0		0x80000000
-				MX25_PAD_FEC_RDATA1__FEC_RDATA1		0x80000000
-				MX25_PAD_FEC_RX_DV__FEC_RX_DV		0x80000000
-				MX25_PAD_FEC_TX_CLK__FEC_TX_CLK		0x1c0
-				MX25_PAD_A17__GPIO_2_3			0x80000000
-				MX25_PAD_D12__GPIO_4_8			0x80000000
-			>;
-		};
-
-		pinctrl_i2c1: i2c1grp {
-			fsl,pins = <
-				MX25_PAD_I2C1_CLK__I2C1_CLK		0x80000000
-				MX25_PAD_I2C1_DAT__I2C1_DAT		0x80000000
-			>;
-		};
-
-		pinctrl_kpp: kppgrp {
-			fsl,pins = <
-				MX25_PAD_KPP_ROW0__KPP_ROW0	0x80000000
-				MX25_PAD_KPP_ROW1__KPP_ROW1	0x80000000
-				MX25_PAD_KPP_ROW2__KPP_ROW2	0x80000000
-				MX25_PAD_KPP_ROW3__KPP_ROW3	0x80000000
-				MX25_PAD_KPP_COL0__KPP_COL0	0x80000000
-				MX25_PAD_KPP_COL1__KPP_COL1	0x80000000
-				MX25_PAD_KPP_COL2__KPP_COL2	0x80000000
-				MX25_PAD_KPP_COL3__KPP_COL3	0x80000000
-			>;
-		};
-
-
-		pinctrl_uart1: uart1grp {
-			fsl,pins = <
-				MX25_PAD_UART1_RTS__UART1_RTS		0xe0
-				MX25_PAD_UART1_CTS__UART1_CTS		0xe0
-				MX25_PAD_UART1_TXD__UART1_TXD		0x80000000
-				MX25_PAD_UART1_RXD__UART1_RXD		0xc0
-			>;
-		};
-	};
-};
-
 &nfc {
 	nand-on-flash-bbt;
 	status = "okay";
 };
-
-&kpp {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_kpp>;
-	linux,keymap = <
-			MATRIX_KEY(0x0, 0x0, KEY_UP)
-			MATRIX_KEY(0x0, 0x1, KEY_DOWN)
-			MATRIX_KEY(0x0, 0x2, KEY_VOLUMEDOWN)
-			MATRIX_KEY(0x0, 0x3, KEY_HOME)
-			MATRIX_KEY(0x1, 0x0, KEY_RIGHT)
-			MATRIX_KEY(0x1, 0x1, KEY_LEFT)
-			MATRIX_KEY(0x1, 0x2, KEY_ENTER)
-			MATRIX_KEY(0x1, 0x3, KEY_VOLUMEUP)
-			MATRIX_KEY(0x2, 0x0, KEY_F6)
-			MATRIX_KEY(0x2, 0x1, KEY_F8)
-			MATRIX_KEY(0x2, 0x2, KEY_F9)
-			MATRIX_KEY(0x2, 0x3, KEY_F10)
-			MATRIX_KEY(0x3, 0x0, KEY_F1)
-			MATRIX_KEY(0x3, 0x1, KEY_F2)
-			MATRIX_KEY(0x3, 0x2, KEY_F3)
-			MATRIX_KEY(0x3, 0x2, KEY_POWER)
-	>;
-	status = "okay";
-};
-
-&ssi1 {
-	codec-handle = <&codec>;
-	status = "okay";
-};
-
-&uart1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1>;
-	fsl,uart-has-rtscts;
-	status = "okay";
-};
-
-&usbhost1 {
-	phy_type = "serial";
-	dr_mode = "host";
-	status = "okay";
-};
-
-&usbotg {
-	phy_type = "utmi";
-	dr_mode = "otg";
-	external-vbus-divider;
-	status = "okay";
-};
diff -urNp a/arch/arm/boot/dts/imx25.dtsi b/arch/arm/boot/dts/imx25.dtsi
--- a/arch/arm/boot/dts/imx25.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx25.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -10,42 +10,22 @@
  */
 
 #include "skeleton.dtsi"
-#include "imx25-pinfunc.h"
 
 / {
 	aliases {
-		ethernet0 = &fec;
-		gpio0 = &gpio1;
-		gpio1 = &gpio2;
-		gpio2 = &gpio3;
-		gpio3 = &gpio4;
-		i2c0 = &i2c1;
-		i2c1 = &i2c2;
-		i2c2 = &i2c3;
-		mmc0 = &esdhc1;
-		mmc1 = &esdhc2;
 		serial0 = &uart1;
 		serial1 = &uart2;
 		serial2 = &uart3;
 		serial3 = &uart4;
 		serial4 = &uart5;
-		spi0 = &spi1;
-		spi1 = &spi2;
-		spi2 = &spi3;
+		gpio0 = &gpio1;
+		gpio1 = &gpio2;
+		gpio2 = &gpio3;
+		gpio3 = &gpio4;
 		usb0 = &usbotg;
 		usb1 = &usbhost1;
 	};
 
-	cpus {
-		#address-cells = <0>;
-		#size-cells = <0>;
-
-		cpu {
-			compatible = "arm,arm926ej-s";
-			device_type = "cpu";
-		};
-	};
-
 	asic: asic-interrupt-controller@68000000 {
 		compatible = "fsl,imx25-asic", "fsl,avic";
 		interrupt-controller;
@@ -59,7 +39,6 @@
 
 		osc {
 			compatible = "fsl,imx-osc", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <24000000>;
 		};
 	};
@@ -168,10 +147,9 @@
 				status = "disabled";
 			};
 
-			kpp: kpp@43fa8000 {
+			kpp@43fa8000 {
 				#address-cells = <1>;
 				#size-cells = <0>;
-				compatible = "fsl,imx25-kpp", "fsl,imx21-kpp";
 				reg = <0x43fa8000 0x4000>;
 				clocks = <&clks 102>;
 				clock-names = "";
@@ -179,12 +157,12 @@
 				status = "disabled";
 			};
 
-			iomuxc: iomuxc@43fac000 {
+			iomuxc@43fac000{
 				compatible = "fsl,imx25-iomuxc";
 				reg = <0x43fac000 0x4000>;
 			};
 
-			audmux: audmux@43fb0000 {
+			audmux@43fb0000 {
 				compatible = "fsl,imx25-audmux", "fsl,imx31-audmux";
 				reg = <0x43fb0000 0x4000>;
 				status = "disabled";
@@ -239,15 +217,9 @@
 			};
 
 			ssi2: ssi@50014000 {
-				#sound-dai-cells = <0>;
 				compatible = "fsl,imx25-ssi", "fsl,imx21-ssi";
 				reg = <0x50014000 0x4000>;
 				interrupts = <11>;
-				clocks = <&clks 118>;
-				clock-names = "ipg";
-				dmas = <&sdma 24 1 0>,
-				       <&sdma 25 1 0>;
-				dma-names = "rx", "tx";
 				status = "disabled";
 			};
 
@@ -275,15 +247,9 @@
 			};
 
 			ssi1: ssi@50034000 {
-				#sound-dai-cells = <0>;
 				compatible = "fsl,imx25-ssi", "fsl,imx21-ssi";
 				reg = <0x50034000 0x4000>;
 				interrupts = <12>;
-				clocks = <&clks 117>;
-				clock-names = "ipg";
-				dmas = <&sdma 28 1 0>,
-				       <&sdma 29 1 0>;
-				dma-names = "rx", "tx";
 				status = "disabled";
 			};
 
@@ -314,7 +280,7 @@
 			gpt4: timer@53f84000 {
 				compatible = "fsl,imx25-gpt", "fsl,imx31-gpt";
 				reg = <0x53f84000 0x4000>;
-				clocks = <&clks 95>, <&clks 47>;
+				clocks = <&clks 9>, <&clks 45>;
 				clock-names = "ipg", "per";
 				interrupts = <1>;
 			};
@@ -322,7 +288,7 @@
 			gpt3: timer@53f88000 {
 				compatible = "fsl,imx25-gpt", "fsl,imx31-gpt";
 				reg = <0x53f88000 0x4000>;
-				clocks = <&clks 94>, <&clks 47>;
+				clocks = <&clks 9>, <&clks 47>;
 				clock-names = "ipg", "per";
 				interrupts = <29>;
 			};
@@ -330,7 +296,7 @@
 			gpt2: timer@53f8c000 {
 				compatible = "fsl,imx25-gpt", "fsl,imx31-gpt";
 				reg = <0x53f8c000 0x4000>;
-				clocks = <&clks 93>, <&clks 47>;
+				clocks = <&clks 9>, <&clks 47>;
 				clock-names = "ipg", "per";
 				interrupts = <53>;
 			};
@@ -338,7 +304,7 @@
 			gpt1: timer@53f90000 {
 				compatible = "fsl,imx25-gpt", "fsl,imx31-gpt";
 				reg = <0x53f90000 0x4000>;
-				clocks = <&clks 92>, <&clks 47>;
+				clocks = <&clks 9>, <&clks 47>;
 				clock-names = "ipg", "per";
 				interrupts = <54>;
 			};
@@ -411,8 +377,7 @@
 				status = "disabled";
 			};
 
-			lcdc: lcdc@53fbc000 {
-				compatible = "fsl,imx25-fb", "fsl,imx21-fb";
+			lcdc@53fbc000 {
 				reg = <0x53fbc000 0x4000>;
 				interrupts = <39>;
 				clocks = <&clks 103>, <&clks 66>, <&clks 49>;
@@ -428,6 +393,7 @@
 
 			pwm4: pwm@53fc8000 {
 				compatible = "fsl,imx25-pwm", "fsl,imx27-pwm";
+				#pwm-cells = <2>;
 				reg = <0x53fc8000 0x4000>;
 				clocks = <&clks 108>, <&clks 52>;
 				clock-names = "ipg", "per";
@@ -454,14 +420,12 @@
 				#interrupt-cells = <2>;
 			};
 
-			sdma: sdma@53fd4000 {
-				compatible = "fsl,imx25-sdma";
+			sdma@53fd4000 {
+				compatible = "fsl,imx25-sdma", "fsl,imx35-sdma";
 				reg = <0x53fd4000 0x4000>;
 				clocks = <&clks 112>, <&clks 68>;
 				clock-names = "ipg", "ahb";
-				#dma-cells = <3>;
 				interrupts = <34>;
-				fsl,sdma-ram-script-name = "imx/sdma/sdma-imx25.bin";
 			};
 
 			wdog@53fdc000 {
@@ -481,20 +445,23 @@
 				interrupts = <26>;
 			};
 
-			iim: iim@53ff0000 {
-				compatible = "fsl,imx25-iim", "fsl,imx27-iim";
-				reg = <0x53ff0000 0x4000>;
-				interrupts = <19>;
-				clocks = <&clks 99>;
+			usbphy1: usbphy@1 {
+				compatible = "nop-usbphy";
+				status = "disabled";
+			};
+
+			usbphy2: usbphy@2 {
+				compatible = "nop-usbphy";
+				status = "disabled";
 			};
 
 			usbotg: usb@53ff4000 {
 				compatible = "fsl,imx25-usb", "fsl,imx27-usb";
 				reg = <0x53ff4000 0x0200>;
 				interrupts = <37>;
-				clocks = <&clks 70>;
+				clocks = <&clks 9>, <&clks 70>, <&clks 8>;
+				clock-names = "ipg", "ahb", "per";
 				fsl,usbmisc = <&usbmisc 0>;
-				fsl,usbphy = <&usbphy0>;
 				status = "disabled";
 			};
 
@@ -502,9 +469,9 @@
 				compatible = "fsl,imx25-usb", "fsl,imx27-usb";
 				reg = <0x53ff4400 0x0200>;
 				interrupts = <35>;
-				clocks = <&clks 70>;
+				clocks = <&clks 9>, <&clks 70>, <&clks 8>;
+				clock-names = "ipg", "ahb", "per";
 				fsl,usbmisc = <&usbmisc 1>;
-				fsl,usbphy = <&usbphy1>;
 				status = "disabled";
 			};
 
@@ -514,6 +481,7 @@
 				clocks = <&clks 9>, <&clks 70>, <&clks 8>;
 				clock-names = "ipg", "ahb", "per";
 				reg = <0x53ff4600 0x00f>;
+				status = "disabled";
 			};
 
 			dryice@53ffc000 {
@@ -525,11 +493,6 @@
 			};
 		};
 
-		iram: sram@78000000 {
-			compatible = "mmio-sram";
-			reg = <0x78000000 0x20000>;
-		};
-
 		emi@80000000 {
 			compatible = "fsl,emi-bus", "simple-bus";
 			#address-cells = <1>;
@@ -550,20 +513,4 @@
 			};
 		};
 	};
-
-	usbphy {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		usbphy0: usb-phy@0 {
-			reg = <0>;
-			compatible = "usb-nop-xceiv";
-		};
-
-		usbphy1: usb-phy@1 {
-			reg = <1>;
-			compatible = "usb-nop-xceiv";
-		};
-	};
 };
diff -urNp a/arch/arm/boot/dts/imx27-apf27.dts b/arch/arm/boot/dts/imx27-apf27.dts
--- a/arch/arm/boot/dts/imx27-apf27.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx27-apf27.dts	2015-10-27 00:45:05.000000000 +0000
@@ -29,55 +29,16 @@
 
 		osc26m {
 			compatible = "fsl,imx-osc26m", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <0>;
 		};
 	};
 };
 
-&iomuxc {
-	imx27-apf27 {
-		pinctrl_fec1: fec1grp {
-			fsl,pins = <
-				MX27_PAD_SD3_CMD__FEC_TXD0 0x0
-				MX27_PAD_SD3_CLK__FEC_TXD1 0x0
-				MX27_PAD_ATA_DATA0__FEC_TXD2 0x0
-				MX27_PAD_ATA_DATA1__FEC_TXD3 0x0
-				MX27_PAD_ATA_DATA2__FEC_RX_ER 0x0
-				MX27_PAD_ATA_DATA3__FEC_RXD1 0x0
-				MX27_PAD_ATA_DATA4__FEC_RXD2 0x0
-				MX27_PAD_ATA_DATA5__FEC_RXD3 0x0
-				MX27_PAD_ATA_DATA6__FEC_MDIO 0x0
-				MX27_PAD_ATA_DATA7__FEC_MDC 0x0
-				MX27_PAD_ATA_DATA8__FEC_CRS 0x0
-				MX27_PAD_ATA_DATA9__FEC_TX_CLK 0x0
-				MX27_PAD_ATA_DATA10__FEC_RXD0 0x0
-				MX27_PAD_ATA_DATA11__FEC_RX_DV 0x0
-				MX27_PAD_ATA_DATA12__FEC_RX_CLK 0x0
-				MX27_PAD_ATA_DATA13__FEC_COL 0x0
-				MX27_PAD_ATA_DATA14__FEC_TX_ER 0x0
-				MX27_PAD_ATA_DATA15__FEC_TX_EN 0x0
-			>;
-		};
-
-		pinctrl_uart1: uart1grp {
-			fsl,pins = <
-				MX27_PAD_UART1_TXD__UART1_TXD 0x0
-				MX27_PAD_UART1_RXD__UART1_RXD 0x0
-			>;
-		};
-	};
-};
-
 &uart1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1>;
 	status = "okay";
 };
 
 &fec {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_fec1>;
 	status = "okay";
 };
 
diff -urNp a/arch/arm/boot/dts/imx27-apf27dev.dts b/arch/arm/boot/dts/imx27-apf27dev.dts
--- a/arch/arm/boot/dts/imx27-apf27dev.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx27-apf27dev.dts	2015-10-27 00:45:05.000000000 +0000
@@ -16,249 +16,45 @@
 	model = "Armadeus Systems APF27Dev docking/development board";
 	compatible = "armadeus,imx27-apf27dev", "armadeus,imx27-apf27", "fsl,imx27";
 
-	display: display {
-		model = "Chimei-LW700AT9003";
-		native-mode = <&timing0>;
-		bits-per-pixel = <16>;  /* non-standard but required */
-		fsl,pcr = <0xfae80083>;	/* non-standard but required */
-		display-timings {
-			timing0: 800x480 {
-				clock-frequency = <33000033>;
-				hactive = <800>;
-				vactive = <480>;
-				hback-porch = <96>;
-				hfront-porch = <96>;
-				vback-porch = <20>;
-				vfront-porch = <21>;
-				hsync-len = <64>;
-				vsync-len = <4>;
-			};
-		};
-	};
-
 	gpio-keys {
 		compatible = "gpio-keys";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_gpio_keys>;
 
 		user-key {
 			label = "user";
-			gpios = <&gpio6 13 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio6 13 0>;
 			linux,code = <276>; /* BTN_EXTRA */
 		};
 	};
 
 	leds {
 		compatible = "gpio-leds";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_gpio_leds>;
 
 		user {
 			label = "Heartbeat";
-			gpios = <&gpio6 14 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio6 14 0>;
 			linux,default-trigger = "heartbeat";
 		};
 	};
-
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		reg_max5821: regulator@0 {
-			compatible = "regulator-fixed";
-			reg = <0>;
-			regulator-name = "max5821-reg";
-			regulator-min-microvolt = <2500000>;
-			regulator-max-microvolt = <2500000>;
-			regulator-always-on;
-		};
-	};
 };
 
 &cspi1 {
 	fsl,spi-num-chipselects = <1>;
-	cs-gpios = <&gpio4 28 GPIO_ACTIVE_LOW>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_cspi1 &pinctrl_cspi1_cs>;
+	cs-gpios = <&gpio4 28 1>;
 	status = "okay";
-
-	adc@0 {
-		compatible = "maxim,max1027";
-		reg = <0>;
-		interrupt-parent = <&gpio5>;
-		interrupts = <15 IRQ_TYPE_EDGE_FALLING>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_max1027>;
-		spi-max-frequency = <10000000>;
-	};
 };
 
 &cspi2 {
 	fsl,spi-num-chipselects = <3>;
-	cs-gpios = <&gpio4 21 GPIO_ACTIVE_LOW>,
-		   <&gpio4 27 GPIO_ACTIVE_LOW>,
-		   <&gpio2 17 GPIO_ACTIVE_LOW>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_cspi2 &pinctrl_cspi2_cs>;
-	status = "okay";
-};
-
-&fb {
-	display = <&display>;
-	fsl,dmacr = <0x00020010>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_imxfb1>;
+	cs-gpios = <&gpio4 21 1>, <&gpio4 27 1>,
+			<&gpio2 17 1>;
 	status = "okay";
 };
 
 &i2c1 {
 	clock-frequency = <400000>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c1>;
 	status = "okay";
-
-	rtc@68 {
-		compatible = "dallas,ds1374";
-		reg = <0x68>;
-	};
-
-	max5821@38 {
-		compatible = "maxim,max5821";
-		reg = <0x38>;
-		vref-supply = <&reg_max5821>;
-	};
 };
 
 &i2c2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c2>;
-	status = "okay";
-};
-
-&iomuxc {
-	imx27-apf27dev {
-		pinctrl_cspi1: cspi1grp {
-			fsl,pins = <
-				MX27_PAD_CSPI1_MISO__CSPI1_MISO 0x0
-				MX27_PAD_CSPI1_MOSI__CSPI1_MOSI 0x0
-				MX27_PAD_CSPI1_SCLK__CSPI1_SCLK 0x0
-			>;
-		};
-
-		pinctrl_cspi1_cs: cspi1csgrp {
-			fsl,pins = <MX27_PAD_CSPI1_SS0__GPIO4_28 0x0>;
-		};
-
-		pinctrl_cspi2: cspi2grp {
-			fsl,pins = <
-				MX27_PAD_CSPI2_MISO__CSPI2_MISO 0x0
-				MX27_PAD_CSPI2_MOSI__CSPI2_MOSI 0x0
-				MX27_PAD_CSPI2_SCLK__CSPI2_SCLK 0x0
-			>;
-		};
-
-		pinctrl_cspi2_cs: cspi2csgrp {
-			fsl,pins = <
-				MX27_PAD_CSI_D5__GPIO2_17 0x0
-				MX27_PAD_CSPI2_SS0__GPIO4_21 0x0
-				MX27_PAD_CSPI1_SS1__GPIO4_27 0x0
-			>;
-		};
-
-		pinctrl_gpio_leds: gpioledsgrp {
-			fsl,pins = <MX27_PAD_PC_VS1__GPIO6_14 0x0>;
-		};
-
-		pinctrl_gpio_keys: gpiokeysgrp {
-			fsl,pins = <MX27_PAD_PC_VS2__GPIO6_13 0x0>;
-		};
-
-		pinctrl_imxfb1: imxfbgrp {
-			fsl,pins = <
-				MX27_PAD_CLS__CLS 0x0
-				MX27_PAD_CONTRAST__CONTRAST 0x0
-				MX27_PAD_LD0__LD0 0x0
-				MX27_PAD_LD1__LD1 0x0
-				MX27_PAD_LD2__LD2 0x0
-				MX27_PAD_LD3__LD3 0x0
-				MX27_PAD_LD4__LD4 0x0
-				MX27_PAD_LD5__LD5 0x0
-				MX27_PAD_LD6__LD6 0x0
-				MX27_PAD_LD7__LD7 0x0
-				MX27_PAD_LD8__LD8 0x0
-				MX27_PAD_LD9__LD9 0x0
-				MX27_PAD_LD10__LD10 0x0
-				MX27_PAD_LD11__LD11 0x0
-				MX27_PAD_LD12__LD12 0x0
-				MX27_PAD_LD13__LD13 0x0
-				MX27_PAD_LD14__LD14 0x0
-				MX27_PAD_LD15__LD15 0x0
-				MX27_PAD_LD16__LD16 0x0
-				MX27_PAD_LD17__LD17 0x0
-				MX27_PAD_LSCLK__LSCLK 0x0
-				MX27_PAD_OE_ACD__OE_ACD 0x0
-				MX27_PAD_PS__PS 0x0
-				MX27_PAD_REV__REV 0x0
-				MX27_PAD_SPL_SPR__SPL_SPR 0x0
-				MX27_PAD_HSYNC__HSYNC 0x0
-				MX27_PAD_VSYNC__VSYNC 0x0
-			>;
-		};
-
-		pinctrl_i2c1: i2c1grp {
-			fsl,pins = <
-				MX27_PAD_I2C_DATA__I2C_DATA 0x0
-				MX27_PAD_I2C_CLK__I2C_CLK 0x0
-			>;
-		};
-
-		pinctrl_i2c2: i2c2grp {
-			fsl,pins = <
-				MX27_PAD_I2C2_SDA__I2C2_SDA 0x0
-				MX27_PAD_I2C2_SCL__I2C2_SCL 0x0
-			>;
-		};
-
-		pinctrl_max1027: max1027 {
-			 fsl,pins = <
-				 MX27_PAD_UART1_CTS__GPIO5_14 0x0 /* CNVST */
-				 MX27_PAD_UART1_RTS__GPIO5_15 0x0 /* EOC */
-			>;
-		};
-
-		pinctrl_pwm: pwmgrp {
-			fsl,pins = <
-				MX27_PAD_PWMO__PWMO 0x0
-			>;
-		};
-
-		pinctrl_sdhc2: sdhc2grp {
-			fsl,pins = <
-				MX27_PAD_SD2_CLK__SD2_CLK 0x0
-				MX27_PAD_SD2_CMD__SD2_CMD 0x0
-				MX27_PAD_SD2_D0__SD2_D0 0x0
-				MX27_PAD_SD2_D1__SD2_D1 0x0
-				MX27_PAD_SD2_D2__SD2_D2 0x0
-				MX27_PAD_SD2_D3__SD2_D3 0x0
-			>;
-		};
-
-		pinctrl_sdhc2_cd: sdhc2cdgrp {
-			fsl,pins = <MX27_PAD_TOUT__GPIO3_14 0x0>;
-		};
-	};
-};
-
-&sdhci2 {
-	bus-width = <4>;
-	cd-gpios = <&gpio3 14 GPIO_ACTIVE_HIGH>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_sdhc2 &pinctrl_sdhc2_cd>;
 	status = "okay";
 };
-
-&pwm {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_pwm>;
-};
diff -urNp a/arch/arm/boot/dts/imx27-pdk.dts b/arch/arm/boot/dts/imx27-pdk.dts
--- a/arch/arm/boot/dts/imx27-pdk.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx27-pdk.dts	2015-10-27 00:45:05.000000000 +0000
@@ -17,181 +17,15 @@
 	compatible = "fsl,imx27-pdk", "fsl,imx27";
 
 	memory {
-		reg = <0xa0000000 0x08000000>;
+		reg = <0x0 0x0>;
 	};
-
-	usbphy {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		usbphy0: usbphy@0 {
-			compatible = "usb-nop-xceiv";
-			reg = <0>;
-			clocks = <&clks IMX27_CLK_DUMMY>;
-			clock-names = "main_clk";
-		};
-	};
-};
-
-&cspi2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_cspi2>;
-	fsl,spi-num-chipselects = <1>;
-	cs-gpios = <&gpio4 21 GPIO_ACTIVE_HIGH>;
-	status = "okay";
-
-	pmic: mc13783@0 {
-		compatible = "fsl,mc13783";
-		reg = <0>;
-		spi-cs-high;
-		spi-max-frequency = <1000000>;
-		interrupt-parent = <&gpio3>;
-		interrupts = <14 IRQ_TYPE_LEVEL_HIGH>;
-
-		regulators {
-			vgen_reg: vgen {
-				regulator-min-microvolt = <1500000>;
-				regulator-max-microvolt = <1500000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-
-			vmmc1_reg: vmmc1 {
-				regulator-min-microvolt = <1600000>;
-				regulator-max-microvolt = <3000000>;
-			};
-
-			gpo1_reg: gpo1 {
-				regulator-always-on;
-				regulator-boot-on;
-			};
-
-			gpo3_reg: gpo3 {
-				regulator-always-on;
-				regulator-boot-on;
-			};
-		};
-	};
-};
-
-&fec {
-	phy-mode = "mii";
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_fec>;
-	status = "okay";
-};
-
-&kpp {
-	linux,keymap = <
-		MATRIX_KEY(0, 0, KEY_UP)
-		MATRIX_KEY(0, 1, KEY_DOWN)
-		MATRIX_KEY(1, 0, KEY_RIGHT)
-		MATRIX_KEY(1, 1, KEY_LEFT)
-		MATRIX_KEY(1, 2, KEY_ENTER)
-		MATRIX_KEY(2, 0, KEY_F6)
-		MATRIX_KEY(2, 1, KEY_F8)
-		MATRIX_KEY(2, 2, KEY_F9)
-		MATRIX_KEY(2, 3, KEY_F10)
-	>;
-	status = "okay";
-};
-
-&nfc {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_nand>;
-	nand-ecc-mode = "hw";
-	nand-on-flash-bbt;
-	status = "okay";
 };
 
 &uart1 {
 	fsl,uart-has-rtscts;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1>;
 	status = "okay";
 };
 
-&usbotg {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usbotg>;
-	dr_mode = "otg";
-	fsl,usbphy = <&usbphy0>;
-	phy_type = "ulpi";
+&fec {
 	status = "okay";
 };
-
-&iomuxc {
-	imx27-pdk {
-		pinctrl_cspi2: cspi2grp {
-			fsl,pins = <
-				MX27_PAD_CSPI2_MISO__CSPI2_MISO 0x0
-				MX27_PAD_CSPI2_MOSI__CSPI2_MOSI 0x0
-				MX27_PAD_CSPI2_SCLK__CSPI2_SCLK 0x0
-				MX27_PAD_CSPI2_SS0__GPIO4_21	0x0 /* SPI2 CS0 */
-				MX27_PAD_TOUT__GPIO3_14		0x0 /* PMIC IRQ */
-			>;
-		};
-
-		pinctrl_fec: fecgrp {
-			fsl,pins = <
-				MX27_PAD_SD3_CMD__FEC_TXD0 0x0
-				MX27_PAD_SD3_CLK__FEC_TXD1 0x0
-				MX27_PAD_ATA_DATA0__FEC_TXD2 0x0
-				MX27_PAD_ATA_DATA1__FEC_TXD3 0x0
-				MX27_PAD_ATA_DATA2__FEC_RX_ER 0x0
-				MX27_PAD_ATA_DATA3__FEC_RXD1 0x0
-				MX27_PAD_ATA_DATA4__FEC_RXD2 0x0
-				MX27_PAD_ATA_DATA5__FEC_RXD3 0x0
-				MX27_PAD_ATA_DATA6__FEC_MDIO 0x0
-				MX27_PAD_ATA_DATA7__FEC_MDC 0x0
-				MX27_PAD_ATA_DATA8__FEC_CRS 0x0
-				MX27_PAD_ATA_DATA9__FEC_TX_CLK 0x0
-				MX27_PAD_ATA_DATA10__FEC_RXD0 0x0
-				MX27_PAD_ATA_DATA11__FEC_RX_DV 0x0
-				MX27_PAD_ATA_DATA12__FEC_RX_CLK 0x0
-				MX27_PAD_ATA_DATA13__FEC_COL 0x0
-				MX27_PAD_ATA_DATA14__FEC_TX_ER 0x0
-				MX27_PAD_ATA_DATA15__FEC_TX_EN 0x0
-			>;
-		};
-
-		pinctrl_nand: nandgrp {
-			fsl,pins = <
-				MX27_PAD_NFRB__NFRB	0x0
-				MX27_PAD_NFCLE__NFCLE	0x0
-				MX27_PAD_NFWP_B__NFWP_B	0x0
-				MX27_PAD_NFCE_B__NFCE_B	0x0
-				MX27_PAD_NFALE__NFALE	0x0
-				MX27_PAD_NFRE_B__NFRE_B	0x0
-				MX27_PAD_NFWE_B__NFWE_B	0x0
-			>;
-		};
-
-		pinctrl_uart1: uart1grp {
-			fsl,pins = <
-				MX27_PAD_UART1_TXD__UART1_TXD 0x0
-				MX27_PAD_UART1_RXD__UART1_RXD 0x0
-				MX27_PAD_UART1_CTS__UART1_CTS 0x0
-				MX27_PAD_UART1_RTS__UART1_RTS 0x0
-			>;
-		};
-
-		pinctrl_usbotg: usbotggrp {
-			fsl,pins = <
-				MX27_PAD_USBOTG_NXT__USBOTG_NXT 0x0
-				MX27_PAD_USBOTG_STP__USBOTG_STP 0x0
-				MX27_PAD_USBOTG_DIR__USBOTG_DIR 0x0
-				MX27_PAD_USBOTG_CLK__USBOTG_CLK 0x0
-				MX27_PAD_USBOTG_DATA0__USBOTG_DATA0 0x0
-				MX27_PAD_USBOTG_DATA1__USBOTG_DATA1 0x0
-				MX27_PAD_USBOTG_DATA2__USBOTG_DATA2 0x0
-				MX27_PAD_USBOTG_DATA3__USBOTG_DATA3 0x0
-				MX27_PAD_USBOTG_DATA4__USBOTG_DATA4 0x0
-				MX27_PAD_USBOTG_DATA5__USBOTG_DATA5 0x0
-				MX27_PAD_USBOTG_DATA6__USBOTG_DATA6 0x0
-				MX27_PAD_USBOTG_DATA7__USBOTG_DATA7 0x0
-			>;
-		};
-	};
-};
diff -urNp a/arch/arm/boot/dts/imx27-phytec-phycore.dts b/arch/arm/boot/dts/imx27-phytec-phycore.dts
--- a/arch/arm/boot/dts/imx27-phytec-phycore.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/imx27-phytec-phycore.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,79 @@
+/*
+ * Copyright 2012 Sascha Hauer, Pengutronix
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/dts-v1/;
+#include "imx27.dtsi"
+
+/ {
+	model = "Phytec pcm038";
+	compatible = "phytec,imx27-pcm038", "fsl,imx27";
+
+	memory {
+		reg = <0x0 0x0>;
+	};
+
+	soc {
+		aipi@10000000 { /* aipi1 */
+			serial@1000a000 {
+				fsl,uart-has-rtscts;
+				status = "okay";
+			};
+
+			serial@1000b000 {
+				fsl,uart-has-rtscts;
+				status = "okay";
+			};
+
+			serial@1000c000 {
+				fsl,uart-has-rtscts;
+				status = "okay";
+			};
+
+			i2c@1001d000 {
+				clock-frequency = <400000>;
+				status = "okay";
+				at24@52 {
+					compatible = "at,24c32";
+					pagesize = <32>;
+					reg = <0x52>;
+				};
+				pcf8563@51 {
+					compatible = "nxp,pcf8563";
+					reg = <0x51>;
+				};
+				lm75@4a {
+					compatible = "national,lm75";
+					reg = <0x4a>;
+				};
+			};
+		};
+
+		aipi@10020000 { /* aipi2 */
+			ethernet@1002b000 {
+				status = "okay";
+			};
+		};
+	};
+
+	nor_flash@c0000000 {
+		compatible = "cfi-flash";
+		bank-width = <2>;
+		reg = <0xc0000000 0x02000000>;
+		#address-cells = <1>;
+		#size-cells = <1>;
+	};
+};
+
+&nfc {
+	nand-bus-width = <8>;
+	nand-ecc-mode = "hw";
+	status = "okay";
+};
diff -urNp a/arch/arm/boot/dts/imx27.dtsi b/arch/arm/boot/dts/imx27.dtsi
--- a/arch/arm/boot/dts/imx27.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx27.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -10,37 +10,25 @@
  */
 
 #include "skeleton.dtsi"
-#include "imx27-pinfunc.h"
-
-#include <dt-bindings/clock/imx27-clock.h>
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-#include <dt-bindings/interrupt-controller/irq.h>
 
 / {
 	aliases {
-		ethernet0 = &fec;
-		gpio0 = &gpio1;
-		gpio1 = &gpio2;
-		gpio2 = &gpio3;
-		gpio3 = &gpio4;
-		gpio4 = &gpio5;
-		gpio5 = &gpio6;
-		i2c0 = &i2c1;
-		i2c1 = &i2c2;
 		serial0 = &uart1;
 		serial1 = &uart2;
 		serial2 = &uart3;
 		serial3 = &uart4;
 		serial4 = &uart5;
 		serial5 = &uart6;
-		spi0 = &cspi1;
-		spi1 = &cspi2;
-		spi2 = &cspi3;
+		gpio0 = &gpio1;
+		gpio1 = &gpio2;
+		gpio2 = &gpio3;
+		gpio3 = &gpio4;
+		gpio4 = &gpio5;
+		gpio5 = &gpio6;
 	};
 
-	aitc: aitc-interrupt-controller@e0000000 {
-		compatible = "fsl,imx27-aitc", "fsl,avic";
+	avic: avic-interrupt-controller@e0000000 {
+		compatible = "fsl,imx27-avic", "fsl,avic";
 		interrupt-controller;
 		#interrupt-cells = <1>;
 		reg = <0x10040000 0x1000>;
@@ -52,34 +40,15 @@
 
 		osc26m {
 			compatible = "fsl,imx-osc26m", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <26000000>;
 		};
 	};
 
-	cpus {
-		#size-cells = <0>;
-		#address-cells = <1>;
-
-		cpu: cpu@0 {
-			device_type = "cpu";
-			compatible = "arm,arm926ej-s";
-			operating-points = <
-				/* kHz uV */
-				266000 1300000
-				399000 1450000
-			>;
-			clock-latency = <62500>;
-			clocks = <&clks IMX27_CLK_CPU_DIV>;
-			voltage-tolerance = <5>;
-		};
-	};
-
 	soc {
 		#address-cells = <1>;
 		#size-cells = <1>;
 		compatible = "simple-bus";
-		interrupt-parent = <&aitc>;
+		interrupt-parent = <&avic>;
 		ranges;
 
 		aipi@10000000 { /* AIPI1 */
@@ -89,30 +58,18 @@
 			reg = <0x10000000 0x20000>;
 			ranges;
 
-			dma: dma@10001000 {
-				compatible = "fsl,imx27-dma";
-				reg = <0x10001000 0x1000>;
-				interrupts = <32>;
-				clocks = <&clks IMX27_CLK_DMA_IPG_GATE>,
-					 <&clks IMX27_CLK_DMA_AHB_GATE>;
-				clock-names = "ipg", "ahb";
-				#dma-cells = <1>;
-				#dma-channels = <16>;
-			};
-
 			wdog: wdog@10002000 {
 				compatible = "fsl,imx27-wdt", "fsl,imx21-wdt";
 				reg = <0x10002000 0x1000>;
 				interrupts = <27>;
-				clocks = <&clks IMX27_CLK_WDOG_IPG_GATE>;
+				clocks = <&clks 0>;
 			};
 
 			gpt1: timer@10003000 {
 				compatible = "fsl,imx27-gpt", "fsl,imx1-gpt";
 				reg = <0x10003000 0x1000>;
 				interrupts = <26>;
-				clocks = <&clks IMX27_CLK_GPT1_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 46>, <&clks 61>;
 				clock-names = "ipg", "per";
 			};
 
@@ -120,8 +77,7 @@
 				compatible = "fsl,imx27-gpt", "fsl,imx1-gpt";
 				reg = <0x10004000 0x1000>;
 				interrupts = <25>;
-				clocks = <&clks IMX27_CLK_GPT2_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 45>, <&clks 61>;
 				clock-names = "ipg", "per";
 			};
 
@@ -129,42 +85,15 @@
 				compatible = "fsl,imx27-gpt", "fsl,imx1-gpt";
 				reg = <0x10005000 0x1000>;
 				interrupts = <24>;
-				clocks = <&clks IMX27_CLK_GPT3_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 44>, <&clks 61>;
 				clock-names = "ipg", "per";
 			};
 
-			pwm: pwm@10006000 {
-				#pwm-cells = <2>;
-				compatible = "fsl,imx27-pwm";
-				reg = <0x10006000 0x1000>;
-				interrupts = <23>;
-				clocks = <&clks IMX27_CLK_PWM_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
-				clock-names = "ipg", "per";
-			};
-
-			kpp: kpp@10008000 {
-				compatible = "fsl,imx27-kpp", "fsl,imx21-kpp";
-				reg = <0x10008000 0x1000>;
-				interrupts = <21>;
-				clocks = <&clks IMX27_CLK_KPP_IPG_GATE>;
-				status = "disabled";
-			};
-
-			owire: owire@10009000 {
-				compatible = "fsl,imx27-owire", "fsl,imx21-owire";
-				reg = <0x10009000 0x1000>;
-				clocks = <&clks IMX27_CLK_OWIRE_IPG_GATE>;
-				status = "disabled";
-			};
-
 			uart1: serial@1000a000 {
 				compatible = "fsl,imx27-uart", "fsl,imx21-uart";
 				reg = <0x1000a000 0x1000>;
 				interrupts = <20>;
-				clocks = <&clks IMX27_CLK_UART1_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 81>, <&clks 61>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -173,8 +102,7 @@
 				compatible = "fsl,imx27-uart", "fsl,imx21-uart";
 				reg = <0x1000b000 0x1000>;
 				interrupts = <19>;
-				clocks = <&clks IMX27_CLK_UART2_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 80>, <&clks 61>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -183,8 +111,7 @@
 				compatible = "fsl,imx27-uart", "fsl,imx21-uart";
 				reg = <0x1000c000 0x1000>;
 				interrupts = <18>;
-				clocks = <&clks IMX27_CLK_UART3_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 79>, <&clks 61>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -193,8 +120,7 @@
 				compatible = "fsl,imx27-uart", "fsl,imx21-uart";
 				reg = <0x1000d000 0x1000>;
 				interrupts = <17>;
-				clocks = <&clks IMX27_CLK_UART4_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 78>, <&clks 61>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -205,8 +131,7 @@
 				compatible = "fsl,imx27-cspi";
 				reg = <0x1000e000 0x1000>;
 				interrupts = <16>;
-				clocks = <&clks IMX27_CLK_CSPI1_IPG_GATE>,
-					 <&clks IMX27_CLK_PER2_GATE>;
+				clocks = <&clks 53>, <&clks 53>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -217,150 +142,79 @@
 				compatible = "fsl,imx27-cspi";
 				reg = <0x1000f000 0x1000>;
 				interrupts = <15>;
-				clocks = <&clks IMX27_CLK_CSPI2_IPG_GATE>,
-					 <&clks IMX27_CLK_PER2_GATE>;
+				clocks = <&clks 52>, <&clks 52>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
 
-			ssi1: ssi@10010000 {
-				#sound-dai-cells = <0>;
-				compatible = "fsl,imx27-ssi", "fsl,imx21-ssi";
-				reg = <0x10010000 0x1000>;
-				interrupts = <14>;
-				clocks = <&clks IMX27_CLK_SSI1_IPG_GATE>;
-				dmas = <&dma 12>, <&dma 13>, <&dma 14>, <&dma 15>;
-				dma-names = "rx0", "tx0", "rx1", "tx1";
-				fsl,fifo-depth = <8>;
-				status = "disabled";
-			};
-
-			ssi2: ssi@10011000 {
-				#sound-dai-cells = <0>;
-				compatible = "fsl,imx27-ssi", "fsl,imx21-ssi";
-				reg = <0x10011000 0x1000>;
-				interrupts = <13>;
-				clocks = <&clks IMX27_CLK_SSI2_IPG_GATE>;
-				dmas = <&dma 8>, <&dma 9>, <&dma 10>, <&dma 11>;
-				dma-names = "rx0", "tx0", "rx1", "tx1";
-				fsl,fifo-depth = <8>;
-				status = "disabled";
-			};
-
 			i2c1: i2c@10012000 {
 				#address-cells = <1>;
 				#size-cells = <0>;
 				compatible = "fsl,imx27-i2c", "fsl,imx21-i2c";
 				reg = <0x10012000 0x1000>;
 				interrupts = <12>;
-				clocks = <&clks IMX27_CLK_I2C1_IPG_GATE>;
-				status = "disabled";
-			};
-
-			sdhci1: sdhci@10013000 {
-				compatible = "fsl,imx27-mmc", "fsl,imx21-mmc";
-				reg = <0x10013000 0x1000>;
-				interrupts = <11>;
-				clocks = <&clks IMX27_CLK_SDHC1_IPG_GATE>,
-					 <&clks IMX27_CLK_PER2_GATE>;
-				clock-names = "ipg", "per";
-				dmas = <&dma 7>;
-				dma-names = "rx-tx";
+				clocks = <&clks 40>;
 				status = "disabled";
 			};
 
-			sdhci2: sdhci@10014000 {
-				compatible = "fsl,imx27-mmc", "fsl,imx21-mmc";
-				reg = <0x10014000 0x1000>;
-				interrupts = <10>;
-				clocks = <&clks IMX27_CLK_SDHC2_IPG_GATE>,
-					 <&clks IMX27_CLK_PER2_GATE>;
-				clock-names = "ipg", "per";
-				dmas = <&dma 6>;
-				dma-names = "rx-tx";
-				status = "disabled";
-			};
-
-			iomuxc: iomuxc@10015000 {
-				compatible = "fsl,imx27-iomuxc";
-				reg = <0x10015000 0x600>;
-				#address-cells = <1>;
-				#size-cells = <1>;
-				ranges;
-
-				gpio1: gpio@10015000 {
-					compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
-					reg = <0x10015000 0x100>;
-					clocks = <&clks IMX27_CLK_GPIO_IPG_GATE>;
-					interrupts = <8>;
-					gpio-controller;
-					#gpio-cells = <2>;
-					interrupt-controller;
-					#interrupt-cells = <2>;
-				};
-
-				gpio2: gpio@10015100 {
-					compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
-					reg = <0x10015100 0x100>;
-					clocks = <&clks IMX27_CLK_GPIO_IPG_GATE>;
-					interrupts = <8>;
-					gpio-controller;
-					#gpio-cells = <2>;
-					interrupt-controller;
-					#interrupt-cells = <2>;
-				};
-
-				gpio3: gpio@10015200 {
-					compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
-					reg = <0x10015200 0x100>;
-					clocks = <&clks IMX27_CLK_GPIO_IPG_GATE>;
-					interrupts = <8>;
-					gpio-controller;
-					#gpio-cells = <2>;
-					interrupt-controller;
-					#interrupt-cells = <2>;
-				};
-
-				gpio4: gpio@10015300 {
-					compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
-					reg = <0x10015300 0x100>;
-					clocks = <&clks IMX27_CLK_GPIO_IPG_GATE>;
-					interrupts = <8>;
-					gpio-controller;
-					#gpio-cells = <2>;
-					interrupt-controller;
-					#interrupt-cells = <2>;
-				};
-
-				gpio5: gpio@10015400 {
-					compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
-					reg = <0x10015400 0x100>;
-					clocks = <&clks IMX27_CLK_GPIO_IPG_GATE>;
-					interrupts = <8>;
-					gpio-controller;
-					#gpio-cells = <2>;
-					interrupt-controller;
-					#interrupt-cells = <2>;
-				};
-
-				gpio6: gpio@10015500 {
-					compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
-					reg = <0x10015500 0x100>;
-					clocks = <&clks IMX27_CLK_GPIO_IPG_GATE>;
-					interrupts = <8>;
-					gpio-controller;
-					#gpio-cells = <2>;
-					interrupt-controller;
-					#interrupt-cells = <2>;
-				};
-			};
-
-			audmux: audmux@10016000 {
-				compatible = "fsl,imx27-audmux", "fsl,imx21-audmux";
-				reg = <0x10016000 0x1000>;
-				clocks = <&clks IMX27_CLK_DUMMY>;
-				clock-names = "audmux";
-				status = "disabled";
+			gpio1: gpio@10015000 {
+				compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
+				reg = <0x10015000 0x100>;
+				interrupts = <8>;
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			gpio2: gpio@10015100 {
+				compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
+				reg = <0x10015100 0x100>;
+				interrupts = <8>;
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			gpio3: gpio@10015200 {
+				compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
+				reg = <0x10015200 0x100>;
+				interrupts = <8>;
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			gpio4: gpio@10015300 {
+				compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
+				reg = <0x10015300 0x100>;
+				interrupts = <8>;
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			gpio5: gpio@10015400 {
+				compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
+				reg = <0x10015400 0x100>;
+				interrupts = <8>;
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			gpio6: gpio@10015500 {
+				compatible = "fsl,imx27-gpio", "fsl,imx21-gpio";
+				reg = <0x10015500 0x100>;
+				interrupts = <8>;
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
 			};
 
 			cspi3: cspi@10017000 {
@@ -369,8 +223,7 @@
 				compatible = "fsl,imx27-cspi";
 				reg = <0x10017000 0x1000>;
 				interrupts = <6>;
-				clocks = <&clks IMX27_CLK_CSPI3_IPG_GATE>,
-					 <&clks IMX27_CLK_PER2_GATE>;
+				clocks = <&clks 51>, <&clks 51>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -379,8 +232,7 @@
 				compatible = "fsl,imx27-gpt", "fsl,imx1-gpt";
 				reg = <0x10019000 0x1000>;
 				interrupts = <4>;
-				clocks = <&clks IMX27_CLK_GPT4_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 43>, <&clks 61>;
 				clock-names = "ipg", "per";
 			};
 
@@ -388,8 +240,7 @@
 				compatible = "fsl,imx27-gpt", "fsl,imx1-gpt";
 				reg = <0x1001a000 0x1000>;
 				interrupts = <3>;
-				clocks = <&clks IMX27_CLK_GPT5_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 42>, <&clks 61>;
 				clock-names = "ipg", "per";
 			};
 
@@ -397,8 +248,7 @@
 				compatible = "fsl,imx27-uart", "fsl,imx21-uart";
 				reg = <0x1001b000 0x1000>;
 				interrupts = <49>;
-				clocks = <&clks IMX27_CLK_UART5_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 77>, <&clks 61>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -407,8 +257,7 @@
 				compatible = "fsl,imx27-uart", "fsl,imx21-uart";
 				reg = <0x1001c000 0x1000>;
 				interrupts = <48>;
-				clocks = <&clks IMX27_CLK_UART6_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 78>, <&clks 61>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -419,19 +268,7 @@
 				compatible = "fsl,imx27-i2c", "fsl,imx21-i2c";
 				reg = <0x1001d000 0x1000>;
 				interrupts = <1>;
-				clocks = <&clks IMX27_CLK_I2C2_IPG_GATE>;
-				status = "disabled";
-			};
-
-			sdhci3: sdhci@1001e000 {
-				compatible = "fsl,imx27-mmc", "fsl,imx21-mmc";
-				reg = <0x1001e000 0x1000>;
-				interrupts = <9>;
-				clocks = <&clks IMX27_CLK_SDHC3_IPG_GATE>,
-					 <&clks IMX27_CLK_PER2_GATE>;
-				clock-names = "ipg", "per";
-				dmas = <&dma 36>;
-				dma-names = "rx-tx";
+				clocks = <&clks 39>;
 				status = "disabled";
 			};
 
@@ -439,8 +276,7 @@
 				compatible = "fsl,imx27-gpt", "fsl,imx1-gpt";
 				reg = <0x1001f000 0x1000>;
 				interrupts = <2>;
-				clocks = <&clks IMX27_CLK_GPT6_IPG_GATE>,
-					 <&clks IMX27_CLK_PER1_GATE>;
+				clocks = <&clks 41>, <&clks 61>;
 				clock-names = "ipg", "per";
 			};
 		};
@@ -452,124 +288,32 @@
 			reg = <0x10020000 0x20000>;
 			ranges;
 
-			fb: fb@10021000 {
-				compatible = "fsl,imx27-fb", "fsl,imx21-fb";
-				interrupts = <61>;
-				reg = <0x10021000 0x1000>;
-				clocks = <&clks IMX27_CLK_LCDC_IPG_GATE>,
-					 <&clks IMX27_CLK_LCDC_AHB_GATE>,
-					 <&clks IMX27_CLK_PER3_GATE>;
-				clock-names = "ipg", "ahb", "per";
-				status = "disabled";
-			};
-
-			coda: coda@10023000 {
-				compatible = "fsl,imx27-vpu", "cnm,codadx6";
-				reg = <0x10023000 0x0200>;
-				interrupts = <53>;
-				clocks = <&clks IMX27_CLK_VPU_BAUD_GATE>,
-					 <&clks IMX27_CLK_VPU_AHB_GATE>;
-				clock-names = "per", "ahb";
-				iram = <&iram>;
-			};
-
-			usbotg: usb@10024000 {
-				compatible = "fsl,imx27-usb";
-				reg = <0x10024000 0x200>;
-				interrupts = <56>;
-				clocks = <&clks IMX27_CLK_USB_IPG_GATE>;
-				fsl,usbmisc = <&usbmisc 0>;
-				status = "disabled";
-			};
-
-			usbh1: usb@10024200 {
-				compatible = "fsl,imx27-usb";
-				reg = <0x10024200 0x200>;
-				interrupts = <54>;
-				clocks = <&clks IMX27_CLK_USB_IPG_GATE>;
-				fsl,usbmisc = <&usbmisc 1>;
-				status = "disabled";
-			};
-
-			usbh2: usb@10024400 {
-				compatible = "fsl,imx27-usb";
-				reg = <0x10024400 0x200>;
-				interrupts = <55>;
-				clocks = <&clks IMX27_CLK_USB_IPG_GATE>;
-				fsl,usbmisc = <&usbmisc 2>;
+			fec: ethernet@1002b000 {
+				compatible = "fsl,imx27-fec";
+				reg = <0x1002b000 0x1000>;
+				interrupts = <50>;
+				clocks = <&clks 48>, <&clks 67>, <&clks 0>;
+				clock-names = "ipg", "ahb", "ptp";
 				status = "disabled";
 			};
 
-			usbmisc: usbmisc@10024600 {
-				#index-cells = <1>;
-				compatible = "fsl,imx27-usbmisc";
-				reg = <0x10024600 0x200>;
-				clocks = <&clks IMX27_CLK_USB_AHB_GATE>;
-			};
-
-			sahara2: sahara@10025000 {
-				compatible = "fsl,imx27-sahara";
-				reg = <0x10025000 0x1000>;
-				interrupts = <59>;
-				clocks = <&clks IMX27_CLK_SAHARA_IPG_GATE>,
-					 <&clks IMX27_CLK_SAHARA_AHB_GATE>;
-				clock-names = "ipg", "ahb";
-			};
-
 			clks: ccm@10027000{
 				compatible = "fsl,imx27-ccm";
 				reg = <0x10027000 0x1000>;
 				#clock-cells = <1>;
 			};
-
-			iim: iim@10028000 {
-				compatible = "fsl,imx27-iim";
-				reg = <0x10028000 0x1000>;
-				interrupts = <62>;
-				clocks = <&clks IMX27_CLK_IIM_IPG_GATE>;
-			};
-
-			fec: ethernet@1002b000 {
-				compatible = "fsl,imx27-fec";
-				reg = <0x1002b000 0x4000>;
-				interrupts = <50>;
-				clocks = <&clks IMX27_CLK_FEC_IPG_GATE>,
-					 <&clks IMX27_CLK_FEC_AHB_GATE>;
-				clock-names = "ipg", "ahb";
-				status = "disabled";
-			};
 		};
 
+
 		nfc: nand@d8000000 {
 			#address-cells = <1>;
 			#size-cells = <1>;
+
 			compatible = "fsl,imx27-nand";
 			reg = <0xd8000000 0x1000>;
 			interrupts = <29>;
-			clocks = <&clks IMX27_CLK_NFC_BAUD_GATE>;
-			status = "disabled";
-		};
-
-		weim: weim@d8002000 {
-			#address-cells = <2>;
-			#size-cells = <1>;
-			compatible = "fsl,imx27-weim";
-			reg = <0xd8002000 0x1000>;
-			clocks = <&clks IMX27_CLK_EMI_AHB_GATE>;
-			ranges = <
-				0 0 0xc0000000 0x08000000
-				1 0 0xc8000000 0x08000000
-				2 0 0xd0000000 0x02000000
-				3 0 0xd2000000 0x02000000
-				4 0 0xd4000000 0x02000000
-				5 0 0xd6000000 0x02000000
-			>;
+			clocks = <&clks 54>;
 			status = "disabled";
 		};
-
-		iram: iram@ffff4c00 {
-			compatible = "mmio-sram";
-			reg = <0xffff4c00 0xb400>;
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/imx28-apf28.dts b/arch/arm/boot/dts/imx28-apf28.dts
--- a/arch/arm/boot/dts/imx28-apf28.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28-apf28.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,7 +10,7 @@
  */
 
 /dts-v1/;
-#include "imx28.dtsi"
+/include/ "imx28.dtsi"
 
 / {
 	model = "Armadeus Systems APF28 module";
diff -urNp a/arch/arm/boot/dts/imx28-apf28dev.dts b/arch/arm/boot/dts/imx28-apf28dev.dts
--- a/arch/arm/boot/dts/imx28-apf28dev.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28-apf28dev.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,7 +10,7 @@
  */
 
 /* APF28Dev is a docking board for the APF28 SOM */
-#include "imx28-apf28.dts"
+/include/ "imx28-apf28.dts"
 
 / {
 	model = "Armadeus Systems APF28Dev docking/development board";
@@ -41,41 +41,30 @@
 				hog_pins_apf28dev: hog@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_LCD_D16__GPIO_1_16
-						MX28_PAD_LCD_D17__GPIO_1_17
-						MX28_PAD_LCD_D18__GPIO_1_18
-						MX28_PAD_LCD_D19__GPIO_1_19
-						MX28_PAD_LCD_D20__GPIO_1_20
-						MX28_PAD_LCD_D21__GPIO_1_21
-						MX28_PAD_LCD_D22__GPIO_1_22
-						MX28_PAD_GPMI_CE1N__GPIO_0_17
+						0x1103 /* MX28_PAD_LCD_D16__GPIO_1_16 */
+						0x1113 /* MX28_PAD_LCD_D17__GPIO_1_17 */
+						0x1123 /* MX28_PAD_LCD_D18__GPIO_1_18 */
+						0x1133 /* MX28_PAD_LCD_D19__GPIO_1_19 */
+						0x1143 /* MX28_PAD_LCD_D20__GPIO_1_20 */
+						0x1153 /* MX28_PAD_LCD_D21__GPIO_1_21 */
+						0x1163 /* MX28_PAD_LCD_D22__GPIO_1_22 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				lcdif_pins_apf28dev: lcdif-apf28dev@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_LCD_RD_E__LCD_VSYNC
-						MX28_PAD_LCD_WR_RWN__LCD_HSYNC
-						MX28_PAD_LCD_RS__LCD_DOTCLK
-						MX28_PAD_LCD_CS__LCD_ENABLE
+						0x1181 /* MX28_PAD_LCD_RD_E__LCD_VSYNC */
+						0x1191 /* MX28_PAD_LCD_WR_RWN__LCD_HSYNC */
+						0x11a1 /* MX28_PAD_LCD_RS__LCD_DOTCLK */
+						0x11b1 /* MX28_PAD_LCD_CS__LCD_ENABLE */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				usb0_otg_apf28dev: otg-apf28dev@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_LCD_D23__GPIO_1_23
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 			};
 
@@ -83,10 +72,10 @@
 				pinctrl-names = "default";
 				pinctrl-0 = <&lcdif_16bit_pins_a
 						&lcdif_pins_apf28dev>;
-				display = <&display0>;
+				display = <&display>;
 				status = "okay";
 
-				display0: display0 {
+				display: display {
 					bits-per-pixel = <16>;
 					bus-width = <16>;
 
@@ -114,7 +103,6 @@
 
 		apbx@80040000 {
 			lradc@80050000 {
-				fsl,lradc-touchscreen-wires = <4>;
 				status = "okay";
 			};
 
@@ -142,8 +130,6 @@
 
 	ahb@80080000 {
 		usb0: usb@80080000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&usb0_otg_apf28dev>;
 			vbus-supply = <&reg_usb0_vbus>;
 			status = "okay";
 		};
@@ -163,17 +149,13 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_usb0_vbus: regulator@0 {
+		reg_usb0_vbus: usb0_vbus {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "usb0_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			gpio = <&gpio1 23 1>;
-			enable-active-high;
 		};
 	};
 
@@ -194,14 +176,4 @@
 		brightness-levels = <0 4 8 16 32 64 128 255>;
 		default-brightness-level = <6>;
 	};
-
-	gpio-keys {
-		compatible = "gpio-keys";
-
-		user-button {
-			label = "User button";
-			gpios = <&gpio0 17 0>;
-			linux,code = <0x100>;
-		};
-	};
 };
diff -urNp a/arch/arm/boot/dts/imx28-apx4devkit.dts b/arch/arm/boot/dts/imx28-apx4devkit.dts
--- a/arch/arm/boot/dts/imx28-apx4devkit.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28-apx4devkit.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,5 +1,5 @@
 /dts-v1/;
-#include "imx28.dtsi"
+/include/ "imx28.dtsi"
 
 / {
 	model = "Bluegiga APX4 Development Kit";
@@ -40,53 +40,53 @@
 				hog_pins_a: hog@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_CE1N__GPIO_0_17
-						MX28_PAD_GPMI_RDY1__GPIO_0_21
-						MX28_PAD_SSP2_MISO__GPIO_2_18
-						MX28_PAD_SSP2_SS0__AUART3_TX /* was: 0x2131 - MX28_PAD_SSP2_SS0__GPIO_2_19 */
-						MX28_PAD_PWM3__GPIO_3_28
-						MX28_PAD_LCD_RESET__GPIO_3_30
-						MX28_PAD_JTAG_RTCK__GPIO_4_20
+						0x0113 /* MX28_PAD_GPMI_CE1N__GPIO_0_17 */
+						0x0153 /* MX28_PAD_GPMI_RDY1__GPIO_0_21 */
+						0x2123 /* MX28_PAD_SSP2_MISO__GPIO_2_18 */
+						0x2131 /* MX28_PAD_SSP2_SS0__GPIO_2_19 */
+						0x31c3 /* MX28_PAD_PWM3__GPIO_3_28 */
+						0x31e3 /* MX28_PAD_LCD_RESET__GPIO_3_30 */
+						0x4143 /* MX28_PAD_JTAG_RTCK__GPIO_4_20 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				lcdif_pins_apx4: lcdif-apx4@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_LCD_RD_E__LCD_VSYNC
-						MX28_PAD_LCD_WR_RWN__LCD_HSYNC
-						MX28_PAD_LCD_RS__LCD_DOTCLK
-						MX28_PAD_LCD_CS__LCD_ENABLE
+						0x1181 /* MX28_PAD_LCD_RD_E__LCD_VSYNC */
+						0x1191 /* MX28_PAD_LCD_WR_RWN__LCD_HSYNC */
+						0x11a1 /* MX28_PAD_LCD_RS__LCD_DOTCLK */
+						0x11b1 /* MX28_PAD_LCD_CS__LCD_ENABLE */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				mmc2_4bit_pins_apx4: mmc2-4bit-apx4@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP0_DATA4__SSP2_D0
-						MX28_PAD_SSP0_DATA5__SSP2_D3
-						MX28_PAD_SSP0_DATA6__SSP2_CMD
-						MX28_PAD_SSP0_DATA7__SSP2_SCK
-						MX28_PAD_SSP2_SS1__SSP2_D1
-						MX28_PAD_SSP2_SS2__SSP2_D2
+						0x2041 /* MX28_PAD_SSP0_DATA4__SSP2_D0 */
+						0x2051 /* MX28_PAD_SSP0_DATA5__SSP2_D3 */
+						0x2061 /* MX28_PAD_SSP0_DATA6__SSP2_CMD */
+						0x2071 /* MX28_PAD_SSP0_DATA7__SSP2_SCK */
+						0x2141 /* MX28_PAD_SSP2_SS1__SSP2_D1 */
+						0x2151 /* MX28_PAD_SSP2_SS2__SSP2_D2 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				mmc2_sck_cfg_apx4: mmc2-sck-cfg-apx4 {
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP0_DATA7__SSP2_SCK
+						0x2071 /* MX28_PAD_SSP0_DATA7__SSP2_SCK */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <2>;
+					fsl,pull-up = <0>;
 				};
 			};
 
@@ -94,10 +94,10 @@
 				pinctrl-names = "default";
 				pinctrl-0 = <&lcdif_24bit_pins_a
 					     &lcdif_pins_apx4>;
-				display = <&display0>;
+				display = <&display>;
 				status = "okay";
 
-				display0: display0 {
+				display: display {
 					bits-per-pixel = <32>;
 					bus-width = <24>;
 
@@ -147,7 +147,7 @@
 					reg = <0x0a>;
 					VDDA-supply = <&reg_3p3v>;
 					VDDIO-supply = <&reg_3p3v>;
-					clocks = <&saif0>;
+
 				};
 
 				pcf8563: rtc@51 {
@@ -193,12 +193,9 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_3p3v: regulator@0 {
+		reg_3p3v: 3p3v {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "3P3V";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
diff -urNp a/arch/arm/boot/dts/imx28-cfa10036.dts b/arch/arm/boot/dts/imx28-cfa10036.dts
--- a/arch/arm/boot/dts/imx28-cfa10036.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28-cfa10036.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,7 +10,7 @@
  */
 
 /dts-v1/;
-#include "imx28.dtsi"
+/include/ "imx28.dtsi"
 
 / {
 	model = "Crystalfontz CFA-10036 Board";
@@ -23,47 +23,28 @@
 	apb@80000000 {
 		apbh@80000000 {
 			pinctrl@80018000 {
-				ssd1306_cfa10036: ssd1306-10036@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_SSP0_DATA7__GPIO_2_7
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				led_pins_cfa10036: leds-10036@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_AUART1_RX__GPIO_3_4
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
+				pinctrl-names = "default";
+				pinctrl-0 = <&hog_pins_cfa10036>;
 
-				usb0_otg_cfa10036: otg-10036@0 {
+				hog_pins_cfa10036: hog-10036@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_RDY0__USB0_ID
+						0x2073 /* MX28_PAD_SSP0_D7__GPIO_2_7 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
-				mmc_pwr_cfa10036: mmc_pwr_cfa10036@0 {
+				led_pins_cfa10036: leds-10036@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						0x31c3 /*
-						MX28_PAD_PWM3__GPIO_3_28 */
+						0x3043 /* MX28_PAD_AUART1_RX__GPIO_3_4 */
 					>;
 					fsl,drive-strength = <0>;
 					fsl,voltage = <1>;
 					fsl,pull-up = <0>;
 				};
-
 			};
 
 			ssp0: ssp@80010000 {
@@ -71,13 +52,18 @@
 				pinctrl-names = "default";
 				pinctrl-0 = <&mmc0_4bit_pins_a
 					&mmc0_cd_cfg &mmc0_sck_cfg>;
-				vmmc-supply = <&reg_vddio_sd0>;
 				bus-width = <4>;
 				status = "okay";
 			};
 		};
 
 		apbx@80040000 {
+			pwm: pwm@80064000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&pwm4_pins_a>;
+				status = "okay";
+			};
+
 			duart: serial@80074000 {
 				pinctrl-names = "default";
 				pinctrl-0 = <&duart_pins_b>;
@@ -87,34 +73,15 @@
 			i2c0: i2c@80058000 {
 				pinctrl-names = "default";
 				pinctrl-0 = <&i2c0_pins_b>;
-				clock-frequency = <400000>;
 				status = "okay";
 
-				ssd1306: oled@3c {
-					compatible = "solomon,ssd1306fb-i2c";
-					pinctrl-names = "default";
-					pinctrl-0 = <&ssd1306_cfa10036>;
+				ssd1307: oled@3c {
+					compatible = "solomon,ssd1307fb-i2c";
 					reg = <0x3c>;
+					pwms = <&pwm 4 3000>;
 					reset-gpios = <&gpio2 7 0>;
-					solomon,height = <32>;
-					solomon,width = <128>;
-					solomon,page-offset = <0>;
 				};
 			};
-
-			usbphy0: usbphy@8007c000 {
-				status = "okay";
-			};
-		};
-	};
-
-	ahb@80080000 {
-		usb0: usb@80080000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&usb0_otg_cfa10036>;
-			dr_mode = "peripheral";
-			phy_type = "utmi";
-			status = "okay";
 		};
 	};
 
@@ -128,14 +95,4 @@
 			default-state = "on";
 		};
 	};
-
-	reg_vddio_sd0: vddio-sd0 {
-		compatible = "regulator-fixed";
-		pinctrl-names = "default";
-		pinctrl-0 = <&mmc_pwr_cfa10036>;
-		regulator-name = "vddio-sd0";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		gpio = <&gpio3 28 0>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/imx28-cfa10037.dts b/arch/arm/boot/dts/imx28-cfa10037.dts
--- a/arch/arm/boot/dts/imx28-cfa10037.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28-cfa10037.dts	2015-10-27 00:45:05.000000000 +0000
@@ -13,7 +13,7 @@
  * The CFA-10049 is an expansion board for the CFA-10036 module, thus we
  * need to include the CFA-10036 DTS.
  */
-#include "imx28-cfa10036.dts"
+/include/ "imx28-cfa10036.dts"
 
 / {
 	model = "Crystalfontz CFA-10037 Board";
@@ -22,24 +22,18 @@
 	apb@80000000 {
 		apbh@80000000 {
 			pinctrl@80018000 {
-				usb_pins_cfa10037: usb-10037@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_D07__GPIO_0_7
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
+				pinctrl-names = "default", "default";
+				pinctrl-1 = <&hog_pins_cfa10037>;
 
-				mac0_pins_cfa10037: mac0-10037@0 {
+				hog_pins_cfa10037: hog-10037@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP2_SS2__GPIO_2_21
+						0x0073 /* MX28_PAD_GPMI_D7__GPIO_0_7 */
+						0x2153 /* MX28_PAD_SSP2_D5__GPIO_2_21 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 			};
 		};
@@ -54,7 +48,7 @@
 	ahb@80080000 {
 		usb1: usb@80090000 {
 			vbus-supply = <&reg_usb1_vbus>;
-			pinctrl-0 = <&usb1_pins_a>;
+			pinctrl-0 = <&usbphy1_pins_a>;
 			pinctrl-names = "default";
 			status = "okay";
 		};
@@ -62,8 +56,7 @@
 		mac0: ethernet@800f0000 {
 			phy-mode = "rmii";
 			pinctrl-names = "default";
-			pinctrl-0 = <&mac0_pins_a
-				&mac0_pins_cfa10037>;
+			pinctrl-0 = <&mac0_pins_a>;
 			phy-reset-gpios = <&gpio2 21 0>;
 			phy-reset-duration = <100>;
 			status = "okay";
@@ -72,14 +65,9 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_usb1_vbus: regulator@0 {
+		reg_usb1_vbus: usb1_vbus {
 			compatible = "regulator-fixed";
-			reg = <0>;
-			pinctrl-names = "default";
-			pinctrl-0 = <&usb_pins_cfa10037>;
 			regulator-name = "usb1_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
diff -urNp a/arch/arm/boot/dts/imx28-cfa10049.dts b/arch/arm/boot/dts/imx28-cfa10049.dts
--- a/arch/arm/boot/dts/imx28-cfa10049.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28-cfa10049.dts	2015-10-27 00:45:05.000000000 +0000
@@ -13,7 +13,7 @@
  * The CFA-10049 is an expansion board for the CFA-10036 module, thus we
  * need to include the CFA-10036 DTS.
  */
-#include "imx28-cfa10036.dts"
+/include/ "imx28-cfa10036.dts"
 
 / {
 	model = "Crystalfontz CFA-10049 Board";
@@ -22,165 +22,123 @@
 	apb@80000000 {
 		apbh@80000000 {
 			pinctrl@80018000 {
-				usb_pins_cfa10049: usb-10049@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_D07__GPIO_0_7
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				i2cmux_pins_cfa10049: i2cmux-10049@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_LCD_D22__GPIO_1_22
-						MX28_PAD_LCD_D23__GPIO_1_23
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				mac0_pins_cfa10049: mac0-10049@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_SSP2_SS2__GPIO_2_21
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				pca_pins_cfa10049: pca-10049@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_SSP2_SS0__GPIO_2_19
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
-				};
+				pinctrl-names = "default", "default";
+				pinctrl-1 = <&hog_pins_cfa10049
+					&hog_pins_cfa10049_pullup>;
 
-				rotary_pins_cfa10049: rotary-10049@0 {
+				hog_pins_cfa10049: hog-10049@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_I2C0_SCL__GPIO_3_24
-						MX28_PAD_I2C0_SDA__GPIO_3_25
+						0x0073 /* MX28_PAD_GPMI_D7__GPIO_0_7 */
+						0x1163 /* MX28_PAD_LCD_D22__GPIO_1_22 */
+						0x1173 /* MX28_PAD_LCD_D22__GPIO_1_23 */
+						0x2153 /* MX28_PAD_SSP2_D5__GPIO_2_21 */
+						0x3173 /* MX28_PAD_LCD_RESET__GPIO_3_23 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
-				rotary_btn_pins_cfa10049: rotary-btn-10049@0 {
+				hog_pins_cfa10049_pullup: hog-10049-pullup@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SAIF1_SDATA0__GPIO_3_26
+						0x2133 /* MX28_PAD_SSP2_D3__GPIO_2_19 */
+						0x3183 /* MX28_PAD_I2C0_SCL__GPIO_3_24 */
+						0x3193 /* MX28_PAD_I2C0_SDA__GPIO_3_25 */
+						0x31a3 /* MX28_PAD_SAIF_SDATA0__GPIO_3_26 */
+						0x31e3 /* MX28_PAD_LCD_RESET__GPIO_3_30 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				spi2_pins_cfa10049: spi2-cfa10049@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP2_SCK__GPIO_2_16
-						MX28_PAD_SSP2_MOSI__GPIO_2_17
-						MX28_PAD_SSP2_MISO__GPIO_2_18
-						MX28_PAD_AUART1_TX__GPIO_3_5
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x2103 /* MX28_PAD_SSP2_SCK__GPIO_2_16 */
+						0x2113 /* MX28_PAD_SSP2_CMD__GPIO_2_17 */
+						0x2123 /* MX28_PAD_SSP2_D0__GPIO_2_18 */
+					>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				spi3_pins_cfa10049: spi3-cfa10049@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_RDN__GPIO_0_24
-						MX28_PAD_GPMI_RESETN__GPIO_0_28
-						MX28_PAD_GPMI_CE1N__GPIO_0_17
-						MX28_PAD_GPMI_ALE__GPIO_0_26
-						MX28_PAD_GPMI_CLE__GPIO_0_27
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x0183 /* MX28_PAD_GPMI_RDN__GPIO_0_24 */
+						0x01c3 /* MX28_PAD_GPMI_RESETN__GPIO_0_28 */
+						0x0113 /* MX28_PAD_GPMI_CE1N__GPIO_0_17 */
+						0x01a3 /* MX28_PAD_GPMI_ALE__GPIO_0_26 */
+						0x01b3 /* MX28_PAD_GPMI_CLE__GPIO_0_27 */
+					>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				lcdif_18bit_pins_cfa10049: lcdif-18bit@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_LCD_D00__LCD_D0
-						MX28_PAD_LCD_D01__LCD_D1
-						MX28_PAD_LCD_D02__LCD_D2
-						MX28_PAD_LCD_D03__LCD_D3
-						MX28_PAD_LCD_D04__LCD_D4
-						MX28_PAD_LCD_D05__LCD_D5
-						MX28_PAD_LCD_D06__LCD_D6
-						MX28_PAD_LCD_D07__LCD_D7
-						MX28_PAD_LCD_D08__LCD_D8
-						MX28_PAD_LCD_D09__LCD_D9
-						MX28_PAD_LCD_D10__LCD_D10
-						MX28_PAD_LCD_D11__LCD_D11
-						MX28_PAD_LCD_D12__LCD_D12
-						MX28_PAD_LCD_D13__LCD_D13
-						MX28_PAD_LCD_D14__LCD_D14
-						MX28_PAD_LCD_D15__LCD_D15
-						MX28_PAD_LCD_D16__LCD_D16
-						MX28_PAD_LCD_D17__LCD_D17
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x1000 /* MX28_PAD_LCD_D00__LCD_D0 */
+						0x1010 /* MX28_PAD_LCD_D01__LCD_D1 */
+						0x1020 /* MX28_PAD_LCD_D02__LCD_D2 */
+						0x1030 /* MX28_PAD_LCD_D03__LCD_D3 */
+						0x1040 /* MX28_PAD_LCD_D04__LCD_D4 */
+						0x1050 /* MX28_PAD_LCD_D05__LCD_D5 */
+						0x1060 /* MX28_PAD_LCD_D06__LCD_D6 */
+						0x1070 /* MX28_PAD_LCD_D07__LCD_D7 */
+						0x1080 /* MX28_PAD_LCD_D08__LCD_D8 */
+						0x1090 /* MX28_PAD_LCD_D09__LCD_D9 */
+						0x10a0 /* MX28_PAD_LCD_D10__LCD_D10 */
+						0x10b0 /* MX28_PAD_LCD_D11__LCD_D11 */
+						0x10c0 /* MX28_PAD_LCD_D12__LCD_D12 */
+						0x10d0 /* MX28_PAD_LCD_D13__LCD_D13 */
+						0x10e0 /* MX28_PAD_LCD_D14__LCD_D14 */
+						0x10f0 /* MX28_PAD_LCD_D15__LCD_D15 */
+						0x1100 /* MX28_PAD_LCD_D16__LCD_D16 */
+						0x1110 /* MX28_PAD_LCD_D17__LCD_D17 */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				lcdif_pins_cfa10049: lcdif-evk@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_LCD_RD_E__LCD_VSYNC
-						MX28_PAD_LCD_WR_RWN__LCD_HSYNC
-						MX28_PAD_LCD_RS__LCD_DOTCLK
-						MX28_PAD_LCD_CS__LCD_ENABLE
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				lcdif_pins_cfa10049_pullup: lcdif-10049-pullup@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_LCD_RESET__GPIO_3_30
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x1181 /* MX28_PAD_LCD_RD_E__LCD_VSYNC */
+						0x1191 /* MX28_PAD_LCD_WR_RWN__LCD_HSYNC */
+						0x11a1 /* MX28_PAD_LCD_RS__LCD_DOTCLK */
+						0x11b1 /* MX28_PAD_LCD_CS__LCD_ENABLE */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				w1_gpio_pins: w1-gpio@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_LCD_D21__GPIO_1_21
+						0x1153 /* MX28_PAD_LCD_D21__GPIO_1_21 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>; /* 0 will enable the keeper */
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>; /* 0 will enable the keeper */
 				};
 			};
 
 			lcdif@80030000 {
 				pinctrl-names = "default";
 				pinctrl-0 = <&lcdif_18bit_pins_cfa10049
-					     &lcdif_pins_cfa10049
-					     &lcdif_pins_cfa10049_pullup>;
-				display = <&display0>;
+					     &lcdif_pins_cfa10049>;
+				display = <&display>;
 				status = "okay";
 
-				display0: display0 {
+				display: display {
 					bits-per-pixel = <32>;
 					bus-width = <18>;
 
@@ -208,8 +166,8 @@
 
 		apbx@80040000 {
 			pwm: pwm@80064000 {
-				pinctrl-names = "default";
-				pinctrl-0 = <&pwm3_pins_b>;
+				pinctrl-names = "default", "default";
+				pinctrl-1 = <&pwm3_pins_b>;
 				status = "okay";
 			};
 
@@ -223,45 +181,19 @@
 				compatible = "i2c-mux-gpio";
 				#address-cells = <1>;
 				#size-cells = <0>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&i2cmux_pins_cfa10049>;
 				mux-gpios = <&gpio1 22 0 &gpio1 23 0>;
 				i2c-parent = <&i2c1>;
 
 				i2c@0 {
-					#address-cells = <1>;
-					#size-cells = <0>;
 					reg = <0>;
-
-					adc0: nau7802@2a {
-						compatible = "nuvoton,nau7802";
-						reg = <0x2a>;
-						nuvoton,vldo = <3000>;
-					};
 				};
 
 				i2c@1 {
-					#address-cells = <1>;
-					#size-cells = <0>;
 					reg = <1>;
-
-					adc1: nau7802@2a {
-						compatible = "nuvoton,nau7802";
-						reg = <0x2a>;
-						nuvoton,vldo = <3000>;
-					};
 				};
 
 				i2c@2 {
-					#address-cells = <1>;
-					#size-cells = <0>;
 					reg = <2>;
-
-					adc2: nau7802@2a {
-						compatible = "nuvoton,nau7802";
-						reg = <0x2a>;
-						nuvoton,vldo = <3000>;
-					};
 				};
 
 				i2c@3 {
@@ -271,8 +203,6 @@
 
 					pca9555: pca9555@20 {
 						compatible = "nxp,pca9555";
-						pinctrl-names = "default";
-						pinctrl-0 = <&pca_pins_cfa10049>;
 						interrupt-parent = <&gpio2>;
 						interrupts = <19 0x2>;
 						gpio-controller;
@@ -298,7 +228,7 @@
 	ahb@80080000 {
 		usb1: usb@80090000 {
 			vbus-supply = <&reg_usb1_vbus>;
-			pinctrl-0 = <&usb1_pins_a>;
+			pinctrl-0 = <&usbphy1_pins_a>;
 			pinctrl-names = "default";
 			status = "okay";
 		};
@@ -306,14 +236,9 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_usb1_vbus: regulator@0 {
+		reg_usb1_vbus: usb1_vbus {
 			compatible = "regulator-fixed";
-			reg = <0>;
-			pinctrl-names = "default";
-			pinctrl-0 = <&usb_pins_cfa10049>;
 			regulator-name = "usb1_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
@@ -325,8 +250,7 @@
 		mac0: ethernet@800f0000 {
 			phy-mode = "rmii";
 			pinctrl-names = "default";
-			pinctrl-0 = <&mac0_pins_a
-				&mac0_pins_cfa10049>;
+			pinctrl-0 = <&mac0_pins_a>;
 			phy-reset-gpios = <&gpio2 21 0>;
 			phy-reset-duration = <100>;
 			status = "okay";
@@ -341,7 +265,7 @@
 		gpio-sck = <&gpio2 16 0>;
 		gpio-mosi = <&gpio2 17 0>;
 		gpio-miso = <&gpio2 18 0>;
-		cs-gpios = <&gpio3 5 0>;
+		cs-gpios = <&gpio3 23 0>;
 		num-chipselects = <1>;
 		#address-cells = <1>;
 		#size-cells = <0>;
@@ -396,8 +320,6 @@
 
 	gpio_keys {
 		compatible = "gpio-keys";
-		pinctrl-names = "default";
-		pinctrl-0 = <&rotary_btn_pins_cfa10049>;
 		#address-cells = <1>;
 		#size-cells = <0>;
 
@@ -411,8 +333,6 @@
 
 	rotary {
 		compatible = "rotary-encoder";
-		pinctrl-names = "default";
-		pinctrl-0 = <&rotary_pins_cfa10049>;
 		gpios = <&gpio3 24 1>, <&gpio3 25 1>;
 		linux,axis = <1>; /* REL_Y */
 		rotary-encoder,relative-axis;
diff -urNp a/arch/arm/boot/dts/imx28-evk.dts b/arch/arm/boot/dts/imx28-evk.dts
--- a/arch/arm/boot/dts/imx28-evk.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28-evk.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,7 +10,7 @@
  */
 
 /dts-v1/;
-#include "imx28.dtsi"
+/include/ "imx28.dtsi"
 
 / {
 	model = "Freescale i.MX28 Evaluation Kit";
@@ -70,52 +70,52 @@
 				hog_pins_a: hog@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP1_CMD__GPIO_2_13
-						MX28_PAD_SSP1_DATA3__GPIO_2_15
-						MX28_PAD_ENET0_RX_CLK__GPIO_4_13
-						MX28_PAD_SSP1_SCK__GPIO_2_12
-						MX28_PAD_PWM3__GPIO_3_28
-						MX28_PAD_LCD_RESET__GPIO_3_30
-						MX28_PAD_AUART2_RX__GPIO_3_8
-						MX28_PAD_AUART2_TX__GPIO_3_9
+						0x20d3 /* MX28_PAD_SSP1_CMD__GPIO_2_13 */
+						0x20f3 /* MX28_PAD_SSP1_DATA3__GPIO_2_15 */
+						0x40d3 /* MX28_PAD_ENET0_RX_CLK__GPIO_4_13 */
+						0x20c3 /* MX28_PAD_SSP1_SCK__GPIO_2_12 */
+						0x31c3 /* MX28_PAD_PWM3__GPIO_3_28 */
+						0x31e3 /* MX28_PAD_LCD_RESET__GPIO_3_30 */
+						0x3083 /* MX28_PAD_AUART2_RX__GPIO_3_8 */
+						0x3093 /* MX28_PAD_AUART2_TX__GPIO_3_9 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				led_pin_gpio3_5: led_gpio3_5@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_AUART1_TX__GPIO_3_5
+						0x3053 /* MX28_PAD_AUART1_TX__GPIO_3_5 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				gpmi_pins_evk: gpmi-nand-evk@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_CE1N__GPMI_CE1N
-						MX28_PAD_GPMI_RDY1__GPMI_READY1
+						0x0110 /* MX28_PAD_GPMI_CE1N__GPMI_CE1N */
+						0x0150 /* MX28_PAD_GPMI_RDY1__GPMI_READY1 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				lcdif_pins_evk: lcdif-evk@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_LCD_RD_E__LCD_VSYNC
-						MX28_PAD_LCD_WR_RWN__LCD_HSYNC
-						MX28_PAD_LCD_RS__LCD_DOTCLK
-						MX28_PAD_LCD_CS__LCD_ENABLE
+						0x1181 /* MX28_PAD_LCD_RD_E__LCD_VSYNC */
+						0x1191 /* MX28_PAD_LCD_WR_RWN__LCD_HSYNC */
+						0x11a1 /* MX28_PAD_LCD_RS__LCD_DOTCLK */
+						0x11b1 /* MX28_PAD_LCD_CS__LCD_ENABLE */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 			};
 
@@ -124,10 +124,10 @@
 				pinctrl-0 = <&lcdif_24bit_pins_a
 					     &lcdif_pins_evk>;
 				lcd-supply = <&reg_lcd_3v3>;
-				display = <&display0>;
+				display = <&display>;
 				status = "okay";
 
-				display0: display0 {
+				display: display {
 					bits-per-pixel = <32>;
 					bus-width = <24>;
 
@@ -155,14 +155,12 @@
 			can0: can@80032000 {
 				pinctrl-names = "default";
 				pinctrl-0 = <&can0_pins_a>;
-				xceiver-supply = <&reg_can_3v3>;
 				status = "okay";
 			};
 
 			can1: can@80034000 {
 				pinctrl-names = "default";
 				pinctrl-0 = <&can1_pins_a>;
-				xceiver-supply = <&reg_can_3v3>;
 				status = "okay";
 			};
 		};
@@ -183,10 +181,6 @@
 
 			lradc@80050000 {
 				status = "okay";
-				fsl,lradc-touchscreen-wires = <4>;
-				fsl,ave-ctrl = <4>;
-				fsl,ave-delay = <2>;
-				fsl,settling = <10>;
 			};
 
 			i2c0: i2c@80058000 {
@@ -199,7 +193,7 @@
 					reg = <0x0a>;
 					VDDA-supply = <&reg_3p3v>;
 					VDDIO-supply = <&reg_3p3v>;
-					clocks = <&saif0>;
+
 				};
 
 				at24@51 {
@@ -224,7 +218,6 @@
 			auart0: serial@8006a000 {
 				pinctrl-names = "default";
 				pinctrl-0 = <&auart0_pins_a>;
-				fsl,uart-has-rtscts;
 				status = "okay";
 			};
 
@@ -246,8 +239,6 @@
 
 	ahb@80080000 {
 		usb0: usb@80080000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&usb0_id_pins_a>;
 			vbus-supply = <&reg_usb0_vbus>;
 			status = "okay";
 		};
@@ -277,39 +268,33 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_3p3v: regulator@0 {
+		reg_3p3v: 3p3v {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "3P3V";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			regulator-always-on;
 		};
 
-		reg_vddio_sd0: regulator@1 {
+		reg_vddio_sd0: vddio-sd0 {
 			compatible = "regulator-fixed";
-			reg = <1>;
 			regulator-name = "vddio-sd0";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			gpio = <&gpio3 28 0>;
 		};
 
-		reg_fec_3v3: regulator@2 {
+		reg_fec_3v3: fec-3v3 {
 			compatible = "regulator-fixed";
-			reg = <2>;
 			regulator-name = "fec-3v3";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			gpio = <&gpio2 15 0>;
 		};
 
-		reg_usb0_vbus: regulator@3 {
+		reg_usb0_vbus: usb0_vbus {
 			compatible = "regulator-fixed";
-			reg = <3>;
 			regulator-name = "usb0_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
@@ -317,9 +302,8 @@
 			enable-active-high;
 		};
 
-		reg_usb1_vbus: regulator@4 {
+		reg_usb1_vbus: usb1_vbus {
 			compatible = "regulator-fixed";
-			reg = <4>;
 			regulator-name = "usb1_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
@@ -327,26 +311,14 @@
 			enable-active-high;
 		};
 
-		reg_lcd_3v3: regulator@5 {
+		reg_lcd_3v3: lcd-3v3 {
 			compatible = "regulator-fixed";
-			reg = <5>;
 			regulator-name = "lcd-3v3";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			gpio = <&gpio3 30 0>;
 			enable-active-high;
 		};
-
-		reg_can_3v3: regulator@6 {
-			compatible = "regulator-fixed";
-			reg = <6>;
-			regulator-name = "can-3v3";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			gpio = <&gpio2 13 0>;
-			enable-active-high;
-		};
-
 	};
 
 	sound {
diff -urNp a/arch/arm/boot/dts/imx28-m28evk.dts b/arch/arm/boot/dts/imx28-m28evk.dts
--- a/arch/arm/boot/dts/imx28-m28evk.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28-m28evk.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,14 +10,52 @@
  */
 
 /dts-v1/;
-#include "imx28-m28.dtsi"
+/include/ "imx28.dtsi"
 
 / {
 	model = "DENX M28EVK";
 	compatible = "denx,m28evk", "fsl,imx28";
 
+	memory {
+		reg = <0x40000000 0x08000000>;
+	};
+
 	apb@80000000 {
 		apbh@80000000 {
+			gpmi-nand@8000c000 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				pinctrl-names = "default";
+				pinctrl-0 = <&gpmi_pins_a &gpmi_status_cfg>;
+				status = "okay";
+
+				partition@0 {
+					label = "bootloader";
+					reg = <0x00000000 0x00300000>;
+					read-only;
+				};
+
+				partition@1 {
+					label = "environment";
+					reg = <0x00300000 0x00080000>;
+				};
+
+				partition@2 {
+					label = "redundant-environment";
+					reg = <0x00380000 0x00080000>;
+				};
+
+				partition@3 {
+					label = "kernel";
+					reg = <0x00400000 0x00400000>;
+				};
+
+				partition@4 {
+					label = "filesystem";
+					reg = <0x00800000 0x0f800000>;
+				};
+			};
+
 			ssp0: ssp@80010000 {
 				compatible = "fsl,imx28-mmc";
 				pinctrl-names = "default";
@@ -54,26 +92,26 @@
 				hog_pins_a: hog@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_PWM3__GPIO_3_28
-						MX28_PAD_AUART2_CTS__GPIO_3_10
-						MX28_PAD_AUART2_RTS__GPIO_3_11
-						MX28_PAD_AUART3_RX__GPIO_3_12
-						MX28_PAD_AUART3_TX__GPIO_3_13
+						0x31c3 /* MX28_PAD_PWM3__GPIO_3_28 */
+						0x30a3 /* MX28_PAD_AUART2_CTS__GPIO_3_10 */
+						0x30b3 /* MX28_PAD_AUART2_RTS__GPIO_3_11 */
+						0x30c3 /* MX28_PAD_AUART3_RX__GPIO_3_12 */
+						0x30d3 /* MX28_PAD_AUART3_TX__GPIO_3_13 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				lcdif_pins_m28: lcdif-m28@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_LCD_DOTCLK__LCD_DOTCLK
-						MX28_PAD_LCD_ENABLE__LCD_ENABLE
+						0x11e0 /* MX28_PAD_LCD_DOTCLK__LCD_DOTCLK */
+						0x11f0 /* MX28_PAD_LCD_ENABLE__LCD_ENABLE */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 			};
 
@@ -81,10 +119,10 @@
 				pinctrl-names = "default";
 				pinctrl-0 = <&lcdif_24bit_pins_a
 					     &lcdif_pins_m28>;
-				display = <&display0>;
+				display = <&display>;
 				status = "okay";
 
-				display0: display0 {
+				display: display {
 					bits-per-pixel = <16>;
 					bus-width = <18>;
 
@@ -137,12 +175,16 @@
 			};
 
 			i2c0: i2c@80058000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&i2c0_pins_a>;
+				status = "okay";
+
 				sgtl5000: codec@0a {
 					compatible = "fsl,sgtl5000";
 					reg = <0x0a>;
 					VDDA-supply = <&reg_3p3v>;
 					VDDIO-supply = <&reg_3p3v>;
-					clocks = <&saif0>;
+
 				};
 
 				eeprom: eeprom@51 {
@@ -150,6 +192,11 @@
 					reg = <0x51>;
 					pagesize = <32>;
 				};
+
+				rtc: rtc@68 {
+					compatible = "stm,mt41t62";
+					reg = <0x68>;
+				};
 			};
 
 			lradc@80050000 {
@@ -173,25 +220,7 @@
 
 			auart0: serial@8006a000 {
 				pinctrl-names = "default";
-				pinctrl-0 = <&auart0_pins_a>;
-				status = "okay";
-			};
-
-			auart1: serial@8006c000 {
-				pinctrl-names = "default";
-				pinctrl-0 = <&auart1_pins_a>;
-				status = "okay";
-			};
-
-			auart2: serial@8006e000 {
-				pinctrl-names = "default";
-				pinctrl-0 = <&auart2_2pins_b>;
-				status = "okay";
-			};
-
-			pwm: pwm@80064000 {
-				pinctrl-names = "default";
-				pinctrl-0 = <&pwm4_pins_a>;
+				pinctrl-0 = <&auart0_2pins_a>;
 				status = "okay";
 			};
 		};
@@ -201,14 +230,14 @@
 		usb0: usb@80080000 {
 			vbus-supply = <&reg_usb0_vbus>;
 			pinctrl-names = "default";
-			pinctrl-0 = <&usb0_pins_a>;
+			pinctrl-0 = <&usbphy0_pins_a>;
 			status = "okay";
 		};
 
 		usb1: usb@80090000 {
 			vbus-supply = <&reg_usb1_vbus>;
 			pinctrl-names = "default";
-			pinctrl-0 = <&usb1_pins_a>;
+			pinctrl-0 = <&usbphy1_pins_a>;
 			status = "okay";
 		};
 
@@ -229,35 +258,35 @@
 		};
 	};
 
-	backlight {
-		compatible = "pwm-backlight";
-		pwms = <&pwm 4 5000000>;
-		brightness-levels = <0 4 8 16 32 64 128 255>;
-		default-brightness-level = <6>;
-	};
-
 	regulators {
-		reg_vddio_sd0: regulator@1 {
+		compatible = "simple-bus";
+
+		reg_3p3v: 3p3v {
+			compatible = "regulator-fixed";
+			regulator-name = "3P3V";
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+		};
+
+		reg_vddio_sd0: vddio-sd0 {
 			compatible = "regulator-fixed";
-			reg = <1>;
 			regulator-name = "vddio-sd0";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			gpio = <&gpio3 28 0>;
 		};
 
-		reg_usb0_vbus: regulator@2 {
+		reg_usb0_vbus: usb0_vbus {
 			compatible = "regulator-fixed";
-			reg = <2>;
 			regulator-name = "usb0_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			gpio = <&gpio3 12 0>;
 		};
 
-		reg_usb1_vbus: regulator@3 {
+		reg_usb1_vbus: usb1_vbus {
 			compatible = "regulator-fixed";
-			reg = <3>;
 			regulator-name = "usb1_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
diff -urNp a/arch/arm/boot/dts/imx28-sps1.dts b/arch/arm/boot/dts/imx28-sps1.dts
--- a/arch/arm/boot/dts/imx28-sps1.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28-sps1.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,7 +10,7 @@
  */
 
 /dts-v1/;
-#include "imx28.dtsi"
+/include/ "imx28.dtsi"
 
 / {
 	model = "SchulerControl GmbH, SC SPS 1";
@@ -29,13 +29,13 @@
 				hog_pins_a: hog-gpios@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_D00__GPIO_0_0
-						MX28_PAD_GPMI_D03__GPIO_0_3
-						MX28_PAD_GPMI_D06__GPIO_0_6
+						0x0003 /* MX28_PAD_GPMI_D00__GPIO_0_0 */
+						0x0033 /* MX28_PAD_GPMI_D03__GPIO_0_3 */
+						0x0063 /* MX28_PAD_GPMI_D06__GPIO_0_6 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 			};
@@ -106,7 +106,7 @@
 		usb0: usb@80080000 {
 			vbus-supply = <&reg_usb0_vbus>;
 			pinctrl-names = "default";
-			pinctrl-0 = <&usb0_pins_b>;
+			pinctrl-0 = <&usbphy0_pins_b>;
 			status = "okay";
 		};
 
@@ -127,12 +127,9 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_usb0_vbus: regulator@0 {
+		reg_usb0_vbus: usb0_vbus {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "usb0_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
diff -urNp a/arch/arm/boot/dts/imx28-tx28.dts b/arch/arm/boot/dts/imx28-tx28.dts
--- a/arch/arm/boot/dts/imx28-tx28.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28-tx28.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,722 +1,116 @@
-/*
- * Copyright 2012 Shawn Guo <shawn.guo@linaro.org>
- * Copyright 2013 Lothar Waßmann <LW@KARO-electronics.de>
- *
- * The code contained herein is licensed under the GNU General Public
- * License. You may obtain a copy of the GNU General Public License
- * Version 2 at the following locations:
- *
- * http://www.opensource.org/licenses/gpl-license.html
- * http://www.gnu.org/copyleft/gpl.html
- */
-
 /dts-v1/;
-#include "imx28.dtsi"
-#include <dt-bindings/gpio/gpio.h>
+/include/ "imx28.dtsi"
 
 / {
 	model = "Ka-Ro electronics TX28 module";
 	compatible = "karo,tx28", "fsl,imx28";
 
-	aliases {
-		can0 = &can0;
-		can1 = &can1;
-		display = &display0;
-		ds1339 = &ds1339;
-		gpio5 = &gpio5;
-		lcdif = &lcdif;
-		lcdif_23bit_pins = &tx28_lcdif_23bit_pins;
-		lcdif_24bit_pins = &lcdif_24bit_pins_a;
-		reg_can_xcvr = &reg_can_xcvr;
-		spi_gpio = &spi_gpio;
-		spi_mxs = &ssp3;
-		stk5led = &user_led;
-		usbotg = &usb0;
-	};
-
 	memory {
-		reg = <0 0>; /* will be filled in by U-Boot */
-	};
-
-	onewire {
-		compatible = "w1-gpio";
-		gpios = <&gpio2 7 GPIO_ACTIVE_HIGH>;
-		status = "disabled";
-	};
-
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		reg_usb0_vbus: regulator@0 {
-			compatible = "regulator-fixed";
-			reg = <0>;
-			regulator-name = "usb0_vbus";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			gpio = <&gpio0 18 GPIO_ACTIVE_HIGH>;
-			enable-active-high;
-		};
-
-		reg_usb1_vbus: regulator@1 {
-			compatible = "regulator-fixed";
-			reg = <1>;
-			regulator-name = "usb1_vbus";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			gpio = <&gpio3 27 GPIO_ACTIVE_HIGH>;
-			enable-active-high;
-		};
-
-		reg_2p5v: regulator@2 {
-			compatible = "regulator-fixed";
-			reg = <2>;
-			regulator-name = "2P5V";
-			regulator-min-microvolt = <2500000>;
-			regulator-max-microvolt = <2500000>;
-			regulator-always-on;
-		};
-
-		reg_3p3v: regulator@3 {
-			compatible = "regulator-fixed";
-			reg = <3>;
-			regulator-name = "3P3V";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			regulator-always-on;
-		};
-
-		reg_can_xcvr: regulator@4 {
-			compatible = "regulator-fixed";
-			reg = <4>;
-			regulator-name = "CAN XCVR";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			gpio = <&gpio1 0 GPIO_ACTIVE_HIGH>;
-			pinctrl-names = "default";
-			pinctrl-0 = <&tx28_flexcan_xcvr_pins>;
-		};
-
-		reg_lcd: regulator@5 {
-			compatible = "regulator-fixed";
-			reg = <5>;
-			regulator-name = "LCD POWER";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			gpio = <&gpio1 31 GPIO_ACTIVE_HIGH>;
-			enable-active-high;
-		};
-
-		reg_lcd_reset: regulator@6 {
-			compatible = "regulator-fixed";
-			reg = <6>;
-			regulator-name = "LCD RESET";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			gpio = <&gpio3 30 GPIO_ACTIVE_HIGH>;
-			startup-delay-us = <300000>;
-			enable-active-high;
-			regulator-always-on;
-			regulator-boot-on;
-		};
+		reg = <0x40000000 0x08000000>;
 	};
 
-	clocks {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		mclk: clock@0 {
-			compatible = "fixed-clock";
-			reg = <0>;
-			#clock-cells = <0>;
-			clock-frequency = <27000000>;
+	apb@80000000 {
+		apbh@80000000 {
+			ssp0: ssp@80010000 {
+				compatible = "fsl,imx28-mmc";
+				pinctrl-names = "default";
+				pinctrl-0 = <&mmc0_4bit_pins_a
+					     &mmc0_cd_cfg
+					     &mmc0_sck_cfg>;
+				bus-width = <4>;
+				status = "okay";
+			};
+
+			pinctrl@80018000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&hog_pins_a>;
+
+				hog_pins_a: hog@0 {
+					reg = <0>;
+					fsl,pinmux-ids = <
+						0x40a3 /* MX28_PAD_ENET0_RXD3__GPIO_4_10 */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
+				};
+
+				mac0_pins_gpio: mac0-gpio-mode@0 {
+					reg = <0>;
+					fsl,pinmux-ids = <
+						0x4003 /* MX28_PAD_ENET0_MDC__GPIO_4_0 */
+						0x4013 /* MX28_PAD_ENET0_MDIO__GPIO_4_1 */
+						0x4023 /* MX28_PAD_ENET0_RX_EN__GPIO_4_2 */
+						0x4033 /* MX28_PAD_ENET0_RXD0__GPIO_4_3 */
+						0x4043 /* MX28_PAD_ENET0_RXD1__GPIO_4_4 */
+						0x4063 /* MX28_PAD_ENET0_TX_EN__GPIO_4_6 */
+						0x4073 /* MX28_PAD_ENET0_TXD0__GPIO_4_7 */
+						0x4083 /* MX28_PAD_ENET0_TXD1__GPIO_4_8 */
+						0x4103 /* MX28_PAD_ENET_CLK__GPIO_4_16 */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
+				};
+			};
+		};
+
+		apbx@80040000 {
+			i2c0: i2c@80058000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&i2c0_pins_a>;
+				status = "okay";
+
+				ds1339: rtc@68 {
+					compatible = "mxim,ds1339";
+					reg = <0x68>;
+				};
+			};
+
+			pwm: pwm@80064000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&pwm0_pins_a>;
+				status = "okay";
+			};
+
+			duart: serial@80074000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&duart_4pins_a>;
+				status = "okay";
+			};
+
+			auart1: serial@8006c000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&auart1_pins_a>;
+				status = "okay";
+			};
+		};
+	};
+
+	ahb@80080000 {
+		mac0: ethernet@800f0000 {
+			phy-mode = "rmii";
+			pinctrl-names = "default", "gpio_mode";
+			pinctrl-0 = <&mac0_pins_a>;
+			pinctrl-1 = <&mac0_pins_gpio>;
+			status = "okay";
 		};
 	};
 
-	sound {
-		compatible = "fsl,imx28-tx28-sgtl5000",
-			     "fsl,mxs-audio-sgtl5000";
-		model = "imx28-tx28-sgtl5000";
-		saif-controllers = <&saif0 &saif1>;
-		audio-codec = <&sgtl5000>;
-	};
-
 	leds {
 		compatible = "gpio-leds";
 
-		user_led: user {
+		user {
 			label = "Heartbeat";
-			gpios = <&gpio4 10 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio4 10 0>;
 			linux,default-trigger = "heartbeat";
 		};
 	};
 
 	backlight {
 		compatible = "pwm-backlight";
-		pwms = <&pwm 0 500000>;
-		/*
-		 * a silly way to create a 1:1 relationship between the
-		 * PWM value and the actual duty cycle
-		 */
-		brightness-levels = < 0  1  2  3  4  5  6  7  8  9
-				     10 11 12 13 14 15 16 17 18 19
-				     20 21 22 23 24 25 26 27 28 29
-				     30 31 32 33 34 35 36 37 38 39
-				     40 41 42 43 44 45 46 47 48 49
-				     50 51 52 53 54 55 56 57 58 59
-				     60 61 62 63 64 65 66 67 68 69
-				     70 71 72 73 74 75 76 77 78 79
-				     80 81 82 83 84 85 86 87 88 89
-				     90 91 92 93 94 95 96 97 98 99
-				    100>;
-		default-brightness-level = <50>;
-	};
-
-	matrix_keypad: matrix-keypad@0 {
-		compatible = "gpio-matrix-keypad";
-		col-gpios = <
-			&gpio5 0 GPIO_ACTIVE_HIGH
-			&gpio5 1 GPIO_ACTIVE_HIGH
-			&gpio5 2 GPIO_ACTIVE_HIGH
-			&gpio5 3 GPIO_ACTIVE_HIGH
-		>;
-		row-gpios = <
-			&gpio5 4 GPIO_ACTIVE_HIGH
-			&gpio5 5 GPIO_ACTIVE_HIGH
-			&gpio5 6 GPIO_ACTIVE_HIGH
-			&gpio5 7 GPIO_ACTIVE_HIGH
-		>;
-		/* sample keymap */
-		linux,keymap = <
-			0x00000074 /* row 0, col 0, KEY_POWER */
-			0x00010052 /* row 0, col 1, KEY_KP0 */
-			0x0002004f /* row 0, col 2, KEY_KP1 */
-			0x00030050 /* row 0, col 3, KEY_KP2 */
-			0x01000051 /* row 1, col 0, KEY_KP3 */
-			0x0101004b /* row 1, col 1, KEY_KP4 */
-			0x0102004c /* row 1, col 2, KEY_KP5 */
-			0x0103004d /* row 1, col 3, KEY_KP6 */
-			0x02000047 /* row 2, col 0, KEY_KP7 */
-			0x02010048 /* row 2, col 1, KEY_KP8 */
-			0x02020049 /* row 2, col 2, KEY_KP9 */
-		>;
-		gpio-activelow;
-		linux,wakeup;
-		debounce-delay-ms = <100>;
-		col-scan-delay-us = <5000>;
-		linux,no-autorepeat;
-	};
-
-	spi_gpio: spi-gpio {
-		compatible = "spi-gpio";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&tx28_spi_gpio_pins>;
-
-		gpio-sck = <&gpio2 24 GPIO_ACTIVE_HIGH>;
-		gpio-mosi = <&gpio2 25 GPIO_ACTIVE_HIGH>;
-		gpio-miso = <&gpio2 26 GPIO_ACTIVE_HIGH>;
-		num-chipselects = <3>;
-		cs-gpios = <
-			&gpio2 27 GPIO_ACTIVE_LOW
-			&gpio3 8 GPIO_ACTIVE_LOW
-			&gpio3 9 GPIO_ACTIVE_LOW
-		>;
-		/* enable this and disable ssp3 below, if you need full duplex SPI transfer */
-		status = "disabled";
-
-		spi@0 {
-			compatible = "spidev";
-			reg = <0>;
-			spi-max-frequency = <57600000>;
-		};
-
-		spi@1 {
-			compatible = "spidev";
-			reg = <1>;
-			spi-max-frequency = <57600000>;
-		};
-
-		spi@2 {
-			compatible = "spidev";
-			reg = <2>;
-			spi-max-frequency = <57600000>;
-		};
-	};
-};
-
-/* 2nd TX-Std UART - (A)UART1  */
-&auart1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&auart1_pins_a>;
-	status = "okay";
-};
-
-/* 3rd TX-Std UART - (A)UART3  */
-&auart3 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&auart3_pins_a>;
-	status = "okay";
-};
-
-&can0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&can0_pins_a>;
-	xceiver-supply = <&reg_can_xcvr>;
-	status = "okay";
-};
-
-&can1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&can1_pins_a>;
-	xceiver-supply = <&reg_can_xcvr>;
-	status = "okay";
-};
-
-&digctl {
-	status = "okay";
-};
-
-/* 1st TX-Std UART - (D)UART */
-&duart {
-	pinctrl-names = "default";
-	pinctrl-0 = <&duart_4pins_a>;
-	status = "okay";
-};
-
-&gpmi {
-	pinctrl-0 = <&gpmi_pins_a &gpmi_status_cfg>;
-	nand-on-flash-bbt;
-	status = "okay";
-};
-
-&i2c0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&i2c0_pins_a>;
-	clock-frequency = <400000>;
-	status = "okay";
-
-	sgtl5000: sgtl5000@0a {
-		compatible = "fsl,sgtl5000";
-		reg = <0x0a>;
-		VDDA-supply = <&reg_2p5v>;
-		VDDIO-supply = <&reg_3p3v>;
-		clocks = <&mclk>;
-	};
-
-	gpio5: pca953x@20 {
-		compatible = "nxp,pca9554";
-		reg = <0x20>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&tx28_pca9554_pins>;
-		interrupt-parent = <&gpio3>;
-		interrupts = <28 0>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		interrupt-controller;
-		#interrupt-cells = <2>;
-	};
-
-	polytouch: edt-ft5x06@38 {
-		compatible = "edt,edt-ft5x06";
-		reg = <0x38>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&tx28_edt_ft5x06_pins>;
-		interrupt-parent = <&gpio2>;
-		interrupts = <5 0>;
-		reset-gpios = <&gpio2 6 GPIO_ACTIVE_LOW>;
-		wake-gpios = <&gpio4 9 GPIO_ACTIVE_HIGH>;
-	};
-
-	touchscreen: tsc2007@48 {
-		compatible = "ti,tsc2007";
-		reg = <0x48>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&tx28_tsc2007_pins>;
-		interrupt-parent = <&gpio3>;
-		interrupts = <20 0>;
-		pendown-gpio = <&gpio3 20 GPIO_ACTIVE_LOW>;
-		ti,x-plate-ohms = /bits/ 16 <660>;
-	};
-
-	ds1339: rtc@68 {
-		compatible = "mxim,ds1339";
-		reg = <0x68>;
-	};
-};
-
-&lcdif {
-	pinctrl-names = "default";
-	pinctrl-0 = <&lcdif_24bit_pins_a &lcdif_sync_pins_a &tx28_lcdif_ctrl_pins>;
-	lcd-supply = <&reg_lcd>;
-	display = <&display0>;
-	status = "okay";
-
-	display0: display0 {
-		bits-per-pixel = <32>;
-		bus-width = <24>;
-		display-timings {
-			native-mode = <&timing5>;
-			timing0: timing0 {
-				panel-name = "VGA";
-				clock-frequency = <25175000>;
-				hactive = <640>;
-				vactive = <480>;
-				hback-porch = <48>;
-				hsync-len = <96>;
-				hfront-porch = <16>;
-				vback-porch = <33>;
-				vsync-len = <2>;
-				vfront-porch = <10>;
-				hsync-active = <0>;
-				vsync-active = <0>;
-				de-active = <1>;
-				pixelclk-active = <1>;
-			};
-
-			timing1: timing1 {
-				panel-name = "ETV570";
-				clock-frequency = <25175000>;
-				hactive = <640>;
-				vactive = <480>;
-				hback-porch = <114>;
-				hsync-len = <30>;
-				hfront-porch = <16>;
-				vback-porch = <32>;
-				vsync-len = <3>;
-				vfront-porch = <10>;
-				hsync-active = <0>;
-				vsync-active = <0>;
-				de-active = <1>;
-				pixelclk-active = <1>;
-			};
-
-			timing2: timing2 {
-				panel-name = "ET0350";
-				clock-frequency = <6500000>;
-				hactive = <320>;
-				vactive = <240>;
-				hback-porch = <34>;
-				hsync-len = <34>;
-				hfront-porch = <20>;
-				vback-porch = <15>;
-				vsync-len = <3>;
-				vfront-porch = <4>;
-				hsync-active = <0>;
-				vsync-active = <0>;
-				de-active = <1>;
-				pixelclk-active = <1>;
-			};
-
-			timing3: timing3 {
-				panel-name = "ET0430";
-				clock-frequency = <9000000>;
-				hactive = <480>;
-				vactive = <272>;
-				hback-porch = <2>;
-				hsync-len = <41>;
-				hfront-porch = <2>;
-				vback-porch = <2>;
-				vsync-len = <10>;
-				vfront-porch = <2>;
-				hsync-active = <0>;
-				vsync-active = <0>;
-				de-active = <1>;
-				pixelclk-active = <1>;
-			};
-
-			timing4: timing4 {
-				panel-name = "ET0500", "ET0700";
-				clock-frequency = <33260000>;
-				hactive = <800>;
-				vactive = <480>;
-				hback-porch = <88>;
-				hsync-len = <128>;
-				hfront-porch = <40>;
-				vback-porch = <33>;
-				vsync-len = <2>;
-				vfront-porch = <10>;
-				hsync-active = <0>;
-				vsync-active = <0>;
-				de-active = <1>;
-				pixelclk-active = <1>;
-			};
-
-			timing5: timing5 {
-				panel-name = "ETQ570";
-				clock-frequency = <6400000>;
-				hactive = <320>;
-				vactive = <240>;
-				hback-porch = <38>;
-				hsync-len = <30>;
-				hfront-porch = <30>;
-				vback-porch = <16>;
-				vsync-len = <3>;
-				vfront-porch = <4>;
-				hsync-active = <0>;
-				vsync-active = <0>;
-				de-active = <1>;
-				pixelclk-active = <1>;
-			};
-		};
-	};
-};
-
-&lradc {
-	fsl,lradc-touchscreen-wires = <4>;
-	status = "okay";
-};
-
-&mac0 {
-	phy-mode = "rmii";
-	pinctrl-names = "default", "gpio_mode";
-	pinctrl-0 = <&mac0_pins_a>;
-	pinctrl-1 = <&tx28_mac0_pins_gpio>;
-	status = "okay";
-};
-
-&mac1 {
-	phy-mode = "rmii";
-	pinctrl-names = "default";
-	pinctrl-0 = <&mac1_pins_a>;
-	/* not enabled by default */
-};
-
-&mxs_rtc {
-	status = "okay";
-};
-
-&ocotp {
-	status = "okay";
-};
-
-&pwm {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pwm0_pins_a>;
-	status = "okay";
-};
-
-&pinctrl {
-	pinctrl-names = "default";
-	pinctrl-0 = <&hog_pins_a>;
-
-	hog_pins_a: hog@0 {
-		reg = <0>;
-		fsl,pinmux-ids = <
-			MX28_PAD_ENET0_RXD3__GPIO_4_10 /* module LED */
-		>;
-		fsl,drive-strength = <MXS_DRIVE_4mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
-	};
-
-	tx28_edt_ft5x06_pins: tx28-edt-ft5x06-pins {
-		fsl,pinmux-ids = <
-			MX28_PAD_SSP0_DATA6__GPIO_2_6 /* RESET */
-			MX28_PAD_SSP0_DATA5__GPIO_2_5 /* IRQ */
-			MX28_PAD_ENET0_RXD2__GPIO_4_9 /* WAKE */
-		>;
-		fsl,drive-strength = <MXS_DRIVE_4mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
-	};
-
-	tx28_flexcan_xcvr_pins: tx28-flexcan-xcvr-pins {
-		fsl,pinmux-ids = <
-			MX28_PAD_LCD_D00__GPIO_1_0
-		>;
-		fsl,drive-strength = <MXS_DRIVE_4mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
-	};
-
-	tx28_lcdif_23bit_pins: tx28-lcdif-23bit {
-		fsl,pinmux-ids = <
-			/* LCD_D00 may be used as Flexcan Transceiver Enable on STK5-V5 */
-			MX28_PAD_LCD_D01__LCD_D1
-			MX28_PAD_LCD_D02__LCD_D2
-			MX28_PAD_LCD_D03__LCD_D3
-			MX28_PAD_LCD_D04__LCD_D4
-			MX28_PAD_LCD_D05__LCD_D5
-			MX28_PAD_LCD_D06__LCD_D6
-			MX28_PAD_LCD_D07__LCD_D7
-			MX28_PAD_LCD_D08__LCD_D8
-			MX28_PAD_LCD_D09__LCD_D9
-			MX28_PAD_LCD_D10__LCD_D10
-			MX28_PAD_LCD_D11__LCD_D11
-			MX28_PAD_LCD_D12__LCD_D12
-			MX28_PAD_LCD_D13__LCD_D13
-			MX28_PAD_LCD_D14__LCD_D14
-			MX28_PAD_LCD_D15__LCD_D15
-			MX28_PAD_LCD_D16__LCD_D16
-			MX28_PAD_LCD_D17__LCD_D17
-			MX28_PAD_LCD_D18__LCD_D18
-			MX28_PAD_LCD_D19__LCD_D19
-			MX28_PAD_LCD_D20__LCD_D20
-			MX28_PAD_LCD_D21__LCD_D21
-			MX28_PAD_LCD_D22__LCD_D22
-			MX28_PAD_LCD_D23__LCD_D23
-		>;
-		fsl,drive-strength = <MXS_DRIVE_4mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
-	};
-
-	tx28_lcdif_ctrl_pins: tx28-lcdif-ctrl {
-		fsl,pinmux-ids = <
-			MX28_PAD_LCD_ENABLE__GPIO_1_31 /* Enable */
-			MX28_PAD_LCD_RESET__GPIO_3_30  /* Reset */
-		>;
-		fsl,drive-strength = <MXS_DRIVE_4mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
-	};
-
-	tx28_mac0_pins_gpio: tx28-mac0-gpio-pins {
-		fsl,pinmux-ids = <
-			MX28_PAD_ENET0_MDC__GPIO_4_0
-			MX28_PAD_ENET0_MDIO__GPIO_4_1
-			MX28_PAD_ENET0_RX_EN__GPIO_4_2
-			MX28_PAD_ENET0_RXD0__GPIO_4_3
-			MX28_PAD_ENET0_RXD1__GPIO_4_4
-			MX28_PAD_ENET0_TX_EN__GPIO_4_6
-			MX28_PAD_ENET0_TXD0__GPIO_4_7
-			MX28_PAD_ENET0_TXD1__GPIO_4_8
-			MX28_PAD_ENET_CLK__GPIO_4_16
-		>;
-		fsl,drive-strength = <MXS_DRIVE_4mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
+		pwms = <&pwm 0 5000000>;
+		brightness-levels = <0 4 8 16 32 64 128 255>;
+		default-brightness-level = <6>;
 	};
-
-	tx28_pca9554_pins: tx28-pca9554-pins {
-		fsl,pinmux-ids = <
-			MX28_PAD_PWM3__GPIO_3_28
-		>;
-		fsl,drive-strength = <MXS_DRIVE_4mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
-	};
-
-	tx28_spi_gpio_pins: spi-gpiogrp {
-		fsl,pinmux-ids = <
-			MX28_PAD_AUART2_RX__GPIO_3_8
-			MX28_PAD_AUART2_TX__GPIO_3_9
-			MX28_PAD_SSP3_SCK__GPIO_2_24
-			MX28_PAD_SSP3_MOSI__GPIO_2_25
-			MX28_PAD_SSP3_MISO__GPIO_2_26
-			MX28_PAD_SSP3_SS0__GPIO_2_27
-		>;
-		fsl,drive-strength = <MXS_DRIVE_8mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
-	};
-
-	tx28_tsc2007_pins: tx28-tsc2007-pins {
-		fsl,pinmux-ids = <
-			MX28_PAD_SAIF0_MCLK__GPIO_3_20 /* TSC2007 IRQ */
-		>;
-		fsl,drive-strength = <MXS_DRIVE_4mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
-	};
-
-
-	tx28_usbphy0_pins: tx28-usbphy0-pins {
-		fsl,pinmux-ids = <
-			MX28_PAD_GPMI_CE2N__GPIO_0_18 /* USBOTG_VBUSEN */
-			MX28_PAD_GPMI_CE3N__GPIO_0_19 /* USBOTH_OC */
-		>;
-		fsl,drive-strength = <MXS_DRIVE_12mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
-	};
-
-	tx28_usbphy1_pins: tx28-usbphy1-pins {
-		fsl,pinmux-ids = <
-			MX28_PAD_SPDIF__GPIO_3_27 /* USBH_VBUSEN */
-			MX28_PAD_JTAG_RTCK__GPIO_4_20 /* USBH_OC */
-		>;
-		fsl,drive-strength = <MXS_DRIVE_12mA>;
-		fsl,voltage = <MXS_VOLTAGE_HIGH>;
-		fsl,pull-up = <MXS_PULL_DISABLE>;
-	};
-};
-
-&saif0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&saif0_pins_b>;
-	fsl,saif-master;
-	status = "okay";
-};
-
-&saif1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&saif1_pins_a>;
-	status = "okay";
-};
-
-&ssp0 {
-	compatible = "fsl,imx28-mmc";
-	pinctrl-names = "default", "special";
-	pinctrl-0 = <&mmc0_4bit_pins_a
-		     &mmc0_cd_cfg
-		     &mmc0_sck_cfg>;
-	bus-width = <4>;
-	status = "okay";
-};
-
-&ssp3 {
-	compatible = "fsl,imx28-spi";
-	pinctrl-names = "default";
-	pinctrl-0 = <&spi3_pins_a>;
-	clock-frequency = <57600000>;
-	status = "okay";
-
-	spi@0 {
-		compatible = "spidev";
-		reg = <0>;
-		spi-max-frequency = <57600000>;
-	};
-
-	spi@1 {
-		compatible = "spidev";
-		reg = <1>;
-		spi-max-frequency = <57600000>;
-	};
-
-	spi@2 {
-		compatible = "spidev";
-		reg = <2>;
-		spi-max-frequency = <57600000>;
-	};
-};
-
-&usb0 {
-	vbus-supply = <&reg_usb0_vbus>;
-	disable-over-current;
-	dr_mode = "peripheral";
-	status = "okay";
-};
-
-&usb1 {
-	vbus-supply = <&reg_usb1_vbus>;
-	disable-over-current;
-	dr_mode = "host";
-	status = "okay";
-};
-
-&usbphy0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&tx28_usbphy0_pins>;
-	phy_type = "utmi";
-	status = "okay";
-};
-
-&usbphy1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&tx28_usbphy1_pins>;
-	phy_type = "utmi";
-	status = "okay";
 };
diff -urNp a/arch/arm/boot/dts/imx28.dtsi b/arch/arm/boot/dts/imx28.dtsi
--- a/arch/arm/boot/dts/imx28.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx28.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -9,16 +9,12 @@
  * http://www.gnu.org/copyleft/gpl.html
  */
 
-#include <dt-bindings/gpio/gpio.h>
-#include "skeleton.dtsi"
-#include "imx28-pinfunc.h"
+/include/ "skeleton.dtsi"
 
 / {
 	interrupt-parent = <&icoll>;
 
 	aliases {
-		ethernet0 = &mac0;
-		ethernet1 = &mac1;
 		gpio0 = &gpio0;
 		gpio1 = &gpio1;
 		gpio2 = &gpio2;
@@ -31,10 +27,8 @@
 		serial2 = &auart2;
 		serial3 = &auart3;
 		serial4 = &auart4;
-		spi0 = &ssp1;
-		spi1 = &ssp2;
-		usbphy0 = &usbphy0;
-		usbphy1 = &usbphy1;
+		ethernet0 = &mac0;
+		ethernet1 = &mac1;
 	};
 
 	cpus {
@@ -68,9 +62,9 @@
 				reg = <0x80000000 0x2000>;
 			};
 
-			hsadc: hsadc@80002000 {
+			hsadc@80002000 {
 				reg = <0x80002000 0x2000>;
-				interrupts = <13>;
+				interrupts = <13 87>;
 				dmas = <&dma_apbh 12>;
 				dma-names = "rx";
 				status = "disabled";
@@ -92,24 +86,25 @@
 				clocks = <&clks 25>;
 			};
 
-			perfmon: perfmon@80006000 {
+			perfmon@80006000 {
 				reg = <0x80006000 0x800>;
 				interrupts = <27>;
 				status = "disabled";
 			};
 
-			gpmi: gpmi-nand@8000c000 {
+			gpmi-nand@8000c000 {
 				compatible = "fsl,imx28-gpmi-nand";
 				#address-cells = <1>;
 				#size-cells = <1>;
 				reg = <0x8000c000 0x2000>, <0x8000a000 0x2000>;
 				reg-names = "gpmi-nand", "bch";
-				interrupts = <41>;
-				interrupt-names = "bch";
+				interrupts = <88>, <41>;
+				interrupt-names = "gpmi-dma", "bch";
 				clocks = <&clks 50>;
 				clock-names = "gpmi_io";
 				dmas = <&dma_apbh 4>;
 				dma-names = "rx-tx";
+				fsl,gpmi-dma-channel = <4>;
 				status = "disabled";
 			};
 
@@ -117,10 +112,11 @@
 				#address-cells = <1>;
 				#size-cells = <0>;
 				reg = <0x80010000 0x2000>;
-				interrupts = <96>;
+				interrupts = <96 82>;
 				clocks = <&clks 46>;
 				dmas = <&dma_apbh 0>;
 				dma-names = "rx-tx";
+				fsl,ssp-dma-channel = <0>;
 				status = "disabled";
 			};
 
@@ -128,10 +124,11 @@
 				#address-cells = <1>;
 				#size-cells = <0>;
 				reg = <0x80012000 0x2000>;
-				interrupts = <97>;
+				interrupts = <97 83>;
 				clocks = <&clks 47>;
 				dmas = <&dma_apbh 1>;
 				dma-names = "rx-tx";
+				fsl,ssp-dma-channel = <1>;
 				status = "disabled";
 			};
 
@@ -139,10 +136,11 @@
 				#address-cells = <1>;
 				#size-cells = <0>;
 				reg = <0x80014000 0x2000>;
-				interrupts = <98>;
+				interrupts = <98 84>;
 				clocks = <&clks 48>;
 				dmas = <&dma_apbh 2>;
 				dma-names = "rx-tx";
+				fsl,ssp-dma-channel = <2>;
 				status = "disabled";
 			};
 
@@ -150,14 +148,15 @@
 				#address-cells = <1>;
 				#size-cells = <0>;
 				reg = <0x80016000 0x2000>;
-				interrupts = <99>;
+				interrupts = <99 85>;
 				clocks = <&clks 49>;
 				dmas = <&dma_apbh 3>;
 				dma-names = "rx-tx";
+				fsl,ssp-dma-channel = <3>;
 				status = "disabled";
 			};
 
-			pinctrl: pinctrl@80018000 {
+			pinctrl@80018000 {
 				#address-cells = <1>;
 				#size-cells = <0>;
 				compatible = "fsl,imx28-pinctrl", "simple-bus";
@@ -211,684 +210,476 @@
 				duart_pins_a: duart@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_PWM0__DUART_RX
-						MX28_PAD_PWM1__DUART_TX
+						0x3102 /* MX28_PAD_PWM0__DUART_RX */
+						0x3112 /* MX28_PAD_PWM1__DUART_TX */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				duart_pins_b: duart@1 {
 					reg = <1>;
 					fsl,pinmux-ids = <
-						MX28_PAD_AUART0_CTS__DUART_RX
-						MX28_PAD_AUART0_RTS__DUART_TX
+						0x3022 /* MX28_PAD_AUART0_CTS__DUART_RX */
+						0x3032 /* MX28_PAD_AUART0_RTS__DUART_TX */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				duart_4pins_a: duart-4pins@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_AUART0_CTS__DUART_RX
-						MX28_PAD_AUART0_RTS__DUART_TX
-						MX28_PAD_AUART0_RX__DUART_CTS
-						MX28_PAD_AUART0_TX__DUART_RTS
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x3022 /* MX28_PAD_AUART0_CTS__DUART_RX */
+						0x3032 /* MX28_PAD_AUART0_RTS__DUART_TX */
+						0x3002 /* MX28_PAD_AUART0_RX__DUART_CTS */
+						0x3012 /* MX28_PAD_AUART0_TX__DUART_RTS */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				gpmi_pins_a: gpmi-nand@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_D00__GPMI_D0
-						MX28_PAD_GPMI_D01__GPMI_D1
-						MX28_PAD_GPMI_D02__GPMI_D2
-						MX28_PAD_GPMI_D03__GPMI_D3
-						MX28_PAD_GPMI_D04__GPMI_D4
-						MX28_PAD_GPMI_D05__GPMI_D5
-						MX28_PAD_GPMI_D06__GPMI_D6
-						MX28_PAD_GPMI_D07__GPMI_D7
-						MX28_PAD_GPMI_CE0N__GPMI_CE0N
-						MX28_PAD_GPMI_RDY0__GPMI_READY0
-						MX28_PAD_GPMI_RDN__GPMI_RDN
-						MX28_PAD_GPMI_WRN__GPMI_WRN
-						MX28_PAD_GPMI_ALE__GPMI_ALE
-						MX28_PAD_GPMI_CLE__GPMI_CLE
-						MX28_PAD_GPMI_RESETN__GPMI_RESETN
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x0000 /* MX28_PAD_GPMI_D00__GPMI_D0 */
+						0x0010 /* MX28_PAD_GPMI_D01__GPMI_D1 */
+						0x0020 /* MX28_PAD_GPMI_D02__GPMI_D2 */
+						0x0030 /* MX28_PAD_GPMI_D03__GPMI_D3 */
+						0x0040 /* MX28_PAD_GPMI_D04__GPMI_D4 */
+						0x0050 /* MX28_PAD_GPMI_D05__GPMI_D5 */
+						0x0060 /* MX28_PAD_GPMI_D06__GPMI_D6 */
+						0x0070 /* MX28_PAD_GPMI_D07__GPMI_D7 */
+						0x0100 /* MX28_PAD_GPMI_CE0N__GPMI_CE0N */
+						0x0140 /* MX28_PAD_GPMI_RDY0__GPMI_READY0 */
+						0x0180 /* MX28_PAD_GPMI_RDN__GPMI_RDN */
+						0x0190 /* MX28_PAD_GPMI_WRN__GPMI_WRN */
+						0x01a0 /* MX28_PAD_GPMI_ALE__GPMI_ALE */
+						0x01b0 /* MX28_PAD_GPMI_CLE__GPMI_CLE */
+						0x01c0 /* MX28_PAD_GPMI_RESETN__GPMI_RESETN */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				gpmi_status_cfg: gpmi-status-cfg {
 					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_RDN__GPMI_RDN
-						MX28_PAD_GPMI_WRN__GPMI_WRN
-						MX28_PAD_GPMI_RESETN__GPMI_RESETN
+						0x0180 /* MX28_PAD_GPMI_RDN__GPMI_RDN */
+						0x0190 /* MX28_PAD_GPMI_WRN__GPMI_WRN */
+						0x01c0 /* MX28_PAD_GPMI_RESETN__GPMI_RESETN */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
+					fsl,drive-strength = <2>;
 				};
 
 				auart0_pins_a: auart0@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_AUART0_RX__AUART0_RX
-						MX28_PAD_AUART0_TX__AUART0_TX
-						MX28_PAD_AUART0_CTS__AUART0_CTS
-						MX28_PAD_AUART0_RTS__AUART0_RTS
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x3000 /* MX28_PAD_AUART0_RX__AUART0_RX */
+						0x3010 /* MX28_PAD_AUART0_TX__AUART0_TX */
+						0x3020 /* MX28_PAD_AUART0_CTS__AUART0_CTS */
+						0x3030 /* MX28_PAD_AUART0_RTS__AUART0_RTS */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				auart0_2pins_a: auart0-2pins@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_AUART0_RX__AUART0_RX
-						MX28_PAD_AUART0_TX__AUART0_TX
+						0x3000 /* MX28_PAD_AUART0_RX__AUART0_RX */
+						0x3010 /* MX28_PAD_AUART0_TX__AUART0_TX */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				auart1_pins_a: auart1@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_AUART1_RX__AUART1_RX
-						MX28_PAD_AUART1_TX__AUART1_TX
-						MX28_PAD_AUART1_CTS__AUART1_CTS
-						MX28_PAD_AUART1_RTS__AUART1_RTS
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x3040 /* MX28_PAD_AUART1_RX__AUART1_RX */
+						0x3050 /* MX28_PAD_AUART1_TX__AUART1_TX */
+						0x3060 /* MX28_PAD_AUART1_CTS__AUART1_CTS */
+						0x3070 /* MX28_PAD_AUART1_RTS__AUART1_RTS */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				auart1_2pins_a: auart1-2pins@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_AUART1_RX__AUART1_RX
-						MX28_PAD_AUART1_TX__AUART1_TX
+						0x3040 /* MX28_PAD_AUART1_RX__AUART1_RX */
+						0x3050 /* MX28_PAD_AUART1_TX__AUART1_TX */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				auart2_2pins_a: auart2-2pins@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP2_SCK__AUART2_RX
-						MX28_PAD_SSP2_MOSI__AUART2_TX
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				auart2_2pins_b: auart2-2pins@1 {
-					reg = <1>;
-					fsl,pinmux-ids = <
-						MX28_PAD_AUART2_RX__AUART2_RX
-						MX28_PAD_AUART2_TX__AUART2_TX
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				auart2_pins_a: auart2-pins@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_AUART2_RX__AUART2_RX
-						MX28_PAD_AUART2_TX__AUART2_TX
-						MX28_PAD_AUART2_CTS__AUART2_CTS
-						MX28_PAD_AUART2_RTS__AUART2_RTS
+						0x2101 /* MX28_PAD_SSP2_SCK__AUART2_RX */
+						0x2111 /* MX28_PAD_SSP2_MOSI__AUART2_TX */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				auart3_pins_a: auart3@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_AUART3_RX__AUART3_RX
-						MX28_PAD_AUART3_TX__AUART3_TX
-						MX28_PAD_AUART3_CTS__AUART3_CTS
-						MX28_PAD_AUART3_RTS__AUART3_RTS
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x30c0 /* MX28_PAD_AUART3_RX__AUART3_RX */
+						0x30d0 /* MX28_PAD_AUART3_TX__AUART3_TX */
+						0x30e0 /* MX28_PAD_AUART3_CTS__AUART3_CTS */
+						0x30f0 /* MX28_PAD_AUART3_RTS__AUART3_RTS */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				auart3_2pins_a: auart3-2pins@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP2_MISO__AUART3_RX
-						MX28_PAD_SSP2_SS0__AUART3_TX
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				auart3_2pins_b: auart3-2pins@1 {
-					reg = <1>;
-					fsl,pinmux-ids = <
-						MX28_PAD_AUART3_RX__AUART3_RX
-						MX28_PAD_AUART3_TX__AUART3_TX
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				auart4_2pins_a: auart4@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_SSP3_SCK__AUART4_TX
-						MX28_PAD_SSP3_MOSI__AUART4_RX
+						0x2121 /* MX28_PAD_SSP2_MISO__AUART3_RX */
+						0x2131 /* MX28_PAD_SSP2_SS0__AUART3_TX */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				mac0_pins_a: mac0@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_ENET0_MDC__ENET0_MDC
-						MX28_PAD_ENET0_MDIO__ENET0_MDIO
-						MX28_PAD_ENET0_RX_EN__ENET0_RX_EN
-						MX28_PAD_ENET0_RXD0__ENET0_RXD0
-						MX28_PAD_ENET0_RXD1__ENET0_RXD1
-						MX28_PAD_ENET0_TX_EN__ENET0_TX_EN
-						MX28_PAD_ENET0_TXD0__ENET0_TXD0
-						MX28_PAD_ENET0_TXD1__ENET0_TXD1
-						MX28_PAD_ENET_CLK__CLKCTRL_ENET
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x4000 /* MX28_PAD_ENET0_MDC__ENET0_MDC */
+						0x4010 /* MX28_PAD_ENET0_MDIO__ENET0_MDIO */
+						0x4020 /* MX28_PAD_ENET0_RX_EN__ENET0_RX_EN */
+						0x4030 /* MX28_PAD_ENET0_RXD0__ENET0_RXD0 */
+						0x4040 /* MX28_PAD_ENET0_RXD1__ENET0_RXD1 */
+						0x4060 /* MX28_PAD_ENET0_TX_EN__ENET0_TX_EN */
+						0x4070 /* MX28_PAD_ENET0_TXD0__ENET0_TXD0 */
+						0x4080 /* MX28_PAD_ENET0_TXD1__ENET0_TXD1 */
+						0x4100 /* MX28_PAD_ENET_CLK__CLKCTRL_ENET */
+					>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				mac1_pins_a: mac1@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_ENET0_CRS__ENET1_RX_EN
-						MX28_PAD_ENET0_RXD2__ENET1_RXD0
-						MX28_PAD_ENET0_RXD3__ENET1_RXD1
-						MX28_PAD_ENET0_COL__ENET1_TX_EN
-						MX28_PAD_ENET0_TXD2__ENET1_TXD0
-						MX28_PAD_ENET0_TXD3__ENET1_TXD1
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x40f1 /* MX28_PAD_ENET0_CRS__ENET1_RX_EN */
+						0x4091 /* MX28_PAD_ENET0_RXD2__ENET1_RXD0 */
+						0x40a1 /* MX28_PAD_ENET0_RXD3__ENET1_RXD1 */
+						0x40e1 /* MX28_PAD_ENET0_COL__ENET1_TX_EN */
+						0x40b1 /* MX28_PAD_ENET0_TXD2__ENET1_TXD0 */
+						0x40c1 /* MX28_PAD_ENET0_TXD3__ENET1_TXD1 */
+					>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				mmc0_8bit_pins_a: mmc0-8bit@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP0_DATA0__SSP0_D0
-						MX28_PAD_SSP0_DATA1__SSP0_D1
-						MX28_PAD_SSP0_DATA2__SSP0_D2
-						MX28_PAD_SSP0_DATA3__SSP0_D3
-						MX28_PAD_SSP0_DATA4__SSP0_D4
-						MX28_PAD_SSP0_DATA5__SSP0_D5
-						MX28_PAD_SSP0_DATA6__SSP0_D6
-						MX28_PAD_SSP0_DATA7__SSP0_D7
-						MX28_PAD_SSP0_CMD__SSP0_CMD
-						MX28_PAD_SSP0_DETECT__SSP0_CARD_DETECT
-						MX28_PAD_SSP0_SCK__SSP0_SCK
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x2000 /* MX28_PAD_SSP0_DATA0__SSP0_D0 */
+						0x2010 /* MX28_PAD_SSP0_DATA1__SSP0_D1 */
+						0x2020 /* MX28_PAD_SSP0_DATA2__SSP0_D2 */
+						0x2030 /* MX28_PAD_SSP0_DATA3__SSP0_D3 */
+						0x2040 /* MX28_PAD_SSP0_DATA4__SSP0_D4 */
+						0x2050 /* MX28_PAD_SSP0_DATA5__SSP0_D5 */
+						0x2060 /* MX28_PAD_SSP0_DATA6__SSP0_D6 */
+						0x2070 /* MX28_PAD_SSP0_DATA7__SSP0_D7 */
+						0x2080 /* MX28_PAD_SSP0_CMD__SSP0_CMD */
+						0x2090 /* MX28_PAD_SSP0_DETECT__SSP0_CARD_DETECT */
+						0x20a0 /* MX28_PAD_SSP0_SCK__SSP0_SCK */
+					>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				mmc0_4bit_pins_a: mmc0-4bit@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP0_DATA0__SSP0_D0
-						MX28_PAD_SSP0_DATA1__SSP0_D1
-						MX28_PAD_SSP0_DATA2__SSP0_D2
-						MX28_PAD_SSP0_DATA3__SSP0_D3
-						MX28_PAD_SSP0_CMD__SSP0_CMD
-						MX28_PAD_SSP0_DETECT__SSP0_CARD_DETECT
-						MX28_PAD_SSP0_SCK__SSP0_SCK
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x2000 /* MX28_PAD_SSP0_DATA0__SSP0_D0 */
+						0x2010 /* MX28_PAD_SSP0_DATA1__SSP0_D1 */
+						0x2020 /* MX28_PAD_SSP0_DATA2__SSP0_D2 */
+						0x2030 /* MX28_PAD_SSP0_DATA3__SSP0_D3 */
+						0x2080 /* MX28_PAD_SSP0_CMD__SSP0_CMD */
+						0x2090 /* MX28_PAD_SSP0_DETECT__SSP0_CARD_DETECT */
+						0x20a0 /* MX28_PAD_SSP0_SCK__SSP0_SCK */
+					>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				mmc0_cd_cfg: mmc0-cd-cfg {
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP0_DETECT__SSP0_CARD_DETECT
+						0x2090 /* MX28_PAD_SSP0_DETECT__SSP0_CARD_DETECT */
 					>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,pull-up = <0>;
 				};
 
 				mmc0_sck_cfg: mmc0-sck-cfg {
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP0_SCK__SSP0_SCK
-					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				mmc1_4bit_pins_a: mmc1-4bit@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_D00__SSP1_D0
-						MX28_PAD_GPMI_D01__SSP1_D1
-						MX28_PAD_GPMI_D02__SSP1_D2
-						MX28_PAD_GPMI_D03__SSP1_D3
-						MX28_PAD_GPMI_RDY1__SSP1_CMD
-						MX28_PAD_GPMI_RDY0__SSP1_CARD_DETECT
-						MX28_PAD_GPMI_WRN__SSP1_SCK
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
-				};
-
-				mmc1_cd_cfg: mmc1-cd-cfg {
-					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_RDY0__SSP1_CARD_DETECT
-					>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				mmc1_sck_cfg: mmc1-sck-cfg {
-					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_WRN__SSP1_SCK
-					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-
-				mmc2_4bit_pins_a: mmc2-4bit@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_SSP0_DATA4__SSP2_D0
-						MX28_PAD_SSP1_SCK__SSP2_D1
-						MX28_PAD_SSP1_CMD__SSP2_D2
-						MX28_PAD_SSP0_DATA5__SSP2_D3
-						MX28_PAD_SSP0_DATA6__SSP2_CMD
-						MX28_PAD_AUART1_RX__SSP2_CARD_DETECT
-						MX28_PAD_SSP0_DATA7__SSP2_SCK
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
-				};
-
-				mmc2_cd_cfg: mmc2-cd-cfg {
-					fsl,pinmux-ids = <
-						MX28_PAD_AUART1_RX__SSP2_CARD_DETECT
-					>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				mmc2_sck_cfg: mmc2-sck-cfg {
-					fsl,pinmux-ids = <
-						MX28_PAD_SSP0_DATA7__SSP2_SCK
+						0x20a0 /* MX28_PAD_SSP0_SCK__SSP0_SCK */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <2>;
+					fsl,pull-up = <0>;
 				};
 
 				i2c0_pins_a: i2c0@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_I2C0_SCL__I2C0_SCL
-						MX28_PAD_I2C0_SDA__I2C0_SDA
+						0x3180 /* MX28_PAD_I2C0_SCL__I2C0_SCL */
+						0x3190 /* MX28_PAD_I2C0_SDA__I2C0_SDA */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				i2c0_pins_b: i2c0@1 {
 					reg = <1>;
 					fsl,pinmux-ids = <
-						MX28_PAD_AUART0_RX__I2C0_SCL
-						MX28_PAD_AUART0_TX__I2C0_SDA
+						0x3001 /* MX28_PAD_AUART0_RX__I2C0_SCL */
+						0x3011 /* MX28_PAD_AUART0_TX__I2C0_SDA */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				i2c1_pins_a: i2c1@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_PWM0__I2C1_SCL
-						MX28_PAD_PWM1__I2C1_SDA
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
-				};
-
-				i2c1_pins_b: i2c1@1 {
-					reg = <1>;
-					fsl,pinmux-ids = <
-						MX28_PAD_AUART2_CTS__I2C1_SCL
-						MX28_PAD_AUART2_RTS__I2C1_SDA
+						0x3101 /* MX28_PAD_PWM0__I2C1_SCL */
+						0x3111 /* MX28_PAD_PWM1__I2C1_SDA */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				saif0_pins_a: saif0@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SAIF0_MCLK__SAIF0_MCLK
-						MX28_PAD_SAIF0_LRCLK__SAIF0_LRCLK
-						MX28_PAD_SAIF0_BITCLK__SAIF0_BITCLK
-						MX28_PAD_SAIF0_SDATA0__SAIF0_SDATA0
-					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
-				};
-
-				saif0_pins_b: saif0@1 {
-					reg = <1>;
-					fsl,pinmux-ids = <
-						MX28_PAD_SAIF0_LRCLK__SAIF0_LRCLK
-						MX28_PAD_SAIF0_BITCLK__SAIF0_BITCLK
-						MX28_PAD_SAIF0_SDATA0__SAIF0_SDATA0
-					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+						0x3140 /* MX28_PAD_SAIF0_MCLK__SAIF0_MCLK */
+						0x3150 /* MX28_PAD_SAIF0_LRCLK__SAIF0_LRCLK */
+						0x3160 /* MX28_PAD_SAIF0_BITCLK__SAIF0_BITCLK */
+						0x3170 /* MX28_PAD_SAIF0_SDATA0__SAIF0_SDATA0 */
+					>;
+					fsl,drive-strength = <2>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				saif1_pins_a: saif1@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SAIF1_SDATA0__SAIF1_SDATA0
+						0x31a0 /* MX28_PAD_SAIF1_SDATA0__SAIF1_SDATA0 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+					fsl,drive-strength = <2>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
 				pwm0_pins_a: pwm0@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_PWM0__PWM_0
+						0x3100 /* MX28_PAD_PWM0__PWM_0 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				pwm2_pins_a: pwm2@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_PWM2__PWM_2
+						0x3120 /* MX28_PAD_PWM2__PWM_2 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				pwm3_pins_a: pwm3@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_PWM3__PWM_3
+						0x31c0 /* MX28_PAD_PWM3__PWM_3 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				pwm3_pins_b: pwm3@1 {
 					reg = <1>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SAIF0_MCLK__PWM_3
+						0x3141 /* MX28_PAD_SAIF0_MCLK__PWM3 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				pwm4_pins_a: pwm4@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_PWM4__PWM_4
+						0x31d0 /* MX28_PAD_PWM4__PWM_4 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				lcdif_24bit_pins_a: lcdif-24bit@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_LCD_D00__LCD_D0
-						MX28_PAD_LCD_D01__LCD_D1
-						MX28_PAD_LCD_D02__LCD_D2
-						MX28_PAD_LCD_D03__LCD_D3
-						MX28_PAD_LCD_D04__LCD_D4
-						MX28_PAD_LCD_D05__LCD_D5
-						MX28_PAD_LCD_D06__LCD_D6
-						MX28_PAD_LCD_D07__LCD_D7
-						MX28_PAD_LCD_D08__LCD_D8
-						MX28_PAD_LCD_D09__LCD_D9
-						MX28_PAD_LCD_D10__LCD_D10
-						MX28_PAD_LCD_D11__LCD_D11
-						MX28_PAD_LCD_D12__LCD_D12
-						MX28_PAD_LCD_D13__LCD_D13
-						MX28_PAD_LCD_D14__LCD_D14
-						MX28_PAD_LCD_D15__LCD_D15
-						MX28_PAD_LCD_D16__LCD_D16
-						MX28_PAD_LCD_D17__LCD_D17
-						MX28_PAD_LCD_D18__LCD_D18
-						MX28_PAD_LCD_D19__LCD_D19
-						MX28_PAD_LCD_D20__LCD_D20
-						MX28_PAD_LCD_D21__LCD_D21
-						MX28_PAD_LCD_D22__LCD_D22
-						MX28_PAD_LCD_D23__LCD_D23
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				lcdif_18bit_pins_a: lcdif-18bit@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_LCD_D00__LCD_D0
-						MX28_PAD_LCD_D01__LCD_D1
-						MX28_PAD_LCD_D02__LCD_D2
-						MX28_PAD_LCD_D03__LCD_D3
-						MX28_PAD_LCD_D04__LCD_D4
-						MX28_PAD_LCD_D05__LCD_D5
-						MX28_PAD_LCD_D06__LCD_D6
-						MX28_PAD_LCD_D07__LCD_D7
-						MX28_PAD_LCD_D08__LCD_D8
-						MX28_PAD_LCD_D09__LCD_D9
-						MX28_PAD_LCD_D10__LCD_D10
-						MX28_PAD_LCD_D11__LCD_D11
-						MX28_PAD_LCD_D12__LCD_D12
-						MX28_PAD_LCD_D13__LCD_D13
-						MX28_PAD_LCD_D14__LCD_D14
-						MX28_PAD_LCD_D15__LCD_D15
-						MX28_PAD_LCD_D16__LCD_D16
-						MX28_PAD_LCD_D17__LCD_D17
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x1000 /* MX28_PAD_LCD_D00__LCD_D0 */
+						0x1010 /* MX28_PAD_LCD_D01__LCD_D1 */
+						0x1020 /* MX28_PAD_LCD_D02__LCD_D2 */
+						0x1030 /* MX28_PAD_LCD_D03__LCD_D3 */
+						0x1040 /* MX28_PAD_LCD_D04__LCD_D4 */
+						0x1050 /* MX28_PAD_LCD_D05__LCD_D5 */
+						0x1060 /* MX28_PAD_LCD_D06__LCD_D6 */
+						0x1070 /* MX28_PAD_LCD_D07__LCD_D7 */
+						0x1080 /* MX28_PAD_LCD_D08__LCD_D8 */
+						0x1090 /* MX28_PAD_LCD_D09__LCD_D9 */
+						0x10a0 /* MX28_PAD_LCD_D10__LCD_D10 */
+						0x10b0 /* MX28_PAD_LCD_D11__LCD_D11 */
+						0x10c0 /* MX28_PAD_LCD_D12__LCD_D12 */
+						0x10d0 /* MX28_PAD_LCD_D13__LCD_D13 */
+						0x10e0 /* MX28_PAD_LCD_D14__LCD_D14 */
+						0x10f0 /* MX28_PAD_LCD_D15__LCD_D15 */
+						0x1100 /* MX28_PAD_LCD_D16__LCD_D16 */
+						0x1110 /* MX28_PAD_LCD_D17__LCD_D17 */
+						0x1120 /* MX28_PAD_LCD_D18__LCD_D18 */
+						0x1130 /* MX28_PAD_LCD_D19__LCD_D19 */
+						0x1140 /* MX28_PAD_LCD_D20__LCD_D20 */
+						0x1150 /* MX28_PAD_LCD_D21__LCD_D21 */
+						0x1160 /* MX28_PAD_LCD_D22__LCD_D22 */
+						0x1170 /* MX28_PAD_LCD_D23__LCD_D23 */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				lcdif_16bit_pins_a: lcdif-16bit@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_LCD_D00__LCD_D0
-						MX28_PAD_LCD_D01__LCD_D1
-						MX28_PAD_LCD_D02__LCD_D2
-						MX28_PAD_LCD_D03__LCD_D3
-						MX28_PAD_LCD_D04__LCD_D4
-						MX28_PAD_LCD_D05__LCD_D5
-						MX28_PAD_LCD_D06__LCD_D6
-						MX28_PAD_LCD_D07__LCD_D7
-						MX28_PAD_LCD_D08__LCD_D8
-						MX28_PAD_LCD_D09__LCD_D9
-						MX28_PAD_LCD_D10__LCD_D10
-						MX28_PAD_LCD_D11__LCD_D11
-						MX28_PAD_LCD_D12__LCD_D12
-						MX28_PAD_LCD_D13__LCD_D13
-						MX28_PAD_LCD_D14__LCD_D14
-						MX28_PAD_LCD_D15__LCD_D15
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				lcdif_sync_pins_a: lcdif-sync@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_LCD_RS__LCD_DOTCLK
-						MX28_PAD_LCD_CS__LCD_ENABLE
-						MX28_PAD_LCD_RD_E__LCD_VSYNC
-						MX28_PAD_LCD_WR_RWN__LCD_HSYNC
-					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+						0x1000 /* MX28_PAD_LCD_D00__LCD_D0 */
+						0x1010 /* MX28_PAD_LCD_D01__LCD_D1 */
+						0x1020 /* MX28_PAD_LCD_D02__LCD_D2 */
+						0x1030 /* MX28_PAD_LCD_D03__LCD_D3 */
+						0x1040 /* MX28_PAD_LCD_D04__LCD_D4 */
+						0x1050 /* MX28_PAD_LCD_D05__LCD_D5 */
+						0x1060 /* MX28_PAD_LCD_D06__LCD_D6 */
+						0x1070 /* MX28_PAD_LCD_D07__LCD_D7 */
+						0x1080 /* MX28_PAD_LCD_D08__LCD_D8 */
+						0x1090 /* MX28_PAD_LCD_D09__LCD_D9 */
+						0x10a0 /* MX28_PAD_LCD_D10__LCD_D10 */
+						0x10b0 /* MX28_PAD_LCD_D11__LCD_D11 */
+						0x10c0 /* MX28_PAD_LCD_D12__LCD_D12 */
+						0x10d0 /* MX28_PAD_LCD_D13__LCD_D13 */
+						0x10e0 /* MX28_PAD_LCD_D14__LCD_D14 */
+						0x10f0 /* MX28_PAD_LCD_D15__LCD_D15 */
+					>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				can0_pins_a: can0@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_RDY2__CAN0_TX
-						MX28_PAD_GPMI_RDY3__CAN0_RX
+						0x0161 /* MX28_PAD_GPMI_RDY2__CAN0_TX */
+						0x0171 /* MX28_PAD_GPMI_RDY3__CAN0_RX */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				can1_pins_a: can1@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_GPMI_CE2N__CAN1_TX
-						MX28_PAD_GPMI_CE3N__CAN1_RX
+						0x0121 /* MX28_PAD_GPMI_CE2N__CAN1_TX */
+						0x0131 /* MX28_PAD_GPMI_CE3N__CAN1_RX */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_4mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <0>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
 				spi2_pins_a: spi2@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP2_SCK__SSP2_SCK
-						MX28_PAD_SSP2_MOSI__SSP2_CMD
-						MX28_PAD_SSP2_MISO__SSP2_D0
-						MX28_PAD_SSP2_SS0__SSP2_D3
-					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
-				};
-
-				spi3_pins_a: spi3@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_AUART2_RX__SSP3_D4
-						MX28_PAD_AUART2_TX__SSP3_D5
-						MX28_PAD_SSP3_SCK__SSP3_SCK
-						MX28_PAD_SSP3_MOSI__SSP3_CMD
-						MX28_PAD_SSP3_MISO__SSP3_D0
-						MX28_PAD_SSP3_SS0__SSP3_D3
+						0x2100 /* MX28_PAD_SSP2_SCK__SSP2_SCK */
+						0x2110 /* MX28_PAD_SSP2_MOSI__SSP2_CMD */
+						0x2120 /* MX28_PAD_SSP2_MISO__SSP2_D0 */
+						0x2130 /* MX28_PAD_SSP2_SS0__SSP2_D3 */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_8mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <1>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <1>;
 				};
 
-				usb0_pins_a: usb0@0 {
+				usbphy0_pins_a: usbphy0@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_SSP2_SS2__USB0_OVERCURRENT
+						0x2152 /* MX28_PAD_SSP2_SS2__USB0_OVERCURRENT */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
+					fsl,drive-strength = <2>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
-				usb0_pins_b: usb0@1 {
+				usbphy0_pins_b: usbphy0@1 {
 					reg = <1>;
 					fsl,pinmux-ids = <
-						MX28_PAD_AUART1_CTS__USB0_OVERCURRENT
-					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				usb1_pins_a: usb1@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_SSP2_SS1__USB1_OVERCURRENT
-					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_DISABLE>;
-				};
-
-				usb0_id_pins_a: usb0id@0 {
-					reg = <0>;
-					fsl,pinmux-ids = <
-						MX28_PAD_AUART1_RTS__USB0_ID
+						0x3061 /* MX28_PAD_AUART1_CTS__USB0_OVERCURRENT */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+					fsl,drive-strength = <2>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
 
-				usb0_id_pins_b: usb0id1@0 {
+				usbphy1_pins_a: usbphy1@0 {
 					reg = <0>;
 					fsl,pinmux-ids = <
-						MX28_PAD_PWM2__USB0_ID
+						0x2142 /* MX28_PAD_SSP2_SS1__USB1_OVERCURRENT */
 					>;
-					fsl,drive-strength = <MXS_DRIVE_12mA>;
-					fsl,voltage = <MXS_VOLTAGE_HIGH>;
-					fsl,pull-up = <MXS_PULL_ENABLE>;
+					fsl,drive-strength = <2>;
+					fsl,voltage = <1>;
+					fsl,pull-up = <0>;
 				};
-
 			};
 
-			digctl: digctl@8001c000 {
-				compatible = "fsl,imx28-digctl", "fsl,imx23-digctl";
+			digctl@8001c000 {
+				compatible = "fsl,imx28-digctl";
 				reg = <0x8001c000 0x2000>;
 				interrupts = <89>;
 				status = "disabled";
 			};
 
-			etm: etm@80022000 {
+			etm@80022000 {
 				reg = <0x80022000 0x2000>;
 				status = "disabled";
 			};
@@ -900,7 +691,7 @@
 					      80 81 68 69
 					      70 71 72 73
 					      74 75 76 77>;
-				interrupt-names = "auart4-rx", "aurat4-tx", "spdif-tx", "empty",
+				interrupt-names = "auart4-rx", "auart4-tx", "spdif-tx", "empty",
 						  "saif0", "saif1", "i2c0", "i2c1",
 						  "auart0-rx", "auart0-tx", "auart1-rx", "auart1-tx",
 						  "auart2-rx", "auart2-tx", "auart3-rx", "auart3-tx";
@@ -909,20 +700,19 @@
 				clocks = <&clks 26>;
 			};
 
-			dcp: dcp@80028000 {
-				compatible = "fsl,imx28-dcp", "fsl,imx23-dcp";
+			dcp@80028000 {
 				reg = <0x80028000 0x2000>;
 				interrupts = <52 53 54>;
-				status = "okay";
+				status = "disabled";
 			};
 
-			pxp: pxp@8002a000 {
+			pxp@8002a000 {
 				reg = <0x8002a000 0x2000>;
 				interrupts = <39>;
 				status = "disabled";
 			};
 
-			ocotp: ocotp@8002c000 {
+			ocotp@8002c000 {
 				compatible = "fsl,ocotp";
 				reg = <0x8002c000 0x2000>;
 				status = "disabled";
@@ -933,10 +723,10 @@
 				status = "disabled";
 			};
 
-			lcdif: lcdif@80030000 {
+			lcdif@80030000 {
 				compatible = "fsl,imx28-lcdif";
 				reg = <0x80030000 0x2000>;
-				interrupts = <38>;
+				interrupts = <38 86>;
 				clocks = <&clks 55>;
 				dmas = <&dma_apbh 13>;
 				dma-names = "rx";
@@ -961,41 +751,41 @@
 				status = "disabled";
 			};
 
-			simdbg: simdbg@8003c000 {
+			simdbg@8003c000 {
 				reg = <0x8003c000 0x200>;
 				status = "disabled";
 			};
 
-			simgpmisel: simgpmisel@8003c200 {
+			simgpmisel@8003c200 {
 				reg = <0x8003c200 0x100>;
 				status = "disabled";
 			};
 
-			simsspsel: simsspsel@8003c300 {
+			simsspsel@8003c300 {
 				reg = <0x8003c300 0x100>;
 				status = "disabled";
 			};
 
-			simmemsel: simmemsel@8003c400 {
+			simmemsel@8003c400 {
 				reg = <0x8003c400 0x100>;
 				status = "disabled";
 			};
 
-			gpiomon: gpiomon@8003c500 {
+			gpiomon@8003c500 {
 				reg = <0x8003c500 0x100>;
 				status = "disabled";
 			};
 
-			simenet: simenet@8003c700 {
+			simenet@8003c700 {
 				reg = <0x8003c700 0x100>;
 				status = "disabled";
 			};
 
-			armjtag: armjtag@8003c800 {
+			armjtag@8003c800 {
 				reg = <0x8003c800 0x100>;
 				status = "disabled";
 			};
-		};
+                };
 
 		apbx@80040000 {
 			compatible = "simple-bus";
@@ -1013,15 +803,15 @@
 			saif0: saif@80042000 {
 				compatible = "fsl,imx28-saif";
 				reg = <0x80042000 0x2000>;
-				interrupts = <59>;
-				#clock-cells = <0>;
+				interrupts = <59 80>;
 				clocks = <&clks 53>;
 				dmas = <&dma_apbx 4>;
 				dma-names = "rx-tx";
+				fsl,saif-dma-channel = <4>;
 				status = "disabled";
 			};
 
-			power: power@80044000 {
+			power@80044000 {
 				reg = <0x80044000 0x2000>;
 				status = "disabled";
 			};
@@ -1029,32 +819,31 @@
 			saif1: saif@80046000 {
 				compatible = "fsl,imx28-saif";
 				reg = <0x80046000 0x2000>;
-				interrupts = <58>;
+				interrupts = <58 81>;
 				clocks = <&clks 54>;
 				dmas = <&dma_apbx 5>;
 				dma-names = "rx-tx";
+				fsl,saif-dma-channel = <5>;
 				status = "disabled";
 			};
 
-			lradc: lradc@80050000 {
+			lradc@80050000 {
 				compatible = "fsl,imx28-lradc";
 				reg = <0x80050000 0x2000>;
 				interrupts = <10 14 15 16 17 18 19
 						20 21 22 23 24 25>;
 				status = "disabled";
-				clocks = <&clks 41>;
-				#io-channel-cells = <1>;
 			};
 
-			spdif: spdif@80054000 {
+			spdif@80054000 {
 				reg = <0x80054000 0x2000>;
-				interrupts = <45>;
+				interrupts = <45 66>;
 				dmas = <&dma_apbx 2>;
 				dma-names = "tx";
 				status = "disabled";
 			};
 
-			mxs_rtc: rtc@80056000 {
+			rtc@80056000 {
 				compatible = "fsl,imx28-rtc", "fsl,stmp3xxx-rtc";
 				reg = <0x80056000 0x2000>;
 				interrupts = <29>;
@@ -1065,10 +854,11 @@
 				#size-cells = <0>;
 				compatible = "fsl,imx28-i2c";
 				reg = <0x80058000 0x2000>;
-				interrupts = <111>;
+				interrupts = <111 68>;
 				clock-frequency = <100000>;
 				dmas = <&dma_apbx 6>;
 				dma-names = "rx-tx";
+				fsl,i2c-dma-channel = <6>;
 				status = "disabled";
 			};
 
@@ -1077,10 +867,11 @@
 				#size-cells = <0>;
 				compatible = "fsl,imx28-i2c";
 				reg = <0x8005a000 0x2000>;
-				interrupts = <110>;
+				interrupts = <110 69>;
 				clock-frequency = <100000>;
 				dmas = <&dma_apbx 7>;
 				dma-names = "rx-tx";
+				fsl,i2c-dma-channel = <7>;
 				status = "disabled";
 			};
 
@@ -1093,7 +884,7 @@
 				status = "disabled";
 			};
 
-			timer: timrot@80068000 {
+			timrot@80068000 {
 				compatible = "fsl,imx28-timrot", "fsl,timrot";
 				reg = <0x80068000 0x2000>;
 				interrupts = <48 49 50 51>;
@@ -1103,9 +894,10 @@
 			auart0: serial@8006a000 {
 				compatible = "fsl,imx28-auart", "fsl,imx23-auart";
 				reg = <0x8006a000 0x2000>;
-				interrupts = <112>;
+				interrupts = <112 70 71>;
 				dmas = <&dma_apbx 8>, <&dma_apbx 9>;
 				dma-names = "rx", "tx";
+				fsl,auart-dma-channel = <8 9>;
 				clocks = <&clks 45>;
 				status = "disabled";
 			};
@@ -1113,7 +905,7 @@
 			auart1: serial@8006c000 {
 				compatible = "fsl,imx28-auart", "fsl,imx23-auart";
 				reg = <0x8006c000 0x2000>;
-				interrupts = <113>;
+				interrupts = <113 72 73>;
 				dmas = <&dma_apbx 10>, <&dma_apbx 11>;
 				dma-names = "rx", "tx";
 				clocks = <&clks 45>;
@@ -1123,7 +915,7 @@
 			auart2: serial@8006e000 {
 				compatible = "fsl,imx28-auart", "fsl,imx23-auart";
 				reg = <0x8006e000 0x2000>;
-				interrupts = <114>;
+				interrupts = <114 74 75>;
 				dmas = <&dma_apbx 12>, <&dma_apbx 13>;
 				dma-names = "rx", "tx";
 				clocks = <&clks 45>;
@@ -1133,7 +925,7 @@
 			auart3: serial@80070000 {
 				compatible = "fsl,imx28-auart", "fsl,imx23-auart";
 				reg = <0x80070000 0x2000>;
-				interrupts = <115>;
+				interrupts = <115 76 77>;
 				dmas = <&dma_apbx 14>, <&dma_apbx 15>;
 				dma-names = "rx", "tx";
 				clocks = <&clks 45>;
@@ -1143,7 +935,7 @@
 			auart4: serial@80072000 {
 				compatible = "fsl,imx28-auart", "fsl,imx23-auart";
 				reg = <0x80072000 0x2000>;
-				interrupts = <116>;
+				interrupts = <116 78 79>;
 				dmas = <&dma_apbx 0>, <&dma_apbx 1>;
 				dma-names = "rx", "tx";
 				clocks = <&clks 45>;
@@ -1200,7 +992,7 @@
 			status = "disabled";
 		};
 
-		dflpt: dflpt@800c0000 {
+		dflpt@800c0000 {
 			reg = <0x800c0000 0x10000>;
 			status = "disabled";
 		};
@@ -1223,14 +1015,10 @@
 			status = "disabled";
 		};
 
-		etn_switch: switch@800f8000 {
+		switch@800f8000 {
 			reg = <0x800f8000 0x8000>;
 			status = "disabled";
 		};
-	};
 
-	iio_hwmon {
-		compatible = "iio-hwmon";
-		io-channels = <&lradc 8>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/imx31.dtsi b/arch/arm/boot/dts/imx31.dtsi
--- a/arch/arm/boot/dts/imx31.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx31.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -20,16 +20,6 @@
 		serial4 = &uart5;
 	};
 
-	cpus {
-		#address-cells = <0>;
-		#size-cells = <0>;
-
-		cpu {
-			compatible = "arm,arm1136";
-			device_type = "cpu";
-		};
-	};
-
 	avic: avic-interrupt-controller@60000000 {
 		compatible = "fsl,imx31-avic", "fsl,avic";
 		interrupt-controller;
@@ -104,13 +94,6 @@
 				status = "disabled";
 			};
 
-			iim: iim@5001c000 {
-				compatible = "fsl,imx31-iim", "fsl,imx27-iim";
-				reg = <0x5001c000 0x1000>;
-				interrupts = <19>;
-				clocks = <&clks 25>;
-			};
-
 			clks: ccm@53f80000{
 				compatible = "fsl,imx31-ccm";
 				reg = <0x53f80000 0x4000>;
diff -urNp a/arch/arm/boot/dts/imx51-apf51.dts b/arch/arm/boot/dts/imx51-apf51.dts
--- a/arch/arm/boot/dts/imx51-apf51.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx51-apf51.dts	2015-10-27 00:45:05.000000000 +0000
@@ -26,6 +26,10 @@
 	};
 
 	clocks {
+		ckih1 {
+			clock-frequency = <0>;
+		};
+
 		osc {
 			clock-frequency = <33554432>;
 		};
@@ -34,56 +38,15 @@
 
 &fec {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_fec>;
+	pinctrl-0 = <&pinctrl_fec_2>;
 	phy-mode = "mii";
-	phy-reset-gpios = <&gpio3 0 GPIO_ACTIVE_HIGH>;
+	phy-reset-gpios = <&gpio3 0 0>;
 	phy-reset-duration = <1>;
 	status = "okay";
 };
 
-&iomuxc {
-	imx51-apf51 {
-		pinctrl_fec: fecgrp {
-			fsl,pins = <
-				MX51_PAD_DI_GP3__FEC_TX_ER		0x80000000
-				MX51_PAD_DI2_PIN4__FEC_CRS		0x80000000
-				MX51_PAD_DI2_PIN2__FEC_MDC		0x80000000
-				MX51_PAD_DI2_PIN3__FEC_MDIO		0x80000000
-				MX51_PAD_DI2_DISP_CLK__FEC_RDATA1	0x80000000
-				MX51_PAD_DI_GP4__FEC_RDATA2		0x80000000
-				MX51_PAD_DISP2_DAT0__FEC_RDATA3		0x80000000
-				MX51_PAD_DISP2_DAT1__FEC_RX_ER		0x80000000
-				MX51_PAD_DISP2_DAT6__FEC_TDATA1		0x80000000
-				MX51_PAD_DISP2_DAT7__FEC_TDATA2		0x80000000
-				MX51_PAD_DISP2_DAT8__FEC_TDATA3		0x80000000
-				MX51_PAD_DISP2_DAT9__FEC_TX_EN		0x80000000
-				MX51_PAD_DISP2_DAT10__FEC_COL		0x80000000
-				MX51_PAD_DISP2_DAT11__FEC_RX_CLK	0x80000000
-				MX51_PAD_DISP2_DAT12__FEC_RX_DV		0x80000000
-				MX51_PAD_DISP2_DAT13__FEC_TX_CLK	0x80000000
-				MX51_PAD_DISP2_DAT14__FEC_RDATA0	0x80000000
-				MX51_PAD_DISP2_DAT15__FEC_TDATA0	0x80000000
-			>;
-		};
-
-		pinctrl_uart3: uart3grp {
-			fsl,pins = <
-				MX51_PAD_UART3_RXD__UART3_RXD		0x1c5
-				MX51_PAD_UART3_TXD__UART3_TXD		0x1c5
-			>;
-		};
-	};
-};
-
-&nfc {
-	nand-bus-width = <8>;
-	nand-ecc-mode = "hw";
-	nand-on-flash-bbt;
-	status = "okay";
-};
-
 &uart3 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart3>;
+	pinctrl-0 = <&pinctrl_uart3_2>;
 	status = "okay";
 };
diff -urNp a/arch/arm/boot/dts/imx51-apf51dev.dts b/arch/arm/boot/dts/imx51-apf51dev.dts
--- a/arch/arm/boot/dts/imx51-apf51dev.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx51-apf51dev.dts	2015-10-27 00:45:05.000000000 +0000
@@ -16,52 +16,12 @@
 	model = "Armadeus Systems APF51Dev docking/development board";
 	compatible = "armadeus,imx51-apf51dev", "armadeus,imx51-apf51", "fsl,imx51";
 
-	backlight@bl1{
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_backlight>;
-		compatible = "gpio-backlight";
-		gpios = <&gpio3 4 GPIO_ACTIVE_HIGH>;
-		default-on;
-	};
-
-	display@di1 {
-		compatible = "fsl,imx-parallel-display";
-		interface-pix-fmt = "bgr666";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_ipu_disp1>;
-
-		display-timings {
-			lw700 {
-				native-mode;
-				clock-frequency = <33000033>;
-				hactive = <800>;
-				vactive = <480>;
-				hback-porch = <96>;
-				hfront-porch = <96>;
-				vback-porch = <20>;
-				vfront-porch = <21>;
-				hsync-len = <64>;
-				vsync-len = <4>;
-				hsync-active = <1>;
-				vsync-active = <1>;
-				de-active = <1>;
-				pixelclk-active = <0>;
-			};
-		};
-
-		port {
-			display_in: endpoint {
-				remote-endpoint = <&ipu_di0_disp0>;
-			};
-		};
-	};
-
 	gpio-keys {
 		compatible = "gpio-keys";
 
 		user-key {
 			label = "user";
-			gpios = <&gpio1 3 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 3 0>;
 			linux,code = <256>; /* BTN_0 */
 		};
 	};
@@ -71,7 +31,7 @@
 
 		user {
 			label = "Heartbeat";
-			gpios = <&gpio1 2 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 2 0>;
 			linux,default-trigger = "heartbeat";
 		};
 	};
@@ -79,33 +39,31 @@
 
 &ecspi1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_ecspi1>;
+	pinctrl-0 = <&pinctrl_ecspi1_1>;
 	fsl,spi-num-chipselects = <2>;
-	cs-gpios = <&gpio4 24 GPIO_ACTIVE_HIGH>,
-		   <&gpio4 25 GPIO_ACTIVE_HIGH>;
+	cs-gpios = <&gpio4 24 0>, <&gpio4 25 0>;
 	status = "okay";
 };
 
 &ecspi2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_ecspi2>;
+	pinctrl-0 = <&pinctrl_ecspi2_1>;
 	fsl,spi-num-chipselects = <2>;
-	cs-gpios = <&gpio3 28 GPIO_ACTIVE_LOW>,
-		   <&gpio3 27 GPIO_ACTIVE_LOW>;
+	cs-gpios = <&gpio3 28 1>, <&gpio3 27 1>;
 	status = "okay";
 };
 
 &esdhc1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc1>;
-	cd-gpios = <&gpio2 29 GPIO_ACTIVE_HIGH>;
+	pinctrl-0 = <&pinctrl_esdhc1_1>;
+	cd-gpios = <&gpio2 29 0>;
 	bus-width = <4>;
 	status = "okay";
 };
 
 &esdhc2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc2>;
+	pinctrl-0 = <&pinctrl_esdhc2_1>;
 	bus-width = <4>;
 	non-removable;
 	status = "okay";
@@ -113,7 +71,7 @@
 
 &i2c2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c2>;
+	pinctrl-0 = <&pinctrl_i2c2_2>;
 	status = "okay";
 };
 
@@ -121,13 +79,7 @@
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_hog>;
 
-	imx51-apf51dev {
-		pinctrl_backlight: bl1grp {
-			fsl,pins = <
-				MX51_PAD_DI1_D1_CS__GPIO3_4 0x1F5
-			>;
-		};
-
+	hog {
 		pinctrl_hog: hoggrp {
 			fsl,pins = <
 				MX51_PAD_EIM_EB2__GPIO2_22   0x0C5
@@ -141,85 +93,5 @@
 				MX51_PAD_GPIO1_3__GPIO1_3    0x0C5
 			>;
 		};
-
-		pinctrl_ecspi1: ecspi1grp {
-			fsl,pins = <
-				MX51_PAD_CSPI1_MISO__ECSPI1_MISO	0x185
-				MX51_PAD_CSPI1_MOSI__ECSPI1_MOSI	0x185
-				MX51_PAD_CSPI1_SCLK__ECSPI1_SCLK	0x185
-			>;
-		};
-
-		pinctrl_ecspi2: ecspi2grp {
-			fsl,pins = <
-				MX51_PAD_NANDF_RB3__ECSPI2_MISO		0x185
-				MX51_PAD_NANDF_D15__ECSPI2_MOSI		0x185
-				MX51_PAD_NANDF_RB2__ECSPI2_SCLK		0x185
-			>;
-		};
-
-		pinctrl_esdhc1: esdhc1grp {
-			fsl,pins = <
-				MX51_PAD_SD1_CMD__SD1_CMD		0x400020d5
-				MX51_PAD_SD1_CLK__SD1_CLK		0x20d5
-				MX51_PAD_SD1_DATA0__SD1_DATA0		0x20d5
-				MX51_PAD_SD1_DATA1__SD1_DATA1		0x20d5
-				MX51_PAD_SD1_DATA2__SD1_DATA2		0x20d5
-				MX51_PAD_SD1_DATA3__SD1_DATA3		0x20d5
-			>;
-		};
-
-		pinctrl_esdhc2: esdhc2grp {
-			fsl,pins = <
-				MX51_PAD_SD2_CMD__SD2_CMD		0x400020d5
-				MX51_PAD_SD2_CLK__SD2_CLK		0x20d5
-				MX51_PAD_SD2_DATA0__SD2_DATA0		0x20d5
-				MX51_PAD_SD2_DATA1__SD2_DATA1		0x20d5
-				MX51_PAD_SD2_DATA2__SD2_DATA2		0x20d5
-				MX51_PAD_SD2_DATA3__SD2_DATA3		0x20d5
-			>;
-		};
-
-		pinctrl_i2c2: i2c2grp {
-			fsl,pins = <
-				MX51_PAD_EIM_D27__I2C2_SCL		0x400001ed
-				MX51_PAD_EIM_D24__I2C2_SDA		0x400001ed
-			>;
-		};
-
-		pinctrl_ipu_disp1: ipudisp1grp {
-			fsl,pins = <
-				MX51_PAD_DISP1_DAT0__DISP1_DAT0		0x5
-				MX51_PAD_DISP1_DAT1__DISP1_DAT1		0x5
-				MX51_PAD_DISP1_DAT2__DISP1_DAT2		0x5
-				MX51_PAD_DISP1_DAT3__DISP1_DAT3		0x5
-				MX51_PAD_DISP1_DAT4__DISP1_DAT4		0x5
-				MX51_PAD_DISP1_DAT5__DISP1_DAT5		0x5
-				MX51_PAD_DISP1_DAT6__DISP1_DAT6		0x5
-				MX51_PAD_DISP1_DAT7__DISP1_DAT7		0x5
-				MX51_PAD_DISP1_DAT8__DISP1_DAT8		0x5
-				MX51_PAD_DISP1_DAT9__DISP1_DAT9		0x5
-				MX51_PAD_DISP1_DAT10__DISP1_DAT10	0x5
-				MX51_PAD_DISP1_DAT11__DISP1_DAT11	0x5
-				MX51_PAD_DISP1_DAT12__DISP1_DAT12	0x5
-				MX51_PAD_DISP1_DAT13__DISP1_DAT13	0x5
-				MX51_PAD_DISP1_DAT14__DISP1_DAT14	0x5
-				MX51_PAD_DISP1_DAT15__DISP1_DAT15	0x5
-				MX51_PAD_DISP1_DAT16__DISP1_DAT16	0x5
-				MX51_PAD_DISP1_DAT17__DISP1_DAT17	0x5
-				MX51_PAD_DISP1_DAT18__DISP1_DAT18	0x5
-				MX51_PAD_DISP1_DAT19__DISP1_DAT19	0x5
-				MX51_PAD_DISP1_DAT20__DISP1_DAT20	0x5
-				MX51_PAD_DISP1_DAT21__DISP1_DAT21	0x5
-				MX51_PAD_DISP1_DAT22__DISP1_DAT22	0x5
-				MX51_PAD_DISP1_DAT23__DISP1_DAT23	0x5
-				MX51_PAD_DI1_PIN2__DI1_PIN2		0x5
-				MX51_PAD_DI1_PIN3__DI1_PIN3		0x5
-			>;
-		};
 	};
 };
-
-&ipu_di0_disp0 {
-	remote-endpoint = <&display_in>;
-};
diff -urNp a/arch/arm/boot/dts/imx51-babbage.dts b/arch/arm/boot/dts/imx51-babbage.dts
--- a/arch/arm/boot/dts/imx51-babbage.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx51-babbage.dts	2015-10-27 00:45:05.000000000 +0000
@@ -17,129 +17,37 @@
 	model = "Freescale i.MX51 Babbage Board";
 	compatible = "fsl,imx51-babbage", "fsl,imx51";
 
-	chosen {
-		stdout-path = &uart1;
-	};
-
 	memory {
 		reg = <0x90000000 0x20000000>;
 	};
 
-	clocks {
-		ckih1 {
-			clock-frequency = <22579200>;
-		};
-
-		clk_26M: codec_clock {
-			compatible = "fixed-clock";
-			reg=<0>;
-			#clock-cells = <0>;
-			clock-frequency = <26000000>;
-			gpios = <&gpio4 26 GPIO_ACTIVE_LOW>;
-		};
-	};
-
-	display0: display@di0 {
+	display@di0 {
 		compatible = "fsl,imx-parallel-display";
+		crtcs = <&ipu 0>;
 		interface-pix-fmt = "rgb24";
 		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_ipu_disp1>;
-		display-timings {
-			native-mode = <&timing0>;
-			timing0: dvi {
-				clock-frequency = <65000000>;
-				hactive = <1024>;
-				vactive = <768>;
-				hback-porch = <220>;
-				hfront-porch = <40>;
-				vback-porch = <21>;
-				vfront-porch = <7>;
-				hsync-len = <60>;
-				vsync-len = <10>;
-			};
-		};
-
-		port {
-			display0_in: endpoint {
-				remote-endpoint = <&ipu_di0_disp0>;
-			};
-		};
+		pinctrl-0 = <&pinctrl_ipu_disp1_1>;
 	};
 
-	display1: display@di1 {
+	display@di1 {
 		compatible = "fsl,imx-parallel-display";
+		crtcs = <&ipu 1>;
 		interface-pix-fmt = "rgb565";
 		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_ipu_disp2>;
-		status = "disabled";
-		display-timings {
-			native-mode = <&timing1>;
-			timing1: claawvga {
-				clock-frequency = <27000000>;
-				hactive = <800>;
-				vactive = <480>;
-				hback-porch = <40>;
-				hfront-porch = <60>;
-				vback-porch = <10>;
-				vfront-porch = <10>;
-				hsync-len = <20>;
-				vsync-len = <10>;
-				hsync-active = <0>;
-				vsync-active = <0>;
-				de-active = <1>;
-				pixelclk-active = <0>;
-			};
-		};
-
-		port {
-			display1_in: endpoint {
-				remote-endpoint = <&ipu_di1_disp1>;
-			};
-		};
+		pinctrl-0 = <&pinctrl_ipu_disp2_1>;
 	};
 
 	gpio-keys {
 		compatible = "gpio-keys";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_gpio_keys>;
 
 		power {
 			label = "Power Button";
-			gpios = <&gpio2 21 GPIO_ACTIVE_HIGH>;
-			linux,code = <KEY_POWER>;
+			gpios = <&gpio2 21 0>;
+			linux,code = <116>; /* KEY_POWER */
 			gpio-key,wakeup;
 		};
 	};
 
-	leds {
-		compatible = "gpio-leds";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_gpio_leds>;
-
-		led-diagnostic {
-			label = "diagnostic";
-			gpios = <&gpio2 6 GPIO_ACTIVE_HIGH>;
-		};
-	};
-
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		reg_hub_reset: regulator@0 {
-			compatible = "regulator-fixed";
-			pinctrl-names = "default";
-			pinctrl-0 = <&pinctrl_usbotgreg>;
-			reg = <0>;
-			regulator-name = "hub_reset";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			gpio = <&gpio1 7 GPIO_ACTIVE_HIGH>;
-			enable-active-high;
-		};
-	};
-
 	sound {
 		compatible = "fsl,imx51-babbage-sgtl5000",
 			     "fsl,imx-audio-sgtl5000";
@@ -153,46 +61,46 @@
 		mux-int-port = <2>;
 		mux-ext-port = <3>;
 	};
+};
 
-	usbphy {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "simple-bus";
+&esdhc1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_esdhc1_1>;
+	fsl,cd-controller;
+	fsl,wp-controller;
+	status = "okay";
+};
 
-		usbh1phy: usbh1phy@0 {
-			compatible = "usb-nop-xceiv";
-			reg = <0>;
-			clocks = <&clks IMX5_CLK_DUMMY>;
-			clock-names = "main_clk";
-			reset-gpios = <&gpio2 5 GPIO_ACTIVE_LOW>;
-		};
-	};
+&esdhc2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_esdhc2_1>;
+	cd-gpios = <&gpio1 6 0>;
+	wp-gpios = <&gpio1 5 0>;
+	status = "okay";
 };
 
-&audmux {
+&uart3 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_audmux>;
+	pinctrl-0 = <&pinctrl_uart3_1>;
+	fsl,uart-has-rtscts;
 	status = "okay";
 };
 
 &ecspi1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_ecspi1>;
+	pinctrl-0 = <&pinctrl_ecspi1_1>;
 	fsl,spi-num-chipselects = <2>;
-	cs-gpios = <&gpio4 24 GPIO_ACTIVE_HIGH>,
-		   <&gpio4 25 GPIO_ACTIVE_LOW>;
+	cs-gpios = <&gpio4 24 0>, <&gpio4 25 0>;
 	status = "okay";
 
 	pmic: mc13892@0 {
+		#address-cells = <1>;
+		#size-cells = <0>;
 		compatible = "fsl,mc13892";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_pmic>;
 		spi-max-frequency = <6000000>;
-		spi-cs-high;
 		reg = <0>;
 		interrupt-parent = <&gpio1>;
-		interrupts = <8 IRQ_TYPE_LEVEL_HIGH>;
-		fsl,mc13xxx-uses-rtc;
+		interrupts = <8 0x4>;
 
 		regulators {
 			sw1_reg: sw1 {
@@ -302,354 +210,88 @@
 	};
 };
 
-&esdhc1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc1>;
-	cd-gpios = <&gpio1 0 GPIO_ACTIVE_LOW>;
-	wp-gpios = <&gpio1 1 GPIO_ACTIVE_HIGH>;
+&ssi2 {
+	fsl,mode = "i2s-slave";
 	status = "okay";
 };
 
-&esdhc2 {
+&iomuxc {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc2>;
-	cd-gpios = <&gpio1 6 GPIO_ACTIVE_LOW>;
-	wp-gpios = <&gpio1 5 GPIO_ACTIVE_HIGH>;
-	status = "okay";
+	pinctrl-0 = <&pinctrl_hog>;
+
+	hog {
+		pinctrl_hog: hoggrp {
+			fsl,pins = <
+				MX51_PAD_GPIO1_0__SD1_CD     0x20d5
+				MX51_PAD_GPIO1_1__SD1_WP     0x20d5
+				MX51_PAD_GPIO1_5__GPIO1_5    0x100
+				MX51_PAD_GPIO1_6__GPIO1_6    0x100
+				MX51_PAD_EIM_A27__GPIO2_21   0x5
+				MX51_PAD_CSPI1_SS0__GPIO4_24 0x85
+				MX51_PAD_CSPI1_SS1__GPIO4_25 0x85
+			>;
+		};
+	};
 };
 
-&fec {
+&uart1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_fec>;
-	phy-mode = "mii";
-	phy-reset-gpios = <&gpio2 14 GPIO_ACTIVE_LOW>;
-	phy-reset-duration = <1>;
+	pinctrl-0 = <&pinctrl_uart1_1>;
+	fsl,uart-has-rtscts;
 	status = "okay";
 };
 
-&i2c1 {
+&uart2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c1>;
+	pinctrl-0 = <&pinctrl_uart2_1>;
 	status = "okay";
 };
 
 &i2c2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c2>;
+	pinctrl-0 = <&pinctrl_i2c2_1>;
 	status = "okay";
 
 	sgtl5000: codec@0a {
 		compatible = "fsl,sgtl5000";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_clkcodec>;
 		reg = <0x0a>;
-		clocks = <&clk_26M>;
+		clock-frequency = <26000000>;
 		VDDA-supply = <&vdig_reg>;
 		VDDIO-supply = <&vvideo_reg>;
 	};
 };
 
-&ipu_di0_disp0 {
-	remote-endpoint = <&display0_in>;
-};
-
-&ipu_di1_disp1 {
-	remote-endpoint = <&display1_in>;
-};
-
-&kpp {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_kpp>;
-	linux,keymap = <
-		MATRIX_KEY(0, 0, KEY_UP)
-		MATRIX_KEY(0, 1, KEY_DOWN)
-		MATRIX_KEY(0, 2, KEY_VOLUMEDOWN)
-		MATRIX_KEY(0, 3, KEY_HOME)
-		MATRIX_KEY(1, 0, KEY_RIGHT)
-		MATRIX_KEY(1, 1, KEY_LEFT)
-		MATRIX_KEY(1, 2, KEY_ENTER)
-		MATRIX_KEY(1, 3, KEY_VOLUMEUP)
-		MATRIX_KEY(2, 0, KEY_F6)
-		MATRIX_KEY(2, 1, KEY_F8)
-		MATRIX_KEY(2, 2, KEY_F9)
-		MATRIX_KEY(2, 3, KEY_F10)
-		MATRIX_KEY(3, 0, KEY_F1)
-		MATRIX_KEY(3, 1, KEY_F2)
-		MATRIX_KEY(3, 2, KEY_F3)
-		MATRIX_KEY(3, 3, KEY_POWER)
-	>;
-	status = "okay";
-};
-
-&ssi2 {
-	status = "okay";
-};
-
-&uart1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1>;
-	fsl,uart-has-rtscts;
-	status = "okay";
-};
-
-&uart2 {
+&audmux {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart2>;
+	pinctrl-0 = <&pinctrl_audmux_1>;
 	status = "okay";
 };
 
-&uart3 {
+&fec {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart3>;
-	fsl,uart-has-rtscts;
+	pinctrl-0 = <&pinctrl_fec_1>;
+	phy-mode = "mii";
 	status = "okay";
 };
 
-&usbh1 {
+&kpp {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usbh1>;
-	vbus-supply = <&reg_hub_reset>;
-	fsl,usbphy = <&usbh1phy>;
-	phy_type = "ulpi";
-	status = "okay";
-};
-
-&usbotg {
-	dr_mode = "otg";
-	disable-over-current;
-	phy_type = "utmi_wide";
+	pinctrl-0 = <&pinctrl_kpp_1>;
+	linux,keymap = <0x00000067	/* KEY_UP */
+			0x0001006c	/* KEY_DOWN */
+			0x00020072	/* KEY_VOLUMEDOWN */
+			0x00030066	/* KEY_HOME */
+			0x0100006a	/* KEY_RIGHT */
+			0x01010069	/* KEY_LEFT */
+			0x0102001c	/* KEY_ENTER */
+			0x01030073	/* KEY_VOLUMEUP */
+			0x02000040	/* KEY_F6 */
+			0x02010042	/* KEY_F8 */
+			0x02020043	/* KEY_F9 */
+			0x02030044	/* KEY_F10 */
+			0x0300003b	/* KEY_F1 */
+			0x0301003c	/* KEY_F2 */
+			0x0302003d	/* KEY_F3 */
+			0x03030074>;	/* KEY_POWER */
 	status = "okay";
 };
-
-&iomuxc {
-	imx51-babbage {
-		pinctrl_audmux: audmuxgrp {
-			fsl,pins = <
-				MX51_PAD_AUD3_BB_TXD__AUD3_TXD		0x80000000
-				MX51_PAD_AUD3_BB_RXD__AUD3_RXD		0x80000000
-				MX51_PAD_AUD3_BB_CK__AUD3_TXC		0x80000000
-				MX51_PAD_AUD3_BB_FS__AUD3_TXFS		0x80000000
-			>;
-		};
-
-		pinctrl_clkcodec: clkcodecgrp {
-			fsl,pins = <
-				MX51_PAD_CSPI1_RDY__GPIO4_26		0x80000000
-			>;
-		};
-
-		pinctrl_ecspi1: ecspi1grp {
-			fsl,pins = <
-				MX51_PAD_CSPI1_MISO__ECSPI1_MISO	0x185
-				MX51_PAD_CSPI1_MOSI__ECSPI1_MOSI	0x185
-				MX51_PAD_CSPI1_SCLK__ECSPI1_SCLK	0x185
-				MX51_PAD_CSPI1_SS0__GPIO4_24		0x85 /* CS0 */
-				MX51_PAD_CSPI1_SS1__GPIO4_25		0x85 /* CS1 */
-			>;
-		};
-
-		pinctrl_esdhc1: esdhc1grp {
-			fsl,pins = <
-				MX51_PAD_SD1_CMD__SD1_CMD		0x400020d5
-				MX51_PAD_SD1_CLK__SD1_CLK		0x20d5
-				MX51_PAD_SD1_DATA0__SD1_DATA0		0x20d5
-				MX51_PAD_SD1_DATA1__SD1_DATA1		0x20d5
-				MX51_PAD_SD1_DATA2__SD1_DATA2		0x20d5
-				MX51_PAD_SD1_DATA3__SD1_DATA3		0x20d5
-				MX51_PAD_GPIO1_0__GPIO1_0		0x100
-				MX51_PAD_GPIO1_1__GPIO1_1		0x100
-			>;
-		};
-
-		pinctrl_esdhc2: esdhc2grp {
-			fsl,pins = <
-				MX51_PAD_SD2_CMD__SD2_CMD		0x400020d5
-				MX51_PAD_SD2_CLK__SD2_CLK		0x20d5
-				MX51_PAD_SD2_DATA0__SD2_DATA0		0x20d5
-				MX51_PAD_SD2_DATA1__SD2_DATA1		0x20d5
-				MX51_PAD_SD2_DATA2__SD2_DATA2		0x20d5
-				MX51_PAD_SD2_DATA3__SD2_DATA3		0x20d5
-				MX51_PAD_GPIO1_5__GPIO1_5		0x100 /* WP */
-				MX51_PAD_GPIO1_6__GPIO1_6		0x100 /* CD */
-			>;
-		};
-
-		pinctrl_fec: fecgrp {
-			fsl,pins = <
-				MX51_PAD_EIM_EB2__FEC_MDIO		0x000001f5
-				MX51_PAD_EIM_EB3__FEC_RDATA1		0x00000085
-				MX51_PAD_EIM_CS2__FEC_RDATA2		0x00000085
-				MX51_PAD_EIM_CS3__FEC_RDATA3		0x00000085
-				MX51_PAD_EIM_CS4__FEC_RX_ER		0x00000180
-				MX51_PAD_EIM_CS5__FEC_CRS		0x00000180
-				MX51_PAD_NANDF_RB2__FEC_COL		0x00000180
-				MX51_PAD_NANDF_RB3__FEC_RX_CLK		0x00000180
-				MX51_PAD_NANDF_D9__FEC_RDATA0		0x00002180
-				MX51_PAD_NANDF_D8__FEC_TDATA0		0x00002004
-				MX51_PAD_NANDF_CS2__FEC_TX_ER		0x00002004
-				MX51_PAD_NANDF_CS3__FEC_MDC		0x00002004
-				MX51_PAD_NANDF_CS4__FEC_TDATA1		0x00002004
-				MX51_PAD_NANDF_CS5__FEC_TDATA2		0x00002004
-				MX51_PAD_NANDF_CS6__FEC_TDATA3		0x00002004
-				MX51_PAD_NANDF_CS7__FEC_TX_EN		0x00002004
-				MX51_PAD_NANDF_RDY_INT__FEC_TX_CLK	0x00002180
-				MX51_PAD_NANDF_D11__FEC_RX_DV		0x000020a4
-				MX51_PAD_EIM_A20__GPIO2_14		0x00000085 /* Phy Reset */
-			>;
-		};
-
-		pinctrl_gpio_keys: gpiokeysgrp {
-			fsl,pins = <
-				MX51_PAD_EIM_A27__GPIO2_21		0x5
-			>;
-		};
-
-		pinctrl_gpio_leds: gpioledsgrp {
-			fsl,pins = <
-				MX51_PAD_EIM_D22__GPIO2_6		0x80000000
-			>;
-		};
-
-		pinctrl_i2c1: i2c1grp {
-			fsl,pins = <
-				MX51_PAD_EIM_D19__I2C1_SCL		0x400001ed
-				MX51_PAD_EIM_D16__I2C1_SDA		0x400001ed
-			>;
-		};
-
-		pinctrl_i2c2: i2c2grp {
-			fsl,pins = <
-				MX51_PAD_KEY_COL4__I2C2_SCL		0x400001ed
-				MX51_PAD_KEY_COL5__I2C2_SDA		0x400001ed
-			>;
-		};
-
-		pinctrl_ipu_disp1: ipudisp1grp {
-			fsl,pins = <
-				MX51_PAD_DISP1_DAT0__DISP1_DAT0		0x5
-				MX51_PAD_DISP1_DAT1__DISP1_DAT1		0x5
-				MX51_PAD_DISP1_DAT2__DISP1_DAT2		0x5
-				MX51_PAD_DISP1_DAT3__DISP1_DAT3		0x5
-				MX51_PAD_DISP1_DAT4__DISP1_DAT4		0x5
-				MX51_PAD_DISP1_DAT5__DISP1_DAT5		0x5
-				MX51_PAD_DISP1_DAT6__DISP1_DAT6		0x5
-				MX51_PAD_DISP1_DAT7__DISP1_DAT7		0x5
-				MX51_PAD_DISP1_DAT8__DISP1_DAT8		0x5
-				MX51_PAD_DISP1_DAT9__DISP1_DAT9		0x5
-				MX51_PAD_DISP1_DAT10__DISP1_DAT10	0x5
-				MX51_PAD_DISP1_DAT11__DISP1_DAT11	0x5
-				MX51_PAD_DISP1_DAT12__DISP1_DAT12	0x5
-				MX51_PAD_DISP1_DAT13__DISP1_DAT13	0x5
-				MX51_PAD_DISP1_DAT14__DISP1_DAT14	0x5
-				MX51_PAD_DISP1_DAT15__DISP1_DAT15	0x5
-				MX51_PAD_DISP1_DAT16__DISP1_DAT16	0x5
-				MX51_PAD_DISP1_DAT17__DISP1_DAT17	0x5
-				MX51_PAD_DISP1_DAT18__DISP1_DAT18	0x5
-				MX51_PAD_DISP1_DAT19__DISP1_DAT19	0x5
-				MX51_PAD_DISP1_DAT20__DISP1_DAT20	0x5
-				MX51_PAD_DISP1_DAT21__DISP1_DAT21	0x5
-				MX51_PAD_DISP1_DAT22__DISP1_DAT22	0x5
-				MX51_PAD_DISP1_DAT23__DISP1_DAT23	0x5
-				MX51_PAD_DI1_PIN2__DI1_PIN2		0x5
-				MX51_PAD_DI1_PIN3__DI1_PIN3		0x5
-			>;
-		};
-
-		pinctrl_ipu_disp2: ipudisp2grp {
-			fsl,pins = <
-				MX51_PAD_DISP2_DAT0__DISP2_DAT0		0x5
-				MX51_PAD_DISP2_DAT1__DISP2_DAT1		0x5
-				MX51_PAD_DISP2_DAT2__DISP2_DAT2		0x5
-				MX51_PAD_DISP2_DAT3__DISP2_DAT3		0x5
-				MX51_PAD_DISP2_DAT4__DISP2_DAT4		0x5
-				MX51_PAD_DISP2_DAT5__DISP2_DAT5		0x5
-				MX51_PAD_DISP2_DAT6__DISP2_DAT6		0x5
-				MX51_PAD_DISP2_DAT7__DISP2_DAT7		0x5
-				MX51_PAD_DISP2_DAT8__DISP2_DAT8		0x5
-				MX51_PAD_DISP2_DAT9__DISP2_DAT9		0x5
-				MX51_PAD_DISP2_DAT10__DISP2_DAT10	0x5
-				MX51_PAD_DISP2_DAT11__DISP2_DAT11	0x5
-				MX51_PAD_DISP2_DAT12__DISP2_DAT12	0x5
-				MX51_PAD_DISP2_DAT13__DISP2_DAT13	0x5
-				MX51_PAD_DISP2_DAT14__DISP2_DAT14	0x5
-				MX51_PAD_DISP2_DAT15__DISP2_DAT15	0x5
-				MX51_PAD_DI2_PIN2__DI2_PIN2		0x5
-				MX51_PAD_DI2_PIN3__DI2_PIN3		0x5
-				MX51_PAD_DI2_DISP_CLK__DI2_DISP_CLK	0x5
-				MX51_PAD_DI_GP4__DI2_PIN15		0x5
-			>;
-		};
-
-		pinctrl_kpp: kppgrp {
-			fsl,pins = <
-				MX51_PAD_KEY_ROW0__KEY_ROW0		0xe0
-				MX51_PAD_KEY_ROW1__KEY_ROW1		0xe0
-				MX51_PAD_KEY_ROW2__KEY_ROW2		0xe0
-				MX51_PAD_KEY_ROW3__KEY_ROW3		0xe0
-				MX51_PAD_KEY_COL0__KEY_COL0		0xe8
-				MX51_PAD_KEY_COL1__KEY_COL1		0xe8
-				MX51_PAD_KEY_COL2__KEY_COL2		0xe8
-				MX51_PAD_KEY_COL3__KEY_COL3		0xe8
-			>;
-		};
-
-		pinctrl_pmic: pmicgrp {
-			fsl,pins = <
-				MX51_PAD_GPIO1_8__GPIO1_8		0xe5 /* IRQ */
-			>;
-		};
-
-		pinctrl_uart1: uart1grp {
-			fsl,pins = <
-				MX51_PAD_UART1_RXD__UART1_RXD		0x1c5
-				MX51_PAD_UART1_TXD__UART1_TXD		0x1c5
-				MX51_PAD_UART1_RTS__UART1_RTS		0x1c5
-				MX51_PAD_UART1_CTS__UART1_CTS		0x1c5
-			>;
-		};
-
-		pinctrl_uart2: uart2grp {
-			fsl,pins = <
-				MX51_PAD_UART2_RXD__UART2_RXD		0x1c5
-				MX51_PAD_UART2_TXD__UART2_TXD		0x1c5
-			>;
-		};
-
-		pinctrl_uart3: uart3grp {
-			fsl,pins = <
-				MX51_PAD_EIM_D25__UART3_RXD		0x1c5
-				MX51_PAD_EIM_D26__UART3_TXD		0x1c5
-				MX51_PAD_EIM_D27__UART3_RTS		0x1c5
-				MX51_PAD_EIM_D24__UART3_CTS		0x1c5
-			>;
-		};
-
-		pinctrl_usbh1: usbh1grp {
-			fsl,pins = <
-				MX51_PAD_USBH1_CLK__USBH1_CLK		0x80000000
-				MX51_PAD_USBH1_DIR__USBH1_DIR		0x80000000
-				MX51_PAD_USBH1_NXT__USBH1_NXT		0x80000000
-				MX51_PAD_USBH1_DATA0__USBH1_DATA0	0x80000000
-				MX51_PAD_USBH1_DATA1__USBH1_DATA1	0x80000000
-				MX51_PAD_USBH1_DATA2__USBH1_DATA2	0x80000000
-				MX51_PAD_USBH1_DATA3__USBH1_DATA3	0x80000000
-				MX51_PAD_USBH1_DATA4__USBH1_DATA4	0x80000000
-				MX51_PAD_USBH1_DATA5__USBH1_DATA5	0x80000000
-				MX51_PAD_USBH1_DATA6__USBH1_DATA6	0x80000000
-				MX51_PAD_USBH1_DATA7__USBH1_DATA7	0x80000000
-			>;
-		};
-
-		pinctrl_usbh1reg: usbh1reggrp {
-			fsl,pins = <
-				MX51_PAD_EIM_D21__GPIO2_5		0x85
-			>;
-		};
-
-		pinctrl_usbotgreg: usbotgreggrp {
-			fsl,pins = <
-				MX51_PAD_GPIO1_7__GPIO1_7		0x85
-			>;
-		};
-	};
-};
diff -urNp a/arch/arm/boot/dts/imx51.dtsi b/arch/arm/boot/dts/imx51.dtsi
--- a/arch/arm/boot/dts/imx51.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx51.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -12,30 +12,16 @@
 
 #include "skeleton.dtsi"
 #include "imx51-pinfunc.h"
-#include <dt-bindings/clock/imx5-clock.h>
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-#include <dt-bindings/interrupt-controller/irq.h>
 
 / {
 	aliases {
-		ethernet0 = &fec;
+		serial0 = &uart1;
+		serial1 = &uart2;
+		serial2 = &uart3;
 		gpio0 = &gpio1;
 		gpio1 = &gpio2;
 		gpio2 = &gpio3;
 		gpio3 = &gpio4;
-		i2c0 = &i2c1;
-		i2c1 = &i2c2;
-		mmc0 = &esdhc1;
-		mmc1 = &esdhc2;
-		mmc2 = &esdhc3;
-		mmc3 = &esdhc4;
-		serial0 = &uart1;
-		serial1 = &uart2;
-		serial2 = &uart3;
-		spi0 = &ecspi1;
-		spi1 = &ecspi2;
-		spi2 = &cspi;
 	};
 
 	tzic: tz-interrupt-controller@e0000000 {
@@ -51,25 +37,21 @@
 
 		ckil {
 			compatible = "fsl,imx-ckil", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <32768>;
 		};
 
 		ckih1 {
 			compatible = "fsl,imx-ckih1", "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
+			clock-frequency = <22579200>;
 		};
 
 		ckih2 {
 			compatible = "fsl,imx-ckih2", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <0>;
 		};
 
 		osc {
 			compatible = "fsl,imx-osc", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <24000000>;
 		};
 	};
@@ -77,40 +59,21 @@
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		cpu: cpu@0 {
+		cpu@0 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a8";
 			reg = <0>;
-			clock-latency = <62500>;
-			clocks = <&clks IMX5_CLK_CPU_PODF>;
+			clock-latency = <61036>; /* two CLK32 periods */
+			clocks = <&clks 24>;
 			clock-names = "cpu";
 			operating-points = <
-				166000	1000000
-				600000	1050000
-				800000	1100000
+				/* kHz  uV (No regulator support) */
+				160000  0
+				800000  0
 			>;
-			voltage-tolerance = <5>;
-		};
-	};
-
-	usbphy {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "simple-bus";
-
-		usbphy0: usbphy@0 {
-			compatible = "usb-nop-xceiv";
-			reg = <0>;
-			clocks = <&clks IMX5_CLK_USB_PHY_GATE>;
-			clock-names = "main_clk";
 		};
 	};
 
-	display-subsystem {
-		compatible = "fsl,imx-display-subsystem";
-		ports = <&ipu_di0>, <&ipu_di1>;
-	};
-
 	soc {
 		#address-cells = <1>;
 		#size-cells = <1>;
@@ -118,36 +81,14 @@
 		interrupt-parent = <&tzic>;
 		ranges;
 
-		iram: iram@1ffe0000 {
-			compatible = "mmio-sram";
-			reg = <0x1ffe0000 0x20000>;
-		};
-
 		ipu: ipu@40000000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
+			#crtc-cells = <1>;
 			compatible = "fsl,imx51-ipu";
 			reg = <0x40000000 0x20000000>;
 			interrupts = <11 10>;
-			clocks = <&clks IMX5_CLK_IPU_GATE>,
-			         <&clks IMX5_CLK_IPU_DI0_GATE>,
-			         <&clks IMX5_CLK_IPU_DI1_GATE>;
+			clocks = <&clks 59>, <&clks 110>, <&clks 61>;
 			clock-names = "bus", "di0", "di1";
 			resets = <&src 2>;
-
-			ipu_di0: port@2 {
-				reg = <2>;
-
-				ipu_di0_disp0: endpoint {
-				};
-			};
-
-			ipu_di1: port@3 {
-				reg = <3>;
-
-				ipu_di1_disp1: endpoint {
-				};
-			};
 		};
 
 		aips@70000000 { /* AIPS1 */
@@ -168,9 +109,7 @@
 					compatible = "fsl,imx51-esdhc";
 					reg = <0x70004000 0x4000>;
 					interrupts = <1>;
-					clocks = <&clks IMX5_CLK_ESDHC1_IPG_GATE>,
-					         <&clks IMX5_CLK_DUMMY>,
-					         <&clks IMX5_CLK_ESDHC1_PER_GATE>;
+					clocks = <&clks 44>, <&clks 0>, <&clks 71>;
 					clock-names = "ipg", "ahb", "per";
 					status = "disabled";
 				};
@@ -179,9 +118,7 @@
 					compatible = "fsl,imx51-esdhc";
 					reg = <0x70008000 0x4000>;
 					interrupts = <2>;
-					clocks = <&clks IMX5_CLK_ESDHC2_IPG_GATE>,
-					         <&clks IMX5_CLK_DUMMY>,
-					         <&clks IMX5_CLK_ESDHC2_PER_GATE>;
+					clocks = <&clks 45>, <&clks 0>, <&clks 72>;
 					clock-names = "ipg", "ahb", "per";
 					bus-width = <4>;
 					status = "disabled";
@@ -191,8 +128,7 @@
 					compatible = "fsl,imx51-uart", "fsl,imx21-uart";
 					reg = <0x7000c000 0x4000>;
 					interrupts = <33>;
-					clocks = <&clks IMX5_CLK_UART3_IPG_GATE>,
-					         <&clks IMX5_CLK_UART3_PER_GATE>;
+					clocks = <&clks 32>, <&clks 33>;
 					clock-names = "ipg", "per";
 					status = "disabled";
 				};
@@ -203,24 +139,18 @@
 					compatible = "fsl,imx51-ecspi";
 					reg = <0x70010000 0x4000>;
 					interrupts = <36>;
-					clocks = <&clks IMX5_CLK_ECSPI1_IPG_GATE>,
-					         <&clks IMX5_CLK_ECSPI1_PER_GATE>;
+					clocks = <&clks 51>, <&clks 52>;
 					clock-names = "ipg", "per";
 					status = "disabled";
 				};
 
 				ssi2: ssi@70014000 {
-					#sound-dai-cells = <0>;
 					compatible = "fsl,imx51-ssi", "fsl,imx21-ssi";
 					reg = <0x70014000 0x4000>;
 					interrupts = <30>;
-					clocks = <&clks IMX5_CLK_SSI2_IPG_GATE>,
-						 <&clks IMX5_CLK_SSI2_ROOT_GATE>;
-					clock-names = "ipg", "baud";
-					dmas = <&sdma 24 1 0>,
-					       <&sdma 25 1 0>;
-					dma-names = "rx", "tx";
+					clocks = <&clks 49>;
 					fsl,fifo-depth = <15>;
+					fsl,ssi-dma-events = <25 24 23 22>; /* TX0 RX0 TX1 RX1 */
 					status = "disabled";
 				};
 
@@ -228,9 +158,7 @@
 					compatible = "fsl,imx51-esdhc";
 					reg = <0x70020000 0x4000>;
 					interrupts = <3>;
-					clocks = <&clks IMX5_CLK_ESDHC3_IPG_GATE>,
-					         <&clks IMX5_CLK_DUMMY>,
-					         <&clks IMX5_CLK_ESDHC3_PER_GATE>;
+					clocks = <&clks 46>, <&clks 0>, <&clks 73>;
 					clock-names = "ipg", "ahb", "per";
 					bus-width = <4>;
 					status = "disabled";
@@ -240,9 +168,7 @@
 					compatible = "fsl,imx51-esdhc";
 					reg = <0x70024000 0x4000>;
 					interrupts = <4>;
-					clocks = <&clks IMX5_CLK_ESDHC4_IPG_GATE>,
-					         <&clks IMX5_CLK_DUMMY>,
-					         <&clks IMX5_CLK_ESDHC4_PER_GATE>;
+					clocks = <&clks 47>, <&clks 0>, <&clks 74>;
 					clock-names = "ipg", "ahb", "per";
 					bus-width = <4>;
 					status = "disabled";
@@ -253,9 +179,6 @@
 				compatible = "fsl,imx51-usb", "fsl,imx27-usb";
 				reg = <0x73f80000 0x0200>;
 				interrupts = <18>;
-				clocks = <&clks IMX5_CLK_USBOH3_GATE>;
-				fsl,usbmisc = <&usbmisc 0>;
-				fsl,usbphy = <&usbphy0>;
 				status = "disabled";
 			};
 
@@ -263,8 +186,6 @@
 				compatible = "fsl,imx51-usb", "fsl,imx27-usb";
 				reg = <0x73f80200 0x0200>;
 				interrupts = <14>;
-				clocks = <&clks IMX5_CLK_USBOH3_GATE>;
-				fsl,usbmisc = <&usbmisc 1>;
 				status = "disabled";
 			};
 
@@ -272,8 +193,6 @@
 				compatible = "fsl,imx51-usb", "fsl,imx27-usb";
 				reg = <0x73f80400 0x0200>;
 				interrupts = <16>;
-				clocks = <&clks IMX5_CLK_USBOH3_GATE>;
-				fsl,usbmisc = <&usbmisc 2>;
 				status = "disabled";
 			};
 
@@ -281,18 +200,9 @@
 				compatible = "fsl,imx51-usb", "fsl,imx27-usb";
 				reg = <0x73f80600 0x0200>;
 				interrupts = <17>;
-				clocks = <&clks IMX5_CLK_USBOH3_GATE>;
-				fsl,usbmisc = <&usbmisc 3>;
 				status = "disabled";
 			};
 
-			usbmisc: usbmisc@73f80800 {
-				#index-cells = <1>;
-				compatible = "fsl,imx51-usbmisc";
-				reg = <0x73f80800 0x200>;
-				clocks = <&clks IMX5_CLK_USBOH3_GATE>;
-			};
-
 			gpio1: gpio@73f84000 {
 				compatible = "fsl,imx51-gpio", "fsl,imx35-gpio";
 				reg = <0x73f84000 0x4000>;
@@ -337,7 +247,7 @@
 				compatible = "fsl,imx51-kpp", "fsl,imx21-kpp";
 				reg = <0x73f94000 0x4000>;
 				interrupts = <60>;
-				clocks = <&clks IMX5_CLK_DUMMY>;
+				clocks = <&clks 0>;
 				status = "disabled";
 			};
 
@@ -345,14 +255,14 @@
 				compatible = "fsl,imx51-wdt", "fsl,imx21-wdt";
 				reg = <0x73f98000 0x4000>;
 				interrupts = <58>;
-				clocks = <&clks IMX5_CLK_DUMMY>;
+				clocks = <&clks 0>;
 			};
 
 			wdog2: wdog@73f9c000 {
 				compatible = "fsl,imx51-wdt", "fsl,imx21-wdt";
 				reg = <0x73f9c000 0x4000>;
 				interrupts = <59>;
-				clocks = <&clks IMX5_CLK_DUMMY>;
+				clocks = <&clks 0>;
 				status = "disabled";
 			};
 
@@ -360,22 +270,289 @@
 				compatible = "fsl,imx51-gpt", "fsl,imx31-gpt";
 				reg = <0x73fa0000 0x4000>;
 				interrupts = <39>;
-				clocks = <&clks IMX5_CLK_GPT_IPG_GATE>,
-				         <&clks IMX5_CLK_GPT_HF_GATE>;
+				clocks = <&clks 36>, <&clks 41>;
 				clock-names = "ipg", "per";
 			};
 
 			iomuxc: iomuxc@73fa8000 {
 				compatible = "fsl,imx51-iomuxc";
 				reg = <0x73fa8000 0x4000>;
+
+				audmux {
+					pinctrl_audmux_1: audmuxgrp-1 {
+						fsl,pins = <
+							MX51_PAD_AUD3_BB_TXD__AUD3_TXD 0x80000000
+							MX51_PAD_AUD3_BB_RXD__AUD3_RXD 0x80000000
+							MX51_PAD_AUD3_BB_CK__AUD3_TXC  0x80000000
+							MX51_PAD_AUD3_BB_FS__AUD3_TXFS 0x80000000
+						>;
+					};
+				};
+
+				fec {
+					pinctrl_fec_1: fecgrp-1 {
+						fsl,pins = <
+							MX51_PAD_EIM_EB2__FEC_MDIO	   0x80000000
+							MX51_PAD_EIM_EB3__FEC_RDATA1	   0x80000000
+							MX51_PAD_EIM_CS2__FEC_RDATA2	   0x80000000
+							MX51_PAD_EIM_CS3__FEC_RDATA3	   0x80000000
+							MX51_PAD_EIM_CS4__FEC_RX_ER	   0x80000000
+							MX51_PAD_EIM_CS5__FEC_CRS	   0x80000000
+							MX51_PAD_NANDF_RB2__FEC_COL	   0x80000000
+							MX51_PAD_NANDF_RB3__FEC_RX_CLK	   0x80000000
+							MX51_PAD_NANDF_D9__FEC_RDATA0	   0x80000000
+							MX51_PAD_NANDF_D8__FEC_TDATA0	   0x80000000
+							MX51_PAD_NANDF_CS2__FEC_TX_ER	   0x80000000
+							MX51_PAD_NANDF_CS3__FEC_MDC	   0x80000000
+							MX51_PAD_NANDF_CS4__FEC_TDATA1	   0x80000000
+							MX51_PAD_NANDF_CS5__FEC_TDATA2	   0x80000000
+							MX51_PAD_NANDF_CS6__FEC_TDATA3	   0x80000000
+							MX51_PAD_NANDF_CS7__FEC_TX_EN	   0x80000000
+							MX51_PAD_NANDF_RDY_INT__FEC_TX_CLK 0x80000000
+						>;
+					};
+
+					pinctrl_fec_2: fecgrp-2 {
+						fsl,pins = <
+							MX51_PAD_DI_GP3__FEC_TX_ER	  0x80000000
+							MX51_PAD_DI2_PIN4__FEC_CRS	  0x80000000
+							MX51_PAD_DI2_PIN2__FEC_MDC	  0x80000000
+							MX51_PAD_DI2_PIN3__FEC_MDIO	  0x80000000
+							MX51_PAD_DI2_DISP_CLK__FEC_RDATA1 0x80000000
+							MX51_PAD_DI_GP4__FEC_RDATA2	  0x80000000
+							MX51_PAD_DISP2_DAT0__FEC_RDATA3   0x80000000
+							MX51_PAD_DISP2_DAT1__FEC_RX_ER	  0x80000000
+							MX51_PAD_DISP2_DAT6__FEC_TDATA1	  0x80000000
+							MX51_PAD_DISP2_DAT7__FEC_TDATA2	  0x80000000
+							MX51_PAD_DISP2_DAT8__FEC_TDATA3	  0x80000000
+							MX51_PAD_DISP2_DAT9__FEC_TX_EN	  0x80000000
+							MX51_PAD_DISP2_DAT10__FEC_COL	  0x80000000
+							MX51_PAD_DISP2_DAT11__FEC_RX_CLK  0x80000000
+							MX51_PAD_DISP2_DAT12__FEC_RX_DV	  0x80000000
+							MX51_PAD_DISP2_DAT13__FEC_TX_CLK  0x80000000
+							MX51_PAD_DISP2_DAT14__FEC_RDATA0  0x80000000
+							MX51_PAD_DISP2_DAT15__FEC_TDATA0  0x80000000
+						>;
+					};
+				};
+
+				ecspi1 {
+					pinctrl_ecspi1_1: ecspi1grp-1 {
+						fsl,pins = <
+							MX51_PAD_CSPI1_MISO__ECSPI1_MISO 0x185
+							MX51_PAD_CSPI1_MOSI__ECSPI1_MOSI 0x185
+							MX51_PAD_CSPI1_SCLK__ECSPI1_SCLK 0x185
+						>;
+					};
+				};
+
+				ecspi2 {
+					pinctrl_ecspi2_1: ecspi2grp-1 {
+						fsl,pins = <
+							MX51_PAD_NANDF_RB3__ECSPI2_MISO 0x185
+							MX51_PAD_NANDF_D15__ECSPI2_MOSI 0x185
+							MX51_PAD_NANDF_RB2__ECSPI2_SCLK 0x185
+						>;
+					};
+				};
+
+				esdhc1 {
+					pinctrl_esdhc1_1: esdhc1grp-1 {
+						fsl,pins = <
+							MX51_PAD_SD1_CMD__SD1_CMD     0x400020d5
+							MX51_PAD_SD1_CLK__SD1_CLK     0x20d5
+							MX51_PAD_SD1_DATA0__SD1_DATA0 0x20d5
+							MX51_PAD_SD1_DATA1__SD1_DATA1 0x20d5
+							MX51_PAD_SD1_DATA2__SD1_DATA2 0x20d5
+							MX51_PAD_SD1_DATA3__SD1_DATA3 0x20d5
+						>;
+					};
+				};
+
+				esdhc2 {
+					pinctrl_esdhc2_1: esdhc2grp-1 {
+						fsl,pins = <
+							MX51_PAD_SD2_CMD__SD2_CMD     0x400020d5
+							MX51_PAD_SD2_CLK__SD2_CLK     0x20d5
+							MX51_PAD_SD2_DATA0__SD2_DATA0 0x20d5
+							MX51_PAD_SD2_DATA1__SD2_DATA1 0x20d5
+							MX51_PAD_SD2_DATA2__SD2_DATA2 0x20d5
+							MX51_PAD_SD2_DATA3__SD2_DATA3 0x20d5
+						>;
+					};
+				};
+
+				i2c2 {
+					pinctrl_i2c2_1: i2c2grp-1 {
+						fsl,pins = <
+							MX51_PAD_KEY_COL4__I2C2_SCL 0x400001ed
+							MX51_PAD_KEY_COL5__I2C2_SDA 0x400001ed
+						>;
+					};
+
+					pinctrl_i2c2_2: i2c2grp-2 {
+						fsl,pins = <
+							MX51_PAD_EIM_D27__I2C2_SCL 0x400001ed
+							MX51_PAD_EIM_D24__I2C2_SDA 0x400001ed
+						>;
+					};
+				};
+
+				ipu_disp1 {
+					pinctrl_ipu_disp1_1: ipudisp1grp-1 {
+						fsl,pins = <
+							MX51_PAD_DISP1_DAT0__DISP1_DAT0	  0x5
+							MX51_PAD_DISP1_DAT1__DISP1_DAT1   0x5
+							MX51_PAD_DISP1_DAT2__DISP1_DAT2   0x5
+							MX51_PAD_DISP1_DAT3__DISP1_DAT3   0x5
+							MX51_PAD_DISP1_DAT4__DISP1_DAT4   0x5
+							MX51_PAD_DISP1_DAT5__DISP1_DAT5   0x5
+							MX51_PAD_DISP1_DAT6__DISP1_DAT6   0x5
+							MX51_PAD_DISP1_DAT7__DISP1_DAT7   0x5
+							MX51_PAD_DISP1_DAT8__DISP1_DAT8   0x5
+							MX51_PAD_DISP1_DAT9__DISP1_DAT9   0x5
+							MX51_PAD_DISP1_DAT10__DISP1_DAT10 0x5
+							MX51_PAD_DISP1_DAT11__DISP1_DAT11 0x5
+							MX51_PAD_DISP1_DAT12__DISP1_DAT12 0x5
+							MX51_PAD_DISP1_DAT13__DISP1_DAT13 0x5
+							MX51_PAD_DISP1_DAT14__DISP1_DAT14 0x5
+							MX51_PAD_DISP1_DAT15__DISP1_DAT15 0x5
+							MX51_PAD_DISP1_DAT16__DISP1_DAT16 0x5
+							MX51_PAD_DISP1_DAT17__DISP1_DAT17 0x5
+							MX51_PAD_DISP1_DAT18__DISP1_DAT18 0x5
+							MX51_PAD_DISP1_DAT19__DISP1_DAT19 0x5
+							MX51_PAD_DISP1_DAT20__DISP1_DAT20 0x5
+							MX51_PAD_DISP1_DAT21__DISP1_DAT21 0x5
+							MX51_PAD_DISP1_DAT22__DISP1_DAT22 0x5
+							MX51_PAD_DISP1_DAT23__DISP1_DAT23 0x5
+							MX51_PAD_DI1_PIN2__DI1_PIN2	  0x5 /* hsync */
+							MX51_PAD_DI1_PIN3__DI1_PIN3	  0x5 /* vsync */
+						>;
+					};
+				};
+
+				ipu_disp2 {
+					pinctrl_ipu_disp2_1: ipudisp2grp-1 {
+						fsl,pins = <
+							MX51_PAD_DISP2_DAT0__DISP2_DAT0     0x5
+							MX51_PAD_DISP2_DAT1__DISP2_DAT1     0x5
+							MX51_PAD_DISP2_DAT2__DISP2_DAT2     0x5
+							MX51_PAD_DISP2_DAT3__DISP2_DAT3     0x5
+							MX51_PAD_DISP2_DAT4__DISP2_DAT4     0x5
+							MX51_PAD_DISP2_DAT5__DISP2_DAT5     0x5
+							MX51_PAD_DISP2_DAT6__DISP2_DAT6     0x5
+							MX51_PAD_DISP2_DAT7__DISP2_DAT7     0x5
+							MX51_PAD_DISP2_DAT8__DISP2_DAT8     0x5
+							MX51_PAD_DISP2_DAT9__DISP2_DAT9     0x5
+							MX51_PAD_DISP2_DAT10__DISP2_DAT10   0x5
+							MX51_PAD_DISP2_DAT11__DISP2_DAT11   0x5
+							MX51_PAD_DISP2_DAT12__DISP2_DAT12   0x5
+							MX51_PAD_DISP2_DAT13__DISP2_DAT13   0x5
+							MX51_PAD_DISP2_DAT14__DISP2_DAT14   0x5
+							MX51_PAD_DISP2_DAT15__DISP2_DAT15   0x5
+							MX51_PAD_DI2_PIN2__DI2_PIN2	    0x5 /* hsync */
+							MX51_PAD_DI2_PIN3__DI2_PIN3	    0x5 /* vsync */
+							MX51_PAD_DI2_DISP_CLK__DI2_DISP_CLK 0x5
+							MX51_PAD_DI_GP4__DI2_PIN15	    0x5
+						>;
+					};
+				};
+
+				pata {
+					pinctrl_pata_1: patagrp-1 {
+						fsl,pins = <
+							MX51_PAD_NANDF_WE_B__PATA_DIOW		0x2004
+							MX51_PAD_NANDF_RE_B__PATA_DIOR		0x2004
+							MX51_PAD_NANDF_ALE__PATA_BUFFER_EN	0x2004
+							MX51_PAD_NANDF_CLE__PATA_RESET_B	0x2004
+							MX51_PAD_NANDF_WP_B__PATA_DMACK		0x2004
+							MX51_PAD_NANDF_RB0__PATA_DMARQ		0x2004
+							MX51_PAD_NANDF_RB1__PATA_IORDY		0x2004
+							MX51_PAD_GPIO_NAND__PATA_INTRQ		0x2004
+							MX51_PAD_NANDF_CS2__PATA_CS_0		0x2004
+							MX51_PAD_NANDF_CS3__PATA_CS_1		0x2004
+							MX51_PAD_NANDF_CS4__PATA_DA_0		0x2004
+							MX51_PAD_NANDF_CS5__PATA_DA_1		0x2004
+							MX51_PAD_NANDF_CS6__PATA_DA_2		0x2004
+							MX51_PAD_NANDF_D15__PATA_DATA15		0x2004
+							MX51_PAD_NANDF_D14__PATA_DATA14		0x2004
+							MX51_PAD_NANDF_D13__PATA_DATA13		0x2004
+							MX51_PAD_NANDF_D12__PATA_DATA12		0x2004
+							MX51_PAD_NANDF_D11__PATA_DATA11		0x2004
+							MX51_PAD_NANDF_D10__PATA_DATA10		0x2004
+							MX51_PAD_NANDF_D9__PATA_DATA9		0x2004
+							MX51_PAD_NANDF_D8__PATA_DATA8		0x2004
+							MX51_PAD_NANDF_D7__PATA_DATA7		0x2004
+							MX51_PAD_NANDF_D6__PATA_DATA6		0x2004
+							MX51_PAD_NANDF_D5__PATA_DATA5		0x2004
+							MX51_PAD_NANDF_D4__PATA_DATA4		0x2004
+							MX51_PAD_NANDF_D3__PATA_DATA3		0x2004
+							MX51_PAD_NANDF_D2__PATA_DATA2		0x2004
+							MX51_PAD_NANDF_D1__PATA_DATA1		0x2004
+							MX51_PAD_NANDF_D0__PATA_DATA0		0x2004
+						>;
+					};
+				};
+
+				uart1 {
+					pinctrl_uart1_1: uart1grp-1 {
+						fsl,pins = <
+							MX51_PAD_UART1_RXD__UART1_RXD 0x1c5
+							MX51_PAD_UART1_TXD__UART1_TXD 0x1c5
+							MX51_PAD_UART1_RTS__UART1_RTS 0x1c5
+							MX51_PAD_UART1_CTS__UART1_CTS 0x1c5
+						>;
+					};
+				};
+
+				uart2 {
+					pinctrl_uart2_1: uart2grp-1 {
+						fsl,pins = <
+							MX51_PAD_UART2_RXD__UART2_RXD 0x1c5
+							MX51_PAD_UART2_TXD__UART2_TXD 0x1c5
+						>;
+					};
+				};
+
+				uart3 {
+					pinctrl_uart3_1: uart3grp-1 {
+						fsl,pins = <
+							MX51_PAD_EIM_D25__UART3_RXD 0x1c5
+							MX51_PAD_EIM_D26__UART3_TXD 0x1c5
+							MX51_PAD_EIM_D27__UART3_RTS 0x1c5
+							MX51_PAD_EIM_D24__UART3_CTS 0x1c5
+						>;
+					};
+
+					pinctrl_uart3_2: uart3grp-2 {
+						fsl,pins = <
+							MX51_PAD_UART3_RXD__UART3_RXD 0x1c5
+							MX51_PAD_UART3_TXD__UART3_TXD 0x1c5
+						>;
+					};
+				};
+
+				kpp {
+					pinctrl_kpp_1: kppgrp-1 {
+						fsl,pins = <
+							MX51_PAD_KEY_ROW0__KEY_ROW0 0xe0
+							MX51_PAD_KEY_ROW1__KEY_ROW1 0xe0
+							MX51_PAD_KEY_ROW2__KEY_ROW2 0xe0
+							MX51_PAD_KEY_ROW3__KEY_ROW3 0xe0
+							MX51_PAD_KEY_COL0__KEY_COL0 0xe8
+							MX51_PAD_KEY_COL1__KEY_COL1 0xe8
+							MX51_PAD_KEY_COL2__KEY_COL2 0xe8
+							MX51_PAD_KEY_COL3__KEY_COL3 0xe8
+						>;
+					};
+				};
 			};
 
 			pwm1: pwm@73fb4000 {
 				#pwm-cells = <2>;
 				compatible = "fsl,imx51-pwm", "fsl,imx27-pwm";
 				reg = <0x73fb4000 0x4000>;
-				clocks = <&clks IMX5_CLK_PWM1_IPG_GATE>,
-				         <&clks IMX5_CLK_PWM1_HF_GATE>;
+				clocks = <&clks 37>, <&clks 38>;
 				clock-names = "ipg", "per";
 				interrupts = <61>;
 			};
@@ -384,8 +561,7 @@
 				#pwm-cells = <2>;
 				compatible = "fsl,imx51-pwm", "fsl,imx27-pwm";
 				reg = <0x73fb8000 0x4000>;
-				clocks = <&clks IMX5_CLK_PWM2_IPG_GATE>,
-				         <&clks IMX5_CLK_PWM2_HF_GATE>;
+				clocks = <&clks 39>, <&clks 40>;
 				clock-names = "ipg", "per";
 				interrupts = <94>;
 			};
@@ -394,8 +570,7 @@
 				compatible = "fsl,imx51-uart", "fsl,imx21-uart";
 				reg = <0x73fbc000 0x4000>;
 				interrupts = <31>;
-				clocks = <&clks IMX5_CLK_UART1_IPG_GATE>,
-				         <&clks IMX5_CLK_UART1_PER_GATE>;
+				clocks = <&clks 28>, <&clks 29>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -404,8 +579,7 @@
 				compatible = "fsl,imx51-uart", "fsl,imx21-uart";
 				reg = <0x73fc0000 0x4000>;
 				interrupts = <32>;
-				clocks = <&clks IMX5_CLK_UART2_IPG_GATE>,
-				         <&clks IMX5_CLK_UART2_PER_GATE>;
+				clocks = <&clks 30>, <&clks 31>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -431,29 +605,13 @@
 			reg = <0x80000000 0x10000000>;
 			ranges;
 
-			iim: iim@83f98000 {
-				compatible = "fsl,imx51-iim", "fsl,imx27-iim";
-				reg = <0x83f98000 0x4000>;
-				interrupts = <69>;
-				clocks = <&clks IMX5_CLK_IIM_GATE>;
-			};
-
-			owire: owire@83fa4000 {
-				compatible = "fsl,imx51-owire", "fsl,imx21-owire";
-				reg = <0x83fa4000 0x4000>;
-				interrupts = <88>;
-				clocks = <&clks IMX5_CLK_OWIRE_GATE>;
-				status = "disabled";
-			};
-
 			ecspi2: ecspi@83fac000 {
 				#address-cells = <1>;
 				#size-cells = <0>;
 				compatible = "fsl,imx51-ecspi";
 				reg = <0x83fac000 0x4000>;
 				interrupts = <37>;
-				clocks = <&clks IMX5_CLK_ECSPI2_IPG_GATE>,
-				         <&clks IMX5_CLK_ECSPI2_PER_GATE>;
+				clocks = <&clks 53>, <&clks 54>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -462,10 +620,8 @@
 				compatible = "fsl,imx51-sdma", "fsl,imx35-sdma";
 				reg = <0x83fb0000 0x4000>;
 				interrupts = <6>;
-				clocks = <&clks IMX5_CLK_SDMA_GATE>,
-				         <&clks IMX5_CLK_SDMA_GATE>;
+				clocks = <&clks 56>, <&clks 56>;
 				clock-names = "ipg", "ahb";
-				#dma-cells = <3>;
 				fsl,sdma-ram-script-name = "imx/sdma/sdma-imx51.bin";
 			};
 
@@ -475,8 +631,7 @@
 				compatible = "fsl,imx51-cspi", "fsl,imx35-cspi";
 				reg = <0x83fc0000 0x4000>;
 				interrupts = <38>;
-				clocks = <&clks IMX5_CLK_CSPI_IPG_GATE>,
-				         <&clks IMX5_CLK_CSPI_IPG_GATE>;
+				clocks = <&clks 55>, <&clks 55>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -487,7 +642,7 @@
 				compatible = "fsl,imx51-i2c", "fsl,imx21-i2c";
 				reg = <0x83fc4000 0x4000>;
 				interrupts = <63>;
-				clocks = <&clks IMX5_CLK_I2C2_GATE>;
+				clocks = <&clks 35>;
 				status = "disabled";
 			};
 
@@ -497,57 +652,31 @@
 				compatible = "fsl,imx51-i2c", "fsl,imx21-i2c";
 				reg = <0x83fc8000 0x4000>;
 				interrupts = <62>;
-				clocks = <&clks IMX5_CLK_I2C1_GATE>;
+				clocks = <&clks 34>;
 				status = "disabled";
 			};
 
 			ssi1: ssi@83fcc000 {
-				#sound-dai-cells = <0>;
 				compatible = "fsl,imx51-ssi", "fsl,imx21-ssi";
 				reg = <0x83fcc000 0x4000>;
 				interrupts = <29>;
-				clocks = <&clks IMX5_CLK_SSI1_IPG_GATE>,
-					 <&clks IMX5_CLK_SSI1_ROOT_GATE>;
-				clock-names = "ipg", "baud";
-				dmas = <&sdma 28 0 0>,
-				       <&sdma 29 0 0>;
-				dma-names = "rx", "tx";
+				clocks = <&clks 48>;
 				fsl,fifo-depth = <15>;
+				fsl,ssi-dma-events = <29 28 27 26>; /* TX0 RX0 TX1 RX1 */
 				status = "disabled";
 			};
 
 			audmux: audmux@83fd0000 {
 				compatible = "fsl,imx51-audmux", "fsl,imx31-audmux";
 				reg = <0x83fd0000 0x4000>;
-				clocks = <&clks IMX5_CLK_DUMMY>;
-				clock-names = "audmux";
-				status = "disabled";
-			};
-
-			weim: weim@83fda000 {
-				#address-cells = <2>;
-				#size-cells = <1>;
-				compatible = "fsl,imx51-weim";
-				reg = <0x83fda000 0x1000>;
-				clocks = <&clks IMX5_CLK_EMI_SLOW_GATE>;
-				ranges = <
-					0 0 0xb0000000 0x08000000
-					1 0 0xb8000000 0x08000000
-					2 0 0xc0000000 0x08000000
-					3 0 0xc8000000 0x04000000
-					4 0 0xcc000000 0x02000000
-					5 0 0xce000000 0x02000000
-				>;
 				status = "disabled";
 			};
 
 			nfc: nand@83fdb000 {
-				#address-cells = <1>;
-				#size-cells = <1>;
 				compatible = "fsl,imx51-nand";
 				reg = <0x83fdb000 0x1000 0xcfff0000 0x10000>;
 				interrupts = <8>;
-				clocks = <&clks IMX5_CLK_NFC_GATE>;
+				clocks = <&clks 60>;
 				status = "disabled";
 			};
 
@@ -555,22 +684,17 @@
 				compatible = "fsl,imx51-pata", "fsl,imx27-pata";
 				reg = <0x83fe0000 0x4000>;
 				interrupts = <70>;
-				clocks = <&clks IMX5_CLK_PATA_GATE>;
+				clocks = <&clks 161>;
 				status = "disabled";
 			};
 
 			ssi3: ssi@83fe8000 {
-				#sound-dai-cells = <0>;
 				compatible = "fsl,imx51-ssi", "fsl,imx21-ssi";
 				reg = <0x83fe8000 0x4000>;
 				interrupts = <96>;
-				clocks = <&clks IMX5_CLK_SSI3_IPG_GATE>,
-					 <&clks IMX5_CLK_SSI3_ROOT_GATE>;
-				clock-names = "ipg", "baud";
-				dmas = <&sdma 46 0 0>,
-				       <&sdma 47 0 0>;
-				dma-names = "rx", "tx";
+				clocks = <&clks 50>;
 				fsl,fifo-depth = <15>;
+				fsl,ssi-dma-events = <47 46 37 35>; /* TX0 RX0 TX1 RX1 */
 				status = "disabled";
 			};
 
@@ -578,9 +702,7 @@
 				compatible = "fsl,imx51-fec", "fsl,imx27-fec";
 				reg = <0x83fec000 0x4000>;
 				interrupts = <87>;
-				clocks = <&clks IMX5_CLK_FEC_GATE>,
-				         <&clks IMX5_CLK_FEC_GATE>,
-				         <&clks IMX5_CLK_FEC_GATE>;
+				clocks = <&clks 42>, <&clks 42>, <&clks 42>;
 				clock-names = "ipg", "ahb", "ptp";
 				status = "disabled";
 			};
diff -urNp a/arch/arm/boot/dts/imx53-ard.dts b/arch/arm/boot/dts/imx53-ard.dts
--- a/arch/arm/boot/dts/imx53-ard.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx53-ard.dts	2015-10-27 00:45:05.000000000 +0000
@@ -49,12 +49,9 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_3p3v: regulator@0 {
+		reg_3p3v: 3p3v {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "3P3V";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
@@ -102,7 +99,7 @@
 
 &esdhc1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc1>;
+	pinctrl-0 = <&pinctrl_esdhc1_2>;
 	cd-gpios = <&gpio1 1 0>;
 	wp-gpios = <&gpio1 9 0>;
 	status = "okay";
@@ -112,7 +109,7 @@
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_hog>;
 
-	imx53-ard {
+	hog {
 		pinctrl_hog: hoggrp {
 			fsl,pins = <
 				MX53_PAD_GPIO_1__GPIO1_1             0x80000000
@@ -151,33 +148,11 @@
 				MX53_PAD_EIM_CS1__EMI_WEIM_CS_1	     0x80000000
 			>;
 		};
-
-		pinctrl_esdhc1: esdhc1grp {
-			fsl,pins = <
-				MX53_PAD_SD1_DATA0__ESDHC1_DAT0		0x1d5
-				MX53_PAD_SD1_DATA1__ESDHC1_DAT1		0x1d5
-				MX53_PAD_SD1_DATA2__ESDHC1_DAT2		0x1d5
-				MX53_PAD_SD1_DATA3__ESDHC1_DAT3		0x1d5
-				MX53_PAD_PATA_DATA8__ESDHC1_DAT4	0x1d5
-				MX53_PAD_PATA_DATA9__ESDHC1_DAT5	0x1d5
-				MX53_PAD_PATA_DATA10__ESDHC1_DAT6	0x1d5
-				MX53_PAD_PATA_DATA11__ESDHC1_DAT7	0x1d5
-				MX53_PAD_SD1_CMD__ESDHC1_CMD		0x1d5
-				MX53_PAD_SD1_CLK__ESDHC1_CLK		0x1d5
-			>;
-		};
-
-		pinctrl_uart1: uart1grp {
-			fsl,pins = <
-				MX53_PAD_PATA_DIOW__UART1_TXD_MUX	0x1e4
-				MX53_PAD_PATA_DMACK__UART1_RXD_MUX	0x1e4
-			>;
-		};
 	};
 };
 
 &uart1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1>;
+	pinctrl-0 = <&pinctrl_uart1_2>;
 	status = "okay";
 };
diff -urNp a/arch/arm/boot/dts/imx53-evk.dts b/arch/arm/boot/dts/imx53-evk.dts
--- a/arch/arm/boot/dts/imx53-evk.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/imx53-evk.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,126 @@
+/*
+ * Copyright 2011 Freescale Semiconductor, Inc.
+ * Copyright 2011 Linaro Ltd.
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/dts-v1/;
+#include "imx53.dtsi"
+
+/ {
+	model = "Freescale i.MX53 Evaluation Kit";
+	compatible = "fsl,imx53-evk", "fsl,imx53";
+
+	memory {
+		reg = <0x70000000 0x80000000>;
+	};
+
+	leds {
+		compatible = "gpio-leds";
+
+		green {
+			label = "Heartbeat";
+			gpios = <&gpio7 7 0>;
+			linux,default-trigger = "heartbeat";
+		};
+	};
+};
+
+&esdhc1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_esdhc1_1>;
+	cd-gpios = <&gpio3 13 0>;
+	wp-gpios = <&gpio3 14 0>;
+	status = "okay";
+};
+
+&ecspi1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_ecspi1_1>;
+	fsl,spi-num-chipselects = <2>;
+	cs-gpios = <&gpio2 30 0>, <&gpio3 19 0>;
+	status = "okay";
+
+	flash: at45db321d@1 {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "atmel,at45db321d", "atmel,at45", "atmel,dataflash";
+		spi-max-frequency = <25000000>;
+		reg = <1>;
+
+		partition@0 {
+			label = "U-Boot";
+			reg = <0x0 0x40000>;
+			read-only;
+		};
+
+		partition@40000 {
+			label = "Kernel";
+			reg = <0x40000 0x3c0000>;
+		};
+	};
+};
+
+&esdhc3 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_esdhc3_1>;
+	cd-gpios = <&gpio3 11 0>;
+	wp-gpios = <&gpio3 12 0>;
+	status = "okay";
+};
+
+&iomuxc {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_hog>;
+
+	hog {
+		pinctrl_hog: hoggrp {
+			fsl,pins = <
+				MX53_PAD_EIM_EB2__GPIO2_30  0x80000000
+				MX53_PAD_EIM_D19__GPIO3_19  0x80000000
+				MX53_PAD_EIM_DA11__GPIO3_11 0x80000000
+				MX53_PAD_EIM_DA12__GPIO3_12 0x80000000
+				MX53_PAD_EIM_DA13__GPIO3_13 0x80000000
+				MX53_PAD_EIM_DA14__GPIO3_14 0x80000000
+				MX53_PAD_PATA_DA_0__GPIO7_6 0x80000000
+				MX53_PAD_PATA_DA_1__GPIO7_7 0x80000000
+			>;
+		};
+	};
+};
+
+&uart1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_uart1_1>;
+	status = "okay";
+};
+
+&i2c2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_i2c2_1>;
+	status = "okay";
+
+	pmic: mc13892@08 {
+		compatible = "fsl,mc13892", "fsl,mc13xxx";
+		reg = <0x08>;
+	};
+
+	codec: sgtl5000@0a {
+		compatible = "fsl,sgtl5000";
+		reg = <0x0a>;
+	};
+};
+
+&fec {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_fec_1>;
+	phy-mode = "rmii";
+	phy-reset-gpios = <&gpio7 6 0>;
+	status = "okay";
+};
diff -urNp a/arch/arm/boot/dts/imx53-mba53.dts b/arch/arm/boot/dts/imx53-mba53.dts
--- a/arch/arm/boot/dts/imx53-mba53.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx53-mba53.dts	2015-10-27 00:45:05.000000000 +0000
@@ -16,97 +16,27 @@
 / {
 	model = "TQ MBa53 starter kit";
 	compatible = "tq,mba53", "tq,tqma53", "fsl,imx53";
-
-	chosen {
-		stdout-path = &uart2;
-	};
-
-	backlight {
-		compatible = "pwm-backlight";
-		pwms = <&pwm2 0 50000>;
-		brightness-levels = <0 24 28 32 36 40 44 48 52 56 60 64 68 72 76 80 84 88 92 96 100>;
-		default-brightness-level = <10>;
-		enable-gpios = <&gpio7 7 0>;
-		power-supply = <&reg_backlight>;
-	};
-
-	disp1: display@disp1 {
-		compatible = "fsl,imx-parallel-display";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_disp1_1>;
-		interface-pix-fmt = "rgb24";
-		status = "disabled";
-
-		port {
-			display1_in: endpoint {
-				remote-endpoint = <&ipu_di1_disp1>;
-			};
-		};
-	};
-
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		reg_backlight: regulator@0 {
-			compatible = "regulator-fixed";
-			reg = <0>;
-			regulator-name = "lcd-supply";
-			gpio = <&gpio2 5 0>;
-			startup-delay-us = <5000>;
-		};
-
-		reg_3p2v: regulator@1 {
-			compatible = "regulator-fixed";
-			reg = <1>;
-			regulator-name = "3P2V";
-			regulator-min-microvolt = <3200000>;
-			regulator-max-microvolt = <3200000>;
-			regulator-always-on;
-		};
-	};
-
-	sound {
-		compatible = "tq,imx53-mba53-sgtl5000",
-			     "fsl,imx-audio-sgtl5000";
-		model = "imx53-mba53-sgtl5000";
-		ssi-controller = <&ssi2>;
-		audio-codec = <&codec>;
-		audio-routing =
-			"MIC_IN", "Mic Jack",
-			"Mic Jack", "Mic Bias",
-			"Headphone Jack", "HP_OUT";
-		mux-int-port = <2>;
-		mux-ext-port = <5>;
-	};
-};
-
-&ldb {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_lvds1_1>;
-	status = "disabled";
 };
 
 &iomuxc {
 	lvds1 {
 		pinctrl_lvds1_1: lvds1-grp1 {
 			fsl,pins = <
-				MX53_PAD_LVDS0_TX3_P__LDB_LVDS0_TX3 0x80000000
-				MX53_PAD_LVDS0_CLK_P__LDB_LVDS0_CLK 0x80000000
-				MX53_PAD_LVDS0_TX2_P__LDB_LVDS0_TX2 0x80000000
-				MX53_PAD_LVDS0_TX1_P__LDB_LVDS0_TX1 0x80000000
-				MX53_PAD_LVDS0_TX0_P__LDB_LVDS0_TX0 0x80000000
+				MX53_PAD_LVDS0_TX3_P__LDB_LVDS0_TX3 0x10000
+				MX53_PAD_LVDS0_CLK_P__LDB_LVDS0_CLK 0x10000
+				MX53_PAD_LVDS0_TX2_P__LDB_LVDS0_TX2 0x10000
+				MX53_PAD_LVDS0_TX1_P__LDB_LVDS0_TX1 0x10000
+				MX53_PAD_LVDS0_TX0_P__LDB_LVDS0_TX0 0x10000
 			>;
 		};
 
 		pinctrl_lvds1_2: lvds1-grp2 {
 			fsl,pins = <
-				MX53_PAD_LVDS1_TX3_P__LDB_LVDS1_TX3 0x80000000
-				MX53_PAD_LVDS1_TX2_P__LDB_LVDS1_TX2 0x80000000
-				MX53_PAD_LVDS1_CLK_P__LDB_LVDS1_CLK 0x80000000
-				MX53_PAD_LVDS1_TX1_P__LDB_LVDS1_TX1 0x80000000
-				MX53_PAD_LVDS1_TX0_P__LDB_LVDS1_TX0 0x80000000
+				MX53_PAD_LVDS1_TX3_P__LDB_LVDS1_TX3 0x10000
+				MX53_PAD_LVDS1_TX2_P__LDB_LVDS1_TX2 0x10000
+				MX53_PAD_LVDS1_CLK_P__LDB_LVDS1_CLK 0x10000
+				MX53_PAD_LVDS1_TX1_P__LDB_LVDS1_TX1 0x10000
+				MX53_PAD_LVDS1_TX0_P__LDB_LVDS1_TX0 0x10000
 			>;
 		};
 	};
@@ -114,78 +44,52 @@
 	disp1 {
 		pinctrl_disp1_1: disp1-grp1 {
 			fsl,pins = <
-				MX53_PAD_EIM_A16__IPU_DI1_DISP_CLK 0x80000000 /* DISP1_CLK */
-				MX53_PAD_EIM_DA10__IPU_DI1_PIN15   0x80000000 /* DISP1_DRDY */
-				MX53_PAD_EIM_D23__IPU_DI1_PIN2     0x80000000 /* DISP1_HSYNC */
-				MX53_PAD_EIM_EB3__IPU_DI1_PIN3     0x80000000 /* DISP1_VSYNC */
-				MX53_PAD_EIM_D26__IPU_DISP1_DAT_22 0x80000000
-				MX53_PAD_EIM_D27__IPU_DISP1_DAT_23 0x80000000
-				MX53_PAD_EIM_D30__IPU_DISP1_DAT_21 0x80000000
-				MX53_PAD_EIM_D31__IPU_DISP1_DAT_20 0x80000000
-				MX53_PAD_EIM_A24__IPU_DISP1_DAT_19 0x80000000
-				MX53_PAD_EIM_A23__IPU_DISP1_DAT_18 0x80000000
-				MX53_PAD_EIM_A22__IPU_DISP1_DAT_17 0x80000000
-				MX53_PAD_EIM_A21__IPU_DISP1_DAT_16 0x80000000
-				MX53_PAD_EIM_A20__IPU_DISP1_DAT_15 0x80000000
-				MX53_PAD_EIM_A19__IPU_DISP1_DAT_14 0x80000000
-				MX53_PAD_EIM_A18__IPU_DISP1_DAT_13 0x80000000
-				MX53_PAD_EIM_A17__IPU_DISP1_DAT_12 0x80000000
-				MX53_PAD_EIM_EB0__IPU_DISP1_DAT_11 0x80000000
-				MX53_PAD_EIM_EB1__IPU_DISP1_DAT_10 0x80000000
-				MX53_PAD_EIM_DA0__IPU_DISP1_DAT_9  0x80000000
-				MX53_PAD_EIM_DA1__IPU_DISP1_DAT_8  0x80000000
-				MX53_PAD_EIM_DA2__IPU_DISP1_DAT_7  0x80000000
-				MX53_PAD_EIM_DA3__IPU_DISP1_DAT_6  0x80000000
-				MX53_PAD_EIM_DA4__IPU_DISP1_DAT_5  0x80000000
-				MX53_PAD_EIM_DA5__IPU_DISP1_DAT_4  0x80000000
-				MX53_PAD_EIM_DA6__IPU_DISP1_DAT_3  0x80000000
-				MX53_PAD_EIM_DA7__IPU_DISP1_DAT_2  0x80000000
-				MX53_PAD_EIM_DA8__IPU_DISP1_DAT_1  0x80000000
-				MX53_PAD_EIM_DA9__IPU_DISP1_DAT_0  0x80000000
-			>;
-		};
-	};
-
-	tve {
-		pinctrl_vga_sync_1: vgasync-grp1 {
-			fsl,pins = <
-				/* VGA_VSYNC, HSYNC with max drive strength */
-				MX53_PAD_EIM_CS1__IPU_DI1_PIN6	   0xe6
-				MX53_PAD_EIM_DA15__IPU_DI1_PIN4	   0xe6
+				MX53_PAD_EIM_DA10__IPU_DI1_PIN15   0x10000 /* DISP1_DRDY */
+				MX53_PAD_EIM_D23__IPU_DI1_PIN2     0x10000 /* DISP1_HSYNC */
+				MX53_PAD_EIM_EB3__IPU_DI1_PIN3     0x10000 /* DISP1_VSYNC */
+				MX53_PAD_EIM_D26__IPU_DISP1_DAT_22 0x10000
+				MX53_PAD_EIM_D27__IPU_DISP1_DAT_23 0x10000
+				MX53_PAD_EIM_D30__IPU_DISP1_DAT_21 0x10000
+				MX53_PAD_EIM_D31__IPU_DISP1_DAT_20 0x10000
+				MX53_PAD_EIM_A24__IPU_DISP1_DAT_19 0x10000
+				MX53_PAD_EIM_A23__IPU_DISP1_DAT_18 0x10000
+				MX53_PAD_EIM_A22__IPU_DISP1_DAT_17 0x10000
+				MX53_PAD_EIM_A21__IPU_DISP1_DAT_16 0x10000
+				MX53_PAD_EIM_A20__IPU_DISP1_DAT_15 0x10000
+				MX53_PAD_EIM_A19__IPU_DISP1_DAT_14 0x10000
+				MX53_PAD_EIM_A18__IPU_DISP1_DAT_13 0x10000
+				MX53_PAD_EIM_A17__IPU_DISP1_DAT_12 0x10000
+				MX53_PAD_EIM_EB0__IPU_DISP1_DAT_11 0x10000
+				MX53_PAD_EIM_EB1__IPU_DISP1_DAT_10 0x10000
+				MX53_PAD_EIM_DA0__IPU_DISP1_DAT_9  0x10000
+				MX53_PAD_EIM_DA1__IPU_DISP1_DAT_8  0x10000
+				MX53_PAD_EIM_DA2__IPU_DISP1_DAT_7  0x10000
+				MX53_PAD_EIM_DA3__IPU_DISP1_DAT_6  0x10000
+				MX53_PAD_EIM_DA4__IPU_DISP1_DAT_5  0x10000
+				MX53_PAD_EIM_DA5__IPU_DISP1_DAT_4  0x10000
+				MX53_PAD_EIM_DA6__IPU_DISP1_DAT_3  0x10000
+				MX53_PAD_EIM_DA7__IPU_DISP1_DAT_2  0x10000
+				MX53_PAD_EIM_DA8__IPU_DISP1_DAT_1  0x10000
+				MX53_PAD_EIM_DA9__IPU_DISP1_DAT_0  0x10000
 			>;
 		};
 	};
 };
 
-&ipu_di1_disp1 {
-	remote-endpoint = <&display1_in>;
-};
-
 &cspi {
 	status = "okay";
 };
 
-&audmux {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_audmux>;
-};
-
 &i2c2 {
 	codec: sgtl5000@a {
 		compatible = "fsl,sgtl5000";
 		reg = <0x0a>;
-		clocks = <&clks IMX5_CLK_SSI_EXT1_GATE>;
-		VDDA-supply = <&reg_3p2v>;
-		VDDIO-supply = <&reg_3p2v>;
 	};
 
 	expander: pca9554@20 {
 		compatible = "pca9554";
 		reg = <0x20>;
 		interrupts = <109>;
-		#gpio-cells = <2>;
-		gpio-controller;
 	};
 
 	sensor2: lm75@49 {
@@ -195,7 +99,6 @@
 };
 
 &fec {
-	phy-reset-gpios = <&gpio7 6 0>;
 	status = "okay";
 };
 
@@ -211,23 +114,10 @@
 	status = "okay";
 };
 
-&usbotg {
-	dr_mode = "host";
-	status = "okay";
-};
-
-&usbh1 {
-	status = "okay";
-};
-
 &uart1 {
 	status = "okay";
 };
 
-&ssi2 {
-	status = "okay";
-};
-
 &uart2 {
 	status = "okay";
 };
@@ -243,13 +133,3 @@
 &i2c3 {
 	status = "okay";
 };
-
-&tve {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_vga_sync_1>;
-	ddc-i2c-bus = <&i2c3>;
-	fsl,tve-mode = "vga";
-	fsl,hsync-pin = <4>;
-	fsl,vsync-pin = <6>;
-	status = "okay";
-};
diff -urNp a/arch/arm/boot/dts/imx53-qsb.dts b/arch/arm/boot/dts/imx53-qsb.dts
--- a/arch/arm/boot/dts/imx53-qsb.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx53-qsb.dts	2015-10-27 00:45:05.000000000 +0000
@@ -11,14 +11,155 @@
  */
 
 /dts-v1/;
-#include "imx53-qsb-common.dtsi"
+#include "imx53.dtsi"
 
 / {
 	model = "Freescale i.MX53 Quick Start Board";
 	compatible = "fsl,imx53-qsb", "fsl,imx53";
+
+	memory {
+		reg = <0x70000000 0x40000000>;
+	};
+
+	gpio-keys {
+		compatible = "gpio-keys";
+
+		power {
+			label = "Power Button";
+			gpios = <&gpio1 8 0>;
+			linux,code = <116>; /* KEY_POWER */
+			gpio-key,wakeup;
+		};
+
+		volume-up {
+			label = "Volume Up";
+			gpios = <&gpio2 14 0>;
+			linux,code = <115>; /* KEY_VOLUMEUP */
+		};
+
+		volume-down {
+			label = "Volume Down";
+			gpios = <&gpio2 15 0>;
+			linux,code = <114>; /* KEY_VOLUMEDOWN */
+		};
+	};
+
+	leds {
+		compatible = "gpio-leds";
+		pinctrl-names = "default";
+		pinctrl-0 = <&led_pin_gpio7_7>;
+
+		user {
+			label = "Heartbeat";
+			gpios = <&gpio7 7 0>;
+			linux,default-trigger = "heartbeat";
+		};
+	};
+
+	regulators {
+		compatible = "simple-bus";
+
+		reg_3p2v: 3p2v {
+			compatible = "regulator-fixed";
+			regulator-name = "3P2V";
+			regulator-min-microvolt = <3200000>;
+			regulator-max-microvolt = <3200000>;
+			regulator-always-on;
+		};
+	};
+
+	sound {
+		compatible = "fsl,imx53-qsb-sgtl5000",
+			     "fsl,imx-audio-sgtl5000";
+		model = "imx53-qsb-sgtl5000";
+		ssi-controller = <&ssi2>;
+		audio-codec = <&sgtl5000>;
+		audio-routing =
+			"MIC_IN", "Mic Jack",
+			"Mic Jack", "Mic Bias",
+			"Headphone Jack", "HP_OUT";
+		mux-int-port = <2>;
+		mux-ext-port = <5>;
+	};
+};
+
+&esdhc1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_esdhc1_1>;
+	cd-gpios = <&gpio3 13 0>;
+	status = "okay";
+};
+
+&ssi2 {
+	fsl,mode = "i2s-slave";
+	status = "okay";
+};
+
+&esdhc3 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_esdhc3_1>;
+	cd-gpios = <&gpio3 11 0>;
+	wp-gpios = <&gpio3 12 0>;
+	status = "okay";
+};
+
+&iomuxc {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_hog>;
+
+	hog {
+		pinctrl_hog: hoggrp {
+			fsl,pins = <
+				MX53_PAD_GPIO_0__CCM_SSI_EXT1_CLK 0x80000000
+				MX53_PAD_GPIO_8__GPIO1_8          0x80000000
+				MX53_PAD_PATA_DATA14__GPIO2_14    0x80000000
+				MX53_PAD_PATA_DATA15__GPIO2_15    0x80000000
+				MX53_PAD_EIM_DA11__GPIO3_11       0x80000000
+				MX53_PAD_EIM_DA12__GPIO3_12       0x80000000
+				MX53_PAD_EIM_DA13__GPIO3_13       0x80000000
+				MX53_PAD_PATA_DA_0__GPIO7_6       0x80000000
+				MX53_PAD_GPIO_16__GPIO7_11        0x80000000
+			>;
+		};
+
+		led_pin_gpio7_7: led_gpio7_7@0 {
+			fsl,pins = <
+				MX53_PAD_PATA_DA_1__GPIO7_7 0x80000000
+			>;
+		};
+	};
+
+};
+
+&uart1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_uart1_1>;
+	status = "okay";
+};
+
+&i2c2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_i2c2_1>;
+	status = "okay";
+
+	sgtl5000: codec@0a {
+		compatible = "fsl,sgtl5000";
+		reg = <0x0a>;
+		VDDA-supply = <&reg_3p2v>;
+		VDDIO-supply = <&reg_3p2v>;
+	};
 };
 
 &i2c1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_i2c1_1>;
+	status = "okay";
+
+	accelerometer: mma8450@1c {
+		compatible = "fsl,mma8450";
+		reg = <0x1c>;
+	};
+
 	pmic: dialog@48 {
 		compatible = "dlg,da9053-aa", "dlg,da9052";
 		reg = <0x48>;
@@ -113,3 +254,17 @@
 		};
 	};
 };
+
+&audmux {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_audmux_1>;
+	status = "okay";
+};
+
+&fec {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_fec_1>;
+	phy-mode = "rmii";
+	phy-reset-gpios = <&gpio7 6 0>;
+	status = "okay";
+};
diff -urNp a/arch/arm/boot/dts/imx53-smd.dts b/arch/arm/boot/dts/imx53-smd.dts
--- a/arch/arm/boot/dts/imx53-smd.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx53-smd.dts	2015-10-27 00:45:05.000000000 +0000
@@ -40,7 +40,7 @@
 
 &esdhc1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc1>;
+	pinctrl-0 = <&pinctrl_esdhc1_1>;
 	cd-gpios = <&gpio3 13 0>;
 	wp-gpios = <&gpio4 11 0>;
 	status = "okay";
@@ -48,21 +48,21 @@
 
 &esdhc2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc2>;
+	pinctrl-0 = <&pinctrl_esdhc2_1>;
 	non-removable;
 	status = "okay";
 };
 
 &uart3 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart3>;
+	pinctrl-0 = <&pinctrl_uart3_1>;
 	fsl,uart-has-rtscts;
 	status = "okay";
 };
 
 &ecspi1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_ecspi1>;
+	pinctrl-0 = <&pinctrl_ecspi1_1>;
 	fsl,spi-num-chipselects = <2>;
 	cs-gpios = <&gpio2 30 0>, <&gpio3 19 0>;
 	status = "okay";
@@ -95,7 +95,7 @@
 
 &esdhc3 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc3>;
+	pinctrl-0 = <&pinctrl_esdhc3_1>;
 	non-removable;
 	status = "okay";
 };
@@ -104,7 +104,7 @@
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_hog>;
 
-	imx53-smd {
+	hog {
 		pinctrl_hog: hoggrp {
 			fsl,pins = <
 				MX53_PAD_PATA_DATA14__GPIO2_14 0x80000000
@@ -116,121 +116,24 @@
 				MX53_PAD_PATA_DA_0__GPIO7_6    0x80000000
 			>;
 		};
-
-		pinctrl_ecspi1: ecspi1grp {
-			fsl,pins = <
-				MX53_PAD_EIM_D16__ECSPI1_SCLK		0x80000000
-				MX53_PAD_EIM_D17__ECSPI1_MISO		0x80000000
-				MX53_PAD_EIM_D18__ECSPI1_MOSI		0x80000000
-			>;
-		};
-
-		pinctrl_esdhc1: esdhc1grp {
-			fsl,pins = <
-				MX53_PAD_SD1_DATA0__ESDHC1_DAT0		0x1d5
-				MX53_PAD_SD1_DATA1__ESDHC1_DAT1		0x1d5
-				MX53_PAD_SD1_DATA2__ESDHC1_DAT2		0x1d5
-				MX53_PAD_SD1_DATA3__ESDHC1_DAT3		0x1d5
-				MX53_PAD_SD1_CMD__ESDHC1_CMD		0x1d5
-				MX53_PAD_SD1_CLK__ESDHC1_CLK		0x1d5
-			>;
-		};
-
-		pinctrl_esdhc2: esdhc2grp {
-			fsl,pins = <
-				MX53_PAD_SD2_CMD__ESDHC2_CMD		0x1d5
-				MX53_PAD_SD2_CLK__ESDHC2_CLK		0x1d5
-				MX53_PAD_SD2_DATA0__ESDHC2_DAT0		0x1d5
-				MX53_PAD_SD2_DATA1__ESDHC2_DAT1		0x1d5
-				MX53_PAD_SD2_DATA2__ESDHC2_DAT2		0x1d5
-				MX53_PAD_SD2_DATA3__ESDHC2_DAT3		0x1d5
-			>;
-		};
-
-		pinctrl_esdhc3: esdhc3grp {
-			fsl,pins = <
-				MX53_PAD_PATA_DATA8__ESDHC3_DAT0	0x1d5
-				MX53_PAD_PATA_DATA9__ESDHC3_DAT1	0x1d5
-				MX53_PAD_PATA_DATA10__ESDHC3_DAT2	0x1d5
-				MX53_PAD_PATA_DATA11__ESDHC3_DAT3	0x1d5
-				MX53_PAD_PATA_DATA0__ESDHC3_DAT4	0x1d5
-				MX53_PAD_PATA_DATA1__ESDHC3_DAT5	0x1d5
-				MX53_PAD_PATA_DATA2__ESDHC3_DAT6	0x1d5
-				MX53_PAD_PATA_DATA3__ESDHC3_DAT7	0x1d5
-				MX53_PAD_PATA_RESET_B__ESDHC3_CMD	0x1d5
-				MX53_PAD_PATA_IORDY__ESDHC3_CLK		0x1d5
-			>;
-		};
-
-		pinctrl_fec: fecgrp {
-			fsl,pins = <
-				MX53_PAD_FEC_MDC__FEC_MDC		0x80000000
-				MX53_PAD_FEC_MDIO__FEC_MDIO		0x80000000
-				MX53_PAD_FEC_REF_CLK__FEC_TX_CLK	0x80000000
-				MX53_PAD_FEC_RX_ER__FEC_RX_ER		0x80000000
-				MX53_PAD_FEC_CRS_DV__FEC_RX_DV		0x80000000
-				MX53_PAD_FEC_RXD1__FEC_RDATA_1		0x80000000
-				MX53_PAD_FEC_RXD0__FEC_RDATA_0		0x80000000
-				MX53_PAD_FEC_TX_EN__FEC_TX_EN		0x80000000
-				MX53_PAD_FEC_TXD1__FEC_TDATA_1		0x80000000
-				MX53_PAD_FEC_TXD0__FEC_TDATA_0		0x80000000
-			>;
-		};
-
-		pinctrl_i2c1: i2c1grp {
-			fsl,pins = <
-				MX53_PAD_CSI0_DAT8__I2C1_SDA		0xc0000000
-				MX53_PAD_CSI0_DAT9__I2C1_SCL		0xc0000000
-			>;
-		};
-
-		pinctrl_i2c2: i2c2grp {
-			fsl,pins = <
-				MX53_PAD_KEY_ROW3__I2C2_SDA		0xc0000000
-				MX53_PAD_KEY_COL3__I2C2_SCL		0xc0000000
-			>;
-		};
-
-		pinctrl_uart1: uart1grp {
-			fsl,pins = <
-				MX53_PAD_CSI0_DAT10__UART1_TXD_MUX	0x1e4
-				MX53_PAD_CSI0_DAT11__UART1_RXD_MUX	0x1e4
-			>;
-		};
-
-		pinctrl_uart2: uart2grp {
-			fsl,pins = <
-				MX53_PAD_PATA_BUFFER_EN__UART2_RXD_MUX	0x1e4
-				MX53_PAD_PATA_DMARQ__UART2_TXD_MUX	0x1e4
-			>;
-		};
-
-		pinctrl_uart3: uart3grp {
-			fsl,pins = <
-				MX53_PAD_PATA_CS_0__UART3_TXD_MUX	0x1e4
-				MX53_PAD_PATA_CS_1__UART3_RXD_MUX	0x1e4
-				MX53_PAD_PATA_DA_1__UART3_CTS		0x1e4
-				MX53_PAD_PATA_DA_2__UART3_RTS		0x1e4
-			>;
-		};
 	};
 };
 
 &uart1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1>;
+	pinctrl-0 = <&pinctrl_uart1_1>;
 	status = "okay";
 };
 
 &uart2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart2>;
+	pinctrl-0 = <&pinctrl_uart2_1>;
 	status = "okay";
 };
 
 &i2c2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c2>;
+	pinctrl-0 = <&pinctrl_i2c2_1>;
 	status = "okay";
 
 	codec: sgtl5000@0a {
@@ -251,7 +154,7 @@
 
 &i2c1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c1>;
+	pinctrl-0 = <&pinctrl_i2c1_1>;
 	status = "okay";
 
 	accelerometer: mma8450@1c {
@@ -265,14 +168,14 @@
 	};
 
 	pmic: dialog@48 {
-		compatible = "dlg,da9053", "dlg,da9052";
+		compatible = "dialog,da9053", "dialog,da9052";
 		reg = <0x48>;
 	};
 };
 
 &fec {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_fec>;
+	pinctrl-0 = <&pinctrl_fec_1>;
 	phy-mode = "rmii";
 	phy-reset-gpios = <&gpio7 6 0>;
 	status = "okay";
diff -urNp a/arch/arm/boot/dts/imx53-tqma53.dtsi b/arch/arm/boot/dts/imx53-tqma53.dtsi
--- a/arch/arm/boot/dts/imx53-tqma53.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx53-tqma53.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -22,12 +22,9 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_3p3v: regulator@0 {
+		reg_3p3v: 3p3v {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "3P3V";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
@@ -38,9 +35,7 @@
 
 &esdhc2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc2>,
-		    <&pinctrl_esdhc2_cdwp>;
-	vmmc-supply = <&reg_3p3v>;
+	pinctrl-0 = <&pinctrl_esdhc2_1>;
 	wp-gpios = <&gpio1 2 0>;
 	cd-gpios = <&gpio1 4 0>;
 	status = "disabled";
@@ -48,13 +43,13 @@
 
 &uart3 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart3>;
+	pinctrl-0 = <&pinctrl_uart3_2>;
 	status = "disabled";
 };
 
 &ecspi1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_ecspi1>;
+	pinctrl-0 = <&pinctrl_ecspi1_1>;
 	fsl,spi-num-chipselects = <4>;
 	cs-gpios = <&gpio2 30 0>, <&gpio3 19 0>,
 		   <&gpio3 24 0>, <&gpio3 25 0>;
@@ -63,7 +58,7 @@
 
 &esdhc3 { /* EMMC */
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_esdhc3>;
+	pinctrl-0 = <&pinctrl_esdhc3_1>;
 	vmmc-supply = <&reg_3p3v>;
 	non-removable;
 	bus-width = <8>;
@@ -74,142 +69,31 @@
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_hog>;
 
-	imx53-tqma53 {
-		pinctrl_hog: hoggrp {
-			fsl,pins = <
-				 MX53_PAD_GPIO_0__CCM_SSI_EXT1_CLK 0x80000000 /* SSI_MCLK */
-				 MX53_PAD_PATA_DA_1__GPIO7_7     0x80000000 /* LCD_BLT_EN */
-				 MX53_PAD_PATA_DA_2__GPIO7_8     0x80000000 /* LCD_RESET */
-				 MX53_PAD_PATA_DATA5__GPIO2_5    0x80000000 /* LCD_POWER */
-				 MX53_PAD_PATA_DATA6__GPIO2_6    0x80000000 /* PMIC_INT */
-				 MX53_PAD_PATA_DATA14__GPIO2_14  0x80000000 /* CSI_RST */
-				 MX53_PAD_PATA_DATA15__GPIO2_15  0x80000000 /* CSI_PWDN */
-				 MX53_PAD_GPIO_19__GPIO4_5 	 0x80000000 /* #SYSTEM_DOWN */
-				 MX53_PAD_GPIO_3__GPIO1_3        0x80000000
-				 MX53_PAD_PATA_DA_0__GPIO7_6	 0x80000000 /* #PHY_RESET */
-				 MX53_PAD_GPIO_1__PWM2_PWMO	 0x80000000 /* LCD_CONTRAST */
-			>;
-		};
-
-		pinctrl_audmux: audmuxgrp {
-			fsl,pins = <
-				MX53_PAD_KEY_COL0__AUDMUX_AUD5_TXC	0x80000000
-				MX53_PAD_KEY_ROW0__AUDMUX_AUD5_TXD	0x80000000
-				MX53_PAD_KEY_COL1__AUDMUX_AUD5_TXFS	0x80000000
-				MX53_PAD_KEY_ROW1__AUDMUX_AUD5_RXD	0x80000000
-			>;
-		};
-
-		pinctrl_can1: can1grp {
-			fsl,pins = <
-				MX53_PAD_KEY_COL2__CAN1_TXCAN		0x80000000
-				MX53_PAD_KEY_ROW2__CAN1_RXCAN		0x80000000
-			>;
-		};
-
-		pinctrl_can2: can2grp {
-			fsl,pins = <
-				MX53_PAD_KEY_COL4__CAN2_TXCAN		0x80000000
-				MX53_PAD_KEY_ROW4__CAN2_RXCAN		0x80000000
-			>;
-		};
-
-		pinctrl_cspi: cspigrp {
-			fsl,pins = <
-				MX53_PAD_SD1_DATA0__CSPI_MISO		0x1d5
-				MX53_PAD_SD1_CMD__CSPI_MOSI		0x1d5
-				MX53_PAD_SD1_CLK__CSPI_SCLK		0x1d5
-			>;
-		};
-
-		pinctrl_ecspi1: ecspi1grp {
-			fsl,pins = <
-				MX53_PAD_EIM_D16__ECSPI1_SCLK		0x80000000
-				MX53_PAD_EIM_D17__ECSPI1_MISO		0x80000000
-				MX53_PAD_EIM_D18__ECSPI1_MOSI		0x80000000
-			>;
-		};
-
-		pinctrl_esdhc2: esdhc2grp {
-			fsl,pins = <
-				MX53_PAD_SD2_CMD__ESDHC2_CMD		0x1d5
-				MX53_PAD_SD2_CLK__ESDHC2_CLK		0x1d5
-				MX53_PAD_SD2_DATA0__ESDHC2_DAT0		0x1d5
-				MX53_PAD_SD2_DATA1__ESDHC2_DAT1		0x1d5
-				MX53_PAD_SD2_DATA2__ESDHC2_DAT2		0x1d5
-				MX53_PAD_SD2_DATA3__ESDHC2_DAT3		0x1d5
-			>;
-		};
-
-		pinctrl_esdhc2_cdwp: esdhc2cdwp {
-			fsl,pins = <
-				MX53_PAD_GPIO_4__GPIO1_4	0x80000000 /* SD2_CD */
-				MX53_PAD_GPIO_2__GPIO1_2	0x80000000 /* SD2_WP */
-			>;
-		};
-
-		pinctrl_esdhc3: esdhc3grp {
-			fsl,pins = <
-				MX53_PAD_PATA_DATA8__ESDHC3_DAT0	0x1d5
-				MX53_PAD_PATA_DATA9__ESDHC3_DAT1	0x1d5
-				MX53_PAD_PATA_DATA10__ESDHC3_DAT2	0x1d5
-				MX53_PAD_PATA_DATA11__ESDHC3_DAT3	0x1d5
-				MX53_PAD_PATA_DATA0__ESDHC3_DAT4	0x1d5
-				MX53_PAD_PATA_DATA1__ESDHC3_DAT5	0x1d5
-				MX53_PAD_PATA_DATA2__ESDHC3_DAT6	0x1d5
-				MX53_PAD_PATA_DATA3__ESDHC3_DAT7	0x1d5
-				MX53_PAD_PATA_RESET_B__ESDHC3_CMD	0x1d5
-				MX53_PAD_PATA_IORDY__ESDHC3_CLK		0x1d5
-			>;
-		};
-
-		pinctrl_fec: fecgrp {
-			fsl,pins = <
-				MX53_PAD_FEC_MDC__FEC_MDC		0x80000000
-				MX53_PAD_FEC_MDIO__FEC_MDIO		0x80000000
-				MX53_PAD_FEC_REF_CLK__FEC_TX_CLK	0x80000000
-				MX53_PAD_FEC_RX_ER__FEC_RX_ER		0x80000000
-				MX53_PAD_FEC_CRS_DV__FEC_RX_DV		0x80000000
-				MX53_PAD_FEC_RXD1__FEC_RDATA_1		0x80000000
-				MX53_PAD_FEC_RXD0__FEC_RDATA_0		0x80000000
-				MX53_PAD_FEC_TX_EN__FEC_TX_EN		0x80000000
-				MX53_PAD_FEC_TXD1__FEC_TDATA_1		0x80000000
-				MX53_PAD_FEC_TXD0__FEC_TDATA_0		0x80000000
-			>;
-		};
-
-		pinctrl_i2c2: i2c2grp {
+	i2s {
+		pinctrl_i2s_1: i2s-grp1 {
 			fsl,pins = <
-				MX53_PAD_KEY_ROW3__I2C2_SDA		0xc0000000
-				MX53_PAD_KEY_COL3__I2C2_SCL		0xc0000000
-			>;
-		};
-
-		pinctrl_i2c3: i2c3grp {
-			fsl,pins = <
-				MX53_PAD_GPIO_6__I2C3_SDA		0xc0000000
-				MX53_PAD_GPIO_5__I2C3_SCL		0xc0000000
-			>;
-		};
-
-		pinctrl_uart1: uart1grp {
-			fsl,pins = <
-				MX53_PAD_PATA_DIOW__UART1_TXD_MUX	0x1e4
-				MX53_PAD_PATA_DMACK__UART1_RXD_MUX	0x1e4
-			>;
-		};
-
-		pinctrl_uart2: uart2grp {
-			fsl,pins = <
-				MX53_PAD_PATA_BUFFER_EN__UART2_RXD_MUX	0x1e4
-				MX53_PAD_PATA_DMARQ__UART2_TXD_MUX	0x1e4
+				 MX53_PAD_GPIO_19__GPIO4_5           0x10000 /* I2S_MCLK */
+				 MX53_PAD_KEY_COL0__AUDMUX_AUD5_TXC  0x10000 /* I2S_SCLK */
+				 MX53_PAD_KEY_ROW0__AUDMUX_AUD5_TXD  0x10000 /* I2S_DOUT */
+				 MX53_PAD_KEY_COL1__AUDMUX_AUD5_TXFS 0x10000 /* I2S_LRCLK */
+				 MX53_PAD_KEY_ROW1__AUDMUX_AUD5_RXD  0x10000 /* I2S_DIN */
 			>;
 		};
+	};
 
-		pinctrl_uart3: uart3grp {
+	hog {
+		pinctrl_hog: hoggrp {
 			fsl,pins = <
-				MX53_PAD_PATA_CS_0__UART3_TXD_MUX	0x1e4
-				MX53_PAD_PATA_CS_1__UART3_RXD_MUX	0x1e4
+				 MX53_PAD_EIM_CS1__IPU_DI1_PIN6  0x10000 /* VSYNC */
+				 MX53_PAD_EIM_DA15__IPU_DI1_PIN4 0x10000 /* HSYNC */
+				 MX53_PAD_PATA_DA_1__GPIO7_7     0x10000 /* LCD_BLT_EN */
+				 MX53_PAD_PATA_DA_2__GPIO7_8     0x10000 /* LCD_RESET */
+				 MX53_PAD_PATA_DATA5__GPIO2_5    0x10000 /* LCD_POWER */
+				 MX53_PAD_PATA_DATA6__GPIO2_6    0x10000 /* PMIC_INT */
+				 MX53_PAD_PATA_DATA14__GPIO2_14  0x10000 /* CSI_RST */
+				 MX53_PAD_PATA_DATA15__GPIO2_15  0x10000 /* CSI_PWDN */
+				 MX53_PAD_GPIO_0__GPIO1_0        0x10000 /* SYSTEM_DOWN */
+				 MX53_PAD_GPIO_3__GPIO1_3        0x10000
 			>;
 		};
 	};
@@ -217,38 +101,38 @@
 
 &uart1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1>;
+	pinctrl-0 = <&pinctrl_uart1_2>;
 	fsl,uart-has-rtscts;
 	status = "disabled";
 };
 
 &uart2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart2>;
+	pinctrl-0 = <&pinctrl_uart2_1>;
 	status = "disabled";
 };
 
 &can1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_can1>;
+	pinctrl-0 = <&pinctrl_can1_2>;
 	status = "disabled";
 };
 
 &can2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_can2>;
+	pinctrl-0 = <&pinctrl_can2_1>;
 	status = "disabled";
 };
 
 &i2c3 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c3>;
+	pinctrl-0 = <&pinctrl_i2c3_1>;
 	status = "disabled";
 };
 
 &cspi {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_cspi>;
+	pinctrl-0 = <&pinctrl_cspi_1>;
 	fsl,spi-num-chipselects = <3>;
 	cs-gpios = <&gpio1 18 0>, <&gpio1 19 0>,
 		   <&gpio1 21 0>;
@@ -257,7 +141,7 @@
 
 &i2c2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c2>;
+	pinctrl-0 = <&pinctrl_i2c2_1>;
 	status = "okay";
 
 	pmic: mc34708@8 {
@@ -265,7 +149,7 @@
 		reg = <0x8>;
 		fsl,mc13xxx-uses-rtc;
 		interrupt-parent = <&gpio2>;
-		interrupts = <6 4>; /* PATA_DATA6, active high */
+		interrupts = <6 8>; /* PDATA_DATA6, low active */
 	};
 
 	sensor1: lm75@48 {
@@ -282,7 +166,7 @@
 
 &fec {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_fec>;
+	pinctrl-0 = <&pinctrl_fec_1>;
 	phy-mode = "rmii";
 	status = "disabled";
 };
diff -urNp a/arch/arm/boot/dts/imx53.dtsi b/arch/arm/boot/dts/imx53.dtsi
--- a/arch/arm/boot/dts/imx53.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx53.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -12,13 +12,14 @@
 
 #include "skeleton.dtsi"
 #include "imx53-pinfunc.h"
-#include <dt-bindings/clock/imx5-clock.h>
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
 
 / {
 	aliases {
-		ethernet0 = &fec;
+		serial0 = &uart1;
+		serial1 = &uart2;
+		serial2 = &uart3;
+		serial3 = &uart4;
+		serial4 = &uart5;
 		gpio0 = &gpio1;
 		gpio1 = &gpio2;
 		gpio2 = &gpio3;
@@ -26,47 +27,6 @@
 		gpio4 = &gpio5;
 		gpio5 = &gpio6;
 		gpio6 = &gpio7;
-		i2c0 = &i2c1;
-		i2c1 = &i2c2;
-		i2c2 = &i2c3;
-		mmc0 = &esdhc1;
-		mmc1 = &esdhc2;
-		mmc2 = &esdhc3;
-		mmc3 = &esdhc4;
-		serial0 = &uart1;
-		serial1 = &uart2;
-		serial2 = &uart3;
-		serial3 = &uart4;
-		serial4 = &uart5;
-		spi0 = &ecspi1;
-		spi1 = &ecspi2;
-		spi2 = &cspi;
-	};
-
-	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		cpu0: cpu@0 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a8";
-			reg = <0x0>;
-			clocks = <&clks IMX5_CLK_ARM>;
-			clock-latency = <61036>;
-			voltage-tolerance = <5>;
-			operating-points = <
-				/* kHz */
-				 166666  850000
-				 400000  900000
-				 800000 1050000
-				1000000 1200000
-				1200000 1300000
-			>;
-		};
-	};
-
-	display-subsystem {
-		compatible = "fsl,imx-display-subsystem";
-		ports = <&ipu_di0>, <&ipu_di1>;
 	};
 
 	tzic: tz-interrupt-controller@0fffc000 {
@@ -82,25 +42,21 @@
 
 		ckil {
 			compatible = "fsl,imx-ckil", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <32768>;
 		};
 
 		ckih1 {
 			compatible = "fsl,imx-ckih1", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <22579200>;
 		};
 
 		ckih2 {
 			compatible = "fsl,imx-ckih2", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <0>;
 		};
 
 		osc {
 			compatible = "fsl,imx-osc", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <24000000>;
 		};
 	};
@@ -112,63 +68,14 @@
 		interrupt-parent = <&tzic>;
 		ranges;
 
-		sata: sata@10000000 {
-			compatible = "fsl,imx53-ahci";
-			reg = <0x10000000 0x1000>;
-			interrupts = <28>;
-			clocks = <&clks IMX5_CLK_SATA_GATE>,
-				 <&clks IMX5_CLK_SATA_REF>,
-				 <&clks IMX5_CLK_AHB>;
-			clock-names = "sata", "sata_ref", "ahb";
-			status = "disabled";
-		};
-
 		ipu: ipu@18000000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
+			#crtc-cells = <1>;
 			compatible = "fsl,imx53-ipu";
 			reg = <0x18000000 0x08000000>;
 			interrupts = <11 10>;
-			clocks = <&clks IMX5_CLK_IPU_GATE>,
-			         <&clks IMX5_CLK_IPU_DI0_GATE>,
-			         <&clks IMX5_CLK_IPU_DI1_GATE>;
+			clocks = <&clks 59>, <&clks 110>, <&clks 61>;
 			clock-names = "bus", "di0", "di1";
 			resets = <&src 2>;
-
-			ipu_di0: port@2 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <2>;
-
-				ipu_di0_disp0: endpoint@0 {
-					reg = <0>;
-				};
-
-				ipu_di0_lvds0: endpoint@1 {
-					reg = <1>;
-					remote-endpoint = <&lvds0_in>;
-				};
-			};
-
-			ipu_di1: port@3 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <3>;
-
-				ipu_di1_disp1: endpoint@0 {
-					reg = <0>;
-				};
-
-				ipu_di1_lvds1: endpoint@1 {
-					reg = <1>;
-					remote-endpoint = <&lvds1_in>;
-				};
-
-				ipu_di1_tve: endpoint@2 {
-					reg = <2>;
-					remote-endpoint = <&tve_in>;
-				};
-			};
 		};
 
 		aips@50000000 { /* AIPS1 */
@@ -189,9 +96,7 @@
 					compatible = "fsl,imx53-esdhc";
 					reg = <0x50004000 0x4000>;
 					interrupts = <1>;
-					clocks = <&clks IMX5_CLK_ESDHC1_IPG_GATE>,
-					         <&clks IMX5_CLK_DUMMY>,
-					         <&clks IMX5_CLK_ESDHC1_PER_GATE>;
+					clocks = <&clks 44>, <&clks 0>, <&clks 71>;
 					clock-names = "ipg", "ahb", "per";
 					bus-width = <4>;
 					status = "disabled";
@@ -201,9 +106,7 @@
 					compatible = "fsl,imx53-esdhc";
 					reg = <0x50008000 0x4000>;
 					interrupts = <2>;
-					clocks = <&clks IMX5_CLK_ESDHC2_IPG_GATE>,
-					         <&clks IMX5_CLK_DUMMY>,
-					         <&clks IMX5_CLK_ESDHC2_PER_GATE>;
+					clocks = <&clks 45>, <&clks 0>, <&clks 72>;
 					clock-names = "ipg", "ahb", "per";
 					bus-width = <4>;
 					status = "disabled";
@@ -213,8 +116,7 @@
 					compatible = "fsl,imx53-uart", "fsl,imx21-uart";
 					reg = <0x5000c000 0x4000>;
 					interrupts = <33>;
-					clocks = <&clks IMX5_CLK_UART3_IPG_GATE>,
-					         <&clks IMX5_CLK_UART3_PER_GATE>;
+					clocks = <&clks 32>, <&clks 33>;
 					clock-names = "ipg", "per";
 					status = "disabled";
 				};
@@ -225,26 +127,18 @@
 					compatible = "fsl,imx53-ecspi", "fsl,imx51-ecspi";
 					reg = <0x50010000 0x4000>;
 					interrupts = <36>;
-					clocks = <&clks IMX5_CLK_ECSPI1_IPG_GATE>,
-					         <&clks IMX5_CLK_ECSPI1_PER_GATE>;
+					clocks = <&clks 51>, <&clks 52>;
 					clock-names = "ipg", "per";
 					status = "disabled";
 				};
 
 				ssi2: ssi@50014000 {
-					#sound-dai-cells = <0>;
-					compatible = "fsl,imx53-ssi",
-							"fsl,imx51-ssi",
-							"fsl,imx21-ssi";
+					compatible = "fsl,imx53-ssi", "fsl,imx21-ssi";
 					reg = <0x50014000 0x4000>;
 					interrupts = <30>;
-					clocks = <&clks IMX5_CLK_SSI2_IPG_GATE>,
-						 <&clks IMX5_CLK_SSI2_ROOT_GATE>;
-					clock-names = "ipg", "baud";
-					dmas = <&sdma 24 1 0>,
-					       <&sdma 25 1 0>;
-					dma-names = "rx", "tx";
+					clocks = <&clks 49>;
 					fsl,fifo-depth = <15>;
+					fsl,ssi-dma-events = <25 24 23 22>; /* TX0 RX0 TX1 RX1 */
 					status = "disabled";
 				};
 
@@ -252,9 +146,7 @@
 					compatible = "fsl,imx53-esdhc";
 					reg = <0x50020000 0x4000>;
 					interrupts = <3>;
-					clocks = <&clks IMX5_CLK_ESDHC3_IPG_GATE>,
-					         <&clks IMX5_CLK_DUMMY>,
-					         <&clks IMX5_CLK_ESDHC3_PER_GATE>;
+					clocks = <&clks 46>, <&clks 0>, <&clks 73>;
 					clock-names = "ipg", "ahb", "per";
 					bus-width = <4>;
 					status = "disabled";
@@ -264,41 +156,17 @@
 					compatible = "fsl,imx53-esdhc";
 					reg = <0x50024000 0x4000>;
 					interrupts = <4>;
-					clocks = <&clks IMX5_CLK_ESDHC4_IPG_GATE>,
-					         <&clks IMX5_CLK_DUMMY>,
-					         <&clks IMX5_CLK_ESDHC4_PER_GATE>;
+					clocks = <&clks 47>, <&clks 0>, <&clks 74>;
 					clock-names = "ipg", "ahb", "per";
 					bus-width = <4>;
 					status = "disabled";
 				};
 			};
 
-			aipstz1: bridge@53f00000 {
-				compatible = "fsl,imx53-aipstz";
-				reg = <0x53f00000 0x60>;
-			};
-
-			usbphy0: usbphy@0 {
-				compatible = "usb-nop-xceiv";
-				clocks = <&clks IMX5_CLK_USB_PHY1_GATE>;
-				clock-names = "main_clk";
-				status = "okay";
-			};
-
-			usbphy1: usbphy@1 {
-				compatible = "usb-nop-xceiv";
-				clocks = <&clks IMX5_CLK_USB_PHY2_GATE>;
-				clock-names = "main_clk";
-				status = "okay";
-			};
-
 			usbotg: usb@53f80000 {
 				compatible = "fsl,imx53-usb", "fsl,imx27-usb";
 				reg = <0x53f80000 0x0200>;
 				interrupts = <18>;
-				clocks = <&clks IMX5_CLK_USBOH3_GATE>;
-				fsl,usbmisc = <&usbmisc 0>;
-				fsl,usbphy = <&usbphy0>;
 				status = "disabled";
 			};
 
@@ -306,9 +174,6 @@
 				compatible = "fsl,imx53-usb", "fsl,imx27-usb";
 				reg = <0x53f80200 0x0200>;
 				interrupts = <14>;
-				clocks = <&clks IMX5_CLK_USBOH3_GATE>;
-				fsl,usbmisc = <&usbmisc 1>;
-				fsl,usbphy = <&usbphy1>;
 				status = "disabled";
 			};
 
@@ -316,8 +181,6 @@
 				compatible = "fsl,imx53-usb", "fsl,imx27-usb";
 				reg = <0x53f80400 0x0200>;
 				interrupts = <16>;
-				clocks = <&clks IMX5_CLK_USBOH3_GATE>;
-				fsl,usbmisc = <&usbmisc 2>;
 				status = "disabled";
 			};
 
@@ -325,18 +188,9 @@
 				compatible = "fsl,imx53-usb", "fsl,imx27-usb";
 				reg = <0x53f80600 0x0200>;
 				interrupts = <17>;
-				clocks = <&clks IMX5_CLK_USBOH3_GATE>;
-				fsl,usbmisc = <&usbmisc 3>;
 				status = "disabled";
 			};
 
-			usbmisc: usbmisc@53f80800 {
-				#index-cells = <1>;
-				compatible = "fsl,imx53-usbmisc";
-				reg = <0x53f80800 0x200>;
-				clocks = <&clks IMX5_CLK_USBOH3_GATE>;
-			};
-
 			gpio1: gpio@53f84000 {
 				compatible = "fsl,imx53-gpio", "fsl,imx35-gpio";
 				reg = <0x53f84000 0x4000>;
@@ -377,26 +231,18 @@
 				#interrupt-cells = <2>;
 			};
 
-			kpp: kpp@53f94000 {
-				compatible = "fsl,imx53-kpp", "fsl,imx21-kpp";
-				reg = <0x53f94000 0x4000>;
-				interrupts = <60>;
-				clocks = <&clks IMX5_CLK_DUMMY>;
-				status = "disabled";
-			};
-
 			wdog1: wdog@53f98000 {
 				compatible = "fsl,imx53-wdt", "fsl,imx21-wdt";
 				reg = <0x53f98000 0x4000>;
 				interrupts = <58>;
-				clocks = <&clks IMX5_CLK_DUMMY>;
+				clocks = <&clks 0>;
 			};
 
 			wdog2: wdog@53f9c000 {
 				compatible = "fsl,imx53-wdt", "fsl,imx21-wdt";
 				reg = <0x53f9c000 0x4000>;
 				interrupts = <59>;
-				clocks = <&clks IMX5_CLK_DUMMY>;
+				clocks = <&clks 0>;
 				status = "disabled";
 			};
 
@@ -404,14 +250,270 @@
 				compatible = "fsl,imx53-gpt", "fsl,imx31-gpt";
 				reg = <0x53fa0000 0x4000>;
 				interrupts = <39>;
-				clocks = <&clks IMX5_CLK_GPT_IPG_GATE>,
-				         <&clks IMX5_CLK_GPT_HF_GATE>;
+				clocks = <&clks 36>, <&clks 41>;
 				clock-names = "ipg", "per";
 			};
 
 			iomuxc: iomuxc@53fa8000 {
 				compatible = "fsl,imx53-iomuxc";
 				reg = <0x53fa8000 0x4000>;
+
+				audmux {
+					pinctrl_audmux_1: audmuxgrp-1 {
+						fsl,pins = <
+							MX53_PAD_KEY_COL0__AUDMUX_AUD5_TXC  0x80000000
+							MX53_PAD_KEY_ROW0__AUDMUX_AUD5_TXD  0x80000000
+							MX53_PAD_KEY_COL1__AUDMUX_AUD5_TXFS 0x80000000
+							MX53_PAD_KEY_ROW1__AUDMUX_AUD5_RXD  0x80000000
+						>;
+					};
+				};
+
+				fec {
+					pinctrl_fec_1: fecgrp-1 {
+						fsl,pins = <
+							MX53_PAD_FEC_MDC__FEC_MDC	 0x80000000
+							MX53_PAD_FEC_MDIO__FEC_MDIO	 0x80000000
+							MX53_PAD_FEC_REF_CLK__FEC_TX_CLK 0x80000000
+							MX53_PAD_FEC_RX_ER__FEC_RX_ER    0x80000000
+							MX53_PAD_FEC_CRS_DV__FEC_RX_DV   0x80000000
+							MX53_PAD_FEC_RXD1__FEC_RDATA_1   0x80000000
+							MX53_PAD_FEC_RXD0__FEC_RDATA_0   0x80000000
+							MX53_PAD_FEC_TX_EN__FEC_TX_EN    0x80000000
+							MX53_PAD_FEC_TXD1__FEC_TDATA_1   0x80000000
+							MX53_PAD_FEC_TXD0__FEC_TDATA_0   0x80000000
+						>;
+					};
+				};
+
+				csi {
+					pinctrl_csi_1: csigrp-1 {
+						fsl,pins = <
+							MX53_PAD_CSI0_DATA_EN__IPU_CSI0_DATA_EN 0x1d5
+							MX53_PAD_CSI0_VSYNC__IPU_CSI0_VSYNC     0x1d5
+							MX53_PAD_CSI0_MCLK__IPU_CSI0_HSYNC      0x1d5
+							MX53_PAD_CSI0_PIXCLK__IPU_CSI0_PIXCLK   0x1d5
+							MX53_PAD_CSI0_DAT19__IPU_CSI0_D_19      0x1d5
+							MX53_PAD_CSI0_DAT18__IPU_CSI0_D_18      0x1d5
+							MX53_PAD_CSI0_DAT17__IPU_CSI0_D_17      0x1d5
+							MX53_PAD_CSI0_DAT16__IPU_CSI0_D_16      0x1d5
+							MX53_PAD_CSI0_DAT15__IPU_CSI0_D_15      0x1d5
+							MX53_PAD_CSI0_DAT14__IPU_CSI0_D_14      0x1d5
+							MX53_PAD_CSI0_DAT13__IPU_CSI0_D_13      0x1d5
+							MX53_PAD_CSI0_DAT12__IPU_CSI0_D_12      0x1d5
+							MX53_PAD_CSI0_DAT11__IPU_CSI0_D_11      0x1d5
+							MX53_PAD_CSI0_DAT10__IPU_CSI0_D_10      0x1d5
+							MX53_PAD_CSI0_DAT9__IPU_CSI0_D_9	0x1d5
+							MX53_PAD_CSI0_DAT8__IPU_CSI0_D_8	0x1d5
+							MX53_PAD_CSI0_DAT7__IPU_CSI0_D_7	0x1d5
+							MX53_PAD_CSI0_DAT6__IPU_CSI0_D_6	0x1d5
+							MX53_PAD_CSI0_DAT5__IPU_CSI0_D_5	0x1d5
+							MX53_PAD_CSI0_DAT4__IPU_CSI0_D_4	0x1d5
+							MX53_PAD_CSI0_PIXCLK__IPU_CSI0_PIXCLK   0x1d5
+						>;
+					};
+				};
+
+				cspi {
+					pinctrl_cspi_1: cspigrp-1 {
+						fsl,pins = <
+							MX53_PAD_SD1_DATA0__CSPI_MISO 0x1d5
+							MX53_PAD_SD1_CMD__CSPI_MOSI   0x1d5
+							MX53_PAD_SD1_CLK__CSPI_SCLK   0x1d5
+						>;
+					};
+				};
+
+				ecspi1 {
+					pinctrl_ecspi1_1: ecspi1grp-1 {
+						fsl,pins = <
+							MX53_PAD_EIM_D16__ECSPI1_SCLK 0x80000000
+							MX53_PAD_EIM_D17__ECSPI1_MISO 0x80000000
+							MX53_PAD_EIM_D18__ECSPI1_MOSI 0x80000000
+						>;
+					};
+				};
+
+				esdhc1 {
+					pinctrl_esdhc1_1: esdhc1grp-1 {
+						fsl,pins = <
+							MX53_PAD_SD1_DATA0__ESDHC1_DAT0 0x1d5
+							MX53_PAD_SD1_DATA1__ESDHC1_DAT1 0x1d5
+							MX53_PAD_SD1_DATA2__ESDHC1_DAT2 0x1d5
+							MX53_PAD_SD1_DATA3__ESDHC1_DAT3 0x1d5
+							MX53_PAD_SD1_CMD__ESDHC1_CMD	0x1d5
+							MX53_PAD_SD1_CLK__ESDHC1_CLK	0x1d5
+						>;
+					};
+
+					pinctrl_esdhc1_2: esdhc1grp-2 {
+						fsl,pins = <
+							MX53_PAD_SD1_DATA0__ESDHC1_DAT0   0x1d5
+							MX53_PAD_SD1_DATA1__ESDHC1_DAT1   0x1d5
+							MX53_PAD_SD1_DATA2__ESDHC1_DAT2   0x1d5
+							MX53_PAD_SD1_DATA3__ESDHC1_DAT3   0x1d5
+							MX53_PAD_PATA_DATA8__ESDHC1_DAT4  0x1d5
+							MX53_PAD_PATA_DATA9__ESDHC1_DAT5  0x1d5
+							MX53_PAD_PATA_DATA10__ESDHC1_DAT6 0x1d5
+							MX53_PAD_PATA_DATA11__ESDHC1_DAT7 0x1d5
+							MX53_PAD_SD1_CMD__ESDHC1_CMD	  0x1d5
+							MX53_PAD_SD1_CLK__ESDHC1_CLK	  0x1d5
+						>;
+					};
+				};
+
+				esdhc2 {
+					pinctrl_esdhc2_1: esdhc2grp-1 {
+						fsl,pins = <
+							MX53_PAD_SD2_CMD__ESDHC2_CMD	0x1d5
+							MX53_PAD_SD2_CLK__ESDHC2_CLK	0x1d5
+							MX53_PAD_SD2_DATA0__ESDHC2_DAT0 0x1d5
+							MX53_PAD_SD2_DATA1__ESDHC2_DAT1 0x1d5
+							MX53_PAD_SD2_DATA2__ESDHC2_DAT2 0x1d5
+							MX53_PAD_SD2_DATA3__ESDHC2_DAT3 0x1d5
+						>;
+					};
+				};
+
+				esdhc3 {
+					pinctrl_esdhc3_1: esdhc3grp-1 {
+						fsl,pins = <
+							MX53_PAD_PATA_DATA8__ESDHC3_DAT0  0x1d5
+							MX53_PAD_PATA_DATA9__ESDHC3_DAT1  0x1d5
+							MX53_PAD_PATA_DATA10__ESDHC3_DAT2 0x1d5
+							MX53_PAD_PATA_DATA11__ESDHC3_DAT3 0x1d5
+							MX53_PAD_PATA_DATA0__ESDHC3_DAT4  0x1d5
+							MX53_PAD_PATA_DATA1__ESDHC3_DAT5  0x1d5
+							MX53_PAD_PATA_DATA2__ESDHC3_DAT6  0x1d5
+							MX53_PAD_PATA_DATA3__ESDHC3_DAT7  0x1d5
+							MX53_PAD_PATA_RESET_B__ESDHC3_CMD 0x1d5
+							MX53_PAD_PATA_IORDY__ESDHC3_CLK   0x1d5
+						>;
+					};
+				};
+
+				can1 {
+					pinctrl_can1_1: can1grp-1 {
+						fsl,pins = <
+							MX53_PAD_PATA_INTRQ__CAN1_TXCAN 0x80000000
+							MX53_PAD_PATA_DIOR__CAN1_RXCAN  0x80000000
+						>;
+					};
+
+					pinctrl_can1_2: can1grp-2 {
+						fsl,pins = <
+							MX53_PAD_KEY_COL2__CAN1_TXCAN 0x80000000
+							MX53_PAD_KEY_ROW2__CAN1_RXCAN 0x80000000
+						>;
+					};
+				};
+
+				can2 {
+					pinctrl_can2_1: can2grp-1 {
+						fsl,pins = <
+							MX53_PAD_KEY_COL4__CAN2_TXCAN 0x80000000
+							MX53_PAD_KEY_ROW4__CAN2_RXCAN 0x80000000
+						>;
+					};
+				};
+
+				i2c1 {
+					pinctrl_i2c1_1: i2c1grp-1 {
+						fsl,pins = <
+							MX53_PAD_CSI0_DAT8__I2C1_SDA 0xc0000000
+							MX53_PAD_CSI0_DAT9__I2C1_SCL 0xc0000000
+						>;
+					};
+				};
+
+				i2c2 {
+					pinctrl_i2c2_1: i2c2grp-1 {
+						fsl,pins = <
+							MX53_PAD_KEY_ROW3__I2C2_SDA 0xc0000000
+							MX53_PAD_KEY_COL3__I2C2_SCL 0xc0000000
+						>;
+					};
+				};
+
+				i2c3 {
+					pinctrl_i2c3_1: i2c3grp-1 {
+						fsl,pins = <
+							MX53_PAD_GPIO_6__I2C3_SDA 0xc0000000
+							MX53_PAD_GPIO_5__I2C3_SCL 0xc0000000
+						>;
+					};
+				};
+
+				owire {
+					pinctrl_owire_1: owiregrp-1 {
+						fsl,pins = <
+							MX53_PAD_GPIO_18__OWIRE_LINE 0x80000000
+						>;
+					};
+				};
+
+				uart1 {
+					pinctrl_uart1_1: uart1grp-1 {
+						fsl,pins = <
+							MX53_PAD_CSI0_DAT10__UART1_TXD_MUX 0x1c5
+							MX53_PAD_CSI0_DAT11__UART1_RXD_MUX 0x1c5
+						>;
+					};
+
+					pinctrl_uart1_2: uart1grp-2 {
+						fsl,pins = <
+							MX53_PAD_PATA_DIOW__UART1_TXD_MUX  0x1c5
+							MX53_PAD_PATA_DMACK__UART1_RXD_MUX 0x1c5
+						>;
+					};
+				};
+
+				uart2 {
+					pinctrl_uart2_1: uart2grp-1 {
+						fsl,pins = <
+							MX53_PAD_PATA_BUFFER_EN__UART2_RXD_MUX 0x1c5
+							MX53_PAD_PATA_DMARQ__UART2_TXD_MUX     0x1c5
+						>;
+					};
+				};
+
+				uart3 {
+					pinctrl_uart3_1: uart3grp-1 {
+						fsl,pins = <
+							MX53_PAD_PATA_CS_0__UART3_TXD_MUX 0x1c5
+							MX53_PAD_PATA_CS_1__UART3_RXD_MUX 0x1c5
+							MX53_PAD_PATA_DA_1__UART3_CTS	  0x1c5
+							MX53_PAD_PATA_DA_2__UART3_RTS	  0x1c5
+						>;
+					};
+
+					pinctrl_uart3_2: uart3grp-2 {
+						fsl,pins = <
+							MX53_PAD_PATA_CS_0__UART3_TXD_MUX 0x1c5
+							MX53_PAD_PATA_CS_1__UART3_RXD_MUX 0x1c5
+						>;
+					};
+
+				};
+
+				uart4 {
+					pinctrl_uart4_1: uart4grp-1 {
+						fsl,pins = <
+							MX53_PAD_KEY_COL0__UART4_TXD_MUX 0x1c5
+							MX53_PAD_KEY_ROW0__UART4_RXD_MUX 0x1c5
+						>;
+					};
+				};
+
+				uart5 {
+					pinctrl_uart5_1: uart5grp-1 {
+						fsl,pins = <
+							MX53_PAD_KEY_COL1__UART5_TXD_MUX 0x1c5
+							MX53_PAD_KEY_ROW1__UART5_RXD_MUX 0x1c5
+						>;
+					};
+				};
+
 			};
 
 			gpr: iomuxc-gpr@53fa8000 {
@@ -425,45 +527,24 @@
 				compatible = "fsl,imx53-ldb";
 				reg = <0x53fa8008 0x4>;
 				gpr = <&gpr>;
-				clocks = <&clks IMX5_CLK_LDB_DI0_SEL>,
-				         <&clks IMX5_CLK_LDB_DI1_SEL>,
-				         <&clks IMX5_CLK_IPU_DI0_SEL>,
-				         <&clks IMX5_CLK_IPU_DI1_SEL>,
-				         <&clks IMX5_CLK_LDB_DI0_GATE>,
-				         <&clks IMX5_CLK_LDB_DI1_GATE>;
+				clocks = <&clks 122>, <&clks 120>,
+					 <&clks 115>, <&clks 116>,
+					 <&clks 123>, <&clks 85>;
 				clock-names = "di0_pll", "di1_pll",
 					      "di0_sel", "di1_sel",
 					      "di0", "di1";
 				status = "disabled";
 
 				lvds-channel@0 {
-					#address-cells = <1>;
-					#size-cells = <0>;
 					reg = <0>;
+					crtcs = <&ipu 0>;
 					status = "disabled";
-
-					port@0 {
-						reg = <0>;
-
-						lvds0_in: endpoint {
-							remote-endpoint = <&ipu_di0_lvds0>;
-						};
-					};
 				};
 
 				lvds-channel@1 {
-					#address-cells = <1>;
-					#size-cells = <0>;
 					reg = <1>;
+					crtcs = <&ipu 1>;
 					status = "disabled";
-
-					port@1 {
-						reg = <1>;
-
-						lvds1_in: endpoint {
-							remote-endpoint = <&ipu_di1_lvds1>;
-						};
-					};
 				};
 			};
 
@@ -471,8 +552,7 @@
 				#pwm-cells = <2>;
 				compatible = "fsl,imx53-pwm", "fsl,imx27-pwm";
 				reg = <0x53fb4000 0x4000>;
-				clocks = <&clks IMX5_CLK_PWM1_IPG_GATE>,
-				         <&clks IMX5_CLK_PWM1_HF_GATE>;
+				clocks = <&clks 37>, <&clks 38>;
 				clock-names = "ipg", "per";
 				interrupts = <61>;
 			};
@@ -481,8 +561,7 @@
 				#pwm-cells = <2>;
 				compatible = "fsl,imx53-pwm", "fsl,imx27-pwm";
 				reg = <0x53fb8000 0x4000>;
-				clocks = <&clks IMX5_CLK_PWM2_IPG_GATE>,
-				         <&clks IMX5_CLK_PWM2_HF_GATE>;
+				clocks = <&clks 39>, <&clks 40>;
 				clock-names = "ipg", "per";
 				interrupts = <94>;
 			};
@@ -491,8 +570,7 @@
 				compatible = "fsl,imx53-uart", "fsl,imx21-uart";
 				reg = <0x53fbc000 0x4000>;
 				interrupts = <31>;
-				clocks = <&clks IMX5_CLK_UART1_IPG_GATE>,
-				         <&clks IMX5_CLK_UART1_PER_GATE>;
+				clocks = <&clks 28>, <&clks 29>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -501,8 +579,7 @@
 				compatible = "fsl,imx53-uart", "fsl,imx21-uart";
 				reg = <0x53fc0000 0x4000>;
 				interrupts = <32>;
-				clocks = <&clks IMX5_CLK_UART2_IPG_GATE>,
-				         <&clks IMX5_CLK_UART2_PER_GATE>;
+				clocks = <&clks 30>, <&clks 31>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -511,8 +588,7 @@
 				compatible = "fsl,imx53-flexcan", "fsl,p1010-flexcan";
 				reg = <0x53fc8000 0x4000>;
 				interrupts = <82>;
-				clocks = <&clks IMX5_CLK_CAN1_IPG_GATE>,
-				         <&clks IMX5_CLK_CAN1_SERIAL_GATE>;
+				clocks = <&clks 158>, <&clks 157>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -521,8 +597,7 @@
 				compatible = "fsl,imx53-flexcan", "fsl,p1010-flexcan";
 				reg = <0x53fcc000 0x4000>;
 				interrupts = <83>;
-				clocks = <&clks IMX5_CLK_CAN2_IPG_GATE>,
-				         <&clks IMX5_CLK_CAN2_SERIAL_GATE>;
+				clocks = <&clks 87>, <&clks 86>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -576,7 +651,7 @@
 				compatible = "fsl,imx53-i2c", "fsl,imx21-i2c";
 				reg = <0x53fec000 0x4000>;
 				interrupts = <64>;
-				clocks = <&clks IMX5_CLK_I2C3_GATE>;
+				clocks = <&clks 88>;
 				status = "disabled";
 			};
 
@@ -584,8 +659,7 @@
 				compatible = "fsl,imx53-uart", "fsl,imx21-uart";
 				reg = <0x53ff0000 0x4000>;
 				interrupts = <13>;
-				clocks = <&clks IMX5_CLK_UART4_IPG_GATE>,
-				         <&clks IMX5_CLK_UART4_PER_GATE>;
+				clocks = <&clks 65>, <&clks 66>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -598,24 +672,11 @@
 			reg = <0x60000000 0x10000000>;
 			ranges;
 
-			aipstz2: bridge@63f00000 {
-				compatible = "fsl,imx53-aipstz";
-				reg = <0x63f00000 0x60>;
-			};
-
-			iim: iim@63f98000 {
-				compatible = "fsl,imx53-iim", "fsl,imx27-iim";
-				reg = <0x63f98000 0x4000>;
-				interrupts = <69>;
-				clocks = <&clks IMX5_CLK_IIM_GATE>;
-			};
-
 			uart5: serial@63f90000 {
 				compatible = "fsl,imx53-uart", "fsl,imx21-uart";
 				reg = <0x63f90000 0x4000>;
 				interrupts = <86>;
-				clocks = <&clks IMX5_CLK_UART5_IPG_GATE>,
-				         <&clks IMX5_CLK_UART5_PER_GATE>;
+				clocks = <&clks 67>, <&clks 68>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -623,7 +684,7 @@
 			owire: owire@63fa4000 {
 				compatible = "fsl,imx53-owire", "fsl,imx21-owire";
 				reg = <0x63fa4000 0x4000>;
-				clocks = <&clks IMX5_CLK_OWIRE_GATE>;
+				clocks = <&clks 159>;
 				status = "disabled";
 			};
 
@@ -633,8 +694,7 @@
 				compatible = "fsl,imx53-ecspi", "fsl,imx51-ecspi";
 				reg = <0x63fac000 0x4000>;
 				interrupts = <37>;
-				clocks = <&clks IMX5_CLK_ECSPI2_IPG_GATE>,
-				         <&clks IMX5_CLK_ECSPI2_PER_GATE>;
+				clocks = <&clks 53>, <&clks 54>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -643,10 +703,8 @@
 				compatible = "fsl,imx53-sdma", "fsl,imx35-sdma";
 				reg = <0x63fb0000 0x4000>;
 				interrupts = <6>;
-				clocks = <&clks IMX5_CLK_SDMA_GATE>,
-				         <&clks IMX5_CLK_SDMA_GATE>;
+				clocks = <&clks 56>, <&clks 56>;
 				clock-names = "ipg", "ahb";
-				#dma-cells = <3>;
 				fsl,sdma-ram-script-name = "imx/sdma/sdma-imx53.bin";
 			};
 
@@ -656,8 +714,7 @@
 				compatible = "fsl,imx53-cspi", "fsl,imx35-cspi";
 				reg = <0x63fc0000 0x4000>;
 				interrupts = <38>;
-				clocks = <&clks IMX5_CLK_CSPI_IPG_GATE>,
-				         <&clks IMX5_CLK_CSPI_IPG_GATE>;
+				clocks = <&clks 55>, <&clks 55>;
 				clock-names = "ipg", "per";
 				status = "disabled";
 			};
@@ -668,7 +725,7 @@
 				compatible = "fsl,imx53-i2c", "fsl,imx21-i2c";
 				reg = <0x63fc4000 0x4000>;
 				interrupts = <63>;
-				clocks = <&clks IMX5_CLK_I2C2_GATE>;
+				clocks = <&clks 35>;
 				status = "disabled";
 			};
 
@@ -678,23 +735,17 @@
 				compatible = "fsl,imx53-i2c", "fsl,imx21-i2c";
 				reg = <0x63fc8000 0x4000>;
 				interrupts = <62>;
-				clocks = <&clks IMX5_CLK_I2C1_GATE>;
+				clocks = <&clks 34>;
 				status = "disabled";
 			};
 
 			ssi1: ssi@63fcc000 {
-				#sound-dai-cells = <0>;
-				compatible = "fsl,imx53-ssi", "fsl,imx51-ssi",
-						"fsl,imx21-ssi";
+				compatible = "fsl,imx53-ssi", "fsl,imx21-ssi";
 				reg = <0x63fcc000 0x4000>;
 				interrupts = <29>;
-				clocks = <&clks IMX5_CLK_SSI1_IPG_GATE>,
-					 <&clks IMX5_CLK_SSI1_ROOT_GATE>;
-				clock-names = "ipg", "baud";
-				dmas = <&sdma 28 0 0>,
-				       <&sdma 29 0 0>;
-				dma-names = "rx", "tx";
+				clocks = <&clks 48>;
 				fsl,fifo-depth = <15>;
+				fsl,ssi-dma-events = <29 28 27 26>; /* TX0 RX0 TX1 RX1 */
 				status = "disabled";
 			};
 
@@ -708,23 +759,17 @@
 				compatible = "fsl,imx53-nand";
 				reg = <0x63fdb000 0x1000 0xf7ff0000 0x10000>;
 				interrupts = <8>;
-				clocks = <&clks IMX5_CLK_NFC_GATE>;
+				clocks = <&clks 60>;
 				status = "disabled";
 			};
 
 			ssi3: ssi@63fe8000 {
-				#sound-dai-cells = <0>;
-				compatible = "fsl,imx53-ssi", "fsl,imx51-ssi",
-						"fsl,imx21-ssi";
+				compatible = "fsl,imx53-ssi", "fsl,imx21-ssi";
 				reg = <0x63fe8000 0x4000>;
 				interrupts = <96>;
-				clocks = <&clks IMX5_CLK_SSI3_IPG_GATE>,
-					 <&clks IMX5_CLK_SSI3_ROOT_GATE>;
-				clock-names = "ipg", "baud";
-				dmas = <&sdma 46 0 0>,
-				       <&sdma 47 0 0>;
-				dma-names = "rx", "tx";
+				clocks = <&clks 50>;
 				fsl,fifo-depth = <15>;
+				fsl,ssi-dma-events = <47 46 45 44>; /* TX0 RX0 TX1 RX1 */
 				status = "disabled";
 			};
 
@@ -732,59 +777,10 @@
 				compatible = "fsl,imx53-fec", "fsl,imx25-fec";
 				reg = <0x63fec000 0x4000>;
 				interrupts = <87>;
-				clocks = <&clks IMX5_CLK_FEC_GATE>,
-				         <&clks IMX5_CLK_FEC_GATE>,
-				         <&clks IMX5_CLK_FEC_GATE>;
+				clocks = <&clks 42>, <&clks 42>, <&clks 42>;
 				clock-names = "ipg", "ahb", "ptp";
 				status = "disabled";
 			};
-
-			tve: tve@63ff0000 {
-				compatible = "fsl,imx53-tve";
-				reg = <0x63ff0000 0x1000>;
-				interrupts = <92>;
-				clocks = <&clks IMX5_CLK_TVE_GATE>,
-				         <&clks IMX5_CLK_IPU_DI1_SEL>;
-				clock-names = "tve", "di_sel";
-				status = "disabled";
-
-				port {
-					tve_in: endpoint {
-						remote-endpoint = <&ipu_di1_tve>;
-					};
-				};
-			};
-
-			vpu: vpu@63ff4000 {
-				compatible = "fsl,imx53-vpu", "cnm,coda7541";
-				reg = <0x63ff4000 0x1000>;
-				interrupts = <9>;
-				clocks = <&clks IMX5_CLK_VPU_REFERENCE_GATE>,
-				         <&clks IMX5_CLK_VPU_GATE>;
-				clock-names = "per", "ahb";
-				resets = <&src 1>;
-				iram = <&ocram>;
-			};
-
-			sahara: crypto@63ff8000 {
-				compatible = "fsl,imx53-sahara";
-				reg = <0x63ff8000 0x4000>;
-				interrupts = <19 20>;
-				clocks = <&clks IMX5_CLK_SAHARA_IPG_GATE>,
-				         <&clks IMX5_CLK_SAHARA_IPG_GATE>;
-				clock-names = "ipg", "ahb";
-			};
-		};
-
-		ocram: sram@f8000000 {
-			compatible = "mmio-sram";
-			reg = <0xf8000000 0x20000>;
-			clocks = <&clks IMX5_CLK_OCRAM>;
-		};
-
-		pmu {
-			compatible = "arm,cortex-a8-pmu";
-			interrupts = <77>;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/imx6dl-pinfunc.h b/arch/arm/boot/dts/imx6dl-pinfunc.h
--- a/arch/arm/boot/dts/imx6dl-pinfunc.h	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6dl-pinfunc.h	2015-10-27 00:45:05.000000000 +0000
@@ -14,1078 +14,1072 @@
  * The pin function ID is a tuple of
  * <mux_reg conf_reg input_reg mux_mode input_val>
  */
-#define MX6QDL_PAD_CSI0_DAT10__IPU1_CSI0_DATA10     0x04c 0x360 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT10__AUD3_RXC             0x04c 0x360 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT10__ECSPI2_MISO          0x04c 0x360 0x7f8 0x2 0x0
-#define MX6QDL_PAD_CSI0_DAT10__UART1_TX_DATA        0x04c 0x360 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT10__UART1_RX_DATA        0x04c 0x360 0x8fc 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT10__GPIO5_IO28           0x04c 0x360 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT10__ARM_TRACE07          0x04c 0x360 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT11__IPU1_CSI0_DATA11     0x050 0x364 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT11__AUD3_RXFS            0x050 0x364 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT11__ECSPI2_SS0           0x050 0x364 0x800 0x2 0x0
-#define MX6QDL_PAD_CSI0_DAT11__UART1_RX_DATA        0x050 0x364 0x8fc 0x3 0x1
-#define MX6QDL_PAD_CSI0_DAT11__UART1_TX_DATA        0x050 0x364 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT11__GPIO5_IO29           0x050 0x364 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT11__ARM_TRACE08          0x050 0x364 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT12__IPU1_CSI0_DATA12     0x054 0x368 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT12__EIM_DATA08           0x054 0x368 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT12__UART4_TX_DATA        0x054 0x368 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT12__UART4_RX_DATA        0x054 0x368 0x914 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT12__GPIO5_IO30           0x054 0x368 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT12__ARM_TRACE09          0x054 0x368 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT13__IPU1_CSI0_DATA13     0x058 0x36c 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT13__EIM_DATA09           0x058 0x36c 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT13__UART4_RX_DATA        0x058 0x36c 0x914 0x3 0x1
-#define MX6QDL_PAD_CSI0_DAT13__UART4_TX_DATA        0x058 0x36c 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT13__GPIO5_IO31           0x058 0x36c 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT13__ARM_TRACE10          0x058 0x36c 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT14__IPU1_CSI0_DATA14     0x05c 0x370 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT14__EIM_DATA10           0x05c 0x370 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT14__UART5_TX_DATA        0x05c 0x370 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT14__UART5_RX_DATA        0x05c 0x370 0x91c 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT14__GPIO6_IO00           0x05c 0x370 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT14__ARM_TRACE11          0x05c 0x370 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT15__IPU1_CSI0_DATA15     0x060 0x374 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT15__EIM_DATA11           0x060 0x374 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT15__UART5_RX_DATA        0x060 0x374 0x91c 0x3 0x1
-#define MX6QDL_PAD_CSI0_DAT15__UART5_TX_DATA        0x060 0x374 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT15__GPIO6_IO01           0x060 0x374 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT15__ARM_TRACE12          0x060 0x374 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT16__IPU1_CSI0_DATA16     0x064 0x378 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT16__EIM_DATA12           0x064 0x378 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT16__UART4_RTS_B          0x064 0x378 0x910 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT16__UART4_CTS_B          0x064 0x378 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT16__GPIO6_IO02           0x064 0x378 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT16__ARM_TRACE13          0x064 0x378 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT17__IPU1_CSI0_DATA17     0x068 0x37c 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT17__EIM_DATA13           0x068 0x37c 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT17__UART4_CTS_B          0x068 0x37c 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT17__UART4_RTS_B          0x068 0x37c 0x910 0x3 0x1
-#define MX6QDL_PAD_CSI0_DAT17__GPIO6_IO03           0x068 0x37c 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT17__ARM_TRACE14          0x068 0x37c 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT18__IPU1_CSI0_DATA18     0x06c 0x380 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT18__EIM_DATA14           0x06c 0x380 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT18__UART5_RTS_B          0x06c 0x380 0x918 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT18__UART5_CTS_B          0x06c 0x380 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT18__GPIO6_IO04           0x06c 0x380 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT18__ARM_TRACE15          0x06c 0x380 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT19__IPU1_CSI0_DATA19     0x070 0x384 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT19__EIM_DATA15           0x070 0x384 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT19__UART5_CTS_B          0x070 0x384 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT19__UART5_RTS_B          0x070 0x384 0x918 0x3 0x1
-#define MX6QDL_PAD_CSI0_DAT19__GPIO6_IO05           0x070 0x384 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT4__IPU1_CSI0_DATA04      0x074 0x388 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT4__EIM_DATA02            0x074 0x388 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT4__ECSPI1_SCLK           0x074 0x388 0x7d8 0x2 0x0
-#define MX6QDL_PAD_CSI0_DAT4__KEY_COL5              0x074 0x388 0x8c0 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT4__AUD3_TXC              0x074 0x388 0x000 0x4 0x0
-#define MX6QDL_PAD_CSI0_DAT4__GPIO5_IO22            0x074 0x388 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT4__ARM_TRACE01           0x074 0x388 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT5__IPU1_CSI0_DATA05      0x078 0x38c 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT5__EIM_DATA03            0x078 0x38c 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT5__ECSPI1_MOSI           0x078 0x38c 0x7e0 0x2 0x0
-#define MX6QDL_PAD_CSI0_DAT5__KEY_ROW5              0x078 0x38c 0x8cc 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT5__AUD3_TXD              0x078 0x38c 0x000 0x4 0x0
-#define MX6QDL_PAD_CSI0_DAT5__GPIO5_IO23            0x078 0x38c 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT5__ARM_TRACE02           0x078 0x38c 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT6__IPU1_CSI0_DATA06      0x07c 0x390 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT6__EIM_DATA04            0x07c 0x390 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT6__ECSPI1_MISO           0x07c 0x390 0x7dc 0x2 0x0
-#define MX6QDL_PAD_CSI0_DAT6__KEY_COL6              0x07c 0x390 0x8c4 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT6__AUD3_TXFS             0x07c 0x390 0x000 0x4 0x0
-#define MX6QDL_PAD_CSI0_DAT6__GPIO5_IO24            0x07c 0x390 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT6__ARM_TRACE03           0x07c 0x390 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT7__IPU1_CSI0_DATA07      0x080 0x394 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT7__EIM_DATA05            0x080 0x394 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT7__ECSPI1_SS0            0x080 0x394 0x7e4 0x2 0x0
-#define MX6QDL_PAD_CSI0_DAT7__KEY_ROW6              0x080 0x394 0x8d0 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT7__AUD3_RXD              0x080 0x394 0x000 0x4 0x0
-#define MX6QDL_PAD_CSI0_DAT7__GPIO5_IO25            0x080 0x394 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT7__ARM_TRACE04           0x080 0x394 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT8__IPU1_CSI0_DATA08      0x084 0x398 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT8__EIM_DATA06            0x084 0x398 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT8__ECSPI2_SCLK           0x084 0x398 0x7f4 0x2 0x0
-#define MX6QDL_PAD_CSI0_DAT8__KEY_COL7              0x084 0x398 0x8c8 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT8__I2C1_SDA              0x084 0x398 0x86c 0x4 0x0
-#define MX6QDL_PAD_CSI0_DAT8__GPIO5_IO26            0x084 0x398 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT8__ARM_TRACE05           0x084 0x398 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT9__IPU1_CSI0_DATA09      0x088 0x39c 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT9__EIM_DATA07            0x088 0x39c 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT9__ECSPI2_MOSI           0x088 0x39c 0x7fc 0x2 0x0
-#define MX6QDL_PAD_CSI0_DAT9__KEY_ROW7              0x088 0x39c 0x8d4 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT9__I2C1_SCL              0x088 0x39c 0x868 0x4 0x0
-#define MX6QDL_PAD_CSI0_DAT9__GPIO5_IO27            0x088 0x39c 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT9__ARM_TRACE06           0x088 0x39c 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DATA_EN__IPU1_CSI0_DATA_EN  0x08c 0x3a0 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DATA_EN__EIM_DATA00         0x08c 0x3a0 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DATA_EN__GPIO5_IO20         0x08c 0x3a0 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DATA_EN__ARM_TRACE_CLK      0x08c 0x3a0 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_MCLK__IPU1_CSI0_HSYNC       0x090 0x3a4 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_MCLK__CCM_CLKO1             0x090 0x3a4 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_MCLK__GPIO5_IO19            0x090 0x3a4 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_MCLK__ARM_TRACE_CTL         0x090 0x3a4 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_PIXCLK__IPU1_CSI0_PIXCLK    0x094 0x3a8 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_PIXCLK__GPIO5_IO18          0x094 0x3a8 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_PIXCLK__ARM_EVENTO          0x094 0x3a8 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_VSYNC__IPU1_CSI0_VSYNC      0x098 0x3ac 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_VSYNC__EIM_DATA01           0x098 0x3ac 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_VSYNC__GPIO5_IO21           0x098 0x3ac 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_VSYNC__ARM_TRACE00          0x098 0x3ac 0x000 0x7 0x0
-#define MX6QDL_PAD_DI0_DISP_CLK__IPU1_DI0_DISP_CLK  0x09c 0x3b0 0x000 0x0 0x0
-#define MX6QDL_PAD_DI0_DISP_CLK__LCD_CLK            0x09c 0x3b0 0x000 0x1 0x0
-#define MX6QDL_PAD_DI0_DISP_CLK__GPIO4_IO16         0x09c 0x3b0 0x000 0x5 0x0
-#define MX6QDL_PAD_DI0_DISP_CLK__LCD_WR_RWN         0x09c 0x3b0 0x000 0x8 0x0
-#define MX6QDL_PAD_DI0_PIN15__IPU1_DI0_PIN15        0x0a0 0x3b4 0x000 0x0 0x0
-#define MX6QDL_PAD_DI0_PIN15__LCD_ENABLE            0x0a0 0x3b4 0x000 0x1 0x0
-#define MX6QDL_PAD_DI0_PIN15__AUD6_TXC              0x0a0 0x3b4 0x000 0x2 0x0
-#define MX6QDL_PAD_DI0_PIN15__GPIO4_IO17            0x0a0 0x3b4 0x000 0x5 0x0
-#define MX6QDL_PAD_DI0_PIN15__LCD_RD_E              0x0a0 0x3b4 0x000 0x8 0x0
-#define MX6QDL_PAD_DI0_PIN2__IPU1_DI0_PIN02         0x0a4 0x3b8 0x000 0x0 0x0
-#define MX6QDL_PAD_DI0_PIN2__LCD_HSYNC              0x0a4 0x3b8 0x8d8 0x1 0x0
-#define MX6QDL_PAD_DI0_PIN2__AUD6_TXD               0x0a4 0x3b8 0x000 0x2 0x0
-#define MX6QDL_PAD_DI0_PIN2__GPIO4_IO18             0x0a4 0x3b8 0x000 0x5 0x0
-#define MX6QDL_PAD_DI0_PIN2__LCD_RS                 0x0a4 0x3b8 0x000 0x8 0x0
-#define MX6QDL_PAD_DI0_PIN3__IPU1_DI0_PIN03         0x0a8 0x3bc 0x000 0x0 0x0
-#define MX6QDL_PAD_DI0_PIN3__LCD_VSYNC              0x0a8 0x3bc 0x000 0x1 0x0
-#define MX6QDL_PAD_DI0_PIN3__AUD6_TXFS              0x0a8 0x3bc 0x000 0x2 0x0
-#define MX6QDL_PAD_DI0_PIN3__GPIO4_IO19             0x0a8 0x3bc 0x000 0x5 0x0
-#define MX6QDL_PAD_DI0_PIN3__LCD_CS                 0x0a8 0x3bc 0x000 0x8 0x0
-#define MX6QDL_PAD_DI0_PIN4__IPU1_DI0_PIN04         0x0ac 0x3c0 0x000 0x0 0x0
-#define MX6QDL_PAD_DI0_PIN4__LCD_BUSY               0x0ac 0x3c0 0x8d8 0x1 0x1
-#define MX6QDL_PAD_DI0_PIN4__AUD6_RXD               0x0ac 0x3c0 0x000 0x2 0x0
-#define MX6QDL_PAD_DI0_PIN4__SD1_WP                 0x0ac 0x3c0 0x92c 0x3 0x0
-#define MX6QDL_PAD_DI0_PIN4__GPIO4_IO20             0x0ac 0x3c0 0x000 0x5 0x0
-#define MX6QDL_PAD_DI0_PIN4__LCD_RESET              0x0ac 0x3c0 0x000 0x8 0x0
-#define MX6QDL_PAD_DISP0_DAT0__IPU1_DISP0_DATA00    0x0b0 0x3c4 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT0__LCD_DATA00           0x0b0 0x3c4 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT0__ECSPI3_SCLK          0x0b0 0x3c4 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT0__GPIO4_IO21           0x0b0 0x3c4 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT1__IPU1_DISP0_DATA01    0x0b4 0x3c8 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT1__LCD_DATA01           0x0b4 0x3c8 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT1__ECSPI3_MOSI          0x0b4 0x3c8 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT1__GPIO4_IO22           0x0b4 0x3c8 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT10__IPU1_DISP0_DATA10   0x0b8 0x3cc 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT10__LCD_DATA10          0x0b8 0x3cc 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT10__GPIO4_IO31          0x0b8 0x3cc 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT11__IPU1_DISP0_DATA11   0x0bc 0x3d0 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT11__LCD_DATA11          0x0bc 0x3d0 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT11__GPIO5_IO05          0x0bc 0x3d0 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT12__IPU1_DISP0_DATA12   0x0c0 0x3d4 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT12__LCD_DATA12          0x0c0 0x3d4 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT12__GPIO5_IO06          0x0c0 0x3d4 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT13__IPU1_DISP0_DATA13   0x0c4 0x3d8 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT13__LCD_DATA13          0x0c4 0x3d8 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT13__AUD5_RXFS           0x0c4 0x3d8 0x7bc 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT13__GPIO5_IO07          0x0c4 0x3d8 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT14__IPU1_DISP0_DATA14   0x0c8 0x3dc 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT14__LCD_DATA14          0x0c8 0x3dc 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT14__AUD5_RXC            0x0c8 0x3dc 0x7b8 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT14__GPIO5_IO08          0x0c8 0x3dc 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT15__IPU1_DISP0_DATA15   0x0cc 0x3e0 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT15__LCD_DATA15          0x0cc 0x3e0 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT15__ECSPI1_SS1          0x0cc 0x3e0 0x7e8 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT15__ECSPI2_SS1          0x0cc 0x3e0 0x804 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT15__GPIO5_IO09          0x0cc 0x3e0 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT16__IPU1_DISP0_DATA16   0x0d0 0x3e4 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT16__LCD_DATA16          0x0d0 0x3e4 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT16__ECSPI2_MOSI         0x0d0 0x3e4 0x7fc 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT16__AUD5_TXC            0x0d0 0x3e4 0x7c0 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT16__SDMA_EXT_EVENT0     0x0d0 0x3e4 0x8e8 0x4 0x0
-#define MX6QDL_PAD_DISP0_DAT16__GPIO5_IO10          0x0d0 0x3e4 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT17__IPU1_DISP0_DATA17   0x0d4 0x3e8 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT17__LCD_DATA17          0x0d4 0x3e8 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT17__ECSPI2_MISO         0x0d4 0x3e8 0x7f8 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT17__AUD5_TXD            0x0d4 0x3e8 0x7b4 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT17__SDMA_EXT_EVENT1     0x0d4 0x3e8 0x8ec 0x4 0x0
-#define MX6QDL_PAD_DISP0_DAT17__GPIO5_IO11          0x0d4 0x3e8 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT18__IPU1_DISP0_DATA18   0x0d8 0x3ec 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT18__LCD_DATA18          0x0d8 0x3ec 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT18__ECSPI2_SS0          0x0d8 0x3ec 0x800 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT18__AUD5_TXFS           0x0d8 0x3ec 0x7c4 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT18__AUD4_RXFS           0x0d8 0x3ec 0x7a4 0x4 0x0
-#define MX6QDL_PAD_DISP0_DAT18__GPIO5_IO12          0x0d8 0x3ec 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT18__EIM_CS2_B           0x0d8 0x3ec 0x000 0x7 0x0
-#define MX6QDL_PAD_DISP0_DAT19__IPU1_DISP0_DATA19   0x0dc 0x3f0 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT19__LCD_DATA19          0x0dc 0x3f0 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT19__ECSPI2_SCLK         0x0dc 0x3f0 0x7f4 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT19__AUD5_RXD            0x0dc 0x3f0 0x7b0 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT19__AUD4_RXC            0x0dc 0x3f0 0x7a0 0x4 0x0
-#define MX6QDL_PAD_DISP0_DAT19__GPIO5_IO13          0x0dc 0x3f0 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT19__EIM_CS3_B           0x0dc 0x3f0 0x000 0x7 0x0
-#define MX6QDL_PAD_DISP0_DAT2__IPU1_DISP0_DATA02    0x0e0 0x3f4 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT2__LCD_DATA02           0x0e0 0x3f4 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT2__ECSPI3_MISO          0x0e0 0x3f4 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT2__GPIO4_IO23           0x0e0 0x3f4 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT20__IPU1_DISP0_DATA20   0x0e4 0x3f8 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT20__LCD_DATA20          0x0e4 0x3f8 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT20__ECSPI1_SCLK         0x0e4 0x3f8 0x7d8 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT20__AUD4_TXC            0x0e4 0x3f8 0x7a8 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT20__GPIO5_IO14          0x0e4 0x3f8 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT21__IPU1_DISP0_DATA21   0x0e8 0x3fc 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT21__LCD_DATA21          0x0e8 0x3fc 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT21__ECSPI1_MOSI         0x0e8 0x3fc 0x7e0 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT21__AUD4_TXD            0x0e8 0x3fc 0x79c 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT21__GPIO5_IO15          0x0e8 0x3fc 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT22__IPU1_DISP0_DATA22   0x0ec 0x400 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT22__LCD_DATA22          0x0ec 0x400 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT22__ECSPI1_MISO         0x0ec 0x400 0x7dc 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT22__AUD4_TXFS           0x0ec 0x400 0x7ac 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT22__GPIO5_IO16          0x0ec 0x400 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT23__IPU1_DISP0_DATA23   0x0f0 0x404 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT23__LCD_DATA23          0x0f0 0x404 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT23__ECSPI1_SS0          0x0f0 0x404 0x7e4 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT23__AUD4_RXD            0x0f0 0x404 0x798 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT23__GPIO5_IO17          0x0f0 0x404 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT3__IPU1_DISP0_DATA03    0x0f4 0x408 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT3__LCD_DATA03           0x0f4 0x408 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT3__ECSPI3_SS0           0x0f4 0x408 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT3__GPIO4_IO24           0x0f4 0x408 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT4__IPU1_DISP0_DATA04    0x0f8 0x40c 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT4__LCD_DATA04           0x0f8 0x40c 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT4__ECSPI3_SS1           0x0f8 0x40c 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT4__GPIO4_IO25           0x0f8 0x40c 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT5__IPU1_DISP0_DATA05    0x0fc 0x410 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT5__LCD_DATA05           0x0fc 0x410 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT5__ECSPI3_SS2           0x0fc 0x410 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT5__AUD6_RXFS            0x0fc 0x410 0x000 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT5__GPIO4_IO26           0x0fc 0x410 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT6__IPU1_DISP0_DATA06    0x100 0x414 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT6__LCD_DATA06           0x100 0x414 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT6__ECSPI3_SS3           0x100 0x414 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT6__AUD6_RXC             0x100 0x414 0x000 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT6__GPIO4_IO27           0x100 0x414 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT7__IPU1_DISP0_DATA07    0x104 0x418 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT7__LCD_DATA07           0x104 0x418 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT7__ECSPI3_RDY           0x104 0x418 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT7__GPIO4_IO28           0x104 0x418 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT8__IPU1_DISP0_DATA08    0x108 0x41c 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT8__LCD_DATA08           0x108 0x41c 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT8__PWM1_OUT             0x108 0x41c 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT8__WDOG1_B              0x108 0x41c 0x000 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT8__GPIO4_IO29           0x108 0x41c 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT9__IPU1_DISP0_DATA09    0x10c 0x420 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT9__LCD_DATA09           0x10c 0x420 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT9__PWM2_OUT             0x10c 0x420 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT9__WDOG2_B              0x10c 0x420 0x000 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT9__GPIO4_IO30           0x10c 0x420 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A16__EIM_ADDR16              0x110 0x4e0 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A16__IPU1_DI1_DISP_CLK       0x110 0x4e0 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A16__IPU1_CSI1_PIXCLK        0x110 0x4e0 0x8b8 0x2 0x0
-#define MX6QDL_PAD_EIM_A16__GPIO2_IO22              0x110 0x4e0 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A16__SRC_BOOT_CFG16          0x110 0x4e0 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A16__EPDC_DATA00             0x110 0x4e0 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_A17__EIM_ADDR17              0x114 0x4e4 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A17__IPU1_DISP1_DATA12       0x114 0x4e4 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A17__IPU1_CSI1_DATA12        0x114 0x4e4 0x890 0x2 0x0
-#define MX6QDL_PAD_EIM_A17__GPIO2_IO21              0x114 0x4e4 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A17__SRC_BOOT_CFG17          0x114 0x4e4 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A17__EPDC_PWR_STAT           0x114 0x4e4 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_A18__EIM_ADDR18              0x118 0x4e8 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A18__IPU1_DISP1_DATA13       0x118 0x4e8 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A18__IPU1_CSI1_DATA13        0x118 0x4e8 0x894 0x2 0x0
-#define MX6QDL_PAD_EIM_A18__GPIO2_IO20              0x118 0x4e8 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A18__SRC_BOOT_CFG18          0x118 0x4e8 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A18__EPDC_PWR_CTRL0          0x118 0x4e8 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_A19__EIM_ADDR19              0x11c 0x4ec 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A19__IPU1_DISP1_DATA14       0x11c 0x4ec 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A19__IPU1_CSI1_DATA14        0x11c 0x4ec 0x898 0x2 0x0
-#define MX6QDL_PAD_EIM_A19__GPIO2_IO19              0x11c 0x4ec 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A19__SRC_BOOT_CFG19          0x11c 0x4ec 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A19__EPDC_PWR_CTRL1          0x11c 0x4ec 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_A20__EIM_ADDR20              0x120 0x4f0 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A20__IPU1_DISP1_DATA15       0x120 0x4f0 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A20__IPU1_CSI1_DATA15        0x120 0x4f0 0x89c 0x2 0x0
-#define MX6QDL_PAD_EIM_A20__GPIO2_IO18              0x120 0x4f0 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A20__SRC_BOOT_CFG20          0x120 0x4f0 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A20__EPDC_PWR_CTRL2          0x120 0x4f0 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_A21__EIM_ADDR21              0x124 0x4f4 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A21__IPU1_DISP1_DATA16       0x124 0x4f4 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A21__IPU1_CSI1_DATA16        0x124 0x4f4 0x8a0 0x2 0x0
-#define MX6QDL_PAD_EIM_A21__GPIO2_IO17              0x124 0x4f4 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A21__SRC_BOOT_CFG21          0x124 0x4f4 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A21__EPDC_GDCLK              0x124 0x4f4 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_A22__EIM_ADDR22              0x128 0x4f8 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A22__IPU1_DISP1_DATA17       0x128 0x4f8 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A22__IPU1_CSI1_DATA17        0x128 0x4f8 0x8a4 0x2 0x0
-#define MX6QDL_PAD_EIM_A22__GPIO2_IO16              0x128 0x4f8 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A22__SRC_BOOT_CFG22          0x128 0x4f8 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A22__EPDC_GDSP               0x128 0x4f8 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_A23__EIM_ADDR23              0x12c 0x4fc 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A23__IPU1_DISP1_DATA18       0x12c 0x4fc 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A23__IPU1_CSI1_DATA18        0x12c 0x4fc 0x8a8 0x2 0x0
-#define MX6QDL_PAD_EIM_A23__IPU1_SISG3              0x12c 0x4fc 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_A23__GPIO6_IO06              0x12c 0x4fc 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A23__SRC_BOOT_CFG23          0x12c 0x4fc 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A23__EPDC_GDOE               0x12c 0x4fc 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_A24__EIM_ADDR24              0x130 0x500 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A24__IPU1_DISP1_DATA19       0x130 0x500 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A24__IPU1_CSI1_DATA19        0x130 0x500 0x8ac 0x2 0x0
-#define MX6QDL_PAD_EIM_A24__IPU1_SISG2              0x130 0x500 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_A24__GPIO5_IO04              0x130 0x500 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A24__SRC_BOOT_CFG24          0x130 0x500 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A24__EPDC_GDRL               0x130 0x500 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_A25__EIM_ADDR25              0x134 0x504 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A25__ECSPI4_SS1              0x134 0x504 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A25__ECSPI2_RDY              0x134 0x504 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_A25__IPU1_DI1_PIN12          0x134 0x504 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_A25__IPU1_DI0_D1_CS          0x134 0x504 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_A25__GPIO5_IO02              0x134 0x504 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A25__HDMI_TX_CEC_LINE        0x134 0x504 0x85c 0x6 0x0
-#define MX6QDL_PAD_EIM_A25__EPDC_DATA15             0x134 0x504 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_A25__EIM_ACLK_FREERUN        0x134 0x504 0x000 0x9 0x0
-#define MX6QDL_PAD_EIM_BCLK__EIM_BCLK               0x138 0x508 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_BCLK__IPU1_DI1_PIN16         0x138 0x508 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_BCLK__GPIO6_IO31             0x138 0x508 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_BCLK__EPDC_SDCE9             0x138 0x508 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_CS0__EIM_CS0_B               0x13c 0x50c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_CS0__IPU1_DI1_PIN05          0x13c 0x50c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_CS0__ECSPI2_SCLK             0x13c 0x50c 0x7f4 0x2 0x2
-#define MX6QDL_PAD_EIM_CS0__GPIO2_IO23              0x13c 0x50c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_CS0__EPDC_DATA06             0x13c 0x50c 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_CS1__EIM_CS1_B               0x140 0x510 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_CS1__IPU1_DI1_PIN06          0x140 0x510 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_CS1__ECSPI2_MOSI             0x140 0x510 0x7fc 0x2 0x2
-#define MX6QDL_PAD_EIM_CS1__GPIO2_IO24              0x140 0x510 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_CS1__EPDC_DATA08             0x140 0x510 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D16__EIM_DATA16              0x144 0x514 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D16__ECSPI1_SCLK             0x144 0x514 0x7d8 0x1 0x2
-#define MX6QDL_PAD_EIM_D16__IPU1_DI0_PIN05          0x144 0x514 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D16__IPU1_CSI1_DATA18        0x144 0x514 0x8a8 0x3 0x1
-#define MX6QDL_PAD_EIM_D16__HDMI_TX_DDC_SDA         0x144 0x514 0x864 0x4 0x0
-#define MX6QDL_PAD_EIM_D16__GPIO3_IO16              0x144 0x514 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D16__I2C2_SDA                0x144 0x514 0x874 0x6 0x0
-#define MX6QDL_PAD_EIM_D16__EPDC_DATA10             0x144 0x514 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D17__EIM_DATA17              0x148 0x518 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D17__ECSPI1_MISO             0x148 0x518 0x7dc 0x1 0x2
-#define MX6QDL_PAD_EIM_D17__IPU1_DI0_PIN06          0x148 0x518 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D17__IPU1_CSI1_PIXCLK        0x148 0x518 0x8b8 0x3 0x1
-#define MX6QDL_PAD_EIM_D17__DCIC1_OUT               0x148 0x518 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D17__GPIO3_IO17              0x148 0x518 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D17__I2C3_SCL                0x148 0x518 0x878 0x6 0x0
-#define MX6QDL_PAD_EIM_D17__EPDC_VCOM0              0x148 0x518 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D18__EIM_DATA18              0x14c 0x51c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D18__ECSPI1_MOSI             0x14c 0x51c 0x7e0 0x1 0x2
-#define MX6QDL_PAD_EIM_D18__IPU1_DI0_PIN07          0x14c 0x51c 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D18__IPU1_CSI1_DATA17        0x14c 0x51c 0x8a4 0x3 0x1
-#define MX6QDL_PAD_EIM_D18__IPU1_DI1_D0_CS          0x14c 0x51c 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D18__GPIO3_IO18              0x14c 0x51c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D18__I2C3_SDA                0x14c 0x51c 0x87c 0x6 0x0
-#define MX6QDL_PAD_EIM_D18__EPDC_VCOM1              0x14c 0x51c 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D19__EIM_DATA19              0x150 0x520 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D19__ECSPI1_SS1              0x150 0x520 0x7e8 0x1 0x1
-#define MX6QDL_PAD_EIM_D19__IPU1_DI0_PIN08          0x150 0x520 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D19__IPU1_CSI1_DATA16        0x150 0x520 0x8a0 0x3 0x1
-#define MX6QDL_PAD_EIM_D19__UART1_CTS_B             0x150 0x520 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D19__UART1_RTS_B             0x150 0x520 0x8f8 0x4 0x0
-#define MX6QDL_PAD_EIM_D19__GPIO3_IO19              0x150 0x520 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D19__EPIT1_OUT               0x150 0x520 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D19__EPDC_DATA12             0x150 0x520 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D20__EIM_DATA20              0x154 0x524 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D20__ECSPI4_SS0              0x154 0x524 0x808 0x1 0x0
-#define MX6QDL_PAD_EIM_D20__IPU1_DI0_PIN16          0x154 0x524 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D20__IPU1_CSI1_DATA15        0x154 0x524 0x89c 0x3 0x1
-#define MX6QDL_PAD_EIM_D20__UART1_RTS_B             0x154 0x524 0x8f8 0x4 0x1
-#define MX6QDL_PAD_EIM_D20__UART1_CTS_B             0x154 0x524 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D20__GPIO3_IO20              0x154 0x524 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D20__EPIT2_OUT               0x154 0x524 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D21__EIM_DATA21              0x158 0x528 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D21__ECSPI4_SCLK             0x158 0x528 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D21__IPU1_DI0_PIN17          0x158 0x528 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D21__IPU1_CSI1_DATA11        0x158 0x528 0x88c 0x3 0x0
-#define MX6QDL_PAD_EIM_D21__USB_OTG_OC              0x158 0x528 0x920 0x4 0x0
-#define MX6QDL_PAD_EIM_D21__GPIO3_IO21              0x158 0x528 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D21__I2C1_SCL                0x158 0x528 0x868 0x6 0x1
-#define MX6QDL_PAD_EIM_D21__SPDIF_IN                0x158 0x528 0x8f0 0x7 0x0
-#define MX6QDL_PAD_EIM_D22__EIM_DATA22              0x15c 0x52c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D22__ECSPI4_MISO             0x15c 0x52c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D22__IPU1_DI0_PIN01          0x15c 0x52c 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D22__IPU1_CSI1_DATA10        0x15c 0x52c 0x888 0x3 0x0
-#define MX6QDL_PAD_EIM_D22__USB_OTG_PWR             0x15c 0x52c 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D22__GPIO3_IO22              0x15c 0x52c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D22__SPDIF_OUT               0x15c 0x52c 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D22__EPDC_SDCE6              0x15c 0x52c 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D23__EIM_DATA23              0x160 0x530 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D23__IPU1_DI0_D0_CS          0x160 0x530 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D23__UART3_CTS_B             0x160 0x530 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D23__UART3_RTS_B             0x160 0x530 0x908 0x2 0x0
-#define MX6QDL_PAD_EIM_D23__UART1_DCD_B             0x160 0x530 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_D23__IPU1_CSI1_DATA_EN       0x160 0x530 0x8b0 0x4 0x0
-#define MX6QDL_PAD_EIM_D23__GPIO3_IO23              0x160 0x530 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D23__IPU1_DI1_PIN02          0x160 0x530 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D23__IPU1_DI1_PIN14          0x160 0x530 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D23__EPDC_DATA11             0x160 0x530 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D24__EIM_DATA24              0x164 0x534 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D24__ECSPI4_SS2              0x164 0x534 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D24__UART3_TX_DATA           0x164 0x534 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D24__UART3_RX_DATA           0x164 0x534 0x90c 0x2 0x0
-#define MX6QDL_PAD_EIM_D24__ECSPI1_SS2              0x164 0x534 0x7ec 0x3 0x0
-#define MX6QDL_PAD_EIM_D24__ECSPI2_SS2              0x164 0x534 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D24__GPIO3_IO24              0x164 0x534 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D24__AUD5_RXFS               0x164 0x534 0x7bc 0x6 0x1
-#define MX6QDL_PAD_EIM_D24__UART1_DTR_B             0x164 0x534 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D24__EPDC_SDCE7              0x164 0x534 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D25__EIM_DATA25              0x168 0x538 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D25__ECSPI4_SS3              0x168 0x538 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D25__UART3_RX_DATA           0x168 0x538 0x90c 0x2 0x1
-#define MX6QDL_PAD_EIM_D25__UART3_TX_DATA           0x168 0x538 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D25__ECSPI1_SS3              0x168 0x538 0x7f0 0x3 0x0
-#define MX6QDL_PAD_EIM_D25__ECSPI2_SS3              0x168 0x538 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D25__GPIO3_IO25              0x168 0x538 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D25__AUD5_RXC                0x168 0x538 0x7b8 0x6 0x1
-#define MX6QDL_PAD_EIM_D25__UART1_DSR_B             0x168 0x538 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D25__EPDC_SDCE8              0x168 0x538 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D26__EIM_DATA26              0x16c 0x53c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D26__IPU1_DI1_PIN11          0x16c 0x53c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D26__IPU1_CSI0_DATA01        0x16c 0x53c 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D26__IPU1_CSI1_DATA14        0x16c 0x53c 0x898 0x3 0x1
-#define MX6QDL_PAD_EIM_D26__UART2_TX_DATA           0x16c 0x53c 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D26__UART2_RX_DATA           0x16c 0x53c 0x904 0x4 0x0
-#define MX6QDL_PAD_EIM_D26__GPIO3_IO26              0x16c 0x53c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D26__IPU1_SISG2              0x16c 0x53c 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D26__IPU1_DISP1_DATA22       0x16c 0x53c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D26__EPDC_SDOED              0x16c 0x53c 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D27__EIM_DATA27              0x170 0x540 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D27__IPU1_DI1_PIN13          0x170 0x540 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D27__IPU1_CSI0_DATA00        0x170 0x540 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D27__IPU1_CSI1_DATA13        0x170 0x540 0x894 0x3 0x1
-#define MX6QDL_PAD_EIM_D27__UART2_RX_DATA           0x170 0x540 0x904 0x4 0x1
-#define MX6QDL_PAD_EIM_D27__UART2_TX_DATA           0x170 0x540 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D27__GPIO3_IO27              0x170 0x540 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D27__IPU1_SISG3              0x170 0x540 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D27__IPU1_DISP1_DATA23       0x170 0x540 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D27__EPDC_SDOE               0x170 0x540 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D28__EIM_DATA28              0x174 0x544 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D28__I2C1_SDA                0x174 0x544 0x86c 0x1 0x1
-#define MX6QDL_PAD_EIM_D28__ECSPI4_MOSI             0x174 0x544 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D28__IPU1_CSI1_DATA12        0x174 0x544 0x890 0x3 0x1
-#define MX6QDL_PAD_EIM_D28__UART2_CTS_B             0x174 0x544 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D28__UART2_RTS_B             0x174 0x544 0x900 0x4 0x0
-#define MX6QDL_PAD_EIM_D28__UART2_DTE_CTS_B         0x174 0x544 0x900 0x4 0x0
-#define MX6QDL_PAD_EIM_D28__UART2_DTE_RTS_B         0x174 0x544 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D28__GPIO3_IO28              0x174 0x544 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D28__IPU1_EXT_TRIG           0x174 0x544 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D28__IPU1_DI0_PIN13          0x174 0x544 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D28__EPDC_PWR_CTRL3          0x174 0x544 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D29__EIM_DATA29              0x178 0x548 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D29__IPU1_DI1_PIN15          0x178 0x548 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D29__ECSPI4_SS0              0x178 0x548 0x808 0x2 0x1
-#define MX6QDL_PAD_EIM_D29__UART2_RTS_B             0x178 0x548 0x900 0x4 0x1
-#define MX6QDL_PAD_EIM_D29__UART2_CTS_B             0x178 0x548 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D29__UART2_DTE_RTS_B         0x178 0x548 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D29__UART2_DTE_CTS_B         0x178 0x548 0x900 0x4 0x1
-#define MX6QDL_PAD_EIM_D29__GPIO3_IO29              0x178 0x548 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D29__IPU1_CSI1_VSYNC         0x178 0x548 0x8bc 0x6 0x0
-#define MX6QDL_PAD_EIM_D29__IPU1_DI0_PIN14          0x178 0x548 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D29__EPDC_PWR_WAKE           0x178 0x548 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D30__EIM_DATA30              0x17c 0x54c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D30__IPU1_DISP1_DATA21       0x17c 0x54c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D30__IPU1_DI0_PIN11          0x17c 0x54c 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D30__IPU1_CSI0_DATA03        0x17c 0x54c 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_D30__UART3_CTS_B             0x17c 0x54c 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D30__UART3_RTS_B             0x17c 0x54c 0x908 0x4 0x1
-#define MX6QDL_PAD_EIM_D30__GPIO3_IO30              0x17c 0x54c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D30__USB_H1_OC               0x17c 0x54c 0x924 0x6 0x0
-#define MX6QDL_PAD_EIM_D30__EPDC_SDOEZ              0x17c 0x54c 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D31__EIM_DATA31              0x180 0x550 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D31__IPU1_DISP1_DATA20       0x180 0x550 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D31__IPU1_DI0_PIN12          0x180 0x550 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D31__IPU1_CSI0_DATA02        0x180 0x550 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_D31__UART3_RTS_B             0x180 0x550 0x908 0x4 0x2
-#define MX6QDL_PAD_EIM_D31__UART3_CTS_B             0x180 0x550 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D31__GPIO3_IO31              0x180 0x550 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D31__USB_H1_PWR              0x180 0x550 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D31__EPDC_SDCLK_P            0x180 0x550 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_D31__EIM_ACLK_FREERUN        0x180 0x550 0x000 0x9 0x0
-#define MX6QDL_PAD_EIM_DA0__EIM_AD00                0x184 0x554 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA0__IPU1_DISP1_DATA09       0x184 0x554 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA0__IPU1_CSI1_DATA09        0x184 0x554 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA0__GPIO3_IO00              0x184 0x554 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA0__SRC_BOOT_CFG00          0x184 0x554 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA0__EPDC_SDCLK_N            0x184 0x554 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA1__EIM_AD01                0x188 0x558 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA1__IPU1_DISP1_DATA08       0x188 0x558 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA1__IPU1_CSI1_DATA08        0x188 0x558 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA1__GPIO3_IO01              0x188 0x558 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA1__SRC_BOOT_CFG01          0x188 0x558 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA1__EPDC_SDLE               0x188 0x558 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA10__EIM_AD10               0x18c 0x55c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA10__IPU1_DI1_PIN15         0x18c 0x55c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA10__IPU1_CSI1_DATA_EN      0x18c 0x55c 0x8b0 0x2 0x1
-#define MX6QDL_PAD_EIM_DA10__GPIO3_IO10             0x18c 0x55c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA10__SRC_BOOT_CFG10         0x18c 0x55c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA10__EPDC_DATA01            0x18c 0x55c 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA11__EIM_AD11               0x190 0x560 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA11__IPU1_DI1_PIN02         0x190 0x560 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA11__IPU1_CSI1_HSYNC        0x190 0x560 0x8b4 0x2 0x0
-#define MX6QDL_PAD_EIM_DA11__GPIO3_IO11             0x190 0x560 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA11__SRC_BOOT_CFG11         0x190 0x560 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA11__EPDC_DATA03            0x190 0x560 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA12__EIM_AD12               0x194 0x564 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA12__IPU1_DI1_PIN03         0x194 0x564 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA12__IPU1_CSI1_VSYNC        0x194 0x564 0x8bc 0x2 0x1
-#define MX6QDL_PAD_EIM_DA12__GPIO3_IO12             0x194 0x564 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA12__SRC_BOOT_CFG12         0x194 0x564 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA12__EPDC_DATA02            0x194 0x564 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA13__EIM_AD13               0x198 0x568 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA13__IPU1_DI1_D0_CS         0x198 0x568 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA13__GPIO3_IO13             0x198 0x568 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA13__SRC_BOOT_CFG13         0x198 0x568 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA13__EPDC_DATA13            0x198 0x568 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA14__EIM_AD14               0x19c 0x56c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA14__IPU1_DI1_D1_CS         0x19c 0x56c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA14__GPIO3_IO14             0x19c 0x56c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA14__SRC_BOOT_CFG14         0x19c 0x56c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA14__EPDC_DATA14            0x19c 0x56c 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA15__EIM_AD15               0x1a0 0x570 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA15__IPU1_DI1_PIN01         0x1a0 0x570 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA15__IPU1_DI1_PIN04         0x1a0 0x570 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA15__GPIO3_IO15             0x1a0 0x570 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA15__SRC_BOOT_CFG15         0x1a0 0x570 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA15__EPDC_DATA09            0x1a0 0x570 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA2__EIM_AD02                0x1a4 0x574 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA2__IPU1_DISP1_DATA07       0x1a4 0x574 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA2__IPU1_CSI1_DATA07        0x1a4 0x574 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA2__GPIO3_IO02              0x1a4 0x574 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA2__SRC_BOOT_CFG02          0x1a4 0x574 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA2__EPDC_BDR0               0x1a4 0x574 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA3__EIM_AD03                0x1a8 0x578 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA3__IPU1_DISP1_DATA06       0x1a8 0x578 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA3__IPU1_CSI1_DATA06        0x1a8 0x578 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA3__GPIO3_IO03              0x1a8 0x578 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA3__SRC_BOOT_CFG03          0x1a8 0x578 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA3__EPDC_BDR1               0x1a8 0x578 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA4__EIM_AD04                0x1ac 0x57c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA4__IPU1_DISP1_DATA05       0x1ac 0x57c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA4__IPU1_CSI1_DATA05        0x1ac 0x57c 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA4__GPIO3_IO04              0x1ac 0x57c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA4__SRC_BOOT_CFG04          0x1ac 0x57c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA4__EPDC_SDCE0              0x1ac 0x57c 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA5__EIM_AD05                0x1b0 0x580 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA5__IPU1_DISP1_DATA04       0x1b0 0x580 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA5__IPU1_CSI1_DATA04        0x1b0 0x580 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA5__GPIO3_IO05              0x1b0 0x580 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA5__SRC_BOOT_CFG05          0x1b0 0x580 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA5__EPDC_SDCE1              0x1b0 0x580 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA6__EIM_AD06                0x1b4 0x584 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA6__IPU1_DISP1_DATA03       0x1b4 0x584 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA6__IPU1_CSI1_DATA03        0x1b4 0x584 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA6__GPIO3_IO06              0x1b4 0x584 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA6__SRC_BOOT_CFG06          0x1b4 0x584 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA6__EPDC_SDCE2              0x1b4 0x584 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA7__EIM_AD07                0x1b8 0x588 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA7__IPU1_DISP1_DATA02       0x1b8 0x588 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA7__IPU1_CSI1_DATA02        0x1b8 0x588 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA7__GPIO3_IO07              0x1b8 0x588 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA7__SRC_BOOT_CFG07          0x1b8 0x588 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA7__EPDC_SDCE3              0x1b8 0x588 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA8__EIM_AD08                0x1bc 0x58c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA8__IPU1_DISP1_DATA01       0x1bc 0x58c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA8__IPU1_CSI1_DATA01        0x1bc 0x58c 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA8__GPIO3_IO08              0x1bc 0x58c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA8__SRC_BOOT_CFG08          0x1bc 0x58c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA8__EPDC_SDCE4              0x1bc 0x58c 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_DA9__EIM_AD09                0x1c0 0x590 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA9__IPU1_DISP1_DATA00       0x1c0 0x590 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA9__IPU1_CSI1_DATA00        0x1c0 0x590 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA9__GPIO3_IO09              0x1c0 0x590 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA9__SRC_BOOT_CFG09          0x1c0 0x590 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA9__EPDC_SDCE5              0x1c0 0x590 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_EB0__EIM_EB0_B               0x1c4 0x594 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_EB0__IPU1_DISP1_DATA11       0x1c4 0x594 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_EB0__IPU1_CSI1_DATA11        0x1c4 0x594 0x88c 0x2 0x1
-#define MX6QDL_PAD_EIM_EB0__CCM_PMIC_READY          0x1c4 0x594 0x7d4 0x4 0x0
-#define MX6QDL_PAD_EIM_EB0__GPIO2_IO28              0x1c4 0x594 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_EB0__SRC_BOOT_CFG27          0x1c4 0x594 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_EB0__EPDC_PWR_COM            0x1c4 0x594 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_EB1__EIM_EB1_B               0x1c8 0x598 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_EB1__IPU1_DISP1_DATA10       0x1c8 0x598 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_EB1__IPU1_CSI1_DATA10        0x1c8 0x598 0x888 0x2 0x1
-#define MX6QDL_PAD_EIM_EB1__GPIO2_IO29              0x1c8 0x598 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_EB1__SRC_BOOT_CFG28          0x1c8 0x598 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_EB1__EPDC_SDSHR              0x1c8 0x598 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_EB2__EIM_EB2_B               0x1cc 0x59c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_EB2__ECSPI1_SS0              0x1cc 0x59c 0x7e4 0x1 0x2
-#define MX6QDL_PAD_EIM_EB2__IPU1_CSI1_DATA19        0x1cc 0x59c 0x8ac 0x3 0x1
-#define MX6QDL_PAD_EIM_EB2__HDMI_TX_DDC_SCL         0x1cc 0x59c 0x860 0x4 0x0
-#define MX6QDL_PAD_EIM_EB2__GPIO2_IO30              0x1cc 0x59c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_EB2__I2C2_SCL                0x1cc 0x59c 0x870 0x6 0x0
-#define MX6QDL_PAD_EIM_EB2__SRC_BOOT_CFG30          0x1cc 0x59c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_EB2__EPDC_DATA05             0x1cc 0x59c 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_EB3__EIM_EB3_B               0x1d0 0x5a0 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_EB3__ECSPI4_RDY              0x1d0 0x5a0 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_EB3__UART3_RTS_B             0x1d0 0x5a0 0x908 0x2 0x3
-#define MX6QDL_PAD_EIM_EB3__UART3_CTS_B             0x1d0 0x5a0 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_EB3__UART1_RI_B              0x1d0 0x5a0 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_EB3__IPU1_CSI1_HSYNC         0x1d0 0x5a0 0x8b4 0x4 0x1
-#define MX6QDL_PAD_EIM_EB3__GPIO2_IO31              0x1d0 0x5a0 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_EB3__IPU1_DI1_PIN03          0x1d0 0x5a0 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_EB3__SRC_BOOT_CFG31          0x1d0 0x5a0 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_EB3__EPDC_SDCE0              0x1d0 0x5a0 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_EB3__EIM_ACLK_FREERUN        0x1d0 0x5a0 0x000 0x9 0x0
-#define MX6QDL_PAD_EIM_LBA__EIM_LBA_B               0x1d4 0x5a4 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_LBA__IPU1_DI1_PIN17          0x1d4 0x5a4 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_LBA__ECSPI2_SS1              0x1d4 0x5a4 0x804 0x2 0x1
-#define MX6QDL_PAD_EIM_LBA__GPIO2_IO27              0x1d4 0x5a4 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_LBA__SRC_BOOT_CFG26          0x1d4 0x5a4 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_LBA__EPDC_DATA04             0x1d4 0x5a4 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_OE__EIM_OE_B                 0x1d8 0x5a8 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_OE__IPU1_DI1_PIN07           0x1d8 0x5a8 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_OE__ECSPI2_MISO              0x1d8 0x5a8 0x7f8 0x2 0x2
-#define MX6QDL_PAD_EIM_OE__GPIO2_IO25               0x1d8 0x5a8 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_OE__EPDC_PWR_IRQ             0x1d8 0x5a8 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_RW__EIM_RW                   0x1dc 0x5ac 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_RW__IPU1_DI1_PIN08           0x1dc 0x5ac 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_RW__ECSPI2_SS0               0x1dc 0x5ac 0x800 0x2 0x2
-#define MX6QDL_PAD_EIM_RW__GPIO2_IO26               0x1dc 0x5ac 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_RW__SRC_BOOT_CFG29           0x1dc 0x5ac 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_RW__EPDC_DATA07              0x1dc 0x5ac 0x000 0x8 0x0
-#define MX6QDL_PAD_EIM_WAIT__EIM_WAIT_B             0x1e0 0x5b0 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_WAIT__EIM_DTACK_B            0x1e0 0x5b0 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_WAIT__GPIO5_IO00             0x1e0 0x5b0 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_WAIT__SRC_BOOT_CFG25         0x1e0 0x5b0 0x000 0x7 0x0
-#define MX6QDL_PAD_ENET_CRS_DV__ENET_RX_EN          0x1e4 0x5b4 0x828 0x1 0x0
-#define MX6QDL_PAD_ENET_CRS_DV__ESAI_TX_CLK         0x1e4 0x5b4 0x840 0x2 0x0
-#define MX6QDL_PAD_ENET_CRS_DV__SPDIF_EXT_CLK       0x1e4 0x5b4 0x8f4 0x3 0x0
-#define MX6QDL_PAD_ENET_CRS_DV__GPIO1_IO25          0x1e4 0x5b4 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_MDC__MLB_DATA               0x1e8 0x5b8 0x8e0 0x0 0x0
-#define MX6QDL_PAD_ENET_MDC__ENET_MDC               0x1e8 0x5b8 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_MDC__ESAI_TX5_RX0           0x1e8 0x5b8 0x858 0x2 0x0
-#define MX6QDL_PAD_ENET_MDC__ENET_1588_EVENT1_IN    0x1e8 0x5b8 0x000 0x4 0x0
-#define MX6QDL_PAD_ENET_MDC__GPIO1_IO31             0x1e8 0x5b8 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_MDIO__ENET_MDIO             0x1ec 0x5bc 0x810 0x1 0x0
-#define MX6QDL_PAD_ENET_MDIO__ESAI_RX_CLK           0x1ec 0x5bc 0x83c 0x2 0x0
-#define MX6QDL_PAD_ENET_MDIO__ENET_1588_EVENT1_OUT  0x1ec 0x5bc 0x000 0x4 0x0
-#define MX6QDL_PAD_ENET_MDIO__GPIO1_IO22            0x1ec 0x5bc 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_MDIO__SPDIF_LOCK            0x1ec 0x5bc 0x000 0x6 0x0
-#define MX6QDL_PAD_ENET_REF_CLK__ENET_TX_CLK        0x1f0 0x5c0 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_REF_CLK__ESAI_RX_FS         0x1f0 0x5c0 0x82c 0x2 0x0
-#define MX6QDL_PAD_ENET_REF_CLK__GPIO1_IO23         0x1f0 0x5c0 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_REF_CLK__SPDIF_SR_CLK       0x1f0 0x5c0 0x000 0x6 0x0
-#define MX6QDL_PAD_ENET_RX_ER__USB_OTG_ID           0x1f4 0x5c4 0x790 0x0 0x0
-#define MX6QDL_PAD_ENET_RX_ER__ENET_RX_ER           0x1f4 0x5c4 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_RX_ER__ESAI_RX_HF_CLK       0x1f4 0x5c4 0x834 0x2 0x0
-#define MX6QDL_PAD_ENET_RX_ER__SPDIF_IN             0x1f4 0x5c4 0x8f0 0x3 0x1
-#define MX6QDL_PAD_ENET_RX_ER__ENET_1588_EVENT2_OUT 0x1f4 0x5c4 0x000 0x4 0x0
-#define MX6QDL_PAD_ENET_RX_ER__GPIO1_IO24           0x1f4 0x5c4 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_RXD0__ENET_RX_DATA0         0x1f8 0x5c8 0x818 0x1 0x0
-#define MX6QDL_PAD_ENET_RXD0__ESAI_TX_HF_CLK        0x1f8 0x5c8 0x838 0x2 0x0
-#define MX6QDL_PAD_ENET_RXD0__SPDIF_OUT             0x1f8 0x5c8 0x000 0x3 0x0
-#define MX6QDL_PAD_ENET_RXD0__GPIO1_IO27            0x1f8 0x5c8 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_RXD1__MLB_SIG               0x1fc 0x5cc 0x8e4 0x0 0x0
-#define MX6QDL_PAD_ENET_RXD1__ENET_RX_DATA1         0x1fc 0x5cc 0x81c 0x1 0x0
-#define MX6QDL_PAD_ENET_RXD1__ESAI_TX_FS            0x1fc 0x5cc 0x830 0x2 0x0
-#define MX6QDL_PAD_ENET_RXD1__ENET_1588_EVENT3_OUT  0x1fc 0x5cc 0x000 0x4 0x0
-#define MX6QDL_PAD_ENET_RXD1__GPIO1_IO26            0x1fc 0x5cc 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_TX_EN__ENET_TX_EN           0x200 0x5d0 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_TX_EN__ESAI_TX3_RX2         0x200 0x5d0 0x850 0x2 0x0
-#define MX6QDL_PAD_ENET_TX_EN__GPIO1_IO28           0x200 0x5d0 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_TX_EN__I2C4_SCL             0x200 0x5d0 0x880 0x9 0x0
-#define MX6QDL_PAD_ENET_TXD0__ENET_TX_DATA0         0x204 0x5d4 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_TXD0__ESAI_TX4_RX1          0x204 0x5d4 0x854 0x2 0x0
-#define MX6QDL_PAD_ENET_TXD0__GPIO1_IO30            0x204 0x5d4 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_TXD1__MLB_CLK               0x208 0x5d8 0x8dc 0x0 0x0
-#define MX6QDL_PAD_ENET_TXD1__ENET_TX_DATA1         0x208 0x5d8 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_TXD1__ESAI_TX2_RX3          0x208 0x5d8 0x84c 0x2 0x0
-#define MX6QDL_PAD_ENET_TXD1__ENET_1588_EVENT0_IN   0x208 0x5d8 0x000 0x4 0x0
-#define MX6QDL_PAD_ENET_TXD1__GPIO1_IO29            0x208 0x5d8 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_TXD1__I2C4_SDA              0x208 0x5d8 0x884 0x9 0x0
-#define MX6QDL_PAD_GPIO_0__CCM_CLKO1                0x20c 0x5dc 0x000 0x0 0x0
-#define MX6QDL_PAD_GPIO_0__KEY_COL5                 0x20c 0x5dc 0x8c0 0x2 0x1
-#define MX6QDL_PAD_GPIO_0__ASRC_EXT_CLK             0x20c 0x5dc 0x794 0x3 0x0
-#define MX6QDL_PAD_GPIO_0__EPIT1_OUT                0x20c 0x5dc 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_0__GPIO1_IO00               0x20c 0x5dc 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_0__USB_H1_PWR               0x20c 0x5dc 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_0__SNVS_VIO_5               0x20c 0x5dc 0x000 0x7 0x0
-#define MX6QDL_PAD_GPIO_1__ESAI_RX_CLK              0x210 0x5e0 0x83c 0x0 0x1
-#define MX6QDL_PAD_GPIO_1__WDOG2_B                  0x210 0x5e0 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_1__KEY_ROW5                 0x210 0x5e0 0x8cc 0x2 0x1
-#define MX6QDL_PAD_GPIO_1__USB_OTG_ID               0x210 0x5e0 0x790 0x3 0x1
-#define MX6QDL_PAD_GPIO_1__PWM2_OUT                 0x210 0x5e0 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_1__GPIO1_IO01               0x210 0x5e0 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_1__SD1_CD_B                 0x210 0x5e0 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_16__ESAI_TX3_RX2            0x214 0x5e4 0x850 0x0 0x1
-#define MX6QDL_PAD_GPIO_16__ENET_1588_EVENT2_IN     0x214 0x5e4 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_16__ENET_REF_CLK            0x214 0x5e4 0x80c 0x2 0x0
-#define MX6QDL_PAD_GPIO_16__SD1_LCTL                0x214 0x5e4 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_16__SPDIF_IN                0x214 0x5e4 0x8f0 0x4 0x2
-#define MX6QDL_PAD_GPIO_16__GPIO7_IO11              0x214 0x5e4 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_16__I2C3_SDA                0x214 0x5e4 0x87c 0x6 0x1
-#define MX6QDL_PAD_GPIO_16__JTAG_DE_B               0x214 0x5e4 0x000 0x7 0x0
-#define MX6QDL_PAD_GPIO_17__ESAI_TX0                0x218 0x5e8 0x844 0x0 0x0
-#define MX6QDL_PAD_GPIO_17__ENET_1588_EVENT3_IN     0x218 0x5e8 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_17__CCM_PMIC_READY          0x218 0x5e8 0x7d4 0x2 0x1
-#define MX6QDL_PAD_GPIO_17__SDMA_EXT_EVENT0         0x218 0x5e8 0x8e8 0x3 0x1
-#define MX6QDL_PAD_GPIO_17__SPDIF_OUT               0x218 0x5e8 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_17__GPIO7_IO12              0x218 0x5e8 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_18__ESAI_TX1                0x21c 0x5ec 0x848 0x0 0x0
-#define MX6QDL_PAD_GPIO_18__ENET_RX_CLK             0x21c 0x5ec 0x814 0x1 0x0
-#define MX6QDL_PAD_GPIO_18__SD3_VSELECT             0x21c 0x5ec 0x000 0x2 0x0
-#define MX6QDL_PAD_GPIO_18__SDMA_EXT_EVENT1         0x21c 0x5ec 0x8ec 0x3 0x1
-#define MX6QDL_PAD_GPIO_18__ASRC_EXT_CLK            0x21c 0x5ec 0x794 0x4 0x1
-#define MX6QDL_PAD_GPIO_18__GPIO7_IO13              0x21c 0x5ec 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_18__SNVS_VIO_5_CTL          0x21c 0x5ec 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_19__KEY_COL5                0x220 0x5f0 0x8c0 0x0 0x2
-#define MX6QDL_PAD_GPIO_19__ENET_1588_EVENT0_OUT    0x220 0x5f0 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_19__SPDIF_OUT               0x220 0x5f0 0x000 0x2 0x0
-#define MX6QDL_PAD_GPIO_19__CCM_CLKO1               0x220 0x5f0 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_19__ECSPI1_RDY              0x220 0x5f0 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_19__GPIO4_IO05              0x220 0x5f0 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_19__ENET_TX_ER              0x220 0x5f0 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_2__ESAI_TX_FS               0x224 0x5f4 0x830 0x0 0x1
-#define MX6QDL_PAD_GPIO_2__KEY_ROW6                 0x224 0x5f4 0x8d0 0x2 0x1
-#define MX6QDL_PAD_GPIO_2__GPIO1_IO02               0x224 0x5f4 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_2__SD2_WP                   0x224 0x5f4 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_2__MLB_DATA                 0x224 0x5f4 0x8e0 0x7 0x1
-#define MX6QDL_PAD_GPIO_3__ESAI_RX_HF_CLK           0x228 0x5f8 0x834 0x0 0x1
-#define MX6QDL_PAD_GPIO_3__I2C3_SCL                 0x228 0x5f8 0x878 0x2 0x1
-#define MX6QDL_PAD_GPIO_3__XTALOSC_REF_CLK_24M      0x228 0x5f8 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_3__CCM_CLKO2                0x228 0x5f8 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_3__GPIO1_IO03               0x228 0x5f8 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_3__USB_H1_OC                0x228 0x5f8 0x924 0x6 0x1
-#define MX6QDL_PAD_GPIO_3__MLB_CLK                  0x228 0x5f8 0x8dc 0x7 0x1
-#define MX6QDL_PAD_GPIO_4__ESAI_TX_HF_CLK           0x22c 0x5fc 0x838 0x0 0x1
-#define MX6QDL_PAD_GPIO_4__KEY_COL7                 0x22c 0x5fc 0x8c8 0x2 0x1
-#define MX6QDL_PAD_GPIO_4__GPIO1_IO04               0x22c 0x5fc 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_4__SD2_CD_B                 0x22c 0x5fc 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_5__ESAI_TX2_RX3             0x230 0x600 0x84c 0x0 0x1
-#define MX6QDL_PAD_GPIO_5__KEY_ROW7                 0x230 0x600 0x8d4 0x2 0x1
-#define MX6QDL_PAD_GPIO_5__CCM_CLKO1                0x230 0x600 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_5__GPIO1_IO05               0x230 0x600 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_5__I2C3_SCL                 0x230 0x600 0x878 0x6 0x2
-#define MX6QDL_PAD_GPIO_5__ARM_EVENTI               0x230 0x600 0x000 0x7 0x0
-#define MX6QDL_PAD_GPIO_6__ESAI_TX_CLK              0x234 0x604 0x840 0x0 0x1
-#define MX6QDL_PAD_GPIO_6__ENET_IRQ		    0x234 0x604 0x03c 0x11 0xff000609
-#define MX6QDL_PAD_GPIO_6__I2C3_SDA                 0x234 0x604 0x87c 0x2 0x2
-#define MX6QDL_PAD_GPIO_6__GPIO1_IO06               0x234 0x604 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_6__SD2_LCTL                 0x234 0x604 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_6__MLB_SIG                  0x234 0x604 0x8e4 0x7 0x1
-#define MX6QDL_PAD_GPIO_7__ESAI_TX4_RX1             0x238 0x608 0x854 0x0 0x1
-#define MX6QDL_PAD_GPIO_7__EPIT1_OUT                0x238 0x608 0x000 0x2 0x0
-#define MX6QDL_PAD_GPIO_7__FLEXCAN1_TX              0x238 0x608 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_7__UART2_TX_DATA            0x238 0x608 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_7__UART2_RX_DATA            0x238 0x608 0x904 0x4 0x2
-#define MX6QDL_PAD_GPIO_7__GPIO1_IO07               0x238 0x608 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_7__SPDIF_LOCK               0x238 0x608 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_7__USB_OTG_HOST_MODE        0x238 0x608 0x000 0x7 0x0
-#define MX6QDL_PAD_GPIO_7__I2C4_SCL                 0x238 0x608 0x880 0x8 0x1
-#define MX6QDL_PAD_GPIO_8__ESAI_TX5_RX0             0x23c 0x60c 0x858 0x0 0x1
-#define MX6QDL_PAD_GPIO_8__XTALOSC_REF_CLK_32K      0x23c 0x60c 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_8__EPIT2_OUT                0x23c 0x60c 0x000 0x2 0x0
-#define MX6QDL_PAD_GPIO_8__FLEXCAN1_RX              0x23c 0x60c 0x7c8 0x3 0x0
-#define MX6QDL_PAD_GPIO_8__UART2_RX_DATA            0x23c 0x60c 0x904 0x4 0x3
-#define MX6QDL_PAD_GPIO_8__UART2_TX_DATA            0x23c 0x60c 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_8__GPIO1_IO08               0x23c 0x60c 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_8__SPDIF_SR_CLK             0x23c 0x60c 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_8__USB_OTG_PWR_CTL_WAKE     0x23c 0x60c 0x000 0x7 0x0
-#define MX6QDL_PAD_GPIO_8__I2C4_SDA                 0x23c 0x60c 0x884 0x8 0x1
-#define MX6QDL_PAD_GPIO_9__ESAI_RX_FS               0x240 0x610 0x82c 0x0 0x1
-#define MX6QDL_PAD_GPIO_9__WDOG1_B                  0x240 0x610 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_9__KEY_COL6                 0x240 0x610 0x8c4 0x2 0x1
-#define MX6QDL_PAD_GPIO_9__CCM_REF_EN_B             0x240 0x610 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_9__PWM1_OUT                 0x240 0x610 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_9__GPIO1_IO09               0x240 0x610 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_9__SD1_WP                   0x240 0x610 0x92c 0x6 0x1
-#define MX6QDL_PAD_KEY_COL0__ECSPI1_SCLK            0x244 0x62c 0x7d8 0x0 0x3
-#define MX6QDL_PAD_KEY_COL0__ENET_RX_DATA3          0x244 0x62c 0x824 0x1 0x0
-#define MX6QDL_PAD_KEY_COL0__AUD5_TXC               0x244 0x62c 0x7c0 0x2 0x1
-#define MX6QDL_PAD_KEY_COL0__KEY_COL0               0x244 0x62c 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_COL0__UART4_TX_DATA          0x244 0x62c 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_COL0__UART4_RX_DATA          0x244 0x62c 0x914 0x4 0x2
-#define MX6QDL_PAD_KEY_COL0__GPIO4_IO06             0x244 0x62c 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_COL0__DCIC1_OUT              0x244 0x62c 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_COL1__ECSPI1_MISO            0x248 0x630 0x7dc 0x0 0x3
-#define MX6QDL_PAD_KEY_COL1__ENET_MDIO              0x248 0x630 0x810 0x1 0x1
-#define MX6QDL_PAD_KEY_COL1__AUD5_TXFS              0x248 0x630 0x7c4 0x2 0x1
-#define MX6QDL_PAD_KEY_COL1__KEY_COL1               0x248 0x630 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_COL1__UART5_TX_DATA          0x248 0x630 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_COL1__UART5_RX_DATA          0x248 0x630 0x91c 0x4 0x2
-#define MX6QDL_PAD_KEY_COL1__GPIO4_IO08             0x248 0x630 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_COL1__SD1_VSELECT            0x248 0x630 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_COL2__ECSPI1_SS1             0x24c 0x634 0x7e8 0x0 0x2
-#define MX6QDL_PAD_KEY_COL2__ENET_RX_DATA2          0x24c 0x634 0x820 0x1 0x0
-#define MX6QDL_PAD_KEY_COL2__FLEXCAN1_TX            0x24c 0x634 0x000 0x2 0x0
-#define MX6QDL_PAD_KEY_COL2__KEY_COL2               0x24c 0x634 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_COL2__ENET_MDC               0x24c 0x634 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_COL2__GPIO4_IO10             0x24c 0x634 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_COL2__USB_H1_PWR_CTL_WAKE    0x24c 0x634 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_COL3__ECSPI1_SS3             0x250 0x638 0x7f0 0x0 0x1
-#define MX6QDL_PAD_KEY_COL3__ENET_CRS               0x250 0x638 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_COL3__HDMI_TX_DDC_SCL        0x250 0x638 0x860 0x2 0x1
-#define MX6QDL_PAD_KEY_COL3__KEY_COL3               0x250 0x638 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_COL3__I2C2_SCL               0x250 0x638 0x870 0x4 0x1
-#define MX6QDL_PAD_KEY_COL3__GPIO4_IO12             0x250 0x638 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_COL3__SPDIF_IN               0x250 0x638 0x8f0 0x6 0x3
-#define MX6QDL_PAD_KEY_COL4__FLEXCAN2_TX            0x254 0x63c 0x000 0x0 0x0
-#define MX6QDL_PAD_KEY_COL4__IPU1_SISG4             0x254 0x63c 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_COL4__USB_OTG_OC             0x254 0x63c 0x920 0x2 0x1
-#define MX6QDL_PAD_KEY_COL4__KEY_COL4               0x254 0x63c 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_COL4__UART5_RTS_B            0x254 0x63c 0x918 0x4 0x2
-#define MX6QDL_PAD_KEY_COL4__UART5_CTS_B            0x254 0x63c 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_COL4__GPIO4_IO14             0x254 0x63c 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_ROW0__ECSPI1_MOSI            0x258 0x640 0x7e0 0x0 0x3
-#define MX6QDL_PAD_KEY_ROW0__ENET_TX_DATA3          0x258 0x640 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_ROW0__AUD5_TXD               0x258 0x640 0x7b4 0x2 0x1
-#define MX6QDL_PAD_KEY_ROW0__KEY_ROW0               0x258 0x640 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_ROW0__UART4_RX_DATA          0x258 0x640 0x914 0x4 0x3
-#define MX6QDL_PAD_KEY_ROW0__UART4_TX_DATA          0x258 0x640 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_ROW0__GPIO4_IO07             0x258 0x640 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_ROW0__DCIC2_OUT              0x258 0x640 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_ROW1__ECSPI1_SS0             0x25c 0x644 0x7e4 0x0 0x3
-#define MX6QDL_PAD_KEY_ROW1__ENET_COL               0x25c 0x644 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_ROW1__AUD5_RXD               0x25c 0x644 0x7b0 0x2 0x1
-#define MX6QDL_PAD_KEY_ROW1__KEY_ROW1               0x25c 0x644 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_ROW1__UART5_RX_DATA          0x25c 0x644 0x91c 0x4 0x3
-#define MX6QDL_PAD_KEY_ROW1__UART5_TX_DATA          0x25c 0x644 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_ROW1__GPIO4_IO09             0x25c 0x644 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_ROW1__SD2_VSELECT            0x25c 0x644 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_ROW2__ECSPI1_SS2             0x260 0x648 0x7ec 0x0 0x1
-#define MX6QDL_PAD_KEY_ROW2__ENET_TX_DATA2          0x260 0x648 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_ROW2__FLEXCAN1_RX            0x260 0x648 0x7c8 0x2 0x1
-#define MX6QDL_PAD_KEY_ROW2__KEY_ROW2               0x260 0x648 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_ROW2__SD2_VSELECT            0x260 0x648 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_ROW2__GPIO4_IO11             0x260 0x648 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_ROW2__HDMI_TX_CEC_LINE       0x260 0x648 0x85c 0x6 0x1
-#define MX6QDL_PAD_KEY_ROW3__ASRC_EXT_CLK           0x264 0x64c 0x794 0x1 0x2
-#define MX6QDL_PAD_KEY_ROW3__HDMI_TX_DDC_SDA        0x264 0x64c 0x864 0x2 0x1
-#define MX6QDL_PAD_KEY_ROW3__KEY_ROW3               0x264 0x64c 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_ROW3__I2C2_SDA               0x264 0x64c 0x874 0x4 0x1
-#define MX6QDL_PAD_KEY_ROW3__GPIO4_IO13             0x264 0x64c 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_ROW3__SD1_VSELECT            0x264 0x64c 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_ROW4__FLEXCAN2_RX            0x268 0x650 0x7cc 0x0 0x0
-#define MX6QDL_PAD_KEY_ROW4__IPU1_SISG5             0x268 0x650 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_ROW4__USB_OTG_PWR            0x268 0x650 0x000 0x2 0x0
-#define MX6QDL_PAD_KEY_ROW4__KEY_ROW4               0x268 0x650 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_ROW4__UART5_CTS_B            0x268 0x650 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_ROW4__UART5_RTS_B            0x268 0x650 0x918 0x4 0x3
-#define MX6QDL_PAD_KEY_ROW4__GPIO4_IO15             0x268 0x650 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_ALE__NAND_ALE              0x26c 0x654 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_ALE__SD4_RESET             0x26c 0x654 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_ALE__GPIO6_IO08            0x26c 0x654 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CLE__NAND_CLE              0x270 0x658 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_CLE__GPIO6_IO07            0x270 0x658 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CS0__NAND_CE0_B            0x274 0x65c 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_CS0__GPIO6_IO11            0x274 0x65c 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CS1__NAND_CE1_B            0x278 0x660 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_CS1__SD4_VSELECT           0x278 0x660 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_CS1__SD3_VSELECT           0x278 0x660 0x000 0x2 0x0
-#define MX6QDL_PAD_NANDF_CS1__GPIO6_IO14            0x278 0x660 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CS2__NAND_CE2_B            0x27c 0x664 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_CS2__IPU1_SISG0            0x27c 0x664 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_CS2__ESAI_TX0              0x27c 0x664 0x844 0x2 0x1
-#define MX6QDL_PAD_NANDF_CS2__EIM_CRE               0x27c 0x664 0x000 0x3 0x0
-#define MX6QDL_PAD_NANDF_CS2__CCM_CLKO2             0x27c 0x664 0x000 0x4 0x0
-#define MX6QDL_PAD_NANDF_CS2__GPIO6_IO15            0x27c 0x664 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CS3__NAND_CE3_B            0x280 0x668 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_CS3__IPU1_SISG1            0x280 0x668 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_CS3__ESAI_TX1              0x280 0x668 0x848 0x2 0x1
-#define MX6QDL_PAD_NANDF_CS3__EIM_ADDR26            0x280 0x668 0x000 0x3 0x0
-#define MX6QDL_PAD_NANDF_CS3__GPIO6_IO16            0x280 0x668 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CS3__I2C4_SDA              0x280 0x668 0x884 0x9 0x2
-#define MX6QDL_PAD_NANDF_D0__NAND_DATA00            0x284 0x66c 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D0__SD1_DATA4              0x284 0x66c 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D0__GPIO2_IO00             0x284 0x66c 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D1__NAND_DATA01            0x288 0x670 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D1__SD1_DATA5              0x288 0x670 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D1__GPIO2_IO01             0x288 0x670 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D2__NAND_DATA02            0x28c 0x674 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D2__SD1_DATA6              0x28c 0x674 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D2__GPIO2_IO02             0x28c 0x674 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D3__NAND_DATA03            0x290 0x678 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D3__SD1_DATA7              0x290 0x678 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D3__GPIO2_IO03             0x290 0x678 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D4__NAND_DATA04            0x294 0x67c 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D4__SD2_DATA4              0x294 0x67c 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D4__GPIO2_IO04             0x294 0x67c 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D5__NAND_DATA05            0x298 0x680 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D5__SD2_DATA5              0x298 0x680 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D5__GPIO2_IO05             0x298 0x680 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D6__NAND_DATA06            0x29c 0x684 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D6__SD2_DATA6              0x29c 0x684 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D6__GPIO2_IO06             0x29c 0x684 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D7__NAND_DATA07            0x2a0 0x688 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D7__SD2_DATA7              0x2a0 0x688 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D7__GPIO2_IO07             0x2a0 0x688 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_RB0__NAND_READY_B          0x2a4 0x68c 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_RB0__GPIO6_IO10            0x2a4 0x68c 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_WP_B__NAND_WP_B            0x2a8 0x690 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_WP_B__GPIO6_IO09           0x2a8 0x690 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_WP_B__I2C4_SCL             0x2a8 0x690 0x880 0x9 0x2
-#define MX6QDL_PAD_RGMII_RD0__HSI_RX_READY          0x2ac 0x694 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RD0__RGMII_RD0             0x2ac 0x694 0x818 0x1 0x1
-#define MX6QDL_PAD_RGMII_RD0__GPIO6_IO25            0x2ac 0x694 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_RD1__HSI_TX_FLAG           0x2b0 0x698 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RD1__RGMII_RD1             0x2b0 0x698 0x81c 0x1 0x1
-#define MX6QDL_PAD_RGMII_RD1__GPIO6_IO27            0x2b0 0x698 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_RD2__HSI_TX_DATA           0x2b4 0x69c 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RD2__RGMII_RD2             0x2b4 0x69c 0x820 0x1 0x1
-#define MX6QDL_PAD_RGMII_RD2__GPIO6_IO28            0x2b4 0x69c 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_RD3__HSI_TX_WAKE           0x2b8 0x6a0 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RD3__RGMII_RD3             0x2b8 0x6a0 0x824 0x1 0x1
-#define MX6QDL_PAD_RGMII_RD3__GPIO6_IO29            0x2b8 0x6a0 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_RX_CTL__USB_H3_DATA        0x2bc 0x6a4 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RX_CTL__RGMII_RX_CTL       0x2bc 0x6a4 0x828 0x1 0x1
-#define MX6QDL_PAD_RGMII_RX_CTL__GPIO6_IO24         0x2bc 0x6a4 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_RXC__USB_H3_STROBE         0x2c0 0x6a8 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RXC__RGMII_RXC             0x2c0 0x6a8 0x814 0x1 0x1
-#define MX6QDL_PAD_RGMII_RXC__GPIO6_IO30            0x2c0 0x6a8 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TD0__HSI_TX_READY          0x2c4 0x6ac 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TD0__RGMII_TD0             0x2c4 0x6ac 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TD0__GPIO6_IO20            0x2c4 0x6ac 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TD1__HSI_RX_FLAG           0x2c8 0x6b0 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TD1__RGMII_TD1             0x2c8 0x6b0 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TD1__GPIO6_IO21            0x2c8 0x6b0 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TD2__HSI_RX_DATA           0x2cc 0x6b4 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TD2__RGMII_TD2             0x2cc 0x6b4 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TD2__GPIO6_IO22            0x2cc 0x6b4 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TD3__HSI_RX_WAKE           0x2d0 0x6b8 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TD3__RGMII_TD3             0x2d0 0x6b8 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TD3__GPIO6_IO23            0x2d0 0x6b8 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TX_CTL__USB_H2_STROBE      0x2d4 0x6bc 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TX_CTL__RGMII_TX_CTL       0x2d4 0x6bc 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TX_CTL__GPIO6_IO26         0x2d4 0x6bc 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TX_CTL__ENET_REF_CLK       0x2d4 0x6bc 0x80c 0x7 0x1
-#define MX6QDL_PAD_RGMII_TXC__USB_H2_DATA           0x2d8 0x6c0 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TXC__RGMII_TXC             0x2d8 0x6c0 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TXC__SPDIF_EXT_CLK         0x2d8 0x6c0 0x8f4 0x2 0x1
-#define MX6QDL_PAD_RGMII_TXC__GPIO6_IO19            0x2d8 0x6c0 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TXC__XTALOSC_REF_CLK_24M   0x2d8 0x6c0 0x000 0x7 0x0
-#define MX6QDL_PAD_SD1_CLK__SD1_CLK                 0x2dc 0x6c4 0x928 0x0 0x1
-#define MX6QDL_PAD_SD1_CLK__OSC32K_32K_OUT          0x2dc 0x6c4 0x000 0x2 0x0
-#define MX6QDL_PAD_SD1_CLK__GPT_CLKIN               0x2dc 0x6c4 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_CLK__GPIO1_IO20              0x2dc 0x6c4 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_CMD__SD1_CMD                 0x2e0 0x6c8 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_CMD__PWM4_OUT                0x2e0 0x6c8 0x000 0x2 0x0
-#define MX6QDL_PAD_SD1_CMD__GPT_COMPARE1            0x2e0 0x6c8 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_CMD__GPIO1_IO18              0x2e0 0x6c8 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT0__SD1_DATA0              0x2e4 0x6cc 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_DAT0__GPT_CAPTURE1           0x2e4 0x6cc 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_DAT0__GPIO1_IO16             0x2e4 0x6cc 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT1__SD1_DATA1              0x2e8 0x6d0 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_DAT1__PWM3_OUT               0x2e8 0x6d0 0x000 0x2 0x0
-#define MX6QDL_PAD_SD1_DAT1__GPT_CAPTURE2           0x2e8 0x6d0 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_DAT1__GPIO1_IO17             0x2e8 0x6d0 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT2__SD1_DATA2              0x2ec 0x6d4 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_DAT2__GPT_COMPARE2           0x2ec 0x6d4 0x000 0x2 0x0
-#define MX6QDL_PAD_SD1_DAT2__PWM2_OUT               0x2ec 0x6d4 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_DAT2__WDOG1_B                0x2ec 0x6d4 0x000 0x4 0x0
-#define MX6QDL_PAD_SD1_DAT2__GPIO1_IO19             0x2ec 0x6d4 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT2__WDOG1_RESET_B_DEB      0x2ec 0x6d4 0x000 0x6 0x0
-#define MX6QDL_PAD_SD1_DAT3__SD1_DATA3              0x2f0 0x6d8 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_DAT3__GPT_COMPARE3           0x2f0 0x6d8 0x000 0x2 0x0
-#define MX6QDL_PAD_SD1_DAT3__PWM1_OUT               0x2f0 0x6d8 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_DAT3__WDOG2_B                0x2f0 0x6d8 0x000 0x4 0x0
-#define MX6QDL_PAD_SD1_DAT3__GPIO1_IO21             0x2f0 0x6d8 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT3__WDOG2_RESET_B_DEB      0x2f0 0x6d8 0x000 0x6 0x0
-#define MX6QDL_PAD_SD2_CLK__SD2_CLK                 0x2f4 0x6dc 0x930 0x0 0x1
-#define MX6QDL_PAD_SD2_CLK__KEY_COL5                0x2f4 0x6dc 0x8c0 0x2 0x3
-#define MX6QDL_PAD_SD2_CLK__AUD4_RXFS               0x2f4 0x6dc 0x7a4 0x3 0x1
-#define MX6QDL_PAD_SD2_CLK__GPIO1_IO10              0x2f4 0x6dc 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_CMD__SD2_CMD                 0x2f8 0x6e0 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_CMD__KEY_ROW5                0x2f8 0x6e0 0x8cc 0x2 0x2
-#define MX6QDL_PAD_SD2_CMD__AUD4_RXC                0x2f8 0x6e0 0x7a0 0x3 0x1
-#define MX6QDL_PAD_SD2_CMD__GPIO1_IO11              0x2f8 0x6e0 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_DAT0__SD2_DATA0              0x2fc 0x6e4 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_DAT0__AUD4_RXD               0x2fc 0x6e4 0x798 0x3 0x1
-#define MX6QDL_PAD_SD2_DAT0__KEY_ROW7               0x2fc 0x6e4 0x8d4 0x4 0x2
-#define MX6QDL_PAD_SD2_DAT0__GPIO1_IO15             0x2fc 0x6e4 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_DAT0__DCIC2_OUT              0x2fc 0x6e4 0x000 0x6 0x0
-#define MX6QDL_PAD_SD2_DAT1__SD2_DATA1              0x300 0x6e8 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_DAT1__EIM_CS2_B              0x300 0x6e8 0x000 0x2 0x0
-#define MX6QDL_PAD_SD2_DAT1__AUD4_TXFS              0x300 0x6e8 0x7ac 0x3 0x1
-#define MX6QDL_PAD_SD2_DAT1__KEY_COL7               0x300 0x6e8 0x8c8 0x4 0x2
-#define MX6QDL_PAD_SD2_DAT1__GPIO1_IO14             0x300 0x6e8 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_DAT2__SD2_DATA2              0x304 0x6ec 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_DAT2__EIM_CS3_B              0x304 0x6ec 0x000 0x2 0x0
-#define MX6QDL_PAD_SD2_DAT2__AUD4_TXD               0x304 0x6ec 0x79c 0x3 0x1
-#define MX6QDL_PAD_SD2_DAT2__KEY_ROW6               0x304 0x6ec 0x8d0 0x4 0x2
-#define MX6QDL_PAD_SD2_DAT2__GPIO1_IO13             0x304 0x6ec 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_DAT3__SD2_DATA3              0x308 0x6f0 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_DAT3__KEY_COL6               0x308 0x6f0 0x8c4 0x2 0x2
-#define MX6QDL_PAD_SD2_DAT3__AUD4_TXC               0x308 0x6f0 0x7a8 0x3 0x1
-#define MX6QDL_PAD_SD2_DAT3__GPIO1_IO12             0x308 0x6f0 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_CLK__SD3_CLK                 0x30c 0x6f4 0x934 0x0 0x1
-#define MX6QDL_PAD_SD3_CLK__UART2_RTS_B             0x30c 0x6f4 0x900 0x1 0x2
-#define MX6QDL_PAD_SD3_CLK__UART2_CTS_B             0x30c 0x6f4 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_CLK__FLEXCAN1_RX             0x30c 0x6f4 0x7c8 0x2 0x2
-#define MX6QDL_PAD_SD3_CLK__GPIO7_IO03              0x30c 0x6f4 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_CMD__SD3_CMD                 0x310 0x6f8 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_CMD__UART2_CTS_B             0x310 0x6f8 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_CMD__UART2_RTS_B             0x310 0x6f8 0x900 0x1 0x3
-#define MX6QDL_PAD_SD3_CMD__FLEXCAN1_TX             0x310 0x6f8 0x000 0x2 0x0
-#define MX6QDL_PAD_SD3_CMD__GPIO7_IO02              0x310 0x6f8 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT0__SD3_DATA0              0x314 0x6fc 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT0__UART1_CTS_B            0x314 0x6fc 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT0__UART1_RTS_B            0x314 0x6fc 0x8f8 0x1 0x2
-#define MX6QDL_PAD_SD3_DAT0__FLEXCAN2_TX            0x314 0x6fc 0x000 0x2 0x0
-#define MX6QDL_PAD_SD3_DAT0__GPIO7_IO04             0x314 0x6fc 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT1__SD3_DATA1              0x318 0x700 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT1__UART1_RTS_B            0x318 0x700 0x8f8 0x1 0x3
-#define MX6QDL_PAD_SD3_DAT1__UART1_CTS_B            0x318 0x700 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT1__FLEXCAN2_RX            0x318 0x700 0x7cc 0x2 0x1
-#define MX6QDL_PAD_SD3_DAT1__GPIO7_IO05             0x318 0x700 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT2__SD3_DATA2              0x31c 0x704 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT2__GPIO7_IO06             0x31c 0x704 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT3__SD3_DATA3              0x320 0x708 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT3__UART3_CTS_B            0x320 0x708 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT3__UART3_RTS_B            0x320 0x708 0x908 0x1 0x4
-#define MX6QDL_PAD_SD3_DAT3__GPIO7_IO07             0x320 0x708 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT4__SD3_DATA4              0x324 0x70c 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT4__UART2_RX_DATA          0x324 0x70c 0x904 0x1 0x4
-#define MX6QDL_PAD_SD3_DAT4__UART2_TX_DATA          0x324 0x70c 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT4__GPIO7_IO01             0x324 0x70c 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT5__SD3_DATA5              0x328 0x710 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT5__UART2_TX_DATA          0x328 0x710 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT5__UART2_RX_DATA          0x328 0x710 0x904 0x1 0x5
-#define MX6QDL_PAD_SD3_DAT5__GPIO7_IO00             0x328 0x710 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT6__SD3_DATA6              0x32c 0x714 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT6__UART1_RX_DATA          0x32c 0x714 0x8fc 0x1 0x2
-#define MX6QDL_PAD_SD3_DAT6__UART1_TX_DATA          0x32c 0x714 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT6__GPIO6_IO18             0x32c 0x714 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT7__SD3_DATA7              0x330 0x718 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT7__UART1_TX_DATA          0x330 0x718 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT7__UART1_RX_DATA          0x330 0x718 0x8fc 0x1 0x3
-#define MX6QDL_PAD_SD3_DAT7__GPIO6_IO17             0x330 0x718 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_RST__SD3_RESET               0x334 0x71c 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_RST__UART3_RTS_B             0x334 0x71c 0x908 0x1 0x5
-#define MX6QDL_PAD_SD3_RST__UART3_CTS_B             0x334 0x71c 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_RST__GPIO7_IO08              0x334 0x71c 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_CLK__SD4_CLK                 0x338 0x720 0x938 0x0 0x1
-#define MX6QDL_PAD_SD4_CLK__NAND_WE_B               0x338 0x720 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_CLK__UART3_RX_DATA           0x338 0x720 0x90c 0x2 0x2
-#define MX6QDL_PAD_SD4_CLK__UART3_TX_DATA           0x338 0x720 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_CLK__GPIO7_IO10              0x338 0x720 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_CMD__SD4_CMD                 0x33c 0x724 0x000 0x0 0x0
-#define MX6QDL_PAD_SD4_CMD__NAND_RE_B               0x33c 0x724 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_CMD__UART3_TX_DATA           0x33c 0x724 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_CMD__UART3_RX_DATA           0x33c 0x724 0x90c 0x2 0x3
-#define MX6QDL_PAD_SD4_CMD__GPIO7_IO09              0x33c 0x724 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT0__SD4_DATA0              0x340 0x728 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT0__NAND_DQS               0x340 0x728 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT0__GPIO2_IO08             0x340 0x728 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT1__SD4_DATA1              0x344 0x72c 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT1__PWM3_OUT               0x344 0x72c 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT1__GPIO2_IO09             0x344 0x72c 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT2__SD4_DATA2              0x348 0x730 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT2__PWM4_OUT               0x348 0x730 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT2__GPIO2_IO10             0x348 0x730 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT3__SD4_DATA3              0x34c 0x734 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT3__GPIO2_IO11             0x34c 0x734 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT4__SD4_DATA4              0x350 0x738 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT4__UART2_RX_DATA          0x350 0x738 0x904 0x2 0x6
-#define MX6QDL_PAD_SD4_DAT4__UART2_TX_DATA          0x350 0x738 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT4__GPIO2_IO12             0x350 0x738 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT5__SD4_DATA5              0x354 0x73c 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT5__UART2_RTS_B            0x354 0x73c 0x900 0x2 0x4
-#define MX6QDL_PAD_SD4_DAT5__UART2_CTS_B            0x354 0x73c 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT5__GPIO2_IO13             0x354 0x73c 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT6__SD4_DATA6              0x358 0x740 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT6__UART2_CTS_B            0x358 0x740 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT6__UART2_RTS_B            0x358 0x740 0x900 0x2 0x5
-#define MX6QDL_PAD_SD4_DAT6__GPIO2_IO14             0x358 0x740 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT7__SD4_DATA7              0x35c 0x744 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT7__UART2_TX_DATA          0x35c 0x744 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT7__UART2_RX_DATA          0x35c 0x744 0x904 0x2 0x7
-#define MX6QDL_PAD_SD4_DAT7__GPIO2_IO15             0x35c 0x744 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT10__IPU1_CSI0_DATA10     0x04c 0x360 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT10__AUD3_RXC             0x04c 0x360 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT10__ECSPI2_MISO          0x04c 0x360 0x7f8 0x2 0x0
+#define MX6DL_PAD_CSI0_DAT10__UART1_TX_DATA        0x04c 0x360 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT10__UART1_RX_DATA        0x04c 0x360 0x8fc 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT10__GPIO5_IO28           0x04c 0x360 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT10__ARM_TRACE07          0x04c 0x360 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT11__IPU1_CSI0_DATA11     0x050 0x364 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT11__AUD3_RXFS            0x050 0x364 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT11__ECSPI2_SS0           0x050 0x364 0x800 0x2 0x0
+#define MX6DL_PAD_CSI0_DAT11__UART1_RX_DATA        0x050 0x364 0x8fc 0x3 0x1
+#define MX6DL_PAD_CSI0_DAT11__UART1_TX_DATA        0x050 0x364 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT11__GPIO5_IO29           0x050 0x364 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT11__ARM_TRACE08          0x050 0x364 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT12__IPU1_CSI0_DATA12     0x054 0x368 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT12__EIM_DATA08           0x054 0x368 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT12__UART4_TX_DATA        0x054 0x368 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT12__UART4_RX_DATA        0x054 0x368 0x914 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT12__GPIO5_IO30           0x054 0x368 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT12__ARM_TRACE09          0x054 0x368 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT13__IPU1_CSI0_DATA13     0x058 0x36c 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT13__EIM_DATA09           0x058 0x36c 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT13__UART4_RX_DATA        0x058 0x36c 0x914 0x3 0x1
+#define MX6DL_PAD_CSI0_DAT13__UART4_TX_DATA        0x058 0x36c 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT13__GPIO5_IO31           0x058 0x36c 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT13__ARM_TRACE10          0x058 0x36c 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT14__IPU1_CSI0_DATA14     0x05c 0x370 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT14__EIM_DATA10           0x05c 0x370 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT14__UART5_TX_DATA        0x05c 0x370 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT14__UART5_RX_DATA        0x05c 0x370 0x91c 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT14__GPIO6_IO00           0x05c 0x370 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT14__ARM_TRACE11          0x05c 0x370 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT15__IPU1_CSI0_DATA15     0x060 0x374 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT15__EIM_DATA11           0x060 0x374 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT15__UART5_RX_DATA        0x060 0x374 0x91c 0x3 0x1
+#define MX6DL_PAD_CSI0_DAT15__UART5_TX_DATA        0x060 0x374 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT15__GPIO6_IO01           0x060 0x374 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT15__ARM_TRACE12          0x060 0x374 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT16__IPU1_CSI0_DATA16     0x064 0x378 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT16__EIM_DATA12           0x064 0x378 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT16__UART4_RTS_B          0x064 0x378 0x910 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT16__UART4_CTS_B          0x064 0x378 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT16__GPIO6_IO02           0x064 0x378 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT16__ARM_TRACE13          0x064 0x378 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT17__IPU1_CSI0_DATA17     0x068 0x37c 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT17__EIM_DATA13           0x068 0x37c 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT17__UART4_CTS_B          0x068 0x37c 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT17__UART4_RTS_B          0x068 0x37c 0x910 0x3 0x1
+#define MX6DL_PAD_CSI0_DAT17__GPIO6_IO03           0x068 0x37c 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT17__ARM_TRACE14          0x068 0x37c 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT18__IPU1_CSI0_DATA18     0x06c 0x380 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT18__EIM_DATA14           0x06c 0x380 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT18__UART5_RTS_B          0x06c 0x380 0x918 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT18__UART5_CTS_B          0x06c 0x380 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT18__GPIO6_IO04           0x06c 0x380 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT18__ARM_TRACE15          0x06c 0x380 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT19__IPU1_CSI0_DATA19     0x070 0x384 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT19__EIM_DATA15           0x070 0x384 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT19__UART5_CTS_B          0x070 0x384 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT19__UART5_RTS_B          0x070 0x384 0x918 0x3 0x1
+#define MX6DL_PAD_CSI0_DAT19__GPIO6_IO05           0x070 0x384 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT4__IPU1_CSI0_DATA04      0x074 0x388 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT4__EIM_DATA02            0x074 0x388 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT4__ECSPI1_SCLK           0x074 0x388 0x7d8 0x2 0x0
+#define MX6DL_PAD_CSI0_DAT4__KEY_COL5              0x074 0x388 0x8c0 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT4__AUD3_TXC              0x074 0x388 0x000 0x4 0x0
+#define MX6DL_PAD_CSI0_DAT4__GPIO5_IO22            0x074 0x388 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT4__ARM_TRACE01           0x074 0x388 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT5__IPU1_CSI0_DATA05      0x078 0x38c 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT5__EIM_DATA03            0x078 0x38c 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT5__ECSPI1_MOSI           0x078 0x38c 0x7e0 0x2 0x0
+#define MX6DL_PAD_CSI0_DAT5__KEY_ROW5              0x078 0x38c 0x8cc 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT5__AUD3_TXD              0x078 0x38c 0x000 0x4 0x0
+#define MX6DL_PAD_CSI0_DAT5__GPIO5_IO23            0x078 0x38c 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT5__ARM_TRACE02           0x078 0x38c 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT6__IPU1_CSI0_DATA06      0x07c 0x390 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT6__EIM_DATA04            0x07c 0x390 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT6__ECSPI1_MISO           0x07c 0x390 0x7dc 0x2 0x0
+#define MX6DL_PAD_CSI0_DAT6__KEY_COL6              0x07c 0x390 0x8c4 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT6__AUD3_TXFS             0x07c 0x390 0x000 0x4 0x0
+#define MX6DL_PAD_CSI0_DAT6__GPIO5_IO24            0x07c 0x390 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT6__ARM_TRACE03           0x07c 0x390 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT7__IPU1_CSI0_DATA07      0x080 0x394 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT7__EIM_DATA05            0x080 0x394 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT7__ECSPI1_SS0            0x080 0x394 0x7e4 0x2 0x0
+#define MX6DL_PAD_CSI0_DAT7__KEY_ROW6              0x080 0x394 0x8d0 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT7__AUD3_RXD              0x080 0x394 0x000 0x4 0x0
+#define MX6DL_PAD_CSI0_DAT7__GPIO5_IO25            0x080 0x394 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT7__ARM_TRACE04           0x080 0x394 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT8__IPU1_CSI0_DATA08      0x084 0x398 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT8__EIM_DATA06            0x084 0x398 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT8__ECSPI2_SCLK           0x084 0x398 0x7f4 0x2 0x0
+#define MX6DL_PAD_CSI0_DAT8__KEY_COL7              0x084 0x398 0x8c8 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT8__I2C1_SDA              0x084 0x398 0x86c 0x4 0x0
+#define MX6DL_PAD_CSI0_DAT8__GPIO5_IO26            0x084 0x398 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT8__ARM_TRACE05           0x084 0x398 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DAT9__IPU1_CSI0_DATA09      0x088 0x39c 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DAT9__EIM_DATA07            0x088 0x39c 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DAT9__ECSPI2_MOSI           0x088 0x39c 0x7fc 0x2 0x0
+#define MX6DL_PAD_CSI0_DAT9__KEY_ROW7              0x088 0x39c 0x8d4 0x3 0x0
+#define MX6DL_PAD_CSI0_DAT9__I2C1_SCL              0x088 0x39c 0x868 0x4 0x0
+#define MX6DL_PAD_CSI0_DAT9__GPIO5_IO27            0x088 0x39c 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DAT9__ARM_TRACE06           0x088 0x39c 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_DATA_EN__IPU1_CSI0_DATA_EN  0x08c 0x3a0 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_DATA_EN__EIM_DATA00         0x08c 0x3a0 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_DATA_EN__GPIO5_IO20         0x08c 0x3a0 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_DATA_EN__ARM_TRACE_CLK      0x08c 0x3a0 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_MCLK__IPU1_CSI0_HSYNC       0x090 0x3a4 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_MCLK__CCM_CLKO1             0x090 0x3a4 0x000 0x3 0x0
+#define MX6DL_PAD_CSI0_MCLK__GPIO5_IO19            0x090 0x3a4 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_MCLK__ARM_TRACE_CTL         0x090 0x3a4 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_PIXCLK__IPU1_CSI0_PIXCLK    0x094 0x3a8 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_PIXCLK__GPIO5_IO18          0x094 0x3a8 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_PIXCLK__ARM_EVENTO          0x094 0x3a8 0x000 0x7 0x0
+#define MX6DL_PAD_CSI0_VSYNC__IPU1_CSI0_VSYNC      0x098 0x3ac 0x000 0x0 0x0
+#define MX6DL_PAD_CSI0_VSYNC__EIM_DATA01           0x098 0x3ac 0x000 0x1 0x0
+#define MX6DL_PAD_CSI0_VSYNC__GPIO5_IO21           0x098 0x3ac 0x000 0x5 0x0
+#define MX6DL_PAD_CSI0_VSYNC__ARM_TRACE00          0x098 0x3ac 0x000 0x7 0x0
+#define MX6DL_PAD_DI0_DISP_CLK__IPU1_DI0_DISP_CLK  0x09c 0x3b0 0x000 0x0 0x0
+#define MX6DL_PAD_DI0_DISP_CLK__LCD_CLK            0x09c 0x3b0 0x000 0x1 0x0
+#define MX6DL_PAD_DI0_DISP_CLK__GPIO4_IO16         0x09c 0x3b0 0x000 0x5 0x0
+#define MX6DL_PAD_DI0_DISP_CLK__LCD_WR_RWN         0x09c 0x3b0 0x000 0x8 0x0
+#define MX6DL_PAD_DI0_PIN15__IPU1_DI0_PIN15        0x0a0 0x3b4 0x000 0x0 0x0
+#define MX6DL_PAD_DI0_PIN15__LCD_ENABLE            0x0a0 0x3b4 0x000 0x1 0x0
+#define MX6DL_PAD_DI0_PIN15__AUD6_TXC              0x0a0 0x3b4 0x000 0x2 0x0
+#define MX6DL_PAD_DI0_PIN15__GPIO4_IO17            0x0a0 0x3b4 0x000 0x5 0x0
+#define MX6DL_PAD_DI0_PIN15__LCD_RD_E              0x0a0 0x3b4 0x000 0x8 0x0
+#define MX6DL_PAD_DI0_PIN2__IPU1_DI0_PIN02         0x0a4 0x3b8 0x000 0x0 0x0
+#define MX6DL_PAD_DI0_PIN2__LCD_HSYNC              0x0a4 0x3b8 0x8d8 0x1 0x0
+#define MX6DL_PAD_DI0_PIN2__AUD6_TXD               0x0a4 0x3b8 0x000 0x2 0x0
+#define MX6DL_PAD_DI0_PIN2__GPIO4_IO18             0x0a4 0x3b8 0x000 0x5 0x0
+#define MX6DL_PAD_DI0_PIN2__LCD_RS                 0x0a4 0x3b8 0x000 0x8 0x0
+#define MX6DL_PAD_DI0_PIN3__IPU1_DI0_PIN03         0x0a8 0x3bc 0x000 0x0 0x0
+#define MX6DL_PAD_DI0_PIN3__LCD_VSYNC              0x0a8 0x3bc 0x000 0x1 0x0
+#define MX6DL_PAD_DI0_PIN3__AUD6_TXFS              0x0a8 0x3bc 0x000 0x2 0x0
+#define MX6DL_PAD_DI0_PIN3__GPIO4_IO19             0x0a8 0x3bc 0x000 0x5 0x0
+#define MX6DL_PAD_DI0_PIN3__LCD_CS                 0x0a8 0x3bc 0x000 0x8 0x0
+#define MX6DL_PAD_DI0_PIN4__IPU1_DI0_PIN04         0x0ac 0x3c0 0x000 0x0 0x0
+#define MX6DL_PAD_DI0_PIN4__LCD_BUSY               0x0ac 0x3c0 0x8d8 0x1 0x1
+#define MX6DL_PAD_DI0_PIN4__AUD6_RXD               0x0ac 0x3c0 0x000 0x2 0x0
+#define MX6DL_PAD_DI0_PIN4__SD1_WP                 0x0ac 0x3c0 0x92c 0x3 0x0
+#define MX6DL_PAD_DI0_PIN4__GPIO4_IO20             0x0ac 0x3c0 0x000 0x5 0x0
+#define MX6DL_PAD_DI0_PIN4__LCD_RESET              0x0ac 0x3c0 0x000 0x8 0x0
+#define MX6DL_PAD_DISP0_DAT0__IPU1_DISP0_DATA00    0x0b0 0x3c4 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT0__LCD_DATA00           0x0b0 0x3c4 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT0__ECSPI3_SCLK          0x0b0 0x3c4 0x000 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT0__GPIO4_IO21           0x0b0 0x3c4 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT1__IPU1_DISP0_DATA01    0x0b4 0x3c8 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT1__LCD_DATA01           0x0b4 0x3c8 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT1__ECSPI3_MOSI          0x0b4 0x3c8 0x000 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT1__GPIO4_IO22           0x0b4 0x3c8 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT10__IPU1_DISP0_DATA10   0x0b8 0x3cc 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT10__LCD_DATA10          0x0b8 0x3cc 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT10__GPIO4_IO31          0x0b8 0x3cc 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT11__IPU1_DISP0_DATA11   0x0bc 0x3d0 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT11__LCD_DATA11          0x0bc 0x3d0 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT11__GPIO5_IO05          0x0bc 0x3d0 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT12__IPU1_DISP0_DATA12   0x0c0 0x3d4 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT12__LCD_DATA12          0x0c0 0x3d4 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT12__GPIO5_IO06          0x0c0 0x3d4 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT13__IPU1_DISP0_DATA13   0x0c4 0x3d8 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT13__LCD_DATA13          0x0c4 0x3d8 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT13__AUD5_RXFS           0x0c4 0x3d8 0x7bc 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT13__GPIO5_IO07          0x0c4 0x3d8 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT14__IPU1_DISP0_DATA14   0x0c8 0x3dc 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT14__LCD_DATA14          0x0c8 0x3dc 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT14__AUD5_RXC            0x0c8 0x3dc 0x7b8 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT14__GPIO5_IO08          0x0c8 0x3dc 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT15__IPU1_DISP0_DATA15   0x0cc 0x3e0 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT15__LCD_DATA15          0x0cc 0x3e0 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT15__ECSPI1_SS1          0x0cc 0x3e0 0x7e8 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT15__ECSPI2_SS1          0x0cc 0x3e0 0x804 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT15__GPIO5_IO09          0x0cc 0x3e0 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT16__IPU1_DISP0_DATA16   0x0d0 0x3e4 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT16__LCD_DATA16          0x0d0 0x3e4 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT16__ECSPI2_MOSI         0x0d0 0x3e4 0x7fc 0x2 0x1
+#define MX6DL_PAD_DISP0_DAT16__AUD5_TXC            0x0d0 0x3e4 0x7c0 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT16__SDMA_EXT_EVENT0     0x0d0 0x3e4 0x8e8 0x4 0x0
+#define MX6DL_PAD_DISP0_DAT16__GPIO5_IO10          0x0d0 0x3e4 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT17__IPU1_DISP0_DATA17   0x0d4 0x3e8 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT17__LCD_DATA17          0x0d4 0x3e8 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT17__ECSPI2_MISO         0x0d4 0x3e8 0x7f8 0x2 0x1
+#define MX6DL_PAD_DISP0_DAT17__AUD5_TXD            0x0d4 0x3e8 0x7b4 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT17__SDMA_EXT_EVENT1     0x0d4 0x3e8 0x8ec 0x4 0x0
+#define MX6DL_PAD_DISP0_DAT17__GPIO5_IO11          0x0d4 0x3e8 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT18__IPU1_DISP0_DATA18   0x0d8 0x3ec 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT18__LCD_DATA18          0x0d8 0x3ec 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT18__ECSPI2_SS0          0x0d8 0x3ec 0x800 0x2 0x1
+#define MX6DL_PAD_DISP0_DAT18__AUD5_TXFS           0x0d8 0x3ec 0x7c4 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT18__AUD4_RXFS           0x0d8 0x3ec 0x7a4 0x4 0x0
+#define MX6DL_PAD_DISP0_DAT18__GPIO5_IO12          0x0d8 0x3ec 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT18__EIM_CS2_B           0x0d8 0x3ec 0x000 0x7 0x0
+#define MX6DL_PAD_DISP0_DAT19__IPU1_DISP0_DATA19   0x0dc 0x3f0 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT19__LCD_DATA19          0x0dc 0x3f0 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT19__ECSPI2_SCLK         0x0dc 0x3f0 0x7f4 0x2 0x1
+#define MX6DL_PAD_DISP0_DAT19__AUD5_RXD            0x0dc 0x3f0 0x7b0 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT19__AUD4_RXC            0x0dc 0x3f0 0x7a0 0x4 0x0
+#define MX6DL_PAD_DISP0_DAT19__GPIO5_IO13          0x0dc 0x3f0 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT19__EIM_CS3_B           0x0dc 0x3f0 0x000 0x7 0x0
+#define MX6DL_PAD_DISP0_DAT2__IPU1_DISP0_DATA02    0x0e0 0x3f4 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT2__LCD_DATA02           0x0e0 0x3f4 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT2__ECSPI3_MISO          0x0e0 0x3f4 0x000 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT2__GPIO4_IO23           0x0e0 0x3f4 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT20__IPU1_DISP0_DATA20   0x0e4 0x3f8 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT20__LCD_DATA20          0x0e4 0x3f8 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT20__ECSPI1_SCLK         0x0e4 0x3f8 0x7d8 0x2 0x1
+#define MX6DL_PAD_DISP0_DAT20__AUD4_TXC            0x0e4 0x3f8 0x7a8 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT20__GPIO5_IO14          0x0e4 0x3f8 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT21__IPU1_DISP0_DATA21   0x0e8 0x3fc 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT21__LCD_DATA21          0x0e8 0x3fc 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT21__ECSPI1_MOSI         0x0e8 0x3fc 0x7e0 0x2 0x1
+#define MX6DL_PAD_DISP0_DAT21__AUD4_TXD            0x0e8 0x3fc 0x79c 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT21__GPIO5_IO15          0x0e8 0x3fc 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT22__IPU1_DISP0_DATA22   0x0ec 0x400 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT22__LCD_DATA22          0x0ec 0x400 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT22__ECSPI1_MISO         0x0ec 0x400 0x7dc 0x2 0x1
+#define MX6DL_PAD_DISP0_DAT22__AUD4_TXFS           0x0ec 0x400 0x7ac 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT22__GPIO5_IO16          0x0ec 0x400 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT23__IPU1_DISP0_DATA23   0x0f0 0x404 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT23__LCD_DATA23          0x0f0 0x404 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT23__ECSPI1_SS0          0x0f0 0x404 0x7e4 0x2 0x1
+#define MX6DL_PAD_DISP0_DAT23__AUD4_RXD            0x0f0 0x404 0x798 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT23__GPIO5_IO17          0x0f0 0x404 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT3__IPU1_DISP0_DATA03    0x0f4 0x408 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT3__LCD_DATA03           0x0f4 0x408 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT3__ECSPI3_SS0           0x0f4 0x408 0x000 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT3__GPIO4_IO24           0x0f4 0x408 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT4__IPU1_DISP0_DATA04    0x0f8 0x40c 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT4__LCD_DATA04           0x0f8 0x40c 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT4__ECSPI3_SS1           0x0f8 0x40c 0x000 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT4__GPIO4_IO25           0x0f8 0x40c 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT5__IPU1_DISP0_DATA05    0x0fc 0x410 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT5__LCD_DATA05           0x0fc 0x410 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT5__ECSPI3_SS2           0x0fc 0x410 0x000 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT5__AUD6_RXFS            0x0fc 0x410 0x000 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT5__GPIO4_IO26           0x0fc 0x410 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT6__IPU1_DISP0_DATA06    0x100 0x414 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT6__LCD_DATA06           0x100 0x414 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT6__ECSPI3_SS3           0x100 0x414 0x000 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT6__AUD6_RXC             0x100 0x414 0x000 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT6__GPIO4_IO27           0x100 0x414 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT7__IPU1_DISP0_DATA07    0x104 0x418 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT7__LCD_DATA07           0x104 0x418 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT7__ECSPI3_RDY           0x104 0x418 0x000 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT7__GPIO4_IO28           0x104 0x418 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT8__IPU1_DISP0_DATA08    0x108 0x41c 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT8__LCD_DATA08           0x108 0x41c 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT8__PWM1_OUT             0x108 0x41c 0x000 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT8__WDOG1_B              0x108 0x41c 0x000 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT8__GPIO4_IO29           0x108 0x41c 0x000 0x5 0x0
+#define MX6DL_PAD_DISP0_DAT9__IPU1_DISP0_DATA09    0x10c 0x420 0x000 0x0 0x0
+#define MX6DL_PAD_DISP0_DAT9__LCD_DATA09           0x10c 0x420 0x000 0x1 0x0
+#define MX6DL_PAD_DISP0_DAT9__PWM2_OUT             0x10c 0x420 0x000 0x2 0x0
+#define MX6DL_PAD_DISP0_DAT9__WDOG2_B              0x10c 0x420 0x000 0x3 0x0
+#define MX6DL_PAD_DISP0_DAT9__GPIO4_IO30           0x10c 0x420 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A16__EIM_ADDR16              0x110 0x4e0 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_A16__IPU1_DI1_DISP_CLK       0x110 0x4e0 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_A16__IPU1_CSI1_PIXCLK        0x110 0x4e0 0x8b8 0x2 0x0
+#define MX6DL_PAD_EIM_A16__GPIO2_IO22              0x110 0x4e0 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A16__SRC_BOOT_CFG16          0x110 0x4e0 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_A16__EPDC_DATA00             0x110 0x4e0 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_A17__EIM_ADDR17              0x114 0x4e4 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_A17__IPU1_DISP1_DATA12       0x114 0x4e4 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_A17__IPU1_CSI1_DATA12        0x114 0x4e4 0x890 0x2 0x0
+#define MX6DL_PAD_EIM_A17__GPIO2_IO21              0x114 0x4e4 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A17__SRC_BOOT_CFG17          0x114 0x4e4 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_A17__EPDC_PWR_STAT           0x114 0x4e4 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_A18__EIM_ADDR18              0x118 0x4e8 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_A18__IPU1_DISP1_DATA13       0x118 0x4e8 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_A18__IPU1_CSI1_DATA13        0x118 0x4e8 0x894 0x2 0x0
+#define MX6DL_PAD_EIM_A18__GPIO2_IO20              0x118 0x4e8 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A18__SRC_BOOT_CFG18          0x118 0x4e8 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_A18__EPDC_PWR_CTRL0          0x118 0x4e8 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_A19__EIM_ADDR19              0x11c 0x4ec 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_A19__IPU1_DISP1_DATA14       0x11c 0x4ec 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_A19__IPU1_CSI1_DATA14        0x11c 0x4ec 0x898 0x2 0x0
+#define MX6DL_PAD_EIM_A19__GPIO2_IO19              0x11c 0x4ec 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A19__SRC_BOOT_CFG19          0x11c 0x4ec 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_A19__EPDC_PWR_CTRL1          0x11c 0x4ec 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_A20__EIM_ADDR20              0x120 0x4f0 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_A20__IPU1_DISP1_DATA15       0x120 0x4f0 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_A20__IPU1_CSI1_DATA15        0x120 0x4f0 0x89c 0x2 0x0
+#define MX6DL_PAD_EIM_A20__GPIO2_IO18              0x120 0x4f0 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A20__SRC_BOOT_CFG20          0x120 0x4f0 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_A20__EPDC_PWR_CTRL2          0x120 0x4f0 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_A21__EIM_ADDR21              0x124 0x4f4 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_A21__IPU1_DISP1_DATA16       0x124 0x4f4 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_A21__IPU1_CSI1_DATA16        0x124 0x4f4 0x8a0 0x2 0x0
+#define MX6DL_PAD_EIM_A21__GPIO2_IO17              0x124 0x4f4 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A21__SRC_BOOT_CFG21          0x124 0x4f4 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_A21__EPDC_GDCLK              0x124 0x4f4 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_A22__EIM_ADDR22              0x128 0x4f8 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_A22__IPU1_DISP1_DATA17       0x128 0x4f8 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_A22__IPU1_CSI1_DATA17        0x128 0x4f8 0x8a4 0x2 0x0
+#define MX6DL_PAD_EIM_A22__GPIO2_IO16              0x128 0x4f8 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A22__SRC_BOOT_CFG22          0x128 0x4f8 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_A22__EPDC_GDSP               0x128 0x4f8 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_A23__EIM_ADDR23              0x12c 0x4fc 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_A23__IPU1_DISP1_DATA18       0x12c 0x4fc 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_A23__IPU1_CSI1_DATA18        0x12c 0x4fc 0x8a8 0x2 0x0
+#define MX6DL_PAD_EIM_A23__IPU1_SISG3              0x12c 0x4fc 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_A23__GPIO6_IO06              0x12c 0x4fc 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A23__SRC_BOOT_CFG23          0x12c 0x4fc 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_A23__EPDC_GDOE               0x12c 0x4fc 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_A24__EIM_ADDR24              0x130 0x500 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_A24__IPU1_DISP1_DATA19       0x130 0x500 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_A24__IPU1_CSI1_DATA19        0x130 0x500 0x8ac 0x2 0x0
+#define MX6DL_PAD_EIM_A24__IPU1_SISG2              0x130 0x500 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_A24__GPIO5_IO04              0x130 0x500 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A24__SRC_BOOT_CFG24          0x130 0x500 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_A24__EPDC_GDRL               0x130 0x500 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_A25__EIM_ADDR25              0x134 0x504 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_A25__ECSPI4_SS1              0x134 0x504 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_A25__ECSPI2_RDY              0x134 0x504 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_A25__IPU1_DI1_PIN12          0x134 0x504 0x000 0x3 0x0
+#define MX6DL_PAD_EIM_A25__IPU1_DI0_D1_CS          0x134 0x504 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_A25__GPIO5_IO02              0x134 0x504 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_A25__HDMI_TX_CEC_LINE        0x134 0x504 0x85c 0x6 0x0
+#define MX6DL_PAD_EIM_A25__EPDC_DATA15             0x134 0x504 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_A25__EIM_ACLK_FREERUN        0x134 0x504 0x000 0x9 0x0
+#define MX6DL_PAD_EIM_BCLK__EIM_BCLK               0x138 0x508 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_BCLK__IPU1_DI1_PIN16         0x138 0x508 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_BCLK__GPIO6_IO31             0x138 0x508 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_BCLK__EPDC_SDCE9             0x138 0x508 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_CS0__EIM_CS0_B               0x13c 0x50c 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_CS0__IPU1_DI1_PIN05          0x13c 0x50c 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_CS0__ECSPI2_SCLK             0x13c 0x50c 0x7f4 0x2 0x2
+#define MX6DL_PAD_EIM_CS0__GPIO2_IO23              0x13c 0x50c 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_CS0__EPDC_DATA06             0x13c 0x50c 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_CS1__EIM_CS1_B               0x140 0x510 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_CS1__IPU1_DI1_PIN06          0x140 0x510 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_CS1__ECSPI2_MOSI             0x140 0x510 0x7fc 0x2 0x2
+#define MX6DL_PAD_EIM_CS1__GPIO2_IO24              0x140 0x510 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_CS1__EPDC_DATA08             0x140 0x510 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D16__EIM_DATA16              0x144 0x514 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D16__ECSPI1_SCLK             0x144 0x514 0x7d8 0x1 0x2
+#define MX6DL_PAD_EIM_D16__IPU1_DI0_PIN05          0x144 0x514 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D16__IPU1_CSI1_DATA18        0x144 0x514 0x8a8 0x3 0x1
+#define MX6DL_PAD_EIM_D16__HDMI_TX_DDC_SDA         0x144 0x514 0x864 0x4 0x0
+#define MX6DL_PAD_EIM_D16__GPIO3_IO16              0x144 0x514 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D16__I2C2_SDA                0x144 0x514 0x874 0x6 0x0
+#define MX6DL_PAD_EIM_D16__EPDC_DATA10             0x144 0x514 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D17__EIM_DATA17              0x148 0x518 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D17__ECSPI1_MISO             0x148 0x518 0x7dc 0x1 0x2
+#define MX6DL_PAD_EIM_D17__IPU1_DI0_PIN06          0x148 0x518 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D17__IPU1_CSI1_PIXCLK        0x148 0x518 0x8b8 0x3 0x1
+#define MX6DL_PAD_EIM_D17__DCIC1_OUT               0x148 0x518 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D17__GPIO3_IO17              0x148 0x518 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D17__I2C3_SCL                0x148 0x518 0x878 0x6 0x0
+#define MX6DL_PAD_EIM_D17__EPDC_VCOM0              0x148 0x518 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D18__EIM_DATA18              0x14c 0x51c 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D18__ECSPI1_MOSI             0x14c 0x51c 0x7e0 0x1 0x2
+#define MX6DL_PAD_EIM_D18__IPU1_DI0_PIN07          0x14c 0x51c 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D18__IPU1_CSI1_DATA17        0x14c 0x51c 0x8a4 0x3 0x1
+#define MX6DL_PAD_EIM_D18__IPU1_DI1_D0_CS          0x14c 0x51c 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D18__GPIO3_IO18              0x14c 0x51c 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D18__I2C3_SDA                0x14c 0x51c 0x87c 0x6 0x0
+#define MX6DL_PAD_EIM_D18__EPDC_VCOM1              0x14c 0x51c 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D19__EIM_DATA19              0x150 0x520 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D19__ECSPI1_SS1              0x150 0x520 0x7e8 0x1 0x1
+#define MX6DL_PAD_EIM_D19__IPU1_DI0_PIN08          0x150 0x520 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D19__IPU1_CSI1_DATA16        0x150 0x520 0x8a0 0x3 0x1
+#define MX6DL_PAD_EIM_D19__UART1_CTS_B             0x150 0x520 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D19__UART1_RTS_B             0x150 0x520 0x8f8 0x4 0x0
+#define MX6DL_PAD_EIM_D19__GPIO3_IO19              0x150 0x520 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D19__EPIT1_OUT               0x150 0x520 0x000 0x6 0x0
+#define MX6DL_PAD_EIM_D19__EPDC_DATA12             0x150 0x520 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D20__EIM_DATA20              0x154 0x524 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D20__ECSPI4_SS0              0x154 0x524 0x808 0x1 0x0
+#define MX6DL_PAD_EIM_D20__IPU1_DI0_PIN16          0x154 0x524 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D20__IPU1_CSI1_DATA15        0x154 0x524 0x89c 0x3 0x1
+#define MX6DL_PAD_EIM_D20__UART1_RTS_B             0x154 0x524 0x8f8 0x4 0x1
+#define MX6DL_PAD_EIM_D20__UART1_CTS_B             0x154 0x524 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D20__GPIO3_IO20              0x154 0x524 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D20__EPIT2_OUT               0x154 0x524 0x000 0x6 0x0
+#define MX6DL_PAD_EIM_D21__EIM_DATA21              0x158 0x528 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D21__ECSPI4_SCLK             0x158 0x528 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_D21__IPU1_DI0_PIN17          0x158 0x528 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D21__IPU1_CSI1_DATA11        0x158 0x528 0x88c 0x3 0x0
+#define MX6DL_PAD_EIM_D21__USB_OTG_OC              0x158 0x528 0x920 0x4 0x0
+#define MX6DL_PAD_EIM_D21__GPIO3_IO21              0x158 0x528 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D21__I2C1_SCL                0x158 0x528 0x868 0x6 0x1
+#define MX6DL_PAD_EIM_D21__SPDIF_IN                0x158 0x528 0x8f0 0x7 0x0
+#define MX6DL_PAD_EIM_D22__EIM_DATA22              0x15c 0x52c 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D22__ECSPI4_MISO             0x15c 0x52c 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_D22__IPU1_DI0_PIN01          0x15c 0x52c 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D22__IPU1_CSI1_DATA10        0x15c 0x52c 0x888 0x3 0x0
+#define MX6DL_PAD_EIM_D22__USB_OTG_PWR             0x15c 0x52c 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D22__GPIO3_IO22              0x15c 0x52c 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D22__SPDIF_OUT               0x15c 0x52c 0x000 0x6 0x0
+#define MX6DL_PAD_EIM_D22__EPDC_SDCE6              0x15c 0x52c 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D23__EIM_DATA23              0x160 0x530 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D23__IPU1_DI0_D0_CS          0x160 0x530 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_D23__UART3_CTS_B             0x160 0x530 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D23__UART3_RTS_B             0x160 0x530 0x908 0x2 0x0
+#define MX6DL_PAD_EIM_D23__UART1_DCD_B             0x160 0x530 0x000 0x3 0x0
+#define MX6DL_PAD_EIM_D23__IPU1_CSI1_DATA_EN       0x160 0x530 0x8b0 0x4 0x0
+#define MX6DL_PAD_EIM_D23__GPIO3_IO23              0x160 0x530 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D23__IPU1_DI1_PIN02          0x160 0x530 0x000 0x6 0x0
+#define MX6DL_PAD_EIM_D23__IPU1_DI1_PIN14          0x160 0x530 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_D23__EPDC_DATA11             0x160 0x530 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D24__EIM_DATA24              0x164 0x534 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D24__ECSPI4_SS2              0x164 0x534 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_D24__UART3_TX_DATA           0x164 0x534 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D24__UART3_RX_DATA           0x164 0x534 0x90c 0x2 0x0
+#define MX6DL_PAD_EIM_D24__ECSPI1_SS2              0x164 0x534 0x7ec 0x3 0x0
+#define MX6DL_PAD_EIM_D24__ECSPI2_SS2              0x164 0x534 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D24__GPIO3_IO24              0x164 0x534 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D24__AUD5_RXFS               0x164 0x534 0x7bc 0x6 0x1
+#define MX6DL_PAD_EIM_D24__UART1_DTR_B             0x164 0x534 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_D24__EPDC_SDCE7              0x164 0x534 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D25__EIM_DATA25              0x168 0x538 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D25__ECSPI4_SS3              0x168 0x538 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_D25__UART3_RX_DATA           0x168 0x538 0x90c 0x2 0x1
+#define MX6DL_PAD_EIM_D25__UART3_TX_DATA           0x168 0x538 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D25__ECSPI1_SS3              0x168 0x538 0x7f0 0x3 0x0
+#define MX6DL_PAD_EIM_D25__ECSPI2_SS3              0x168 0x538 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D25__GPIO3_IO25              0x168 0x538 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D25__AUD5_RXC                0x168 0x538 0x7b8 0x6 0x1
+#define MX6DL_PAD_EIM_D25__UART1_DSR_B             0x168 0x538 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_D25__EPDC_SDCE8              0x168 0x538 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D26__EIM_DATA26              0x16c 0x53c 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D26__IPU1_DI1_PIN11          0x16c 0x53c 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_D26__IPU1_CSI0_DATA01        0x16c 0x53c 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D26__IPU1_CSI1_DATA14        0x16c 0x53c 0x898 0x3 0x1
+#define MX6DL_PAD_EIM_D26__UART2_TX_DATA           0x16c 0x53c 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D26__UART2_RX_DATA           0x16c 0x53c 0x904 0x4 0x0
+#define MX6DL_PAD_EIM_D26__GPIO3_IO26              0x16c 0x53c 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D26__IPU1_SISG2              0x16c 0x53c 0x000 0x6 0x0
+#define MX6DL_PAD_EIM_D26__IPU1_DISP1_DATA22       0x16c 0x53c 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_D26__EPDC_SDOED              0x16c 0x53c 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D27__EIM_DATA27              0x170 0x540 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D27__IPU1_DI1_PIN13          0x170 0x540 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_D27__IPU1_CSI0_DATA00        0x170 0x540 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D27__IPU1_CSI1_DATA13        0x170 0x540 0x894 0x3 0x1
+#define MX6DL_PAD_EIM_D27__UART2_RX_DATA           0x170 0x540 0x904 0x4 0x1
+#define MX6DL_PAD_EIM_D27__UART2_TX_DATA           0x170 0x540 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D27__GPIO3_IO27              0x170 0x540 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D27__IPU1_SISG3              0x170 0x540 0x000 0x6 0x0
+#define MX6DL_PAD_EIM_D27__IPU1_DISP1_DATA23       0x170 0x540 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_D27__EPDC_SDOE               0x170 0x540 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D28__EIM_DATA28              0x174 0x544 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D28__I2C1_SDA                0x174 0x544 0x86c 0x1 0x1
+#define MX6DL_PAD_EIM_D28__ECSPI4_MOSI             0x174 0x544 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D28__IPU1_CSI1_DATA12        0x174 0x544 0x890 0x3 0x1
+#define MX6DL_PAD_EIM_D28__UART2_CTS_B             0x174 0x544 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D28__UART2_RTS_B             0x174 0x544 0x900 0x4 0x0
+#define MX6DL_PAD_EIM_D28__GPIO3_IO28              0x174 0x544 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D28__IPU1_EXT_TRIG           0x174 0x544 0x000 0x6 0x0
+#define MX6DL_PAD_EIM_D28__IPU1_DI0_PIN13          0x174 0x544 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_D28__EPDC_PWR_CTRL3          0x174 0x544 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D29__EIM_DATA29              0x178 0x548 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D29__IPU1_DI1_PIN15          0x178 0x548 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_D29__ECSPI4_SS0              0x178 0x548 0x808 0x2 0x1
+#define MX6DL_PAD_EIM_D29__UART2_RTS_B             0x178 0x548 0x900 0x4 0x1
+#define MX6DL_PAD_EIM_D29__UART2_CTS_B             0x178 0x548 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D29__GPIO3_IO29              0x178 0x548 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D29__IPU1_CSI1_VSYNC         0x178 0x548 0x8bc 0x6 0x0
+#define MX6DL_PAD_EIM_D29__IPU1_DI0_PIN14          0x178 0x548 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_D29__EPDC_PWR_WAKE           0x178 0x548 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D30__EIM_DATA30              0x17c 0x54c 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D30__IPU1_DISP1_DATA21       0x17c 0x54c 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_D30__IPU1_DI0_PIN11          0x17c 0x54c 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D30__IPU1_CSI0_DATA03        0x17c 0x54c 0x000 0x3 0x0
+#define MX6DL_PAD_EIM_D30__UART3_CTS_B             0x17c 0x54c 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D30__UART3_RTS_B             0x17c 0x54c 0x908 0x4 0x1
+#define MX6DL_PAD_EIM_D30__GPIO3_IO30              0x17c 0x54c 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D30__USB_H1_OC               0x17c 0x54c 0x924 0x6 0x0
+#define MX6DL_PAD_EIM_D30__EPDC_SDOEZ              0x17c 0x54c 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D31__EIM_DATA31              0x180 0x550 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_D31__IPU1_DISP1_DATA20       0x180 0x550 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_D31__IPU1_DI0_PIN12          0x180 0x550 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_D31__IPU1_CSI0_DATA02        0x180 0x550 0x000 0x3 0x0
+#define MX6DL_PAD_EIM_D31__UART3_RTS_B             0x180 0x550 0x908 0x4 0x2
+#define MX6DL_PAD_EIM_D31__UART3_CTS_B             0x180 0x550 0x000 0x4 0x0
+#define MX6DL_PAD_EIM_D31__GPIO3_IO31              0x180 0x550 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_D31__USB_H1_PWR              0x180 0x550 0x000 0x6 0x0
+#define MX6DL_PAD_EIM_D31__EPDC_SDCLK_P            0x180 0x550 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_D31__EIM_ACLK_FREERUN        0x180 0x550 0x000 0x9 0x0
+#define MX6DL_PAD_EIM_DA0__EIM_AD00                0x184 0x554 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA0__IPU1_DISP1_DATA09       0x184 0x554 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA0__IPU1_CSI1_DATA09        0x184 0x554 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA0__GPIO3_IO00              0x184 0x554 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA0__SRC_BOOT_CFG00          0x184 0x554 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA0__EPDC_SDCLK_N            0x184 0x554 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA1__EIM_AD01                0x188 0x558 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA1__IPU1_DISP1_DATA08       0x188 0x558 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA1__IPU1_CSI1_DATA08        0x188 0x558 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA1__GPIO3_IO01              0x188 0x558 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA1__SRC_BOOT_CFG01          0x188 0x558 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA1__EPDC_SDLE               0x188 0x558 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA10__EIM_AD10               0x18c 0x55c 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA10__IPU1_DI1_PIN15         0x18c 0x55c 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA10__IPU1_CSI1_DATA_EN      0x18c 0x55c 0x8b0 0x2 0x1
+#define MX6DL_PAD_EIM_DA10__GPIO3_IO10             0x18c 0x55c 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA10__SRC_BOOT_CFG10         0x18c 0x55c 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA10__EPDC_DATA01            0x18c 0x55c 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA11__EIM_AD11               0x190 0x560 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA11__IPU1_DI1_PIN02         0x190 0x560 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA11__IPU1_CSI1_HSYNC        0x190 0x560 0x8b4 0x2 0x0
+#define MX6DL_PAD_EIM_DA11__GPIO3_IO11             0x190 0x560 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA11__SRC_BOOT_CFG11         0x190 0x560 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA11__EPDC_DATA03            0x190 0x560 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA12__EIM_AD12               0x194 0x564 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA12__IPU1_DI1_PIN03         0x194 0x564 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA12__IPU1_CSI1_VSYNC        0x194 0x564 0x8bc 0x2 0x1
+#define MX6DL_PAD_EIM_DA12__GPIO3_IO12             0x194 0x564 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA12__SRC_BOOT_CFG12         0x194 0x564 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA12__EPDC_DATA02            0x194 0x564 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA13__EIM_AD13               0x198 0x568 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA13__IPU1_DI1_D0_CS         0x198 0x568 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA13__GPIO3_IO13             0x198 0x568 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA13__SRC_BOOT_CFG13         0x198 0x568 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA13__EPDC_DATA13            0x198 0x568 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA14__EIM_AD14               0x19c 0x56c 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA14__IPU1_DI1_D1_CS         0x19c 0x56c 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA14__GPIO3_IO14             0x19c 0x56c 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA14__SRC_BOOT_CFG14         0x19c 0x56c 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA14__EPDC_DATA14            0x19c 0x56c 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA15__EIM_AD15               0x1a0 0x570 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA15__IPU1_DI1_PIN01         0x1a0 0x570 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA15__IPU1_DI1_PIN04         0x1a0 0x570 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA15__GPIO3_IO15             0x1a0 0x570 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA15__SRC_BOOT_CFG15         0x1a0 0x570 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA15__EPDC_DATA09            0x1a0 0x570 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA2__EIM_AD02                0x1a4 0x574 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA2__IPU1_DISP1_DATA07       0x1a4 0x574 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA2__IPU1_CSI1_DATA07        0x1a4 0x574 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA2__GPIO3_IO02              0x1a4 0x574 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA2__SRC_BOOT_CFG02          0x1a4 0x574 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA2__EPDC_BDR0               0x1a4 0x574 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA3__EIM_AD03                0x1a8 0x578 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA3__IPU1_DISP1_DATA06       0x1a8 0x578 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA3__IPU1_CSI1_DATA06        0x1a8 0x578 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA3__GPIO3_IO03              0x1a8 0x578 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA3__SRC_BOOT_CFG03          0x1a8 0x578 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA3__EPDC_BDR1               0x1a8 0x578 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA4__EIM_AD04                0x1ac 0x57c 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA4__IPU1_DISP1_DATA05       0x1ac 0x57c 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA4__IPU1_CSI1_DATA05        0x1ac 0x57c 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA4__GPIO3_IO04              0x1ac 0x57c 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA4__SRC_BOOT_CFG04          0x1ac 0x57c 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA4__EPDC_SDCE0              0x1ac 0x57c 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA5__EIM_AD05                0x1b0 0x580 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA5__IPU1_DISP1_DATA04       0x1b0 0x580 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA5__IPU1_CSI1_DATA04        0x1b0 0x580 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA5__GPIO3_IO05              0x1b0 0x580 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA5__SRC_BOOT_CFG05          0x1b0 0x580 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA5__EPDC_SDCE1              0x1b0 0x580 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA6__EIM_AD06                0x1b4 0x584 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA6__IPU1_DISP1_DATA03       0x1b4 0x584 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA6__IPU1_CSI1_DATA03        0x1b4 0x584 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA6__GPIO3_IO06              0x1b4 0x584 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA6__SRC_BOOT_CFG06          0x1b4 0x584 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA6__EPDC_SDCE2              0x1b4 0x584 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA7__EIM_AD07                0x1b8 0x588 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA7__IPU1_DISP1_DATA02       0x1b8 0x588 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA7__IPU1_CSI1_DATA02        0x1b8 0x588 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA7__GPIO3_IO07              0x1b8 0x588 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA7__SRC_BOOT_CFG07          0x1b8 0x588 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA7__EPDC_SDCE3              0x1b8 0x588 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA8__EIM_AD08                0x1bc 0x58c 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA8__IPU1_DISP1_DATA01       0x1bc 0x58c 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA8__IPU1_CSI1_DATA01        0x1bc 0x58c 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA8__GPIO3_IO08              0x1bc 0x58c 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA8__SRC_BOOT_CFG08          0x1bc 0x58c 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA8__EPDC_SDCE4              0x1bc 0x58c 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_DA9__EIM_AD09                0x1c0 0x590 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_DA9__IPU1_DISP1_DATA00       0x1c0 0x590 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_DA9__IPU1_CSI1_DATA00        0x1c0 0x590 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_DA9__GPIO3_IO09              0x1c0 0x590 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_DA9__SRC_BOOT_CFG09          0x1c0 0x590 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_DA9__EPDC_SDCE5              0x1c0 0x590 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_EB0__EIM_EB0_B               0x1c4 0x594 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_EB0__IPU1_DISP1_DATA11       0x1c4 0x594 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_EB0__IPU1_CSI1_DATA11        0x1c4 0x594 0x88c 0x2 0x1
+#define MX6DL_PAD_EIM_EB0__CCM_PMIC_READY          0x1c4 0x594 0x7d4 0x4 0x0
+#define MX6DL_PAD_EIM_EB0__GPIO2_IO28              0x1c4 0x594 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_EB0__SRC_BOOT_CFG27          0x1c4 0x594 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_EB0__EPDC_PWR_COM            0x1c4 0x594 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_EB1__EIM_EB1_B               0x1c8 0x598 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_EB1__IPU1_DISP1_DATA10       0x1c8 0x598 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_EB1__IPU1_CSI1_DATA10        0x1c8 0x598 0x888 0x2 0x1
+#define MX6DL_PAD_EIM_EB1__GPIO2_IO29              0x1c8 0x598 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_EB1__SRC_BOOT_CFG28          0x1c8 0x598 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_EB1__EPDC_SDSHR              0x1c8 0x598 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_EB2__EIM_EB2_B               0x1cc 0x59c 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_EB2__ECSPI1_SS0              0x1cc 0x59c 0x7e4 0x1 0x2
+#define MX6DL_PAD_EIM_EB2__IPU1_CSI1_DATA19        0x1cc 0x59c 0x8ac 0x3 0x1
+#define MX6DL_PAD_EIM_EB2__HDMI_TX_DDC_SCL         0x1cc 0x59c 0x860 0x4 0x0
+#define MX6DL_PAD_EIM_EB2__GPIO2_IO30              0x1cc 0x59c 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_EB2__I2C2_SCL                0x1cc 0x59c 0x870 0x6 0x0
+#define MX6DL_PAD_EIM_EB2__SRC_BOOT_CFG30          0x1cc 0x59c 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_EB2__EPDC_DATA05             0x1cc 0x59c 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_EB3__EIM_EB3_B               0x1d0 0x5a0 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_EB3__ECSPI4_RDY              0x1d0 0x5a0 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_EB3__UART3_RTS_B             0x1d0 0x5a0 0x908 0x2 0x3
+#define MX6DL_PAD_EIM_EB3__UART3_CTS_B             0x1d0 0x5a0 0x000 0x2 0x0
+#define MX6DL_PAD_EIM_EB3__UART1_RI_B              0x1d0 0x5a0 0x000 0x3 0x0
+#define MX6DL_PAD_EIM_EB3__IPU1_CSI1_HSYNC         0x1d0 0x5a0 0x8b4 0x4 0x1
+#define MX6DL_PAD_EIM_EB3__GPIO2_IO31              0x1d0 0x5a0 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_EB3__IPU1_DI1_PIN03          0x1d0 0x5a0 0x000 0x6 0x0
+#define MX6DL_PAD_EIM_EB3__SRC_BOOT_CFG31          0x1d0 0x5a0 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_EB3__EPDC_SDCE0              0x1d0 0x5a0 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_EB3__EIM_ACLK_FREERUN        0x1d0 0x5a0 0x000 0x9 0x0
+#define MX6DL_PAD_EIM_LBA__EIM_LBA_B               0x1d4 0x5a4 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_LBA__IPU1_DI1_PIN17          0x1d4 0x5a4 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_LBA__ECSPI2_SS1              0x1d4 0x5a4 0x804 0x2 0x1
+#define MX6DL_PAD_EIM_LBA__GPIO2_IO27              0x1d4 0x5a4 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_LBA__SRC_BOOT_CFG26          0x1d4 0x5a4 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_LBA__EPDC_DATA04             0x1d4 0x5a4 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_OE__EIM_OE_B                 0x1d8 0x5a8 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_OE__IPU1_DI1_PIN07           0x1d8 0x5a8 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_OE__ECSPI2_MISO              0x1d8 0x5a8 0x7f8 0x2 0x2
+#define MX6DL_PAD_EIM_OE__GPIO2_IO25               0x1d8 0x5a8 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_OE__EPDC_PWR_IRQ             0x1d8 0x5a8 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_RW__EIM_RW                   0x1dc 0x5ac 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_RW__IPU1_DI1_PIN08           0x1dc 0x5ac 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_RW__ECSPI2_SS0               0x1dc 0x5ac 0x800 0x2 0x2
+#define MX6DL_PAD_EIM_RW__GPIO2_IO26               0x1dc 0x5ac 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_RW__SRC_BOOT_CFG29           0x1dc 0x5ac 0x000 0x7 0x0
+#define MX6DL_PAD_EIM_RW__EPDC_DATA07              0x1dc 0x5ac 0x000 0x8 0x0
+#define MX6DL_PAD_EIM_WAIT__EIM_WAIT_B             0x1e0 0x5b0 0x000 0x0 0x0
+#define MX6DL_PAD_EIM_WAIT__EIM_DTACK_B            0x1e0 0x5b0 0x000 0x1 0x0
+#define MX6DL_PAD_EIM_WAIT__GPIO5_IO00             0x1e0 0x5b0 0x000 0x5 0x0
+#define MX6DL_PAD_EIM_WAIT__SRC_BOOT_CFG25         0x1e0 0x5b0 0x000 0x7 0x0
+#define MX6DL_PAD_ENET_CRS_DV__ENET_RX_EN          0x1e4 0x5b4 0x828 0x1 0x0
+#define MX6DL_PAD_ENET_CRS_DV__ESAI_TX_CLK         0x1e4 0x5b4 0x840 0x2 0x0
+#define MX6DL_PAD_ENET_CRS_DV__SPDIF_EXT_CLK       0x1e4 0x5b4 0x8f4 0x3 0x0
+#define MX6DL_PAD_ENET_CRS_DV__GPIO1_IO25          0x1e4 0x5b4 0x000 0x5 0x0
+#define MX6DL_PAD_ENET_MDC__MLB_DATA               0x1e8 0x5b8 0x8e0 0x0 0x0
+#define MX6DL_PAD_ENET_MDC__ENET_MDC               0x1e8 0x5b8 0x000 0x1 0x0
+#define MX6DL_PAD_ENET_MDC__ESAI_TX5_RX0           0x1e8 0x5b8 0x858 0x2 0x0
+#define MX6DL_PAD_ENET_MDC__ENET_1588_EVENT1_IN    0x1e8 0x5b8 0x000 0x4 0x0
+#define MX6DL_PAD_ENET_MDC__GPIO1_IO31             0x1e8 0x5b8 0x000 0x5 0x0
+#define MX6DL_PAD_ENET_MDIO__ENET_MDIO             0x1ec 0x5bc 0x810 0x1 0x0
+#define MX6DL_PAD_ENET_MDIO__ESAI_RX_CLK           0x1ec 0x5bc 0x83c 0x2 0x0
+#define MX6DL_PAD_ENET_MDIO__ENET_1588_EVENT1_OUT  0x1ec 0x5bc 0x000 0x4 0x0
+#define MX6DL_PAD_ENET_MDIO__GPIO1_IO22            0x1ec 0x5bc 0x000 0x5 0x0
+#define MX6DL_PAD_ENET_MDIO__SPDIF_LOCK            0x1ec 0x5bc 0x000 0x6 0x0
+#define MX6DL_PAD_ENET_REF_CLK__ENET_TX_CLK        0x1f0 0x5c0 0x000 0x1 0x0
+#define MX6DL_PAD_ENET_REF_CLK__ESAI_RX_FS         0x1f0 0x5c0 0x82c 0x2 0x0
+#define MX6DL_PAD_ENET_REF_CLK__GPIO1_IO23         0x1f0 0x5c0 0x000 0x5 0x0
+#define MX6DL_PAD_ENET_REF_CLK__SPDIF_SR_CLK       0x1f0 0x5c0 0x000 0x6 0x0
+#define MX6DL_PAD_ENET_RX_ER__USB_OTG_ID           0x1f4 0x5c4 0x790 0x0 0x0
+#define MX6DL_PAD_ENET_RX_ER__ENET_RX_ER           0x1f4 0x5c4 0x000 0x1 0x0
+#define MX6DL_PAD_ENET_RX_ER__ESAI_RX_HF_CLK       0x1f4 0x5c4 0x834 0x2 0x0
+#define MX6DL_PAD_ENET_RX_ER__SPDIF_IN             0x1f4 0x5c4 0x8f0 0x3 0x1
+#define MX6DL_PAD_ENET_RX_ER__ENET_1588_EVENT2_OUT 0x1f4 0x5c4 0x000 0x4 0x0
+#define MX6DL_PAD_ENET_RX_ER__GPIO1_IO24           0x1f4 0x5c4 0x000 0x5 0x0
+#define MX6DL_PAD_ENET_RXD0__ENET_RX_DATA0         0x1f8 0x5c8 0x818 0x1 0x0
+#define MX6DL_PAD_ENET_RXD0__ESAI_TX_HF_CLK        0x1f8 0x5c8 0x838 0x2 0x0
+#define MX6DL_PAD_ENET_RXD0__SPDIF_OUT             0x1f8 0x5c8 0x000 0x3 0x0
+#define MX6DL_PAD_ENET_RXD0__GPIO1_IO27            0x1f8 0x5c8 0x000 0x5 0x0
+#define MX6DL_PAD_ENET_RXD1__MLB_SIG               0x1fc 0x5cc 0x8e4 0x0 0x0
+#define MX6DL_PAD_ENET_RXD1__ENET_RX_DATA1         0x1fc 0x5cc 0x81c 0x1 0x0
+#define MX6DL_PAD_ENET_RXD1__ESAI_TX_FS            0x1fc 0x5cc 0x830 0x2 0x0
+#define MX6DL_PAD_ENET_RXD1__ENET_1588_EVENT3_OUT  0x1fc 0x5cc 0x000 0x4 0x0
+#define MX6DL_PAD_ENET_RXD1__GPIO1_IO26            0x1fc 0x5cc 0x000 0x5 0x0
+#define MX6DL_PAD_ENET_TX_EN__ENET_TX_EN           0x200 0x5d0 0x000 0x1 0x0
+#define MX6DL_PAD_ENET_TX_EN__ESAI_TX3_RX2         0x200 0x5d0 0x850 0x2 0x0
+#define MX6DL_PAD_ENET_TX_EN__GPIO1_IO28           0x200 0x5d0 0x000 0x5 0x0
+#define MX6DL_PAD_ENET_TX_EN__I2C4_SCL             0x200 0x5d0 0x880 0x9 0x0
+#define MX6DL_PAD_ENET_TXD0__ENET_TX_DATA0         0x204 0x5d4 0x000 0x1 0x0
+#define MX6DL_PAD_ENET_TXD0__ESAI_TX4_RX1          0x204 0x5d4 0x854 0x2 0x0
+#define MX6DL_PAD_ENET_TXD0__GPIO1_IO30            0x204 0x5d4 0x000 0x5 0x0
+#define MX6DL_PAD_ENET_TXD1__MLB_CLK               0x208 0x5d8 0x8dc 0x0 0x0
+#define MX6DL_PAD_ENET_TXD1__ENET_TX_DATA1         0x208 0x5d8 0x000 0x1 0x0
+#define MX6DL_PAD_ENET_TXD1__ESAI_TX2_RX3          0x208 0x5d8 0x84c 0x2 0x0
+#define MX6DL_PAD_ENET_TXD1__ENET_1588_EVENT0_IN   0x208 0x5d8 0x000 0x4 0x0
+#define MX6DL_PAD_ENET_TXD1__GPIO1_IO29            0x208 0x5d8 0x000 0x5 0x0
+#define MX6DL_PAD_ENET_TXD1__I2C4_SDA              0x208 0x5d8 0x884 0x9 0x0
+#define MX6DL_PAD_GPIO_0__CCM_CLKO1                0x20c 0x5dc 0x000 0x0 0x0
+#define MX6DL_PAD_GPIO_0__KEY_COL5                 0x20c 0x5dc 0x8c0 0x2 0x1
+#define MX6DL_PAD_GPIO_0__ASRC_EXT_CLK             0x20c 0x5dc 0x794 0x3 0x0
+#define MX6DL_PAD_GPIO_0__EPIT1_OUT                0x20c 0x5dc 0x000 0x4 0x0
+#define MX6DL_PAD_GPIO_0__GPIO1_IO00               0x20c 0x5dc 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_0__USB_H1_PWR               0x20c 0x5dc 0x000 0x6 0x0
+#define MX6DL_PAD_GPIO_0__SNVS_VIO_5               0x20c 0x5dc 0x000 0x7 0x0
+#define MX6DL_PAD_GPIO_1__ESAI_RX_CLK              0x210 0x5e0 0x83c 0x0 0x1
+#define MX6DL_PAD_GPIO_1__WDOG2_B                  0x210 0x5e0 0x000 0x1 0x0
+#define MX6DL_PAD_GPIO_1__KEY_ROW5                 0x210 0x5e0 0x8cc 0x2 0x1
+#define MX6DL_PAD_GPIO_1__USB_OTG_ID               0x210 0x5e0 0x790 0x3 0x1
+#define MX6DL_PAD_GPIO_1__PWM2_OUT                 0x210 0x5e0 0x000 0x4 0x0
+#define MX6DL_PAD_GPIO_1__GPIO1_IO01               0x210 0x5e0 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_1__SD1_CD_B                 0x210 0x5e0 0x000 0x6 0x0
+#define MX6DL_PAD_GPIO_16__ESAI_TX3_RX2            0x214 0x5e4 0x850 0x0 0x1
+#define MX6DL_PAD_GPIO_16__ENET_1588_EVENT2_IN     0x214 0x5e4 0x000 0x1 0x0
+#define MX6DL_PAD_GPIO_16__ENET_REF_CLK            0x214 0x5e4 0x80c 0x2 0x0
+#define MX6DL_PAD_GPIO_16__SD1_LCTL                0x214 0x5e4 0x000 0x3 0x0
+#define MX6DL_PAD_GPIO_16__SPDIF_IN                0x214 0x5e4 0x8f0 0x4 0x2
+#define MX6DL_PAD_GPIO_16__GPIO7_IO11              0x214 0x5e4 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_16__I2C3_SDA                0x214 0x5e4 0x87c 0x6 0x1
+#define MX6DL_PAD_GPIO_16__JTAG_DE_B               0x214 0x5e4 0x000 0x7 0x0
+#define MX6DL_PAD_GPIO_17__ESAI_TX0                0x218 0x5e8 0x844 0x0 0x0
+#define MX6DL_PAD_GPIO_17__ENET_1588_EVENT3_IN     0x218 0x5e8 0x000 0x1 0x0
+#define MX6DL_PAD_GPIO_17__CCM_PMIC_READY          0x218 0x5e8 0x7d4 0x2 0x1
+#define MX6DL_PAD_GPIO_17__SDMA_EXT_EVENT0         0x218 0x5e8 0x8e8 0x3 0x1
+#define MX6DL_PAD_GPIO_17__SPDIF_OUT               0x218 0x5e8 0x000 0x4 0x0
+#define MX6DL_PAD_GPIO_17__GPIO7_IO12              0x218 0x5e8 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_18__ESAI_TX1                0x21c 0x5ec 0x848 0x0 0x0
+#define MX6DL_PAD_GPIO_18__ENET_RX_CLK             0x21c 0x5ec 0x814 0x1 0x0
+#define MX6DL_PAD_GPIO_18__SD3_VSELECT             0x21c 0x5ec 0x000 0x2 0x0
+#define MX6DL_PAD_GPIO_18__SDMA_EXT_EVENT1         0x21c 0x5ec 0x8ec 0x3 0x1
+#define MX6DL_PAD_GPIO_18__ASRC_EXT_CLK            0x21c 0x5ec 0x794 0x4 0x1
+#define MX6DL_PAD_GPIO_18__GPIO7_IO13              0x21c 0x5ec 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_18__SNVS_VIO_5_CTL          0x21c 0x5ec 0x000 0x6 0x0
+#define MX6DL_PAD_GPIO_19__KEY_COL5                0x220 0x5f0 0x8c0 0x0 0x2
+#define MX6DL_PAD_GPIO_19__ENET_1588_EVENT0_OUT    0x220 0x5f0 0x000 0x1 0x0
+#define MX6DL_PAD_GPIO_19__SPDIF_OUT               0x220 0x5f0 0x000 0x2 0x0
+#define MX6DL_PAD_GPIO_19__CCM_CLKO1               0x220 0x5f0 0x000 0x3 0x0
+#define MX6DL_PAD_GPIO_19__ECSPI1_RDY              0x220 0x5f0 0x000 0x4 0x0
+#define MX6DL_PAD_GPIO_19__GPIO4_IO05              0x220 0x5f0 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_19__ENET_TX_ER              0x220 0x5f0 0x000 0x6 0x0
+#define MX6DL_PAD_GPIO_2__ESAI_TX_FS               0x224 0x5f4 0x830 0x0 0x1
+#define MX6DL_PAD_GPIO_2__KEY_ROW6                 0x224 0x5f4 0x8d0 0x2 0x1
+#define MX6DL_PAD_GPIO_2__GPIO1_IO02               0x224 0x5f4 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_2__SD2_WP                   0x224 0x5f4 0x000 0x6 0x0
+#define MX6DL_PAD_GPIO_2__MLB_DATA                 0x224 0x5f4 0x8e0 0x7 0x1
+#define MX6DL_PAD_GPIO_3__ESAI_RX_HF_CLK           0x228 0x5f8 0x834 0x0 0x1
+#define MX6DL_PAD_GPIO_3__I2C3_SCL                 0x228 0x5f8 0x878 0x2 0x1
+#define MX6DL_PAD_GPIO_3__XTALOSC_REF_CLK_24M      0x228 0x5f8 0x000 0x3 0x0
+#define MX6DL_PAD_GPIO_3__CCM_CLKO2                0x228 0x5f8 0x000 0x4 0x0
+#define MX6DL_PAD_GPIO_3__GPIO1_IO03               0x228 0x5f8 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_3__USB_H1_OC                0x228 0x5f8 0x924 0x6 0x1
+#define MX6DL_PAD_GPIO_3__MLB_CLK                  0x228 0x5f8 0x8dc 0x7 0x1
+#define MX6DL_PAD_GPIO_4__ESAI_TX_HF_CLK           0x22c 0x5fc 0x838 0x0 0x1
+#define MX6DL_PAD_GPIO_4__KEY_COL7                 0x22c 0x5fc 0x8c8 0x2 0x1
+#define MX6DL_PAD_GPIO_4__GPIO1_IO04               0x22c 0x5fc 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_4__SD2_CD_B                 0x22c 0x5fc 0x000 0x6 0x0
+#define MX6DL_PAD_GPIO_5__ESAI_TX2_RX3             0x230 0x600 0x84c 0x0 0x1
+#define MX6DL_PAD_GPIO_5__KEY_ROW7                 0x230 0x600 0x8d4 0x2 0x1
+#define MX6DL_PAD_GPIO_5__CCM_CLKO1                0x230 0x600 0x000 0x3 0x0
+#define MX6DL_PAD_GPIO_5__GPIO1_IO05               0x230 0x600 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_5__I2C3_SCL                 0x230 0x600 0x878 0x6 0x2
+#define MX6DL_PAD_GPIO_5__ARM_EVENTI               0x230 0x600 0x000 0x7 0x0
+#define MX6DL_PAD_GPIO_6__ESAI_TX_CLK              0x234 0x604 0x840 0x0 0x1
+#define MX6DL_PAD_GPIO_6__I2C3_SDA                 0x234 0x604 0x87c 0x2 0x2
+#define MX6DL_PAD_GPIO_6__GPIO1_IO06               0x234 0x604 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_6__SD2_LCTL                 0x234 0x604 0x000 0x6 0x0
+#define MX6DL_PAD_GPIO_6__MLB_SIG                  0x234 0x604 0x8e4 0x7 0x1
+#define MX6DL_PAD_GPIO_7__ESAI_TX4_RX1             0x238 0x608 0x854 0x0 0x1
+#define MX6DL_PAD_GPIO_7__EPIT1_OUT                0x238 0x608 0x000 0x2 0x0
+#define MX6DL_PAD_GPIO_7__FLEXCAN1_TX              0x238 0x608 0x000 0x3 0x0
+#define MX6DL_PAD_GPIO_7__UART2_TX_DATA            0x238 0x608 0x000 0x4 0x0
+#define MX6DL_PAD_GPIO_7__UART2_RX_DATA            0x238 0x608 0x904 0x4 0x2
+#define MX6DL_PAD_GPIO_7__GPIO1_IO07               0x238 0x608 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_7__SPDIF_LOCK               0x238 0x608 0x000 0x6 0x0
+#define MX6DL_PAD_GPIO_7__USB_OTG_HOST_MODE        0x238 0x608 0x000 0x7 0x0
+#define MX6DL_PAD_GPIO_7__I2C4_SCL                 0x238 0x608 0x880 0x8 0x1
+#define MX6DL_PAD_GPIO_8__ESAI_TX5_RX0             0x23c 0x60c 0x858 0x0 0x1
+#define MX6DL_PAD_GPIO_8__XTALOSC_REF_CLK_32K      0x23c 0x60c 0x000 0x1 0x0
+#define MX6DL_PAD_GPIO_8__EPIT2_OUT                0x23c 0x60c 0x000 0x2 0x0
+#define MX6DL_PAD_GPIO_8__FLEXCAN1_RX              0x23c 0x60c 0x7c8 0x3 0x0
+#define MX6DL_PAD_GPIO_8__UART2_RX_DATA            0x23c 0x60c 0x904 0x4 0x3
+#define MX6DL_PAD_GPIO_8__UART2_TX_DATA            0x23c 0x60c 0x000 0x4 0x0
+#define MX6DL_PAD_GPIO_8__GPIO1_IO08               0x23c 0x60c 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_8__SPDIF_SR_CLK             0x23c 0x60c 0x000 0x6 0x0
+#define MX6DL_PAD_GPIO_8__USB_OTG_PWR_CTL_WAKE     0x23c 0x60c 0x000 0x7 0x0
+#define MX6DL_PAD_GPIO_8__I2C4_SDA                 0x23c 0x60c 0x884 0x8 0x1
+#define MX6DL_PAD_GPIO_9__ESAI_RX_FS               0x240 0x610 0x82c 0x0 0x1
+#define MX6DL_PAD_GPIO_9__WDOG1_B                  0x240 0x610 0x000 0x1 0x0
+#define MX6DL_PAD_GPIO_9__KEY_COL6                 0x240 0x610 0x8c4 0x2 0x1
+#define MX6DL_PAD_GPIO_9__CCM_REF_EN_B             0x240 0x610 0x000 0x3 0x0
+#define MX6DL_PAD_GPIO_9__PWM1_OUT                 0x240 0x610 0x000 0x4 0x0
+#define MX6DL_PAD_GPIO_9__GPIO1_IO09               0x240 0x610 0x000 0x5 0x0
+#define MX6DL_PAD_GPIO_9__SD1_WP                   0x240 0x610 0x92c 0x6 0x1
+#define MX6DL_PAD_KEY_COL0__ECSPI1_SCLK            0x244 0x62c 0x7d8 0x0 0x3
+#define MX6DL_PAD_KEY_COL0__ENET_RX_DATA3          0x244 0x62c 0x824 0x1 0x0
+#define MX6DL_PAD_KEY_COL0__AUD5_TXC               0x244 0x62c 0x7c0 0x2 0x1
+#define MX6DL_PAD_KEY_COL0__KEY_COL0               0x244 0x62c 0x000 0x3 0x0
+#define MX6DL_PAD_KEY_COL0__UART4_TX_DATA          0x244 0x62c 0x000 0x4 0x0
+#define MX6DL_PAD_KEY_COL0__UART4_RX_DATA          0x244 0x62c 0x914 0x4 0x2
+#define MX6DL_PAD_KEY_COL0__GPIO4_IO06             0x244 0x62c 0x000 0x5 0x0
+#define MX6DL_PAD_KEY_COL0__DCIC1_OUT              0x244 0x62c 0x000 0x6 0x0
+#define MX6DL_PAD_KEY_COL1__ECSPI1_MISO            0x248 0x630 0x7dc 0x0 0x3
+#define MX6DL_PAD_KEY_COL1__ENET_MDIO              0x248 0x630 0x810 0x1 0x1
+#define MX6DL_PAD_KEY_COL1__AUD5_TXFS              0x248 0x630 0x7c4 0x2 0x1
+#define MX6DL_PAD_KEY_COL1__KEY_COL1               0x248 0x630 0x000 0x3 0x0
+#define MX6DL_PAD_KEY_COL1__UART5_TX_DATA          0x248 0x630 0x000 0x4 0x0
+#define MX6DL_PAD_KEY_COL1__UART5_RX_DATA          0x248 0x630 0x91c 0x4 0x2
+#define MX6DL_PAD_KEY_COL1__GPIO4_IO08             0x248 0x630 0x000 0x5 0x0
+#define MX6DL_PAD_KEY_COL1__SD1_VSELECT            0x248 0x630 0x000 0x6 0x0
+#define MX6DL_PAD_KEY_COL2__ECSPI1_SS1             0x24c 0x634 0x7e8 0x0 0x2
+#define MX6DL_PAD_KEY_COL2__ENET_RX_DATA2          0x24c 0x634 0x820 0x1 0x0
+#define MX6DL_PAD_KEY_COL2__FLEXCAN1_TX            0x24c 0x634 0x000 0x2 0x0
+#define MX6DL_PAD_KEY_COL2__KEY_COL2               0x24c 0x634 0x000 0x3 0x0
+#define MX6DL_PAD_KEY_COL2__ENET_MDC               0x24c 0x634 0x000 0x4 0x0
+#define MX6DL_PAD_KEY_COL2__GPIO4_IO10             0x24c 0x634 0x000 0x5 0x0
+#define MX6DL_PAD_KEY_COL2__USB_H1_PWR_CTL_WAKE    0x24c 0x634 0x000 0x6 0x0
+#define MX6DL_PAD_KEY_COL3__ECSPI1_SS3             0x250 0x638 0x7f0 0x0 0x1
+#define MX6DL_PAD_KEY_COL3__ENET_CRS               0x250 0x638 0x000 0x1 0x0
+#define MX6DL_PAD_KEY_COL3__HDMI_TX_DDC_SCL        0x250 0x638 0x860 0x2 0x1
+#define MX6DL_PAD_KEY_COL3__KEY_COL3               0x250 0x638 0x000 0x3 0x0
+#define MX6DL_PAD_KEY_COL3__I2C2_SCL               0x250 0x638 0x870 0x4 0x1
+#define MX6DL_PAD_KEY_COL3__GPIO4_IO12             0x250 0x638 0x000 0x5 0x0
+#define MX6DL_PAD_KEY_COL3__SPDIF_IN               0x250 0x638 0x8f0 0x6 0x3
+#define MX6DL_PAD_KEY_COL4__FLEXCAN2_TX            0x254 0x63c 0x000 0x0 0x0
+#define MX6DL_PAD_KEY_COL4__IPU1_SISG4             0x254 0x63c 0x000 0x1 0x0
+#define MX6DL_PAD_KEY_COL4__USB_OTG_OC             0x254 0x63c 0x920 0x2 0x1
+#define MX6DL_PAD_KEY_COL4__KEY_COL4               0x254 0x63c 0x000 0x3 0x0
+#define MX6DL_PAD_KEY_COL4__UART5_RTS_B            0x254 0x63c 0x918 0x4 0x2
+#define MX6DL_PAD_KEY_COL4__UART5_CTS_B            0x254 0x63c 0x000 0x4 0x0
+#define MX6DL_PAD_KEY_COL4__GPIO4_IO14             0x254 0x63c 0x000 0x5 0x0
+#define MX6DL_PAD_KEY_ROW0__ECSPI1_MOSI            0x258 0x640 0x7e0 0x0 0x3
+#define MX6DL_PAD_KEY_ROW0__ENET_TX_DATA3          0x258 0x640 0x000 0x1 0x0
+#define MX6DL_PAD_KEY_ROW0__AUD5_TXD               0x258 0x640 0x7b4 0x2 0x1
+#define MX6DL_PAD_KEY_ROW0__KEY_ROW0               0x258 0x640 0x000 0x3 0x0
+#define MX6DL_PAD_KEY_ROW0__UART4_RX_DATA          0x258 0x640 0x914 0x4 0x3
+#define MX6DL_PAD_KEY_ROW0__UART4_TX_DATA          0x258 0x640 0x000 0x4 0x0
+#define MX6DL_PAD_KEY_ROW0__GPIO4_IO07             0x258 0x640 0x000 0x5 0x0
+#define MX6DL_PAD_KEY_ROW0__DCIC2_OUT              0x258 0x640 0x000 0x6 0x0
+#define MX6DL_PAD_KEY_ROW1__ECSPI1_SS0             0x25c 0x644 0x7e4 0x0 0x3
+#define MX6DL_PAD_KEY_ROW1__ENET_COL               0x25c 0x644 0x000 0x1 0x0
+#define MX6DL_PAD_KEY_ROW1__AUD5_RXD               0x25c 0x644 0x7b0 0x2 0x1
+#define MX6DL_PAD_KEY_ROW1__KEY_ROW1               0x25c 0x644 0x000 0x3 0x0
+#define MX6DL_PAD_KEY_ROW1__UART5_RX_DATA          0x25c 0x644 0x91c 0x4 0x3
+#define MX6DL_PAD_KEY_ROW1__UART5_TX_DATA          0x25c 0x644 0x000 0x4 0x0
+#define MX6DL_PAD_KEY_ROW1__GPIO4_IO09             0x25c 0x644 0x000 0x5 0x0
+#define MX6DL_PAD_KEY_ROW1__SD2_VSELECT            0x25c 0x644 0x000 0x6 0x0
+#define MX6DL_PAD_KEY_ROW2__ECSPI1_SS2             0x260 0x648 0x7ec 0x0 0x1
+#define MX6DL_PAD_KEY_ROW2__ENET_TX_DATA2          0x260 0x648 0x000 0x1 0x0
+#define MX6DL_PAD_KEY_ROW2__FLEXCAN1_RX            0x260 0x648 0x7c8 0x2 0x1
+#define MX6DL_PAD_KEY_ROW2__KEY_ROW2               0x260 0x648 0x000 0x3 0x0
+#define MX6DL_PAD_KEY_ROW2__SD2_VSELECT            0x260 0x648 0x000 0x4 0x0
+#define MX6DL_PAD_KEY_ROW2__GPIO4_IO11             0x260 0x648 0x000 0x5 0x0
+#define MX6DL_PAD_KEY_ROW2__HDMI_TX_CEC_LINE       0x260 0x648 0x85c 0x6 0x1
+#define MX6DL_PAD_KEY_ROW3__ASRC_EXT_CLK           0x264 0x64c 0x794 0x1 0x2
+#define MX6DL_PAD_KEY_ROW3__HDMI_TX_DDC_SDA        0x264 0x64c 0x864 0x2 0x1
+#define MX6DL_PAD_KEY_ROW3__KEY_ROW3               0x264 0x64c 0x000 0x3 0x0
+#define MX6DL_PAD_KEY_ROW3__I2C2_SDA               0x264 0x64c 0x874 0x4 0x1
+#define MX6DL_PAD_KEY_ROW3__GPIO4_IO13             0x264 0x64c 0x000 0x5 0x0
+#define MX6DL_PAD_KEY_ROW3__SD1_VSELECT            0x264 0x64c 0x000 0x6 0x0
+#define MX6DL_PAD_KEY_ROW4__FLEXCAN2_RX            0x268 0x650 0x7cc 0x0 0x0
+#define MX6DL_PAD_KEY_ROW4__IPU1_SISG5             0x268 0x650 0x000 0x1 0x0
+#define MX6DL_PAD_KEY_ROW4__USB_OTG_PWR            0x268 0x650 0x000 0x2 0x0
+#define MX6DL_PAD_KEY_ROW4__KEY_ROW4               0x268 0x650 0x000 0x3 0x0
+#define MX6DL_PAD_KEY_ROW4__UART5_CTS_B            0x268 0x650 0x000 0x4 0x0
+#define MX6DL_PAD_KEY_ROW4__UART5_RTS_B            0x268 0x650 0x918 0x4 0x3
+#define MX6DL_PAD_KEY_ROW4__GPIO4_IO15             0x268 0x650 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_ALE__NAND_ALE              0x26c 0x654 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_ALE__SD4_RESET             0x26c 0x654 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_ALE__GPIO6_IO08            0x26c 0x654 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_CLE__NAND_CLE              0x270 0x658 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_CLE__GPIO6_IO07            0x270 0x658 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_CS0__NAND_CE0_B            0x274 0x65c 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_CS0__GPIO6_IO11            0x274 0x65c 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_CS1__NAND_CE1_B            0x278 0x660 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_CS1__SD4_VSELECT           0x278 0x660 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_CS1__SD3_VSELECT           0x278 0x660 0x000 0x2 0x0
+#define MX6DL_PAD_NANDF_CS1__GPIO6_IO14            0x278 0x660 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_CS2__NAND_CE2_B            0x27c 0x664 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_CS2__IPU1_SISG0            0x27c 0x664 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_CS2__ESAI_TX0              0x27c 0x664 0x844 0x2 0x1
+#define MX6DL_PAD_NANDF_CS2__EIM_CRE               0x27c 0x664 0x000 0x3 0x0
+#define MX6DL_PAD_NANDF_CS2__CCM_CLKO2             0x27c 0x664 0x000 0x4 0x0
+#define MX6DL_PAD_NANDF_CS2__GPIO6_IO15            0x27c 0x664 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_CS3__NAND_CE3_B            0x280 0x668 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_CS3__IPU1_SISG1            0x280 0x668 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_CS3__ESAI_TX1              0x280 0x668 0x848 0x2 0x1
+#define MX6DL_PAD_NANDF_CS3__EIM_ADDR26            0x280 0x668 0x000 0x3 0x0
+#define MX6DL_PAD_NANDF_CS3__GPIO6_IO16            0x280 0x668 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_CS3__I2C4_SDA              0x280 0x668 0x884 0x9 0x2
+#define MX6DL_PAD_NANDF_D0__NAND_DATA00            0x284 0x66c 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_D0__SD1_DATA4              0x284 0x66c 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_D0__GPIO2_IO00             0x284 0x66c 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_D1__NAND_DATA01            0x288 0x670 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_D1__SD1_DATA5              0x288 0x670 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_D1__GPIO2_IO01             0x288 0x670 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_D2__NAND_DATA02            0x28c 0x674 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_D2__SD1_DATA6              0x28c 0x674 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_D2__GPIO2_IO02             0x28c 0x674 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_D3__NAND_DATA03            0x290 0x678 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_D3__SD1_DATA7              0x290 0x678 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_D3__GPIO2_IO03             0x290 0x678 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_D4__NAND_DATA04            0x294 0x67c 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_D4__SD2_DATA4              0x294 0x67c 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_D4__GPIO2_IO04             0x294 0x67c 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_D5__NAND_DATA05            0x298 0x680 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_D5__SD2_DATA5              0x298 0x680 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_D5__GPIO2_IO05             0x298 0x680 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_D6__NAND_DATA06            0x29c 0x684 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_D6__SD2_DATA6              0x29c 0x684 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_D6__GPIO2_IO06             0x29c 0x684 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_D7__NAND_DATA07            0x2a0 0x688 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_D7__SD2_DATA7              0x2a0 0x688 0x000 0x1 0x0
+#define MX6DL_PAD_NANDF_D7__GPIO2_IO07             0x2a0 0x688 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_RB0__NAND_READY_B          0x2a4 0x68c 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_RB0__GPIO6_IO10            0x2a4 0x68c 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_WP_B__NAND_WP_B            0x2a8 0x690 0x000 0x0 0x0
+#define MX6DL_PAD_NANDF_WP_B__GPIO6_IO09           0x2a8 0x690 0x000 0x5 0x0
+#define MX6DL_PAD_NANDF_WP_B__I2C4_SCL             0x2a8 0x690 0x880 0x9 0x2
+#define MX6DL_PAD_RGMII_RD0__HSI_RX_READY          0x2ac 0x694 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_RD0__RGMII_RD0             0x2ac 0x694 0x818 0x1 0x1
+#define MX6DL_PAD_RGMII_RD0__GPIO6_IO25            0x2ac 0x694 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_RD1__HSI_TX_FLAG           0x2b0 0x698 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_RD1__RGMII_RD1             0x2b0 0x698 0x81c 0x1 0x1
+#define MX6DL_PAD_RGMII_RD1__GPIO6_IO27            0x2b0 0x698 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_RD2__HSI_TX_DATA           0x2b4 0x69c 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_RD2__RGMII_RD2             0x2b4 0x69c 0x820 0x1 0x1
+#define MX6DL_PAD_RGMII_RD2__GPIO6_IO28            0x2b4 0x69c 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_RD3__HSI_TX_WAKE           0x2b8 0x6a0 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_RD3__RGMII_RD3             0x2b8 0x6a0 0x824 0x1 0x1
+#define MX6DL_PAD_RGMII_RD3__GPIO6_IO29            0x2b8 0x6a0 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_RX_CTL__USB_H3_DATA        0x2bc 0x6a4 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_RX_CTL__RGMII_RX_CTL       0x2bc 0x6a4 0x828 0x1 0x1
+#define MX6DL_PAD_RGMII_RX_CTL__GPIO6_IO24         0x2bc 0x6a4 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_RXC__USB_H3_STROBE         0x2c0 0x6a8 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_RXC__RGMII_RXC             0x2c0 0x6a8 0x814 0x1 0x1
+#define MX6DL_PAD_RGMII_RXC__GPIO6_IO30            0x2c0 0x6a8 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_TD0__HSI_TX_READY          0x2c4 0x6ac 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_TD0__RGMII_TD0             0x2c4 0x6ac 0x000 0x1 0x0
+#define MX6DL_PAD_RGMII_TD0__GPIO6_IO20            0x2c4 0x6ac 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_TD1__HSI_RX_FLAG           0x2c8 0x6b0 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_TD1__RGMII_TD1             0x2c8 0x6b0 0x000 0x1 0x0
+#define MX6DL_PAD_RGMII_TD1__GPIO6_IO21            0x2c8 0x6b0 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_TD2__HSI_RX_DATA           0x2cc 0x6b4 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_TD2__RGMII_TD2             0x2cc 0x6b4 0x000 0x1 0x0
+#define MX6DL_PAD_RGMII_TD2__GPIO6_IO22            0x2cc 0x6b4 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_TD3__HSI_RX_WAKE           0x2d0 0x6b8 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_TD3__RGMII_TD3             0x2d0 0x6b8 0x000 0x1 0x0
+#define MX6DL_PAD_RGMII_TD3__GPIO6_IO23            0x2d0 0x6b8 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_TX_CTL__USB_H2_STROBE      0x2d4 0x6bc 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_TX_CTL__RGMII_TX_CTL       0x2d4 0x6bc 0x000 0x1 0x0
+#define MX6DL_PAD_RGMII_TX_CTL__GPIO6_IO26         0x2d4 0x6bc 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_TX_CTL__ENET_REF_CLK       0x2d4 0x6bc 0x80c 0x7 0x1
+#define MX6DL_PAD_RGMII_TXC__USB_H2_DATA           0x2d8 0x6c0 0x000 0x0 0x0
+#define MX6DL_PAD_RGMII_TXC__RGMII_TXC             0x2d8 0x6c0 0x000 0x1 0x0
+#define MX6DL_PAD_RGMII_TXC__SPDIF_EXT_CLK         0x2d8 0x6c0 0x8f4 0x2 0x1
+#define MX6DL_PAD_RGMII_TXC__GPIO6_IO19            0x2d8 0x6c0 0x000 0x5 0x0
+#define MX6DL_PAD_RGMII_TXC__XTALOSC_REF_CLK_24M   0x2d8 0x6c0 0x000 0x7 0x0
+#define MX6DL_PAD_SD1_CLK__SD1_CLK                 0x2dc 0x6c4 0x928 0x0 0x1
+#define MX6DL_PAD_SD1_CLK__GPT_CLKIN               0x2dc 0x6c4 0x000 0x3 0x0
+#define MX6DL_PAD_SD1_CLK__GPIO1_IO20              0x2dc 0x6c4 0x000 0x5 0x0
+#define MX6DL_PAD_SD1_CMD__SD1_CMD                 0x2e0 0x6c8 0x000 0x0 0x0
+#define MX6DL_PAD_SD1_CMD__PWM4_OUT                0x2e0 0x6c8 0x000 0x2 0x0
+#define MX6DL_PAD_SD1_CMD__GPT_COMPARE1            0x2e0 0x6c8 0x000 0x3 0x0
+#define MX6DL_PAD_SD1_CMD__GPIO1_IO18              0x2e0 0x6c8 0x000 0x5 0x0
+#define MX6DL_PAD_SD1_DAT0__SD1_DATA0              0x2e4 0x6cc 0x000 0x0 0x0
+#define MX6DL_PAD_SD1_DAT0__GPT_CAPTURE1           0x2e4 0x6cc 0x000 0x3 0x0
+#define MX6DL_PAD_SD1_DAT0__GPIO1_IO16             0x2e4 0x6cc 0x000 0x5 0x0
+#define MX6DL_PAD_SD1_DAT1__SD1_DATA1              0x2e8 0x6d0 0x000 0x0 0x0
+#define MX6DL_PAD_SD1_DAT1__PWM3_OUT               0x2e8 0x6d0 0x000 0x2 0x0
+#define MX6DL_PAD_SD1_DAT1__GPT_CAPTURE2           0x2e8 0x6d0 0x000 0x3 0x0
+#define MX6DL_PAD_SD1_DAT1__GPIO1_IO17             0x2e8 0x6d0 0x000 0x5 0x0
+#define MX6DL_PAD_SD1_DAT2__SD1_DATA2              0x2ec 0x6d4 0x000 0x0 0x0
+#define MX6DL_PAD_SD1_DAT2__GPT_COMPARE2           0x2ec 0x6d4 0x000 0x2 0x0
+#define MX6DL_PAD_SD1_DAT2__PWM2_OUT               0x2ec 0x6d4 0x000 0x3 0x0
+#define MX6DL_PAD_SD1_DAT2__WDOG1_B                0x2ec 0x6d4 0x000 0x4 0x0
+#define MX6DL_PAD_SD1_DAT2__GPIO1_IO19             0x2ec 0x6d4 0x000 0x5 0x0
+#define MX6DL_PAD_SD1_DAT2__WDOG1_RESET_B_DEB      0x2ec 0x6d4 0x000 0x6 0x0
+#define MX6DL_PAD_SD1_DAT3__SD1_DATA3              0x2f0 0x6d8 0x000 0x0 0x0
+#define MX6DL_PAD_SD1_DAT3__GPT_COMPARE3           0x2f0 0x6d8 0x000 0x2 0x0
+#define MX6DL_PAD_SD1_DAT3__PWM1_OUT               0x2f0 0x6d8 0x000 0x3 0x0
+#define MX6DL_PAD_SD1_DAT3__WDOG2_B                0x2f0 0x6d8 0x000 0x4 0x0
+#define MX6DL_PAD_SD1_DAT3__GPIO1_IO21             0x2f0 0x6d8 0x000 0x5 0x0
+#define MX6DL_PAD_SD1_DAT3__WDOG2_RESET_B_DEB      0x2f0 0x6d8 0x000 0x6 0x0
+#define MX6DL_PAD_SD2_CLK__SD2_CLK                 0x2f4 0x6dc 0x930 0x0 0x1
+#define MX6DL_PAD_SD2_CLK__KEY_COL5                0x2f4 0x6dc 0x8c0 0x2 0x3
+#define MX6DL_PAD_SD2_CLK__AUD4_RXFS               0x2f4 0x6dc 0x7a4 0x3 0x1
+#define MX6DL_PAD_SD2_CLK__GPIO1_IO10              0x2f4 0x6dc 0x000 0x5 0x0
+#define MX6DL_PAD_SD2_CMD__SD2_CMD                 0x2f8 0x6e0 0x000 0x0 0x0
+#define MX6DL_PAD_SD2_CMD__KEY_ROW5                0x2f8 0x6e0 0x8cc 0x2 0x2
+#define MX6DL_PAD_SD2_CMD__AUD4_RXC                0x2f8 0x6e0 0x7a0 0x3 0x1
+#define MX6DL_PAD_SD2_CMD__GPIO1_IO11              0x2f8 0x6e0 0x000 0x5 0x0
+#define MX6DL_PAD_SD2_DAT0__SD2_DATA0              0x2fc 0x6e4 0x000 0x0 0x0
+#define MX6DL_PAD_SD2_DAT0__AUD4_RXD               0x2fc 0x6e4 0x798 0x3 0x1
+#define MX6DL_PAD_SD2_DAT0__KEY_ROW7               0x2fc 0x6e4 0x8d4 0x4 0x2
+#define MX6DL_PAD_SD2_DAT0__GPIO1_IO15             0x2fc 0x6e4 0x000 0x5 0x0
+#define MX6DL_PAD_SD2_DAT0__DCIC2_OUT              0x2fc 0x6e4 0x000 0x6 0x0
+#define MX6DL_PAD_SD2_DAT1__SD2_DATA1              0x300 0x6e8 0x000 0x0 0x0
+#define MX6DL_PAD_SD2_DAT1__EIM_CS2_B              0x300 0x6e8 0x000 0x2 0x0
+#define MX6DL_PAD_SD2_DAT1__AUD4_TXFS              0x300 0x6e8 0x7ac 0x3 0x1
+#define MX6DL_PAD_SD2_DAT1__KEY_COL7               0x300 0x6e8 0x8c8 0x4 0x2
+#define MX6DL_PAD_SD2_DAT1__GPIO1_IO14             0x300 0x6e8 0x000 0x5 0x0
+#define MX6DL_PAD_SD2_DAT2__SD2_DATA2              0x304 0x6ec 0x000 0x0 0x0
+#define MX6DL_PAD_SD2_DAT2__EIM_CS3_B              0x304 0x6ec 0x000 0x2 0x0
+#define MX6DL_PAD_SD2_DAT2__AUD4_TXD               0x304 0x6ec 0x79c 0x3 0x1
+#define MX6DL_PAD_SD2_DAT2__KEY_ROW6               0x304 0x6ec 0x8d0 0x4 0x2
+#define MX6DL_PAD_SD2_DAT2__GPIO1_IO13             0x304 0x6ec 0x000 0x5 0x0
+#define MX6DL_PAD_SD2_DAT3__SD2_DATA3              0x308 0x6f0 0x000 0x0 0x0
+#define MX6DL_PAD_SD2_DAT3__KEY_COL6               0x308 0x6f0 0x8c4 0x2 0x2
+#define MX6DL_PAD_SD2_DAT3__AUD4_TXC               0x308 0x6f0 0x7a8 0x3 0x1
+#define MX6DL_PAD_SD2_DAT3__GPIO1_IO12             0x308 0x6f0 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_CLK__SD3_CLK                 0x30c 0x6f4 0x934 0x0 0x1
+#define MX6DL_PAD_SD3_CLK__UART2_RTS_B             0x30c 0x6f4 0x900 0x1 0x2
+#define MX6DL_PAD_SD3_CLK__UART2_CTS_B             0x30c 0x6f4 0x000 0x1 0x0
+#define MX6DL_PAD_SD3_CLK__FLEXCAN1_RX             0x30c 0x6f4 0x7c8 0x2 0x2
+#define MX6DL_PAD_SD3_CLK__GPIO7_IO03              0x30c 0x6f4 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_CMD__SD3_CMD                 0x310 0x6f8 0x000 0x0 0x0
+#define MX6DL_PAD_SD3_CMD__UART2_CTS_B             0x310 0x6f8 0x000 0x1 0x0
+#define MX6DL_PAD_SD3_CMD__UART2_RTS_B             0x310 0x6f8 0x900 0x1 0x3
+#define MX6DL_PAD_SD3_CMD__FLEXCAN1_TX             0x310 0x6f8 0x000 0x2 0x0
+#define MX6DL_PAD_SD3_CMD__GPIO7_IO02              0x310 0x6f8 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_DAT0__SD3_DATA0              0x314 0x6fc 0x000 0x0 0x0
+#define MX6DL_PAD_SD3_DAT0__UART1_CTS_B            0x314 0x6fc 0x000 0x1 0x0
+#define MX6DL_PAD_SD3_DAT0__UART1_RTS_B            0x314 0x6fc 0x8f8 0x1 0x2
+#define MX6DL_PAD_SD3_DAT0__FLEXCAN2_TX            0x314 0x6fc 0x000 0x2 0x0
+#define MX6DL_PAD_SD3_DAT0__GPIO7_IO04             0x314 0x6fc 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_DAT1__SD3_DATA1              0x318 0x700 0x000 0x0 0x0
+#define MX6DL_PAD_SD3_DAT1__UART1_RTS_B            0x318 0x700 0x8f8 0x1 0x3
+#define MX6DL_PAD_SD3_DAT1__UART1_CTS_B            0x318 0x700 0x000 0x1 0x0
+#define MX6DL_PAD_SD3_DAT1__FLEXCAN2_RX            0x318 0x700 0x7cc 0x2 0x1
+#define MX6DL_PAD_SD3_DAT1__GPIO7_IO05             0x318 0x700 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_DAT2__SD3_DATA2              0x31c 0x704 0x000 0x0 0x0
+#define MX6DL_PAD_SD3_DAT2__GPIO7_IO06             0x31c 0x704 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_DAT3__SD3_DATA3              0x320 0x708 0x000 0x0 0x0
+#define MX6DL_PAD_SD3_DAT3__UART3_CTS_B            0x320 0x708 0x000 0x1 0x0
+#define MX6DL_PAD_SD3_DAT3__UART3_RTS_B            0x320 0x708 0x908 0x1 0x4
+#define MX6DL_PAD_SD3_DAT3__GPIO7_IO07             0x320 0x708 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_DAT4__SD3_DATA4              0x324 0x70c 0x000 0x0 0x0
+#define MX6DL_PAD_SD3_DAT4__UART2_RX_DATA          0x324 0x70c 0x904 0x1 0x4
+#define MX6DL_PAD_SD3_DAT4__UART2_TX_DATA          0x324 0x70c 0x000 0x1 0x0
+#define MX6DL_PAD_SD3_DAT4__GPIO7_IO01             0x324 0x70c 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_DAT5__SD3_DATA5              0x328 0x710 0x000 0x0 0x0
+#define MX6DL_PAD_SD3_DAT5__UART2_TX_DATA          0x328 0x710 0x000 0x1 0x0
+#define MX6DL_PAD_SD3_DAT5__UART2_RX_DATA          0x328 0x710 0x904 0x1 0x5
+#define MX6DL_PAD_SD3_DAT5__GPIO7_IO00             0x328 0x710 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_DAT6__SD3_DATA6              0x32c 0x714 0x000 0x0 0x0
+#define MX6DL_PAD_SD3_DAT6__UART1_RX_DATA          0x32c 0x714 0x8fc 0x1 0x2
+#define MX6DL_PAD_SD3_DAT6__UART1_TX_DATA          0x32c 0x714 0x000 0x1 0x0
+#define MX6DL_PAD_SD3_DAT6__GPIO6_IO18             0x32c 0x714 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_DAT7__SD3_DATA7              0x330 0x718 0x000 0x0 0x0
+#define MX6DL_PAD_SD3_DAT7__UART1_TX_DATA          0x330 0x718 0x000 0x1 0x0
+#define MX6DL_PAD_SD3_DAT7__UART1_RX_DATA          0x330 0x718 0x8fc 0x1 0x3
+#define MX6DL_PAD_SD3_DAT7__GPIO6_IO17             0x330 0x718 0x000 0x5 0x0
+#define MX6DL_PAD_SD3_RST__SD3_RESET               0x334 0x71c 0x000 0x0 0x0
+#define MX6DL_PAD_SD3_RST__UART3_RTS_B             0x334 0x71c 0x908 0x1 0x5
+#define MX6DL_PAD_SD3_RST__UART3_CTS_B             0x334 0x71c 0x000 0x1 0x0
+#define MX6DL_PAD_SD3_RST__GPIO7_IO08              0x334 0x71c 0x000 0x5 0x0
+#define MX6DL_PAD_SD4_CLK__SD4_CLK                 0x338 0x720 0x938 0x0 0x1
+#define MX6DL_PAD_SD4_CLK__NAND_WE_B               0x338 0x720 0x000 0x1 0x0
+#define MX6DL_PAD_SD4_CLK__UART3_RX_DATA           0x338 0x720 0x90c 0x2 0x2
+#define MX6DL_PAD_SD4_CLK__UART3_TX_DATA           0x338 0x720 0x000 0x2 0x0
+#define MX6DL_PAD_SD4_CLK__GPIO7_IO10              0x338 0x720 0x000 0x5 0x0
+#define MX6DL_PAD_SD4_CMD__SD4_CMD                 0x33c 0x724 0x000 0x0 0x0
+#define MX6DL_PAD_SD4_CMD__NAND_RE_B               0x33c 0x724 0x000 0x1 0x0
+#define MX6DL_PAD_SD4_CMD__UART3_TX_DATA           0x33c 0x724 0x000 0x2 0x0
+#define MX6DL_PAD_SD4_CMD__UART3_RX_DATA           0x33c 0x724 0x90c 0x2 0x3
+#define MX6DL_PAD_SD4_CMD__GPIO7_IO09              0x33c 0x724 0x000 0x5 0x0
+#define MX6DL_PAD_SD4_DAT0__SD4_DATA0              0x340 0x728 0x000 0x1 0x0
+#define MX6DL_PAD_SD4_DAT0__NAND_DQS               0x340 0x728 0x000 0x2 0x0
+#define MX6DL_PAD_SD4_DAT0__GPIO2_IO08             0x340 0x728 0x000 0x5 0x0
+#define MX6DL_PAD_SD4_DAT1__SD4_DATA1              0x344 0x72c 0x000 0x1 0x0
+#define MX6DL_PAD_SD4_DAT1__PWM3_OUT               0x344 0x72c 0x000 0x2 0x0
+#define MX6DL_PAD_SD4_DAT1__GPIO2_IO09             0x344 0x72c 0x000 0x5 0x0
+#define MX6DL_PAD_SD4_DAT2__SD4_DATA2              0x348 0x730 0x000 0x1 0x0
+#define MX6DL_PAD_SD4_DAT2__PWM4_OUT               0x348 0x730 0x000 0x2 0x0
+#define MX6DL_PAD_SD4_DAT2__GPIO2_IO10             0x348 0x730 0x000 0x5 0x0
+#define MX6DL_PAD_SD4_DAT3__SD4_DATA3              0x34c 0x734 0x000 0x1 0x0
+#define MX6DL_PAD_SD4_DAT3__GPIO2_IO11             0x34c 0x734 0x000 0x5 0x0
+#define MX6DL_PAD_SD4_DAT4__SD4_DATA4              0x350 0x738 0x000 0x1 0x0
+#define MX6DL_PAD_SD4_DAT4__UART2_RX_DATA          0x350 0x738 0x904 0x2 0x6
+#define MX6DL_PAD_SD4_DAT4__UART2_TX_DATA          0x350 0x738 0x000 0x2 0x0
+#define MX6DL_PAD_SD4_DAT4__GPIO2_IO12             0x350 0x738 0x000 0x5 0x0
+#define MX6DL_PAD_SD4_DAT5__SD4_DATA5              0x354 0x73c 0x000 0x1 0x0
+#define MX6DL_PAD_SD4_DAT5__UART2_RTS_B            0x354 0x73c 0x900 0x2 0x4
+#define MX6DL_PAD_SD4_DAT5__UART2_CTS_B            0x354 0x73c 0x000 0x2 0x0
+#define MX6DL_PAD_SD4_DAT5__GPIO2_IO13             0x354 0x73c 0x000 0x5 0x0
+#define MX6DL_PAD_SD4_DAT6__SD4_DATA6              0x358 0x740 0x000 0x1 0x0
+#define MX6DL_PAD_SD4_DAT6__UART2_CTS_B            0x358 0x740 0x000 0x2 0x0
+#define MX6DL_PAD_SD4_DAT6__UART2_RTS_B            0x358 0x740 0x900 0x2 0x5
+#define MX6DL_PAD_SD4_DAT6__GPIO2_IO14             0x358 0x740 0x000 0x5 0x0
+#define MX6DL_PAD_SD4_DAT7__SD4_DATA7              0x35c 0x744 0x000 0x1 0x0
+#define MX6DL_PAD_SD4_DAT7__UART2_TX_DATA          0x35c 0x744 0x000 0x2 0x0
+#define MX6DL_PAD_SD4_DAT7__UART2_RX_DATA          0x35c 0x744 0x904 0x2 0x7
+#define MX6DL_PAD_SD4_DAT7__GPIO2_IO15             0x35c 0x744 0x000 0x5 0x0
 
 #endif /* __DTS_IMX6DL_PINFUNC_H */
diff -urNp a/arch/arm/boot/dts/imx6dl-sabreauto.dts b/arch/arm/boot/dts/imx6dl-sabreauto.dts
--- a/arch/arm/boot/dts/imx6dl-sabreauto.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6dl-sabreauto.dts	2015-10-27 00:45:05.000000000 +0000
@@ -15,3 +15,17 @@
 	model = "Freescale i.MX6 DualLite/Solo SABRE Automotive Board";
 	compatible = "fsl,imx6dl-sabreauto", "fsl,imx6dl";
 };
+
+&iomuxc {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_hog>;
+
+	hog {
+		pinctrl_hog: hoggrp {
+			fsl,pins = <
+				MX6DL_PAD_NANDF_CS2__GPIO6_IO15 0x80000000
+				MX6DL_PAD_SD2_DAT2__GPIO1_IO13  0x80000000
+			>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/imx6dl-sabresd.dts b/arch/arm/boot/dts/imx6dl-sabresd.dts
--- a/arch/arm/boot/dts/imx6dl-sabresd.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6dl-sabresd.dts	2015-10-27 00:45:05.000000000 +0000
@@ -15,3 +15,21 @@
 	model = "Freescale i.MX6 DualLite SABRE Smart Device Board";
 	compatible = "fsl,imx6dl-sabresd", "fsl,imx6dl";
 };
+
+&iomuxc {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_hog>;
+
+	hog {
+		pinctrl_hog: hoggrp {
+			fsl,pins = <
+				MX6DL_PAD_GPIO_4__GPIO1_IO04   0x80000000
+				MX6DL_PAD_GPIO_5__GPIO1_IO05   0x80000000
+				MX6DL_PAD_NANDF_D0__GPIO2_IO00 0x80000000
+				MX6DL_PAD_NANDF_D1__GPIO2_IO01 0x80000000
+				MX6DL_PAD_NANDF_D2__GPIO2_IO02 0x80000000
+				MX6DL_PAD_NANDF_D3__GPIO2_IO03 0x80000000
+			>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/imx6dl-wandboard.dts b/arch/arm/boot/dts/imx6dl-wandboard.dts
--- a/arch/arm/boot/dts/imx6dl-wandboard.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6dl-wandboard.dts	2015-10-27 00:45:05.000000000 +0000
@@ -10,7 +10,6 @@
  */
 /dts-v1/;
 #include "imx6dl.dtsi"
-#include "imx6qdl-wandboard-revc1.dtsi"
 
 / {
 	model = "Wandboard i.MX6 Dual Lite Board";
@@ -20,3 +19,26 @@
 		reg = <0x10000000 0x40000000>;
 	};
 };
+
+&fec {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_enet_1>;
+	phy-mode = "rgmii";
+	status = "okay";
+};
+
+&uart1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_uart1_1>;
+	status = "okay";
+};
+
+&usbh1 {
+	status = "okay";
+};
+
+&usdhc3 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_usdhc3_2>;
+	status = "okay";
+};
diff -urNp a/arch/arm/boot/dts/imx6dl.dtsi b/arch/arm/boot/dts/imx6dl.dtsi
--- a/arch/arm/boot/dts/imx6dl.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6dl.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,15 +8,10 @@
  *
  */
 
-#include <dt-bindings/interrupt-controller/irq.h>
-#include "imx6dl-pinfunc.h"
 #include "imx6qdl.dtsi"
+#include "imx6dl-pinfunc.h"
 
 / {
-	aliases {
-		i2c3 = &i2c4;
-	};
-
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
@@ -26,29 +21,6 @@
 			device_type = "cpu";
 			reg = <0>;
 			next-level-cache = <&L2>;
-			operating-points = <
-				/* kHz    uV */
-				996000  1250000
-				792000  1175000
-				396000  1075000
-			>;
-			fsl,soc-operating-points = <
-				/* ARM kHz  SOC-PU uV */
-				996000	1175000
-				792000	1175000
-				396000	1175000
-			>;
-			clock-latency = <61036>; /* two CLK32 periods */
-			clocks = <&clks IMX6QDL_CLK_ARM>,
-				 <&clks IMX6QDL_CLK_PLL2_PFD2_396M>,
-				 <&clks IMX6QDL_CLK_STEP>,
-				 <&clks IMX6QDL_CLK_PLL1_SW>,
-				 <&clks IMX6QDL_CLK_PLL1_SYS>;
-			clock-names = "arm", "pll2_pfd2_396m", "step",
-				      "pll1_sw", "pll1_sys";
-			arm-supply = <&reg_arm>;
-			pu-supply = <&reg_pu>;
-			soc-supply = <&reg_soc>;
 		};
 
 		cpu@1 {
@@ -60,30 +32,141 @@
 	};
 
 	soc {
-		ocram: sram@00900000 {
-			compatible = "mmio-sram";
-			reg = <0x00900000 0x20000>;
-			clocks = <&clks IMX6QDL_CLK_OCRAM>;
-		};
-
 		aips1: aips-bus@02000000 {
 			iomuxc: iomuxc@020e0000 {
 				compatible = "fsl,imx6dl-iomuxc";
+				reg = <0x020e0000 0x4000>;
+
+				enet {
+					pinctrl_enet_1: enetgrp-1 {
+						fsl,pins = <
+							MX6DL_PAD_ENET_MDIO__ENET_MDIO       0x1b0b0
+							MX6DL_PAD_ENET_MDC__ENET_MDC         0x1b0b0
+							MX6DL_PAD_RGMII_TXC__RGMII_TXC       0x1b0b0
+							MX6DL_PAD_RGMII_TD0__RGMII_TD0       0x1b0b0
+							MX6DL_PAD_RGMII_TD1__RGMII_TD1       0x1b0b0
+							MX6DL_PAD_RGMII_TD2__RGMII_TD2       0x1b0b0
+							MX6DL_PAD_RGMII_TD3__RGMII_TD3       0x1b0b0
+							MX6DL_PAD_RGMII_TX_CTL__RGMII_TX_CTL 0x1b0b0
+							MX6DL_PAD_ENET_REF_CLK__ENET_TX_CLK  0x1b0b0
+							MX6DL_PAD_RGMII_RXC__RGMII_RXC       0x1b0b0
+							MX6DL_PAD_RGMII_RD0__RGMII_RD0       0x1b0b0
+							MX6DL_PAD_RGMII_RD1__RGMII_RD1       0x1b0b0
+							MX6DL_PAD_RGMII_RD2__RGMII_RD2       0x1b0b0
+							MX6DL_PAD_RGMII_RD3__RGMII_RD3       0x1b0b0
+							MX6DL_PAD_RGMII_RX_CTL__RGMII_RX_CTL 0x1b0b0
+							MX6DL_PAD_GPIO_16__ENET_REF_CLK      0x4001b0a8
+						>;
+					};
+
+					pinctrl_enet_2: enetgrp-2 {
+						fsl,pins = <
+							MX6DL_PAD_KEY_COL1__ENET_MDIO        0x1b0b0
+							MX6DL_PAD_KEY_COL2__ENET_MDC         0x1b0b0
+							MX6DL_PAD_RGMII_TXC__RGMII_TXC       0x1b0b0
+							MX6DL_PAD_RGMII_TD0__RGMII_TD0       0x1b0b0
+							MX6DL_PAD_RGMII_TD1__RGMII_TD1       0x1b0b0
+							MX6DL_PAD_RGMII_TD2__RGMII_TD2       0x1b0b0
+							MX6DL_PAD_RGMII_TD3__RGMII_TD3       0x1b0b0
+							MX6DL_PAD_RGMII_TX_CTL__RGMII_TX_CTL 0x1b0b0
+							MX6DL_PAD_ENET_REF_CLK__ENET_TX_CLK  0x1b0b0
+							MX6DL_PAD_RGMII_RXC__RGMII_RXC       0x1b0b0
+							MX6DL_PAD_RGMII_RD0__RGMII_RD0       0x1b0b0
+							MX6DL_PAD_RGMII_RD1__RGMII_RD1       0x1b0b0
+							MX6DL_PAD_RGMII_RD2__RGMII_RD2       0x1b0b0
+							MX6DL_PAD_RGMII_RD3__RGMII_RD3       0x1b0b0
+							MX6DL_PAD_RGMII_RX_CTL__RGMII_RX_CTL 0x1b0b0
+						>;
+					};
+				};
+
+				uart1 {
+					pinctrl_uart1_1: uart1grp-1 {
+						fsl,pins = <
+							MX6DL_PAD_CSI0_DAT10__UART1_TX_DATA 0x1b0b1
+							MX6DL_PAD_CSI0_DAT11__UART1_RX_DATA 0x1b0b1
+						>;
+					};
+				};
+
+				uart4 {
+					pinctrl_uart4_1: uart4grp-1 {
+						fsl,pins = <
+							MX6DL_PAD_KEY_COL0__UART4_TX_DATA 0x1b0b1
+							MX6DL_PAD_KEY_ROW0__UART4_RX_DATA 0x1b0b1
+						>;
+					};
+				};
+
+				usbotg {
+					pinctrl_usbotg_2: usbotggrp-2 {
+						fsl,pins = <
+							MX6DL_PAD_ENET_RX_ER__USB_OTG_ID 0x17059
+						>;
+					};
+				};
+
+				usdhc2 {
+					pinctrl_usdhc2_1: usdhc2grp-1 {
+						fsl,pins = <
+							MX6DL_PAD_SD2_CMD__SD2_CMD    0x17059
+							MX6DL_PAD_SD2_CLK__SD2_CLK    0x10059
+							MX6DL_PAD_SD2_DAT0__SD2_DATA0 0x17059
+							MX6DL_PAD_SD2_DAT1__SD2_DATA1 0x17059
+							MX6DL_PAD_SD2_DAT2__SD2_DATA2 0x17059
+							MX6DL_PAD_SD2_DAT3__SD2_DATA3 0x17059
+							MX6DL_PAD_NANDF_D4__SD2_DATA4 0x17059
+							MX6DL_PAD_NANDF_D5__SD2_DATA5 0x17059
+							MX6DL_PAD_NANDF_D6__SD2_DATA6 0x17059
+							MX6DL_PAD_NANDF_D7__SD2_DATA7 0x17059
+						>;
+					};
+				};
+
+				usdhc3 {
+					pinctrl_usdhc3_1: usdhc3grp-1 {
+						fsl,pins = <
+							MX6DL_PAD_SD3_CMD__SD3_CMD    0x17059
+							MX6DL_PAD_SD3_CLK__SD3_CLK    0x10059
+							MX6DL_PAD_SD3_DAT0__SD3_DATA0 0x17059
+							MX6DL_PAD_SD3_DAT1__SD3_DATA1 0x17059
+							MX6DL_PAD_SD3_DAT2__SD3_DATA2 0x17059
+							MX6DL_PAD_SD3_DAT3__SD3_DATA3 0x17059
+							MX6DL_PAD_SD3_DAT4__SD3_DATA4 0x17059
+							MX6DL_PAD_SD3_DAT5__SD3_DATA5 0x17059
+							MX6DL_PAD_SD3_DAT6__SD3_DATA6 0x17059
+							MX6DL_PAD_SD3_DAT7__SD3_DATA7 0x17059
+						>;
+					};
+
+					pinctrl_usdhc3_2: usdhc3grp_2 {
+						fsl,pins = <
+							MX6DL_PAD_SD3_CMD__SD3_CMD    0x17059
+							MX6DL_PAD_SD3_CLK__SD3_CLK    0x10059
+							MX6DL_PAD_SD3_DAT0__SD3_DATA0 0x17059
+							MX6DL_PAD_SD3_DAT1__SD3_DATA1 0x17059
+							MX6DL_PAD_SD3_DAT2__SD3_DATA2 0x17059
+							MX6DL_PAD_SD3_DAT3__SD3_DATA3 0x17059
+						>;
+					};
+				};
+
+
 			};
 
 			pxp: pxp@020f0000 {
 				reg = <0x020f0000 0x4000>;
-				interrupts = <0 98 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 98 0x04>;
 			};
 
 			epdc: epdc@020f4000 {
 				reg = <0x020f4000 0x4000>;
-				interrupts = <0 97 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 97 0x04>;
 			};
 
 			lcdif: lcdif@020f8000 {
 				reg = <0x020f8000 0x4000>;
-				interrupts = <0 39 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 39 0x04>;
 			};
 		};
 
@@ -91,34 +174,11 @@
 			i2c4: i2c@021f8000 {
 				#address-cells = <1>;
 				#size-cells = <0>;
-				compatible = "fsl,imx6q-i2c", "fsl,imx21-i2c";
+				compatible = "fsl,imx1-i2c";
 				reg = <0x021f8000 0x4000>;
-				interrupts = <0 35 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6DL_CLK_I2C4>;
+				interrupts = <0 35 0x04>;
 				status = "disabled";
 			};
 		};
 	};
-
-	display-subsystem {
-		compatible = "fsl,imx-display-subsystem";
-		ports = <&ipu1_di0>, <&ipu1_di1>;
-	};
-};
-
-&hdmi {
-	compatible = "fsl,imx6dl-hdmi";
-};
-
-&ldb {
-	clocks = <&clks IMX6QDL_CLK_LDB_DI0_SEL>, <&clks IMX6QDL_CLK_LDB_DI1_SEL>,
-		 <&clks IMX6QDL_CLK_IPU1_DI0_SEL>, <&clks IMX6QDL_CLK_IPU1_DI1_SEL>,
-		 <&clks IMX6QDL_CLK_LDB_DI0>, <&clks IMX6QDL_CLK_LDB_DI1>;
-	clock-names = "di0_pll", "di1_pll",
-		      "di0_sel", "di1_sel",
-		      "di0", "di1";
-};
-
-&vpu {
-	compatible = "fsl,imx6dl-vpu", "cnm,coda960";
 };
diff -urNp a/arch/arm/boot/dts/imx6q-arm2.dts b/arch/arm/boot/dts/imx6q-arm2.dts
--- a/arch/arm/boot/dts/imx6q-arm2.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6q-arm2.dts	2015-10-27 00:45:05.000000000 +0000
@@ -23,27 +23,14 @@
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_3p3v: regulator@0 {
+		reg_3p3v: 3p3v {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "3P3V";
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			regulator-always-on;
 		};
-
-		reg_usb_otg_vbus: regulator@1 {
-			compatible = "regulator-fixed";
-			reg = <1>;
-			regulator-name = "usb_otg_vbus";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			gpio = <&gpio3 22 0>;
-			enable-active-high;
-		};
 	};
 
 	leds {
@@ -59,7 +46,7 @@
 
 &gpmi {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_gpmi_nand>;
+	pinctrl-0 = <&pinctrl_gpmi_nand_1>;
 	status = "disabled"; /* gpmi nand conflicts with SD */
 };
 
@@ -67,112 +54,19 @@
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_hog>;
 
-	imx6q-arm2 {
+	hog {
 		pinctrl_hog: hoggrp {
 			fsl,pins = <
-				MX6QDL_PAD_EIM_D25__GPIO3_IO25 0x80000000
-			>;
-		};
-
-		pinctrl_enet: enetgrp {
-			fsl,pins = <
-				MX6QDL_PAD_KEY_COL1__ENET_MDIO		0x1b0b0
-				MX6QDL_PAD_KEY_COL2__ENET_MDC		0x1b0b0
-				MX6QDL_PAD_RGMII_TXC__RGMII_TXC		0x1b0b0
-				MX6QDL_PAD_RGMII_TD0__RGMII_TD0		0x1b0b0
-				MX6QDL_PAD_RGMII_TD1__RGMII_TD1		0x1b0b0
-				MX6QDL_PAD_RGMII_TD2__RGMII_TD2		0x1b0b0
-				MX6QDL_PAD_RGMII_TD3__RGMII_TD3		0x1b0b0
-				MX6QDL_PAD_RGMII_TX_CTL__RGMII_TX_CTL	0x1b0b0
-				MX6QDL_PAD_ENET_REF_CLK__ENET_TX_CLK	0x1b0b0
-				MX6QDL_PAD_RGMII_RXC__RGMII_RXC		0x1b0b0
-				MX6QDL_PAD_RGMII_RD0__RGMII_RD0		0x1b0b0
-				MX6QDL_PAD_RGMII_RD1__RGMII_RD1		0x1b0b0
-				MX6QDL_PAD_RGMII_RD2__RGMII_RD2		0x1b0b0
-				MX6QDL_PAD_RGMII_RD3__RGMII_RD3		0x1b0b0
-				MX6QDL_PAD_RGMII_RX_CTL__RGMII_RX_CTL	0x1b0b0
-				MX6QDL_PAD_GPIO_6__ENET_IRQ		0x000b1
-			>;
-		};
-
-		pinctrl_gpmi_nand: gpminandgrp {
-			fsl,pins = <
-				MX6QDL_PAD_NANDF_CLE__NAND_CLE		0xb0b1
-				MX6QDL_PAD_NANDF_ALE__NAND_ALE		0xb0b1
-				MX6QDL_PAD_NANDF_WP_B__NAND_WP_B	0xb0b1
-				MX6QDL_PAD_NANDF_RB0__NAND_READY_B	0xb000
-				MX6QDL_PAD_NANDF_CS0__NAND_CE0_B	0xb0b1
-				MX6QDL_PAD_NANDF_CS1__NAND_CE1_B	0xb0b1
-				MX6QDL_PAD_SD4_CMD__NAND_RE_B		0xb0b1
-				MX6QDL_PAD_SD4_CLK__NAND_WE_B		0xb0b1
-				MX6QDL_PAD_NANDF_D0__NAND_DATA00	0xb0b1
-				MX6QDL_PAD_NANDF_D1__NAND_DATA01	0xb0b1
-				MX6QDL_PAD_NANDF_D2__NAND_DATA02	0xb0b1
-				MX6QDL_PAD_NANDF_D3__NAND_DATA03	0xb0b1
-				MX6QDL_PAD_NANDF_D4__NAND_DATA04	0xb0b1
-				MX6QDL_PAD_NANDF_D5__NAND_DATA05	0xb0b1
-				MX6QDL_PAD_NANDF_D6__NAND_DATA06	0xb0b1
-				MX6QDL_PAD_NANDF_D7__NAND_DATA07	0xb0b1
-				MX6QDL_PAD_SD4_DAT0__NAND_DQS		0x00b1
-			>;
-		};
-
-		pinctrl_uart2: uart2grp {
-			fsl,pins = <
-				MX6QDL_PAD_EIM_D26__UART2_RX_DATA	0x1b0b1
-				MX6QDL_PAD_EIM_D27__UART2_TX_DATA	0x1b0b1
-				MX6QDL_PAD_EIM_D28__UART2_DTE_CTS_B	0x1b0b1
-				MX6QDL_PAD_EIM_D29__UART2_DTE_RTS_B	0x1b0b1
-			>;
-		};
-
-		pinctrl_uart4: uart4grp {
-			fsl,pins = <
-				MX6QDL_PAD_KEY_COL0__UART4_TX_DATA	0x1b0b1
-				MX6QDL_PAD_KEY_ROW0__UART4_RX_DATA	0x1b0b1
-			>;
-		};
-
-		pinctrl_usbotg: usbotggrp {
-			fsl,pins = <
-				MX6QDL_PAD_GPIO_1__USB_OTG_ID		0x17059
-			>;
-		};
-
-		pinctrl_usdhc3: usdhc3grp {
-			fsl,pins = <
-				MX6QDL_PAD_SD3_CMD__SD3_CMD		0x17059
-				MX6QDL_PAD_SD3_CLK__SD3_CLK		0x10059
-				MX6QDL_PAD_SD3_DAT0__SD3_DATA0		0x17059
-				MX6QDL_PAD_SD3_DAT1__SD3_DATA1		0x17059
-				MX6QDL_PAD_SD3_DAT2__SD3_DATA2		0x17059
-				MX6QDL_PAD_SD3_DAT3__SD3_DATA3		0x17059
-				MX6QDL_PAD_SD3_DAT4__SD3_DATA4		0x17059
-				MX6QDL_PAD_SD3_DAT5__SD3_DATA5		0x17059
-				MX6QDL_PAD_SD3_DAT6__SD3_DATA6		0x17059
-				MX6QDL_PAD_SD3_DAT7__SD3_DATA7		0x17059
-			>;
-		};
-
-		pinctrl_usdhc3_cdwp: usdhc3cdwp {
-			fsl,pins = <
-				MX6QDL_PAD_NANDF_CS0__GPIO6_IO11 0x80000000
-				MX6QDL_PAD_NANDF_CS1__GPIO6_IO14 0x80000000
+				MX6Q_PAD_EIM_D25__GPIO3_IO25 0x80000000
 			>;
 		};
+	};
 
-		pinctrl_usdhc4: usdhc4grp {
+	arm2 {
+		pinctrl_usdhc3_arm2: usdhc3grp-arm2 {
 			fsl,pins = <
-				MX6QDL_PAD_SD4_CMD__SD4_CMD		0x17059
-				MX6QDL_PAD_SD4_CLK__SD4_CLK		0x10059
-				MX6QDL_PAD_SD4_DAT0__SD4_DATA0		0x17059
-				MX6QDL_PAD_SD4_DAT1__SD4_DATA1		0x17059
-				MX6QDL_PAD_SD4_DAT2__SD4_DATA2		0x17059
-				MX6QDL_PAD_SD4_DAT3__SD4_DATA3		0x17059
-				MX6QDL_PAD_SD4_DAT4__SD4_DATA4		0x17059
-				MX6QDL_PAD_SD4_DAT5__SD4_DATA5		0x17059
-				MX6QDL_PAD_SD4_DAT6__SD4_DATA6		0x17059
-				MX6QDL_PAD_SD4_DAT7__SD4_DATA7		0x17059
+				MX6Q_PAD_NANDF_CS0__GPIO6_IO11 0x80000000
+				MX6Q_PAD_NANDF_CS1__GPIO6_IO14 0x80000000
 			>;
 		};
 	};
@@ -180,18 +74,8 @@
 
 &fec {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_enet>;
+	pinctrl-0 = <&pinctrl_enet_2>;
 	phy-mode = "rgmii";
-	interrupts-extended = <&gpio1 6 IRQ_TYPE_LEVEL_HIGH>,
-			      <&intc 0 119 IRQ_TYPE_LEVEL_HIGH>;
-	status = "okay";
-};
-
-&usbotg {
-	vbus-supply = <&reg_usb_otg_vbus>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usbotg>;
-	disable-over-current;
 	status = "okay";
 };
 
@@ -200,8 +84,8 @@
 	wp-gpios = <&gpio6 14 0>;
 	vmmc-supply = <&reg_3p3v>;
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usdhc3
-		     &pinctrl_usdhc3_cdwp>;
+	pinctrl-0 = <&pinctrl_usdhc3_1
+		     &pinctrl_usdhc3_arm2>;
 	status = "okay";
 };
 
@@ -209,20 +93,12 @@
 	non-removable;
 	vmmc-supply = <&reg_3p3v>;
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usdhc4>;
-	status = "okay";
-};
-
-&uart2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart2>;
-	fsl,dte-mode;
-	fsl,uart-has-rtscts;
+	pinctrl-0 = <&pinctrl_usdhc4_1>;
 	status = "okay";
 };
 
 &uart4 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart4>;
+	pinctrl-0 = <&pinctrl_uart4_1>;
 	status = "okay";
 };
diff -urNp a/arch/arm/boot/dts/imx6q-pinfunc.h b/arch/arm/boot/dts/imx6q-pinfunc.h
--- a/arch/arm/boot/dts/imx6q-pinfunc.h	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6q-pinfunc.h	2015-10-27 00:45:05.000000000 +0000
@@ -14,1034 +14,1028 @@
  * The pin function ID is a tuple of
  * <mux_reg conf_reg input_reg mux_mode input_val>
  */
-#define MX6QDL_PAD_SD2_DAT1__SD2_DATA1              0x04c 0x360 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_DAT1__ECSPI5_SS0             0x04c 0x360 0x834 0x1 0x0
-#define MX6QDL_PAD_SD2_DAT1__EIM_CS2_B              0x04c 0x360 0x000 0x2 0x0
-#define MX6QDL_PAD_SD2_DAT1__AUD4_TXFS              0x04c 0x360 0x7c8 0x3 0x0
-#define MX6QDL_PAD_SD2_DAT1__KEY_COL7               0x04c 0x360 0x8f0 0x4 0x0
-#define MX6QDL_PAD_SD2_DAT1__GPIO1_IO14             0x04c 0x360 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_DAT2__SD2_DATA2              0x050 0x364 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_DAT2__ECSPI5_SS1             0x050 0x364 0x838 0x1 0x0
-#define MX6QDL_PAD_SD2_DAT2__EIM_CS3_B              0x050 0x364 0x000 0x2 0x0
-#define MX6QDL_PAD_SD2_DAT2__AUD4_TXD               0x050 0x364 0x7b8 0x3 0x0
-#define MX6QDL_PAD_SD2_DAT2__KEY_ROW6               0x050 0x364 0x8f8 0x4 0x0
-#define MX6QDL_PAD_SD2_DAT2__GPIO1_IO13             0x050 0x364 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_DAT0__SD2_DATA0              0x054 0x368 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_DAT0__ECSPI5_MISO            0x054 0x368 0x82c 0x1 0x0
-#define MX6QDL_PAD_SD2_DAT0__AUD4_RXD               0x054 0x368 0x7b4 0x3 0x0
-#define MX6QDL_PAD_SD2_DAT0__KEY_ROW7               0x054 0x368 0x8fc 0x4 0x0
-#define MX6QDL_PAD_SD2_DAT0__GPIO1_IO15             0x054 0x368 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_DAT0__DCIC2_OUT              0x054 0x368 0x000 0x6 0x0
-#define MX6QDL_PAD_RGMII_TXC__USB_H2_DATA           0x058 0x36c 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TXC__RGMII_TXC             0x058 0x36c 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TXC__SPDIF_EXT_CLK         0x058 0x36c 0x918 0x2 0x0
-#define MX6QDL_PAD_RGMII_TXC__GPIO6_IO19            0x058 0x36c 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TXC__XTALOSC_REF_CLK_24M   0x058 0x36c 0x000 0x7 0x0
-#define MX6QDL_PAD_RGMII_TD0__HSI_TX_READY          0x05c 0x370 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TD0__RGMII_TD0             0x05c 0x370 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TD0__GPIO6_IO20            0x05c 0x370 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TD1__HSI_RX_FLAG           0x060 0x374 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TD1__RGMII_TD1             0x060 0x374 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TD1__GPIO6_IO21            0x060 0x374 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TD2__HSI_RX_DATA           0x064 0x378 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TD2__RGMII_TD2             0x064 0x378 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TD2__GPIO6_IO22            0x064 0x378 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TD3__HSI_RX_WAKE           0x068 0x37c 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TD3__RGMII_TD3             0x068 0x37c 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TD3__GPIO6_IO23            0x068 0x37c 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_RX_CTL__USB_H3_DATA        0x06c 0x380 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RX_CTL__RGMII_RX_CTL       0x06c 0x380 0x858 0x1 0x0
-#define MX6QDL_PAD_RGMII_RX_CTL__GPIO6_IO24         0x06c 0x380 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_RD0__HSI_RX_READY          0x070 0x384 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RD0__RGMII_RD0             0x070 0x384 0x848 0x1 0x0
-#define MX6QDL_PAD_RGMII_RD0__GPIO6_IO25            0x070 0x384 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TX_CTL__USB_H2_STROBE      0x074 0x388 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_TX_CTL__RGMII_TX_CTL       0x074 0x388 0x000 0x1 0x0
-#define MX6QDL_PAD_RGMII_TX_CTL__GPIO6_IO26         0x074 0x388 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_TX_CTL__ENET_REF_CLK       0x074 0x388 0x83c 0x7 0x0
-#define MX6QDL_PAD_RGMII_RD1__HSI_TX_FLAG           0x078 0x38c 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RD1__RGMII_RD1             0x078 0x38c 0x84c 0x1 0x0
-#define MX6QDL_PAD_RGMII_RD1__GPIO6_IO27            0x078 0x38c 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_RD2__HSI_TX_DATA           0x07c 0x390 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RD2__RGMII_RD2             0x07c 0x390 0x850 0x1 0x0
-#define MX6QDL_PAD_RGMII_RD2__GPIO6_IO28            0x07c 0x390 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_RD3__HSI_TX_WAKE           0x080 0x394 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RD3__RGMII_RD3             0x080 0x394 0x854 0x1 0x0
-#define MX6QDL_PAD_RGMII_RD3__GPIO6_IO29            0x080 0x394 0x000 0x5 0x0
-#define MX6QDL_PAD_RGMII_RXC__USB_H3_STROBE         0x084 0x398 0x000 0x0 0x0
-#define MX6QDL_PAD_RGMII_RXC__RGMII_RXC             0x084 0x398 0x844 0x1 0x0
-#define MX6QDL_PAD_RGMII_RXC__GPIO6_IO30            0x084 0x398 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A25__EIM_ADDR25              0x088 0x39c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A25__ECSPI4_SS1              0x088 0x39c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A25__ECSPI2_RDY              0x088 0x39c 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_A25__IPU1_DI1_PIN12          0x088 0x39c 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_A25__IPU1_DI0_D1_CS          0x088 0x39c 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_A25__GPIO5_IO02              0x088 0x39c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A25__HDMI_TX_CEC_LINE        0x088 0x39c 0x88c 0x6 0x0
-#define MX6QDL_PAD_EIM_EB2__EIM_EB2_B               0x08c 0x3a0 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_EB2__ECSPI1_SS0              0x08c 0x3a0 0x800 0x1 0x0
-#define MX6QDL_PAD_EIM_EB2__IPU2_CSI1_DATA19        0x08c 0x3a0 0x8d4 0x3 0x0
-#define MX6QDL_PAD_EIM_EB2__HDMI_TX_DDC_SCL         0x08c 0x3a0 0x890 0x4 0x0
-#define MX6QDL_PAD_EIM_EB2__GPIO2_IO30              0x08c 0x3a0 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_EB2__I2C2_SCL                0x08c 0x3a0 0x8a0 0x6 0x0
-#define MX6QDL_PAD_EIM_EB2__SRC_BOOT_CFG30          0x08c 0x3a0 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D16__EIM_DATA16              0x090 0x3a4 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D16__ECSPI1_SCLK             0x090 0x3a4 0x7f4 0x1 0x0
-#define MX6QDL_PAD_EIM_D16__IPU1_DI0_PIN05          0x090 0x3a4 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D16__IPU2_CSI1_DATA18        0x090 0x3a4 0x8d0 0x3 0x0
-#define MX6QDL_PAD_EIM_D16__HDMI_TX_DDC_SDA         0x090 0x3a4 0x894 0x4 0x0
-#define MX6QDL_PAD_EIM_D16__GPIO3_IO16              0x090 0x3a4 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D16__I2C2_SDA                0x090 0x3a4 0x8a4 0x6 0x0
-#define MX6QDL_PAD_EIM_D17__EIM_DATA17              0x094 0x3a8 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D17__ECSPI1_MISO             0x094 0x3a8 0x7f8 0x1 0x0
-#define MX6QDL_PAD_EIM_D17__IPU1_DI0_PIN06          0x094 0x3a8 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D17__IPU2_CSI1_PIXCLK        0x094 0x3a8 0x8e0 0x3 0x0
-#define MX6QDL_PAD_EIM_D17__DCIC1_OUT               0x094 0x3a8 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D17__GPIO3_IO17              0x094 0x3a8 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D17__I2C3_SCL                0x094 0x3a8 0x8a8 0x6 0x0
-#define MX6QDL_PAD_EIM_D18__EIM_DATA18              0x098 0x3ac 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D18__ECSPI1_MOSI             0x098 0x3ac 0x7fc 0x1 0x0
-#define MX6QDL_PAD_EIM_D18__IPU1_DI0_PIN07          0x098 0x3ac 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D18__IPU2_CSI1_DATA17        0x098 0x3ac 0x8cc 0x3 0x0
-#define MX6QDL_PAD_EIM_D18__IPU1_DI1_D0_CS          0x098 0x3ac 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D18__GPIO3_IO18              0x098 0x3ac 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D18__I2C3_SDA                0x098 0x3ac 0x8ac 0x6 0x0
-#define MX6QDL_PAD_EIM_D19__EIM_DATA19              0x09c 0x3b0 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D19__ECSPI1_SS1              0x09c 0x3b0 0x804 0x1 0x0
-#define MX6QDL_PAD_EIM_D19__IPU1_DI0_PIN08          0x09c 0x3b0 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D19__IPU2_CSI1_DATA16        0x09c 0x3b0 0x8c8 0x3 0x0
-#define MX6QDL_PAD_EIM_D19__UART1_CTS_B             0x09c 0x3b0 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D19__UART1_RTS_B             0x09c 0x3b0 0x91c 0x4 0x0
-#define MX6QDL_PAD_EIM_D19__GPIO3_IO19              0x09c 0x3b0 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D19__EPIT1_OUT               0x09c 0x3b0 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D20__EIM_DATA20              0x0a0 0x3b4 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D20__ECSPI4_SS0              0x0a0 0x3b4 0x824 0x1 0x0
-#define MX6QDL_PAD_EIM_D20__IPU1_DI0_PIN16          0x0a0 0x3b4 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D20__IPU2_CSI1_DATA15        0x0a0 0x3b4 0x8c4 0x3 0x0
-#define MX6QDL_PAD_EIM_D20__UART1_RTS_B             0x0a0 0x3b4 0x91c 0x4 0x1
-#define MX6QDL_PAD_EIM_D20__UART1_CTS_B             0x0a0 0x3b4 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D20__GPIO3_IO20              0x0a0 0x3b4 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D20__EPIT2_OUT               0x0a0 0x3b4 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D21__EIM_DATA21              0x0a4 0x3b8 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D21__ECSPI4_SCLK             0x0a4 0x3b8 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D21__IPU1_DI0_PIN17          0x0a4 0x3b8 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D21__IPU2_CSI1_DATA11        0x0a4 0x3b8 0x8b4 0x3 0x0
-#define MX6QDL_PAD_EIM_D21__USB_OTG_OC              0x0a4 0x3b8 0x944 0x4 0x0
-#define MX6QDL_PAD_EIM_D21__GPIO3_IO21              0x0a4 0x3b8 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D21__I2C1_SCL                0x0a4 0x3b8 0x898 0x6 0x0
-#define MX6QDL_PAD_EIM_D21__SPDIF_IN                0x0a4 0x3b8 0x914 0x7 0x0
-#define MX6QDL_PAD_EIM_D22__EIM_DATA22              0x0a8 0x3bc 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D22__ECSPI4_MISO             0x0a8 0x3bc 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D22__IPU1_DI0_PIN01          0x0a8 0x3bc 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D22__IPU2_CSI1_DATA10        0x0a8 0x3bc 0x8b0 0x3 0x0
-#define MX6QDL_PAD_EIM_D22__USB_OTG_PWR             0x0a8 0x3bc 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D22__GPIO3_IO22              0x0a8 0x3bc 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D22__SPDIF_OUT               0x0a8 0x3bc 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D23__EIM_DATA23              0x0ac 0x3c0 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D23__IPU1_DI0_D0_CS          0x0ac 0x3c0 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D23__UART3_CTS_B             0x0ac 0x3c0 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D23__UART3_RTS_B             0x0ac 0x3c0 0x92c 0x2 0x0
-#define MX6QDL_PAD_EIM_D23__UART1_DCD_B             0x0ac 0x3c0 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_D23__IPU2_CSI1_DATA_EN       0x0ac 0x3c0 0x8d8 0x4 0x0
-#define MX6QDL_PAD_EIM_D23__GPIO3_IO23              0x0ac 0x3c0 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D23__IPU1_DI1_PIN02          0x0ac 0x3c0 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D23__IPU1_DI1_PIN14          0x0ac 0x3c0 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_EB3__EIM_EB3_B               0x0b0 0x3c4 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_EB3__ECSPI4_RDY              0x0b0 0x3c4 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_EB3__UART3_RTS_B             0x0b0 0x3c4 0x92c 0x2 0x1
-#define MX6QDL_PAD_EIM_EB3__UART3_CTS_B             0x0b0 0x3c4 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_EB3__UART1_RI_B              0x0b0 0x3c4 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_EB3__IPU2_CSI1_HSYNC         0x0b0 0x3c4 0x8dc 0x4 0x0
-#define MX6QDL_PAD_EIM_EB3__GPIO2_IO31              0x0b0 0x3c4 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_EB3__IPU1_DI1_PIN03          0x0b0 0x3c4 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_EB3__SRC_BOOT_CFG31          0x0b0 0x3c4 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D24__EIM_DATA24              0x0b4 0x3c8 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D24__ECSPI4_SS2              0x0b4 0x3c8 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D24__UART3_TX_DATA           0x0b4 0x3c8 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D24__UART3_RX_DATA           0x0b4 0x3c8 0x930 0x2 0x0
-#define MX6QDL_PAD_EIM_D24__ECSPI1_SS2              0x0b4 0x3c8 0x808 0x3 0x0
-#define MX6QDL_PAD_EIM_D24__ECSPI2_SS2              0x0b4 0x3c8 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D24__GPIO3_IO24              0x0b4 0x3c8 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D24__AUD5_RXFS               0x0b4 0x3c8 0x7d8 0x6 0x0
-#define MX6QDL_PAD_EIM_D24__UART1_DTR_B             0x0b4 0x3c8 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D25__EIM_DATA25              0x0b8 0x3cc 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D25__ECSPI4_SS3              0x0b8 0x3cc 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D25__UART3_RX_DATA           0x0b8 0x3cc 0x930 0x2 0x1
-#define MX6QDL_PAD_EIM_D25__UART3_TX_DATA           0x0b8 0x3cc 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D25__ECSPI1_SS3              0x0b8 0x3cc 0x80c 0x3 0x0
-#define MX6QDL_PAD_EIM_D25__ECSPI2_SS3              0x0b8 0x3cc 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D25__GPIO3_IO25              0x0b8 0x3cc 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D25__AUD5_RXC                0x0b8 0x3cc 0x7d4 0x6 0x0
-#define MX6QDL_PAD_EIM_D25__UART1_DSR_B             0x0b8 0x3cc 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D26__EIM_DATA26              0x0bc 0x3d0 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D26__IPU1_DI1_PIN11          0x0bc 0x3d0 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D26__IPU1_CSI0_DATA01        0x0bc 0x3d0 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D26__IPU2_CSI1_DATA14        0x0bc 0x3d0 0x8c0 0x3 0x0
-#define MX6QDL_PAD_EIM_D26__UART2_TX_DATA           0x0bc 0x3d0 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D26__UART2_RX_DATA           0x0bc 0x3d0 0x928 0x4 0x0
-#define MX6QDL_PAD_EIM_D26__GPIO3_IO26              0x0bc 0x3d0 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D26__IPU1_SISG2              0x0bc 0x3d0 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D26__IPU1_DISP1_DATA22       0x0bc 0x3d0 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D27__EIM_DATA27              0x0c0 0x3d4 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D27__IPU1_DI1_PIN13          0x0c0 0x3d4 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D27__IPU1_CSI0_DATA00        0x0c0 0x3d4 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D27__IPU2_CSI1_DATA13        0x0c0 0x3d4 0x8bc 0x3 0x0
-#define MX6QDL_PAD_EIM_D27__UART2_RX_DATA           0x0c0 0x3d4 0x928 0x4 0x1
-#define MX6QDL_PAD_EIM_D27__UART2_TX_DATA           0x0c0 0x3d4 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D27__GPIO3_IO27              0x0c0 0x3d4 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D27__IPU1_SISG3              0x0c0 0x3d4 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D27__IPU1_DISP1_DATA23       0x0c0 0x3d4 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D28__EIM_DATA28              0x0c4 0x3d8 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D28__I2C1_SDA                0x0c4 0x3d8 0x89c 0x1 0x0
-#define MX6QDL_PAD_EIM_D28__ECSPI4_MOSI             0x0c4 0x3d8 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D28__IPU2_CSI1_DATA12        0x0c4 0x3d8 0x8b8 0x3 0x0
-#define MX6QDL_PAD_EIM_D28__UART2_CTS_B             0x0c4 0x3d8 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D28__UART2_RTS_B             0x0c4 0x3d8 0x924 0x4 0x0
-#define MX6QDL_PAD_EIM_D28__UART2_DTE_CTS_B         0x0c4 0x3d8 0x924 0x4 0x0
-#define MX6QDL_PAD_EIM_D28__UART2_DTE_RTS_B         0x0c4 0x3d8 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D28__GPIO3_IO28              0x0c4 0x3d8 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D28__IPU1_EXT_TRIG           0x0c4 0x3d8 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_D28__IPU1_DI0_PIN13          0x0c4 0x3d8 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D29__EIM_DATA29              0x0c8 0x3dc 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D29__IPU1_DI1_PIN15          0x0c8 0x3dc 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D29__ECSPI4_SS0              0x0c8 0x3dc 0x824 0x2 0x1
-#define MX6QDL_PAD_EIM_D29__UART2_RTS_B             0x0c8 0x3dc 0x924 0x4 0x1
-#define MX6QDL_PAD_EIM_D29__UART2_CTS_B             0x0c8 0x3dc 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D29__UART2_DTE_RTS_B         0x0c8 0x3dc 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D29__UART2_DTE_CTS_B         0x0c8 0x3dc 0x924 0x4 0x1
-#define MX6QDL_PAD_EIM_D29__GPIO3_IO29              0x0c8 0x3dc 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D29__IPU2_CSI1_VSYNC         0x0c8 0x3dc 0x8e4 0x6 0x0
-#define MX6QDL_PAD_EIM_D29__IPU1_DI0_PIN14          0x0c8 0x3dc 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_D30__EIM_DATA30              0x0cc 0x3e0 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D30__IPU1_DISP1_DATA21       0x0cc 0x3e0 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D30__IPU1_DI0_PIN11          0x0cc 0x3e0 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D30__IPU1_CSI0_DATA03        0x0cc 0x3e0 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_D30__UART3_CTS_B             0x0cc 0x3e0 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D30__UART3_RTS_B             0x0cc 0x3e0 0x92c 0x4 0x2
-#define MX6QDL_PAD_EIM_D30__GPIO3_IO30              0x0cc 0x3e0 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D30__USB_H1_OC               0x0cc 0x3e0 0x948 0x6 0x0
-#define MX6QDL_PAD_EIM_D31__EIM_DATA31              0x0d0 0x3e4 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_D31__IPU1_DISP1_DATA20       0x0d0 0x3e4 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_D31__IPU1_DI0_PIN12          0x0d0 0x3e4 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_D31__IPU1_CSI0_DATA02        0x0d0 0x3e4 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_D31__UART3_RTS_B             0x0d0 0x3e4 0x92c 0x4 0x3
-#define MX6QDL_PAD_EIM_D31__UART3_CTS_B             0x0d0 0x3e4 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_D31__GPIO3_IO31              0x0d0 0x3e4 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_D31__USB_H1_PWR              0x0d0 0x3e4 0x000 0x6 0x0
-#define MX6QDL_PAD_EIM_A24__EIM_ADDR24              0x0d4 0x3e8 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A24__IPU1_DISP1_DATA19       0x0d4 0x3e8 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A24__IPU2_CSI1_DATA19        0x0d4 0x3e8 0x8d4 0x2 0x1
-#define MX6QDL_PAD_EIM_A24__IPU2_SISG2              0x0d4 0x3e8 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_A24__IPU1_SISG2              0x0d4 0x3e8 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_A24__GPIO5_IO04              0x0d4 0x3e8 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A24__SRC_BOOT_CFG24          0x0d4 0x3e8 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A23__EIM_ADDR23              0x0d8 0x3ec 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A23__IPU1_DISP1_DATA18       0x0d8 0x3ec 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A23__IPU2_CSI1_DATA18        0x0d8 0x3ec 0x8d0 0x2 0x1
-#define MX6QDL_PAD_EIM_A23__IPU2_SISG3              0x0d8 0x3ec 0x000 0x3 0x0
-#define MX6QDL_PAD_EIM_A23__IPU1_SISG3              0x0d8 0x3ec 0x000 0x4 0x0
-#define MX6QDL_PAD_EIM_A23__GPIO6_IO06              0x0d8 0x3ec 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A23__SRC_BOOT_CFG23          0x0d8 0x3ec 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A22__EIM_ADDR22              0x0dc 0x3f0 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A22__IPU1_DISP1_DATA17       0x0dc 0x3f0 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A22__IPU2_CSI1_DATA17        0x0dc 0x3f0 0x8cc 0x2 0x1
-#define MX6QDL_PAD_EIM_A22__GPIO2_IO16              0x0dc 0x3f0 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A22__SRC_BOOT_CFG22          0x0dc 0x3f0 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A21__EIM_ADDR21              0x0e0 0x3f4 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A21__IPU1_DISP1_DATA16       0x0e0 0x3f4 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A21__IPU2_CSI1_DATA16        0x0e0 0x3f4 0x8c8 0x2 0x1
-#define MX6QDL_PAD_EIM_A21__GPIO2_IO17              0x0e0 0x3f4 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A21__SRC_BOOT_CFG21          0x0e0 0x3f4 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A20__EIM_ADDR20              0x0e4 0x3f8 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A20__IPU1_DISP1_DATA15       0x0e4 0x3f8 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A20__IPU2_CSI1_DATA15        0x0e4 0x3f8 0x8c4 0x2 0x1
-#define MX6QDL_PAD_EIM_A20__GPIO2_IO18              0x0e4 0x3f8 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A20__SRC_BOOT_CFG20          0x0e4 0x3f8 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A19__EIM_ADDR19              0x0e8 0x3fc 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A19__IPU1_DISP1_DATA14       0x0e8 0x3fc 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A19__IPU2_CSI1_DATA14        0x0e8 0x3fc 0x8c0 0x2 0x1
-#define MX6QDL_PAD_EIM_A19__GPIO2_IO19              0x0e8 0x3fc 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A19__SRC_BOOT_CFG19          0x0e8 0x3fc 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A18__EIM_ADDR18              0x0ec 0x400 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A18__IPU1_DISP1_DATA13       0x0ec 0x400 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A18__IPU2_CSI1_DATA13        0x0ec 0x400 0x8bc 0x2 0x1
-#define MX6QDL_PAD_EIM_A18__GPIO2_IO20              0x0ec 0x400 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A18__SRC_BOOT_CFG18          0x0ec 0x400 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A17__EIM_ADDR17              0x0f0 0x404 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A17__IPU1_DISP1_DATA12       0x0f0 0x404 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A17__IPU2_CSI1_DATA12        0x0f0 0x404 0x8b8 0x2 0x1
-#define MX6QDL_PAD_EIM_A17__GPIO2_IO21              0x0f0 0x404 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A17__SRC_BOOT_CFG17          0x0f0 0x404 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_A16__EIM_ADDR16              0x0f4 0x408 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_A16__IPU1_DI1_DISP_CLK       0x0f4 0x408 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_A16__IPU2_CSI1_PIXCLK        0x0f4 0x408 0x8e0 0x2 0x1
-#define MX6QDL_PAD_EIM_A16__GPIO2_IO22              0x0f4 0x408 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_A16__SRC_BOOT_CFG16          0x0f4 0x408 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_CS0__EIM_CS0_B               0x0f8 0x40c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_CS0__IPU1_DI1_PIN05          0x0f8 0x40c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_CS0__ECSPI2_SCLK             0x0f8 0x40c 0x810 0x2 0x0
-#define MX6QDL_PAD_EIM_CS0__GPIO2_IO23              0x0f8 0x40c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_CS1__EIM_CS1_B               0x0fc 0x410 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_CS1__IPU1_DI1_PIN06          0x0fc 0x410 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_CS1__ECSPI2_MOSI             0x0fc 0x410 0x818 0x2 0x0
-#define MX6QDL_PAD_EIM_CS1__GPIO2_IO24              0x0fc 0x410 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_OE__EIM_OE_B                 0x100 0x414 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_OE__IPU1_DI1_PIN07           0x100 0x414 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_OE__ECSPI2_MISO              0x100 0x414 0x814 0x2 0x0
-#define MX6QDL_PAD_EIM_OE__GPIO2_IO25               0x100 0x414 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_RW__EIM_RW                   0x104 0x418 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_RW__IPU1_DI1_PIN08           0x104 0x418 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_RW__ECSPI2_SS0               0x104 0x418 0x81c 0x2 0x0
-#define MX6QDL_PAD_EIM_RW__GPIO2_IO26               0x104 0x418 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_RW__SRC_BOOT_CFG29           0x104 0x418 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_LBA__EIM_LBA_B               0x108 0x41c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_LBA__IPU1_DI1_PIN17          0x108 0x41c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_LBA__ECSPI2_SS1              0x108 0x41c 0x820 0x2 0x0
-#define MX6QDL_PAD_EIM_LBA__GPIO2_IO27              0x108 0x41c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_LBA__SRC_BOOT_CFG26          0x108 0x41c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_EB0__EIM_EB0_B               0x10c 0x420 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_EB0__IPU1_DISP1_DATA11       0x10c 0x420 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_EB0__IPU2_CSI1_DATA11        0x10c 0x420 0x8b4 0x2 0x1
-#define MX6QDL_PAD_EIM_EB0__CCM_PMIC_READY          0x10c 0x420 0x7f0 0x4 0x0
-#define MX6QDL_PAD_EIM_EB0__GPIO2_IO28              0x10c 0x420 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_EB0__SRC_BOOT_CFG27          0x10c 0x420 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_EB1__EIM_EB1_B               0x110 0x424 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_EB1__IPU1_DISP1_DATA10       0x110 0x424 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_EB1__IPU2_CSI1_DATA10        0x110 0x424 0x8b0 0x2 0x1
-#define MX6QDL_PAD_EIM_EB1__GPIO2_IO29              0x110 0x424 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_EB1__SRC_BOOT_CFG28          0x110 0x424 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA0__EIM_AD00                0x114 0x428 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA0__IPU1_DISP1_DATA09       0x114 0x428 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA0__IPU2_CSI1_DATA09        0x114 0x428 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA0__GPIO3_IO00              0x114 0x428 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA0__SRC_BOOT_CFG00          0x114 0x428 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA1__EIM_AD01                0x118 0x42c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA1__IPU1_DISP1_DATA08       0x118 0x42c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA1__IPU2_CSI1_DATA08        0x118 0x42c 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA1__GPIO3_IO01              0x118 0x42c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA1__SRC_BOOT_CFG01          0x118 0x42c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA2__EIM_AD02                0x11c 0x430 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA2__IPU1_DISP1_DATA07       0x11c 0x430 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA2__IPU2_CSI1_DATA07        0x11c 0x430 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA2__GPIO3_IO02              0x11c 0x430 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA2__SRC_BOOT_CFG02          0x11c 0x430 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA3__EIM_AD03                0x120 0x434 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA3__IPU1_DISP1_DATA06       0x120 0x434 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA3__IPU2_CSI1_DATA06        0x120 0x434 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA3__GPIO3_IO03              0x120 0x434 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA3__SRC_BOOT_CFG03          0x120 0x434 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA4__EIM_AD04                0x124 0x438 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA4__IPU1_DISP1_DATA05       0x124 0x438 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA4__IPU2_CSI1_DATA05        0x124 0x438 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA4__GPIO3_IO04              0x124 0x438 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA4__SRC_BOOT_CFG04          0x124 0x438 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA5__EIM_AD05                0x128 0x43c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA5__IPU1_DISP1_DATA04       0x128 0x43c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA5__IPU2_CSI1_DATA04        0x128 0x43c 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA5__GPIO3_IO05              0x128 0x43c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA5__SRC_BOOT_CFG05          0x128 0x43c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA6__EIM_AD06                0x12c 0x440 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA6__IPU1_DISP1_DATA03       0x12c 0x440 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA6__IPU2_CSI1_DATA03        0x12c 0x440 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA6__GPIO3_IO06              0x12c 0x440 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA6__SRC_BOOT_CFG06          0x12c 0x440 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA7__EIM_AD07                0x130 0x444 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA7__IPU1_DISP1_DATA02       0x130 0x444 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA7__IPU2_CSI1_DATA02        0x130 0x444 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA7__GPIO3_IO07              0x130 0x444 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA7__SRC_BOOT_CFG07          0x130 0x444 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA8__EIM_AD08                0x134 0x448 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA8__IPU1_DISP1_DATA01       0x134 0x448 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA8__IPU2_CSI1_DATA01        0x134 0x448 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA8__GPIO3_IO08              0x134 0x448 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA8__SRC_BOOT_CFG08          0x134 0x448 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA9__EIM_AD09                0x138 0x44c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA9__IPU1_DISP1_DATA00       0x138 0x44c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA9__IPU2_CSI1_DATA00        0x138 0x44c 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA9__GPIO3_IO09              0x138 0x44c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA9__SRC_BOOT_CFG09          0x138 0x44c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA10__EIM_AD10               0x13c 0x450 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA10__IPU1_DI1_PIN15         0x13c 0x450 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA10__IPU2_CSI1_DATA_EN      0x13c 0x450 0x8d8 0x2 0x1
-#define MX6QDL_PAD_EIM_DA10__GPIO3_IO10             0x13c 0x450 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA10__SRC_BOOT_CFG10         0x13c 0x450 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA11__EIM_AD11               0x140 0x454 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA11__IPU1_DI1_PIN02         0x140 0x454 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA11__IPU2_CSI1_HSYNC        0x140 0x454 0x8dc 0x2 0x1
-#define MX6QDL_PAD_EIM_DA11__GPIO3_IO11             0x140 0x454 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA11__SRC_BOOT_CFG11         0x140 0x454 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA12__EIM_AD12               0x144 0x458 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA12__IPU1_DI1_PIN03         0x144 0x458 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA12__IPU2_CSI1_VSYNC        0x144 0x458 0x8e4 0x2 0x1
-#define MX6QDL_PAD_EIM_DA12__GPIO3_IO12             0x144 0x458 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA12__SRC_BOOT_CFG12         0x144 0x458 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA13__EIM_AD13               0x148 0x45c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA13__IPU1_DI1_D0_CS         0x148 0x45c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA13__GPIO3_IO13             0x148 0x45c 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA13__SRC_BOOT_CFG13         0x148 0x45c 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA14__EIM_AD14               0x14c 0x460 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA14__IPU1_DI1_D1_CS         0x14c 0x460 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA14__GPIO3_IO14             0x14c 0x460 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA14__SRC_BOOT_CFG14         0x14c 0x460 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_DA15__EIM_AD15               0x150 0x464 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_DA15__IPU1_DI1_PIN01         0x150 0x464 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_DA15__IPU1_DI1_PIN04         0x150 0x464 0x000 0x2 0x0
-#define MX6QDL_PAD_EIM_DA15__GPIO3_IO15             0x150 0x464 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_DA15__SRC_BOOT_CFG15         0x150 0x464 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_WAIT__EIM_WAIT_B             0x154 0x468 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_WAIT__EIM_DTACK_B            0x154 0x468 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_WAIT__GPIO5_IO00             0x154 0x468 0x000 0x5 0x0
-#define MX6QDL_PAD_EIM_WAIT__SRC_BOOT_CFG25         0x154 0x468 0x000 0x7 0x0
-#define MX6QDL_PAD_EIM_BCLK__EIM_BCLK               0x158 0x46c 0x000 0x0 0x0
-#define MX6QDL_PAD_EIM_BCLK__IPU1_DI1_PIN16         0x158 0x46c 0x000 0x1 0x0
-#define MX6QDL_PAD_EIM_BCLK__GPIO6_IO31             0x158 0x46c 0x000 0x5 0x0
-#define MX6QDL_PAD_DI0_DISP_CLK__IPU1_DI0_DISP_CLK  0x15c 0x470 0x000 0x0 0x0
-#define MX6QDL_PAD_DI0_DISP_CLK__IPU2_DI0_DISP_CLK  0x15c 0x470 0x000 0x1 0x0
-#define MX6QDL_PAD_DI0_DISP_CLK__GPIO4_IO16         0x15c 0x470 0x000 0x5 0x0
-#define MX6QDL_PAD_DI0_PIN15__IPU1_DI0_PIN15        0x160 0x474 0x000 0x0 0x0
-#define MX6QDL_PAD_DI0_PIN15__IPU2_DI0_PIN15        0x160 0x474 0x000 0x1 0x0
-#define MX6QDL_PAD_DI0_PIN15__AUD6_TXC              0x160 0x474 0x000 0x2 0x0
-#define MX6QDL_PAD_DI0_PIN15__GPIO4_IO17            0x160 0x474 0x000 0x5 0x0
-#define MX6QDL_PAD_DI0_PIN2__IPU1_DI0_PIN02         0x164 0x478 0x000 0x0 0x0
-#define MX6QDL_PAD_DI0_PIN2__IPU2_DI0_PIN02         0x164 0x478 0x000 0x1 0x0
-#define MX6QDL_PAD_DI0_PIN2__AUD6_TXD               0x164 0x478 0x000 0x2 0x0
-#define MX6QDL_PAD_DI0_PIN2__GPIO4_IO18             0x164 0x478 0x000 0x5 0x0
-#define MX6QDL_PAD_DI0_PIN3__IPU1_DI0_PIN03         0x168 0x47c 0x000 0x0 0x0
-#define MX6QDL_PAD_DI0_PIN3__IPU2_DI0_PIN03         0x168 0x47c 0x000 0x1 0x0
-#define MX6QDL_PAD_DI0_PIN3__AUD6_TXFS              0x168 0x47c 0x000 0x2 0x0
-#define MX6QDL_PAD_DI0_PIN3__GPIO4_IO19             0x168 0x47c 0x000 0x5 0x0
-#define MX6QDL_PAD_DI0_PIN4__IPU1_DI0_PIN04         0x16c 0x480 0x000 0x0 0x0
-#define MX6QDL_PAD_DI0_PIN4__IPU2_DI0_PIN04         0x16c 0x480 0x000 0x1 0x0
-#define MX6QDL_PAD_DI0_PIN4__AUD6_RXD               0x16c 0x480 0x000 0x2 0x0
-#define MX6QDL_PAD_DI0_PIN4__SD1_WP                 0x16c 0x480 0x94c 0x3 0x0
-#define MX6QDL_PAD_DI0_PIN4__GPIO4_IO20             0x16c 0x480 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT0__IPU1_DISP0_DATA00    0x170 0x484 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT0__IPU2_DISP0_DATA00    0x170 0x484 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT0__ECSPI3_SCLK          0x170 0x484 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT0__GPIO4_IO21           0x170 0x484 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT1__IPU1_DISP0_DATA01    0x174 0x488 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT1__IPU2_DISP0_DATA01    0x174 0x488 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT1__ECSPI3_MOSI          0x174 0x488 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT1__GPIO4_IO22           0x174 0x488 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT2__IPU1_DISP0_DATA02    0x178 0x48c 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT2__IPU2_DISP0_DATA02    0x178 0x48c 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT2__ECSPI3_MISO          0x178 0x48c 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT2__GPIO4_IO23           0x178 0x48c 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT3__IPU1_DISP0_DATA03    0x17c 0x490 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT3__IPU2_DISP0_DATA03    0x17c 0x490 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT3__ECSPI3_SS0           0x17c 0x490 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT3__GPIO4_IO24           0x17c 0x490 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT4__IPU1_DISP0_DATA04    0x180 0x494 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT4__IPU2_DISP0_DATA04    0x180 0x494 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT4__ECSPI3_SS1           0x180 0x494 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT4__GPIO4_IO25           0x180 0x494 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT5__IPU1_DISP0_DATA05    0x184 0x498 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT5__IPU2_DISP0_DATA05    0x184 0x498 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT5__ECSPI3_SS2           0x184 0x498 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT5__AUD6_RXFS            0x184 0x498 0x000 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT5__GPIO4_IO26           0x184 0x498 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT6__IPU1_DISP0_DATA06    0x188 0x49c 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT6__IPU2_DISP0_DATA06    0x188 0x49c 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT6__ECSPI3_SS3           0x188 0x49c 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT6__AUD6_RXC             0x188 0x49c 0x000 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT6__GPIO4_IO27           0x188 0x49c 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT7__IPU1_DISP0_DATA07    0x18c 0x4a0 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT7__IPU2_DISP0_DATA07    0x18c 0x4a0 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT7__ECSPI3_RDY           0x18c 0x4a0 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT7__GPIO4_IO28           0x18c 0x4a0 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT8__IPU1_DISP0_DATA08    0x190 0x4a4 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT8__IPU2_DISP0_DATA08    0x190 0x4a4 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT8__PWM1_OUT             0x190 0x4a4 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT8__WDOG1_B              0x190 0x4a4 0x000 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT8__GPIO4_IO29           0x190 0x4a4 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT9__IPU1_DISP0_DATA09    0x194 0x4a8 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT9__IPU2_DISP0_DATA09    0x194 0x4a8 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT9__PWM2_OUT             0x194 0x4a8 0x000 0x2 0x0
-#define MX6QDL_PAD_DISP0_DAT9__WDOG2_B              0x194 0x4a8 0x000 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT9__GPIO4_IO30           0x194 0x4a8 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT10__IPU1_DISP0_DATA10   0x198 0x4ac 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT10__IPU2_DISP0_DATA10   0x198 0x4ac 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT10__GPIO4_IO31          0x198 0x4ac 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT11__IPU1_DISP0_DATA11   0x19c 0x4b0 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT11__IPU2_DISP0_DATA11   0x19c 0x4b0 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT11__GPIO5_IO05          0x19c 0x4b0 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT12__IPU1_DISP0_DATA12   0x1a0 0x4b4 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT12__IPU2_DISP0_DATA12   0x1a0 0x4b4 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT12__GPIO5_IO06          0x1a0 0x4b4 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT13__IPU1_DISP0_DATA13   0x1a4 0x4b8 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT13__IPU2_DISP0_DATA13   0x1a4 0x4b8 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT13__AUD5_RXFS           0x1a4 0x4b8 0x7d8 0x3 0x1
-#define MX6QDL_PAD_DISP0_DAT13__GPIO5_IO07          0x1a4 0x4b8 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT14__IPU1_DISP0_DATA14   0x1a8 0x4bc 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT14__IPU2_DISP0_DATA14   0x1a8 0x4bc 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT14__AUD5_RXC            0x1a8 0x4bc 0x7d4 0x3 0x1
-#define MX6QDL_PAD_DISP0_DAT14__GPIO5_IO08          0x1a8 0x4bc 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT15__IPU1_DISP0_DATA15   0x1ac 0x4c0 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT15__IPU2_DISP0_DATA15   0x1ac 0x4c0 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT15__ECSPI1_SS1          0x1ac 0x4c0 0x804 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT15__ECSPI2_SS1          0x1ac 0x4c0 0x820 0x3 0x1
-#define MX6QDL_PAD_DISP0_DAT15__GPIO5_IO09          0x1ac 0x4c0 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT16__IPU1_DISP0_DATA16   0x1b0 0x4c4 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT16__IPU2_DISP0_DATA16   0x1b0 0x4c4 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT16__ECSPI2_MOSI         0x1b0 0x4c4 0x818 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT16__AUD5_TXC            0x1b0 0x4c4 0x7dc 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT16__SDMA_EXT_EVENT0     0x1b0 0x4c4 0x90c 0x4 0x0
-#define MX6QDL_PAD_DISP0_DAT16__GPIO5_IO10          0x1b0 0x4c4 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT17__IPU1_DISP0_DATA17   0x1b4 0x4c8 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT17__IPU2_DISP0_DATA17   0x1b4 0x4c8 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT17__ECSPI2_MISO         0x1b4 0x4c8 0x814 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT17__AUD5_TXD            0x1b4 0x4c8 0x7d0 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT17__SDMA_EXT_EVENT1     0x1b4 0x4c8 0x910 0x4 0x0
-#define MX6QDL_PAD_DISP0_DAT17__GPIO5_IO11          0x1b4 0x4c8 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT18__IPU1_DISP0_DATA18   0x1b8 0x4cc 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT18__IPU2_DISP0_DATA18   0x1b8 0x4cc 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT18__ECSPI2_SS0          0x1b8 0x4cc 0x81c 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT18__AUD5_TXFS           0x1b8 0x4cc 0x7e0 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT18__AUD4_RXFS           0x1b8 0x4cc 0x7c0 0x4 0x0
-#define MX6QDL_PAD_DISP0_DAT18__GPIO5_IO12          0x1b8 0x4cc 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT18__EIM_CS2_B           0x1b8 0x4cc 0x000 0x7 0x0
-#define MX6QDL_PAD_DISP0_DAT19__IPU1_DISP0_DATA19   0x1bc 0x4d0 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT19__IPU2_DISP0_DATA19   0x1bc 0x4d0 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT19__ECSPI2_SCLK         0x1bc 0x4d0 0x810 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT19__AUD5_RXD            0x1bc 0x4d0 0x7cc 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT19__AUD4_RXC            0x1bc 0x4d0 0x7bc 0x4 0x0
-#define MX6QDL_PAD_DISP0_DAT19__GPIO5_IO13          0x1bc 0x4d0 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT19__EIM_CS3_B           0x1bc 0x4d0 0x000 0x7 0x0
-#define MX6QDL_PAD_DISP0_DAT20__IPU1_DISP0_DATA20   0x1c0 0x4d4 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT20__IPU2_DISP0_DATA20   0x1c0 0x4d4 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT20__ECSPI1_SCLK         0x1c0 0x4d4 0x7f4 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT20__AUD4_TXC            0x1c0 0x4d4 0x7c4 0x3 0x0
-#define MX6QDL_PAD_DISP0_DAT20__GPIO5_IO14          0x1c0 0x4d4 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT21__IPU1_DISP0_DATA21   0x1c4 0x4d8 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT21__IPU2_DISP0_DATA21   0x1c4 0x4d8 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT21__ECSPI1_MOSI         0x1c4 0x4d8 0x7fc 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT21__AUD4_TXD            0x1c4 0x4d8 0x7b8 0x3 0x1
-#define MX6QDL_PAD_DISP0_DAT21__GPIO5_IO15          0x1c4 0x4d8 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT22__IPU1_DISP0_DATA22   0x1c8 0x4dc 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT22__IPU2_DISP0_DATA22   0x1c8 0x4dc 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT22__ECSPI1_MISO         0x1c8 0x4dc 0x7f8 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT22__AUD4_TXFS           0x1c8 0x4dc 0x7c8 0x3 0x1
-#define MX6QDL_PAD_DISP0_DAT22__GPIO5_IO16          0x1c8 0x4dc 0x000 0x5 0x0
-#define MX6QDL_PAD_DISP0_DAT23__IPU1_DISP0_DATA23   0x1cc 0x4e0 0x000 0x0 0x0
-#define MX6QDL_PAD_DISP0_DAT23__IPU2_DISP0_DATA23   0x1cc 0x4e0 0x000 0x1 0x0
-#define MX6QDL_PAD_DISP0_DAT23__ECSPI1_SS0          0x1cc 0x4e0 0x800 0x2 0x1
-#define MX6QDL_PAD_DISP0_DAT23__AUD4_RXD            0x1cc 0x4e0 0x7b4 0x3 0x1
-#define MX6QDL_PAD_DISP0_DAT23__GPIO5_IO17          0x1cc 0x4e0 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_MDIO__ENET_MDIO             0x1d0 0x4e4 0x840 0x1 0x0
-#define MX6QDL_PAD_ENET_MDIO__ESAI_RX_CLK           0x1d0 0x4e4 0x86c 0x2 0x0
-#define MX6QDL_PAD_ENET_MDIO__ENET_1588_EVENT1_OUT  0x1d0 0x4e4 0x000 0x4 0x0
-#define MX6QDL_PAD_ENET_MDIO__GPIO1_IO22            0x1d0 0x4e4 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_MDIO__SPDIF_LOCK            0x1d0 0x4e4 0x000 0x6 0x0
-#define MX6QDL_PAD_ENET_REF_CLK__ENET_TX_CLK        0x1d4 0x4e8 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_REF_CLK__ESAI_RX_FS         0x1d4 0x4e8 0x85c 0x2 0x0
-#define MX6QDL_PAD_ENET_REF_CLK__GPIO1_IO23         0x1d4 0x4e8 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_REF_CLK__SPDIF_SR_CLK       0x1d4 0x4e8 0x000 0x6 0x0
-#define MX6QDL_PAD_ENET_RX_ER__USB_OTG_ID           0x1d8 0x4ec 0x004 0x0 0xff0d0100
-#define MX6QDL_PAD_ENET_RX_ER__ENET_RX_ER           0x1d8 0x4ec 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_RX_ER__ESAI_RX_HF_CLK       0x1d8 0x4ec 0x864 0x2 0x0
-#define MX6QDL_PAD_ENET_RX_ER__SPDIF_IN             0x1d8 0x4ec 0x914 0x3 0x1
-#define MX6QDL_PAD_ENET_RX_ER__ENET_1588_EVENT2_OUT 0x1d8 0x4ec 0x000 0x4 0x0
-#define MX6QDL_PAD_ENET_RX_ER__GPIO1_IO24           0x1d8 0x4ec 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_CRS_DV__ENET_RX_EN          0x1dc 0x4f0 0x858 0x1 0x1
-#define MX6QDL_PAD_ENET_CRS_DV__ESAI_TX_CLK         0x1dc 0x4f0 0x870 0x2 0x0
-#define MX6QDL_PAD_ENET_CRS_DV__SPDIF_EXT_CLK       0x1dc 0x4f0 0x918 0x3 0x1
-#define MX6QDL_PAD_ENET_CRS_DV__GPIO1_IO25          0x1dc 0x4f0 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_RXD1__MLB_SIG               0x1e0 0x4f4 0x908 0x0 0x0
-#define MX6QDL_PAD_ENET_RXD1__ENET_RX_DATA1         0x1e0 0x4f4 0x84c 0x1 0x1
-#define MX6QDL_PAD_ENET_RXD1__ESAI_TX_FS            0x1e0 0x4f4 0x860 0x2 0x0
-#define MX6QDL_PAD_ENET_RXD1__ENET_1588_EVENT3_OUT  0x1e0 0x4f4 0x000 0x4 0x0
-#define MX6QDL_PAD_ENET_RXD1__GPIO1_IO26            0x1e0 0x4f4 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_RXD0__ENET_RX_DATA0         0x1e4 0x4f8 0x848 0x1 0x1
-#define MX6QDL_PAD_ENET_RXD0__ESAI_TX_HF_CLK        0x1e4 0x4f8 0x868 0x2 0x0
-#define MX6QDL_PAD_ENET_RXD0__SPDIF_OUT             0x1e4 0x4f8 0x000 0x3 0x0
-#define MX6QDL_PAD_ENET_RXD0__GPIO1_IO27            0x1e4 0x4f8 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_TX_EN__ENET_TX_EN           0x1e8 0x4fc 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_TX_EN__ESAI_TX3_RX2         0x1e8 0x4fc 0x880 0x2 0x0
-#define MX6QDL_PAD_ENET_TX_EN__GPIO1_IO28           0x1e8 0x4fc 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_TXD1__MLB_CLK               0x1ec 0x500 0x900 0x0 0x0
-#define MX6QDL_PAD_ENET_TXD1__ENET_TX_DATA1         0x1ec 0x500 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_TXD1__ESAI_TX2_RX3          0x1ec 0x500 0x87c 0x2 0x0
-#define MX6QDL_PAD_ENET_TXD1__ENET_1588_EVENT0_IN   0x1ec 0x500 0x000 0x4 0x0
-#define MX6QDL_PAD_ENET_TXD1__GPIO1_IO29            0x1ec 0x500 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_TXD0__ENET_TX_DATA0         0x1f0 0x504 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_TXD0__ESAI_TX4_RX1          0x1f0 0x504 0x884 0x2 0x0
-#define MX6QDL_PAD_ENET_TXD0__GPIO1_IO30            0x1f0 0x504 0x000 0x5 0x0
-#define MX6QDL_PAD_ENET_MDC__MLB_DATA               0x1f4 0x508 0x904 0x0 0x0
-#define MX6QDL_PAD_ENET_MDC__ENET_MDC               0x1f4 0x508 0x000 0x1 0x0
-#define MX6QDL_PAD_ENET_MDC__ESAI_TX5_RX0           0x1f4 0x508 0x888 0x2 0x0
-#define MX6QDL_PAD_ENET_MDC__ENET_1588_EVENT1_IN    0x1f4 0x508 0x000 0x4 0x0
-#define MX6QDL_PAD_ENET_MDC__GPIO1_IO31             0x1f4 0x508 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_COL0__ECSPI1_SCLK            0x1f8 0x5c8 0x7f4 0x0 0x2
-#define MX6QDL_PAD_KEY_COL0__ENET_RX_DATA3          0x1f8 0x5c8 0x854 0x1 0x1
-#define MX6QDL_PAD_KEY_COL0__AUD5_TXC               0x1f8 0x5c8 0x7dc 0x2 0x1
-#define MX6QDL_PAD_KEY_COL0__KEY_COL0               0x1f8 0x5c8 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_COL0__UART4_TX_DATA          0x1f8 0x5c8 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_COL0__UART4_RX_DATA          0x1f8 0x5c8 0x938 0x4 0x0
-#define MX6QDL_PAD_KEY_COL0__GPIO4_IO06             0x1f8 0x5c8 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_COL0__DCIC1_OUT              0x1f8 0x5c8 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_ROW0__ECSPI1_MOSI            0x1fc 0x5cc 0x7fc 0x0 0x2
-#define MX6QDL_PAD_KEY_ROW0__ENET_TX_DATA3          0x1fc 0x5cc 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_ROW0__AUD5_TXD               0x1fc 0x5cc 0x7d0 0x2 0x1
-#define MX6QDL_PAD_KEY_ROW0__KEY_ROW0               0x1fc 0x5cc 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_ROW0__UART4_RX_DATA          0x1fc 0x5cc 0x938 0x4 0x1
-#define MX6QDL_PAD_KEY_ROW0__UART4_TX_DATA          0x1fc 0x5cc 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_ROW0__GPIO4_IO07             0x1fc 0x5cc 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_ROW0__DCIC2_OUT              0x1fc 0x5cc 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_COL1__ECSPI1_MISO            0x200 0x5d0 0x7f8 0x0 0x2
-#define MX6QDL_PAD_KEY_COL1__ENET_MDIO              0x200 0x5d0 0x840 0x1 0x1
-#define MX6QDL_PAD_KEY_COL1__AUD5_TXFS              0x200 0x5d0 0x7e0 0x2 0x1
-#define MX6QDL_PAD_KEY_COL1__KEY_COL1               0x200 0x5d0 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_COL1__UART5_TX_DATA          0x200 0x5d0 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_COL1__UART5_RX_DATA          0x200 0x5d0 0x940 0x4 0x0
-#define MX6QDL_PAD_KEY_COL1__GPIO4_IO08             0x200 0x5d0 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_COL1__SD1_VSELECT            0x200 0x5d0 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_ROW1__ECSPI1_SS0             0x204 0x5d4 0x800 0x0 0x2
-#define MX6QDL_PAD_KEY_ROW1__ENET_COL               0x204 0x5d4 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_ROW1__AUD5_RXD               0x204 0x5d4 0x7cc 0x2 0x1
-#define MX6QDL_PAD_KEY_ROW1__KEY_ROW1               0x204 0x5d4 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_ROW1__UART5_RX_DATA          0x204 0x5d4 0x940 0x4 0x1
-#define MX6QDL_PAD_KEY_ROW1__UART5_TX_DATA          0x204 0x5d4 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_ROW1__GPIO4_IO09             0x204 0x5d4 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_ROW1__SD2_VSELECT            0x204 0x5d4 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_COL2__ECSPI1_SS1             0x208 0x5d8 0x804 0x0 0x2
-#define MX6QDL_PAD_KEY_COL2__ENET_RX_DATA2          0x208 0x5d8 0x850 0x1 0x1
-#define MX6QDL_PAD_KEY_COL2__FLEXCAN1_TX            0x208 0x5d8 0x000 0x2 0x0
-#define MX6QDL_PAD_KEY_COL2__KEY_COL2               0x208 0x5d8 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_COL2__ENET_MDC               0x208 0x5d8 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_COL2__GPIO4_IO10             0x208 0x5d8 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_COL2__USB_H1_PWR_CTL_WAKE    0x208 0x5d8 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_ROW2__ECSPI1_SS2             0x20c 0x5dc 0x808 0x0 0x1
-#define MX6QDL_PAD_KEY_ROW2__ENET_TX_DATA2          0x20c 0x5dc 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_ROW2__FLEXCAN1_RX            0x20c 0x5dc 0x7e4 0x2 0x0
-#define MX6QDL_PAD_KEY_ROW2__KEY_ROW2               0x20c 0x5dc 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_ROW2__SD2_VSELECT            0x20c 0x5dc 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_ROW2__GPIO4_IO11             0x20c 0x5dc 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_ROW2__HDMI_TX_CEC_LINE       0x20c 0x5dc 0x88c 0x6 0x1
-#define MX6QDL_PAD_KEY_COL3__ECSPI1_SS3             0x210 0x5e0 0x80c 0x0 0x1
-#define MX6QDL_PAD_KEY_COL3__ENET_CRS               0x210 0x5e0 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_COL3__HDMI_TX_DDC_SCL        0x210 0x5e0 0x890 0x2 0x1
-#define MX6QDL_PAD_KEY_COL3__KEY_COL3               0x210 0x5e0 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_COL3__I2C2_SCL               0x210 0x5e0 0x8a0 0x4 0x1
-#define MX6QDL_PAD_KEY_COL3__GPIO4_IO12             0x210 0x5e0 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_COL3__SPDIF_IN               0x210 0x5e0 0x914 0x6 0x2
-#define MX6QDL_PAD_KEY_ROW3__ASRC_EXT_CLK           0x214 0x5e4 0x7b0 0x1 0x0
-#define MX6QDL_PAD_KEY_ROW3__HDMI_TX_DDC_SDA        0x214 0x5e4 0x894 0x2 0x1
-#define MX6QDL_PAD_KEY_ROW3__KEY_ROW3               0x214 0x5e4 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_ROW3__I2C2_SDA               0x214 0x5e4 0x8a4 0x4 0x1
-#define MX6QDL_PAD_KEY_ROW3__GPIO4_IO13             0x214 0x5e4 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_ROW3__SD1_VSELECT            0x214 0x5e4 0x000 0x6 0x0
-#define MX6QDL_PAD_KEY_COL4__FLEXCAN2_TX            0x218 0x5e8 0x000 0x0 0x0
-#define MX6QDL_PAD_KEY_COL4__IPU1_SISG4             0x218 0x5e8 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_COL4__USB_OTG_OC             0x218 0x5e8 0x944 0x2 0x1
-#define MX6QDL_PAD_KEY_COL4__KEY_COL4               0x218 0x5e8 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_COL4__UART5_RTS_B            0x218 0x5e8 0x93c 0x4 0x0
-#define MX6QDL_PAD_KEY_COL4__UART5_CTS_B            0x218 0x5e8 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_COL4__GPIO4_IO14             0x218 0x5e8 0x000 0x5 0x0
-#define MX6QDL_PAD_KEY_ROW4__FLEXCAN2_RX            0x21c 0x5ec 0x7e8 0x0 0x0
-#define MX6QDL_PAD_KEY_ROW4__IPU1_SISG5             0x21c 0x5ec 0x000 0x1 0x0
-#define MX6QDL_PAD_KEY_ROW4__USB_OTG_PWR            0x21c 0x5ec 0x000 0x2 0x0
-#define MX6QDL_PAD_KEY_ROW4__KEY_ROW4               0x21c 0x5ec 0x000 0x3 0x0
-#define MX6QDL_PAD_KEY_ROW4__UART5_CTS_B            0x21c 0x5ec 0x000 0x4 0x0
-#define MX6QDL_PAD_KEY_ROW4__UART5_RTS_B            0x21c 0x5ec 0x93c 0x4 0x1
-#define MX6QDL_PAD_KEY_ROW4__GPIO4_IO15             0x21c 0x5ec 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_0__CCM_CLKO1                0x220 0x5f0 0x000 0x0 0x0
-#define MX6QDL_PAD_GPIO_0__KEY_COL5                 0x220 0x5f0 0x8e8 0x2 0x0
-#define MX6QDL_PAD_GPIO_0__ASRC_EXT_CLK             0x220 0x5f0 0x7b0 0x3 0x1
-#define MX6QDL_PAD_GPIO_0__EPIT1_OUT                0x220 0x5f0 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_0__GPIO1_IO00               0x220 0x5f0 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_0__USB_H1_PWR               0x220 0x5f0 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_0__SNVS_VIO_5               0x220 0x5f0 0x000 0x7 0x0
-#define MX6QDL_PAD_GPIO_1__ESAI_RX_CLK              0x224 0x5f4 0x86c 0x0 0x1
-#define MX6QDL_PAD_GPIO_1__WDOG2_B                  0x224 0x5f4 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_1__KEY_ROW5                 0x224 0x5f4 0x8f4 0x2 0x0
-#define MX6QDL_PAD_GPIO_1__USB_OTG_ID               0x224 0x5f4 0x004 0x3 0xff0d0101
-#define MX6QDL_PAD_GPIO_1__PWM2_OUT                 0x224 0x5f4 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_1__GPIO1_IO01               0x224 0x5f4 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_1__SD1_CD_B                 0x224 0x5f4 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_9__ESAI_RX_FS               0x228 0x5f8 0x85c 0x0 0x1
-#define MX6QDL_PAD_GPIO_9__WDOG1_B                  0x228 0x5f8 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_9__KEY_COL6                 0x228 0x5f8 0x8ec 0x2 0x0
-#define MX6QDL_PAD_GPIO_9__CCM_REF_EN_B             0x228 0x5f8 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_9__PWM1_OUT                 0x228 0x5f8 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_9__GPIO1_IO09               0x228 0x5f8 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_9__SD1_WP                   0x228 0x5f8 0x94c 0x6 0x1
-#define MX6QDL_PAD_GPIO_3__ESAI_RX_HF_CLK           0x22c 0x5fc 0x864 0x0 0x1
-#define MX6QDL_PAD_GPIO_3__I2C3_SCL                 0x22c 0x5fc 0x8a8 0x2 0x1
-#define MX6QDL_PAD_GPIO_3__XTALOSC_REF_CLK_24M      0x22c 0x5fc 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_3__CCM_CLKO2                0x22c 0x5fc 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_3__GPIO1_IO03               0x22c 0x5fc 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_3__USB_H1_OC                0x22c 0x5fc 0x948 0x6 0x1
-#define MX6QDL_PAD_GPIO_3__MLB_CLK                  0x22c 0x5fc 0x900 0x7 0x1
-#define MX6QDL_PAD_GPIO_6__ESAI_TX_CLK              0x230 0x600 0x870 0x0 0x1
-#define MX6QDL_PAD_GPIO_6__ENET_IRQ		    0x230 0x600 0x03c 0x11 0xff000609
-#define MX6QDL_PAD_GPIO_6__I2C3_SDA                 0x230 0x600 0x8ac 0x2 0x1
-#define MX6QDL_PAD_GPIO_6__GPIO1_IO06               0x230 0x600 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_6__SD2_LCTL                 0x230 0x600 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_6__MLB_SIG                  0x230 0x600 0x908 0x7 0x1
-#define MX6QDL_PAD_GPIO_2__ESAI_TX_FS               0x234 0x604 0x860 0x0 0x1
-#define MX6QDL_PAD_GPIO_2__KEY_ROW6                 0x234 0x604 0x8f8 0x2 0x1
-#define MX6QDL_PAD_GPIO_2__GPIO1_IO02               0x234 0x604 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_2__SD2_WP                   0x234 0x604 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_2__MLB_DATA                 0x234 0x604 0x904 0x7 0x1
-#define MX6QDL_PAD_GPIO_4__ESAI_TX_HF_CLK           0x238 0x608 0x868 0x0 0x1
-#define MX6QDL_PAD_GPIO_4__KEY_COL7                 0x238 0x608 0x8f0 0x2 0x1
-#define MX6QDL_PAD_GPIO_4__GPIO1_IO04               0x238 0x608 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_4__SD2_CD_B                 0x238 0x608 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_5__ESAI_TX2_RX3             0x23c 0x60c 0x87c 0x0 0x1
-#define MX6QDL_PAD_GPIO_5__KEY_ROW7                 0x23c 0x60c 0x8fc 0x2 0x1
-#define MX6QDL_PAD_GPIO_5__CCM_CLKO1                0x23c 0x60c 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_5__GPIO1_IO05               0x23c 0x60c 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_5__I2C3_SCL                 0x23c 0x60c 0x8a8 0x6 0x2
-#define MX6QDL_PAD_GPIO_5__ARM_EVENTI               0x23c 0x60c 0x000 0x7 0x0
-#define MX6QDL_PAD_GPIO_7__ESAI_TX4_RX1             0x240 0x610 0x884 0x0 0x1
-#define MX6QDL_PAD_GPIO_7__ECSPI5_RDY               0x240 0x610 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_7__EPIT1_OUT                0x240 0x610 0x000 0x2 0x0
-#define MX6QDL_PAD_GPIO_7__FLEXCAN1_TX              0x240 0x610 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_7__UART2_TX_DATA            0x240 0x610 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_7__UART2_RX_DATA            0x240 0x610 0x928 0x4 0x2
-#define MX6QDL_PAD_GPIO_7__GPIO1_IO07               0x240 0x610 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_7__SPDIF_LOCK               0x240 0x610 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_7__USB_OTG_HOST_MODE        0x240 0x610 0x000 0x7 0x0
-#define MX6QDL_PAD_GPIO_8__ESAI_TX5_RX0             0x244 0x614 0x888 0x0 0x1
-#define MX6QDL_PAD_GPIO_8__XTALOSC_REF_CLK_32K      0x244 0x614 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_8__EPIT2_OUT                0x244 0x614 0x000 0x2 0x0
-#define MX6QDL_PAD_GPIO_8__FLEXCAN1_RX              0x244 0x614 0x7e4 0x3 0x1
-#define MX6QDL_PAD_GPIO_8__UART2_RX_DATA            0x244 0x614 0x928 0x4 0x3
-#define MX6QDL_PAD_GPIO_8__UART2_TX_DATA            0x244 0x614 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_8__GPIO1_IO08               0x244 0x614 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_8__SPDIF_SR_CLK             0x244 0x614 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_8__USB_OTG_PWR_CTL_WAKE     0x244 0x614 0x000 0x7 0x0
-#define MX6QDL_PAD_GPIO_16__ESAI_TX3_RX2            0x248 0x618 0x880 0x0 0x1
-#define MX6QDL_PAD_GPIO_16__ENET_1588_EVENT2_IN     0x248 0x618 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_16__ENET_REF_CLK            0x248 0x618 0x83c 0x2 0x1
-#define MX6QDL_PAD_GPIO_16__SD1_LCTL                0x248 0x618 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_16__SPDIF_IN                0x248 0x618 0x914 0x4 0x3
-#define MX6QDL_PAD_GPIO_16__GPIO7_IO11              0x248 0x618 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_16__I2C3_SDA                0x248 0x618 0x8ac 0x6 0x2
-#define MX6QDL_PAD_GPIO_16__JTAG_DE_B               0x248 0x618 0x000 0x7 0x0
-#define MX6QDL_PAD_GPIO_17__ESAI_TX0                0x24c 0x61c 0x874 0x0 0x0
-#define MX6QDL_PAD_GPIO_17__ENET_1588_EVENT3_IN     0x24c 0x61c 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_17__CCM_PMIC_READY          0x24c 0x61c 0x7f0 0x2 0x1
-#define MX6QDL_PAD_GPIO_17__SDMA_EXT_EVENT0         0x24c 0x61c 0x90c 0x3 0x1
-#define MX6QDL_PAD_GPIO_17__SPDIF_OUT               0x24c 0x61c 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_17__GPIO7_IO12              0x24c 0x61c 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_18__ESAI_TX1                0x250 0x620 0x878 0x0 0x0
-#define MX6QDL_PAD_GPIO_18__ENET_RX_CLK             0x250 0x620 0x844 0x1 0x1
-#define MX6QDL_PAD_GPIO_18__SD3_VSELECT             0x250 0x620 0x000 0x2 0x0
-#define MX6QDL_PAD_GPIO_18__SDMA_EXT_EVENT1         0x250 0x620 0x910 0x3 0x1
-#define MX6QDL_PAD_GPIO_18__ASRC_EXT_CLK            0x250 0x620 0x7b0 0x4 0x2
-#define MX6QDL_PAD_GPIO_18__GPIO7_IO13              0x250 0x620 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_18__SNVS_VIO_5_CTL          0x250 0x620 0x000 0x6 0x0
-#define MX6QDL_PAD_GPIO_19__KEY_COL5                0x254 0x624 0x8e8 0x0 0x1
-#define MX6QDL_PAD_GPIO_19__ENET_1588_EVENT0_OUT    0x254 0x624 0x000 0x1 0x0
-#define MX6QDL_PAD_GPIO_19__SPDIF_OUT               0x254 0x624 0x000 0x2 0x0
-#define MX6QDL_PAD_GPIO_19__CCM_CLKO1               0x254 0x624 0x000 0x3 0x0
-#define MX6QDL_PAD_GPIO_19__ECSPI1_RDY              0x254 0x624 0x000 0x4 0x0
-#define MX6QDL_PAD_GPIO_19__GPIO4_IO05              0x254 0x624 0x000 0x5 0x0
-#define MX6QDL_PAD_GPIO_19__ENET_TX_ER              0x254 0x624 0x000 0x6 0x0
-#define MX6QDL_PAD_CSI0_PIXCLK__IPU1_CSI0_PIXCLK    0x258 0x628 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_PIXCLK__GPIO5_IO18          0x258 0x628 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_PIXCLK__ARM_EVENTO          0x258 0x628 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_MCLK__IPU1_CSI0_HSYNC       0x25c 0x62c 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_MCLK__CCM_CLKO1             0x25c 0x62c 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_MCLK__GPIO5_IO19            0x25c 0x62c 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_MCLK__ARM_TRACE_CTL         0x25c 0x62c 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DATA_EN__IPU1_CSI0_DATA_EN  0x260 0x630 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DATA_EN__EIM_DATA00         0x260 0x630 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DATA_EN__GPIO5_IO20         0x260 0x630 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DATA_EN__ARM_TRACE_CLK      0x260 0x630 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_VSYNC__IPU1_CSI0_VSYNC      0x264 0x634 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_VSYNC__EIM_DATA01           0x264 0x634 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_VSYNC__GPIO5_IO21           0x264 0x634 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_VSYNC__ARM_TRACE00          0x264 0x634 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT4__IPU1_CSI0_DATA04      0x268 0x638 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT4__EIM_DATA02            0x268 0x638 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT4__ECSPI1_SCLK           0x268 0x638 0x7f4 0x2 0x3
-#define MX6QDL_PAD_CSI0_DAT4__KEY_COL5              0x268 0x638 0x8e8 0x3 0x2
-#define MX6QDL_PAD_CSI0_DAT4__AUD3_TXC              0x268 0x638 0x000 0x4 0x0
-#define MX6QDL_PAD_CSI0_DAT4__GPIO5_IO22            0x268 0x638 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT4__ARM_TRACE01           0x268 0x638 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT5__IPU1_CSI0_DATA05      0x26c 0x63c 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT5__EIM_DATA03            0x26c 0x63c 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT5__ECSPI1_MOSI           0x26c 0x63c 0x7fc 0x2 0x3
-#define MX6QDL_PAD_CSI0_DAT5__KEY_ROW5              0x26c 0x63c 0x8f4 0x3 0x1
-#define MX6QDL_PAD_CSI0_DAT5__AUD3_TXD              0x26c 0x63c 0x000 0x4 0x0
-#define MX6QDL_PAD_CSI0_DAT5__GPIO5_IO23            0x26c 0x63c 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT5__ARM_TRACE02           0x26c 0x63c 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT6__IPU1_CSI0_DATA06      0x270 0x640 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT6__EIM_DATA04            0x270 0x640 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT6__ECSPI1_MISO           0x270 0x640 0x7f8 0x2 0x3
-#define MX6QDL_PAD_CSI0_DAT6__KEY_COL6              0x270 0x640 0x8ec 0x3 0x1
-#define MX6QDL_PAD_CSI0_DAT6__AUD3_TXFS             0x270 0x640 0x000 0x4 0x0
-#define MX6QDL_PAD_CSI0_DAT6__GPIO5_IO24            0x270 0x640 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT6__ARM_TRACE03           0x270 0x640 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT7__IPU1_CSI0_DATA07      0x274 0x644 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT7__EIM_DATA05            0x274 0x644 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT7__ECSPI1_SS0            0x274 0x644 0x800 0x2 0x3
-#define MX6QDL_PAD_CSI0_DAT7__KEY_ROW6              0x274 0x644 0x8f8 0x3 0x2
-#define MX6QDL_PAD_CSI0_DAT7__AUD3_RXD              0x274 0x644 0x000 0x4 0x0
-#define MX6QDL_PAD_CSI0_DAT7__GPIO5_IO25            0x274 0x644 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT7__ARM_TRACE04           0x274 0x644 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT8__IPU1_CSI0_DATA08      0x278 0x648 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT8__EIM_DATA06            0x278 0x648 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT8__ECSPI2_SCLK           0x278 0x648 0x810 0x2 0x2
-#define MX6QDL_PAD_CSI0_DAT8__KEY_COL7              0x278 0x648 0x8f0 0x3 0x2
-#define MX6QDL_PAD_CSI0_DAT8__I2C1_SDA              0x278 0x648 0x89c 0x4 0x1
-#define MX6QDL_PAD_CSI0_DAT8__GPIO5_IO26            0x278 0x648 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT8__ARM_TRACE05           0x278 0x648 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT9__IPU1_CSI0_DATA09      0x27c 0x64c 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT9__EIM_DATA07            0x27c 0x64c 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT9__ECSPI2_MOSI           0x27c 0x64c 0x818 0x2 0x2
-#define MX6QDL_PAD_CSI0_DAT9__KEY_ROW7              0x27c 0x64c 0x8fc 0x3 0x2
-#define MX6QDL_PAD_CSI0_DAT9__I2C1_SCL              0x27c 0x64c 0x898 0x4 0x1
-#define MX6QDL_PAD_CSI0_DAT9__GPIO5_IO27            0x27c 0x64c 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT9__ARM_TRACE06           0x27c 0x64c 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT10__IPU1_CSI0_DATA10     0x280 0x650 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT10__AUD3_RXC             0x280 0x650 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT10__ECSPI2_MISO          0x280 0x650 0x814 0x2 0x2
-#define MX6QDL_PAD_CSI0_DAT10__UART1_TX_DATA        0x280 0x650 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT10__UART1_RX_DATA        0x280 0x650 0x920 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT10__GPIO5_IO28           0x280 0x650 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT10__ARM_TRACE07          0x280 0x650 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT11__IPU1_CSI0_DATA11     0x284 0x654 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT11__AUD3_RXFS            0x284 0x654 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT11__ECSPI2_SS0           0x284 0x654 0x81c 0x2 0x2
-#define MX6QDL_PAD_CSI0_DAT11__UART1_RX_DATA        0x284 0x654 0x920 0x3 0x1
-#define MX6QDL_PAD_CSI0_DAT11__UART1_TX_DATA        0x284 0x654 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT11__GPIO5_IO29           0x284 0x654 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT11__ARM_TRACE08          0x284 0x654 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT12__IPU1_CSI0_DATA12     0x288 0x658 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT12__EIM_DATA08           0x288 0x658 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT12__UART4_TX_DATA        0x288 0x658 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT12__UART4_RX_DATA        0x288 0x658 0x938 0x3 0x2
-#define MX6QDL_PAD_CSI0_DAT12__GPIO5_IO30           0x288 0x658 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT12__ARM_TRACE09          0x288 0x658 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT13__IPU1_CSI0_DATA13     0x28c 0x65c 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT13__EIM_DATA09           0x28c 0x65c 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT13__UART4_RX_DATA        0x28c 0x65c 0x938 0x3 0x3
-#define MX6QDL_PAD_CSI0_DAT13__UART4_TX_DATA        0x28c 0x65c 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT13__GPIO5_IO31           0x28c 0x65c 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT13__ARM_TRACE10          0x28c 0x65c 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT14__IPU1_CSI0_DATA14     0x290 0x660 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT14__EIM_DATA10           0x290 0x660 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT14__UART5_TX_DATA        0x290 0x660 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT14__UART5_RX_DATA        0x290 0x660 0x940 0x3 0x2
-#define MX6QDL_PAD_CSI0_DAT14__GPIO6_IO00           0x290 0x660 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT14__ARM_TRACE11          0x290 0x660 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT15__IPU1_CSI0_DATA15     0x294 0x664 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT15__EIM_DATA11           0x294 0x664 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT15__UART5_RX_DATA        0x294 0x664 0x940 0x3 0x3
-#define MX6QDL_PAD_CSI0_DAT15__UART5_TX_DATA        0x294 0x664 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT15__GPIO6_IO01           0x294 0x664 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT15__ARM_TRACE12          0x294 0x664 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT16__IPU1_CSI0_DATA16     0x298 0x668 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT16__EIM_DATA12           0x298 0x668 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT16__UART4_RTS_B          0x298 0x668 0x934 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT16__UART4_CTS_B          0x298 0x668 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT16__GPIO6_IO02           0x298 0x668 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT16__ARM_TRACE13          0x298 0x668 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT17__IPU1_CSI0_DATA17     0x29c 0x66c 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT17__EIM_DATA13           0x29c 0x66c 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT17__UART4_CTS_B          0x29c 0x66c 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT17__UART4_RTS_B          0x29c 0x66c 0x934 0x3 0x1
-#define MX6QDL_PAD_CSI0_DAT17__GPIO6_IO03           0x29c 0x66c 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT17__ARM_TRACE14          0x29c 0x66c 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT18__IPU1_CSI0_DATA18     0x2a0 0x670 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT18__EIM_DATA14           0x2a0 0x670 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT18__UART5_RTS_B          0x2a0 0x670 0x93c 0x3 0x2
-#define MX6QDL_PAD_CSI0_DAT18__UART5_CTS_B          0x2a0 0x670 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT18__GPIO6_IO04           0x2a0 0x670 0x000 0x5 0x0
-#define MX6QDL_PAD_CSI0_DAT18__ARM_TRACE15          0x2a0 0x670 0x000 0x7 0x0
-#define MX6QDL_PAD_CSI0_DAT19__IPU1_CSI0_DATA19     0x2a4 0x674 0x000 0x0 0x0
-#define MX6QDL_PAD_CSI0_DAT19__EIM_DATA15           0x2a4 0x674 0x000 0x1 0x0
-#define MX6QDL_PAD_CSI0_DAT19__UART5_CTS_B          0x2a4 0x674 0x000 0x3 0x0
-#define MX6QDL_PAD_CSI0_DAT19__UART5_RTS_B          0x2a4 0x674 0x93c 0x3 0x3
-#define MX6QDL_PAD_CSI0_DAT19__GPIO6_IO05           0x2a4 0x674 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT7__SD3_DATA7              0x2a8 0x690 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT7__UART1_TX_DATA          0x2a8 0x690 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT7__UART1_RX_DATA          0x2a8 0x690 0x920 0x1 0x2
-#define MX6QDL_PAD_SD3_DAT7__GPIO6_IO17             0x2a8 0x690 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT6__SD3_DATA6              0x2ac 0x694 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT6__UART1_RX_DATA          0x2ac 0x694 0x920 0x1 0x3
-#define MX6QDL_PAD_SD3_DAT6__UART1_TX_DATA          0x2ac 0x694 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT6__GPIO6_IO18             0x2ac 0x694 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT5__SD3_DATA5              0x2b0 0x698 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT5__UART2_TX_DATA          0x2b0 0x698 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT5__UART2_RX_DATA          0x2b0 0x698 0x928 0x1 0x4
-#define MX6QDL_PAD_SD3_DAT5__GPIO7_IO00             0x2b0 0x698 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT4__SD3_DATA4              0x2b4 0x69c 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT4__UART2_RX_DATA          0x2b4 0x69c 0x928 0x1 0x5
-#define MX6QDL_PAD_SD3_DAT4__UART2_TX_DATA          0x2b4 0x69c 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT4__GPIO7_IO01             0x2b4 0x69c 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_CMD__SD3_CMD                 0x2b8 0x6a0 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_CMD__UART2_CTS_B             0x2b8 0x6a0 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_CMD__UART2_RTS_B             0x2b8 0x6a0 0x924 0x1 0x2
-#define MX6QDL_PAD_SD3_CMD__FLEXCAN1_TX             0x2b8 0x6a0 0x000 0x2 0x0
-#define MX6QDL_PAD_SD3_CMD__GPIO7_IO02              0x2b8 0x6a0 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_CLK__SD3_CLK                 0x2bc 0x6a4 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_CLK__UART2_RTS_B             0x2bc 0x6a4 0x924 0x1 0x3
-#define MX6QDL_PAD_SD3_CLK__UART2_CTS_B             0x2bc 0x6a4 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_CLK__FLEXCAN1_RX             0x2bc 0x6a4 0x7e4 0x2 0x2
-#define MX6QDL_PAD_SD3_CLK__GPIO7_IO03              0x2bc 0x6a4 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT0__SD3_DATA0              0x2c0 0x6a8 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT0__UART1_CTS_B            0x2c0 0x6a8 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT0__UART1_RTS_B            0x2c0 0x6a8 0x91c 0x1 0x2
-#define MX6QDL_PAD_SD3_DAT0__FLEXCAN2_TX            0x2c0 0x6a8 0x000 0x2 0x0
-#define MX6QDL_PAD_SD3_DAT0__GPIO7_IO04             0x2c0 0x6a8 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT1__SD3_DATA1              0x2c4 0x6ac 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT1__UART1_RTS_B            0x2c4 0x6ac 0x91c 0x1 0x3
-#define MX6QDL_PAD_SD3_DAT1__UART1_CTS_B            0x2c4 0x6ac 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT1__FLEXCAN2_RX            0x2c4 0x6ac 0x7e8 0x2 0x1
-#define MX6QDL_PAD_SD3_DAT1__GPIO7_IO05             0x2c4 0x6ac 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT2__SD3_DATA2              0x2c8 0x6b0 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT2__GPIO7_IO06             0x2c8 0x6b0 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_DAT3__SD3_DATA3              0x2cc 0x6b4 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_DAT3__UART3_CTS_B            0x2cc 0x6b4 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_DAT3__UART3_RTS_B            0x2cc 0x6b4 0x92c 0x1 0x4
-#define MX6QDL_PAD_SD3_DAT3__GPIO7_IO07             0x2cc 0x6b4 0x000 0x5 0x0
-#define MX6QDL_PAD_SD3_RST__SD3_RESET               0x2d0 0x6b8 0x000 0x0 0x0
-#define MX6QDL_PAD_SD3_RST__UART3_RTS_B             0x2d0 0x6b8 0x92c 0x1 0x5
-#define MX6QDL_PAD_SD3_RST__UART3_CTS_B             0x2d0 0x6b8 0x000 0x1 0x0
-#define MX6QDL_PAD_SD3_RST__GPIO7_IO08              0x2d0 0x6b8 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CLE__NAND_CLE              0x2d4 0x6bc 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_CLE__IPU2_SISG4            0x2d4 0x6bc 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_CLE__GPIO6_IO07            0x2d4 0x6bc 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_ALE__NAND_ALE              0x2d8 0x6c0 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_ALE__SD4_RESET             0x2d8 0x6c0 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_ALE__GPIO6_IO08            0x2d8 0x6c0 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_WP_B__NAND_WP_B            0x2dc 0x6c4 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_WP_B__IPU2_SISG5           0x2dc 0x6c4 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_WP_B__GPIO6_IO09           0x2dc 0x6c4 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_RB0__NAND_READY_B          0x2e0 0x6c8 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_RB0__IPU2_DI0_PIN01        0x2e0 0x6c8 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_RB0__GPIO6_IO10            0x2e0 0x6c8 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CS0__NAND_CE0_B            0x2e4 0x6cc 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_CS0__GPIO6_IO11            0x2e4 0x6cc 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CS1__NAND_CE1_B            0x2e8 0x6d0 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_CS1__SD4_VSELECT           0x2e8 0x6d0 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_CS1__SD3_VSELECT           0x2e8 0x6d0 0x000 0x2 0x0
-#define MX6QDL_PAD_NANDF_CS1__GPIO6_IO14            0x2e8 0x6d0 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CS2__NAND_CE2_B            0x2ec 0x6d4 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_CS2__IPU1_SISG0            0x2ec 0x6d4 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_CS2__ESAI_TX0              0x2ec 0x6d4 0x874 0x2 0x1
-#define MX6QDL_PAD_NANDF_CS2__EIM_CRE               0x2ec 0x6d4 0x000 0x3 0x0
-#define MX6QDL_PAD_NANDF_CS2__CCM_CLKO2             0x2ec 0x6d4 0x000 0x4 0x0
-#define MX6QDL_PAD_NANDF_CS2__GPIO6_IO15            0x2ec 0x6d4 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CS2__IPU2_SISG0            0x2ec 0x6d4 0x000 0x6 0x0
-#define MX6QDL_PAD_NANDF_CS3__NAND_CE3_B            0x2f0 0x6d8 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_CS3__IPU1_SISG1            0x2f0 0x6d8 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_CS3__ESAI_TX1              0x2f0 0x6d8 0x878 0x2 0x1
-#define MX6QDL_PAD_NANDF_CS3__EIM_ADDR26            0x2f0 0x6d8 0x000 0x3 0x0
-#define MX6QDL_PAD_NANDF_CS3__GPIO6_IO16            0x2f0 0x6d8 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_CS3__IPU2_SISG1            0x2f0 0x6d8 0x000 0x6 0x0
-#define MX6QDL_PAD_SD4_CMD__SD4_CMD                 0x2f4 0x6dc 0x000 0x0 0x0
-#define MX6QDL_PAD_SD4_CMD__NAND_RE_B               0x2f4 0x6dc 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_CMD__UART3_TX_DATA           0x2f4 0x6dc 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_CMD__UART3_RX_DATA           0x2f4 0x6dc 0x930 0x2 0x2
-#define MX6QDL_PAD_SD4_CMD__GPIO7_IO09              0x2f4 0x6dc 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_CLK__SD4_CLK                 0x2f8 0x6e0 0x000 0x0 0x0
-#define MX6QDL_PAD_SD4_CLK__NAND_WE_B               0x2f8 0x6e0 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_CLK__UART3_RX_DATA           0x2f8 0x6e0 0x930 0x2 0x3
-#define MX6QDL_PAD_SD4_CLK__UART3_TX_DATA           0x2f8 0x6e0 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_CLK__GPIO7_IO10              0x2f8 0x6e0 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D0__NAND_DATA00            0x2fc 0x6e4 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D0__SD1_DATA4              0x2fc 0x6e4 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D0__GPIO2_IO00             0x2fc 0x6e4 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D1__NAND_DATA01            0x300 0x6e8 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D1__SD1_DATA5              0x300 0x6e8 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D1__GPIO2_IO01             0x300 0x6e8 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D2__NAND_DATA02            0x304 0x6ec 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D2__SD1_DATA6              0x304 0x6ec 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D2__GPIO2_IO02             0x304 0x6ec 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D3__NAND_DATA03            0x308 0x6f0 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D3__SD1_DATA7              0x308 0x6f0 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D3__GPIO2_IO03             0x308 0x6f0 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D4__NAND_DATA04            0x30c 0x6f4 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D4__SD2_DATA4              0x30c 0x6f4 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D4__GPIO2_IO04             0x30c 0x6f4 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D5__NAND_DATA05            0x310 0x6f8 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D5__SD2_DATA5              0x310 0x6f8 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D5__GPIO2_IO05             0x310 0x6f8 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D6__NAND_DATA06            0x314 0x6fc 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D6__SD2_DATA6              0x314 0x6fc 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D6__GPIO2_IO06             0x314 0x6fc 0x000 0x5 0x0
-#define MX6QDL_PAD_NANDF_D7__NAND_DATA07            0x318 0x700 0x000 0x0 0x0
-#define MX6QDL_PAD_NANDF_D7__SD2_DATA7              0x318 0x700 0x000 0x1 0x0
-#define MX6QDL_PAD_NANDF_D7__GPIO2_IO07             0x318 0x700 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT0__SD4_DATA0              0x31c 0x704 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT0__NAND_DQS               0x31c 0x704 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT0__GPIO2_IO08             0x31c 0x704 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT1__SD4_DATA1              0x320 0x708 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT1__PWM3_OUT               0x320 0x708 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT1__GPIO2_IO09             0x320 0x708 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT2__SD4_DATA2              0x324 0x70c 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT2__PWM4_OUT               0x324 0x70c 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT2__GPIO2_IO10             0x324 0x70c 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT3__SD4_DATA3              0x328 0x710 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT3__GPIO2_IO11             0x328 0x710 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT4__SD4_DATA4              0x32c 0x714 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT4__UART2_RX_DATA          0x32c 0x714 0x928 0x2 0x6
-#define MX6QDL_PAD_SD4_DAT4__UART2_TX_DATA          0x32c 0x714 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT4__GPIO2_IO12             0x32c 0x714 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT5__SD4_DATA5              0x330 0x718 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT5__UART2_RTS_B            0x330 0x718 0x924 0x2 0x4
-#define MX6QDL_PAD_SD4_DAT5__UART2_CTS_B            0x330 0x718 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT5__GPIO2_IO13             0x330 0x718 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT6__SD4_DATA6              0x334 0x71c 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT6__UART2_CTS_B            0x334 0x71c 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT6__UART2_RTS_B            0x334 0x71c 0x924 0x2 0x5
-#define MX6QDL_PAD_SD4_DAT6__GPIO2_IO14             0x334 0x71c 0x000 0x5 0x0
-#define MX6QDL_PAD_SD4_DAT7__SD4_DATA7              0x338 0x720 0x000 0x1 0x0
-#define MX6QDL_PAD_SD4_DAT7__UART2_TX_DATA          0x338 0x720 0x000 0x2 0x0
-#define MX6QDL_PAD_SD4_DAT7__UART2_RX_DATA          0x338 0x720 0x928 0x2 0x7
-#define MX6QDL_PAD_SD4_DAT7__GPIO2_IO15             0x338 0x720 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT1__SD1_DATA1              0x33c 0x724 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_DAT1__ECSPI5_SS0             0x33c 0x724 0x834 0x1 0x1
-#define MX6QDL_PAD_SD1_DAT1__PWM3_OUT               0x33c 0x724 0x000 0x2 0x0
-#define MX6QDL_PAD_SD1_DAT1__GPT_CAPTURE2           0x33c 0x724 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_DAT1__GPIO1_IO17             0x33c 0x724 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT0__SD1_DATA0              0x340 0x728 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_DAT0__ECSPI5_MISO            0x340 0x728 0x82c 0x1 0x1
-#define MX6QDL_PAD_SD1_DAT0__GPT_CAPTURE1           0x340 0x728 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_DAT0__GPIO1_IO16             0x340 0x728 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT3__SD1_DATA3              0x344 0x72c 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_DAT3__ECSPI5_SS2             0x344 0x72c 0x000 0x1 0x0
-#define MX6QDL_PAD_SD1_DAT3__GPT_COMPARE3           0x344 0x72c 0x000 0x2 0x0
-#define MX6QDL_PAD_SD1_DAT3__PWM1_OUT               0x344 0x72c 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_DAT3__WDOG2_B                0x344 0x72c 0x000 0x4 0x0
-#define MX6QDL_PAD_SD1_DAT3__GPIO1_IO21             0x344 0x72c 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT3__WDOG2_RESET_B_DEB      0x344 0x72c 0x000 0x6 0x0
-#define MX6QDL_PAD_SD1_CMD__SD1_CMD                 0x348 0x730 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_CMD__ECSPI5_MOSI             0x348 0x730 0x830 0x1 0x0
-#define MX6QDL_PAD_SD1_CMD__PWM4_OUT                0x348 0x730 0x000 0x2 0x0
-#define MX6QDL_PAD_SD1_CMD__GPT_COMPARE1            0x348 0x730 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_CMD__GPIO1_IO18              0x348 0x730 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT2__SD1_DATA2              0x34c 0x734 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_DAT2__ECSPI5_SS1             0x34c 0x734 0x838 0x1 0x1
-#define MX6QDL_PAD_SD1_DAT2__GPT_COMPARE2           0x34c 0x734 0x000 0x2 0x0
-#define MX6QDL_PAD_SD1_DAT2__PWM2_OUT               0x34c 0x734 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_DAT2__WDOG1_B                0x34c 0x734 0x000 0x4 0x0
-#define MX6QDL_PAD_SD1_DAT2__GPIO1_IO19             0x34c 0x734 0x000 0x5 0x0
-#define MX6QDL_PAD_SD1_DAT2__WDOG1_RESET_B_DEB      0x34c 0x734 0x000 0x6 0x0
-#define MX6QDL_PAD_SD1_CLK__SD1_CLK                 0x350 0x738 0x000 0x0 0x0
-#define MX6QDL_PAD_SD1_CLK__ECSPI5_SCLK             0x350 0x738 0x828 0x1 0x0
-#define MX6QDL_PAD_SD1_CLK__OSC32K_32K_OUT          0x350 0x738 0x000 0x2 0x0
-#define MX6QDL_PAD_SD1_CLK__GPT_CLKIN               0x350 0x738 0x000 0x3 0x0
-#define MX6QDL_PAD_SD1_CLK__GPIO1_IO20              0x350 0x738 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_CLK__SD2_CLK                 0x354 0x73c 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_CLK__ECSPI5_SCLK             0x354 0x73c 0x828 0x1 0x1
-#define MX6QDL_PAD_SD2_CLK__KEY_COL5                0x354 0x73c 0x8e8 0x2 0x3
-#define MX6QDL_PAD_SD2_CLK__AUD4_RXFS               0x354 0x73c 0x7c0 0x3 0x1
-#define MX6QDL_PAD_SD2_CLK__GPIO1_IO10              0x354 0x73c 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_CMD__SD2_CMD                 0x358 0x740 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_CMD__ECSPI5_MOSI             0x358 0x740 0x830 0x1 0x1
-#define MX6QDL_PAD_SD2_CMD__KEY_ROW5                0x358 0x740 0x8f4 0x2 0x2
-#define MX6QDL_PAD_SD2_CMD__AUD4_RXC                0x358 0x740 0x7bc 0x3 0x1
-#define MX6QDL_PAD_SD2_CMD__GPIO1_IO11              0x358 0x740 0x000 0x5 0x0
-#define MX6QDL_PAD_SD2_DAT3__SD2_DATA3              0x35c 0x744 0x000 0x0 0x0
-#define MX6QDL_PAD_SD2_DAT3__ECSPI5_SS3             0x35c 0x744 0x000 0x1 0x0
-#define MX6QDL_PAD_SD2_DAT3__KEY_COL6               0x35c 0x744 0x8ec 0x2 0x2
-#define MX6QDL_PAD_SD2_DAT3__AUD4_TXC               0x35c 0x744 0x7c4 0x3 0x1
-#define MX6QDL_PAD_SD2_DAT3__GPIO1_IO12             0x35c 0x744 0x000 0x5 0x0
+#define MX6Q_PAD_SD2_DAT1__SD2_DATA1              0x04c 0x360 0x000 0x0 0x0
+#define MX6Q_PAD_SD2_DAT1__ECSPI5_SS0             0x04c 0x360 0x834 0x1 0x0
+#define MX6Q_PAD_SD2_DAT1__EIM_CS2_B              0x04c 0x360 0x000 0x2 0x0
+#define MX6Q_PAD_SD2_DAT1__AUD4_TXFS              0x04c 0x360 0x7c8 0x3 0x0
+#define MX6Q_PAD_SD2_DAT1__KEY_COL7               0x04c 0x360 0x8f0 0x4 0x0
+#define MX6Q_PAD_SD2_DAT1__GPIO1_IO14             0x04c 0x360 0x000 0x5 0x0
+#define MX6Q_PAD_SD2_DAT2__SD2_DATA2              0x050 0x364 0x000 0x0 0x0
+#define MX6Q_PAD_SD2_DAT2__ECSPI5_SS1             0x050 0x364 0x838 0x1 0x0
+#define MX6Q_PAD_SD2_DAT2__EIM_CS3_B              0x050 0x364 0x000 0x2 0x0
+#define MX6Q_PAD_SD2_DAT2__AUD4_TXD               0x050 0x364 0x7b8 0x3 0x0
+#define MX6Q_PAD_SD2_DAT2__KEY_ROW6               0x050 0x364 0x8f8 0x4 0x0
+#define MX6Q_PAD_SD2_DAT2__GPIO1_IO13             0x050 0x364 0x000 0x5 0x0
+#define MX6Q_PAD_SD2_DAT0__SD2_DATA0              0x054 0x368 0x000 0x0 0x0
+#define MX6Q_PAD_SD2_DAT0__ECSPI5_MISO            0x054 0x368 0x82c 0x1 0x0
+#define MX6Q_PAD_SD2_DAT0__AUD4_RXD               0x054 0x368 0x7b4 0x3 0x0
+#define MX6Q_PAD_SD2_DAT0__KEY_ROW7               0x054 0x368 0x8fc 0x4 0x0
+#define MX6Q_PAD_SD2_DAT0__GPIO1_IO15             0x054 0x368 0x000 0x5 0x0
+#define MX6Q_PAD_SD2_DAT0__DCIC2_OUT              0x054 0x368 0x000 0x6 0x0
+#define MX6Q_PAD_RGMII_TXC__USB_H2_DATA           0x058 0x36c 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_TXC__RGMII_TXC             0x058 0x36c 0x000 0x1 0x0
+#define MX6Q_PAD_RGMII_TXC__SPDIF_EXT_CLK         0x058 0x36c 0x918 0x2 0x0
+#define MX6Q_PAD_RGMII_TXC__GPIO6_IO19            0x058 0x36c 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_TXC__XTALOSC_REF_CLK_24M   0x058 0x36c 0x000 0x7 0x0
+#define MX6Q_PAD_RGMII_TD0__HSI_TX_READY          0x05c 0x370 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_TD0__RGMII_TD0             0x05c 0x370 0x000 0x1 0x0
+#define MX6Q_PAD_RGMII_TD0__GPIO6_IO20            0x05c 0x370 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_TD1__HSI_RX_FLAG           0x060 0x374 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_TD1__RGMII_TD1             0x060 0x374 0x000 0x1 0x0
+#define MX6Q_PAD_RGMII_TD1__GPIO6_IO21            0x060 0x374 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_TD2__HSI_RX_DATA           0x064 0x378 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_TD2__RGMII_TD2             0x064 0x378 0x000 0x1 0x0
+#define MX6Q_PAD_RGMII_TD2__GPIO6_IO22            0x064 0x378 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_TD3__HSI_RX_WAKE           0x068 0x37c 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_TD3__RGMII_TD3             0x068 0x37c 0x000 0x1 0x0
+#define MX6Q_PAD_RGMII_TD3__GPIO6_IO23            0x068 0x37c 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_RX_CTL__USB_H3_DATA        0x06c 0x380 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_RX_CTL__RGMII_RX_CTL       0x06c 0x380 0x858 0x1 0x0
+#define MX6Q_PAD_RGMII_RX_CTL__GPIO6_IO24         0x06c 0x380 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_RD0__HSI_RX_READY          0x070 0x384 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_RD0__RGMII_RD0             0x070 0x384 0x848 0x1 0x0
+#define MX6Q_PAD_RGMII_RD0__GPIO6_IO25            0x070 0x384 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_TX_CTL__USB_H2_STROBE      0x074 0x388 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_TX_CTL__RGMII_TX_CTL       0x074 0x388 0x000 0x1 0x0
+#define MX6Q_PAD_RGMII_TX_CTL__GPIO6_IO26         0x074 0x388 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_TX_CTL__ENET_REF_CLK       0x074 0x388 0x83c 0x7 0x0
+#define MX6Q_PAD_RGMII_RD1__HSI_TX_FLAG           0x078 0x38c 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_RD1__RGMII_RD1             0x078 0x38c 0x84c 0x1 0x0
+#define MX6Q_PAD_RGMII_RD1__GPIO6_IO27            0x078 0x38c 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_RD2__HSI_TX_DATA           0x07c 0x390 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_RD2__RGMII_RD2             0x07c 0x390 0x850 0x1 0x0
+#define MX6Q_PAD_RGMII_RD2__GPIO6_IO28            0x07c 0x390 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_RD3__HSI_TX_WAKE           0x080 0x394 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_RD3__RGMII_RD3             0x080 0x394 0x854 0x1 0x0
+#define MX6Q_PAD_RGMII_RD3__GPIO6_IO29            0x080 0x394 0x000 0x5 0x0
+#define MX6Q_PAD_RGMII_RXC__USB_H3_STROBE         0x084 0x398 0x000 0x0 0x0
+#define MX6Q_PAD_RGMII_RXC__RGMII_RXC             0x084 0x398 0x844 0x1 0x0
+#define MX6Q_PAD_RGMII_RXC__GPIO6_IO30            0x084 0x398 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A25__EIM_ADDR25              0x088 0x39c 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_A25__ECSPI4_SS1              0x088 0x39c 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_A25__ECSPI2_RDY              0x088 0x39c 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_A25__IPU1_DI1_PIN12          0x088 0x39c 0x000 0x3 0x0
+#define MX6Q_PAD_EIM_A25__IPU1_DI0_D1_CS          0x088 0x39c 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_A25__GPIO5_IO02              0x088 0x39c 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A25__HDMI_TX_CEC_LINE        0x088 0x39c 0x88c 0x6 0x0
+#define MX6Q_PAD_EIM_EB2__EIM_EB2_B               0x08c 0x3a0 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_EB2__ECSPI1_SS0              0x08c 0x3a0 0x800 0x1 0x0
+#define MX6Q_PAD_EIM_EB2__IPU2_CSI1_DATA19        0x08c 0x3a0 0x8d4 0x3 0x0
+#define MX6Q_PAD_EIM_EB2__HDMI_TX_DDC_SCL         0x08c 0x3a0 0x890 0x4 0x0
+#define MX6Q_PAD_EIM_EB2__GPIO2_IO30              0x08c 0x3a0 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_EB2__I2C2_SCL                0x08c 0x3a0 0x8a0 0x6 0x0
+#define MX6Q_PAD_EIM_EB2__SRC_BOOT_CFG30          0x08c 0x3a0 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_D16__EIM_DATA16              0x090 0x3a4 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D16__ECSPI1_SCLK             0x090 0x3a4 0x7f4 0x1 0x0
+#define MX6Q_PAD_EIM_D16__IPU1_DI0_PIN05          0x090 0x3a4 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D16__IPU2_CSI1_DATA18        0x090 0x3a4 0x8d0 0x3 0x0
+#define MX6Q_PAD_EIM_D16__HDMI_TX_DDC_SDA         0x090 0x3a4 0x894 0x4 0x0
+#define MX6Q_PAD_EIM_D16__GPIO3_IO16              0x090 0x3a4 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D16__I2C2_SDA                0x090 0x3a4 0x8a4 0x6 0x0
+#define MX6Q_PAD_EIM_D17__EIM_DATA17              0x094 0x3a8 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D17__ECSPI1_MISO             0x094 0x3a8 0x7f8 0x1 0x0
+#define MX6Q_PAD_EIM_D17__IPU1_DI0_PIN06          0x094 0x3a8 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D17__IPU2_CSI1_PIXCLK        0x094 0x3a8 0x8e0 0x3 0x0
+#define MX6Q_PAD_EIM_D17__DCIC1_OUT               0x094 0x3a8 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D17__GPIO3_IO17              0x094 0x3a8 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D17__I2C3_SCL                0x094 0x3a8 0x8a8 0x6 0x0
+#define MX6Q_PAD_EIM_D18__EIM_DATA18              0x098 0x3ac 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D18__ECSPI1_MOSI             0x098 0x3ac 0x7fc 0x1 0x0
+#define MX6Q_PAD_EIM_D18__IPU1_DI0_PIN07          0x098 0x3ac 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D18__IPU2_CSI1_DATA17        0x098 0x3ac 0x8cc 0x3 0x0
+#define MX6Q_PAD_EIM_D18__IPU1_DI1_D0_CS          0x098 0x3ac 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D18__GPIO3_IO18              0x098 0x3ac 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D18__I2C3_SDA                0x098 0x3ac 0x8ac 0x6 0x0
+#define MX6Q_PAD_EIM_D19__EIM_DATA19              0x09c 0x3b0 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D19__ECSPI1_SS1              0x09c 0x3b0 0x804 0x1 0x0
+#define MX6Q_PAD_EIM_D19__IPU1_DI0_PIN08          0x09c 0x3b0 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D19__IPU2_CSI1_DATA16        0x09c 0x3b0 0x8c8 0x3 0x0
+#define MX6Q_PAD_EIM_D19__UART1_CTS_B             0x09c 0x3b0 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D19__UART1_RTS_B             0x09c 0x3b0 0x91c 0x4 0x0
+#define MX6Q_PAD_EIM_D19__GPIO3_IO19              0x09c 0x3b0 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D19__EPIT1_OUT               0x09c 0x3b0 0x000 0x6 0x0
+#define MX6Q_PAD_EIM_D20__EIM_DATA20              0x0a0 0x3b4 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D20__ECSPI4_SS0              0x0a0 0x3b4 0x824 0x1 0x0
+#define MX6Q_PAD_EIM_D20__IPU1_DI0_PIN16          0x0a0 0x3b4 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D20__IPU2_CSI1_DATA15        0x0a0 0x3b4 0x8c4 0x3 0x0
+#define MX6Q_PAD_EIM_D20__UART1_RTS_B             0x0a0 0x3b4 0x91c 0x4 0x1
+#define MX6Q_PAD_EIM_D20__UART1_CTS_B             0x0a0 0x3b4 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D20__GPIO3_IO20              0x0a0 0x3b4 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D20__EPIT2_OUT               0x0a0 0x3b4 0x000 0x6 0x0
+#define MX6Q_PAD_EIM_D21__EIM_DATA21              0x0a4 0x3b8 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D21__ECSPI4_SCLK             0x0a4 0x3b8 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_D21__IPU1_DI0_PIN17          0x0a4 0x3b8 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D21__IPU2_CSI1_DATA11        0x0a4 0x3b8 0x8b4 0x3 0x0
+#define MX6Q_PAD_EIM_D21__USB_OTG_OC              0x0a4 0x3b8 0x944 0x4 0x0
+#define MX6Q_PAD_EIM_D21__GPIO3_IO21              0x0a4 0x3b8 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D21__I2C1_SCL                0x0a4 0x3b8 0x898 0x6 0x0
+#define MX6Q_PAD_EIM_D21__SPDIF_IN                0x0a4 0x3b8 0x914 0x7 0x0
+#define MX6Q_PAD_EIM_D22__EIM_DATA22              0x0a8 0x3bc 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D22__ECSPI4_MISO             0x0a8 0x3bc 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_D22__IPU1_DI0_PIN01          0x0a8 0x3bc 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D22__IPU2_CSI1_DATA10        0x0a8 0x3bc 0x8b0 0x3 0x0
+#define MX6Q_PAD_EIM_D22__USB_OTG_PWR             0x0a8 0x3bc 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D22__GPIO3_IO22              0x0a8 0x3bc 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D22__SPDIF_OUT               0x0a8 0x3bc 0x000 0x6 0x0
+#define MX6Q_PAD_EIM_D23__EIM_DATA23              0x0ac 0x3c0 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D23__IPU1_DI0_D0_CS          0x0ac 0x3c0 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_D23__UART3_CTS_B             0x0ac 0x3c0 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D23__UART3_RTS_B             0x0ac 0x3c0 0x92c 0x2 0x0
+#define MX6Q_PAD_EIM_D23__UART1_DCD_B             0x0ac 0x3c0 0x000 0x3 0x0
+#define MX6Q_PAD_EIM_D23__IPU2_CSI1_DATA_EN       0x0ac 0x3c0 0x8d8 0x4 0x0
+#define MX6Q_PAD_EIM_D23__GPIO3_IO23              0x0ac 0x3c0 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D23__IPU1_DI1_PIN02          0x0ac 0x3c0 0x000 0x6 0x0
+#define MX6Q_PAD_EIM_D23__IPU1_DI1_PIN14          0x0ac 0x3c0 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_EB3__EIM_EB3_B               0x0b0 0x3c4 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_EB3__ECSPI4_RDY              0x0b0 0x3c4 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_EB3__UART3_RTS_B             0x0b0 0x3c4 0x92c 0x2 0x1
+#define MX6Q_PAD_EIM_EB3__UART3_CTS_B             0x0b0 0x3c4 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_EB3__UART1_RI_B              0x0b0 0x3c4 0x000 0x3 0x0
+#define MX6Q_PAD_EIM_EB3__IPU2_CSI1_HSYNC         0x0b0 0x3c4 0x8dc 0x4 0x0
+#define MX6Q_PAD_EIM_EB3__GPIO2_IO31              0x0b0 0x3c4 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_EB3__IPU1_DI1_PIN03          0x0b0 0x3c4 0x000 0x6 0x0
+#define MX6Q_PAD_EIM_EB3__SRC_BOOT_CFG31          0x0b0 0x3c4 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_D24__EIM_DATA24              0x0b4 0x3c8 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D24__ECSPI4_SS2              0x0b4 0x3c8 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_D24__UART3_TX_DATA           0x0b4 0x3c8 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D24__UART3_RX_DATA           0x0b4 0x3c8 0x930 0x2 0x0
+#define MX6Q_PAD_EIM_D24__ECSPI1_SS2              0x0b4 0x3c8 0x808 0x3 0x0
+#define MX6Q_PAD_EIM_D24__ECSPI2_SS2              0x0b4 0x3c8 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D24__GPIO3_IO24              0x0b4 0x3c8 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D24__AUD5_RXFS               0x0b4 0x3c8 0x7d8 0x6 0x0
+#define MX6Q_PAD_EIM_D24__UART1_DTR_B             0x0b4 0x3c8 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_D25__EIM_DATA25              0x0b8 0x3cc 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D25__ECSPI4_SS3              0x0b8 0x3cc 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_D25__UART3_RX_DATA           0x0b8 0x3cc 0x930 0x2 0x1
+#define MX6Q_PAD_EIM_D25__UART3_TX_DATA           0x0b8 0x3cc 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D25__ECSPI1_SS3              0x0b8 0x3cc 0x80c 0x3 0x0
+#define MX6Q_PAD_EIM_D25__ECSPI2_SS3              0x0b8 0x3cc 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D25__GPIO3_IO25              0x0b8 0x3cc 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D25__AUD5_RXC                0x0b8 0x3cc 0x7d4 0x6 0x0
+#define MX6Q_PAD_EIM_D25__UART1_DSR_B             0x0b8 0x3cc 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_D26__EIM_DATA26              0x0bc 0x3d0 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D26__IPU1_DI1_PIN11          0x0bc 0x3d0 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_D26__IPU1_CSI0_DATA01        0x0bc 0x3d0 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D26__IPU2_CSI1_DATA14        0x0bc 0x3d0 0x8c0 0x3 0x0
+#define MX6Q_PAD_EIM_D26__UART2_TX_DATA           0x0bc 0x3d0 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D26__UART2_RX_DATA           0x0bc 0x3d0 0x928 0x4 0x0
+#define MX6Q_PAD_EIM_D26__GPIO3_IO26              0x0bc 0x3d0 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D26__IPU1_SISG2              0x0bc 0x3d0 0x000 0x6 0x0
+#define MX6Q_PAD_EIM_D26__IPU1_DISP1_DATA22       0x0bc 0x3d0 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_D27__EIM_DATA27              0x0c0 0x3d4 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D27__IPU1_DI1_PIN13          0x0c0 0x3d4 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_D27__IPU1_CSI0_DATA00        0x0c0 0x3d4 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D27__IPU2_CSI1_DATA13        0x0c0 0x3d4 0x8bc 0x3 0x0
+#define MX6Q_PAD_EIM_D27__UART2_RX_DATA           0x0c0 0x3d4 0x928 0x4 0x1
+#define MX6Q_PAD_EIM_D27__UART2_TX_DATA           0x0c0 0x3d4 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D27__GPIO3_IO27              0x0c0 0x3d4 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D27__IPU1_SISG3              0x0c0 0x3d4 0x000 0x6 0x0
+#define MX6Q_PAD_EIM_D27__IPU1_DISP1_DATA23       0x0c0 0x3d4 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_D28__EIM_DATA28              0x0c4 0x3d8 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D28__I2C1_SDA                0x0c4 0x3d8 0x89c 0x1 0x0
+#define MX6Q_PAD_EIM_D28__ECSPI4_MOSI             0x0c4 0x3d8 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D28__IPU2_CSI1_DATA12        0x0c4 0x3d8 0x8b8 0x3 0x0
+#define MX6Q_PAD_EIM_D28__UART2_CTS_B             0x0c4 0x3d8 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D28__UART2_RTS_B             0x0c4 0x3d8 0x924 0x4 0x0
+#define MX6Q_PAD_EIM_D28__GPIO3_IO28              0x0c4 0x3d8 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D28__IPU1_EXT_TRIG           0x0c4 0x3d8 0x000 0x6 0x0
+#define MX6Q_PAD_EIM_D28__IPU1_DI0_PIN13          0x0c4 0x3d8 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_D29__EIM_DATA29              0x0c8 0x3dc 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D29__IPU1_DI1_PIN15          0x0c8 0x3dc 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_D29__ECSPI4_SS0              0x0c8 0x3dc 0x824 0x2 0x1
+#define MX6Q_PAD_EIM_D29__UART2_RTS_B             0x0c8 0x3dc 0x924 0x4 0x1
+#define MX6Q_PAD_EIM_D29__UART2_CTS_B             0x0c8 0x3dc 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D29__GPIO3_IO29              0x0c8 0x3dc 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D29__IPU2_CSI1_VSYNC         0x0c8 0x3dc 0x8e4 0x6 0x0
+#define MX6Q_PAD_EIM_D29__IPU1_DI0_PIN14          0x0c8 0x3dc 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_D30__EIM_DATA30              0x0cc 0x3e0 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D30__IPU1_DISP1_DATA21       0x0cc 0x3e0 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_D30__IPU1_DI0_PIN11          0x0cc 0x3e0 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D30__IPU1_CSI0_DATA03        0x0cc 0x3e0 0x000 0x3 0x0
+#define MX6Q_PAD_EIM_D30__UART3_CTS_B             0x0cc 0x3e0 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D30__UART3_RTS_B             0x0cc 0x3e0 0x92c 0x4 0x2
+#define MX6Q_PAD_EIM_D30__GPIO3_IO30              0x0cc 0x3e0 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D30__USB_H1_OC               0x0cc 0x3e0 0x948 0x6 0x0
+#define MX6Q_PAD_EIM_D31__EIM_DATA31              0x0d0 0x3e4 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_D31__IPU1_DISP1_DATA20       0x0d0 0x3e4 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_D31__IPU1_DI0_PIN12          0x0d0 0x3e4 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_D31__IPU1_CSI0_DATA02        0x0d0 0x3e4 0x000 0x3 0x0
+#define MX6Q_PAD_EIM_D31__UART3_RTS_B             0x0d0 0x3e4 0x92c 0x4 0x3
+#define MX6Q_PAD_EIM_D31__UART3_CTS_B             0x0d0 0x3e4 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_D31__GPIO3_IO31              0x0d0 0x3e4 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_D31__USB_H1_PWR              0x0d0 0x3e4 0x000 0x6 0x0
+#define MX6Q_PAD_EIM_A24__EIM_ADDR24              0x0d4 0x3e8 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_A24__IPU1_DISP1_DATA19       0x0d4 0x3e8 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_A24__IPU2_CSI1_DATA19        0x0d4 0x3e8 0x8d4 0x2 0x1
+#define MX6Q_PAD_EIM_A24__IPU2_SISG2              0x0d4 0x3e8 0x000 0x3 0x0
+#define MX6Q_PAD_EIM_A24__IPU1_SISG2              0x0d4 0x3e8 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_A24__GPIO5_IO04              0x0d4 0x3e8 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A24__SRC_BOOT_CFG24          0x0d4 0x3e8 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_A23__EIM_ADDR23              0x0d8 0x3ec 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_A23__IPU1_DISP1_DATA18       0x0d8 0x3ec 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_A23__IPU2_CSI1_DATA18        0x0d8 0x3ec 0x8d0 0x2 0x1
+#define MX6Q_PAD_EIM_A23__IPU2_SISG3              0x0d8 0x3ec 0x000 0x3 0x0
+#define MX6Q_PAD_EIM_A23__IPU1_SISG3              0x0d8 0x3ec 0x000 0x4 0x0
+#define MX6Q_PAD_EIM_A23__GPIO6_IO06              0x0d8 0x3ec 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A23__SRC_BOOT_CFG23          0x0d8 0x3ec 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_A22__EIM_ADDR22              0x0dc 0x3f0 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_A22__IPU1_DISP1_DATA17       0x0dc 0x3f0 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_A22__IPU2_CSI1_DATA17        0x0dc 0x3f0 0x8cc 0x2 0x1
+#define MX6Q_PAD_EIM_A22__GPIO2_IO16              0x0dc 0x3f0 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A22__SRC_BOOT_CFG22          0x0dc 0x3f0 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_A21__EIM_ADDR21              0x0e0 0x3f4 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_A21__IPU1_DISP1_DATA16       0x0e0 0x3f4 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_A21__IPU2_CSI1_DATA16        0x0e0 0x3f4 0x8c8 0x2 0x1
+#define MX6Q_PAD_EIM_A21__GPIO2_IO17              0x0e0 0x3f4 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A21__SRC_BOOT_CFG21          0x0e0 0x3f4 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_A20__EIM_ADDR20              0x0e4 0x3f8 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_A20__IPU1_DISP1_DATA15       0x0e4 0x3f8 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_A20__IPU2_CSI1_DATA15        0x0e4 0x3f8 0x8c4 0x2 0x1
+#define MX6Q_PAD_EIM_A20__GPIO2_IO18              0x0e4 0x3f8 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A20__SRC_BOOT_CFG20          0x0e4 0x3f8 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_A19__EIM_ADDR19              0x0e8 0x3fc 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_A19__IPU1_DISP1_DATA14       0x0e8 0x3fc 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_A19__IPU2_CSI1_DATA14        0x0e8 0x3fc 0x8c0 0x2 0x1
+#define MX6Q_PAD_EIM_A19__GPIO2_IO19              0x0e8 0x3fc 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A19__SRC_BOOT_CFG19          0x0e8 0x3fc 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_A18__EIM_ADDR18              0x0ec 0x400 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_A18__IPU1_DISP1_DATA13       0x0ec 0x400 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_A18__IPU2_CSI1_DATA13        0x0ec 0x400 0x8bc 0x2 0x1
+#define MX6Q_PAD_EIM_A18__GPIO2_IO20              0x0ec 0x400 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A18__SRC_BOOT_CFG18          0x0ec 0x400 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_A17__EIM_ADDR17              0x0f0 0x404 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_A17__IPU1_DISP1_DATA12       0x0f0 0x404 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_A17__IPU2_CSI1_DATA12        0x0f0 0x404 0x8b8 0x2 0x1
+#define MX6Q_PAD_EIM_A17__GPIO2_IO21              0x0f0 0x404 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A17__SRC_BOOT_CFG17          0x0f0 0x404 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_A16__EIM_ADDR16              0x0f4 0x408 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_A16__IPU1_DI1_DISP_CLK       0x0f4 0x408 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_A16__IPU2_CSI1_PIXCLK        0x0f4 0x408 0x8e0 0x2 0x1
+#define MX6Q_PAD_EIM_A16__GPIO2_IO22              0x0f4 0x408 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_A16__SRC_BOOT_CFG16          0x0f4 0x408 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_CS0__EIM_CS0_B               0x0f8 0x40c 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_CS0__IPU1_DI1_PIN05          0x0f8 0x40c 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_CS0__ECSPI2_SCLK             0x0f8 0x40c 0x810 0x2 0x0
+#define MX6Q_PAD_EIM_CS0__GPIO2_IO23              0x0f8 0x40c 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_CS1__EIM_CS1_B               0x0fc 0x410 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_CS1__IPU1_DI1_PIN06          0x0fc 0x410 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_CS1__ECSPI2_MOSI             0x0fc 0x410 0x818 0x2 0x0
+#define MX6Q_PAD_EIM_CS1__GPIO2_IO24              0x0fc 0x410 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_OE__EIM_OE_B                 0x100 0x414 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_OE__IPU1_DI1_PIN07           0x100 0x414 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_OE__ECSPI2_MISO              0x100 0x414 0x814 0x2 0x0
+#define MX6Q_PAD_EIM_OE__GPIO2_IO25               0x100 0x414 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_RW__EIM_RW                   0x104 0x418 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_RW__IPU1_DI1_PIN08           0x104 0x418 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_RW__ECSPI2_SS0               0x104 0x418 0x81c 0x2 0x0
+#define MX6Q_PAD_EIM_RW__GPIO2_IO26               0x104 0x418 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_RW__SRC_BOOT_CFG29           0x104 0x418 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_LBA__EIM_LBA_B               0x108 0x41c 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_LBA__IPU1_DI1_PIN17          0x108 0x41c 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_LBA__ECSPI2_SS1              0x108 0x41c 0x820 0x2 0x0
+#define MX6Q_PAD_EIM_LBA__GPIO2_IO27              0x108 0x41c 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_LBA__SRC_BOOT_CFG26          0x108 0x41c 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_EB0__EIM_EB0_B               0x10c 0x420 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_EB0__IPU1_DISP1_DATA11       0x10c 0x420 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_EB0__IPU2_CSI1_DATA11        0x10c 0x420 0x8b4 0x2 0x1
+#define MX6Q_PAD_EIM_EB0__CCM_PMIC_READY          0x10c 0x420 0x7f0 0x4 0x0
+#define MX6Q_PAD_EIM_EB0__GPIO2_IO28              0x10c 0x420 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_EB0__SRC_BOOT_CFG27          0x10c 0x420 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_EB1__EIM_EB1_B               0x110 0x424 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_EB1__IPU1_DISP1_DATA10       0x110 0x424 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_EB1__IPU2_CSI1_DATA10        0x110 0x424 0x8b0 0x2 0x1
+#define MX6Q_PAD_EIM_EB1__GPIO2_IO29              0x110 0x424 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_EB1__SRC_BOOT_CFG28          0x110 0x424 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA0__EIM_AD00                0x114 0x428 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA0__IPU1_DISP1_DATA09       0x114 0x428 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA0__IPU2_CSI1_DATA09        0x114 0x428 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA0__GPIO3_IO00              0x114 0x428 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA0__SRC_BOOT_CFG00          0x114 0x428 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA1__EIM_AD01                0x118 0x42c 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA1__IPU1_DISP1_DATA08       0x118 0x42c 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA1__IPU2_CSI1_DATA08        0x118 0x42c 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA1__GPIO3_IO01              0x118 0x42c 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA1__SRC_BOOT_CFG01          0x118 0x42c 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA2__EIM_AD02                0x11c 0x430 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA2__IPU1_DISP1_DATA07       0x11c 0x430 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA2__IPU2_CSI1_DATA07        0x11c 0x430 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA2__GPIO3_IO02              0x11c 0x430 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA2__SRC_BOOT_CFG02          0x11c 0x430 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA3__EIM_AD03                0x120 0x434 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA3__IPU1_DISP1_DATA06       0x120 0x434 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA3__IPU2_CSI1_DATA06        0x120 0x434 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA3__GPIO3_IO03              0x120 0x434 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA3__SRC_BOOT_CFG03          0x120 0x434 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA4__EIM_AD04                0x124 0x438 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA4__IPU1_DISP1_DATA05       0x124 0x438 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA4__IPU2_CSI1_DATA05        0x124 0x438 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA4__GPIO3_IO04              0x124 0x438 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA4__SRC_BOOT_CFG04          0x124 0x438 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA5__EIM_AD05                0x128 0x43c 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA5__IPU1_DISP1_DATA04       0x128 0x43c 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA5__IPU2_CSI1_DATA04        0x128 0x43c 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA5__GPIO3_IO05              0x128 0x43c 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA5__SRC_BOOT_CFG05          0x128 0x43c 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA6__EIM_AD06                0x12c 0x440 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA6__IPU1_DISP1_DATA03       0x12c 0x440 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA6__IPU2_CSI1_DATA03        0x12c 0x440 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA6__GPIO3_IO06              0x12c 0x440 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA6__SRC_BOOT_CFG06          0x12c 0x440 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA7__EIM_AD07                0x130 0x444 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA7__IPU1_DISP1_DATA02       0x130 0x444 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA7__IPU2_CSI1_DATA02        0x130 0x444 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA7__GPIO3_IO07              0x130 0x444 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA7__SRC_BOOT_CFG07          0x130 0x444 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA8__EIM_AD08                0x134 0x448 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA8__IPU1_DISP1_DATA01       0x134 0x448 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA8__IPU2_CSI1_DATA01        0x134 0x448 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA8__GPIO3_IO08              0x134 0x448 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA8__SRC_BOOT_CFG08          0x134 0x448 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA9__EIM_AD09                0x138 0x44c 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA9__IPU1_DISP1_DATA00       0x138 0x44c 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA9__IPU2_CSI1_DATA00        0x138 0x44c 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA9__GPIO3_IO09              0x138 0x44c 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA9__SRC_BOOT_CFG09          0x138 0x44c 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA10__EIM_AD10               0x13c 0x450 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA10__IPU1_DI1_PIN15         0x13c 0x450 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA10__IPU2_CSI1_DATA_EN      0x13c 0x450 0x8d8 0x2 0x1
+#define MX6Q_PAD_EIM_DA10__GPIO3_IO10             0x13c 0x450 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA10__SRC_BOOT_CFG10         0x13c 0x450 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA11__EIM_AD11               0x140 0x454 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA11__IPU1_DI1_PIN02         0x140 0x454 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA11__IPU2_CSI1_HSYNC        0x140 0x454 0x8dc 0x2 0x1
+#define MX6Q_PAD_EIM_DA11__GPIO3_IO11             0x140 0x454 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA11__SRC_BOOT_CFG11         0x140 0x454 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA12__EIM_AD12               0x144 0x458 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA12__IPU1_DI1_PIN03         0x144 0x458 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA12__IPU2_CSI1_VSYNC        0x144 0x458 0x8e4 0x2 0x1
+#define MX6Q_PAD_EIM_DA12__GPIO3_IO12             0x144 0x458 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA12__SRC_BOOT_CFG12         0x144 0x458 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA13__EIM_AD13               0x148 0x45c 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA13__IPU1_DI1_D0_CS         0x148 0x45c 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA13__GPIO3_IO13             0x148 0x45c 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA13__SRC_BOOT_CFG13         0x148 0x45c 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA14__EIM_AD14               0x14c 0x460 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA14__IPU1_DI1_D1_CS         0x14c 0x460 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA14__GPIO3_IO14             0x14c 0x460 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA14__SRC_BOOT_CFG14         0x14c 0x460 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_DA15__EIM_AD15               0x150 0x464 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_DA15__IPU1_DI1_PIN01         0x150 0x464 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_DA15__IPU1_DI1_PIN04         0x150 0x464 0x000 0x2 0x0
+#define MX6Q_PAD_EIM_DA15__GPIO3_IO15             0x150 0x464 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_DA15__SRC_BOOT_CFG15         0x150 0x464 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_WAIT__EIM_WAIT_B             0x154 0x468 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_WAIT__EIM_DTACK_B            0x154 0x468 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_WAIT__GPIO5_IO00             0x154 0x468 0x000 0x5 0x0
+#define MX6Q_PAD_EIM_WAIT__SRC_BOOT_CFG25         0x154 0x468 0x000 0x7 0x0
+#define MX6Q_PAD_EIM_BCLK__EIM_BCLK               0x158 0x46c 0x000 0x0 0x0
+#define MX6Q_PAD_EIM_BCLK__IPU1_DI1_PIN16         0x158 0x46c 0x000 0x1 0x0
+#define MX6Q_PAD_EIM_BCLK__GPIO6_IO31             0x158 0x46c 0x000 0x5 0x0
+#define MX6Q_PAD_DI0_DISP_CLK__IPU1_DI0_DISP_CLK  0x15c 0x470 0x000 0x0 0x0
+#define MX6Q_PAD_DI0_DISP_CLK__IPU2_DI0_DISP_CLK  0x15c 0x470 0x000 0x1 0x0
+#define MX6Q_PAD_DI0_DISP_CLK__GPIO4_IO16         0x15c 0x470 0x000 0x5 0x0
+#define MX6Q_PAD_DI0_PIN15__IPU1_DI0_PIN15        0x160 0x474 0x000 0x0 0x0
+#define MX6Q_PAD_DI0_PIN15__IPU2_DI0_PIN15        0x160 0x474 0x000 0x1 0x0
+#define MX6Q_PAD_DI0_PIN15__AUD6_TXC              0x160 0x474 0x000 0x2 0x0
+#define MX6Q_PAD_DI0_PIN15__GPIO4_IO17            0x160 0x474 0x000 0x5 0x0
+#define MX6Q_PAD_DI0_PIN2__IPU1_DI0_PIN02         0x164 0x478 0x000 0x0 0x0
+#define MX6Q_PAD_DI0_PIN2__IPU2_DI0_PIN02         0x164 0x478 0x000 0x1 0x0
+#define MX6Q_PAD_DI0_PIN2__AUD6_TXD               0x164 0x478 0x000 0x2 0x0
+#define MX6Q_PAD_DI0_PIN2__GPIO4_IO18             0x164 0x478 0x000 0x5 0x0
+#define MX6Q_PAD_DI0_PIN3__IPU1_DI0_PIN03         0x168 0x47c 0x000 0x0 0x0
+#define MX6Q_PAD_DI0_PIN3__IPU2_DI0_PIN03         0x168 0x47c 0x000 0x1 0x0
+#define MX6Q_PAD_DI0_PIN3__AUD6_TXFS              0x168 0x47c 0x000 0x2 0x0
+#define MX6Q_PAD_DI0_PIN3__GPIO4_IO19             0x168 0x47c 0x000 0x5 0x0
+#define MX6Q_PAD_DI0_PIN4__IPU1_DI0_PIN04         0x16c 0x480 0x000 0x0 0x0
+#define MX6Q_PAD_DI0_PIN4__IPU2_DI0_PIN04         0x16c 0x480 0x000 0x1 0x0
+#define MX6Q_PAD_DI0_PIN4__AUD6_RXD               0x16c 0x480 0x000 0x2 0x0
+#define MX6Q_PAD_DI0_PIN4__SD1_WP                 0x16c 0x480 0x94c 0x3 0x0
+#define MX6Q_PAD_DI0_PIN4__GPIO4_IO20             0x16c 0x480 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT0__IPU1_DISP0_DATA00    0x170 0x484 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT0__IPU2_DISP0_DATA00    0x170 0x484 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT0__ECSPI3_SCLK          0x170 0x484 0x000 0x2 0x0
+#define MX6Q_PAD_DISP0_DAT0__GPIO4_IO21           0x170 0x484 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT1__IPU1_DISP0_DATA01    0x174 0x488 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT1__IPU2_DISP0_DATA01    0x174 0x488 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT1__ECSPI3_MOSI          0x174 0x488 0x000 0x2 0x0
+#define MX6Q_PAD_DISP0_DAT1__GPIO4_IO22           0x174 0x488 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT2__IPU1_DISP0_DATA02    0x178 0x48c 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT2__IPU2_DISP0_DATA02    0x178 0x48c 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT2__ECSPI3_MISO          0x178 0x48c 0x000 0x2 0x0
+#define MX6Q_PAD_DISP0_DAT2__GPIO4_IO23           0x178 0x48c 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT3__IPU1_DISP0_DATA03    0x17c 0x490 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT3__IPU2_DISP0_DATA03    0x17c 0x490 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT3__ECSPI3_SS0           0x17c 0x490 0x000 0x2 0x0
+#define MX6Q_PAD_DISP0_DAT3__GPIO4_IO24           0x17c 0x490 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT4__IPU1_DISP0_DATA04    0x180 0x494 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT4__IPU2_DISP0_DATA04    0x180 0x494 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT4__ECSPI3_SS1           0x180 0x494 0x000 0x2 0x0
+#define MX6Q_PAD_DISP0_DAT4__GPIO4_IO25           0x180 0x494 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT5__IPU1_DISP0_DATA05    0x184 0x498 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT5__IPU2_DISP0_DATA05    0x184 0x498 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT5__ECSPI3_SS2           0x184 0x498 0x000 0x2 0x0
+#define MX6Q_PAD_DISP0_DAT5__AUD6_RXFS            0x184 0x498 0x000 0x3 0x0
+#define MX6Q_PAD_DISP0_DAT5__GPIO4_IO26           0x184 0x498 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT6__IPU1_DISP0_DATA06    0x188 0x49c 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT6__IPU2_DISP0_DATA06    0x188 0x49c 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT6__ECSPI3_SS3           0x188 0x49c 0x000 0x2 0x0
+#define MX6Q_PAD_DISP0_DAT6__AUD6_RXC             0x188 0x49c 0x000 0x3 0x0
+#define MX6Q_PAD_DISP0_DAT6__GPIO4_IO27           0x188 0x49c 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT7__IPU1_DISP0_DATA07    0x18c 0x4a0 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT7__IPU2_DISP0_DATA07    0x18c 0x4a0 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT7__ECSPI3_RDY           0x18c 0x4a0 0x000 0x2 0x0
+#define MX6Q_PAD_DISP0_DAT7__GPIO4_IO28           0x18c 0x4a0 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT8__IPU1_DISP0_DATA08    0x190 0x4a4 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT8__IPU2_DISP0_DATA08    0x190 0x4a4 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT8__PWM1_OUT             0x190 0x4a4 0x000 0x2 0x0
+#define MX6Q_PAD_DISP0_DAT8__WDOG1_B              0x190 0x4a4 0x000 0x3 0x0
+#define MX6Q_PAD_DISP0_DAT8__GPIO4_IO29           0x190 0x4a4 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT9__IPU1_DISP0_DATA09    0x194 0x4a8 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT9__IPU2_DISP0_DATA09    0x194 0x4a8 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT9__PWM2_OUT             0x194 0x4a8 0x000 0x2 0x0
+#define MX6Q_PAD_DISP0_DAT9__WDOG2_B              0x194 0x4a8 0x000 0x3 0x0
+#define MX6Q_PAD_DISP0_DAT9__GPIO4_IO30           0x194 0x4a8 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT10__IPU1_DISP0_DATA10   0x198 0x4ac 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT10__IPU2_DISP0_DATA10   0x198 0x4ac 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT10__GPIO4_IO31          0x198 0x4ac 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT11__IPU1_DISP0_DATA11   0x19c 0x4b0 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT11__IPU2_DISP0_DATA11   0x19c 0x4b0 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT11__GPIO5_IO05          0x19c 0x4b0 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT12__IPU1_DISP0_DATA12   0x1a0 0x4b4 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT12__IPU2_DISP0_DATA12   0x1a0 0x4b4 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT12__GPIO5_IO06          0x1a0 0x4b4 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT13__IPU1_DISP0_DATA13   0x1a4 0x4b8 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT13__IPU2_DISP0_DATA13   0x1a4 0x4b8 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT13__AUD5_RXFS           0x1a4 0x4b8 0x7d8 0x3 0x1
+#define MX6Q_PAD_DISP0_DAT13__GPIO5_IO07          0x1a4 0x4b8 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT14__IPU1_DISP0_DATA14   0x1a8 0x4bc 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT14__IPU2_DISP0_DATA14   0x1a8 0x4bc 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT14__AUD5_RXC            0x1a8 0x4bc 0x7d4 0x3 0x1
+#define MX6Q_PAD_DISP0_DAT14__GPIO5_IO08          0x1a8 0x4bc 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT15__IPU1_DISP0_DATA15   0x1ac 0x4c0 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT15__IPU2_DISP0_DATA15   0x1ac 0x4c0 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT15__ECSPI1_SS1          0x1ac 0x4c0 0x804 0x2 0x1
+#define MX6Q_PAD_DISP0_DAT15__ECSPI2_SS1          0x1ac 0x4c0 0x820 0x3 0x1
+#define MX6Q_PAD_DISP0_DAT15__GPIO5_IO09          0x1ac 0x4c0 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT16__IPU1_DISP0_DATA16   0x1b0 0x4c4 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT16__IPU2_DISP0_DATA16   0x1b0 0x4c4 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT16__ECSPI2_MOSI         0x1b0 0x4c4 0x818 0x2 0x1
+#define MX6Q_PAD_DISP0_DAT16__AUD5_TXC            0x1b0 0x4c4 0x7dc 0x3 0x0
+#define MX6Q_PAD_DISP0_DAT16__SDMA_EXT_EVENT0     0x1b0 0x4c4 0x90c 0x4 0x0
+#define MX6Q_PAD_DISP0_DAT16__GPIO5_IO10          0x1b0 0x4c4 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT17__IPU1_DISP0_DATA17   0x1b4 0x4c8 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT17__IPU2_DISP0_DATA17   0x1b4 0x4c8 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT17__ECSPI2_MISO         0x1b4 0x4c8 0x814 0x2 0x1
+#define MX6Q_PAD_DISP0_DAT17__AUD5_TXD            0x1b4 0x4c8 0x7d0 0x3 0x0
+#define MX6Q_PAD_DISP0_DAT17__SDMA_EXT_EVENT1     0x1b4 0x4c8 0x910 0x4 0x0
+#define MX6Q_PAD_DISP0_DAT17__GPIO5_IO11          0x1b4 0x4c8 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT18__IPU1_DISP0_DATA18   0x1b8 0x4cc 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT18__IPU2_DISP0_DATA18   0x1b8 0x4cc 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT18__ECSPI2_SS0          0x1b8 0x4cc 0x81c 0x2 0x1
+#define MX6Q_PAD_DISP0_DAT18__AUD5_TXFS           0x1b8 0x4cc 0x7e0 0x3 0x0
+#define MX6Q_PAD_DISP0_DAT18__AUD4_RXFS           0x1b8 0x4cc 0x7c0 0x4 0x0
+#define MX6Q_PAD_DISP0_DAT18__GPIO5_IO12          0x1b8 0x4cc 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT18__EIM_CS2_B           0x1b8 0x4cc 0x000 0x7 0x0
+#define MX6Q_PAD_DISP0_DAT19__IPU1_DISP0_DATA19   0x1bc 0x4d0 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT19__IPU2_DISP0_DATA19   0x1bc 0x4d0 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT19__ECSPI2_SCLK         0x1bc 0x4d0 0x810 0x2 0x1
+#define MX6Q_PAD_DISP0_DAT19__AUD5_RXD            0x1bc 0x4d0 0x7cc 0x3 0x0
+#define MX6Q_PAD_DISP0_DAT19__AUD4_RXC            0x1bc 0x4d0 0x7bc 0x4 0x0
+#define MX6Q_PAD_DISP0_DAT19__GPIO5_IO13          0x1bc 0x4d0 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT19__EIM_CS3_B           0x1bc 0x4d0 0x000 0x7 0x0
+#define MX6Q_PAD_DISP0_DAT20__IPU1_DISP0_DATA20   0x1c0 0x4d4 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT20__IPU2_DISP0_DATA20   0x1c0 0x4d4 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT20__ECSPI1_SCLK         0x1c0 0x4d4 0x7f4 0x2 0x1
+#define MX6Q_PAD_DISP0_DAT20__AUD4_TXC            0x1c0 0x4d4 0x7c4 0x3 0x0
+#define MX6Q_PAD_DISP0_DAT20__GPIO5_IO14          0x1c0 0x4d4 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT21__IPU1_DISP0_DATA21   0x1c4 0x4d8 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT21__IPU2_DISP0_DATA21   0x1c4 0x4d8 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT21__ECSPI1_MOSI         0x1c4 0x4d8 0x7fc 0x2 0x1
+#define MX6Q_PAD_DISP0_DAT21__AUD4_TXD            0x1c4 0x4d8 0x7b8 0x3 0x1
+#define MX6Q_PAD_DISP0_DAT21__GPIO5_IO15          0x1c4 0x4d8 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT22__IPU1_DISP0_DATA22   0x1c8 0x4dc 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT22__IPU2_DISP0_DATA22   0x1c8 0x4dc 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT22__ECSPI1_MISO         0x1c8 0x4dc 0x7f8 0x2 0x1
+#define MX6Q_PAD_DISP0_DAT22__AUD4_TXFS           0x1c8 0x4dc 0x7c8 0x3 0x1
+#define MX6Q_PAD_DISP0_DAT22__GPIO5_IO16          0x1c8 0x4dc 0x000 0x5 0x0
+#define MX6Q_PAD_DISP0_DAT23__IPU1_DISP0_DATA23   0x1cc 0x4e0 0x000 0x0 0x0
+#define MX6Q_PAD_DISP0_DAT23__IPU2_DISP0_DATA23   0x1cc 0x4e0 0x000 0x1 0x0
+#define MX6Q_PAD_DISP0_DAT23__ECSPI1_SS0          0x1cc 0x4e0 0x800 0x2 0x1
+#define MX6Q_PAD_DISP0_DAT23__AUD4_RXD            0x1cc 0x4e0 0x7b4 0x3 0x1
+#define MX6Q_PAD_DISP0_DAT23__GPIO5_IO17          0x1cc 0x4e0 0x000 0x5 0x0
+#define MX6Q_PAD_ENET_MDIO__ENET_MDIO             0x1d0 0x4e4 0x840 0x1 0x0
+#define MX6Q_PAD_ENET_MDIO__ESAI_RX_CLK           0x1d0 0x4e4 0x86c 0x2 0x0
+#define MX6Q_PAD_ENET_MDIO__ENET_1588_EVENT1_OUT  0x1d0 0x4e4 0x000 0x4 0x0
+#define MX6Q_PAD_ENET_MDIO__GPIO1_IO22            0x1d0 0x4e4 0x000 0x5 0x0
+#define MX6Q_PAD_ENET_MDIO__SPDIF_LOCK            0x1d0 0x4e4 0x000 0x6 0x0
+#define MX6Q_PAD_ENET_REF_CLK__ENET_TX_CLK        0x1d4 0x4e8 0x000 0x1 0x0
+#define MX6Q_PAD_ENET_REF_CLK__ESAI_RX_FS         0x1d4 0x4e8 0x85c 0x2 0x0
+#define MX6Q_PAD_ENET_REF_CLK__GPIO1_IO23         0x1d4 0x4e8 0x000 0x5 0x0
+#define MX6Q_PAD_ENET_REF_CLK__SPDIF_SR_CLK       0x1d4 0x4e8 0x000 0x6 0x0
+#define MX6Q_PAD_ENET_RX_ER__USB_OTG_ID           0x1d8 0x4ec 0x000 0x0 0x0
+#define MX6Q_PAD_ENET_RX_ER__ENET_RX_ER           0x1d8 0x4ec 0x000 0x1 0x0
+#define MX6Q_PAD_ENET_RX_ER__ESAI_RX_HF_CLK       0x1d8 0x4ec 0x864 0x2 0x0
+#define MX6Q_PAD_ENET_RX_ER__SPDIF_IN             0x1d8 0x4ec 0x914 0x3 0x1
+#define MX6Q_PAD_ENET_RX_ER__ENET_1588_EVENT2_OUT 0x1d8 0x4ec 0x000 0x4 0x0
+#define MX6Q_PAD_ENET_RX_ER__GPIO1_IO24           0x1d8 0x4ec 0x000 0x5 0x0
+#define MX6Q_PAD_ENET_CRS_DV__ENET_RX_EN          0x1dc 0x4f0 0x858 0x1 0x1
+#define MX6Q_PAD_ENET_CRS_DV__ESAI_TX_CLK         0x1dc 0x4f0 0x870 0x2 0x0
+#define MX6Q_PAD_ENET_CRS_DV__SPDIF_EXT_CLK       0x1dc 0x4f0 0x918 0x3 0x1
+#define MX6Q_PAD_ENET_CRS_DV__GPIO1_IO25          0x1dc 0x4f0 0x000 0x5 0x0
+#define MX6Q_PAD_ENET_RXD1__MLB_SIG               0x1e0 0x4f4 0x908 0x0 0x0
+#define MX6Q_PAD_ENET_RXD1__ENET_RX_DATA1         0x1e0 0x4f4 0x84c 0x1 0x1
+#define MX6Q_PAD_ENET_RXD1__ESAI_TX_FS            0x1e0 0x4f4 0x860 0x2 0x0
+#define MX6Q_PAD_ENET_RXD1__ENET_1588_EVENT3_OUT  0x1e0 0x4f4 0x000 0x4 0x0
+#define MX6Q_PAD_ENET_RXD1__GPIO1_IO26            0x1e0 0x4f4 0x000 0x5 0x0
+#define MX6Q_PAD_ENET_RXD0__ENET_RX_DATA0         0x1e4 0x4f8 0x848 0x1 0x1
+#define MX6Q_PAD_ENET_RXD0__ESAI_TX_HF_CLK        0x1e4 0x4f8 0x868 0x2 0x0
+#define MX6Q_PAD_ENET_RXD0__SPDIF_OUT             0x1e4 0x4f8 0x000 0x3 0x0
+#define MX6Q_PAD_ENET_RXD0__GPIO1_IO27            0x1e4 0x4f8 0x000 0x5 0x0
+#define MX6Q_PAD_ENET_TX_EN__ENET_TX_EN           0x1e8 0x4fc 0x000 0x1 0x0
+#define MX6Q_PAD_ENET_TX_EN__ESAI_TX3_RX2         0x1e8 0x4fc 0x880 0x2 0x0
+#define MX6Q_PAD_ENET_TX_EN__GPIO1_IO28           0x1e8 0x4fc 0x000 0x5 0x0
+#define MX6Q_PAD_ENET_TXD1__MLB_CLK               0x1ec 0x500 0x900 0x0 0x0
+#define MX6Q_PAD_ENET_TXD1__ENET_TX_DATA1         0x1ec 0x500 0x000 0x1 0x0
+#define MX6Q_PAD_ENET_TXD1__ESAI_TX2_RX3          0x1ec 0x500 0x87c 0x2 0x0
+#define MX6Q_PAD_ENET_TXD1__ENET_1588_EVENT0_IN   0x1ec 0x500 0x000 0x4 0x0
+#define MX6Q_PAD_ENET_TXD1__GPIO1_IO29            0x1ec 0x500 0x000 0x5 0x0
+#define MX6Q_PAD_ENET_TXD0__ENET_TX_DATA0         0x1f0 0x504 0x000 0x1 0x0
+#define MX6Q_PAD_ENET_TXD0__ESAI_TX4_RX1          0x1f0 0x504 0x884 0x2 0x0
+#define MX6Q_PAD_ENET_TXD0__GPIO1_IO30            0x1f0 0x504 0x000 0x5 0x0
+#define MX6Q_PAD_ENET_MDC__MLB_DATA               0x1f4 0x508 0x904 0x0 0x0
+#define MX6Q_PAD_ENET_MDC__ENET_MDC               0x1f4 0x508 0x000 0x1 0x0
+#define MX6Q_PAD_ENET_MDC__ESAI_TX5_RX0           0x1f4 0x508 0x888 0x2 0x0
+#define MX6Q_PAD_ENET_MDC__ENET_1588_EVENT1_IN    0x1f4 0x508 0x000 0x4 0x0
+#define MX6Q_PAD_ENET_MDC__GPIO1_IO31             0x1f4 0x508 0x000 0x5 0x0
+#define MX6Q_PAD_KEY_COL0__ECSPI1_SCLK            0x1f8 0x5c8 0x7f4 0x0 0x2
+#define MX6Q_PAD_KEY_COL0__ENET_RX_DATA3          0x1f8 0x5c8 0x854 0x1 0x1
+#define MX6Q_PAD_KEY_COL0__AUD5_TXC               0x1f8 0x5c8 0x7dc 0x2 0x1
+#define MX6Q_PAD_KEY_COL0__KEY_COL0               0x1f8 0x5c8 0x000 0x3 0x0
+#define MX6Q_PAD_KEY_COL0__UART4_TX_DATA          0x1f8 0x5c8 0x000 0x4 0x0
+#define MX6Q_PAD_KEY_COL0__UART4_RX_DATA          0x1f8 0x5c8 0x938 0x4 0x0
+#define MX6Q_PAD_KEY_COL0__GPIO4_IO06             0x1f8 0x5c8 0x000 0x5 0x0
+#define MX6Q_PAD_KEY_COL0__DCIC1_OUT              0x1f8 0x5c8 0x000 0x6 0x0
+#define MX6Q_PAD_KEY_ROW0__ECSPI1_MOSI            0x1fc 0x5cc 0x7fc 0x0 0x2
+#define MX6Q_PAD_KEY_ROW0__ENET_TX_DATA3          0x1fc 0x5cc 0x000 0x1 0x0
+#define MX6Q_PAD_KEY_ROW0__AUD5_TXD               0x1fc 0x5cc 0x7d0 0x2 0x1
+#define MX6Q_PAD_KEY_ROW0__KEY_ROW0               0x1fc 0x5cc 0x000 0x3 0x0
+#define MX6Q_PAD_KEY_ROW0__UART4_RX_DATA          0x1fc 0x5cc 0x938 0x4 0x1
+#define MX6Q_PAD_KEY_ROW0__UART4_TX_DATA          0x1fc 0x5cc 0x000 0x4 0x0
+#define MX6Q_PAD_KEY_ROW0__GPIO4_IO07             0x1fc 0x5cc 0x000 0x5 0x0
+#define MX6Q_PAD_KEY_ROW0__DCIC2_OUT              0x1fc 0x5cc 0x000 0x6 0x0
+#define MX6Q_PAD_KEY_COL1__ECSPI1_MISO            0x200 0x5d0 0x7f8 0x0 0x2
+#define MX6Q_PAD_KEY_COL1__ENET_MDIO              0x200 0x5d0 0x840 0x1 0x1
+#define MX6Q_PAD_KEY_COL1__AUD5_TXFS              0x200 0x5d0 0x7e0 0x2 0x1
+#define MX6Q_PAD_KEY_COL1__KEY_COL1               0x200 0x5d0 0x000 0x3 0x0
+#define MX6Q_PAD_KEY_COL1__UART5_TX_DATA          0x200 0x5d0 0x000 0x4 0x0
+#define MX6Q_PAD_KEY_COL1__UART5_RX_DATA          0x200 0x5d0 0x940 0x4 0x0
+#define MX6Q_PAD_KEY_COL1__GPIO4_IO08             0x200 0x5d0 0x000 0x5 0x0
+#define MX6Q_PAD_KEY_COL1__SD1_VSELECT            0x200 0x5d0 0x000 0x6 0x0
+#define MX6Q_PAD_KEY_ROW1__ECSPI1_SS0             0x204 0x5d4 0x800 0x0 0x2
+#define MX6Q_PAD_KEY_ROW1__ENET_COL               0x204 0x5d4 0x000 0x1 0x0
+#define MX6Q_PAD_KEY_ROW1__AUD5_RXD               0x204 0x5d4 0x7cc 0x2 0x1
+#define MX6Q_PAD_KEY_ROW1__KEY_ROW1               0x204 0x5d4 0x000 0x3 0x0
+#define MX6Q_PAD_KEY_ROW1__UART5_RX_DATA          0x204 0x5d4 0x940 0x4 0x1
+#define MX6Q_PAD_KEY_ROW1__UART5_TX_DATA          0x204 0x5d4 0x000 0x4 0x0
+#define MX6Q_PAD_KEY_ROW1__GPIO4_IO09             0x204 0x5d4 0x000 0x5 0x0
+#define MX6Q_PAD_KEY_ROW1__SD2_VSELECT            0x204 0x5d4 0x000 0x6 0x0
+#define MX6Q_PAD_KEY_COL2__ECSPI1_SS1             0x208 0x5d8 0x804 0x0 0x2
+#define MX6Q_PAD_KEY_COL2__ENET_RX_DATA2          0x208 0x5d8 0x850 0x1 0x1
+#define MX6Q_PAD_KEY_COL2__FLEXCAN1_TX            0x208 0x5d8 0x000 0x2 0x0
+#define MX6Q_PAD_KEY_COL2__KEY_COL2               0x208 0x5d8 0x000 0x3 0x0
+#define MX6Q_PAD_KEY_COL2__ENET_MDC               0x208 0x5d8 0x000 0x4 0x0
+#define MX6Q_PAD_KEY_COL2__GPIO4_IO10             0x208 0x5d8 0x000 0x5 0x0
+#define MX6Q_PAD_KEY_COL2__USB_H1_PWR_CTL_WAKE    0x208 0x5d8 0x000 0x6 0x0
+#define MX6Q_PAD_KEY_ROW2__ECSPI1_SS2             0x20c 0x5dc 0x808 0x0 0x1
+#define MX6Q_PAD_KEY_ROW2__ENET_TX_DATA2          0x20c 0x5dc 0x000 0x1 0x0
+#define MX6Q_PAD_KEY_ROW2__FLEXCAN1_RX            0x20c 0x5dc 0x7e4 0x2 0x0
+#define MX6Q_PAD_KEY_ROW2__KEY_ROW2               0x20c 0x5dc 0x000 0x3 0x0
+#define MX6Q_PAD_KEY_ROW2__SD2_VSELECT            0x20c 0x5dc 0x000 0x4 0x0
+#define MX6Q_PAD_KEY_ROW2__GPIO4_IO11             0x20c 0x5dc 0x000 0x5 0x0
+#define MX6Q_PAD_KEY_ROW2__HDMI_TX_CEC_LINE       0x20c 0x5dc 0x88c 0x6 0x1
+#define MX6Q_PAD_KEY_COL3__ECSPI1_SS3             0x210 0x5e0 0x80c 0x0 0x1
+#define MX6Q_PAD_KEY_COL3__ENET_CRS               0x210 0x5e0 0x000 0x1 0x0
+#define MX6Q_PAD_KEY_COL3__HDMI_TX_DDC_SCL        0x210 0x5e0 0x890 0x2 0x1
+#define MX6Q_PAD_KEY_COL3__KEY_COL3               0x210 0x5e0 0x000 0x3 0x0
+#define MX6Q_PAD_KEY_COL3__I2C2_SCL               0x210 0x5e0 0x8a0 0x4 0x1
+#define MX6Q_PAD_KEY_COL3__GPIO4_IO12             0x210 0x5e0 0x000 0x5 0x0
+#define MX6Q_PAD_KEY_COL3__SPDIF_IN               0x210 0x5e0 0x914 0x6 0x2
+#define MX6Q_PAD_KEY_ROW3__ASRC_EXT_CLK           0x214 0x5e4 0x7b0 0x1 0x0
+#define MX6Q_PAD_KEY_ROW3__HDMI_TX_DDC_SDA        0x214 0x5e4 0x894 0x2 0x1
+#define MX6Q_PAD_KEY_ROW3__KEY_ROW3               0x214 0x5e4 0x000 0x3 0x0
+#define MX6Q_PAD_KEY_ROW3__I2C2_SDA               0x214 0x5e4 0x8a4 0x4 0x1
+#define MX6Q_PAD_KEY_ROW3__GPIO4_IO13             0x214 0x5e4 0x000 0x5 0x0
+#define MX6Q_PAD_KEY_ROW3__SD1_VSELECT            0x214 0x5e4 0x000 0x6 0x0
+#define MX6Q_PAD_KEY_COL4__FLEXCAN2_TX            0x218 0x5e8 0x000 0x0 0x0
+#define MX6Q_PAD_KEY_COL4__IPU1_SISG4             0x218 0x5e8 0x000 0x1 0x0
+#define MX6Q_PAD_KEY_COL4__USB_OTG_OC             0x218 0x5e8 0x944 0x2 0x1
+#define MX6Q_PAD_KEY_COL4__KEY_COL4               0x218 0x5e8 0x000 0x3 0x0
+#define MX6Q_PAD_KEY_COL4__UART5_RTS_B            0x218 0x5e8 0x93c 0x4 0x0
+#define MX6Q_PAD_KEY_COL4__UART5_CTS_B            0x218 0x5e8 0x000 0x4 0x0
+#define MX6Q_PAD_KEY_COL4__GPIO4_IO14             0x218 0x5e8 0x000 0x5 0x0
+#define MX6Q_PAD_KEY_ROW4__FLEXCAN2_RX            0x21c 0x5ec 0x7e8 0x0 0x0
+#define MX6Q_PAD_KEY_ROW4__IPU1_SISG5             0x21c 0x5ec 0x000 0x1 0x0
+#define MX6Q_PAD_KEY_ROW4__USB_OTG_PWR            0x21c 0x5ec 0x000 0x2 0x0
+#define MX6Q_PAD_KEY_ROW4__KEY_ROW4               0x21c 0x5ec 0x000 0x3 0x0
+#define MX6Q_PAD_KEY_ROW4__UART5_CTS_B            0x21c 0x5ec 0x000 0x4 0x0
+#define MX6Q_PAD_KEY_ROW4__UART5_RTS_B            0x21c 0x5ec 0x93c 0x4 0x1
+#define MX6Q_PAD_KEY_ROW4__GPIO4_IO15             0x21c 0x5ec 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_0__CCM_CLKO1                0x220 0x5f0 0x000 0x0 0x0
+#define MX6Q_PAD_GPIO_0__KEY_COL5                 0x220 0x5f0 0x8e8 0x2 0x0
+#define MX6Q_PAD_GPIO_0__ASRC_EXT_CLK             0x220 0x5f0 0x7b0 0x3 0x1
+#define MX6Q_PAD_GPIO_0__EPIT1_OUT                0x220 0x5f0 0x000 0x4 0x0
+#define MX6Q_PAD_GPIO_0__GPIO1_IO00               0x220 0x5f0 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_0__USB_H1_PWR               0x220 0x5f0 0x000 0x6 0x0
+#define MX6Q_PAD_GPIO_0__SNVS_VIO_5               0x220 0x5f0 0x000 0x7 0x0
+#define MX6Q_PAD_GPIO_1__ESAI_RX_CLK              0x224 0x5f4 0x86c 0x0 0x1
+#define MX6Q_PAD_GPIO_1__WDOG2_B                  0x224 0x5f4 0x000 0x1 0x0
+#define MX6Q_PAD_GPIO_1__KEY_ROW5                 0x224 0x5f4 0x8f4 0x2 0x0
+#define MX6Q_PAD_GPIO_1__USB_OTG_ID               0x224 0x5f4 0x000 0x3 0x0
+#define MX6Q_PAD_GPIO_1__PWM2_OUT                 0x224 0x5f4 0x000 0x4 0x0
+#define MX6Q_PAD_GPIO_1__GPIO1_IO01               0x224 0x5f4 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_1__SD1_CD_B                 0x224 0x5f4 0x000 0x6 0x0
+#define MX6Q_PAD_GPIO_9__ESAI_RX_FS               0x228 0x5f8 0x85c 0x0 0x1
+#define MX6Q_PAD_GPIO_9__WDOG1_B                  0x228 0x5f8 0x000 0x1 0x0
+#define MX6Q_PAD_GPIO_9__KEY_COL6                 0x228 0x5f8 0x8ec 0x2 0x0
+#define MX6Q_PAD_GPIO_9__CCM_REF_EN_B             0x228 0x5f8 0x000 0x3 0x0
+#define MX6Q_PAD_GPIO_9__PWM1_OUT                 0x228 0x5f8 0x000 0x4 0x0
+#define MX6Q_PAD_GPIO_9__GPIO1_IO09               0x228 0x5f8 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_9__SD1_WP                   0x228 0x5f8 0x94c 0x6 0x1
+#define MX6Q_PAD_GPIO_3__ESAI_RX_HF_CLK           0x22c 0x5fc 0x864 0x0 0x1
+#define MX6Q_PAD_GPIO_3__I2C3_SCL                 0x22c 0x5fc 0x8a8 0x2 0x1
+#define MX6Q_PAD_GPIO_3__XTALOSC_REF_CLK_24M      0x22c 0x5fc 0x000 0x3 0x0
+#define MX6Q_PAD_GPIO_3__CCM_CLKO2                0x22c 0x5fc 0x000 0x4 0x0
+#define MX6Q_PAD_GPIO_3__GPIO1_IO03               0x22c 0x5fc 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_3__USB_H1_OC                0x22c 0x5fc 0x948 0x6 0x1
+#define MX6Q_PAD_GPIO_3__MLB_CLK                  0x22c 0x5fc 0x900 0x7 0x1
+#define MX6Q_PAD_GPIO_6__ESAI_TX_CLK              0x230 0x600 0x870 0x0 0x1
+#define MX6Q_PAD_GPIO_6__I2C3_SDA                 0x230 0x600 0x8ac 0x2 0x1
+#define MX6Q_PAD_GPIO_6__GPIO1_IO06               0x230 0x600 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_6__SD2_LCTL                 0x230 0x600 0x000 0x6 0x0
+#define MX6Q_PAD_GPIO_6__MLB_SIG                  0x230 0x600 0x908 0x7 0x1
+#define MX6Q_PAD_GPIO_2__ESAI_TX_FS               0x234 0x604 0x860 0x0 0x1
+#define MX6Q_PAD_GPIO_2__KEY_ROW6                 0x234 0x604 0x8f8 0x2 0x1
+#define MX6Q_PAD_GPIO_2__GPIO1_IO02               0x234 0x604 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_2__SD2_WP                   0x234 0x604 0x000 0x6 0x0
+#define MX6Q_PAD_GPIO_2__MLB_DATA                 0x234 0x604 0x904 0x7 0x1
+#define MX6Q_PAD_GPIO_4__ESAI_TX_HF_CLK           0x238 0x608 0x868 0x0 0x1
+#define MX6Q_PAD_GPIO_4__KEY_COL7                 0x238 0x608 0x8f0 0x2 0x1
+#define MX6Q_PAD_GPIO_4__GPIO1_IO04               0x238 0x608 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_4__SD2_CD_B                 0x238 0x608 0x000 0x6 0x0
+#define MX6Q_PAD_GPIO_5__ESAI_TX2_RX3             0x23c 0x60c 0x87c 0x0 0x1
+#define MX6Q_PAD_GPIO_5__KEY_ROW7                 0x23c 0x60c 0x8fc 0x2 0x1
+#define MX6Q_PAD_GPIO_5__CCM_CLKO1                0x23c 0x60c 0x000 0x3 0x0
+#define MX6Q_PAD_GPIO_5__GPIO1_IO05               0x23c 0x60c 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_5__I2C3_SCL                 0x23c 0x60c 0x8a8 0x6 0x2
+#define MX6Q_PAD_GPIO_5__ARM_EVENTI               0x23c 0x60c 0x000 0x7 0x0
+#define MX6Q_PAD_GPIO_7__ESAI_TX4_RX1             0x240 0x610 0x884 0x0 0x1
+#define MX6Q_PAD_GPIO_7__ECSPI5_RDY               0x240 0x610 0x000 0x1 0x0
+#define MX6Q_PAD_GPIO_7__EPIT1_OUT                0x240 0x610 0x000 0x2 0x0
+#define MX6Q_PAD_GPIO_7__FLEXCAN1_TX              0x240 0x610 0x000 0x3 0x0
+#define MX6Q_PAD_GPIO_7__UART2_TX_DATA            0x240 0x610 0x000 0x4 0x0
+#define MX6Q_PAD_GPIO_7__UART2_RX_DATA            0x240 0x610 0x928 0x4 0x2
+#define MX6Q_PAD_GPIO_7__GPIO1_IO07               0x240 0x610 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_7__SPDIF_LOCK               0x240 0x610 0x000 0x6 0x0
+#define MX6Q_PAD_GPIO_7__USB_OTG_HOST_MODE        0x240 0x610 0x000 0x7 0x0
+#define MX6Q_PAD_GPIO_8__ESAI_TX5_RX0             0x244 0x614 0x888 0x0 0x1
+#define MX6Q_PAD_GPIO_8__XTALOSC_REF_CLK_32K      0x244 0x614 0x000 0x1 0x0
+#define MX6Q_PAD_GPIO_8__EPIT2_OUT                0x244 0x614 0x000 0x2 0x0
+#define MX6Q_PAD_GPIO_8__FLEXCAN1_RX              0x244 0x614 0x7e4 0x3 0x1
+#define MX6Q_PAD_GPIO_8__UART2_RX_DATA            0x244 0x614 0x928 0x4 0x3
+#define MX6Q_PAD_GPIO_8__UART2_TX_DATA            0x244 0x614 0x000 0x4 0x0
+#define MX6Q_PAD_GPIO_8__GPIO1_IO08               0x244 0x614 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_8__SPDIF_SR_CLK             0x244 0x614 0x000 0x6 0x0
+#define MX6Q_PAD_GPIO_8__USB_OTG_PWR_CTL_WAKE     0x244 0x614 0x000 0x7 0x0
+#define MX6Q_PAD_GPIO_16__ESAI_TX3_RX2            0x248 0x618 0x880 0x0 0x1
+#define MX6Q_PAD_GPIO_16__ENET_1588_EVENT2_IN     0x248 0x618 0x000 0x1 0x0
+#define MX6Q_PAD_GPIO_16__ENET_REF_CLK            0x248 0x618 0x83c 0x2 0x1
+#define MX6Q_PAD_GPIO_16__SD1_LCTL                0x248 0x618 0x000 0x3 0x0
+#define MX6Q_PAD_GPIO_16__SPDIF_IN                0x248 0x618 0x914 0x4 0x3
+#define MX6Q_PAD_GPIO_16__GPIO7_IO11              0x248 0x618 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_16__I2C3_SDA                0x248 0x618 0x8ac 0x6 0x2
+#define MX6Q_PAD_GPIO_16__JTAG_DE_B               0x248 0x618 0x000 0x7 0x0
+#define MX6Q_PAD_GPIO_17__ESAI_TX0                0x24c 0x61c 0x874 0x0 0x0
+#define MX6Q_PAD_GPIO_17__ENET_1588_EVENT3_IN     0x24c 0x61c 0x000 0x1 0x0
+#define MX6Q_PAD_GPIO_17__CCM_PMIC_READY          0x24c 0x61c 0x7f0 0x2 0x1
+#define MX6Q_PAD_GPIO_17__SDMA_EXT_EVENT0         0x24c 0x61c 0x90c 0x3 0x1
+#define MX6Q_PAD_GPIO_17__SPDIF_OUT               0x24c 0x61c 0x000 0x4 0x0
+#define MX6Q_PAD_GPIO_17__GPIO7_IO12              0x24c 0x61c 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_18__ESAI_TX1                0x250 0x620 0x878 0x0 0x0
+#define MX6Q_PAD_GPIO_18__ENET_RX_CLK             0x250 0x620 0x844 0x1 0x1
+#define MX6Q_PAD_GPIO_18__SD3_VSELECT             0x250 0x620 0x000 0x2 0x0
+#define MX6Q_PAD_GPIO_18__SDMA_EXT_EVENT1         0x250 0x620 0x910 0x3 0x1
+#define MX6Q_PAD_GPIO_18__ASRC_EXT_CLK            0x250 0x620 0x7b0 0x4 0x2
+#define MX6Q_PAD_GPIO_18__GPIO7_IO13              0x250 0x620 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_18__SNVS_VIO_5_CTL          0x250 0x620 0x000 0x6 0x0
+#define MX6Q_PAD_GPIO_19__KEY_COL5                0x254 0x624 0x8e8 0x0 0x1
+#define MX6Q_PAD_GPIO_19__ENET_1588_EVENT0_OUT    0x254 0x624 0x000 0x1 0x0
+#define MX6Q_PAD_GPIO_19__SPDIF_OUT               0x254 0x624 0x000 0x2 0x0
+#define MX6Q_PAD_GPIO_19__CCM_CLKO1               0x254 0x624 0x000 0x3 0x0
+#define MX6Q_PAD_GPIO_19__ECSPI1_RDY              0x254 0x624 0x000 0x4 0x0
+#define MX6Q_PAD_GPIO_19__GPIO4_IO05              0x254 0x624 0x000 0x5 0x0
+#define MX6Q_PAD_GPIO_19__ENET_TX_ER              0x254 0x624 0x000 0x6 0x0
+#define MX6Q_PAD_CSI0_PIXCLK__IPU1_CSI0_PIXCLK    0x258 0x628 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_PIXCLK__GPIO5_IO18          0x258 0x628 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_PIXCLK__ARM_EVENTO          0x258 0x628 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_MCLK__IPU1_CSI0_HSYNC       0x25c 0x62c 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_MCLK__CCM_CLKO1             0x25c 0x62c 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_MCLK__GPIO5_IO19            0x25c 0x62c 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_MCLK__ARM_TRACE_CTL         0x25c 0x62c 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DATA_EN__IPU1_CSI0_DATA_EN  0x260 0x630 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DATA_EN__EIM_DATA00         0x260 0x630 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DATA_EN__GPIO5_IO20         0x260 0x630 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DATA_EN__ARM_TRACE_CLK      0x260 0x630 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_VSYNC__IPU1_CSI0_VSYNC      0x264 0x634 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_VSYNC__EIM_DATA01           0x264 0x634 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_VSYNC__GPIO5_IO21           0x264 0x634 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_VSYNC__ARM_TRACE00          0x264 0x634 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT4__IPU1_CSI0_DATA04      0x268 0x638 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT4__EIM_DATA02            0x268 0x638 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT4__ECSPI1_SCLK           0x268 0x638 0x7f4 0x2 0x3
+#define MX6Q_PAD_CSI0_DAT4__KEY_COL5              0x268 0x638 0x8e8 0x3 0x2
+#define MX6Q_PAD_CSI0_DAT4__AUD3_TXC              0x268 0x638 0x000 0x4 0x0
+#define MX6Q_PAD_CSI0_DAT4__GPIO5_IO22            0x268 0x638 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT4__ARM_TRACE01           0x268 0x638 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT5__IPU1_CSI0_DATA05      0x26c 0x63c 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT5__EIM_DATA03            0x26c 0x63c 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT5__ECSPI1_MOSI           0x26c 0x63c 0x7fc 0x2 0x3
+#define MX6Q_PAD_CSI0_DAT5__KEY_ROW5              0x26c 0x63c 0x8f4 0x3 0x1
+#define MX6Q_PAD_CSI0_DAT5__AUD3_TXD              0x26c 0x63c 0x000 0x4 0x0
+#define MX6Q_PAD_CSI0_DAT5__GPIO5_IO23            0x26c 0x63c 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT5__ARM_TRACE02           0x26c 0x63c 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT6__IPU1_CSI0_DATA06      0x270 0x640 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT6__EIM_DATA04            0x270 0x640 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT6__ECSPI1_MISO           0x270 0x640 0x7f8 0x2 0x3
+#define MX6Q_PAD_CSI0_DAT6__KEY_COL6              0x270 0x640 0x8ec 0x3 0x1
+#define MX6Q_PAD_CSI0_DAT6__AUD3_TXFS             0x270 0x640 0x000 0x4 0x0
+#define MX6Q_PAD_CSI0_DAT6__GPIO5_IO24            0x270 0x640 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT6__ARM_TRACE03           0x270 0x640 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT7__IPU1_CSI0_DATA07      0x274 0x644 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT7__EIM_DATA05            0x274 0x644 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT7__ECSPI1_SS0            0x274 0x644 0x800 0x2 0x3
+#define MX6Q_PAD_CSI0_DAT7__KEY_ROW6              0x274 0x644 0x8f8 0x3 0x2
+#define MX6Q_PAD_CSI0_DAT7__AUD3_RXD              0x274 0x644 0x000 0x4 0x0
+#define MX6Q_PAD_CSI0_DAT7__GPIO5_IO25            0x274 0x644 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT7__ARM_TRACE04           0x274 0x644 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT8__IPU1_CSI0_DATA08      0x278 0x648 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT8__EIM_DATA06            0x278 0x648 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT8__ECSPI2_SCLK           0x278 0x648 0x810 0x2 0x2
+#define MX6Q_PAD_CSI0_DAT8__KEY_COL7              0x278 0x648 0x8f0 0x3 0x2
+#define MX6Q_PAD_CSI0_DAT8__I2C1_SDA              0x278 0x648 0x89c 0x4 0x1
+#define MX6Q_PAD_CSI0_DAT8__GPIO5_IO26            0x278 0x648 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT8__ARM_TRACE05           0x278 0x648 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT9__IPU1_CSI0_DATA09      0x27c 0x64c 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT9__EIM_DATA07            0x27c 0x64c 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT9__ECSPI2_MOSI           0x27c 0x64c 0x818 0x2 0x2
+#define MX6Q_PAD_CSI0_DAT9__KEY_ROW7              0x27c 0x64c 0x8fc 0x3 0x2
+#define MX6Q_PAD_CSI0_DAT9__I2C1_SCL              0x27c 0x64c 0x898 0x4 0x1
+#define MX6Q_PAD_CSI0_DAT9__GPIO5_IO27            0x27c 0x64c 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT9__ARM_TRACE06           0x27c 0x64c 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT10__IPU1_CSI0_DATA10     0x280 0x650 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT10__AUD3_RXC             0x280 0x650 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT10__ECSPI2_MISO          0x280 0x650 0x814 0x2 0x2
+#define MX6Q_PAD_CSI0_DAT10__UART1_TX_DATA        0x280 0x650 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT10__UART1_RX_DATA        0x280 0x650 0x920 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT10__GPIO5_IO28           0x280 0x650 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT10__ARM_TRACE07          0x280 0x650 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT11__IPU1_CSI0_DATA11     0x284 0x654 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT11__AUD3_RXFS            0x284 0x654 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT11__ECSPI2_SS0           0x284 0x654 0x81c 0x2 0x2
+#define MX6Q_PAD_CSI0_DAT11__UART1_RX_DATA        0x284 0x654 0x920 0x3 0x1
+#define MX6Q_PAD_CSI0_DAT11__UART1_TX_DATA        0x284 0x654 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT11__GPIO5_IO29           0x284 0x654 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT11__ARM_TRACE08          0x284 0x654 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT12__IPU1_CSI0_DATA12     0x288 0x658 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT12__EIM_DATA08           0x288 0x658 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT12__UART4_TX_DATA        0x288 0x658 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT12__UART4_RX_DATA        0x288 0x658 0x938 0x3 0x2
+#define MX6Q_PAD_CSI0_DAT12__GPIO5_IO30           0x288 0x658 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT12__ARM_TRACE09          0x288 0x658 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT13__IPU1_CSI0_DATA13     0x28c 0x65c 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT13__EIM_DATA09           0x28c 0x65c 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT13__UART4_RX_DATA        0x28c 0x65c 0x938 0x3 0x3
+#define MX6Q_PAD_CSI0_DAT13__UART4_TX_DATA        0x28c 0x65c 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT13__GPIO5_IO31           0x28c 0x65c 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT13__ARM_TRACE10          0x28c 0x65c 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT14__IPU1_CSI0_DATA14     0x290 0x660 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT14__EIM_DATA10           0x290 0x660 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT14__UART5_TX_DATA        0x290 0x660 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT14__UART5_RX_DATA        0x290 0x660 0x940 0x3 0x2
+#define MX6Q_PAD_CSI0_DAT14__GPIO6_IO00           0x290 0x660 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT14__ARM_TRACE11          0x290 0x660 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT15__IPU1_CSI0_DATA15     0x294 0x664 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT15__EIM_DATA11           0x294 0x664 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT15__UART5_RX_DATA        0x294 0x664 0x940 0x3 0x3
+#define MX6Q_PAD_CSI0_DAT15__UART5_TX_DATA        0x294 0x664 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT15__GPIO6_IO01           0x294 0x664 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT15__ARM_TRACE12          0x294 0x664 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT16__IPU1_CSI0_DATA16     0x298 0x668 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT16__EIM_DATA12           0x298 0x668 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT16__UART4_RTS_B          0x298 0x668 0x934 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT16__UART4_CTS_B          0x298 0x668 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT16__GPIO6_IO02           0x298 0x668 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT16__ARM_TRACE13          0x298 0x668 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT17__IPU1_CSI0_DATA17     0x29c 0x66c 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT17__EIM_DATA13           0x29c 0x66c 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT17__UART4_CTS_B          0x29c 0x66c 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT17__UART4_RTS_B          0x29c 0x66c 0x934 0x3 0x1
+#define MX6Q_PAD_CSI0_DAT17__GPIO6_IO03           0x29c 0x66c 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT17__ARM_TRACE14          0x29c 0x66c 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT18__IPU1_CSI0_DATA18     0x2a0 0x670 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT18__EIM_DATA14           0x2a0 0x670 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT18__UART5_RTS_B          0x2a0 0x670 0x93c 0x3 0x2
+#define MX6Q_PAD_CSI0_DAT18__UART5_CTS_B          0x2a0 0x670 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT18__GPIO6_IO04           0x2a0 0x670 0x000 0x5 0x0
+#define MX6Q_PAD_CSI0_DAT18__ARM_TRACE15          0x2a0 0x670 0x000 0x7 0x0
+#define MX6Q_PAD_CSI0_DAT19__IPU1_CSI0_DATA19     0x2a4 0x674 0x000 0x0 0x0
+#define MX6Q_PAD_CSI0_DAT19__EIM_DATA15           0x2a4 0x674 0x000 0x1 0x0
+#define MX6Q_PAD_CSI0_DAT19__UART5_CTS_B          0x2a4 0x674 0x000 0x3 0x0
+#define MX6Q_PAD_CSI0_DAT19__UART5_RTS_B          0x2a4 0x674 0x93c 0x3 0x3
+#define MX6Q_PAD_CSI0_DAT19__GPIO6_IO05           0x2a4 0x674 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_DAT7__SD3_DATA7              0x2a8 0x690 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_DAT7__UART1_TX_DATA          0x2a8 0x690 0x000 0x1 0x0
+#define MX6Q_PAD_SD3_DAT7__UART1_RX_DATA          0x2a8 0x690 0x920 0x1 0x2
+#define MX6Q_PAD_SD3_DAT7__GPIO6_IO17             0x2a8 0x690 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_DAT6__SD3_DATA6              0x2ac 0x694 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_DAT6__UART1_RX_DATA          0x2ac 0x694 0x920 0x1 0x3
+#define MX6Q_PAD_SD3_DAT6__UART1_TX_DATA          0x2ac 0x694 0x000 0x1 0x0
+#define MX6Q_PAD_SD3_DAT6__GPIO6_IO18             0x2ac 0x694 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_DAT5__SD3_DATA5              0x2b0 0x698 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_DAT5__UART2_TX_DATA          0x2b0 0x698 0x000 0x1 0x0
+#define MX6Q_PAD_SD3_DAT5__UART2_RX_DATA          0x2b0 0x698 0x928 0x1 0x4
+#define MX6Q_PAD_SD3_DAT5__GPIO7_IO00             0x2b0 0x698 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_DAT4__SD3_DATA4              0x2b4 0x69c 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_DAT4__UART2_RX_DATA          0x2b4 0x69c 0x928 0x1 0x5
+#define MX6Q_PAD_SD3_DAT4__UART2_TX_DATA          0x2b4 0x69c 0x000 0x1 0x0
+#define MX6Q_PAD_SD3_DAT4__GPIO7_IO01             0x2b4 0x69c 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_CMD__SD3_CMD                 0x2b8 0x6a0 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_CMD__UART2_CTS_B             0x2b8 0x6a0 0x000 0x1 0x0
+#define MX6Q_PAD_SD3_CMD__UART2_RTS_B             0x2b8 0x6a0 0x924 0x1 0x2
+#define MX6Q_PAD_SD3_CMD__FLEXCAN1_TX             0x2b8 0x6a0 0x000 0x2 0x0
+#define MX6Q_PAD_SD3_CMD__GPIO7_IO02              0x2b8 0x6a0 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_CLK__SD3_CLK                 0x2bc 0x6a4 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_CLK__UART2_RTS_B             0x2bc 0x6a4 0x924 0x1 0x3
+#define MX6Q_PAD_SD3_CLK__UART2_CTS_B             0x2bc 0x6a4 0x000 0x1 0x0
+#define MX6Q_PAD_SD3_CLK__FLEXCAN1_RX             0x2bc 0x6a4 0x7e4 0x2 0x2
+#define MX6Q_PAD_SD3_CLK__GPIO7_IO03              0x2bc 0x6a4 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_DAT0__SD3_DATA0              0x2c0 0x6a8 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_DAT0__UART1_CTS_B            0x2c0 0x6a8 0x000 0x1 0x0
+#define MX6Q_PAD_SD3_DAT0__UART1_RTS_B            0x2c0 0x6a8 0x91c 0x1 0x2
+#define MX6Q_PAD_SD3_DAT0__FLEXCAN2_TX            0x2c0 0x6a8 0x000 0x2 0x0
+#define MX6Q_PAD_SD3_DAT0__GPIO7_IO04             0x2c0 0x6a8 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_DAT1__SD3_DATA1              0x2c4 0x6ac 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_DAT1__UART1_RTS_B            0x2c4 0x6ac 0x91c 0x1 0x3
+#define MX6Q_PAD_SD3_DAT1__UART1_CTS_B            0x2c4 0x6ac 0x000 0x1 0x0
+#define MX6Q_PAD_SD3_DAT1__FLEXCAN2_RX            0x2c4 0x6ac 0x7e8 0x2 0x1
+#define MX6Q_PAD_SD3_DAT1__GPIO7_IO05             0x2c4 0x6ac 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_DAT2__SD3_DATA2              0x2c8 0x6b0 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_DAT2__GPIO7_IO06             0x2c8 0x6b0 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_DAT3__SD3_DATA3              0x2cc 0x6b4 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_DAT3__UART3_CTS_B            0x2cc 0x6b4 0x000 0x1 0x0
+#define MX6Q_PAD_SD3_DAT3__UART3_RTS_B            0x2cc 0x6b4 0x92c 0x1 0x4
+#define MX6Q_PAD_SD3_DAT3__GPIO7_IO07             0x2cc 0x6b4 0x000 0x5 0x0
+#define MX6Q_PAD_SD3_RST__SD3_RESET               0x2d0 0x6b8 0x000 0x0 0x0
+#define MX6Q_PAD_SD3_RST__UART3_RTS_B             0x2d0 0x6b8 0x92c 0x1 0x5
+#define MX6Q_PAD_SD3_RST__UART3_CTS_B             0x2d0 0x6b8 0x000 0x1 0x0
+#define MX6Q_PAD_SD3_RST__GPIO7_IO08              0x2d0 0x6b8 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_CLE__NAND_CLE              0x2d4 0x6bc 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_CLE__IPU2_SISG4            0x2d4 0x6bc 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_CLE__GPIO6_IO07            0x2d4 0x6bc 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_ALE__NAND_ALE              0x2d8 0x6c0 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_ALE__SD4_RESET             0x2d8 0x6c0 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_ALE__GPIO6_IO08            0x2d8 0x6c0 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_WP_B__NAND_WP_B            0x2dc 0x6c4 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_WP_B__IPU2_SISG5           0x2dc 0x6c4 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_WP_B__GPIO6_IO09           0x2dc 0x6c4 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_RB0__NAND_READY_B          0x2e0 0x6c8 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_RB0__IPU2_DI0_PIN01        0x2e0 0x6c8 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_RB0__GPIO6_IO10            0x2e0 0x6c8 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_CS0__NAND_CE0_B            0x2e4 0x6cc 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_CS0__GPIO6_IO11            0x2e4 0x6cc 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_CS1__NAND_CE1_B            0x2e8 0x6d0 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_CS1__SD4_VSELECT           0x2e8 0x6d0 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_CS1__SD3_VSELECT           0x2e8 0x6d0 0x000 0x2 0x0
+#define MX6Q_PAD_NANDF_CS1__GPIO6_IO14            0x2e8 0x6d0 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_CS2__NAND_CE2_B            0x2ec 0x6d4 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_CS2__IPU1_SISG0            0x2ec 0x6d4 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_CS2__ESAI_TX0              0x2ec 0x6d4 0x874 0x2 0x1
+#define MX6Q_PAD_NANDF_CS2__EIM_CRE               0x2ec 0x6d4 0x000 0x3 0x0
+#define MX6Q_PAD_NANDF_CS2__CCM_CLKO2             0x2ec 0x6d4 0x000 0x4 0x0
+#define MX6Q_PAD_NANDF_CS2__GPIO6_IO15            0x2ec 0x6d4 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_CS2__IPU2_SISG0            0x2ec 0x6d4 0x000 0x6 0x0
+#define MX6Q_PAD_NANDF_CS3__NAND_CE3_B            0x2f0 0x6d8 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_CS3__IPU1_SISG1            0x2f0 0x6d8 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_CS3__ESAI_TX1              0x2f0 0x6d8 0x878 0x2 0x1
+#define MX6Q_PAD_NANDF_CS3__EIM_ADDR26            0x2f0 0x6d8 0x000 0x3 0x0
+#define MX6Q_PAD_NANDF_CS3__GPIO6_IO16            0x2f0 0x6d8 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_CS3__IPU2_SISG1            0x2f0 0x6d8 0x000 0x6 0x0
+#define MX6Q_PAD_SD4_CMD__SD4_CMD                 0x2f4 0x6dc 0x000 0x0 0x0
+#define MX6Q_PAD_SD4_CMD__NAND_RE_B               0x2f4 0x6dc 0x000 0x1 0x0
+#define MX6Q_PAD_SD4_CMD__UART3_TX_DATA           0x2f4 0x6dc 0x000 0x2 0x0
+#define MX6Q_PAD_SD4_CMD__UART3_RX_DATA           0x2f4 0x6dc 0x930 0x2 0x2
+#define MX6Q_PAD_SD4_CMD__GPIO7_IO09              0x2f4 0x6dc 0x000 0x5 0x0
+#define MX6Q_PAD_SD4_CLK__SD4_CLK                 0x2f8 0x6e0 0x000 0x0 0x0
+#define MX6Q_PAD_SD4_CLK__NAND_WE_B               0x2f8 0x6e0 0x000 0x1 0x0
+#define MX6Q_PAD_SD4_CLK__UART3_RX_DATA           0x2f8 0x6e0 0x930 0x2 0x3
+#define MX6Q_PAD_SD4_CLK__UART3_TX_DATA           0x2f8 0x6e0 0x000 0x2 0x0
+#define MX6Q_PAD_SD4_CLK__GPIO7_IO10              0x2f8 0x6e0 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_D0__NAND_DATA00            0x2fc 0x6e4 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_D0__SD1_DATA4              0x2fc 0x6e4 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_D0__GPIO2_IO00             0x2fc 0x6e4 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_D1__NAND_DATA01            0x300 0x6e8 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_D1__SD1_DATA5              0x300 0x6e8 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_D1__GPIO2_IO01             0x300 0x6e8 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_D2__NAND_DATA02            0x304 0x6ec 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_D2__SD1_DATA6              0x304 0x6ec 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_D2__GPIO2_IO02             0x304 0x6ec 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_D3__NAND_DATA03            0x308 0x6f0 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_D3__SD1_DATA7              0x308 0x6f0 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_D3__GPIO2_IO03             0x308 0x6f0 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_D4__NAND_DATA04            0x30c 0x6f4 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_D4__SD2_DATA4              0x30c 0x6f4 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_D4__GPIO2_IO04             0x30c 0x6f4 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_D5__NAND_DATA05            0x310 0x6f8 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_D5__SD2_DATA5              0x310 0x6f8 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_D5__GPIO2_IO05             0x310 0x6f8 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_D6__NAND_DATA06            0x314 0x6fc 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_D6__SD2_DATA6              0x314 0x6fc 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_D6__GPIO2_IO06             0x314 0x6fc 0x000 0x5 0x0
+#define MX6Q_PAD_NANDF_D7__NAND_DATA07            0x318 0x700 0x000 0x0 0x0
+#define MX6Q_PAD_NANDF_D7__SD2_DATA7              0x318 0x700 0x000 0x1 0x0
+#define MX6Q_PAD_NANDF_D7__GPIO2_IO07             0x318 0x700 0x000 0x5 0x0
+#define MX6Q_PAD_SD4_DAT0__SD4_DATA0              0x31c 0x704 0x000 0x1 0x0
+#define MX6Q_PAD_SD4_DAT0__NAND_DQS               0x31c 0x704 0x000 0x2 0x0
+#define MX6Q_PAD_SD4_DAT0__GPIO2_IO08             0x31c 0x704 0x000 0x5 0x0
+#define MX6Q_PAD_SD4_DAT1__SD4_DATA1              0x320 0x708 0x000 0x1 0x0
+#define MX6Q_PAD_SD4_DAT1__PWM3_OUT               0x320 0x708 0x000 0x2 0x0
+#define MX6Q_PAD_SD4_DAT1__GPIO2_IO09             0x320 0x708 0x000 0x5 0x0
+#define MX6Q_PAD_SD4_DAT2__SD4_DATA2              0x324 0x70c 0x000 0x1 0x0
+#define MX6Q_PAD_SD4_DAT2__PWM4_OUT               0x324 0x70c 0x000 0x2 0x0
+#define MX6Q_PAD_SD4_DAT2__GPIO2_IO10             0x324 0x70c 0x000 0x5 0x0
+#define MX6Q_PAD_SD4_DAT3__SD4_DATA3              0x328 0x710 0x000 0x1 0x0
+#define MX6Q_PAD_SD4_DAT3__GPIO2_IO11             0x328 0x710 0x000 0x5 0x0
+#define MX6Q_PAD_SD4_DAT4__SD4_DATA4              0x32c 0x714 0x000 0x1 0x0
+#define MX6Q_PAD_SD4_DAT4__UART2_RX_DATA          0x32c 0x714 0x928 0x2 0x6
+#define MX6Q_PAD_SD4_DAT4__UART2_TX_DATA          0x32c 0x714 0x000 0x2 0x0
+#define MX6Q_PAD_SD4_DAT4__GPIO2_IO12             0x32c 0x714 0x000 0x5 0x0
+#define MX6Q_PAD_SD4_DAT5__SD4_DATA5              0x330 0x718 0x000 0x1 0x0
+#define MX6Q_PAD_SD4_DAT5__UART2_RTS_B            0x330 0x718 0x924 0x2 0x4
+#define MX6Q_PAD_SD4_DAT5__UART2_CTS_B            0x330 0x718 0x000 0x2 0x0
+#define MX6Q_PAD_SD4_DAT5__GPIO2_IO13             0x330 0x718 0x000 0x5 0x0
+#define MX6Q_PAD_SD4_DAT6__SD4_DATA6              0x334 0x71c 0x000 0x1 0x0
+#define MX6Q_PAD_SD4_DAT6__UART2_CTS_B            0x334 0x71c 0x000 0x2 0x0
+#define MX6Q_PAD_SD4_DAT6__UART2_RTS_B            0x334 0x71c 0x924 0x2 0x5
+#define MX6Q_PAD_SD4_DAT6__GPIO2_IO14             0x334 0x71c 0x000 0x5 0x0
+#define MX6Q_PAD_SD4_DAT7__SD4_DATA7              0x338 0x720 0x000 0x1 0x0
+#define MX6Q_PAD_SD4_DAT7__UART2_TX_DATA          0x338 0x720 0x000 0x2 0x0
+#define MX6Q_PAD_SD4_DAT7__UART2_RX_DATA          0x338 0x720 0x928 0x2 0x7
+#define MX6Q_PAD_SD4_DAT7__GPIO2_IO15             0x338 0x720 0x000 0x5 0x0
+#define MX6Q_PAD_SD1_DAT1__SD1_DATA1              0x33c 0x724 0x000 0x0 0x0
+#define MX6Q_PAD_SD1_DAT1__ECSPI5_SS0             0x33c 0x724 0x834 0x1 0x1
+#define MX6Q_PAD_SD1_DAT1__PWM3_OUT               0x33c 0x724 0x000 0x2 0x0
+#define MX6Q_PAD_SD1_DAT1__GPT_CAPTURE2           0x33c 0x724 0x000 0x3 0x0
+#define MX6Q_PAD_SD1_DAT1__GPIO1_IO17             0x33c 0x724 0x000 0x5 0x0
+#define MX6Q_PAD_SD1_DAT0__SD1_DATA0              0x340 0x728 0x000 0x0 0x0
+#define MX6Q_PAD_SD1_DAT0__ECSPI5_MISO            0x340 0x728 0x82c 0x1 0x1
+#define MX6Q_PAD_SD1_DAT0__GPT_CAPTURE1           0x340 0x728 0x000 0x3 0x0
+#define MX6Q_PAD_SD1_DAT0__GPIO1_IO16             0x340 0x728 0x000 0x5 0x0
+#define MX6Q_PAD_SD1_DAT3__SD1_DATA3              0x344 0x72c 0x000 0x0 0x0
+#define MX6Q_PAD_SD1_DAT3__ECSPI5_SS2             0x344 0x72c 0x000 0x1 0x0
+#define MX6Q_PAD_SD1_DAT3__GPT_COMPARE3           0x344 0x72c 0x000 0x2 0x0
+#define MX6Q_PAD_SD1_DAT3__PWM1_OUT               0x344 0x72c 0x000 0x3 0x0
+#define MX6Q_PAD_SD1_DAT3__WDOG2_B                0x344 0x72c 0x000 0x4 0x0
+#define MX6Q_PAD_SD1_DAT3__GPIO1_IO21             0x344 0x72c 0x000 0x5 0x0
+#define MX6Q_PAD_SD1_DAT3__WDOG2_RESET_B_DEB      0x344 0x72c 0x000 0x6 0x0
+#define MX6Q_PAD_SD1_CMD__SD1_CMD                 0x348 0x730 0x000 0x0 0x0
+#define MX6Q_PAD_SD1_CMD__ECSPI5_MOSI             0x348 0x730 0x830 0x1 0x0
+#define MX6Q_PAD_SD1_CMD__PWM4_OUT                0x348 0x730 0x000 0x2 0x0
+#define MX6Q_PAD_SD1_CMD__GPT_COMPARE1            0x348 0x730 0x000 0x3 0x0
+#define MX6Q_PAD_SD1_CMD__GPIO1_IO18              0x348 0x730 0x000 0x5 0x0
+#define MX6Q_PAD_SD1_DAT2__SD1_DATA2              0x34c 0x734 0x000 0x0 0x0
+#define MX6Q_PAD_SD1_DAT2__ECSPI5_SS1             0x34c 0x734 0x838 0x1 0x1
+#define MX6Q_PAD_SD1_DAT2__GPT_COMPARE2           0x34c 0x734 0x000 0x2 0x0
+#define MX6Q_PAD_SD1_DAT2__PWM2_OUT               0x34c 0x734 0x000 0x3 0x0
+#define MX6Q_PAD_SD1_DAT2__WDOG1_B                0x34c 0x734 0x000 0x4 0x0
+#define MX6Q_PAD_SD1_DAT2__GPIO1_IO19             0x34c 0x734 0x000 0x5 0x0
+#define MX6Q_PAD_SD1_DAT2__WDOG1_RESET_B_DEB      0x34c 0x734 0x000 0x6 0x0
+#define MX6Q_PAD_SD1_CLK__SD1_CLK                 0x350 0x738 0x000 0x0 0x0
+#define MX6Q_PAD_SD1_CLK__ECSPI5_SCLK             0x350 0x738 0x828 0x1 0x0
+#define MX6Q_PAD_SD1_CLK__GPT_CLKIN               0x350 0x738 0x000 0x3 0x0
+#define MX6Q_PAD_SD1_CLK__GPIO1_IO20              0x350 0x738 0x000 0x5 0x0
+#define MX6Q_PAD_SD2_CLK__SD2_CLK                 0x354 0x73c 0x000 0x0 0x0
+#define MX6Q_PAD_SD2_CLK__ECSPI5_SCLK             0x354 0x73c 0x828 0x1 0x1
+#define MX6Q_PAD_SD2_CLK__KEY_COL5                0x354 0x73c 0x8e8 0x2 0x3
+#define MX6Q_PAD_SD2_CLK__AUD4_RXFS               0x354 0x73c 0x7c0 0x3 0x1
+#define MX6Q_PAD_SD2_CLK__GPIO1_IO10              0x354 0x73c 0x000 0x5 0x0
+#define MX6Q_PAD_SD2_CMD__SD2_CMD                 0x358 0x740 0x000 0x0 0x0
+#define MX6Q_PAD_SD2_CMD__ECSPI5_MOSI             0x358 0x740 0x830 0x1 0x1
+#define MX6Q_PAD_SD2_CMD__KEY_ROW5                0x358 0x740 0x8f4 0x2 0x2
+#define MX6Q_PAD_SD2_CMD__AUD4_RXC                0x358 0x740 0x7bc 0x3 0x1
+#define MX6Q_PAD_SD2_CMD__GPIO1_IO11              0x358 0x740 0x000 0x5 0x0
+#define MX6Q_PAD_SD2_DAT3__SD2_DATA3              0x35c 0x744 0x000 0x0 0x0
+#define MX6Q_PAD_SD2_DAT3__ECSPI5_SS3             0x35c 0x744 0x000 0x1 0x0
+#define MX6Q_PAD_SD2_DAT3__KEY_COL6               0x35c 0x744 0x8ec 0x2 0x2
+#define MX6Q_PAD_SD2_DAT3__AUD4_TXC               0x35c 0x744 0x7c4 0x3 0x1
+#define MX6Q_PAD_SD2_DAT3__GPIO1_IO12             0x35c 0x744 0x000 0x5 0x0
 
 #endif /* __DTS_IMX6Q_PINFUNC_H */
diff -urNp a/arch/arm/boot/dts/imx6q-sabreauto.dts b/arch/arm/boot/dts/imx6q-sabreauto.dts
--- a/arch/arm/boot/dts/imx6q-sabreauto.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6q-sabreauto.dts	2015-10-27 00:45:05.000000000 +0000
@@ -20,6 +20,16 @@
 	compatible = "fsl,imx6q-sabreauto", "fsl,imx6q";
 };
 
-&sata {
-	status = "okay";
+&iomuxc {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_hog>;
+
+	hog {
+		pinctrl_hog: hoggrp {
+			fsl,pins = <
+				MX6Q_PAD_NANDF_CS2__GPIO6_IO15 0x80000000
+				MX6Q_PAD_SD2_DAT2__GPIO1_IO13  0x80000000
+			>;
+		};
+	};
 };
diff -urNp a/arch/arm/boot/dts/imx6q-sabrelite.dts b/arch/arm/boot/dts/imx6q-sabrelite.dts
--- a/arch/arm/boot/dts/imx6q-sabrelite.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6q-sabrelite.dts	2015-10-27 00:45:05.000000000 +0000
@@ -12,13 +12,159 @@
 
 /dts-v1/;
 #include "imx6q.dtsi"
-#include "imx6qdl-sabrelite.dtsi"
 
 / {
 	model = "Freescale i.MX6 Quad SABRE Lite Board";
 	compatible = "fsl,imx6q-sabrelite", "fsl,imx6q";
+
+	memory {
+		reg = <0x10000000 0x40000000>;
+	};
+
+	regulators {
+		compatible = "simple-bus";
+
+		reg_2p5v: 2p5v {
+			compatible = "regulator-fixed";
+			regulator-name = "2P5V";
+			regulator-min-microvolt = <2500000>;
+			regulator-max-microvolt = <2500000>;
+			regulator-always-on;
+		};
+
+		reg_3p3v: 3p3v {
+			compatible = "regulator-fixed";
+			regulator-name = "3P3V";
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+		};
+
+		reg_usb_otg_vbus: usb_otg_vbus {
+			compatible = "regulator-fixed";
+			regulator-name = "usb_otg_vbus";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			gpio = <&gpio3 22 0>;
+			enable-active-high;
+		};
+	};
+
+	sound {
+		compatible = "fsl,imx6q-sabrelite-sgtl5000",
+			     "fsl,imx-audio-sgtl5000";
+		model = "imx6q-sabrelite-sgtl5000";
+		ssi-controller = <&ssi1>;
+		audio-codec = <&codec>;
+		audio-routing =
+			"MIC_IN", "Mic Jack",
+			"Mic Jack", "Mic Bias",
+			"Headphone Jack", "HP_OUT";
+		mux-int-port = <1>;
+		mux-ext-port = <4>;
+	};
+};
+
+&ecspi1 {
+	fsl,spi-num-chipselects = <1>;
+	cs-gpios = <&gpio3 19 0>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_ecspi1_1>;
+	status = "okay";
+
+	flash: m25p80@0 {
+		compatible = "sst,sst25vf016b";
+		spi-max-frequency = <20000000>;
+		reg = <0>;
+	};
+};
+
+&ssi1 {
+	fsl,mode = "i2s-slave";
+	status = "okay";
+};
+
+&iomuxc {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_hog>;
+
+	hog {
+		pinctrl_hog: hoggrp {
+			fsl,pins = <
+				MX6Q_PAD_NANDF_D6__GPIO2_IO06 0x80000000
+				MX6Q_PAD_NANDF_D7__GPIO2_IO07 0x80000000
+				MX6Q_PAD_EIM_D19__GPIO3_IO19  0x80000000
+				MX6Q_PAD_EIM_D22__GPIO3_IO22  0x80000000
+				MX6Q_PAD_EIM_D23__GPIO3_IO23  0x80000000
+				MX6Q_PAD_SD3_DAT5__GPIO7_IO00 0x80000000
+				MX6Q_PAD_SD3_DAT4__GPIO7_IO01 0x1f0b0
+				MX6Q_PAD_GPIO_0__CCM_CLKO1    0x80000000
+			>;
+		};
+	};
+};
+
+&usbotg {
+	vbus-supply = <&reg_usb_otg_vbus>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_usbotg_1>;
+	disable-over-current;
+	status = "okay";
 };
 
-&sata {
+&usbh1 {
 	status = "okay";
 };
+
+&fec {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_enet_1>;
+	phy-mode = "rgmii";
+	phy-reset-gpios = <&gpio3 23 0>;
+	status = "okay";
+};
+
+&usdhc3 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_usdhc3_2>;
+	cd-gpios = <&gpio7 0 0>;
+	wp-gpios = <&gpio7 1 0>;
+	vmmc-supply = <&reg_3p3v>;
+	status = "okay";
+};
+
+&usdhc4 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_usdhc4_2>;
+	cd-gpios = <&gpio2 6 0>;
+	wp-gpios = <&gpio2 7 0>;
+	vmmc-supply = <&reg_3p3v>;
+	status = "okay";
+};
+
+&audmux {
+	status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_audmux_1>;
+};
+
+&uart2 {
+	status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_uart2_1>;
+};
+
+&i2c1 {
+	status = "okay";
+	clock-frequency = <100000>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_i2c1_1>;
+
+	codec: sgtl5000@0a {
+		compatible = "fsl,sgtl5000";
+		reg = <0x0a>;
+		clocks = <&clks 169>;
+		VDDA-supply = <&reg_2p5v>;
+		VDDIO-supply = <&reg_3p3v>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/imx6q-sabresd.dts b/arch/arm/boot/dts/imx6q-sabresd.dts
--- a/arch/arm/boot/dts/imx6q-sabresd.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6q-sabresd.dts	2015-10-27 00:45:05.000000000 +0000
@@ -20,6 +20,20 @@
 	compatible = "fsl,imx6q-sabresd", "fsl,imx6q";
 };
 
-&sata {
-	status = "okay";
+&iomuxc {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_hog>;
+
+	hog {
+		pinctrl_hog: hoggrp {
+			fsl,pins = <
+				MX6Q_PAD_GPIO_4__GPIO1_IO04   0x80000000
+				MX6Q_PAD_GPIO_5__GPIO1_IO05   0x80000000
+				MX6Q_PAD_NANDF_D0__GPIO2_IO00 0x80000000
+				MX6Q_PAD_NANDF_D1__GPIO2_IO01 0x80000000
+				MX6Q_PAD_NANDF_D2__GPIO2_IO02 0x80000000
+				MX6Q_PAD_NANDF_D3__GPIO2_IO03 0x80000000
+			>;
+		};
+	};
 };
diff -urNp a/arch/arm/boot/dts/imx6q-sbc6x.dts b/arch/arm/boot/dts/imx6q-sbc6x.dts
--- a/arch/arm/boot/dts/imx6q-sbc6x.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6q-sbc6x.dts	2015-10-27 00:45:05.000000000 +0000
@@ -17,78 +17,28 @@
 	};
 };
 
-
 &fec {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_enet>;
+	pinctrl-0 = <&pinctrl_enet_1>;
 	phy-mode = "rgmii";
 	status = "okay";
 };
 
-&iomuxc {
-	imx6q-sbc6x {
-		pinctrl_enet: enetgrp {
-			fsl,pins = <
-				MX6QDL_PAD_ENET_MDIO__ENET_MDIO		0x1b0b0
-				MX6QDL_PAD_ENET_MDC__ENET_MDC		0x1b0b0
-				MX6QDL_PAD_RGMII_TXC__RGMII_TXC		0x1b0b0
-				MX6QDL_PAD_RGMII_TD0__RGMII_TD0		0x1b0b0
-				MX6QDL_PAD_RGMII_TD1__RGMII_TD1		0x1b0b0
-				MX6QDL_PAD_RGMII_TD2__RGMII_TD2		0x1b0b0
-				MX6QDL_PAD_RGMII_TD3__RGMII_TD3		0x1b0b0
-				MX6QDL_PAD_RGMII_TX_CTL__RGMII_TX_CTL	0x1b0b0
-				MX6QDL_PAD_ENET_REF_CLK__ENET_TX_CLK	0x1b0b0
-				MX6QDL_PAD_RGMII_RXC__RGMII_RXC		0x1b0b0
-				MX6QDL_PAD_RGMII_RD0__RGMII_RD0		0x1b0b0
-				MX6QDL_PAD_RGMII_RD1__RGMII_RD1		0x1b0b0
-				MX6QDL_PAD_RGMII_RD2__RGMII_RD2		0x1b0b0
-				MX6QDL_PAD_RGMII_RD3__RGMII_RD3		0x1b0b0
-				MX6QDL_PAD_RGMII_RX_CTL__RGMII_RX_CTL	0x1b0b0
-				MX6QDL_PAD_GPIO_16__ENET_REF_CLK	0x4001b0a8
-			>;
-		};
-
-		pinctrl_uart1: uart1grp {
-			fsl,pins = <
-				MX6QDL_PAD_CSI0_DAT10__UART1_TX_DATA	0x1b0b1
-				MX6QDL_PAD_CSI0_DAT11__UART1_RX_DATA	0x1b0b1
-			>;
-		};
-
-		pinctrl_usbotg: usbotggrp {
-			fsl,pins = <
-				MX6QDL_PAD_GPIO_1__USB_OTG_ID		0x17059
-			>;
-		};
-
-		pinctrl_usdhc3: usdhc3grp {
-			fsl,pins = <
-				MX6QDL_PAD_SD3_CMD__SD3_CMD		0x17059
-				MX6QDL_PAD_SD3_CLK__SD3_CLK		0x10059
-				MX6QDL_PAD_SD3_DAT0__SD3_DATA0		0x17059
-				MX6QDL_PAD_SD3_DAT1__SD3_DATA1		0x17059
-				MX6QDL_PAD_SD3_DAT2__SD3_DATA2		0x17059
-				MX6QDL_PAD_SD3_DAT3__SD3_DATA3		0x17059
-			>;
-		};
-	};
-};
-
 &uart1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1>;
+	pinctrl-0 = <&pinctrl_uart1_1>;
 	status = "okay";
 };
 
 &usbotg {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usbotg>;
+	pinctrl-0 = <&pinctrl_usbotg_1>;
 	disable-over-current;
 	status = "okay";
 };
 
 &usdhc3 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usdhc3>;
+	pinctrl-0 = <&pinctrl_usdhc3_2>;
 	status = "okay";
 };
diff -urNp a/arch/arm/boot/dts/imx6q.dtsi b/arch/arm/boot/dts/imx6q.dtsi
--- a/arch/arm/boot/dts/imx6q.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6q.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,15 +8,10 @@
  *
  */
 
-#include <dt-bindings/interrupt-controller/irq.h>
-#include "imx6q-pinfunc.h"
 #include "imx6qdl.dtsi"
+#include "imx6q-pinfunc.h"
 
 / {
-	aliases {
-		spi4 = &ecspi5;
-	};
-
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
@@ -30,24 +25,12 @@
 				/* kHz    uV */
 				1200000 1275000
 				996000  1250000
-				852000  1250000
-				792000  1175000
-				396000  975000
-			>;
-			fsl,soc-operating-points = <
-				/* ARM kHz  SOC-PU uV */
-				1200000 1275000
-				996000	1250000
-				852000	1250000
-				792000	1175000
-				396000	1175000
+				792000  1150000
+				396000  950000
 			>;
 			clock-latency = <61036>; /* two CLK32 periods */
-			clocks = <&clks IMX6QDL_CLK_ARM>,
-				 <&clks IMX6QDL_CLK_PLL2_PFD2_396M>,
-				 <&clks IMX6QDL_CLK_STEP>,
-				 <&clks IMX6QDL_CLK_PLL1_SW>,
-				 <&clks IMX6QDL_CLK_PLL1_SYS>;
+			clocks = <&clks 104>, <&clks 6>, <&clks 16>,
+				 <&clks 17>, <&clks 170>;
 			clock-names = "arm", "pll2_pfd2_396m", "step",
 				      "pll1_sw", "pll1_sys";
 			arm-supply = <&reg_arm>;
@@ -78,12 +61,6 @@
 	};
 
 	soc {
-		ocram: sram@00900000 {
-			compatible = "mmio-sram";
-			reg = <0x00900000 0x40000>;
-			clocks = <&clks IMX6QDL_CLK_OCRAM>;
-		};
-
 		aips-bus@02000000 { /* AIPS1 */
 			spba-bus@02000000 {
 				ecspi5: ecspi@02018000 {
@@ -91,226 +68,295 @@
 					#size-cells = <0>;
 					compatible = "fsl,imx6q-ecspi", "fsl,imx51-ecspi";
 					reg = <0x02018000 0x4000>;
-					interrupts = <0 35 IRQ_TYPE_LEVEL_HIGH>;
-					clocks = <&clks IMX6Q_CLK_ECSPI5>,
-						 <&clks IMX6Q_CLK_ECSPI5>;
+					interrupts = <0 35 0x04>;
+					clocks = <&clks 116>, <&clks 116>;
 					clock-names = "ipg", "per";
-					dmas = <&sdma 11 7 1>, <&sdma 12 7 2>;
-					dma-names = "rx", "tx";
 					status = "disabled";
 				};
 			};
 
 			iomuxc: iomuxc@020e0000 {
 				compatible = "fsl,imx6q-iomuxc";
+				reg = <0x020e0000 0x4000>;
 
-				ipu2 {
-					pinctrl_ipu2_1: ipu2grp-1 {
+				/* shared pinctrl settings */
+				audmux {
+					pinctrl_audmux_1: audmux-1 {
 						fsl,pins = <
-							MX6QDL_PAD_DI0_DISP_CLK__IPU2_DI0_DISP_CLK 0x10
-							MX6QDL_PAD_DI0_PIN15__IPU2_DI0_PIN15       0x10
-							MX6QDL_PAD_DI0_PIN2__IPU2_DI0_PIN02        0x10
-							MX6QDL_PAD_DI0_PIN3__IPU2_DI0_PIN03        0x10
-							MX6QDL_PAD_DI0_PIN4__IPU2_DI0_PIN04        0x80000000
-							MX6QDL_PAD_DISP0_DAT0__IPU2_DISP0_DATA00   0x10
-							MX6QDL_PAD_DISP0_DAT1__IPU2_DISP0_DATA01   0x10
-							MX6QDL_PAD_DISP0_DAT2__IPU2_DISP0_DATA02   0x10
-							MX6QDL_PAD_DISP0_DAT3__IPU2_DISP0_DATA03   0x10
-							MX6QDL_PAD_DISP0_DAT4__IPU2_DISP0_DATA04   0x10
-							MX6QDL_PAD_DISP0_DAT5__IPU2_DISP0_DATA05   0x10
-							MX6QDL_PAD_DISP0_DAT6__IPU2_DISP0_DATA06   0x10
-							MX6QDL_PAD_DISP0_DAT7__IPU2_DISP0_DATA07   0x10
-							MX6QDL_PAD_DISP0_DAT8__IPU2_DISP0_DATA08   0x10
-							MX6QDL_PAD_DISP0_DAT9__IPU2_DISP0_DATA09   0x10
-							MX6QDL_PAD_DISP0_DAT10__IPU2_DISP0_DATA10  0x10
-							MX6QDL_PAD_DISP0_DAT11__IPU2_DISP0_DATA11  0x10
-							MX6QDL_PAD_DISP0_DAT12__IPU2_DISP0_DATA12  0x10
-							MX6QDL_PAD_DISP0_DAT13__IPU2_DISP0_DATA13  0x10
-							MX6QDL_PAD_DISP0_DAT14__IPU2_DISP0_DATA14  0x10
-							MX6QDL_PAD_DISP0_DAT15__IPU2_DISP0_DATA15  0x10
-							MX6QDL_PAD_DISP0_DAT16__IPU2_DISP0_DATA16  0x10
-							MX6QDL_PAD_DISP0_DAT17__IPU2_DISP0_DATA17  0x10
-							MX6QDL_PAD_DISP0_DAT18__IPU2_DISP0_DATA18  0x10
-							MX6QDL_PAD_DISP0_DAT19__IPU2_DISP0_DATA19  0x10
-							MX6QDL_PAD_DISP0_DAT20__IPU2_DISP0_DATA20  0x10
-							MX6QDL_PAD_DISP0_DAT21__IPU2_DISP0_DATA21  0x10
-							MX6QDL_PAD_DISP0_DAT22__IPU2_DISP0_DATA22  0x10
-							MX6QDL_PAD_DISP0_DAT23__IPU2_DISP0_DATA23  0x10
+							MX6Q_PAD_SD2_DAT0__AUD4_RXD  0x80000000
+							MX6Q_PAD_SD2_DAT3__AUD4_TXC  0x80000000
+							MX6Q_PAD_SD2_DAT2__AUD4_TXD  0x80000000
+							MX6Q_PAD_SD2_DAT1__AUD4_TXFS 0x80000000
 						>;
 					};
-				};
-			};
-		};
-
-		sata: sata@02200000 {
-			compatible = "fsl,imx6q-ahci";
-			reg = <0x02200000 0x4000>;
-			interrupts = <0 39 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clks IMX6QDL_CLK_SATA>,
-				 <&clks IMX6QDL_CLK_SATA_REF_100M>,
-				 <&clks IMX6QDL_CLK_AHB>;
-			clock-names = "sata", "sata_ref", "ahb";
-			status = "disabled";
-		};
 
-		ipu2: ipu@02800000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "fsl,imx6q-ipu";
-			reg = <0x02800000 0x400000>;
-			interrupts = <0 8 IRQ_TYPE_LEVEL_HIGH>,
-				     <0 7 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clks IMX6QDL_CLK_IPU2>,
-				 <&clks IMX6QDL_CLK_IPU2_DI0>,
-				 <&clks IMX6QDL_CLK_IPU2_DI1>;
-			clock-names = "bus", "di0", "di1";
-			resets = <&src 4>;
+					pinctrl_audmux_2: audmux-2 {
+						fsl,pins = <
+							MX6Q_PAD_CSI0_DAT7__AUD3_RXD  0x80000000
+							MX6Q_PAD_CSI0_DAT4__AUD3_TXC  0x80000000
+							MX6Q_PAD_CSI0_DAT5__AUD3_TXD  0x80000000
+							MX6Q_PAD_CSI0_DAT6__AUD3_TXFS 0x80000000
+						>;
+					};
+				};
 
-			ipu2_csi0: port@0 {
-				reg = <0>;
-			};
+				ecspi1 {
+					pinctrl_ecspi1_1: ecspi1grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_EIM_D17__ECSPI1_MISO 0x100b1
+							MX6Q_PAD_EIM_D18__ECSPI1_MOSI 0x100b1
+							MX6Q_PAD_EIM_D16__ECSPI1_SCLK 0x100b1
+						>;
+					};
+				};
 
-			ipu2_csi1: port@1 {
-				reg = <1>;
-			};
+				ecspi3 {
+					pinctrl_ecspi3_1: ecspi3grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_DISP0_DAT2__ECSPI3_MISO 0x100b1
+							MX6Q_PAD_DISP0_DAT1__ECSPI3_MOSI 0x100b1
+							MX6Q_PAD_DISP0_DAT0__ECSPI3_SCLK 0x100b1
+						>;
+					};
+				};
 
-			ipu2_di0: port@2 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <2>;
+				enet {
+					pinctrl_enet_1: enetgrp-1 {
+						fsl,pins = <
+							MX6Q_PAD_ENET_MDIO__ENET_MDIO       0x1b0b0
+							MX6Q_PAD_ENET_MDC__ENET_MDC         0x1b0b0
+							MX6Q_PAD_RGMII_TXC__RGMII_TXC       0x1b0b0
+							MX6Q_PAD_RGMII_TD0__RGMII_TD0       0x1b0b0
+							MX6Q_PAD_RGMII_TD1__RGMII_TD1       0x1b0b0
+							MX6Q_PAD_RGMII_TD2__RGMII_TD2       0x1b0b0
+							MX6Q_PAD_RGMII_TD3__RGMII_TD3       0x1b0b0
+							MX6Q_PAD_RGMII_TX_CTL__RGMII_TX_CTL 0x1b0b0
+							MX6Q_PAD_ENET_REF_CLK__ENET_TX_CLK  0x1b0b0
+							MX6Q_PAD_RGMII_RXC__RGMII_RXC       0x1b0b0
+							MX6Q_PAD_RGMII_RD0__RGMII_RD0       0x1b0b0
+							MX6Q_PAD_RGMII_RD1__RGMII_RD1       0x1b0b0
+							MX6Q_PAD_RGMII_RD2__RGMII_RD2       0x1b0b0
+							MX6Q_PAD_RGMII_RD3__RGMII_RD3       0x1b0b0
+							MX6Q_PAD_RGMII_RX_CTL__RGMII_RX_CTL 0x1b0b0
+							MX6Q_PAD_GPIO_16__ENET_REF_CLK      0x4001b0a8
+						>;
+					};
 
-				ipu2_di0_disp0: endpoint@0 {
+					pinctrl_enet_2: enetgrp-2 {
+						fsl,pins = <
+							MX6Q_PAD_KEY_COL1__ENET_MDIO        0x1b0b0
+							MX6Q_PAD_KEY_COL2__ENET_MDC         0x1b0b0
+							MX6Q_PAD_RGMII_TXC__RGMII_TXC       0x1b0b0
+							MX6Q_PAD_RGMII_TD0__RGMII_TD0       0x1b0b0
+							MX6Q_PAD_RGMII_TD1__RGMII_TD1       0x1b0b0
+							MX6Q_PAD_RGMII_TD2__RGMII_TD2       0x1b0b0
+							MX6Q_PAD_RGMII_TD3__RGMII_TD3       0x1b0b0
+							MX6Q_PAD_RGMII_TX_CTL__RGMII_TX_CTL 0x1b0b0
+							MX6Q_PAD_ENET_REF_CLK__ENET_TX_CLK  0x1b0b0
+							MX6Q_PAD_RGMII_RXC__RGMII_RXC       0x1b0b0
+							MX6Q_PAD_RGMII_RD0__RGMII_RD0       0x1b0b0
+							MX6Q_PAD_RGMII_RD1__RGMII_RD1       0x1b0b0
+							MX6Q_PAD_RGMII_RD2__RGMII_RD2       0x1b0b0
+							MX6Q_PAD_RGMII_RD3__RGMII_RD3       0x1b0b0
+							MX6Q_PAD_RGMII_RX_CTL__RGMII_RX_CTL 0x1b0b0
+						>;
+					};
 				};
 
-				ipu2_di0_hdmi: endpoint@1 {
-					remote-endpoint = <&hdmi_mux_2>;
+				gpmi-nand {
+					pinctrl_gpmi_nand_1: gpmi-nand-1 {
+						fsl,pins = <
+							MX6Q_PAD_NANDF_CLE__NAND_CLE     0xb0b1
+							MX6Q_PAD_NANDF_ALE__NAND_ALE     0xb0b1
+							MX6Q_PAD_NANDF_WP_B__NAND_WP_B   0xb0b1
+							MX6Q_PAD_NANDF_RB0__NAND_READY_B 0xb000
+							MX6Q_PAD_NANDF_CS0__NAND_CE0_B   0xb0b1
+							MX6Q_PAD_NANDF_CS1__NAND_CE1_B   0xb0b1
+							MX6Q_PAD_NANDF_CS2__NAND_CE2_B   0xb0b1
+							MX6Q_PAD_NANDF_CS3__NAND_CE3_B   0xb0b1
+							MX6Q_PAD_SD4_CMD__NAND_RE_B      0xb0b1
+							MX6Q_PAD_SD4_CLK__NAND_WE_B      0xb0b1
+							MX6Q_PAD_NANDF_D0__NAND_DATA00   0xb0b1
+							MX6Q_PAD_NANDF_D1__NAND_DATA01   0xb0b1
+							MX6Q_PAD_NANDF_D2__NAND_DATA02   0xb0b1
+							MX6Q_PAD_NANDF_D3__NAND_DATA03   0xb0b1
+							MX6Q_PAD_NANDF_D4__NAND_DATA04   0xb0b1
+							MX6Q_PAD_NANDF_D5__NAND_DATA05   0xb0b1
+							MX6Q_PAD_NANDF_D6__NAND_DATA06   0xb0b1
+							MX6Q_PAD_NANDF_D7__NAND_DATA07   0xb0b1
+							MX6Q_PAD_SD4_DAT0__NAND_DQS      0x00b1
+						>;
+					};
 				};
 
-				ipu2_di0_mipi: endpoint@2 {
+				i2c1 {
+					pinctrl_i2c1_1: i2c1grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_EIM_D21__I2C1_SCL 0x4001b8b1
+							MX6Q_PAD_EIM_D28__I2C1_SDA 0x4001b8b1
+						>;
+					};
 				};
 
-				ipu2_di0_lvds0: endpoint@3 {
-					remote-endpoint = <&lvds0_mux_2>;
+				i2c2 {
+					pinctrl_i2c2_1: i2c2grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_EIM_EB2__I2C2_SCL 0x4001b8b1
+							MX6Q_PAD_EIM_D16__I2C2_SDA 0x4001b8b1
+						>;
+					};
 				};
 
-				ipu2_di0_lvds1: endpoint@4 {
-					remote-endpoint = <&lvds1_mux_2>;
+				i2c3 {
+					pinctrl_i2c3_1: i2c3grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_EIM_D17__I2C3_SCL 0x4001b8b1
+							MX6Q_PAD_EIM_D18__I2C3_SDA 0x4001b8b1
+						>;
+					};
 				};
-			};
 
-			ipu2_di1: port@3 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <3>;
+				uart1 {
+					pinctrl_uart1_1: uart1grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_CSI0_DAT10__UART1_TX_DATA 0x1b0b1
+							MX6Q_PAD_CSI0_DAT11__UART1_RX_DATA 0x1b0b1
+						>;
+					};
+				};
 
-				ipu2_di1_hdmi: endpoint@1 {
-					remote-endpoint = <&hdmi_mux_3>;
+				uart2 {
+					pinctrl_uart2_1: uart2grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_EIM_D26__UART2_TX_DATA 0x1b0b1
+							MX6Q_PAD_EIM_D27__UART2_RX_DATA 0x1b0b1
+						>;
+					};
 				};
 
-				ipu2_di1_mipi: endpoint@2 {
+				uart4 {
+					pinctrl_uart4_1: uart4grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_KEY_COL0__UART4_TX_DATA 0x1b0b1
+							MX6Q_PAD_KEY_ROW0__UART4_RX_DATA 0x1b0b1
+						>;
+					};
 				};
 
-				ipu2_di1_lvds0: endpoint@3 {
-					remote-endpoint = <&lvds0_mux_3>;
+				usbotg {
+					pinctrl_usbotg_1: usbotggrp-1 {
+						fsl,pins = <
+							MX6Q_PAD_GPIO_1__USB_OTG_ID 0x17059
+						>;
+					};
+
+					pinctrl_usbotg_2: usbotggrp-2 {
+						fsl,pins = <
+							MX6Q_PAD_ENET_RX_ER__USB_OTG_ID 0x17059
+						>;
+					};
 				};
 
-				ipu2_di1_lvds1: endpoint@4 {
-					remote-endpoint = <&lvds1_mux_3>;
+				usdhc2 {
+					pinctrl_usdhc2_1: usdhc2grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_SD2_CMD__SD2_CMD    0x17059
+							MX6Q_PAD_SD2_CLK__SD2_CLK    0x10059
+							MX6Q_PAD_SD2_DAT0__SD2_DATA0 0x17059
+							MX6Q_PAD_SD2_DAT1__SD2_DATA1 0x17059
+							MX6Q_PAD_SD2_DAT2__SD2_DATA2 0x17059
+							MX6Q_PAD_SD2_DAT3__SD2_DATA3 0x17059
+							MX6Q_PAD_NANDF_D4__SD2_DATA4 0x17059
+							MX6Q_PAD_NANDF_D5__SD2_DATA5 0x17059
+							MX6Q_PAD_NANDF_D6__SD2_DATA6 0x17059
+							MX6Q_PAD_NANDF_D7__SD2_DATA7 0x17059
+						>;
+					};
 				};
-			};
-		};
-	};
 
-	display-subsystem {
-		compatible = "fsl,imx-display-subsystem";
-		ports = <&ipu1_di0>, <&ipu1_di1>, <&ipu2_di0>, <&ipu2_di1>;
-	};
-};
+				usdhc3 {
+					pinctrl_usdhc3_1: usdhc3grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_SD3_CMD__SD3_CMD    0x17059
+							MX6Q_PAD_SD3_CLK__SD3_CLK    0x10059
+							MX6Q_PAD_SD3_DAT0__SD3_DATA0 0x17059
+							MX6Q_PAD_SD3_DAT1__SD3_DATA1 0x17059
+							MX6Q_PAD_SD3_DAT2__SD3_DATA2 0x17059
+							MX6Q_PAD_SD3_DAT3__SD3_DATA3 0x17059
+							MX6Q_PAD_SD3_DAT4__SD3_DATA4 0x17059
+							MX6Q_PAD_SD3_DAT5__SD3_DATA5 0x17059
+							MX6Q_PAD_SD3_DAT6__SD3_DATA6 0x17059
+							MX6Q_PAD_SD3_DAT7__SD3_DATA7 0x17059
+						>;
+					};
 
-&hdmi {
-	compatible = "fsl,imx6q-hdmi";
+					pinctrl_usdhc3_2: usdhc3grp-2 {
+						fsl,pins = <
+							MX6Q_PAD_SD3_CMD__SD3_CMD    0x17059
+							MX6Q_PAD_SD3_CLK__SD3_CLK    0x10059
+							MX6Q_PAD_SD3_DAT0__SD3_DATA0 0x17059
+							MX6Q_PAD_SD3_DAT1__SD3_DATA1 0x17059
+							MX6Q_PAD_SD3_DAT2__SD3_DATA2 0x17059
+							MX6Q_PAD_SD3_DAT3__SD3_DATA3 0x17059
+						>;
+					};
+				};
 
-	port@2 {
-		reg = <2>;
+				usdhc4 {
+					pinctrl_usdhc4_1: usdhc4grp-1 {
+						fsl,pins = <
+							MX6Q_PAD_SD4_CMD__SD4_CMD    0x17059
+							MX6Q_PAD_SD4_CLK__SD4_CLK    0x10059
+							MX6Q_PAD_SD4_DAT0__SD4_DATA0 0x17059
+							MX6Q_PAD_SD4_DAT1__SD4_DATA1 0x17059
+							MX6Q_PAD_SD4_DAT2__SD4_DATA2 0x17059
+							MX6Q_PAD_SD4_DAT3__SD4_DATA3 0x17059
+							MX6Q_PAD_SD4_DAT4__SD4_DATA4 0x17059
+							MX6Q_PAD_SD4_DAT5__SD4_DATA5 0x17059
+							MX6Q_PAD_SD4_DAT6__SD4_DATA6 0x17059
+							MX6Q_PAD_SD4_DAT7__SD4_DATA7 0x17059
+						>;
+					};
 
-		hdmi_mux_2: endpoint {
-			remote-endpoint = <&ipu2_di0_hdmi>;
+					pinctrl_usdhc4_2: usdhc4grp-2 {
+						fsl,pins = <
+							MX6Q_PAD_SD4_CMD__SD4_CMD    0x17059
+							MX6Q_PAD_SD4_CLK__SD4_CLK    0x10059
+							MX6Q_PAD_SD4_DAT0__SD4_DATA0 0x17059
+							MX6Q_PAD_SD4_DAT1__SD4_DATA1 0x17059
+							MX6Q_PAD_SD4_DAT2__SD4_DATA2 0x17059
+							MX6Q_PAD_SD4_DAT3__SD4_DATA3 0x17059
+						>;
+					};
+				};
+			};
 		};
-	};
 
-	port@3 {
-		reg = <3>;
-
-		hdmi_mux_3: endpoint {
-			remote-endpoint = <&ipu2_di1_hdmi>;
+		ipu2: ipu@02800000 {
+			#crtc-cells = <1>;
+			compatible = "fsl,imx6q-ipu";
+			reg = <0x02800000 0x400000>;
+			interrupts = <0 8 0x4 0 7 0x4>;
+			clocks = <&clks 133>, <&clks 134>, <&clks 137>;
+			clock-names = "bus", "di0", "di1";
+			resets = <&src 4>;
 		};
 	};
 };
 
 &ldb {
-	clocks = <&clks IMX6QDL_CLK_LDB_DI0_SEL>, <&clks IMX6QDL_CLK_LDB_DI1_SEL>,
-		 <&clks IMX6QDL_CLK_IPU1_DI0_SEL>, <&clks IMX6QDL_CLK_IPU1_DI1_SEL>,
-		 <&clks IMX6QDL_CLK_IPU2_DI0_SEL>, <&clks IMX6QDL_CLK_IPU2_DI1_SEL>,
-		 <&clks IMX6QDL_CLK_LDB_DI0>, <&clks IMX6QDL_CLK_LDB_DI1>;
+	clocks = <&clks 33>, <&clks 34>,
+		 <&clks 39>, <&clks 40>, <&clks 41>, <&clks 42>,
+		 <&clks 135>, <&clks 136>;
 	clock-names = "di0_pll", "di1_pll",
 		      "di0_sel", "di1_sel", "di2_sel", "di3_sel",
 		      "di0", "di1";
 
 	lvds-channel@0 {
-		port@2 {
-			reg = <2>;
-
-			lvds0_mux_2: endpoint {
-				remote-endpoint = <&ipu2_di0_lvds0>;
-			};
-		};
-
-		port@3 {
-			reg = <3>;
-
-			lvds0_mux_3: endpoint {
-				remote-endpoint = <&ipu2_di1_lvds0>;
-			};
-		};
+		crtcs = <&ipu1 0>, <&ipu1 1>, <&ipu2 0>, <&ipu2 1>;
 	};
 
 	lvds-channel@1 {
-		port@2 {
-			reg = <2>;
-
-			lvds1_mux_2: endpoint {
-				remote-endpoint = <&ipu2_di0_lvds1>;
-			};
-		};
-
-		port@3 {
-			reg = <3>;
-
-			lvds1_mux_3: endpoint {
-				remote-endpoint = <&ipu2_di1_lvds1>;
-			};
-		};
+		crtcs = <&ipu1 0>, <&ipu1 1>, <&ipu2 0>, <&ipu2 1>;
 	};
 };
-
-&mipi_dsi {
-	port@2 {
-		reg = <2>;
-
-		mipi_mux_2: endpoint {
-			remote-endpoint = <&ipu2_di0_mipi>;
-		};
-	};
-
-	port@3 {
-		reg = <3>;
-
-		mipi_mux_3: endpoint {
-			remote-endpoint = <&ipu2_di1_mipi>;
-		};
-	};
-};
-
-&vpu {
-	compatible = "fsl,imx6q-vpu", "cnm,coda960";
-};
diff -urNp a/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi b/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
--- a/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -10,449 +10,29 @@
  * http://www.gnu.org/copyleft/gpl.html
  */
 
-#include <dt-bindings/gpio/gpio.h>
-
 / {
 	memory {
 		reg = <0x10000000 0x80000000>;
 	};
-
-	leds {
-		compatible = "gpio-leds";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_gpio_leds>;
-
-		user {
-			label = "debug";
-			gpios = <&gpio5 15 GPIO_ACTIVE_HIGH>;
-		};
-	};
-
-	sound-spdif {
-		compatible = "fsl,imx-audio-spdif",
-			   "fsl,imx-sabreauto-spdif";
-		model = "imx-spdif";
-		spdif-controller = <&spdif>;
-		spdif-in;
-	};
-
-	backlight {
-		compatible = "pwm-backlight";
-		pwms = <&pwm3 0 5000000>;
-		brightness-levels = <0 4 8 16 32 64 128 255>;
-		default-brightness-level = <7>;
-		status = "okay";
-	};
-};
-
-&ecspi1 {
-	fsl,spi-num-chipselects = <1>;
-	cs-gpios = <&gpio3 19 0>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_ecspi1 &pinctrl_ecspi1_cs>;
-	status = "disabled"; /* pin conflict with WEIM NOR */
-
-	flash: m25p80@0 {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		compatible = "st,m25p32";
-		spi-max-frequency = <20000000>;
-		reg = <0>;
-	};
 };
 
 &fec {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_enet>;
+	pinctrl-0 = <&pinctrl_enet_2>;
 	phy-mode = "rgmii";
-	interrupts-extended = <&gpio1 6 IRQ_TYPE_LEVEL_HIGH>,
-			      <&intc 0 119 IRQ_TYPE_LEVEL_HIGH>;
-	status = "okay";
-};
-
-&gpmi {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_gpmi_nand>;
-	status = "okay";
-};
-
-&i2c2 {
-	clock-frequency = <100000>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c2>;
-	status = "okay";
-
-	pmic: pfuze100@08 {
-		compatible = "fsl,pfuze100";
-		reg = <0x08>;
-
-		regulators {
-			sw1a_reg: sw1ab {
-				regulator-min-microvolt = <300000>;
-				regulator-max-microvolt = <1875000>;
-				regulator-boot-on;
-				regulator-always-on;
-				regulator-ramp-delay = <6250>;
-			};
-
-			sw1c_reg: sw1c {
-				regulator-min-microvolt = <300000>;
-				regulator-max-microvolt = <1875000>;
-				regulator-boot-on;
-				regulator-always-on;
-				regulator-ramp-delay = <6250>;
-			};
-
-			sw2_reg: sw2 {
-				regulator-min-microvolt = <800000>;
-				regulator-max-microvolt = <3300000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			sw3a_reg: sw3a {
-				regulator-min-microvolt = <400000>;
-				regulator-max-microvolt = <1975000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			sw3b_reg: sw3b {
-				regulator-min-microvolt = <400000>;
-				regulator-max-microvolt = <1975000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			sw4_reg: sw4 {
-				regulator-min-microvolt = <800000>;
-				regulator-max-microvolt = <3300000>;
-			};
-
-			swbst_reg: swbst {
-				regulator-min-microvolt = <5000000>;
-				regulator-max-microvolt = <5150000>;
-			};
-
-			snvs_reg: vsnvs {
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <3000000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			vref_reg: vrefddr {
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			vgen1_reg: vgen1 {
-				regulator-min-microvolt = <800000>;
-				regulator-max-microvolt = <1550000>;
-			};
-
-			vgen2_reg: vgen2 {
-				regulator-min-microvolt = <800000>;
-				regulator-max-microvolt = <1550000>;
-			};
-
-			vgen3_reg: vgen3 {
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3300000>;
-			};
-
-			vgen4_reg: vgen4 {
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3300000>;
-				regulator-always-on;
-			};
-
-			vgen5_reg: vgen5 {
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3300000>;
-				regulator-always-on;
-			};
-
-			vgen6_reg: vgen6 {
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3300000>;
-				regulator-always-on;
-			};
-		};
-	};
-};
-
-&iomuxc {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_hog>;
-
-	imx6qdl-sabreauto {
-		pinctrl_hog: hoggrp {
-			fsl,pins = <
-				MX6QDL_PAD_NANDF_CS2__GPIO6_IO15 0x80000000
-				MX6QDL_PAD_SD2_DAT2__GPIO1_IO13  0x80000000
-				MX6QDL_PAD_GPIO_18__SD3_VSELECT 0x17059
-			>;
-		};
-
-		pinctrl_ecspi1: ecspi1grp {
-			fsl,pins = <
-				MX6QDL_PAD_EIM_D17__ECSPI1_MISO		0x100b1
-				MX6QDL_PAD_EIM_D18__ECSPI1_MOSI		0x100b1
-				MX6QDL_PAD_EIM_D16__ECSPI1_SCLK		0x100b1
-			>;
-		};
-
-		pinctrl_ecspi1_cs: ecspi1cs {
-			fsl,pins = <
-				MX6QDL_PAD_EIM_D19__GPIO3_IO19 0x80000000
-			>;
-		};
-
-		pinctrl_enet: enetgrp {
-			fsl,pins = <
-				MX6QDL_PAD_KEY_COL1__ENET_MDIO		0x1b0b0
-				MX6QDL_PAD_KEY_COL2__ENET_MDC		0x1b0b0
-				MX6QDL_PAD_RGMII_TXC__RGMII_TXC		0x1b0b0
-				MX6QDL_PAD_RGMII_TD0__RGMII_TD0		0x1b0b0
-				MX6QDL_PAD_RGMII_TD1__RGMII_TD1		0x1b0b0
-				MX6QDL_PAD_RGMII_TD2__RGMII_TD2		0x1b0b0
-				MX6QDL_PAD_RGMII_TD3__RGMII_TD3		0x1b0b0
-				MX6QDL_PAD_RGMII_TX_CTL__RGMII_TX_CTL	0x1b0b0
-				MX6QDL_PAD_ENET_REF_CLK__ENET_TX_CLK	0x1b0b0
-				MX6QDL_PAD_RGMII_RXC__RGMII_RXC		0x1b0b0
-				MX6QDL_PAD_RGMII_RD0__RGMII_RD0		0x1b0b0
-				MX6QDL_PAD_RGMII_RD1__RGMII_RD1		0x1b0b0
-				MX6QDL_PAD_RGMII_RD2__RGMII_RD2		0x1b0b0
-				MX6QDL_PAD_RGMII_RD3__RGMII_RD3		0x1b0b0
-				MX6QDL_PAD_RGMII_RX_CTL__RGMII_RX_CTL	0x1b0b0
-				MX6QDL_PAD_GPIO_6__ENET_IRQ		0x000b1
-			>;
-		};
-
-		pinctrl_gpio_leds: gpioledsgrp {
-			fsl,pins = <
-				MX6QDL_PAD_DISP0_DAT21__GPIO5_IO15	0x80000000
-			>;
-		};
-
-		pinctrl_gpmi_nand: gpminandgrp {
-			fsl,pins = <
-				MX6QDL_PAD_NANDF_CLE__NAND_CLE		0xb0b1
-				MX6QDL_PAD_NANDF_ALE__NAND_ALE		0xb0b1
-				MX6QDL_PAD_NANDF_WP_B__NAND_WP_B	0xb0b1
-				MX6QDL_PAD_NANDF_RB0__NAND_READY_B	0xb000
-				MX6QDL_PAD_NANDF_CS0__NAND_CE0_B	0xb0b1
-				MX6QDL_PAD_NANDF_CS1__NAND_CE1_B	0xb0b1
-				MX6QDL_PAD_SD4_CMD__NAND_RE_B		0xb0b1
-				MX6QDL_PAD_SD4_CLK__NAND_WE_B		0xb0b1
-				MX6QDL_PAD_NANDF_D0__NAND_DATA00	0xb0b1
-				MX6QDL_PAD_NANDF_D1__NAND_DATA01	0xb0b1
-				MX6QDL_PAD_NANDF_D2__NAND_DATA02	0xb0b1
-				MX6QDL_PAD_NANDF_D3__NAND_DATA03	0xb0b1
-				MX6QDL_PAD_NANDF_D4__NAND_DATA04	0xb0b1
-				MX6QDL_PAD_NANDF_D5__NAND_DATA05	0xb0b1
-				MX6QDL_PAD_NANDF_D6__NAND_DATA06	0xb0b1
-				MX6QDL_PAD_NANDF_D7__NAND_DATA07	0xb0b1
-				MX6QDL_PAD_SD4_DAT0__NAND_DQS		0x00b1
-			>;
-		};
-
-		pinctrl_i2c2: i2c2grp {
-			fsl,pins = <
-				MX6QDL_PAD_EIM_EB2__I2C2_SCL	0x4001b8b1
-				MX6QDL_PAD_KEY_ROW3__I2C2_SDA	0x4001b8b1
-			>;
-		};
-
-		pinctrl_pwm3: pwm1grp {
-			fsl,pins = <
-				MX6QDL_PAD_SD4_DAT1__PWM3_OUT		0x1b0b1
-			>;
-		};
-
-		pinctrl_spdif: spdifgrp {
-			fsl,pins = <
-				MX6QDL_PAD_KEY_COL3__SPDIF_IN 0x1b0b0
-			>;
-		};
-
-		pinctrl_uart4: uart4grp {
-			fsl,pins = <
-				MX6QDL_PAD_KEY_COL0__UART4_TX_DATA	0x1b0b1
-				MX6QDL_PAD_KEY_ROW0__UART4_RX_DATA	0x1b0b1
-			>;
-		};
-
-		pinctrl_usdhc3: usdhc3grp {
-			fsl,pins = <
-				MX6QDL_PAD_SD3_CMD__SD3_CMD		0x17059
-				MX6QDL_PAD_SD3_CLK__SD3_CLK		0x10059
-				MX6QDL_PAD_SD3_DAT0__SD3_DATA0		0x17059
-				MX6QDL_PAD_SD3_DAT1__SD3_DATA1		0x17059
-				MX6QDL_PAD_SD3_DAT2__SD3_DATA2		0x17059
-				MX6QDL_PAD_SD3_DAT3__SD3_DATA3		0x17059
-				MX6QDL_PAD_SD3_DAT4__SD3_DATA4		0x17059
-				MX6QDL_PAD_SD3_DAT5__SD3_DATA5		0x17059
-				MX6QDL_PAD_SD3_DAT6__SD3_DATA6		0x17059
-				MX6QDL_PAD_SD3_DAT7__SD3_DATA7		0x17059
-			>;
-		};
-
-		pinctrl_usdhc3_100mhz: usdhc3grp100mhz {
-			fsl,pins = <
-				MX6QDL_PAD_SD3_CMD__SD3_CMD		0x170b9
-				MX6QDL_PAD_SD3_CLK__SD3_CLK		0x100b9
-				MX6QDL_PAD_SD3_DAT0__SD3_DATA0		0x170b9
-				MX6QDL_PAD_SD3_DAT1__SD3_DATA1		0x170b9
-				MX6QDL_PAD_SD3_DAT2__SD3_DATA2		0x170b9
-				MX6QDL_PAD_SD3_DAT3__SD3_DATA3		0x170b9
-				MX6QDL_PAD_SD3_DAT4__SD3_DATA4		0x170b9
-				MX6QDL_PAD_SD3_DAT5__SD3_DATA5		0x170b9
-				MX6QDL_PAD_SD3_DAT6__SD3_DATA6		0x170b9
-				MX6QDL_PAD_SD3_DAT7__SD3_DATA7		0x170b9
-			>;
-		};
-
-		pinctrl_usdhc3_200mhz: usdhc3grp200mhz {
-			fsl,pins = <
-				MX6QDL_PAD_SD3_CMD__SD3_CMD		0x170f9
-				MX6QDL_PAD_SD3_CLK__SD3_CLK		0x100f9
-				MX6QDL_PAD_SD3_DAT0__SD3_DATA0		0x170f9
-				MX6QDL_PAD_SD3_DAT1__SD3_DATA1		0x170f9
-				MX6QDL_PAD_SD3_DAT2__SD3_DATA2		0x170f9
-				MX6QDL_PAD_SD3_DAT3__SD3_DATA3		0x170f9
-				MX6QDL_PAD_SD3_DAT4__SD3_DATA4		0x170f9
-				MX6QDL_PAD_SD3_DAT5__SD3_DATA5		0x170f9
-				MX6QDL_PAD_SD3_DAT6__SD3_DATA6		0x170f9
-				MX6QDL_PAD_SD3_DAT7__SD3_DATA7		0x170f9
-			>;
-		};
-
-		pinctrl_weim_cs0: weimcs0grp {
-			fsl,pins = <
-				MX6QDL_PAD_EIM_CS0__EIM_CS0_B		0xb0b1
-			>;
-		};
-
-		pinctrl_weim_nor: weimnorgrp {
-			fsl,pins = <
-				MX6QDL_PAD_EIM_OE__EIM_OE_B		0xb0b1
-				MX6QDL_PAD_EIM_RW__EIM_RW		0xb0b1
-				MX6QDL_PAD_EIM_WAIT__EIM_WAIT_B		0xb060
-				MX6QDL_PAD_EIM_D16__EIM_DATA16		0x1b0b0
-				MX6QDL_PAD_EIM_D17__EIM_DATA17		0x1b0b0
-				MX6QDL_PAD_EIM_D18__EIM_DATA18		0x1b0b0
-				MX6QDL_PAD_EIM_D19__EIM_DATA19		0x1b0b0
-				MX6QDL_PAD_EIM_D20__EIM_DATA20		0x1b0b0
-				MX6QDL_PAD_EIM_D21__EIM_DATA21		0x1b0b0
-				MX6QDL_PAD_EIM_D22__EIM_DATA22		0x1b0b0
-				MX6QDL_PAD_EIM_D23__EIM_DATA23		0x1b0b0
-				MX6QDL_PAD_EIM_D24__EIM_DATA24		0x1b0b0
-				MX6QDL_PAD_EIM_D25__EIM_DATA25		0x1b0b0
-				MX6QDL_PAD_EIM_D26__EIM_DATA26		0x1b0b0
-				MX6QDL_PAD_EIM_D27__EIM_DATA27		0x1b0b0
-				MX6QDL_PAD_EIM_D28__EIM_DATA28		0x1b0b0
-				MX6QDL_PAD_EIM_D29__EIM_DATA29		0x1b0b0
-				MX6QDL_PAD_EIM_D30__EIM_DATA30		0x1b0b0
-				MX6QDL_PAD_EIM_D31__EIM_DATA31		0x1b0b0
-				MX6QDL_PAD_EIM_A23__EIM_ADDR23		0xb0b1
-				MX6QDL_PAD_EIM_A22__EIM_ADDR22		0xb0b1
-				MX6QDL_PAD_EIM_A21__EIM_ADDR21		0xb0b1
-				MX6QDL_PAD_EIM_A20__EIM_ADDR20		0xb0b1
-				MX6QDL_PAD_EIM_A19__EIM_ADDR19		0xb0b1
-				MX6QDL_PAD_EIM_A18__EIM_ADDR18		0xb0b1
-				MX6QDL_PAD_EIM_A17__EIM_ADDR17		0xb0b1
-				MX6QDL_PAD_EIM_A16__EIM_ADDR16		0xb0b1
-				MX6QDL_PAD_EIM_DA15__EIM_AD15		0xb0b1
-				MX6QDL_PAD_EIM_DA14__EIM_AD14		0xb0b1
-				MX6QDL_PAD_EIM_DA13__EIM_AD13		0xb0b1
-				MX6QDL_PAD_EIM_DA12__EIM_AD12		0xb0b1
-				MX6QDL_PAD_EIM_DA11__EIM_AD11		0xb0b1
-				MX6QDL_PAD_EIM_DA10__EIM_AD10		0xb0b1
-				MX6QDL_PAD_EIM_DA9__EIM_AD09		0xb0b1
-				MX6QDL_PAD_EIM_DA8__EIM_AD08		0xb0b1
-				MX6QDL_PAD_EIM_DA7__EIM_AD07		0xb0b1
-				MX6QDL_PAD_EIM_DA6__EIM_AD06		0xb0b1
-				MX6QDL_PAD_EIM_DA5__EIM_AD05		0xb0b1
-				MX6QDL_PAD_EIM_DA4__EIM_AD04		0xb0b1
-				MX6QDL_PAD_EIM_DA3__EIM_AD03		0xb0b1
-				MX6QDL_PAD_EIM_DA2__EIM_AD02		0xb0b1
-				MX6QDL_PAD_EIM_DA1__EIM_AD01		0xb0b1
-				MX6QDL_PAD_EIM_DA0__EIM_AD00		0xb0b1
-			>;
-		};
-	};
-};
-
-&ldb {
-	status = "okay";
-
-	lvds-channel@0 {
-		fsl,data-mapping = "spwg";
-		fsl,data-width = <18>;
-		status = "okay";
-
-		display-timings {
-			native-mode = <&timing0>;
-			timing0: hsd100pxn1 {
-				clock-frequency = <65000000>;
-				hactive = <1024>;
-				vactive = <768>;
-				hback-porch = <220>;
-				hfront-porch = <40>;
-				vback-porch = <21>;
-				vfront-porch = <7>;
-				hsync-len = <60>;
-				vsync-len = <10>;
-			};
-		};
-	};
-};
-
-&pwm3 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_pwm3>;
-	status = "okay";
-};
-
-&spdif {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_spdif>;
 	status = "okay";
 };
 
 &uart4 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart4>;
+	pinctrl-0 = <&pinctrl_uart4_1>;
 	status = "okay";
 };
 
 &usdhc3 {
-	pinctrl-names = "default", "state_100mhz", "state_200mhz";
-	pinctrl-0 = <&pinctrl_usdhc3>;
-	pinctrl-1 = <&pinctrl_usdhc3_100mhz>;
-	pinctrl-2 = <&pinctrl_usdhc3_200mhz>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_usdhc3_1>;
 	cd-gpios = <&gpio6 15 0>;
 	wp-gpios = <&gpio1 13 0>;
 	status = "okay";
 };
-
-&weim {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_weim_nor &pinctrl_weim_cs0>;
-	#address-cells = <2>;
-	#size-cells = <1>;
-	ranges = <0 0 0x08000000 0x08000000>;
-	status = "disabled"; /* pin conflict with SPI NOR */
-
-	nor@0,0 {
-		compatible = "cfi-flash";
-		reg = <0 0 0x02000000>;
-		#address-cells = <1>;
-		#size-cells = <1>;
-		bank-width = <2>;
-		fsl,weim-cs-timing = <0x00620081 0x00000001 0x1c022000
-				0x0000c000 0x1404a38e 0x00000000>;
-	};
-};
diff -urNp a/arch/arm/boot/dts/imx6qdl-sabresd.dtsi b/arch/arm/boot/dts/imx6qdl-sabresd.dtsi
--- a/arch/arm/boot/dts/imx6qdl-sabresd.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6qdl-sabresd.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -10,558 +10,69 @@
  * http://www.gnu.org/copyleft/gpl.html
  */
 
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-
 / {
-	chosen {
-		stdout-path = &uart1;
-	};
-
 	memory {
 		reg = <0x10000000 0x40000000>;
 	};
 
 	regulators {
 		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
 
-		reg_usb_otg_vbus: regulator@0 {
+		reg_usb_otg_vbus: usb_otg_vbus {
 			compatible = "regulator-fixed";
-			reg = <0>;
 			regulator-name = "usb_otg_vbus";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			gpio = <&gpio3 22 0>;
 			enable-active-high;
-			vin-supply = <&swbst_reg>;
-		};
-
-		reg_usb_h1_vbus: regulator@1 {
-			compatible = "regulator-fixed";
-			reg = <1>;
-			regulator-name = "usb_h1_vbus";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			gpio = <&gpio1 29 0>;
-			enable-active-high;
-			vin-supply = <&swbst_reg>;
-		};
-
-		reg_audio: regulator@2 {
-			compatible = "regulator-fixed";
-			reg = <2>;
-			regulator-name = "wm8962-supply";
-			gpio = <&gpio4 10 0>;
-			enable-active-high;
-		};
-
-		reg_pcie: regulator@3 {
-			compatible = "regulator-fixed";
-			reg = <3>;
-			pinctrl-names = "default";
-			pinctrl-0 = <&pinctrl_pcie_reg>;
-			regulator-name = "MPCIE_3V3";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			gpio = <&gpio3 19 0>;
-			regulator-always-on;
-			enable-active-high;
 		};
 	};
 
 	gpio-keys {
 		compatible = "gpio-keys";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_gpio_keys>;
-
-		power {
-			label = "Power Button";
-			gpios = <&gpio3 29 GPIO_ACTIVE_LOW>;
-			gpio-key,wakeup;
-			linux,code = <KEY_POWER>;
-		};
 
 		volume-up {
 			label = "Volume Up";
-			gpios = <&gpio1 4 GPIO_ACTIVE_LOW>;
-			gpio-key,wakeup;
-			linux,code = <KEY_VOLUMEUP>;
+			gpios = <&gpio1 4 0>;
+			linux,code = <115>; /* KEY_VOLUMEUP */
 		};
 
 		volume-down {
 			label = "Volume Down";
-			gpios = <&gpio1 5 GPIO_ACTIVE_LOW>;
-			gpio-key,wakeup;
-			linux,code = <KEY_VOLUMEDOWN>;
+			gpios = <&gpio1 5 0>;
+			linux,code = <114>; /* KEY_VOLUMEDOWN */
 		};
 	};
-
-	sound {
-		compatible = "fsl,imx6q-sabresd-wm8962",
-			   "fsl,imx-audio-wm8962";
-		model = "wm8962-audio";
-		ssi-controller = <&ssi2>;
-		audio-codec = <&codec>;
-		audio-routing =
-			"Headphone Jack", "HPOUTL",
-			"Headphone Jack", "HPOUTR",
-			"Ext Spk", "SPKOUTL",
-			"Ext Spk", "SPKOUTR",
-			"AMIC", "MICBIAS",
-			"IN3R", "AMIC";
-		mux-int-port = <2>;
-		mux-ext-port = <3>;
-	};
-
-	backlight {
-		compatible = "pwm-backlight";
-		pwms = <&pwm1 0 5000000>;
-		brightness-levels = <0 4 8 16 32 64 128 255>;
-		default-brightness-level = <7>;
-		status = "okay";
-	};
-
-	leds {
-		compatible = "gpio-leds";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_gpio_leds>;
-
-		red {
-		        gpios = <&gpio1 2 0>;
-		        default-state = "on";
-		};
-	};
-};
-
-&audmux {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_audmux>;
-	status = "okay";
-};
-
-&ecspi1 {
-	fsl,spi-num-chipselects = <1>;
-	cs-gpios = <&gpio4 9 0>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_ecspi1>;
-	status = "okay";
-
-	flash: m25p80@0 {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		compatible = "st,m25p32";
-		spi-max-frequency = <20000000>;
-		reg = <0>;
-	};
 };
 
 &fec {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_enet>;
+	pinctrl-0 = <&pinctrl_enet_1>;
 	phy-mode = "rgmii";
-	phy-reset-gpios = <&gpio1 25 0>;
-	status = "okay";
-};
-
-&hdmi {
-	ddc-i2c-bus = <&i2c2>;
-	status = "okay";
-};
-
-&i2c1 {
-	clock-frequency = <100000>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c1>;
-	status = "okay";
-
-	codec: wm8962@1a {
-		compatible = "wlf,wm8962";
-		reg = <0x1a>;
-		clocks = <&clks IMX6QDL_CLK_CKO>;
-		DCVDD-supply = <&reg_audio>;
-		DBVDD-supply = <&reg_audio>;
-		AVDD-supply = <&reg_audio>;
-		CPVDD-supply = <&reg_audio>;
-		MICVDD-supply = <&reg_audio>;
-		PLLVDD-supply = <&reg_audio>;
-		SPKVDD1-supply = <&reg_audio>;
-		SPKVDD2-supply = <&reg_audio>;
-		gpio-cfg = <
-			0x0000 /* 0:Default */
-			0x0000 /* 1:Default */
-			0x0013 /* 2:FN_DMICCLK */
-			0x0000 /* 3:Default */
-			0x8014 /* 4:FN_DMICCDAT */
-			0x0000 /* 5:Default */
-		>;
-       };
-};
-
-&i2c2 {
-	clock-frequency = <100000>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c2>;
-	status = "okay";
-
-	pmic: pfuze100@08 {
-		compatible = "fsl,pfuze100";
-		reg = <0x08>;
-
-		regulators {
-			sw1a_reg: sw1ab {
-				regulator-min-microvolt = <300000>;
-				regulator-max-microvolt = <1875000>;
-				regulator-boot-on;
-				regulator-always-on;
-				regulator-ramp-delay = <6250>;
-			};
-
-			sw1c_reg: sw1c {
-				regulator-min-microvolt = <300000>;
-				regulator-max-microvolt = <1875000>;
-				regulator-boot-on;
-				regulator-always-on;
-				regulator-ramp-delay = <6250>;
-			};
-
-			sw2_reg: sw2 {
-				regulator-min-microvolt = <800000>;
-				regulator-max-microvolt = <3300000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			sw3a_reg: sw3a {
-				regulator-min-microvolt = <400000>;
-				regulator-max-microvolt = <1975000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			sw3b_reg: sw3b {
-				regulator-min-microvolt = <400000>;
-				regulator-max-microvolt = <1975000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			sw4_reg: sw4 {
-				regulator-min-microvolt = <800000>;
-				regulator-max-microvolt = <3300000>;
-			};
-
-			swbst_reg: swbst {
-				regulator-min-microvolt = <5000000>;
-				regulator-max-microvolt = <5150000>;
-			};
-
-			snvs_reg: vsnvs {
-				regulator-min-microvolt = <1000000>;
-				regulator-max-microvolt = <3000000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			vref_reg: vrefddr {
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			vgen1_reg: vgen1 {
-				regulator-min-microvolt = <800000>;
-				regulator-max-microvolt = <1550000>;
-			};
-
-			vgen2_reg: vgen2 {
-				regulator-min-microvolt = <800000>;
-				regulator-max-microvolt = <1550000>;
-			};
-
-			vgen3_reg: vgen3 {
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3300000>;
-			};
-
-			vgen4_reg: vgen4 {
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3300000>;
-				regulator-always-on;
-			};
-
-			vgen5_reg: vgen5 {
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3300000>;
-				regulator-always-on;
-			};
-
-			vgen6_reg: vgen6 {
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3300000>;
-				regulator-always-on;
-			};
-		};
-	};
-};
-
-&i2c3 {
-	clock-frequency = <100000>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c3>;
-	status = "okay";
-
-	egalax_ts@04 {
-		compatible = "eeti,egalax_ts";
-		reg = <0x04>;
-		interrupt-parent = <&gpio6>;
-		interrupts = <7 2>;
-		wakeup-gpios = <&gpio6 7 0>;
-	};
-};
-
-&iomuxc {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_hog>;
-
-	imx6qdl-sabresd {
-		pinctrl_hog: hoggrp {
-			fsl,pins = <
-				MX6QDL_PAD_NANDF_D0__GPIO2_IO00 0x1b0b0
-				MX6QDL_PAD_NANDF_D1__GPIO2_IO01 0x1b0b0
-				MX6QDL_PAD_NANDF_D2__GPIO2_IO02 0x1b0b0
-				MX6QDL_PAD_NANDF_D3__GPIO2_IO03 0x1b0b0
-				MX6QDL_PAD_GPIO_0__CCM_CLKO1    0x130b0
-				MX6QDL_PAD_NANDF_CLE__GPIO6_IO07 0x1b0b0
-				MX6QDL_PAD_ENET_TXD1__GPIO1_IO29 0x1b0b0
-				MX6QDL_PAD_EIM_D22__GPIO3_IO22  0x1b0b0
-				MX6QDL_PAD_ENET_CRS_DV__GPIO1_IO25 0x1b0b0
-			>;
-		};
-
-		pinctrl_audmux: audmuxgrp {
-			fsl,pins = <
-				MX6QDL_PAD_CSI0_DAT7__AUD3_RXD		0x130b0
-				MX6QDL_PAD_CSI0_DAT4__AUD3_TXC		0x130b0
-				MX6QDL_PAD_CSI0_DAT5__AUD3_TXD		0x110b0
-				MX6QDL_PAD_CSI0_DAT6__AUD3_TXFS		0x130b0
-			>;
-		};
-
-		pinctrl_ecspi1: ecspi1grp {
-			fsl,pins = <
-				MX6QDL_PAD_KEY_COL1__ECSPI1_MISO	0x100b1
-				MX6QDL_PAD_KEY_ROW0__ECSPI1_MOSI	0x100b1
-				MX6QDL_PAD_KEY_COL0__ECSPI1_SCLK	0x100b1
-				MX6QDL_PAD_KEY_ROW1__GPIO4_IO09		0x1b0b0
-			>;
-		};
-
-		pinctrl_enet: enetgrp {
-			fsl,pins = <
-				MX6QDL_PAD_ENET_MDIO__ENET_MDIO		0x1b0b0
-				MX6QDL_PAD_ENET_MDC__ENET_MDC		0x1b0b0
-				MX6QDL_PAD_RGMII_TXC__RGMII_TXC		0x1b0b0
-				MX6QDL_PAD_RGMII_TD0__RGMII_TD0		0x1b0b0
-				MX6QDL_PAD_RGMII_TD1__RGMII_TD1		0x1b0b0
-				MX6QDL_PAD_RGMII_TD2__RGMII_TD2		0x1b0b0
-				MX6QDL_PAD_RGMII_TD3__RGMII_TD3		0x1b0b0
-				MX6QDL_PAD_RGMII_TX_CTL__RGMII_TX_CTL	0x1b0b0
-				MX6QDL_PAD_ENET_REF_CLK__ENET_TX_CLK	0x1b0b0
-				MX6QDL_PAD_RGMII_RXC__RGMII_RXC		0x1b0b0
-				MX6QDL_PAD_RGMII_RD0__RGMII_RD0		0x1b0b0
-				MX6QDL_PAD_RGMII_RD1__RGMII_RD1		0x1b0b0
-				MX6QDL_PAD_RGMII_RD2__RGMII_RD2		0x1b0b0
-				MX6QDL_PAD_RGMII_RD3__RGMII_RD3		0x1b0b0
-				MX6QDL_PAD_RGMII_RX_CTL__RGMII_RX_CTL	0x1b0b0
-				MX6QDL_PAD_GPIO_16__ENET_REF_CLK	0x4001b0a8
-			>;
-		};
-
-		pinctrl_gpio_keys: gpio_keysgrp {
-			fsl,pins = <
-				MX6QDL_PAD_EIM_D29__GPIO3_IO29 0x1b0b0
-				MX6QDL_PAD_GPIO_4__GPIO1_IO04  0x1b0b0
-				MX6QDL_PAD_GPIO_5__GPIO1_IO05  0x1b0b0
-			>;
-		};
-
-		pinctrl_i2c1: i2c1grp {
-			fsl,pins = <
-				MX6QDL_PAD_CSI0_DAT8__I2C1_SDA		0x4001b8b1
-				MX6QDL_PAD_CSI0_DAT9__I2C1_SCL		0x4001b8b1
-			>;
-		};
-
-		pinctrl_i2c2: i2c2grp {
-			fsl,pins = <
-				MX6QDL_PAD_KEY_COL3__I2C2_SCL		0x4001b8b1
-				MX6QDL_PAD_KEY_ROW3__I2C2_SDA		0x4001b8b1
-			>;
-		};
-
-		pinctrl_i2c3: i2c3grp {
-			fsl,pins = <
-				MX6QDL_PAD_GPIO_3__I2C3_SCL		0x4001b8b1
-				MX6QDL_PAD_GPIO_6__I2C3_SDA		0x4001b8b1
-			>;
-		};
-
-		pinctrl_pcie: pciegrp {
-			fsl,pins = <
-				MX6QDL_PAD_GPIO_17__GPIO7_IO12	0x1b0b0
-			>;
-		};
-
-		pinctrl_pcie_reg: pciereggrp {
-			fsl,pins = <
-				MX6QDL_PAD_EIM_D19__GPIO3_IO19	0x1b0b0
-			>;
-		};
-
-		pinctrl_pwm1: pwm1grp {
-			fsl,pins = <
-				MX6QDL_PAD_SD1_DAT3__PWM1_OUT		0x1b0b1
-			>;
-		};
-
-		pinctrl_uart1: uart1grp {
-			fsl,pins = <
-				MX6QDL_PAD_CSI0_DAT10__UART1_TX_DATA	0x1b0b1
-				MX6QDL_PAD_CSI0_DAT11__UART1_RX_DATA	0x1b0b1
-			>;
-		};
-
-		pinctrl_usbotg: usbotggrp {
-			fsl,pins = <
-				MX6QDL_PAD_ENET_RX_ER__USB_OTG_ID	0x17059
-			>;
-		};
-
-		pinctrl_usdhc2: usdhc2grp {
-			fsl,pins = <
-				MX6QDL_PAD_SD2_CMD__SD2_CMD		0x17059
-				MX6QDL_PAD_SD2_CLK__SD2_CLK		0x10059
-				MX6QDL_PAD_SD2_DAT0__SD2_DATA0		0x17059
-				MX6QDL_PAD_SD2_DAT1__SD2_DATA1		0x17059
-				MX6QDL_PAD_SD2_DAT2__SD2_DATA2		0x17059
-				MX6QDL_PAD_SD2_DAT3__SD2_DATA3		0x17059
-				MX6QDL_PAD_NANDF_D4__SD2_DATA4		0x17059
-				MX6QDL_PAD_NANDF_D5__SD2_DATA5		0x17059
-				MX6QDL_PAD_NANDF_D6__SD2_DATA6		0x17059
-				MX6QDL_PAD_NANDF_D7__SD2_DATA7		0x17059
-			>;
-		};
-
-		pinctrl_usdhc3: usdhc3grp {
-			fsl,pins = <
-				MX6QDL_PAD_SD3_CMD__SD3_CMD		0x17059
-				MX6QDL_PAD_SD3_CLK__SD3_CLK		0x10059
-				MX6QDL_PAD_SD3_DAT0__SD3_DATA0		0x17059
-				MX6QDL_PAD_SD3_DAT1__SD3_DATA1		0x17059
-				MX6QDL_PAD_SD3_DAT2__SD3_DATA2		0x17059
-				MX6QDL_PAD_SD3_DAT3__SD3_DATA3		0x17059
-				MX6QDL_PAD_SD3_DAT4__SD3_DATA4		0x17059
-				MX6QDL_PAD_SD3_DAT5__SD3_DATA5		0x17059
-				MX6QDL_PAD_SD3_DAT6__SD3_DATA6		0x17059
-				MX6QDL_PAD_SD3_DAT7__SD3_DATA7		0x17059
-			>;
-		};
-
-		pinctrl_usdhc4: usdhc4grp {
-			fsl,pins = <
-				MX6QDL_PAD_SD4_CMD__SD4_CMD		0x17059
-				MX6QDL_PAD_SD4_CLK__SD4_CLK		0x10059
-				MX6QDL_PAD_SD4_DAT0__SD4_DATA0		0x17059
-				MX6QDL_PAD_SD4_DAT1__SD4_DATA1		0x17059
-				MX6QDL_PAD_SD4_DAT2__SD4_DATA2		0x17059
-				MX6QDL_PAD_SD4_DAT3__SD4_DATA3		0x17059
-				MX6QDL_PAD_SD4_DAT4__SD4_DATA4		0x17059
-				MX6QDL_PAD_SD4_DAT5__SD4_DATA5		0x17059
-				MX6QDL_PAD_SD4_DAT6__SD4_DATA6		0x17059
-				MX6QDL_PAD_SD4_DAT7__SD4_DATA7		0x17059
-			>;
-		};
-	};
-
-	gpio_leds {
-		pinctrl_gpio_leds: gpioledsgrp {
-			fsl,pins = <
-				MX6QDL_PAD_GPIO_2__GPIO1_IO02 0x1b0b0
-			>;
-		};
-	};
-};
-
-&ldb {
-	status = "okay";
-
-	lvds-channel@1 {
-		fsl,data-mapping = "spwg";
-		fsl,data-width = <18>;
-		status = "okay";
-
-		display-timings {
-			native-mode = <&timing0>;
-			timing0: hsd100pxn1 {
-				clock-frequency = <65000000>;
-				hactive = <1024>;
-				vactive = <768>;
-				hback-porch = <220>;
-				hfront-porch = <40>;
-				vback-porch = <21>;
-				vfront-porch = <7>;
-				hsync-len = <60>;
-				vsync-len = <10>;
-			};
-		};
-	};
-};
-
-&pcie {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_pcie>;
-	reset-gpio = <&gpio7 12 0>;
-	status = "okay";
-};
-
-&pwm1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_pwm1>;
-	status = "okay";
-};
-
-&snvs_poweroff {
-	status = "okay";
-};
-
-&ssi2 {
 	status = "okay";
 };
 
 &uart1 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1>;
+	pinctrl-0 = <&pinctrl_uart1_1>;
 	status = "okay";
 };
 
 &usbh1 {
-	vbus-supply = <&reg_usb_h1_vbus>;
 	status = "okay";
 };
 
 &usbotg {
 	vbus-supply = <&reg_usb_otg_vbus>;
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usbotg>;
+	pinctrl-0 = <&pinctrl_usbotg_2>;
 	disable-over-current;
 	status = "okay";
 };
 
 &usdhc2 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usdhc2>;
-	bus-width = <8>;
+	pinctrl-0 = <&pinctrl_usdhc2_1>;
 	cd-gpios = <&gpio2 2 0>;
 	wp-gpios = <&gpio2 3 0>;
 	status = "okay";
@@ -569,18 +80,8 @@
 
 &usdhc3 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usdhc3>;
-	bus-width = <8>;
+	pinctrl-0 = <&pinctrl_usdhc3_1>;
 	cd-gpios = <&gpio2 0 0>;
 	wp-gpios = <&gpio2 1 0>;
 	status = "okay";
 };
-
-&usdhc4 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usdhc4>;
-	bus-width = <8>;
-	non-removable;
-	no-1-8-v;
-	status = "okay";
-};
diff -urNp a/arch/arm/boot/dts/imx6qdl.dtsi b/arch/arm/boot/dts/imx6qdl.dtsi
--- a/arch/arm/boot/dts/imx6qdl.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/imx6qdl.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -10,16 +10,15 @@
  * http://www.gnu.org/copyleft/gpl.html
  */
 
-#include <dt-bindings/clock/imx6qdl-clock.h>
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-
 #include "skeleton.dtsi"
 
 / {
 	aliases {
-		ethernet0 = &fec;
-		can0 = &can1;
-		can1 = &can2;
+		serial0 = &uart1;
+		serial1 = &uart2;
+		serial2 = &uart3;
+		serial3 = &uart4;
+		serial4 = &uart5;
 		gpio0 = &gpio1;
 		gpio1 = &gpio2;
 		gpio2 = &gpio3;
@@ -27,29 +26,13 @@
 		gpio4 = &gpio5;
 		gpio5 = &gpio6;
 		gpio6 = &gpio7;
-		i2c0 = &i2c1;
-		i2c1 = &i2c2;
-		i2c2 = &i2c3;
-		mmc0 = &usdhc1;
-		mmc1 = &usdhc2;
-		mmc2 = &usdhc3;
-		mmc3 = &usdhc4;
-		serial0 = &uart1;
-		serial1 = &uart2;
-		serial2 = &uart3;
-		serial3 = &uart4;
-		serial4 = &uart5;
-		spi0 = &ecspi1;
-		spi1 = &ecspi2;
-		spi2 = &ecspi3;
-		spi3 = &ecspi4;
-		usbphy0 = &usbphy1;
-		usbphy1 = &usbphy2;
 	};
 
 	intc: interrupt-controller@00a01000 {
 		compatible = "arm,cortex-a9-gic";
 		#interrupt-cells = <3>;
+		#address-cells = <1>;
+		#size-cells = <1>;
 		interrupt-controller;
 		reg = <0x00a01000 0x1000>,
 		      <0x00a00100 0x100>;
@@ -61,19 +44,16 @@
 
 		ckil {
 			compatible = "fsl,imx-ckil", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <32768>;
 		};
 
 		ckih1 {
 			compatible = "fsl,imx-ckih1", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <0>;
 		};
 
 		osc {
 			compatible = "fsl,imx-osc", "fixed-clock";
-			#clock-cells = <0>;
 			clock-frequency = <24000000>;
 		};
 	};
@@ -88,14 +68,11 @@
 		dma_apbh: dma-apbh@00110000 {
 			compatible = "fsl,imx6q-dma-apbh", "fsl,imx28-dma-apbh";
 			reg = <0x00110000 0x2000>;
-			interrupts = <0 13 IRQ_TYPE_LEVEL_HIGH>,
-				     <0 13 IRQ_TYPE_LEVEL_HIGH>,
-				     <0 13 IRQ_TYPE_LEVEL_HIGH>,
-				     <0 13 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 13 0x04>, <0 13 0x04>, <0 13 0x04>, <0 13 0x04>;
 			interrupt-names = "gpmi0", "gpmi1", "gpmi2", "gpmi3";
 			#dma-cells = <1>;
 			dma-channels = <4>;
-			clocks = <&clks IMX6QDL_CLK_APBH_DMA>;
+			clocks = <&clks 106>;
 		};
 
 		gpmi: gpmi-nand@00112000 {
@@ -104,17 +81,15 @@
 			#size-cells = <1>;
 			reg = <0x00112000 0x2000>, <0x00114000 0x2000>;
 			reg-names = "gpmi-nand", "bch";
-			interrupts = <0 15 IRQ_TYPE_LEVEL_HIGH>;
-			interrupt-names = "bch";
-			clocks = <&clks IMX6QDL_CLK_GPMI_IO>,
-				 <&clks IMX6QDL_CLK_GPMI_APB>,
-				 <&clks IMX6QDL_CLK_GPMI_BCH>,
-				 <&clks IMX6QDL_CLK_GPMI_BCH_APB>,
-				 <&clks IMX6QDL_CLK_PER1_BCH>;
+			interrupts = <0 13 0x04>, <0 15 0x04>;
+			interrupt-names = "gpmi-dma", "bch";
+			clocks = <&clks 152>, <&clks 153>, <&clks 151>,
+				 <&clks 150>, <&clks 149>;
 			clock-names = "gpmi_io", "gpmi_apb", "gpmi_bch",
 				      "gpmi_bch_apb", "per1_bch";
 			dmas = <&dma_apbh 0>;
 			dma-names = "rx-tx";
+			fsl,gpmi-dma-channel = <0>;
 			status = "disabled";
 		};
 
@@ -122,49 +97,20 @@
 			compatible = "arm,cortex-a9-twd-timer";
 			reg = <0x00a00600 0x20>;
 			interrupts = <1 13 0xf01>;
-			clocks = <&clks IMX6QDL_CLK_TWD>;
+			clocks = <&clks 15>;
 		};
 
 		L2: l2-cache@00a02000 {
 			compatible = "arm,pl310-cache";
 			reg = <0x00a02000 0x1000>;
-			interrupts = <0 92 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 92 0x04>;
 			cache-unified;
 			cache-level = <2>;
-			arm,tag-latency = <4 2 3>;
-			arm,data-latency = <4 2 3>;
-		};
-
-		pcie: pcie@0x01000000 {
-			compatible = "fsl,imx6q-pcie", "snps,dw-pcie";
-			reg = <0x01ffc000 0x04000>,
-			      <0x01f00000 0x80000>;
-			reg-names = "dbi", "config";
-			#address-cells = <3>;
-			#size-cells = <2>;
-			device_type = "pci";
-			ranges = <0x00000800 0 0x01f00000 0x01f00000 0 0x00080000 /* configuration space */
-				  0x81000000 0 0          0x01f80000 0 0x00010000 /* downstream I/O */
-				  0x82000000 0 0x01000000 0x01000000 0 0x00f00000>; /* non-prefetchable memory */
-			num-lanes = <1>;
-			interrupts = <GIC_SPI 120 IRQ_TYPE_LEVEL_HIGH>;
-			interrupt-names = "msi";
-			#interrupt-cells = <1>;
-			interrupt-map-mask = <0 0 0 0x7>;
-			interrupt-map = <0 0 0 1 &intc GIC_SPI 123 IRQ_TYPE_LEVEL_HIGH>,
-			                <0 0 0 2 &intc GIC_SPI 122 IRQ_TYPE_LEVEL_HIGH>,
-			                <0 0 0 3 &intc GIC_SPI 121 IRQ_TYPE_LEVEL_HIGH>,
-			                <0 0 0 4 &intc GIC_SPI 120 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clks IMX6QDL_CLK_PCIE_AXI>,
-				 <&clks IMX6QDL_CLK_LVDS1_GATE>,
-				 <&clks IMX6QDL_CLK_PCIE_REF_125M>;
-			clock-names = "pcie", "pcie_bus", "pcie_phy";
-			status = "disabled";
 		};
 
 		pmu {
 			compatible = "arm,cortex-a9-pmu";
-			interrupts = <0 94 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 94 0x04>;
 		};
 
 		aips-bus@02000000 { /* AIPS1 */
@@ -182,23 +128,8 @@
 				ranges;
 
 				spdif: spdif@02004000 {
-					compatible = "fsl,imx35-spdif";
 					reg = <0x02004000 0x4000>;
-					interrupts = <0 52 IRQ_TYPE_LEVEL_HIGH>;
-					dmas = <&sdma 14 18 0>,
-					       <&sdma 15 18 0>;
-					dma-names = "rx", "tx";
-					clocks = <&clks IMX6QDL_CLK_SPDIF>, <&clks IMX6QDL_CLK_OSC>,
-						 <&clks IMX6QDL_CLK_SPDIF>, <&clks IMX6QDL_CLK_DUMMY>,
-						 <&clks IMX6QDL_CLK_DUMMY>, <&clks IMX6QDL_CLK_DUMMY>,
-						 <&clks IMX6QDL_CLK_DUMMY>, <&clks IMX6QDL_CLK_DUMMY>,
-						 <&clks IMX6QDL_CLK_DUMMY>;
-					clock-names = "core",  "rxtx0",
-						      "rxtx1", "rxtx2",
-						      "rxtx3", "rxtx4",
-						      "rxtx5", "rxtx6",
-						      "rxtx7";
-					status = "disabled";
+					interrupts = <0 52 0x04>;
 				};
 
 				ecspi1: ecspi@02008000 {
@@ -206,12 +137,9 @@
 					#size-cells = <0>;
 					compatible = "fsl,imx6q-ecspi", "fsl,imx51-ecspi";
 					reg = <0x02008000 0x4000>;
-					interrupts = <0 31 IRQ_TYPE_LEVEL_HIGH>;
-					clocks = <&clks IMX6QDL_CLK_ECSPI1>,
-						 <&clks IMX6QDL_CLK_ECSPI1>;
+					interrupts = <0 31 0x04>;
+					clocks = <&clks 112>, <&clks 112>;
 					clock-names = "ipg", "per";
-					dmas = <&sdma 3 7 1>, <&sdma 4 7 2>;
-					dma-names = "rx", "tx";
 					status = "disabled";
 				};
 
@@ -220,12 +148,9 @@
 					#size-cells = <0>;
 					compatible = "fsl,imx6q-ecspi", "fsl,imx51-ecspi";
 					reg = <0x0200c000 0x4000>;
-					interrupts = <0 32 IRQ_TYPE_LEVEL_HIGH>;
-					clocks = <&clks IMX6QDL_CLK_ECSPI2>,
-						 <&clks IMX6QDL_CLK_ECSPI2>;
+					interrupts = <0 32 0x04>;
+					clocks = <&clks 113>, <&clks 113>;
 					clock-names = "ipg", "per";
-					dmas = <&sdma 5 7 1>, <&sdma 6 7 2>;
-					dma-names = "rx", "tx";
 					status = "disabled";
 				};
 
@@ -234,12 +159,9 @@
 					#size-cells = <0>;
 					compatible = "fsl,imx6q-ecspi", "fsl,imx51-ecspi";
 					reg = <0x02010000 0x4000>;
-					interrupts = <0 33 IRQ_TYPE_LEVEL_HIGH>;
-					clocks = <&clks IMX6QDL_CLK_ECSPI3>,
-						 <&clks IMX6QDL_CLK_ECSPI3>;
+					interrupts = <0 33 0x04>;
+					clocks = <&clks 114>, <&clks 114>;
 					clock-names = "ipg", "per";
-					dmas = <&sdma 7 7 1>, <&sdma 8 7 2>;
-					dma-names = "rx", "tx";
 					status = "disabled";
 				};
 
@@ -248,83 +170,59 @@
 					#size-cells = <0>;
 					compatible = "fsl,imx6q-ecspi", "fsl,imx51-ecspi";
 					reg = <0x02014000 0x4000>;
-					interrupts = <0 34 IRQ_TYPE_LEVEL_HIGH>;
-					clocks = <&clks IMX6QDL_CLK_ECSPI4>,
-						 <&clks IMX6QDL_CLK_ECSPI4>;
+					interrupts = <0 34 0x04>;
+					clocks = <&clks 115>, <&clks 115>;
 					clock-names = "ipg", "per";
-					dmas = <&sdma 9 7 1>, <&sdma 10 7 2>;
-					dma-names = "rx", "tx";
 					status = "disabled";
 				};
 
 				uart1: serial@02020000 {
 					compatible = "fsl,imx6q-uart", "fsl,imx21-uart";
 					reg = <0x02020000 0x4000>;
-					interrupts = <0 26 IRQ_TYPE_LEVEL_HIGH>;
-					clocks = <&clks IMX6QDL_CLK_UART_IPG>,
-						 <&clks IMX6QDL_CLK_UART_SERIAL>;
+					interrupts = <0 26 0x04>;
+					clocks = <&clks 160>, <&clks 161>;
 					clock-names = "ipg", "per";
-					dmas = <&sdma 25 4 0>, <&sdma 26 4 0>;
-					dma-names = "rx", "tx";
 					status = "disabled";
 				};
 
 				esai: esai@02024000 {
 					reg = <0x02024000 0x4000>;
-					interrupts = <0 51 IRQ_TYPE_LEVEL_HIGH>;
+					interrupts = <0 51 0x04>;
 				};
 
 				ssi1: ssi@02028000 {
-					#sound-dai-cells = <0>;
-					compatible = "fsl,imx6q-ssi",
-							"fsl,imx51-ssi";
+					compatible = "fsl,imx6q-ssi","fsl,imx21-ssi";
 					reg = <0x02028000 0x4000>;
-					interrupts = <0 46 IRQ_TYPE_LEVEL_HIGH>;
-					clocks = <&clks IMX6QDL_CLK_SSI1_IPG>,
-						 <&clks IMX6QDL_CLK_SSI1>;
-					clock-names = "ipg", "baud";
-					dmas = <&sdma 37 1 0>,
-					       <&sdma 38 1 0>;
-					dma-names = "rx", "tx";
+					interrupts = <0 46 0x04>;
+					clocks = <&clks 178>;
 					fsl,fifo-depth = <15>;
+					fsl,ssi-dma-events = <38 37>;
 					status = "disabled";
 				};
 
 				ssi2: ssi@0202c000 {
-					#sound-dai-cells = <0>;
-					compatible = "fsl,imx6q-ssi",
-							"fsl,imx51-ssi";
+					compatible = "fsl,imx6q-ssi","fsl,imx21-ssi";
 					reg = <0x0202c000 0x4000>;
-					interrupts = <0 47 IRQ_TYPE_LEVEL_HIGH>;
-					clocks = <&clks IMX6QDL_CLK_SSI2_IPG>,
-						 <&clks IMX6QDL_CLK_SSI2>;
-					clock-names = "ipg", "baud";
-					dmas = <&sdma 41 1 0>,
-					       <&sdma 42 1 0>;
-					dma-names = "rx", "tx";
+					interrupts = <0 47 0x04>;
+					clocks = <&clks 179>;
 					fsl,fifo-depth = <15>;
+					fsl,ssi-dma-events = <42 41>;
 					status = "disabled";
 				};
 
 				ssi3: ssi@02030000 {
-					#sound-dai-cells = <0>;
-					compatible = "fsl,imx6q-ssi",
-							"fsl,imx51-ssi";
+					compatible = "fsl,imx6q-ssi","fsl,imx21-ssi";
 					reg = <0x02030000 0x4000>;
-					interrupts = <0 48 IRQ_TYPE_LEVEL_HIGH>;
-					clocks = <&clks IMX6QDL_CLK_SSI3_IPG>,
-						 <&clks IMX6QDL_CLK_SSI3>;
-					clock-names = "ipg", "baud";
-					dmas = <&sdma 45 1 0>,
-					       <&sdma 46 1 0>;
-					dma-names = "rx", "tx";
+					interrupts = <0 48 0x04>;
+					clocks = <&clks 180>;
 					fsl,fifo-depth = <15>;
+					fsl,ssi-dma-events = <46 45>;
 					status = "disabled";
 				};
 
 				asrc: asrc@02034000 {
 					reg = <0x02034000 0x4000>;
-					interrupts = <0 50 IRQ_TYPE_LEVEL_HIGH>;
+					interrupts = <0 50 0x04>;
 				};
 
 				spba@0203c000 {
@@ -333,16 +231,8 @@
 			};
 
 			vpu: vpu@02040000 {
-				compatible = "cnm,coda960";
 				reg = <0x02040000 0x3c000>;
-				interrupts = <0 12 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 3 IRQ_TYPE_LEVEL_HIGH>;
-				interrupt-names = "bit", "jpeg";
-				clocks = <&clks IMX6QDL_CLK_VPU_AXI>,
-					 <&clks IMX6QDL_CLK_MMDC_CH0_AXI>;
-				clock-names = "per", "ahb";
-				resets = <&src 1>;
-				iram = <&ocram>;
+				interrupts = <0 3 0x04 0 12 0x04>;
 			};
 
 			aipstz@0207c000 { /* AIPSTZ1 */
@@ -353,9 +243,8 @@
 				#pwm-cells = <2>;
 				compatible = "fsl,imx6q-pwm", "fsl,imx27-pwm";
 				reg = <0x02080000 0x4000>;
-				interrupts = <0 83 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_IPG>,
-					 <&clks IMX6QDL_CLK_PWM1>;
+				interrupts = <0 83 0x04>;
+				clocks = <&clks 62>, <&clks 145>;
 				clock-names = "ipg", "per";
 			};
 
@@ -363,9 +252,8 @@
 				#pwm-cells = <2>;
 				compatible = "fsl,imx6q-pwm", "fsl,imx27-pwm";
 				reg = <0x02084000 0x4000>;
-				interrupts = <0 84 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_IPG>,
-					 <&clks IMX6QDL_CLK_PWM2>;
+				interrupts = <0 84 0x04>;
+				clocks = <&clks 62>, <&clks 146>;
 				clock-names = "ipg", "per";
 			};
 
@@ -373,9 +261,8 @@
 				#pwm-cells = <2>;
 				compatible = "fsl,imx6q-pwm", "fsl,imx27-pwm";
 				reg = <0x02088000 0x4000>;
-				interrupts = <0 85 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_IPG>,
-					 <&clks IMX6QDL_CLK_PWM3>;
+				interrupts = <0 85 0x04>;
+				clocks = <&clks 62>, <&clks 147>;
 				clock-names = "ipg", "per";
 			};
 
@@ -383,47 +270,33 @@
 				#pwm-cells = <2>;
 				compatible = "fsl,imx6q-pwm", "fsl,imx27-pwm";
 				reg = <0x0208c000 0x4000>;
-				interrupts = <0 86 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_IPG>,
-					 <&clks IMX6QDL_CLK_PWM4>;
+				interrupts = <0 86 0x04>;
+				clocks = <&clks 62>, <&clks 148>;
 				clock-names = "ipg", "per";
 			};
 
 			can1: flexcan@02090000 {
-				compatible = "fsl,imx6q-flexcan";
 				reg = <0x02090000 0x4000>;
-				interrupts = <0 110 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_CAN1_IPG>,
-					 <&clks IMX6QDL_CLK_CAN1_SERIAL>;
-				clock-names = "ipg", "per";
-				status = "disabled";
+				interrupts = <0 110 0x04>;
 			};
 
 			can2: flexcan@02094000 {
-				compatible = "fsl,imx6q-flexcan";
 				reg = <0x02094000 0x4000>;
-				interrupts = <0 111 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_CAN2_IPG>,
-					 <&clks IMX6QDL_CLK_CAN2_SERIAL>;
-				clock-names = "ipg", "per";
-				status = "disabled";
+				interrupts = <0 111 0x04>;
 			};
 
 			gpt: gpt@02098000 {
-				compatible = "fsl,imx6q-gpt", "fsl,imx31-gpt";
+				compatible = "fsl,imx6q-gpt";
 				reg = <0x02098000 0x4000>;
-				interrupts = <0 55 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_GPT_IPG>,
-					 <&clks IMX6QDL_CLK_GPT_IPG_PER>,
-					 <&clks IMX6QDL_CLK_GPT_3M>;
-				clock-names = "ipg", "per", "osc_per";
+				interrupts = <0 55 0x04>;
+				clocks = <&clks 119>, <&clks 120>;
+				clock-names = "ipg", "per";
 			};
 
 			gpio1: gpio@0209c000 {
 				compatible = "fsl,imx6q-gpio", "fsl,imx35-gpio";
 				reg = <0x0209c000 0x4000>;
-				interrupts = <0 66 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 67 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 66 0x04 0 67 0x04>;
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
@@ -433,8 +306,7 @@
 			gpio2: gpio@020a0000 {
 				compatible = "fsl,imx6q-gpio", "fsl,imx35-gpio";
 				reg = <0x020a0000 0x4000>;
-				interrupts = <0 68 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 69 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 68 0x04 0 69 0x04>;
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
@@ -444,8 +316,7 @@
 			gpio3: gpio@020a4000 {
 				compatible = "fsl,imx6q-gpio", "fsl,imx35-gpio";
 				reg = <0x020a4000 0x4000>;
-				interrupts = <0 70 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 71 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 70 0x04 0 71 0x04>;
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
@@ -455,8 +326,7 @@
 			gpio4: gpio@020a8000 {
 				compatible = "fsl,imx6q-gpio", "fsl,imx35-gpio";
 				reg = <0x020a8000 0x4000>;
-				interrupts = <0 72 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 73 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 72 0x04 0 73 0x04>;
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
@@ -466,8 +336,7 @@
 			gpio5: gpio@020ac000 {
 				compatible = "fsl,imx6q-gpio", "fsl,imx35-gpio";
 				reg = <0x020ac000 0x4000>;
-				interrupts = <0 74 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 75 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 74 0x04 0 75 0x04>;
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
@@ -477,8 +346,7 @@
 			gpio6: gpio@020b0000 {
 				compatible = "fsl,imx6q-gpio", "fsl,imx35-gpio";
 				reg = <0x020b0000 0x4000>;
-				interrupts = <0 76 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 77 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 76 0x04 0 77 0x04>;
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
@@ -488,8 +356,7 @@
 			gpio7: gpio@020b4000 {
 				compatible = "fsl,imx6q-gpio", "fsl,imx35-gpio";
 				reg = <0x020b4000 0x4000>;
-				interrupts = <0 78 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 79 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 78 0x04 0 79 0x04>;
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupt-controller;
@@ -497,42 +364,36 @@
 			};
 
 			kpp: kpp@020b8000 {
-				compatible = "fsl,imx6q-kpp", "fsl,imx21-kpp";
 				reg = <0x020b8000 0x4000>;
-				interrupts = <0 82 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_IPG>;
-				status = "disabled";
+				interrupts = <0 82 0x04>;
 			};
 
 			wdog1: wdog@020bc000 {
 				compatible = "fsl,imx6q-wdt", "fsl,imx21-wdt";
 				reg = <0x020bc000 0x4000>;
-				interrupts = <0 80 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_DUMMY>;
+				interrupts = <0 80 0x04>;
+				clocks = <&clks 0>;
 			};
 
 			wdog2: wdog@020c0000 {
 				compatible = "fsl,imx6q-wdt", "fsl,imx21-wdt";
 				reg = <0x020c0000 0x4000>;
-				interrupts = <0 81 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_DUMMY>;
+				interrupts = <0 81 0x04>;
+				clocks = <&clks 0>;
 				status = "disabled";
 			};
 
 			clks: ccm@020c4000 {
 				compatible = "fsl,imx6q-ccm";
 				reg = <0x020c4000 0x4000>;
-				interrupts = <0 87 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 88 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 87 0x04 0 88 0x04>;
 				#clock-cells = <1>;
 			};
 
 			anatop: anatop@020c8000 {
 				compatible = "fsl,imx6q-anatop", "syscon", "simple-bus";
 				reg = <0x020c8000 0x1000>;
-				interrupts = <0 49 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 54 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 127 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 49 0x04 0 54 0x04 0 127 0x04>;
 
 				regulator-1p1@110 {
 					compatible = "fsl,anatop-regulator";
@@ -578,7 +439,7 @@
 
 				reg_arm: regulator-vddcore@140 {
 					compatible = "fsl,anatop-regulator";
-					regulator-name = "vddarm";
+					regulator-name = "cpu";
 					regulator-min-microvolt = <725000>;
 					regulator-max-microvolt = <1450000>;
 					regulator-always-on;
@@ -628,28 +489,18 @@
 				};
 			};
 
-			tempmon: tempmon {
-				compatible = "fsl,imx6q-tempmon";
-				interrupts = <0 49 IRQ_TYPE_LEVEL_HIGH>;
-				fsl,tempmon = <&anatop>;
-				fsl,tempmon-data = <&ocotp>;
-				clocks = <&clks IMX6QDL_CLK_PLL3_USB_OTG>;
-			};
-
 			usbphy1: usbphy@020c9000 {
 				compatible = "fsl,imx6q-usbphy", "fsl,imx23-usbphy";
 				reg = <0x020c9000 0x1000>;
-				interrupts = <0 44 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_USBPHY1>;
-				fsl,anatop = <&anatop>;
+				interrupts = <0 44 0x04>;
+				clocks = <&clks 182>;
 			};
 
 			usbphy2: usbphy@020ca000 {
 				compatible = "fsl,imx6q-usbphy", "fsl,imx23-usbphy";
 				reg = <0x020ca000 0x1000>;
-				interrupts = <0 45 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_USBPHY2>;
-				fsl,anatop = <&anatop>;
+				interrupts = <0 45 0x04>;
+				clocks = <&clks 183>;
 			};
 
 			snvs@020cc000 {
@@ -661,40 +512,31 @@
 				snvs-rtc-lp@34 {
 					compatible = "fsl,sec-v4.0-mon-rtc-lp";
 					reg = <0x34 0x58>;
-					interrupts = <0 19 IRQ_TYPE_LEVEL_HIGH>,
-						     <0 20 IRQ_TYPE_LEVEL_HIGH>;
-				};
-
-				snvs_poweroff: snvs-poweroff@38 {
-					compatible = "fsl,sec-v4.0-poweroff";
-					reg = <0x38 0x4>;
-					status = "disabled";
+					interrupts = <0 19 0x04 0 20 0x04>;
 				};
 			};
 
 			epit1: epit@020d0000 { /* EPIT1 */
 				reg = <0x020d0000 0x4000>;
-				interrupts = <0 56 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 56 0x04>;
 			};
 
 			epit2: epit@020d4000 { /* EPIT2 */
 				reg = <0x020d4000 0x4000>;
-				interrupts = <0 57 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 57 0x04>;
 			};
 
 			src: src@020d8000 {
 				compatible = "fsl,imx6q-src", "fsl,imx51-src";
 				reg = <0x020d8000 0x4000>;
-				interrupts = <0 91 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 96 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 91 0x04 0 96 0x04>;
 				#reset-cells = <1>;
 			};
 
 			gpc: gpc@020dc000 {
 				compatible = "fsl,imx6q-gpc";
 				reg = <0x020dc000 0x4000>;
-				interrupts = <0 89 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 90 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 89 0x04 0 90 0x04>;
 			};
 
 			gpr: iomuxc-gpr@020e0000 {
@@ -702,11 +544,6 @@
 				reg = <0x020e0000 0x38>;
 			};
 
-			iomuxc: iomuxc@020e0000 {
-				compatible = "fsl,imx6dl-iomuxc", "fsl,imx6q-iomuxc";
-				reg = <0x020e0000 0x4000>;
-			};
-
 			ldb: ldb@020e0008 {
 				#address-cells = <1>;
 				#size-cells = <0>;
@@ -715,98 +552,34 @@
 				status = "disabled";
 
 				lvds-channel@0 {
-					#address-cells = <1>;
-					#size-cells = <0>;
 					reg = <0>;
+					crtcs = <&ipu1 0>;
 					status = "disabled";
-
-					port@0 {
-						reg = <0>;
-
-						lvds0_mux_0: endpoint {
-							remote-endpoint = <&ipu1_di0_lvds0>;
-						};
-					};
-
-					port@1 {
-						reg = <1>;
-
-						lvds0_mux_1: endpoint {
-							remote-endpoint = <&ipu1_di1_lvds0>;
-						};
-					};
 				};
 
 				lvds-channel@1 {
-					#address-cells = <1>;
-					#size-cells = <0>;
 					reg = <1>;
+					crtcs = <&ipu1 1>;
 					status = "disabled";
-
-					port@0 {
-						reg = <0>;
-
-						lvds1_mux_0: endpoint {
-							remote-endpoint = <&ipu1_di0_lvds1>;
-						};
-					};
-
-					port@1 {
-						reg = <1>;
-
-						lvds1_mux_1: endpoint {
-							remote-endpoint = <&ipu1_di1_lvds1>;
-						};
-					};
-				};
-			};
-
-			hdmi: hdmi@0120000 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <0x00120000 0x9000>;
-				interrupts = <0 115 0x04>;
-				gpr = <&gpr>;
-				clocks = <&clks IMX6QDL_CLK_HDMI_IAHB>,
-					 <&clks IMX6QDL_CLK_HDMI_ISFR>;
-				clock-names = "iahb", "isfr";
-				status = "disabled";
-
-				port@0 {
-					reg = <0>;
-
-					hdmi_mux_0: endpoint {
-						remote-endpoint = <&ipu1_di0_hdmi>;
-					};
-				};
-
-				port@1 {
-					reg = <1>;
-
-					hdmi_mux_1: endpoint {
-						remote-endpoint = <&ipu1_di1_hdmi>;
-					};
 				};
 			};
 
 			dcic1: dcic@020e4000 {
 				reg = <0x020e4000 0x4000>;
-				interrupts = <0 124 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 124 0x04>;
 			};
 
 			dcic2: dcic@020e8000 {
 				reg = <0x020e8000 0x4000>;
-				interrupts = <0 125 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 125 0x04>;
 			};
 
 			sdma: sdma@020ec000 {
 				compatible = "fsl,imx6q-sdma", "fsl,imx35-sdma";
 				reg = <0x020ec000 0x4000>;
-				interrupts = <0 2 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_SDMA>,
-					 <&clks IMX6QDL_CLK_SDMA>;
+				interrupts = <0 2 0x04>;
+				clocks = <&clks 155>, <&clks 155>;
 				clock-names = "ipg", "ahb";
-				#dma-cells = <3>;
 				fsl,sdma-ram-script-name = "imx/sdma/sdma-imx6q.bin";
 			};
 		};
@@ -820,8 +593,7 @@
 
 			caam@02100000 {
 				reg = <0x02100000 0x40000>;
-				interrupts = <0 105 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 106 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 105 0x04 0 106 0x04>;
 			};
 
 			aipstz@0217c000 { /* AIPSTZ2 */
@@ -831,8 +603,8 @@
 			usbotg: usb@02184000 {
 				compatible = "fsl,imx6q-usb", "fsl,imx27-usb";
 				reg = <0x02184000 0x200>;
-				interrupts = <0 43 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_USBOH3>;
+				interrupts = <0 43 0x04>;
+				clocks = <&clks 162>;
 				fsl,usbphy = <&usbphy1>;
 				fsl,usbmisc = <&usbmisc 0>;
 				status = "disabled";
@@ -841,8 +613,8 @@
 			usbh1: usb@02184200 {
 				compatible = "fsl,imx6q-usb", "fsl,imx27-usb";
 				reg = <0x02184200 0x200>;
-				interrupts = <0 40 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_USBOH3>;
+				interrupts = <0 40 0x04>;
+				clocks = <&clks 162>;
 				fsl,usbphy = <&usbphy2>;
 				fsl,usbmisc = <&usbmisc 1>;
 				status = "disabled";
@@ -851,8 +623,8 @@
 			usbh2: usb@02184400 {
 				compatible = "fsl,imx6q-usb", "fsl,imx27-usb";
 				reg = <0x02184400 0x200>;
-				interrupts = <0 41 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_USBOH3>;
+				interrupts = <0 41 0x04>;
+				clocks = <&clks 162>;
 				fsl,usbmisc = <&usbmisc 2>;
 				status = "disabled";
 			};
@@ -860,46 +632,38 @@
 			usbh3: usb@02184600 {
 				compatible = "fsl,imx6q-usb", "fsl,imx27-usb";
 				reg = <0x02184600 0x200>;
-				interrupts = <0 42 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_USBOH3>;
+				interrupts = <0 42 0x04>;
+				clocks = <&clks 162>;
 				fsl,usbmisc = <&usbmisc 3>;
 				status = "disabled";
 			};
 
-			usbmisc: usbmisc@02184800 {
+			usbmisc: usbmisc: usbmisc@02184800 {
 				#index-cells = <1>;
 				compatible = "fsl,imx6q-usbmisc";
 				reg = <0x02184800 0x200>;
-				clocks = <&clks IMX6QDL_CLK_USBOH3>;
+				clocks = <&clks 162>;
 			};
 
 			fec: ethernet@02188000 {
 				compatible = "fsl,imx6q-fec";
 				reg = <0x02188000 0x4000>;
-				interrupts-extended =
-					<&intc 0 118 IRQ_TYPE_LEVEL_HIGH>,
-					<&intc 0 119 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_ENET>,
-					 <&clks IMX6QDL_CLK_ENET>,
-					 <&clks IMX6QDL_CLK_ENET_REF>;
+				interrupts = <0 118 0x04 0 119 0x04>;
+				clocks = <&clks 117>, <&clks 117>, <&clks 190>;
 				clock-names = "ipg", "ahb", "ptp";
 				status = "disabled";
 			};
 
 			mlb@0218c000 {
 				reg = <0x0218c000 0x4000>;
-				interrupts = <0 53 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 117 IRQ_TYPE_LEVEL_HIGH>,
-					     <0 126 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 53 0x04 0 117 0x04 0 126 0x04>;
 			};
 
 			usdhc1: usdhc@02190000 {
 				compatible = "fsl,imx6q-usdhc";
 				reg = <0x02190000 0x4000>;
-				interrupts = <0 22 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_USDHC1>,
-					 <&clks IMX6QDL_CLK_USDHC1>,
-					 <&clks IMX6QDL_CLK_USDHC1>;
+				interrupts = <0 22 0x04>;
+				clocks = <&clks 163>, <&clks 163>, <&clks 163>;
 				clock-names = "ipg", "ahb", "per";
 				bus-width = <4>;
 				status = "disabled";
@@ -908,10 +672,8 @@
 			usdhc2: usdhc@02194000 {
 				compatible = "fsl,imx6q-usdhc";
 				reg = <0x02194000 0x4000>;
-				interrupts = <0 23 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_USDHC2>,
-					 <&clks IMX6QDL_CLK_USDHC2>,
-					 <&clks IMX6QDL_CLK_USDHC2>;
+				interrupts = <0 23 0x04>;
+				clocks = <&clks 164>, <&clks 164>, <&clks 164>;
 				clock-names = "ipg", "ahb", "per";
 				bus-width = <4>;
 				status = "disabled";
@@ -920,10 +682,8 @@
 			usdhc3: usdhc@02198000 {
 				compatible = "fsl,imx6q-usdhc";
 				reg = <0x02198000 0x4000>;
-				interrupts = <0 24 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_USDHC3>,
-					 <&clks IMX6QDL_CLK_USDHC3>,
-					 <&clks IMX6QDL_CLK_USDHC3>;
+				interrupts = <0 24 0x04>;
+				clocks = <&clks 165>, <&clks 165>, <&clks 165>;
 				clock-names = "ipg", "ahb", "per";
 				bus-width = <4>;
 				status = "disabled";
@@ -932,10 +692,8 @@
 			usdhc4: usdhc@0219c000 {
 				compatible = "fsl,imx6q-usdhc";
 				reg = <0x0219c000 0x4000>;
-				interrupts = <0 25 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_USDHC4>,
-					 <&clks IMX6QDL_CLK_USDHC4>,
-					 <&clks IMX6QDL_CLK_USDHC4>;
+				interrupts = <0 25 0x04>;
+				clocks = <&clks 166>, <&clks 166>, <&clks 166>;
 				clock-names = "ipg", "ahb", "per";
 				bus-width = <4>;
 				status = "disabled";
@@ -946,8 +704,8 @@
 				#size-cells = <0>;
 				compatible = "fsl,imx6q-i2c", "fsl,imx21-i2c";
 				reg = <0x021a0000 0x4000>;
-				interrupts = <0 36 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_I2C1>;
+				interrupts = <0 36 0x04>;
+				clocks = <&clks 125>;
 				status = "disabled";
 			};
 
@@ -956,8 +714,8 @@
 				#size-cells = <0>;
 				compatible = "fsl,imx6q-i2c", "fsl,imx21-i2c";
 				reg = <0x021a4000 0x4000>;
-				interrupts = <0 37 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_I2C2>;
+				interrupts = <0 37 0x04>;
+				clocks = <&clks 126>;
 				status = "disabled";
 			};
 
@@ -966,8 +724,8 @@
 				#size-cells = <0>;
 				compatible = "fsl,imx6q-i2c", "fsl,imx21-i2c";
 				reg = <0x021a8000 0x4000>;
-				interrupts = <0 38 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_I2C3>;
+				interrupts = <0 38 0x04>;
+				clocks = <&clks 127>;
 				status = "disabled";
 			};
 
@@ -984,26 +742,29 @@
 				reg = <0x021b4000 0x4000>;
 			};
 
-			weim: weim@021b8000 {
-				compatible = "fsl,imx6q-weim";
+			weim@021b8000 {
 				reg = <0x021b8000 0x4000>;
-				interrupts = <0 14 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_EIM_SLOW>;
+				interrupts = <0 14 0x04>;
 			};
 
-			ocotp: ocotp@021bc000 {
-				compatible = "fsl,imx6q-ocotp", "syscon";
+			ocotp@021bc000 {
+				compatible = "fsl,imx6q-ocotp";
 				reg = <0x021bc000 0x4000>;
 			};
 
+			ocotp@021c0000 {
+				reg = <0x021c0000 0x4000>;
+				interrupts = <0 21 0x04>;
+			};
+
 			tzasc@021d0000 { /* TZASC1 */
 				reg = <0x021d0000 0x4000>;
-				interrupts = <0 108 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 108 0x04>;
 			};
 
 			tzasc@021d4000 { /* TZASC2 */
 				reg = <0x021d4000 0x4000>;
-				interrupts = <0 109 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 109 0x04>;
 			};
 
 			audmux: audmux@021d8000 {
@@ -1012,157 +773,64 @@
 				status = "disabled";
 			};
 
-			mipi_csi: mipi@021dc000 {
+			mipi@021dc000 { /* MIPI-CSI */
 				reg = <0x021dc000 0x4000>;
 			};
 
-			mipi_dsi: mipi@021e0000 {
-				#address-cells = <1>;
-				#size-cells = <0>;
+			mipi@021e0000 { /* MIPI-DSI */
 				reg = <0x021e0000 0x4000>;
-				status = "disabled";
-
-				port@0 {
-					reg = <0>;
-
-					mipi_mux_0: endpoint {
-						remote-endpoint = <&ipu1_di0_mipi>;
-					};
-				};
-
-				port@1 {
-					reg = <1>;
-
-					mipi_mux_1: endpoint {
-						remote-endpoint = <&ipu1_di1_mipi>;
-					};
-				};
 			};
 
 			vdoa@021e4000 {
 				reg = <0x021e4000 0x4000>;
-				interrupts = <0 18 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 18 0x04>;
 			};
 
 			uart2: serial@021e8000 {
 				compatible = "fsl,imx6q-uart", "fsl,imx21-uart";
 				reg = <0x021e8000 0x4000>;
-				interrupts = <0 27 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_UART_IPG>,
-					 <&clks IMX6QDL_CLK_UART_SERIAL>;
+				interrupts = <0 27 0x04>;
+				clocks = <&clks 160>, <&clks 161>;
 				clock-names = "ipg", "per";
-				dmas = <&sdma 27 4 0>, <&sdma 28 4 0>;
-				dma-names = "rx", "tx";
 				status = "disabled";
 			};
 
 			uart3: serial@021ec000 {
 				compatible = "fsl,imx6q-uart", "fsl,imx21-uart";
 				reg = <0x021ec000 0x4000>;
-				interrupts = <0 28 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_UART_IPG>,
-					 <&clks IMX6QDL_CLK_UART_SERIAL>;
+				interrupts = <0 28 0x04>;
+				clocks = <&clks 160>, <&clks 161>;
 				clock-names = "ipg", "per";
-				dmas = <&sdma 29 4 0>, <&sdma 30 4 0>;
-				dma-names = "rx", "tx";
 				status = "disabled";
 			};
 
 			uart4: serial@021f0000 {
 				compatible = "fsl,imx6q-uart", "fsl,imx21-uart";
 				reg = <0x021f0000 0x4000>;
-				interrupts = <0 29 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_UART_IPG>,
-					 <&clks IMX6QDL_CLK_UART_SERIAL>;
+				interrupts = <0 29 0x04>;
+				clocks = <&clks 160>, <&clks 161>;
 				clock-names = "ipg", "per";
-				dmas = <&sdma 31 4 0>, <&sdma 32 4 0>;
-				dma-names = "rx", "tx";
 				status = "disabled";
 			};
 
 			uart5: serial@021f4000 {
 				compatible = "fsl,imx6q-uart", "fsl,imx21-uart";
 				reg = <0x021f4000 0x4000>;
-				interrupts = <0 30 IRQ_TYPE_LEVEL_HIGH>;
-				clocks = <&clks IMX6QDL_CLK_UART_IPG>,
-					 <&clks IMX6QDL_CLK_UART_SERIAL>;
+				interrupts = <0 30 0x04>;
+				clocks = <&clks 160>, <&clks 161>;
 				clock-names = "ipg", "per";
-				dmas = <&sdma 33 4 0>, <&sdma 34 4 0>;
-				dma-names = "rx", "tx";
 				status = "disabled";
 			};
 		};
 
 		ipu1: ipu@02400000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
+			#crtc-cells = <1>;
 			compatible = "fsl,imx6q-ipu";
 			reg = <0x02400000 0x400000>;
-			interrupts = <0 6 IRQ_TYPE_LEVEL_HIGH>,
-				     <0 5 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clks IMX6QDL_CLK_IPU1>,
-				 <&clks IMX6QDL_CLK_IPU1_DI0>,
-				 <&clks IMX6QDL_CLK_IPU1_DI1>;
+			interrupts = <0 6 0x4 0 5 0x4>;
+			clocks = <&clks 130>, <&clks 131>, <&clks 132>;
 			clock-names = "bus", "di0", "di1";
 			resets = <&src 2>;
-
-			ipu1_csi0: port@0 {
-				reg = <0>;
-			};
-
-			ipu1_csi1: port@1 {
-				reg = <1>;
-			};
-
-			ipu1_di0: port@2 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <2>;
-
-				ipu1_di0_disp0: endpoint@0 {
-				};
-
-				ipu1_di0_hdmi: endpoint@1 {
-					remote-endpoint = <&hdmi_mux_0>;
-				};
-
-				ipu1_di0_mipi: endpoint@2 {
-					remote-endpoint = <&mipi_mux_0>;
-				};
-
-				ipu1_di0_lvds0: endpoint@3 {
-					remote-endpoint = <&lvds0_mux_0>;
-				};
-
-				ipu1_di0_lvds1: endpoint@4 {
-					remote-endpoint = <&lvds1_mux_0>;
-				};
-			};
-
-			ipu1_di1: port@3 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <3>;
-
-				ipu1_di0_disp1: endpoint@0 {
-				};
-
-				ipu1_di1_hdmi: endpoint@1 {
-					remote-endpoint = <&hdmi_mux_1>;
-				};
-
-				ipu1_di1_mipi: endpoint@2 {
-					remote-endpoint = <&mipi_mux_1>;
-				};
-
-				ipu1_di1_lvds0: endpoint@3 {
-					remote-endpoint = <&lvds0_mux_1>;
-				};
-
-				ipu1_di1_lvds1: endpoint@4 {
-					remote-endpoint = <&lvds1_mux_1>;
-				};
-			};
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/integrator.dtsi b/arch/arm/boot/dts/integrator.dtsi
--- a/arch/arm/boot/dts/integrator.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/integrator.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -5,26 +5,6 @@
 /include/ "skeleton.dtsi"
 
 / {
-	core-module@10000000 {
-		compatible = "arm,core-module-integrator", "syscon";
-		reg = <0x10000000 0x200>;
-
-		/* Use core module LED to indicate CPU load */
-		led@0c.0 {
-			compatible = "register-bit-led";
-			offset = <0x0c>;
-			mask = <0x01>;
-			label = "integrator:core_module";
-			linux,default-trigger = "cpu0";
-			default-state = "on";
-		};
-	};
-
-	ebi@12000000 {
-		compatible = "arm,external-bus-interface";
-		reg = <0x12000000 0x100>;
-	};
-
 	timer@13000000 {
 		reg = <0x13000000 0x100>;
 		interrupt-parent = <&pic>;
@@ -92,41 +72,5 @@
 			reg = <0x19000000 0x1000>;
 			interrupts = <4>;
 		};
-
-		syscon {
-			/* Debug registers mapped as syscon */
-			compatible = "syscon";
-			reg = <0x1a000000 0x10>;
-
-			led@04.0 {
-				compatible = "register-bit-led";
-				offset = <0x04>;
-				mask = <0x01>;
-				label = "integrator:green0";
-				linux,default-trigger = "heartbeat";
-				default-state = "on";
-			};
-			led@04.1 {
-				compatible = "register-bit-led";
-				offset = <0x04>;
-				mask = <0x02>;
-				label = "integrator:yellow";
-				default-state = "off";
-			};
-			led@04.2 {
-				compatible = "register-bit-led";
-				offset = <0x04>;
-				mask = <0x04>;
-				label = "integrator:red";
-				default-state = "off";
-			};
-			led@04.3 {
-				compatible = "register-bit-led";
-				offset = <0x04>;
-				mask = <0x08>;
-				label = "integrator:green1";
-				default-state = "off";
-			};
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/integratorap.dts b/arch/arm/boot/dts/integratorap.dts
--- a/arch/arm/boot/dts/integratorap.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/integratorap.dts	2015-10-27 00:45:05.000000000 +0000
@@ -8,7 +8,6 @@
 / {
 	model = "ARM Integrator/AP";
 	compatible = "arm,integrator-ap";
-	dma-ranges = <0x80000000 0x0 0x80000000>;
 
 	aliases {
 		arm,timer-primary = &timer2;
@@ -19,96 +18,27 @@
 		bootargs = "root=/dev/ram0 console=ttyAM0,38400n8 earlyprintk";
 	};
 
-	/* 24 MHz chrystal on the core module */
-	xtal24mhz: xtal24mhz@24M {
-		#clock-cells = <0>;
-		compatible = "fixed-clock";
-		clock-frequency = <24000000>;
-	};
-
-	pclk: pclk@0 {
-		#clock-cells = <0>;
-		compatible = "fixed-factor-clock";
-		clock-div = <1>;
-		clock-mult = <1>;
-		clocks = <&xtal24mhz>;
-	};
-
-	/* The UART clock is 14.74 MHz divided by an ICS525 */
-	uartclk: uartclk@14.74M {
-		#clock-cells = <0>;
-		compatible = "fixed-clock";
-		clock-frequency = <14745600>;
-	};
-
 	syscon {
-		compatible = "arm,integrator-ap-syscon";
+		/* AP system controller registers */
 		reg = <0x11000000 0x100>;
-		interrupt-parent = <&pic>;
-		/* These are the logical module IRQs */
-		interrupts = <9>, <10>, <11>, <12>;
 	};
 
 	timer0: timer@13000000 {
 		compatible = "arm,integrator-timer";
-		clocks = <&xtal24mhz>;
 	};
 
 	timer1: timer@13000100 {
 		compatible = "arm,integrator-timer";
-		clocks = <&xtal24mhz>;
 	};
 
 	timer2: timer@13000200 {
 		compatible = "arm,integrator-timer";
-		clocks = <&xtal24mhz>;
 	};
 
 	pic: pic@14000000 {
 		valid-mask = <0x003fffff>;
 	};
 
-	pci: pciv3@62000000 {
-		compatible = "v3,v360epc-pci";
-		#interrupt-cells = <1>;
-		#size-cells = <2>;
-		#address-cells = <3>;
-		reg = <0x62000000 0x10000>;
-		interrupt-parent = <&pic>;
-		interrupts = <17>; /* Bus error IRQ */
-		ranges = <0x00000000 0 0x61000000 /* config space */
-			0x61000000 0 0x00100000 /* 16 MiB @ 61000000 */
-			0x01000000 0 0x0 /* I/O space */
-			0x60000000 0 0x00100000 /* 16 MiB @ 60000000 */
-			0x02000000 0 0x00000000 /* non-prefectable memory */
-			0x40000000 0 0x10000000 /* 256 MiB @ 40000000 */
-			0x42000000 0 0x10000000 /* prefetchable memory */
-			0x50000000 0 0x10000000>; /* 256 MiB @ 50000000 */
-		interrupt-map-mask = <0xf800 0 0 0x7>;
-		interrupt-map = <
-		/* IDSEL 9 */
-		0x4800 0 0 1 &pic 13 /* INT A on slot 9 is irq 13 */
-		0x4800 0 0 2 &pic 14 /* INT B on slot 9 is irq 14 */
-		0x4800 0 0 3 &pic 15 /* INT C on slot 9 is irq 15 */
-		0x4800 0 0 4 &pic 16 /* INT D on slot 9 is irq 16 */
-		/* IDSEL 10 */
-		0x5000 0 0 1 &pic 14 /* INT A on slot 10 is irq 14 */
-		0x5000 0 0 2 &pic 15 /* INT B on slot 10 is irq 15 */
-		0x5000 0 0 3 &pic 16 /* INT C on slot 10 is irq 16 */
-		0x5000 0 0 4 &pic 13 /* INT D on slot 10 is irq 13 */
-		/* IDSEL 11 */
-		0x5800 0 0 1 &pic 15 /* INT A on slot 11 is irq 15 */
-		0x5800 0 0 2 &pic 16 /* INT B on slot 11 is irq 16 */
-		0x5800 0 0 3 &pic 13 /* INT C on slot 11 is irq 13 */
-		0x5800 0 0 4 &pic 14 /* INT D on slot 11 is irq 14 */
-		/* IDSEL 12 */
-		0x6000 0 0 1 &pic 16 /* INT A on slot 12 is irq 16 */
-		0x6000 0 0 2 &pic 13 /* INT B on slot 12 is irq 13 */
-		0x6000 0 0 3 &pic 14 /* INT C on slot 12 is irq 14 */
-		0x6000 0 0 4 &pic 15 /* INT D on slot 12 is irq 15 */
-		>;
-	};
-
 	fpga {
 		/*
 		 * The Integator/AP predates the idea to have magic numbers
@@ -118,36 +48,26 @@
 		rtc: rtc@15000000 {
 			compatible = "arm,pl030", "arm,primecell";
 			arm,primecell-periphid = <0x00041030>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		uart0: uart@16000000 {
 			compatible = "arm,pl010", "arm,primecell";
 			arm,primecell-periphid = <0x00041010>;
-			clocks = <&uartclk>, <&pclk>;
-			clock-names = "uartclk", "apb_pclk";
 		};
 
 		uart1: uart@17000000 {
 			compatible = "arm,pl010", "arm,primecell";
 			arm,primecell-periphid = <0x00041010>;
-			clocks = <&uartclk>, <&pclk>;
-			clock-names = "uartclk", "apb_pclk";
 		};
 
 		kmi0: kmi@18000000 {
 			compatible = "arm,pl050", "arm,primecell";
 			arm,primecell-periphid = <0x00041050>;
-			clocks = <&xtal24mhz>, <&pclk>;
-			clock-names = "KMIREFCLK", "apb_pclk";
 		};
 
 		kmi1: kmi@19000000 {
 			compatible = "arm,pl050", "arm,primecell";
 			arm,primecell-periphid = <0x00041050>;
-			clocks = <&xtal24mhz>, <&pclk>;
-			clock-names = "KMIREFCLK", "apb_pclk";
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/integratorcp.dts b/arch/arm/boot/dts/integratorcp.dts
--- a/arch/arm/boot/dts/integratorcp.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/integratorcp.dts	2015-10-27 00:45:05.000000000 +0000
@@ -13,107 +13,25 @@
 		bootargs = "root=/dev/ram0 console=ttyAMA0,38400n8 earlyprintk";
 	};
 
-	/*
-	 * The Integrator/CP overall clocking architecture can be found in
-	 * ARM DUI 0184B page 7-28 "Integrator/CP922T system clocks" which
-	 * appear to illustrate the layout used in most configurations.
-	 */
-
-	/* The codec chrystal operates at 24.576 MHz */
-	xtal_codec: xtal24.576@24.576M {
-		#clock-cells = <0>;
-		compatible = "fixed-clock";
-		clock-frequency = <24576000>;
-	};
-
-	/* The chrystal is divided by 2 by the codec for the AACI bit clock */
-	aaci_bitclk: aaci_bitclk@12.288M {
-		#clock-cells = <0>;
-		compatible = "fixed-factor-clock";
-		clock-div = <2>;
-		clock-mult = <1>;
-		clocks = <&xtal_codec>;
-	};
-
-	/* This is a 25MHz chrystal on the base board */
-	xtal25mhz: xtal25mhz@25M {
-		#clock-cells = <0>;
-		compatible = "fixed-clock";
-		clock-frequency = <25000000>;
-	};
-
-	/* The UART clock is 14.74 MHz divided from 25MHz by an ICS525 */
-	uartclk: uartclk@14.74M {
-		#clock-cells = <0>;
-		compatible = "fixed-clock";
-		clock-frequency = <14745600>;
-	};
-
-	/* Actually sysclk I think */
-	pclk: pclk@0 {
-		#clock-cells = <0>;
-		compatible = "fixed-clock";
-		clock-frequency = <0>;
-	};
-
-	core-module@10000000 {
-		/* 24 MHz chrystal on the core module */
-		xtal24mhz: xtal24mhz@24M {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <24000000>;
-		};
-
-		/*
-		 * External oscillator on the core module, usually used
-		 * to drive video circuitry. Driven from the 24MHz clock.
-		 */
-		auxosc: cm_aux_osc@25M {
-			#clock-cells = <0>;
-			compatible = "arm,integrator-cm-auxosc";
-			clocks = <&xtal24mhz>;
-		};
-
-		/* The KMI clock is the 24 MHz oscillator divided to 8MHz */
-		kmiclk: kmiclk@1M {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			clock-div = <3>;
-			clock-mult = <1>;
-			clocks = <&xtal24mhz>;
-		};
-
-		/* The timer clock is the 24 MHz oscillator divided to 1MHz */
-		timclk: timclk@1M {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			clock-div = <24>;
-			clock-mult = <1>;
-			clocks = <&xtal24mhz>;
-		};
-	};
-
-	syscon {
-		compatible = "arm,integrator-cp-syscon";
+	cpcon {
+		/* CP controller registers */
 		reg = <0xcb000000 0x100>;
 	};
 
 	timer0: timer@13000000 {
-		/* TIMER0 runs directly on the 25MHz chrystal */
+		/* TIMER0 runs @ 25MHz */
 		compatible = "arm,integrator-cp-timer";
-		clocks = <&xtal25mhz>;
+		status = "disabled";
 	};
 
 	timer1: timer@13000100 {
 		/* TIMER1 runs @ 1MHz */
 		compatible = "arm,integrator-cp-timer";
-		clocks = <&timclk>;
 	};
 
 	timer2: timer@13000200 {
 		/* TIMER2 runs @ 1MHz */
 		compatible = "arm,integrator-cp-timer";
-		clocks = <&timclk>;
 	};
 
 	pic: pic@14000000 {
@@ -129,11 +47,8 @@
 		valid-mask = <0x00000007>;
 	};
 
-	/* The SIC is cascaded off IRQ 26 on the PIC */
 	sic: sic@ca000000 {
 		compatible = "arm,versatile-fpga-irq";
-		interrupt-parent = <&pic>;
-		interrupts = <26>;
 		#interrupt-cells = <1>;
 		interrupt-controller;
 		reg = <0xca000000 0x100>;
@@ -156,32 +71,22 @@
 		 */
 		rtc@15000000 {
 			compatible = "arm,pl031", "arm,primecell";
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		uart@16000000 {
 			compatible = "arm,pl011", "arm,primecell";
-			clocks = <&uartclk>, <&pclk>;
-			clock-names = "uartclk", "apb_pclk";
 		};
 
 		uart@17000000 {
 			compatible = "arm,pl011", "arm,primecell";
-			clocks = <&uartclk>, <&pclk>;
-			clock-names = "uartclk", "apb_pclk";
 		};
 
 		kmi@18000000 {
 			compatible = "arm,pl050", "arm,primecell";
-			clocks = <&kmiclk>, <&pclk>;
-			clock-names = "KMIREFCLK", "apb_pclk";
 		};
 
 		kmi@19000000 {
 			compatible = "arm,pl050", "arm,primecell";
-			clocks = <&kmiclk>, <&pclk>;
-			clock-names = "KMIREFCLK", "apb_pclk";
 		};
 
 		/*
@@ -192,24 +97,18 @@
 			reg = <0x1c000000 0x1000>;
 			interrupts = <23 24>;
 			max-frequency = <515633>;
-			clocks = <&uartclk>, <&pclk>;
-			clock-names = "mclk", "apb_pclk";
 		};
 
 		aaci@1d000000 {
 			compatible = "arm,pl041", "arm,primecell";
 			reg = <0x1d000000 0x1000>;
 			interrupts = <25>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		clcd@c0000000 {
 			compatible = "arm,pl110", "arm,primecell";
 			reg = <0xC0000000 0x1000>;
 			interrupts = <22>;
-			clocks = <&auxosc>, <&pclk>;
-			clock-names = "clcd", "apb_pclk";
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/kirkwood-6281.dtsi b/arch/arm/boot/dts/kirkwood-6281.dtsi
--- a/arch/arm/boot/dts/kirkwood-6281.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-6281.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,43 +1,15 @@
 / {
-	mbus {
-		pciec: pcie-controller {
-			compatible = "marvell,kirkwood-pcie";
-			status = "disabled";
-			device_type = "pci";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-
-			bus-range = <0x00 0xff>;
-
-			ranges =
-			       <0x82000000 0 0x40000 MBUS_ID(0xf0, 0x01) 0x40000 0 0x00002000
-				0x82000000 0x1 0     MBUS_ID(0x04, 0xe8) 0       1 0 /* Port 0.0 MEM */
-				0x81000000 0x1 0     MBUS_ID(0x04, 0xe0) 0       1 0 /* Port 0.0 IO  */>;
-
-			pcie0: pcie@1,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x00040000 0 0x2000>;
-				reg = <0x0800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x1 0 1 0
-					  0x81000000 0 0 0x81000000 0x1 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &intc 9>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gate_clk 2>;
-				status = "disabled";
-			};
-		};
-	};
-
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
 			compatible = "marvell,88f6281-pinctrl";
+			reg = <0x10000 0x20>;
 
+			pmx_nand: pmx-nand {
+				marvell,pins = "mpp0", "mpp1", "mpp2", "mpp3",
+					       "mpp4", "mpp5", "mpp18",
+					       "mpp19";
+				marvell,function = "nand";
+			};
 			pmx_sata0: pmx-sata0 {
 				marvell,pins = "mpp5", "mpp21", "mpp23";
 				marvell,function = "sata0";
@@ -46,43 +18,27 @@
 				marvell,pins = "mpp4", "mpp20", "mpp22";
 				marvell,function = "sata1";
 			};
+			pmx_spi: pmx-spi {
+				marvell,pins = "mpp0", "mpp1", "mpp2", "mpp3";
+				marvell,function = "spi";
+			};
+			pmx_twsi0: pmx-twsi0 {
+				marvell,pins = "mpp8", "mpp9";
+				marvell,function = "twsi0";
+			};
+			pmx_uart0: pmx-uart0 {
+				marvell,pins = "mpp10", "mpp11";
+				marvell,function = "uart0";
+			};
+			pmx_uart1: pmx-uart1 {
+				marvell,pins = "mpp13", "mpp14";
+				marvell,function = "uart1";
+			};
 			pmx_sdio: pmx-sdio {
 				marvell,pins = "mpp12", "mpp13", "mpp14",
 					       "mpp15", "mpp16", "mpp17";
 				marvell,function = "sdio";
 			};
 		};
-
-		rtc: rtc@10300 {
-			compatible = "marvell,kirkwood-rtc", "marvell,orion-rtc";
-			reg = <0x10300 0x20>;
-			interrupts = <53>;
-			clocks = <&gate_clk 7>;
-		};
-
-		sata: sata@80000 {
-			compatible = "marvell,orion-sata";
-			reg = <0x80000 0x5000>;
-			interrupts = <21>;
-			clocks = <&gate_clk 14>, <&gate_clk 15>;
-			clock-names = "0", "1";
-			phys = <&sata_phy0>, <&sata_phy1>;
-			phy-names = "port0", "port1";
-			status = "disabled";
-		};
-
-		sdio: mvsdio@90000 {
-			compatible = "marvell,orion-sdio";
-			reg = <0x90000 0x200>;
-			interrupts = <28>;
-			clocks = <&gate_clk 4>;
-			pinctrl-0 = <&pmx_sdio>;
-			pinctrl-names = "default";
-			bus-width = <4>;
-			cap-sdio-irq;
-			cap-sd-highspeed;
-			cap-mmc-highspeed;
-			status = "disabled";
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/kirkwood-6282.dtsi b/arch/arm/boot/dts/kirkwood-6282.dtsi
--- a/arch/arm/boot/dts/kirkwood-6282.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-6282.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,63 +1,15 @@
 / {
-	mbus {
-		pciec: pcie-controller {
-			compatible = "marvell,kirkwood-pcie";
-			status = "disabled";
-			device_type = "pci";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-
-			bus-range = <0x00 0xff>;
-
-			ranges =
-			       <0x82000000 0 0x40000 MBUS_ID(0xf0, 0x01) 0x40000 0 0x00002000
-			        0x82000000 0 0x44000 MBUS_ID(0xf0, 0x01) 0x44000 0 0x00002000
-				0x82000000 0 0x80000 MBUS_ID(0xf0, 0x01) 0x80000 0 0x00002000
-				0x82000000 0x1 0     MBUS_ID(0x04, 0xe8) 0       1 0 /* Port 0.0 MEM */
-				0x81000000 0x1 0     MBUS_ID(0x04, 0xe0) 0       1 0 /* Port 0.0 IO  */
-				0x82000000 0x2 0     MBUS_ID(0x04, 0xd8) 0       1 0 /* Port 1.0 MEM */
-				0x81000000 0x2 0     MBUS_ID(0x04, 0xd0) 0       1 0 /* Port 1.0 IO  */>;
-
-			pcie0: pcie@1,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x00040000 0 0x2000>;
-				reg = <0x0800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x1 0 1 0
-					  0x81000000 0 0 0x81000000 0x1 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &intc 9>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gate_clk 2>;
-				status = "disabled";
-			};
-
-			pcie1: pcie@2,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82001000 0 0x00044000 0 0x2000>;
-				reg = <0x1000 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x2 0 1 0
-					  0x81000000 0 0 0x81000000 0x2 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &intc 10>;
-				marvell,pcie-port = <1>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gate_clk 18>;
-				status = "disabled";
-			};
-		};
-	};
 	ocp@f1000000 {
 
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
 			compatible = "marvell,88f6282-pinctrl";
+			reg = <0x10000 0x20>;
+
+			pmx_nand: pmx-nand {
+				marvell,pins = "mpp0", "mpp1", "mpp2", "mpp3",
+							"mpp4", "mpp5", "mpp18", "mpp19";
+				marvell,function = "nand";
+			};
 
 			pmx_sata0: pmx-sata0 {
 				marvell,pins = "mpp5", "mpp21", "mpp23";
@@ -67,16 +19,29 @@
 				marvell,pins = "mpp4", "mpp20", "mpp22";
 				marvell,function = "sata1";
 			};
+			pmx_spi: pmx-spi {
+				marvell,pins = "mpp0", "mpp1", "mpp2", "mpp3";
+				marvell,function = "spi";
+			};
+			pmx_twsi0: pmx-twsi0 {
+				marvell,pins = "mpp8", "mpp9";
+				marvell,function = "twsi0";
+			};
 
-			/*
-			 * Default I2C1 pinctrl setting on mpp36/mpp37,
-			 * overwrite marvell,pins on board level if required.
-			 */
 			pmx_twsi1: pmx-twsi1 {
 				marvell,pins = "mpp36", "mpp37";
 				marvell,function = "twsi1";
 			};
 
+			pmx_uart0: pmx-uart0 {
+				marvell,pins = "mpp10", "mpp11";
+				marvell,function = "uart0";
+			};
+
+			pmx_uart1: pmx-uart1 {
+				marvell,pins = "mpp13", "mpp14";
+				marvell,function = "uart1";
+			};
 			pmx_sdio: pmx-sdio {
 				marvell,pins = "mpp12", "mpp13", "mpp14",
 					       "mpp15", "mpp16", "mpp17";
@@ -84,20 +49,13 @@
 			};
 		};
 
-		thermal: thermal@10078 {
+		thermal@10078 {
 			compatible = "marvell,kirkwood-thermal";
 			reg = <0x10078 0x4>;
 			status = "okay";
 		};
 
-		rtc: rtc@10300 {
-			compatible = "marvell,kirkwood-rtc", "marvell,orion-rtc";
-			reg = <0x10300 0x20>;
-			interrupts = <53>;
-			clocks = <&gate_clk 7>;
-		};
-
-		i2c1: i2c@11100 {
+		i2c@11100 {
 			compatible = "marvell,mv64xxx-i2c";
 			reg = <0x11100 0x20>;
 			#address-cells = <1>;
@@ -105,33 +63,6 @@
 			interrupts = <32>;
 			clock-frequency = <100000>;
 			clocks = <&gate_clk 7>;
-			pinctrl-0 = <&pmx_twsi1>;
-			pinctrl-names = "default";
-			status = "disabled";
-		};
-
-		sata: sata@80000 {
-			compatible = "marvell,orion-sata";
-			reg = <0x80000 0x5000>;
-			interrupts = <21>;
-			clocks = <&gate_clk 14>, <&gate_clk 15>;
-			clock-names = "0", "1";
-			phys = <&sata_phy0>, <&sata_phy1>;
-			phy-names = "port0", "port1";
-			status = "disabled";
-		};
-
-		sdio: mvsdio@90000 {
-			compatible = "marvell,orion-sdio";
-			reg = <0x90000 0x200>;
-			interrupts = <28>;
-			clocks = <&gate_clk 4>;
-			pinctrl-0 = <&pmx_sdio>;
-			pinctrl-names = "default";
-			bus-width = <4>;
-			cap-sdio-irq;
-			cap-sd-highspeed;
-			cap-mmc-highspeed;
 			status = "disabled";
 		};
 	};
diff -urNp a/arch/arm/boot/dts/kirkwood-98dx4122.dtsi b/arch/arm/boot/dts/kirkwood-98dx4122.dtsi
--- a/arch/arm/boot/dts/kirkwood-98dx4122.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-98dx4122.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,51 +1,31 @@
 / {
-	mbus {
-		pciec: pcie-controller {
-			compatible = "marvell,kirkwood-pcie";
-			status = "disabled";
-			device_type = "pci";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-
-			bus-range = <0x00 0xff>;
-
-			ranges =
-			       <0x82000000 0 0x40000 MBUS_ID(0xf0, 0x01) 0x40000 0 0x00002000
-				0x82000000 0x1 0     MBUS_ID(0x04, 0xe8) 0       1 0 /* Port 0.0 MEM */
-				0x81000000 0x1 0     MBUS_ID(0x04, 0xe0) 0       1 0 /* Port 0.0 IO  */>;
-
-			pcie0: pcie@1,0 {
-				device_type = "pci";
-				assigned-addresses = <0x82000800 0 0x00040000 0 0x2000>;
-				reg = <0x0800 0 0 0 0>;
-				#address-cells = <3>;
-				#size-cells = <2>;
-				#interrupt-cells = <1>;
-				ranges = <0x82000000 0 0 0x82000000 0x1 0 1 0
-					  0x81000000 0 0 0x81000000 0x1 0 1 0>;
-				interrupt-map-mask = <0 0 0 0>;
-				interrupt-map = <0 0 0 0 &intc 9>;
-				marvell,pcie-port = <0>;
-				marvell,pcie-lane = <0>;
-				clocks = <&gate_clk 2>;
-				status = "disabled";
-			};
-		};
-	};
-
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
 			compatible = "marvell,98dx4122-pinctrl";
+			reg = <0x10000 0x20>;
 
+			pmx_nand: pmx-nand {
+				marvell,pins = "mpp0", "mpp1", "mpp2", "mpp3",
+					       "mpp4", "mpp5", "mpp18",
+					       "mpp19";
+				marvell,function = "nand";
+			};
+			pmx_spi: pmx-spi {
+				marvell,pins = "mpp0", "mpp1", "mpp2", "mpp3";
+				marvell,function = "spi";
+			};
+			pmx_twsi0: pmx-twsi0 {
+				marvell,pins = "mpp8", "mpp9";
+				marvell,function = "twsi0";
+			};
+			pmx_uart0: pmx-uart0 {
+				marvell,pins = "mpp10", "mpp11";
+				marvell,function = "uart0";
+			};
+			pmx_uart1: pmx-uart1 {
+				marvell,pins = "mpp13", "mpp14";
+				marvell,function = "uart1";
+			};
 		};
 	};
 };
-
-&sata_phy0 {
-	status = "disabled";
-};
-
-&sata_phy1 {
-	status = "disabled";
-};
diff -urNp a/arch/arm/boot/dts/kirkwood-cloudbox.dts b/arch/arm/boot/dts/kirkwood-cloudbox.dts
--- a/arch/arm/boot/dts/kirkwood-cloudbox.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-cloudbox.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	model = "LaCie CloudBox";
@@ -14,11 +14,14 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
+			pinctrl-0 = < &pmx_spi &pmx_uart0
+					&pmx_cloudbox_sata0 >;
+			pinctrl-names = "default";
+
 			pmx_cloudbox_sata0: pmx-cloudbox-sata0 {
 				marvell,pins = "mpp15";
 				marvell,function = "sata0";
@@ -26,12 +29,11 @@
 		};
 
 		serial@12000 {
+			clock-frequency = <166666667>;
 			status = "okay";
 		};
 
 		sata@80000 {
-			pinctrl-0 = <&pmx_cloudbox_sata0>;
-			pinctrl-names = "default";
 			status = "okay";
 			nr-ports = <1>;
 		};
@@ -42,7 +44,7 @@
 			flash@0 {
 				#address-cells = <1>;
 				#size-cells = <1>;
-				compatible = "mxicy,mx25l4005a";
+				compatible = "mx25l4005a";
 				reg = <0>;
 				spi-max-frequency = <20000000>;
 				mode = <0>;
@@ -62,8 +64,8 @@
 
 		button@1 {
 			label = "Power push button";
-			linux,code = <KEY_POWER>;
-			gpios = <&gpio0 16 GPIO_ACTIVE_LOW>;
+			linux,code = <116>;
+			gpios = <&gpio0 16 1>;
 		};
 	};
 
@@ -72,31 +74,16 @@
 
 		red-fail {
 			label = "cloudbox:red:fail";
-			gpios = <&gpio0 14 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 14 0>;
 		};
 		blue-sata {
 			label = "cloudbox:blue:sata";
-			gpios = <&gpio0 15 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 15 0>;
 		};
 	};
 
 	gpio_poweroff {
 		compatible = "gpio-poweroff";
-		gpios = <&gpio0 17 GPIO_ACTIVE_HIGH>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@0 {
-		reg = <0>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
+		gpios = <&gpio0 17 0>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/kirkwood-dns320.dts b/arch/arm/boot/dts/kirkwood-dns320.dts
--- a/arch/arm/boot/dts/kirkwood-dns320.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-dns320.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "kirkwood-dnskw.dtsi"
+/include/ "kirkwood-dnskw.dtsi"
 
 / {
 	model = "D-Link DNS-320 NAS (Rev A1)";
@@ -13,36 +13,30 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 	};
 
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = <&pmx_led_power &pmx_led_red_usb_320
-			     &pmx_led_red_left_hdd &pmx_led_red_right_hdd
-			     &pmx_led_white_usb>;
-		pinctrl-names = "default";
-
 		blue-power {
 			label = "dns320:blue:power";
-			gpios = <&gpio0 26 GPIO_ACTIVE_LOW>;
-			default-state = "keep";
+			gpios = <&gpio0 26 1>; /* GPIO 26 Active Low */
+			linux,default-trigger = "default-on";
 		};
 		blue-usb {
 			label = "dns320:blue:usb";
-			gpios = <&gpio1 11 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 11 1>; /* GPIO 43 Active Low */
 		};
 		orange-l_hdd {
 			label = "dns320:orange:l_hdd";
-			gpios = <&gpio0 28 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 28 1>; /* GPIO 28 Active Low */
 		};
 		orange-r_hdd {
 			label = "dns320:orange:r_hdd";
-			gpios = <&gpio0 27 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 27 1>; /* GPIO 27 Active Low */
 		};
 		orange-usb {
 			label = "dns320:orange:usb";
-			gpios = <&gpio1 3 GPIO_ACTIVE_LOW>; /* GPIO 35 */
+			gpios = <&gpio1 3 1>; /* GPIO 35 Active Low */
 		};
 	};
 
diff -urNp a/arch/arm/boot/dts/kirkwood-dns325.dts b/arch/arm/boot/dts/kirkwood-dns325.dts
--- a/arch/arm/boot/dts/kirkwood-dns325.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-dns325.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "kirkwood-dnskw.dtsi"
+/include/ "kirkwood-dnskw.dtsi"
 
 / {
 	model = "D-Link DNS-325 NAS (Rev A1)";
@@ -13,36 +13,30 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 	};
 
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = <&pmx_led_power &pmx_led_red_usb_325
-			     &pmx_led_red_left_hdd &pmx_led_red_right_hdd
-			     &pmx_led_white_usb>;
-		pinctrl-names = "default";
-
 		white-power {
 			label = "dns325:white:power";
-			gpios = <&gpio0 26 GPIO_ACTIVE_LOW>;
-			default-state = "keep";
+			gpios = <&gpio0 26 1>; /* GPIO 26 Active Low */
+			linux,default-trigger = "default-on";
 		};
 		white-usb {
 			label = "dns325:white:usb";
-			gpios = <&gpio1 11 GPIO_ACTIVE_LOW>; /* GPIO 43 */
+			gpios = <&gpio1 11 1>; /* GPIO 43 Active Low */
 		};
 		red-l_hdd {
 			label = "dns325:red:l_hdd";
-			gpios = <&gpio0 28 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 28 1>; /* GPIO 28 Active Low */
 		};
 		red-r_hdd {
 			label = "dns325:red:r_hdd";
-			gpios = <&gpio0 27 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 27 1>; /* GPIO 27 Active Low */
 		};
 		red-usb {
 			label = "dns325:red:usb";
-			gpios = <&gpio0 29 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 29 1>; /* GPIO 29 Active Low */
 		};
 	};
 
diff -urNp a/arch/arm/boot/dts/kirkwood-dnskw.dtsi b/arch/arm/boot/dts/kirkwood-dnskw.dtsi
--- a/arch/arm/boot/dts/kirkwood-dnskw.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-dnskw.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,5 +1,5 @@
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	model = "D-Link DNS NASes (kirkwood-based)";
@@ -9,34 +9,28 @@
 		compatible = "gpio-keys";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_button_power &pmx_button_unmount
-			     &pmx_button_reset>;
-		pinctrl-names = "default";
-
 		button@1 {
 			label = "Power button";
-			linux,code = <KEY_POWER>;
-			gpios = <&gpio1 2 GPIO_ACTIVE_LOW>;
+			linux,code = <116>;
+			gpios = <&gpio1 2 1>;
 		};
 		button@2 {
 			label = "USB unmount button";
-			linux,code = <KEY_EJECTCD>;
-			gpios = <&gpio1 15 GPIO_ACTIVE_LOW>;
+			linux,code = <161>;
+			gpios = <&gpio1 15 1>;
 		};
 		button@3 {
 			label = "Reset button";
-			linux,code = <KEY_RESTART>;
-			gpios = <&gpio1 16 GPIO_ACTIVE_LOW>;
+			linux,code = <0x198>;
+			gpios = <&gpio1 16 1>;
 		};
 	};
 
 	gpio_fan {
 		/* Fan: ADDA AD045HB-G73 40mm 6000rpm@5v */
 		compatible = "gpio-fan";
-		pinctrl-0 = <&pmx_fan_high_speed &pmx_fan_low_speed>;
-		pinctrl-names = "default";
-		gpios = <&gpio1 14 GPIO_ACTIVE_LOW
-			 &gpio1 13 GPIO_ACTIVE_LOW>;
+		gpios = <&gpio1 14 1
+			 &gpio1 13 1>;
 		gpio-fan,speed-map = <0    0
 				      3000 1
 				      6000 2>;
@@ -44,17 +38,27 @@
 
 	gpio_poweroff {
 		compatible = "gpio-poweroff";
-		pinctrl-0 = <&pmx_power_off>;
-		pinctrl-names = "default";
-		gpios = <&gpio1 4 GPIO_ACTIVE_HIGH>;
+		gpios = <&gpio1 4 0>;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
 
-			pinctrl-0 = <&pmx_power_back_on &pmx_present_sata0
-				     &pmx_present_sata1 &pmx_fan_tacho
-				     &pmx_temp_alarm>;
+			pinctrl-0 = < &pmx_nand &pmx_uart1
+				      &pmx_sata0 &pmx_sata1
+				      &pmx_led_power
+				      &pmx_led_red_right_hdd
+				      &pmx_led_red_left_hdd
+				      &pmx_led_red_usb_325
+				      &pmx_button_power
+				      &pmx_led_red_usb_320
+				      &pmx_power_off &pmx_power_back_on
+				      &pmx_power_sata0 &pmx_power_sata1
+				      &pmx_present_sata0 &pmx_present_sata1
+				      &pmx_led_white_usb &pmx_fan_tacho
+				      &pmx_fan_high_speed &pmx_fan_low_speed
+				      &pmx_button_unmount &pmx_button_reset
+				      &pmx_temp_alarm >;
 			pinctrl-names = "default";
 
 			pmx_sata0: pmx-sata0 {
@@ -143,19 +147,51 @@
 			};
 		};
 		sata@80000 {
-			pinctrl-0 = <&pmx_sata0 &pmx_sata1>;
-			pinctrl-names = "default";
 			status = "okay";
 			nr-ports = <2>;
 		};
+
+		nand@3000000 {
+			status = "okay";
+			chip-delay = <35>;
+
+			partition@0 {
+				label = "u-boot";
+				reg = <0x0000000 0x100000>;
+				read-only;
+			};
+
+			partition@100000 {
+				label = "uImage";
+				reg = <0x0100000 0x500000>;
+			};
+
+			partition@600000 {
+				label = "ramdisk";
+				reg = <0x0600000 0x500000>;
+			};
+
+			partition@b00000 {
+				label = "image";
+				reg = <0x0b00000 0x6600000>;
+			};
+
+			partition@7100000 {
+				label = "mini firmware";
+				reg = <0x7100000 0xa00000>;
+			};
+
+			partition@7b00000 {
+				label = "config";
+				reg = <0x7b00000 0x500000>;
+			};
+		};
 	};
 
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_power_sata0 &pmx_power_sata1>;
-		pinctrl-names = "default";
 
 		sata0_power: regulator@1 {
 			compatible = "regulator-fixed";
@@ -181,54 +217,3 @@
 		};
 	};
 };
-
-&nand {
-	status = "okay";
-	chip-delay = <35>;
-
-	partition@0 {
-		label = "u-boot";
-		reg = <0x0000000 0x100000>;
-		read-only;
-	};
-
-	partition@100000 {
-		label = "uImage";
-		reg = <0x0100000 0x500000>;
-	};
-
-	partition@600000 {
-		label = "ramdisk";
-		reg = <0x0600000 0x500000>;
-	};
-
-	partition@b00000 {
-		label = "image";
-		reg = <0x0b00000 0x6600000>;
-	};
-
-	partition@7100000 {
-		label = "mini firmware";
-		reg = <0x7100000 0xa00000>;
-	};
-
-	partition@7b00000 {
-		label = "config";
-		reg = <0x7b00000 0x500000>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@8 {
-		reg = <8>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
-};
diff -urNp a/arch/arm/boot/dts/kirkwood-dockstar.dts b/arch/arm/boot/dts/kirkwood-dockstar.dts
--- a/arch/arm/boot/dts/kirkwood-dockstar.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-dockstar.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	model = "Seagate FreeAgent Dockstar";
@@ -14,11 +14,15 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk root=/dev/sda1 rootdelay=10";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
+
+			pinctrl-0 = < &pmx_usb_power_enable
+				      &pmx_led_green &pmx_led_orange >;
+			pinctrl-names = "default";
+
 			pmx_usb_power_enable: pmx-usb-power-enable {
 				marvell,pins = "mpp29";
 				marvell,function = "gpio";
@@ -35,28 +39,44 @@
 		serial@12000 {
 			status = "ok";
 		};
+
+		nand@3000000 {
+			status = "okay";
+
+			partition@0 {
+				label = "u-boot";
+				reg = <0x0000000 0x100000>;
+				read-only;
+			};
+
+			partition@100000 {
+				label = "uImage";
+				reg = <0x0100000 0x400000>;
+			};
+
+			partition@500000 {
+				label = "data";
+				reg = <0x0500000 0xfb00000>;
+			};
+		};
 	};
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = <&pmx_led_green &pmx_led_orange>;
-		pinctrl-names = "default";
 
 		health {
 			label = "status:green:health";
-			gpios = <&gpio1 14 GPIO_ACTIVE_LOW>;
-			default-state = "keep";
+			gpios = <&gpio1 14 1>;
+			linux,default-trigger = "default-on";
 		};
 		fault {
 			label = "status:orange:fault";
-			gpios = <&gpio1 15 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 15 1>;
 		};
 	};
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_usb_power_enable>;
-		pinctrl-names = "default";
 
 		usb_power: regulator@1 {
 			compatible = "regulator-fixed";
@@ -71,39 +91,3 @@
 		};
 	};
 };
-
-&nand {
-	status = "okay";
-
-	partition@0 {
-		label = "u-boot";
-		reg = <0x0000000 0x100000>;
-		read-only;
-	};
-
-	partition@100000 {
-		label = "uImage";
-		reg = <0x0100000 0x400000>;
-	};
-
-	partition@500000 {
-		label = "data";
-		reg = <0x0500000 0xfb00000>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@0 {
-		compatible = "marvell,88e1116";
-		reg = <0>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
-};
diff -urNp a/arch/arm/boot/dts/kirkwood-dreamplug.dts b/arch/arm/boot/dts/kirkwood-dreamplug.dts
--- a/arch/arm/boot/dts/kirkwood-dreamplug.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-dreamplug.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	model = "Globalscale Technologies Dreamplug";
@@ -14,11 +14,16 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
+
+			pinctrl-0 = < &pmx_spi
+				      &pmx_led_bluetooth &pmx_led_wifi
+				      &pmx_led_wifi_ap >;
+			pinctrl-names = "default";
+
 			pmx_led_bluetooth: pmx-led-bluetooth {
 				marvell,pins = "mpp47";
 				marvell,function = "gpio";
@@ -42,7 +47,7 @@
 			m25p40@0 {
 				#address-cells = <1>;
 				#size-cells = <1>;
-				compatible = "mxicy,mx25l1606e";
+				compatible = "mx25l1606e";
 				reg = <0>;
 				spi-max-frequency = <50000000>;
 				mode = <0>;
@@ -74,53 +79,23 @@
 			pinctrl-names = "default";
 			status = "okay";
 			/* No CD or WP GPIOs */
-			broken-cd;
 		};
 	};
 
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = <&pmx_led_bluetooth &pmx_led_wifi
-			     &pmx_led_wifi_ap >;
-		pinctrl-names = "default";
 
 		bluetooth {
 			label = "dreamplug:blue:bluetooth";
-			gpios = <&gpio1 15 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 15 1>;
 		};
 		wifi {
 			label = "dreamplug:green:wifi";
-			gpios = <&gpio1 16 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 16 1>;
 		};
 		wifi-ap {
 			label = "dreamplug:green:wifi_ap";
-			gpios = <&gpio1 17 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 17 1>;
 		};
 	};
 };
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@0 {
-		reg = <0>;
-	};
-
-	ethphy1: ethernet-phy@1 {
-		reg = <1>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
-};
-
-&eth1 {
-	status = "okay";
-	ethernet1-port@0 {
-		phy-handle = <&ethphy1>;
-	};
-};
diff -urNp a/arch/arm/boot/dts/kirkwood-goflexnet.dts b/arch/arm/boot/dts/kirkwood-goflexnet.dts
--- a/arch/arm/boot/dts/kirkwood-goflexnet.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-goflexnet.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	model = "Seagate GoFlex Net";
@@ -14,11 +14,19 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk root=/dev/sda1 rootdelay=10";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
+
+			pinctrl-0 = < &pmx_usb_power_enable &pmx_led_orange
+				      &pmx_led_left_cap_0 &pmx_led_left_cap_1
+				      &pmx_led_left_cap_2 &pmx_led_left_cap_3
+				      &pmx_led_right_cap_0 &pmx_led_right_cap_1
+				      &pmx_led_right_cap_2 &pmx_led_right_cap_3
+				    >;
+			pinctrl-names = "default";
+
 			pmx_usb_power_enable: pmx-usb-power-enable {
 				marvell,pins = "mpp29";
 				marvell,function = "gpio";
@@ -68,6 +76,31 @@
 			status = "ok";
 		};
 
+		nand@3000000 {
+			chip-delay = <40>;
+			status = "okay";
+
+			partition@0 {
+				label = "u-boot";
+				reg = <0x0000000 0x100000>;
+				read-only;
+			};
+
+			partition@100000 {
+				label = "uImage";
+				reg = <0x0100000 0x400000>;
+			};
+
+			partition@500000 {
+				label = "pogoplug";
+				reg = <0x0500000 0x2000000>;
+			};
+
+			partition@2500000 {
+				label = "root";
+				reg = <0x02500000 0xd800000>;
+			};
+		};
 		sata@80000 {
 			status = "okay";
 			nr-ports = <2>;
@@ -76,62 +109,53 @@
 	};
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = < &pmx_led_orange
-			      &pmx_led_left_cap_0 &pmx_led_left_cap_1
-			      &pmx_led_left_cap_2 &pmx_led_left_cap_3
-			      &pmx_led_right_cap_0 &pmx_led_right_cap_1
-			      &pmx_led_right_cap_2 &pmx_led_right_cap_3
-			    >;
-		pinctrl-names = "default";
 
 		health {
 			label = "status:green:health";
-			gpios = <&gpio1 14 GPIO_ACTIVE_LOW>;
-			default-state = "keep";
+			gpios = <&gpio1 14 1>;
+			linux,default-trigger = "default-on";
 		};
 		fault {
 			label = "status:orange:fault";
-			gpios = <&gpio1 15 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 15 1>;
 		};
 		left0 {
 			label = "status:white:left0";
-			gpios = <&gpio1 10 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 10 0>;
 		};
 		left1 {
 			label = "status:white:left1";
-			gpios = <&gpio1 11 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 11 0>;
 		};
 		left2 {
 			label = "status:white:left2";
-			gpios = <&gpio1 12 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 12 0>;
 		};
 		left3 {
 			label = "status:white:left3";
-			gpios = <&gpio1 13 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 13 0>;
 		};
 		right0 {
 			label = "status:white:right0";
-			gpios = <&gpio1 6 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 6 0>;
 		};
 		right1 {
 			label = "status:white:right1";
-			gpios = <&gpio1 7 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 7 0>;
 		};
 		right2 {
 			label = "status:white:right2";
-			gpios = <&gpio1 8 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 8 0>;
 		};
 		right3 {
 			label = "status:white:right3";
-			gpios = <&gpio1 9 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 9 0>;
 		};
 	};
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_usb_power_enable>;
-		pinctrl-names = "default";
 
 		usb_power: regulator@1 {
 			compatible = "regulator-fixed";
@@ -142,48 +166,7 @@
 			enable-active-high;
 			regulator-always-on;
 			regulator-boot-on;
-			gpio = <&gpio0 29 GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio0 29 0>;
 		};
 	};
 };
-
-&nand {
-	chip-delay = <40>;
-	status = "okay";
-
-	partition@0 {
-		label = "u-boot";
-		reg = <0x0000000 0x100000>;
-		read-only;
-	};
-
-	partition@100000 {
-		label = "uImage";
-		reg = <0x0100000 0x400000>;
-	};
-
-	partition@500000 {
-		label = "pogoplug";
-		reg = <0x0500000 0x2000000>;
-	};
-
-	partition@2500000 {
-		label = "root";
-		reg = <0x02500000 0xd800000>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@0 {
-		reg = <0>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
-};
diff -urNp a/arch/arm/boot/dts/kirkwood-guruplug-server-plus.dts b/arch/arm/boot/dts/kirkwood-guruplug-server-plus.dts
--- a/arch/arm/boot/dts/kirkwood-guruplug-server-plus.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-guruplug-server-plus.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	model = "Globalscale Technologies Guruplug Server Plus";
@@ -14,11 +14,15 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
+
+			pinctrl-0 = < &pmx_led_health_r &pmx_led_health_g
+				      &pmx_led_wmode_r &pmx_led_wmode_g >;
+			pinctrl-names = "default";
+
 			pmx_led_health_r: pmx-led-health-r {
 				marvell,pins = "mpp46";
 				marvell,function = "gpio";
@@ -37,96 +41,58 @@
 			};
 		};
 		serial@12000 {
+			clock-frequency = <200000000>;
 			status = "ok";
 		};
 
+		nand@3000000 {
+			status = "okay";
+
+			partition@0 {
+				label = "u-boot";
+				reg = <0x00000000 0x00100000>;
+				read-only;
+			};
+
+			partition@100000 {
+				label = "uImage";
+				reg = <0x00100000 0x00400000>;
+			};
+
+			partition@500000 {
+				label = "data";
+				reg = <0x00500000 0x1fb00000>;
+			};
+		};
+
 		sata@80000 {
 			status = "okay";
 			nr-ports = <1>;
 		};
 
-		/* AzureWave AW-GH381 WiFi/BT */
 		mvsdio@90000 {
 			status = "okay";
-			non-removable;
 		};
 	};
 
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = < &pmx_led_health_r &pmx_led_health_g
-			      &pmx_led_wmode_r &pmx_led_wmode_g >;
-		pinctrl-names = "default";
 
 		health-r {
 			label = "guruplug:red:health";
-			gpios = <&gpio1 14 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 14 1>;
 		};
 		health-g {
 			label = "guruplug:green:health";
-			gpios = <&gpio1 15 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 15 1>;
 		};
 		wmode-r {
 			label = "guruplug:red:wmode";
-			gpios = <&gpio1 16 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 16 1>;
 		};
 		wmode-g {
 			label = "guruplug:green:wmode";
-			gpios = <&gpio1 17 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 17 1>;
 		};
 	};
 };
-
-&nand {
-	status = "okay";
-
-	partition@0 {
-		label = "u-boot";
-		reg = <0x00000000 0x00100000>;
-		read-only;
-	};
-
-	partition@100000 {
-		label = "uImage";
-		reg = <0x00100000 0x00400000>;
-	};
-
-	partition@500000 {
-		label = "data";
-		reg = <0x00500000 0x1fb00000>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@0 {
-		/* Marvell 88E1121R */
-		compatible = "ethernet-phy-id0141.0cb0",
-		             "ethernet-phy-ieee802.3-c22";
-		reg = <0>;
-	};
-
-	ethphy1: ethernet-phy@1 {
-		/* Marvell 88E1121R */
-		compatible = "ethernet-phy-id0141.0cb0",
-		             "ethernet-phy-ieee802.3-c22";
-		reg = <1>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-		phy-connection-type = "rgmii-id";
-	};
-};
-
-&eth1 {
-	status = "okay";
-	ethernet1-port@0 {
-		phy-handle = <&ethphy1>;
-		phy-connection-type = "rgmii-id";
-	};
-};
diff -urNp a/arch/arm/boot/dts/kirkwood-ib62x0.dts b/arch/arm/boot/dts/kirkwood-ib62x0.dts
--- a/arch/arm/boot/dts/kirkwood-ib62x0.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-ib62x0.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,11 +1,11 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	model = "RaidSonic ICY BOX IB-NAS62x0 (Rev B)";
-	compatible = "raidsonic,ib-nas6210-b", "raidsonic,ib-nas6220-b", "raidsonic,ib-nas6210", "raidsonic,ib-nas6220", "raidsonic,ib-nas62x0", "marvell,kirkwood-88f6281", "marvell,kirkwood";
+	compatible = "raidsonic,ib-nas6210-b", "raidsonic,ib-nas6220-b", "raidsonic,ib-nas6210", "raidsonic,ib-nas6220", "raidsonic,ib-nas62x0",  "marvell,kirkwood-88f6281", "marvell,kirkwood";
 
 	memory {
 		device_type = "memory";
@@ -14,11 +14,17 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
+
+			pinctrl-0 = < &pmx_nand
+				      &pmx_led_os_red &pmx_power_off
+				      &pmx_led_os_green &pmx_led_usb_transfer
+				      &pmx_button_reset &pmx_button_usb_copy >;
+			pinctrl-names = "default";
+
 			pmx_led_os_red: pmx-led-os-red {
 				marvell,pins = "mpp22";
 				marvell,function = "gpio";
@@ -44,7 +50,6 @@
 				marvell,function = "gpio";
 			};
 		};
-
 		serial@12000 {
 			status = "okay";
 		};
@@ -53,93 +58,64 @@
 			status = "okay";
 			nr-ports = <2>;
 		};
+
+		nand@3000000 {
+			status = "okay";
+
+			partition@0 {
+				label = "u-boot";
+				reg = <0x0000000 0x100000>;
+			};
+
+			partition@100000 {
+				label = "uImage";
+				reg = <0x0100000 0x600000>;
+			};
+
+			partition@700000 {
+				label = "root";
+				reg = <0x0700000 0xf900000>;
+			};
+
+		};
 	};
 
 	gpio_keys {
 		compatible = "gpio-keys";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_button_reset &pmx_button_usb_copy>;
-		pinctrl-names = "default";
-
 		button@1 {
 			label = "USB Copy";
-			linux,code = <KEY_COPY>;
-			gpios = <&gpio0 29 GPIO_ACTIVE_LOW>;
+			linux,code = <133>;
+			gpios = <&gpio0 29 1>;
 		};
 		button@2 {
 			label = "Reset";
-			linux,code = <KEY_RESTART>;
-			gpios = <&gpio0 28 GPIO_ACTIVE_LOW>;
+			linux,code = <0x198>;
+			gpios = <&gpio0 28 1>;
 		};
 	};
-
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = <&pmx_led_os_red &pmx_led_os_green
-			     &pmx_led_usb_transfer>;
-		pinctrl-names = "default";
 
 		green-os {
 			label = "ib62x0:green:os";
-			gpios = <&gpio0 25 GPIO_ACTIVE_HIGH>;
-			default-state = "keep";
+			gpios = <&gpio0 25 0>;
+			linux,default-trigger = "default-on";
 		};
 		red-os {
 			label = "ib62x0:red:os";
-			gpios = <&gpio0 22 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 22 0>;
 		};
 		usb-copy {
 			label = "ib62x0:red:usb_copy";
-			gpios = <&gpio0 27 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 27 0>;
 		};
 	};
-
 	gpio_poweroff {
 		compatible = "gpio-poweroff";
-		pinctrl-0 = <&pmx_power_off>;
-		pinctrl-names = "default";
-		gpios = <&gpio0 24 GPIO_ACTIVE_HIGH>;
+		gpios = <&gpio0 24 0>;
 	};
-};
 
-&nand {
-	status = "okay";
 
-	partition@0 {
-		label = "u-boot";
-		reg = <0x0000000 0xe0000>;
-	};
-
-	partition@e0000 {
-		label = "u-boot environment";
-		reg = <0xe0000 0x100000>;
-	};
-
-	partition@100000 {
-		label = "uImage";
-		reg = <0x0100000 0x600000>;
-	};
-
-	partition@700000 {
-		label = "root";
-		reg = <0x0700000 0xf900000>;
-	};
-
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@8 {
-		reg = <8>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/kirkwood-iconnect.dts b/arch/arm/boot/dts/kirkwood-iconnect.dts
--- a/arch/arm/boot/dts/kirkwood-iconnect.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-iconnect.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	model = "Iomega Iconnect";
@@ -14,60 +14,57 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 		linux,initrd-start = <0x4500040>;
 		linux,initrd-end   = <0x4800000>;
 	};
 
-	mbus {
-		pcie-controller {
-			status = "okay";
+	ocp@f1000000 {
+		pinctrl: pinctrl@10000 {
 
-			pcie@1,0 {
-				status = "okay";
-			};
-		};
-	};
+			pinctrl-0 = < &pmx_gpio_12 &pmx_gpio_35
+				      &pmx_gpio_41 &pmx_gpio_42
+				      &pmx_gpio_43 &pmx_gpio_44
+				      &pmx_gpio_45 &pmx_gpio_46
+				      &pmx_gpio_47 &pmx_gpio_48 >;
+			pinctrl-names = "default";
 
-	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
-			pmx_button_reset: pmx-button-reset {
+			pmx_gpio_12: pmx-gpio-12 {
 				marvell,pins = "mpp12";
 				marvell,function = "gpio";
 			};
-			pmx_button_otb: pmx-button-otb {
+			pmx_gpio_35: pmx-gpio-35 {
 				marvell,pins = "mpp35";
 				marvell,function = "gpio";
 			};
-			pmx_led_level: pmx-led-level {
+			pmx_gpio_41: pmx-gpio-41 {
 				marvell,pins = "mpp41";
 				marvell,function = "gpio";
 			};
-			pmx_led_power_blue: pmx-led-power-blue {
+			pmx_gpio_42: pmx-gpio-42 {
 				marvell,pins = "mpp42";
 				marvell,function = "gpio";
 			};
-			pmx_led_power_red: pmx-power-red {
+			pmx_gpio_43: pmx-gpio-43 {
 				marvell,pins = "mpp43";
 				marvell,function = "gpio";
 			};
-			pmx_led_usb1: pmx-led-usb1 {
+			pmx_gpio_44: pmx-gpio-44 {
 				marvell,pins = "mpp44";
 				marvell,function = "gpio";
 			};
-			pmx_led_usb2: pmx-led-usb2 {
+			pmx_gpio_45: pmx-gpio-45 {
 				marvell,pins = "mpp45";
 				marvell,function = "gpio";
 			};
-			pmx_led_usb3: pmx-led-usb3 {
+			pmx_gpio_46: pmx-gpio-46 {
 				marvell,pins = "mpp46";
 				marvell,function = "gpio";
 			};
-			pmx_led_usb4: pmx-led-usb4 {
+			pmx_gpio_47: pmx-gpio-47 {
 				marvell,pins = "mpp47";
 				marvell,function = "gpio";
 			};
-			pmx_led_otb: pmx-led-otb {
+			pmx_gpio_48: pmx-gpio-48 {
 				marvell,pins = "mpp48";
 				marvell,function = "gpio";
 			};
@@ -83,49 +80,73 @@
 		serial@12000 {
 			status = "ok";
 		};
+
+		nand@3000000 {
+			status = "okay";
+
+			partition@0 {
+				label = "uboot";
+				reg = <0x0000000 0xc0000>;
+			};
+
+			partition@a0000 {
+				label = "env";
+				reg = <0xa0000 0x20000>;
+			};
+
+			partition@100000 {
+				label = "zImage";
+				reg = <0x100000 0x300000>;
+			};
+
+			partition@540000 {
+				label = "initrd";
+				reg = <0x540000 0x300000>;
+			};
+
+			partition@980000 {
+				label = "boot";
+				reg = <0x980000 0x1f400000>;
+			};
+		};
 	};
 
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = < &pmx_led_level &pmx_led_power_blue
-			      &pmx_led_power_red &pmx_led_usb1
-			      &pmx_led_usb2 &pmx_led_usb3
-			      &pmx_led_usb4 &pmx_led_otb >;
-		pinctrl-names = "default";
 
 		led-level {
 			label = "led_level";
-			gpios = <&gpio1 9 GPIO_ACTIVE_HIGH>;
-			default-state = "on";
+			gpios = <&gpio1 9 0>;
+			linux,default-trigger = "default-on";
 		};
 		power-blue {
 			label = "power:blue";
-			gpios = <&gpio1 10 GPIO_ACTIVE_HIGH>;
-			default-state = "keep";
+			gpios = <&gpio1 10 0>;
+			linux,default-trigger = "timer";
 		};
 		power-red {
 			label = "power:red";
-			gpios = <&gpio1 11 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 11 0>;
 		};
 		usb1 {
 			label = "usb1:blue";
-			gpios = <&gpio1 12 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 12 0>;
 		};
 		usb2 {
 			label = "usb2:blue";
-			gpios = <&gpio1 13 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 13 0>;
 		};
 		usb3 {
 			label = "usb3:blue";
-			gpios = <&gpio1 14 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 14 0>;
 		};
 		usb4 {
 			label = "usb4:blue";
-			gpios = <&gpio1 15 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 15 0>;
 		};
 		otb {
 			label = "otb:blue";
-			gpios = <&gpio1 16 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 16 0>;
 		};
 	};
 
@@ -133,64 +154,17 @@
 		compatible = "gpio-keys";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = < &pmx_button_reset &pmx_button_otb >;
-		pinctrl-names = "default";
-
 		button@1 {
 			label = "OTB Button";
-			linux,code = <KEY_COPY>;
-			gpios = <&gpio1 3 GPIO_ACTIVE_LOW>;
+			linux,code = <133>;
+			gpios = <&gpio1 3 1>;
 			debounce-interval = <100>;
 		};
 		button@2 {
 			label = "Reset";
-			linux,code = <KEY_RESTART>;
-			gpios = <&gpio0 12 GPIO_ACTIVE_LOW>;
+			linux,code = <0x198>;
+			gpios = <&gpio0 12 1>;
 			debounce-interval = <100>;
 		};
 	};
 };
-
-&nand {
-	status = "okay";
-
-	partition@0 {
-		label = "uboot";
-		reg = <0x0000000 0xc0000>;
-	};
-
-	partition@a0000 {
-		label = "env";
-		reg = <0xa0000 0x20000>;
-	};
-
-	partition@100000 {
-		label = "zImage";
-		reg = <0x100000 0x300000>;
-	};
-
-	partition@540000 {
-		label = "initrd";
-		reg = <0x540000 0x300000>;
-	};
-
-	partition@980000 {
-		label = "boot";
-		reg = <0x980000 0x1f400000>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@11 {
-		reg = <11>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
-};
diff -urNp a/arch/arm/boot/dts/kirkwood-iomega_ix2_200.dts b/arch/arm/boot/dts/kirkwood-iomega_ix2_200.dts
--- a/arch/arm/boot/dts/kirkwood-iomega_ix2_200.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-iomega_ix2_200.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	model = "Iomega StorCenter ix2-200";
@@ -14,12 +14,16 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
-			pinctrl-0 = < &pmx_led_sata_brt_ctrl_1
+		pinctrl: pinctrl@10000 {
+
+			pinctrl-0 = < &pmx_button_reset &pmx_button_power
+				      &pmx_led_backup &pmx_led_power
+				      &pmx_button_otb &pmx_led_rebuild
+				      &pmx_led_health
+				      &pmx_led_sata_brt_ctrl_1
 				      &pmx_led_sata_brt_ctrl_2
 				      &pmx_led_backup_brt_ctrl_1
 				      &pmx_led_backup_brt_ctrl_2
@@ -114,6 +118,31 @@
 			status = "ok";
 		};
 
+		nand@3000000 {
+			status = "okay";
+
+			partition@0 {
+				label = "u-boot";
+				reg = <0x0000000 0x100000>;
+				read-only;
+			};
+
+			partition@a0000 {
+				label = "env";
+				reg = <0xa0000 0x20000>;
+				read-only;
+			};
+
+			partition@100000 {
+				label = "uImage";
+				reg = <0x100000 0x300000>;
+			};
+
+			partition@400000 {
+				label = "uInitrd";
+				reg = <0x540000 0x1000000>;
+			};
+		};
 		sata@80000 {
 			status = "okay";
 			nr-ports = <2>;
@@ -122,104 +151,43 @@
 	};
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = < &pmx_led_backup &pmx_led_power
-			      &pmx_led_rebuild &pmx_led_health >;
-		pinctrl-names = "default";
 
 		power_led {
 			label = "status:white:power_led";
-			gpios = <&gpio0 16 GPIO_ACTIVE_HIGH>;
-			default-state = "keep";
+			gpios = <&gpio0 16 0>;
+			linux,default-trigger = "default-on";
 		};
 		rebuild_led {
 			label = "status:white:rebuild_led";
-			gpios = <&gpio1 4 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 4 0>;
 		};
 		health_led {
 			label = "status:red:health_led";
-			gpios = <&gpio1 5 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 5 0>;
 		};
 		backup_led {
 			label = "status:blue:backup_led";
-			gpios = <&gpio0 15 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 15 0>;
 		};
 	};
 	gpio-keys {
 		compatible = "gpio-keys";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_button_reset &pmx_button_power
-			     &pmx_button_otb>;
-		pinctrl-names = "default";
-
-
 		Power {
 			label = "Power Button";
-			linux,code = <KEY_POWER>;
-			gpios = <&gpio0 14 GPIO_ACTIVE_LOW>;
+			linux,code = <116>;
+			gpios = <&gpio0 14 1>;
 		};
 		Reset {
 			label = "Reset Button";
-			linux,code = <KEY_RESTART>;
-			gpios = <&gpio0 12 GPIO_ACTIVE_LOW>;
+			linux,code = <0x198>;
+			gpios = <&gpio0 12 1>;
 		};
 		OTB {
 			label = "OTB Button";
-			linux,code = <KEY_COPY>;
-			gpios = <&gpio1 3 GPIO_ACTIVE_LOW>;
+			linux,code = <133>;
+			gpios = <&gpio1 3 1>;
 		};
 	};
-	gpio-poweroff {
-		compatible = "gpio-poweroff";
-		gpios = <&gpio0 17 GPIO_ACTIVE_LOW>;
-	};
-};
-
-&nand {
-	status = "okay";
-
-	partition@0 {
-		label = "u-boot";
-		reg = <0x0000000 0x100000>;
-		read-only;
-	};
-
-	partition@a0000 {
-		label = "env";
-		reg = <0xa0000 0x20000>;
-		read-only;
-	};
-
-	partition@100000 {
-		label = "uImage";
-		reg = <0x100000 0x300000>;
-	};
-
-	partition@400000 {
-		label = "rootfs";
-		reg = <0x400000 0x1C00000>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy1: ethernet-phy@11 {
-		reg = <11>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		speed = <1000>;
-		duplex = <1>;
-	};
-};
-
-&eth1 {
-	status = "okay";
-	ethernet1-port@0 {
-		phy-handle = <&ethphy1>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/kirkwood-is2.dts b/arch/arm/boot/dts/kirkwood-is2.dts
--- a/arch/arm/boot/dts/kirkwood-is2.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-is2.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "kirkwood-ns2-common.dtsi"
+/include/ "kirkwood-ns2-common.dtsi"
 
 / {
 	model = "LaCie Internet Space v2";
@@ -13,8 +13,6 @@
 
 	ocp@f1000000 {
 		sata@80000 {
-			pinctrl-0 = <&pmx_ns2_sata0>;
-			pinctrl-names = "default";
 			status = "okay";
 			nr-ports = <1>;
 		};
@@ -30,5 +28,3 @@
 		};
 	};
 };
-
-&ethphy0 { reg = <8>; };
diff -urNp a/arch/arm/boot/dts/kirkwood-km_kirkwood.dts b/arch/arm/boot/dts/kirkwood-km_kirkwood.dts
--- a/arch/arm/boot/dts/kirkwood-km_kirkwood.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-km_kirkwood.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,8 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-98dx4122.dtsi"
-#include "kirkwood-km_common.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-98dx4122.dtsi"
 
 / {
 	model = "Keymile Kirkwood Reference Design";
@@ -12,19 +11,35 @@
 		device_type = "memory";
 		reg = <0x00000000 0x08000000>;
 	};
-};
-
-&mdio {
-	status = "okay";
 
-	ethphy0: ethernet-phy@0 {
-		reg = <0>;
+	chosen {
+		bootargs = "console=ttyS0,115200n8 earlyprintk";
 	};
-};
 
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
+	ocp@f1000000 {
+		pinctrl: pinctrl@10000 {
+
+			pinctrl-0 = < &pmx_nand &pmx_i2c_gpio_sda
+				&pmx_i2c_gpio_scl >;
+			pinctrl-names = "default";
+
+			pmx_i2c_gpio_sda: pmx-gpio-sda {
+				marvell,pins = "mpp8";
+				marvell,function = "gpio";
+			};
+			pmx_i2c_gpio_scl: pmx-gpio-scl {
+				marvell,pins = "mpp9";
+				marvell,function = "gpio";
+			};
+		};
+
+		serial@12000 {
+			status = "ok";
+		};
+
+		nand@3000000 {
+			status = "ok";
+			chip-delay = <25>;
+		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/kirkwood-lschlv2.dts b/arch/arm/boot/dts/kirkwood-lschlv2.dts
--- a/arch/arm/boot/dts/kirkwood-lschlv2.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-lschlv2.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "kirkwood-lsxl.dtsi"
+/include/ "kirkwood-lsxl.dtsi"
 
 / {
 	model = "Buffalo Linkstation LS-CHLv2";
diff -urNp a/arch/arm/boot/dts/kirkwood-lsxhl.dts b/arch/arm/boot/dts/kirkwood-lsxhl.dts
--- a/arch/arm/boot/dts/kirkwood-lsxhl.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-lsxhl.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "kirkwood-lsxl.dtsi"
+/include/ "kirkwood-lsxl.dtsi"
 
 / {
 	model = "Buffalo Linkstation LS-XHL";
diff -urNp a/arch/arm/boot/dts/kirkwood-lsxl.dtsi b/arch/arm/boot/dts/kirkwood-lsxl.dtsi
--- a/arch/arm/boot/dts/kirkwood-lsxl.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-lsxl.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,14 +1,23 @@
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
+
+			pinctrl-0 = < &pmx_power_hdd &pmx_usb_vbus
+				      &pmx_fan_low &pmx_fan_high
+				      &pmx_led_function_red &pmx_led_alarm
+				      &pmx_led_info &pmx_led_power
+				      &pmx_fan_lock &pmx_button_function
+				      &pmx_power_switch &pmx_power_auto_switch
+				      &pmx_led_function_blue >;
+			pinctrl-names = "default";
+
 			pmx_power_hdd: pmx-power-hdd {
 				marvell,pins = "mpp10";
 				marvell,function = "gpo";
@@ -103,86 +112,70 @@
 		compatible = "gpio-keys";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_button_function &pmx_power_switch
-			     &pmx_power_auto_switch>;
-		pinctrl-names = "default";
-
 		button@1 {
 			label = "Function Button";
-			linux,code = <KEY_OPTION>;
-			gpios = <&gpio1 9 GPIO_ACTIVE_LOW>;
+			linux,code = <357>;
+			gpios = <&gpio1 9 1>;
 		};
 		button@2 {
 			label = "Power-on Switch";
-			linux,code = <KEY_RESERVED>;
+			linux,code = <0>;
 			linux,input-type = <5>;
-			gpios = <&gpio1 10 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 10 1>;
 		};
 		button@3 {
 			label = "Power-auto Switch";
-			linux,code = <KEY_ESC>;
+			linux,code = <1>;
 			linux,input-type = <5>;
-			gpios = <&gpio1 11 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 11 1>;
 		};
 	};
 
 	gpio_leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = <&pmx_led_function_red &pmx_led_alarm
-			     &pmx_led_info &pmx_led_power
-			     &pmx_led_function_blue>;
-		pinctrl-names = "default";
 
 		led@1 {
 			label = "lsxl:blue:func";
-			gpios = <&gpio1 4 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 4 1>;
 		};
 
 		led@2 {
 			label = "lsxl:red:alarm";
-			gpios = <&gpio1 5 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 5 1>;
 		};
 
 		led@3 {
 			label = "lsxl:amber:info";
-			gpios = <&gpio1 6 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 6 1>;
 		};
 
 		led@4 {
 			label = "lsxl:blue:power";
-			gpios = <&gpio1 7 GPIO_ACTIVE_LOW>;
-			default-state = "keep";
+			gpios = <&gpio1 7 1>;
+			linux,default-trigger = "default-on";
 		};
 
 		led@5 {
 			label = "lsxl:red:func";
-			gpios = <&gpio1 16 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 16 1>;
 		};
 	};
 
 	gpio_fan {
 		compatible = "gpio-fan";
-		pinctrl-0 = <&pmx_fan_low &pmx_fan_high &pmx_fan_lock>;
-		pinctrl-names = "default";
-		gpios = <&gpio0 19 GPIO_ACTIVE_LOW
-		         &gpio0 18 GPIO_ACTIVE_LOW>;
+		gpios = <&gpio0 19 1
+		         &gpio0 18 1>;
 		gpio-fan,speed-map = <0    3
 		                      1500 2
 		                      3250 1
 		                      5000 0>;
-		alarm-gpios = <&gpio1 8 GPIO_ACTIVE_HIGH>;
-	};
-
-	restart_poweroff {
-		compatible = "restart-poweroff";
+		alarm-gpios = <&gpio1 8 0>;
 	};
 
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_power_hdd &pmx_usb_vbus>;
-		pinctrl-names = "default";
 
 		usb_power: regulator@1 {
 			compatible = "regulator-fixed";
@@ -208,29 +201,3 @@
 		};
 	};
 };
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@0 {
-		reg = <0>;
-	};
-
-	ethphy1: ethernet-phy@8 {
-		reg = <8>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
-};
-
-&eth1 {
-	status = "okay";
-	ethernet1-port@0 {
-		phy-handle = <&ethphy1>;
-	};
-};
diff -urNp a/arch/arm/boot/dts/kirkwood-mplcec4.dts b/arch/arm/boot/dts/kirkwood-mplcec4.dts
--- a/arch/arm/boot/dts/kirkwood-mplcec4.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-mplcec4.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	model = "MPL CEC4";
@@ -12,23 +12,22 @@
                 reg = <0x00000000 0x20000000>;
         };
 
-	chosen {
-		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
-	};
+        chosen {
+                bootargs = "console=ttyS0,115200n8 earlyprintk";
+        };
 
-	mbus {
-		pcie-controller {
-			status = "okay";
+	ocp@f1000000 {
+		pinctrl: pinctrl@10000 {
 
-			pcie@1,0 {
-				status = "okay";
-			};
-		};
-	};
+			pinctrl-0 = < &pmx_nand &pmx_uart0
+				      &pmx_led_health
+				      &pmx_sata0 &pmx_sata1
+				      &pmx_led_user1o
+				      &pmx_led_user1g &pmx_led_user0o
+				      &pmx_led_user0g &pmx_led_misc
+				    >;
+			pinctrl-names = "default";
 
-	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
 			pmx_led_health: pmx-led-health {
 				marvell,pins = "mpp7";
 				marvell,function = "gpo";
@@ -90,128 +89,96 @@
 
                 };
 
-		serial@12000 {
-			status = "okay";
-		};
+                serial@12000 {
+                        status = "ok";
+                };
+
+                nand@3000000 {
+                        status = "okay";
+
+                        partition@0 {
+                                label = "uboot";
+                                reg = <0x0000000 0x100000>;
+                        };
+
+                        partition@100000 {
+                                label = "env";
+                                reg = <0x100000 0x80000>;
+                        };
+
+                        partition@180000 {
+                                label = "fdt";
+                                reg = <0x180000 0x80000>;
+                        };
+
+                        partition@200000 {
+                                label = "kernel";
+                                reg = <0x200000 0x400000>;
+                        };
+
+                        partition@600000 {
+                                label = "rootfs";
+                                reg = <0x600000 0x1fa00000>;
+                        };
+                };
 
 		rtc@10300 {
 			status = "disabled";
 		};
 
 		sata@80000 {
-			pinctrl-0 = <&pmx_sata0 &pmx_sata1>;
-			pinctrl-names = "default";
 			nr-ports = <2>;
 			status = "okay";
+
 		};
 
 		mvsdio@90000 {
 			pinctrl-0 = <&pmx_sdio &pmx_sdio_cd>;
 			pinctrl-names = "default";
 			status = "okay";
-			cd-gpios = <&gpio1 15 GPIO_ACTIVE_LOW>;
+			cd-gpios = <&gpio1 15 0>;
 			/* No WP GPIO */
 		};
 	};
 
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = < &pmx_led_health
-			      &pmx_led_user1o
-			      &pmx_led_user1g &pmx_led_user0o
-			      &pmx_led_user0g &pmx_led_misc
-			    >;
-		pinctrl-names = "default";
 
 		health {
 			label = "status:green:health";
-			gpios = <&gpio0 7 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 7 1>;
 		};
 
 		user1o {
 			label = "user1:orange";
-			gpios = <&gpio1 8 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 8 1>;
 			default-state = "on";
 		};
 
 		user1g {
 			label = "user1:green";
-			gpios = <&gpio1 9 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 9 1>;
 			default-state = "on";
 		};
 
 		user0o {
 			label = "user0:orange";
-			gpios = <&gpio1 12 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 12 1>;
 			default-state = "on";
 		};
 
 		user0g {
 			label = "user0:green";
-			gpios = <&gpio1 13 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 13 1>;
 			default-state = "on";
 		};
 
 		misc {
 			label = "status:orange:misc";
-			gpios = <&gpio1 14 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 14 1>;
 			default-state = "on";
 		};
 
 	};
 };
 
-&nand {
-	status = "okay";
-
-	partition@0 {
-		label = "uboot";
-		reg = <0x0000000 0x100000>;
-	};
-
-	partition@100000 {
-		label = "env";
-		reg = <0x100000 0x80000>;
-	};
-
-	partition@180000 {
-		label = "fdt";
-		reg = <0x180000 0x80000>;
-	};
-
-	partition@200000 {
-		label = "kernel";
-		reg = <0x200000 0x400000>;
-	};
-
-	partition@600000 {
-		label = "rootfs";
-		reg = <0x600000 0x1fa00000>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@1 {
-		reg = <1>;
-	};
-
-	ethphy1: ethernet-phy@2 {
-		reg = <2>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
-};
-
-&eth1 {
-	status = "okay";
-	ethernet1-port@0 {
-		phy-handle = <&ethphy1>;
-	};
-};
diff -urNp a/arch/arm/boot/dts/kirkwood-netgear_readynas_duo_v2.dts b/arch/arm/boot/dts/kirkwood-netgear_readynas_duo_v2.dts
--- a/arch/arm/boot/dts/kirkwood-netgear_readynas_duo_v2.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-netgear_readynas_duo_v2.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,18 +1,7 @@
-/*
- * Device Tree file for NETGEAR ReadyNAS Duo v2
- *
- * Copyright (C) 2013, Arnaud EBALARD <arno@natisbad.org>
- *
- * This program is free software; you can redistribute it and/or
- * modify it under the terms of the GNU General Public License
- * as published by the Free Software Foundation; either version
- * 2 of the License, or (at your option) any later version.
- */
-
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6282.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6282.dtsi"
 
 / {
 	model = "NETGEAR ReadyNAS Duo v2";
@@ -25,73 +14,54 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 	};
 
-	mbus {
-		pcie-controller {
-			status = "okay";
+	ocp@f1000000 {
+		pinctrl: pinctrl@10000 {
 
-			pcie@1,0 {
-				status = "okay";
-			};
-		};
-	};
+			pinctrl-0 = < &pmx_uart0
+				      &pmx_button_power
+				      &pmx_button_backup
+				      &pmx_button_reset
+				      &pmx_led_blue_power
+				      &pmx_led_blue_activity
+				      &pmx_led_blue_disk1
+				      &pmx_led_blue_disk2
+				      &pmx_led_blue_backup >;
+			pinctrl-names = "default";
 
-	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
 			pmx_button_power: pmx-button-power {
 				marvell,pins = "mpp47";
 				marvell,function = "gpio";
 			};
-
 			pmx_button_backup: pmx-button-backup {
 				marvell,pins = "mpp45";
 				marvell,function = "gpio";
 			};
-
 			pmx_button_reset: pmx-button-reset {
 				marvell,pins = "mpp13";
 				marvell,function = "gpio";
 			};
-
 			pmx_led_blue_power: pmx-led-blue-power {
 				marvell,pins = "mpp31";
 				marvell,function = "gpio";
 			};
-
 			pmx_led_blue_activity: pmx-led-blue-activity {
 				marvell,pins = "mpp38";
 				marvell,function = "gpio";
 			};
-
 			pmx_led_blue_disk1: pmx-led-blue-disk1 {
 				marvell,pins = "mpp23";
 				marvell,function = "gpio";
 			};
-
 			pmx_led_blue_disk2: pmx-led-blue-disk2 {
 				marvell,pins = "mpp22";
 				marvell,function = "gpio";
 			};
-
 			pmx_led_blue_backup: pmx-led-blue-backup {
 				marvell,pins = "mpp29";
 				marvell,function = "gpio";
 			};
-
-			pmx_poweroff: pmx-poweroff {
-				marvell,pins = "mpp30";
-				marvell,function = "gpio";
-			};
-		};
-
-		clocks {
-		       g762_clk: g762-oscillator {
-				 compatible = "fixed-clock";
-				 #clock-cells = <0>;
-				 clock-frequency = <8192>;
-		       };
 		};
 
 		i2c@11000 {
@@ -101,21 +71,42 @@
 				compatible = "ricoh,rs5c372a";
 				reg = <0x32>;
 			};
-
-			g762: g762@3e {
-				compatible = "gmt,g762";
-				reg = <0x3e>;
-				clocks = <&g762_clk>; /* input clock */
-				fan_gear_mode = <0>;
-				fan_startv = <1>;
-				pwm_polarity = <0>;
-			};
 		};
 
 		serial@12000 {
 			status = "okay";
 		};
 
+		nand@3000000 {
+			status = "okay";
+
+			partition@0 {
+				label = "u-boot";
+				reg = <0x0000000 0x180000>;
+				read-only;
+			};
+
+			partition@180000 {
+				label = "u-boot-env";
+				reg = <0x180000 0x20000>;
+			};
+
+			partition@200000 {
+				label = "uImage";
+				reg = <0x0200000 0x600000>;
+			};
+
+			partition@800000 {
+				label = "minirootfs";
+				reg = <0x0800000 0x1000000>;
+			};
+
+			partition@1800000 {
+				label = "jffs2";
+				reg = <0x1800000 0x6800000>;
+			};
+		};
+
 		sata@80000 {
 			status = "okay";
 			nr-ports = <2>;
@@ -124,130 +115,66 @@
 
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = < &pmx_led_blue_power &pmx_led_blue_activity
-			      &pmx_led_blue_disk1 &pmx_led_blue_disk2
-			      &pmx_led_blue_backup >;
-		pinctrl-names = "default";
 
 		power_led {
 			label = "status:blue:power_led";
-			gpios = <&gpio0 31 GPIO_ACTIVE_LOW>;
-			default-state = "keep";
+			gpios = <&gpio0 31 1>;   /* GPIO 31 Active Low */
+			linux,default-trigger = "default-on";
 		};
-
 		activity_led {
 			label = "status:blue:activity_led";
-			gpios = <&gpio1 6 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 6 1>;    /* GPIO 38 Active Low */
 		};
-
 		disk1_led {
 			label = "status:blue:disk1_led";
-			gpios = <&gpio0 23 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 23 1>;   /* GPIO 23 Active Low */
 		};
-
 		disk2_led {
 			label = "status:blue:disk2_led";
-			gpios = <&gpio0 22 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 22 1>;   /* GPIO 22 Active Low */
 		};
-
 		backup_led {
 			label = "status:blue:backup_led";
-			gpios = <&gpio0 29 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 29 1>;   /* GPIO 29 Active Low*/
 		};
 	};
 
-	gpio-keys {
+	gpio_keys {
 		compatible = "gpio-keys";
-		pinctrl-0 = <&pmx_button_power &pmx_button_backup
-			     &pmx_button_reset>;
-		pinctrl-names = "default";
-
-		power-button {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		button@1 {
 			label = "Power Button";
-			linux,code = <KEY_POWER>;
-			gpios = <&gpio1 15 GPIO_ACTIVE_LOW>;
+			linux,code = <116>;     /* KEY_POWER */
+			gpios = <&gpio1 15 1>;
 		};
-
-		reset-button {
+		button@2 {
 			label = "Reset Button";
-			linux,code = <KEY_RESTART>;
-			gpios = <&gpio0 13 GPIO_ACTIVE_LOW>;
+			linux,code = <0x198>;   /* KEY_RESTART */
+			gpios = <&gpio0 13 1>;
 		};
-
-		backup-button {
+		button@3 {
 			label = "Backup Button";
-			linux,code = <KEY_COPY>;
-			gpios = <&gpio1 13 GPIO_ACTIVE_LOW>;
+			linux,code = <133>;     /* KEY_COPY */
+			gpios = <&gpio1 13 1>;
 		};
 	};
 
-	gpio-poweroff {
-		compatible = "gpio-poweroff";
-		pinctrl-0 = <&pmx_poweroff>;
-		pinctrl-names = "default";
-		gpios = <&gpio0 30 GPIO_ACTIVE_LOW>;
-	};
-
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		usb3_regulator: usb3-regulator {
-			compatible = "regulator-fixed";
-			reg = <1>;
-			regulator-name = "USB 3.0 Power";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			enable-active-high;
-			regulator-always-on;
-			regulator-boot-on;
-			gpio = <&gpio1 14 GPIO_ACTIVE_HIGH>;
-		};
-	};
-};
-
-&nand {
-	status = "okay";
-
-	partition@0 {
-		label = "u-boot";
-		reg = <0x0000000 0x180000>;
-		read-only;
-	};
-
-	partition@180000 {
-		label = "u-boot-env";
-		reg = <0x180000 0x20000>;
-	};
-
-	partition@200000 {
-		label = "uImage";
-		reg = <0x0200000 0x600000>;
-	};
-
-	partition@800000 {
-		label = "minirootfs";
-		reg = <0x0800000 0x1000000>;
-	};
-
-	partition@1800000 {
-		label = "jffs2";
-		reg = <0x1800000 0x6800000>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@0 { /* Marvell 88E1318 */
-		reg = <0>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
+        regulators {
+                compatible = "simple-bus";
+                #address-cells = <1>;
+                #size-cells = <0>;
+
+                usb_power: regulator@1 {
+                        compatible = "regulator-fixed";
+                        reg = <1>;
+                        regulator-name = "USB 3.0 Power";
+                        regulator-min-microvolt = <5000000>;
+                        regulator-max-microvolt = <5000000>;
+                        enable-active-high;
+                        regulator-always-on;
+                        regulator-boot-on;
+                        gpio = <&gpio1 14 0>;
+                };
+        };
 };
diff -urNp a/arch/arm/boot/dts/kirkwood-ns2-common.dtsi b/arch/arm/boot/dts/kirkwood-ns2-common.dtsi
--- a/arch/arm/boot/dts/kirkwood-ns2-common.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-ns2-common.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,14 +1,17 @@
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	chosen {
 		bootargs = "console=ttyS0,115200n8";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
+			pinctrl-0 = < &pmx_spi &pmx_twsi0 &pmx_uart0
+					&pmx_ns2_sata0 &pmx_ns2_sata1>;
+			pinctrl-names = "default";
+
 			pmx_ns2_sata0: pmx-ns2-sata0 {
 				marvell,pins = "mpp21";
 				marvell,function = "sata0";
@@ -29,7 +32,7 @@
 			flash@0 {
 				#address-cells = <1>;
 				#size-cells = <1>;
-				compatible = "mxicy,mx25l4005a";
+				compatible = "mx25l4005a";
 				reg = <0>;
 				spi-max-frequency = <20000000>;
 				mode = <0>;
@@ -45,7 +48,7 @@
 			status = "okay";
 
 			eeprom@50 {
-				compatible = "atmel,24c04";
+				compatible = "at,24c04";
 				pagesize = <16>;
 				reg = <0x50>;
 			};
@@ -59,8 +62,8 @@
 
 		button@1 {
 			label = "Power push button";
-			linux,code = <KEY_POWER>;
-			gpios = <&gpio1 0 GPIO_ACTIVE_HIGH>;
+			linux,code = <116>;
+			gpios = <&gpio1 0 0>;
 		};
 	};
 
@@ -69,28 +72,13 @@
 
 		red-fail {
 			label = "ns2:red:fail";
-			gpios = <&gpio0 12 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 12 0>;
 		};
 	};
 
 	gpio_poweroff {
 		compatible = "gpio-poweroff";
-		gpios = <&gpio0 31 GPIO_ACTIVE_HIGH>;
-	};
-
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy {
-                /* overwrite reg property in board file */
+		gpios = <&gpio0 31 0>;
 	};
-};
 
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/kirkwood-ns2.dts b/arch/arm/boot/dts/kirkwood-ns2.dts
--- a/arch/arm/boot/dts/kirkwood-ns2.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-ns2.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "kirkwood-ns2-common.dtsi"
+/include/ "kirkwood-ns2-common.dtsi"
 
 / {
 	model = "LaCie Network Space v2";
@@ -13,8 +13,6 @@
 
 	ocp@f1000000 {
 		sata@80000 {
-			pinctrl-0 = <&pmx_ns2_sata0>;
-			pinctrl-names = "default";
 			status = "okay";
 			nr-ports = <1>;
 		};
@@ -30,5 +28,3 @@
 		};
 	};
 };
-
-&ethphy0 { reg = <8>; };
diff -urNp a/arch/arm/boot/dts/kirkwood-ns2lite.dts b/arch/arm/boot/dts/kirkwood-ns2lite.dts
--- a/arch/arm/boot/dts/kirkwood-ns2lite.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-ns2lite.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "kirkwood-ns2-common.dtsi"
+/include/ "kirkwood-ns2-common.dtsi"
 
 / {
 	model = "LaCie Network Space Lite v2";
@@ -13,8 +13,6 @@
 
 	ocp@f1000000 {
 		sata@80000 {
-			pinctrl-0 = <&pmx_ns2_sata0>;
-			pinctrl-names = "default";
 			status = "okay";
 			nr-ports = <1>;
 		};
@@ -25,10 +23,8 @@
 
 		blue-sata {
 			label = "ns2:blue:sata";
-			gpios = <&gpio0 30 GPIO_ACTIVE_LOW>;
-			linux,default-trigger = "ide-disk";
+			gpios = <&gpio0 30 1>;
+			linux,default-trigger = "default-on";
 		};
 	};
 };
-
-&ethphy0 { reg = <0>; };
diff -urNp a/arch/arm/boot/dts/kirkwood-ns2max.dts b/arch/arm/boot/dts/kirkwood-ns2max.dts
--- a/arch/arm/boot/dts/kirkwood-ns2max.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-ns2max.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "kirkwood-ns2-common.dtsi"
+/include/ "kirkwood-ns2-common.dtsi"
 
 / {
 	model = "LaCie Network Space Max v2";
@@ -13,8 +13,6 @@
 
 	ocp@f1000000 {
 		sata@80000 {
-			pinctrl-0 = <&pmx_ns2_sata0 &pmx_ns2_sata1>;
-			pinctrl-names = "default";
 			status = "okay";
 			nr-ports = <2>;
 		};
@@ -22,10 +20,10 @@
 
 	gpio_fan {
 		compatible = "gpio-fan";
-		gpios = <&gpio0 22 GPIO_ACTIVE_LOW
-			 &gpio0  7 GPIO_ACTIVE_LOW
-			 &gpio1  1 GPIO_ACTIVE_LOW
-			 &gpio0 23 GPIO_ACTIVE_LOW>;
+		gpios = <&gpio0 22 1
+			 &gpio0  7 1
+			 &gpio1  1 1
+			 &gpio0 23 1>;
 		gpio-fan,speed-map =
 			<   0  0
 			 1500 15
@@ -36,7 +34,7 @@
 			 3300 10
 			 4300  9
 			 5500  8>;
-		alarm-gpios = <&gpio0 25 GPIO_ACTIVE_LOW>;
+		alarm-gpios = <&gpio0 25 1>;
 	};
 
 	ns2-leds {
@@ -49,5 +47,3 @@
 		};
 	};
 };
-
-&ethphy0 { reg = <8>; };
diff -urNp a/arch/arm/boot/dts/kirkwood-ns2mini.dts b/arch/arm/boot/dts/kirkwood-ns2mini.dts
--- a/arch/arm/boot/dts/kirkwood-ns2mini.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-ns2mini.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "kirkwood-ns2-common.dtsi"
+/include/ "kirkwood-ns2-common.dtsi"
 
 / {
 	/* This machine is embedded in the first LaCie CloudBox product. */
@@ -14,8 +14,6 @@
 
 	ocp@f1000000 {
 		sata@80000 {
-			pinctrl-0 = <&pmx_ns2_sata0>;
-			pinctrl-names = "default";
 			status = "okay";
 			nr-ports = <1>;
 		};
@@ -23,10 +21,10 @@
 
 	gpio_fan {
 		compatible = "gpio-fan";
-		gpios = <&gpio0 22 GPIO_ACTIVE_LOW
-			 &gpio0  7 GPIO_ACTIVE_LOW
-			 &gpio1  1 GPIO_ACTIVE_LOW
-			 &gpio0 23 GPIO_ACTIVE_LOW>;
+		gpios = <&gpio0 22 1
+			 &gpio0  7 1
+			 &gpio1  1 1
+			 &gpio0 23 1>;
 		gpio-fan,speed-map =
 			<   0  0
 			 3000 15
@@ -37,7 +35,7 @@
 			 7140 10
 			 7980  9
 			 9200  8>;
-		alarm-gpios = <&gpio0 25 GPIO_ACTIVE_LOW>;
+		alarm-gpios = <&gpio0 25 1>;
 	};
 
 	ns2-leds {
@@ -50,5 +48,3 @@
 		};
 	};
 };
-
-&ethphy0 { reg = <0>; };
diff -urNp a/arch/arm/boot/dts/kirkwood-nsa310.dts b/arch/arm/boot/dts/kirkwood-nsa310.dts
--- a/arch/arm/boot/dts/kirkwood-nsa310.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-nsa310.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,8 +1,9 @@
 /dts-v1/;
 
-#include "kirkwood-nsa3x0-common.dtsi"
+/include/ "kirkwood.dtsi"
 
 / {
+	model = "ZyXEL NSA310";
 	compatible = "zyxel,nsa310", "marvell,kirkwood-88f6281", "marvell,kirkwood";
 
 	memory {
@@ -12,22 +13,26 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200";
-		stdout-path = &uart0;
-	};
-
-	mbus {
-		pcie-controller {
-			status = "okay";
-
-			pcie@1,0 {
-				status = "okay";
-			};
-		};
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
-			pinctrl-0 = <&pmx_unknown>;
+		pinctrl: pinctrl@10000 {
+			pinctrl-0 = < &pmx_led_esata_green
+				      &pmx_led_esata_red
+				      &pmx_led_usb_green
+				      &pmx_led_usb_red
+				      &pmx_usb_power_off
+				      &pmx_led_sys_green
+				      &pmx_led_sys_red
+				      &pmx_btn_reset
+				      &pmx_btn_copy
+				      &pmx_led_copy_green
+				      &pmx_led_copy_red
+				      &pmx_led_hdd_green
+				      &pmx_led_hdd_red
+				      &pmx_unknown
+				      &pmx_btn_power
+				      &pmx_pwr_off >;
 			pinctrl-names = "default";
 
 			pmx_led_esata_green: pmx-led-esata-green {
@@ -50,6 +55,11 @@
 				marvell,function = "gpio";
 			};
 
+			pmx_usb_power_off: pmx-usb-power-off {
+				marvell,pins = "mpp21";
+				marvell,function = "gpio";
+			};
+
 			pmx_led_sys_green: pmx-led-sys-green {
 				marvell,pins = "mpp28";
 				marvell,function = "gpio";
@@ -60,6 +70,26 @@
 				marvell,function = "gpio";
 			};
 
+			pmx_btn_reset: pmx-btn-reset {
+				marvell,pins = "mpp36";
+				marvell,function = "gpio";
+			};
+
+			pmx_btn_copy: pmx-btn-copy {
+				marvell,pins = "mpp37";
+				marvell,function = "gpio";
+			};
+
+			pmx_led_copy_green: pmx-led-copy-green {
+				marvell,pins = "mpp39";
+				marvell,function = "gpio";
+			};
+
+			pmx_led_copy_red: pmx-led-copy-red {
+				marvell,pins = "mpp40";
+				marvell,function = "gpio";
+			};
+
 			pmx_led_hdd_green: pmx-led-hdd-green {
 				marvell,pins = "mpp41";
 				marvell,function = "gpio";
@@ -75,66 +105,165 @@
 				marvell,function = "gpio";
 			};
 
+			pmx_btn_power: pmx-btn-power {
+				marvell,pins = "mpp46";
+				marvell,function = "gpio";
+			};
+
+			pmx_pwr_off: pmx-pwr-off {
+				marvell,pins = "mpp48";
+				marvell,function = "gpio";
+			};
+		};
+
+		serial@12000 {
+			status = "ok";
+		};
+
+		sata@80000 {
+			status = "okay";
+			nr-ports = <2>;
 		};
 
 		i2c@11000 {
 			status = "okay";
 
 			adt7476: adt7476a@2e {
-				compatible = "adi,adt7476";
+				compatible = "adt7476";
 				reg = <0x2e>;
 			};
 		};
+
+		nand@3000000 {
+			status = "okay";
+			chip-delay = <35>;
+
+			partition@0 {
+				label = "uboot";
+				reg = <0x0000000 0x0100000>;
+				read-only;
+			};
+			partition@100000 {
+				label = "uboot_env";
+				reg = <0x0100000 0x0080000>;
+			};
+			partition@180000 {
+				label = "key_store";
+				reg = <0x0180000 0x0080000>;
+			};
+			partition@200000 {
+				label = "info";
+				reg = <0x0200000 0x0080000>;
+			};
+			partition@280000 {
+				label = "etc";
+				reg = <0x0280000 0x0a00000>;
+			};
+			partition@c80000 {
+				label = "kernel_1";
+				reg = <0x0c80000 0x0a00000>;
+			};
+			partition@1680000 {
+				label = "rootfs1";
+				reg = <0x1680000 0x2fc0000>;
+			};
+			partition@4640000 {
+				label = "kernel_2";
+				reg = <0x4640000 0x0a00000>;
+			};
+			partition@5040000 {
+				label = "rootfs2";
+				reg = <0x5040000 0x2fc0000>;
+			};
+		};
+	};
+
+	gpio_keys {
+		compatible = "gpio-keys";
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		button@1 {
+			label = "Power Button";
+			linux,code = <116>;
+			gpios = <&gpio1 14 0>;
+		};
+		button@2 {
+			label = "Copy Button";
+			linux,code = <133>;
+			gpios = <&gpio1 5 1>;
+		};
+		button@3 {
+			label = "Reset Button";
+			linux,code = <0x198>;
+			gpios = <&gpio1 4 1>;
+		};
 	};
 
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = <&pmx_led_esata_green &pmx_led_esata_red
-			     &pmx_led_usb_green &pmx_led_usb_red
-			     &pmx_led_sys_green &pmx_led_sys_red
-			     &pmx_led_copy_green &pmx_led_copy_red
-			     &pmx_led_hdd_green &pmx_led_hdd_red>;
-		pinctrl-names = "default";
 
 		green-sys {
 			label = "nsa310:green:sys";
-			gpios = <&gpio0 28 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 28 0>;
 		};
 		red-sys {
 			label = "nsa310:red:sys";
-			gpios = <&gpio0 29 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 29 0>;
 		};
 		green-hdd {
 			label = "nsa310:green:hdd";
-			gpios = <&gpio1 9 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 9 0>;
 		};
 		red-hdd {
 			label = "nsa310:red:hdd";
-			gpios = <&gpio1 10 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 10 0>;
 		};
 		green-esata {
 			label = "nsa310:green:esata";
-			gpios = <&gpio0 12 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 12 0>;
 		};
 		red-esata {
 			label = "nsa310:red:esata";
-			gpios = <&gpio0 13 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 13 0>;
 		};
 		green-usb {
 			label = "nsa310:green:usb";
-			gpios = <&gpio0 15 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 15 0>;
 		};
 		red-usb {
 			label = "nsa310:red:usb";
-			gpios = <&gpio0 16 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio0 16 0>;
 		};
 		green-copy {
 			label = "nsa310:green:copy";
-			gpios = <&gpio1 7 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 7 0>;
 		};
 		red-copy {
 			label = "nsa310:red:copy";
-			gpios = <&gpio1 8 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 8 0>;
+		};
+	};
+
+	gpio_poweroff {
+		compatible = "gpio-poweroff";
+		gpios = <&gpio1 16 0>;
+	};
+
+	regulators {
+		compatible = "simple-bus";
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		usb0_power_off: regulator@1 {
+			compatible = "regulator-fixed";
+			reg = <1>;
+			regulator-name = "USB Power Off";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			regulator-always-on;
+			regulator-boot-on;
+			gpio = <&gpio0 21 0>;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/kirkwood-openblocks_a6.dts b/arch/arm/boot/dts/kirkwood-openblocks_a6.dts
--- a/arch/arm/boot/dts/kirkwood-openblocks_a6.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-openblocks_a6.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6282.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6282.dtsi"
 
 / {
 	model = "Plat'Home OpenBlocksA6";
@@ -14,16 +14,50 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
 		serial@12000 {
-			status = "okay";
+			status = "ok";
 		};
 
 		serial@12100 {
+			status = "ok";
+		};
+
+		nand@3000000 {
+			chip-delay = <25>;
 			status = "okay";
+
+			partition@0 {
+				label = "uboot";
+				reg = <0x0 0x90000>;
+			};
+
+			partition@90000 {
+				label = "env";
+				reg = <0x90000 0x44000>;
+			};
+
+			partition@d4000 {
+				label = "test";
+				reg = <0xd4000 0x24000>;
+			};
+
+			partition@f4000 {
+				label = "conf";
+				reg = <0xf4000 0x400000>;
+			};
+
+			partition@4f4000 {
+				label = "linux";
+				reg = <0x4f4000 0x1d20000>;
+			};
+
+			partition@2214000 {
+				label = "user";
+				reg = <0x2214000 0x1dec000>;
+			};
 		};
 
 		sata@80000 {
@@ -35,13 +69,22 @@
 			status = "okay";
 
 			s35390a: s35390a@30 {
-				compatible = "sii,s35390a";
+				compatible = "s35390a";
 				reg = <0x30>;
 			};
 		};
 
-		pinctrl: pin-controller@10000 {
-			pinctrl-0 = <&pmx_dip_switches &pmx_gpio_header>;
+		pinctrl: pinctrl@10000 {
+			pinctrl-0 = < &pmx_nand &pmx_uart0
+				&pmx_uart1 &pmx_twsi1
+				&pmx_dip_sw0 &pmx_dip_sw1
+				&pmx_dip_sw2 &pmx_dip_sw3
+				&pmx_gpio_0 &pmx_gpio_1
+				&pmx_gpio_2 &pmx_gpio_3
+				&pmx_gpio_4 &pmx_gpio_5
+				&pmx_gpio_6 &pmx_gpio_7
+				&pmx_led_red &pmx_led_green
+				&pmx_led_yellow >;
 			pinctrl-names = "default";
 
 			pmx_uart0: pmx-uart0 {
@@ -61,14 +104,63 @@
 				marvell,function = "sysrst";
 			};
 
-			pmx_dip_switches: pmx-dip-switches {
-				marvell,pins = "mpp20", "mpp21", "mpp22", "mpp23";
+			pmx_dip_sw0: pmx-dip-sw0 {
+				marvell,pins = "mpp20";
+				marvell,function = "gpio";
+			};
+
+			pmx_dip_sw1: pmx-dip-sw1 {
+				marvell,pins = "mpp21";
+				marvell,function = "gpio";
+			};
+
+			pmx_dip_sw2: pmx-dip-sw2 {
+				marvell,pins = "mpp22";
+				marvell,function = "gpio";
+			};
+
+			pmx_dip_sw3: pmx-dip-sw3 {
+				marvell,pins = "mpp23";
+				marvell,function = "gpio";
+			};
+
+			pmx_gpio_0: pmx-gpio-0 {
+				marvell,pins = "mpp24";
+				marvell,function = "gpio";
+			};
+
+			pmx_gpio_1: pmx-gpio-1 {
+				marvell,pins = "mpp25";
+				marvell,function = "gpio";
+			};
+
+			pmx_gpio_2: pmx-gpio-2 {
+				marvell,pins = "mpp26";
+				marvell,function = "gpio";
+			};
+
+			pmx_gpio_3: pmx-gpio-3 {
+				marvell,pins = "mpp27";
+				marvell,function = "gpio";
+			};
+
+			pmx_gpio_4: pmx-gpio-4 {
+				marvell,pins = "mpp28";
+				marvell,function = "gpio";
+			};
+
+			pmx_gpio_5: pmx-gpio-5 {
+				marvell,pins = "mpp29";
 				marvell,function = "gpio";
 			};
 
-			pmx_gpio_header: pmx-gpio-header {
-				marvell,pins = "mpp24", "mpp25", "mpp26", "mpp27",
-					       "mpp28", "mpp29", "mpp30", "mpp31";
+			pmx_gpio_6: pmx-gpio-6 {
+				marvell,pins = "mpp30";
+				marvell,function = "gpio";
+			};
+
+			pmx_gpio_7: pmx-gpio-7 {
+				marvell,pins = "mpp31";
 				marvell,function = "gpio";
 			};
 
@@ -82,8 +174,18 @@
 				marvell,function = "gpio";
 			};
 
-			pmx_leds: pmx-leds {
-				marvell,pins = "mpp41", "mpp42", "mpp43";
+			pmx_led_red: pmx-led-red {
+				marvell,pins = "mpp41";
+				marvell,function = "gpio";
+			};
+
+			pmx_led_green: pmx-led-green {
+				marvell,pins = "mpp42";
+				marvell,function = "gpio";
+			};
+
+			pmx_led_yellow: pmx-led-yellow {
+				marvell,pins = "mpp43";
 				marvell,function = "gpio";
 			};
 		};
@@ -91,86 +193,20 @@
 
 	gpio-leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = <&pmx_leds>;
-		pinctrl-names = "default";
 
 		led-red {
 			label = "obsa6:red:stat";
-			gpios = <&gpio1 9 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 9 1>;
 		};
 
 		led-green {
 			label = "obsa6:green:stat";
-			gpios = <&gpio1 10 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 10 1>;
 		};
 
 		led-yellow {
 			label = "obsa6:yellow:stat";
-			gpios = <&gpio1 11 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 11 1>;
 		};
         };
-
-	gpio_keys {
-		compatible = "gpio-keys";
-		pinctrl-0 = <&pmx_gpio_init>;
-		pinctrl-names = "default";
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		button@1 {
-			label = "Init Button";
-			linux,code = <KEY_POWER>;
-			gpios = <&gpio1 6 GPIO_ACTIVE_HIGH>;
-		};
-	};
-};
-
-&nand {
-	chip-delay = <25>;
-	status = "okay";
-
-	partition@0 {
-		label = "uboot";
-		reg = <0x0 0x90000>;
-	};
-
-	partition@90000 {
-		label = "env";
-		reg = <0x90000 0x44000>;
-	};
-
-	partition@d4000 {
-		label = "test";
-		reg = <0xd4000 0x24000>;
-	};
-
-	partition@f4000 {
-		label = "conf";
-		reg = <0xf4000 0x400000>;
-	};
-
-	partition@4f4000 {
-		label = "linux";
-		reg = <0x4f4000 0x1d20000>;
-	};
-
-	partition@2214000 {
-		label = "user";
-		reg = <0x2214000 0x1dec000>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@0 {
-		reg = <0>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/kirkwood-topkick.dts b/arch/arm/boot/dts/kirkwood-topkick.dts
--- a/arch/arm/boot/dts/kirkwood-topkick.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-topkick.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6282.dtsi"
+/include/ "kirkwood.dtsi"
+/include/ "kirkwood-6282.dtsi"
 
 / {
 	model = "Univeral Scientific Industrial Co. Topkick-1281P2";
@@ -14,11 +14,22 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		stdout-path = &uart0;
 	};
 
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
+			/*
+			 * GPIO LED layout
+			 *
+			 *       /-SYS_LED(2)
+			 *       |
+			 *       |   /-DISK_LED
+			 *       |   |
+			 *       |   |   /-WLAN_LED(2)
+			 *       |   |   |
+			 * [SW] [*] [*] [*]
+			 */
+
 			/*
 			 * Switch positions
 			 *
@@ -30,8 +41,19 @@
 			 *     |   |   |
 			 * PS [L] [I] [R] LEDS
 			 */
-			pinctrl-0 = <&pmx_sw_left &pmx_sw_right
-				     &pmx_sw_idle &pmx_sw_left2>;
+			pinctrl-0 = < &pmx_led_disk_yellow
+				      &pmx_sata0_pwr_enable
+				      &pmx_led_sys_red
+				      &pmx_led_sys_blue
+				      &pmx_led_wifi_green
+				      &pmx_sw_left
+				      &pmx_sw_right
+				      &pmx_sw_idle
+				      &pmx_sw_left2
+				      &pmx_led_wifi_yellow
+				      &pmx_uart0
+				      &pmx_nand
+				      &pmx_twsi0 >;
 			pinctrl-names = "default";
 
 			pmx_led_disk_yellow: pmx-led-disk-yellow {
@@ -86,7 +108,36 @@
 		};
 
 		serial@12000 {
+			status = "ok";
+		};
+
+		nand@3000000 {
 			status = "okay";
+
+			partition@0 {
+				label = "u-boot";
+				reg = <0x0000000 0x180000>;
+			};
+
+			partition@180000 {
+				label = "u-boot env";
+				reg = <0x0180000 0x20000>;
+			};
+
+			partition@200000 {
+				label = "uImage";
+				reg = <0x0200000 0x600000>;
+			};
+
+			partition@800000 {
+				label = "uInitrd";
+				reg = <0x0800000 0x1000000>;
+			};
+
+			partition@1800000 {
+				label = "rootfs";
+				reg = <0x1800000 0xe800000>;
+			};
 		};
 
 		sata@80000 {
@@ -95,7 +146,7 @@
 		};
 
 		i2c@11000 {
-			status = "okay";
+			status = "ok";
 		};
 
 		mvsdio@90000 {
@@ -103,58 +154,39 @@
 			pinctrl-names = "default";
 			status = "okay";
 			/* No CD or WP GPIOs */
-			broken-cd;
 		};
 	};
 
 	gpio-leds {
-		/*
-		 * GPIO LED layout
-		 *
-		 *       /-SYS_LED(2)
-		 *       |
-		 *       |   /-DISK_LED
-		 *       |   |
-		 *       |   |   /-WLAN_LED(2)
-		 *       |   |   |
-		 * [SW] [*] [*] [*]
-		 */
-
 		compatible = "gpio-leds";
-		pinctrl-0 = <&pmx_led_disk_yellow &pmx_led_sys_red
-			     &pmx_led_sys_blue &pmx_led_wifi_green
-			     &pmx_led_wifi_yellow>;
-		pinctrl-names = "default";
 
 		disk {
 			label = "topkick:yellow:disk";
-			gpios = <&gpio0 21 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio0 21 1>;
 			linux,default-trigger = "ide-disk";
 		};
 		system2 {
 			label = "topkick:red:system";
-			gpios = <&gpio1 5 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 5 1>;
 		};
 		system {
 			label = "topkick:blue:system";
-			gpios = <&gpio1 6 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 6 1>;
 			default-state = "on";
 		};
 		wifi {
 			label = "topkick:green:wifi";
-			gpios = <&gpio1 7 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 7 1>;
 		};
 		wifi2 {
 			label = "topkick:yellow:wifi";
-			gpios = <&gpio1 16 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio1 16 1>;
 		};
 	};
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_sata0_pwr_enable>;
-		pinctrl-names = "default";
 
 		sata0_power: regulator@1 {
 			compatible = "regulator-fixed";
@@ -169,47 +201,3 @@
 		};
 	};
 };
-
-&nand {
-	status = "okay";
-
-	partition@0 {
-		label = "u-boot";
-		reg = <0x0000000 0x180000>;
-	};
-
-	partition@180000 {
-		label = "u-boot env";
-		reg = <0x0180000 0x20000>;
-	};
-
-	partition@200000 {
-		label = "uImage";
-		reg = <0x0200000 0x600000>;
-	};
-
-	partition@800000 {
-		label = "uInitrd";
-		reg = <0x0800000 0x1000000>;
-	};
-
-	partition@1800000 {
-		label = "rootfs";
-		reg = <0x1800000 0xe800000>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy@0 {
-		reg = <0>;
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
-};
diff -urNp a/arch/arm/boot/dts/kirkwood-ts219-6281.dts b/arch/arm/boot/dts/kirkwood-ts219-6281.dts
--- a/arch/arm/boot/dts/kirkwood-ts219-6281.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-ts219-6281.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,14 +1,16 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6281.dtsi"
-#include "kirkwood-ts219.dtsi"
+/include/ "kirkwood-ts219.dtsi"
+/include/ "kirkwood-6281.dtsi"
 
 / {
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
 
-			pinctrl-0 = <&pmx_ram_size &pmx_board_id>;
+			pinctrl-0 = < &pmx_uart0 &pmx_uart1 &pmx_spi
+				      &pmx_twsi0 &pmx_sata0 &pmx_sata1
+				      &pmx_ram_size &pmx_reset_button
+				      &pmx_USB_copy_button &pmx_board_id>;
 			pinctrl-names = "default";
 
 			pmx_ram_size: pmx-ram-size {
@@ -36,20 +38,15 @@
 		compatible = "gpio-keys";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_reset_button &pmx_USB_copy_button>;
-		pinctrl-names = "default";
-
 		button@1 {
 			label = "USB Copy";
-			linux,code = <KEY_COPY>;
-			gpios = <&gpio0 15 GPIO_ACTIVE_LOW>;
+			linux,code = <133>;
+			gpios = <&gpio0 15 1>;
 		};
 		button@2 {
 			label = "Reset";
-			linux,code = <KEY_RESTART>;
-			gpios = <&gpio0 16 GPIO_ACTIVE_LOW>;
+			linux,code = <0x198>;
+			gpios = <&gpio0 16 1>;
 		};
 	};
-};
-
-&ethphy0 { reg = <8>; };
+};
\ No newline at end of file
diff -urNp a/arch/arm/boot/dts/kirkwood-ts219-6282.dts b/arch/arm/boot/dts/kirkwood-ts219-6282.dts
--- a/arch/arm/boot/dts/kirkwood-ts219-6282.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-ts219-6282.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,24 +1,16 @@
 /dts-v1/;
 
-#include "kirkwood.dtsi"
-#include "kirkwood-6282.dtsi"
-#include "kirkwood-ts219.dtsi"
+/include/ "kirkwood-ts219.dtsi"
+/include/ "kirkwood-6282.dtsi"
 
 / {
-	mbus {
-		pcie-controller {
-			status = "okay";
-
-			pcie@2,0 {
-				status = "okay";
-			};
-		};
-	};
-
 	ocp@f1000000 {
-		pinctrl: pin-controller@10000 {
+		pinctrl: pinctrl@10000 {
 
-			pinctrl-0 = <&pmx_ram_size &pmx_board_id>;
+			pinctrl-0 = < &pmx_uart0 &pmx_uart1 &pmx_spi
+				      &pmx_twsi0 &pmx_sata0 &pmx_sata1
+				      &pmx_ram_size &pmx_reset_button
+				      &pmx_USB_copy_button &pmx_board_id>;
 			pinctrl-names = "default";
 
 			pmx_ram_size: pmx-ram-size {
@@ -46,20 +38,15 @@
 		compatible = "gpio-keys";
 		#address-cells = <1>;
 		#size-cells = <0>;
-		pinctrl-0 = <&pmx_reset_button &pmx_USB_copy_button>;
-		pinctrl-names = "default";
-
 		button@1 {
 			label = "USB Copy";
-			linux,code = <KEY_COPY>;
-			gpios = <&gpio1 11 GPIO_ACTIVE_LOW>;
+			linux,code = <133>;
+			gpios = <&gpio1 11 1>;
 		};
 		button@2 {
 			label = "Reset";
-			linux,code = <KEY_RESTART>;
-			gpios = <&gpio1 5 GPIO_ACTIVE_LOW>;
+			linux,code = <0x198>;
+			gpios = <&gpio1 5 1>;
 		};
 	};
-};
-
-&ethphy0 { reg = <0>; };
+};
\ No newline at end of file
diff -urNp a/arch/arm/boot/dts/kirkwood-ts219.dtsi b/arch/arm/boot/dts/kirkwood-ts219.dtsi
--- a/arch/arm/boot/dts/kirkwood-ts219.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood-ts219.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,3 +1,5 @@
+/include/ "kirkwood.dtsi"
+
 / {
 	model = "QNAP TS219 family";
 	compatible = "qnap,ts219", "marvell,kirkwood";
@@ -9,17 +11,6 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8";
-		stdout-path = &uart0;
-	};
-
-	mbus {
-		pcie-controller {
-			status = "okay";
-
-			pcie@1,0 {
-				status = "okay";
-			};
-		};
 	};
 
 	ocp@f1000000 {
@@ -33,16 +24,13 @@
 			};
 		};
 		serial@12000 {
+			clock-frequency = <200000000>;
 			status = "okay";
 		};
 		serial@12100 {
+			clock-frequency = <200000000>;
 			status = "okay";
 		};
-		poweroff@12100 {
-			compatible = "qnap,power-off";
-			reg = <0x12000 0x100>;
-			clocks = <&gate_clk 7>;
-		};
 		spi@10600 {
 			status = "okay";
 
@@ -83,25 +71,8 @@
 			};
 		};
 		sata@80000 {
-			pinctrl-0 = <&pmx_sata0 &pmx_sata1>;
-			pinctrl-names = "default";
 			status = "okay";
 			nr-ports = <2>;
 		};
 	};
 };
-
-&mdio {
-	status = "okay";
-
-	ethphy0: ethernet-phy {
-                /* overwrite reg property in board file */
-	};
-};
-
-&eth0 {
-	status = "okay";
-	ethernet0-port@0 {
-		phy-handle = <&ethphy0>;
-	};
-};
diff -urNp a/arch/arm/boot/dts/kirkwood.dtsi b/arch/arm/boot/dts/kirkwood.dtsi
--- a/arch/arm/boot/dts/kirkwood.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kirkwood.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,141 +1,32 @@
 /include/ "skeleton.dtsi"
-#include <dt-bindings/input/input.h>
-#include <dt-bindings/gpio/gpio.h>
-
-#define MBUS_ID(target,attributes) (((target) << 24) | ((attributes) << 16))
 
 / {
 	compatible = "marvell,kirkwood";
 	interrupt-parent = <&intc>;
 
-	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		cpu@0 {
-			device_type = "cpu";
-			compatible = "marvell,feroceon";
-			reg = <0>;
-			clocks = <&core_clk 1>, <&core_clk 3>, <&gate_clk 11>;
-			clock-names = "cpu_clk", "ddrclk", "powersave";
-		};
-	};
-
 	aliases {
 	       gpio0 = &gpio0;
 	       gpio1 = &gpio1;
-	       i2c0 = &i2c0;
 	};
-
-	mbus {
-		compatible = "marvell,kirkwood-mbus", "simple-bus";
-		#address-cells = <2>;
-		#size-cells = <1>;
-		/* If a board file needs to change this ranges it must replace it completely */
-		ranges = <MBUS_ID(0xf0, 0x01) 0 0xf1000000 0x100000	/* internal-regs */
-			  MBUS_ID(0x01, 0x2f) 0 0xf4000000 0x10000	/* nand flash */
-			  MBUS_ID(0x03, 0x01) 0 0xf5000000 0x10000	/* crypto sram */
-			  >;
-		controller = <&mbusc>;
-		pcie-mem-aperture = <0xe0000000 0x10000000>; /* 256 MiB memory space */
-		pcie-io-aperture  = <0xf2000000 0x100000>;   /*   1 MiB    I/O space */
-
-		cesa: crypto@0301 {
-			compatible = "marvell,orion-crypto";
-			reg = <MBUS_ID(0xf0, 0x01) 0x30000 0x10000>,
-			      <MBUS_ID(0x03, 0x01) 0 0x800>;
-			reg-names = "regs", "sram";
-			interrupts = <22>;
-			clocks = <&gate_clk 17>;
-			status = "okay";
-		};
-
-		nand: nand@012f {
-			#address-cells = <1>;
-			#size-cells = <1>;
-			cle = <0>;
-			ale = <1>;
-			bank-width = <1>;
-			compatible = "marvell,orion-nand";
-			reg = <MBUS_ID(0x01, 0x2f) 0 0x400>;
-			chip-delay = <25>;
-			/* set partition map and/or chip-delay in board dts */
-			clocks = <&gate_clk 7>;
-			pinctrl-0 = <&pmx_nand>;
-			pinctrl-names = "default";
-			status = "disabled";
-		};
+	intc: interrupt-controller {
+		compatible = "marvell,orion-intc", "marvell,intc";
+		interrupt-controller;
+		#interrupt-cells = <1>;
+		reg = <0xf1020204 0x04>,
+		      <0xf1020214 0x04>;
 	};
 
 	ocp@f1000000 {
 		compatible = "simple-bus";
-		ranges = <0x00000000 0xf1000000 0x0100000>;
+		ranges = <0x00000000 0xf1000000 0x4000000
+		          0xf5000000 0xf5000000 0x0000400>;
 		#address-cells = <1>;
 		#size-cells = <1>;
 
-		pinctrl: pin-controller@10000 {
-			/* set compatible property in SoC file */
-			reg = <0x10000 0x20>;
-
-			pmx_ge1: pmx-ge1 {
-				marvell,pins = "mpp20", "mpp21", "mpp22", "mpp23",
-					       "mpp24", "mpp25", "mpp26", "mpp27",
-					       "mpp30", "mpp31", "mpp32", "mpp33";
-				marvell,function = "ge1";
-			};
-
-			pmx_nand: pmx-nand {
-				marvell,pins = "mpp0", "mpp1", "mpp2", "mpp3",
-					       "mpp4", "mpp5", "mpp18", "mpp19";
-				marvell,function = "nand";
-			};
-
-			/*
-			 * Default SPI0 pinctrl setting with CSn on mpp0,
-			 * overwrite marvell,pins on board level if required.
-			 */
-			pmx_spi: pmx-spi {
-				marvell,pins = "mpp0", "mpp1", "mpp2", "mpp3";
-				marvell,function = "spi";
-			};
-
-			pmx_twsi0: pmx-twsi0 {
-				marvell,pins = "mpp8", "mpp9";
-				marvell,function = "twsi0";
-			};
-
-			/*
-			 * Default UART pinctrl setting without RTS/CTS,
-			 * overwrite marvell,pins on board level if required.
-			 */
-			pmx_uart0: pmx-uart0 {
-				marvell,pins = "mpp10", "mpp11";
-				marvell,function = "uart0";
-			};
-
-			pmx_uart1: pmx-uart1 {
-				marvell,pins = "mpp13", "mpp14";
-				marvell,function = "uart1";
-			};
-		};
-
 		core_clk: core-clocks@10030 {
 			compatible = "marvell,kirkwood-core-clock";
 			reg = <0x10030 0x4>;
-			#clock-cells = <1>;
-		};
-
-		spi0: spi@10600 {
-			compatible = "marvell,orion-spi";
-			#address-cells = <1>;
-			#size-cells = <0>;
-			cell-index = <0>;
-			interrupts = <23>;
-			reg = <0x10600 0x28>;
-			clocks = <&gate_clk 7>;
-			pinctrl-0 = <&pmx_spi>;
-			pinctrl-names = "default";
-			status = "disabled";
+	        	#clock-cells = <1>;
 		};
 
 		gpio0: gpio@10100 {
@@ -162,58 +53,40 @@
 			clocks = <&gate_clk 7>;
 		};
 
-		i2c0: i2c@11000 {
-			compatible = "marvell,mv64xxx-i2c";
-			reg = <0x11000 0x20>;
-			#address-cells = <1>;
-			#size-cells = <0>;
-			interrupts = <29>;
-			clock-frequency = <100000>;
-			clocks = <&gate_clk 7>;
-			pinctrl-0 = <&pmx_twsi0>;
-			pinctrl-names = "default";
-			status = "disabled";
-		};
-
-		uart0: serial@12000 {
+		serial@12000 {
 			compatible = "ns16550a";
 			reg = <0x12000 0x100>;
 			reg-shift = <2>;
 			interrupts = <33>;
 			clocks = <&gate_clk 7>;
-			pinctrl-0 = <&pmx_uart0>;
-			pinctrl-names = "default";
 			status = "disabled";
 		};
 
-		uart1: serial@12100 {
+		serial@12100 {
 			compatible = "ns16550a";
 			reg = <0x12100 0x100>;
 			reg-shift = <2>;
 			interrupts = <34>;
 			clocks = <&gate_clk 7>;
-			pinctrl-0 = <&pmx_uart1>;
-			pinctrl-names = "default";
 			status = "disabled";
 		};
 
-		mbusc: mbus-controller@20000 {
-			compatible = "marvell,mbus-controller";
-			reg = <0x20000 0x80>, <0x1500 0x20>;
-		};
-
-		sysc: system-controller@20000 {
-			compatible = "marvell,orion-system-controller";
-			reg = <0x20000 0x120>;
+		rtc@10300 {
+			compatible = "marvell,kirkwood-rtc", "marvell,orion-rtc";
+			reg = <0x10300 0x20>;
+			interrupts = <53>;
+			clocks = <&gate_clk 7>;
 		};
 
-		bridge_intc: bridge-interrupt-ctrl@20110 {
-			compatible = "marvell,orion-bridge-intc";
-			interrupt-controller;
-			#interrupt-cells = <1>;
-			reg = <0x20110 0x8>;
-			interrupts = <1>;
-			marvell,#interrupts = <6>;
+		spi@10600 {
+			compatible = "marvell,orion-spi";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			cell-index = <0>;
+			interrupts = <23>;
+			reg = <0x10600 0x28>;
+			clocks = <&gate_clk 7>;
+			status = "disabled";
 		};
 
 		gate_clk: clock-gating-control@2011c {
@@ -223,44 +96,14 @@
 			#clock-cells = <1>;
 		};
 
-		l2: l2-cache@20128 {
-			compatible = "marvell,kirkwood-cache";
-			reg = <0x20128 0x4>;
-		};
-
-		intc: main-interrupt-ctrl@20200 {
-			compatible = "marvell,orion-intc";
-			interrupt-controller;
-			#interrupt-cells = <1>;
-			reg = <0x20200 0x10>, <0x20210 0x10>;
-		};
-
-		timer: timer@20300 {
-			compatible = "marvell,orion-timer";
-			reg = <0x20300 0x20>;
-			interrupt-parent = <&bridge_intc>;
-			interrupts = <1>, <2>;
-			clocks = <&core_clk 0>;
-		};
-
-		wdt: watchdog-timer@20300 {
+		wdt@20300 {
 			compatible = "marvell,orion-wdt";
-			reg = <0x20300 0x28>, <0x20108 0x4>;
-			interrupt-parent = <&bridge_intc>;
-			interrupts = <3>;
+			reg = <0x20300 0x28>;
 			clocks = <&gate_clk 7>;
 			status = "okay";
 		};
 
-		usb0: ehci@50000 {
-			compatible = "marvell,orion-ehci";
-			reg = <0x50000 0x1000>;
-			interrupts = <19>;
-			clocks = <&gate_clk 3>;
-			status = "okay";
-		};
-
-		dma0: xor@60800 {
+		xor@60800 {
 			compatible = "marvell,orion-xor";
 			reg = <0x60800 0x100
 			       0x60A00 0x100>;
@@ -280,10 +123,10 @@
 			};
 		};
 
-		dma1: xor@60900 {
+		xor@60900 {
 			compatible = "marvell,orion-xor";
 			reg = <0x60900 0x100
-			       0x60B00 0x100>;
+			       0xd0B00 0x100>;
 			status = "okay";
 			clocks = <&gate_clk 16>;
 
@@ -300,83 +143,63 @@
 			};
 		};
 
-		eth0: ethernet-controller@72000 {
-			compatible = "marvell,kirkwood-eth";
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <0x72000 0x4000>;
-			clocks = <&gate_clk 0>;
-			marvell,tx-checksum-limit = <1600>;
-			status = "disabled";
+		ehci@50000 {
+			compatible = "marvell,orion-ehci";
+			reg = <0x50000 0x1000>;
+			interrupts = <19>;
+			clocks = <&gate_clk 3>;
+			status = "okay";
+		};
 
-			eth0port: ethernet0-port@0 {
-				compatible = "marvell,kirkwood-eth-port";
-				reg = <0>;
-				interrupts = <11>;
-				/* overwrite MAC address in bootloader */
-				local-mac-address = [00 00 00 00 00 00];
-				/* set phy-handle property in board file */
-			};
+		sata@80000 {
+			compatible = "marvell,orion-sata";
+			reg = <0x80000 0x5000>;
+			interrupts = <21>;
+			clocks = <&gate_clk 14>, <&gate_clk 15>;
+			clock-names = "0", "1";
+			status = "disabled";
 		};
 
-		mdio: mdio-bus@72004 {
-			compatible = "marvell,orion-mdio";
+		nand@3000000 {
 			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <0x72004 0x84>;
-			interrupts = <46>;
-			clocks = <&gate_clk 0>;
+			#size-cells = <1>;
+			cle = <0>;
+			ale = <1>;
+			bank-width = <1>;
+			compatible = "marvell,orion-nand";
+			reg = <0x3000000 0x400>;
+			chip-delay = <25>;
+			/* set partition map and/or chip-delay in board dts */
+			clocks = <&gate_clk 7>;
 			status = "disabled";
-
-			/* add phy nodes in board file */
 		};
 
-		eth1: ethernet-controller@76000 {
-			compatible = "marvell,kirkwood-eth";
+		i2c@11000 {
+			compatible = "marvell,mv64xxx-i2c";
+			reg = <0x11000 0x20>;
 			#address-cells = <1>;
 			#size-cells = <0>;
-			reg = <0x76000 0x4000>;
-			clocks = <&gate_clk 19>;
-			marvell,tx-checksum-limit = <1600>;
-			pinctrl-0 = <&pmx_ge1>;
-			pinctrl-names = "default";
+			interrupts = <29>;
+			clock-frequency = <100000>;
+			clocks = <&gate_clk 7>;
 			status = "disabled";
+		};
 
-			eth1port: ethernet1-port@0 {
-				compatible = "marvell,kirkwood-eth-port";
-				reg = <0>;
-				interrupts = <15>;
-				/* overwrite MAC address in bootloader */
-				local-mac-address = [00 00 00 00 00 00];
-				/* set phy-handle property in board file */
-			};
+		crypto@30000 {
+			compatible = "marvell,orion-crypto";
+			reg = <0x30000 0x10000>,
+			      <0xf5000000 0x800>;
+			reg-names = "regs", "sram";
+			interrupts = <22>;
+			clocks = <&gate_clk 17>;
+			status = "okay";
 		};
 
-		sata_phy0: sata-phy@82000 {
-			compatible = "marvell,mvebu-sata-phy";
-			reg = <0x82000 0x0334>;
-			clocks = <&gate_clk 14>;
-			clock-names = "sata";
-			#phy-cells = <0>;
-			status = "ok";
-		};
-
-		sata_phy1: sata-phy@84000 {
-			compatible = "marvell,mvebu-sata-phy";
-			reg = <0x84000 0x0334>;
-			clocks = <&gate_clk 15>;
-			clock-names = "sata";
-			#phy-cells = <0>;
-			status = "ok";
-		};
-
-		audio0: audio-controller@a0000 {
-			compatible = "marvell,kirkwood-audio";
-			#sound-dai-cells = <0>;
-			reg = <0xa0000 0x2210>;
-			interrupts = <24>;
-			clocks = <&gate_clk 9>;
-			clock-names = "internal";
+		mvsdio@90000 {
+			compatible = "marvell,orion-sdio";
+			reg = <0x90000 0x200>;
+			interrupts = <28>;
+			clocks = <&gate_clk 4>;
 			status = "disabled";
 		};
 	};
diff -urNp a/arch/arm/boot/dts/kizbox.dts b/arch/arm/boot/dts/kizbox.dts
--- a/arch/arm/boot/dts/kizbox.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/kizbox.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2.
  */
 /dts-v1/;
-#include "at91sam9g20.dtsi"
+/include/ "at91sam9g20.dtsi"
 
 / {
 
@@ -30,10 +30,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <18432000>;
 		};
-
-		main_xtal {
-			clock-frequency = <18432000>;
-		};
 	};
 
 	ahb {
@@ -57,12 +53,6 @@
 				status = "okay";
 			};
 
-			watchdog@fffffd40 {
-				timeout-sec = <15>;
-				atmel,max-heartbeat-sec = <16>;
-				atmel,min-heartbeat-sec = <0>;
-				status = "okay";
-			};
 		};
 
 		nand0: nand@40000000 {
@@ -104,26 +94,26 @@
 
 		led1g {
 			label = "led1:green";
-			gpios = <&pioB 0 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 0 1>;
 			linux,default-trigger = "none";
 		};
 
 		led1r {
 			label = "led1:red";
-			gpios = <&pioB 1 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 1 1>;
 			linux,default-trigger = "none";
 		};
 
 		led2g {
 			label = "led2:green";
-			gpios = <&pioB 2 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 2 1>;
 			linux,default-trigger = "none";
 			default-state = "on";
 		};
 
 		led2r {
 			label = "led2:red";
-			gpios = <&pioB 3 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 3 1>;
 			linux,default-trigger = "none";
 		};
 	};
@@ -135,16 +125,16 @@
 
 		reset {
 			label = "reset";
-			gpios = <&pioB 30 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 30 1>;
 			linux,code = <0x100>;
 			gpio-key,wakeup;
 		};
 
 		mode {
 			label = "mode";
-			gpios = <&pioB 31 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 31 1>;
 			linux,code = <0x101>;
 			gpio-key,wakeup;
 		};
 	};
-};
+};
\ No newline at end of file
diff -urNp a/arch/arm/boot/dts/lpc32xx.dtsi b/arch/arm/boot/dts/lpc32xx.dtsi
--- a/arch/arm/boot/dts/lpc32xx.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/lpc32xx.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -18,12 +18,8 @@
 	interrupt-parent = <&mic>;
 
 	cpus {
-		#address-cells = <0>;
-		#size-cells = <0>;
-
-		cpu {
-			compatible = "arm,arm926ej-s";
-			device_type = "cpu";
+		cpu@0 {
+			compatible = "arm,arm926ejs";
 		};
 	};
 
diff -urNp a/arch/arm/boot/dts/marco-evb.dts b/arch/arm/boot/dts/marco-evb.dts
--- a/arch/arm/boot/dts/marco-evb.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/marco-evb.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,54 @@
+/*
+ * DTS file for CSR SiRFmarco Evaluation Board
+ *
+ * Copyright (c) 2012 Cambridge Silicon Radio Limited, a CSR plc group company.
+ *
+ * Licensed under GPLv2 or later.
+ */
+
+/dts-v1/;
+
+/include/ "marco.dtsi"
+
+/ {
+	model = "CSR SiRFmarco Evaluation Board";
+	compatible = "sirf,marco-cb", "sirf,marco";
+
+	memory {
+		reg = <0x40000000 0x60000000>;
+	};
+
+	axi {
+		peri-iobg {
+			uart1: uart@cc060000 {
+				status = "okay";
+			};
+			uart2: uart@cc070000 {
+				status = "okay";
+			};
+			i2c0: i2c@cc0e0000 {
+			      status = "okay";
+			      fpga-cpld@4d {
+				      compatible = "sirf,fpga-cpld";
+				      reg = <0x4d>;
+			      };
+			};
+			spi1: spi@cc170000 {
+				status = "okay";
+				pinctrl-names = "default";
+				pinctrl-0 = <&spi1_pins_a>;
+				spi@0 {
+					compatible = "spidev";
+					reg = <0>;
+					spi-max-frequency = <1000000>;
+				};
+			};
+			pci-iobg {
+				sd0: sdhci@cd000000 {
+					bus-width = <8>;
+					status = "okay";
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/marco.dtsi b/arch/arm/boot/dts/marco.dtsi
--- a/arch/arm/boot/dts/marco.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/marco.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,756 @@
+/*
+ * DTS file for CSR SiRFmarco SoC
+ *
+ * Copyright (c) 2012 Cambridge Silicon Radio Limited, a CSR plc group company.
+ *
+ * Licensed under GPLv2 or later.
+ */
+
+/include/ "skeleton.dtsi"
+/ {
+	compatible = "sirf,marco";
+	#address-cells = <1>;
+	#size-cells = <1>;
+	interrupt-parent = <&gic>;
+
+	cpus {
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		cpu@0 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <0>;
+		};
+		cpu@1 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <1>;
+		};
+	};
+
+	axi {
+		compatible = "simple-bus";
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges = <0x40000000 0x40000000 0xa0000000>;
+
+		l2-cache-controller@c0030000 {
+			compatible = "sirf,marco-pl310-cache", "arm,pl310-cache";
+			reg = <0xc0030000 0x1000>;
+			interrupts = <0 59 0>;
+			arm,tag-latency = <1 1 1>;
+			arm,data-latency = <1 1 1>;
+			arm,filter-ranges = <0x40000000 0x80000000>;
+		};
+
+		gic: interrupt-controller@c0011000 {
+			compatible = "arm,cortex-a9-gic";
+			interrupt-controller;
+			#interrupt-cells = <3>;
+			reg = <0xc0011000 0x1000>,
+			      <0xc0010100 0x0100>;
+		};
+
+		rstc-iobg {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xc2000000 0xc2000000 0x1000000>;
+
+			reset-controller@c2000000 {
+				compatible = "sirf,marco-rstc";
+				reg = <0xc2000000 0x10000>;
+			};
+		};
+
+		sys-iobg {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xc3000000 0xc3000000 0x1000000>;
+
+			clock-controller@c3000000 {
+				compatible = "sirf,marco-clkc";
+				reg = <0xc3000000 0x1000>;
+				interrupts = <0 3 0>;
+			};
+
+			rsc-controller@c3010000 {
+				compatible = "sirf,marco-rsc";
+				reg = <0xc3010000 0x1000>;
+			};
+		};
+
+		mem-iobg {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xc4000000 0xc4000000 0x1000000>;
+
+			memory-controller@c4000000 {
+				compatible = "sirf,marco-memc";
+				reg = <0xc4000000 0x10000>;
+				interrupts = <0 27 0>;
+			};
+		};
+
+		disp-iobg0 {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xc5000000 0xc5000000 0x1000000>;
+
+			display0@c5000000 {
+				compatible = "sirf,marco-lcd";
+				reg = <0xc5000000 0x10000>;
+				interrupts = <0 30 0>;
+			};
+
+			vpp0@c5010000 {
+				compatible = "sirf,marco-vpp";
+				reg = <0xc5010000 0x10000>;
+				interrupts = <0 31 0>;
+			};
+		};
+
+		disp-iobg1 {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xc6000000 0xc6000000 0x1000000>;
+
+			display1@c6000000 {
+				compatible = "sirf,marco-lcd";
+				reg = <0xc6000000 0x10000>;
+				interrupts = <0 62 0>;
+			};
+
+			vpp1@c6010000 {
+				compatible = "sirf,marco-vpp";
+				reg = <0xc6010000 0x10000>;
+				interrupts = <0 63 0>;
+			};
+		};
+
+		graphics-iobg {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xc8000000 0xc8000000 0x1000000>;
+
+			graphics@c8000000 {
+				compatible = "powervr,sgx540";
+				reg = <0xc8000000 0x1000000>;
+				interrupts = <0 6 0>;
+			};
+		};
+
+		multimedia-iobg {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xc9000000 0xc9000000 0x1000000>;
+
+			multimedia@a0000000 {
+				compatible = "sirf,marco-video-codec";
+				reg = <0xc9000000 0x1000000>;
+				interrupts = <0 5 0>;
+			};
+		};
+
+		dsp-iobg {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xca000000 0xca000000 0x2000000>;
+
+			dspif@ca000000 {
+				compatible = "sirf,marco-dspif";
+				reg = <0xca000000 0x10000>;
+				interrupts = <0 9 0>;
+			};
+
+			gps@ca010000 {
+				compatible = "sirf,marco-gps";
+				reg = <0xca010000 0x10000>;
+				interrupts = <0 7 0>;
+			};
+
+			dsp@cb000000 {
+				compatible = "sirf,marco-dsp";
+				reg = <0xcb000000 0x1000000>;
+				interrupts = <0 8 0>;
+			};
+		};
+
+		peri-iobg {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xcc000000 0xcc000000 0x2000000>;
+
+			timer@cc020000 {
+				compatible = "sirf,marco-tick";
+				reg = <0xcc020000 0x1000>;
+				interrupts = <0 0 0>,
+					   <0 1 0>,
+					   <0 2 0>,
+					   <0 49 0>,
+					   <0 50 0>,
+					   <0 51 0>;
+			};
+
+			nand@cc030000 {
+				compatible = "sirf,marco-nand";
+				reg = <0xcc030000 0x10000>;
+				interrupts = <0 41 0>;
+			};
+
+			audio@cc040000 {
+				compatible = "sirf,marco-audio";
+				reg = <0xcc040000 0x10000>;
+				interrupts = <0 35 0>;
+			};
+
+			uart0: uart@cc050000 {
+				cell-index = <0>;
+				compatible = "sirf,marco-uart";
+				reg = <0xcc050000 0x1000>;
+				interrupts = <0 17 0>;
+				fifosize = <128>;
+				status = "disabled";
+			};
+
+			uart1: uart@cc060000 {
+				cell-index = <1>;
+				compatible = "sirf,marco-uart";
+				reg = <0xcc060000 0x1000>;
+				interrupts = <0 18 0>;
+				fifosize = <32>;
+				status = "disabled";
+			};
+
+			uart2: uart@cc070000 {
+				cell-index = <2>;
+				compatible = "sirf,marco-uart";
+				reg = <0xcc070000 0x1000>;
+				interrupts = <0 19 0>;
+				fifosize = <128>;
+				status = "disabled";
+			};
+
+			uart3: uart@cc190000 {
+				cell-index = <3>;
+				compatible = "sirf,marco-uart";
+				reg = <0xcc190000 0x1000>;
+				interrupts = <0 66 0>;
+				fifosize = <128>;
+				status = "disabled";
+			};
+
+			uart4: uart@cc1a0000 {
+				cell-index = <4>;
+				compatible = "sirf,marco-uart";
+				reg = <0xcc1a0000 0x1000>;
+				interrupts = <0 69 0>;
+				fifosize = <128>;
+				status = "disabled";
+			};
+
+			usp0: usp@cc080000 {
+				cell-index = <0>;
+				compatible = "sirf,marco-usp";
+				reg = <0xcc080000 0x10000>;
+				interrupts = <0 20 0>;
+				status = "disabled";
+			};
+
+			usp1: usp@cc090000 {
+				cell-index = <1>;
+				compatible = "sirf,marco-usp";
+				reg = <0xcc090000 0x10000>;
+				interrupts = <0 21 0>;
+				status = "disabled";
+			};
+
+			usp2: usp@cc0a0000 {
+				cell-index = <2>;
+				compatible = "sirf,marco-usp";
+				reg = <0xcc0a0000 0x10000>;
+				interrupts = <0 22 0>;
+				status = "disabled";
+			};
+
+			dmac0: dma-controller@cc0b0000 {
+				cell-index = <0>;
+				compatible = "sirf,marco-dmac";
+				reg = <0xcc0b0000 0x10000>;
+				interrupts = <0 12 0>;
+			};
+
+			dmac1: dma-controller@cc160000 {
+				cell-index = <1>;
+				compatible = "sirf,marco-dmac";
+				reg = <0xcc160000 0x10000>;
+				interrupts = <0 13 0>;
+			};
+
+			vip@cc0c0000 {
+				compatible = "sirf,marco-vip";
+				reg = <0xcc0c0000 0x10000>;
+			};
+
+			spi0: spi@cc0d0000 {
+				cell-index = <0>;
+				compatible = "sirf,marco-spi";
+				reg = <0xcc0d0000 0x10000>;
+				interrupts = <0 15 0>;
+				sirf,spi-num-chipselects = <1>;
+				cs-gpios = <&gpio 0 0>;
+				sirf,spi-dma-rx-channel = <25>;
+				sirf,spi-dma-tx-channel = <20>;
+				#address-cells = <1>;
+				#size-cells = <0>;
+				status = "disabled";
+			};
+
+			spi1: spi@cc170000 {
+				cell-index = <1>;
+				compatible = "sirf,marco-spi";
+				reg = <0xcc170000 0x10000>;
+				interrupts = <0 16 0>;
+				sirf,spi-num-chipselects = <1>;
+				cs-gpios = <&gpio 0 0>;
+				sirf,spi-dma-rx-channel = <12>;
+				sirf,spi-dma-tx-channel = <13>;
+				#address-cells = <1>;
+				#size-cells = <0>;
+				status = "disabled";
+			};
+
+			i2c0: i2c@cc0e0000 {
+				cell-index = <0>;
+				compatible = "sirf,marco-i2c";
+				reg = <0xcc0e0000 0x10000>;
+				interrupts = <0 24 0>;
+				#address-cells = <1>;
+				#size-cells = <0>;
+				status = "disabled";
+			};
+
+			i2c1: i2c@cc0f0000 {
+				cell-index = <1>;
+				compatible = "sirf,marco-i2c";
+				reg = <0xcc0f0000 0x10000>;
+				interrupts = <0 25 0>;
+				#address-cells = <1>;
+				#size-cells = <0>;
+				status = "disabled";
+			};
+
+			tsc@cc110000 {
+				compatible = "sirf,marco-tsc";
+				reg = <0xcc110000 0x10000>;
+				interrupts = <0 33 0>;
+			};
+
+			gpio: pinctrl@cc120000 {
+				#gpio-cells = <2>;
+				#interrupt-cells = <2>;
+				compatible = "sirf,marco-pinctrl";
+				reg = <0xcc120000 0x10000>;
+				interrupts = <0 43 0>,
+					   <0 44 0>,
+					   <0 45 0>,
+					   <0 46 0>,
+					   <0 47 0>;
+				gpio-controller;
+				interrupt-controller;
+
+				lcd_16pins_a: lcd0_0 {
+					lcd {
+						sirf,pins = "lcd_16bitsgrp";
+						sirf,function = "lcd_16bits";
+					};
+				};
+				lcd_18pins_a: lcd0_1 {
+					lcd {
+						sirf,pins = "lcd_18bitsgrp";
+						sirf,function = "lcd_18bits";
+					};
+				};
+				lcd_24pins_a: lcd0_2 {
+					lcd {
+						sirf,pins = "lcd_24bitsgrp";
+						sirf,function = "lcd_24bits";
+					};
+				};
+				lcdrom_pins_a: lcdrom0_0 {
+					lcd {
+						sirf,pins = "lcdromgrp";
+						sirf,function = "lcdrom";
+					};
+				};
+				uart0_pins_a: uart0_0 {
+					uart {
+						sirf,pins = "uart0grp";
+						sirf,function = "uart0";
+					};
+				};
+				uart1_pins_a: uart1_0 {
+					uart {
+						sirf,pins = "uart1grp";
+						sirf,function = "uart1";
+					};
+				};
+				uart2_pins_a: uart2_0 {
+					uart {
+						sirf,pins = "uart2grp";
+						sirf,function = "uart2";
+					};
+				};
+				uart2_noflow_pins_a: uart2_1 {
+					uart {
+						sirf,pins = "uart2_nostreamctrlgrp";
+						sirf,function = "uart2_nostreamctrl";
+					};
+				};
+				spi0_pins_a: spi0_0 {
+					spi {
+						sirf,pins = "spi0grp";
+						sirf,function = "spi0";
+					};
+				};
+				spi1_pins_a: spi1_0 {
+					spi {
+						sirf,pins = "spi1grp";
+						sirf,function = "spi1";
+					};
+				};
+				i2c0_pins_a: i2c0_0 {
+					i2c {
+						sirf,pins = "i2c0grp";
+						sirf,function = "i2c0";
+					};
+				};
+				i2c1_pins_a: i2c1_0 {
+					i2c {
+						sirf,pins = "i2c1grp";
+						sirf,function = "i2c1";
+					};
+				};
+				pwm0_pins_a: pwm0_0 {
+				        pwm {
+				                sirf,pins = "pwm0grp";
+				                sirf,function = "pwm0";
+				        };
+				};
+				pwm1_pins_a: pwm1_0 {
+				        pwm {
+				                sirf,pins = "pwm1grp";
+				                sirf,function = "pwm1";
+				        };
+				};
+				pwm2_pins_a: pwm2_0 {
+				        pwm {
+				                sirf,pins = "pwm2grp";
+				                sirf,function = "pwm2";
+				        };
+				};
+				pwm3_pins_a: pwm3_0 {
+				        pwm {
+				                sirf,pins = "pwm3grp";
+				                sirf,function = "pwm3";
+				        };
+				};
+				gps_pins_a: gps_0 {
+				        gps {
+				                sirf,pins = "gpsgrp";
+				                sirf,function = "gps";
+				        };
+				};
+				vip_pins_a: vip_0 {
+				        vip {
+				                sirf,pins = "vipgrp";
+				                sirf,function = "vip";
+				        };
+				};
+				sdmmc0_pins_a: sdmmc0_0 {
+				        sdmmc0 {
+				                sirf,pins = "sdmmc0grp";
+				                sirf,function = "sdmmc0";
+				        };
+				};
+				sdmmc1_pins_a: sdmmc1_0 {
+				        sdmmc1 {
+				                sirf,pins = "sdmmc1grp";
+				                sirf,function = "sdmmc1";
+				        };
+				};
+				sdmmc2_pins_a: sdmmc2_0 {
+				        sdmmc2 {
+				                sirf,pins = "sdmmc2grp";
+				                sirf,function = "sdmmc2";
+				        };
+				};
+				sdmmc3_pins_a: sdmmc3_0 {
+				        sdmmc3 {
+				                sirf,pins = "sdmmc3grp";
+				                sirf,function = "sdmmc3";
+				        };
+				};
+				sdmmc4_pins_a: sdmmc4_0 {
+				        sdmmc4 {
+				                sirf,pins = "sdmmc4grp";
+				                sirf,function = "sdmmc4";
+				        };
+				};
+				sdmmc5_pins_a: sdmmc5_0 {
+				        sdmmc5 {
+				                sirf,pins = "sdmmc5grp";
+				                sirf,function = "sdmmc5";
+				        };
+				};
+				i2s_pins_a: i2s_0 {
+				        i2s {
+				                sirf,pins = "i2sgrp";
+				                sirf,function = "i2s";
+				        };
+				};
+				ac97_pins_a: ac97_0 {
+				        ac97 {
+				                sirf,pins = "ac97grp";
+				                sirf,function = "ac97";
+				        };
+				};
+				nand_pins_a: nand_0 {
+				        nand {
+				                sirf,pins = "nandgrp";
+				                sirf,function = "nand";
+				        };
+				};
+				usp0_pins_a: usp0_0 {
+				        usp0 {
+				                sirf,pins = "usp0grp";
+				                sirf,function = "usp0";
+				        };
+				};
+				usp1_pins_a: usp1_0 {
+				        usp1 {
+				                sirf,pins = "usp1grp";
+				                sirf,function = "usp1";
+				        };
+				};
+				usp2_pins_a: usp2_0 {
+				        usp2 {
+				                sirf,pins = "usp2grp";
+				                sirf,function = "usp2";
+				        };
+				};
+				usb0_utmi_drvbus_pins_a: usb0_utmi_drvbus_0 {
+				        usb0_utmi_drvbus {
+				                sirf,pins = "usb0_utmi_drvbusgrp";
+				                sirf,function = "usb0_utmi_drvbus";
+				        };
+				};
+				usb1_utmi_drvbus_pins_a: usb1_utmi_drvbus_0 {
+				        usb1_utmi_drvbus {
+				                sirf,pins = "usb1_utmi_drvbusgrp";
+				                sirf,function = "usb1_utmi_drvbus";
+				        };
+				};
+				warm_rst_pins_a: warm_rst_0 {
+				        warm_rst {
+				                sirf,pins = "warm_rstgrp";
+				                sirf,function = "warm_rst";
+				        };
+				};
+				pulse_count_pins_a: pulse_count_0 {
+				        pulse_count {
+				                sirf,pins = "pulse_countgrp";
+				                sirf,function = "pulse_count";
+				        };
+				};
+				cko0_rst_pins_a: cko0_rst_0 {
+				        cko0_rst {
+				                sirf,pins = "cko0_rstgrp";
+				                sirf,function = "cko0_rst";
+				        };
+				};
+				cko1_rst_pins_a: cko1_rst_0 {
+				        cko1_rst {
+				                sirf,pins = "cko1_rstgrp";
+				                sirf,function = "cko1_rst";
+				        };
+				};
+			};
+
+			pwm@cc130000 {
+				compatible = "sirf,marco-pwm";
+				reg = <0xcc130000 0x10000>;
+			};
+
+			efusesys@cc140000 {
+				compatible = "sirf,marco-efuse";
+				reg = <0xcc140000 0x10000>;
+			};
+
+			pulsec@cc150000 {
+				compatible = "sirf,marco-pulsec";
+				reg = <0xcc150000 0x10000>;
+				interrupts = <0 48 0>;
+			};
+
+			pci-iobg {
+				compatible = "sirf,marco-pciiobg", "simple-bus";
+				#address-cells = <1>;
+				#size-cells = <1>;
+				ranges = <0xcd000000 0xcd000000 0x1000000>;
+
+				sd0: sdhci@cd000000 {
+					cell-index = <0>;
+					compatible = "sirf,marco-sdhc";
+					reg = <0xcd000000 0x100000>;
+					interrupts = <0 38 0>;
+					status = "disabled";
+				};
+
+				sd1: sdhci@cd100000 {
+					cell-index = <1>;
+					compatible = "sirf,marco-sdhc";
+					reg = <0xcd100000 0x100000>;
+					interrupts = <0 38 0>;
+					status = "disabled";
+				};
+
+				sd2: sdhci@cd200000 {
+					cell-index = <2>;
+					compatible = "sirf,marco-sdhc";
+					reg = <0xcd200000 0x100000>;
+					interrupts = <0 23 0>;
+					status = "disabled";
+				};
+
+				sd3: sdhci@cd300000 {
+					cell-index = <3>;
+					compatible = "sirf,marco-sdhc";
+					reg = <0xcd300000 0x100000>;
+					interrupts = <0 23 0>;
+					status = "disabled";
+				};
+
+				sd4: sdhci@cd400000 {
+					cell-index = <4>;
+					compatible = "sirf,marco-sdhc";
+					reg = <0xcd400000 0x100000>;
+					interrupts = <0 39 0>;
+					status = "disabled";
+				};
+
+				sd5: sdhci@cd500000 {
+					cell-index = <5>;
+					compatible = "sirf,marco-sdhc";
+					reg = <0xcd500000 0x100000>;
+					interrupts = <0 39 0>;
+					status = "disabled";
+				};
+
+				pci-copy@cd900000 {
+					compatible = "sirf,marco-pcicp";
+					reg = <0xcd900000 0x100000>;
+					interrupts = <0 40 0>;
+				};
+
+				rom-interface@cda00000 {
+					compatible = "sirf,marco-romif";
+					reg = <0xcda00000 0x100000>;
+				};
+			};
+		};
+
+		rtc-iobg {
+			compatible = "sirf,marco-rtciobg", "sirf-marco-rtciobg-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			reg = <0xc1000000 0x10000>;
+
+			gpsrtc@1000 {
+				compatible = "sirf,marco-gpsrtc";
+				reg = <0x1000 0x1000>;
+				interrupts = <0 55 0>,
+					   <0 56 0>,
+					   <0 57 0>;
+			};
+
+			sysrtc@2000 {
+				compatible = "sirf,marco-sysrtc";
+				reg = <0x2000 0x1000>;
+				interrupts = <0 52 0>,
+					   <0 53 0>,
+					   <0 54 0>;
+			};
+
+			pwrc@3000 {
+				compatible = "sirf,marco-pwrc";
+				reg = <0x3000 0x1000>;
+				interrupts = <0 32 0>;
+			};
+		};
+
+		uus-iobg {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xce000000 0xce000000 0x1000000>;
+
+			usb0: usb@ce000000 {
+				compatible = "chipidea,ci13611a-marco";
+				reg = <0xce000000 0x10000>;
+				interrupts = <0 10 0>;
+			};
+
+			usb1: usb@ce010000 {
+				compatible = "chipidea,ci13611a-marco";
+				reg = <0xce010000 0x10000>;
+				interrupts = <0 11 0>;
+			};
+
+			security@ce020000 {
+				compatible = "sirf,marco-security";
+				reg = <0xce020000 0x10000>;
+				interrupts = <0 42 0>;
+			};
+		};
+
+		can-iobg {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xd0000000 0xd0000000 0x1000000>;
+
+			can0: can@d0000000 {
+				compatible = "sirf,marco-can";
+				reg = <0xd0000000 0x10000>;
+			};
+
+			can1: can@d0010000 {
+				compatible = "sirf,marco-can";
+				reg = <0xd0010000 0x10000>;
+			};
+		};
+
+		lvds-iobg {
+			compatible = "simple-bus";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges = <0xd1000000 0xd1000000 0x1000000>;
+
+			lvds@d1000000 {
+				compatible = "sirf,marco-lvds";
+				reg = <0xd1000000 0x10000>;
+				interrupts = <0 64 0>;
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/mmp2-brownstone.dts b/arch/arm/boot/dts/mmp2-brownstone.dts
--- a/arch/arm/boot/dts/mmp2-brownstone.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/mmp2-brownstone.dts	2015-10-27 00:45:05.000000000 +0000
@@ -8,7 +8,7 @@
  */
 
 /dts-v1/;
-#include "mmp2.dtsi"
+/include/ "mmp2.dtsi"
 
 / {
 	model = "Marvell MMP2 Brownstone Development Board";
diff -urNp a/arch/arm/boot/dts/mmp2.dtsi b/arch/arm/boot/dts/mmp2.dtsi
--- a/arch/arm/boot/dts/mmp2.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/mmp2.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,7 @@
  *  publishhed by the Free Software Foundation.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/clock/marvell,mmp2.h>
+/include/ "skeleton.dtsi"
 
 / {
 	aliases {
@@ -136,8 +135,6 @@
 				compatible = "mrvl,mmp-uart";
 				reg = <0xd4030000 0x1000>;
 				interrupts = <27>;
-				clocks = <&soc_clocks MMP2_CLK_UART0>;
-				resets = <&soc_clocks MMP2_CLK_UART0>;
 				status = "disabled";
 			};
 
@@ -145,8 +142,6 @@
 				compatible = "mrvl,mmp-uart";
 				reg = <0xd4017000 0x1000>;
 				interrupts = <28>;
-				clocks = <&soc_clocks MMP2_CLK_UART1>;
-				resets = <&soc_clocks MMP2_CLK_UART1>;
 				status = "disabled";
 			};
 
@@ -154,8 +149,6 @@
 				compatible = "mrvl,mmp-uart";
 				reg = <0xd4018000 0x1000>;
 				interrupts = <24>;
-				clocks = <&soc_clocks MMP2_CLK_UART2>;
-				resets = <&soc_clocks MMP2_CLK_UART2>;
 				status = "disabled";
 			};
 
@@ -163,8 +156,6 @@
 				compatible = "mrvl,mmp-uart";
 				reg = <0xd4016000 0x1000>;
 				interrupts = <46>;
-				clocks = <&soc_clocks MMP2_CLK_UART3>;
-				resets = <&soc_clocks MMP2_CLK_UART3>;
 				status = "disabled";
 			};
 
@@ -177,8 +168,6 @@
 				#gpio-cells = <2>;
 				interrupts = <49>;
 				interrupt-names = "gpio_mux";
-				clocks = <&soc_clocks MMP2_CLK_GPIO>;
-				resets = <&soc_clocks MMP2_CLK_GPIO>;
 				interrupt-controller;
 				#interrupt-cells = <1>;
 				ranges;
@@ -212,8 +201,6 @@
 				compatible = "mrvl,mmp-twsi";
 				reg = <0xd4011000 0x1000>;
 				interrupts = <7>;
-				clocks = <&soc_clocks MMP2_CLK_TWSI0>;
-				resets = <&soc_clocks MMP2_CLK_TWSI0>;
 				#address-cells = <1>;
 				#size-cells = <0>;
 				mrvl,i2c-fast-mode;
@@ -224,8 +211,6 @@
 				compatible = "mrvl,mmp-twsi";
 				reg = <0xd4025000 0x1000>;
 				interrupts = <58>;
-				clocks = <&soc_clocks MMP2_CLK_TWSI1>;
-				resets = <&soc_clocks MMP2_CLK_TWSI1>;
 				status = "disabled";
 			};
 
@@ -235,20 +220,8 @@
 				interrupts = <1 0>;
 				interrupt-names = "rtc 1Hz", "rtc alarm";
 				interrupt-parent = <&intcmux5>;
-				clocks = <&soc_clocks MMP2_CLK_RTC>;
-				resets = <&soc_clocks MMP2_CLK_RTC>;
 				status = "disabled";
 			};
 		};
-
-		soc_clocks: clocks{
-			compatible = "marvell,mmp2-clock";
-			reg = <0xd4050000 0x1000>,
-			      <0xd4282800 0x400>,
-			      <0xd4015000 0x1000>;
-			reg-names = "mpmu", "apmu", "apbc";
-			#clock-cells = <1>;
-			#reset-cells = <1>;
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/mpa1600.dts b/arch/arm/boot/dts/mpa1600.dts
--- a/arch/arm/boot/dts/mpa1600.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/mpa1600.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2 only
  */
 /dts-v1/;
-#include "at91rm9200.dtsi"
+/include/ "at91rm9200.dtsi"
 
 / {
 	model = "Phontech MPA 1600";
@@ -25,14 +25,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <18432000>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <18432000>;
-		};
 	};
 
 	ahb {
@@ -70,7 +62,7 @@
 
 		monitor_mute {
 			label = "Monitor mute";
-			gpios = <&pioC 1 GPIO_ACTIVE_LOW>;
+			gpios = <&pioC 1 1>;
 			linux,code = <113>;
 		};
 	};
diff -urNp a/arch/arm/boot/dts/msm8660-surf.dts b/arch/arm/boot/dts/msm8660-surf.dts
--- a/arch/arm/boot/dts/msm8660-surf.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/msm8660-surf.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,41 @@
+/dts-v1/;
+
+/include/ "skeleton.dtsi"
+
+/ {
+	model = "Qualcomm MSM8660 SURF";
+	compatible = "qcom,msm8660-surf", "qcom,msm8660";
+	interrupt-parent = <&intc>;
+
+	intc: interrupt-controller@2080000 {
+		compatible = "qcom,msm-8660-qgic";
+		interrupt-controller;
+		#interrupt-cells = <3>;
+		reg = < 0x02080000 0x1000 >,
+		      < 0x02081000 0x1000 >;
+	};
+
+	timer@2000004 {
+		compatible = "qcom,scss-timer", "qcom,msm-timer";
+		interrupts = <1 0 0x301>,
+			     <1 1 0x301>,
+			     <1 2 0x301>;
+		reg = <0x02000000 0x100>;
+		clock-frequency = <27000000>,
+				  <32768>;
+		cpu-offset = <0x40000>;
+	};
+
+	serial@19c400000 {
+		compatible = "qcom,msm-hsuart", "qcom,msm-uart";
+		reg = <0x19c40000 0x1000>,
+		      <0x19c00000 0x1000>;
+		interrupts = <0 195 0x0>;
+	};
+
+	qcom,ssbi@500000 {
+		compatible = "qcom,ssbi";
+		reg = <0x500000 0x1000>;
+		qcom,controller-type = "pmic-arbiter";
+	};
+};
diff -urNp a/arch/arm/boot/dts/msm8960-cdp.dts b/arch/arm/boot/dts/msm8960-cdp.dts
--- a/arch/arm/boot/dts/msm8960-cdp.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/msm8960-cdp.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,41 @@
+/dts-v1/;
+
+/include/ "skeleton.dtsi"
+
+/ {
+	model = "Qualcomm MSM8960 CDP";
+	compatible = "qcom,msm8960-cdp", "qcom,msm8960";
+	interrupt-parent = <&intc>;
+
+	intc: interrupt-controller@2000000 {
+		compatible = "qcom,msm-qgic2";
+		interrupt-controller;
+		#interrupt-cells = <3>;
+		reg = < 0x02000000 0x1000 >,
+		      < 0x02002000 0x1000 >;
+	};
+
+	timer@200a000 {
+		compatible = "qcom,kpss-timer", "qcom,msm-timer";
+		interrupts = <1 1 0x301>,
+			     <1 2 0x301>,
+			     <1 3 0x301>;
+		reg = <0x0200a000 0x100>;
+		clock-frequency = <27000000>,
+				  <32768>;
+		cpu-offset = <0x80000>;
+	};
+
+	serial@19c400000 {
+		compatible = "qcom,msm-hsuart", "qcom,msm-uart";
+		reg = <0x16440000 0x1000>,
+		      <0x16400000 0x1000>;
+		interrupts = <0 154 0x0>;
+	};
+
+	qcom,ssbi@500000 {
+		compatible = "qcom,ssbi";
+		reg = <0x500000 0x1000>;
+		qcom,controller-type = "pmic-arbiter";
+	};
+};
diff -urNp a/arch/arm/boot/dts/omap2.dtsi b/arch/arm/boot/dts/omap2.dtsi
--- a/arch/arm/boot/dts/omap2.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap2.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,11 +8,7 @@
  * kind, whether express or implied.
  */
 
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/pinctrl/omap.h>
-
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	compatible = "ti,omap2430", "ti,omap2420", "ti,omap2";
@@ -22,17 +18,11 @@
 		serial0 = &uart1;
 		serial1 = &uart2;
 		serial2 = &uart3;
-		i2c0 = &i2c1;
-		i2c1 = &i2c2;
 	};
 
 	cpus {
-		#address-cells = <0>;
-		#size-cells = <0>;
-
-		cpu {
+		cpu@0 {
 			compatible = "arm,arm1136jf-s";
-			device_type = "cpu";
 		};
 	};
 
@@ -56,126 +46,41 @@
 		ranges;
 		ti,hwmods = "l3_main";
 
-		aes: aes@480a6000 {
-			compatible = "ti,omap2-aes";
-			ti,hwmods = "aes";
-			reg = <0x480a6000 0x50>;
-			dmas = <&sdma 9 &sdma 10>;
-			dma-names = "tx", "rx";
-		};
-
-		hdq1w: 1w@480b2000 {
-			compatible = "ti,omap2420-1w";
-			ti,hwmods = "hdq1w";
-			reg = <0x480b2000 0x1000>;
-			interrupts = <58>;
-		};
-
 		intc: interrupt-controller@1 {
 			compatible = "ti,omap2-intc";
 			interrupt-controller;
 			#interrupt-cells = <1>;
+			ti,intc-size = <96>;
 			reg = <0x480FE000 0x1000>;
 		};
 
 		sdma: dma-controller@48056000 {
 			compatible = "ti,omap2430-sdma", "ti,omap2420-sdma";
-			ti,hwmods = "dma";
 			reg = <0x48056000 0x1000>;
 			interrupts = <12>,
 				     <13>,
 				     <14>,
 				     <15>;
 			#dma-cells = <1>;
-			dma-channels = <32>;
-			dma-requests = <64>;
-		};
-
-		i2c1: i2c@48070000 {
-			compatible = "ti,omap2-i2c";
-			ti,hwmods = "i2c1";
-			reg = <0x48070000 0x80>;
-			#address-cells = <1>;
-			#size-cells = <0>;
-			interrupts = <56>;
-			dmas = <&sdma 27 &sdma 28>;
-			dma-names = "tx", "rx";
-		};
-
-		i2c2: i2c@48072000 {
-			compatible = "ti,omap2-i2c";
-			ti,hwmods = "i2c2";
-			reg = <0x48072000 0x80>;
-			#address-cells = <1>;
-			#size-cells = <0>;
-			interrupts = <57>;
-			dmas = <&sdma 29 &sdma 30>;
-			dma-names = "tx", "rx";
-		};
-
-		mcspi1: mcspi@48098000 {
-			compatible = "ti,omap2-mcspi";
-			ti,hwmods = "mcspi1";
-			reg = <0x48098000 0x100>;
-			interrupts = <65>;
-			dmas = <&sdma 35 &sdma 36 &sdma 37 &sdma 38
-				&sdma 39 &sdma 40 &sdma 41 &sdma 42>;
-			dma-names = "tx0", "rx0", "tx1", "rx1",
-				    "tx2", "rx2", "tx3", "rx3";
-		};
-
-		mcspi2: mcspi@4809a000 {
-			compatible = "ti,omap2-mcspi";
-			ti,hwmods = "mcspi2";
-			reg = <0x4809a000 0x100>;
-			interrupts = <66>;
-			dmas = <&sdma 43 &sdma 44 &sdma 45 &sdma 46>;
-			dma-names = "tx0", "rx0", "tx1", "rx1";
-		};
-
-		rng: rng@480a0000 {
-			compatible = "ti,omap2-rng";
-			ti,hwmods = "rng";
-			reg = <0x480a0000 0x50>;
-			interrupts = <52>;
-		};
-
-		sham: sham@480a4000 {
-			compatible = "ti,omap2-sham";
-			ti,hwmods = "sham";
-			reg = <0x480a4000 0x64>;
-			interrupts = <51>;
-			dmas = <&sdma 13>;
-			dma-names = "rx";
+			#dma-channels = <32>;
+			#dma-requests = <64>;
 		};
 
 		uart1: serial@4806a000 {
 			compatible = "ti,omap2-uart";
 			ti,hwmods = "uart1";
-			reg = <0x4806a000 0x2000>;
-			interrupts = <72>;
-			dmas = <&sdma 49 &sdma 50>;
-			dma-names = "tx", "rx";
 			clock-frequency = <48000000>;
 		};
 
 		uart2: serial@4806c000 {
 			compatible = "ti,omap2-uart";
 			ti,hwmods = "uart2";
-			reg = <0x4806c000 0x400>;
-			interrupts = <73>;
-			dmas = <&sdma 51 &sdma 52>;
-			dma-names = "tx", "rx";
 			clock-frequency = <48000000>;
 		};
 
 		uart3: serial@4806e000 {
 			compatible = "ti,omap2-uart";
 			ti,hwmods = "uart3";
-			reg = <0x4806e000 0x400>;
-			interrupts = <74>;
-			dmas = <&sdma 53 &sdma 54>;
-			dma-names = "tx", "rx";
 			clock-frequency = <48000000>;
 		};
 
@@ -263,36 +168,5 @@
 			ti,hwmods = "timer12";
 			ti,timer-pwm;
 		};
-
-		dss: dss@48050000 {
-			compatible = "ti,omap2-dss";
-			reg = <0x48050000 0x400>;
-			status = "disabled";
-			ti,hwmods = "dss_core";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges;
-
-			dispc@48050400 {
-				compatible = "ti,omap2-dispc";
-				reg = <0x48050400 0x400>;
-				interrupts = <25>;
-				ti,hwmods = "dss_dispc";
-			};
-
-			rfbi: encoder@48050800 {
-				compatible = "ti,omap2-rfbi";
-				reg = <0x48050800 0x400>;
-				status = "disabled";
-				ti,hwmods = "dss_rfbi";
-			};
-
-			venc: encoder@48050c00 {
-				compatible = "ti,omap2-venc";
-				reg = <0x48050c00 0x400>;
-				status = "disabled";
-				ti,hwmods = "dss_venc";
-			};
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/omap2420-h4.dts b/arch/arm/boot/dts/omap2420-h4.dts
--- a/arch/arm/boot/dts/omap2420-h4.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap2420-h4.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,7 +7,7 @@
  */
 /dts-v1/;
 
-#include "omap2420.dtsi"
+/include/ "omap2420.dtsi"
 
 / {
 	model = "TI OMAP2420 H4 board";
@@ -50,15 +50,15 @@
 			label = "bootloader";
 			reg = <0 0x20000>;
 		};
-		partition@20000 {
+		partition@0x20000 {
 			label = "params";
 			reg = <0x20000 0x20000>;
 		};
-		partition@40000 {
+		partition@0x40000 {
 			label = "kernel";
 			reg = <0x40000 0x200000>;
 		};
-		partition@240000 {
+		partition@0x240000 {
 			label = "file-system";
 			reg = <0x240000 0x3dc0000>;
 		};
diff -urNp a/arch/arm/boot/dts/omap2420.dtsi b/arch/arm/boot/dts/omap2420.dtsi
--- a/arch/arm/boot/dts/omap2420.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap2420.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,38 +8,12 @@
  * kind, whether express or implied.
  */
 
-#include "omap2.dtsi"
+/include/ "omap2.dtsi"
 
 / {
 	compatible = "ti,omap2420", "ti,omap2";
 
 	ocp {
-		prcm: prcm@48008000 {
-			compatible = "ti,omap2-prcm";
-			reg = <0x48008000 0x1000>;
-
-			prcm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			prcm_clockdomains: clockdomains {
-			};
-		};
-
-		scrm: scrm@48000000 {
-			compatible = "ti,omap2-scrm";
-			reg = <0x48000000 0x1000>;
-
-			scrm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			scrm_clockdomains: clockdomains {
-			};
-		};
-
 		counter32k: counter@48004000 {
 			compatible = "ti,omap-counter32k";
 			reg = <0x48004000 0x20>;
@@ -125,7 +99,6 @@
 			dmas = <&sdma 31>,
 			       <&sdma 32>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp2: mcbsp@48076000 {
@@ -139,35 +112,6 @@
 			dmas = <&sdma 33>,
 			       <&sdma 34>;
 			dma-names = "tx", "rx";
-			status = "disabled";
-		};
-
-		msdi1: mmc@4809c000 {
-			compatible = "ti,omap2420-mmc";
-			ti,hwmods = "msdi1";
-			reg = <0x4809c000 0x80>;
-			interrupts = <83>;
-			dmas = <&sdma 61 &sdma 62>;
-			dma-names = "tx", "rx";
-		};
-
-		mailbox: mailbox@48094000 {
-			compatible = "ti,omap2-mailbox";
-			reg = <0x48094000 0x200>;
-			interrupts = <26>, <34>;
-			interrupt-names = "dsp", "iva";
-			ti,hwmods = "mailbox";
-			#mbox-cells = <1>;
-			ti,mbox-num-users = <4>;
-			ti,mbox-num-fifos = <6>;
-			mbox_dsp: dsp {
-				ti,mbox-tx = <0 0 0>;
-				ti,mbox-rx = <1 0 0>;
-			};
-			mbox_iva: iva {
-				ti,mbox-tx = <2 1 3>;
-				ti,mbox-rx = <3 1 3>;
-			};
 		};
 
 		timer1: timer@48028000 {
@@ -177,22 +121,5 @@
 			ti,hwmods = "timer1";
 			ti,timer-alwon;
 		};
-
-		wd_timer2: wdt@48022000 {
-			compatible = "ti,omap2-wdt";
-			ti,hwmods = "wd_timer2";
-			reg = <0x48022000 0x80>;
-		};
 	};
 };
-
-&i2c1 {
-	compatible = "ti,omap2420-i2c";
-};
-
-&i2c2 {
-	compatible = "ti,omap2420-i2c";
-};
-
-/include/ "omap24xx-clocks.dtsi"
-/include/ "omap2420-clocks.dtsi"
diff -urNp a/arch/arm/boot/dts/omap2430.dtsi b/arch/arm/boot/dts/omap2430.dtsi
--- a/arch/arm/boot/dts/omap2430.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap2430.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,38 +8,12 @@
  * kind, whether express or implied.
  */
 
-#include "omap2.dtsi"
+/include/ "omap2.dtsi"
 
 / {
 	compatible = "ti,omap2430", "ti,omap2";
 
 	ocp {
-		prcm: prcm@49006000 {
-			compatible = "ti,omap2-prcm";
-			reg = <0x49006000 0x1000>;
-
-			prcm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			prcm_clockdomains: clockdomains {
-			};
-		};
-
-		scrm: scrm@49002000 {
-			compatible = "ti,omap2-scrm";
-			reg = <0x49002000 0x1000>;
-
-			scrm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			scrm_clockdomains: clockdomains {
-			};
-		};
-
 		counter32k: counter@49020000 {
 			compatible = "ti,omap-counter32k";
 			reg = <0x49020000 0x20>;
@@ -55,22 +29,6 @@
 			pinctrl-single,function-mask = <0x3f>;
 		};
 
-		omap2_scm_general: tisyscon@49002270 {
-			compatible = "syscon";
-			reg = <0x49002270 0x240>;
-		};
-
-		pbias_regulator: pbias_regulator {
-			compatible = "ti,pbias-omap";
-			reg = <0x230 0x4>;
-			syscon = <&omap2_scm_general>;
-			pbias_mmc_reg: pbias_mmc_omap2430 {
-				regulator-name = "pbias_mmc_omap2430";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3000000>;
-			};
-		};
-
 		gpio1: gpio@4900c000 {
 			compatible = "ti,omap2-gpio";
 			reg = <0x4900c000 0x200>;
@@ -155,7 +113,6 @@
 			dmas = <&sdma 31>,
 			       <&sdma 32>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp2: mcbsp@48076000 {
@@ -171,7 +128,6 @@
 			dmas = <&sdma 33>,
 			       <&sdma 34>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp3: mcbsp@4808c000 {
@@ -187,7 +143,6 @@
 			dmas = <&sdma 17>,
 			       <&sdma 18>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp4: mcbsp@4808e000 {
@@ -203,7 +158,6 @@
 			dmas = <&sdma 19>,
 			       <&sdma 20>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp5: mcbsp@48096000 {
@@ -219,41 +173,6 @@
 			dmas = <&sdma 21>,
 			       <&sdma 22>;
 			dma-names = "tx", "rx";
-			status = "disabled";
-		};
-
-		mmc1: mmc@4809c000 {
-			compatible = "ti,omap2-hsmmc";
-			reg = <0x4809c000 0x200>;
-			interrupts = <83>;
-			ti,hwmods = "mmc1";
-			ti,dual-volt;
-			dmas = <&sdma 61>, <&sdma 62>;
-			dma-names = "tx", "rx";
-			pbias-supply = <&pbias_mmc_reg>;
-		};
-
-		mmc2: mmc@480b4000 {
-			compatible = "ti,omap2-hsmmc";
-			reg = <0x480b4000 0x200>;
-			interrupts = <86>;
-			ti,hwmods = "mmc2";
-			dmas = <&sdma 47>, <&sdma 48>;
-			dma-names = "tx", "rx";
-		};
-
-		mailbox: mailbox@48094000 {
-			compatible = "ti,omap2-mailbox";
-			reg = <0x48094000 0x200>;
-			interrupts = <26>;
-			ti,hwmods = "mailbox";
-			#mbox-cells = <1>;
-			ti,mbox-num-users = <4>;
-			ti,mbox-num-fifos = <6>;
-			mbox_dsp: dsp {
-				ti,mbox-tx = <0 0 0>;
-				ti,mbox-rx = <1 0 0>;
-			};
 		};
 
 		timer1: timer@49018000 {
@@ -263,38 +182,5 @@
 			ti,hwmods = "timer1";
 			ti,timer-alwon;
 		};
-
-		mcspi3: mcspi@480b8000 {
-			compatible = "ti,omap2-mcspi";
-			ti,hwmods = "mcspi3";
-			reg = <0x480b8000 0x100>;
-			interrupts = <91>;
-			dmas = <&sdma 15 &sdma 16 &sdma 23 &sdma 24>;
-			dma-names = "tx0", "rx0", "tx1", "rx1";
-		};
-
-		usb_otg_hs: usb_otg_hs@480ac000 {
-			compatible = "ti,omap2-musb";
-			ti,hwmods = "usb_otg_hs";
-			reg = <0x480ac000 0x1000>;
-			interrupts = <93>;
-		};
-
-		wd_timer2: wdt@49016000 {
-			compatible = "ti,omap2-wdt";
-			ti,hwmods = "wd_timer2";
-			reg = <0x49016000 0x80>;
-		};
 	};
 };
-
-&i2c1 {
-	compatible = "ti,omap2430-i2c";
-};
-
-&i2c2 {
-	compatible = "ti,omap2430-i2c";
-};
-
-/include/ "omap24xx-clocks.dtsi"
-/include/ "omap2430-clocks.dtsi"
diff -urNp a/arch/arm/boot/dts/omap3-beagle-xm.dts b/arch/arm/boot/dts/omap3-beagle-xm.dts
--- a/arch/arm/boot/dts/omap3-beagle-xm.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap3-beagle-xm.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,11 +7,11 @@
  */
 /dts-v1/;
 
-#include "omap36xx.dtsi"
+/include/ "omap36xx.dtsi"
 
 / {
 	model = "TI OMAP3 BeagleBoard xM";
-	compatible = "ti,omap3-beagle-xm", "ti,omap36xx", "ti,omap3";
+	compatible = "ti,omap3-beagle-xm, ti,omap3-beagle", "ti,omap3";
 
 	cpus {
 		cpu@0 {
@@ -24,23 +24,18 @@
 		reg = <0x80000000 0x20000000>; /* 512 MB */
 	};
 
-	aliases {
-		display0 = &dvi0;
-		display1 = &tv0;
-	};
-
 	leds {
 		compatible = "gpio-leds";
 
 		heartbeat {
 			label = "beagleboard::usr0";
-			gpios = <&gpio5 22 GPIO_ACTIVE_HIGH>; /* 150 -> D6 LED */
+			gpios = <&gpio5 22 0>; /* 150 -> D6 LED */
 			linux,default-trigger = "heartbeat";
 		};
 
 		mmc {
 			label = "beagleboard::usr1";
-			gpios = <&gpio5 21 GPIO_ACTIVE_HIGH>; /* 149 -> D7 LED */
+			gpios = <&gpio5 21 0>; /* 149 -> D7 LED */
 			linux,default-trigger = "mmc0";
 		};
 	};
@@ -62,208 +57,6 @@
 		ti,mcbsp = <&mcbsp2>;
 		ti,codec = <&twl_audio>;
 	};
-
-	gpio_keys {
-		compatible = "gpio-keys";
-
-		user {
-			label = "user";
-			gpios = <&gpio1 4 GPIO_ACTIVE_HIGH>;
-			linux,code = <0x114>;
-			gpio-key,wakeup;
-		};
-
-	};
-
-	/* HS USB Port 2 Power */
-	hsusb2_power: hsusb2_power_reg {
-		compatible = "regulator-fixed";
-		regulator-name = "hsusb2_vbus";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		gpio = <&twl_gpio 18 0>;	/* GPIO LEDA */
-		startup-delay-us = <70000>;
-	};
-
-	/* HS USB Host PHY on PORT 2 */
-	hsusb2_phy: hsusb2_phy {
-		compatible = "usb-nop-xceiv";
-		reset-gpios = <&gpio5 19 GPIO_ACTIVE_LOW>; /* gpio_147 */
-		vcc-supply = <&hsusb2_power>;
-	};
-
-	tfp410: encoder@0 {
-		compatible = "ti,tfp410";
-		powerdown-gpios = <&twl_gpio 2 GPIO_ACTIVE_LOW>;
-
-		/* XXX pinctrl from twl */
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@0 {
-				reg = <0>;
-
-				tfp410_in: endpoint@0 {
-					remote-endpoint = <&dpi_out>;
-				};
-			};
-
-			port@1 {
-				reg = <1>;
-
-				tfp410_out: endpoint@0 {
-					remote-endpoint = <&dvi_connector_in>;
-				};
-			};
-		};
-	};
-
-	dvi0: connector@0 {
-		compatible = "dvi-connector";
-		label = "dvi";
-
-		digital;
-
-		ddc-i2c-bus = <&i2c3>;
-
-		port {
-			dvi_connector_in: endpoint {
-				remote-endpoint = <&tfp410_out>;
-			};
-		};
-	};
-
-	tv0: connector@1 {
-		compatible = "svideo-connector";
-		label = "tv";
-
-		port {
-			tv_connector_in: endpoint {
-				remote-endpoint = <&venc_out>;
-			};
-		};
-	};
-
-	etb@5401b000 {
-		compatible = "arm,coresight-etb10", "arm,primecell";
-		reg = <0x5401b000 0x1000>;
-
-		coresight-default-sink;
-		clocks = <&emu_src_ck>;
-		clock-names = "apb_pclk";
-		port {
-			etb_in: endpoint {
-				slave-mode;
-				remote-endpoint = <&etm_out>;
-			};
-		};
-	};
-
-	etm@54010000 {
-		compatible = "arm,coresight-etm3x", "arm,primecell";
-		reg = <0x54010000 0x1000>;
-
-		clocks = <&emu_src_ck>;
-		clock-names = "apb_pclk";
-		port {
-			etm_out: endpoint {
-				remote-endpoint = <&etb_in>;
-			};
-		};
-	};
-};
-
-&omap3_pmx_wkup {
-	gpio1_pins: pinmux_gpio1_pins {
-		pinctrl-single,pins = <
-			0x0e (PIN_INPUT | PIN_OFF_WAKEUPENABLE | MUX_MODE4) /* sys_boot2.gpio_4 */
-		>;
-	};
-
-	dss_dpi_pins2: pinmux_dss_dpi_pins1 {
-		pinctrl-single,pins = <
-			0x0a (PIN_OUTPUT | MUX_MODE3)   /* sys_boot0.dss_data18 */
-			0x0c (PIN_OUTPUT | MUX_MODE3)   /* sys_boot1.dss_data19 */
-			0x10 (PIN_OUTPUT | MUX_MODE3)   /* sys_boot3.dss_data20 */
-			0x12 (PIN_OUTPUT | MUX_MODE3)   /* sys_boot4.dss_data21 */
-			0x14 (PIN_OUTPUT | MUX_MODE3)   /* sys_boot5.dss_data22 */
-			0x16 (PIN_OUTPUT | MUX_MODE3)   /* sys_boot6.dss_data23 */
-		>;
-	};
-};
-
-&omap3_pmx_core {
-	pinctrl-names = "default";
-	pinctrl-0 = <
-			&hsusb2_pins
-	>;
-
-	uart3_pins: pinmux_uart3_pins {
-		pinctrl-single,pins = <
-			0x16e (PIN_INPUT | MUX_MODE0)	/* uart3_rx_irrx.uart3_rx_irrx */
-			0x170 (PIN_OUTPUT | MUX_MODE0)	/* uart3_tx_irtx.uart3_tx_irtx OUTPUT | MODE0 */
-		>;
-	};
-
-	hsusb2_pins: pinmux_hsusb2_pins {
-		pinctrl-single,pins = <
-			OMAP3_CORE1_IOPAD(0x21d4, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi1_cs3.hsusb2_data2 */
-			OMAP3_CORE1_IOPAD(0x21d6, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi2_clk.hsusb2_data7 */
-			OMAP3_CORE1_IOPAD(0x21d8, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi2_simo.hsusb2_data4 */
-			OMAP3_CORE1_IOPAD(0x21da, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi2_somi.hsusb2_data5 */
-			OMAP3_CORE1_IOPAD(0x21dc, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi2_cs0.hsusb2_data6 */
-			OMAP3_CORE1_IOPAD(0x21de, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi2_cs1.hsusb2_data3 */
-		>;
-	};
-
-	dss_dpi_pins1: pinmux_dss_dpi_pins2 {
-		pinctrl-single,pins = <
-			OMAP3_CORE1_IOPAD(0x20d4, PIN_OUTPUT | MUX_MODE0)   /* dss_pclk.dss_pclk */
-			OMAP3_CORE1_IOPAD(0x20d6, PIN_OUTPUT | MUX_MODE0)   /* dss_hsync.dss_hsync */
-			OMAP3_CORE1_IOPAD(0x20d8, PIN_OUTPUT | MUX_MODE0)   /* dss_vsync.dss_vsync */
-			OMAP3_CORE1_IOPAD(0x20da, PIN_OUTPUT | MUX_MODE0)   /* dss_acbias.dss_acbias */
-
-			OMAP3_CORE1_IOPAD(0x20e8, PIN_OUTPUT | MUX_MODE0)   /* dss_data6.dss_data6 */
-			OMAP3_CORE1_IOPAD(0x20ea, PIN_OUTPUT | MUX_MODE0)   /* dss_data7.dss_data7 */
-			OMAP3_CORE1_IOPAD(0x20ec, PIN_OUTPUT | MUX_MODE0)   /* dss_data8.dss_data8 */
-			OMAP3_CORE1_IOPAD(0x20ee, PIN_OUTPUT | MUX_MODE0)   /* dss_data9.dss_data9 */
-			OMAP3_CORE1_IOPAD(0x20f0, PIN_OUTPUT | MUX_MODE0)   /* dss_data10.dss_data10 */
-			OMAP3_CORE1_IOPAD(0x20f2, PIN_OUTPUT | MUX_MODE0)   /* dss_data11.dss_data11 */
-			OMAP3_CORE1_IOPAD(0x20f4, PIN_OUTPUT | MUX_MODE0)   /* dss_data12.dss_data12 */
-			OMAP3_CORE1_IOPAD(0x20f6, PIN_OUTPUT | MUX_MODE0)   /* dss_data13.dss_data13 */
-			OMAP3_CORE1_IOPAD(0x20f8, PIN_OUTPUT | MUX_MODE0)   /* dss_data14.dss_data14 */
-			OMAP3_CORE1_IOPAD(0x20fa, PIN_OUTPUT | MUX_MODE0)   /* dss_data15.dss_data15 */
-			OMAP3_CORE1_IOPAD(0x20fc, PIN_OUTPUT | MUX_MODE0)   /* dss_data16.dss_data16 */
-			OMAP3_CORE1_IOPAD(0x20fe, PIN_OUTPUT | MUX_MODE0)   /* dss_data17.dss_data17 */
-
-			OMAP3_CORE1_IOPAD(0x2100, PIN_OUTPUT | MUX_MODE3)   /* dss_data18.dss_data0 */
-			OMAP3_CORE1_IOPAD(0x2102, PIN_OUTPUT | MUX_MODE3)   /* dss_data19.dss_data1 */
-			OMAP3_CORE1_IOPAD(0x2104, PIN_OUTPUT | MUX_MODE3)   /* dss_data20.dss_data2 */
-			OMAP3_CORE1_IOPAD(0x2106, PIN_OUTPUT | MUX_MODE3)   /* dss_data21.dss_data3 */
-			OMAP3_CORE1_IOPAD(0x2108, PIN_OUTPUT | MUX_MODE3)   /* dss_data22.dss_data4 */
-			OMAP3_CORE1_IOPAD(0x210a, PIN_OUTPUT | MUX_MODE3)   /* dss_data23.dss_data5 */
-		>;
-	};
-};
-
-&omap3_pmx_core2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <
-			&hsusb2_2_pins
-	>;
-
-	hsusb2_2_pins: pinmux_hsusb2_2_pins {
-		pinctrl-single,pins = <
-			OMAP3630_CORE2_IOPAD(0x25f0, PIN_OUTPUT | MUX_MODE3)		/* etk_d10.hsusb2_clk */
-			OMAP3630_CORE2_IOPAD(0x25f2, PIN_OUTPUT | MUX_MODE3)		/* etk_d11.hsusb2_stp */
-			OMAP3630_CORE2_IOPAD(0x25f4, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d12.hsusb2_dir */
-			OMAP3630_CORE2_IOPAD(0x25f6, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d13.hsusb2_nxt */
-			OMAP3630_CORE2_IOPAD(0x25f8, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d14.hsusb2_data0 */
-			OMAP3630_CORE2_IOPAD(0x25fa, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d15.hsusb2_data1 */
-		>;
-	};
 };
 
 &i2c1 {
@@ -279,16 +72,10 @@
 			codec {
 			};
 		};
-
-		twl_power: power {
-			compatible = "ti,twl4030-power-beagleboard-xm", "ti,twl4030-power-idle-osc-off";
-			ti,use_poweroff;
-		};
 	};
 };
 
-#include "twl4030.dtsi"
-#include "twl4030_omap3.dtsi"
+/include/ "twl4030.dtsi"
 
 &i2c2 {
 	clock-frequency = <400000>;
@@ -296,6 +83,15 @@
 
 &i2c3 {
 	clock-frequency = <100000>;
+
+	/*
+	 * Display monitor features are burnt in the EEPROM
+	 * as EDID data.
+	 */
+	eeprom@50 {
+		compatible = "ti,eeprom";
+		reg = <0x50>;
+	};
 };
 
 &mmc1 {
@@ -327,68 +123,6 @@
 &usb_otg_hs {
 	interface-type = <0>;
 	usb-phy = <&usb2_phy>;
-	phys = <&usb2_phy>;
-	phy-names = "usb2-phy";
 	mode = <3>;
 	power = <50>;
 };
-
-&uart3 {
-	interrupts-extended = <&intc 74 &omap3_pmx_core OMAP3_UART3_RX>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&uart3_pins>;
-};
-
-&gpio1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&gpio1_pins>;
-};
-
-&usbhshost {
-	port2-mode = "ehci-phy";
-};
-
-&usbhsehci {
-	phys = <0 &hsusb2_phy>;
-};
-
-&vaux2 {
-	regulator-name = "usb_1v8";
-	regulator-min-microvolt = <1800000>;
-	regulator-max-microvolt = <1800000>;
-	regulator-always-on;
-};
-
-&mcbsp2 {
-	status = "okay";
-};
-
-&dss {
-	status = "ok";
-
-	pinctrl-names = "default";
-	pinctrl-0 = <
-		&dss_dpi_pins1
-		&dss_dpi_pins2
-	>;
-
-	port {
-		dpi_out: endpoint {
-			remote-endpoint = <&tfp410_in>;
-			data-lines = <24>;
-		};
-	};
-};
-
-&venc {
-	status = "ok";
-
-	vdda-supply = <&vdac>;
-
-	port {
-		venc_out: endpoint {
-			remote-endpoint = <&tv_connector_in>;
-			ti,channels = <2>;
-		};
-	};
-};
diff -urNp a/arch/arm/boot/dts/omap3-beagle.dts b/arch/arm/boot/dts/omap3-beagle.dts
--- a/arch/arm/boot/dts/omap3-beagle.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap3-beagle.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,7 +7,7 @@
  */
 /dts-v1/;
 
-#include "omap34xx.dtsi"
+/include/ "omap34xx.dtsi"
 
 / {
 	model = "TI OMAP3 BeagleBoard";
@@ -24,31 +24,37 @@
 		reg = <0x80000000 0x10000000>; /* 256 MB */
 	};
 
-	aliases {
-		display0 = &dvi0;
-		display1 = &tv0;
-	};
-
 	leds {
 		compatible = "gpio-leds";
 		pmu_stat {
 			label = "beagleboard::pmu_stat";
-			gpios = <&twl_gpio 19 GPIO_ACTIVE_HIGH>; /* LEDB */
+			gpios = <&twl_gpio 19 0>; /* LEDB */
 		};
 
 		heartbeat {
 			label = "beagleboard::usr0";
-			gpios = <&gpio5 22 GPIO_ACTIVE_HIGH>; /* 150 -> D6 LED */
+			gpios = <&gpio5 22 0>; /* 150 -> D6 LED */
 			linux,default-trigger = "heartbeat";
 		};
 
 		mmc {
 			label = "beagleboard::usr1";
-			gpios = <&gpio5 21 GPIO_ACTIVE_HIGH>; /* 149 -> D7 LED */
+			gpios = <&gpio5 21 0>; /* 149 -> D7 LED */
 			linux,default-trigger = "mmc0";
 		};
 	};
 
+	/* HS USB Port 2 RESET */
+	hsusb2_reset: hsusb2_reset_reg {
+		compatible = "regulator-fixed";
+		regulator-name = "hsusb2_reset";
+		regulator-min-microvolt = <3300000>;
+		regulator-max-microvolt = <3300000>;
+		gpio = <&gpio5 19 0>;	/* gpio_147 */
+		startup-delay-us = <70000>;
+		enable-active-high;
+	};
+
 	/* HS USB Port 2 Power */
 	hsusb2_power: hsusb2_power_reg {
 		compatible = "regulator-fixed";
@@ -62,200 +68,31 @@
 	/* HS USB Host PHY on PORT 2 */
 	hsusb2_phy: hsusb2_phy {
 		compatible = "usb-nop-xceiv";
-		reset-gpios = <&gpio5 19 GPIO_ACTIVE_LOW>;	/* gpio_147 */
+		reset-supply = <&hsusb2_reset>;
 		vcc-supply = <&hsusb2_power>;
 	};
-
-	sound {
-		compatible = "ti,omap-twl4030";
-		ti,model = "omap3beagle";
-
-		ti,mcbsp = <&mcbsp2>;
-		ti,codec = <&twl_audio>;
-	};
-
-	gpio_keys {
-		compatible = "gpio-keys";
-
-		user {
-			label = "user";
-			gpios = <&gpio1 7 GPIO_ACTIVE_HIGH>;
-			linux,code = <0x114>;
-			gpio-key,wakeup;
-		};
-
-	};
-
-	tfp410: encoder@0 {
-		compatible = "ti,tfp410";
-		powerdown-gpios = <&gpio6 10 GPIO_ACTIVE_LOW>;	/* gpio_170 */
-
-		pinctrl-names = "default";
-		pinctrl-0 = <&tfp410_pins>;
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@0 {
-				reg = <0>;
-
-				tfp410_in: endpoint@0 {
-					remote-endpoint = <&dpi_out>;
-				};
-			};
-
-			port@1 {
-				reg = <1>;
-
-				tfp410_out: endpoint@0 {
-					remote-endpoint = <&dvi_connector_in>;
-				};
-			};
-		};
-	};
-
-	dvi0: connector@0 {
-		compatible = "dvi-connector";
-		label = "dvi";
-
-		digital;
-
-		ddc-i2c-bus = <&i2c3>;
-
-		port {
-			dvi_connector_in: endpoint {
-				remote-endpoint = <&tfp410_out>;
-			};
-		};
-	};
-
-	tv0: connector@1 {
-		compatible = "svideo-connector";
-		label = "tv";
-
-		port {
-			tv_connector_in: endpoint {
-				remote-endpoint = <&venc_out>;
-			};
-		};
-	};
-
-	etb@540000000 {
-		compatible = "arm,coresight-etb10", "arm,primecell";
-		reg = <0x5401b000 0x1000>;
-
-		coresight-default-sink;
-		clocks = <&emu_src_ck>;
-		clock-names = "apb_pclk";
-		port {
-			etb_in: endpoint {
-				slave-mode;
-				remote-endpoint = <&etm_out>;
-			};
-		};
-	};
-
-	etm@54010000 {
-		compatible = "arm,coresight-etm3x", "arm,primecell";
-		reg = <0x54010000 0x1000>;
-
-		clocks = <&emu_src_ck>;
-		clock-names = "apb_pclk";
-		port {
-			etm_out: endpoint {
-				remote-endpoint = <&etb_in>;
-			};
-		};
-	};
-};
-
-&omap3_pmx_wkup {
-	gpio1_pins: pinmux_gpio1_pins {
-		pinctrl-single,pins = <
-			0x14 (PIN_INPUT | PIN_OFF_WAKEUPENABLE | MUX_MODE4) /* sys_boot5.gpio_7 */
-		>;
-	};
 };
 
 &omap3_pmx_core {
 	pinctrl-names = "default";
 	pinctrl-0 = <
-			&hsusb2_pins
-	>;
-
-	hsusb2_pins: pinmux_hsusb2_pins {
-		pinctrl-single,pins = <
-			OMAP3_CORE1_IOPAD(0x21d4, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi1_cs3.hsusb2_data2 */
-			OMAP3_CORE1_IOPAD(0x21d6, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi2_clk.hsusb2_data7 */
-			OMAP3_CORE1_IOPAD(0x21d8, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi2_simo.hsusb2_data4 */
-			OMAP3_CORE1_IOPAD(0x21da, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi2_somi.hsusb2_data5 */
-			OMAP3_CORE1_IOPAD(0x21dc, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi2_cs0.hsusb2_data6 */
-			OMAP3_CORE1_IOPAD(0x21de, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* mcspi2_cs1.hsusb2_data3 */
-		>;
-	};
-
-	uart3_pins: pinmux_uart3_pins {
-		pinctrl-single,pins = <
-			0x16e (PIN_INPUT | PIN_OFF_WAKEUPENABLE | MUX_MODE0) /* uart3_rx_irrx.uart3_rx_irrx */
-			0x170 (PIN_OUTPUT | MUX_MODE0) /* uart3_tx_irtx.uart3_tx_irtx */
-		>;
-	};
-
-	tfp410_pins: pinmux_tfp410_pins {
-		pinctrl-single,pins = <
-			0x194 (PIN_OUTPUT | MUX_MODE4)	/* hdq_sio.gpio_170 */
-		>;
-	};
-
-	dss_dpi_pins: pinmux_dss_dpi_pins {
-		pinctrl-single,pins = <
-			0x0a4 (PIN_OUTPUT | MUX_MODE0)   /* dss_pclk.dss_pclk */
-			0x0a6 (PIN_OUTPUT | MUX_MODE0)   /* dss_hsync.dss_hsync */
-			0x0a8 (PIN_OUTPUT | MUX_MODE0)   /* dss_vsync.dss_vsync */
-			0x0aa (PIN_OUTPUT | MUX_MODE0)   /* dss_acbias.dss_acbias */
-			0x0ac (PIN_OUTPUT | MUX_MODE0)   /* dss_data0.dss_data0 */
-			0x0ae (PIN_OUTPUT | MUX_MODE0)   /* dss_data1.dss_data1 */
-			0x0b0 (PIN_OUTPUT | MUX_MODE0)   /* dss_data2.dss_data2 */
-			0x0b2 (PIN_OUTPUT | MUX_MODE0)   /* dss_data3.dss_data3 */
-			0x0b4 (PIN_OUTPUT | MUX_MODE0)   /* dss_data4.dss_data4 */
-			0x0b6 (PIN_OUTPUT | MUX_MODE0)   /* dss_data5.dss_data5 */
-			0x0b8 (PIN_OUTPUT | MUX_MODE0)   /* dss_data6.dss_data6 */
-			0x0ba (PIN_OUTPUT | MUX_MODE0)   /* dss_data7.dss_data7 */
-			0x0bc (PIN_OUTPUT | MUX_MODE0)   /* dss_data8.dss_data8 */
-			0x0be (PIN_OUTPUT | MUX_MODE0)   /* dss_data9.dss_data9 */
-			0x0c0 (PIN_OUTPUT | MUX_MODE0)   /* dss_data10.dss_data10 */
-			0x0c2 (PIN_OUTPUT | MUX_MODE0)   /* dss_data11.dss_data11 */
-			0x0c4 (PIN_OUTPUT | MUX_MODE0)   /* dss_data12.dss_data12 */
-			0x0c6 (PIN_OUTPUT | MUX_MODE0)   /* dss_data13.dss_data13 */
-			0x0c8 (PIN_OUTPUT | MUX_MODE0)   /* dss_data14.dss_data14 */
-			0x0ca (PIN_OUTPUT | MUX_MODE0)   /* dss_data15.dss_data15 */
-			0x0cc (PIN_OUTPUT | MUX_MODE0)   /* dss_data16.dss_data16 */
-			0x0ce (PIN_OUTPUT | MUX_MODE0)   /* dss_data17.dss_data17 */
-			0x0d0 (PIN_OUTPUT | MUX_MODE0)   /* dss_data18.dss_data18 */
-			0x0d2 (PIN_OUTPUT | MUX_MODE0)   /* dss_data19.dss_data19 */
-			0x0d4 (PIN_OUTPUT | MUX_MODE0)   /* dss_data20.dss_data20 */
-			0x0d6 (PIN_OUTPUT | MUX_MODE0)   /* dss_data21.dss_data21 */
-			0x0d8 (PIN_OUTPUT | MUX_MODE0)   /* dss_data22.dss_data22 */
-			0x0da (PIN_OUTPUT | MUX_MODE0)   /* dss_data23.dss_data23 */
-		>;
-	};
-};
-
-&omap3_pmx_core2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <
-			&hsusb2_2_pins
+			&hsusbb2_pins
 	>;
 
-	hsusb2_2_pins: pinmux_hsusb2_2_pins {
+	hsusbb2_pins: pinmux_hsusbb2_pins {
 		pinctrl-single,pins = <
-			OMAP3430_CORE2_IOPAD(0x25f0, PIN_OUTPUT | MUX_MODE3)		/* etk_d10.hsusb2_clk */
-			OMAP3430_CORE2_IOPAD(0x25f2, PIN_OUTPUT | MUX_MODE3)		/* etk_d11.hsusb2_stp */
-			OMAP3430_CORE2_IOPAD(0x25f4, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d12.hsusb2_dir */
-			OMAP3430_CORE2_IOPAD(0x25f6, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d13.hsusb2_nxt */
-			OMAP3430_CORE2_IOPAD(0x25f8, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d14.hsusb2_data0 */
-			OMAP3430_CORE2_IOPAD(0x25fa, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d15.hsusb2_data1 */
+			0x5c0 0x3  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_clk OUTPUT */
+			0x5c2 0x3  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_stp OUTPUT */
+			0x5c4 0x10b  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_dir INPUT | PULLDOWN */
+			0x5c6 0x10b  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_nxt INPUT | PULLDOWN */
+			0x5c8 0x10b  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_dat0 INPUT | PULLDOWN */
+			0x5cA 0x10b  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_dat1 INPUT | PULLDOWN */
+			0x1a4 0x10b  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_dat2 INPUT | PULLDOWN */
+			0x1a6 0x10b  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_dat3 INPUT | PULLDOWN */
+			0x1a8 0x10b  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_dat4 INPUT | PULLDOWN */
+			0x1aa 0x10b  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_dat5 INPUT | PULLDOWN */
+			0x1ac 0x10b  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_dat6 INPUT | PULLDOWN */
+			0x1ae 0x10b  /* USBB2_ULPITLL_CLK_MUXMODE.usbb1_ulpiphy_dat7 INPUT | PULLDOWN */
 		>;
 	};
 };
@@ -267,21 +104,10 @@
 		reg = <0x48>;
 		interrupts = <7>; /* SYS_NIRQ cascaded to intc */
 		interrupt-parent = <&intc>;
-
-		twl_audio: audio {
-			compatible = "ti,twl4030-audio";
-			codec {
-			};
-		};
 	};
 };
 
-#include "twl4030.dtsi"
-#include "twl4030_omap3.dtsi"
-
-&i2c3 {
-	clock-frequency = <100000>;
-};
+/include/ "twl4030.dtsi"
 
 &mmc1 {
 	vmmc-supply = <&vmmc1>;
@@ -316,66 +142,3 @@
 	 */
 	ti,pulldowns = <0x03a1c4>;
 };
-
-&uart3 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&uart3_pins>;
-	interrupts-extended = <&intc 74 &omap3_pmx_core OMAP3_UART3_RX>;
-};
-
-&gpio1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&gpio1_pins>;
-};
-
-&usb_otg_hs {
-	interface-type = <0>;
-	usb-phy = <&usb2_phy>;
-	phys = <&usb2_phy>;
-	phy-names = "usb2-phy";
-	mode = <3>;
-	power = <50>;
-};
-
-&vaux2 {
-	regulator-name = "vdd_ehci";
-	regulator-min-microvolt = <1800000>;
-	regulator-max-microvolt = <1800000>;
-	regulator-always-on;
-};
-
-&mcbsp2 {
-	status = "okay";
-};
-
-/* Needed to power the DPI pins */
-&vpll2 {
-	regulator-always-on;
-};
-
-&dss {
-	status = "ok";
-
-	pinctrl-names = "default";
-	pinctrl-0 = <&dss_dpi_pins>;
-
-	port {
-		dpi_out: endpoint {
-			remote-endpoint = <&tfp410_in>;
-			data-lines = <24>;
-		};
-	};
-};
-
-&venc {
-	status = "ok";
-
-	vdda-supply = <&vdac>;
-
-	port {
-		venc_out: endpoint {
-			remote-endpoint = <&tv_connector_in>;
-			ti,channels = <2>;
-		};
-	};
-};
diff -urNp a/arch/arm/boot/dts/omap3-devkit8000.dts b/arch/arm/boot/dts/omap3-devkit8000.dts
--- a/arch/arm/boot/dts/omap3-devkit8000.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap3-devkit8000.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,7 +7,7 @@
  */
 /dts-v1/;
 
-#include "omap34xx.dtsi"
+/include/ "omap34xx.dtsi"
 / {
 	model = "TimLL OMAP3 Devkit8000";
 	compatible = "timll,omap3-devkit8000", "ti,omap3";
@@ -22,21 +22,21 @@
 
 		heartbeat {
 			label = "devkit8000::led1";
-			gpios = <&gpio6 26 GPIO_ACTIVE_HIGH>;	/* 186 -> LED1 */
+			gpios = <&gpio6 26 0>;	/* 186 -> LED1 */
 			default-state = "on";
 			linux,default-trigger = "heartbeat";
 		};
 
 		mmc {
 			label = "devkit8000::led2";
-			gpios = <&gpio6 3 GPIO_ACTIVE_HIGH>;	/* 163 -> LED2 */
+			gpios = <&gpio6 3 0>;	/* 163 -> LED2 */
 			default-state = "on";
 			linux,default-trigger = "none";
 		};
 
 		usr {
 			label = "devkit8000::led3";
-			gpios = <&gpio6 4 GPIO_ACTIVE_HIGH>;	/* 164 -> LED3 */
+			gpios = <&gpio6 4 0>;	/* 164 -> LED3 */
 			default-state = "on";
 			linux,default-trigger = "usr";
                 };
@@ -80,8 +80,7 @@
 	status = "disabled";
 };
 
-#include "twl4030.dtsi"
-#include "twl4030_omap3.dtsi"
+/include/ "twl4030.dtsi"
 
 &mmc1 {
 	vmmc-supply = <&vmmc1>;
@@ -101,31 +100,43 @@
 	status = "disabled";
 };
 
-&mcbsp2 {
-	status = "okay";
+&mcbsp1 {
+	status = "disabled";
+};
+
+&mcbsp3 {
+	status = "disabled";
+};
+
+&mcbsp4 {
+	status = "disabled";
+};
+
+&mcbsp5 {
+	status = "disabled";
 };
 
 &gpmc {
-	ranges = <0 0 0x30000000 0x1000000>;       /* CS0: 16MB for NAND */
+	ranges = <0 0 0x30000000 0x04>;       /* CS0: NAND */
 
 	nand@0,0 {
-		reg = <0 0 4>; /* CS0, offset 0, IO size 4 */
+		reg = <0 0 0>; /* CS0, offset 0 */
 		nand-bus-width = <16>;
 
-		gpmc,sync-clk-ps = <0>;
-		gpmc,cs-on-ns = <0>;
-		gpmc,cs-rd-off-ns = <44>;
-		gpmc,cs-wr-off-ns = <44>;
-		gpmc,adv-on-ns = <6>;
-		gpmc,adv-rd-off-ns = <34>;
-		gpmc,adv-wr-off-ns = <44>;
-		gpmc,we-off-ns = <40>;
-		gpmc,oe-off-ns = <54>;
-		gpmc,access-ns = <64>;
-		gpmc,rd-cycle-ns = <82>;
-		gpmc,wr-cycle-ns = <82>;
-		gpmc,wr-access-ns = <40>;
-		gpmc,wr-data-mux-bus-ns = <0>;
+		gpmc,sync-clk = <0>;
+		gpmc,cs-on = <0>;
+		gpmc,cs-rd-off = <44>;
+		gpmc,cs-wr-off = <44>;
+		gpmc,adv-on = <6>;
+		gpmc,adv-rd-off = <34>;
+		gpmc,adv-wr-off = <44>;
+		gpmc,we-off = <40>;
+		gpmc,oe-off = <54>;
+		gpmc,access = <64>;
+		gpmc,rd-cycle = <82>;
+		gpmc,wr-cycle = <82>;
+		gpmc,wr-access = <40>;
+		gpmc,wr-data-mux-bus = <0>;
 
 		#address-cells = <1>;
 		#size-cells = <1>;
diff -urNp a/arch/arm/boot/dts/omap3-evm.dts b/arch/arm/boot/dts/omap3-evm.dts
--- a/arch/arm/boot/dts/omap3-evm.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap3-evm.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,15 +7,68 @@
  */
 /dts-v1/;
 
-#include "omap34xx.dtsi"
-#include "omap3-evm-common.dtsi"
+/include/ "omap34xx.dtsi"
 
 / {
-	model = "TI OMAP35XX EVM (TMDSEVM3530)";
+	model = "TI OMAP3 EVM (OMAP3530, AM/DM37x)";
 	compatible = "ti,omap3-evm", "ti,omap3";
 
+	cpus {
+		cpu@0 {
+			cpu0-supply = <&vcc>;
+		};
+	};
+
 	memory {
 		device_type = "memory";
 		reg = <0x80000000 0x10000000>; /* 256 MB */
 	};
+
+	leds {
+		compatible = "gpio-leds";
+		ledb {
+			label = "omap3evm::ledb";
+			gpios = <&twl_gpio 19 0>; /* LEDB */
+			linux,default-trigger = "default-on";
+		};
+	};
+};
+
+&i2c1 {
+	clock-frequency = <2600000>;
+
+	twl: twl@48 {
+		reg = <0x48>;
+		interrupts = <7>; /* SYS_NIRQ cascaded to intc */
+		interrupt-parent = <&intc>;
+	};
+};
+
+/include/ "twl4030.dtsi"
+
+&i2c2 {
+	clock-frequency = <400000>;
+};
+
+&i2c3 {
+	clock-frequency = <400000>;
+
+	/*
+	 * TVP5146 Video decoder-in for analog input support.
+	 */
+	tvp5146@5c {
+		compatible = "ti,tvp5146m2";
+		reg = <0x5c>;
+	};
+};
+
+&twl_gpio {
+	ti,use-leds;
+};
+
+&usb_otg_hs {
+	interface-type = <0>;
+	usb-phy = <&usb2_phy>;
+	mode = <3>;
+	power = <50>;
 };
diff -urNp a/arch/arm/boot/dts/omap3-igep.dtsi b/arch/arm/boot/dts/omap3-igep.dtsi
--- a/arch/arm/boot/dts/omap3-igep.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap3-igep.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,5 +1,5 @@
 /*
- * Common device tree for IGEP boards based on AM/DM37x
+ * Device Tree Source for IGEP Technology devices
  *
  * Copyright (C) 2012 Javier Martinez Canillas <javier@collabora.co.uk>
  * Copyright (C) 2012 Enric Balletbo i Serra <eballetbo@gmail.com>
@@ -10,7 +10,7 @@
  */
 /dts-v1/;
 
-#include "omap36xx.dtsi"
+/include/ "omap34xx.dtsi"
 
 / {
 	memory {
@@ -24,134 +24,47 @@
 		ti,mcbsp = <&mcbsp2>;
 		ti,codec = <&twl_audio>;
 	};
-
-	vdd33: regulator-vdd33 {
-		compatible = "regulator-fixed";
-		regulator-name = "vdd33";
-		regulator-always-on;
-	};
-
 };
 
 &omap3_pmx_core {
 	uart1_pins: pinmux_uart1_pins {
 		pinctrl-single,pins = <
-			0x152 (PIN_INPUT | MUX_MODE0)		/* uart1_rx.uart1_rx */
-			0x14c (PIN_OUTPUT |MUX_MODE0)		/* uart1_tx.uart1_tx */
+			0x152 0x100	/* uart1_rx.uart1_rx INPUT | MODE0 */
+			0x14c 0		/* uart1_tx.uart1_tx OUTPUT | MODE0 */
 		>;
 	};
 
-	uart3_pins: pinmux_uart3_pins {
+	uart2_pins: pinmux_uart2_pins {
 		pinctrl-single,pins = <
-			0x16e (PIN_INPUT | MUX_MODE0)		/* uart3_rx.uart3_rx */
-			0x170 (PIN_OUTPUT | MUX_MODE0)		/* uart3_tx.uart3_tx */
+			0x14a 0x100	/* uart2_rx.uart2_rx INPUT | MODE0 */
+			0x148 0		/* uart2_tx.uart2_tx OUTPUT | MODE0 */
 		>;
 	};
 
-	mcbsp2_pins: pinmux_mcbsp2_pins {
+	uart3_pins: pinmux_uart3_pins {
 		pinctrl-single,pins = <
-			0x10c (PIN_INPUT | MUX_MODE0)		/* mcbsp2_fsx.mcbsp2_fsx */
-			0x10e (PIN_INPUT | MUX_MODE0)		/* mcbsp2_clkx.mcbsp2_clkx */
-			0x110 (PIN_INPUT | MUX_MODE0)		/* mcbsp2_dr.mcbsp2.dr */
-			0x112 (PIN_OUTPUT | MUX_MODE0)		/* mcbsp2_dx.mcbsp2_dx */
+			0x16e 0x100	/* uart3_rx.uart3_rx INPUT | MODE0 */
+			0x170 0		/* uart3_tx.uart3_tx OUTPUT | MODE0 */
 		>;
 	};
 
 	mmc1_pins: pinmux_mmc1_pins {
 		pinctrl-single,pins = <
-			0x114 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc1_clk.sdmmc1_clk */
-			0x116 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc1_cmd.sdmmc1_cmd */
-			0x118 (PIN_INPUT_PULLUP | MUX_MODE0) 	/* sdmmc1_dat0.sdmmc1_dat0 */
-			0x11a (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc1_dat1.sdmmc1_dat1 */
-			0x11c (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc1_dat2.sdmmc1_dat2 */
-			0x11e (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc1_dat3.sdmmc1_dat3 */
-		>;
-	};
-
-	mmc2_pins: pinmux_mmc2_pins {
-		pinctrl-single,pins = <
-			0x128 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc2_clk.sdmmc2_clk */
-			0x12a (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc2_cmd.sdmmc2_cmd */
-			0x12c (PIN_INPUT_PULLUP | MUX_MODE0) 	/* sdmmc2_dat0.sdmmc2_dat0 */
-			0x12e (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc2_dat1.sdmmc2_dat1 */
-			0x130 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc2_dat2.sdmmc2_dat2 */
-			0x132 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc2_dat3.sdmmc2_dat3 */
-		>;
-	};
-
-	smsc9221_pins: pinmux_smsc9221_pins {
-		pinctrl-single,pins = <
-			0x1a2 (PIN_INPUT | MUX_MODE4)		/* mcspi1_cs2.gpio_176 */
-		>;
-	};
-
-	i2c1_pins: pinmux_i2c1_pins {
-		pinctrl-single,pins = <
-			0x18a (PIN_INPUT | MUX_MODE0)   /* i2c1_scl.i2c1_scl */
-			0x18c (PIN_INPUT | MUX_MODE0)   /* i2c1_sda.i2c1_sda */
+			0x114 0x0118    /* sdmmc1_clk.sdmmc1_clk INPUT PULLUP | MODE 0 */
+			0x116 0x0118    /* sdmmc1_cmd.sdmmc1_cmd INPUT PULLUP | MODE 0 */
+			0x118 0x0118 	/* sdmmc1_dat0.sdmmc1_dat0 INPUT PULLUP | MODE 0 */
+			0x11a 0x0118	/* sdmmc1_dat1.sdmmc1_dat1 INPUT PULLUP | MODE 0 */
+			0x11c 0x0118	/* sdmmc1_dat2.sdmmc1_dat2 INPUT PULLUP | MODE 0 */
+			0x11e 0x0118	/* sdmmc1_dat3.sdmmc1_dat3 INPUT PULLUP | MODE 0 */
+			0x120 0x0100	/* sdmmc1_dat4.sdmmc1_dat4 INPUT | MODE 0 */
+			0x122 0x0100	/* sdmmc1_dat5.sdmmc1_dat5 INPUT | MODE 0 */
+			0x124 0x0100	/* sdmmc1_dat6.sdmmc1_dat6 INPUT | MODE 0 */
+			0x126 0x0100	/* sdmmc1_dat7.sdmmc1_dat7 INPUT | MODE 0 */
 		>;
 	};
-
-	i2c3_pins: pinmux_i2c3_pins {
-		pinctrl-single,pins = <
-			0x192 (PIN_INPUT | MUX_MODE0)   /* i2c3_scl.i2c3_scl */
-			0x194 (PIN_INPUT | MUX_MODE0)   /* i2c3_sda.i2c3_sda */
-		>;
-	};
-};
-
-&gpmc {
-	nand@0,0 {
-		linux,mtd-name= "micron,mt29c4g96maz";
-		reg = <0 0 4>;	/* CS0, offset 0, IO size 4 */
-		nand-bus-width = <16>;
-		gpmc,device-width = <2>;
-		ti,nand-ecc-opt = "bch8";
-
-		gpmc,sync-clk-ps = <0>;
-		gpmc,cs-on-ns = <0>;
-		gpmc,cs-rd-off-ns = <44>;
-		gpmc,cs-wr-off-ns = <44>;
-		gpmc,adv-on-ns = <6>;
-		gpmc,adv-rd-off-ns = <34>;
-		gpmc,adv-wr-off-ns = <44>;
-		gpmc,we-off-ns = <40>;
-		gpmc,oe-off-ns = <54>;
-		gpmc,access-ns = <64>;
-		gpmc,rd-cycle-ns = <82>;
-		gpmc,wr-cycle-ns = <82>;
-		gpmc,wr-access-ns = <40>;
-		gpmc,wr-data-mux-bus-ns = <0>;
-
-		#address-cells = <1>;
-		#size-cells = <1>;
-
-		partition@0 {
-			label = "SPL";
-			reg = <0 0x100000>;
-		};
-		partition@80000 {
-			label = "U-Boot";
-			reg = <0x100000 0x180000>;
-		};
-		partition@1c0000 {
-			label = "Environment";
-			reg = <0x280000 0x100000>;
-		};
-		partition@280000 {
-			label = "Kernel";
-			reg = <0x380000 0x300000>;
-		};
-		partition@780000 {
-			label = "Filesystem";
-			reg = <0x680000 0x1f980000>;
-		};
-	};
 };
 
 &i2c1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&i2c1_pins>;
 	clock-frequency = <2600000>;
 
 	twl: twl@48 {
@@ -167,18 +80,10 @@
 	};
 };
 
-#include "twl4030.dtsi"
-#include "twl4030_omap3.dtsi"
+/include/ "twl4030.dtsi"
 
-&i2c3 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&i2c3_pins>;
-};
-
-&mcbsp2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mcbsp2_pins>;
-	status = "okay";
+&i2c2 {
+	clock-frequency = <400000>;
 };
 
 &mmc1 {
@@ -186,7 +91,11 @@
       pinctrl-0 = <&mmc1_pins>;
       vmmc-supply = <&vmmc1>;
       vmmc_aux-supply = <&vsim>;
-      bus-width = <4>;
+      bus-width = <8>;
+};
+
+&mmc2 {
+	status = "disabled";
 };
 
 &mmc3 {
@@ -198,6 +107,11 @@
        pinctrl-0 = <&uart1_pins>;
 };
 
+&uart2 {
+       pinctrl-names = "default";
+       pinctrl-0 = <&uart2_pins>;
+};
+
 &uart3 {
        pinctrl-names = "default";
        pinctrl-0 = <&uart3_pins>;
@@ -206,12 +120,3 @@
 &twl_gpio {
 	ti,use-leds;
 };
-
-&usb_otg_hs {
-	interface-type = <0>;
-	usb-phy = <&usb2_phy>;
-	phys = <&usb2_phy>;
-	phy-names = "usb2-phy";
-	mode = <3>;
-	power = <50>;
-};
diff -urNp a/arch/arm/boot/dts/omap3-igep0020.dts b/arch/arm/boot/dts/omap3-igep0020.dts
--- a/arch/arm/boot/dts/omap3-igep0020.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap3-igep0020.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,5 +1,5 @@
 /*
- * Device Tree Source for IGEPv2 Rev. C (TI OMAP AM/DM37x)
+ * Device Tree Source for IGEPv2 board
  *
  * Copyright (C) 2012 Javier Martinez Canillas <javier@collabora.co.uk>
  * Copyright (C) 2012 Enric Balletbo i Serra <eballetbo@gmail.com>
@@ -9,59 +9,48 @@
  * published by the Free Software Foundation.
  */
 
-#include "omap3-igep0020-common.dtsi"
+/include/ "omap3-igep.dtsi"
 
 / {
-	model = "IGEPv2 Rev. C (TI OMAP AM/DM37x)";
-	compatible = "isee,omap3-igep0020", "ti,omap36xx", "ti,omap3";
+	model = "IGEPv2";
+	compatible = "isee,omap3-igep0020", "ti,omap3";
 
-	/* Regulator to trigger the WIFI_PDN signal of the Wifi module */
-	lbee1usjyc_pdn: lbee1usjyc_pdn {
-		compatible = "regulator-fixed";
-		regulator-name = "regulator-lbee1usjyc-pdn";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		gpio = <&gpio5 10 GPIO_ACTIVE_HIGH>;	/* gpio_138 - WIFI_PDN */
-		startup-delay-us = <10000>;
-		enable-active-high;
-	};
-
-	/* Regulator to trigger the RESET_N_W signal of the Wifi module */
-	lbee1usjyc_reset_n_w: lbee1usjyc_reset_n_w {
-		compatible = "regulator-fixed";
-		regulator-name = "regulator-lbee1usjyc-reset-n-w";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		gpio = <&gpio5 11 GPIO_ACTIVE_HIGH>;	/* gpio_139 - RESET_N_W */
-		enable-active-high;
+	leds {
+		compatible = "gpio-leds";
+		boot {
+			 label = "omap3:green:boot";
+			 gpios = <&gpio1 26 0>;
+			 default-state = "on";
+		};
+
+		user0 {
+			 label = "omap3:red:user0";
+			 gpios = <&gpio1 27 0>;
+			 default-state = "off";
+		};
+
+		user1 {
+			 label = "omap3:red:user1";
+			 gpios = <&gpio1 28 0>;
+			 default-state = "off";
+		};
+
+		user2 {
+			label = "omap3:green:user1";
+			gpios = <&twl_gpio 19 1>;
+		};
 	};
 };
 
-&omap3_pmx_core {
-	lbee1usjyc_pins: pinmux_lbee1usjyc_pins {
-		pinctrl-single,pins = <
-			OMAP3_CORE1_IOPAD(0x2166, PIN_OUTPUT | MUX_MODE4)	/* sdmmc2_dat5.gpio_137 - RESET_N_W */
-			OMAP3_CORE1_IOPAD(0x2168, PIN_OUTPUT | MUX_MODE4)	/* sdmmc2_dat6.gpio_138 - WIFI_PDN */
-			OMAP3_CORE1_IOPAD(0x216a, PIN_OUTPUT | MUX_MODE4)	/* sdmmc2_dat7.gpio_139 - RST_N_B */
-		>;
-	};
+&i2c3 {
+	clock-frequency = <100000>;
 
-	uart2_pins: pinmux_uart2_pins {
-		pinctrl-single,pins = <
-			OMAP3_CORE1_IOPAD(0x2174, PIN_INPUT | MUX_MODE0)	/* uart2_cts.uart2_cts */
-			OMAP3_CORE1_IOPAD(0x2176, PIN_OUTPUT | MUX_MODE0)	/* uart2_rts .uart2_rts*/
-			OMAP3_CORE1_IOPAD(0x2178, PIN_OUTPUT | MUX_MODE0)	/* uart2_tx.uart2_tx */
-			OMAP3_CORE1_IOPAD(0x217a, PIN_INPUT | MUX_MODE0)	/* uart2_rx.uart2_rx */
-		>;
+	/*
+	 * Display monitor features are burnt in the EEPROM
+	 * as EDID data.
+	 */
+	eeprom@50 {
+		compatible = "ti,eeprom";
+		reg = <0x50>;
 	};
 };
-
-/* On board Wifi module */
-&mmc2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mmc2_pins &lbee1usjyc_pins>;
-	vmmc-supply = <&lbee1usjyc_pdn>;
-	vmmc_aux-supply = <&lbee1usjyc_reset_n_w>;
-	bus-width = <4>;
-	non-removable;
-};
diff -urNp a/arch/arm/boot/dts/omap3-igep0030.dts b/arch/arm/boot/dts/omap3-igep0030.dts
--- a/arch/arm/boot/dts/omap3-igep0030.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap3-igep0030.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,5 +1,5 @@
 /*
- * Device Tree Source for IGEP COM MODULE Rev. E (TI OMAP AM/DM37x)
+ * Device Tree Source for IGEP COM Module
  *
  * Copyright (C) 2012 Javier Martinez Canillas <javier@collabora.co.uk>
  * Copyright (C) 2012 Enric Balletbo i Serra <eballetbo@gmail.com>
@@ -9,62 +9,36 @@
  * published by the Free Software Foundation.
  */
 
-#include "omap3-igep0030-common.dtsi"
+/include/ "omap3-igep.dtsi"
 
 / {
-	model = "IGEP COM MODULE Rev. E (TI OMAP AM/DM37x)";
-	compatible = "isee,omap3-igep0030", "ti,omap36xx", "ti,omap3";
+	model = "IGEP COM Module";
+	compatible = "isee,omap3-igep0030", "ti,omap3";
 
-	/* Regulator to trigger the WIFI_PDN signal of the Wifi module */
-	lbee1usjyc_pdn: lbee1usjyc_pdn {
-		compatible = "regulator-fixed";
-		regulator-name = "regulator-lbee1usjyc-pdn";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		gpio = <&gpio5 10 GPIO_ACTIVE_HIGH>;	/* gpio_138 - WIFI_PDN */
-		startup-delay-us = <10000>;
-		enable-active-high;
-	};
-
-	/* Regulator to trigger the RESET_N_W signal of the Wifi module */
-	lbee1usjyc_reset_n_w: lbee1usjyc_reset_n_w {
-		compatible = "regulator-fixed";
-		regulator-name = "regulator-lbee1usjyc-reset-n-w";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		gpio = <&gpio5 11 GPIO_ACTIVE_HIGH>;	/* gpio_139 - RESET_N_W */
-		enable-active-high;
-	};
-};
-
-&omap3_pmx_core {
-	lbee1usjyc_pins: pinmux_lbee1usjyc_pins {
-		pinctrl-single,pins = <
-			OMAP3_CORE1_IOPAD(0x2166, PIN_OUTPUT | MUX_MODE4)	/* sdmmc2_dat5.gpio_137 - RESET_N_W */
-			OMAP3_CORE1_IOPAD(0x2168, PIN_OUTPUT | MUX_MODE4)	/* sdmmc2_dat6.gpio_138 - WIFI_PDN */
-			OMAP3_CORE1_IOPAD(0x216a, PIN_OUTPUT | MUX_MODE4)	/* sdmmc2_dat7.gpio_139 - RST_N_B */
-		>;
+	leds {
+		compatible = "gpio-leds";
+		boot {
+			 label = "omap3:green:boot";
+			 gpios = <&twl_gpio 13 1>;
+			 default-state = "on";
+		};
+
+		user0 {
+			 label = "omap3:red:user0";
+			 gpios = <&twl_gpio 18 1>; /* LEDA */
+			 default-state = "off";
+		};
+
+		user1 {
+			 label = "omap3:green:user1";
+			 gpios = <&twl_gpio 19 1>; /* LEDB */
+			 default-state = "off";
+		};
+
+		user2 {
+			 label = "omap3:red:user1";
+			 gpios = <&gpio1 16 1>;
+			 default-state = "off";
+		};
 	};
 };
-
-&leds {
-	pinctrl-names = "default";
-	pinctrl-0 = <&leds_core2_pins>;
-
-	boot {
-		label = "omap3:green:boot";
-		gpios = <&twl_gpio 13 GPIO_ACTIVE_LOW>;	/* LEDSYNC */
-		default-state = "on";
-	};
-};
-
-/* On board Wifi module */
-&mmc2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mmc2_pins &lbee1usjyc_pins>;
-	vmmc-supply = <&lbee1usjyc_pdn>;
-	vmmc_aux-supply = <&lbee1usjyc_reset_n_w>;
-	bus-width = <4>;
-	non-removable;
-};
-
diff -urNp a/arch/arm/boot/dts/omap3-overo.dtsi b/arch/arm/boot/dts/omap3-overo.dtsi
--- a/arch/arm/boot/dts/omap3-overo.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap3-overo.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,38 +1,79 @@
 /*
- * Copyright (C) 2014 Florian Vaussard, EPFL Mobots group
+ * Copyright (C) 2012 Florian Vaussard, EPFL Mobots group
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
  */
 
-#include "omap34xx.dtsi"
-#include "omap3-overo-base.dtsi"
+/*
+ * The Gumstix Overo must be combined with an expansion board.
+ */
+/dts-v1/;
+
+/include/ "omap34xx.dtsi"
+
+/ {
+	pwmleds {
+		compatible = "pwm-leds";
+
+		overo {
+			label = "overo:blue:COM";
+			pwms = <&twl_pwmled 1 7812500>;
+			max-brightness = <127>;
+		};
+	};
+
+	sound {
+		compatible = "ti,omap-twl4030";
+		ti,model = "overo";
 
-&omap3_pmx_core2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <
-			&hsusb2_2_pins
-	>;
-
-	hsusb2_2_pins: pinmux_hsusb2_2_pins {
-		pinctrl-single,pins = <
-			OMAP3430_CORE2_IOPAD(0x25f0, PIN_OUTPUT | MUX_MODE3)		/* etk_d10.hsusb2_clk */
-			OMAP3430_CORE2_IOPAD(0x25f2, PIN_OUTPUT | MUX_MODE3)		/* etk_d11.hsusb2_stp */
-			OMAP3430_CORE2_IOPAD(0x25f4, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d12.hsusb2_dir */
-			OMAP3430_CORE2_IOPAD(0x25f6, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d13.hsusb2_nxt */
-			OMAP3430_CORE2_IOPAD(0x25f8, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d14.hsusb2_data0 */
-			OMAP3430_CORE2_IOPAD(0x25fa, PIN_INPUT_PULLDOWN | MUX_MODE3)	/* etk_d15.hsusb2_data1 */
-		>;
+		ti,mcbsp = <&mcbsp2>;
+		ti,codec = <&twl_audio>;
 	};
+};
+
+&i2c1 {
+	clock-frequency = <2600000>;
+
+	twl: twl@48 {
+		reg = <0x48>;
+		interrupts = <7>; /* SYS_NIRQ cascaded to intc */
+		interrupt-parent = <&intc>;
 
-	w3cbw003c_2_pins: pinmux_w3cbw003c_2_pins {
-		pinctrl-single,pins = <
-			OMAP3430_CORE2_IOPAD(0x25e0, PIN_OUTPUT | MUX_MODE4)		/* etk_d2.gpio_16 */
-		>;
+		twl_audio: audio {
+			compatible = "ti,twl4030-audio";
+			codec {
+			};
+		};
 	};
 };
 
-&mcbsp2 {
-	status = "okay";
+/include/ "twl4030.dtsi"
+
+/* i2c2 pins are used for gpio */
+&i2c2 {
+	status = "disabled";
+};
+
+/* on board microSD slot */
+&mmc1 {
+	vmmc-supply = <&vmmc1>;
+	bus-width = <4>;
+};
+
+/* optional on board WiFi */
+&mmc2 {
+	bus-width = <4>;
+};
+
+&twl_gpio {
+	ti,use-leds;
+};
+
+&usb_otg_hs {
+	interface-type = <0>;
+	usb-phy = <&usb2_phy>;
+	mode = <3>;
+	power = <50>;
 };
diff -urNp a/arch/arm/boot/dts/omap3-tobi.dts b/arch/arm/boot/dts/omap3-tobi.dts
--- a/arch/arm/boot/dts/omap3-tobi.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/omap3-tobi.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,35 @@
+/*
+ * Copyright (C) 2012 Florian Vaussard, EPFL Mobots group
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/*
+ * Tobi expansion board is manufactured by Gumstix Inc.
+ */
+
+/include/ "omap3-overo.dtsi"
+
+/ {
+	model = "TI OMAP3 Gumstix Overo on Tobi";
+	compatible = "ti,omap3-tobi", "ti,omap3-overo", "ti,omap3";
+
+	leds {
+		compatible = "gpio-leds";
+		heartbeat {
+			label = "overo:red:gpio21";
+			gpios = <&gpio1 21 0>;
+			linux,default-trigger = "heartbeat";
+		};
+	};
+};
+
+&i2c3 {
+	clock-frequency = <100000>;
+};
+
+&mmc3 {
+	status = "disabled";
+};
diff -urNp a/arch/arm/boot/dts/omap3.dtsi b/arch/arm/boot/dts/omap3.dtsi
--- a/arch/arm/boot/dts/omap3.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap3.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,44 +8,26 @@
  * kind, whether express or implied.
  */
 
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/pinctrl/omap.h>
-
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	compatible = "ti,omap3430", "ti,omap3";
 	interrupt-parent = <&intc>;
 
 	aliases {
-		i2c0 = &i2c1;
-		i2c1 = &i2c2;
-		i2c2 = &i2c3;
 		serial0 = &uart1;
 		serial1 = &uart2;
 		serial2 = &uart3;
 	};
 
 	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
 		cpu@0 {
 			compatible = "arm,cortex-a8";
-			device_type = "cpu";
-			reg = <0x0>;
-
-			clocks = <&dpll1_ck>;
-			clock-names = "cpu";
-
-			clock-latency = <300000>; /* From omap-cpufreq driver */
 		};
 	};
 
 	pmu {
 		compatible = "arm,cortex-a8-pmu";
-		reg = <0x54000000 0x800000>;
 		interrupts = <3>;
 		ti,hwmods = "debugss";
 	};
@@ -61,7 +43,7 @@
 			ti,hwmods = "mpu";
 		};
 
-		iva: iva {
+		iva {
 			compatible = "ti,iva2.2";
 			ti,hwmods = "iva";
 
@@ -74,68 +56,17 @@
 	/*
 	 * XXX: Use a flat representation of the OMAP3 interconnect.
 	 * The real OMAP interconnect network is quite complex.
-	 * Since it will not bring real advantage to represent that in DT for
+	 * Since that will not bring real advantage to represent that in DT for
 	 * the moment, just use a fake OCP bus entry to represent the whole bus
 	 * hierarchy.
 	 */
 	ocp {
-		compatible = "ti,omap3-l3-smx", "simple-bus";
-		reg = <0x68000000 0x10000>;
-		interrupts = <9 10>;
+		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <1>;
 		ranges;
 		ti,hwmods = "l3_main";
 
-		aes: aes@480c5000 {
-			compatible = "ti,omap3-aes";
-			ti,hwmods = "aes";
-			reg = <0x480c5000 0x50>;
-			interrupts = <0>;
-			dmas = <&sdma 65 &sdma 66>;
-			dma-names = "tx", "rx";
-		};
-
-		prm: prm@48306000 {
-			compatible = "ti,omap3-prm";
-			reg = <0x48306000 0x4000>;
-			interrupts = <11>;
-
-			prm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			prm_clockdomains: clockdomains {
-			};
-		};
-
-		cm: cm@48004000 {
-			compatible = "ti,omap3-cm";
-			reg = <0x48004000 0x4000>;
-
-			cm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			cm_clockdomains: clockdomains {
-			};
-		};
-
-		scrm: scrm@48002000 {
-			compatible = "ti,omap3-scrm";
-			reg = <0x48002000 0x2000>;
-
-			scrm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			scrm_clockdomains: clockdomains {
-			};
-		};
-
 		counter32k: counter@48320000 {
 			compatible = "ti,omap-counter32k";
 			reg = <0x48320000 0x20>;
@@ -143,9 +74,10 @@
 		};
 
 		intc: interrupt-controller@48200000 {
-			compatible = "ti,omap3-intc";
+			compatible = "ti,omap2-intc";
 			interrupt-controller;
 			#interrupt-cells = <1>;
+			ti,intc-size = <96>;
 			reg = <0x48200000 0x1000>;
 		};
 
@@ -157,46 +89,26 @@
 				     <14>,
 				     <15>;
 			#dma-cells = <1>;
-			dma-channels = <32>;
-			dma-requests = <96>;
+			#dma-channels = <32>;
+			#dma-requests = <96>;
 		};
 
 		omap3_pmx_core: pinmux@48002030 {
 			compatible = "ti,omap3-padconf", "pinctrl-single";
-			reg = <0x48002030 0x0238>;
+			reg = <0x48002030 0x05cc>;
 			#address-cells = <1>;
 			#size-cells = <0>;
-			#interrupt-cells = <1>;
-			interrupt-controller;
 			pinctrl-single,register-width = <16>;
-			pinctrl-single,function-mask = <0xff1f>;
+			pinctrl-single,function-mask = <0x7f1f>;
 		};
 
-		omap3_pmx_wkup: pinmux@48002a00 {
+		omap3_pmx_wkup: pinmux@0x48002a00 {
 			compatible = "ti,omap3-padconf", "pinctrl-single";
 			reg = <0x48002a00 0x5c>;
 			#address-cells = <1>;
 			#size-cells = <0>;
-			#interrupt-cells = <1>;
-			interrupt-controller;
 			pinctrl-single,register-width = <16>;
-			pinctrl-single,function-mask = <0xff1f>;
-		};
-
-		omap3_scm_general: tisyscon@48002270 {
-			compatible = "syscon";
-			reg = <0x48002270 0x2f0>;
-		};
-
-		pbias_regulator: pbias_regulator {
-			compatible = "ti,pbias-omap";
-			reg = <0x2b0 0x4>;
-			syscon = <&omap3_scm_general>;
-			pbias_mmc_reg: pbias_mmc_omap2430 {
-				regulator-name = "pbias_mmc_omap2430";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3000000>;
-			};
+			pinctrl-single,function-mask = <0x7f1f>;
 		};
 
 		gpio1: gpio@48310000 {
@@ -268,40 +180,24 @@
 
 		uart1: serial@4806a000 {
 			compatible = "ti,omap3-uart";
-			reg = <0x4806a000 0x2000>;
-			interrupts-extended = <&intc 72>;
-			dmas = <&sdma 49 &sdma 50>;
-			dma-names = "tx", "rx";
 			ti,hwmods = "uart1";
 			clock-frequency = <48000000>;
 		};
 
 		uart2: serial@4806c000 {
 			compatible = "ti,omap3-uart";
-			reg = <0x4806c000 0x400>;
-			interrupts-extended = <&intc 73>;
-			dmas = <&sdma 51 &sdma 52>;
-			dma-names = "tx", "rx";
 			ti,hwmods = "uart2";
 			clock-frequency = <48000000>;
 		};
 
 		uart3: serial@49020000 {
 			compatible = "ti,omap3-uart";
-			reg = <0x49020000 0x400>;
-			interrupts-extended = <&intc 74>;
-			dmas = <&sdma 53 &sdma 54>;
-			dma-names = "tx", "rx";
 			ti,hwmods = "uart3";
 			clock-frequency = <48000000>;
 		};
 
 		i2c1: i2c@48070000 {
 			compatible = "ti,omap3-i2c";
-			reg = <0x48070000 0x80>;
-			interrupts = <56>;
-			dmas = <&sdma 27 &sdma 28>;
-			dma-names = "tx", "rx";
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c1";
@@ -309,10 +205,6 @@
 
 		i2c2: i2c@48072000 {
 			compatible = "ti,omap3-i2c";
-			reg = <0x48072000 0x80>;
-			interrupts = <57>;
-			dmas = <&sdma 29 &sdma 30>;
-			dma-names = "tx", "rx";
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c2";
@@ -320,33 +212,13 @@
 
 		i2c3: i2c@48060000 {
 			compatible = "ti,omap3-i2c";
-			reg = <0x48060000 0x80>;
-			interrupts = <61>;
-			dmas = <&sdma 25 &sdma 26>;
-			dma-names = "tx", "rx";
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c3";
 		};
 
-		mailbox: mailbox@48094000 {
-			compatible = "ti,omap3-mailbox";
-			ti,hwmods = "mailbox";
-			reg = <0x48094000 0x200>;
-			interrupts = <26>;
-			#mbox-cells = <1>;
-			ti,mbox-num-users = <2>;
-			ti,mbox-num-fifos = <2>;
-			mbox_dsp: dsp {
-				ti,mbox-tx = <0 0 0>;
-				ti,mbox-rx = <1 0 0>;
-			};
-		};
-
 		mcspi1: spi@48098000 {
 			compatible = "ti,omap2-mcspi";
-			reg = <0x48098000 0x100>;
-			interrupts = <65>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi1";
@@ -365,8 +237,6 @@
 
 		mcspi2: spi@4809a000 {
 			compatible = "ti,omap2-mcspi";
-			reg = <0x4809a000 0x100>;
-			interrupts = <66>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi2";
@@ -380,8 +250,6 @@
 
 		mcspi3: spi@480b8000 {
 			compatible = "ti,omap2-mcspi";
-			reg = <0x480b8000 0x100>;
-			interrupts = <91>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi3";
@@ -395,8 +263,6 @@
 
 		mcspi4: spi@480ba000 {
 			compatible = "ti,omap2-mcspi";
-			reg = <0x480ba000 0x100>;
-			interrupts = <48>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi4";
@@ -405,28 +271,16 @@
 			dma-names = "tx0", "rx0";
 		};
 
-		hdqw1w: 1w@480b2000 {
-			compatible = "ti,omap3-1w";
-			reg = <0x480b2000 0x1000>;
-			interrupts = <58>;
-			ti,hwmods = "hdq1w";
-		};
-
 		mmc1: mmc@4809c000 {
 			compatible = "ti,omap3-hsmmc";
-			reg = <0x4809c000 0x200>;
-			interrupts = <83>;
 			ti,hwmods = "mmc1";
 			ti,dual-volt;
 			dmas = <&sdma 61>, <&sdma 62>;
 			dma-names = "tx", "rx";
-			pbias-supply = <&pbias_mmc_reg>;
 		};
 
 		mmc2: mmc@480b4000 {
 			compatible = "ti,omap3-hsmmc";
-			reg = <0x480b4000 0x200>;
-			interrupts = <86>;
 			ti,hwmods = "mmc2";
 			dmas = <&sdma 47>, <&sdma 48>;
 			dma-names = "tx", "rx";
@@ -434,32 +288,13 @@
 
 		mmc3: mmc@480ad000 {
 			compatible = "ti,omap3-hsmmc";
-			reg = <0x480ad000 0x200>;
-			interrupts = <94>;
 			ti,hwmods = "mmc3";
 			dmas = <&sdma 77>, <&sdma 78>;
 			dma-names = "tx", "rx";
 		};
 
-		mmu_isp: mmu@480bd400 {
-			compatible = "ti,omap2-iommu";
-			reg = <0x480bd400 0x80>;
-			interrupts = <24>;
-			ti,hwmods = "mmu_isp";
-			ti,#tlb-entries = <8>;
-		};
-
-		mmu_iva: mmu@5d000000 {
-			compatible = "ti,omap2-iommu";
-			reg = <0x5d000000 0x80>;
-			interrupts = <28>;
-			ti,hwmods = "mmu_iva";
-			status = "disabled";
-		};
-
 		wdt2: wdt@48314000 {
 			compatible = "ti,omap3-wdt";
-			reg = <0x48314000 0x80>;
 			ti,hwmods = "wd_timer2";
 		};
 
@@ -476,7 +311,6 @@
 			dmas = <&sdma 31>,
 			       <&sdma 32>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp2: mcbsp@49022000 {
@@ -494,7 +328,6 @@
 			dmas = <&sdma 33>,
 			       <&sdma 34>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp3: mcbsp@49024000 {
@@ -512,7 +345,6 @@
 			dmas = <&sdma 17>,
 			       <&sdma 18>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp4: mcbsp@49026000 {
@@ -528,7 +360,6 @@
 			dmas = <&sdma 19>,
 			       <&sdma 20>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp5: mcbsp@48096000 {
@@ -544,30 +375,6 @@
 			dmas = <&sdma 21>,
 			       <&sdma 22>;
 			dma-names = "tx", "rx";
-			status = "disabled";
-		};
-
-		sham: sham@480c3000 {
-			compatible = "ti,omap3-sham";
-			ti,hwmods = "sham";
-			reg = <0x480c3000 0x64>;
-			interrupts = <49>;
-			dmas = <&sdma 69>;
-			dma-names = "rx";
-		};
-
-		smartreflex_core: smartreflex@480cb000 {
-			compatible = "ti,omap3-smartreflex-core";
-			ti,hwmods = "smartreflex_core";
-			reg = <0x480cb000 0x400>;
-			interrupts = <19>;
-		};
-
-		smartreflex_mpu_iva: smartreflex@480c9000 {
-			compatible = "ti,omap3-smartreflex-iva";
-			ti,hwmods = "smartreflex_mpu_iva";
-			reg = <0x480c9000 0x400>;
-			interrupts = <18>;
 		};
 
 		timer1: timer@48318000 {
@@ -681,14 +488,14 @@
 			ranges;
 
 			usbhsohci: ohci@48064400 {
-				compatible = "ti,ohci-omap3";
+				compatible = "ti,ohci-omap3", "usb-ohci";
 				reg = <0x48064400 0x400>;
 				interrupt-parent = <&intc>;
 				interrupts = <76>;
 			};
 
 			usbhsehci: ehci@48064800 {
-				compatible = "ti,ehci-omap";
+				compatible = "ti,ehci-omap", "usb-ehci";
 				reg = <0x48064800 0x400>;
 				interrupt-parent = <&intc>;
 				interrupts = <77>;
@@ -716,104 +523,5 @@
 			num-eps = <16>;
 			ram-bits = <12>;
 		};
-
-		dss: dss@48050000 {
-			compatible = "ti,omap3-dss";
-			reg = <0x48050000 0x200>;
-			status = "disabled";
-			ti,hwmods = "dss_core";
-			clocks = <&dss1_alwon_fck>;
-			clock-names = "fck";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges;
-
-			dispc@48050400 {
-				compatible = "ti,omap3-dispc";
-				reg = <0x48050400 0x400>;
-				interrupts = <25>;
-				ti,hwmods = "dss_dispc";
-				clocks = <&dss1_alwon_fck>;
-				clock-names = "fck";
-			};
-
-			dsi: encoder@4804fc00 {
-				compatible = "ti,omap3-dsi";
-				reg = <0x4804fc00 0x200>,
-				      <0x4804fe00 0x40>,
-				      <0x4804ff00 0x20>;
-				reg-names = "proto", "phy", "pll";
-				interrupts = <25>;
-				status = "disabled";
-				ti,hwmods = "dss_dsi1";
-				clocks = <&dss1_alwon_fck>, <&dss2_alwon_fck>;
-				clock-names = "fck", "sys_clk";
-			};
-
-			rfbi: encoder@48050800 {
-				compatible = "ti,omap3-rfbi";
-				reg = <0x48050800 0x100>;
-				status = "disabled";
-				ti,hwmods = "dss_rfbi";
-				clocks = <&dss1_alwon_fck>, <&dss_ick>;
-				clock-names = "fck", "ick";
-			};
-
-			venc: encoder@48050c00 {
-				compatible = "ti,omap3-venc";
-				reg = <0x48050c00 0x100>;
-				status = "disabled";
-				ti,hwmods = "dss_venc";
-				clocks = <&dss_tv_fck>;
-				clock-names = "fck";
-			};
-		};
-
-		ssi: ssi-controller@48058000 {
-			compatible = "ti,omap3-ssi";
-			ti,hwmods = "ssi";
-
-			status = "disabled";
-
-			reg = <0x48058000 0x1000>,
-			      <0x48059000 0x1000>;
-			reg-names = "sys",
-				    "gdd";
-
-			interrupts = <71>;
-			interrupt-names = "gdd_mpu";
-
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges;
-
-			ssi_port1: ssi-port@4805a000 {
-				compatible = "ti,omap3-ssi-port";
-
-				reg = <0x4805a000 0x800>,
-				      <0x4805a800 0x800>;
-				reg-names = "tx",
-					    "rx";
-
-				interrupt-parent = <&intc>;
-				interrupts = <67>,
-					     <68>;
-			};
-
-			ssi_port2: ssi-port@4805b000 {
-				compatible = "ti,omap3-ssi-port";
-
-				reg = <0x4805b000 0x800>,
-				      <0x4805b800 0x800>;
-				reg-names = "tx",
-					    "rx";
-
-				interrupt-parent = <&intc>;
-				interrupts = <69>,
-					     <70>;
-			};
-		};
 	};
 };
-
-/include/ "omap3xxx-clocks.dtsi"
diff -urNp a/arch/arm/boot/dts/omap3430-sdp.dts b/arch/arm/boot/dts/omap3430-sdp.dts
--- a/arch/arm/boot/dts/omap3430-sdp.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap3430-sdp.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,7 +7,7 @@
  */
 /dts-v1/;
 
-#include "omap34xx.dtsi"
+/include/ "omap34xx.dtsi"
 
 / {
 	model = "TI OMAP3430 SDP";
@@ -28,16 +28,11 @@
 	};
 };
 
-#include "twl4030.dtsi"
-#include "twl4030_omap3.dtsi"
+/include/ "twl4030.dtsi"
 
 &mmc1 {
 	vmmc-supply = <&vmmc1>;
 	vmmc_aux-supply = <&vsim>;
-	/*
-	 * S6-3 must be in ON position for 8 bit mode to function
-	 * Else, use 4 bit mode
-	 */
 	bus-width = <8>;
 };
 
@@ -51,8 +46,8 @@
 
 &gpmc {
 	ranges = <0 0 0x10000000 0x08000000>,
-		 <1 0 0x28000000 0x1000000>,	/* CS1: 16MB for NAND */
-		 <2 0 0x20000000 0x1000000>;	/* CS2: 16MB for OneNAND */
+		 <1 0 0x28000000 0x08000000>,
+		 <2 0 0x20000000 0x10000000>;
 
 	nor@0,0 {
 		compatible = "cfi-flash";
@@ -88,15 +83,15 @@
 			label = "bootloader-nor";
 			reg = <0 0x40000>;
 		};
-		partition@40000 {
+		partition@0x40000 {
 			label = "params-nor";
 			reg = <0x40000 0x40000>;
 		};
-		partition@80000 {
+		partition@0x80000 {
 			label = "kernel-nor";
 			reg = <0x80000 0x200000>;
 		};
-		partition@280000 {
+		partition@0x280000 {
 			label = "filesystem-nor";
 			reg = <0x240000 0x7d80000>;
 		};
@@ -106,9 +101,11 @@
 		linux,mtd-name= "micron,mt29f1g08abb";
 		#address-cells = <1>;
 		#size-cells = <1>;
-		reg = <1 0 4>;	/* CS1, offset 0, IO size 4 */
-		ti,nand-ecc-opt = "sw";
+		reg = <1 0 0x08000000>;
 		nand-bus-width = <8>;
+
+		ti,nand-ecc-opt = "sw";
+		gpmc,device-nand;
 		gpmc,cs-on-ns = <0>;
 		gpmc,cs-rd-off-ns = <36>;
 		gpmc,cs-wr-off-ns = <36>;
@@ -128,19 +125,19 @@
 			label = "xloader-nand";
 			reg = <0 0x80000>;
 		};
-		partition@80000 {
+		partition@0x80000 {
 			label = "bootloader-nand";
 			reg = <0x80000 0x140000>;
 		};
-		partition@1c0000 {
+		partition@0x1c0000 {
 			label = "params-nand";
 			reg = <0x1c0000 0xc0000>;
 		};
-		partition@280000 {
+		partition@0x280000 {
 			label = "kernel-nand";
 			reg = <0x280000 0x500000>;
 		};
-		partition@780000 {
+		partition@0x780000 {
 			label = "filesystem-nand";
 			reg = <0x780000 0x7880000>;
 		};
@@ -150,7 +147,7 @@
 		linux,mtd-name= "samsung,kfm2g16q2m-deb8";
 		#address-cells = <1>;
 		#size-cells = <1>;
-		reg = <2 0 0x20000>;	/* CS2, offset 0, IO size 4 */
+		reg = <2 0 0x10000000>;
 
 		gpmc,device-width = <2>;
 		gpmc,mux-add-data = <2>;
@@ -173,19 +170,19 @@
 			label = "xloader-onenand";
 			reg = <0 0x80000>;
 		};
-		partition@80000 {
+		partition@0x80000 {
 			label = "bootloader-onenand";
 			reg = <0x80000 0x40000>;
 		};
-		partition@c0000 {
+		partition@0xc0000 {
 			label = "params-onenand";
 			reg = <0xc0000 0x20000>;
 		};
-		partition@e0000 {
+		partition@0xe0000 {
 			label = "kernel-onenand";
 			reg = <0xe0000 0x200000>;
 		};
-		partition@2e0000 {
+		partition@0x2e0000 {
 			label = "filesystem-onenand";
 			reg = <0x2e0000 0xfd20000>;
 		};
diff -urNp a/arch/arm/boot/dts/omap34xx.dtsi b/arch/arm/boot/dts/omap34xx.dtsi
--- a/arch/arm/boot/dts/omap34xx.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap34xx.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,7 +8,7 @@
  * kind, whether express or implied.
  */
 
-#include "omap3.dtsi"
+/include/ "omap3.dtsi"
 
 / {
 	cpus {
@@ -25,32 +25,4 @@
 			clock-latency = <300000>; /* From legacy driver */
 		};
 	};
-
-	ocp {
-		omap3_pmx_core2: pinmux@480025d8 {
-			compatible = "ti,omap3-padconf", "pinctrl-single";
-			reg = <0x480025d8 0x24>;
-			#address-cells = <1>;
-			#size-cells = <0>;
-			#interrupt-cells = <1>;
-			interrupt-controller;
-			pinctrl-single,register-width = <16>;
-			pinctrl-single,function-mask = <0xff1f>;
-		};
-	};
 };
-
-&ssi {
-	status = "ok";
-
-	clocks = <&ssi_ssr_fck>,
-		 <&ssi_sst_fck>,
-		 <&ssi_ick>;
-	clock-names = "ssi_ssr_fck",
-		      "ssi_sst_fck",
-		      "ssi_ick";
-};
-
-/include/ "omap34xx-omap36xx-clocks.dtsi"
-/include/ "omap36xx-omap3430es2plus-clocks.dtsi"
-/include/ "omap36xx-am35xx-omap3430es2plus-clocks.dtsi"
diff -urNp a/arch/arm/boot/dts/omap36xx.dtsi b/arch/arm/boot/dts/omap36xx.dtsi
--- a/arch/arm/boot/dts/omap36xx.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap36xx.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,7 +8,7 @@
  * kind, whether express or implied.
  */
 
-#include "omap3.dtsi"
+/include/ "omap3.dtsi"
 
 / {
 	aliases {
@@ -31,65 +31,8 @@
 	ocp {
 		uart4: serial@49042000 {
 			compatible = "ti,omap3-uart";
-			reg = <0x49042000 0x400>;
-			interrupts = <80>;
-			dmas = <&sdma 81 &sdma 82>;
-			dma-names = "tx", "rx";
 			ti,hwmods = "uart4";
 			clock-frequency = <48000000>;
 		};
-
-		abb_mpu_iva: regulator-abb-mpu {
-			compatible = "ti,abb-v1";
-			regulator-name = "abb_mpu_iva";
-			#address-cell = <0>;
-			#size-cells = <0>;
-			reg = <0x483072f0 0x8>, <0x48306818 0x4>;
-			reg-names = "base-address", "int-address";
-			ti,tranxdone-status-mask = <0x4000000>;
-			clocks = <&sys_ck>;
-			ti,settling-time = <30>;
-			ti,clock-cycles = <8>;
-			ti,abb_info = <
-			/*uV		ABB	efuse	rbb_m	fbb_m	vset_m*/
-			1012500		0	0	0	0	0
-			1200000		0	0	0	0	0
-			1325000		0	0	0	0	0
-			1375000		1	0	0	0	0
-			>;
-		};
-
-		omap3_pmx_core2: pinmux@480025a0 {
-			compatible = "ti,omap3-padconf", "pinctrl-single";
-			reg = <0x480025a0 0x5c>;
-			#address-cells = <1>;
-			#size-cells = <0>;
-			#interrupt-cells = <1>;
-			interrupt-controller;
-			pinctrl-single,register-width = <16>;
-			pinctrl-single,function-mask = <0xff1f>;
-		};
 	};
 };
-
-/* OMAP3630 needs dss_96m_fck for VENC */
-&venc {
-	clocks = <&dss_tv_fck>, <&dss_96m_fck>;
-	clock-names = "fck", "tv_dac_clk";
-};
-
-&ssi {
-	status = "ok";
-
-	clocks = <&ssi_ssr_fck>,
-		 <&ssi_sst_fck>,
-		 <&ssi_ick>;
-	clock-names = "ssi_ssr_fck",
-		      "ssi_sst_fck",
-		      "ssi_ick";
-};
-
-/include/ "omap34xx-omap36xx-clocks.dtsi"
-/include/ "omap36xx-omap3430es2plus-clocks.dtsi"
-/include/ "omap36xx-am35xx-omap3430es2plus-clocks.dtsi"
-/include/ "omap36xx-clocks.dtsi"
diff -urNp a/arch/arm/boot/dts/omap4-panda-a4.dts b/arch/arm/boot/dts/omap4-panda-a4.dts
--- a/arch/arm/boot/dts/omap4-panda-a4.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap4-panda-a4.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,14 +7,14 @@
  */
 /dts-v1/;
 
-#include "omap443x.dtsi"
-#include "omap4-panda-common.dtsi"
+/include/ "omap443x.dtsi"
+/include/ "omap4-panda-common.dtsi"
 
 /* Pandaboard Rev A4+ have external pullups on SCL & SDA */
 &dss_hdmi_pins {
 	pinctrl-single,pins = <
-		0x5a (PIN_INPUT_PULLUP | MUX_MODE0)	/* hdmi_cec.hdmi_cec */
-		0x5c (PIN_INPUT | MUX_MODE0)		/* hdmi_scl.hdmi_scl */
-		0x5e (PIN_INPUT | MUX_MODE0)		/* hdmi_sda.hdmi_sda */
+		0x5a 0x118	/* hdmi_cec.hdmi_cec INPUT PULLUP | MODE 0 */
+		0x5c 0x100	/* hdmi_scl.hdmi_scl INPUT | MODE 0 */
+		0x5e 0x100	/* hdmi_sda.hdmi_sda INPUT | MODE 0 */
 		>;
 };
diff -urNp a/arch/arm/boot/dts/omap4-panda-common.dtsi b/arch/arm/boot/dts/omap4-panda-common.dtsi
--- a/arch/arm/boot/dts/omap4-panda-common.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap4-panda-common.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -5,35 +5,28 @@
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
  */
-#include "elpida_ecb240abacn.dtsi"
+/include/ "elpida_ecb240abacn.dtsi"
 
 / {
+	model = "TI OMAP4 PandaBoard";
+	compatible = "ti,omap4-panda", "ti,omap4430", "ti,omap4";
+
 	memory {
 		device_type = "memory";
 		reg = <0x80000000 0x40000000>; /* 1 GB */
 	};
 
-	aliases {
-		display0 = &dvi0;
-		display1 = &hdmi0;
-	};
-
-	leds: leds {
+	leds {
 		compatible = "gpio-leds";
-		pinctrl-names = "default";
-		pinctrl-0 = <
-			&led_wkgpio_pins
-		>;
-
 		heartbeat {
 			label = "pandaboard::status1";
-			gpios = <&gpio1 7 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 7 0>;
 			linux,default-trigger = "heartbeat";
 		};
 
 		mmc {
 			label = "pandaboard::status2";
-			gpios = <&gpio1 8 GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio1 8 0>;
 			linux,default-trigger = "mmc0";
 		};
 	};
@@ -61,303 +54,105 @@
 			"AFML", "Line In",
 			"AFMR", "Line In";
 	};
+};
 
-	/* HS USB Port 1 Power */
-	hsusb1_power: hsusb1_power_reg {
-		compatible = "regulator-fixed";
-		regulator-name = "hsusb1_vbus";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		gpio = <&gpio1 1 0>;	/* gpio_1 */
-		startup-delay-us = <70000>;
-		enable-active-high;
-		/*
-		 * boot-on is required along with always-on as the
-		 * regulator framework doesn't enable the regulator
-		 * if boot-on is not there.
-		 */
-		regulator-always-on;
-		regulator-boot-on;
-	};
-
-	/* HS USB Host PHY on PORT 1 */
-	hsusb1_phy: hsusb1_phy {
-		compatible = "usb-nop-xceiv";
-		reset-gpios = <&gpio2 30 GPIO_ACTIVE_LOW>;   /* gpio_62 */
-		vcc-supply = <&hsusb1_power>;
-		clocks = <&auxclk3_ck>;
-		clock-names = "main_clk";
-		clock-frequency = <19200000>;
-	};
-
-	/* regulator for wl12xx on sdio5 */
-	wl12xx_vmmc: wl12xx_vmmc {
-		pinctrl-names = "default";
-		pinctrl-0 = <&wl12xx_gpio>;
-		compatible = "regulator-fixed";
-		regulator-name = "vwl1271";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <1800000>;
-		gpio = <&gpio2 11 0>;
-		startup-delay-us = <70000>;
-		enable-active-high;
-	};
-
-	tfp410: encoder@0 {
-		compatible = "ti,tfp410";
-		powerdown-gpios = <&gpio1 0 GPIO_ACTIVE_LOW>;	/* gpio_0 */
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@0 {
-				reg = <0>;
-
-				tfp410_in: endpoint@0 {
-					remote-endpoint = <&dpi_out>;
-				};
-			};
-
-			port@1 {
-				reg = <1>;
-
-				tfp410_out: endpoint@0 {
-					remote-endpoint = <&dvi_connector_in>;
-				};
-			};
-		};
-	};
-
-	dvi0: connector@0 {
-		compatible = "dvi-connector";
-		label = "dvi";
-
-		digital;
-
-		ddc-i2c-bus = <&i2c3>;
-
-		port {
-			dvi_connector_in: endpoint {
-				remote-endpoint = <&tfp410_out>;
-			};
-		};
-	};
-
-	tpd12s015: encoder@1 {
-		compatible = "ti,tpd12s015";
-
-		gpios = <&gpio2 28 GPIO_ACTIVE_HIGH>,	/* 60, CT CP HPD */
-			<&gpio2 9 GPIO_ACTIVE_HIGH>,	/* 41, LS OE */
-			<&gpio2 31 GPIO_ACTIVE_HIGH>;	/* 63, HPD */
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@0 {
-				reg = <0>;
-
-				tpd12s015_in: endpoint@0 {
-					remote-endpoint = <&hdmi_out>;
-				};
-			};
-
-			port@1 {
-				reg = <1>;
-
-				tpd12s015_out: endpoint@0 {
-					remote-endpoint = <&hdmi_connector_in>;
-				};
-			};
-		};
-	};
+&omap4_pmx_wkup {
+	pinctrl-names = "default";
+	pinctrl-0 = <
+			&twl6030_wkup_pins
+	>;
 
-	hdmi0: connector@1 {
-		compatible = "hdmi-connector";
-		label = "hdmi";
-
-		type = "a";
-
-		port {
-			hdmi_connector_in: endpoint {
-				remote-endpoint = <&tpd12s015_out>;
-			};
-		};
+	twl6030_wkup_pins: pinmux_twl6030_wkup_pins {
+		pinctrl-single,pins = <
+			0x14 0x2        /* fref_clk0_out.sys_drm_msecure OUTPUT | MODE2 */
+		>;
 	};
 };
 
 &omap4_pmx_core {
 	pinctrl-names = "default";
 	pinctrl-0 = <
-			&dss_dpi_pins
-			&tfp410_pins
+			&twl6030_pins
+			&twl6040_pins
+			&mcpdm_pins
+			&mcbsp1_pins
 			&dss_hdmi_pins
 			&tpd12s015_pins
-			&hsusbb1_pins
 	>;
 
-	twl6040_pins: pinmux_twl6040_pins {
+	twl6030_pins: pinmux_twl6030_pins {
 		pinctrl-single,pins = <
-			0xe0 (PIN_OUTPUT | MUX_MODE3)	/* hdq_sio.gpio_127 */
-			0x160 (PIN_INPUT | MUX_MODE0)	/* sys_nirq2.sys_nirq2 */
+			0x15e 0x4118	/* sys_nirq1.sys_nirq1 OMAP_WAKEUP_EN | INPUT_PULLUP | MODE0 */
 		>;
 	};
 
-	mcpdm_pins: pinmux_mcpdm_pins {
+	twl6040_pins: pinmux_twl6040_pins {
 		pinctrl-single,pins = <
-			0xc6 (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_pdm_ul_data.abe_pdm_ul_data */
-			0xc8 (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_pdm_dl_data.abe_pdm_dl_data */
-			0xca (PIN_INPUT_PULLUP   | MUX_MODE0)	/* abe_pdm_frame.abe_pdm_frame */
-			0xcc (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_pdm_lb_clk.abe_pdm_lb_clk */
-			0xce (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_clks.abe_clks */
+			0xe0 0x3	/* hdq_sio.gpio_127 OUTPUT | MODE3 */
+			0x160 0x100	/* sys_nirq2.sys_nirq2 INPUT | MODE0 */
 		>;
 	};
 
-	mcbsp1_pins: pinmux_mcbsp1_pins {
+	mcpdm_pins: pinmux_mcpdm_pins {
 		pinctrl-single,pins = <
-			0xbe (PIN_INPUT | MUX_MODE0)		/* abe_mcbsp1_clkx.abe_mcbsp1_clkx */
-			0xc0 (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_mcbsp1_dr.abe_mcbsp1_dr */
-			0xc2 (PIN_OUTPUT_PULLDOWN | MUX_MODE0)	/* abe_mcbsp1_dx.abe_mcbsp1_dx */
-			0xc4 (PIN_INPUT | MUX_MODE0)		/* abe_mcbsp1_fsx.abe_mcbsp1_fsx */
+			0xc6 0x108	/* abe_pdm_ul_data.abe_pdm_ul_data INPUT PULLDOWN | MODE0 */
+			0xc8 0x108	/* abe_pdm_dl_data.abe_pdm_dl_data INPUT PULLDOWN | MODE0 */
+			0xca 0x118	/* abe_pdm_frame.abe_pdm_frame INPUT PULLUP | MODE0 */
+			0xcc 0x108	/* abe_pdm_lb_clk.abe_pdm_lb_clk INPUT PULLDOWN | MODE0 */
+			0xce 0x108	/* abe_clks.abe_clks INPUT PULLDOWN | MODE0 */
 		>;
 	};
 
-	dss_dpi_pins: pinmux_dss_dpi_pins {
-		pinctrl-single,pins = <
-			0x122 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data23 */
-			0x124 (PIN_OUTPUT | MUX_MODE5) 	/* dispc2_data22 */
-			0x126 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data21 */
-			0x128 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data20 */
-			0x12a (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data19 */
-			0x12c (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data18 */
-			0x12e (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data15 */
-			0x130 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data14 */
-			0x132 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data13 */
-			0x134 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data12 */
-			0x136 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data11 */
-
-			0x174 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data10 */
-			0x176 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data9 */
-			0x178 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data16 */
-			0x17a (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data17 */
-			0x17c (PIN_OUTPUT | MUX_MODE5)	/* dispc2_hsync */
-			0x17e (PIN_OUTPUT | MUX_MODE5)	/* dispc2_pclk */
-			0x180 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_vsync */
-			0x182 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_de */
-			0x184 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data8 */
-			0x186 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data7 */
-			0x188 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data6 */
-			0x18a (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data5 */
-			0x18c (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data4 */
-			0x18e (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data3 */
-
-			0x190 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data2 */
-			0x192 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data1 */
-			0x194 (PIN_OUTPUT | MUX_MODE5)	/* dispc2_data0 */
-		>;
-	};
-
-	tfp410_pins: pinmux_tfp410_pins {
+	mcbsp1_pins: pinmux_mcbsp1_pins {
 		pinctrl-single,pins = <
-			0x144 (PIN_OUTPUT | MUX_MODE3)	/* gpio_0 */
+			0xbe 0x100	/* abe_mcbsp1_clkx.abe_mcbsp1_clkx INPUT | MODE0 */
+			0xc0 0x108	/* abe_mcbsp1_dr.abe_mcbsp1_dr INPUT PULLDOWN | MODE0 */
+			0xc2 0x8		/* abe_mcbsp1_dx.abe_mcbsp1_dx OUTPUT PULLDOWN | MODE0 */
+			0xc4 0x100	/* abe_mcbsp1_fsx.abe_mcbsp1_fsx INPUT | MODE0 */
 		>;
 	};
 
 	dss_hdmi_pins: pinmux_dss_hdmi_pins {
 		pinctrl-single,pins = <
-			0x5a (PIN_INPUT_PULLUP | MUX_MODE0)	/* hdmi_cec.hdmi_cec */
-			0x5c (PIN_INPUT_PULLUP | MUX_MODE0)	/* hdmi_scl.hdmi_scl */
-			0x5e (PIN_INPUT_PULLUP | MUX_MODE0)	/* hdmi_sda.hdmi_sda */
+			0x5a 0x118	/* hdmi_cec.hdmi_cec INPUT PULLUP | MODE 0 */
+			0x5c 0x118	/* hdmi_scl.hdmi_scl INPUT PULLUP | MODE 0 */
+			0x5e 0x118	/* hdmi_sda.hdmi_sda INPUT PULLUP | MODE 0 */
 		>;
 	};
 
 	tpd12s015_pins: pinmux_tpd12s015_pins {
 		pinctrl-single,pins = <
-			0x22 (PIN_OUTPUT | MUX_MODE3)		/* gpmc_a17.gpio_41 */
-			0x48 (PIN_OUTPUT | MUX_MODE3)		/* gpmc_nbe1.gpio_60 */
-			0x58 (PIN_INPUT_PULLDOWN | MUX_MODE3)	/* hdmi_hpd.gpio_63 */
-		>;
-	};
-
-	hsusbb1_pins: pinmux_hsusbb1_pins {
-		pinctrl-single,pins = <
-			0x82 (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_clk.usbb1_ulpiphy_clk */
-			0x84 (PIN_OUTPUT | MUX_MODE4)		/* usbb1_ulpitll_stp.usbb1_ulpiphy_stp */
-			0x86 (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_dir.usbb1_ulpiphy_dir */
-			0x88 (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_nxt.usbb1_ulpiphy_nxt */
-			0x8a (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_dat0.usbb1_ulpiphy_dat0 */
-			0x8c (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_dat1.usbb1_ulpiphy_dat1 */
-			0x8e (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_dat2.usbb1_ulpiphy_dat2 */
-			0x90 (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_dat3.usbb1_ulpiphy_dat3 */
-			0x92 (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_dat4.usbb1_ulpiphy_dat4 */
-			0x94 (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_dat5.usbb1_ulpiphy_dat5 */
-			0x96 (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_dat6.usbb1_ulpiphy_dat6 */
-			0x98 (PIN_INPUT_PULLDOWN | MUX_MODE4)	/* usbb1_ulpitll_dat7.usbb1_ulpiphy_dat7 */
+			0x22 0x3	/* gpmc_a17.gpio_41 OUTPUT | MODE3 */
+			0x48 0x3	/* gpmc_nbe1.gpio_60 OUTPUT | MODE3 */
+			0x58 0x10b	/* hdmi_hpd.gpio_63 INPUT PULLDOWN | MODE3 */
 		>;
 	};
 
 	i2c1_pins: pinmux_i2c1_pins {
 		pinctrl-single,pins = <
-			0xe2 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c1_scl */
-			0xe4 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c1_sda */
+			0xe2 0x118        /* i2c1_scl PULLUP | INPUTENABLE | MODE0 */
+			0xe4 0x118        /* i2c1_sda PULLUP | INPUTENABLE | MODE0 */
 		>;
 	};
 
 	i2c2_pins: pinmux_i2c2_pins {
 		pinctrl-single,pins = <
-			0xe6 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c2_scl */
-			0xe8 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c2_sda */
+			0xe6 0x118        /* i2c2_scl PULLUP | INPUTENABLE | MODE0 */
+			0xe8 0x118        /* i2c2_sda PULLUP | INPUTENABLE | MODE0 */
 		>;
 	};
 
 	i2c3_pins: pinmux_i2c3_pins {
 		pinctrl-single,pins = <
-			0xea (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c3_scl */
-			0xec (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c3_sda */
+			0xea 0x118        /* i2c3_scl PULLUP | INPUTENABLE | MODE0 */
+			0xec 0x118     /* i2c3_sda PULLUP | INPUTENABLE | MODE0 */
 		>;
 	};
 
 	i2c4_pins: pinmux_i2c4_pins {
 		pinctrl-single,pins = <
-			0xee (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c4_scl */
-			0xf0 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c4_sda */
-		>;
-	};
-
-	/*
-	 * wl12xx GPIO outputs for WLAN_EN, BT_EN, FM_EN, BT_WAKEUP
-	 * REVISIT: Are the pull-ups needed for GPIO 48 and 49?
-	 */
-	wl12xx_gpio: pinmux_wl12xx_gpio {
-		pinctrl-single,pins = <
-			0x26 (PIN_OUTPUT | MUX_MODE3)		/* gpmc_a19.gpio_43 */
-			0x2c (PIN_OUTPUT | MUX_MODE3)		/* gpmc_a22.gpio_46 */
-			0x30 (PIN_OUTPUT_PULLUP | MUX_MODE3)	/* gpmc_a24.gpio_48 */
-			0x32 (PIN_OUTPUT_PULLUP | MUX_MODE3)	/* gpmc_a25.gpio_49 */
-		>;
-	};
-
-	/* wl12xx GPIO inputs and SDIO pins */
-	wl12xx_pins: pinmux_wl12xx_pins {
-		pinctrl-single,pins = <
-			0x38 (PIN_INPUT | MUX_MODE3)		/* gpmc_ncs2.gpio_52 */
-			0x3a (PIN_INPUT | MUX_MODE3)		/* gpmc_ncs3.gpio_53 */
-			0x108 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_clk.sdmmc5_clk */
-			0x10a (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_cmd.sdmmc5_cmd */
-			0x10c (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_dat0.sdmmc5_dat0 */
-			0x10e (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_dat1.sdmmc5_dat1 */
-			0x110 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_dat2.sdmmc5_dat2 */
-			0x112 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_dat3.sdmmc5_dat3 */
-		>;
-	};
-};
-
-&omap4_pmx_wkup {
-	led_wkgpio_pins: pinmux_leds_wkpins {
-		pinctrl-single,pins = <
-			0x1a (PIN_OUTPUT | MUX_MODE3)	/* gpio_wk7 */
-			0x1c (PIN_OUTPUT | MUX_MODE3)	/* gpio_wk8 */
+			0xee 0x118        /* i2c4_scl PULLUP | INPUTENABLE | MODE0 */
+			0xf0 0x118     /* i2c4_sda PULLUP | INPUTENABLE | MODE0 */
 		>;
 	};
 };
@@ -370,22 +165,18 @@
 
 	twl: twl@48 {
 		reg = <0x48>;
-		/* IRQ# = 7 */
-		interrupts = <GIC_SPI 7 IRQ_TYPE_LEVEL_HIGH>; /* IRQ_SYS_1N cascaded to gic */
+		/* SPI = 0, IRQ# = 7, 4 = active high level-sensitive */
+		interrupts = <0 7 4>; /* IRQ_SYS_1N cascaded to gic */
 		interrupt-parent = <&gic>;
 	};
 
 	twl6040: twl@4b {
 		compatible = "ti,twl6040";
 		reg = <0x4b>;
-
-		pinctrl-names = "default";
-		pinctrl-0 = <&twl6040_pins>;
-
-		/* IRQ# = 119 */
-		interrupts = <GIC_SPI 119 IRQ_TYPE_LEVEL_HIGH>; /* IRQ_SYS_2N cascaded to gic */
+		/* SPI = 0, IRQ# = 119, 4 = active high level-sensitive */
+		interrupts = <0 119 4>; /* IRQ_SYS_2N cascaded to gic */
 		interrupt-parent = <&gic>;
-		ti,audpwron-gpio = <&gpio4 31 GPIO_ACTIVE_HIGH>;  /* gpio line 127 */
+		ti,audpwron-gpio = <&gpio4 31 0>;  /* gpio line 127 */
 
 		vio-supply = <&v1v8>;
 		v2v1-supply = <&v2v1>;
@@ -393,8 +184,7 @@
 	};
 };
 
-#include "twl6030.dtsi"
-#include "twl6030_omap4.dtsi"
+/include/ "twl6030.dtsi"
 
 &i2c2 {
 	pinctrl-names = "default";
@@ -444,12 +234,8 @@
 };
 
 &mmc5 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&wl12xx_pins>;
-	vmmc-supply = <&wl12xx_vmmc>;
-	non-removable;
+	ti,non-removable;
 	bus-width = <4>;
-	cap-power-off-card;
 };
 
 &emif1 {
@@ -462,35 +248,20 @@
 	device-handle = <&elpida_ECB240ABACN>;
 };
 
-&mcbsp1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mcbsp1_pins>;
-	status = "okay";
-};
-
-&mcpdm {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mcpdm_pins>;
-	status = "okay";
-};
-
-&twl_usb_comparator {
-	usb-supply = <&vusb>;
+&mcbsp2 {
+	status = "disabled";
 };
 
-&uart2 {
-	interrupts-extended = <&gic GIC_SPI 73 IRQ_TYPE_LEVEL_HIGH
-			       &omap4_pmx_core OMAP4_UART2_RX>;
+&mcbsp3 {
+	status = "disabled";
 };
 
-&uart3 {
-	interrupts-extended = <&gic GIC_SPI 74 IRQ_TYPE_LEVEL_HIGH
-			       &omap4_pmx_core OMAP4_UART3_RX>;
+&dmic {
+	status = "disabled";
 };
 
-&uart4 {
-	interrupts-extended = <&gic GIC_SPI 70 IRQ_TYPE_LEVEL_HIGH
-			       &omap4_pmx_core OMAP4_UART4_RX>;
+&twl_usb_comparator {
+	usb-supply = <&vusb>;
 };
 
 &usb_otg_hs {
@@ -498,38 +269,3 @@
 	mode = <3>;
 	power = <50>;
 };
-
-&usbhshost {
-	port1-mode = "ehci-phy";
-};
-
-&usbhsehci {
-	phys = <&hsusb1_phy>;
-};
-
-&dss {
-	status = "ok";
-
-	port {
-		dpi_out: endpoint {
-			remote-endpoint = <&tfp410_in>;
-			data-lines = <24>;
-		};
-	};
-};
-
-&dsi2 {
-	status = "ok";
-	vdd-supply = <&vcxio>;
-};
-
-&hdmi {
-	status = "ok";
-	vdda-supply = <&vdac>;
-
-	port {
-		hdmi_out: endpoint {
-			remote-endpoint = <&tpd12s015_in>;
-		};
-	};
-};
diff -urNp a/arch/arm/boot/dts/omap4-panda-es.dts b/arch/arm/boot/dts/omap4-panda-es.dts
--- a/arch/arm/boot/dts/omap4-panda-es.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap4-panda-es.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,13 +7,8 @@
  */
 /dts-v1/;
 
-#include "omap4460.dtsi"
-#include "omap4-panda-common.dtsi"
-
-/ {
-	model = "TI OMAP4 PandaBoard-ES";
-	compatible = "ti,omap4-panda-es", "ti,omap4-panda", "ti,omap4460", "ti,omap4430", "ti,omap4";
-};
+/include/ "omap4460.dtsi"
+/include/ "omap4-panda-common.dtsi"
 
 /* Audio routing is differnet between PandaBoard4430 and PandaBoardES */
 &sound {
@@ -34,40 +29,8 @@
 /* PandaboardES has external pullups on SCL & SDA */
 &dss_hdmi_pins {
 	pinctrl-single,pins = <
-		0x5a (PIN_INPUT_PULLUP | MUX_MODE0)	/* hdmi_cec.hdmi_cec */
-		0x5c (PIN_INPUT | MUX_MODE0)		/* hdmi_scl.hdmi_scl */
-		0x5e (PIN_INPUT | MUX_MODE0)		/* hdmi_sda.hdmi_sda */
+		0x5a 0x118	/* hdmi_cec.hdmi_cec INPUT PULLUP | MODE 0 */
+		0x5c 0x100	/* hdmi_scl.hdmi_scl INPUT | MODE 0 */
+		0x5e 0x100	/* hdmi_sda.hdmi_sda INPUT | MODE 0 */
 		>;
 };
-
-&omap4_pmx_core {
-	led_gpio_pins: gpio_led_pmx {
-		pinctrl-single,pins = <
-			0xb6 (PIN_OUTPUT | MUX_MODE3)	/* gpio_110 */
-		>;
-	};
-};
-
-&led_wkgpio_pins {
-	pinctrl-single,pins = <
-		0x1c (PIN_OUTPUT | MUX_MODE3)	/* gpio_wk8 */
-	>;
-};
-
-&leds {
-	pinctrl-0 = <
-		&led_gpio_pins
-		&led_wkgpio_pins
-	>;
-
-	heartbeat {
-		gpios = <&gpio4 14 GPIO_ACTIVE_HIGH>;
-	};
-	mmc {
-		gpios = <&gpio1 8 GPIO_ACTIVE_HIGH>;
-	};
-};
-
-&gpio1 {
-	 ti,no-reset-on-init;
-};
diff -urNp a/arch/arm/boot/dts/omap4-panda.dts b/arch/arm/boot/dts/omap4-panda.dts
--- a/arch/arm/boot/dts/omap4-panda.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap4-panda.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,10 +7,5 @@
  */
 /dts-v1/;
 
-#include "omap443x.dtsi"
-#include "omap4-panda-common.dtsi"
-
-/ {
-	model = "TI OMAP4 PandaBoard";
-	compatible = "ti,omap4-panda", "ti,omap4430", "ti,omap4";
-};
+/include/ "omap443x.dtsi"
+/include/ "omap4-panda-common.dtsi"
diff -urNp a/arch/arm/boot/dts/omap4-sdp-es23plus.dts b/arch/arm/boot/dts/omap4-sdp-es23plus.dts
--- a/arch/arm/boot/dts/omap4-sdp-es23plus.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap4-sdp-es23plus.dts	2015-10-27 00:45:05.000000000 +0000
@@ -5,13 +5,13 @@
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
  */
-#include "omap4-sdp.dts"
+/include/ "omap4-sdp.dts"
 
 /* SDP boards with 4430 ES2.3+ or 4460 have external pullups on SCL & SDA */
 &dss_hdmi_pins {
 	pinctrl-single,pins = <
-		0x5a (PIN_INPUT_PULLUP | MUX_MODE0)	/* hdmi_cec.hdmi_cec */
-		0x5c (PIN_INPUT | MUX_MODE0)		/* hdmi_scl.hdmi_scl */
-		0x5e (PIN_INPUT | MUX_MODE0)		/* hdmi_sda.hdmi_sda */
+		0x5a 0x118	/* hdmi_cec.hdmi_cec INPUT PULLUP | MODE 0 */
+		0x5c 0x100	/* hdmi_scl.hdmi_scl INPUT | MODE 0 */
+		0x5e 0x100	/* hdmi_sda.hdmi_sda INPUT | MODE 0 */
 		>;
 };
diff -urNp a/arch/arm/boot/dts/omap4-sdp.dts b/arch/arm/boot/dts/omap4-sdp.dts
--- a/arch/arm/boot/dts/omap4-sdp.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap4-sdp.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,8 @@
  */
 /dts-v1/;
 
-#include "omap443x.dtsi"
-#include "elpida_ecb240abacn.dtsi"
+/include/ "omap443x.dtsi"
+/include/ "elpida_ecb240abacn.dtsi"
 
 / {
 	model = "TI OMAP4 SDP board";
@@ -19,12 +19,6 @@
 		reg = <0x80000000 0x40000000>; /* 1 GB */
 	};
 
-	aliases {
-		display0 = &lcd0;
-		display1 = &lcd1;
-		display2 = &hdmi0;
-	};
-
 	vdd_eth: fixedregulator-vdd-eth {
 		compatible = "regulator-fixed";
 		regulator-name = "VDD_ETH";
@@ -47,42 +41,42 @@
 		compatible = "gpio-leds";
 		debug0 {
 			label = "omap4:green:debug0";
-			gpios = <&gpio2 29 GPIO_ACTIVE_HIGH>; /* 61 */
+			gpios = <&gpio2 29 0>; /* 61 */
 		};
 
 		debug1 {
 			label = "omap4:green:debug1";
-			gpios = <&gpio1 30 GPIO_ACTIVE_HIGH>; /* 30 */
+			gpios = <&gpio1 30 0>; /* 30 */
 		};
 
 		debug2 {
 			label = "omap4:green:debug2";
-			gpios = <&gpio1 7 GPIO_ACTIVE_HIGH>; /* 7 */
+			gpios = <&gpio1 7 0>; /* 7 */
 		};
 
 		debug3 {
 			label = "omap4:green:debug3";
-			gpios = <&gpio1 8 GPIO_ACTIVE_HIGH>; /* 8 */
+			gpios = <&gpio1 8 0>; /* 8 */
 		};
 
 		debug4 {
 			label = "omap4:green:debug4";
-			gpios = <&gpio2 18 GPIO_ACTIVE_HIGH>; /* 50 */
+			gpios = <&gpio2 18 0>; /* 50 */
 		};
 
 		user1 {
 			label = "omap4:blue:user";
-			gpios = <&gpio6 9 GPIO_ACTIVE_HIGH>; /* 169 */
+			gpios = <&gpio6 9 0>; /* 169 */
 		};
 
 		user2 {
 			label = "omap4:red:user";
-			gpios = <&gpio6 10 GPIO_ACTIVE_HIGH>; /* 170 */
+			gpios = <&gpio6 10 0>; /* 170 */
 		};
 
 		user3 {
 			label = "omap4:green:user";
-			gpios = <&gpio5 11 GPIO_ACTIVE_HIGH>; /* 139 */
+			gpios = <&gpio5 11 0>; /* 139 */
 		};
 	};
 
@@ -146,209 +140,159 @@
 			"DMic", "Digital Mic",
 			"Digital Mic", "Digital Mic1 Bias";
 	};
+};
 
-	/* regulator for wl12xx on sdio5 */
-	wl12xx_vmmc: wl12xx_vmmc {
-		pinctrl-names = "default";
-		pinctrl-0 = <&wl12xx_gpio>;
-		compatible = "regulator-fixed";
-		regulator-name = "vwl1271";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <1800000>;
-		gpio = <&gpio2 22 0>;
-		startup-delay-us = <70000>;
-		enable-active-high;
-	};
-
-	tpd12s015: encoder@0 {
-		compatible = "ti,tpd12s015";
-
-		gpios = <&gpio2 28 GPIO_ACTIVE_HIGH>,	/* 60, CT CP HPD */
-			<&gpio2 9 GPIO_ACTIVE_HIGH>,	/* 41, LS OE */
-			<&gpio2 31 GPIO_ACTIVE_HIGH>;	/* 63, HPD */
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@0 {
-				reg = <0>;
-
-				tpd12s015_in: endpoint@0 {
-					remote-endpoint = <&hdmi_out>;
-				};
-			};
-
-			port@1 {
-				reg = <1>;
-
-				tpd12s015_out: endpoint@0 {
-					remote-endpoint = <&hdmi_connector_in>;
-				};
-			};
-		};
-	};
-
-	hdmi0: connector@0 {
-		compatible = "hdmi-connector";
-		label = "hdmi";
-
-		type = "c";
+&omap4_pmx_wkup {
+	pinctrl-names = "default";
+	pinctrl-0 = <
+			&twl6030_wkup_pins
+	>;
 
-		port {
-			hdmi_connector_in: endpoint {
-				remote-endpoint = <&tpd12s015_out>;
-			};
-		};
+	twl6030_wkup_pins: pinmux_twl6030_wkup_pins {
+		pinctrl-single,pins = <
+			0x14 0x2        /* fref_clk0_out.sys_drm_msecure OUTPUT | MODE2 */
+		>;
 	};
 };
 
 &omap4_pmx_core {
 	pinctrl-names = "default";
 	pinctrl-0 = <
+			&twl6030_pins
+			&twl6040_pins
+			&mcpdm_pins
+			&dmic_pins
+			&mcbsp1_pins
+			&mcbsp2_pins
 			&dss_hdmi_pins
 			&tpd12s015_pins
 	>;
 
 	uart2_pins: pinmux_uart2_pins {
 		pinctrl-single,pins = <
-			0xd8 (PIN_INPUT_PULLUP | MUX_MODE0)	/* uart2_cts.uart2_cts */
-			0xda (PIN_OUTPUT | MUX_MODE0)		/* uart2_rts.uart2_rts */
-			0xdc (PIN_INPUT_PULLUP | MUX_MODE0)	/* uart2_rx.uart2_rx */
-			0xde (PIN_OUTPUT | MUX_MODE0)		/* uart2_tx.uart2_tx */
+			0xd8 0x118	/* uart2_cts.uart2_cts INPUT_PULLUP | MODE0 */
+			0xda 0		/* uart2_rts.uart2_rts OUTPUT | MODE0 */
+			0xdc 0x118	/* uart2_rx.uart2_rx INPUT_PULLUP | MODE0 */
+			0xde 0		/* uart2_tx.uart2_tx OUTPUT | MODE0 */
 		>;
 	};
 
 	uart3_pins: pinmux_uart3_pins {
 		pinctrl-single,pins = <
-			0x100 (PIN_INPUT_PULLUP | MUX_MODE0)	/* uart3_cts_rctx.uart3_cts_rctx */
-			0x102 (PIN_OUTPUT | MUX_MODE0)		/* uart3_rts_sd.uart3_rts_sd */
-			0x104 (PIN_INPUT | MUX_MODE0)		/* uart3_rx_irrx.uart3_rx_irrx */
-			0x106 (PIN_OUTPUT | MUX_MODE0)		/* uart3_tx_irtx.uart3_tx_irtx */
+			0x100 0x118	/* uart3_cts_rctx.uart3_cts_rctx INPUT_PULLUP | MODE0 */
+			0x102 0		/* uart3_rts_sd.uart3_rts_sd OUTPUT | MODE0 */
+			0x104 0x100	/* uart3_rx_irrx.uart3_rx_irrx INPUT | MODE0 */
+			0x106 0		/* uart3_tx_irtx.uart3_tx_irtx OUTPUT | MODE0 */
 		>;
 	};
 
 	uart4_pins: pinmux_uart4_pins {
 		pinctrl-single,pins = <
-			0x11c (PIN_INPUT | MUX_MODE0)		/* uart4_rx.uart4_rx */
-			0x11e (PIN_OUTPUT | MUX_MODE0)		/* uart4_tx.uart4_tx */
+			0x11c 0x100	/* uart4_rx.uart4_rx INPUT | MODE0 */
+			0x11e 0		/* uart4_tx.uart4_tx OUTPUT | MODE0 */
+		>;
+	};
+
+	twl6030_pins: pinmux_twl6030_pins {
+		pinctrl-single,pins = <
+			0x15e 0x4118	/* sys_nirq1.sys_nirq1 OMAP_WAKEUP_EN | INPUT_PULLUP | MODE0 */
 		>;
 	};
 
 	twl6040_pins: pinmux_twl6040_pins {
 		pinctrl-single,pins = <
-			0xe0 (PIN_OUTPUT | MUX_MODE3)		/* hdq_sio.gpio_127 */
-			0x160 (PIN_INPUT | MUX_MODE0)		/* sys_nirq2.sys_nirq2 */
+			0xe0 0x3	/* hdq_sio.gpio_127 OUTPUT | MODE3 */
+			0x160 0x100	/* sys_nirq2.sys_nirq2 INPUT | MODE0 */
 		>;
 	};
 
 	mcpdm_pins: pinmux_mcpdm_pins {
 		pinctrl-single,pins = <
-			0xc6 (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_pdm_ul_data.abe_pdm_ul_data */
-			0xc8 (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_pdm_dl_data.abe_pdm_dl_data */
-			0xca (PIN_INPUT_PULLUP | MUX_MODE0)	/* abe_pdm_frame.abe_pdm_frame */
-			0xcc (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_pdm_lb_clk.abe_pdm_lb_clk */
-			0xce (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_clks.abe_clks */
+			0xc6 0x108	/* abe_pdm_ul_data.abe_pdm_ul_data INPUT PULLDOWN | MODE0 */
+			0xc8 0x108	/* abe_pdm_dl_data.abe_pdm_dl_data INPUT PULLDOWN | MODE0 */
+			0xca 0x118	/* abe_pdm_frame.abe_pdm_frame INPUT PULLUP | MODE0 */
+			0xcc 0x108	/* abe_pdm_lb_clk.abe_pdm_lb_clk INPUT PULLDOWN | MODE0 */
+			0xce 0x108	/* abe_clks.abe_clks INPUT PULLDOWN | MODE0 */
 		>;
 	};
 
 	dmic_pins: pinmux_dmic_pins {
 		pinctrl-single,pins = <
-			0xd0 (PIN_OUTPUT | MUX_MODE0)		/* abe_dmic_clk1.abe_dmic_clk1 */
-			0xd2 (PIN_INPUT | MUX_MODE0)		/* abe_dmic_din1.abe_dmic_din1 */
-			0xd4 (PIN_INPUT | MUX_MODE0)		/* abe_dmic_din2.abe_dmic_din2 */
-			0xd6 (PIN_INPUT | MUX_MODE0)		/* abe_dmic_din3.abe_dmic_din3 */
+			0xd0 0		/* abe_dmic_clk1.abe_dmic_clk1 OUTPUT | MODE0 */
+			0xd2 0x100	/* abe_dmic_din1.abe_dmic_din1 INPUT | MODE0 */
+			0xd4 0x100	/* abe_dmic_din2.abe_dmic_din2 INPUT | MODE0 */
+			0xd6 0x100	/* abe_dmic_din3.abe_dmic_din3 INPUT | MODE0 */
 		>;
 	};
 
 	mcbsp1_pins: pinmux_mcbsp1_pins {
 		pinctrl-single,pins = <
-			0xbe (PIN_INPUT | MUX_MODE0)		/* abe_mcbsp1_clkx.abe_mcbsp1_clkx */
-			0xc0 (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_mcbsp1_dr.abe_mcbsp1_dr */
-			0xc2 (PIN_OUTPUT_PULLDOWN | MUX_MODE0)	/* abe_mcbsp1_dx.abe_mcbsp1_dx */
-			0xc4 (PIN_INPUT | MUX_MODE0)		/* abe_mcbsp1_fsx.abe_mcbsp1_fsx */
+			0xbe 0x100	/* abe_mcbsp1_clkx.abe_mcbsp1_clkx INPUT | MODE0 */
+			0xc0 0x108	/* abe_mcbsp1_dr.abe_mcbsp1_dr INPUT PULLDOWN | MODE0 */
+			0xc2 0x8	/* abe_mcbsp1_dx.abe_mcbsp1_dx OUTPUT PULLDOWN | MODE0 */
+			0xc4 0x100	/* abe_mcbsp1_fsx.abe_mcbsp1_fsx INPUT | MODE0 */
 		>;
 	};
 
 	mcbsp2_pins: pinmux_mcbsp2_pins {
 		pinctrl-single,pins = <
-			0xb6 (PIN_INPUT | MUX_MODE0)		/* abe_mcbsp2_clkx.abe_mcbsp2_clkx */
-			0xb8 (PIN_INPUT_PULLDOWN | MUX_MODE0)	/* abe_mcbsp2_dr.abe_mcbsp2_dr */
-			0xba (PIN_OUTPUT_PULLDOWN | MUX_MODE0)	/* abe_mcbsp2_dx.abe_mcbsp2_dx */
-			0xbc (PIN_INPUT | MUX_MODE0)		/* abe_mcbsp2_fsx.abe_mcbsp2_fsx */
+			0xb6 0x100	/* abe_mcbsp2_clkx.abe_mcbsp2_clkx INPUT | MODE0 */
+			0xb8 0x108	/* abe_mcbsp2_dr.abe_mcbsp2_dr INPUT PULLDOWN | MODE0 */
+			0xba 0x8	/* abe_mcbsp2_dx.abe_mcbsp2_dx OUTPUT PULLDOWN | MODE0 */
+			0xbc 0x100	/* abe_mcbsp2_fsx.abe_mcbsp2_fsx INPUT | MODE0 */
 		>;
 	};
 
 	mcspi1_pins: pinmux_mcspi1_pins {
 		pinctrl-single,pins = <
-			0xf2 (PIN_INPUT | MUX_MODE0)		/*  mcspi1_clk.mcspi1_clk */
-			0xf4 (PIN_INPUT | MUX_MODE0)		/*  mcspi1_somi.mcspi1_somi */
-			0xf6 (PIN_INPUT | MUX_MODE0)		/*  mcspi1_simo.mcspi1_simo */
-			0xf8 (PIN_INPUT | MUX_MODE0)		/*  mcspi1_cs0.mcspi1_cs0 */
+			0xf2 0x100	/*  mcspi1_clk.mcspi1_clk INPUT | MODE0 */
+			0xf4 0x100	/*  mcspi1_somi.mcspi1_somi INPUT | MODE0 */
+			0xf6 0x100	/*  mcspi1_simo.mcspi1_simo INPUT | MODE0 */
+			0xf8 0x100	/*  mcspi1_cs0.mcspi1_cs0 INPUT | MODE0*/
 		>;
 	};
 
 	dss_hdmi_pins: pinmux_dss_hdmi_pins {
 		pinctrl-single,pins = <
-			0x5a (PIN_INPUT_PULLUP | MUX_MODE0)	/* hdmi_cec.hdmi_cec */
-			0x5c (PIN_INPUT_PULLUP | MUX_MODE0)	/* hdmi_scl.hdmi_scl */
-			0x5e (PIN_INPUT_PULLUP | MUX_MODE0)	/* hdmi_sda.hdmi_sda */
+			0x5a 0x118	/* hdmi_cec.hdmi_cec INPUT PULLUP | MODE 0 */
+			0x5c 0x118	/* hdmi_scl.hdmi_scl INPUT PULLUP | MODE 0 */
+			0x5e 0x118	/* hdmi_sda.hdmi_sda INPUT PULLUP | MODE 0 */
 		>;
 	};
 
 	tpd12s015_pins: pinmux_tpd12s015_pins {
 		pinctrl-single,pins = <
-			0x22 (PIN_OUTPUT | MUX_MODE3)		/* gpmc_a17.gpio_41 */
-			0x48 (PIN_OUTPUT | MUX_MODE3)		/* gpmc_nbe1.gpio_60 */
-			0x58 (PIN_INPUT_PULLDOWN | MUX_MODE3)	/* hdmi_hpd.gpio_63 */
+			0x22 0x3	/* gpmc_a17.gpio_41 OUTPUT | MODE3 */
+			0x48 0x3	/* gpmc_nbe1.gpio_60 OUTPUT | MODE3 */
+			0x58 0x10b	/* hdmi_hpd.gpio_63 INPUT PULLDOWN | MODE3 */
 		>;
 	};
 
 	i2c1_pins: pinmux_i2c1_pins {
 		pinctrl-single,pins = <
-			0xe2 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c1_scl */
-			0xe4 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c1_sda */
+			0xe2 0x118        /* i2c1_scl PULLUP | INPUTENABLE | MODE0 */
+			0xe4 0x118       /* i2c1_sda PULLUP | INPUTENABLE | MODE0 */
 		>;
 	};
 
 	i2c2_pins: pinmux_i2c2_pins {
 		pinctrl-single,pins = <
-			0xe6 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c2_scl */
-			0xe8 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c2_sda */
+                        0xe6 0x118        /* i2c2_scl PULLUP | INPUTENABLE | MODE0 */
+                        0xe8 0x118        /* i2c2_sda PULLUP | INPUTENABLE | MODE0 */
 		>;
 	};
 
 	i2c3_pins: pinmux_i2c3_pins {
 		pinctrl-single,pins = <
-			0xea (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c3_scl */
-			0xec (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c3_sda */
+			0xea 0x118        /* i2c3_scl PULLUP | INPUTENABLE | MODE0 */
+			0xec 0x118     /* i2c3_sda PULLUP | INPUTENABLE | MODE0 */
 		>;
 	};
 
 	i2c4_pins: pinmux_i2c4_pins {
 		pinctrl-single,pins = <
-			0xee (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c4_scl */
-			0xf0 (PIN_INPUT_PULLUP | MUX_MODE0)	/* i2c4_sda */
-		>;
-	};
-
-	/* wl12xx GPIO output for WLAN_EN */
-	wl12xx_gpio: pinmux_wl12xx_gpio {
-		pinctrl-single,pins = <
-			0x3c (PIN_OUTPUT | MUX_MODE3)		/* gpmc_nwp.gpio_54 */
-		>;
-	};
-
-	/* wl12xx GPIO inputs and SDIO pins */
-	wl12xx_pins: pinmux_wl12xx_pins {
-		pinctrl-single,pins = <
-			0x3a (PIN_INPUT | MUX_MODE3)		/* gpmc_ncs3.gpio_53 */
-			0x108 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_clk.sdmmc5_clk */
-			0x10a (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_cmd.sdmmc5_cmd */
-			0x10c (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_dat0.sdmmc5_dat0 */
-			0x10e (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_dat1.sdmmc5_dat1 */
-			0x110 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_dat2.sdmmc5_dat2 */
-			0x112 (PIN_INPUT_PULLUP | MUX_MODE0)	/* sdmmc5_dat3.sdmmc5_dat3 */
+			0xee 0x118        /* i2c4_scl PULLUP | INPUTENABLE | MODE0 */
+			0xf0 0x118     /* i2c4_sda PULLUP | INPUTENABLE | MODE0 */
 		>;
 	};
 };
@@ -362,19 +306,15 @@
 	twl: twl@48 {
 		reg = <0x48>;
 		/* SPI = 0, IRQ# = 7, 4 = active high level-sensitive */
-		interrupts = <GIC_SPI 7 IRQ_TYPE_LEVEL_HIGH>; /* IRQ_SYS_1N cascaded to gic */
+		interrupts = <0 7 4>; /* IRQ_SYS_1N cascaded to gic */
 		interrupt-parent = <&gic>;
 	};
 
 	twl6040: twl@4b {
 		compatible = "ti,twl6040";
 		reg = <0x4b>;
-
-		pinctrl-names = "default";
-		pinctrl-0 = <&twl6040_pins>;
-
 		/* SPI = 0, IRQ# = 119, 4 = active high level-sensitive */
-		interrupts = <GIC_SPI 119 IRQ_TYPE_LEVEL_HIGH>; /* IRQ_SYS_2N cascaded to gic */
+		interrupts = <0 119 4>; /* IRQ_SYS_2N cascaded to gic */
 		interrupt-parent = <&gic>;
 		ti,audpwron-gpio = <&gpio4 31 0>;  /* gpio line 127 */
 
@@ -396,8 +336,7 @@
 	};
 };
 
-#include "twl6030.dtsi"
-#include "twl6030_omap4.dtsi"
+/include/ "twl6030.dtsi"
 
 &i2c2 {
 	pinctrl-names = "default";
@@ -456,7 +395,7 @@
 		spi-max-frequency = <24000000>;
 		reg = <0>;
 		interrupt-parent = <&gpio2>;
-		interrupts = <2 IRQ_TYPE_LEVEL_LOW>; /* gpio line 34 */
+		interrupts = <2 8>; /* gpio line 34, low triggered */
 		vdd-supply = <&vdd_eth>;
 	};
 };
@@ -481,12 +420,8 @@
 };
 
 &mmc5 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&wl12xx_pins>;
-	vmmc-supply = <&wl12xx_vmmc>;
-	non-removable;
 	bus-width = <4>;
-	cap-power-off-card;
+	ti,non-removable;
 };
 
 &emif1 {
@@ -570,48 +505,22 @@
 };
 
 &uart2 {
-	interrupts-extended = <&gic GIC_SPI 73 IRQ_TYPE_LEVEL_HIGH
-			       &omap4_pmx_core OMAP4_UART2_RX>;
 	pinctrl-names = "default";
 	pinctrl-0 = <&uart2_pins>;
 };
 
 &uart3 {
-	interrupts-extended = <&gic GIC_SPI 74 IRQ_TYPE_LEVEL_HIGH
-			       &omap4_pmx_core OMAP4_UART3_RX>;
 	pinctrl-names = "default";
 	pinctrl-0 = <&uart3_pins>;
 };
 
 &uart4 {
-	interrupts-extended = <&gic GIC_SPI 70 IRQ_TYPE_LEVEL_HIGH
-			       &omap4_pmx_core OMAP4_UART4_RX>;
 	pinctrl-names = "default";
 	pinctrl-0 = <&uart4_pins>;
 };
 
-&mcbsp1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mcbsp1_pins>;
-	status = "okay";
-};
-
-&mcbsp2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mcbsp2_pins>;
-	status = "okay";
-};
-
-&dmic {
-	pinctrl-names = "default";
-	pinctrl-0 = <&dmic_pins>;
-	status = "okay";
-};
-
-&mcpdm {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mcpdm_pins>;
-	status = "okay";
+&mcbsp3 {
+	status = "disabled";
 };
 
 &twl_usb_comparator {
@@ -623,68 +532,3 @@
 	mode = <3>;
 	power = <50>;
 };
-
-&dss {
-	status = "ok";
-};
-
-&dsi1 {
-	status = "ok";
-	vdd-supply = <&vcxio>;
-
-	port {
-		dsi1_out_ep: endpoint {
-			remote-endpoint = <&lcd0_in>;
-			lanes = <0 1 2 3 4 5>;
-		};
-	};
-
-	lcd0: display {
-		compatible = "tpo,taal", "panel-dsi-cm";
-		label = "lcd0";
-
-		reset-gpios = <&gpio4 6 GPIO_ACTIVE_HIGH>;	/* 102 */
-
-		port {
-			lcd0_in: endpoint {
-				remote-endpoint = <&dsi1_out_ep>;
-			};
-		};
-	};
-};
-
-&dsi2 {
-	status = "ok";
-	vdd-supply = <&vcxio>;
-
-	port {
-		dsi2_out_ep: endpoint {
-			remote-endpoint = <&lcd1_in>;
-			lanes = <0 1 2 3 4 5>;
-		};
-	};
-
-	lcd1: display {
-		compatible = "tpo,taal", "panel-dsi-cm";
-		label = "lcd1";
-
-		reset-gpios = <&gpio4 8 GPIO_ACTIVE_HIGH>;	/* 104 */
-
-		port {
-			lcd1_in: endpoint {
-				remote-endpoint = <&dsi2_out_ep>;
-			};
-		};
-	};
-};
-
-&hdmi {
-	status = "ok";
-	vdda-supply = <&vdac>;
-
-	port {
-		hdmi_out: endpoint {
-			remote-endpoint = <&tpd12s015_in>;
-		};
-	};
-};
diff -urNp a/arch/arm/boot/dts/omap4-var-som.dts b/arch/arm/boot/dts/omap4-var-som.dts
--- a/arch/arm/boot/dts/omap4-var-som.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/omap4-var-som.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,96 @@
+/*
+ * Copyright (C) 2012 Variscite Ltd. - http://www.variscite.com
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+
+/include/ "omap443x.dtsi"
+
+/ {
+	model = "Variscite OMAP4 SOM";
+	compatible = "var,omap4-var_som", "ti,omap4430", "ti,omap4";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x40000000>; /* 1 GB */
+	};
+
+	vdd_eth: fixedregulator@0 {
+		compatible = "regulator-fixed";
+		regulator-name = "VDD_ETH";
+		regulator-min-microvolt = <3300000>;
+		regulator-max-microvolt = <3300000>;
+		enable-active-high;
+		regulator-boot-on;
+	};
+};
+
+&i2c1 {
+	clock-frequency = <400000>;
+
+	twl: twl@48 {
+		reg = <0x48>;
+		/* SPI = 0, IRQ# = 7, 4 = active high level-sensitive */
+		interrupts = <0 7 4>; /* IRQ_SYS_1N cascaded to gic */
+		interrupt-parent = <&gic>;
+	};
+};
+
+/include/ "twl6030.dtsi"
+
+&i2c2 {
+	clock-frequency = <400000>;
+};
+
+&i2c3 {
+	clock-frequency = <400000>;
+
+	/*
+	 * Temperature Sensor
+	 * http://www.ti.com/lit/ds/symlink/tmp105.pdf
+	 */
+	tmp105@49 {
+		compatible = "ti,tmp105";
+		reg = <0x49>;
+	};
+};
+
+&i2c4 {
+	clock-frequency = <400000>;
+};
+
+&mcspi1 {
+	eth@0 {
+		compatible = "ks8851";
+		spi-max-frequency = <24000000>;
+		reg = <0>;
+		interrupt-parent = <&gpio6>;
+		interrupts = <11 8>; /* gpio line 171, low triggered */
+		vdd-supply = <&vdd_eth>;
+	};
+};
+
+&mmc1 {
+	vmmc-supply = <&vmmc>;
+	ti,bus-width = <8>;
+	ti,non-removable;
+};
+
+&mmc2 {
+	status = "disabled";
+};
+
+&mmc3 {
+	status = "disabled";
+};
+
+&mmc4 {
+	status = "disabled";
+};
+
+&mmc5 {
+	ti,bus-width = <4>;
+};
diff -urNp a/arch/arm/boot/dts/omap4.dtsi b/arch/arm/boot/dts/omap4.dtsi
--- a/arch/arm/boot/dts/omap4.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap4.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,21 +6,21 @@
  * published by the Free Software Foundation.
  */
 
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-#include <dt-bindings/pinctrl/omap.h>
+/*
+ * Carveout for multimedia usecases
+ * It should be the last 48MB of the first 512MB memory part
+ * In theory, it should not even exist. That zone should be reserved
+ * dynamically during the .reserve callback.
+ */
+/memreserve/ 0x9d000000 0x03000000;
 
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	compatible = "ti,omap4430", "ti,omap4";
 	interrupt-parent = <&gic>;
 
 	aliases {
-		i2c0 = &i2c1;
-		i2c1 = &i2c2;
-		i2c2 = &i2c3;
-		i2c3 = &i2c4;
 		serial0 = &uart1;
 		serial1 = &uart2;
 		serial2 = &uart3;
@@ -28,25 +28,13 @@
 	};
 
 	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
 		cpu@0 {
 			compatible = "arm,cortex-a9";
-			device_type = "cpu";
 			next-level-cache = <&L2>;
-			reg = <0x0>;
-
-			clocks = <&dpll_mpu_ck>;
-			clock-names = "cpu";
-
-			clock-latency = <300000>; /* From omap-cpufreq driver */
 		};
 		cpu@1 {
 			compatible = "arm,cortex-a9";
-			device_type = "cpu";
 			next-level-cache = <&L2>;
-			reg = <0x1>;
 		};
 	};
 
@@ -65,15 +53,14 @@
 		cache-level = <2>;
 	};
 
-	local-timer@48240600 {
+	local-timer@0x48240600 {
 		compatible = "arm,cortex-a9-twd-timer";
-		clocks = <&mpu_periphclk>;
 		reg = <0x48240600 0x20>;
-		interrupts = <GIC_PPI 13 (GIC_CPU_MASK_RAW(3) | IRQ_TYPE_LEVEL_HIGH)>;
+		interrupts = <1 13 0x304>;
 	};
 
 	/*
-	 * The soc node represents the soc top level view. It is used for IPs
+	 * The soc node represents the soc top level view. It is uses for IPs
 	 * that are not memory mapped in the MPU view or for the MPU itself.
 	 */
 	soc {
@@ -81,7 +68,6 @@
 		mpu {
 			compatible = "ti,omap4-mpu";
 			ti,hwmods = "mpu";
-			sram = <&ocmcram>;
 		};
 
 		dsp {
@@ -98,7 +84,7 @@
 	/*
 	 * XXX: Use a flat representation of the OMAP4 interconnect.
 	 * The real OMAP interconnect network is quite complex.
-	 * Since it will not bring real advantage to represent that in DT for
+	 * Since that will not bring real advantage to represent that in DT for
 	 * the moment, just use a fake OCP bus entry to represent the whole bus
 	 * hierarchy.
 	 */
@@ -111,61 +97,8 @@
 		reg = <0x44000000 0x1000>,
 		      <0x44800000 0x2000>,
 		      <0x45000000 0x1000>;
-		interrupts = <GIC_SPI 9 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 10 IRQ_TYPE_LEVEL_HIGH>;
-
-		cm1: cm1@4a004000 {
-			compatible = "ti,omap4-cm1";
-			reg = <0x4a004000 0x2000>;
-
-			cm1_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			cm1_clockdomains: clockdomains {
-			};
-		};
-
-		prm: prm@4a306000 {
-			compatible = "ti,omap4-prm";
-			reg = <0x4a306000 0x3000>;
-			interrupts = <GIC_SPI 11 IRQ_TYPE_LEVEL_HIGH>;
-
-			prm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			prm_clockdomains: clockdomains {
-			};
-		};
-
-		cm2: cm2@4a008000 {
-			compatible = "ti,omap4-cm2";
-			reg = <0x4a008000 0x3000>;
-
-			cm2_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			cm2_clockdomains: clockdomains {
-			};
-		};
-
-		scrm: scrm@4a30a000 {
-			compatible = "ti,omap4-scrm";
-			reg = <0x4a30a000 0x2000>;
-
-			scrm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			scrm_clockdomains: clockdomains {
-			};
-		};
+		interrupts = <0 9 0x4>,
+			     <0 10 0x4>;
 
 		counter32k: counter@4a304000 {
 			compatible = "ti,omap-counter32k";
@@ -178,8 +111,6 @@
 			reg = <0x4a100040 0x0196>;
 			#address-cells = <1>;
 			#size-cells = <0>;
-			#interrupt-cells = <1>;
-			interrupt-controller;
 			pinctrl-single,register-width = <16>;
 			pinctrl-single,function-mask = <0x7fff>;
 		};
@@ -188,49 +119,26 @@
 			reg = <0x4a31e040 0x0038>;
 			#address-cells = <1>;
 			#size-cells = <0>;
-			#interrupt-cells = <1>;
-			interrupt-controller;
 			pinctrl-single,register-width = <16>;
 			pinctrl-single,function-mask = <0x7fff>;
 		};
 
-		omap4_padconf_global: tisyscon@4a1005a0 {
-			compatible = "syscon";
-			reg = <0x4a1005a0 0x170>;
-		};
-
-		pbias_regulator: pbias_regulator {
-			compatible = "ti,pbias-omap";
-			reg = <0x60 0x4>;
-			syscon = <&omap4_padconf_global>;
-			pbias_mmc_reg: pbias_mmc_omap4 {
-				regulator-name = "pbias_mmc_omap4";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3000000>;
-			};
-		};
-
-		ocmcram: ocmcram@40304000 {
-			compatible = "mmio-sram";
-			reg = <0x40304000 0xa000>; /* 40k */
-		};
-
 		sdma: dma-controller@4a056000 {
 			compatible = "ti,omap4430-sdma";
 			reg = <0x4a056000 0x1000>;
-			interrupts = <GIC_SPI 12 IRQ_TYPE_LEVEL_HIGH>,
-				     <GIC_SPI 13 IRQ_TYPE_LEVEL_HIGH>,
-				     <GIC_SPI 14 IRQ_TYPE_LEVEL_HIGH>,
-				     <GIC_SPI 15 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 12 0x4>,
+				     <0 13 0x4>,
+				     <0 14 0x4>,
+				     <0 15 0x4>;
 			#dma-cells = <1>;
-			dma-channels = <32>;
-			dma-requests = <127>;
+			#dma-channels = <32>;
+			#dma-requests = <127>;
 		};
 
 		gpio1: gpio@4a310000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x4a310000 0x200>;
-			interrupts = <GIC_SPI 29 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 29 0x4>;
 			ti,hwmods = "gpio1";
 			ti,gpio-always-on;
 			gpio-controller;
@@ -242,7 +150,7 @@
 		gpio2: gpio@48055000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x48055000 0x200>;
-			interrupts = <GIC_SPI 30 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 30 0x4>;
 			ti,hwmods = "gpio2";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -253,7 +161,7 @@
 		gpio3: gpio@48057000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x48057000 0x200>;
-			interrupts = <GIC_SPI 31 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 31 0x4>;
 			ti,hwmods = "gpio3";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -264,7 +172,7 @@
 		gpio4: gpio@48059000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x48059000 0x200>;
-			interrupts = <GIC_SPI 32 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 32 0x4>;
 			ti,hwmods = "gpio4";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -275,7 +183,7 @@
 		gpio5: gpio@4805b000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x4805b000 0x200>;
-			interrupts = <GIC_SPI 33 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 33 0x4>;
 			ti,hwmods = "gpio5";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -286,7 +194,7 @@
 		gpio6: gpio@4805d000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x4805d000 0x200>;
-			interrupts = <GIC_SPI 34 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 34 0x4>;
 			ti,hwmods = "gpio6";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -299,19 +207,16 @@
 			reg = <0x50000000 0x1000>;
 			#address-cells = <2>;
 			#size-cells = <1>;
-			interrupts = <GIC_SPI 20 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 20 0x4>;
 			gpmc,num-cs = <8>;
 			gpmc,num-waitpins = <4>;
 			ti,hwmods = "gpmc";
-			ti,no-idle-on-init;
-			clocks = <&l3_div_ck>;
-			clock-names = "fck";
 		};
 
 		uart1: serial@4806a000 {
 			compatible = "ti,omap4-uart";
 			reg = <0x4806a000 0x100>;
-			interrupts = <GIC_SPI 72 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 72 0x4>;
 			ti,hwmods = "uart1";
 			clock-frequency = <48000000>;
 		};
@@ -319,7 +224,7 @@
 		uart2: serial@4806c000 {
 			compatible = "ti,omap4-uart";
 			reg = <0x4806c000 0x100>;
-			interrupts-extended = <&gic GIC_SPI 73 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 73 0x4>;
 			ti,hwmods = "uart2";
 			clock-frequency = <48000000>;
 		};
@@ -327,7 +232,7 @@
 		uart3: serial@48020000 {
 			compatible = "ti,omap4-uart";
 			reg = <0x48020000 0x100>;
-			interrupts-extended = <&gic GIC_SPI 74 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 74 0x4>;
 			ti,hwmods = "uart3";
 			clock-frequency = <48000000>;
 		};
@@ -335,22 +240,15 @@
 		uart4: serial@4806e000 {
 			compatible = "ti,omap4-uart";
 			reg = <0x4806e000 0x100>;
-			interrupts-extended = <&gic GIC_SPI 70 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 70 0x4>;
 			ti,hwmods = "uart4";
 			clock-frequency = <48000000>;
 		};
 
-		hwspinlock: spinlock@4a0f6000 {
-			compatible = "ti,omap4-hwspinlock";
-			reg = <0x4a0f6000 0x1000>;
-			ti,hwmods = "spinlock";
-			#hwlock-cells = <1>;
-		};
-
 		i2c1: i2c@48070000 {
 			compatible = "ti,omap4-i2c";
 			reg = <0x48070000 0x100>;
-			interrupts = <GIC_SPI 56 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 56 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c1";
@@ -359,7 +257,7 @@
 		i2c2: i2c@48072000 {
 			compatible = "ti,omap4-i2c";
 			reg = <0x48072000 0x100>;
-			interrupts = <GIC_SPI 57 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 57 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c2";
@@ -368,7 +266,7 @@
 		i2c3: i2c@48060000 {
 			compatible = "ti,omap4-i2c";
 			reg = <0x48060000 0x100>;
-			interrupts = <GIC_SPI 61 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 61 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c3";
@@ -377,7 +275,7 @@
 		i2c4: i2c@48350000 {
 			compatible = "ti,omap4-i2c";
 			reg = <0x48350000 0x100>;
-			interrupts = <GIC_SPI 62 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 62 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c4";
@@ -386,7 +284,7 @@
 		mcspi1: spi@48098000 {
 			compatible = "ti,omap4-mcspi";
 			reg = <0x48098000 0x200>;
-			interrupts = <GIC_SPI 65 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 65 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi1";
@@ -406,7 +304,7 @@
 		mcspi2: spi@4809a000 {
 			compatible = "ti,omap4-mcspi";
 			reg = <0x4809a000 0x200>;
-			interrupts = <GIC_SPI 66 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 66 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi2";
@@ -421,7 +319,7 @@
 		mcspi3: spi@480b8000 {
 			compatible = "ti,omap4-mcspi";
 			reg = <0x480b8000 0x200>;
-			interrupts = <GIC_SPI 91 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 91 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi3";
@@ -433,7 +331,7 @@
 		mcspi4: spi@480ba000 {
 			compatible = "ti,omap4-mcspi";
 			reg = <0x480ba000 0x200>;
-			interrupts = <GIC_SPI 48 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 48 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi4";
@@ -445,19 +343,18 @@
 		mmc1: mmc@4809c000 {
 			compatible = "ti,omap4-hsmmc";
 			reg = <0x4809c000 0x400>;
-			interrupts = <GIC_SPI 83 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 83 0x4>;
 			ti,hwmods = "mmc1";
 			ti,dual-volt;
 			ti,needs-special-reset;
 			dmas = <&sdma 61>, <&sdma 62>;
 			dma-names = "tx", "rx";
-			pbias-supply = <&pbias_mmc_reg>;
 		};
 
 		mmc2: mmc@480b4000 {
 			compatible = "ti,omap4-hsmmc";
 			reg = <0x480b4000 0x400>;
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 			ti,hwmods = "mmc2";
 			ti,needs-special-reset;
 			dmas = <&sdma 47>, <&sdma 48>;
@@ -467,7 +364,7 @@
 		mmc3: mmc@480ad000 {
 			compatible = "ti,omap4-hsmmc";
 			reg = <0x480ad000 0x400>;
-			interrupts = <GIC_SPI 94 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 94 0x4>;
 			ti,hwmods = "mmc3";
 			ti,needs-special-reset;
 			dmas = <&sdma 77>, <&sdma 78>;
@@ -477,7 +374,7 @@
 		mmc4: mmc@480d1000 {
 			compatible = "ti,omap4-hsmmc";
 			reg = <0x480d1000 0x400>;
-			interrupts = <GIC_SPI 96 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 96 0x4>;
 			ti,hwmods = "mmc4";
 			ti,needs-special-reset;
 			dmas = <&sdma 57>, <&sdma 58>;
@@ -487,32 +384,17 @@
 		mmc5: mmc@480d5000 {
 			compatible = "ti,omap4-hsmmc";
 			reg = <0x480d5000 0x400>;
-			interrupts = <GIC_SPI 59 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 59 0x4>;
 			ti,hwmods = "mmc5";
 			ti,needs-special-reset;
 			dmas = <&sdma 59>, <&sdma 60>;
 			dma-names = "tx", "rx";
 		};
 
-		mmu_dsp: mmu@4a066000 {
-			compatible = "ti,omap4-iommu";
-			reg = <0x4a066000 0x100>;
-			interrupts = <GIC_SPI 28 IRQ_TYPE_LEVEL_HIGH>;
-			ti,hwmods = "mmu_dsp";
-		};
-
-		mmu_ipu: mmu@55082000 {
-			compatible = "ti,omap4-iommu";
-			reg = <0x55082000 0x100>;
-			interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH>;
-			ti,hwmods = "mmu_ipu";
-			ti,iommu-bus-err-back;
-		};
-
 		wdt2: wdt@4a314000 {
 			compatible = "ti,omap4-wdt", "ti,omap3-wdt";
 			reg = <0x4a314000 0x80>;
-			interrupts = <GIC_SPI 80 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 80 0x4>;
 			ti,hwmods = "wd_timer2";
 		};
 
@@ -521,12 +403,11 @@
 			reg = <0x40132000 0x7f>, /* MPU private access */
 			      <0x49032000 0x7f>; /* L3 Interconnect */
 			reg-names = "mpu", "dma";
-			interrupts = <GIC_SPI 112 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 112 0x4>;
 			ti,hwmods = "mcpdm";
 			dmas = <&sdma 65>,
 			       <&sdma 66>;
 			dma-names = "up_link", "dn_link";
-			status = "disabled";
 		};
 
 		dmic: dmic@4012e000 {
@@ -534,11 +415,10 @@
 			reg = <0x4012e000 0x7f>, /* MPU private access */
 			      <0x4902e000 0x7f>; /* L3 Interconnect */
 			reg-names = "mpu", "dma";
-			interrupts = <GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 114 0x4>;
 			ti,hwmods = "dmic";
 			dmas = <&sdma 67>;
 			dma-names = "up_link";
-			status = "disabled";
 		};
 
 		mcbsp1: mcbsp@40122000 {
@@ -546,14 +426,13 @@
 			reg = <0x40122000 0xff>, /* MPU private access */
 			      <0x49022000 0xff>; /* L3 Interconnect */
 			reg-names = "mpu", "dma";
-			interrupts = <GIC_SPI 17 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 17 0x4>;
 			interrupt-names = "common";
 			ti,buffer-size = <128>;
 			ti,hwmods = "mcbsp1";
 			dmas = <&sdma 33>,
 			       <&sdma 34>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp2: mcbsp@40124000 {
@@ -561,14 +440,13 @@
 			reg = <0x40124000 0xff>, /* MPU private access */
 			      <0x49024000 0xff>; /* L3 Interconnect */
 			reg-names = "mpu", "dma";
-			interrupts = <GIC_SPI 22 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 22 0x4>;
 			interrupt-names = "common";
 			ti,buffer-size = <128>;
 			ti,hwmods = "mcbsp2";
 			dmas = <&sdma 17>,
 			       <&sdma 18>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp3: mcbsp@40126000 {
@@ -576,51 +454,41 @@
 			reg = <0x40126000 0xff>, /* MPU private access */
 			      <0x49026000 0xff>; /* L3 Interconnect */
 			reg-names = "mpu", "dma";
-			interrupts = <GIC_SPI 23 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 23 0x4>;
 			interrupt-names = "common";
 			ti,buffer-size = <128>;
 			ti,hwmods = "mcbsp3";
 			dmas = <&sdma 19>,
 			       <&sdma 20>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp4: mcbsp@48096000 {
 			compatible = "ti,omap4-mcbsp";
 			reg = <0x48096000 0xff>; /* L4 Interconnect */
 			reg-names = "mpu";
-			interrupts = <GIC_SPI 16 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 16 0x4>;
 			interrupt-names = "common";
 			ti,buffer-size = <128>;
 			ti,hwmods = "mcbsp4";
 			dmas = <&sdma 31>,
 			       <&sdma 32>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		keypad: keypad@4a31c000 {
 			compatible = "ti,omap4-keypad";
 			reg = <0x4a31c000 0x80>;
-			interrupts = <GIC_SPI 120 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 120 0x4>;
 			reg-names = "mpu";
 			ti,hwmods = "kbd";
 		};
 
-		dmm@4e000000 {
-			compatible = "ti,omap4-dmm";
-			reg = <0x4e000000 0x800>;
-			interrupts = <0 113 0x4>;
-			ti,hwmods = "dmm";
-		};
-
 		emif1: emif@4c000000 {
 			compatible = "ti,emif-4d";
 			reg = <0x4c000000 0x100>;
-			interrupts = <GIC_SPI 110 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 110 0x4>;
 			ti,hwmods = "emif1";
-			ti,no-idle-on-init;
 			phy-type = <1>;
 			hw-caps-read-idle-ctrl;
 			hw-caps-ll-interface;
@@ -630,9 +498,8 @@
 		emif2: emif@4d000000 {
 			compatible = "ti,emif-4d";
 			reg = <0x4d000000 0x100>;
-			interrupts = <GIC_SPI 111 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 111 0x4>;
 			ti,hwmods = "emif2";
-			ti,no-idle-on-init;
 			phy-type = <1>;
 			hw-caps-read-idle-ctrl;
 			hw-caps-ll-interface;
@@ -649,35 +516,14 @@
 			usb2_phy: usb2phy@4a0ad080 {
 				compatible = "ti,omap-usb2";
 				reg = <0x4a0ad080 0x58>;
-				ctrl-module = <&omap_control_usb2phy>;
-				clocks = <&usb_phy_cm_clk32k>;
-				clock-names = "wkupclk";
-				#phy-cells = <0>;
-			};
-		};
-
-		mailbox: mailbox@4a0f4000 {
-			compatible = "ti,omap4-mailbox";
-			reg = <0x4a0f4000 0x200>;
-			interrupts = <GIC_SPI 26 IRQ_TYPE_LEVEL_HIGH>;
-			ti,hwmods = "mailbox";
-			#mbox-cells = <1>;
-			ti,mbox-num-users = <3>;
-			ti,mbox-num-fifos = <8>;
-			mbox_ipu: mbox_ipu {
-				ti,mbox-tx = <0 0 0>;
-				ti,mbox-rx = <1 0 0>;
-			};
-			mbox_dsp: mbox_dsp {
-				ti,mbox-tx = <3 0 0>;
-				ti,mbox-rx = <2 0 0>;
+				ctrl-module = <&omap_control_usb>;
 			};
 		};
 
 		timer1: timer@4a318000 {
 			compatible = "ti,omap3430-timer";
 			reg = <0x4a318000 0x80>;
-			interrupts = <GIC_SPI 37 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 37 0x4>;
 			ti,hwmods = "timer1";
 			ti,timer-alwon;
 		};
@@ -685,21 +531,21 @@
 		timer2: timer@48032000 {
 			compatible = "ti,omap3430-timer";
 			reg = <0x48032000 0x80>;
-			interrupts = <GIC_SPI 38 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 38 0x4>;
 			ti,hwmods = "timer2";
 		};
 
 		timer3: timer@48034000 {
 			compatible = "ti,omap4430-timer";
 			reg = <0x48034000 0x80>;
-			interrupts = <GIC_SPI 39 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 39 0x4>;
 			ti,hwmods = "timer3";
 		};
 
 		timer4: timer@48036000 {
 			compatible = "ti,omap4430-timer";
 			reg = <0x48036000 0x80>;
-			interrupts = <GIC_SPI 40 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 40 0x4>;
 			ti,hwmods = "timer4";
 		};
 
@@ -707,7 +553,7 @@
 			compatible = "ti,omap4430-timer";
 			reg = <0x40138000 0x80>,
 			      <0x49038000 0x80>;
-			interrupts = <GIC_SPI 41 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 41 0x4>;
 			ti,hwmods = "timer5";
 			ti,timer-dsp;
 		};
@@ -716,7 +562,7 @@
 			compatible = "ti,omap4430-timer";
 			reg = <0x4013a000 0x80>,
 			      <0x4903a000 0x80>;
-			interrupts = <GIC_SPI 42 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 42 0x4>;
 			ti,hwmods = "timer6";
 			ti,timer-dsp;
 		};
@@ -725,7 +571,7 @@
 			compatible = "ti,omap4430-timer";
 			reg = <0x4013c000 0x80>,
 			      <0x4903c000 0x80>;
-			interrupts = <GIC_SPI 43 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 43 0x4>;
 			ti,hwmods = "timer7";
 			ti,timer-dsp;
 		};
@@ -734,7 +580,7 @@
 			compatible = "ti,omap4430-timer";
 			reg = <0x4013e000 0x80>,
 			      <0x4903e000 0x80>;
-			interrupts = <GIC_SPI 44 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 44 0x4>;
 			ti,hwmods = "timer8";
 			ti,timer-pwm;
 			ti,timer-dsp;
@@ -743,7 +589,7 @@
 		timer9: timer@4803e000 {
 			compatible = "ti,omap4430-timer";
 			reg = <0x4803e000 0x80>;
-			interrupts = <GIC_SPI 45 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 45 0x4>;
 			ti,hwmods = "timer9";
 			ti,timer-pwm;
 		};
@@ -751,7 +597,7 @@
 		timer10: timer@48086000 {
 			compatible = "ti,omap3430-timer";
 			reg = <0x48086000 0x80>;
-			interrupts = <GIC_SPI 46 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 46 0x4>;
 			ti,hwmods = "timer10";
 			ti,timer-pwm;
 		};
@@ -759,7 +605,7 @@
 		timer11: timer@48088000 {
 			compatible = "ti,omap4430-timer";
 			reg = <0x48088000 0x80>;
-			interrupts = <GIC_SPI 47 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 47 0x4>;
 			ti,hwmods = "timer11";
 			ti,timer-pwm;
 		};
@@ -767,7 +613,7 @@
 		usbhstll: usbhstll@4a062000 {
 			compatible = "ti,usbhs-tll";
 			reg = <0x4a062000 0x1000>;
-			interrupts = <GIC_SPI 78 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 78 0x4>;
 			ti,hwmods = "usb_tll_hs";
 		};
 
@@ -778,180 +624,41 @@
 			#address-cells = <1>;
 			#size-cells = <1>;
 			ranges;
-			clocks = <&init_60m_fclk>,
-				 <&xclk60mhsp1_ck>,
-				 <&xclk60mhsp2_ck>;
-			clock-names = "refclk_60m_int",
-				      "refclk_60m_ext_p1",
-				      "refclk_60m_ext_p2";
 
 			usbhsohci: ohci@4a064800 {
-				compatible = "ti,ohci-omap3";
+				compatible = "ti,ohci-omap3", "usb-ohci";
 				reg = <0x4a064800 0x400>;
 				interrupt-parent = <&gic>;
-				interrupts = <GIC_SPI 76 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 76 0x4>;
 			};
 
 			usbhsehci: ehci@4a064c00 {
-				compatible = "ti,ehci-omap";
+				compatible = "ti,ehci-omap", "usb-ehci";
 				reg = <0x4a064c00 0x400>;
 				interrupt-parent = <&gic>;
-				interrupts = <GIC_SPI 77 IRQ_TYPE_LEVEL_HIGH>;
+				interrupts = <0 77 0x4>;
 			};
 		};
 
-		omap_control_usb2phy: control-phy@4a002300 {
-			compatible = "ti,control-phy-usb2";
-			reg = <0x4a002300 0x4>;
-			reg-names = "power";
-		};
-
-		omap_control_usbotg: control-phy@4a00233c {
-			compatible = "ti,control-phy-otghs";
-			reg = <0x4a00233c 0x4>;
-			reg-names = "otghs_control";
+		omap_control_usb: omap-control-usb@4a002300 {
+			compatible = "ti,omap-control-usb";
+			reg = <0x4a002300 0x4>,
+			      <0x4a00233c 0x4>;
+			reg-names = "control_dev_conf", "otghs_control";
+			ti,type = <1>;
 		};
 
 		usb_otg_hs: usb_otg_hs@4a0ab000 {
 			compatible = "ti,omap4-musb";
 			reg = <0x4a0ab000 0x7ff>;
-			interrupts = <GIC_SPI 92 IRQ_TYPE_LEVEL_HIGH>, <GIC_SPI 93 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 92 0x4>, <0 93 0x4>;
 			interrupt-names = "mc", "dma";
 			ti,hwmods = "usb_otg_hs";
 			usb-phy = <&usb2_phy>;
-			phys = <&usb2_phy>;
-			phy-names = "usb2-phy";
 			multipoint = <1>;
 			num-eps = <16>;
 			ram-bits = <12>;
-			ctrl-module = <&omap_control_usbotg>;
-		};
-
-		aes: aes@4b501000 {
-			compatible = "ti,omap4-aes";
-			ti,hwmods = "aes";
-			reg = <0x4b501000 0xa0>;
-			interrupts = <GIC_SPI 85 IRQ_TYPE_LEVEL_HIGH>;
-			dmas = <&sdma 111>, <&sdma 110>;
-			dma-names = "tx", "rx";
-		};
-
-		des: des@480a5000 {
-			compatible = "ti,omap4-des";
-			ti,hwmods = "des";
-			reg = <0x480a5000 0xa0>;
-			interrupts = <GIC_SPI 82 IRQ_TYPE_LEVEL_HIGH>;
-			dmas = <&sdma 117>, <&sdma 116>;
-			dma-names = "tx", "rx";
-		};
-
-		abb_mpu: regulator-abb-mpu {
-			compatible = "ti,abb-v2";
-			regulator-name = "abb_mpu";
-			#address-cells = <0>;
-			#size-cells = <0>;
-			ti,tranxdone-status-mask = <0x80>;
-			clocks = <&sys_clkin_ck>;
-			ti,settling-time = <50>;
-			ti,clock-cycles = <16>;
-
-			status = "disabled";
-		};
-
-		abb_iva: regulator-abb-iva {
-			compatible = "ti,abb-v2";
-			regulator-name = "abb_iva";
-			#address-cells = <0>;
-			#size-cells = <0>;
-			ti,tranxdone-status-mask = <0x80000000>;
-			clocks = <&sys_clkin_ck>;
-			ti,settling-time = <50>;
-			ti,clock-cycles = <16>;
-
-			status = "disabled";
-		};
-
-		dss: dss@58000000 {
-			compatible = "ti,omap4-dss";
-			reg = <0x58000000 0x80>;
-			status = "disabled";
-			ti,hwmods = "dss_core";
-			clocks = <&dss_dss_clk>;
-			clock-names = "fck";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges;
-
-			dispc@58001000 {
-				compatible = "ti,omap4-dispc";
-				reg = <0x58001000 0x1000>;
-				interrupts = <GIC_SPI 25 IRQ_TYPE_LEVEL_HIGH>;
-				ti,hwmods = "dss_dispc";
-				clocks = <&dss_dss_clk>;
-				clock-names = "fck";
-			};
-
-			rfbi: encoder@58002000  {
-				compatible = "ti,omap4-rfbi";
-				reg = <0x58002000 0x1000>;
-				status = "disabled";
-				ti,hwmods = "dss_rfbi";
-				clocks = <&dss_dss_clk>, <&l3_div_ck>;
-				clock-names = "fck", "ick";
-			};
-
-			venc: encoder@58003000 {
-				compatible = "ti,omap4-venc";
-				reg = <0x58003000 0x1000>;
-				status = "disabled";
-				ti,hwmods = "dss_venc";
-				clocks = <&dss_tv_clk>;
-				clock-names = "fck";
-			};
-
-			dsi1: encoder@58004000 {
-				compatible = "ti,omap4-dsi";
-				reg = <0x58004000 0x200>,
-				      <0x58004200 0x40>,
-				      <0x58004300 0x20>;
-				reg-names = "proto", "phy", "pll";
-				interrupts = <GIC_SPI 53 IRQ_TYPE_LEVEL_HIGH>;
-				status = "disabled";
-				ti,hwmods = "dss_dsi1";
-				clocks = <&dss_dss_clk>, <&dss_sys_clk>;
-				clock-names = "fck", "sys_clk";
-			};
-
-			dsi2: encoder@58005000 {
-				compatible = "ti,omap4-dsi";
-				reg = <0x58005000 0x200>,
-				      <0x58005200 0x40>,
-				      <0x58005300 0x20>;
-				reg-names = "proto", "phy", "pll";
-				interrupts = <GIC_SPI 84 IRQ_TYPE_LEVEL_HIGH>;
-				status = "disabled";
-				ti,hwmods = "dss_dsi2";
-				clocks = <&dss_dss_clk>, <&dss_sys_clk>;
-				clock-names = "fck", "sys_clk";
-			};
-
-			hdmi: encoder@58006000 {
-				compatible = "ti,omap4-hdmi";
-				reg = <0x58006000 0x200>,
-				      <0x58006200 0x100>,
-				      <0x58006300 0x100>,
-				      <0x58006400 0x1000>;
-				reg-names = "wp", "pll", "phy", "core";
-				interrupts = <GIC_SPI 101 IRQ_TYPE_LEVEL_HIGH>;
-				status = "disabled";
-				ti,hwmods = "dss_hdmi";
-				clocks = <&dss_48mhz_clk>, <&dss_sys_clk>;
-				clock-names = "fck", "sys_clk";
-				dmas = <&sdma 76>;
-				dma-names = "audio_tx";
-			};
+			ti,has-mailbox;
 		};
 	};
 };
-
-/include/ "omap44xx-clocks.dtsi"
diff -urNp a/arch/arm/boot/dts/omap443x.dtsi b/arch/arm/boot/dts/omap443x.dtsi
--- a/arch/arm/boot/dts/omap443x.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap443x.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -8,11 +8,11 @@
  * kind, whether express or implied.
  */
 
-#include "omap4.dtsi"
+/include/ "omap4.dtsi"
 
 / {
 	cpus {
-		cpu0: cpu@0 {
+		cpu@0 {
 			/* OMAP443x variants OPP50-OPPNT */
 			operating-points = <
 				/* kHz    uV */
@@ -22,53 +22,6 @@
 				1008000 1375000
 			>;
 			clock-latency = <300000>; /* From legacy driver */
-
-			/* cooling options */
-			cooling-min-level = <0>;
-			cooling-max-level = <3>;
-			#cooling-cells = <2>; /* min followed by max */
-		};
-	};
-
-	thermal-zones {
-		#include "omap4-cpu-thermal.dtsi"
-	};
-
-	ocp {
-		bandgap: bandgap {
-			reg = <0x4a002260 0x4
-			       0x4a00232C 0x4>;
-			compatible = "ti,omap4430-bandgap";
-
-			#thermal-sensor-cells = <0>;
-		};
-	};
-
-	ocp {
-		abb_mpu: regulator-abb-mpu {
-			status = "okay";
-
-			reg = <0x4a307bd0 0x8>, <0x4a306014 0x4>;
-			reg-names = "base-address", "int-address";
-
-			ti,abb_info = <
-			/*uV		ABB	efuse	rbb_m	fbb_m	vset_m*/
-			1025000		0	0	0	0	0
-			1200000		0	0	0	0	0
-			1313000		0	0	0	0	0
-			1375000		1	0	0	0	0
-			1389000		1	0	0	0	0
-			>;
 		};
-
-		/* Default unused, just provide register info for record */
-		abb_iva: regulator-abb-iva {
-			reg = <0x4a307bd8 0x8>, <0x4a306010 0x4>;
-			reg-names = "base-address", "int-address";
-		};
-
 	};
-
 };
-
-/include/ "omap443x-clocks.dtsi"
diff -urNp a/arch/arm/boot/dts/omap4460.dtsi b/arch/arm/boot/dts/omap4460.dtsi
--- a/arch/arm/boot/dts/omap4460.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap4460.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -7,12 +7,12 @@
  * version 2.  This program is licensed "as is" without any warranty of any
  * kind, whether express or implied.
  */
-#include "omap4.dtsi"
+/include/ "omap4.dtsi"
 
 / {
 	cpus {
 		/* OMAP446x 'standard device' variants OPP50 to OPPTurbo */
-		cpu0: cpu@0 {
+		cpu@0 {
 			operating-points = <
 				/* kHz    uV */
 				350000  1025000
@@ -20,74 +20,13 @@
 				920000  1313000
 			>;
 			clock-latency = <300000>; /* From legacy driver */
-
-			/* cooling options */
-			cooling-min-level = <0>;
-			cooling-max-level = <2>;
-			#cooling-cells = <2>; /* min followed by max */
 		};
 	};
 
 	pmu {
 		compatible = "arm,cortex-a9-pmu";
-		interrupts = <GIC_SPI 54 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 55 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 54 0x4>,
+			     <0 55 0x4>;
 		ti,hwmods = "debugss";
 	};
-
-	thermal-zones {
-		#include "omap4-cpu-thermal.dtsi"
-	};
-
-	ocp {
-		bandgap: bandgap {
-			reg = <0x4a002260 0x4
-			       0x4a00232C 0x4
-			       0x4a002378 0x18>;
-			compatible = "ti,omap4460-bandgap";
-			interrupts = <0 126 IRQ_TYPE_LEVEL_HIGH>; /* talert */
-			gpios = <&gpio3 22 0>; /* tshut */
-
-			#thermal-sensor-cells = <0>;
-		};
-
-		abb_mpu: regulator-abb-mpu {
-			status = "okay";
-
-			reg = <0x4a307bd0 0x8>, <0x4a306014 0x4>,
-			      <0x4A002268 0x4>;
-			reg-names = "base-address", "int-address",
-				    "efuse-address";
-
-			ti,abb_info = <
-			/*uV		ABB	efuse	rbb_m	fbb_m	vset_m*/
-			1025000		0	0	0	0	0
-			1200000		0	0	0	0	0
-			1313000		0	0	0x100000 0x40000 0
-			1375000		1	0	0	0	0
-			1389000		1	0	0	0	0
-			>;
-		};
-
-		abb_iva: regulator-abb-iva {
-			status = "okay";
-
-			reg = <0x4a307bd8 0x8>, <0x4a306010 0x4>,
-			      <0x4A002268 0x4>;
-			reg-names = "base-address", "int-address",
-				    "efuse-address";
-
-			ti,abb_info = <
-			/*uV		ABB	efuse	rbb_m	fbb_m	vset_m*/
-			950000		0	0	0	0	0
-			1140000		0	0	0	0	0
-			1291000		0	0	0x200000 0	0
-			1375000		1	0	0	0	0
-			1376000		1	0	0	0	0
-			>;
-		};
-	};
-
 };
-
-/include/ "omap446x-clocks.dtsi"
diff -urNp a/arch/arm/boot/dts/omap5-evm.dts b/arch/arm/boot/dts/omap5-evm.dts
--- a/arch/arm/boot/dts/omap5-evm.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/omap5-evm.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,261 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+
+/include/ "omap5.dtsi"
+/include/ "samsung_k3pe0e000b.dtsi"
+
+/ {
+	model = "TI OMAP5 EVM board";
+	compatible = "ti,omap5-evm", "ti,omap5";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x7F000000>; /* 2032 MB */
+	};
+
+	vmmcsd_fixed: fixedregulator-mmcsd {
+		compatible = "regulator-fixed";
+		regulator-name = "vmmcsd_fixed";
+		regulator-min-microvolt = <3000000>;
+		regulator-max-microvolt = <3000000>;
+	};
+
+};
+
+&omap5_pmx_core {
+	pinctrl-names = "default";
+	pinctrl-0 = <
+			&twl6040_pins
+			&mcpdm_pins
+			&dmic_pins
+			&mcbsp1_pins
+			&mcbsp2_pins
+	>;
+
+	twl6040_pins: pinmux_twl6040_pins {
+		pinctrl-single,pins = <
+			0x18a 0x6	/* perslimbus2_clock.gpio5_145 OUTPUT | MODE6 */
+		>;
+	};
+
+	mcpdm_pins: pinmux_mcpdm_pins {
+		pinctrl-single,pins = <
+			0x142 0x108	/* abe_clks.abe_clks INPUT PULLDOWN | MODE0 */
+			0x15c 0x108	/* abemcpdm_ul_data.abemcpdm_ul_data INPUT PULLDOWN | MODE0 */
+			0x15e 0x108	/* abemcpdm_dl_data.abemcpdm_dl_data INPUT PULLDOWN | MODE0 */
+			0x160 0x118	/* abemcpdm_frame.abemcpdm_frame INPUT PULLUP | MODE0 */
+			0x162 0x108	/* abemcpdm_lb_clk.abemcpdm_lb_clk INPUT PULLDOWN | MODE0 */
+		>;
+	};
+
+	dmic_pins: pinmux_dmic_pins {
+		pinctrl-single,pins = <
+			0x144 0x100	/* abedmic_din1.abedmic_din1 INPUT | MODE0 */
+			0x146 0x100	/* abedmic_din2.abedmic_din2 INPUT | MODE0 */
+			0x148 0x100	/* abedmic_din3.abedmic_din3 INPUT | MODE0 */
+			0x14a 0		/* abedmic_clk1.abedmic_clk1 OUTPUT | MODE0 */
+		>;
+	};
+
+	mcbsp1_pins: pinmux_mcbsp1_pins {
+		pinctrl-single,pins = <
+			0x14c 0x101	/* abedmic_clk2.abemcbsp1_fsx INPUT | MODE1 */
+			0x14e 0x9	/* abedmic_clk3.abemcbsp1_dx OUTPUT PULLDOWN | MODE1 */
+			0x150 0x101	/* abeslimbus1_clock.abemcbsp1_clkx INPUT | MODE0 */
+			0x152 0x109	/* abeslimbus1_data.abemcbsp1_dr INPUT PULLDOWN | MODE1 */
+		>;
+	};
+
+	mcbsp2_pins: pinmux_mcbsp2_pins {
+		pinctrl-single,pins = <
+			0x154 0x108	/* abemcbsp2_dr.abemcbsp2_dr INPUT PULLDOWN | MODE0 */
+			0x156 0x8	/* abemcbsp2_dx.abemcbsp2_dx OUTPUT PULLDOWN | MODE0 */
+			0x158 0x100	/* abemcbsp2_fsx.abemcbsp2_fsx INPUT | MODE0 */
+			0x15a 0x100	/* abemcbsp2_clkx.abemcbsp2_clkx INPUT | MODE0 */
+		>;
+	};
+
+        i2c1_pins: pinmux_i2c1_pins {
+                pinctrl-single,pins = <
+                        0x1b2 0x118        /* i2c1_scl PULLUP | INPUTENABLE | MODE0 */
+                        0x1b4 0x118        /* i2c1_sda PULLUP | INPUTENABLE | MODE0 */
+                >;
+        };
+
+	i2c2_pins: pinmux_i2c2_pins {
+		pinctrl-single,pins = <
+			0x178 0x100        /* i2c2_scl INPUTENABLE | MODE0 */
+			0x17a 0x100        /* i2c2_sda INPUTENABLE | MODE0 */
+		>;
+	};
+
+	i2c3_pins: pinmux_i2c3_pins {
+		pinctrl-single,pins = <
+			0x13a 0x100        /* i2c3_scl INPUTENABLE | MODE0 */
+			0x13c 0x100     /* i2c3_sda INPUTENABLE | MODE0 */
+		>;
+	};
+
+	i2c4_pins: pinmux_i2c4_pins {
+		pinctrl-single,pins = <
+			0xb8 0x100        /* i2c4_scl INPUTENABLE | MODE0 */
+			0xba 0x100     /* i2c4_sda INPUTENABLE | MODE0 */
+		>;
+	};
+
+	i2c5_pins: pinmux_i2c5_pins {
+		pinctrl-single,pins = <
+			0x184 0x100        /* i2c5_scl INPUTENABLE | MODE0 */
+			0x186 0x100     /* i2c5_sda INPUTENABLE | MODE0 */
+		>;
+	};
+
+	mcspi2_pins: pinmux_mcspi2_pins {
+		pinctrl-single,pins = <
+			0xbc 0x100	/*  MCSPI2_CLK INPUTENABLE | MODE0 */
+			0xbe 0x100	/*  MCSPI2_SIMO INPUTENABLE | MODE0 */
+			0xc0 0x118	/*  MCSPI2_SOMI PULLUP | INPUTENABLE | MODE0*/
+			0xc2 0x0	/*  MCSPI2_CS MODE0*/
+		>;
+	};
+
+	mcspi3_pins: pinmux_mcspi3_pins {
+		pinctrl-single,pins = <
+			0x78 0x101	/*  MCSPI2_SOMI INPUTENABLE | MODE1 */
+			0x7a 0x101	/*  MCSPI2_CS INPUTENABLE | MODE1 */
+			0x7c 0x101	/*  MCSPI2_SIMO INPUTENABLE | MODE1 */
+			0x7e 0x101	/*  MCSPI2_CLK INPUTENABLE | MODE1 */
+		>;
+	};
+
+	mcspi4_pins: pinmux_mcspi4_pins {
+		pinctrl-single,pins = <
+			0x164 0x101	/*  MCSPI2_CLK INPUTENABLE | MODE1 */
+			0x168 0x101	/*  MCSPI2_SIMO INPUTENABLE | MODE1 */
+			0x16a 0x101	/*  MCSPI2_SOMI INPUTENABLE | MODE1 */
+			0x16c 0x101	/*  MCSPI2_CS INPUTENABLE | MODE1 */
+		>;
+	};
+};
+
+&mmc1 {
+	vmmc-supply = <&vmmcsd_fixed>;
+	bus-width = <4>;
+};
+
+&mmc2 {
+	vmmc-supply = <&vmmcsd_fixed>;
+	bus-width = <8>;
+	ti,non-removable;
+};
+
+&mmc3 {
+	bus-width = <4>;
+	ti,non-removable;
+};
+
+&mmc4 {
+	status = "disabled";
+};
+
+&mmc5 {
+	status = "disabled";
+};
+
+&i2c1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&i2c1_pins>;
+
+	clock-frequency = <400000>;
+};
+
+&i2c2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&i2c2_pins>;
+
+	clock-frequency = <400000>;
+
+	/* Pressure Sensor */
+	bmp085@77 {
+		compatible = "bosch,bmp085";
+		reg = <0x77>;
+	};
+};
+
+&i2c3 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&i2c3_pins>;
+
+	clock-frequency = <400000>;
+};
+
+&i2c4 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&i2c4_pins>;
+
+	clock-frequency = <400000>;
+
+	/* Temperature Sensor */
+	tmp102@48{
+		compatible = "ti,tmp102";
+		reg = <0x48>;
+	};
+};
+
+&i2c5 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&i2c5_pins>;
+
+	clock-frequency = <400000>;
+};
+
+&keypad {
+	keypad,num-rows = <8>;
+	keypad,num-columns = <8>;
+	linux,keymap = <0x02020073	/* VOLUP */
+			0x02030072	/* VOLDOWM */
+			0x020400e7	/* SEND */
+			0x02050066	/* HOME */
+			0x0206006b	/* END */
+			0x020700d9>;	/* SEARCH */
+	linux,input-no-autorepeat;
+};
+
+&mcbsp3 {
+	status = "disabled";
+};
+
+&emif1 {
+	cs1-used;
+	device-handle = <&samsung_K3PE0E000B>;
+};
+
+&emif2 {
+	cs1-used;
+	device-handle = <&samsung_K3PE0E000B>;
+};
+
+&mcspi1 {
+
+};
+
+&mcspi2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&mcspi2_pins>;
+};
+
+&mcspi3 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&mcspi3_pins>;
+};
+
+&mcspi4 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&mcspi4_pins>;
+};
diff -urNp a/arch/arm/boot/dts/omap5.dtsi b/arch/arm/boot/dts/omap5.dtsi
--- a/arch/arm/boot/dts/omap5.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/omap5.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -7,11 +7,15 @@
  * Based on "omap4.dtsi"
  */
 
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-#include <dt-bindings/pinctrl/omap.h>
+/*
+ * Carveout for multimedia usecases
+ * It should be the last 48MB of the first 512MB memory part
+ * In theory, it should not even exist. That zone should be reserved
+ * dynamically during the .reserve callback.
+ */
+/memreserve/ 0x9d000000 0x03000000;
 
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	#address-cells = <1>;
@@ -21,11 +25,6 @@
 	interrupt-parent = <&gic>;
 
 	aliases {
-		i2c0 = &i2c1;
-		i2c1 = &i2c2;
-		i2c2 = &i2c3;
-		i2c3 = &i2c4;
-		i2c4 = &i2c5;
 		serial0 = &uart1;
 		serial1 = &uart2;
 		serial2 = &uart3;
@@ -35,56 +34,22 @@
 	};
 
 	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		cpu0: cpu@0 {
-			device_type = "cpu";
+		cpu@0 {
 			compatible = "arm,cortex-a15";
-			reg = <0x0>;
-
-			operating-points = <
-				/* kHz    uV */
-				1000000 1060000
-				1500000 1250000
-			>;
-
-			clocks = <&dpll_mpu_ck>;
-			clock-names = "cpu";
-
-			clock-latency = <300000>; /* From omap-cpufreq driver */
-
-			/* cooling options */
-			cooling-min-level = <0>;
-			cooling-max-level = <2>;
-			#cooling-cells = <2>; /* min followed by max */
 		};
 		cpu@1 {
-			device_type = "cpu";
 			compatible = "arm,cortex-a15";
-			reg = <0x1>;
 		};
 	};
 
-	thermal-zones {
-		#include "omap4-cpu-thermal.dtsi"
-		#include "omap5-gpu-thermal.dtsi"
-		#include "omap5-core-thermal.dtsi"
-	};
-
 	timer {
 		compatible = "arm,armv7-timer";
-		/* PPI secure/nonsecure IRQ */
-		interrupts = <GIC_PPI 13 (GIC_CPU_MASK_RAW(3) | IRQ_TYPE_LEVEL_LOW)>,
-			     <GIC_PPI 14 (GIC_CPU_MASK_RAW(3) | IRQ_TYPE_LEVEL_LOW)>,
-			     <GIC_PPI 11 (GIC_CPU_MASK_RAW(3) | IRQ_TYPE_LEVEL_LOW)>,
-			     <GIC_PPI 10 (GIC_CPU_MASK_RAW(3) | IRQ_TYPE_LEVEL_LOW)>;
-	};
-
-	pmu {
-		compatible = "arm,cortex-a15-pmu";
-		interrupts = <GIC_SPI 131 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 132 IRQ_TYPE_LEVEL_HIGH>;
+		/* PPI secure/nonsecure IRQ, active low level-sensitive */
+		interrupts = <1 13 0x308>,
+			     <1 14 0x308>,
+			     <1 11 0x308>,
+			     <1 10 0x308>;
+		clock-frequency = <6144000>;
 	};
 
 	gic: interrupt-controller@48211000 {
@@ -98,22 +63,21 @@
 	};
 
 	/*
-	 * The soc node represents the soc top level view. It is used for IPs
+	 * The soc node represents the soc top level view. It is uses for IPs
 	 * that are not memory mapped in the MPU view or for the MPU itself.
 	 */
 	soc {
 		compatible = "ti,omap-infra";
 		mpu {
-			compatible = "ti,omap4-mpu";
+			compatible = "ti,omap5-mpu";
 			ti,hwmods = "mpu";
-			sram = <&ocmcram>;
 		};
 	};
 
 	/*
 	 * XXX: Use a flat representation of the OMAP3 interconnect.
 	 * The real OMAP interconnect network is quite complex.
-	 * Since it will not bring real advantage to represent that in DT for
+	 * Since that will not bring real advantage to represent that in DT for
 	 * the moment, just use a fake OCP bus entry to represent the whole bus
 	 * hierarchy.
 	 */
@@ -126,61 +90,8 @@
 		reg = <0x44000000 0x2000>,
 		      <0x44800000 0x3000>,
 		      <0x45000000 0x4000>;
-		interrupts = <GIC_SPI 9 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 10 IRQ_TYPE_LEVEL_HIGH>;
-
-		prm: prm@4ae06000 {
-			compatible = "ti,omap5-prm";
-			reg = <0x4ae06000 0x3000>;
-			interrupts = <GIC_SPI 11 IRQ_TYPE_LEVEL_HIGH>;
-
-			prm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			prm_clockdomains: clockdomains {
-			};
-		};
-
-		cm_core_aon: cm_core_aon@4a004000 {
-			compatible = "ti,omap5-cm-core-aon";
-			reg = <0x4a004000 0x2000>;
-
-			cm_core_aon_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			cm_core_aon_clockdomains: clockdomains {
-			};
-		};
-
-		scrm: scrm@4ae0a000 {
-			compatible = "ti,omap5-scrm";
-			reg = <0x4ae0a000 0x2000>;
-
-			scrm_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			scrm_clockdomains: clockdomains {
-			};
-		};
-
-		cm_core: cm_core@4a008000 {
-			compatible = "ti,omap5-cm-core";
-			reg = <0x4a008000 0x3000>;
-
-			cm_core_clocks: clocks {
-				#address-cells = <1>;
-				#size-cells = <0>;
-			};
-
-			cm_core_clockdomains: clockdomains {
-			};
-		};
+		interrupts = <0 9 0x4>,
+			     <0 10 0x4>;
 
 		counter32k: counter@4ae04000 {
 			compatible = "ti,omap-counter32k";
@@ -189,63 +100,38 @@
 		};
 
 		omap5_pmx_core: pinmux@4a002840 {
-			compatible = "ti,omap5-padconf", "pinctrl-single";
+			compatible = "ti,omap4-padconf", "pinctrl-single";
 			reg = <0x4a002840 0x01b6>;
 			#address-cells = <1>;
 			#size-cells = <0>;
-			#interrupt-cells = <1>;
-			interrupt-controller;
 			pinctrl-single,register-width = <16>;
 			pinctrl-single,function-mask = <0x7fff>;
 		};
 		omap5_pmx_wkup: pinmux@4ae0c840 {
-			compatible = "ti,omap5-padconf", "pinctrl-single";
+			compatible = "ti,omap4-padconf", "pinctrl-single";
 			reg = <0x4ae0c840 0x0038>;
 			#address-cells = <1>;
 			#size-cells = <0>;
-			#interrupt-cells = <1>;
-			interrupt-controller;
 			pinctrl-single,register-width = <16>;
 			pinctrl-single,function-mask = <0x7fff>;
 		};
 
-		omap5_padconf_global: tisyscon@4a002da0 {
-			compatible = "syscon";
-			reg = <0x4A002da0 0xec>;
-		};
-
-		pbias_regulator: pbias_regulator {
-			compatible = "ti,pbias-omap";
-			reg = <0x60 0x4>;
-			syscon = <&omap5_padconf_global>;
-			pbias_mmc_reg: pbias_mmc_omap5 {
-				regulator-name = "pbias_mmc_omap5";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3000000>;
-			};
-		};
-
-		ocmcram: ocmcram@40300000 {
-			compatible = "mmio-sram";
-			reg = <0x40300000 0x20000>; /* 128k */
-		};
-
 		sdma: dma-controller@4a056000 {
 			compatible = "ti,omap4430-sdma";
 			reg = <0x4a056000 0x1000>;
-			interrupts = <GIC_SPI 12 IRQ_TYPE_LEVEL_HIGH>,
-				     <GIC_SPI 13 IRQ_TYPE_LEVEL_HIGH>,
-				     <GIC_SPI 14 IRQ_TYPE_LEVEL_HIGH>,
-				     <GIC_SPI 15 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 12 0x4>,
+				     <0 13 0x4>,
+				     <0 14 0x4>,
+				     <0 15 0x4>;
 			#dma-cells = <1>;
-			dma-channels = <32>;
-			dma-requests = <127>;
+			#dma-channels = <32>;
+			#dma-requests = <127>;
 		};
 
 		gpio1: gpio@4ae10000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x4ae10000 0x200>;
-			interrupts = <GIC_SPI 29 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 29 0x4>;
 			ti,hwmods = "gpio1";
 			ti,gpio-always-on;
 			gpio-controller;
@@ -257,7 +143,7 @@
 		gpio2: gpio@48055000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x48055000 0x200>;
-			interrupts = <GIC_SPI 30 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 30 0x4>;
 			ti,hwmods = "gpio2";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -268,7 +154,7 @@
 		gpio3: gpio@48057000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x48057000 0x200>;
-			interrupts = <GIC_SPI 31 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 31 0x4>;
 			ti,hwmods = "gpio3";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -279,7 +165,7 @@
 		gpio4: gpio@48059000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x48059000 0x200>;
-			interrupts = <GIC_SPI 32 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 32 0x4>;
 			ti,hwmods = "gpio4";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -290,7 +176,7 @@
 		gpio5: gpio@4805b000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x4805b000 0x200>;
-			interrupts = <GIC_SPI 33 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 33 0x4>;
 			ti,hwmods = "gpio5";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -301,7 +187,7 @@
 		gpio6: gpio@4805d000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x4805d000 0x200>;
-			interrupts = <GIC_SPI 34 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 34 0x4>;
 			ti,hwmods = "gpio6";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -312,7 +198,7 @@
 		gpio7: gpio@48051000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x48051000 0x200>;
-			interrupts = <GIC_SPI 35 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 35 0x4>;
 			ti,hwmods = "gpio7";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -323,7 +209,7 @@
 		gpio8: gpio@48053000 {
 			compatible = "ti,omap4-gpio";
 			reg = <0x48053000 0x200>;
-			interrupts = <GIC_SPI 121 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 121 0x4>;
 			ti,hwmods = "gpio8";
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -336,18 +222,16 @@
 			reg = <0x50000000 0x1000>;
 			#address-cells = <2>;
 			#size-cells = <1>;
-			interrupts = <GIC_SPI 20 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 20 0x4>;
 			gpmc,num-cs = <8>;
 			gpmc,num-waitpins = <4>;
 			ti,hwmods = "gpmc";
-			clocks = <&l3_iclk_div>;
-			clock-names = "fck";
 		};
 
 		i2c1: i2c@48070000 {
 			compatible = "ti,omap4-i2c";
 			reg = <0x48070000 0x100>;
-			interrupts = <GIC_SPI 56 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 56 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c1";
@@ -356,7 +240,7 @@
 		i2c2: i2c@48072000 {
 			compatible = "ti,omap4-i2c";
 			reg = <0x48072000 0x100>;
-			interrupts = <GIC_SPI 57 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 57 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c2";
@@ -365,7 +249,7 @@
 		i2c3: i2c@48060000 {
 			compatible = "ti,omap4-i2c";
 			reg = <0x48060000 0x100>;
-			interrupts = <GIC_SPI 61 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 61 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c3";
@@ -374,7 +258,7 @@
 		i2c4: i2c@4807a000 {
 			compatible = "ti,omap4-i2c";
 			reg = <0x4807a000 0x100>;
-			interrupts = <GIC_SPI 62 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 62 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c4";
@@ -383,23 +267,16 @@
 		i2c5: i2c@4807c000 {
 			compatible = "ti,omap4-i2c";
 			reg = <0x4807c000 0x100>;
-			interrupts = <GIC_SPI 60 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 60 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "i2c5";
 		};
 
-		hwspinlock: spinlock@4a0f6000 {
-			compatible = "ti,omap4-hwspinlock";
-			reg = <0x4a0f6000 0x1000>;
-			ti,hwmods = "spinlock";
-			#hwlock-cells = <1>;
-		};
-
 		mcspi1: spi@48098000 {
 			compatible = "ti,omap4-mcspi";
 			reg = <0x48098000 0x200>;
-			interrupts = <GIC_SPI 65 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 65 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi1";
@@ -419,7 +296,7 @@
 		mcspi2: spi@4809a000 {
 			compatible = "ti,omap4-mcspi";
 			reg = <0x4809a000 0x200>;
-			interrupts = <GIC_SPI 66 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 66 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi2";
@@ -434,7 +311,7 @@
 		mcspi3: spi@480b8000 {
 			compatible = "ti,omap4-mcspi";
 			reg = <0x480b8000 0x200>;
-			interrupts = <GIC_SPI 91 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 91 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi3";
@@ -446,7 +323,7 @@
 		mcspi4: spi@480ba000 {
 			compatible = "ti,omap4-mcspi";
 			reg = <0x480ba000 0x200>;
-			interrupts = <GIC_SPI 48 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 48 0x4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			ti,hwmods = "mcspi4";
@@ -458,7 +335,7 @@
 		uart1: serial@4806a000 {
 			compatible = "ti,omap4-uart";
 			reg = <0x4806a000 0x100>;
-			interrupts-extended = <&gic GIC_SPI 72 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 72 0x4>;
 			ti,hwmods = "uart1";
 			clock-frequency = <48000000>;
 		};
@@ -466,7 +343,7 @@
 		uart2: serial@4806c000 {
 			compatible = "ti,omap4-uart";
 			reg = <0x4806c000 0x100>;
-			interrupts-extended = <&gic GIC_SPI 73 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 73 0x4>;
 			ti,hwmods = "uart2";
 			clock-frequency = <48000000>;
 		};
@@ -474,7 +351,7 @@
 		uart3: serial@48020000 {
 			compatible = "ti,omap4-uart";
 			reg = <0x48020000 0x100>;
-			interrupts-extended = <&gic GIC_SPI 74 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 74 0x4>;
 			ti,hwmods = "uart3";
 			clock-frequency = <48000000>;
 		};
@@ -482,7 +359,7 @@
 		uart4: serial@4806e000 {
 			compatible = "ti,omap4-uart";
 			reg = <0x4806e000 0x100>;
-			interrupts-extended = <&gic GIC_SPI 70 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 70 0x4>;
 			ti,hwmods = "uart4";
 			clock-frequency = <48000000>;
 		};
@@ -490,7 +367,7 @@
 		uart5: serial@48066000 {
 			compatible = "ti,omap4-uart";
 			reg = <0x48066000 0x100>;
-			interrupts-extended = <&gic GIC_SPI 105 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 105 0x4>;
 			ti,hwmods = "uart5";
 			clock-frequency = <48000000>;
 		};
@@ -498,7 +375,7 @@
 		uart6: serial@48068000 {
 			compatible = "ti,omap4-uart";
 			reg = <0x48068000 0x100>;
-			interrupts-extended = <&gic GIC_SPI 106 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 106 0x4>;
 			ti,hwmods = "uart6";
 			clock-frequency = <48000000>;
 		};
@@ -506,19 +383,18 @@
 		mmc1: mmc@4809c000 {
 			compatible = "ti,omap4-hsmmc";
 			reg = <0x4809c000 0x400>;
-			interrupts = <GIC_SPI 83 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 83 0x4>;
 			ti,hwmods = "mmc1";
 			ti,dual-volt;
 			ti,needs-special-reset;
 			dmas = <&sdma 61>, <&sdma 62>;
 			dma-names = "tx", "rx";
-			pbias-supply = <&pbias_mmc_reg>;
 		};
 
 		mmc2: mmc@480b4000 {
 			compatible = "ti,omap4-hsmmc";
 			reg = <0x480b4000 0x400>;
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 			ti,hwmods = "mmc2";
 			ti,needs-special-reset;
 			dmas = <&sdma 47>, <&sdma 48>;
@@ -528,7 +404,7 @@
 		mmc3: mmc@480ad000 {
 			compatible = "ti,omap4-hsmmc";
 			reg = <0x480ad000 0x400>;
-			interrupts = <GIC_SPI 94 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 94 0x4>;
 			ti,hwmods = "mmc3";
 			ti,needs-special-reset;
 			dmas = <&sdma 77>, <&sdma 78>;
@@ -538,7 +414,7 @@
 		mmc4: mmc@480d1000 {
 			compatible = "ti,omap4-hsmmc";
 			reg = <0x480d1000 0x400>;
-			interrupts = <GIC_SPI 96 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 96 0x4>;
 			ti,hwmods = "mmc4";
 			ti,needs-special-reset;
 			dmas = <&sdma 57>, <&sdma 58>;
@@ -548,28 +424,13 @@
 		mmc5: mmc@480d5000 {
 			compatible = "ti,omap4-hsmmc";
 			reg = <0x480d5000 0x400>;
-			interrupts = <GIC_SPI 59 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 59 0x4>;
 			ti,hwmods = "mmc5";
 			ti,needs-special-reset;
 			dmas = <&sdma 59>, <&sdma 60>;
 			dma-names = "tx", "rx";
 		};
 
-		mmu_dsp: mmu@4a066000 {
-			compatible = "ti,omap4-iommu";
-			reg = <0x4a066000 0x100>;
-			interrupts = <GIC_SPI 28 IRQ_TYPE_LEVEL_HIGH>;
-			ti,hwmods = "mmu_dsp";
-		};
-
-		mmu_ipu: mmu@55082000 {
-			compatible = "ti,omap4-iommu";
-			reg = <0x55082000 0x100>;
-			interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH>;
-			ti,hwmods = "mmu_ipu";
-			ti,iommu-bus-err-back;
-		};
-
 		keypad: keypad@4ae1c000 {
 			compatible = "ti,omap4-keypad";
 			reg = <0x4ae1c000 0x400>;
@@ -581,12 +442,11 @@
 			reg = <0x40132000 0x7f>, /* MPU private access */
 			      <0x49032000 0x7f>; /* L3 Interconnect */
 			reg-names = "mpu", "dma";
-			interrupts = <GIC_SPI 112 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 112 0x4>;
 			ti,hwmods = "mcpdm";
 			dmas = <&sdma 65>,
 			       <&sdma 66>;
 			dma-names = "up_link", "dn_link";
-			status = "disabled";
 		};
 
 		dmic: dmic@4012e000 {
@@ -594,11 +454,10 @@
 			reg = <0x4012e000 0x7f>, /* MPU private access */
 			      <0x4902e000 0x7f>; /* L3 Interconnect */
 			reg-names = "mpu", "dma";
-			interrupts = <GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 114 0x4>;
 			ti,hwmods = "dmic";
 			dmas = <&sdma 67>;
 			dma-names = "up_link";
-			status = "disabled";
 		};
 
 		mcbsp1: mcbsp@40122000 {
@@ -606,14 +465,13 @@
 			reg = <0x40122000 0xff>, /* MPU private access */
 			      <0x49022000 0xff>; /* L3 Interconnect */
 			reg-names = "mpu", "dma";
-			interrupts = <GIC_SPI 17 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 17 0x4>;
 			interrupt-names = "common";
 			ti,buffer-size = <128>;
 			ti,hwmods = "mcbsp1";
 			dmas = <&sdma 33>,
 			       <&sdma 34>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp2: mcbsp@40124000 {
@@ -621,14 +479,13 @@
 			reg = <0x40124000 0xff>, /* MPU private access */
 			      <0x49024000 0xff>; /* L3 Interconnect */
 			reg-names = "mpu", "dma";
-			interrupts = <GIC_SPI 22 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 22 0x4>;
 			interrupt-names = "common";
 			ti,buffer-size = <128>;
 			ti,hwmods = "mcbsp2";
 			dmas = <&sdma 17>,
 			       <&sdma 18>;
 			dma-names = "tx", "rx";
-			status = "disabled";
 		};
 
 		mcbsp3: mcbsp@40126000 {
@@ -636,38 +493,19 @@
 			reg = <0x40126000 0xff>, /* MPU private access */
 			      <0x49026000 0xff>; /* L3 Interconnect */
 			reg-names = "mpu", "dma";
-			interrupts = <GIC_SPI 23 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 23 0x4>;
 			interrupt-names = "common";
 			ti,buffer-size = <128>;
 			ti,hwmods = "mcbsp3";
 			dmas = <&sdma 19>,
 			       <&sdma 20>;
 			dma-names = "tx", "rx";
-			status = "disabled";
-		};
-
-		mailbox: mailbox@4a0f4000 {
-			compatible = "ti,omap4-mailbox";
-			reg = <0x4a0f4000 0x200>;
-			interrupts = <GIC_SPI 26 IRQ_TYPE_LEVEL_HIGH>;
-			ti,hwmods = "mailbox";
-			#mbox-cells = <1>;
-			ti,mbox-num-users = <3>;
-			ti,mbox-num-fifos = <8>;
-			mbox_ipu: mbox_ipu {
-				ti,mbox-tx = <0 0 0>;
-				ti,mbox-rx = <1 0 0>;
-			};
-			mbox_dsp: mbox_dsp {
-				ti,mbox-tx = <3 0 0>;
-				ti,mbox-rx = <2 0 0>;
-			};
 		};
 
 		timer1: timer@4ae18000 {
 			compatible = "ti,omap5430-timer";
 			reg = <0x4ae18000 0x80>;
-			interrupts = <GIC_SPI 37 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 37 0x4>;
 			ti,hwmods = "timer1";
 			ti,timer-alwon;
 		};
@@ -675,21 +513,21 @@
 		timer2: timer@48032000 {
 			compatible = "ti,omap5430-timer";
 			reg = <0x48032000 0x80>;
-			interrupts = <GIC_SPI 38 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 38 0x4>;
 			ti,hwmods = "timer2";
 		};
 
 		timer3: timer@48034000 {
 			compatible = "ti,omap5430-timer";
 			reg = <0x48034000 0x80>;
-			interrupts = <GIC_SPI 39 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 39 0x4>;
 			ti,hwmods = "timer3";
 		};
 
 		timer4: timer@48036000 {
 			compatible = "ti,omap5430-timer";
 			reg = <0x48036000 0x80>;
-			interrupts = <GIC_SPI 40 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 40 0x4>;
 			ti,hwmods = "timer4";
 		};
 
@@ -697,7 +535,7 @@
 			compatible = "ti,omap5430-timer";
 			reg = <0x40138000 0x80>,
 			      <0x49038000 0x80>;
-			interrupts = <GIC_SPI 41 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 41 0x4>;
 			ti,hwmods = "timer5";
 			ti,timer-dsp;
 			ti,timer-pwm;
@@ -707,7 +545,7 @@
 			compatible = "ti,omap5430-timer";
 			reg = <0x4013a000 0x80>,
 			      <0x4903a000 0x80>;
-			interrupts = <GIC_SPI 42 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 42 0x4>;
 			ti,hwmods = "timer6";
 			ti,timer-dsp;
 			ti,timer-pwm;
@@ -717,7 +555,7 @@
 			compatible = "ti,omap5430-timer";
 			reg = <0x4013c000 0x80>,
 			      <0x4903c000 0x80>;
-			interrupts = <GIC_SPI 43 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 43 0x4>;
 			ti,hwmods = "timer7";
 			ti,timer-dsp;
 		};
@@ -726,7 +564,7 @@
 			compatible = "ti,omap5430-timer";
 			reg = <0x4013e000 0x80>,
 			      <0x4903e000 0x80>;
-			interrupts = <GIC_SPI 44 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 44 0x4>;
 			ti,hwmods = "timer8";
 			ti,timer-dsp;
 			ti,timer-pwm;
@@ -735,7 +573,7 @@
 		timer9: timer@4803e000 {
 			compatible = "ti,omap5430-timer";
 			reg = <0x4803e000 0x80>;
-			interrupts = <GIC_SPI 45 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 45 0x4>;
 			ti,hwmods = "timer9";
 			ti,timer-pwm;
 		};
@@ -743,7 +581,7 @@
 		timer10: timer@48086000 {
 			compatible = "ti,omap5430-timer";
 			reg = <0x48086000 0x80>;
-			interrupts = <GIC_SPI 46 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 46 0x4>;
 			ti,hwmods = "timer10";
 			ti,timer-pwm;
 		};
@@ -751,7 +589,7 @@
 		timer11: timer@48088000 {
 			compatible = "ti,omap5430-timer";
 			reg = <0x48088000 0x80>;
-			interrupts = <GIC_SPI 47 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 47 0x4>;
 			ti,hwmods = "timer11";
 			ti,timer-pwm;
 		};
@@ -759,87 +597,68 @@
 		wdt2: wdt@4ae14000 {
 			compatible = "ti,omap5-wdt", "ti,omap3-wdt";
 			reg = <0x4ae14000 0x80>;
-			interrupts = <GIC_SPI 80 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 80 0x4>;
 			ti,hwmods = "wd_timer2";
 		};
 
-		dmm@4e000000 {
-			compatible = "ti,omap5-dmm";
-			reg = <0x4e000000 0x800>;
-			interrupts = <0 113 0x4>;
-			ti,hwmods = "dmm";
-		};
-
-		emif1: emif@4c000000 {
+		emif1: emif@0x4c000000 {
 			compatible	= "ti,emif-4d5";
 			ti,hwmods	= "emif1";
-			ti,no-idle-on-init;
 			phy-type	= <2>; /* DDR PHY type: Intelli PHY */
 			reg = <0x4c000000 0x400>;
-			interrupts = <GIC_SPI 110 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 110 0x4>;
 			hw-caps-read-idle-ctrl;
 			hw-caps-ll-interface;
 			hw-caps-temp-alert;
 		};
 
-		emif2: emif@4d000000 {
+		emif2: emif@0x4d000000 {
 			compatible	= "ti,emif-4d5";
 			ti,hwmods	= "emif2";
-			ti,no-idle-on-init;
 			phy-type	= <2>; /* DDR PHY type: Intelli PHY */
 			reg = <0x4d000000 0x400>;
-			interrupts = <GIC_SPI 111 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 111 0x4>;
 			hw-caps-read-idle-ctrl;
 			hw-caps-ll-interface;
 			hw-caps-temp-alert;
 		};
 
-		omap_control_usb2phy: control-phy@4a002300 {
-			compatible = "ti,control-phy-usb2";
-			reg = <0x4a002300 0x4>;
-			reg-names = "power";
-		};
-
-		omap_control_usb3phy: control-phy@4a002370 {
-			compatible = "ti,control-phy-pipe3";
-			reg = <0x4a002370 0x4>;
-			reg-names = "power";
+		omap_control_usb: omap-control-usb@4a002300 {
+			compatible = "ti,omap-control-usb";
+			reg = <0x4a002300 0x4>,
+			      <0x4a002370 0x4>;
+			reg-names = "control_dev_conf", "phy_power_usb";
+			ti,type = <2>;
 		};
 
-		usb3: omap_dwc3@4a020000 {
+		omap_dwc3@4a020000 {
 			compatible = "ti,dwc3";
 			ti,hwmods = "usb_otg_ss";
-			reg = <0x4a020000 0x10000>;
-			interrupts = <GIC_SPI 93 IRQ_TYPE_LEVEL_HIGH>;
+			reg = <0x4a020000 0x1000>;
+			interrupts = <0 93 4>;
 			#address-cells = <1>;
 			#size-cells = <1>;
 			utmi-mode = <2>;
 			ranges;
 			dwc3@4a030000 {
-				compatible = "snps,dwc3";
-				reg = <0x4a030000 0x10000>;
-				interrupts = <GIC_SPI 92 IRQ_TYPE_LEVEL_HIGH>;
-				phys = <&usb2_phy>, <&usb3_phy>;
-				phy-names = "usb2-phy", "usb3-phy";
-				dr_mode = "peripheral";
+				compatible = "synopsys,dwc3";
+				reg = <0x4a030000 0x1000>;
+				interrupts = <0 92 4>;
+				usb-phy = <&usb2_phy>, <&usb3_phy>;
 				tx-fifo-resize;
 			};
 		};
 
-		ocp2scp@4a080000 {
+		ocp2scp {
 			compatible = "ti,omap-ocp2scp";
 			#address-cells = <1>;
 			#size-cells = <1>;
-			reg = <0x4a080000 0x20>;
 			ranges;
 			ti,hwmods = "ocp2scp1";
 			usb2_phy: usb2phy@4a084000 {
 				compatible = "ti,omap-usb2";
 				reg = <0x4a084000 0x7c>;
-				ctrl-module = <&omap_control_usb2phy>;
-				clocks = <&usb_phy_cm_clk32k>, <&usb_otg_ss_refclk960m>;
-				clock-names = "wkupclk", "refclk";
-				#phy-cells = <0>;
+				ctrl-module = <&omap_control_usb>;
 			};
 
 			usb3_phy: usb3phy@4a084400 {
@@ -848,239 +667,8 @@
 				      <0x4a084800 0x64>,
 				      <0x4a084c00 0x40>;
 				reg-names = "phy_rx", "phy_tx", "pll_ctrl";
-				ctrl-module = <&omap_control_usb3phy>;
-				clocks = <&usb_phy_cm_clk32k>,
-					 <&sys_clkin>,
-					 <&usb_otg_ss_refclk960m>;
-				clock-names =	"wkupclk",
-						"sysclk",
-						"refclk";
-				#phy-cells = <0>;
-			};
-		};
-
-		usbhstll: usbhstll@4a062000 {
-			compatible = "ti,usbhs-tll";
-			reg = <0x4a062000 0x1000>;
-			interrupts = <GIC_SPI 78 IRQ_TYPE_LEVEL_HIGH>;
-			ti,hwmods = "usb_tll_hs";
-		};
-
-		usbhshost: usbhshost@4a064000 {
-			compatible = "ti,usbhs-host";
-			reg = <0x4a064000 0x800>;
-			ti,hwmods = "usb_host_hs";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges;
-			clocks = <&l3init_60m_fclk>,
-				 <&xclk60mhsp1_ck>,
-				 <&xclk60mhsp2_ck>;
-			clock-names = "refclk_60m_int",
-				      "refclk_60m_ext_p1",
-				      "refclk_60m_ext_p2";
-
-			usbhsohci: ohci@4a064800 {
-				compatible = "ti,ohci-omap3";
-				reg = <0x4a064800 0x400>;
-				interrupt-parent = <&gic>;
-				interrupts = <GIC_SPI 76 IRQ_TYPE_LEVEL_HIGH>;
-			};
-
-			usbhsehci: ehci@4a064c00 {
-				compatible = "ti,ehci-omap";
-				reg = <0x4a064c00 0x400>;
-				interrupt-parent = <&gic>;
-				interrupts = <GIC_SPI 77 IRQ_TYPE_LEVEL_HIGH>;
-			};
-		};
-
-		bandgap: bandgap@4a0021e0 {
-			reg = <0x4a0021e0 0xc
-			       0x4a00232c 0xc
-			       0x4a002380 0x2c
-			       0x4a0023C0 0x3c>;
-			interrupts = <GIC_SPI 126 IRQ_TYPE_LEVEL_HIGH>;
-			compatible = "ti,omap5430-bandgap";
-
-			#thermal-sensor-cells = <1>;
-		};
-
-		omap_control_sata: control-phy@4a002374 {
-			compatible = "ti,control-phy-pipe3";
-			reg = <0x4a002374 0x4>;
-			reg-names = "power";
-			clocks = <&sys_clkin>;
-			clock-names = "sysclk";
-		};
-
-		/* OCP2SCP3 */
-		ocp2scp@4a090000 {
-			compatible = "ti,omap-ocp2scp";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			reg = <0x4a090000 0x20>;
-			ranges;
-			ti,hwmods = "ocp2scp3";
-			sata_phy: phy@4a096000 {
-				compatible = "ti,phy-pipe3-sata";
-				reg = <0x4A096000 0x80>, /* phy_rx */
-				      <0x4A096400 0x64>, /* phy_tx */
-				      <0x4A096800 0x40>; /* pll_ctrl */
-				reg-names = "phy_rx", "phy_tx", "pll_ctrl";
-				ctrl-module = <&omap_control_sata>;
-				clocks = <&sys_clkin>, <&sata_ref_clk>;
-				clock-names = "sysclk", "refclk";
-				#phy-cells = <0>;
+				ctrl-module = <&omap_control_usb>;
 			};
 		};
-
-		sata: sata@4a141100 {
-			compatible = "snps,dwc-ahci";
-			reg = <0x4a140000 0x1100>, <0x4a141100 0x7>;
-			interrupts = <GIC_SPI 54 IRQ_TYPE_LEVEL_HIGH>;
-			phys = <&sata_phy>;
-			phy-names = "sata-phy";
-			clocks = <&sata_ref_clk>;
-			ti,hwmods = "sata";
-		};
-
-		dss: dss@58000000 {
-			compatible = "ti,omap5-dss";
-			reg = <0x58000000 0x80>;
-			status = "disabled";
-			ti,hwmods = "dss_core";
-			clocks = <&dss_dss_clk>;
-			clock-names = "fck";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges;
-
-			dispc@58001000 {
-				compatible = "ti,omap5-dispc";
-				reg = <0x58001000 0x1000>;
-				interrupts = <GIC_SPI 25 IRQ_TYPE_LEVEL_HIGH>;
-				ti,hwmods = "dss_dispc";
-				clocks = <&dss_dss_clk>;
-				clock-names = "fck";
-			};
-
-			rfbi: encoder@58002000  {
-				compatible = "ti,omap5-rfbi";
-				reg = <0x58002000 0x100>;
-				status = "disabled";
-				ti,hwmods = "dss_rfbi";
-				clocks = <&dss_dss_clk>, <&l3_iclk_div>;
-				clock-names = "fck", "ick";
-			};
-
-			dsi1: encoder@58004000 {
-				compatible = "ti,omap5-dsi";
-				reg = <0x58004000 0x200>,
-				      <0x58004200 0x40>,
-				      <0x58004300 0x40>;
-				reg-names = "proto", "phy", "pll";
-				interrupts = <GIC_SPI 53 IRQ_TYPE_LEVEL_HIGH>;
-				status = "disabled";
-				ti,hwmods = "dss_dsi1";
-				clocks = <&dss_dss_clk>, <&dss_sys_clk>;
-				clock-names = "fck", "sys_clk";
-			};
-
-			dsi2: encoder@58005000 {
-				compatible = "ti,omap5-dsi";
-				reg = <0x58009000 0x200>,
-				      <0x58009200 0x40>,
-				      <0x58009300 0x40>;
-				reg-names = "proto", "phy", "pll";
-				interrupts = <GIC_SPI 55 IRQ_TYPE_LEVEL_HIGH>;
-				status = "disabled";
-				ti,hwmods = "dss_dsi2";
-				clocks = <&dss_dss_clk>, <&dss_sys_clk>;
-				clock-names = "fck", "sys_clk";
-			};
-
-			hdmi: encoder@58060000 {
-				compatible = "ti,omap5-hdmi";
-				reg = <0x58040000 0x200>,
-				      <0x58040200 0x80>,
-				      <0x58040300 0x80>,
-				      <0x58060000 0x19000>;
-				reg-names = "wp", "pll", "phy", "core";
-				interrupts = <GIC_SPI 101 IRQ_TYPE_LEVEL_HIGH>;
-				status = "disabled";
-				ti,hwmods = "dss_hdmi";
-				clocks = <&dss_48mhz_clk>, <&dss_sys_clk>;
-				clock-names = "fck", "sys_clk";
-				dmas = <&sdma 76>;
-				dma-names = "audio_tx";
-			};
-		};
-
-		abb_mpu: regulator-abb-mpu {
-			compatible = "ti,abb-v2";
-			regulator-name = "abb_mpu";
-			#address-cells = <0>;
-			#size-cells = <0>;
-			clocks = <&sys_clkin>;
-			ti,settling-time = <50>;
-			ti,clock-cycles = <16>;
-
-			reg = <0x4ae07cdc 0x8>, <0x4ae06014 0x4>,
-			      <0x4a0021c4 0x8>, <0x4ae0c318 0x4>;
-			reg-names = "base-address", "int-address",
-				    "efuse-address", "ldo-address";
-			ti,tranxdone-status-mask = <0x80>;
-			/* LDOVBBMPU_MUX_CTRL */
-			ti,ldovbb-override-mask = <0x400>;
-			/* LDOVBBMPU_VSET_OUT */
-			ti,ldovbb-vset-mask = <0x1F>;
-
-			/*
-			 * NOTE: only FBB mode used but actual vset will
-			 * determine final biasing
-			 */
-			ti,abb_info = <
-			/*uV		ABB	efuse	rbb_m fbb_m	vset_m*/
-			1060000		0	0x0	0 0x02000000 0x01F00000
-			1250000		0	0x4	0 0x02000000 0x01F00000
-			>;
-		};
-
-		abb_mm: regulator-abb-mm {
-			compatible = "ti,abb-v2";
-			regulator-name = "abb_mm";
-			#address-cells = <0>;
-			#size-cells = <0>;
-			clocks = <&sys_clkin>;
-			ti,settling-time = <50>;
-			ti,clock-cycles = <16>;
-
-			reg = <0x4ae07ce4 0x8>, <0x4ae06010 0x4>,
-			      <0x4a0021a4 0x8>, <0x4ae0c314 0x4>;
-			reg-names = "base-address", "int-address",
-				    "efuse-address", "ldo-address";
-			ti,tranxdone-status-mask = <0x80000000>;
-			/* LDOVBBMM_MUX_CTRL */
-			ti,ldovbb-override-mask = <0x400>;
-			/* LDOVBBMM_VSET_OUT */
-			ti,ldovbb-vset-mask = <0x1F>;
-
-			/*
-			 * NOTE: only FBB mode used but actual vset will
-			 * determine final biasing
-			 */
-			ti,abb_info = <
-			/*uV		ABB	efuse	rbb_m fbb_m	vset_m*/
-			1025000		0	0x0	0 0x02000000 0x01F00000
-			1120000		0	0x4	0 0x02000000 0x01F00000
-			>;
-		};
 	};
 };
-
-&cpu_thermal {
-	polling-delay = <500>; /* milliseconds */
-};
-
-/include/ "omap54xx-clocks.dtsi"
diff -urNp a/arch/arm/boot/dts/orion5x-lacie-ethernet-disk-mini-v2.dts b/arch/arm/boot/dts/orion5x-lacie-ethernet-disk-mini-v2.dts
--- a/arch/arm/boot/dts/orion5x-lacie-ethernet-disk-mini-v2.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/orion5x-lacie-ethernet-disk-mini-v2.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,19 +6,8 @@
  * warranty of any kind, whether express or implied.
  */
 
-/*
- * TODO: add Orion USB device port init when kernel.org support is added.
- * TODO: add flash write support: see below.
- * TODO: add power-off support.
- * TODO: add I2C EEPROM support.
- */
-
 /dts-v1/;
-
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include "orion5x-mv88f5182.dtsi"
+/include/ "orion5x.dtsi"
 
 / {
 	model = "LaCie Ethernet Disk mini V2";
@@ -30,145 +19,37 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200n8 earlyprintk";
-		linux,stdout-path = &uart0;
 	};
 
-	soc {
-		ranges = <MBUS_ID(0xf0, 0x01) 0 0xf1000000 0x100000>,
-			 <MBUS_ID(0x09, 0x00) 0 0xf2200000 0x800>,
-			 <MBUS_ID(0x01, 0x0f) 0 0xfff80000 0x80000>;
+	ocp@f1000000 {
+		serial@12000 {
+			clock-frequency = <166666667>;
+			status = "okay";
+		};
+
+		sata@80000 {
+			status = "okay";
+			nr-ports = <2>;
+		};
 	};
 
-	gpio-keys {
+	gpio_keys {
 		compatible = "gpio-keys";
-		pinctrl-0 = <&pmx_power_button>;
-		pinctrl-names = "default";
 		#address-cells = <1>;
 		#size-cells = <0>;
 		button@1 {
 			label = "Power-on Switch";
-			linux,code = <KEY_POWER>;
-			gpios = <&gpio0 18 GPIO_ACTIVE_HIGH>;
+			linux,code = <116>; /* KEY_POWER */
+			gpios = <&gpio0 18 0>;
 		};
 	};
 
-	gpio-leds {
+	gpio_leds {
 		compatible = "gpio-leds";
-		pinctrl-0 = <&pmx_power_led>;
-		pinctrl-names = "default";
 
 		led@1 {
 			label = "power:blue";
-			gpios = <&gpio0 16 GPIO_ACTIVE_LOW>;
-		};
-	};
-};
-
-&devbus_bootcs {
-	status = "okay";
-
-	/* Read parameters */
-	devbus,bus-width    = <8>;
-	devbus,turn-off-ps  = <90000>;
-	devbus,badr-skew-ps = <0>;
-	devbus,acc-first-ps = <186000>;
-	devbus,acc-next-ps  = <186000>;
-
-	/* Write parameters */
-	devbus,wr-high-ps  = <90000>;
-	devbus,wr-low-ps   = <90000>;
-	devbus,ale-wr-ps   = <90000>;
-
-	/*
-	 * Currently the MTD code does not recognize the MX29LV400CBCT
-	 * as a bottom-type device. This could cause risks of
-	 * accidentally erasing critical flash sectors. We thus define
-	 * a single, write-protected partition covering the whole
-	 * flash.  TODO: once the flash part TOP/BOTTOM detection
-	 * issue is sorted out in the MTD code, break this into at
-	 * least three partitions: 'u-boot code', 'u-boot environment'
-	 * and 'whatever is left'.
-	 */
-	flash@0 {
-		compatible = "cfi-flash";
-		reg = <0 0x80000>;
-		bank-width = <1>;
-		#address-cells = <1>;
-		#size-cells = <1>;
-
-		partition@0 {
-			label = "Full512Kb";
-			reg = <0 0x80000>;
-			read-only;
+			gpios = <&gpio0 16 1>;
 		};
 	};
 };
-
-&ehci0 {
-	status = "okay";
-};
-
-&eth {
-	status = "okay";
-
-	ethernet-port@0 {
-		phy-handle = <&ethphy>;
-	};
-};
-
-&i2c {
-	status = "okay";
-	clock-frequency = <100000>;
-	#address-cells = <1>;
-
-	rtc@32 {
-		compatible = "ricoh,rs5c372a";
-		reg = <0x32>;
-		interrupt-parent = <&gpio0>;
-		interrupts = <3 IRQ_TYPE_LEVEL_LOW>;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	ethphy: ethernet-phy {
-		reg = <8>;
-	};
-};
-
-&pinctrl {
-	pinctrl-0 = <&pmx_rtc &pmx_power_led_ctrl>;
-	pinctrl-names = "default";
-
-	pmx_power_button: pmx-power-button {
-		marvell,pins = "mpp18";
-		marvell,function = "gpio";
-	};
-
-	pmx_power_led: pmx-power-led {
-		marvell,pins = "mpp16";
-		marvell,function = "gpio";
-	};
-
-	pmx_power_led_ctrl: pmx-power-led-ctrl {
-		marvell,pins = "mpp17";
-		marvell,function = "gpio";
-	};
-
-	pmx_rtc: pmx-rtc {
-		marvell,pins = "mpp3";
-		marvell,function = "gpio";
-	};
-};
-
-&sata {
-	pinctrl-0 = <&pmx_sata0 &pmx_sata1>;
-	pinctrl-names = "default";
-	status = "okay";
-	nr-ports = <2>;
-};
-
-&uart0 {
-	status = "okay";
-};
diff -urNp a/arch/arm/boot/dts/orion5x.dtsi b/arch/arm/boot/dts/orion5x.dtsi
--- a/arch/arm/boot/dts/orion5x.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/orion5x.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,9 +6,7 @@
  * warranty of any kind, whether express or implied.
  */
 
-#include "skeleton.dtsi"
-
-#define MBUS_ID(target,attributes) (((target) << 24) | ((attributes) << 16))
+/include/ "skeleton.dtsi"
 
 / {
 	model = "Marvell Orion5x SoC";
@@ -18,212 +16,118 @@
 	aliases {
 		gpio0 = &gpio0;
 	};
+	intc: interrupt-controller {
+		compatible = "marvell,orion-intc", "marvell,intc";
+		interrupt-controller;
+		#interrupt-cells = <1>;
+		reg = <0xf1020204 0x04>;
+	};
 
-	soc {
-		#address-cells = <2>;
+	ocp@f1000000 {
+		compatible = "simple-bus";
+		ranges = <0x00000000 0xf1000000 0x4000000
+		          0xf2200000 0xf2200000 0x0000800>;
+		#address-cells = <1>;
 		#size-cells = <1>;
-		controller = <&mbusc>;
 
-		devbus_bootcs: devbus-bootcs {
-			compatible = "marvell,orion-devbus";
-			reg = <MBUS_ID(0xf0, 0x01) 0x1046C 0x4>;
-			ranges = <0 MBUS_ID(0x01, 0x0f) 0 0xffffffff>;
-			#address-cells = <1>;
-			#size-cells = <1>;
-			clocks = <&core_clk 0>;
-			status = "disabled";
+		gpio0: gpio@10100 {
+			compatible = "marvell,orion-gpio";
+			#gpio-cells = <2>;
+			gpio-controller;
+			reg = <0x10100 0x40>;
+			ngpios = <32>;
+			interrupt-controller;
+			#interrupt-cells = <2>;
+			interrupts = <6>, <7>, <8>, <9>;
 		};
 
-		devbus_cs0: devbus-cs0 {
-			compatible = "marvell,orion-devbus";
-			reg = <MBUS_ID(0xf0, 0x01) 0x1045C 0x4>;
-			ranges = <0 MBUS_ID(0x01, 0x1e) 0 0xffffffff>;
-			#address-cells = <1>;
-			#size-cells = <1>;
-			clocks = <&core_clk 0>;
+		serial@12000 {
+			compatible = "ns16550a";
+			reg = <0x12000 0x100>;
+			reg-shift = <2>;
+			interrupts = <3>;
+			/* set clock-frequency in board dts */
 			status = "disabled";
 		};
 
-		devbus_cs1: devbus-cs1 {
-			compatible = "marvell,orion-devbus";
-			reg = <MBUS_ID(0xf0, 0x01) 0x10460 0x4>;
-			ranges = <0 MBUS_ID(0x01, 0x1d) 0 0xffffffff>;
-			#address-cells = <1>;
-			#size-cells = <1>;
-			clocks = <&core_clk 0>;
+		serial@12100 {
+			compatible = "ns16550a";
+			reg = <0x12100 0x100>;
+			reg-shift = <2>;
+			interrupts = <4>;
+			/* set clock-frequency in board dts */
 			status = "disabled";
 		};
 
-		devbus_cs2: devbus-cs2 {
-			compatible = "marvell,orion-devbus";
-			reg = <MBUS_ID(0xf0, 0x01) 0x10464 0x4>;
-			ranges = <0 MBUS_ID(0x01, 0x1b) 0 0xffffffff>;
+		spi@10600 {
+			compatible = "marvell,orion-spi";
 			#address-cells = <1>;
-			#size-cells = <1>;
-			clocks = <&core_clk 0>;
+			#size-cells = <0>;
+			cell-index = <0>;
+			reg = <0x10600 0x28>;
 			status = "disabled";
 		};
 
-		internal-regs {
-			compatible = "simple-bus";
-			#address-cells = <1>;
-			#size-cells = <1>;
-			ranges = <0 MBUS_ID(0xf0, 0x01) 0 0x100000>;
-
-			gpio0: gpio@10100 {
-				compatible = "marvell,orion-gpio";
-				#gpio-cells = <2>;
-				gpio-controller;
-				reg = <0x10100 0x40>;
-				ngpios = <32>;
-				interrupt-controller;
-				#interrupt-cells = <2>;
-				interrupts = <6>, <7>, <8>, <9>;
-			};
-
-			spi: spi@10600 {
-				compatible = "marvell,orion-spi";
-				#address-cells = <1>;
-				#size-cells = <0>;
-				cell-index = <0>;
-				reg = <0x10600 0x28>;
-				status = "disabled";
-			};
-
-			i2c: i2c@11000 {
-				compatible = "marvell,mv64xxx-i2c";
-				reg = <0x11000 0x20>;
-				#address-cells = <1>;
-				#size-cells = <0>;
-				interrupts = <5>;
-				clocks = <&core_clk 0>;
-				status = "disabled";
-			};
-
-			uart0: serial@12000 {
-				compatible = "ns16550a";
-				reg = <0x12000 0x100>;
-				reg-shift = <2>;
-				interrupts = <3>;
-				clocks = <&core_clk 0>;
-				status = "disabled";
-			};
-
-			uart1: serial@12100 {
-				compatible = "ns16550a";
-				reg = <0x12100 0x100>;
-				reg-shift = <2>;
-				interrupts = <4>;
-				clocks = <&core_clk 0>;
-				status = "disabled";
-			};
-
-			bridge_intc: bridge-interrupt-ctrl@20110 {
-				compatible = "marvell,orion-bridge-intc";
-				interrupt-controller;
-				#interrupt-cells = <1>;
-				reg = <0x20110 0x8>;
-				interrupts = <0>;
-				marvell,#interrupts = <4>;
-			};
-
-			intc: interrupt-controller@20200 {
-				compatible = "marvell,orion-intc";
-				interrupt-controller;
-				#interrupt-cells = <1>;
-				reg = <0x20200 0x08>;
-			};
-
-			timer: timer@20300 {
-				compatible = "marvell,orion-timer";
-				reg = <0x20300 0x20>;
-				interrupt-parent = <&bridge_intc>;
-				interrupts = <1>, <2>;
-				clocks = <&core_clk 0>;
-			};
-
-			wdt: wdt@20300 {
-				compatible = "marvell,orion-wdt";
-				reg = <0x20300 0x28>;
-				interrupt-parent = <&bridge_intc>;
-				interrupts = <3>;
-				status = "okay";
-			};
-
-			ehci0: ehci@50000 {
-				compatible = "marvell,orion-ehci";
-				reg = <0x50000 0x1000>;
-				interrupts = <17>;
-				status = "disabled";
-			};
+		wdt@20300 {
+			compatible = "marvell,orion-wdt";
+			reg = <0x20300 0x28>;
+			status = "okay";
+		};
 
-			xor: dma-controller@60900 {
-				compatible = "marvell,orion-xor";
-				reg = <0x60900 0x100
-				       0x60b00 0x100>;
-				status = "okay";
-
-				xor00 {
-				      interrupts = <30>;
-				      dmacap,memcpy;
-				      dmacap,xor;
-				};
-				xor01 {
-				      interrupts = <31>;
-				      dmacap,memcpy;
-				      dmacap,xor;
-				      dmacap,memset;
-				};
-			};
+		ehci@50000 {
+			compatible = "marvell,orion-ehci";
+			reg = <0x50000 0x1000>;
+			interrupts = <17>;
+			status = "disabled";
+		};
 
-			eth: ethernet-controller@72000 {
-				compatible = "marvell,orion-eth";
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <0x72000 0x4000>;
-				marvell,tx-checksum-limit = <1600>;
-				status = "disabled";
-
-				ethport: ethernet-port@0 {
-					compatible = "marvell,orion-eth-port";
-					reg = <0>;
-					interrupts = <21>;
-					/* overwrite MAC address in bootloader */
-					local-mac-address = [00 00 00 00 00 00];
-					/* set phy-handle property in board file */
-				};
-			};
+		ehci@a0000 {
+			compatible = "marvell,orion-ehci";
+			reg = <0xa0000 0x1000>;
+			interrupts = <12>;
+			status = "disabled";
+		};
 
-			mdio: mdio-bus@72004 {
-				compatible = "marvell,orion-mdio";
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <0x72004 0x84>;
-				interrupts = <22>;
-				status = "disabled";
+		sata@80000 {
+			compatible = "marvell,orion-sata";
+			reg = <0x80000 0x5000>;
+			interrupts = <29>;
+			status = "disabled";
+		};
 
-				/* add phy nodes in board file */
-			};
+		i2c@11000 {
+			compatible = "marvell,mv64xxx-i2c";
+			reg = <0x11000 0x20>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			interrupts = <5>;
+			clock-frequency = <100000>;
+			status = "disabled";
+		};
 
-			sata: sata@80000 {
-				compatible = "marvell,orion-sata";
-				reg = <0x80000 0x5000>;
-				interrupts = <29>;
-				status = "disabled";
-			};
+		xor@60900 {
+			compatible = "marvell,orion-xor";
+			reg = <0x60900 0x100
+			       0x60b00 0x100>;
+			status = "okay";
 
-			ehci1: ehci@a0000 {
-				compatible = "marvell,orion-ehci";
-				reg = <0xa0000 0x1000>;
-				interrupts = <12>;
-				status = "disabled";
+			xor00 {
+			      interrupts = <30>;
+			      dmacap,memcpy;
+			      dmacap,xor;
+			};
+			xor01 {
+			      interrupts = <31>;
+			      dmacap,memcpy;
+			      dmacap,xor;
+			      dmacap,memset;
 			};
 		};
 
-		cesa: crypto@90000 {
+		crypto@90000 {
 			compatible = "marvell,orion-crypto";
-			reg = <MBUS_ID(0xf0, 0x01) 0x90000 0x10000>,
-			      <MBUS_ID(0x09, 0x00) 0x0 0x800>;
+			reg = <0x90000 0x10000>,
+			      <0xf2200000 0x800>;
 			reg-names = "regs", "sram";
 			interrupts = <28>;
 			status = "okay";
diff -urNp a/arch/arm/boot/dts/picoxcell-pc3x2.dtsi b/arch/arm/boot/dts/picoxcell-pc3x2.dtsi
--- a/arch/arm/boot/dts/picoxcell-pc3x2.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/picoxcell-pc3x2.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -18,13 +18,13 @@
 	#size-cells = <1>;
 
 	cpus {
-		#address-cells = <0>;
+		#address-cells = <1>;
 		#size-cells = <0>;
 
-		cpu {
-			compatible = "arm,arm1176jz-s";
-			device_type = "cpu";
+		cpu@0 {
+			compatible = "arm,1176jz-s";
 			clock-frequency = <400000000>;
+			reg = <0>;
 			d-cache-line-size = <32>;
 			d-cache-size = <32768>;
 			i-cache-line-size = <32>;
diff -urNp a/arch/arm/boot/dts/picoxcell-pc3x3.dtsi b/arch/arm/boot/dts/picoxcell-pc3x3.dtsi
--- a/arch/arm/boot/dts/picoxcell-pc3x3.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/picoxcell-pc3x3.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -18,13 +18,13 @@
 	#size-cells = <1>;
 
 	cpus {
-		#address-cells = <0>;
+		#address-cells = <1>;
 		#size-cells = <0>;
 
-		cpu {
-			compatible = "arm,arm1176jz-s";
-			device_type = "cpu";
+		cpu@0 {
+			compatible = "arm,1176jz-s";
 			cpu-clock = <&arm_clk>, "cpu";
+			reg = <0>;
 			d-cache-line-size = <32>;
 			d-cache-size = <32768>;
 			i-cache-line-size = <32>;
diff -urNp a/arch/arm/boot/dts/pm9g45.dts b/arch/arm/boot/dts/pm9g45.dts
--- a/arch/arm/boot/dts/pm9g45.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/pm9g45.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2.
  */
 /dts-v1/;
-#include "at91sam9g45.dtsi"
+/include/ "at91sam9g45.dtsi"
 
 / {
 	model = "Ronetix pm9g45";
@@ -29,14 +29,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <12000000>;
 		};
-
-		slow_xtal {
-		      clock-frequency = <32768>;
-		};
-
-		main_xtal {
-		      clock-frequency = <12000000>;
-		};
 	};
 
 	ahb {
@@ -50,15 +42,15 @@
 				board {
 					pinctrl_board_nand: nand0-board {
 						atmel,pins =
-							<AT91_PIOD 3 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP	/* PD3 gpio RDY pin pull_up*/
-							 AT91_PIOC 14 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP>;	/* PC14 gpio enable pin pull_up */
+							<3 3 0x0 0x1	/* PD3 gpio RDY pin pull_up*/
+							 2 14 0x0 0x1>;	/* PC14 gpio enable pin pull_up */
 					};
 				};
 
 				mmc {
 					pinctrl_board_mmc: mmc0-board {
 						atmel,pins =
-							<AT91_PIOD 6 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>;	/* PD6 gpio CD pin pull_up and deglitch */
+							<3 6 0x0 0x5>;	/* PD6 gpio CD pin pull_up and deglitch */
 					};
 				};
 			};
@@ -72,7 +64,7 @@
 				slot@0 {
 					reg = <0>;
 					bus-width = <4>;
-					cd-gpios = <&pioD 6 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioD 6 0>;
 				};
 			};
 
@@ -89,8 +81,8 @@
 			nand-on-flash-bbt;
 			pinctrl-0 = <&pinctrl_board_nand>;
 
-			gpios = <&pioD 3 GPIO_ACTIVE_HIGH
-				 &pioC 14 GPIO_ACTIVE_HIGH
+			gpios = <&pioD 3 0
+				 &pioC 14 0
 				 0
 				>;
 
@@ -142,13 +134,13 @@
 
 		led0 {
 			label = "led0";
-			gpios = <&pioD 0 GPIO_ACTIVE_LOW>;
+			gpios = <&pioD 0 1>;
 			linux,default-trigger = "nand-disk";
 		};
 
 		led1 {
 			label = "led1";
-			gpios = <&pioD 31 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioD 31 0>;
 			linux,default-trigger = "heartbeat";
 		};
 	};
@@ -160,13 +152,13 @@
 
 		right {
 			label = "SW4";
-			gpios = <&pioE 7 GPIO_ACTIVE_LOW>;
+			gpios = <&pioE 7 1>;
 			linux,code = <106>;
 		};
 
 		up {
 			label = "SW3";
-			gpios = <&pioE 8 GPIO_ACTIVE_LOW>;
+			gpios = <&pioE 8 1>;
 			linux,code = <103>;
 		};
 	};
diff -urNp a/arch/arm/boot/dts/prima2.dtsi b/arch/arm/boot/dts/prima2.dtsi
--- a/arch/arm/boot/dts/prima2.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/prima2.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -18,8 +18,6 @@
 		#size-cells = <0>;
 
 		cpu@0 {
-			compatible = "arm,cortex-a9";
-			device_type = "cpu";
 			reg = <0x0>;
 			d-cache-line-size = <32>;
 			i-cache-line-size = <32>;
@@ -29,23 +27,9 @@
 			timebase-frequency = <0>;
 			bus-frequency = <0>;
 			clock-frequency = <0>;
-			clocks = <&clks 12>;
-			operating-points = <
-				/* kHz    uV */
-				200000  1025000
-				400000  1025000
-				664000  1050000
-				800000  1100000
-			>;
-			clock-latency = <150000>;
 		};
 	};
 
-	arm-pmu {
-		compatible = "arm,cortex-a9-pmu";
-		interrupts = <29>;
-	};
-
 	axi {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -53,7 +37,7 @@
 		ranges = <0x40000000 0x40000000 0x80000000>;
 
 		l2-cache-controller@80040000 {
-			compatible = "arm,pl310-cache";
+			compatible = "arm,pl310-cache", "sirf,prima2-pl310-cache";
 			reg = <0x80040000 0x1000>;
 			interrupts = <59>;
 			arm,tag-latency = <1 1 1>;
@@ -81,22 +65,15 @@
 				#clock-cells = <1>;
 			};
 
-			rstc: reset-controller@88010000 {
+			reset-controller@88010000 {
 				compatible = "sirf,prima2-rstc";
 				reg = <0x88010000 0x1000>;
-				#reset-cells = <1>;
 			};
 
 			rsc-controller@88020000 {
 				compatible = "sirf,prima2-rsc";
 				reg = <0x88020000 0x1000>;
 			};
-
-			cphifbg@88030000 {
-				compatible = "sirf,prima2-cphifbg";
-				reg = <0x88030000 0x1000>;
-				clocks = <&clks 42>;
-			};
 		};
 
 		mem-iobg {
@@ -107,17 +84,10 @@
 
 			memory-controller@90000000 {
 				compatible = "sirf,prima2-memc";
-				reg = <0x90000000 0x2000>;
+				reg = <0x90000000 0x10000>;
 				interrupts = <27>;
 				clocks = <&clks 5>;
 			};
-
-			memc-monitor {
-				compatible = "sirf,prima2-memcmon";
-				reg = <0x90002000 0x200>;
-				interrupts = <4>;
-				clocks = <&clks 32>;
-			};
 		};
 
 		disp-iobg {
@@ -137,7 +107,6 @@
 				reg = <0x90020000 0x10000>;
 				interrupts = <31>;
 				clocks = <&clks 35>;
-				resets = <&rstc 6>;
 			};
 		};
 
@@ -179,7 +148,6 @@
 				compatible = "sirf,prima2-dspif";
 				reg = <0xa8000000 0x10000>;
 				interrupts = <9>;
-				resets = <&rstc 1>;
 			};
 
 			gps@a8010000 {
@@ -187,7 +155,6 @@
 				reg = <0xa8010000 0x10000>;
 				interrupts = <7>;
 				clocks = <&clks 9>;
-				resets = <&rstc 2>;
 			};
 
 			dsp@a9000000 {
@@ -195,7 +162,6 @@
 				reg = <0xa9000000 0x1000000>;
 				interrupts = <8>;
 				clocks = <&clks 8>;
-				resets = <&rstc 0>;
 			};
 		};
 
@@ -203,14 +169,12 @@
 			compatible = "simple-bus";
 			#address-cells = <1>;
 			#size-cells = <1>;
-			ranges = <0xb0000000 0xb0000000 0x180000>,
-			       <0x56000000 0x56000000 0x1b00000>;
+			ranges = <0xb0000000 0xb0000000 0x180000>;
 
 			timer@b0020000 {
 				compatible = "sirf,prima2-tick";
 				reg = <0xb0020000 0x1000>;
 				interrupts = <0>;
-				clocks = <&clks 11>;
 			};
 
 			nand@b0030000 {
@@ -230,32 +194,25 @@
 			uart0: uart@b0050000 {
 				cell-index = <0>;
 				compatible = "sirf,prima2-uart";
-				reg = <0xb0050000 0x1000>;
+				reg = <0xb0050000 0x10000>;
 				interrupts = <17>;
-				fifosize = <128>;
 				clocks = <&clks 13>;
-				dmas = <&dmac1 5>, <&dmac0 2>;
-				dma-names = "rx", "tx";
 			};
 
 			uart1: uart@b0060000 {
 				cell-index = <1>;
 				compatible = "sirf,prima2-uart";
-				reg = <0xb0060000 0x1000>;
+				reg = <0xb0060000 0x10000>;
 				interrupts = <18>;
-				fifosize = <32>;
 				clocks = <&clks 14>;
 			};
 
 			uart2: uart@b0070000 {
 				cell-index = <2>;
 				compatible = "sirf,prima2-uart";
-				reg = <0xb0070000 0x1000>;
+				reg = <0xb0070000 0x10000>;
 				interrupts = <19>;
-				fifosize = <128>;
 				clocks = <&clks 15>;
-				dmas = <&dmac0 6>, <&dmac0 7>;
-				dma-names = "rx", "tx";
 			};
 
 			usp0: usp@b0080000 {
@@ -263,10 +220,7 @@
 				compatible = "sirf,prima2-usp";
 				reg = <0xb0080000 0x10000>;
 				interrupts = <20>;
-				fifosize = <128>;
 				clocks = <&clks 28>;
-				dmas = <&dmac1 1>, <&dmac1 2>;
-				dma-names = "rx", "tx";
 			};
 
 			usp1: usp@b0090000 {
@@ -274,10 +228,7 @@
 				compatible = "sirf,prima2-usp";
 				reg = <0xb0090000 0x10000>;
 				interrupts = <21>;
-				fifosize = <128>;
 				clocks = <&clks 29>;
-				dmas = <&dmac0 14>, <&dmac0 15>;
-				dma-names = "rx", "tx";
 			};
 
 			usp2: usp@b00a0000 {
@@ -285,10 +236,7 @@
 				compatible = "sirf,prima2-usp";
 				reg = <0xb00a0000 0x10000>;
 				interrupts = <22>;
-				fifosize = <128>;
 				clocks = <&clks 30>;
-				dmas = <&dmac0 10>, <&dmac0 11>;
-				dma-names = "rx", "tx";
 			};
 
 			dmac0: dma-controller@b00b0000 {
@@ -297,7 +245,6 @@
 				reg = <0xb00b0000 0x10000>;
 				interrupts = <12>;
 				clocks = <&clks 24>;
-				#dma-cells = <1>;
 			};
 
 			dmac1: dma-controller@b0160000 {
@@ -306,15 +253,12 @@
 				reg = <0xb0160000 0x10000>;
 				interrupts = <13>;
 				clocks = <&clks 25>;
-				#dma-cells = <1>;
 			};
 
 			vip@b00C0000 {
 				compatible = "sirf,prima2-vip";
 				reg = <0xb00C0000 0x10000>;
 				clocks = <&clks 31>;
-				interrupts = <14>;
-				sirf,vip-dma-rx-channel = <16>;
 			};
 
 			spi0: spi@b00d0000 {
@@ -322,14 +266,7 @@
 				compatible = "sirf,prima2-spi";
 				reg = <0xb00d0000 0x10000>;
 				interrupts = <15>;
-				sirf,spi-num-chipselects = <1>;
-				dmas = <&dmac1 9>,
-				     <&dmac1 4>;
-				dma-names = "rx", "tx";
-				#address-cells = <1>;
-				#size-cells = <0>;
 				clocks = <&clks 19>;
-				status = "disabled";
 			};
 
 			spi1: spi@b0170000 {
@@ -337,14 +274,7 @@
 				compatible = "sirf,prima2-spi";
 				reg = <0xb0170000 0x10000>;
 				interrupts = <16>;
-				sirf,spi-num-chipselects = <1>;
-				dmas = <&dmac0 12>,
-				     <&dmac0 13>;
-				dma-names = "rx", "tx";
-				#address-cells = <1>;
-				#size-cells = <0>;
 				clocks = <&clks 20>;
-				status = "disabled";
 			};
 
 			i2c0: i2c@b00e0000 {
@@ -353,8 +283,6 @@
 				reg = <0xb00e0000 0x10000>;
 				interrupts = <24>;
 				clocks = <&clks 17>;
-				#address-cells = <1>;
-				#size-cells = <0>;
 			};
 
 			i2c1: i2c@b00f0000 {
@@ -363,8 +291,6 @@
 				reg = <0xb00f0000 0x10000>;
 				interrupts = <25>;
 				clocks = <&clks 18>;
-				#address-cells = <1>;
-				#size-cells = <0>;
 			};
 
 			tsc@b0110000 {
@@ -413,12 +339,6 @@
 						sirf,function = "uart0";
 					};
 				};
-				uart0_noflow_pins_a: uart0@1 {
-					uart {
-						sirf,pins = "uart0_nostreamctrlgrp";
-						sirf,function = "uart0_nostreamctrl";
-					};
-				};
 				uart1_pins_a: uart1@0 {
 					uart {
 						sirf,pins = "uart1grp";
@@ -533,36 +453,12 @@
                                                 sirf,function = "sdmmc5";
                                         };
                                 };
-				i2s_mclk_pins_a: i2s_mclk@0 {
-                                        i2s_mclk {
-                                                sirf,pins = "i2smclkgrp";
-                                                sirf,function = "i2s_mclk";
-                                        };
-                                };
-				i2s_ext_clk_input_pins_a: i2s_ext_clk_input@0 {
-                                        i2s_ext_clk_input {
-                                                sirf,pins = "i2s_ext_clk_inputgrp";
-                                                sirf,function = "i2s_ext_clk_input";
-                                        };
-                                };
                                 i2s_pins_a: i2s@0 {
                                         i2s {
                                                 sirf,pins = "i2sgrp";
                                                 sirf,function = "i2s";
                                         };
                                 };
-				i2s_no_din_pins_a: i2s_no_din@0 {
-                                        i2s_no_din {
-                                                sirf,pins = "i2s_no_dingrp";
-                                                sirf,function = "i2s_no_din";
-                                        };
-                                };
-				i2s_6chn_pins_a: i2s_6chn@0 {
-                                        i2s_6chn {
-                                                sirf,pins = "i2s_6chngrp";
-                                                sirf,function = "i2s_6chn";
-                                        };
-                                };
                                 ac97_pins_a: ac97@0 {
                                         ac97 {
                                                 sirf,pins = "ac97grp";
@@ -581,54 +477,18 @@
                                                 sirf,function = "usp0";
                                         };
                                 };
-				usp0_uart_nostreamctrl_pins_a: usp0@1 {
-                                        usp0 {
-                                                sirf,pins =
-							"usp0_uart_nostreamctrl_grp";
-                                                sirf,function =
-							"usp0_uart_nostreamctrl";
-                                        };
-                                };
-                                usp0_only_utfs_pins_a: usp0@2 {
-                                        usp0 {
-                                                sirf,pins = "usp0_only_utfs_grp";
-                                                sirf,function = "usp0_only_utfs";
-                                        };
-                                };
-                                usp0_only_urfs_pins_a: usp0@3 {
-                                        usp0 {
-                                                sirf,pins = "usp0_only_urfs_grp";
-                                                sirf,function = "usp0_only_urfs";
-                                        };
-                                };
                                 usp1_pins_a: usp1@0 {
                                         usp1 {
                                                 sirf,pins = "usp1grp";
                                                 sirf,function = "usp1";
                                         };
                                 };
-				usp1_uart_nostreamctrl_pins_a: usp1@1 {
-                                        usp1 {
-                                                sirf,pins =
-							"usp1_uart_nostreamctrl_grp";
-                                                sirf,function =
-							"usp1_uart_nostreamctrl";
-                                        };
-                                };
                                 usp2_pins_a: usp2@0 {
                                         usp2 {
                                                 sirf,pins = "usp2grp";
                                                 sirf,function = "usp2";
                                         };
                                 };
-				usp2_uart_nostreamctrl_pins_a: usp2@1 {
-                                        usp2 {
-                                                sirf,pins =
-							"usp2_uart_nostreamctrl_grp";
-                                                sirf,function =
-							"usp2_uart_nostreamctrl";
-                                        };
-                                };
                                 usb0_utmi_drvbus_pins_a: usb0_utmi_drvbus@0 {
                                         usb0_utmi_drvbus {
                                                 sirf,pins = "usb0_utmi_drvbusgrp";
@@ -641,18 +501,6 @@
                                                 sirf,function = "usb1_utmi_drvbus";
                                         };
                                 };
-                                usb1_dp_dn_pins_a: usb1_dp_dn@0 {
-                                        usb1_dp_dn {
-                                                sirf,pins = "usb1_dp_dngrp";
-                                                sirf,function = "usb1_dp_dn";
-                                        };
-                                };
-                                uart1_route_io_usb1_pins_a: uart1_route_io_usb1@0 {
-                                        uart1_route_io_usb1 {
-                                                sirf,pins = "uart1_route_io_usb1grp";
-                                                sirf,function = "uart1_route_io_usb1";
-                                        };
-                                };
                                 warm_rst_pins_a: warm_rst@0 {
                                         warm_rst {
                                                 sirf,pins = "warm_rstgrp";
@@ -665,16 +513,16 @@
                                                 sirf,function = "pulse_count";
                                         };
                                 };
-                                cko0_pins_a: cko0@0 {
-                                        cko0 {
-                                                sirf,pins = "cko0grp";
-                                                sirf,function = "cko0";
+                                cko0_rst_pins_a: cko0_rst@0 {
+                                        cko0_rst {
+                                                sirf,pins = "cko0_rstgrp";
+                                                sirf,function = "cko0_rst";
                                         };
                                 };
-                                cko1_pins_a: cko1@0 {
-                                        cko1 {
-                                                sirf,pins = "cko1grp";
-                                                sirf,function = "cko1";
+                                cko1_rst_pins_a: cko1_rst@0 {
+                                        cko1_rst {
+                                                sirf,pins = "cko1_rstgrp";
+                                                sirf,function = "cko1_rst";
                                         };
                                 };
 			};
@@ -709,9 +557,6 @@
 					compatible = "sirf,prima2-sdhc";
 					reg = <0x56000000 0x100000>;
 					interrupts = <38>;
-					status = "disabled";
-					bus-width = <8>;
-					clocks = <&clks 36>;
 				};
 
 				sd1: sdhci@56100000 {
@@ -719,9 +564,6 @@
 					compatible = "sirf,prima2-sdhc";
 					reg = <0x56100000 0x100000>;
 					interrupts = <38>;
-					status = "disabled";
-					bus-width = <4>;
-					clocks = <&clks 36>;
 				};
 
 				sd2: sdhci@56200000 {
@@ -729,8 +571,6 @@
 					compatible = "sirf,prima2-sdhc";
 					reg = <0x56200000 0x100000>;
 					interrupts = <23>;
-					status = "disabled";
-					clocks = <&clks 37>;
 				};
 
 				sd3: sdhci@56300000 {
@@ -738,8 +578,6 @@
 					compatible = "sirf,prima2-sdhc";
 					reg = <0x56300000 0x100000>;
 					interrupts = <23>;
-					status = "disabled";
-					clocks = <&clks 37>;
 				};
 
 				sd4: sdhci@56400000 {
@@ -747,8 +585,6 @@
 					compatible = "sirf,prima2-sdhc";
 					reg = <0x56400000 0x100000>;
 					interrupts = <39>;
-					status = "disabled";
-					clocks = <&clks 38>;
 				};
 
 				sd5: sdhci@56500000 {
@@ -756,7 +592,6 @@
 					compatible = "sirf,prima2-sdhc";
 					reg = <0x56500000 0x100000>;
 					interrupts = <39>;
-					clocks = <&clks 38>;
 				};
 
 				pci-copy@57900000 {
@@ -773,7 +608,7 @@
 		};
 
 		rtc-iobg {
-			compatible = "sirf,prima2-rtciobg", "sirf-prima2-rtciobg-bus", "simple-bus";
+			compatible = "sirf,prima2-rtciobg", "sirf-prima2-rtciobg-bus";
 			#address-cells = <1>;
 			#size-cells = <1>;
 			reg = <0x80030000 0x10000>;
@@ -790,12 +625,6 @@
 				interrupts = <52 53 54>;
 			};
 
-			minigpsrtc@2000 {
-				compatible = "sirf,prima2-minigpsrtc";
-				reg = <0x2000 0x1000>;
-				interrupts = <54>;
-			};
-
 			pwrc@3000 {
 				compatible = "sirf,prima2-pwrc";
 				reg = <0x3000 0x1000>;
diff -urNp a/arch/arm/boot/dts/pxa168-aspenite.dts b/arch/arm/boot/dts/pxa168-aspenite.dts
--- a/arch/arm/boot/dts/pxa168-aspenite.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/pxa168-aspenite.dts	2015-10-27 00:45:05.000000000 +0000
@@ -8,7 +8,7 @@
  */
 
 /dts-v1/;
-#include "pxa168.dtsi"
+/include/ "pxa168.dtsi"
 
 / {
 	model = "Marvell PXA168 Aspenite Development Board";
diff -urNp a/arch/arm/boot/dts/pxa168.dtsi b/arch/arm/boot/dts/pxa168.dtsi
--- a/arch/arm/boot/dts/pxa168.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/pxa168.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,7 @@
  *  publishhed by the Free Software Foundation.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/clock/marvell,pxa168.h>
+/include/ "skeleton.dtsi"
 
 / {
 	aliases {
@@ -60,8 +59,6 @@
 				compatible = "mrvl,mmp-uart";
 				reg = <0xd4017000 0x1000>;
 				interrupts = <27>;
-				clocks = <&soc_clocks PXA168_CLK_UART0>;
-				resets = <&soc_clocks PXA168_CLK_UART0>;
 				status = "disabled";
 			};
 
@@ -69,8 +66,6 @@
 				compatible = "mrvl,mmp-uart";
 				reg = <0xd4018000 0x1000>;
 				interrupts = <28>;
-				clocks = <&soc_clocks PXA168_CLK_UART1>;
-				resets = <&soc_clocks PXA168_CLK_UART1>;
 				status = "disabled";
 			};
 
@@ -78,8 +73,6 @@
 				compatible = "mrvl,mmp-uart";
 				reg = <0xd4026000 0x1000>;
 				interrupts = <29>;
-				clocks = <&soc_clocks PXA168_CLK_UART2>;
-				resets = <&soc_clocks PXA168_CLK_UART2>;
 				status = "disabled";
 			};
 
@@ -91,8 +84,6 @@
 				gpio-controller;
 				#gpio-cells = <2>;
 				interrupts = <49>;
-				clocks = <&soc_clocks PXA168_CLK_GPIO>;
-				resets = <&soc_clocks PXA168_CLK_GPIO>;
 				interrupt-names = "gpio_mux";
 				interrupt-controller;
 				#interrupt-cells = <1>;
@@ -119,8 +110,6 @@
 				compatible = "mrvl,mmp-twsi";
 				reg = <0xd4011000 0x1000>;
 				interrupts = <7>;
-				clocks = <&soc_clocks PXA168_CLK_TWSI0>;
-				resets = <&soc_clocks PXA168_CLK_TWSI0>;
 				mrvl,i2c-fast-mode;
 				status = "disabled";
 			};
@@ -129,8 +118,6 @@
 				compatible = "mrvl,mmp-twsi";
 				reg = <0xd4025000 0x1000>;
 				interrupts = <58>;
-				clocks = <&soc_clocks PXA168_CLK_TWSI1>;
-				resets = <&soc_clocks PXA168_CLK_TWSI1>;
 				status = "disabled";
 			};
 
@@ -139,20 +126,8 @@
 				reg = <0xd4010000 0x1000>;
 				interrupts = <5 6>;
 				interrupt-names = "rtc 1Hz", "rtc alarm";
-				clocks = <&soc_clocks PXA168_CLK_RTC>;
-				resets = <&soc_clocks PXA168_CLK_RTC>;
 				status = "disabled";
 			};
 		};
-
-		soc_clocks: clocks{
-			compatible = "marvell,pxa168-clock";
-			reg = <0xd4050000 0x1000>,
-			      <0xd4282800 0x400>,
-			      <0xd4015000 0x1000>;
-			reg-names = "mpmu", "apmu", "apbc";
-			#clock-cells = <1>;
-			#reset-cells = <1>;
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/pxa27x.dtsi b/arch/arm/boot/dts/pxa27x.dtsi
--- a/arch/arm/boot/dts/pxa27x.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/pxa27x.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,5 @@
 /* The pxa3xx skeleton simply augments the 2xx version */
-#include "pxa2xx.dtsi"
-#include "dt-bindings/clock/pxa2xx-clock.h"
+/include/ "pxa2xx.dtsi"
 
 / {
 	model = "Marvell PXA27x familiy SoC";
@@ -11,46 +10,5 @@
 			marvell,intc-priority;
 			marvell,intc-nr-irqs = <34>;
 		};
-
-		pwm0: pwm@40b00000 {
-			compatible = "marvell,pxa270-pwm", "marvell,pxa250-pwm";
-			reg = <0x40b00000 0x10>;
-			#pwm-cells = <1>;
-		};
-
-		pwm1: pwm@40b00010 {
-			compatible = "marvell,pxa270-pwm", "marvell,pxa250-pwm";
-			reg = <0x40b00010 0x10>;
-			#pwm-cells = <1>;
-		};
-
-		pwm2: pwm@40c00000 {
-			compatible = "marvell,pxa270-pwm", "marvell,pxa250-pwm";
-			reg = <0x40c00000 0x10>;
-			#pwm-cells = <1>;
-		};
-
-		pwm3: pwm@40c00010 {
-			compatible = "marvell,pxa270-pwm", "marvell,pxa250-pwm";
-			reg = <0x40c00010 0x10>;
-			#pwm-cells = <1>;
-		};
-	};
-
-	clocks {
-	       /*
-		* The muxing of external clocks/internal dividers for osc* clock
-		* sources has been hidden under the carpet by now.
-		*/
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges;
-
-		pxa2xx_clks: pxa2xx_clks@41300004 {
-			compatible = "marvell,pxa-clocks";
-			#clock-cells = <1>;
-			status = "okay";
-		};
 	};
-
 };
diff -urNp a/arch/arm/boot/dts/pxa2xx.dtsi b/arch/arm/boot/dts/pxa2xx.dtsi
--- a/arch/arm/boot/dts/pxa2xx.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/pxa2xx.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -23,11 +23,8 @@
 	};
 
 	cpus {
-		#address-cells = <0>;
-		#size-cells = <0>;
-		cpu {
-			compatible = "marvell,xscale";
-			device_type = "cpu";
+		cpu@0 {
+			compatible = "arm,xscale";
 		};
 	};
 
@@ -113,14 +110,14 @@
 		};
 
 		usb0: ohci@4c000000 {
-			compatible = "marvell,pxa-ohci";
+			compatible = "mrvl,pxa-ohci";
 			reg = <0x4c000000 0x10000>;
 			interrupts = <3>;
 			status = "disabled";
 		};
 
 		mmc0: mmc@41100000 {
-			compatible = "marvell,pxa-mmc";
+			compatible = "mrvl,pxa-mmc";
 			reg = <0x41100000 0x1000>;
 			interrupts = <23>;
 			status = "disabled";
diff -urNp a/arch/arm/boot/dts/pxa3xx.dtsi b/arch/arm/boot/dts/pxa3xx.dtsi
--- a/arch/arm/boot/dts/pxa3xx.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/pxa3xx.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -28,16 +28,5 @@
 			marvell,intc-priority;
 			marvell,intc-nr-irqs = <56>;
 		};
-
-		gpio: gpio@40e00000 {
-			compatible = "intel,pxa3xx-gpio";
-			reg = <0x40e00000 0x10000>;
-			interrupt-names = "gpio0", "gpio1", "gpio_mux";
-			interrupts = <8 9 10>;
-			gpio-controller;
-			#gpio-cells = <0x2>;
-			interrupt-controller;
-			#interrupt-cells = <0x2>;
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/pxa910-dkb.dts b/arch/arm/boot/dts/pxa910-dkb.dts
--- a/arch/arm/boot/dts/pxa910-dkb.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/pxa910-dkb.dts	2015-10-27 00:45:05.000000000 +0000
@@ -8,7 +8,7 @@
  */
 
 /dts-v1/;
-#include "pxa910.dtsi"
+/include/ "pxa910.dtsi"
 
 / {
 	model = "Marvell PXA910 DKB Development Board";
diff -urNp a/arch/arm/boot/dts/pxa910.dtsi b/arch/arm/boot/dts/pxa910.dtsi
--- a/arch/arm/boot/dts/pxa910.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/pxa910.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -7,8 +7,7 @@
  *  publishhed by the Free Software Foundation.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/clock/marvell,pxa910.h>
+/include/ "skeleton.dtsi"
 
 / {
 	aliases {
@@ -72,8 +71,6 @@
 				compatible = "mrvl,mmp-uart";
 				reg = <0xd4017000 0x1000>;
 				interrupts = <27>;
-				clocks = <&soc_clocks PXA910_CLK_UART0>;
-				resets = <&soc_clocks PXA910_CLK_UART0>;
 				status = "disabled";
 			};
 
@@ -81,8 +78,6 @@
 				compatible = "mrvl,mmp-uart";
 				reg = <0xd4018000 0x1000>;
 				interrupts = <28>;
-				clocks = <&soc_clocks PXA910_CLK_UART1>;
-				resets = <&soc_clocks PXA910_CLK_UART1>;
 				status = "disabled";
 			};
 
@@ -90,8 +85,6 @@
 				compatible = "mrvl,mmp-uart";
 				reg = <0xd4036000 0x1000>;
 				interrupts = <59>;
-				clocks = <&soc_clocks PXA910_CLK_UART2>;
-				resets = <&soc_clocks PXA910_CLK_UART2>;
 				status = "disabled";
 			};
 
@@ -104,8 +97,6 @@
 				#gpio-cells = <2>;
 				interrupts = <49>;
 				interrupt-names = "gpio_mux";
-				clocks = <&soc_clocks PXA910_CLK_GPIO>;
-				resets = <&soc_clocks PXA910_CLK_GPIO>;
 				interrupt-controller;
 				#interrupt-cells = <1>;
 				ranges;
@@ -133,8 +124,6 @@
 				#size-cells = <0>;
 				reg = <0xd4011000 0x1000>;
 				interrupts = <7>;
-				clocks = <&soc_clocks PXA910_CLK_TWSI0>;
-				resets = <&soc_clocks PXA910_CLK_TWSI0>;
 				mrvl,i2c-fast-mode;
 				status = "disabled";
 			};
@@ -145,8 +134,6 @@
 				#size-cells = <0>;
 				reg = <0xd4037000 0x1000>;
 				interrupts = <54>;
-				clocks = <&soc_clocks PXA910_CLK_TWSI1>;
-				resets = <&soc_clocks PXA910_CLK_TWSI1>;
 				status = "disabled";
 			};
 
@@ -155,21 +142,8 @@
 				reg = <0xd4010000 0x1000>;
 				interrupts = <5 6>;
 				interrupt-names = "rtc 1Hz", "rtc alarm";
-				clocks = <&soc_clocks PXA910_CLK_RTC>;
-				resets = <&soc_clocks PXA910_CLK_RTC>;
 				status = "disabled";
 			};
 		};
-
-		soc_clocks: clocks{
-			compatible = "marvell,pxa910-clock";
-			reg = <0xd4050000 0x1000>,
-			      <0xd4282800 0x400>,
-			      <0xd4015000 0x1000>,
-			      <0xd403b000 0x1000>;
-			reg-names = "mpmu", "apmu", "apbc", "apbcp";
-			#clock-cells = <1>;
-			#reset-cells = <1>;
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/r8a73a4-ape6evm.dts b/arch/arm/boot/dts/r8a73a4-ape6evm.dts
--- a/arch/arm/boot/dts/r8a73a4-ape6evm.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/r8a73a4-ape6evm.dts	2015-10-27 00:45:05.000000000 +0000
@@ -9,21 +9,14 @@
  */
 
 /dts-v1/;
-#include "r8a73a4.dtsi"
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
+/include/ "r8a73a4.dtsi"
 
 / {
 	model = "APE6EVM";
 	compatible = "renesas,ape6evm", "renesas,r8a73a4";
 
-	aliases {
-		serial0 = &scifa0;
-	};
-
 	chosen {
-		bootargs = "console=ttySC0,115200 ignore_loglevel root=/dev/nfs ip=dhcp rw";
-		stdout-path = &scifa0;
+		bootargs = "console=ttySC0,115200 ignore_loglevel root=/dev/nfs ip=dhcp";
 	};
 
 	memory@40000000 {
@@ -31,40 +24,7 @@
 		reg = <0 0x40000000 0 0x40000000>;
 	};
 
-	memory@200000000 {
-		device_type = "memory";
-		reg = <2 0x00000000 0 0x40000000>;
-	};
-
-	vcc_mmc0: regulator@0 {
-		compatible = "regulator-fixed";
-		regulator-name = "MMC0 Vcc";
-		regulator-min-microvolt = <2800000>;
-		regulator-max-microvolt = <2800000>;
-		regulator-always-on;
-	};
-
-	vcc_sdhi0: regulator@1 {
-		compatible = "regulator-fixed";
-
-		regulator-name = "SDHI0 Vcc";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-
-		gpio = <&pfc 76 GPIO_ACTIVE_HIGH>;
-		enable-active-high;
-	};
-
-	/* Common 1.8V and 3.3V rails, used by several devices on APE6EVM */
-	ape6evm_fixed_1v8: regulator@2 {
-		compatible = "regulator-fixed";
-		regulator-name = "1V8";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <1800000>;
-		regulator-always-on;
-	};
-
-	ape6evm_fixed_3v3: regulator@3 {
+	ape6evm_fixed_3v3: fixedregulator@0 {
 		compatible = "regulator-fixed";
 		regulator-name = "3V3";
 		regulator-min-microvolt = <3300000>;
@@ -73,174 +33,20 @@
 	};
 
 	lbsc {
-		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <1>;
-		ranges = <0 0 0 0x20000000>;
 
 		ethernet@8000000 {
-			compatible = "smsc,lan9220", "smsc,lan9115";
+			compatible = "smsc,lan9118", "smsc,lan9115";
 			reg = <0x08000000 0x1000>;
 			interrupt-parent = <&irqc1>;
-			interrupts = <8 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <8 0x4>;
 			phy-mode = "mii";
 			reg-io-width = <4>;
 			smsc,irq-active-high;
 			smsc,irq-push-pull;
 			vdd33a-supply = <&ape6evm_fixed_3v3>;
-			vddvario-supply = <&ape6evm_fixed_1v8>;
-		};
-	};
-
-	leds {
-		compatible = "gpio-leds";
-		led1 {
-			gpios = <&pfc 28 GPIO_ACTIVE_LOW>;
-			label = "GNSS_EN";
-		};
-		led2 {
-			gpios = <&pfc 126 GPIO_ACTIVE_LOW>;
-			label = "NFC_NRST";
-		};
-		led3 {
-			gpios = <&pfc 132 GPIO_ACTIVE_LOW>;
-			label = "GNSS_NRST";
-		};
-		led4 {
-			gpios = <&pfc 232 GPIO_ACTIVE_LOW>;
-			label = "BT_WAKEUP";
-		};
-		led5 {
-			gpios = <&pfc 250 GPIO_ACTIVE_LOW>;
-			label = "STROBE";
-		};
-		led6 {
-			gpios = <&pfc 288 GPIO_ACTIVE_LOW>;
-			label = "BBRESETOUT";
-		};
-	};
-
-	keyboard {
-		compatible = "gpio-keys";
-
-		zero-key {
-			gpios = <&pfc 324 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_0>;
-			label = "S16";
-		};
-
-		menu-key {
-			gpios = <&pfc 325 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_MENU>;
-			label = "S17";
+			vddvario-supply = <&ape6evm_fixed_3v3>;
 		};
-
-		home-key {
-			gpios = <&pfc 326 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_HOME>;
-			label = "S18";
-		};
-
-		back-key {
-			gpios = <&pfc 327 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_BACK>;
-			label = "S19";
-		};
-
-		volup-key {
-			gpios = <&pfc 328 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_VOLUMEUP>;
-			label = "S20";
-		};
-
-		voldown-key {
-			gpios = <&pfc 329 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_VOLUMEDOWN>;
-			label = "S21";
-		};
-	};
-};
-
-&i2c5 {
-	status = "okay";
-	vdd_dvfs: max8973@1b {
-		compatible = "maxim,max8973";
-		reg = <0x1b>;
-
-		regulator-min-microvolt = <935000>;
-		regulator-max-microvolt = <1200000>;
-		regulator-boot-on;
-		regulator-always-on;
-	};
-};
-
-&cpu0 {
-	cpu0-supply = <&vdd_dvfs>;
-	operating-points = <
-		/* kHz  uV */
-		1950000 1115000
-		1462500  995000
-	>;
-	voltage-tolerance = <1>; /* 1% */
-};
-
-&cmt1 {
-	status = "okay";
-};
-
-&pfc {
-	scifa0_pins: serial0 {
-		renesas,groups = "scifa0_data";
-		renesas,function = "scifa0";
 	};
-
-	mmc0_pins: mmc {
-		renesas,groups = "mmc0_data8", "mmc0_ctrl";
-		renesas,function = "mmc0";
-	};
-
-	sdhi0_pins: sd0 {
-		renesas,groups = "sdhi0_data4", "sdhi0_ctrl", "sdhi0_cd";
-		renesas,function = "sdhi0";
-	};
-
-	sdhi1_pins: sd1 {
-		renesas,groups = "sdhi1_data4", "sdhi1_ctrl";
-		renesas,function = "sdhi1";
-	};
-};
-
-&mmcif0 {
-	vmmc-supply = <&vcc_mmc0>;
-	bus-width = <8>;
-	non-removable;
-	pinctrl-names = "default";
-	pinctrl-0 = <&mmc0_pins>;
-	status = "okay";
-};
-
-&scifa0 {
-	pinctrl-0 = <&scifa0_pins>;
-	pinctrl-names = "default";
-
-	status = "okay";
-};
-
-&sdhi0 {
-	vmmc-supply = <&vcc_sdhi0>;
-	bus-width = <4>;
-	toshiba,mmc-wrprotect-disable;
-	pinctrl-names = "default";
-	pinctrl-0 = <&sdhi0_pins>;
-	status = "okay";
-};
-
-&sdhi1 {
-	vmmc-supply = <&ape6evm_fixed_3v3>;
-	bus-width = <4>;
-	broken-cd;
-	toshiba,mmc-wrprotect-disable;
-	pinctrl-names = "default";
-	pinctrl-0 = <&sdhi1_pins>;
-	status = "okay";
 };
diff -urNp a/arch/arm/boot/dts/r8a73a4.dtsi b/arch/arm/boot/dts/r8a73a4.dtsi
--- a/arch/arm/boot/dts/r8a73a4.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/r8a73a4.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -9,9 +9,6 @@
  * kind, whether express or implied.
  */
 
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-
 / {
 	compatible = "renesas,r8a73a4";
 	interrupt-parent = <&gic>;
@@ -30,351 +27,68 @@
 		};
 	};
 
-	timer {
-		compatible = "arm,armv7-timer";
-		interrupts = <1 13 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
-			     <1 14 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
-			     <1 11 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
-			     <1 10 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>;
-	};
-
-	dbsc1: memory-controller@e6790000 {
-		compatible = "renesas,dbsc-r8a73a4";
-		reg = <0 0xe6790000 0 0x10000>;
-	};
-
-	dbsc2: memory-controller@e67a0000 {
-		compatible = "renesas,dbsc-r8a73a4";
-		reg = <0 0xe67a0000 0 0x10000>;
-	};
-
-	dmac: dma-multiplexer {
-		compatible = "renesas,shdma-mux";
-		#dma-cells = <1>;
-		dma-channels = <20>;
-		dma-requests = <256>;
-		#address-cells = <2>;
-		#size-cells = <2>;
-		ranges;
+	gic: interrupt-controller@f1001000 {
+		compatible = "arm,cortex-a15-gic";
+		#interrupt-cells = <3>;
+		#address-cells = <0>;
+		interrupt-controller;
+		reg = <0 0xf1001000 0 0x1000>,
+			<0 0xf1002000 0 0x1000>,
+			<0 0xf1004000 0 0x2000>,
+			<0 0xf1006000 0 0x2000>;
+		interrupts = <1 9 0xf04>;
 
-		dma0: dma-controller@e6700020 {
-			compatible = "renesas,shdma-r8a73a4";
-			reg = <0 0xe6700020 0 0x89e0>;
-			interrupts = <0 220 IRQ_TYPE_LEVEL_HIGH
-					0 200 IRQ_TYPE_LEVEL_HIGH
-					0 201 IRQ_TYPE_LEVEL_HIGH
-					0 202 IRQ_TYPE_LEVEL_HIGH
-					0 203 IRQ_TYPE_LEVEL_HIGH
-					0 204 IRQ_TYPE_LEVEL_HIGH
-					0 205 IRQ_TYPE_LEVEL_HIGH
-					0 206 IRQ_TYPE_LEVEL_HIGH
-					0 207 IRQ_TYPE_LEVEL_HIGH
-					0 208 IRQ_TYPE_LEVEL_HIGH
-					0 209 IRQ_TYPE_LEVEL_HIGH
-					0 210 IRQ_TYPE_LEVEL_HIGH
-					0 211 IRQ_TYPE_LEVEL_HIGH
-					0 212 IRQ_TYPE_LEVEL_HIGH
-					0 213 IRQ_TYPE_LEVEL_HIGH
-					0 214 IRQ_TYPE_LEVEL_HIGH
-					0 215 IRQ_TYPE_LEVEL_HIGH
-					0 216 IRQ_TYPE_LEVEL_HIGH
-					0 217 IRQ_TYPE_LEVEL_HIGH
-					0 218 IRQ_TYPE_LEVEL_HIGH
-					0 219 IRQ_TYPE_LEVEL_HIGH>;
-			interrupt-names = "error",
-					"ch0", "ch1", "ch2", "ch3",
-					"ch4", "ch5", "ch6", "ch7",
-					"ch8", "ch9", "ch10", "ch11",
-					"ch12", "ch13", "ch14", "ch15",
-					"ch16", "ch17", "ch18", "ch19";
+		gic-cpuif@4 {
+			compatible = "arm,gic-cpuif";
+			cpuif-id = <4>;
+			cpu = <&cpu0>;
 		};
 	};
 
-	pfc: pfc@e6050000 {
-		compatible = "renesas,pfc-r8a73a4";
-		reg = <0 0xe6050000 0 0x9000>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		interrupts-extended =
-			<&irqc0  0 0>, <&irqc0  1 0>, <&irqc0  2 0>, <&irqc0  3 0>,
-			<&irqc0  4 0>, <&irqc0  5 0>, <&irqc0  6 0>, <&irqc0  7 0>,
-			<&irqc0  8 0>, <&irqc0  9 0>, <&irqc0 10 0>, <&irqc0 11 0>,
-			<&irqc0 12 0>, <&irqc0 13 0>, <&irqc0 14 0>, <&irqc0 15 0>,
-			<&irqc0 16 0>, <&irqc0 17 0>, <&irqc0 18 0>, <&irqc0 19 0>,
-			<&irqc0 20 0>, <&irqc0 21 0>, <&irqc0 22 0>, <&irqc0 23 0>,
-			<&irqc0 24 0>, <&irqc0 25 0>, <&irqc0 26 0>, <&irqc0 27 0>,
-			<&irqc0 28 0>, <&irqc0 29 0>, <&irqc0 30 0>, <&irqc0 31 0>,
-			<&irqc1  0 0>, <&irqc1  1 0>, <&irqc1  2 0>, <&irqc1  3 0>,
-			<&irqc1  4 0>, <&irqc1  5 0>, <&irqc1  6 0>, <&irqc1  7 0>,
-			<&irqc1  8 0>, <&irqc1  9 0>, <&irqc1 10 0>, <&irqc1 11 0>,
-			<&irqc1 12 0>, <&irqc1 13 0>, <&irqc1 14 0>, <&irqc1 15 0>,
-			<&irqc1 16 0>, <&irqc1 17 0>, <&irqc1 18 0>, <&irqc1 19 0>,
-			<&irqc1 20 0>, <&irqc1 21 0>, <&irqc1 22 0>, <&irqc1 23 0>,
-			<&irqc1 24 0>, <&irqc1 25 0>;
-	};
-
-	i2c5: i2c@e60b0000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a73a4", "renesas,rmobile-iic";
-		reg = <0 0xe60b0000 0 0x428>;
-		interrupts = <0 179 IRQ_TYPE_LEVEL_HIGH>;
-
-		status = "disabled";
-	};
-
-	cmt1: timer@e6130000 {
-		compatible = "renesas,cmt-48-r8a73a4", "renesas,cmt-48-gen2";
-		reg = <0 0xe6130000 0 0x1004>;
-		interrupts = <0 120 IRQ_TYPE_LEVEL_HIGH>;
-
-		renesas,channels-mask = <0xff>;
-
-		status = "disabled";
+	timer {
+		compatible = "arm,armv7-timer";
+		interrupts = <1 13 0xf08>,
+				<1 14 0xf08>,
+				<1 11 0xf08>,
+				<1 10 0xf08>;
 	};
 
 	irqc0: interrupt-controller@e61c0000 {
-		compatible = "renesas,irqc-r8a73a4", "renesas,irqc";
+		compatible = "renesas,irqc";
 		#interrupt-cells = <2>;
 		interrupt-controller;
 		reg = <0 0xe61c0000 0 0x200>;
-		interrupts = <0 0 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 1 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 2 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 3 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 4 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 5 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 6 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 7 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 8 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 9 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 10 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 11 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 12 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 13 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 14 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 15 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 16 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 17 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 18 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 19 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 20 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 21 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 22 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 23 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 24 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 25 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 26 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 27 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 28 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 29 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 30 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 31 IRQ_TYPE_LEVEL_HIGH>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 0 4>, <0 1 4>, <0 2 4>,	<0 3 4>,
+				<0 4 4>, <0 5 4>, <0 6 4>, <0 7 4>,
+				<0 8 4>, <0 9 4>, <0 10 4>, <0 11 4>,
+				<0 12 4>, <0 13 4>, <0 14 4>, <0 15 4>,
+				<0 16 4>, <0 17 4>, <0 18 4>, <0 19 4>,
+				<0 20 4>, <0 21 4>, <0 22 4>, <0 23 4>,
+				<0 24 4>, <0 25 4>, <0 26 4>, <0 27 4>,
+				<0 28 4>, <0 29 4>, <0 30 4>, <0 31 4>;
 	};
 
 	irqc1: interrupt-controller@e61c0200 {
-		compatible = "renesas,irqc-r8a73a4", "renesas,irqc";
+		compatible = "renesas,irqc";
 		#interrupt-cells = <2>;
 		interrupt-controller;
 		reg = <0 0xe61c0200 0 0x200>;
-		interrupts = <0 32 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 33 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 34 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 35 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 36 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 37 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 38 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 39 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 40 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 41 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 42 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 43 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 44 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 45 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 46 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 47 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 48 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 49 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 50 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 51 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 52 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 53 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 54 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 55 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 56 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 57 IRQ_TYPE_LEVEL_HIGH>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 32 4>, <0 33 4>, <0 34 4>, <0 35 4>,
+				<0 36 4>, <0 37 4>, <0 38 4>, <0 39 4>,
+				<0 40 4>, <0 41 4>, <0 42 4>, <0 43 4>,
+				<0 44 4>, <0 45 4>, <0 46 4>, <0 47 4>,
+				<0 48 4>, <0 49 4>, <0 50 4>, <0 51 4>,
+				<0 52 4>, <0 53 4>, <0 54 4>, <0 55 4>,
+				<0 56 4>, <0 57 4>;
 	};
 
 	thermal@e61f0000 {
-		compatible = "renesas,thermal-r8a73a4", "renesas,rcar-thermal";
+		compatible = "renesas,rcar-thermal";
 		reg = <0 0xe61f0000 0 0x14>, <0 0xe61f0100 0 0x38>,
 			 <0 0xe61f0200 0 0x38>, <0 0xe61f0300 0 0x38>;
-		interrupts = <0 69 IRQ_TYPE_LEVEL_HIGH>;
-	};
-
-	i2c0: i2c@e6500000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a73a4", "renesas,rmobile-iic";
-		reg = <0 0xe6500000 0 0x428>;
-		interrupts = <0 174 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	i2c1: i2c@e6510000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a73a4", "renesas,rmobile-iic";
-		reg = <0 0xe6510000 0 0x428>;
-		interrupts = <0 175 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	i2c2: i2c@e6520000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a73a4", "renesas,rmobile-iic";
-		reg = <0 0xe6520000 0 0x428>;
-		interrupts = <0 176 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	i2c3: i2c@e6530000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a73a4", "renesas,rmobile-iic";
-		reg = <0 0xe6530000 0 0x428>;
-		interrupts = <0 177 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	i2c4: i2c@e6540000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a73a4", "renesas,rmobile-iic";
-		reg = <0 0xe6540000 0 0x428>;
-		interrupts = <0 178 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	i2c6: i2c@e6550000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a73a4", "renesas,rmobile-iic";
-		reg = <0 0xe6550000 0 0x428>;
-		interrupts = <0 184 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	i2c7: i2c@e6560000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a73a4", "renesas,rmobile-iic";
-		reg = <0 0xe6560000 0 0x428>;
-		interrupts = <0 185 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	i2c8: i2c@e6570000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a73a4", "renesas,rmobile-iic";
-		reg = <0 0xe6570000 0 0x428>;
-		interrupts = <0 173 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scifb0: serial@e6c20000 {
-		compatible = "renesas,scifb-r8a73a4", "renesas,scifb";
-		reg = <0 0xe6c20000 0 0x100>;
-		interrupts = <0 148 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scifb1: serial@e6c30000 {
-		compatible = "renesas,scifb-r8a73a4", "renesas,scifb";
-		reg = <0 0xe6c30000 0 0x100>;
-		interrupts = <0 149 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scifa0: serial@e6c40000 {
-		compatible = "renesas,scifa-r8a73a4", "renesas,scifa";
-		reg = <0 0xe6c40000 0 0x100>;
-		interrupts = <0 144 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scifa1: serial@e6c50000 {
-		compatible = "renesas,scifa-r8a73a4", "renesas,scifa";
-		reg = <0 0xe6c50000 0 0x100>;
-		interrupts = <0 145 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scifb2: serial@e6ce0000 {
-		compatible = "renesas,scifb-r8a73a4", "renesas,scifb";
-		reg = <0 0xe6ce0000 0 0x100>;
-		interrupts = <0 150 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scifb3: serial@e6cf0000 {
-		compatible = "renesas,scifb-r8a73a4", "renesas,scifb";
-		reg = <0 0xe6cf0000 0 0x100>;
-		interrupts = <0 151 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	sdhi0: sd@ee100000 {
-		compatible = "renesas,sdhi-r8a73a4";
-		reg = <0 0xee100000 0 0x100>;
-		interrupts = <0 165 IRQ_TYPE_LEVEL_HIGH>;
-		cap-sd-highspeed;
-		status = "disabled";
-	};
-
-	sdhi1: sd@ee120000 {
-		compatible = "renesas,sdhi-r8a73a4";
-		reg = <0 0xee120000 0 0x100>;
-		interrupts = <0 166 IRQ_TYPE_LEVEL_HIGH>;
-		cap-sd-highspeed;
-		status = "disabled";
-	};
-
-	sdhi2: sd@ee140000 {
-		compatible = "renesas,sdhi-r8a73a4";
-		reg = <0 0xee140000 0 0x100>;
-		interrupts = <0 167 IRQ_TYPE_LEVEL_HIGH>;
-		cap-sd-highspeed;
-		status = "disabled";
-	};
-
-	mmcif0: mmc@ee200000 {
-		compatible = "renesas,sh-mmcif";
-		reg = <0 0xee200000 0 0x80>;
-		interrupts = <0 169 IRQ_TYPE_LEVEL_HIGH>;
-		reg-io-width = <4>;
-		status = "disabled";
-	};
-
-	mmcif1: mmc@ee220000 {
-		compatible = "renesas,sh-mmcif";
-		reg = <0 0xee220000 0 0x80>;
-		interrupts = <0 170 IRQ_TYPE_LEVEL_HIGH>;
-		reg-io-width = <4>;
-		status = "disabled";
-	};
-
-	gic: interrupt-controller@f1001000 {
-		compatible = "arm,cortex-a15-gic";
-		#interrupt-cells = <3>;
-		#address-cells = <0>;
-		interrupt-controller;
-		reg = <0 0xf1001000 0 0x1000>,
-			<0 0xf1002000 0 0x1000>,
-			<0 0xf1004000 0 0x2000>,
-			<0 0xf1006000 0 0x2000>;
-		interrupts = <1 9 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_HIGH)>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 69 4>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/r8a7740-armadillo800eva.dts b/arch/arm/boot/dts/r8a7740-armadillo800eva.dts
--- a/arch/arm/boot/dts/r8a7740-armadillo800eva.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/r8a7740-armadillo800eva.dts	2015-10-27 00:45:05.000000000 +0000
@@ -9,297 +9,18 @@
  */
 
 /dts-v1/;
-#include "r8a7740.dtsi"
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/pwm/pwm.h>
+/include/ "r8a7740.dtsi"
 
 / {
 	model = "armadillo 800 eva";
-	compatible = "renesas,armadillo800eva", "renesas,r8a7740";
-
-	aliases {
-		serial1 = &scifa1;
-	};
+	compatible = "renesas,armadillo800eva";
 
 	chosen {
-		bootargs = "console=tty0 console=ttySC1,115200 earlyprintk=sh-sci.1,115200 ignore_loglevel root=/dev/nfs ip=dhcp rw";
-		stdout-path = &scifa1;
+		bootargs = "console=tty0 console=ttySC1,115200 earlyprintk=sh-sci.1,115200 ignore_loglevel root=/dev/nfs ip=dhcp nfsroot=,rsize=4096,wsize=4096 rw";
 	};
 
 	memory {
 		device_type = "memory";
 		reg = <0x40000000 0x20000000>;
 	};
-
-	reg_3p3v: regulator@0 {
-		compatible = "regulator-fixed";
-		regulator-name = "fixed-3.3V";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		regulator-always-on;
-		regulator-boot-on;
-	};
-
-	vcc_sdhi0: regulator@1 {
-		compatible = "regulator-fixed";
-
-		regulator-name = "SDHI0 Vcc";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-
-		gpio = <&pfc 75 GPIO_ACTIVE_HIGH>;
-		enable-active-high;
-	};
-
-	vccq_sdhi0: regulator@2 {
-		compatible = "regulator-gpio";
-
-		regulator-name = "SDHI0 VccQ";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <3300000>;
-		vin-supply = <&vcc_sdhi0>;
-
-		enable-gpio = <&pfc 74 GPIO_ACTIVE_HIGH>;
-		gpios = <&pfc 17 GPIO_ACTIVE_HIGH>;
-		states = <3300000 0
-			  1800000 1>;
-
-		enable-active-high;
-	};
-
-	reg_5p0v: regulator@3 {
-		compatible = "regulator-fixed";
-		regulator-name = "fixed-5.0V";
-		regulator-min-microvolt = <5000000>;
-		regulator-max-microvolt = <5000000>;
-		regulator-always-on;
-		regulator-boot-on;
-	};
-
-	keyboard {
-		compatible = "gpio-keys";
-
-		power-key {
-			gpios = <&pfc 99 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_POWER>;
-			label = "SW3";
-			gpio-key,wakeup;
-		};
-
-		back-key {
-			gpios = <&pfc 100 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_BACK>;
-			label = "SW4";
-		};
-
-		menu-key {
-			gpios = <&pfc 97 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_MENU>;
-			label = "SW5";
-		};
-
-		home-key {
-			gpios = <&pfc 98 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_HOME>;
-			label = "SW6";
-		};
-	};
-
-	leds {
-		compatible = "gpio-leds";
-		led3 {
-			gpios = <&pfc 102 GPIO_ACTIVE_HIGH>;
-			label = "LED3";
-		};
-		led4 {
-			gpios = <&pfc 111 GPIO_ACTIVE_HIGH>;
-			label = "LED4";
-		};
-		led5 {
-			gpios = <&pfc 110 GPIO_ACTIVE_HIGH>;
-			label = "LED5";
-		};
-		led6 {
-			gpios = <&pfc 177 GPIO_ACTIVE_HIGH>;
-			label = "LED6";
-		};
-	};
-
-	i2c2: i2c@2 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "i2c-gpio";
-		gpios = <&pfc 208 GPIO_ACTIVE_HIGH /* sda */
-			 &pfc 91 GPIO_ACTIVE_HIGH /* scl */
-			>;
-		i2c-gpio,delay-us = <5>;
-	};
-
-	backlight {
-		compatible = "pwm-backlight";
-		pwms = <&tpu 2 33333 PWM_POLARITY_INVERTED>;
-		brightness-levels = <0 1 2 4 8 16 32 64 128 255>;
-		default-brightness-level = <9>;
-		pinctrl-0 = <&backlight_pins>;
-		pinctrl-names = "default";
-		power-supply = <&reg_5p0v>;
-		enable-gpios = <&pfc 61 GPIO_ACTIVE_HIGH>;
-	};
-
-	sound {
-		compatible = "simple-audio-card";
-
-		simple-audio-card,format = "i2s";
-
-		simple-audio-card,cpu {
-			sound-dai = <&sh_fsi2 0>;
-			bitclock-inversion;
-		};
-
-		simple-audio-card,codec {
-			sound-dai = <&wm8978>;
-			bitclock-master;
-			frame-master;
-			system-clock-frequency = <12288000>;
-		};
-	};
-};
-
-&ether {
-	pinctrl-0 = <&ether_pins>;
-	pinctrl-names = "default";
-
-	phy-handle = <&phy0>;
-	status = "okay";
-
-	phy0: ethernet-phy@0 {
-		reg = <0>;
-	};
-};
-
-&extal1_clk {
-	clock-frequency = <25000000>;
-};
-&extal2_clk {
-	clock-frequency = <48000000>;
-};
-&fsibck_clk {
-	clock-frequency = <12288000>;
-};
-&cpg_clocks {
-	renesas,mode = <0x05>; /* MD_CK0 | MD_CK2 */
-};
-
-&cmt1 {
-	status = "okay";
-};
-
-&i2c0 {
-	status = "okay";
-	touchscreen@55 {
-		compatible = "sitronix,st1232";
-		reg = <0x55>;
-		interrupt-parent = <&irqpin1>;
-		interrupts = <2 IRQ_TYPE_LEVEL_LOW>;
-		pinctrl-0 = <&st1232_pins>;
-		pinctrl-names = "default";
-		gpios = <&pfc 166 GPIO_ACTIVE_LOW>;
-	};
-
-	wm8978: wm8978@1a {
-		#sound-dai-cells = <0>;
-		compatible = "wlf,wm8978";
-		reg = <0x1a>;
-	};
-};
-
-&i2c2 {
-	status = "okay";
-	rtc@30 {
-		compatible = "sii,s35390a";
-		reg = <0x30>;
-	};
-};
-
-&pfc {
-	ether_pins: ether {
-		renesas,groups = "gether_mii", "gether_int";
-		renesas,function = "gether";
-	};
-
-	scifa1_pins: serial1 {
-		renesas,groups = "scifa1_data";
-		renesas,function = "scifa1";
-	};
-
-	st1232_pins: touchscreen {
-		renesas,groups = "intc_irq10";
-		renesas,function = "intc";
-	};
-
-	backlight_pins: backlight {
-		renesas,groups = "tpu0_to2_1";
-		renesas,function = "tpu0";
-	};
-
-	mmc0_pins: mmc0 {
-		renesas,groups = "mmc0_data8_1", "mmc0_ctrl_1";
-		renesas,function = "mmc0";
-	};
-
-	sdhi0_pins: sd0 {
-		renesas,groups = "sdhi0_data4", "sdhi0_ctrl", "sdhi0_wp";
-		renesas,function = "sdhi0";
-	};
-
-	fsia_pins: sounda {
-		renesas,groups = "fsia_sclk_in", "fsia_mclk_out",
-				 "fsia_data_in_1", "fsia_data_out_0";
-		renesas,function = "fsia";
-	};
-};
-
-&tpu {
-	status = "okay";
-};
-
-&mmcif0 {
-	pinctrl-0 = <&mmc0_pins>;
-	pinctrl-names = "default";
-
-	vmmc-supply = <&reg_3p3v>;
-	bus-width = <8>;
-	non-removable;
-	status = "okay";
-};
-
-&scifa1 {
-	pinctrl-0 = <&scifa1_pins>;
-	pinctrl-names = "default";
-
-	status = "okay";
-};
-
-&sdhi0 {
-	pinctrl-0 = <&sdhi0_pins>;
-	pinctrl-names = "default";
-
-	vmmc-supply = <&vcc_sdhi0>;
-	vqmmc-supply = <&vccq_sdhi0>;
-	bus-width = <4>;
-	cd-gpios = <&pfc 167 GPIO_ACTIVE_LOW>;
-	status = "okay";
-};
-
-&sh_fsi2 {
-	pinctrl-0 = <&fsia_pins>;
-	pinctrl-names = "default";
-
-	status = "okay";
-};
-
-&tmu0 {
-	status = "okay";
 };
diff -urNp a/arch/arm/boot/dts/r8a7740.dtsi b/arch/arm/boot/dts/r8a7740.dtsi
--- a/arch/arm/boot/dts/r8a7740.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/r8a7740.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -10,642 +10,12 @@
 
 /include/ "skeleton.dtsi"
 
-#include <dt-bindings/clock/r8a7740-clock.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-
 / {
 	compatible = "renesas,r8a7740";
-	interrupt-parent = <&gic>;
 
 	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
 		cpu@0 {
 			compatible = "arm,cortex-a9";
-			device_type = "cpu";
-			reg = <0x0>;
-			clock-frequency = <800000000>;
-			power-domains = <&pd_a3sm>;
-		};
-	};
-
-	gic: interrupt-controller@c2800000 {
-		compatible = "arm,cortex-a9-gic";
-		#interrupt-cells = <3>;
-		interrupt-controller;
-		reg = <0xc2800000 0x1000>,
-		      <0xc2000000 0x1000>;
-	};
-
-	dbsc3: memory-controller@fe400000 {
-		compatible = "renesas,dbsc3-r8a7740";
-		reg = <0xfe400000 0x400>;
-		power-domains = <&pd_a4s>;
-	};
-
-	pmu {
-		compatible = "arm,cortex-a9-pmu";
-		interrupts = <0 83 IRQ_TYPE_LEVEL_HIGH>;
-	};
-
-	ptm {
-		compatible = "arm,coresight-etm3x";
-		power-domains = <&pd_d4>;
-	};
-
-	cmt1: timer@e6138000 {
-		compatible = "renesas,cmt-48-r8a7740", "renesas,cmt-48";
-		reg = <0xe6138000 0x170>;
-		interrupts = <0 58 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7740_CLK_CMT1>;
-		clock-names = "fck";
-		power-domains = <&pd_c5>;
-
-		renesas,channels-mask = <0x3f>;
-
-		status = "disabled";
-	};
-
-	/* irqpin0: IRQ0 - IRQ7 */
-	irqpin0: irqpin@e6900000 {
-		compatible = "renesas,intc-irqpin-r8a7740", "renesas,intc-irqpin";
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		reg = <0xe6900000 4>,
-			<0xe6900010 4>,
-			<0xe6900020 1>,
-			<0xe6900040 1>,
-			<0xe6900060 1>;
-		interrupts = <0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_INTCA>;
-		power-domains = <&pd_a4s>;
-	};
-
-	/* irqpin1: IRQ8 - IRQ15 */
-	irqpin1: irqpin@e6900004 {
-		compatible = "renesas,intc-irqpin-r8a7740", "renesas,intc-irqpin";
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		reg = <0xe6900004 4>,
-			<0xe6900014 4>,
-			<0xe6900024 1>,
-			<0xe6900044 1>,
-			<0xe6900064 1>;
-		interrupts = <0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_INTCA>;
-		power-domains = <&pd_a4s>;
-	};
-
-	/* irqpin2: IRQ16 - IRQ23 */
-	irqpin2: irqpin@e6900008 {
-		compatible = "renesas,intc-irqpin-r8a7740", "renesas,intc-irqpin";
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		reg = <0xe6900008 4>,
-			<0xe6900018 4>,
-			<0xe6900028 1>,
-			<0xe6900048 1>,
-			<0xe6900068 1>;
-		interrupts = <0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_INTCA>;
-		power-domains = <&pd_a4s>;
-	};
-
-	/* irqpin3: IRQ24 - IRQ31 */
-	irqpin3: irqpin@e690000c {
-		compatible = "renesas,intc-irqpin-r8a7740", "renesas,intc-irqpin";
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		reg = <0xe690000c 4>,
-			<0xe690001c 4>,
-			<0xe690002c 1>,
-			<0xe690004c 1>,
-			<0xe690006c 1>;
-		interrupts = <0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH
-			      0 149 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_INTCA>;
-		power-domains = <&pd_a4s>;
-	};
-
-	ether: ethernet@e9a00000 {
-		compatible = "renesas,gether-r8a7740";
-		reg = <0xe9a00000 0x800>,
-		      <0xe9a01800 0x800>;
-		interrupts = <0 110 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7740_CLK_GETHER>;
-		power-domains = <&pd_a4s>;
-		phy-mode = "mii";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		status = "disabled";
-	};
-
-	i2c0: i2c@fff20000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a7740", "renesas,rmobile-iic";
-		reg = <0xfff20000 0x425>;
-		interrupts = <0 201 IRQ_TYPE_LEVEL_HIGH
-			      0 202 IRQ_TYPE_LEVEL_HIGH
-			      0 203 IRQ_TYPE_LEVEL_HIGH
-			      0 204 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks R8A7740_CLK_IIC0>;
-		power-domains = <&pd_a4r>;
-		status = "disabled";
-	};
-
-	i2c1: i2c@e6c20000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a7740", "renesas,rmobile-iic";
-		reg = <0xe6c20000 0x425>;
-		interrupts = <0 70 IRQ_TYPE_LEVEL_HIGH
-			      0 71 IRQ_TYPE_LEVEL_HIGH
-			      0 72 IRQ_TYPE_LEVEL_HIGH
-			      0 73 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7740_CLK_IIC1>;
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	scifa0: serial@e6c40000 {
-		compatible = "renesas,scifa-r8a7740", "renesas,scifa";
-		reg = <0xe6c40000 0x100>;
-		interrupts = <0 100 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_SCIFA0>;
-		clock-names = "sci_ick";
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	scifa1: serial@e6c50000 {
-		compatible = "renesas,scifa-r8a7740", "renesas,scifa";
-		reg = <0xe6c50000 0x100>;
-		interrupts = <0 101 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_SCIFA1>;
-		clock-names = "sci_ick";
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	scifa2: serial@e6c60000 {
-		compatible = "renesas,scifa-r8a7740", "renesas,scifa";
-		reg = <0xe6c60000 0x100>;
-		interrupts = <0 102 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_SCIFA2>;
-		clock-names = "sci_ick";
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	scifa3: serial@e6c70000 {
-		compatible = "renesas,scifa-r8a7740", "renesas,scifa";
-		reg = <0xe6c70000 0x100>;
-		interrupts = <0 103 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_SCIFA3>;
-		clock-names = "sci_ick";
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	scifa4: serial@e6c80000 {
-		compatible = "renesas,scifa-r8a7740", "renesas,scifa";
-		reg = <0xe6c80000 0x100>;
-		interrupts = <0 104 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_SCIFA4>;
-		clock-names = "sci_ick";
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	scifa5: serial@e6cb0000 {
-		compatible = "renesas,scifa-r8a7740", "renesas,scifa";
-		reg = <0xe6cb0000 0x100>;
-		interrupts = <0 105 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_SCIFA5>;
-		clock-names = "sci_ick";
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	scifa6: serial@e6cc0000 {
-		compatible = "renesas,scifa-r8a7740", "renesas,scifa";
-		reg = <0xe6cc0000 0x100>;
-		interrupts = <0 106 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_SCIFA6>;
-		clock-names = "sci_ick";
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	scifa7: serial@e6cd0000 {
-		compatible = "renesas,scifa-r8a7740", "renesas,scifa";
-		reg = <0xe6cd0000 0x100>;
-		interrupts = <0 107 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_SCIFA7>;
-		clock-names = "sci_ick";
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	scifb8: serial@e6c30000 {
-		compatible = "renesas,scifb-r8a7740", "renesas,scifb";
-		reg = <0xe6c30000 0x100>;
-		interrupts = <0 108 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7740_CLK_SCIFB>;
-		clock-names = "sci_ick";
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	pfc: pfc@e6050000 {
-		compatible = "renesas,pfc-r8a7740";
-		reg = <0xe6050000 0x8000>,
-		      <0xe605800c 0x20>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		interrupts-extended =
-			<&irqpin0 0 0>, <&irqpin0 1 0>, <&irqpin0 2 0>, <&irqpin0 3 0>,
-			<&irqpin0 4 0>, <&irqpin0 5 0>, <&irqpin0 6 0>, <&irqpin0 7 0>,
-			<&irqpin1 0 0>, <&irqpin1 1 0>, <&irqpin1 2 0>, <&irqpin1 3 0>,
-			<&irqpin1 4 0>, <&irqpin1 5 0>, <&irqpin1 6 0>, <&irqpin1 7 0>,
-			<&irqpin2 0 0>, <&irqpin2 1 0>, <&irqpin2 2 0>, <&irqpin2 3 0>,
-			<&irqpin2 4 0>, <&irqpin2 5 0>, <&irqpin2 6 0>, <&irqpin2 7 0>,
-			<&irqpin3 0 0>, <&irqpin3 1 0>, <&irqpin3 2 0>, <&irqpin3 3 0>,
-			<&irqpin3 4 0>, <&irqpin3 5 0>, <&irqpin3 6 0>, <&irqpin3 7 0>;
-		power-domains = <&pd_c5>;
-	};
-
-	tpu: pwm@e6600000 {
-		compatible = "renesas,tpu-r8a7740", "renesas,tpu";
-		reg = <0xe6600000 0x100>;
-		clocks = <&mstp3_clks R8A7740_CLK_TPU0>;
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-		#pwm-cells = <3>;
-	};
-
-	mmcif0: mmc@e6bd0000 {
-		compatible = "renesas,mmcif-r8a7740", "renesas,sh-mmcif";
-		reg = <0xe6bd0000 0x100>;
-		interrupts = <0 56 IRQ_TYPE_LEVEL_HIGH
-			      0 57 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7740_CLK_MMC>;
-		power-domains = <&pd_a3sp>;
-		status = "disabled";
-	};
-
-	sdhi0: sd@e6850000 {
-		compatible = "renesas,sdhi-r8a7740";
-		reg = <0xe6850000 0x100>;
-		interrupts = <0 117 IRQ_TYPE_LEVEL_HIGH
-			      0 118 IRQ_TYPE_LEVEL_HIGH
-			      0 119 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7740_CLK_SDHI0>;
-		power-domains = <&pd_a3sp>;
-		cap-sd-highspeed;
-		cap-sdio-irq;
-		status = "disabled";
-	};
-
-	sdhi1: sd@e6860000 {
-		compatible = "renesas,sdhi-r8a7740";
-		reg = <0xe6860000 0x100>;
-		interrupts = <0 121 IRQ_TYPE_LEVEL_HIGH
-			      0 122 IRQ_TYPE_LEVEL_HIGH
-			      0 123 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7740_CLK_SDHI1>;
-		power-domains = <&pd_a3sp>;
-		cap-sd-highspeed;
-		cap-sdio-irq;
-		status = "disabled";
-	};
-
-	sdhi2: sd@e6870000 {
-		compatible = "renesas,sdhi-r8a7740";
-		reg = <0xe6870000 0x100>;
-		interrupts = <0 125 IRQ_TYPE_LEVEL_HIGH
-			      0 126 IRQ_TYPE_LEVEL_HIGH
-			      0 127 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp4_clks R8A7740_CLK_SDHI2>;
-		power-domains = <&pd_a3sp>;
-		cap-sd-highspeed;
-		cap-sdio-irq;
-		status = "disabled";
-	};
-
-	sh_fsi2: sound@fe1f0000 {
-		#sound-dai-cells = <1>;
-		compatible = "renesas,fsi2-r8a7740", "renesas,sh_fsi2";
-		reg = <0xfe1f0000 0x400>;
-		interrupts = <0 9 0x4>;
-		clocks = <&mstp3_clks R8A7740_CLK_FSI>;
-		power-domains = <&pd_a4mp>;
-		status = "disabled";
-	};
-
-	tmu0: timer@fff80000 {
-		compatible = "renesas,tmu-r8a7740", "renesas,tmu";
-		reg = <0xfff80000 0x2c>;
-		interrupts = <0 198 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 199 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 200 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks R8A7740_CLK_TMU0>;
-		clock-names = "fck";
-		power-domains = <&pd_a4r>;
-
-		#renesas,channels = <3>;
-
-		status = "disabled";
-	};
-
-	tmu1: timer@fff90000 {
-		compatible = "renesas,tmu-r8a7740", "renesas,tmu";
-		reg = <0xfff90000 0x2c>;
-		interrupts = <0 170 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 171 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 172 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks R8A7740_CLK_TMU1>;
-		clock-names = "fck";
-		power-domains = <&pd_a4r>;
-
-		#renesas,channels = <3>;
-
-		status = "disabled";
-	};
-
-	clocks {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges;
-
-		/* External root clock */
-		extalr_clk: extalr_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <32768>;
-			clock-output-names = "extalr";
-		};
-		extal1_clk: extal1_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-			clock-output-names = "extal1";
-		};
-		extal2_clk: extal2_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-			clock-output-names = "extal2";
-		};
-		dv_clk: dv_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <27000000>;
-			clock-output-names = "dv";
-		};
-		fsiack_clk: fsiack_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-			clock-output-names = "fsiack";
-		};
-		fsibck_clk: fsibck_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-			clock-output-names = "fsibck";
-		};
-
-		/* Special CPG clocks */
-		cpg_clocks: cpg_clocks@e6150000 {
-			compatible = "renesas,r8a7740-cpg-clocks";
-			reg = <0xe6150000 0x10000>;
-			clocks = <&extal1_clk>, <&extalr_clk>;
-			#clock-cells = <1>;
-			clock-output-names = "system", "pllc0", "pllc1",
-					     "pllc2", "r",
-					     "usb24s",
-					     "i", "zg", "b", "m1", "hp",
-					     "hpp", "usbp", "s", "zb", "m3",
-					     "cp";
-		};
-
-		/* Variable factor clocks (DIV6) */
-		sub_clk: sub_clk@e6150080 {
-			compatible = "renesas,r8a7740-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150080 4>;
-			clocks = <&pllc1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "sub";
-		};
-
-		/* Fixed factor clocks */
-		pllc1_div2_clk: pllc1_div2_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7740_CLK_PLLC1>;
-			#clock-cells = <0>;
-			clock-div = <2>;
-			clock-mult = <1>;
-			clock-output-names = "pllc1_div2";
-		};
-		extal1_div2_clk: extal1_div2_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&extal1_clk>;
-			#clock-cells = <0>;
-			clock-div = <2>;
-			clock-mult = <1>;
-			clock-output-names = "extal1_div2";
-		};
-
-		/* Gate clocks */
-		subck_clks: subck_clks@e6150080 {
-			compatible = "renesas,r8a7740-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0xe6150080 4>;
-			clocks = <&sub_clk>, <&sub_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7740_CLK_SUBCK R8A7740_CLK_SUBCK2
-			>;
-			clock-output-names =
-				"subck", "subck2";
-		};
-		mstp1_clks: mstp1_clks@e6150134 {
-			compatible = "renesas,r8a7740-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0xe6150134 4>, <0xe6150038 4>;
-			clocks = <&cpg_clocks R8A7740_CLK_S>,
-				 <&cpg_clocks R8A7740_CLK_S>, <&sub_clk>,
-				 <&cpg_clocks R8A7740_CLK_B>,
-				 <&cpg_clocks R8A7740_CLK_HPP>, <&sub_clk>,
-				 <&cpg_clocks R8A7740_CLK_B>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7740_CLK_CEU21 R8A7740_CLK_CEU20 R8A7740_CLK_TMU0
-				R8A7740_CLK_LCDC1 R8A7740_CLK_IIC0 R8A7740_CLK_TMU1
-				R8A7740_CLK_LCDC0
-			>;
-			clock-output-names =
-				"ceu21", "ceu20", "tmu0", "lcdc1", "iic0",
-				"tmu1", "lcdc0";
-		};
-		mstp2_clks: mstp2_clks@e6150138 {
-			compatible = "renesas,r8a7740-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0xe6150138 4>, <0xe6150040 4>;
-			clocks = <&sub_clk>, <&cpg_clocks R8A7740_CLK_HP>,
-				 <&sub_clk>, <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&sub_clk>, <&sub_clk>, <&sub_clk>,
-				 <&sub_clk>, <&sub_clk>, <&sub_clk>,
-				 <&sub_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7740_CLK_SCIFA6 R8A7740_CLK_INTCA
-				R8A7740_CLK_SCIFA7
-				R8A7740_CLK_DMAC1 R8A7740_CLK_DMAC2
-				R8A7740_CLK_DMAC3 R8A7740_CLK_USBDMAC
-				R8A7740_CLK_SCIFA5 R8A7740_CLK_SCIFB
-				R8A7740_CLK_SCIFA0 R8A7740_CLK_SCIFA1
-				R8A7740_CLK_SCIFA2 R8A7740_CLK_SCIFA3
-				R8A7740_CLK_SCIFA4
-			>;
-			clock-output-names =
-				"scifa6", "intca",
-				"scifa7", "dmac1", "dmac2", "dmac3",
-				"usbdmac", "scifa5", "scifb", "scifa0", "scifa1",
-				"scifa2", "scifa3", "scifa4";
-		};
-		mstp3_clks: mstp3_clks@e615013c {
-			compatible = "renesas,r8a7740-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0xe615013c 4>, <0xe6150048 4>;
-			clocks = <&cpg_clocks R8A7740_CLK_R>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&sub_clk>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7740_CLK_CMT1 R8A7740_CLK_FSI R8A7740_CLK_IIC1
-				R8A7740_CLK_USBF R8A7740_CLK_SDHI0 R8A7740_CLK_SDHI1
-				R8A7740_CLK_MMC R8A7740_CLK_GETHER R8A7740_CLK_TPU0
-			>;
-			clock-output-names =
-				"cmt1", "fsi", "iic1", "usbf", "sdhi0", "sdhi1",
-				"mmc", "gether", "tpu0";
-		};
-		mstp4_clks: mstp4_clks@e6150140 {
-			compatible = "renesas,r8a7740-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0xe6150140 4>, <0xe615004c 4>;
-			clocks = <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>,
-				 <&cpg_clocks R8A7740_CLK_HP>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7740_CLK_USBH R8A7740_CLK_SDHI2
-				R8A7740_CLK_USBFUNC R8A7740_CLK_USBPHY
-			>;
-			clock-output-names =
-				"usbhost", "sdhi2", "usbfunc", "usphy";
-		};
-	};
-
-	sysc: system-controller@e6180000 {
-		compatible = "renesas,sysc-r8a7740", "renesas,sysc-rmobile";
-		reg = <0xe6180000 0x8000>, <0xe6188000 0x8000>;
-
-		pm-domains {
-			pd_c5: c5 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				#power-domain-cells = <0>;
-
-				pd_a4lc: a4lc@1 {
-					reg = <1>;
-					#power-domain-cells = <0>;
-				};
-
-				pd_a4mp: a4mp@2 {
-					reg = <2>;
-					#power-domain-cells = <0>;
-				};
-
-				pd_d4: d4@3 {
-					reg = <3>;
-					#power-domain-cells = <0>;
-				};
-
-				pd_a4r: a4r@5 {
-					reg = <5>;
-					#address-cells = <1>;
-					#size-cells = <0>;
-					#power-domain-cells = <0>;
-
-					pd_a3rv: a3rv@6 {
-						reg = <6>;
-						#power-domain-cells = <0>;
-					};
-				};
-
-				pd_a4s: a4s@10 {
-					reg = <10>;
-					#address-cells = <1>;
-					#size-cells = <0>;
-					#power-domain-cells = <0>;
-
-					pd_a3sp: a3sp@11 {
-						reg = <11>;
-						#power-domain-cells = <0>;
-					};
-
-					pd_a3sm: a3sm@12 {
-						reg = <12>;
-						#power-domain-cells = <0>;
-					};
-
-					pd_a3sg: a3sg@13 {
-						reg = <13>;
-						#power-domain-cells = <0>;
-					};
-				};
-
-				pd_a4su: a4su@20 {
-					reg = <20>;
-					#power-domain-cells = <0>;
-				};
-			};
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/r8a7778-bockw.dts b/arch/arm/boot/dts/r8a7778-bockw.dts
--- a/arch/arm/boot/dts/r8a7778-bockw.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/r8a7778-bockw.dts	2015-10-27 00:45:05.000000000 +0000
@@ -15,14 +15,14 @@
  */
 
 /dts-v1/;
-#include "r8a7778.dtsi"
+/include/ "r8a7778.dtsi"
 
 / {
 	model = "bockw";
 	compatible = "renesas,bockw", "renesas,r8a7778";
 
 	chosen {
-		bootargs = "console=ttySC0,115200 ignore_loglevel ip=dhcp root=/dev/nfs rw";
+		bootargs = "console=ttySC0,115200 ignore_loglevel ip=dhcp root=/dev/nfs";
 	};
 
 	memory {
diff -urNp a/arch/arm/boot/dts/r8a7778.dtsi b/arch/arm/boot/dts/r8a7778.dtsi
--- a/arch/arm/boot/dts/r8a7778.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/r8a7778.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -16,30 +16,15 @@
 
 /include/ "skeleton.dtsi"
 
-#include <dt-bindings/interrupt-controller/irq.h>
-
 / {
 	compatible = "renesas,r8a7778";
-	interrupt-parent = <&gic>;
 
 	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
 		cpu@0 {
-			device_type = "cpu";
 			compatible = "arm,cortex-a9";
-			reg = <0>;
-			clock-frequency = <800000000>;
 		};
 	};
 
-	aliases {
-		spi0 = &hspi0;
-		spi1 = &hspi1;
-		spi2 = &hspi2;
-	};
-
 	gic: interrupt-controller@fe438000 {
 		compatible = "arm,cortex-a9-gic";
 		#interrupt-cells = <3>;
@@ -47,251 +32,4 @@
 		reg = <0xfe438000 0x1000>,
 		      <0xfe430000 0x100>;
 	};
-
-	/* irqpin: IRQ0 - IRQ3 */
-	irqpin: irqpin@fe78001c {
-		compatible = "renesas,intc-irqpin-r8a7778", "renesas,intc-irqpin";
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		status = "disabled"; /* default off */
-		reg =	<0xfe78001c 4>,
-			<0xfe780010 4>,
-			<0xfe780024 4>,
-			<0xfe780044 4>,
-			<0xfe780064 4>;
-		interrupts =   <0 27 IRQ_TYPE_LEVEL_HIGH
-				0 28 IRQ_TYPE_LEVEL_HIGH
-				0 29 IRQ_TYPE_LEVEL_HIGH
-				0 30 IRQ_TYPE_LEVEL_HIGH>;
-		sense-bitfield-width = <2>;
-	};
-
-	gpio0: gpio@ffc40000 {
-		compatible = "renesas,gpio-r8a7778", "renesas,gpio-rcar";
-		reg = <0xffc40000 0x2c>;
-		interrupts = <0 103 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 0 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	gpio1: gpio@ffc41000 {
-		compatible = "renesas,gpio-r8a7778", "renesas,gpio-rcar";
-		reg = <0xffc41000 0x2c>;
-		interrupts = <0 103 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 32 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	gpio2: gpio@ffc42000 {
-		compatible = "renesas,gpio-r8a7778", "renesas,gpio-rcar";
-		reg = <0xffc42000 0x2c>;
-		interrupts = <0 103 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 64 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	gpio3: gpio@ffc43000 {
-		compatible = "renesas,gpio-r8a7778", "renesas,gpio-rcar";
-		reg = <0xffc43000 0x2c>;
-		interrupts = <0 103 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 96 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	gpio4: gpio@ffc44000 {
-		compatible = "renesas,gpio-r8a7778", "renesas,gpio-rcar";
-		reg = <0xffc44000 0x2c>;
-		interrupts = <0 103 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 128 27>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	pfc: pfc@fffc0000 {
-		compatible = "renesas,pfc-r8a7778";
-		reg = <0xfffc0000 0x118>;
-	};
-
-	i2c0: i2c@ffc70000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7778";
-		reg = <0xffc70000 0x1000>;
-		interrupts = <0 67 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	i2c1: i2c@ffc71000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7778";
-		reg = <0xffc71000 0x1000>;
-		interrupts = <0 78 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	i2c2: i2c@ffc72000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7778";
-		reg = <0xffc72000 0x1000>;
-		interrupts = <0 76 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	i2c3: i2c@ffc73000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7778";
-		reg = <0xffc73000 0x1000>;
-		interrupts = <0 77 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	tmu0: timer@ffd80000 {
-		compatible = "renesas,tmu-r8a7778", "renesas,tmu";
-		reg = <0xffd80000 0x30>;
-		interrupts = <0 32 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 33 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 34 IRQ_TYPE_LEVEL_HIGH>;
-
-		#renesas,channels = <3>;
-
-		status = "disabled";
-	};
-
-	tmu1: timer@ffd81000 {
-		compatible = "renesas,tmu-r8a7778", "renesas,tmu";
-		reg = <0xffd81000 0x30>;
-		interrupts = <0 36 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 37 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 38 IRQ_TYPE_LEVEL_HIGH>;
-
-		#renesas,channels = <3>;
-
-		status = "disabled";
-	};
-
-	tmu2: timer@ffd82000 {
-		compatible = "renesas,tmu-r8a7778", "renesas,tmu";
-		reg = <0xffd82000 0x30>;
-		interrupts = <0 40 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 41 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 42 IRQ_TYPE_LEVEL_HIGH>;
-
-		#renesas,channels = <3>;
-
-		status = "disabled";
-	};
-
-	scif0: serial@ffe40000 {
-		compatible = "renesas,scif-r8a7778", "renesas,scif";
-		reg = <0xffe40000 0x100>;
-		interrupts = <0 70 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scif1: serial@ffe41000 {
-		compatible = "renesas,scif-r8a7778", "renesas,scif";
-		reg = <0xffe41000 0x100>;
-		interrupts = <0 71 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scif2: serial@ffe42000 {
-		compatible = "renesas,scif-r8a7778", "renesas,scif";
-		reg = <0xffe42000 0x100>;
-		interrupts = <0 72 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scif3: serial@ffe43000 {
-		compatible = "renesas,scif-r8a7778", "renesas,scif";
-		reg = <0xffe43000 0x100>;
-		interrupts = <0 73 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scif4: serial@ffe44000 {
-		compatible = "renesas,scif-r8a7778", "renesas,scif";
-		reg = <0xffe44000 0x100>;
-		interrupts = <0 74 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	scif5: serial@ffe45000 {
-		compatible = "renesas,scif-r8a7778", "renesas,scif";
-		reg = <0xffe45000 0x100>;
-		interrupts = <0 75 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	mmcif: mmc@ffe4e000 {
-		compatible = "renesas,sh-mmcif";
-		reg = <0xffe4e000 0x100>;
-		interrupts = <0 61 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	sdhi0: sd@ffe4c000 {
-		compatible = "renesas,sdhi-r8a7778";
-		reg = <0xffe4c000 0x100>;
-		interrupts = <0 87 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	sdhi1: sd@ffe4d000 {
-		compatible = "renesas,sdhi-r8a7778";
-		reg = <0xffe4d000 0x100>;
-		interrupts = <0 88 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	sdhi2: sd@ffe4f000 {
-		compatible = "renesas,sdhi-r8a7778";
-		reg = <0xffe4f000 0x100>;
-		interrupts = <0 86 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	hspi0: spi@fffc7000 {
-		compatible = "renesas,hspi-r8a7778", "renesas,hspi";
-		reg = <0xfffc7000 0x18>;
-		interrupts = <0 63 IRQ_TYPE_LEVEL_HIGH>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		status = "disabled";
-	};
-
-	hspi1: spi@fffc8000 {
-		compatible = "renesas,hspi-r8a7778", "renesas,hspi";
-		reg = <0xfffc8000 0x18>;
-		interrupts = <0 84 IRQ_TYPE_LEVEL_HIGH>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		status = "disabled";
-	};
-
-	hspi2: spi@fffc6000 {
-		compatible = "renesas,hspi-r8a7778", "renesas,hspi";
-		reg = <0xfffc6000 0x18>;
-		interrupts = <0 85 IRQ_TYPE_LEVEL_HIGH>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		status = "disabled";
-	};
 };
diff -urNp a/arch/arm/boot/dts/r8a7779-marzen-reference.dts b/arch/arm/boot/dts/r8a7779-marzen-reference.dts
--- a/arch/arm/boot/dts/r8a7779-marzen-reference.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/r8a7779-marzen-reference.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,47 @@
+/*
+ * Reference Device Tree Source for the Marzen board
+ *
+ * Copyright (C) 2013 Renesas Solutions Corp.
+ * Copyright (C) 2013 Simon Horman
+ *
+ * This file is licensed under the terms of the GNU General Public License
+ * version 2.  This program is licensed "as is" without any warranty of any
+ * kind, whether express or implied.
+ */
+
+/dts-v1/;
+/include/ "r8a7779.dtsi"
+
+/ {
+	model = "marzen";
+	compatible = "renesas,marzen-reference", "renesas,r8a7779";
+
+	chosen {
+		bootargs = "console=ttySC2,115200 earlyprintk=sh-sci.2,115200 ignore_loglevel root=/dev/nfs ip=on";
+	};
+
+	memory {
+		device_type = "memory";
+		reg = <0x60000000 0x40000000>;
+	};
+
+	fixedregulator3v3: fixedregulator@0 {
+		compatible = "regulator-fixed";
+		regulator-name = "fixed-3.3V";
+		regulator-min-microvolt = <3300000>;
+		regulator-max-microvolt = <3300000>;
+		regulator-boot-on;
+		regulator-always-on;
+	};
+
+	lan0@18000000 {
+		compatible = "smsc,lan9220", "smsc,lan9115";
+		reg = <0x18000000 0x100>;
+		phy-mode = "mii";
+		interrupt-parent = <&gic>;
+		interrupts = <0 28 0x4>;
+		reg-io-width = <4>;
+		vddvario-supply = <&fixedregulator3v3>;
+		vdd33a-supply = <&fixedregulator3v3>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/r8a7779.dtsi b/arch/arm/boot/dts/r8a7779.dtsi
--- a/arch/arm/boot/dts/r8a7779.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/r8a7779.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -11,13 +11,8 @@
 
 /include/ "skeleton.dtsi"
 
-#include <dt-bindings/clock/r8a7779-clock.h>
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-
 / {
 	compatible = "renesas,r8a7779";
-	interrupt-parent = <&gic>;
 
 	cpus {
 		#address-cells = <1>;
@@ -27,523 +22,77 @@
 			device_type = "cpu";
 			compatible = "arm,cortex-a9";
 			reg = <0>;
-			clock-frequency = <1000000000>;
 		};
 		cpu@1 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a9";
 			reg = <1>;
-			clock-frequency = <1000000000>;
 		};
 		cpu@2 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a9";
 			reg = <2>;
-			clock-frequency = <1000000000>;
 		};
 		cpu@3 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a9";
 			reg = <3>;
-			clock-frequency = <1000000000>;
 		};
 	};
 
-	aliases {
-		spi0 = &hspi0;
-		spi1 = &hspi1;
-		spi2 = &hspi2;
-	};
-
-	gic: interrupt-controller@f0001000 {
-		compatible = "arm,cortex-a9-gic";
-		#interrupt-cells = <3>;
-		interrupt-controller;
-		reg = <0xf0001000 0x1000>,
-		      <0xf0000100 0x100>;
-	};
-
-	timer@f0000600 {
-		compatible = "arm,cortex-a9-twd-timer";
-		reg = <0xf0000600 0x20>;
-		interrupts = <GIC_PPI 13
-			(GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_HIGH)>;
-		clocks = <&cpg_clocks R8A7779_CLK_ZS>;
-	};
-
-	gpio0: gpio@ffc40000 {
-		compatible = "renesas,gpio-r8a7779", "renesas,gpio-rcar";
-		reg = <0xffc40000 0x2c>;
-		interrupts = <0 141 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 0 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	gpio1: gpio@ffc41000 {
-		compatible = "renesas,gpio-r8a7779", "renesas,gpio-rcar";
-		reg = <0xffc41000 0x2c>;
-		interrupts = <0 142 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 32 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	gpio2: gpio@ffc42000 {
-		compatible = "renesas,gpio-r8a7779", "renesas,gpio-rcar";
-		reg = <0xffc42000 0x2c>;
-		interrupts = <0 143 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 64 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	gpio3: gpio@ffc43000 {
-		compatible = "renesas,gpio-r8a7779", "renesas,gpio-rcar";
-		reg = <0xffc43000 0x2c>;
-		interrupts = <0 144 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 96 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	gpio4: gpio@ffc44000 {
-		compatible = "renesas,gpio-r8a7779", "renesas,gpio-rcar";
-		reg = <0xffc44000 0x2c>;
-		interrupts = <0 145 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 128 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	gpio5: gpio@ffc45000 {
-		compatible = "renesas,gpio-r8a7779", "renesas,gpio-rcar";
-		reg = <0xffc45000 0x2c>;
-		interrupts = <0 146 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 160 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	gpio6: gpio@ffc46000 {
-		compatible = "renesas,gpio-r8a7779", "renesas,gpio-rcar";
-		reg = <0xffc46000 0x2c>;
-		interrupts = <0 147 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 192 9>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-	};
-
-	irqpin0: irqpin@fe780010 {
-		compatible = "renesas,intc-irqpin-r8a7779", "renesas,intc-irqpin";
-		#interrupt-cells = <2>;
-		status = "disabled";
-		interrupt-controller;
-		reg = <0xfe78001c 4>,
-			<0xfe780010 4>,
-			<0xfe780024 4>,
-			<0xfe780044 4>,
-			<0xfe780064 4>;
-		interrupts = <0 27 IRQ_TYPE_LEVEL_HIGH
-			      0 28 IRQ_TYPE_LEVEL_HIGH
-			      0 29 IRQ_TYPE_LEVEL_HIGH
-			      0 30 IRQ_TYPE_LEVEL_HIGH>;
-		sense-bitfield-width = <2>;
-	};
+        gic: interrupt-controller@f0001000 {
+                compatible = "arm,cortex-a9-gic";
+                #interrupt-cells = <3>;
+                interrupt-controller;
+                reg = <0xf0001000 0x1000>,
+                      <0xf0000100 0x100>;
+        };
 
-	i2c0: i2c@ffc70000 {
+	i2c0: i2c@0xffc70000 {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7779";
+		compatible = "renesas,rmobile-iic";
 		reg = <0xffc70000 0x1000>;
-		interrupts = <0 79 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_I2C0>;
-		status = "disabled";
+		interrupt-parent = <&gic>;
+		interrupts = <0 79 0x4>;
 	};
 
-	i2c1: i2c@ffc71000 {
+	i2c1: i2c@0xffc71000 {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7779";
+		compatible = "renesas,rmobile-iic";
 		reg = <0xffc71000 0x1000>;
-		interrupts = <0 82 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_I2C1>;
-		status = "disabled";
+		interrupt-parent = <&gic>;
+		interrupts = <0 82 0x4>;
 	};
 
-	i2c2: i2c@ffc72000 {
+	i2c2: i2c@0xffc72000 {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7779";
+		compatible = "renesas,rmobile-iic";
 		reg = <0xffc72000 0x1000>;
-		interrupts = <0 80 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_I2C2>;
-		status = "disabled";
+		interrupt-parent = <&gic>;
+		interrupts = <0 80 0x4>;
 	};
 
-	i2c3: i2c@ffc73000 {
+	i2c3: i2c@0xffc73000 {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7779";
+		compatible = "renesas,rmobile-iic";
 		reg = <0xffc73000 0x1000>;
-		interrupts = <0 81 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_I2C3>;
-		status = "disabled";
-	};
-
-	scif0: serial@ffe40000 {
-		compatible = "renesas,scif-r8a7779", "renesas,scif";
-		reg = <0xffe40000 0x100>;
-		interrupts = <0 88 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_SCIF0>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scif1: serial@ffe41000 {
-		compatible = "renesas,scif-r8a7779", "renesas,scif";
-		reg = <0xffe41000 0x100>;
-		interrupts = <0 89 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_SCIF1>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scif2: serial@ffe42000 {
-		compatible = "renesas,scif-r8a7779", "renesas,scif";
-		reg = <0xffe42000 0x100>;
-		interrupts = <0 90 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_SCIF2>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scif3: serial@ffe43000 {
-		compatible = "renesas,scif-r8a7779", "renesas,scif";
-		reg = <0xffe43000 0x100>;
-		interrupts = <0 91 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_SCIF3>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scif4: serial@ffe44000 {
-		compatible = "renesas,scif-r8a7779", "renesas,scif";
-		reg = <0xffe44000 0x100>;
-		interrupts = <0 92 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_SCIF4>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scif5: serial@ffe45000 {
-		compatible = "renesas,scif-r8a7779", "renesas,scif";
-		reg = <0xffe45000 0x100>;
-		interrupts = <0 93 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_SCIF5>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	pfc: pfc@fffc0000 {
-		compatible = "renesas,pfc-r8a7779";
-		reg = <0xfffc0000 0x23c>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 81 0x4>;
 	};
 
 	thermal@ffc48000 {
-		compatible = "renesas,thermal-r8a7779", "renesas,rcar-thermal";
+		compatible = "renesas,rcar-thermal";
 		reg = <0xffc48000 0x38>;
 	};
 
-	tmu0: timer@ffd80000 {
-		compatible = "renesas,tmu-r8a7779", "renesas,tmu";
-		reg = <0xffd80000 0x30>;
-		interrupts = <0 32 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 33 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 34 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_TMU0>;
-		clock-names = "fck";
-
-		#renesas,channels = <3>;
-
-		status = "disabled";
-	};
-
-	tmu1: timer@ffd81000 {
-		compatible = "renesas,tmu-r8a7779", "renesas,tmu";
-		reg = <0xffd81000 0x30>;
-		interrupts = <0 36 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 37 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 38 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_TMU1>;
-		clock-names = "fck";
-
-		#renesas,channels = <3>;
-
-		status = "disabled";
-	};
-
-	tmu2: timer@ffd82000 {
-		compatible = "renesas,tmu-r8a7779", "renesas,tmu";
-		reg = <0xffd82000 0x30>;
-		interrupts = <0 40 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 41 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 42 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7779_CLK_TMU2>;
-		clock-names = "fck";
-
-		#renesas,channels = <3>;
-
-		status = "disabled";
-	};
-
 	sata: sata@fc600000 {
-		compatible = "renesas,sata-r8a7779", "renesas,rcar-sata";
+		compatible = "renesas,rcar-sata";
 		reg = <0xfc600000 0x2000>;
-		interrupts = <0 100 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks R8A7779_CLK_SATA>;
-	};
-
-	sdhi0: sd@ffe4c000 {
-		compatible = "renesas,sdhi-r8a7779";
-		reg = <0xffe4c000 0x100>;
-		interrupts = <0 104 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7779_CLK_SDHI0>;
-		status = "disabled";
-	};
-
-	sdhi1: sd@ffe4d000 {
-		compatible = "renesas,sdhi-r8a7779";
-		reg = <0xffe4d000 0x100>;
-		interrupts = <0 105 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7779_CLK_SDHI1>;
-		status = "disabled";
-	};
-
-	sdhi2: sd@ffe4e000 {
-		compatible = "renesas,sdhi-r8a7779";
-		reg = <0xffe4e000 0x100>;
-		interrupts = <0 107 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7779_CLK_SDHI2>;
-		status = "disabled";
-	};
-
-	sdhi3: sd@ffe4f000 {
-		compatible = "renesas,sdhi-r8a7779";
-		reg = <0xffe4f000 0x100>;
-		interrupts = <0 106 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7779_CLK_SDHI3>;
-		status = "disabled";
-	};
-
-	hspi0: spi@fffc7000 {
-		compatible = "renesas,hspi-r8a7779", "renesas,hspi";
-		reg = <0xfffc7000 0x18>;
-		interrupts = <0 73 IRQ_TYPE_LEVEL_HIGH>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		clocks = <&mstp0_clks R8A7779_CLK_HSPI>;
-		status = "disabled";
-	};
-
-	hspi1: spi@fffc8000 {
-		compatible = "renesas,hspi-r8a7779", "renesas,hspi";
-		reg = <0xfffc8000 0x18>;
-		interrupts = <0 74 IRQ_TYPE_LEVEL_HIGH>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		clocks = <&mstp0_clks R8A7779_CLK_HSPI>;
-		status = "disabled";
-	};
-
-	hspi2: spi@fffc6000 {
-		compatible = "renesas,hspi-r8a7779", "renesas,hspi";
-		reg = <0xfffc6000 0x18>;
-		interrupts = <0 75 IRQ_TYPE_LEVEL_HIGH>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		clocks = <&mstp0_clks R8A7779_CLK_HSPI>;
-		status = "disabled";
-	};
-
-	du: display@fff80000 {
-		compatible = "renesas,du-r8a7779";
-		reg = <0 0xfff80000 0 0x40000>;
-		interrupts = <0 31 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks R8A7779_CLK_DU>;
-		status = "disabled";
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@0 {
-				reg = <0>;
-				du_out_rgb0: endpoint {
-				};
-			};
-			port@1 {
-				reg = <1>;
-				du_out_rgb1: endpoint {
-				};
-			};
-		};
-	};
-
-	clocks {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges;
-
-		/* External root clock */
-		extal_clk: extal_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			/* This value must be overriden by the board. */
-			clock-frequency = <0>;
-			clock-output-names = "extal";
-		};
-
-		/* Special CPG clocks */
-		cpg_clocks: clocks@ffc80000 {
-			compatible = "renesas,r8a7779-cpg-clocks";
-			reg = <0xffc80000 0x30>;
-			clocks = <&extal_clk>;
-			#clock-cells = <1>;
-			clock-output-names = "plla", "z", "zs", "s",
-					     "s1", "p", "b", "out";
-		};
-
-		/* Fixed factor clocks */
-		i_clk: i_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7779_CLK_PLLA>;
-			#clock-cells = <0>;
-			clock-div = <2>;
-			clock-mult = <1>;
-			clock-output-names = "i";
-		};
-		s3_clk: s3_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7779_CLK_PLLA>;
-			#clock-cells = <0>;
-			clock-div = <8>;
-			clock-mult = <1>;
-			clock-output-names = "s3";
-		};
-		s4_clk: s4_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7779_CLK_PLLA>;
-			#clock-cells = <0>;
-			clock-div = <16>;
-			clock-mult = <1>;
-			clock-output-names = "s4";
-		};
-		g_clk: g_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7779_CLK_PLLA>;
-			#clock-cells = <0>;
-			clock-div = <24>;
-			clock-mult = <1>;
-			clock-output-names = "g";
-		};
-
-		/* Gate clocks */
-		mstp0_clks: clocks@ffc80030 {
-			compatible = "renesas,r8a7779-mstp-clocks",
-				     "renesas,cpg-mstp-clocks";
-			reg = <0xffc80030 4>;
-			clocks = <&cpg_clocks R8A7779_CLK_S>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_S>,
-				 <&cpg_clocks R8A7779_CLK_S>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7779_CLK_HSPI R8A7779_CLK_TMU2
-				R8A7779_CLK_TMU1 R8A7779_CLK_TMU0
-				R8A7779_CLK_HSCIF1 R8A7779_CLK_HSCIF0
-				R8A7779_CLK_SCIF5 R8A7779_CLK_SCIF4
-				R8A7779_CLK_SCIF3 R8A7779_CLK_SCIF2
-				R8A7779_CLK_SCIF1 R8A7779_CLK_SCIF0
-				R8A7779_CLK_I2C3 R8A7779_CLK_I2C2
-				R8A7779_CLK_I2C1 R8A7779_CLK_I2C0
-			>;
-			clock-output-names =
-				"hspi", "tmu2", "tmu1", "tmu0", "hscif1",
-				"hscif0", "scif5", "scif4", "scif3", "scif2",
-				"scif1", "scif0", "i2c3", "i2c2", "i2c1",
-				"i2c0";
-		};
-		mstp1_clks: clocks@ffc80034 {
-			compatible = "renesas,r8a7779-mstp-clocks",
-				     "renesas,cpg-mstp-clocks";
-			reg = <0xffc80034 4>, <0xffc80044 4>;
-			clocks = <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_S>,
-				 <&cpg_clocks R8A7779_CLK_S>,
-				 <&cpg_clocks R8A7779_CLK_S>,
-				 <&cpg_clocks R8A7779_CLK_S>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_P>,
-				 <&cpg_clocks R8A7779_CLK_S>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7779_CLK_USB01 R8A7779_CLK_USB2
-				R8A7779_CLK_DU R8A7779_CLK_VIN2
-				R8A7779_CLK_VIN1 R8A7779_CLK_VIN0
-				R8A7779_CLK_ETHER R8A7779_CLK_SATA
-				R8A7779_CLK_PCIE R8A7779_CLK_VIN3
-			>;
-			clock-output-names =
-				"usb01", "usb2",
-				"du", "vin2",
-				"vin1", "vin0",
-				"ether", "sata",
-				"pcie", "vin3";
-		};
-		mstp3_clks: clocks@ffc8003c {
-			compatible = "renesas,r8a7779-mstp-clocks",
-				     "renesas,cpg-mstp-clocks";
-			reg = <0xffc8003c 4>;
-			clocks = <&s4_clk>, <&s4_clk>, <&s4_clk>, <&s4_clk>,
-				 <&s4_clk>, <&s4_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7779_CLK_SDHI3 R8A7779_CLK_SDHI2
-				R8A7779_CLK_SDHI1 R8A7779_CLK_SDHI0
-				R8A7779_CLK_MMC1 R8A7779_CLK_MMC0
-			>;
-			clock-output-names =
-				"sdhi3", "sdhi2", "sdhi1", "sdhi0",
-				"mmc1", "mmc0";
-		};
+		interrupt-parent = <&gic>;
+		interrupts = <0 100 0x4>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/r8a7790-lager.dts b/arch/arm/boot/dts/r8a7790-lager.dts
--- a/arch/arm/boot/dts/r8a7790-lager.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/r8a7790-lager.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,599 +1,31 @@
 /*
  * Device Tree Source for the Lager board
  *
- * Copyright (C) 2013-2014 Renesas Solutions Corp.
- * Copyright (C) 2014 Cogent Embedded, Inc.
+ * Copyright (C) 2013 Renesas Solutions Corp.
  *
  * This file is licensed under the terms of the GNU General Public License
  * version 2.  This program is licensed "as is" without any warranty of any
  * kind, whether express or implied.
  */
 
-/*
- * SSI-AK4643
- *
- * SW1: 1: AK4643
- *      2: CN22
- *      3: ADV7511
- *
- * This command is required when Playback/Capture
- *
- *	amixer set "LINEOUT Mixer DACL" on
- *	amixer set "DVC Out" 100%
- *	amixer set "DVC In" 100%
- *
- * You can use Mute
- *
- *	amixer set "DVC Out Mute" on
- *	amixer set "DVC In Mute" on
- *
- * You can use Volume Ramp
- *
- *	amixer set "DVC Out Ramp Up Rate"   "0.125 dB/64 steps"
- *	amixer set "DVC Out Ramp Down Rate" "0.125 dB/512 steps"
- *	amixer set "DVC Out Ramp" on
- *	aplay xxx.wav &
- *	amixer set "DVC Out"  80%  // Volume Down
- *	amixer set "DVC Out" 100%  // Volume Up
- */
-
 /dts-v1/;
-#include "r8a7790.dtsi"
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
+/include/ "r8a7790.dtsi"
 
 / {
 	model = "Lager";
 	compatible = "renesas,lager", "renesas,r8a7790";
 
-	aliases {
-		serial0 = &scifa0;
-		serial1 = &scifa1;
-	};
-
 	chosen {
-		bootargs = "ignore_loglevel rw root=/dev/nfs ip=dhcp";
-		stdout-path = &scifa0;
+		bootargs = "console=ttySC6,115200 ignore_loglevel";
 	};
 
 	memory@40000000 {
 		device_type = "memory";
-		reg = <0 0x40000000 0 0x40000000>;
-	};
-
-	memory@140000000 {
-		device_type = "memory";
-		reg = <1 0x40000000 0 0xc0000000>;
+		reg = <0 0x40000000 0 0x80000000>;
 	};
 
 	lbsc {
 		#address-cells = <1>;
 		#size-cells = <1>;
 	};
-
-	keyboard {
-		compatible = "gpio-keys";
-
-		button@1 {
-			linux,code = <KEY_1>;
-			label = "SW2-1";
-			gpio-key,wakeup;
-			debounce-interval = <20>;
-			gpios = <&gpio1 14 GPIO_ACTIVE_LOW>;
-		};
-		button@2 {
-			linux,code = <KEY_2>;
-			label = "SW2-2";
-			gpio-key,wakeup;
-			debounce-interval = <20>;
-			gpios = <&gpio1 24 GPIO_ACTIVE_LOW>;
-		};
-		button@3 {
-			linux,code = <KEY_3>;
-			label = "SW2-3";
-			gpio-key,wakeup;
-			debounce-interval = <20>;
-			gpios = <&gpio1 26 GPIO_ACTIVE_LOW>;
-		};
-		button@4 {
-			linux,code = <KEY_4>;
-			label = "SW2-4";
-			gpio-key,wakeup;
-			debounce-interval = <20>;
-			gpios = <&gpio1 28 GPIO_ACTIVE_LOW>;
-		};
-	};
-
-	leds {
-		compatible = "gpio-leds";
-		led6 {
-			gpios = <&gpio4 22 GPIO_ACTIVE_HIGH>;
-		};
-		led7 {
-			gpios = <&gpio4 23 GPIO_ACTIVE_HIGH>;
-		};
-		led8 {
-			gpios = <&gpio5 17 GPIO_ACTIVE_HIGH>;
-		};
-	};
-
-	fixedregulator3v3: fixedregulator@0 {
-		compatible = "regulator-fixed";
-		regulator-name = "fixed-3.3V";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		regulator-boot-on;
-		regulator-always-on;
-	};
-
-	vcc_sdhi0: regulator@1 {
-		compatible = "regulator-fixed";
-
-		regulator-name = "SDHI0 Vcc";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-
-		gpio = <&gpio5 24 GPIO_ACTIVE_HIGH>;
-		enable-active-high;
-	};
-
-	vccq_sdhi0: regulator@2 {
-		compatible = "regulator-gpio";
-
-		regulator-name = "SDHI0 VccQ";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <3300000>;
-
-		gpios = <&gpio5 29 GPIO_ACTIVE_HIGH>;
-		gpios-states = <1>;
-		states = <3300000 1
-			  1800000 0>;
-	};
-
-	vcc_sdhi2: regulator@3 {
-		compatible = "regulator-fixed";
-
-		regulator-name = "SDHI2 Vcc";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-
-		gpio = <&gpio5 25 GPIO_ACTIVE_HIGH>;
-		enable-active-high;
-	};
-
-	vccq_sdhi2: regulator@4 {
-		compatible = "regulator-gpio";
-
-		regulator-name = "SDHI2 VccQ";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <3300000>;
-
-		gpios = <&gpio5 30 GPIO_ACTIVE_HIGH>;
-		gpios-states = <1>;
-		states = <3300000 1
-			  1800000 0>;
-	};
-
-	sound {
-		compatible = "simple-audio-card";
-
-		simple-audio-card,format = "left_j";
-		simple-audio-card,bitclock-master = <&sndcodec>;
-		simple-audio-card,frame-master = <&sndcodec>;
-
-		sndcpu: simple-audio-card,cpu {
-			sound-dai = <&rcar_sound>;
-		};
-
-		sndcodec: simple-audio-card,codec {
-			sound-dai = <&ak4643>;
-			system-clock-frequency = <11289600>;
-		};
-	};
-
-	vga-encoder {
-		compatible = "adi,adv7123";
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@0 {
-				reg = <0>;
-				adv7123_in: endpoint {
-					remote-endpoint = <&du_out_rgb>;
-				};
-			};
-			port@1 {
-				reg = <1>;
-				adv7123_out: endpoint {
-					remote-endpoint = <&vga_in>;
-				};
-			};
-		};
-	};
-
-	vga {
-		compatible = "vga-connector";
-
-		port {
-			vga_in: endpoint {
-				remote-endpoint = <&adv7123_out>;
-			};
-		};
-	};
-};
-
-&du {
-	pinctrl-0 = <&du_pins>;
-	pinctrl-names = "default";
-	status = "okay";
-
-	ports {
-		port@0 {
-			endpoint {
-				remote-endpoint = <&adv7123_in>;
-			};
-		};
-		port@2 {
-			lvds_connector: endpoint {
-			};
-		};
-	};
-};
-
-&extal_clk {
-	clock-frequency = <20000000>;
-};
-
-&pfc {
-	du_pins: du {
-		renesas,groups = "du_rgb666", "du_sync_1", "du_clk_out_0";
-		renesas,function = "du";
-	};
-
-	scifa0_pins: serial0 {
-		renesas,groups = "scifa0_data";
-		renesas,function = "scifa0";
-	};
-
-	ether_pins: ether {
-		renesas,groups = "eth_link", "eth_mdio", "eth_rmii";
-		renesas,function = "eth";
-	};
-
-	phy1_pins: phy1 {
-		renesas,groups = "intc_irq0";
-		renesas,function = "intc";
-	};
-
-	scifa1_pins: serial1 {
-		renesas,groups = "scifa1_data";
-		renesas,function = "scifa1";
-	};
-
-	sdhi0_pins: sd0 {
-		renesas,groups = "sdhi0_data4", "sdhi0_ctrl";
-		renesas,function = "sdhi0";
-	};
-
-	sdhi2_pins: sd2 {
-		renesas,groups = "sdhi2_data4", "sdhi2_ctrl";
-		renesas,function = "sdhi2";
-	};
-
-	mmc1_pins: mmc1 {
-		renesas,groups = "mmc1_data8", "mmc1_ctrl";
-		renesas,function = "mmc1";
-	};
-
-	qspi_pins: spi0 {
-		renesas,groups = "qspi_ctrl", "qspi_data4";
-		renesas,function = "qspi";
-	};
-
-	msiof1_pins: spi2 {
-		renesas,groups = "msiof1_clk", "msiof1_sync", "msiof1_rx",
-				 "msiof1_tx";
-		renesas,function = "msiof1";
-	};
-
-	iic1_pins: iic1 {
-		renesas,groups = "iic1";
-		renesas,function = "iic1";
-	};
-
-	iic2_pins: iic2 {
-		renesas,groups = "iic2";
-		renesas,function = "iic2";
-	};
-
-	iic3_pins: iic3 {
-		renesas,groups = "iic3";
-		renesas,function = "iic3";
-	};
-
-	hsusb_pins: hsusb {
-		renesas,groups = "usb0_ovc_vbus";
-		renesas,function = "usb0";
-	};
-
-	usb0_pins: usb0 {
-		renesas,groups = "usb0";
-		renesas,function = "usb0";
-	};
-
-	usb1_pins: usb1 {
-		renesas,groups = "usb1";
-		renesas,function = "usb1";
-	};
-
-	usb2_pins: usb2 {
-		renesas,groups = "usb2";
-		renesas,function = "usb2";
-	};
-
-	vin1_pins: vin {
-		renesas,groups = "vin1_data8", "vin1_clk";
-		renesas,function = "vin1";
-	};
-
-	sound_pins: sound {
-		renesas,groups = "ssi0129_ctrl", "ssi0_data", "ssi1_data";
-		renesas,function = "ssi";
-	};
-
-	sound_clk_pins: sound_clk {
-		renesas,groups = "audio_clk_a";
-		renesas,function = "audio_clk";
-	};
-};
-
-&ether {
-	pinctrl-0 = <&ether_pins &phy1_pins>;
-	pinctrl-names = "default";
-
-	phy-handle = <&phy1>;
-	renesas,ether-link-active-low;
-	status = "okay";
-
-	phy1: ethernet-phy@1 {
-		reg = <1>;
-		interrupt-parent = <&irqc0>;
-		interrupts = <0 IRQ_TYPE_LEVEL_LOW>;
-		micrel,led-mode = <1>;
-	};
-};
-
-&cmt0 {
-	status = "okay";
-};
-
-&mmcif1 {
-	pinctrl-0 = <&mmc1_pins>;
-	pinctrl-names = "default";
-
-	vmmc-supply = <&fixedregulator3v3>;
-	bus-width = <8>;
-	non-removable;
-	status = "okay";
-};
-
-&sata1 {
-	status = "okay";
-};
-
-&qspi {
-	pinctrl-0 = <&qspi_pins>;
-	pinctrl-names = "default";
-
-	status = "okay";
-
-	flash: flash@0 {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		compatible = "spansion,s25fl512s";
-		reg = <0>;
-		spi-max-frequency = <30000000>;
-		spi-tx-bus-width = <4>;
-		spi-rx-bus-width = <4>;
-		spi-cpha;
-		spi-cpol;
-		m25p,fast-read;
-
-		partition@0 {
-			label = "loader";
-			reg = <0x00000000 0x00040000>;
-			read-only;
-		};
-		partition@40000 {
-			label = "user";
-			reg = <0x00040000 0x00400000>;
-			read-only;
-		};
-		partition@440000 {
-			label = "flash";
-			reg = <0x00440000 0x03bc0000>;
-		};
-	};
-};
-
-&scifa0 {
-	pinctrl-0 = <&scifa0_pins>;
-	pinctrl-names = "default";
-
-	status = "okay";
-};
-
-&scifa1 {
-	pinctrl-0 = <&scifa1_pins>;
-	pinctrl-names = "default";
-
-	status = "okay";
-};
-
-&msiof1 {
-	pinctrl-0 = <&msiof1_pins>;
-	pinctrl-names = "default";
-
-	status = "okay";
-
-	pmic: pmic@0 {
-		compatible = "renesas,r2a11302ft";
-		reg = <0>;
-		spi-max-frequency = <6000000>;
-		spi-cpol;
-		spi-cpha;
-	};
-};
-
-&sdhi0 {
-	pinctrl-0 = <&sdhi0_pins>;
-	pinctrl-names = "default";
-
-	vmmc-supply = <&vcc_sdhi0>;
-	vqmmc-supply = <&vccq_sdhi0>;
-	cd-gpios = <&gpio3 6 GPIO_ACTIVE_LOW>;
-	status = "okay";
-};
-
-&sdhi2 {
-	pinctrl-0 = <&sdhi2_pins>;
-	pinctrl-names = "default";
-
-	vmmc-supply = <&vcc_sdhi2>;
-	vqmmc-supply = <&vccq_sdhi2>;
-	cd-gpios = <&gpio3 22 GPIO_ACTIVE_LOW>;
-	status = "okay";
-};
-
-&cpu0 {
-	cpu0-supply = <&vdd_dvfs>;
-};
-
-&iic0	{
-	status = "okay";
-};
-
-&iic1	{
-	status = "okay";
-	pinctrl-0 = <&iic1_pins>;
-	pinctrl-names = "default";
-};
-
-&iic2	{
-	status = "okay";
-	pinctrl-0 = <&iic2_pins>;
-	pinctrl-names = "default";
-
-	clock-frequency = <100000>;
-
-	ak4643: sound-codec@12 {
-		compatible = "asahi-kasei,ak4643";
-		#sound-dai-cells = <0>;
-		reg = <0x12>;
-	};
-
-	composite-in@20 {
-		compatible = "adi,adv7180";
-		reg = <0x20>;
-		remote = <&vin1>;
-
-		port {
-			adv7180: endpoint {
-				bus-width = <8>;
-				remote-endpoint = <&vin1ep0>;
-			};
-		};
-	};
-};
-
-&iic3 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&iic3_pins>;
-	status = "okay";
-
-	vdd_dvfs: regulator@68 {
-		compatible = "dlg,da9210";
-		reg = <0x68>;
-
-		regulator-min-microvolt = <1000000>;
-		regulator-max-microvolt = <1000000>;
-		regulator-boot-on;
-		regulator-always-on;
-	};
-};
-
-&pci0 {
-	status = "okay";
-	pinctrl-0 = <&usb0_pins>;
-	pinctrl-names = "default";
-};
-
-&pci1 {
-	status = "okay";
-	pinctrl-0 = <&usb1_pins>;
-	pinctrl-names = "default";
-};
-
-&xhci {
-	status = "okay";
-	pinctrl-0 = <&usb2_pins>;
-	pinctrl-names = "default";
-};
-
-&pci2 {
-	status = "okay";
-	pinctrl-0 = <&usb2_pins>;
-	pinctrl-names = "default";
-};
-
-&hsusb {
-	status = "okay";
-	pinctrl-0 = <&hsusb_pins>;
-	pinctrl-names = "default";
-	renesas,enable-gpio = <&gpio5 18 GPIO_ACTIVE_HIGH>;
-};
-
-&usbphy {
-	status = "okay";
-};
-
-/* composite video input */
-&vin1 {
-	pinctrl-0 = <&vin1_pins>;
-	pinctrl-names = "default";
-
-	status = "okay";
-
-	port {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		vin1ep0: endpoint {
-			remote-endpoint = <&adv7180>;
-			bus-width = <8>;
-		};
-	};
-};
-
-&rcar_sound {
-	pinctrl-0 = <&sound_pins &sound_clk_pins>;
-	pinctrl-names = "default";
-
-	/* Single DAI */
-	#sound-dai-cells = <0>;
-
-	status = "okay";
-
-	rcar_sound,dai {
-		dai0 {
-			playback = <&ssi0 &src2 &dvc0>;
-			capture  = <&ssi1 &src3 &dvc1>;
-		};
-	};
-};
-
-&ssi1 {
-	shared-pin;
 };
diff -urNp a/arch/arm/boot/dts/r8a7790.dtsi b/arch/arm/boot/dts/r8a7790.dtsi
--- a/arch/arm/boot/dts/r8a7790.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/r8a7790.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,44 +1,19 @@
 /*
  * Device Tree Source for the r8a7790 SoC
  *
- * Copyright (C) 2013-2014 Renesas Solutions Corp.
- * Copyright (C) 2014 Cogent Embedded Inc.
+ * Copyright (C) 2013 Renesas Solutions Corp.
  *
  * This file is licensed under the terms of the GNU General Public License
  * version 2.  This program is licensed "as is" without any warranty of any
  * kind, whether express or implied.
  */
 
-#include <dt-bindings/clock/r8a7790-clock.h>
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-
 / {
 	compatible = "renesas,r8a7790";
 	interrupt-parent = <&gic>;
 	#address-cells = <2>;
 	#size-cells = <2>;
 
-	aliases {
-		i2c0 = &i2c0;
-		i2c1 = &i2c1;
-		i2c2 = &i2c2;
-		i2c3 = &i2c3;
-		i2c4 = &iic0;
-		i2c5 = &iic1;
-		i2c6 = &iic2;
-		i2c7 = &iic3;
-		spi0 = &qspi;
-		spi1 = &msiof0;
-		spi2 = &msiof1;
-		spi3 = &msiof2;
-		spi4 = &msiof3;
-		vin0 = &vin0;
-		vin1 = &vin1;
-		vin2 = &vin2;
-		vin3 = &vin3;
-	};
-
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
@@ -48,66 +23,6 @@
 			compatible = "arm,cortex-a15";
 			reg = <0>;
 			clock-frequency = <1300000000>;
-			voltage-tolerance = <1>; /* 1% */
-			clocks = <&cpg_clocks R8A7790_CLK_Z>;
-			clock-latency = <300000>; /* 300 us */
-
-			/* kHz - uV - OPPs unknown yet */
-			operating-points = <1400000 1000000>,
-					   <1225000 1000000>,
-					   <1050000 1000000>,
-					   < 875000 1000000>,
-					   < 700000 1000000>,
-					   < 350000 1000000>;
-		};
-
-		cpu1: cpu@1 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a15";
-			reg = <1>;
-			clock-frequency = <1300000000>;
-		};
-
-		cpu2: cpu@2 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a15";
-			reg = <2>;
-			clock-frequency = <1300000000>;
-		};
-
-		cpu3: cpu@3 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a15";
-			reg = <3>;
-			clock-frequency = <1300000000>;
-		};
-
-		cpu4: cpu@4 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a7";
-			reg = <0x100>;
-			clock-frequency = <780000000>;
-		};
-
-		cpu5: cpu@5 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a7";
-			reg = <0x101>;
-			clock-frequency = <780000000>;
-		};
-
-		cpu6: cpu@6 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a7";
-			reg = <0x102>;
-			clock-frequency = <780000000>;
-		};
-
-		cpu7: cpu@7 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a7";
-			reg = <0x103>;
-			clock-frequency = <780000000>;
 		};
 	};
 
@@ -120,1349 +35,29 @@
 			<0 0xf1002000 0 0x1000>,
 			<0 0xf1004000 0 0x2000>,
 			<0 0xf1006000 0 0x2000>;
-		interrupts = <1 9 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_HIGH)>;
-	};
-
-	gpio0: gpio@e6050000 {
-		compatible = "renesas,gpio-r8a7790", "renesas,gpio-rcar";
-		reg = <0 0xe6050000 0 0x50>;
-		interrupts = <0 4 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 0 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		clocks = <&mstp9_clks R8A7790_CLK_GPIO0>;
-	};
+		interrupts = <1 9 0xf04>;
 
-	gpio1: gpio@e6051000 {
-		compatible = "renesas,gpio-r8a7790", "renesas,gpio-rcar";
-		reg = <0 0xe6051000 0 0x50>;
-		interrupts = <0 5 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 32 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		clocks = <&mstp9_clks R8A7790_CLK_GPIO1>;
-	};
-
-	gpio2: gpio@e6052000 {
-		compatible = "renesas,gpio-r8a7790", "renesas,gpio-rcar";
-		reg = <0 0xe6052000 0 0x50>;
-		interrupts = <0 6 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 64 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		clocks = <&mstp9_clks R8A7790_CLK_GPIO2>;
-	};
-
-	gpio3: gpio@e6053000 {
-		compatible = "renesas,gpio-r8a7790", "renesas,gpio-rcar";
-		reg = <0 0xe6053000 0 0x50>;
-		interrupts = <0 7 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 96 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		clocks = <&mstp9_clks R8A7790_CLK_GPIO3>;
-	};
-
-	gpio4: gpio@e6054000 {
-		compatible = "renesas,gpio-r8a7790", "renesas,gpio-rcar";
-		reg = <0 0xe6054000 0 0x50>;
-		interrupts = <0 8 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 128 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		clocks = <&mstp9_clks R8A7790_CLK_GPIO4>;
-	};
-
-	gpio5: gpio@e6055000 {
-		compatible = "renesas,gpio-r8a7790", "renesas,gpio-rcar";
-		reg = <0 0xe6055000 0 0x50>;
-		interrupts = <0 9 IRQ_TYPE_LEVEL_HIGH>;
-		#gpio-cells = <2>;
-		gpio-controller;
-		gpio-ranges = <&pfc 0 160 32>;
-		#interrupt-cells = <2>;
-		interrupt-controller;
-		clocks = <&mstp9_clks R8A7790_CLK_GPIO5>;
-	};
-
-	thermal@e61f0000 {
-		compatible = "renesas,thermal-r8a7790", "renesas,rcar-thermal";
-		reg = <0 0xe61f0000 0 0x14>, <0 0xe61f0100 0 0x38>;
-		interrupts = <0 69 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp5_clks R8A7790_CLK_THERMAL>;
+		gic-cpuif@4 {
+			compatible = "arm,gic-cpuif";
+			cpuif-id = <4>;
+			cpu = <&cpu0>;
+		};
 	};
 
 	timer {
 		compatible = "arm,armv7-timer";
-		interrupts = <1 13 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
-			     <1 14 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
-			     <1 11 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
-			     <1 10 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>;
-	};
-
-	cmt0: timer@ffca0000 {
-		compatible = "renesas,cmt-48-r8a7790", "renesas,cmt-48-gen2";
-		reg = <0 0xffca0000 0 0x1004>;
-		interrupts = <0 142 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 143 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks R8A7790_CLK_CMT0>;
-		clock-names = "fck";
-
-		renesas,channels-mask = <0x60>;
-
-		status = "disabled";
-	};
-
-	cmt1: timer@e6130000 {
-		compatible = "renesas,cmt-48-r8a7790", "renesas,cmt-48-gen2";
-		reg = <0 0xe6130000 0 0x1004>;
-		interrupts = <0 120 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 121 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 122 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 123 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 124 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 125 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 126 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 127 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_CMT1>;
-		clock-names = "fck";
-
-		renesas,channels-mask = <0xff>;
-
-		status = "disabled";
+		interrupts = <1 13 0xf08>,
+				<1 14 0xf08>,
+				<1 11 0xf08>,
+				<1 10 0xf08>;
 	};
 
 	irqc0: interrupt-controller@e61c0000 {
-		compatible = "renesas,irqc-r8a7790", "renesas,irqc";
+		compatible = "renesas,irqc";
 		#interrupt-cells = <2>;
 		interrupt-controller;
 		reg = <0 0xe61c0000 0 0x200>;
-		interrupts = <0 0 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 1 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 2 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 3 IRQ_TYPE_LEVEL_HIGH>;
-	};
-
-	dmac0: dma-controller@e6700000 {
-		compatible = "renesas,rcar-dmac";
-		reg = <0 0xe6700000 0 0x20000>;
-		interrupts = <0 197 IRQ_TYPE_LEVEL_HIGH
-			      0 200 IRQ_TYPE_LEVEL_HIGH
-			      0 201 IRQ_TYPE_LEVEL_HIGH
-			      0 202 IRQ_TYPE_LEVEL_HIGH
-			      0 203 IRQ_TYPE_LEVEL_HIGH
-			      0 204 IRQ_TYPE_LEVEL_HIGH
-			      0 205 IRQ_TYPE_LEVEL_HIGH
-			      0 206 IRQ_TYPE_LEVEL_HIGH
-			      0 207 IRQ_TYPE_LEVEL_HIGH
-			      0 208 IRQ_TYPE_LEVEL_HIGH
-			      0 209 IRQ_TYPE_LEVEL_HIGH
-			      0 210 IRQ_TYPE_LEVEL_HIGH
-			      0 211 IRQ_TYPE_LEVEL_HIGH
-			      0 212 IRQ_TYPE_LEVEL_HIGH
-			      0 213 IRQ_TYPE_LEVEL_HIGH
-			      0 214 IRQ_TYPE_LEVEL_HIGH>;
-		interrupt-names = "error",
-				"ch0", "ch1", "ch2", "ch3",
-				"ch4", "ch5", "ch6", "ch7",
-				"ch8", "ch9", "ch10", "ch11",
-				"ch12", "ch13", "ch14";
-		clocks = <&mstp2_clks R8A7790_CLK_SYS_DMAC0>;
-		clock-names = "fck";
-		#dma-cells = <1>;
-		dma-channels = <15>;
-	};
-
-	dmac1: dma-controller@e6720000 {
-		compatible = "renesas,rcar-dmac";
-		reg = <0 0xe6720000 0 0x20000>;
-		interrupts = <0 220 IRQ_TYPE_LEVEL_HIGH
-			      0 216 IRQ_TYPE_LEVEL_HIGH
-			      0 217 IRQ_TYPE_LEVEL_HIGH
-			      0 218 IRQ_TYPE_LEVEL_HIGH
-			      0 219 IRQ_TYPE_LEVEL_HIGH
-			      0 308 IRQ_TYPE_LEVEL_HIGH
-			      0 309 IRQ_TYPE_LEVEL_HIGH
-			      0 310 IRQ_TYPE_LEVEL_HIGH
-			      0 311 IRQ_TYPE_LEVEL_HIGH
-			      0 312 IRQ_TYPE_LEVEL_HIGH
-			      0 313 IRQ_TYPE_LEVEL_HIGH
-			      0 314 IRQ_TYPE_LEVEL_HIGH
-			      0 315 IRQ_TYPE_LEVEL_HIGH
-			      0 316 IRQ_TYPE_LEVEL_HIGH
-			      0 317 IRQ_TYPE_LEVEL_HIGH
-			      0 318 IRQ_TYPE_LEVEL_HIGH>;
-		interrupt-names = "error",
-				"ch0", "ch1", "ch2", "ch3",
-				"ch4", "ch5", "ch6", "ch7",
-				"ch8", "ch9", "ch10", "ch11",
-				"ch12", "ch13", "ch14";
-		clocks = <&mstp2_clks R8A7790_CLK_SYS_DMAC1>;
-		clock-names = "fck";
-		#dma-cells = <1>;
-		dma-channels = <15>;
-	};
-
-	audma0: dma-controller@ec700000 {
-		compatible = "renesas,rcar-dmac";
-		reg = <0 0xec700000 0 0x10000>;
-		interrupts =	<0 346 IRQ_TYPE_LEVEL_HIGH
-				 0 320 IRQ_TYPE_LEVEL_HIGH
-				 0 321 IRQ_TYPE_LEVEL_HIGH
-				 0 322 IRQ_TYPE_LEVEL_HIGH
-				 0 323 IRQ_TYPE_LEVEL_HIGH
-				 0 324 IRQ_TYPE_LEVEL_HIGH
-				 0 325 IRQ_TYPE_LEVEL_HIGH
-				 0 326 IRQ_TYPE_LEVEL_HIGH
-				 0 327 IRQ_TYPE_LEVEL_HIGH
-				 0 328 IRQ_TYPE_LEVEL_HIGH
-				 0 329 IRQ_TYPE_LEVEL_HIGH
-				 0 330 IRQ_TYPE_LEVEL_HIGH
-				 0 331 IRQ_TYPE_LEVEL_HIGH
-				 0 332 IRQ_TYPE_LEVEL_HIGH>;
-		interrupt-names = "error",
-				"ch0", "ch1", "ch2", "ch3",
-				"ch4", "ch5", "ch6", "ch7",
-				"ch8", "ch9", "ch10", "ch11",
-				"ch12";
-		clocks = <&mstp5_clks R8A7790_CLK_AUDIO_DMAC0>;
-		clock-names = "fck";
-		#dma-cells = <1>;
-		dma-channels = <13>;
-	};
-
-	audma1: dma-controller@ec720000 {
-		compatible = "renesas,rcar-dmac";
-		reg = <0 0xec720000 0 0x10000>;
-		interrupts =	<0 347 IRQ_TYPE_LEVEL_HIGH
-				 0 333 IRQ_TYPE_LEVEL_HIGH
-				 0 334 IRQ_TYPE_LEVEL_HIGH
-				 0 335 IRQ_TYPE_LEVEL_HIGH
-				 0 336 IRQ_TYPE_LEVEL_HIGH
-				 0 337 IRQ_TYPE_LEVEL_HIGH
-				 0 338 IRQ_TYPE_LEVEL_HIGH
-				 0 339 IRQ_TYPE_LEVEL_HIGH
-				 0 340 IRQ_TYPE_LEVEL_HIGH
-				 0 341 IRQ_TYPE_LEVEL_HIGH
-				 0 342 IRQ_TYPE_LEVEL_HIGH
-				 0 343 IRQ_TYPE_LEVEL_HIGH
-				 0 344 IRQ_TYPE_LEVEL_HIGH
-				 0 345 IRQ_TYPE_LEVEL_HIGH>;
-		interrupt-names = "error",
-				"ch0", "ch1", "ch2", "ch3",
-				"ch4", "ch5", "ch6", "ch7",
-				"ch8", "ch9", "ch10", "ch11",
-				"ch12";
-		clocks = <&mstp5_clks R8A7790_CLK_AUDIO_DMAC1>;
-		clock-names = "fck";
-		#dma-cells = <1>;
-		dma-channels = <13>;
-	};
-
-	audmapp: dma-controller@ec740000 {
-		compatible = "renesas,rcar-audmapp";
-		#dma-cells = <1>;
-
-		reg = <0 0xec740000 0 0x200>;
-	};
-
-	i2c0: i2c@e6508000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7790";
-		reg = <0 0xe6508000 0 0x40>;
-		interrupts = <0 287 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp9_clks R8A7790_CLK_I2C0>;
-		status = "disabled";
-	};
-
-	i2c1: i2c@e6518000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7790";
-		reg = <0 0xe6518000 0 0x40>;
-		interrupts = <0 288 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp9_clks R8A7790_CLK_I2C1>;
-		status = "disabled";
-	};
-
-	i2c2: i2c@e6530000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7790";
-		reg = <0 0xe6530000 0 0x40>;
-		interrupts = <0 286 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp9_clks R8A7790_CLK_I2C2>;
-		status = "disabled";
-	};
-
-	i2c3: i2c@e6540000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,i2c-r8a7790";
-		reg = <0 0xe6540000 0 0x40>;
-		interrupts = <0 290 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp9_clks R8A7790_CLK_I2C3>;
-		status = "disabled";
-	};
-
-	iic0: i2c@e6500000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a7790", "renesas,rmobile-iic";
-		reg = <0 0xe6500000 0 0x425>;
-		interrupts = <0 174 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_IIC0>;
-		dmas = <&dmac0 0x61>, <&dmac0 0x62>;
-		dma-names = "tx", "rx";
-		status = "disabled";
-	};
-
-	iic1: i2c@e6510000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a7790", "renesas,rmobile-iic";
-		reg = <0 0xe6510000 0 0x425>;
-		interrupts = <0 175 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_IIC1>;
-		dmas = <&dmac0 0x65>, <&dmac0 0x66>;
-		dma-names = "tx", "rx";
-		status = "disabled";
-	};
-
-	iic2: i2c@e6520000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a7790", "renesas,rmobile-iic";
-		reg = <0 0xe6520000 0 0x425>;
-		interrupts = <0 176 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_IIC2>;
-		dmas = <&dmac0 0x69>, <&dmac0 0x6a>;
-		dma-names = "tx", "rx";
-		status = "disabled";
-	};
-
-	iic3: i2c@e60b0000 {
-		#address-cells = <1>;
-		#size-cells = <0>;
-		compatible = "renesas,iic-r8a7790", "renesas,rmobile-iic";
-		reg = <0 0xe60b0000 0 0x425>;
-		interrupts = <0 173 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp9_clks R8A7790_CLK_IICDVFS>;
-		dmas = <&dmac0 0x77>, <&dmac0 0x78>;
-		dma-names = "tx", "rx";
-		status = "disabled";
-	};
-
-	mmcif0: mmc@ee200000 {
-		compatible = "renesas,mmcif-r8a7790", "renesas,sh-mmcif";
-		reg = <0 0xee200000 0 0x80>;
-		interrupts = <0 169 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_MMCIF0>;
-		dmas = <&dmac0 0xd1>, <&dmac0 0xd2>;
-		dma-names = "tx", "rx";
-		reg-io-width = <4>;
-		status = "disabled";
-	};
-
-	mmcif1: mmc@ee220000 {
-		compatible = "renesas,mmcif-r8a7790", "renesas,sh-mmcif";
-		reg = <0 0xee220000 0 0x80>;
-		interrupts = <0 170 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_MMCIF1>;
-		dmas = <&dmac0 0xe1>, <&dmac0 0xe2>;
-		dma-names = "tx", "rx";
-		reg-io-width = <4>;
-		status = "disabled";
-	};
-
-	pfc: pfc@e6060000 {
-		compatible = "renesas,pfc-r8a7790";
-		reg = <0 0xe6060000 0 0x250>;
-	};
-
-	sdhi0: sd@ee100000 {
-		compatible = "renesas,sdhi-r8a7790";
-		reg = <0 0xee100000 0 0x200>;
-		interrupts = <0 165 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_SDHI0>;
-		status = "disabled";
-	};
-
-	sdhi1: sd@ee120000 {
-		compatible = "renesas,sdhi-r8a7790";
-		reg = <0 0xee120000 0 0x200>;
-		interrupts = <0 166 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_SDHI1>;
-		status = "disabled";
-	};
-
-	sdhi2: sd@ee140000 {
-		compatible = "renesas,sdhi-r8a7790";
-		reg = <0 0xee140000 0 0x100>;
-		interrupts = <0 167 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_SDHI2>;
-		status = "disabled";
-	};
-
-	sdhi3: sd@ee160000 {
-		compatible = "renesas,sdhi-r8a7790";
-		reg = <0 0xee160000 0 0x100>;
-		interrupts = <0 168 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_SDHI3>;
-		status = "disabled";
-	};
-
-	scifa0: serial@e6c40000 {
-		compatible = "renesas,scifa-r8a7790", "renesas,scifa";
-		reg = <0 0xe6c40000 0 64>;
-		interrupts = <0 144 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7790_CLK_SCIFA0>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifa1: serial@e6c50000 {
-		compatible = "renesas,scifa-r8a7790", "renesas,scifa";
-		reg = <0 0xe6c50000 0 64>;
-		interrupts = <0 145 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7790_CLK_SCIFA1>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifa2: serial@e6c60000 {
-		compatible = "renesas,scifa-r8a7790", "renesas,scifa";
-		reg = <0 0xe6c60000 0 64>;
-		interrupts = <0 151 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7790_CLK_SCIFA2>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifb0: serial@e6c20000 {
-		compatible = "renesas,scifb-r8a7790", "renesas,scifb";
-		reg = <0 0xe6c20000 0 64>;
-		interrupts = <0 148 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7790_CLK_SCIFB0>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifb1: serial@e6c30000 {
-		compatible = "renesas,scifb-r8a7790", "renesas,scifb";
-		reg = <0 0xe6c30000 0 64>;
-		interrupts = <0 149 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7790_CLK_SCIFB1>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifb2: serial@e6ce0000 {
-		compatible = "renesas,scifb-r8a7790", "renesas,scifb";
-		reg = <0 0xe6ce0000 0 64>;
-		interrupts = <0 150 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7790_CLK_SCIFB2>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scif0: serial@e6e60000 {
-		compatible = "renesas,scif-r8a7790", "renesas,scif";
-		reg = <0 0xe6e60000 0 64>;
-		interrupts = <0 152 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp7_clks R8A7790_CLK_SCIF0>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scif1: serial@e6e68000 {
-		compatible = "renesas,scif-r8a7790", "renesas,scif";
-		reg = <0 0xe6e68000 0 64>;
-		interrupts = <0 153 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp7_clks R8A7790_CLK_SCIF1>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	hscif0: serial@e62c0000 {
-		compatible = "renesas,hscif-r8a7790", "renesas,hscif";
-		reg = <0 0xe62c0000 0 96>;
-		interrupts = <0 154 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp7_clks R8A7790_CLK_HSCIF0>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	hscif1: serial@e62c8000 {
-		compatible = "renesas,hscif-r8a7790", "renesas,hscif";
-		reg = <0 0xe62c8000 0 96>;
-		interrupts = <0 155 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp7_clks R8A7790_CLK_HSCIF1>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	ether: ethernet@ee700000 {
-		compatible = "renesas,ether-r8a7790";
-		reg = <0 0xee700000 0 0x400>;
-		interrupts = <0 162 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp8_clks R8A7790_CLK_ETHER>;
-		phy-mode = "rmii";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		status = "disabled";
-	};
-
-	sata0: sata@ee300000 {
-		compatible = "renesas,sata-r8a7790";
-		reg = <0 0xee300000 0 0x2000>;
-		interrupts = <0 105 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp8_clks R8A7790_CLK_SATA0>;
-		status = "disabled";
-	};
-
-	sata1: sata@ee500000 {
-		compatible = "renesas,sata-r8a7790";
-		reg = <0 0xee500000 0 0x2000>;
-		interrupts = <0 106 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp8_clks R8A7790_CLK_SATA1>;
-		status = "disabled";
-	};
-
-	hsusb: usb@e6590000 {
-		compatible = "renesas,usbhs-r8a7790";
-		reg = <0 0xe6590000 0 0x100>;
-		interrupts = <0 107 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp7_clks R8A7790_CLK_HSUSB>;
-		renesas,buswait = <4>;
-		phys = <&usb0 1>;
-		phy-names = "usb";
-		status = "disabled";
-	};
-
-	usbphy: usb-phy@e6590100 {
-		compatible = "renesas,usb-phy-r8a7790";
-		reg = <0 0xe6590100 0 0x100>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		clocks = <&mstp7_clks R8A7790_CLK_HSUSB>;
-		clock-names = "usbhs";
-		status = "disabled";
-
-		usb0: usb-channel@0 {
-			reg = <0>;
-			#phy-cells = <1>;
-		};
-		usb2: usb-channel@2 {
-			reg = <2>;
-			#phy-cells = <1>;
-		};
-	};
-
-	vin0: video@e6ef0000 {
-		compatible = "renesas,vin-r8a7790";
-		clocks = <&mstp8_clks R8A7790_CLK_VIN0>;
-		reg = <0 0xe6ef0000 0 0x1000>;
-		interrupts = <0 188 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	vin1: video@e6ef1000 {
-		compatible = "renesas,vin-r8a7790";
-		clocks = <&mstp8_clks R8A7790_CLK_VIN1>;
-		reg = <0 0xe6ef1000 0 0x1000>;
-		interrupts = <0 189 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	vin2: video@e6ef2000 {
-		compatible = "renesas,vin-r8a7790";
-		clocks = <&mstp8_clks R8A7790_CLK_VIN2>;
-		reg = <0 0xe6ef2000 0 0x1000>;
-		interrupts = <0 190 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	vin3: video@e6ef3000 {
-		compatible = "renesas,vin-r8a7790";
-		clocks = <&mstp8_clks R8A7790_CLK_VIN3>;
-		reg = <0 0xe6ef3000 0 0x1000>;
-		interrupts = <0 191 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-	};
-
-	vsp1@fe920000 {
-		compatible = "renesas,vsp1";
-		reg = <0 0xfe920000 0 0x8000>;
-		interrupts = <0 266 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks R8A7790_CLK_VSP1_R>;
-
-		renesas,has-sru;
-		renesas,#rpf = <5>;
-		renesas,#uds = <1>;
-		renesas,#wpf = <4>;
-	};
-
-	vsp1@fe928000 {
-		compatible = "renesas,vsp1";
-		reg = <0 0xfe928000 0 0x8000>;
-		interrupts = <0 267 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks R8A7790_CLK_VSP1_S>;
-
-		renesas,has-lut;
-		renesas,has-sru;
-		renesas,#rpf = <5>;
-		renesas,#uds = <3>;
-		renesas,#wpf = <4>;
-	};
-
-	vsp1@fe930000 {
-		compatible = "renesas,vsp1";
-		reg = <0 0xfe930000 0 0x8000>;
-		interrupts = <0 246 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks R8A7790_CLK_VSP1_DU0>;
-
-		renesas,has-lif;
-		renesas,has-lut;
-		renesas,#rpf = <4>;
-		renesas,#uds = <1>;
-		renesas,#wpf = <4>;
-	};
-
-	vsp1@fe938000 {
-		compatible = "renesas,vsp1";
-		reg = <0 0xfe938000 0 0x8000>;
-		interrupts = <0 247 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks R8A7790_CLK_VSP1_DU1>;
-
-		renesas,has-lif;
-		renesas,has-lut;
-		renesas,#rpf = <4>;
-		renesas,#uds = <1>;
-		renesas,#wpf = <4>;
-	};
-
-	du: display@feb00000 {
-		compatible = "renesas,du-r8a7790";
-		reg = <0 0xfeb00000 0 0x70000>,
-		      <0 0xfeb90000 0 0x1c>,
-		      <0 0xfeb94000 0 0x1c>;
-		reg-names = "du", "lvds.0", "lvds.1";
-		interrupts = <0 256 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 268 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 269 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp7_clks R8A7790_CLK_DU0>,
-			 <&mstp7_clks R8A7790_CLK_DU1>,
-			 <&mstp7_clks R8A7790_CLK_DU2>,
-			 <&mstp7_clks R8A7790_CLK_LVDS0>,
-			 <&mstp7_clks R8A7790_CLK_LVDS1>;
-		clock-names = "du.0", "du.1", "du.2", "lvds.0", "lvds.1";
-		status = "disabled";
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@0 {
-				reg = <0>;
-				du_out_rgb: endpoint {
-				};
-			};
-			port@1 {
-				reg = <1>;
-				du_out_lvds0: endpoint {
-				};
-			};
-			port@2 {
-				reg = <2>;
-				du_out_lvds1: endpoint {
-				};
-			};
-		};
-	};
-
-	clocks {
-		#address-cells = <2>;
-		#size-cells = <2>;
-		ranges;
-
-		/* External root clock */
-		extal_clk: extal_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			/* This value must be overriden by the board. */
-			clock-frequency = <0>;
-			clock-output-names = "extal";
-		};
-
-		/* External PCIe clock - can be overridden by the board */
-		pcie_bus_clk: pcie_bus_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <100000000>;
-			clock-output-names = "pcie_bus";
-			status = "disabled";
-		};
-
-		/*
-		 * The external audio clocks are configured as 0 Hz fixed frequency clocks by
-		 * default. Boards that provide audio clocks should override them.
-		 */
-		audio_clk_a: audio_clk_a {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-			clock-output-names = "audio_clk_a";
-		};
-		audio_clk_b: audio_clk_b {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-			clock-output-names = "audio_clk_b";
-		};
-		audio_clk_c: audio_clk_c {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-			clock-output-names = "audio_clk_c";
-		};
-
-		/* Special CPG clocks */
-		cpg_clocks: cpg_clocks@e6150000 {
-			compatible = "renesas,r8a7790-cpg-clocks",
-				     "renesas,rcar-gen2-cpg-clocks";
-			reg = <0 0xe6150000 0 0x1000>;
-			clocks = <&extal_clk>;
-			#clock-cells = <1>;
-			clock-output-names = "main", "pll0", "pll1", "pll3",
-					     "lb", "qspi", "sdh", "sd0", "sd1",
-					     "z";
-		};
-
-		/* Variable factor clocks */
-		sd2_clk: sd2_clk@e6150078 {
-			compatible = "renesas,r8a7790-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0 0xe6150078 0 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "sd2";
-		};
-		sd3_clk: sd3_clk@e615026c {
-			compatible = "renesas,r8a7790-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0 0xe615026c 0 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "sd3";
-		};
-		mmc0_clk: mmc0_clk@e6150240 {
-			compatible = "renesas,r8a7790-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0 0xe6150240 0 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "mmc0";
-		};
-		mmc1_clk: mmc1_clk@e6150244 {
-			compatible = "renesas,r8a7790-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0 0xe6150244 0 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "mmc1";
-		};
-		ssp_clk: ssp_clk@e6150248 {
-			compatible = "renesas,r8a7790-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0 0xe6150248 0 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "ssp";
-		};
-		ssprs_clk: ssprs_clk@e615024c {
-			compatible = "renesas,r8a7790-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0 0xe615024c 0 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "ssprs";
-		};
-
-		/* Fixed factor clocks */
-		pll1_div2_clk: pll1_div2_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <2>;
-			clock-mult = <1>;
-			clock-output-names = "pll1_div2";
-		};
-		z2_clk: z2_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <2>;
-			clock-mult = <1>;
-			clock-output-names = "z2";
-		};
-		zg_clk: zg_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <3>;
-			clock-mult = <1>;
-			clock-output-names = "zg";
-		};
-		zx_clk: zx_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <3>;
-			clock-mult = <1>;
-			clock-output-names = "zx";
-		};
-		zs_clk: zs_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <6>;
-			clock-mult = <1>;
-			clock-output-names = "zs";
-		};
-		hp_clk: hp_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <12>;
-			clock-mult = <1>;
-			clock-output-names = "hp";
-		};
-		i_clk: i_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <2>;
-			clock-mult = <1>;
-			clock-output-names = "i";
-		};
-		b_clk: b_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <12>;
-			clock-mult = <1>;
-			clock-output-names = "b";
-		};
-		p_clk: p_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <24>;
-			clock-mult = <1>;
-			clock-output-names = "p";
-		};
-		cl_clk: cl_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <48>;
-			clock-mult = <1>;
-			clock-output-names = "cl";
-		};
-		m2_clk: m2_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <8>;
-			clock-mult = <1>;
-			clock-output-names = "m2";
-		};
-		imp_clk: imp_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <4>;
-			clock-mult = <1>;
-			clock-output-names = "imp";
-		};
-		rclk_clk: rclk_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <(48 * 1024)>;
-			clock-mult = <1>;
-			clock-output-names = "rclk";
-		};
-		oscclk_clk: oscclk_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <(12 * 1024)>;
-			clock-mult = <1>;
-			clock-output-names = "oscclk";
-		};
-		zb3_clk: zb3_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL3>;
-			#clock-cells = <0>;
-			clock-div = <4>;
-			clock-mult = <1>;
-			clock-output-names = "zb3";
-		};
-		zb3d2_clk: zb3d2_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL3>;
-			#clock-cells = <0>;
-			clock-div = <8>;
-			clock-mult = <1>;
-			clock-output-names = "zb3d2";
-		};
-		ddr_clk: ddr_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks R8A7790_CLK_PLL3>;
-			#clock-cells = <0>;
-			clock-div = <8>;
-			clock-mult = <1>;
-			clock-output-names = "ddr";
-		};
-		mp_clk: mp_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-div = <15>;
-			clock-mult = <1>;
-			clock-output-names = "mp";
-		};
-		cp_clk: cp_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&extal_clk>;
-			#clock-cells = <0>;
-			clock-div = <2>;
-			clock-mult = <1>;
-			clock-output-names = "cp";
-		};
-
-		/* Gate clocks */
-		mstp0_clks: mstp0_clks@e6150130 {
-			compatible = "renesas,r8a7790-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0 0xe6150130 0 4>, <0 0xe6150030 0 4>;
-			clocks = <&mp_clk>;
-			#clock-cells = <1>;
-			clock-indices = <R8A7790_CLK_MSIOF0>;
-			clock-output-names = "msiof0";
-		};
-		mstp1_clks: mstp1_clks@e6150134 {
-			compatible = "renesas,r8a7790-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0 0xe6150134 0 4>, <0 0xe6150038 0 4>;
-			clocks = <&zs_clk>, <&zs_clk>, <&zs_clk>, <&zs_clk>, <&m2_clk>,
-				 <&zs_clk>, <&p_clk>, <&zg_clk>, <&zs_clk>, <&zs_clk>,
-				 <&zs_clk>, <&zs_clk>, <&p_clk>, <&p_clk>, <&rclk_clk>,
-				 <&cp_clk>, <&zs_clk>, <&zs_clk>, <&zs_clk>, <&zs_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7790_CLK_VCP1 R8A7790_CLK_VCP0 R8A7790_CLK_VPC1
-				R8A7790_CLK_VPC0 R8A7790_CLK_JPU R8A7790_CLK_SSP1
-				R8A7790_CLK_TMU1 R8A7790_CLK_3DG R8A7790_CLK_2DDMAC
-				R8A7790_CLK_FDP1_2 R8A7790_CLK_FDP1_1 R8A7790_CLK_FDP1_0
-				R8A7790_CLK_TMU3 R8A7790_CLK_TMU2 R8A7790_CLK_CMT0
-				R8A7790_CLK_TMU0 R8A7790_CLK_VSP1_DU1 R8A7790_CLK_VSP1_DU0
-				R8A7790_CLK_VSP1_R R8A7790_CLK_VSP1_S
-			>;
-			clock-output-names =
-				"vcp1", "vcp0", "vpc1", "vpc0", "jpu", "ssp1",
-				"tmu1", "3dg", "2ddmac", "fdp1-2", "fdp1-1",
-				"fdp1-0", "tmu3", "tmu2", "cmt0", "tmu0",
-				"vsp1-du1", "vsp1-du0", "vsp1-rt", "vsp1-sy";
-		};
-		mstp2_clks: mstp2_clks@e6150138 {
-			compatible = "renesas,r8a7790-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0 0xe6150138 0 4>, <0 0xe6150040 0 4>;
-			clocks = <&mp_clk>, <&mp_clk>, <&mp_clk>, <&mp_clk>, <&mp_clk>,
-				 <&mp_clk>, <&mp_clk>, <&mp_clk>, <&mp_clk>, <&zs_clk>,
-				 <&zs_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7790_CLK_SCIFA2 R8A7790_CLK_SCIFA1 R8A7790_CLK_SCIFA0
-				R8A7790_CLK_MSIOF2 R8A7790_CLK_SCIFB0 R8A7790_CLK_SCIFB1
-				R8A7790_CLK_MSIOF1 R8A7790_CLK_MSIOF3 R8A7790_CLK_SCIFB2
-				R8A7790_CLK_SYS_DMAC1 R8A7790_CLK_SYS_DMAC0
-			>;
-			clock-output-names =
-				"scifa2", "scifa1", "scifa0", "msiof2", "scifb0",
-				"scifb1", "msiof1", "msiof3", "scifb2",
-				"sys-dmac1", "sys-dmac0";
-		};
-		mstp3_clks: mstp3_clks@e615013c {
-			compatible = "renesas,r8a7790-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0 0xe615013c 0 4>, <0 0xe6150048 0 4>;
-			clocks = <&hp_clk>, <&cp_clk>, <&mmc1_clk>, <&sd3_clk>,
-				 <&sd2_clk>, <&cpg_clocks R8A7790_CLK_SD1>, <&cpg_clocks R8A7790_CLK_SD0>, <&mmc0_clk>,
-				 <&hp_clk>, <&mp_clk>, <&hp_clk>, <&mp_clk>, <&rclk_clk>,
-				 <&hp_clk>, <&hp_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7790_CLK_IIC2 R8A7790_CLK_TPU0 R8A7790_CLK_MMCIF1 R8A7790_CLK_SDHI3
-				R8A7790_CLK_SDHI2 R8A7790_CLK_SDHI1 R8A7790_CLK_SDHI0 R8A7790_CLK_MMCIF0
-				R8A7790_CLK_IIC0 R8A7790_CLK_PCIEC R8A7790_CLK_IIC1 R8A7790_CLK_SSUSB R8A7790_CLK_CMT1
-				R8A7790_CLK_USBDMAC0 R8A7790_CLK_USBDMAC1
-			>;
-			clock-output-names =
-				"iic2", "tpu0", "mmcif1", "sdhi3",
-				"sdhi2", "sdhi1", "sdhi0", "mmcif0",
-				"iic0", "pciec", "iic1", "ssusb", "cmt1",
-				"usbdmac0", "usbdmac1";
-		};
-		mstp5_clks: mstp5_clks@e6150144 {
-			compatible = "renesas,r8a7790-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0 0xe6150144 0 4>, <0 0xe615003c 0 4>;
-			clocks = <&hp_clk>, <&hp_clk>, <&extal_clk>, <&p_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7790_CLK_AUDIO_DMAC0 R8A7790_CLK_AUDIO_DMAC1
-				R8A7790_CLK_THERMAL R8A7790_CLK_PWM
-			>;
-			clock-output-names = "audmac0", "audmac1", "thermal", "pwm";
-		};
-		mstp7_clks: mstp7_clks@e615014c {
-			compatible = "renesas,r8a7790-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0 0xe615014c 0 4>, <0 0xe61501c4 0 4>;
-			clocks = <&mp_clk>, <&mp_clk>, <&zs_clk>, <&zs_clk>, <&p_clk>,
-				 <&p_clk>, <&zx_clk>, <&zx_clk>, <&zx_clk>, <&zx_clk>,
-				 <&zx_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7790_CLK_EHCI R8A7790_CLK_HSUSB R8A7790_CLK_HSCIF1
-				R8A7790_CLK_HSCIF0 R8A7790_CLK_SCIF1 R8A7790_CLK_SCIF0
-				R8A7790_CLK_DU2 R8A7790_CLK_DU1 R8A7790_CLK_DU0
-				R8A7790_CLK_LVDS1 R8A7790_CLK_LVDS0
-			>;
-			clock-output-names =
-				"ehci", "hsusb", "hscif1", "hscif0", "scif1",
-				"scif0", "du2", "du1", "du0", "lvds1", "lvds0";
-		};
-		mstp8_clks: mstp8_clks@e6150990 {
-			compatible = "renesas,r8a7790-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0 0xe6150990 0 4>, <0 0xe61509a0 0 4>;
-			clocks = <&hp_clk>, <&zg_clk>, <&zg_clk>, <&zg_clk>,
-			         <&zg_clk>, <&p_clk>, <&zs_clk>, <&zs_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7790_CLK_MLB R8A7790_CLK_VIN3 R8A7790_CLK_VIN2
-				R8A7790_CLK_VIN1 R8A7790_CLK_VIN0 R8A7790_CLK_ETHER
-				R8A7790_CLK_SATA1 R8A7790_CLK_SATA0
-			>;
-			clock-output-names =
-				"mlb", "vin3", "vin2", "vin1", "vin0", "ether",
-				"sata1", "sata0";
-		};
-		mstp9_clks: mstp9_clks@e6150994 {
-			compatible = "renesas,r8a7790-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0 0xe6150994 0 4>, <0 0xe61509a4 0 4>;
-			clocks = <&cp_clk>, <&cp_clk>, <&cp_clk>,
-				 <&cp_clk>, <&cp_clk>, <&cp_clk>,
-				 <&p_clk>, <&p_clk>, <&cpg_clocks R8A7790_CLK_QSPI>, <&cp_clk>,
-				 <&hp_clk>, <&hp_clk>, <&hp_clk>, <&hp_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7790_CLK_GPIO5 R8A7790_CLK_GPIO4 R8A7790_CLK_GPIO3
-				R8A7790_CLK_GPIO2 R8A7790_CLK_GPIO1 R8A7790_CLK_GPIO0
-				R8A7790_CLK_RCAN1 R8A7790_CLK_RCAN0 R8A7790_CLK_QSPI_MOD R8A7790_CLK_IICDVFS
-				R8A7790_CLK_I2C3 R8A7790_CLK_I2C2 R8A7790_CLK_I2C1 R8A7790_CLK_I2C0
-			>;
-			clock-output-names =
-				"gpio5", "gpio4", "gpio3", "gpio2", "gpio1", "gpio0",
-				"rcan1", "rcan0", "qspi_mod", "iic3",
-				"i2c3", "i2c2", "i2c1", "i2c0";
-		};
-		mstp10_clks: mstp10_clks@e6150998 {
-			compatible = "renesas,r8a7790-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0 0xe6150998 0 4>, <0 0xe61509a8 0 4>;
-			clocks = <&p_clk>,
-				<&p_clk>, <&p_clk>, <&p_clk>, <&p_clk>, <&p_clk>,
-				<&p_clk>, <&p_clk>, <&p_clk>, <&p_clk>, <&p_clk>,
-				<&p_clk>,
-				<&mstp10_clks R8A7790_CLK_SCU_ALL>, <&mstp10_clks R8A7790_CLK_SCU_ALL>,
-				<&mstp10_clks R8A7790_CLK_SCU_ALL>, <&mstp10_clks R8A7790_CLK_SCU_ALL>,
-				<&mstp10_clks R8A7790_CLK_SCU_ALL>, <&mstp10_clks R8A7790_CLK_SCU_ALL>,
-				<&mstp10_clks R8A7790_CLK_SCU_ALL>, <&mstp10_clks R8A7790_CLK_SCU_ALL>,
-				<&mstp10_clks R8A7790_CLK_SCU_ALL>, <&mstp10_clks R8A7790_CLK_SCU_ALL>,
-				<&mstp10_clks R8A7790_CLK_SCU_ALL>, <&mstp10_clks R8A7790_CLK_SCU_ALL>;
-
-			#clock-cells = <1>;
-			clock-indices = <
-				R8A7790_CLK_SSI_ALL
-				R8A7790_CLK_SSI9 R8A7790_CLK_SSI8 R8A7790_CLK_SSI7 R8A7790_CLK_SSI6 R8A7790_CLK_SSI5
-				R8A7790_CLK_SSI4 R8A7790_CLK_SSI3 R8A7790_CLK_SSI2 R8A7790_CLK_SSI1 R8A7790_CLK_SSI0
-				R8A7790_CLK_SCU_ALL
-				R8A7790_CLK_SCU_DVC1 R8A7790_CLK_SCU_DVC0
-				R8A7790_CLK_SCU_SRC9 R8A7790_CLK_SCU_SRC8 R8A7790_CLK_SCU_SRC7 R8A7790_CLK_SCU_SRC6 R8A7790_CLK_SCU_SRC5
-				R8A7790_CLK_SCU_SRC4 R8A7790_CLK_SCU_SRC3 R8A7790_CLK_SCU_SRC2 R8A7790_CLK_SCU_SRC1 R8A7790_CLK_SCU_SRC0
-			>;
-			clock-output-names =
-				"ssi-all",
-				"ssi9", "ssi8", "ssi7", "ssi6", "ssi5",
-				"ssi4", "ssi3", "ssi2", "ssi1", "ssi0",
-				"scu-all",
-				"scu-dvc1", "scu-dvc0",
-				"scu-src9", "scu-src8", "scu-src7", "scu-src6", "scu-src5",
-				"scu-src4", "scu-src3", "scu-src2", "scu-src1", "scu-src0";
-		};
-	};
-
-	qspi: spi@e6b10000 {
-		compatible = "renesas,qspi-r8a7790", "renesas,qspi";
-		reg = <0 0xe6b10000 0 0x2c>;
-		interrupts = <0 184 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp9_clks R8A7790_CLK_QSPI_MOD>;
-		dmas = <&dmac0 0x17>, <&dmac0 0x18>;
-		dma-names = "tx", "rx";
-		num-cs = <1>;
-		#address-cells = <1>;
-		#size-cells = <0>;
-		status = "disabled";
-	};
-
-	msiof0: spi@e6e20000 {
-		compatible = "renesas,msiof-r8a7790";
-		reg = <0 0xe6e20000 0 0x0064>, <0 0xe7e20000 0 0x0064>;
-		interrupts = <0 156 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks R8A7790_CLK_MSIOF0>;
-		dmas = <&dmac0 0x51>, <&dmac0 0x52>;
-		dma-names = "tx", "rx";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		status = "disabled";
-	};
-
-	msiof1: spi@e6e10000 {
-		compatible = "renesas,msiof-r8a7790";
-		reg = <0 0xe6e10000 0 0x0064>, <0 0xe7e10000 0 0x0064>;
-		interrupts = <0 157 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7790_CLK_MSIOF1>;
-		dmas = <&dmac0 0x55>, <&dmac0 0x56>;
-		dma-names = "tx", "rx";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		status = "disabled";
-	};
-
-	msiof2: spi@e6e00000 {
-		compatible = "renesas,msiof-r8a7790";
-		reg = <0 0xe6e00000 0 0x0064>, <0 0xe7e00000 0 0x0064>;
-		interrupts = <0 158 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7790_CLK_MSIOF2>;
-		dmas = <&dmac0 0x41>, <&dmac0 0x42>;
-		dma-names = "tx", "rx";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		status = "disabled";
-	};
-
-	msiof3: spi@e6c90000 {
-		compatible = "renesas,msiof-r8a7790";
-		reg = <0 0xe6c90000 0 0x0064>, <0 0xe7c90000 0 0x0064>;
-		interrupts = <0 159 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks R8A7790_CLK_MSIOF3>;
-		dmas = <&dmac0 0x45>, <&dmac0 0x46>;
-		dma-names = "tx", "rx";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		status = "disabled";
-	};
-
-	xhci: usb@ee000000 {
-		compatible = "renesas,xhci-r8a7790";
-		reg = <0 0xee000000 0 0xc00>;
-		interrupts = <0 101 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_SSUSB>;
-		phys = <&usb2 1>;
-		phy-names = "usb";
-		status = "disabled";
-	};
-
-	pci0: pci@ee090000 {
-		compatible = "renesas,pci-r8a7790";
-		device_type = "pci";
-		clocks = <&mstp7_clks R8A7790_CLK_EHCI>;
-		reg = <0 0xee090000 0 0xc00>,
-		      <0 0xee080000 0 0x1100>;
-		interrupts = <0 108 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-
-		bus-range = <0 0>;
-		#address-cells = <3>;
-		#size-cells = <2>;
-		#interrupt-cells = <1>;
-		ranges = <0x02000000 0 0xee080000 0 0xee080000 0 0x00010000>;
-		interrupt-map-mask = <0xff00 0 0 0x7>;
-		interrupt-map = <0x0000 0 0 1 &gic 0 108 IRQ_TYPE_LEVEL_HIGH
-				 0x0800 0 0 1 &gic 0 108 IRQ_TYPE_LEVEL_HIGH
-				 0x1000 0 0 2 &gic 0 108 IRQ_TYPE_LEVEL_HIGH>;
-
-		usb@0,1 {
-			reg = <0x800 0 0 0 0>;
-			device_type = "pci";
-			phys = <&usb0 0>;
-			phy-names = "usb";
-		};
-
-		usb@0,2 {
-			reg = <0x1000 0 0 0 0>;
-			device_type = "pci";
-			phys = <&usb0 0>;
-			phy-names = "usb";
-		};
-	};
-
-	pci1: pci@ee0b0000 {
-		compatible = "renesas,pci-r8a7790";
-		device_type = "pci";
-		clocks = <&mstp7_clks R8A7790_CLK_EHCI>;
-		reg = <0 0xee0b0000 0 0xc00>,
-		      <0 0xee0a0000 0 0x1100>;
-		interrupts = <0 112 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-
-		bus-range = <1 1>;
-		#address-cells = <3>;
-		#size-cells = <2>;
-		#interrupt-cells = <1>;
-		ranges = <0x02000000 0 0xee0a0000 0 0xee0a0000 0 0x00010000>;
-		interrupt-map-mask = <0xff00 0 0 0x7>;
-		interrupt-map = <0x0000 0 0 1 &gic 0 112 IRQ_TYPE_LEVEL_HIGH
-				 0x0800 0 0 1 &gic 0 112 IRQ_TYPE_LEVEL_HIGH
-				 0x1000 0 0 2 &gic 0 112 IRQ_TYPE_LEVEL_HIGH>;
-	};
-
-	pci2: pci@ee0d0000 {
-		compatible = "renesas,pci-r8a7790";
-		device_type = "pci";
-		clocks = <&mstp7_clks R8A7790_CLK_EHCI>;
-		reg = <0 0xee0d0000 0 0xc00>,
-		      <0 0xee0c0000 0 0x1100>;
-		interrupts = <0 113 IRQ_TYPE_LEVEL_HIGH>;
-		status = "disabled";
-
-		bus-range = <2 2>;
-		#address-cells = <3>;
-		#size-cells = <2>;
-		#interrupt-cells = <1>;
-		ranges = <0x02000000 0 0xee0c0000 0 0xee0c0000 0 0x00010000>;
-		interrupt-map-mask = <0xff00 0 0 0x7>;
-		interrupt-map = <0x0000 0 0 1 &gic 0 113 IRQ_TYPE_LEVEL_HIGH
-				 0x0800 0 0 1 &gic 0 113 IRQ_TYPE_LEVEL_HIGH
-				 0x1000 0 0 2 &gic 0 113 IRQ_TYPE_LEVEL_HIGH>;
-
-		usb@0,1 {
-			reg = <0x800 0 0 0 0>;
-			device_type = "pci";
-			phys = <&usb2 0>;
-			phy-names = "usb";
-		};
-
-		usb@0,2 {
-			reg = <0x1000 0 0 0 0>;
-			device_type = "pci";
-			phys = <&usb2 0>;
-			phy-names = "usb";
-		};
-	};
-
-	pciec: pcie@fe000000 {
-		compatible = "renesas,pcie-r8a7790";
-		reg = <0 0xfe000000 0 0x80000>;
-		#address-cells = <3>;
-		#size-cells = <2>;
-		bus-range = <0x00 0xff>;
-		device_type = "pci";
-		ranges = <0x01000000 0 0x00000000 0 0xfe100000 0 0x00100000
-			  0x02000000 0 0xfe200000 0 0xfe200000 0 0x00200000
-			  0x02000000 0 0x30000000 0 0x30000000 0 0x08000000
-			  0x42000000 0 0x38000000 0 0x38000000 0 0x08000000>;
-		/* Map all possible DDR as inbound ranges */
-		dma-ranges = <0x42000000 0 0x40000000 0 0x40000000 0 0x80000000
-			      0x43000000 1 0x80000000 1 0x80000000 0 0x80000000>;
-		interrupts = <0 116 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 117 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 118 IRQ_TYPE_LEVEL_HIGH>;
-		#interrupt-cells = <1>;
-		interrupt-map-mask = <0 0 0 0>;
-		interrupt-map = <0 0 0 0 &gic 0 116 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks R8A7790_CLK_PCIEC>, <&pcie_bus_clk>;
-		clock-names = "pcie", "pcie_bus";
-		status = "disabled";
-	};
-
-	rcar_sound: rcar_sound@ec500000 {
-		/*
-		 * #sound-dai-cells is required
-		 *
-		 * Single DAI : #sound-dai-cells = <0>;         <&rcar_sound>;
-		 * Multi  DAI : #sound-dai-cells = <1>;         <&rcar_sound N>;
-		 */
-		compatible =  "renesas,rcar_sound-r8a7790", "renesas,rcar_sound-gen2";
-		reg =	<0 0xec500000 0 0x1000>, /* SCU */
-			<0 0xec5a0000 0 0x100>,  /* ADG */
-			<0 0xec540000 0 0x1000>, /* SSIU */
-			<0 0xec541000 0 0x1280>; /* SSI */
-		clocks = <&mstp10_clks R8A7790_CLK_SSI_ALL>,
-			<&mstp10_clks R8A7790_CLK_SSI9>, <&mstp10_clks R8A7790_CLK_SSI8>,
-			<&mstp10_clks R8A7790_CLK_SSI7>, <&mstp10_clks R8A7790_CLK_SSI6>,
-			<&mstp10_clks R8A7790_CLK_SSI5>, <&mstp10_clks R8A7790_CLK_SSI4>,
-			<&mstp10_clks R8A7790_CLK_SSI3>, <&mstp10_clks R8A7790_CLK_SSI2>,
-			<&mstp10_clks R8A7790_CLK_SSI1>, <&mstp10_clks R8A7790_CLK_SSI0>,
-			<&mstp10_clks R8A7790_CLK_SCU_SRC9>, <&mstp10_clks R8A7790_CLK_SCU_SRC8>,
-			<&mstp10_clks R8A7790_CLK_SCU_SRC7>, <&mstp10_clks R8A7790_CLK_SCU_SRC6>,
-			<&mstp10_clks R8A7790_CLK_SCU_SRC5>, <&mstp10_clks R8A7790_CLK_SCU_SRC4>,
-			<&mstp10_clks R8A7790_CLK_SCU_SRC3>, <&mstp10_clks R8A7790_CLK_SCU_SRC2>,
-			<&mstp10_clks R8A7790_CLK_SCU_SRC1>, <&mstp10_clks R8A7790_CLK_SCU_SRC0>,
-			<&mstp10_clks R8A7790_CLK_SCU_DVC0>, <&mstp10_clks R8A7790_CLK_SCU_DVC1>,
-			<&audio_clk_a>, <&audio_clk_b>, <&audio_clk_c>, <&m2_clk>;
-		clock-names = "ssi-all",
-				"ssi.9", "ssi.8", "ssi.7", "ssi.6", "ssi.5",
-				"ssi.4", "ssi.3", "ssi.2", "ssi.1", "ssi.0",
-				"src.9", "src.8", "src.7", "src.6", "src.5",
-				"src.4", "src.3", "src.2", "src.1", "src.0",
-				"dvc.0", "dvc.1",
-				"clk_a", "clk_b", "clk_c", "clk_i";
-
-		status = "disabled";
-
-		rcar_sound,dvc {
-			dvc0: dvc@0 { };
-			dvc1: dvc@1 { };
-		};
-
-		rcar_sound,src {
-			src0: src@0 { interrupts = <0 352 IRQ_TYPE_LEVEL_HIGH>; };
-			src1: src@1 { interrupts = <0 353 IRQ_TYPE_LEVEL_HIGH>; };
-			src2: src@2 { interrupts = <0 354 IRQ_TYPE_LEVEL_HIGH>; };
-			src3: src@3 { interrupts = <0 355 IRQ_TYPE_LEVEL_HIGH>; };
-			src4: src@4 { interrupts = <0 356 IRQ_TYPE_LEVEL_HIGH>; };
-			src5: src@5 { interrupts = <0 357 IRQ_TYPE_LEVEL_HIGH>; };
-			src6: src@6 { interrupts = <0 358 IRQ_TYPE_LEVEL_HIGH>; };
-			src7: src@7 { interrupts = <0 359 IRQ_TYPE_LEVEL_HIGH>; };
-			src8: src@8 { interrupts = <0 360 IRQ_TYPE_LEVEL_HIGH>; };
-			src9: src@9 { interrupts = <0 361 IRQ_TYPE_LEVEL_HIGH>; };
-		};
-
-		rcar_sound,ssi {
-			ssi0: ssi@0 { interrupts = <0 370 IRQ_TYPE_LEVEL_HIGH>; };
-			ssi1: ssi@1 { interrupts = <0 371 IRQ_TYPE_LEVEL_HIGH>; };
-			ssi2: ssi@2 { interrupts = <0 372 IRQ_TYPE_LEVEL_HIGH>; };
-			ssi3: ssi@3 { interrupts = <0 373 IRQ_TYPE_LEVEL_HIGH>; };
-			ssi4: ssi@4 { interrupts = <0 374 IRQ_TYPE_LEVEL_HIGH>; };
-			ssi5: ssi@5 { interrupts = <0 375 IRQ_TYPE_LEVEL_HIGH>; };
-			ssi6: ssi@6 { interrupts = <0 376 IRQ_TYPE_LEVEL_HIGH>; };
-			ssi7: ssi@7 { interrupts = <0 377 IRQ_TYPE_LEVEL_HIGH>; };
-			ssi8: ssi@8 { interrupts = <0 378 IRQ_TYPE_LEVEL_HIGH>; };
-			ssi9: ssi@9 { interrupts = <0 379 IRQ_TYPE_LEVEL_HIGH>; };
-		};
+		interrupt-parent = <&gic>;
+		interrupts = <0 0 4>, <0 1 4>, <0 2 4>,	<0 3 4>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/sama5d3.dtsi b/arch/arm/boot/dts/sama5d3.dtsi
--- a/arch/arm/boot/dts/sama5d3.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sama5d3.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /*
  * sama5d3.dtsi - Device Tree Include file for SAMA5D3 family SoC
- *                applies to SAMA5D31, SAMA5D33, SAMA5D34, SAMA5D35, SAMA5D36 SoC
+ *                applies to SAMA5D31, SAMA5D33, SAMA5D34, SAMA5D35 SoC
  *
  *  Copyright (C) 2013 Atmel,
  *                2013 Ludovic Desroches <ludovic.desroches@atmel.com>
@@ -8,12 +8,7 @@
  * Licensed under GPLv2 or later.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/dma/at91.h>
-#include <dt-bindings/pinctrl/at91.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/clock/at91.h>
+/include/ "skeleton.dtsi"
 
 / {
 	model = "Atmel SAMA5D3 family SoC";
@@ -32,12 +27,12 @@
 		gpio3 = &pioD;
 		gpio4 = &pioE;
 		tcb0 = &tcb0;
+		tcb1 = &tcb1;
 		i2c0 = &i2c0;
 		i2c1 = &i2c1;
 		i2c2 = &i2c2;
 		ssc0 = &ssc0;
 		ssc1 = &ssc1;
-		pwm0 = &pwm0;
 	};
 	cpus {
 		#address-cells = <1>;
@@ -49,40 +44,10 @@
 		};
 	};
 
-	pmu {
-		compatible = "arm,cortex-a5-pmu";
-		interrupts = <46 IRQ_TYPE_LEVEL_HIGH 0>;
-	};
-
 	memory {
 		reg = <0x20000000 0x8000000>;
 	};
 
-	clocks {
-		slow_xtal: slow_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		main_xtal: main_xtal {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-		};
-
-		adc_op_clk: adc_op_clk{
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <20000000>;
-		};
-	};
-
-	sram: sram@00300000 {
-		compatible = "mmio-sram";
-		reg = <0x00300000 0x20000>;
-	};
-
 	ahb {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -98,194 +63,177 @@
 			mmc0: mmc@f0000000 {
 				compatible = "atmel,hsmci";
 				reg = <0xf0000000 0x600>;
-				interrupts = <21 IRQ_TYPE_LEVEL_HIGH 0>;
-				dmas = <&dma0 2 AT91_DMA_CFG_PER_ID(0)>;
+				interrupts = <21 4 0>;
+				dmas = <&dma0 2 0>;
 				dma-names = "rxtx";
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_mmc0_clk_cmd_dat0 &pinctrl_mmc0_dat1_3 &pinctrl_mmc0_dat4_7>;
 				status = "disabled";
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&mci0_clk>;
-				clock-names = "mci_clk";
 			};
 
 			spi0: spi@f0004000 {
 				#address-cells = <1>;
 				#size-cells = <0>;
-				compatible = "atmel,at91rm9200-spi";
+				compatible = "atmel,at91sam9x5-spi";
 				reg = <0xf0004000 0x100>;
-				interrupts = <24 IRQ_TYPE_LEVEL_HIGH 3>;
-				dmas = <&dma0 2 AT91_DMA_CFG_PER_ID(1)>,
-				       <&dma0 2 AT91_DMA_CFG_PER_ID(2)>;
-				dma-names = "tx", "rx";
+				interrupts = <24 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi0>;
-				clocks = <&spi0_clk>;
-				clock-names = "spi_clk";
 				status = "disabled";
 			};
 
 			ssc0: ssc@f0008000 {
 				compatible = "atmel,at91sam9g45-ssc";
 				reg = <0xf0008000 0x4000>;
-				interrupts = <38 IRQ_TYPE_LEVEL_HIGH 4>;
-				dmas = <&dma0 2 AT91_DMA_CFG_PER_ID(13)>,
-				       <&dma0 2 AT91_DMA_CFG_PER_ID(14)>;
-				dma-names = "tx", "rx";
+				interrupts = <38 4 4>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc0_tx &pinctrl_ssc0_rx>;
-				clocks = <&ssc0_clk>;
-				clock-names = "pclk";
+				status = "disabled";
+			};
+
+			can0: can@f000c000 {
+				compatible = "atmel,at91sam9x5-can";
+				reg = <0xf000c000 0x300>;
+				interrupts = <40 4 3>;
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_can0_rx_tx>;
 				status = "disabled";
 			};
 
 			tcb0: timer@f0010000 {
 				compatible = "atmel,at91sam9x5-tcb";
 				reg = <0xf0010000 0x100>;
-				interrupts = <26 IRQ_TYPE_LEVEL_HIGH 0>;
-				clocks = <&tcb0_clk>;
-				clock-names = "t0_clk";
+				interrupts = <26 4 0>;
 			};
 
 			i2c0: i2c@f0014000 {
 				compatible = "atmel,at91sam9x5-i2c";
 				reg = <0xf0014000 0x4000>;
-				interrupts = <18 IRQ_TYPE_LEVEL_HIGH 6>;
-				dmas = <&dma0 2 AT91_DMA_CFG_PER_ID(7)>,
-				       <&dma0 2 AT91_DMA_CFG_PER_ID(8)>;
+				interrupts = <18 4 6>;
+				dmas = <&dma0 2 7>,
+				       <&dma0 2 8>;
 				dma-names = "tx", "rx";
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_i2c0>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&twi0_clk>;
 				status = "disabled";
 			};
 
 			i2c1: i2c@f0018000 {
 				compatible = "atmel,at91sam9x5-i2c";
 				reg = <0xf0018000 0x4000>;
-				interrupts = <19 IRQ_TYPE_LEVEL_HIGH 6>;
-				dmas = <&dma0 2 AT91_DMA_CFG_PER_ID(9)>,
-				       <&dma0 2 AT91_DMA_CFG_PER_ID(10)>;
+				interrupts = <19 4 6>;
+				dmas = <&dma0 2 9>,
+				       <&dma0 2 10>;
 				dma-names = "tx", "rx";
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_i2c1>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&twi1_clk>;
 				status = "disabled";
 			};
 
 			usart0: serial@f001c000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf001c000 0x100>;
-				interrupts = <12 IRQ_TYPE_LEVEL_HIGH 5>;
-				dmas = <&dma0 2 AT91_DMA_CFG_PER_ID(3)>,
-				       <&dma0 2 (AT91_DMA_CFG_PER_ID(4) | AT91_DMA_CFG_FIFOCFG_ASAP)>;
-				dma-names = "tx", "rx";
+				interrupts = <12 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart0>;
-				clocks = <&usart0_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart1: serial@f0020000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf0020000 0x100>;
-				interrupts = <13 IRQ_TYPE_LEVEL_HIGH 5>;
-				dmas = <&dma0 2 AT91_DMA_CFG_PER_ID(5)>,
-				       <&dma0 2 (AT91_DMA_CFG_PER_ID(6) | AT91_DMA_CFG_FIFOCFG_ASAP)>;
-				dma-names = "tx", "rx";
+				interrupts = <13 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart1>;
-				clocks = <&usart1_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
-			pwm0: pwm@f002c000 {
-				compatible = "atmel,sama5d3-pwm";
-				reg = <0xf002c000 0x300>;
-				interrupts = <28 IRQ_TYPE_LEVEL_HIGH 4>;
-				#pwm-cells = <3>;
-				clocks = <&pwm_clk>;
+			macb0: ethernet@f0028000 {
+				compatible = "cdns,pc302-gem", "cdns,gem";
+				reg = <0xf0028000 0x100>;
+				interrupts = <34 4 3>;
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_macb0_data_rgmii &pinctrl_macb0_signal_rgmii>;
 				status = "disabled";
 			};
 
 			isi: isi@f0034000 {
 				compatible = "atmel,at91sam9g45-isi";
 				reg = <0xf0034000 0x4000>;
-				interrupts = <37 IRQ_TYPE_LEVEL_HIGH 5>;
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_isi_data_0_7>;
-				clocks = <&isi_clk>;
-				clock-names = "isi_clk";
+				interrupts = <37 4 5>;
 				status = "disabled";
-				port {
-					#address-cells = <1>;
-					#size-cells = <0>;
-				};
-			};
-
-			sfr: sfr@f0038000 {
-				compatible = "atmel,sama5d3-sfr", "syscon";
-				reg = <0xf0038000 0x60>;
 			};
 
 			mmc1: mmc@f8000000 {
 				compatible = "atmel,hsmci";
 				reg = <0xf8000000 0x600>;
-				interrupts = <22 IRQ_TYPE_LEVEL_HIGH 0>;
-				dmas = <&dma1 2 AT91_DMA_CFG_PER_ID(0)>;
+				interrupts = <22 4 0>;
+				dmas = <&dma1 2 0>;
 				dma-names = "rxtx";
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_mmc1_clk_cmd_dat0 &pinctrl_mmc1_dat1_3>;
 				status = "disabled";
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&mci1_clk>;
-				clock-names = "mci_clk";
+			};
+
+			mmc2: mmc@f8004000 {
+				compatible = "atmel,hsmci";
+				reg = <0xf8004000 0x600>;
+				interrupts = <23 4 0>;
+				dmas = <&dma1 2 1>;
+				dma-names = "rxtx";
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_mmc2_clk_cmd_dat0 &pinctrl_mmc2_dat1_3>;
+				status = "disabled";
+				#address-cells = <1>;
+				#size-cells = <0>;
 			};
 
 			spi1: spi@f8008000 {
 				#address-cells = <1>;
 				#size-cells = <0>;
-				compatible = "atmel,at91rm9200-spi";
+				compatible = "atmel,at91sam9x5-spi";
 				reg = <0xf8008000 0x100>;
-				interrupts = <25 IRQ_TYPE_LEVEL_HIGH 3>;
-				dmas = <&dma1 2 AT91_DMA_CFG_PER_ID(15)>,
-				       <&dma1 2 AT91_DMA_CFG_PER_ID(16)>;
-				dma-names = "tx", "rx";
+				interrupts = <25 4 3>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_spi1>;
-				clocks = <&spi1_clk>;
-				clock-names = "spi_clk";
 				status = "disabled";
 			};
 
 			ssc1: ssc@f800c000 {
 				compatible = "atmel,at91sam9g45-ssc";
 				reg = <0xf800c000 0x4000>;
-				interrupts = <39 IRQ_TYPE_LEVEL_HIGH 4>;
-				dmas = <&dma1 2 AT91_DMA_CFG_PER_ID(3)>,
-				       <&dma1 2 AT91_DMA_CFG_PER_ID(4)>;
-				dma-names = "tx", "rx";
+				interrupts = <39 4 4>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_ssc1_tx &pinctrl_ssc1_rx>;
-				clocks = <&ssc1_clk>;
-				clock-names = "pclk";
 				status = "disabled";
 			};
 
+			can1: can@f8010000 {
+				compatible = "atmel,at91sam9x5-can";
+				reg = <0xf8010000 0x300>;
+				interrupts = <41 4 3>;
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_can1_rx_tx>;
+			};
+
+			tcb1: timer@f8014000 {
+				compatible = "atmel,at91sam9x5-tcb";
+				reg = <0xf8014000 0x100>;
+				interrupts = <27 4 0>;
+			};
+
 			adc0: adc@f8018000 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				compatible = "atmel,at91sam9x5-adc";
+				compatible = "atmel,at91sam9260-adc";
 				reg = <0xf8018000 0x100>;
-				interrupts = <29 IRQ_TYPE_LEVEL_HIGH 5>;
+				interrupts = <29 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <
 					&pinctrl_adc0_adtrg
@@ -302,153 +250,134 @@
 					&pinctrl_adc0_ad10
 					&pinctrl_adc0_ad11
 					>;
-				clocks = <&adc_clk>,
-					 <&adc_op_clk>;
-				clock-names = "adc_clk", "adc_op_clk";
+				atmel,adc-channel-base = <0x50>;
 				atmel,adc-channels-used = <0xfff>;
+				atmel,adc-drdy-mask = <0x1000000>;
+				atmel,adc-num-channels = <12>;
 				atmel,adc-startup-time = <40>;
-				atmel,adc-use-external-triggers;
+				atmel,adc-status-register = <0x30>;
+				atmel,adc-trigger-register = <0xc0>;
+				atmel,adc-use-external;
 				atmel,adc-vref = <3000>;
 				atmel,adc-res = <10 12>;
 				atmel,adc-res-names = "lowres", "highres";
 				status = "disabled";
 
 				trigger@0 {
-					reg = <0>;
 					trigger-name = "external-rising";
 					trigger-value = <0x1>;
 					trigger-external;
 				};
 				trigger@1 {
-					reg = <1>;
 					trigger-name = "external-falling";
 					trigger-value = <0x2>;
 					trigger-external;
 				};
 				trigger@2 {
-					reg = <2>;
 					trigger-name = "external-any";
 					trigger-value = <0x3>;
 					trigger-external;
 				};
 				trigger@3 {
-					reg = <3>;
 					trigger-name = "continuous";
 					trigger-value = <0x6>;
 				};
 			};
 
+			tsadcc: tsadcc@f8018000 {
+				compatible = "atmel,at91sam9x5-tsadcc";
+				reg = <0xf8018000 0x4000>;
+				interrupts = <29 4 5>;
+				atmel,tsadcc_clock = <300000>;
+				atmel,filtering_average = <0x03>;
+				atmel,pendet_debounce = <0x08>;
+				atmel,pendet_sensitivity = <0x02>;
+				atmel,ts_sample_hold_time = <0x0a>;
+				status = "disabled";
+			};
+
 			i2c2: i2c@f801c000 {
 				compatible = "atmel,at91sam9x5-i2c";
 				reg = <0xf801c000 0x4000>;
-				interrupts = <20 IRQ_TYPE_LEVEL_HIGH 6>;
-				dmas = <&dma1 2 AT91_DMA_CFG_PER_ID(11)>,
-				       <&dma1 2 AT91_DMA_CFG_PER_ID(12)>;
+				interrupts = <20 4 6>;
+				dmas = <&dma1 2 11>,
+				       <&dma1 2 12>;
 				dma-names = "tx", "rx";
-				pinctrl-names = "default";
-				pinctrl-0 = <&pinctrl_i2c2>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				clocks = <&twi2_clk>;
 				status = "disabled";
 			};
 
 			usart2: serial@f8020000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf8020000 0x100>;
-				interrupts = <14 IRQ_TYPE_LEVEL_HIGH 5>;
-				dmas = <&dma1 2 AT91_DMA_CFG_PER_ID(7)>,
-				       <&dma1 2 (AT91_DMA_CFG_PER_ID(8) | AT91_DMA_CFG_FIFOCFG_ASAP)>;
-				dma-names = "tx", "rx";
+				interrupts = <14 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart2>;
-				clocks = <&usart2_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
 			usart3: serial@f8024000 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xf8024000 0x100>;
-				interrupts = <15 IRQ_TYPE_LEVEL_HIGH 5>;
-				dmas = <&dma1 2 AT91_DMA_CFG_PER_ID(9)>,
-				       <&dma1 2 (AT91_DMA_CFG_PER_ID(10) | AT91_DMA_CFG_FIFOCFG_ASAP)>;
-				dma-names = "tx", "rx";
+				interrupts = <15 4 5>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart3>;
-				clocks = <&usart3_clk>;
-				clock-names = "usart";
+				status = "disabled";
+			};
+
+			macb1: ethernet@f802c000 {
+				compatible = "cdns,at32ap7000-macb", "cdns,macb";
+				reg = <0xf802c000 0x100>;
+				interrupts = <35 4 3>;
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_macb1_rmii>;
 				status = "disabled";
 			};
 
 			sha@f8034000 {
-				compatible = "atmel,at91sam9g46-sha";
+				compatible = "atmel,sam9g46-sha";
 				reg = <0xf8034000 0x100>;
-				interrupts = <42 IRQ_TYPE_LEVEL_HIGH 0>;
-				dmas = <&dma1 2 AT91_DMA_CFG_PER_ID(17)>;
-				dma-names = "tx";
-				clocks = <&sha_clk>;
-				clock-names = "sha_clk";
+				interrupts = <42 4 0>;
 			};
 
 			aes@f8038000 {
-				compatible = "atmel,at91sam9g46-aes";
+				compatible = "atmel,sam9g46-aes";
 				reg = <0xf8038000 0x100>;
-				interrupts = <43 IRQ_TYPE_LEVEL_HIGH 0>;
-				dmas = <&dma1 2 AT91_DMA_CFG_PER_ID(18)>,
-				       <&dma1 2 AT91_DMA_CFG_PER_ID(19)>;
-				dma-names = "tx", "rx";
-				clocks = <&aes_clk>;
-				clock-names = "aes_clk";
+				interrupts = <43 4 0>;
 			};
 
 			tdes@f803c000 {
-				compatible = "atmel,at91sam9g46-tdes";
+				compatible = "atmel,sam9g46-tdes";
 				reg = <0xf803c000 0x100>;
-				interrupts = <44 IRQ_TYPE_LEVEL_HIGH 0>;
-				dmas = <&dma1 2 AT91_DMA_CFG_PER_ID(20)>,
-				       <&dma1 2 AT91_DMA_CFG_PER_ID(21)>;
-				dma-names = "tx", "rx";
-				clocks = <&tdes_clk>;
-				clock-names = "tdes_clk";
+				interrupts = <44 4 0>;
 			};
 
 			dma0: dma-controller@ffffe600 {
 				compatible = "atmel,at91sam9g45-dma";
 				reg = <0xffffe600 0x200>;
-				interrupts = <30 IRQ_TYPE_LEVEL_HIGH 0>;
+				interrupts = <30 4 0>;
 				#dma-cells = <2>;
-				clocks = <&dma0_clk>;
-				clock-names = "dma_clk";
 			};
 
 			dma1: dma-controller@ffffe800 {
 				compatible = "atmel,at91sam9g45-dma";
 				reg = <0xffffe800 0x200>;
-				interrupts = <31 IRQ_TYPE_LEVEL_HIGH 0>;
+				interrupts = <31 4 0>;
 				#dma-cells = <2>;
-				clocks = <&dma1_clk>;
-				clock-names = "dma_clk";
 			};
 
 			ramc0: ramc@ffffea00 {
-				compatible = "atmel,sama5d3-ddramc";
+				compatible = "atmel,at91sam9g45-ddramc";
 				reg = <0xffffea00 0x200>;
-				clocks = <&ddrck>, <&mpddr_clk>;
-				clock-names = "ddrck", "mpddr";
 			};
 
 			dbgu: serial@ffffee00 {
 				compatible = "atmel,at91sam9260-usart";
 				reg = <0xffffee00 0x200>;
-				interrupts = <2 IRQ_TYPE_LEVEL_HIGH 7>;
-				dmas = <&dma1 2 AT91_DMA_CFG_PER_ID(13)>,
-				       <&dma1 2 (AT91_DMA_CFG_PER_ID(14) | AT91_DMA_CFG_FIFOCFG_ASAP)>;
-				dma-names = "tx", "rx";
+				interrupts = <2 4 7>;
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_dbgu>;
-				clocks = <&dbgu_clk>;
-				clock-names = "usart";
 				status = "disabled";
 			};
 
@@ -463,7 +392,7 @@
 			pinctrl@fffff200 {
 				#address-cells = <1>;
 				#size-cells = <1>;
-				compatible = "atmel,sama5d3-pinctrl", "atmel,at91sam9x5-pinctrl", "simple-bus";
+				compatible = "atmel,at91sam9x5-pinctrl", "atmel,at91rm9200-pinctrl", "simple-bus";
 				ranges = <0xfffff200 0xfffff200 0xa00>;
 				atmel,mux-mask = <
 					/*   A          B          C  */
@@ -478,809 +407,483 @@
 				adc0 {
 					pinctrl_adc0_adtrg: adc0_adtrg {
 						atmel,pins =
-							<AT91_PIOD 19 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD19 periph A ADTRG */
+							<3 19 0x1 0x0>;	/* PD19 periph A ADTRG */
 					};
 					pinctrl_adc0_ad0: adc0_ad0 {
 						atmel,pins =
-							<AT91_PIOD 20 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD20 periph A AD0 */
+							<3 20 0x1 0x0>;	/* PD20 periph A AD0 */
 					};
 					pinctrl_adc0_ad1: adc0_ad1 {
 						atmel,pins =
-							<AT91_PIOD 21 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD21 periph A AD1 */
+							<3 21 0x1 0x0>;	/* PD21 periph A AD1 */
 					};
 					pinctrl_adc0_ad2: adc0_ad2 {
 						atmel,pins =
-							<AT91_PIOD 22 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD22 periph A AD2 */
+							<3 22 0x1 0x0>;	/* PD22 periph A AD2 */
 					};
 					pinctrl_adc0_ad3: adc0_ad3 {
 						atmel,pins =
-							<AT91_PIOD 23 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD23 periph A AD3 */
+							<3 23 0x1 0x0>;	/* PD23 periph A AD3 */
 					};
 					pinctrl_adc0_ad4: adc0_ad4 {
 						atmel,pins =
-							<AT91_PIOD 24 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD24 periph A AD4 */
+							<3 24 0x1 0x0>;	/* PD24 periph A AD4 */
 					};
 					pinctrl_adc0_ad5: adc0_ad5 {
 						atmel,pins =
-							<AT91_PIOD 25 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD25 periph A AD5 */
+							<3 25 0x1 0x0>;	/* PD25 periph A AD5 */
 					};
 					pinctrl_adc0_ad6: adc0_ad6 {
 						atmel,pins =
-							<AT91_PIOD 26 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD26 periph A AD6 */
+							<3 26 0x1 0x0>;	/* PD26 periph A AD6 */
 					};
 					pinctrl_adc0_ad7: adc0_ad7 {
 						atmel,pins =
-							<AT91_PIOD 27 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD27 periph A AD7 */
+							<3 27 0x1 0x0>;	/* PD27 periph A AD7 */
 					};
 					pinctrl_adc0_ad8: adc0_ad8 {
 						atmel,pins =
-							<AT91_PIOD 28 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD28 periph A AD8 */
+							<3 28 0x1 0x0>;	/* PD28 periph A AD8 */
 					};
 					pinctrl_adc0_ad9: adc0_ad9 {
 						atmel,pins =
-							<AT91_PIOD 29 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD29 periph A AD9 */
+							<3 29 0x1 0x0>;	/* PD29 periph A AD9 */
 					};
 					pinctrl_adc0_ad10: adc0_ad10 {
 						atmel,pins =
-							<AT91_PIOD 30 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD30 periph A AD10, conflicts with PCK0 */
+							<3 30 0x1 0x0>;	/* PD30 periph A AD10, conflicts with PCK0 */
 					};
 					pinctrl_adc0_ad11: adc0_ad11 {
 						atmel,pins =
-							<AT91_PIOD 31 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD31 periph A AD11, conflicts with PCK1 */
+							<3 31 0x1 0x0>;	/* PD31 periph A AD11, conflicts with PCK1 */
 					};
 				};
 
-				dbgu {
-					pinctrl_dbgu: dbgu-0 {
+				can0 {
+					pinctrl_can0_rx_tx: can0_rx_tx {
 						atmel,pins =
-							<AT91_PIOB 30 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB30 periph A */
-							 AT91_PIOB 31 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PB31 periph A with pullup */
+							<3 14 0x3 0x0	/* PD14 periph C RX, conflicts with SCK0, SPI0_NPCS1 */
+							 3 15 0x3 0x0>;	/* PD15 periph C TX, conflicts with CTS0, SPI0_NPCS2 */
 					};
 				};
 
-				i2c0 {
-					pinctrl_i2c0: i2c0-0 {
+				can1 {
+					pinctrl_can1_rx_tx: can1_rx_tx {
 						atmel,pins =
-							<AT91_PIOA 30 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PA30 periph A TWD0 pin, conflicts with URXD1, ISI_VSYNC */
-							 AT91_PIOA 31 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PA31 periph A TWCK0 pin, conflicts with UTXD1, ISI_HSYNC */
+							<1 14 0x2 0x0	/* PB14 periph B RX, conflicts with GCRS */
+							 1 15 0x2 0x0>;	/* PB15 periph B TX, conflicts with GCOL */
 					};
 				};
 
-				i2c1 {
-					pinctrl_i2c1: i2c1-0 {
+				dbgu {
+					pinctrl_dbgu: dbgu-0 {
 						atmel,pins =
-							<AT91_PIOC 26 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PC26 periph B TWD1 pin, conflicts with SPI1_NPCS1, ISI_D11 */
-							 AT91_PIOC 27 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PC27 periph B TWCK1 pin, conflicts with SPI1_NPCS2, ISI_D10 */
+							<1 30 0x1 0x0	/* PB30 periph A */
+							 1 31 0x1 0x1>;	/* PB31 periph A with pullup */
 					};
 				};
 
-				i2c2 {
-					pinctrl_i2c2: i2c2-0 {
+				i2c0 {
+					pinctrl_i2c0: i2c0-0 {
 						atmel,pins =
-							<AT91_PIOA 18 AT91_PERIPH_B AT91_PINCTRL_NONE	/* TWD2 pin, conflicts with LCDDAT18, ISI_D2 */
-							 AT91_PIOA 19 AT91_PERIPH_B AT91_PINCTRL_NONE>; /* TWCK2 pin, conflicts with LCDDAT19, ISI_D3 */
+							<0 30 0x1 0x0	/* PA30 periph A TWD0 pin, conflicts with URXD1, ISI_VSYNC */
+							 0 31 0x1 0x0>;	/* PA31 periph A TWCK0 pin, conflicts with UTXD1, ISI_HSYNC */
 					};
 				};
 
-				isi {
-					pinctrl_isi_data_0_7: isi-0-data-0-7 {
-						atmel,pins =
-							<AT91_PIOA 16 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PA16 periph C ISI_D0, conflicts with LCDDAT16 */
-							 AT91_PIOA 17 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PA17 periph C ISI_D1, conflicts with LCDDAT17 */
-							 AT91_PIOA 18 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PA18 periph C ISI_D2, conflicts with LCDDAT18, TWD2 */
-							 AT91_PIOA 19 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PA19 periph C ISI_D3, conflicts with LCDDAT19, TWCK2 */
-							 AT91_PIOA 20 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PA20 periph C ISI_D4, conflicts with LCDDAT20, PWMH0 */
-							 AT91_PIOA 21 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PA21 periph C ISI_D5, conflicts with LCDDAT21, PWML0 */
-							 AT91_PIOA 22 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PA22 periph C ISI_D6, conflicts with LCDDAT22, PWMH1 */
-							 AT91_PIOA 23 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PA23 periph C ISI_D7, conflicts with LCDDAT23, PWML1 */
-							 AT91_PIOC 30 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PC30 periph C ISI_PCK, conflicts with UTXD0 */
-							 AT91_PIOA 31 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PA31 periph C ISI_HSYNC, conflicts with TWCK0, UTXD1 */
-							 AT91_PIOA 30 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* PA30 periph C ISI_VSYNC, conflicts with TWD0, URXD1 */
-					};
-
-					pinctrl_isi_data_8_9: isi-0-data-8-9 {
+				i2c1 {
+					pinctrl_i2c1: i2c1-0 {
 						atmel,pins =
-							<AT91_PIOC 29 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PC29 periph C ISI_PD8, conflicts with URXD0, PWMFI2 */
-							 AT91_PIOC 28 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* PC28 periph C ISI_PD9, conflicts with SPI1_NPCS3, PWMFI0 */
+							<2 26 0x2 0x0	/* PC26 periph B TWD1 pin, conflicts with SPI1_NPCS1, ISI_D11 */
+							 2 27 0x2 0x0>;	/* PC27 periph B TWCK1 pin, conflicts with SPI1_NPCS2, ISI_D10 */
 					};
+				};
 
-					pinctrl_isi_data_10_11: isi-0-data-10-11 {
+				isi {
+					pinctrl_isi: isi-0 {
 						atmel,pins =
-							<AT91_PIOC 27 AT91_PERIPH_C AT91_PINCTRL_NONE	/* PC27 periph C ISI_PD10, conflicts with SPI1_NPCS2, TWCK1 */
-							 AT91_PIOC 26 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* PC26 periph C ISI_PD11, conflicts with SPI1_NPCS1, TWD1 */
+							<0 16 0x3 0x0	/* PA16 periph C ISI_D0, conflicts with LCDDAT16 */
+							 0 17 0x3 0x0	/* PA17 periph C ISI_D1, conflicts with LCDDAT17 */
+							 0 18 0x3 0x0	/* PA18 periph C ISI_D2, conflicts with LCDDAT18, TWD2 */
+							 0 19 0x3 0x0	/* PA19 periph C ISI_D3, conflicts with LCDDAT19, TWCK2 */
+							 0 20 0x3 0x0	/* PA20 periph C ISI_D4, conflicts with LCDDAT20, PWMH0 */
+							 0 21 0x3 0x0	/* PA21 periph C ISI_D5, conflicts with LCDDAT21, PWML0 */
+							 0 22 0x3 0x0	/* PA22 periph C ISI_D6, conflicts with LCDDAT22, PWMH1 */
+							 0 23 0x3 0x0	/* PA23 periph C ISI_D7, conflicts with LCDDAT23, PWML1 */
+							 2 30 0x3 0x0	/* PC30 periph C ISI_PCK, conflicts with UTXD0 */
+							 0 31 0x3 0x0	/* PA31 periph C ISI_HSYNC, conflicts with TWCK0, UTXD1 */
+							 0 30 0x3 0x0	/* PA30 periph C ISI_VSYNC, conflicts with TWD0, URXD1 */
+							 2 29 0x3 0x0	/* PC29 periph C ISI_PD8, conflicts with URXD0, PWMFI2 */
+							 2 28 0x3 0x0>;	/* PC28 periph C ISI_PD9, conflicts with SPI1_NPCS3, PWMFI0 */
+					};
+					pinctrl_isi_pck_as_mck: isi_pck_as_mck-0 {
+						atmel,pins =
+							<3 31 0x2 0x0>;	/* PD31 periph B ISI_MCK */
+					};
+				};
+
+				lcd {
+					pinctrl_lcd: lcd-0 {
+						atmel,pins =
+							<0 24 0x1 0x0	/* PA24 periph A LCDPWM */
+							 0 26 0x1 0x0	/* PA26 periph A LCDVSYNC */
+							 0 27 0x1 0x0	/* PA27 periph A LCDHSYNC */
+							 0 25 0x1 0x0	/* PA25 periph A LCDDISP */
+							 0 29 0x1 0x0	/* PA29 periph A LCDDEN */
+							 0 28 0x1 0x0	/* PA28 periph A LCDPCK */
+							 0 0 0x1 0x0	/* PA0 periph A LCDD0 pin */
+							 0 1 0x1 0x0	/* PA1 periph A LCDD1 pin */
+							 0 2 0x1 0x0	/* PA2 periph A LCDD2 pin */
+							 0 3 0x1 0x0	/* PA3 periph A LCDD3 pin */
+							 0 4 0x1 0x0	/* PA4 periph A LCDD4 pin */
+							 0 5 0x1 0x0	/* PA5 periph A LCDD5 pin */
+							 0 6 0x1 0x0	/* PA6 periph A LCDD6 pin */
+							 0 7 0x1 0x0	/* PA7 periph A LCDD7 pin */
+							 0 8 0x1 0x0	/* PA8 periph A LCDD8 pin */
+							 0 9 0x1 0x0	/* PA9 periph A LCDD9 pin */
+							 0 10 0x1 0x0	/* PA10 periph A LCDD10 pin */
+							 0 11 0x1 0x0	/* PA11 periph A LCDD11 pin */
+							 0 12 0x1 0x0	/* PA12 periph A LCDD12 pin */
+							 0 13 0x1 0x0	/* PA13 periph A LCDD13 pin */
+							 0 14 0x1 0x0	/* PA14 periph A LCDD14 pin */
+							 0 15 0x1 0x0	/* PA15 periph A LCDD15 pin */
+							 2 14 0x3 0x0	/* PC14 periph C LCDD16 pin */
+							 2 13 0x3 0x0	/* PC13 periph C LCDD17 pin */
+							 2 12 0x3 0x0	/* PC12 periph C LCDD18 pin */
+							 2 11 0x3 0x0	/* PC11 periph C LCDD19 pin */
+							 2 10 0x3 0x0	/* PC10 periph C LCDD20 pin */
+							 2 15 0x3 0x0	/* PC15 periph C LCDD21 pin */
+							 4 27 0x3 0x0	/* PE27 periph C LCDD22 pin */
+							 4 28 0x3 0x0>;	/* PE28 periph C LCDD23 pin */
+					};
+				};
+
+				macb0 {
+					pinctrl_macb0_data_rgmii: macb0_data_rgmii {
+						atmel,pins =
+							<1 0 0x1 0x0	/* PB0 periph A GTX0, conflicts with PWMH0 */
+							 1 1 0x1 0x0	/* PB1 periph A GTX1, conflicts with PWML0 */
+							 1 2 0x1 0x0	/* PB2 periph A GTX2, conflicts with TK1 */
+							 1 3 0x1 0x0	/* PB3 periph A GTX3, conflicts with TF1 */
+							 1 4 0x1 0x0	/* PB4 periph A GRX0, conflicts with PWMH1 */
+							 1 5 0x1 0x0	/* PB5 periph A GRX1, conflicts with PWML1 */
+							 1 6 0x1 0x0	/* PB6 periph A GRX2, conflicts with TD1 */
+							 1 7 0x1 0x0>;	/* PB7 periph A GRX3, conflicts with RK1 */
+					};
+					pinctrl_macb0_data_gmii: macb0_data_gmii {
+						atmel,pins =
+							<1 19 0x2 0x0	/* PB19 periph B GTX4, conflicts with MCI1_CDA */
+							 1 20 0x2 0x0	/* PB20 periph B GTX5, conflicts with MCI1_DA0 */
+							 1 21 0x2 0x0	/* PB21 periph B GTX6, conflicts with MCI1_DA1 */
+							 1 22 0x2 0x0	/* PB22 periph B GTX7, conflicts with MCI1_DA2 */
+							 1 23 0x2 0x0	/* PB23 periph B GRX4, conflicts with MCI1_DA3 */
+							 1 24 0x2 0x0	/* PB24 periph B GRX5, conflicts with MCI1_CK */
+							 1 25 0x2 0x0	/* PB25 periph B GRX6, conflicts with SCK1 */
+							 1 26 0x2 0x0>;	/* PB26 periph B GRX7, conflicts with CTS1 */
+					};
+					pinctrl_macb0_signal_rgmii: macb0_signal_rgmii {
+						atmel,pins =
+							<1 8 0x1 0x0	/* PB8 periph A GTXCK, conflicts with PWMH2 */
+							 1 9 0x1 0x0	/* PB9 periph A GTXEN, conflicts with PWML2 */
+							 1 11 0x1 0x0	/* PB11 periph A GRXCK, conflicts with RD1 */
+							 1 13 0x1 0x0	/* PB13 periph A GRXER, conflicts with PWML3 */
+							 1 16 0x1 0x0	/* PB16 periph A GMDC */
+							 1 17 0x1 0x0	/* PB17 periph A GMDIO */
+							 1 18 0x1 0x0>;	/* PB18 periph A G125CK */
+					};
+					pinctrl_macb0_signal_gmii: macb0_signal_gmii {
+						atmel,pins =
+							<1 9 0x1 0x0	/* PB9 periph A GTXEN, conflicts with PWML2 */
+							 1 10 0x1 0x0	/* PB10 periph A GTXER, conflicts with RF1 */
+							 1 11 0x1 0x0	/* PB11 periph A GRXCK, conflicts with RD1 */
+							 1 12 0x1 0x0	/* PB12 periph A GRXDV, conflicts with PWMH3 */
+							 1 13 0x1 0x0	/* PB13 periph A GRXER, conflicts with PWML3 */
+							 1 14 0x1 0x0	/* PB14 periph A GCRS, conflicts with CANRX1 */
+							 1 15 0x1 0x0	/* PB15 periph A GCOL, conflicts with CANTX1 */
+							 1 16 0x1 0x0	/* PB16 periph A GMDC */
+							 1 17 0x1 0x0	/* PB17 periph A GMDIO */
+							 1 27 0x2 0x0>;	/* PB27 periph B G125CKO */
+					};
+
+				};
+
+				macb1 {
+					pinctrl_macb1_rmii: macb1_rmii-0 {
+						atmel,pins =
+							<2 0 0x1 0x0	/* PC0 periph A ETX0, conflicts with TIOA3 */
+							 2 1 0x1 0x0	/* PC1 periph A ETX1, conflicts with TIOB3 */
+							 2 2 0x1 0x0	/* PC2 periph A ERX0, conflicts with TCLK3 */
+							 2 3 0x1 0x0	/* PC3 periph A ERX1, conflicts with TIOA4 */
+							 2 4 0x1 0x0	/* PC4 periph A ETXEN, conflicts with TIOB4 */
+							 2 5 0x1 0x0	/* PC5 periph A ECRSDV,conflicts with TCLK4 */
+							 2 6 0x1 0x0	/* PC6 periph A ERXER, conflicts with TIOA5 */
+							 2 7 0x1 0x0	/* PC7 periph A EREFCK, conflicts with TIOB5 */
+							 2 8 0x1 0x0	/* PC8 periph A EMDC, conflicts with TCLK5 */
+							 2 9 0x1 0x0>;	/* PC9 periph A EMDIO  */
 					};
 				};
 
 				mmc0 {
 					pinctrl_mmc0_clk_cmd_dat0: mmc0_clk_cmd_dat0 {
 						atmel,pins =
-							<AT91_PIOD 9 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD9 periph A MCI0_CK */
-							 AT91_PIOD 0 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PD0 periph A MCI0_CDA with pullup */
-							 AT91_PIOD 1 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PD1 periph A MCI0_DA0 with pullup */
+							<3 9 0x1 0x0	/* PD9 periph A MCI0_CK */
+							 3 0 0x1 0x1	/* PD0 periph A MCI0_CDA with pullup */
+							 3 1 0x1 0x1>;	/* PD1 periph A MCI0_DA0 with pullup */
 					};
 					pinctrl_mmc0_dat1_3: mmc0_dat1_3 {
 						atmel,pins =
-							<AT91_PIOD 2 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PD2 periph A MCI0_DA1 with pullup */
-							 AT91_PIOD 3 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PD3 periph A MCI0_DA2 with pullup */
-							 AT91_PIOD 4 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PD4 periph A MCI0_DA3 with pullup */
+							<3 2 0x1 0x1	/* PD2 periph A MCI0_DA1 with pullup */
+							 3 3 0x1 0x1	/* PD3 periph A MCI0_DA2 with pullup */
+							 3 4 0x1 0x1>;	/* PD4 periph A MCI0_DA3 with pullup */
 					};
 					pinctrl_mmc0_dat4_7: mmc0_dat4_7 {
 						atmel,pins =
-							<AT91_PIOD 5 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PD5 periph A MCI0_DA4 with pullup, conflicts with TIOA0, PWMH2 */
-							 AT91_PIOD 6 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PD6 periph A MCI0_DA5 with pullup, conflicts with TIOB0, PWML2 */
-							 AT91_PIOD 7 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PD7 periph A MCI0_DA6 with pullup, conlicts with TCLK0, PWMH3 */
-							 AT91_PIOD 8 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PD8 periph A MCI0_DA7 with pullup, conflicts with PWML3 */
+							<3 5 0x1 0x1	/* PD5 periph A MCI0_DA4 with pullup, conflicts with TIOA0, PWMH2 */
+							 3 6 0x1 0x1	/* PD6 periph A MCI0_DA5 with pullup, conflicts with TIOB0, PWML2 */
+							 3 7 0x1 0x1	/* PD7 periph A MCI0_DA6 with pullup, conlicts with TCLK0, PWMH3 */
+							 3 8 0x1 0x1>;	/* PD8 periph A MCI0_DA7 with pullup, conflicts with PWML3 */
 					};
 				};
 
 				mmc1 {
 					pinctrl_mmc1_clk_cmd_dat0: mmc1_clk_cmd_dat0 {
 						atmel,pins =
-							<AT91_PIOB 24 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB24 periph A MCI1_CK, conflicts with GRX5 */
-							 AT91_PIOB 19 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB19 periph A MCI1_CDA with pullup, conflicts with GTX4 */
-							 AT91_PIOB 20 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PB20 periph A MCI1_DA0 with pullup, conflicts with GTX5 */
+							<1 24 0x1 0x0	/* PB24 periph A MCI1_CK, conflicts with GRX5 */
+							 1 19 0x1 0x1	/* PB19 periph A MCI1_CDA with pullup, conflicts with GTX4 */
+							 1 20 0x1 0x1>;	/* PB20 periph A MCI1_DA0 with pullup, conflicts with GTX5 */
 					};
 					pinctrl_mmc1_dat1_3: mmc1_dat1_3 {
 						atmel,pins =
-							<AT91_PIOB 21 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB21 periph A MCI1_DA1 with pullup, conflicts with GTX6 */
-							 AT91_PIOB 22 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PB22 periph A MCI1_DA2 with pullup, conflicts with GTX7 */
-							 AT91_PIOB 23 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PB23 periph A MCI1_DA3 with pullup, conflicts with GRX4 */
-					};
-				};
-
-				nand0 {
-					pinctrl_nand0_ale_cle: nand0_ale_cle-0 {
-						atmel,pins =
-							<AT91_PIOE 21 AT91_PERIPH_A AT91_PINCTRL_PULL_UP	/* PE21 periph A with pullup */
-							 AT91_PIOE 22 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PE22 periph A with pullup */
-					};
-				};
-
-				pwm0 {
-					pinctrl_pwm0_pwmh0_0: pwm0_pwmh0-0 {
-						atmel,pins =
-							<AT91_PIOA 20 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with ISI_D4 and LCDDAT20 */
-					};
-					pinctrl_pwm0_pwmh0_1: pwm0_pwmh0-1 {
-						atmel,pins =
-							<AT91_PIOB 0 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with GTX0 */
-					};
-					pinctrl_pwm0_pwml0_0: pwm0_pwml0-0 {
-						atmel,pins =
-							<AT91_PIOA 21 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with ISI_D5 and LCDDAT21 */
-					};
-					pinctrl_pwm0_pwml0_1: pwm0_pwml0-1 {
-						atmel,pins =
-							<AT91_PIOB 1 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with GTX1 */
-					};
-
-					pinctrl_pwm0_pwmh1_0: pwm0_pwmh1-0 {
-						atmel,pins =
-							<AT91_PIOA 22 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with ISI_D6 and LCDDAT22 */
-					};
-					pinctrl_pwm0_pwmh1_1: pwm0_pwmh1-1 {
-						atmel,pins =
-							<AT91_PIOB 4 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with GRX0 */
-					};
-					pinctrl_pwm0_pwmh1_2: pwm0_pwmh1-2 {
-						atmel,pins =
-							<AT91_PIOB 27 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* conflicts with G125CKO and RTS1 */
-					};
-					pinctrl_pwm0_pwml1_0: pwm0_pwml1-0 {
-						atmel,pins =
-							<AT91_PIOA 23 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with ISI_D7 and LCDDAT23 */
-					};
-					pinctrl_pwm0_pwml1_1: pwm0_pwml1-1 {
-						atmel,pins =
-							<AT91_PIOB 5 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with GRX1 */
-					};
-					pinctrl_pwm0_pwml1_2: pwm0_pwml1-2 {
-						atmel,pins =
-							<AT91_PIOE 31 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with IRQ */
-					};
-
-					pinctrl_pwm0_pwmh2_0: pwm0_pwmh2-0 {
-						atmel,pins =
-							<AT91_PIOB 8 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with GTXCK */
-					};
-					pinctrl_pwm0_pwmh2_1: pwm0_pwmh2-1 {
-						atmel,pins =
-							<AT91_PIOD 5 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* conflicts with MCI0_DA4 and TIOA0 */
-					};
-					pinctrl_pwm0_pwml2_0: pwm0_pwml2-0 {
-						atmel,pins =
-							<AT91_PIOB 9 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with GTXEN */
-					};
-					pinctrl_pwm0_pwml2_1: pwm0_pwml2-1 {
-						atmel,pins =
-							<AT91_PIOD 6 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* conflicts with MCI0_DA5 and TIOB0 */
-					};
-
-					pinctrl_pwm0_pwmh3_0: pwm0_pwmh3-0 {
-						atmel,pins =
-							<AT91_PIOB 12 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with GRXDV */
-					};
-					pinctrl_pwm0_pwmh3_1: pwm0_pwmh3-1 {
-						atmel,pins =
-							<AT91_PIOD 7 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* conflicts with MCI0_DA6 and TCLK0 */
-					};
-					pinctrl_pwm0_pwml3_0: pwm0_pwml3-0 {
-						atmel,pins =
-							<AT91_PIOB 13 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* conflicts with GRXER */
-					};
-					pinctrl_pwm0_pwml3_1: pwm0_pwml3-1 {
-						atmel,pins =
-							<AT91_PIOD 8 AT91_PERIPH_C AT91_PINCTRL_NONE>;	/* conflicts with MCI0_DA7 */
-					};
-				};
-
-				spi0 {
-					pinctrl_spi0: spi0-0 {
-						atmel,pins =
-							<AT91_PIOD 10 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD10 periph A SPI0_MISO pin */
-							 AT91_PIOD 11 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD11 periph A SPI0_MOSI pin */
-							 AT91_PIOD 12 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD12 periph A SPI0_SPCK pin */
-					};
-				};
-
-				spi1 {
-					pinctrl_spi1: spi1-0 {
-						atmel,pins =
-							<AT91_PIOC 22 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC22 periph A SPI1_MISO pin */
-							 AT91_PIOC 23 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC23 periph A SPI1_MOSI pin */
-							 AT91_PIOC 24 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PC24 periph A SPI1_SPCK pin */
-					};
-				};
-
-				ssc0 {
-					pinctrl_ssc0_tx: ssc0_tx {
-						atmel,pins =
-							<AT91_PIOC 16 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC16 periph A TK0 */
-							 AT91_PIOC 17 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC17 periph A TF0 */
-							 AT91_PIOC 18 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PC18 periph A TD0 */
-					};
-
-					pinctrl_ssc0_rx: ssc0_rx {
-						atmel,pins =
-							<AT91_PIOC 19 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC19 periph A RK0 */
-							 AT91_PIOC 20 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PC20 periph A RF0 */
-							 AT91_PIOC 21 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PC21 periph A RD0 */
-					};
-				};
-
-				ssc1 {
-					pinctrl_ssc1_tx: ssc1_tx {
-						atmel,pins =
-							<AT91_PIOB 2 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB2 periph B TK1, conflicts with GTX2 */
-							 AT91_PIOB 3 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB3 periph B TF1, conflicts with GTX3 */
-							 AT91_PIOB 6 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB6 periph B TD1, conflicts with TD1 */
-					};
-
-					pinctrl_ssc1_rx: ssc1_rx {
-						atmel,pins =
-							<AT91_PIOB 7 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB7 periph B RK1, conflicts with EREFCK */
-							 AT91_PIOB 10 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PB10 periph B RF1, conflicts with GTXER */
-							 AT91_PIOB 11 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PB11 periph B RD1, conflicts with GRXCK */
-					};
-				};
-
-				usart0 {
-					pinctrl_usart0: usart0-0 {
-						atmel,pins =
-							<AT91_PIOD 17 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD17 periph A */
-							 AT91_PIOD 18 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PD18 periph A with pullup */
-					};
-
-					pinctrl_usart0_rts_cts: usart0_rts_cts-0 {
-						atmel,pins =
-							<AT91_PIOD 15 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PD15 periph A, conflicts with SPI0_NPCS2, CANTX0 */
-							 AT91_PIOD 16 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PD16 periph A, conflicts with SPI0_NPCS3, PWMFI3 */
-					};
-				};
-
-				usart1 {
-					pinctrl_usart1: usart1-0 {
-						atmel,pins =
-							<AT91_PIOB 28 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB28 periph A */
-							 AT91_PIOB 29 AT91_PERIPH_A AT91_PINCTRL_PULL_UP>;	/* PB29 periph A with pullup */
-					};
-
-					pinctrl_usart1_rts_cts: usart1_rts_cts-0 {
-						atmel,pins =
-							<AT91_PIOB 26 AT91_PERIPH_A AT91_PINCTRL_NONE	/* PB26 periph A, conflicts with GRX7 */
-							 AT91_PIOB 27 AT91_PERIPH_A AT91_PINCTRL_NONE>;	/* PB27 periph A, conflicts with G125CKO */
+							<1 21 0x1 0x1	/* PB21 periph A MCI1_DA1 with pullup, conflicts with GTX6 */
+							 1 22 0x1 0x1	/* PB22 periph A MCI1_DA2 with pullup, conflicts with GTX7 */
+							 1 23 0x1 0x1>;	/* PB23 periph A MCI1_DA3 with pullup, conflicts with GRX4 */
 					};
 				};
 
-				usart2 {
-					pinctrl_usart2: usart2-0 {
+				mmc2 {
+					pinctrl_mmc2_clk_cmd_dat0: mmc2_clk_cmd_dat0 {
 						atmel,pins =
-							<AT91_PIOE 25 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PE25 periph B, conflicts with A25 */
-							 AT91_PIOE 26 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PE26 periph B with pullup, conflicts NCS0 */
+							<2 15 0x1 0x0	/* PC15 periph A MCI2_CK, conflicts with PCK2 */
+							 2 10 0x1 0x1	/* PC10 periph A MCI2_CDA with pullup */
+							 2 11 0x1 0x1>;	/* PC11 periph A MCI2_DA0 with pullup */
 					};
-
-					pinctrl_usart2_rts_cts: usart2_rts_cts-0 {
+					pinctrl_mmc2_dat1_3: mmc2_dat1_3 {
 						atmel,pins =
-							<AT91_PIOE 23 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PE23 periph B, conflicts with A23 */
-							 AT91_PIOE 24 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PE24 periph B, conflicts with A24 */
+							<2 12 0x1 0x0	/* PC12 periph A MCI2_DA1 with pullup, conflicts with TIOA1 */
+							 2 13 0x1 0x0	/* PC13 periph A MCI2_DA2 with pullup, conflicts with TIOB1 */
+							 2 14 0x1 0x0>;	/* PC14 periph A MCI2_DA3 with pullup, conflicts with TCLK1 */
 					};
 				};
 
-				usart3 {
-					pinctrl_usart3: usart3-0 {
-						atmel,pins =
-							<AT91_PIOE 18 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PE18 periph B, conflicts with A18 */
-							 AT91_PIOE 19 AT91_PERIPH_B AT91_PINCTRL_PULL_UP>;	/* PE19 periph B with pullup, conflicts with A19 */
-					};
-
-					pinctrl_usart3_rts_cts: usart3_rts_cts-0 {
+				nand0 {
+					pinctrl_nand0_ale_cle: nand0_ale_cle-0 {
 						atmel,pins =
-							<AT91_PIOE 16 AT91_PERIPH_B AT91_PINCTRL_NONE	/* PE16 periph B, conflicts with A16 */
-							 AT91_PIOE 17 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PE17 periph B, conflicts with A17 */
+							<4 21 0x1 0x1	/* PE21 periph A with pullup */
+							 4 22 0x1 0x1>;	/* PE22 periph A with pullup */
 					};
 				};
 
-
 				pioA: gpio@fffff200 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffff200 0x100>;
-					interrupts = <6 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <6 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioA_clk>;
 				};
 
 				pioB: gpio@fffff400 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffff400 0x100>;
-					interrupts = <7 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <7 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioB_clk>;
 				};
 
 				pioC: gpio@fffff600 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffff600 0x100>;
-					interrupts = <8 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <8 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioC_clk>;
 				};
 
 				pioD: gpio@fffff800 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffff800 0x100>;
-					interrupts = <9 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <9 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioD_clk>;
 				};
 
 				pioE: gpio@fffffa00 {
 					compatible = "atmel,at91sam9x5-gpio", "atmel,at91rm9200-gpio";
 					reg = <0xfffffa00 0x100>;
-					interrupts = <10 IRQ_TYPE_LEVEL_HIGH 1>;
+					interrupts = <10 4 1>;
 					#gpio-cells = <2>;
 					gpio-controller;
 					interrupt-controller;
 					#interrupt-cells = <2>;
-					clocks = <&pioE_clk>;
-				};
-			};
-
-			pmc: pmc@fffffc00 {
-				compatible = "atmel,sama5d3-pmc";
-				reg = <0xfffffc00 0x120>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
-				interrupt-controller;
-				#address-cells = <1>;
-				#size-cells = <0>;
-				#interrupt-cells = <1>;
-
-				main_rc_osc: main_rc_osc {
-					compatible = "atmel,at91sam9x5-clk-main-rc-osc";
-					#clock-cells = <0>;
-					interrupt-parent = <&pmc>;
-					interrupts = <AT91_PMC_MOSCRCS>;
-					clock-frequency = <12000000>;
-					clock-accuracy = <50000000>;
 				};
 
-				main_osc: main_osc {
-					compatible = "atmel,at91rm9200-clk-main-osc";
-					#clock-cells = <0>;
-					interrupt-parent = <&pmc>;
-					interrupts = <AT91_PMC_MOSCS>;
-					clocks = <&main_xtal>;
-				};
-
-				main: mainck {
-					compatible = "atmel,at91sam9x5-clk-main";
-					#clock-cells = <0>;
-					interrupt-parent = <&pmc>;
-					interrupts = <AT91_PMC_MOSCSELS>;
-					clocks = <&main_rc_osc &main_osc>;
-				};
-
-				plla: pllack {
-					compatible = "atmel,sama5d3-clk-pll";
-					#clock-cells = <0>;
-					interrupt-parent = <&pmc>;
-					interrupts = <AT91_PMC_LOCKA>;
-					clocks = <&main>;
-					reg = <0>;
-					atmel,clk-input-range = <8000000 50000000>;
-					#atmel,pll-clk-output-range-cells = <4>;
-					atmel,pll-clk-output-ranges = <400000000 1000000000 0 0>;
-				};
-
-				plladiv: plladivck {
-					compatible = "atmel,at91sam9x5-clk-plldiv";
-					#clock-cells = <0>;
-					clocks = <&plla>;
-				};
-
-				utmi: utmick {
-					compatible = "atmel,at91sam9x5-clk-utmi";
-					#clock-cells = <0>;
-					interrupt-parent = <&pmc>;
-					interrupts = <AT91_PMC_LOCKU>;
-					clocks = <&main>;
-				};
-
-				mck: masterck {
-					compatible = "atmel,at91sam9x5-clk-master";
-					#clock-cells = <0>;
-					interrupt-parent = <&pmc>;
-					interrupts = <AT91_PMC_MCKRDY>;
-					clocks = <&clk32k>, <&main>, <&plladiv>, <&utmi>;
-					atmel,clk-output-range = <0 166000000>;
-					atmel,clk-divisors = <1 2 4 3>;
-				};
-
-				usb: usbck {
-					compatible = "atmel,at91sam9x5-clk-usb";
-					#clock-cells = <0>;
-					clocks = <&plladiv>, <&utmi>;
-				};
-
-				prog: progck {
-					compatible = "atmel,at91sam9x5-clk-programmable";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					interrupt-parent = <&pmc>;
-					clocks = <&clk32k>, <&main>, <&plladiv>, <&utmi>, <&mck>;
-
-					prog0: prog0 {
-						#clock-cells = <0>;
-						reg = <0>;
-						interrupts = <AT91_PMC_PCKRDY(0)>;
-					};
-
-					prog1: prog1 {
-						#clock-cells = <0>;
-						reg = <1>;
-						interrupts = <AT91_PMC_PCKRDY(1)>;
-					};
-
-					prog2: prog2 {
-						#clock-cells = <0>;
-						reg = <2>;
-						interrupts = <AT91_PMC_PCKRDY(2)>;
+				spi0 {
+					pinctrl_spi0: spi0-0 {
+						atmel,pins =
+							<3 10 0x1 0x0	/* PD10 periph A SPI0_MISO pin */
+							 3 11 0x1 0x0	/* PD11 periph A SPI0_MOSI pin */
+							 3 12 0x1 0x0	/* PD12 periph A SPI0_SPCK pin */
+							 3 13 0x0 0x0>;	/* PD13 GPIO SPI0_NPCS0 pin */
 					};
 				};
 
-				smd: smdclk {
-					compatible = "atmel,at91sam9x5-clk-smd";
-					#clock-cells = <0>;
-					clocks = <&plladiv>, <&utmi>;
-				};
-
-				systemck {
-					compatible = "atmel,at91rm9200-clk-system";
-					#address-cells = <1>;
-					#size-cells = <0>;
-
-					ddrck: ddrck {
-						#clock-cells = <0>;
-						reg = <2>;
-						clocks = <&mck>;
-					};
-
-					smdck: smdck {
-						#clock-cells = <0>;
-						reg = <4>;
-						clocks = <&smd>;
-					};
-
-					uhpck: uhpck {
-						#clock-cells = <0>;
-						reg = <6>;
-						clocks = <&usb>;
-					};
-
-					udpck: udpck {
-						#clock-cells = <0>;
-						reg = <7>;
-						clocks = <&usb>;
-					};
-
-					pck0: pck0 {
-						#clock-cells = <0>;
-						reg = <8>;
-						clocks = <&prog0>;
-					};
-
-					pck1: pck1 {
-						#clock-cells = <0>;
-						reg = <9>;
-						clocks = <&prog1>;
-					};
-
-					pck2: pck2 {
-						#clock-cells = <0>;
-						reg = <10>;
-						clocks = <&prog2>;
+				spi1 {
+					pinctrl_spi1: spi1-0 {
+						atmel,pins =
+							<2 22 0x1 0x0	/* PC22 periph A SPI1_MISO pin */
+							 2 23 0x1 0x0	/* PC23 periph A SPI1_MOSI pin */
+							 2 24 0x1 0x0	/* PC24 periph A SPI1_SPCK pin */
+							 2 25 0x0 0x0>;	/* PC25 GPIO SPI1_NPCS0 pin */
 					};
 				};
 
-				periphck {
-					compatible = "atmel,at91sam9x5-clk-peripheral";
-					#address-cells = <1>;
-					#size-cells = <0>;
-					clocks = <&mck>;
-
-					dbgu_clk: dbgu_clk {
-						#clock-cells = <0>;
-						reg = <2>;
-					};
-
-					hsmc_clk: hsmc_clk {
-						#clock-cells = <0>;
-						reg = <5>;
-					};
-
-					pioA_clk: pioA_clk {
-						#clock-cells = <0>;
-						reg = <6>;
-					};
-
-					pioB_clk: pioB_clk {
-						#clock-cells = <0>;
-						reg = <7>;
-					};
-
-					pioC_clk: pioC_clk {
-						#clock-cells = <0>;
-						reg = <8>;
-					};
-
-					pioD_clk: pioD_clk {
-						#clock-cells = <0>;
-						reg = <9>;
-					};
-
-					pioE_clk: pioE_clk {
-						#clock-cells = <0>;
-						reg = <10>;
-					};
-
-					usart0_clk: usart0_clk {
-						#clock-cells = <0>;
-						reg = <12>;
-						atmel,clk-output-range = <0 66000000>;
-					};
-
-					usart1_clk: usart1_clk {
-						#clock-cells = <0>;
-						reg = <13>;
-						atmel,clk-output-range = <0 66000000>;
-					};
-
-					usart2_clk: usart2_clk {
-						#clock-cells = <0>;
-						reg = <14>;
-						atmel,clk-output-range = <0 66000000>;
-					};
-
-					usart3_clk: usart3_clk {
-						#clock-cells = <0>;
-						reg = <15>;
-						atmel,clk-output-range = <0 66000000>;
-					};
-
-					twi0_clk: twi0_clk {
-						reg = <18>;
-						#clock-cells = <0>;
-						atmel,clk-output-range = <0 16625000>;
-					};
-
-					twi1_clk: twi1_clk {
-						#clock-cells = <0>;
-						reg = <19>;
-						atmel,clk-output-range = <0 16625000>;
-					};
-
-					twi2_clk: twi2_clk {
-						#clock-cells = <0>;
-						reg = <20>;
-						atmel,clk-output-range = <0 16625000>;
-					};
-
-					mci0_clk: mci0_clk {
-						#clock-cells = <0>;
-						reg = <21>;
-					};
-
-					mci1_clk: mci1_clk {
-						#clock-cells = <0>;
-						reg = <22>;
-					};
-
-					spi0_clk: spi0_clk {
-						#clock-cells = <0>;
-						reg = <24>;
-						atmel,clk-output-range = <0 133000000>;
-					};
-
-					spi1_clk: spi1_clk {
-						#clock-cells = <0>;
-						reg = <25>;
-						atmel,clk-output-range = <0 133000000>;
-					};
-
-					tcb0_clk: tcb0_clk {
-						#clock-cells = <0>;
-						reg = <26>;
-						atmel,clk-output-range = <0 133000000>;
-					};
-
-					pwm_clk: pwm_clk {
-						#clock-cells = <0>;
-						reg = <28>;
-					};
-
-					adc_clk: adc_clk {
-						#clock-cells = <0>;
-						reg = <29>;
-						atmel,clk-output-range = <0 66000000>;
+				ssc0 {
+					pinctrl_ssc0_tx: ssc0_tx {
+						atmel,pins =
+							<2 16 0x1 0x0	/* PC16 periph A TK0 */
+							 2 17 0x1 0x0	/* PC17 periph A TF0 */
+							 2 18 0x1 0x0>;	/* PC18 periph A TD0 */
 					};
 
-					dma0_clk: dma0_clk {
-						#clock-cells = <0>;
-						reg = <30>;
+					pinctrl_ssc0_rx: ssc0_rx {
+						atmel,pins =
+							<2 19 0x1 0x0	/* PC19 periph A RK0 */
+							 2 20 0x1 0x0	/* PC20 periph A RF0 */
+							 2 21 0x1 0x0>;	/* PC21 periph A RD0 */
 					};
+				};
 
-					dma1_clk: dma1_clk {
-						#clock-cells = <0>;
-						reg = <31>;
+				ssc1 {
+					pinctrl_ssc1_tx: ssc1_tx {
+						atmel,pins =
+							<1 2 0x2 0x0	/* PB2 periph B TK1, conflicts with GTX2 */
+							 1 3 0x2 0x0	/* PB3 periph B TF1, conflicts with GTX3 */
+							 1 6 0x2 0x0>;	/* PB6 periph B TD1, conflicts with TD1 */
 					};
 
-					uhphs_clk: uhphs_clk {
-						#clock-cells = <0>;
-						reg = <32>;
+					pinctrl_ssc1_rx: ssc1_rx {
+						atmel,pins =
+							<1 7 0x2 0x0	/* PB7 periph B RK1, conflicts with EREFCK */
+							 1 10 0x2 0x0	/* PB10 periph B RF1, conflicts with GTXER */
+							 1 11 0x2 0x0>;	/* PB11 periph B RD1, conflicts with GRXCK */
 					};
+				};
 
-					udphs_clk: udphs_clk {
-						#clock-cells = <0>;
-						reg = <33>;
+				uart0 {
+					pinctrl_uart0: uart0-0 {
+						atmel,pins =
+							<2 29 0x1 0x0	/* PC29 periph A, conflicts with PWMFI2, ISI_D8 */
+							 2 30 0x1 0x1>;	/* PC30 periph A with pullup, conflicts with ISI_PCK */
 					};
+				};
 
-					isi_clk: isi_clk {
-						#clock-cells = <0>;
-						reg = <37>;
+				uart1 {
+					pinctrl_uart1: uart1-0 {
+						atmel,pins =
+							<0 30 0x2 0x0	/* PA30 periph B, conflicts with TWD0, ISI_VSYNC */
+							 0 31 0x2 0x1>;	/* PA31 periph B with pullup, conflicts with TWCK0, ISI_HSYNC */
 					};
+				};
 
-					ssc0_clk: ssc0_clk {
-						#clock-cells = <0>;
-						reg = <38>;
-						atmel,clk-output-range = <0 66000000>;
+				usart0 {
+					pinctrl_usart0: usart0-0 {
+						atmel,pins =
+							<3 17 0x1 0x0	/* PD17 periph A */
+							 3 18 0x1 0x1>;	/* PD18 periph A with pullup */
 					};
 
-					ssc1_clk: ssc1_clk {
-						#clock-cells = <0>;
-						reg = <39>;
-						atmel,clk-output-range = <0 66000000>;
+					pinctrl_usart0_rts_cts: usart0_rts_cts-0 {
+						atmel,pins =
+							<3 15 0x1 0x0	/* PD15 periph A, conflicts with SPI0_NPCS2, CANTX0 */
+							 3 16 0x1 0x0>;	/* PD16 periph A, conflicts with SPI0_NPCS3, PWMFI3 */
 					};
+				};
 
-					sha_clk: sha_clk {
-						#clock-cells = <0>;
-						reg = <42>;
+				usart1 {
+					pinctrl_usart1: usart1-0 {
+						atmel,pins =
+							<1 28 0x1 0x0	/* PB28 periph A */
+							 1 29 0x1 0x1>;	/* PB29 periph A with pullup */
 					};
 
-					aes_clk: aes_clk {
-						#clock-cells = <0>;
-						reg = <43>;
+					pinctrl_usart1_rts_cts: usart1_rts_cts-0 {
+						atmel,pins =
+							<1 26 0x1 0x0	/* PB26 periph A, conflicts with GRX7 */
+							 1 27 0x1 0x0>;	/* PB27 periph A, conflicts with G125CKO */
 					};
+				};
 
-					tdes_clk: tdes_clk {
-						#clock-cells = <0>;
-						reg = <44>;
+				usart2 {
+					pinctrl_usart2: usart2-0 {
+						atmel,pins =
+							<4 25 0x2 0x0	/* PE25 periph B, conflicts with A25 */
+							 4 26 0x2 0x1>;	/* PE26 periph B with pullup, conflicts NCS0 */
 					};
 
-					trng_clk: trng_clk {
-						#clock-cells = <0>;
-						reg = <45>;
+					pinctrl_usart2_rts_cts: usart2_rts_cts-0 {
+						atmel,pins =
+							<4 23 0x2 0x0	/* PE23 periph B, conflicts with A23 */
+							 4 24 0x2 0x0>;	/* PE24 periph B, conflicts with A24 */
 					};
+				};
 
-					fuse_clk: fuse_clk {
-						#clock-cells = <0>;
-						reg = <48>;
+				usart3 {
+					pinctrl_usart3: usart3-0 {
+						atmel,pins =
+							<4 18 0x2 0x0	/* PE18 periph B, conflicts with A18 */
+							 4 19 0x2 0x1>;	/* PE19 periph B with pullup, conflicts with A19 */
 					};
 
-					mpddr_clk: mpddr_clk {
-						#clock-cells = <0>;
-						reg = <49>;
+					pinctrl_usart3_rts_cts: usart3_rts_cts-0 {
+						atmel,pins =
+							<4 16 0x2 0x0	/* PE16 periph B, conflicts with A16 */
+							 4 17 0x2 0x0>;	/* PE17 periph B, conflicts with A17 */
 					};
 				};
 			};
 
+			pmc: pmc@fffffc00 {
+				compatible = "atmel,at91rm9200-pmc";
+				reg = <0xfffffc00 0x120>;
+			};
+
 			rstc@fffffe00 {
 				compatible = "atmel,at91sam9g45-rstc";
 				reg = <0xfffffe00 0x10>;
 			};
 
-			shutdown-controller@fffffe10 {
-				compatible = "atmel,at91sam9x5-shdwc";
-				reg = <0xfffffe10 0x10>;
-			};
-
 			pit: timer@fffffe30 {
 				compatible = "atmel,at91sam9260-pit";
 				reg = <0xfffffe30 0xf>;
-				interrupts = <3 IRQ_TYPE_LEVEL_HIGH 5>;
-				clocks = <&mck>;
+				interrupts = <3 4 5>;
 			};
 
 			watchdog@fffffe40 {
 				compatible = "atmel,at91sam9260-wdt";
 				reg = <0xfffffe40 0x10>;
-				interrupts = <4 IRQ_TYPE_LEVEL_HIGH 7>;
-				atmel,watchdog-type = "hardware";
-				atmel,reset-type = "all";
-				atmel,dbg-halt;
 				status = "disabled";
 			};
 
-			sckc@fffffe50 {
-				compatible = "atmel,at91sam9x5-sckc";
-				reg = <0xfffffe50 0x4>;
-
-				slow_rc_osc: slow_rc_osc {
-					compatible = "atmel,at91sam9x5-clk-slow-rc-osc";
-					#clock-cells = <0>;
-					clock-frequency = <32768>;
-					clock-accuracy = <50000000>;
-					atmel,startup-time-usec = <75>;
-				};
-
-				slow_osc: slow_osc {
-					compatible = "atmel,at91sam9x5-clk-slow-osc";
-					#clock-cells = <0>;
-					clocks = <&slow_xtal>;
-					atmel,startup-time-usec = <1200000>;
-				};
-
-				clk32k: slowck {
-					compatible = "atmel,at91sam9x5-clk-slow";
-					#clock-cells = <0>;
-					clocks = <&slow_rc_osc &slow_osc>;
-				};
-			};
-
 			rtc@fffffeb0 {
 				compatible = "atmel,at91rm9200-rtc";
 				reg = <0xfffffeb0 0x30>;
-				interrupts = <1 IRQ_TYPE_LEVEL_HIGH 7>;
+				interrupts = <1 4 7>;
 			};
 		};
 
@@ -1290,9 +893,7 @@
 			compatible = "atmel,at91sam9rl-udc";
 			reg = <0x00500000 0x100000
 			       0xf8030000 0x4000>;
-			interrupts = <33 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&udphs_clk>, <&utmi>;
-			clock-names = "pclk", "hclk";
+			interrupts = <33 4 2>;
 			status = "disabled";
 
 			ep0 {
@@ -1404,19 +1005,14 @@
 		usb1: ohci@00600000 {
 			compatible = "atmel,at91rm9200-ohci", "usb-ohci";
 			reg = <0x00600000 0x100000>;
-			interrupts = <32 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&usb>, <&uhphs_clk>, <&uhphs_clk>,
-				 <&uhpck>;
-			clock-names = "usb_clk", "ohci_clk", "hclk", "uhpck";
+			interrupts = <32 4 2>;
 			status = "disabled";
 		};
 
 		usb2: ehci@00700000 {
 			compatible = "atmel,at91sam9g45-ehci", "usb-ehci";
 			reg = <0x00700000 0x100000>;
-			interrupts = <32 IRQ_TYPE_LEVEL_HIGH 2>;
-			clocks = <&utmi>, <&uhphs_clk>, <&uhpck>;
-			clock-names = "usb_clk", "ehci_clk", "uhpck";
+			interrupts = <32 4 2>;
 			status = "disabled";
 		};
 
@@ -1424,32 +1020,21 @@
 			compatible = "atmel,at91rm9200-nand";
 			#address-cells = <1>;
 			#size-cells = <1>;
-			ranges;
 			reg = <	0x60000000 0x01000000	/* EBI CS3 */
 				0xffffc070 0x00000490	/* SMC PMECC regs */
 				0xffffc500 0x00000100	/* SMC PMECC Error Location regs */
-				0x00110000 0x00018000	/* ROM code */
+				0x00100000 0x00100000	/* ROM code */
+				0x70000000 0x10000000	/* NFC Command Registers */
+				0xffffc000 0x00000070	/* NFC HSMC regs */
+				0x00200000 0x00100000	/* NFC SRAM banks */
 				>;
-			interrupts = <5 IRQ_TYPE_LEVEL_HIGH 6>;
+			interrupts = <5 4 6>;
 			atmel,nand-addr-offset = <21>;
 			atmel,nand-cmd-offset = <22>;
-			atmel,nand-has-dma;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_nand0_ale_cle>;
-			atmel,pmecc-lookup-table-offset = <0x0 0x8000>;
+			atmel,pmecc-lookup-table-offset = <0x10000 0x18000>;
 			status = "disabled";
-
-			nfc@70000000 {
-				compatible = "atmel,sama5d3-nfc";
-				#address-cells = <1>;
-				#size-cells = <1>;
-				reg = <
-					0x70000000 0x10000000	/* NFC Command Registers */
-					0xffffc000 0x00000070	/* NFC HSMC regs */
-					0x00200000 0x00100000	/* NFC SRAM banks */
-					>;
-				clocks = <&hsmc_clk>;
-			};
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/sama5d31ek.dts b/arch/arm/boot/dts/sama5d31ek.dts
--- a/arch/arm/boot/dts/sama5d31ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sama5d31ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,13 +7,12 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "sama5d31.dtsi"
-#include "sama5d3xmb.dtsi"
-#include "sama5d3xdm.dtsi"
+/include/ "sama5d3xmb.dtsi"
+/include/ "sama5d3xdm.dtsi"
 
 / {
 	model = "Atmel SAMA5D31-EK";
-	compatible = "atmel,sama5d31ek", "atmel,sama5d3xmb", "atmel,sama5d3xcm", "atmel,sama5d31", "atmel,sama5d3", "atmel,sama5";
+	compatible = "atmel,sama5d31ek", "atmel,sama5d3xmb", "atmel,sama5d3xcm", "atmel,sama5d3", "atmel,sama5";
 
 	ahb {
 		apb {
@@ -42,7 +41,7 @@
 	leds {
 		d3 {
 			label = "d3";
-			gpios = <&pioE 24 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioE 24 0>;
 		};
 	};
 
diff -urNp a/arch/arm/boot/dts/sama5d33ek.dts b/arch/arm/boot/dts/sama5d33ek.dts
--- a/arch/arm/boot/dts/sama5d33ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sama5d33ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,13 +7,12 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "sama5d33.dtsi"
-#include "sama5d3xmb.dtsi"
-#include "sama5d3xdm.dtsi"
+/include/ "sama5d3xmb.dtsi"
+/include/ "sama5d3xdm.dtsi"
 
 / {
 	model = "Atmel SAMA5D33-EK";
-	compatible = "atmel,sama5d33ek", "atmel,sama5d3xmb", "atmel,sama5d3xcm", "atmel,sama5d33", "atmel,sama5d3", "atmel,sama5";
+	compatible = "atmel,sama5d33ek", "atmel,sama5d3xmb", "atmel,sama5d3xcm", "atmel,sama5d3", "atmel,sama5";
 
 	ahb {
 		apb {
diff -urNp a/arch/arm/boot/dts/sama5d34ek.dts b/arch/arm/boot/dts/sama5d34ek.dts
--- a/arch/arm/boot/dts/sama5d34ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sama5d34ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,13 +7,12 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "sama5d34.dtsi"
-#include "sama5d3xmb.dtsi"
-#include "sama5d3xdm.dtsi"
+/include/ "sama5d3xmb.dtsi"
+/include/ "sama5d3xdm.dtsi"
 
 / {
 	model = "Atmel SAMA5D34-EK";
-	compatible = "atmel,sama5d34ek", "atmel,sama5d3xmb", "atmel,sama5d3xcm", "atmel,sama5d34", "atmel,sama5d3", "atmel,sama5";
+	compatible = "atmel,sama5d34ek", "atmel,sama5d3xmb", "atmel,sama5d3xcm", "atmel,sama5d3", "atmel,sama5";
 
 	ahb {
 		apb {
@@ -52,7 +51,7 @@
 	leds {
 		d3 {
 			label = "d3";
-			gpios = <&pioE 24 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioE 24 0>;
 		};
 	};
 
diff -urNp a/arch/arm/boot/dts/sama5d35ek.dts b/arch/arm/boot/dts/sama5d35ek.dts
--- a/arch/arm/boot/dts/sama5d35ek.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sama5d35ek.dts	2015-10-27 00:45:05.000000000 +0000
@@ -7,12 +7,11 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "sama5d35.dtsi"
-#include "sama5d3xmb.dtsi"
+/include/ "sama5d3xmb.dtsi"
 
 / {
 	model = "Atmel SAMA5D35-EK";
-	compatible = "atmel,sama5d35ek", "atmel,sama5d3xmb", "atmel,sama5d3xcm", "atmel,sama5d35", "atmel,sama5d3", "atmel,sama5";
+	compatible = "atmel,sama5d35ek", "atmel,sama5d3xmb", "atmel,sama5d3xcm", "atmel,sama5d3", "atmel,sama5";
 
 	ahb {
 		apb {
@@ -49,7 +48,7 @@
 
 		pb_user1 {
 			label = "pb_user1";
-			gpios = <&pioE 27 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioE 27 0>;
 			linux,code = <0x100>;
 			gpio-key,wakeup;
 		};
diff -urNp a/arch/arm/boot/dts/sama5d3xcm.dtsi b/arch/arm/boot/dts/sama5d3xcm.dtsi
--- a/arch/arm/boot/dts/sama5d3xcm.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sama5d3xcm.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,9 +6,10 @@
  *
  * Licensed under GPLv2 or later.
  */
+/include/ "sama5d3.dtsi"
 
 / {
-	compatible = "atmel,sama5d3xcm", "atmel,sama5d3", "atmel,sama5";
+	compatible = "atmel,samad3xcm", "atmel,sama5d3", "atmel,sama5";
 
 	chosen {
 		bootargs = "console=ttyS0,115200 rootfstype=ubifs ubi.mtd=5 root=ubi0:rootfs";
@@ -19,11 +20,12 @@
 	};
 
 	clocks {
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges;
 
-		main_xtal {
+		main_clock: clock@0 {
+			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <12000000>;
 		};
 	};
@@ -36,42 +38,6 @@
 
 			macb0: ethernet@f0028000 {
 				phy-mode = "rgmii";
-				#address-cells = <1>;
-				#size-cells = <0>;
-
-				ethernet-phy@1 {
-					reg = <0x1>;
-					interrupt-parent = <&pioB>;
-					interrupts = <25 IRQ_TYPE_EDGE_FALLING>;
-					txen-skew-ps = <800>;
-					txc-skew-ps = <3000>;
-					rxdv-skew-ps = <400>;
-					rxc-skew-ps = <3000>;
-					rxd0-skew-ps = <400>;
-					rxd1-skew-ps = <400>;
-					rxd2-skew-ps = <400>;
-					rxd3-skew-ps = <400>;
-				};
-
-				ethernet-phy@7 {
-					reg = <0x7>;
-					interrupt-parent = <&pioB>;
-					interrupts = <25 IRQ_TYPE_EDGE_FALLING>;
-					txen-skew-ps = <800>;
-					txc-skew-ps = <3000>;
-					rxdv-skew-ps = <400>;
-					rxc-skew-ps = <3000>;
-					rxd0-skew-ps = <400>;
-					rxd1-skew-ps = <400>;
-					rxd2-skew-ps = <400>;
-					rxd3-skew-ps = <400>;
-				};
-			};
-
-			pmc: pmc@fffffc00 {
-				main: mainck {
-					clock-frequency = <12000000>;
-				};
 			};
 		};
 
@@ -81,6 +47,8 @@
 			atmel,has-pmecc;
 			atmel,pmecc-cap = <4>;
 			atmel,pmecc-sector-size = <512>;
+			atmel,has-nfc;
+			atmel,use-nfc-sram;
 			nand-on-flash-bbt;
 			status = "okay";
 
@@ -121,8 +89,7 @@
 
 		d2 {
 			label = "d2";
-			gpios = <&pioE 25 GPIO_ACTIVE_LOW>;	/* PE25, conflicts with A25, RXD2 */
-			linux,default-trigger = "heartbeat";
+			gpios = <&pioE 25 1>;	/* PE25, conflicts with A25, RXD2 */
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/sama5d3xdm.dtsi b/arch/arm/boot/dts/sama5d3xdm.dtsi
--- a/arch/arm/boot/dts/sama5d3xdm.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sama5d3xdm.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -18,13 +18,14 @@
 					interrupts = <31 0x0>;
 					pinctrl-names = "default";
 					pinctrl-0 = <&pinctrl_qt1070_irq>;
-					wakeup-source;
 				};
 			};
 
 			adc0: adc@f8018000 {
-				atmel,adc-ts-wires = <4>;
-				atmel,adc-ts-pressure-threshold = <10000>;
+				status = "disabled";
+			};
+
+			tsadcc: tsadcc@f8018000 {
 				status = "okay";
 			};
 
@@ -32,7 +33,7 @@
 				board {
 					pinctrl_qt1070_irq: qt1070_irq {
 						atmel,pins =
-							<AT91_PIOE 31 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>; /* PE31 GPIO with pull up deglith */
+							<4 31 0x0 0x5>; /* PE31 GPIO with pull up deglith */
 					};
 				};
 			};
diff -urNp a/arch/arm/boot/dts/sama5d3xmb.dtsi b/arch/arm/boot/dts/sama5d3xmb.dtsi
--- a/arch/arm/boot/dts/sama5d3xmb.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sama5d3xmb.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  *
  * Licensed under GPLv2 or later.
  */
-#include "sama5d3xcm.dtsi"
+/include/ "sama5d3xcm.dtsi"
 
 / {
 	compatible = "atmel,sama5d3xmb", "atmel,sama5d3xcm", "atmel,sama5d3", "atmel,sama5";
@@ -20,13 +20,11 @@
 				slot@0 {
 					reg = <0>;
 					bus-width = <4>;
-					cd-gpios = <&pioD 17 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioD 17 0>;
 				};
 			};
 
 			spi0: spi@f0004000 {
-				dmas = <0>, <0>;	/*  Do not use DMA for spi0 */
-
 				m25p80@0 {
 					compatible = "atmel,at25df321a";
 					spi-max-frequency = <50000000>;
@@ -34,10 +32,6 @@
 				};
 			};
 
-			ssc0: ssc@f0008000 {
-				atmel,clk-from-rk-pin;
-			};
-
 			/*
 			 * i2c0 conflicts with ISI:
 			 * disable it to allow the use of ISI
@@ -45,50 +39,20 @@
 			 */
 			i2c0: i2c@f0014000 {
 				wm8904: wm8904@1a {
-					compatible = "wlf,wm8904";
+					compatible = "wm8904";
 					reg = <0x1a>;
-					clocks = <&pck0>;
-					clock-names = "mclk";
-				};
-			};
-
-			i2c1: i2c@f0018000 {
-				ov2640: camera@0x30 {
-					compatible = "ovti,ov2640";
-					reg = <0x30>;
-					pinctrl-names = "default";
-					pinctrl-0 = <&pinctrl_pck1_as_isi_mck &pinctrl_sensor_power &pinctrl_sensor_reset>;
-					resetb-gpios = <&pioE 24 GPIO_ACTIVE_LOW>;
-					pwdn-gpios = <&pioE 29 GPIO_ACTIVE_HIGH>;
-					/* use pck1 for the master clock of ov2640 */
-					clocks = <&pck1>;
-					clock-names = "xvclk";
-					assigned-clocks = <&pck1>;
-					assigned-clock-rates = <25000000>;
-
-					port {
-						ov2640_0: endpoint {
-							remote-endpoint = <&isi_0>;
-							bus-width = <8>;
-						};
-					};
 				};
 			};
 
 			usart1: serial@f0020000 {
-				dmas = <0>, <0>;	/*  Do not use DMA for usart1 */
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_usart1 &pinctrl_usart1_rts_cts>;
 				status = "okay";
 			};
 
 			isi: isi@f0034000 {
-				port {
-					isi_0: endpoint {
-						remote-endpoint = <&ov2640_0>;
-						bus-width = <8>;
-					};
-				};
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_isi &pinctrl_isi_pck_as_mck &pinctrl_isi_power &pinctrl_isi_reset>;
 			};
 
 			mmc1: mmc@f8000000 {
@@ -98,7 +62,7 @@
 				slot@0 {
 					reg = <0>;
 					bus-width = <4>;
-					cd-gpios = <&pioD 18 GPIO_ACTIVE_HIGH>;
+					cd-gpios = <&pioD 18 0>;
 				};
 			};
 
@@ -117,57 +81,43 @@
 
 			macb1: ethernet@f802c000 {
 				phy-mode = "rmii";
-
-				#address-cells = <1>;
-				#size-cells = <0>;
-				phy0: ethernet-phy@1 {
-					interrupt-parent = <&pioE>;
-					interrupts = <30 IRQ_TYPE_EDGE_FALLING>;
-					reg = <1>;
-				};
 			};
 
 			pinctrl@fffff200 {
 				board {
 					pinctrl_mmc0_cd: mmc0_cd {
 						atmel,pins =
-							<AT91_PIOD 17 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>; /* PD17 GPIO with pullup deglitch */
+							<3 17 0x0 0x5>; /* PD17 GPIO with pullup deglitch */
 					};
 
 					pinctrl_mmc1_cd: mmc1_cd {
 						atmel,pins =
-							<AT91_PIOD 18 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_UP_DEGLITCH>; /* PD18 GPIO with pullup deglitch */
+							<3 18 0x0 0x5>; /* PD18 GPIO with pullup deglitch */
 					};
 
 					pinctrl_pck0_as_audio_mck: pck0_as_audio_mck {
 						atmel,pins =
-							<AT91_PIOD 30 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PD30 periph B */
+							<3 30 0x2 0x0>;	/* PD30 periph B */
 					};
 
-					pinctrl_pck1_as_isi_mck: pck1_as_isi_mck-0 {
+					pinctrl_isi_reset: isi_reset-0 {
 						atmel,pins =
-							<AT91_PIOD 31 AT91_PERIPH_B AT91_PINCTRL_NONE>;	/* PD31 periph B ISI_MCK */
+							<4 24 0x0 0x0>;   /* PE24 gpio */
 					};
 
-					pinctrl_sensor_reset: sensor_reset-0 {
+					pinctrl_isi_power: isi_power-0 {
 						atmel,pins =
-							<AT91_PIOE 24 AT91_PERIPH_GPIO AT91_PINCTRL_NONE>;   /* PE24 gpio */
-					};
-
-					pinctrl_sensor_power: sensor_power-0 {
-						atmel,pins =
-							<AT91_PIOE 29 AT91_PERIPH_GPIO AT91_PINCTRL_NONE>; /* PE29 gpio */
+							<4 29 0x0 0x0>; /* PE29 gpio */
 					};
 
 					pinctrl_usba_vbus: usba_vbus {
 						atmel,pins =
-							<AT91_PIOD 29 AT91_PERIPH_GPIO AT91_PINCTRL_DEGLITCH>; /* PD29 GPIO with deglitch */
+							<3 29 0x0 0x4>; /* PD29 GPIO with deglitch */
 					};
 				};
 			};
 
 			dbgu: serial@ffffee00 {
-				dmas = <0>, <0>;	/*  Do not use DMA for dbgu */
 				status = "okay";
 			};
 
@@ -177,7 +127,7 @@
 		};
 
 		usb0: gadget@00500000 {
-			atmel,vbus-gpio = <&pioD 29 GPIO_ACTIVE_HIGH>;
+			atmel,vbus-gpio = <&pioD 29 0>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_usba_vbus>;
 			status = "okay";
@@ -185,9 +135,9 @@
 
 		usb1: ohci@00600000 {
 			num-ports = <3>;
-			atmel,vbus-gpio = <&pioD 25 GPIO_ACTIVE_HIGH
-					   &pioD 26 GPIO_ACTIVE_LOW
-					   &pioD 27 GPIO_ACTIVE_LOW
+			atmel,vbus-gpio = <&pioD 25 0
+					   &pioD 26 1
+					   &pioD 27 1
 					  >;
 			status = "okay";
 		};
@@ -198,7 +148,7 @@
 	};
 
 	sound {
-		compatible = "atmel,asoc-wm8904";
+		compatible = "atmel,sama5d3ek-wm8904";
 		pinctrl-names = "default";
 		pinctrl-0 = <&pinctrl_pck0_as_audio_mck>;
 
@@ -208,12 +158,9 @@
 			"Headphone Jack", "HPOUTR",
 			"IN2L", "Line In Jack",
 			"IN2R", "Line In Jack",
-			"Mic", "MICBIAS",
 			"IN1L", "Mic";
 
 		atmel,ssc-controller = <&ssc0>;
 		atmel,audio-codec = <&wm8904>;
-
-		status = "disabled";
 	};
 };
diff -urNp a/arch/arm/boot/dts/sdk2-dt.dts b/arch/arm/boot/dts/sdk2-dt.dts
--- a/arch/arm/boot/dts/sdk2-dt.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/sdk2-dt.dts	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,8 @@
+#define CONF_SOC
+#define CONF_BOARD_b2264
+#define CONF_SOC_h418
+#define CONF_MAP_2GB
+#define CONF_KERNEL_3_10_sti
+#define CONF_FRONTEND_NO_FE
+#define PHYS_MEM_START 0x80000000
+#include "sdk2_stih418-family.dtsp"
diff -urNp a/arch/arm/boot/dts/sdk2_b2199.dtsi b/arch/arm/boot/dts/sdk2_b2199.dtsi
--- a/arch/arm/boot/dts/sdk2_b2199.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/sdk2_b2199.dtsi	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,64 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author(s): Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *            Carmelo Amoroso <carmelo.amoroso@st.com>
+ *            Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *            Nunzio Raciti <nunzio.raciti@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+
+/ {
+	chosen {
+		bootargs = "console=ttyAS0,115200 bpa2parts=BPA2_Region|aud-coded|aud-transcoded|vid-coded|vid-transcoded|vid-raw-input|vid-output-0|vid-decimated-1|vid-copied-1|vid-macroblock-0|vid-extra-data-0|vid-extra-data-1|v4l2-coded-video-buffers|vid-enc-data-0|vid-enc-scaled-0|vid-encoded-0|v4l2-clut|v4l2-grab|gfx-memory|aud-codec-data|vid-codec-data|aud-output-0|aud-output-1|vid-output-1|vid-decimated-0|vid-copied-0|vid-macroblock-1|blitter|vid-enc-data-1|vid-enc-scaled-1|vid-encoded-1|coredisplay-video|multicom|hades-l3|BPA2_Region0|BPA2_Region1|display-secure:936M:0xC3900000,v4l2-vb2|v4l2-stmc8jpg|v4l2-stmvout|v4l2-compo:184M:0xB8100000,modules|audio:8M:0xB7900000,DTU_PART:16384:0xFEEFC000,BPA2_SecureShm|streaming-shm:2032k:0xFED00000,bigphysarea|te-buffers|m2m-ca3:86M:0x90000000 vmalloc=1167m mem=898629632@0x82000000";
+	};
+
+	aliases {
+		scr0 = &scr0;
+		scr1 = &scr1;
+		cec0 = &cec0;
+		i2c0 = &i2c11;	/* HDMI */
+		i2c1 = &i2c3;	/* NIM-B */
+		i2c2 = &i2c4;	/* miniPCIe */
+		i2c3 = &i2c5;	/* stv6440 / M24256-B eeprom  */
+		i2c4 = &i2c10;	/* stv0368 */
+		i2c5 = &i2c2;	/* NIM-A */
+		hdmi0 = &hdmi0;
+		hdmi-repeater0 = &hdmi0;
+		blitter0 = &blitter0;
+		blitter1 = &blitter1;
+	};
+
+	soc {
+		nandbch: nand-bch {
+			status = "disabled";
+			compatible = "st,nand-bch-ip-plug";
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				partitions {
+					partition@0{
+						label = "NAND boot";
+						reg = <0x00000000 0x00800000>;
+					};
+					partition@1{
+						label = "NAND rootfs";
+						reg = <0x00800000 0x1f800000>;
+					};
+				};
+			};
+		};
+
+		mmc0: sdhci@09060000 {
+			status = "okay";
+			non-removable;
+			max-frequency = <200000000>;
+			mmc-cap-uhs-sdr50;
+			mmc-cap-uhs-sdr104;
+			mmc-cap-uhs-ddr50;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/sdk2_b2264.dtsi b/arch/arm/boot/dts/sdk2_b2264.dtsi
--- a/arch/arm/boot/dts/sdk2_b2264.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/sdk2_b2264.dtsi	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,129 @@
+/*
+ * Copyright (C) 2018 STMicroelectronics Limited.
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/ {
+	chosen {
+		bootargs = "console=ttyAS0,115200 bpa2parts=BPA2_Region|aud-coded|aud-transcoded|vid-coded|vid-transcoded|vid-raw-input|vid-output-0|vid-decimated-1|vid-copied-1|vid-macroblock-0|vid-extra-data-0|vid-extra-data-1|v4l2-coded-video-buffers|vid-enc-data-0|vid-enc-scaled-0|vid-encoded-0|v4l2-clut|v4l2-grab|gfx-memory|aud-codec-data|vid-codec-data|aud-output-0|aud-output-1|vid-output-1|vid-decimated-0|vid-copied-0|vid-macroblock-1|blitter|vid-enc-data-1|vid-enc-scaled-1|vid-encoded-1|coredisplay-video|multicom|hades-l3|BPA2_Region0|BPA2_Region1|display-secure:936M:0xC3900000,v4l2-vb2|v4l2-stmc8jpg|v4l2-stmvout|v4l2-compo:184M:0xB8100000,modules|audio:8M:0xB7900000,DTU_PART:16384:0xFEEFC000,BPA2_SecureShm|streaming-shm:2032k:0xFED00000,bigphysarea|te-buffers|m2m-ca3:86M:0x90000000 vmalloc=1167m mem=898629632@0x82000000";
+	};
+
+	aliases {
+		scr0 = &scr0;
+		scr1 = &scr1;
+		cec0 = &cec0;
+		i2c0 = &i2c11;	/* HDMI */
+		i2c2 = &i2c5;	/* I2C on Touch screen connector */
+		hdmi0 = &hdmi0;
+		hdmi-repeater0 = &hdmi0;
+		blitter0 = &blitter0;
+		blitter1 = &blitter1;
+	};
+
+	pwm-regulator {
+		regulator-min-microvolt = <784000>;
+		regulator-max-microvolt = <1299000>;
+	};
+
+	soc {
+		nandbch: nand-bch {
+			status = "disabled";
+			compatible = "st,nand-bch-ip-plug";
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				partitions {
+					partition@0{
+						label = "NAND boot";
+						reg = <0x00000000 0x00800000>;
+					};
+					partition@1{
+						label = "NAND rootfs";
+						reg = <0x00800000 0x1f800000>;
+					};
+				};
+			};
+		};
+
+		mmc0: sdhci@09060000 {
+			pinctrl-0 = <&pinctrl_sd0>;
+			max-frequency = <52000000>;
+			cd-gpio = <&PIO42 4 ALT2 IN>;
+			mmc-cap-sd-highspeed;
+			/delete-property/ non-removable;
+
+			status = "okay";
+		};
+
+		vqmmc_reg: voltage-regulator {
+			status = "disabled";
+		};
+
+		miphy28lp_phy0: miphy28lp@0 {
+			st,sata_gen = "gen3";
+
+			status = "okay";
+		};
+
+		miphy28lp_phy1: miphy28lp@1 {
+			/delete-property/ st,sata_gen;
+
+			status = "okay";
+		};
+
+		pcie0: pcie@9b00000 {
+			status = "disabled";
+		};
+
+		pcie1: pcie@9b10000 {
+			reset-gpio = <&PIO34 5 0>;
+
+			status = "okay";
+		};
+
+		sata0: sata@9b20000 {
+			status = "okay";
+		};
+
+		sata1: sata@9b28000 {
+			status = "disabled";
+		};
+
+		mmc1: sdhci@09080000 {
+			status = "disabled";
+		};
+
+		sti_cpufreq_init {
+			opp-list {
+				opp1 {
+					st,abbP;
+					st,abbN;
+					st,avs = <0x0000041a 0x0000041a 0x0000041a 0x0000041a 0x00000406 0x000003f2 0x000003de 0x000003ca 0x000003b6 0x000003a2 0x00000398 0x0000038e 0x00000384 0x00000384 0x00000384 0x00000384>;
+					st,freq = <0x00000320>;
+					st,substrate = <0x000000ff>;
+					st,cuts = <0x000000ff>;
+				};
+				opp0 {
+					st,abbP;
+					st,abbN;
+					st,avs = <0x000004b0 0x000004b0 0x000004b0 0x000004b0 0x0000049c 0x00000488 0x00000474 0x00000460 0x0000044c 0x00000438 0x0000042e 0x0000041a 0x00000406 0x000003f2 0x000003f2 0x000003f2>;
+					st,freq = <0x000004b0>;
+					st,substrate = <0x000000ff>;
+					st,cuts = <0x000000ff>;
+				};
+				opp2 {
+					st,abbP;
+					st,abbN;
+					st,avs = <0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384 0x00000384>;
+					st,freq = <0x00000258>;
+					st,substrate = <0x000000ff>;
+					st,cuts = <0x000000ff>;
+					st,opp = <0x00000002>;
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/sdk2_stih418-family_DISPLAY.dtsi b/arch/arm/boot/dts/sdk2_stih418-family_DISPLAY.dtsi
--- a/arch/arm/boot/dts/sdk2_stih418-family_DISPLAY.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/sdk2_stih418-family_DISPLAY.dtsi	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,590 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author(s): Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *            Carmelo Amoroso <carmelo.amoroso@st.com>
+ *            Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *            Nunzio Raciti <nunzio.raciti@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+
+#include "stih418-display.h"
+
+/ {
+
+	soc {
+
+		pin-controller-sbc {
+			cec0 {
+				pinctrl_cec0_default: cec0-default {
+					st,pins {
+						hdmi_cec = <&PIO2 4 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			hdmirx0 {
+				pinctrl_hdmirx0_default: hdmirx0-default {
+					st,pins {
+						scl = <&PIO5 7 ALT1 BIDIR>;
+						sda = <&PIO5 6 ALT1 BIDIR>;
+						pd = <&PIO5 5 ALT1 BIDIR>;
+						hpd = <&PIO5 4 ALT1 BIDIR>;
+					};
+				};
+			};
+		};
+
+		pin-controller-rear {
+			dvo {
+				pinctrl_dvo0_default: dvo-0-default {
+					st,pins {
+						DVO_HS = <&PIO30 0	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DVO_VS = <&PIO30 1	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DVO_DE = <&PIO30 2	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DVO_CK = <&PIO30 3	ALT2	OUT	CLKNOTDATA	0>;
+						DATA0 = <&PIO30 4	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA1 = <&PIO30 5	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA2 = <&PIO30 6	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA3 = <&PIO30 7	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA4 = <&PIO31 0	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA5 = <&PIO31 1	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA6 = <&PIO31 2	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA7 = <&PIO31 3	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA8 = <&PIO31 4	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA9 = <&PIO31 5	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA10 = <&PIO31 6	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA11 = <&PIO31 7	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA12 = <&PIO32 0	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA13 = <&PIO32 1	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA14 = <&PIO32 2	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA15 = <&PIO32 3	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA16 = <&PIO32 4	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA17 = <&PIO32 5	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA18 = <&PIO32 6	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA19 = <&PIO32 7	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA20 = <&PIO33 0	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA21 = <&PIO33 1	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA22 = <&PIO33 2	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA23 = <&PIO33 3	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+					};
+				};
+				pinctrl_dvo0_data_clk: dvo-0-data-clk {
+					st,pins {
+						DVO_CK = <&PIO30 3	ALT2	OUT	CLKNOTDATA	0>;
+						DATA0 = <&PIO30 4	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA1 = <&PIO30 5	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA2 = <&PIO30 6	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA3 = <&PIO30 7	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA4 = <&PIO31 0	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA5 = <&PIO31 1	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA6 = <&PIO31 2	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA7 = <&PIO31 3	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA8 = <&PIO31 4	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA9 = <&PIO31 5	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA10 = <&PIO31 6	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA11 = <&PIO31 7	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA12 = <&PIO32 0	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA13 = <&PIO32 1	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA14 = <&PIO32 2	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA15 = <&PIO32 3	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA16 = <&PIO32 4	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA17 = <&PIO32 5	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA18 = <&PIO32 6	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA19 = <&PIO32 7	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA20 = <&PIO33 0	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA21 = <&PIO33 1	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA22 = <&PIO33 2	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DATA23 = <&PIO33 3	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+					};
+				};
+				pinctrl_dvo0_sync: dvo-0-sync {
+					st,pins {
+						DVO_HS = <&PIO30 0	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DVO_VS = <&PIO30 1	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DVO_DE = <&PIO30 2	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+					};
+				};
+				pinctrl_dvo0_vga: dvo-0-vga {
+					st,pins {
+						DVO_HS = <&PIO30 0	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						DVO_VS = <&PIO30 1	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+					};
+				};
+			};
+			vga {
+				pinctrl_vga: vga-0-default {
+					st,pins {
+						VGA_HS = <&PIO35 4	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+						VGA_VS = <&PIO35 5	ALT2	OUT	SE_NICLK_IO	0 CLK_A>;
+					};
+				};
+
+			};
+		};
+
+
+	
+		/*CEC */
+		cec0: stm_cec@094a087c {
+			compatible = "st,cec";
+			status = "okay";
+			reg = <0x94a087c 0x64>;
+			interrupts = <0 140 0>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "cec_clk";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_cec0_default>;
+			resets = <&softreset STIH407_LPM_SOFTRESET>;
+		};
+
+		/* Blitter 0 */
+		blitter0:bdispII@9f10000 {
+			compatible = "st,bdispII-h418";
+			status = "okay";
+
+			/* Register and tile ram if any & Names respectively */
+			reg = <0x9f10000 0x1000>, <0x6090000 0x8000>;
+			reg-names = "bdisp-io", "bdisp-tile";
+
+			/* Interruptions & Names respectively */
+			interrupts = <0 38 0>;
+			interrupt-names = "bdisp-aq1";
+
+			aq = <1>;
+			cq = <0>;
+			line_buffer_length = <2048>;
+			mb_buffer_length = <2048>;
+			rotate_buffer_length = <256>;
+
+			/* Clock & Name & Frequency */
+			clocks = <&CLK_S_C0_FLEXGEN CLK_IC_BDISP_0>;
+			clock-names = "bdisp0";
+			clock-frequency = <400000000>;
+		};
+		/* Blitter 1 */
+		blitter1:bdispII@9f11000 {
+			compatible = "st,bdispII-h418";
+			status = "okay";
+
+			/* Register and tile ram if any & Names respectively */
+			reg = <0x9f11000 0x1000>;
+			reg-names = "bdisp-io";
+
+			/* Interruptions & Names respectively */
+			interrupts = <0 39 0>;
+			interrupt-names = "bdisp-aq1";
+
+			aq = <1>;
+			cq = <0>;
+			line_buffer_length = <2048>;
+			mb_buffer_length = <2048>;
+			rotate_buffer_length = <256>;
+
+			/* Clock & Name & Frequency */
+			clocks = <&CLK_S_C0_FLEXGEN CLK_IC_BDISP_1>;
+			clock-names = "bdisp0";
+			clock-frequency = <400000000>;
+		};
+
+		/* SSC11 to HDMI */
+		i2c11: i2c@9541000 {
+			status = "okay";
+                        st,i2c-min-scl-pulse-width-us = <0>;
+                        st,i2c-min-sda-pulse-width-us = <5>;
+		};
+
+		displaylink0:displaylink {
+				compatible = "st,displaylink", "simple-bus";
+				status = "okay";
+				rxsense-support;
+				device-id = <0>;
+				hdmi-dev = <&hdmi0>;
+				i2c-parent =<&i2c11>;
+				pipeline-id = <0>;
+				edid-reg = <0x50>;
+				edid-segment-reg = <0x30>;
+				reg-names = "edid", "edid-segment";
+		};
+
+		display_power_domains_group:display_power_domains_group {
+				compatible = "st,grp-pd";
+				#power-domain-cells = <0>;
+				power-domains = <&hqvdp10_core>, <&hqvdp11_core>, <&hqvdp12_core>;
+		};
+
+		display: stm-display@08D00000 {
+			compatible = "st,display", "simple-bus";
+			status = "okay";
+			reg = <0x08D00000 0x01D00000>;
+			dmas = <&fdma0 8 0 1>, <&fdma2>;
+			dma-names = "teletext.0", "unpaced";
+			description = "STM display DMA";
+
+			pinctrl-names = "default",  /* none */
+                            "config-1", /* VGA pads */
+                            "config-2", /* VGA pads + all DVO pins */
+                            "config-3", /* all DVO pins */
+                            "config-4", /* clk/data dvo pins + H/V DVO pads used for vga syncs */
+                            "config-5"; /* H/V DVO pads used for vga syncs */
+			pinctrl-0 = <>;
+			pinctrl-1 = <&pinctrl_vga>;
+			pinctrl-2 = <&pinctrl_dvo0_default &pinctrl_vga>;
+			pinctrl-3 = <&pinctrl_dvo0_default>;
+			pinctrl-4 = <&pinctrl_dvo0_data_clk &pinctrl_dvo0_vga>;
+			pinctrl-5 = <&pinctrl_dvo0_vga>;
+
+            /* uncomment following if only vga is enabled (usb3-dwc3 must be disabled) */
+            /* only_vga_enabled; */
+
+            /* uncomment following if vga uses dvo sync pads */
+            /* vga_using_dvo_pads; */
+
+            /* uncomment following if need to disbale all analog video DACs */
+            /* video-dacs-power-down; */
+
+			clocks = <&CLK_S_D2_QUADFS VCO>,
+					 <&CLK_S_C0_FLEXGEN CLK_MAIN_DISP>,
+					 <&CLK_S_C0_FLEXGEN CLK_AUX_DISP>,
+					 <&CLK_S_C0_FLEXGEN CLK_COMPO_DVP>,
+					 <&CLK_S_C0_FLEXGEN CLK_PROC_MIXER>,
+					 <&CLK_S_D2_QUADFS 0>,
+					 <&CLK_S_D2_QUADFS 1>,
+					 <&CLK_S_D0_FLEXGEN CLK_PCM_0>,
+					 <&CLK_TMDSOUT_HDMI>,
+					 <&CLK_S_D2_FLEXGEN 5>,
+					 <&CLK_S_D2_FLEXGEN CLK_PIX_MAIN_DISP>,
+					 <&CLK_S_D2_FLEXGEN CLK_PIX_HDDAC>,
+					 <&CLK_S_D2_FLEXGEN CLK_HDDAC>,
+					 <&CLK_S_D2_FLEXGEN CLK_PIX_AUX_DISP>,
+					 <&CLK_S_D2_FLEXGEN CLK_DENC>,
+					 <&CLK_S_D2_FLEXGEN CLK_SDDAC>,
+					 <&CLK_S_D2_FLEXGEN CLK_PIX_HDMI>,
+					 <&CLK_S_D2_FLEXGEN CLK_TMDS_HDMI>,
+					 <&CLK_S_D2_FLEXGEN CLK_REF_HDMIPHY>,
+					 <&CLK_S_D2_FLEXGEN CLK_PIX_DVO>,
+					 <&CLK_S_D2_FLEXGEN CLK_DVO>,
+					 <&CLK_S_D2_FLEXGEN 2>,
+					 <&CLK_S_D2_FLEXGEN 3>,
+					 <&CLK_S_D2_FLEXGEN 4>,
+					 <&CLK_S_D2_FLEXGEN 5>,
+					 <&CLK_S_D2_FLEXGEN 1>,
+					 <&CLK_S_C0_FLEXGEN CLK_TX_ICN_DMU>;
+
+			clock-names =   "CLK_D2_FS0_VCO",
+					"CLK_MAIN_DISP",
+					"CLK_AUX_DISP",
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+						  "CLK_PROC_GDP_COMPO",
+#else
+						  "CLK_COMPO_DVP",
+#endif
+						  "CLK_PROC_MIXER",
+						  "CLK_D2_FS0",
+						  "CLK_D2_FS1",
+						  "CLK_PCM_HDMI",
+						  "CLK_TMDSOUT_HDMI",
+						  "CLK_TMDS_HDMI_DIV2",
+						  "CLK_PIX_MAIN_DISP",
+						  "CLK_PIX_HDDAC",
+						  "CLK_HDDAC",
+						  "CLK_PIX_AUX_DISP",
+						  "CLK_DENC",
+						  "CLK_SDDAC",
+						  "CLK_PIX_HDMI",
+						  "CLK_TMDS_HDMI",
+						  "CLK_REF_HDMIPHY",
+						  "CLK_PIX_DVO",
+						  "CLK_DVO",
+						  "CLK_PIX_GDP1",
+						  "CLK_PIX_GDP2",
+						  "CLK_PIX_GDP3",
+						  "CLK_PIX_GDP4",
+						  "CLK_PIX_PIP",
+						  "CLK_TX_ICN_DMU";
+
+			clock-always_on = <1>;
+
+			assigned-clocks = <&CLK_S_D2_FLEXGEN CLK_TMDS_HDMI_DIV2>,
+					<&CLK_S_D2_FLEXGEN CLK_TMDS_HDMI>,
+					<&CLK_S_C0_FLEXGEN CLK_MAIN_DISP>,
+					<&CLK_S_C0_FLEXGEN CLK_AUX_DISP>,
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+					<&CLK_S_C0_FLEXGEN CLK_PROC_GDP_COMPO>,
+#else
+					<&CLK_S_C0_FLEXGEN CLK_COMPO_DVP>,
+#endif
+					<&CLK_S_C0_FLEXGEN CLK_PROC_MIXER>;
+
+			assigned-clock-parents = <&CLK_TMDSOUT_HDMI>,
+					<&CLK_TMDSOUT_HDMI>,
+					<&CLK_S_C0_PLL1 0>,
+					<&CLK_S_C0_PLL1 0>,
+					<&CLK_S_C0_PLL0 0>,
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+					<&CLK_S_C0_PLL1 0>;
+#else
+					<&CLK_S_C0_PLL0 0>;
+#endif
+
+			assigned-clock-rates = <(594000000/2)>,
+					<0>,
+					<400000000>,
+					<400000000>,
+					<355000000>,
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+					<400000000>;
+#else
+					<355000000>;
+#endif
+
+			power-domains = <&display_power_domains_group>;
+
+			plug_fifo_size      = <4096>;  /* Bytes */
+                        plug_bus_width      = <16>;    /* Bytes */
+                        plug_bus_clk_name   = "CLK_TX_ICN_DMU";
+
+			firmwares {
+				denc.fw = "denc_H407_b2120.fw";
+				hdf.fw = "hdf_H407_b2120.fw";
+			};
+
+
+
+			main {
+				display-pipe = "STiH418-main";
+				interrupts = <0 108 0>;
+				main-output-id = <OUTPUT_IDX_MAIN>;
+				hdmi-output-id = <OUTPUT_IDX_HDMI>;
+				dvo-output-id = <0xFFFFFFFF>; /* -1 ( none ) */
+				/* whitelist = <STiH418_REGISTER_BASE + STiH418_DENC_BASE,
+				STiH418_REGISTER_BASE + STiH418_DENC_BASE+PAGE_SIZE,
+				STiH418_REGISTER_BASE + STiH48_DENC_BASE+(PAGE_SIZE*2)>;*/
+				whitelist = <0x0A800000 0x0A801000 0x0A802000>;
+				io-offset = <0>;
+
+				planes {
+					plane-0 {
+						id = <PLANE_IDX_GDP1>;
+						/* flags = <STMCORE_PLANE_GFX   | STMCORE_PLANE_PREFERRED | STMCORE_PLANE_MEM_ANY>; */
+						flags = <54>;
+					};
+					plane-1 {
+						id = <PLANE_IDX_GDP2>;
+						/*flags = <STMCORE_PLANE_GFX   | STMCORE_PLANE_MEM_ANY>;*/
+						flags = <50>;
+					};
+					plane-2 {
+						id = <PLANE_IDX_GDP3>;
+						/* flags = <STMCORE_PLANE_GFX  | STMCORE_PLANE_MEM_ANY>;*/
+						flags = <50>;
+					};
+					plane-3 {
+						id = <PLANE_IDX_GDP4>;
+						/*flags = <STMCORE_PLANE_GFX   | STMCORE_PLANE_MEM_ANY>;*/
+						flags = <50>;
+					};
+					plane-4 {
+						id = <PLANE_IDX_VID_MAIN_1>;
+						/*flags = <STMCORE_PLANE_VIDEO | STMCORE_PLANE_PREFERRED | STMCORE_PLANE_MEM_ANY>;*/
+						flags = <52>;
+					};
+					plane-5 {
+						id = <PLANE_IDX_VID_MAIN_2>;
+						/*flags = <STMCORE_PLANE_VIDEO | STMCORE_PLANE_MEM_ANY>;*/
+						flags = <49>;
+					};
+					plane-6 {
+						id = <PLANE_IDX_VBI_MAIN>;
+						/*flags = <STMCORE_PLANE_GFX   | STMCORE_PLANE_MEM_ANY>;*/
+						flags = <50>;
+					};
+				};
+			};
+
+			aux {
+				display-pipe = "STiH418-aux";
+				interrupts = <0 109 0>;
+				main-output-id = <OUTPUT_IDX_AUX>;
+				hdmi-output-id = <0xFFFFFFFF> /* -1 */;
+				dvo-output-id = <0xFFFFFFFF> /* -1 */;
+				/* whitelist = <STiH418_REGISTER_BASE + STiH418_DENC_BASE,
+				STiH418_REGISTER_BASE + STiH418_DENC_BASE+PAGE_SIZE,
+				STiH418_REGISTER_BASE + STiH418_DENC_BASE+(PAGE_SIZE*2)>;*/
+				whitelist = <0x0A800000 0x0A801000 0x0A802000>;
+				io-offset = <0>;
+
+				planes {
+					plane-0 {
+						id = <PLANE_IDX_GDP3>;
+						/* flags = <STMCORE_PLANE_GFX   | STMCORE_PLANE_PREFERRED | STMCORE_PLANE_MEM_ANY>;*/
+						flags = <54>;
+					};
+					plane-1 {
+						id = <PLANE_IDX_GDP4>;
+						/*flags = <STMCORE_PLANE_GFX   | STMCORE_PLANE_MEM_ANY>;*/
+						flags = <50>;
+					};
+					plane-2 {
+						id = <PLANE_IDX_VID_MAIN_2>;
+						/* flags = <STMCORE_PLANE_VIDEO | STMCORE_PLANE_PREFERRED | STMCORE_PLANE_MEM_ANY>; */
+						flags = <53>;
+					};
+				};
+			};
+		};
+
+		/* Copy Protection driver */
+		stmcp: cp0 {
+			compatible = "st,stmcp", "simple-bus";
+			status = "okay";
+		};
+
+		/* HDMI-Tx */
+		hdmi0:hdmi-repeater@08D04000 {
+			compatible = "st,hdmi-repeater","simple-bus";
+			status = "okay";
+			interrupts = <0 106 0>;
+			reg = <0x0A804000 0x800>;
+			pipeline-id = <0>;
+			link-dev = <&displaylink0>;
+			hdmi-phy-config {
+				tmds0 {
+					freq = <0 145000000>;
+					config = <0x0 0x0 0x0 0x0>;
+				};
+				tmds1 {
+					freq = <145000000 165000000>;
+					config = <0x1110 0x00000000 0x00000000 0x0>;
+				};
+				tmds2 {
+					freq = <165000000 340000000>;
+					config = <0x1110 0x00030003 0x00000003 0x0>;
+				};
+				tmds3 {
+					freq = <340000000 600000000>;
+					config = <0x200000 0x0 0x0 0x0>;
+				};
+			};
+		};
+
+		/* HDMI-Rx*/
+		hdmirx0:hdmirx@08D20000 {
+			compatible = "st,hdmirx", "simple-bus";
+			status = "okay";
+			reg = <0x08D20000 0x8000>,
+			      <0x08F80000 0x8000>,
+			      <0x08D20000 0x8000>,
+			      <0x094A0770 0x4000>;
+			reg-names = "reg-core", "reg-phy", "reg-clk", "reg-csm";
+			interrupts = <0 110 0>,<0 140 0>;
+			clock-frequency-meas = <30000000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_hdmirx0_default>;
+			edid-wp-gpios = <&PIO2 5 0>;
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+			clocks = <&CLK_S_C0_FLEXGEN CLK_PROC_DVP>;
+			clock-names = "CLK_PROC_DVP";
+#else
+			clocks = <&CLK_S_C0_FLEXGEN CLK_COMPO_DVP>;
+			clock-names = "CLK_COMPO_DVP";
+#endif
+			clock-frequency = <400000000>;
+
+			route0 {
+				route-id = <0>;
+				output-pixel-width = <0x02>;
+				i2s-out-clk-scale-factor = <256>;
+				clk-gen-aud-id = <1>;
+				clk-gen-vid-id = <0>;
+				rterm-mode = <0>;
+				rterm-val = <0x3>;
+			};
+
+			port0 {
+				port-id = <0>;
+				csm-port-id = <0 0 1>;
+				port-detect-option = <0>;
+				hpd-enable;
+				/*edid-internal;*/
+				max-edid-block = <2>;
+				route-mask = <0x3>;
+				route-eq-mode = <3>;
+				route-op-mode = <0x08>;
+				route-eq-config {
+					low-freq-gain = <0x7>;
+					high-freq-gain = <0x0>;
+				};
+			};
+		};
+
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+		/* Compo-Capture */
+		compo0:compo-capture@0a6e0000 {
+			compatible = "st,compo-capture-v3.0.1";
+			/* Always enable as only soc dependent */
+			status = "okay";
+
+			/* Register and tile ram if any & Names respectively */
+			reg = <0x0a6e0000 0x1000>;
+			reg-names = "capture-io";
+		};
+
+		/* DVP-Capture IP v1.11 */
+		dvp0:dvp-capture@0b200000 {
+			compatible = "st,dvp-v1.11", "st,dvp-capture";
+			status = "okay";
+
+			/* Register and tile ram if any & Names respectively */
+			reg = <0x0b200000 0x1000>;
+			reg-names = "capture-io";
+
+			/* Interruptions & Names respectively */
+			interrupts = <GIC_SPI 67 IRQ_TYPE_NONE>;
+			interrupt-names = "capture-int";
+
+			clocks = <&CLK_S_C0_FLEXGEN CLK_PROC_DVP>;
+			clock-names = "CLK_PROC_DVP";
+			clock-frequency = <400000000>;
+			/* Reset register */
+			sys-reset-register = <0x92b020c>;
+			sys-reset-bit = <13>;
+		};
+
+#else
+		/* Compo-Capture */
+		compo0:compo-capture@0a6e0000 {
+			compatible = "st,compo-capture-v3.0";
+			/* Always enable as only soc dependent */
+			status = "okay";
+
+			/* Register and tile ram if any & Names respectively */
+			reg = <0x0a6e0000 0x1000>;
+			reg-names = "capture-io";
+		};
+
+		/* DVP-Capture IP v1.6 with chroma hscr block (support 422 input) */
+		dvp0:dvp-capture@9d12000 {
+			compatible = "st,dvp-v1.6", "st,dvp-capture";
+			status = "okay";
+
+			/* Register and tile ram if any & Names respectively */
+			reg = <0x9d12000 0x1000>;
+			reg-names = "capture-io";
+
+			/* Interruptions & Names respectively */
+			interrupts = <GIC_SPI 67 IRQ_TYPE_NONE>;
+			interrupt-names = "capture-int";
+
+			clocks = <&CLK_S_C0_FLEXGEN CLK_COMPO_DVP>;
+			clock-names = "CLK_COMPO_DVP";
+			clock-frequency = <400000000>;
+			/* Reset register */
+			sys-reset-register = <0x92b020c>;
+			sys-reset-bit = <13>;
+		};
+#endif
+	};
+};
diff -urNp a/arch/arm/boot/dts/sdk2_stih418-family_GRAPHICS.dtsi b/arch/arm/boot/dts/sdk2_stih418-family_GRAPHICS.dtsi
--- a/arch/arm/boot/dts/sdk2_stih418-family_GRAPHICS.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/sdk2_stih418-family_GRAPHICS.dtsi	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,86 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author(s): Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *            Carmelo Amoroso <carmelo.amoroso@st.com>
+ *            Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *            Nunzio Raciti <nunzio.raciti@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+
+#if defined (CONF_SOC_h418) || defined (CONF_SOC_h318) || defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+	#define CLK_ICN_GPU_RATE 400000000
+#elif defined (CONF_SOC_h414) || defined (CONF_SOC_h314)
+	#define CLK_ICN_GPU_RATE 355300000
+#else
+	#error SOC config (h418/h414/h318/h314/h419/h319) not defined
+#endif
+
+
+/ {
+
+	soc {
+
+		/* C8JPG */
+		c8jpg@08c84000 {
+			compatible = "st,c8jpg";
+			/* Always enable as only soc dependent */
+			status = "okay";
+
+			/* Register map & Name */
+			reg = <0x08c84000 0x1000>;
+			reg-names = "c8jpg-io";
+
+			/* Interruption & Name */
+			interrupts = <0 56 0>;
+			interrupt-names = "c8jpg-int";
+
+			/* Clock & Name */
+			clocks = <&CLK_S_C0_FLEXGEN CLK_JPEGDEC>;
+			clock-names = "c8jpg_dec";
+		};
+
+		/* MALI400 */
+		mali: mali@09f00000 {
+			compatible = "st,mali";
+			reg = <0x09f01000 0x200>,
+				<0x09f00000 0x100>, <0x09f03000 0x100>,
+				<0x09f08000 0x1100>, <0x09f04000 0x100>,
+				<0x09f0a000 0x1100>, <0x09f05000 0x100>,
+				<0x09f0c000 0x1100>, <0x09f06000 0x100>,
+				<0x09f0e000 0x1100>, <0x09f07000 0x100>;
+			reg-names = "Mali_L2",
+				"Mali_GP", "Mali_GP_MMU",
+				"Mali_PP0", "Mali_PP0_MMU",
+				"Mali_PP1", "Mali_PP1_MMU",
+				"Mali_PP2", "Mali_PP2_MMU",
+				"Mali_PP3", "Mali_PP3_MMU";
+			interrupts = <GIC_SPI 49 IRQ_TYPE_NONE>,
+				<GIC_SPI 50 IRQ_TYPE_NONE>,
+				<GIC_SPI 41 IRQ_TYPE_NONE>,
+				<GIC_SPI 45 IRQ_TYPE_NONE>,
+				<GIC_SPI 42 IRQ_TYPE_NONE>,
+				<GIC_SPI 46 IRQ_TYPE_NONE>,
+				<GIC_SPI 43 IRQ_TYPE_NONE>,
+				<GIC_SPI 47 IRQ_TYPE_NONE>,
+				<GIC_SPI 44 IRQ_TYPE_NONE>,
+				<GIC_SPI 48 IRQ_TYPE_NONE>;
+			interrupt-names = "Mali_GP_IRQ",
+				"Mali_GP_MMU_IRQ",
+				"Mali_PP0_IRQ",
+				"Mali_PP0_MMU_IRQ",
+				"Mali_PP1_IRQ",
+				"Mali_PP1_MMU_IRQ",
+				"Mali_PP2_IRQ",
+				"Mali_PP2_MMU_IRQ",
+				"Mali_PP3_IRQ",
+				"Mali_PP3_MMU_IRQ";
+			clock-names = "gpu-clk";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_ICN_GPU>;
+			gpu-clk-rate = <CLK_ICN_GPU_RATE>;
+		};
+
+	};
+};
diff -urNp a/arch/arm/boot/dts/sdk2_stih418-family_SCR.dtsi b/arch/arm/boot/dts/sdk2_stih418-family_SCR.dtsi
--- a/arch/arm/boot/dts/sdk2_stih418-family_SCR.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/sdk2_stih418-family_SCR.dtsi	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,209 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author(s): Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *            Carmelo Amoroso <carmelo.amoroso@st.com>
+ *            Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *            Nunzio Raciti <nunzio.raciti@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/ {
+	soc {
+
+		pin-controller-front0 {
+			serial0 {
+				pinctrl_scr_serial0_config_c4: scr_uart0-1 {
+					st,pins {
+						c4 = <&PIO17 0 ALT2 BIDIR>;
+					};
+				};
+
+				pinctrl_scr_serial0_config_c7: scr_uart0-2 {
+					st,pins {
+						c7 = <&PIO17 1 ALT2 BIDIR>;
+					};
+				};
+
+				pinctrl_scr_serial0_config_c8: scr_uart0-3 {
+					st,pins {
+						c8 = <&PIO17 6 ALT2 BIDIR>;
+					};
+				};
+			};
+
+			serial1 {
+				pinctrl_scr_serial1_config_c4: scr_uart1-1 {
+					st,pins {
+						c4 = <&PIO16 0 ALT2 BIDIR>;
+					};
+				};
+
+				pinctrl_scr_serial1_config_c7: scr_uart1-2 {
+					st,pins {
+						c7 = <&PIO16 1 ALT2 BIDIR>;
+					};
+				};
+
+				pinctrl_scr_serial1_config_c8: scr_uart1-3 {
+					st,pins {
+						c8 = <&PIO16 6 ALT2 BIDIR>;
+					};
+				};
+			};
+
+			scr0 {
+				pinctrl_scr0_default: scr0-default {
+					st,pins {
+						clk = <&PIO17 5 ALT2 OUT>;
+					};
+				};
+			};
+
+			scr1 {
+				pinctrl_scr1_default: scr1-default {
+					st,pins {
+						clk = <&PIO16 5 ALT2 OUT>;
+					};
+				};
+			};
+			/*CI*/
+			dvbci0-ctrl-sig {
+					pinctrl_ci_ctrl_sig: ci_ctrl_sig {
+						st,pins {
+							CI_VS1 = <&PIO19 1 ALT3 IN>;
+				/*Need to assign to exact value of signal map 8-13 after
+				receiving input from board designer*/
+							CI_PWR1 = <&PIO19 3 ALT3 OUT>;
+							CI_PWR2 = <&PIO19 4 ALT3 OUT>;
+						};
+					};
+			};
+			dvbci0-pin-set0 {
+				pinctrl_dvbci0_pin_set0_default: dvbci0-0-default {
+					st,pins {
+
+						ADDR14 =	<&PIO15 0	ALT3	OUT>;
+						ADDR13 =	<&PIO15 1	ALT3	OUT>;
+						ADDR12 =	<&PIO15 2	ALT3	OUT>;
+						ADDR11 =	<&PIO15 3	ALT3    OUT>;
+						ADDR10 =	<&PIO15 4	ALT3    OUT>;
+						ADDR9  =	<&PIO15 5	ALT3    OUT>;
+						ADDR8  =	<&PIO15 6	ALT3    OUT>;
+						ADDR7  =	<&PIO15 7	ALT3    OUT>;
+						ADDR6  =	<&PIO16 0	ALT3    OUT>;
+						ADDR5  =	<&PIO16 1	ALT3    OUT>;
+						ADDR4  =	<&PIO16 2	ALT3    OUT>;
+						ADDR3  =	<&PIO16 3	ALT3    OUT>;
+						ADDR2  =	<&PIO16 4	ALT3    OUT>;
+						ADDR1  =	<&PIO16 5	ALT3    OUT>;
+
+						DATA0  =	<&PIO18 0	ALT3     BIDIR_PU>;
+						DATA1  =	<&PIO18 1	ALT3     BIDIR_PU>;
+						DATA2  =	<&PIO18 2	ALT3     BIDIR_PU>;
+						DATA3  =	<&PIO18 3	ALT3     BIDIR_PU>;
+						DATA4  =	<&PIO18 4	ALT3     BIDIR_PU>;
+						DATA5  =	<&PIO18 5	ALT3     BIDIR_PU>;
+						DATA6  =	<&PIO18 6	ALT3     BIDIR_PU>;
+						DATA7  =	<&PIO18 7	ALT3     BIDIR_PU>;
+					};
+				};
+			};
+		};
+		pin-controller-front1 {
+			dvbci0-pin-set1 {
+				pinctrl_dvbci0_pin_set1_default: dvbci0-1-default {
+					st,pins {
+						ADDR0  =	<&PIO20 1	ALT3      OUT>;
+						IOWR   =	<&PIO20 0	ALT3      OUT>;
+						WEN    =	<&PIO20 2	ALT3      OUT>;
+						IORDN  =	<&PIO20 3	ALT3      OUT>;
+						WAIT   =	<&PIO20 4	ALT3       IN>;
+						REG    =	<&PIO20 5	ALT3      OUT>;
+						OEN    =	<&PIO20 6	ALT3      OUT>;
+						CS     =	<&PIO20 7	ALT3      OUT>;
+					};
+				};
+			};
+		};
+
+		/* override node asc uart0 properties for SCR driver */
+		serial0: serial@9830000 {
+			compatible = "st,asc_scr";
+			status = "okay";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+			clock-names = "scr_uart_clk";
+			c4-gpio = <&PIO17 0 0>;
+			c7-gpio = <&PIO17 1 0>;
+			c8-gpio = <&PIO17 6 0>;
+
+			pinctrl-names = "default", "config-c4", "config-c7",
+					  "config-c8";
+			pinctrl-0 = <&pinctrl_scr_serial0_config_c7>;
+			pinctrl-1 = <&pinctrl_scr_serial0_config_c4>;
+			pinctrl-2 = <&pinctrl_scr_serial0_config_c7>;
+			pinctrl-3 = <&pinctrl_scr_serial0_config_c8>;
+		};
+
+		serial1: serial@9831000 {
+			compatible = "st,asc_scr";
+			status = "okay";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+			clock-names = "scr_uart_clk";
+			c4-gpio = <&PIO16 0 0>;
+			c7-gpio = <&PIO16 1 0>;
+			c8-gpio = <&PIO16 6 0>;
+
+			pinctrl-names = "default", "config-c4", "config-c7",
+					  "config-c8";
+			pinctrl-0 = <&pinctrl_scr_serial1_config_c7>;
+			pinctrl-1 = <&pinctrl_scr_serial1_config_c4>;
+			pinctrl-2 = <&pinctrl_scr_serial1_config_c7>;
+			pinctrl-3 = <&pinctrl_scr_serial1_config_c8>;
+		};
+	
+		scr0: scr@9848000 {
+			compatible = "st,stih407-scr";
+			reg = <0x9848000 0x1000>;
+			uart = <&serial0>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_scr0_default>;
+
+			reset-gpio = <&PIO17 4 0>;
+			vcc-gpio = <&PIO17 2 0>;
+			detect-gpio = <&PIO17 7 0>;
+			class-sel-gpio = <&PIO17 3 0>;
+
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>,<&CLK_S_C0_FLEXGEN CLK_DSS_LPC>;
+			clock-names = "scr_clk","scr_clk_ext";
+
+			asc-fifo-size = <512>;
+
+			st,syscon = <&syscfg_core>;
+		};
+
+		/*Enable if scr1 is enabled on  board*/
+		scr1: scr@9849000 {
+			compatible = "st,stih407-scr";
+			reg = <0x9849000 0x1000>;
+			uart = <&serial1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_scr1_default>;
+
+			reset-gpio = <&PIO16 4 0>;
+			vcc-gpio = <&PIO16 2 0>;
+			detect-gpio = <&PIO16 7 0>;
+			class-sel-gpio = <&PIO16 3 0>;
+
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>,<&CLK_S_C0_FLEXGEN CLK_DSS_LPC>;
+			clock-names = "scr_clk","scr_clk_ext";
+
+			asc-fifo-size = <512>;
+
+			st,syscon = <&syscfg_core>;
+
+			status = "disabled";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/sdk2_stih418-family_SE.dtsi b/arch/arm/boot/dts/sdk2_stih418-family_SE.dtsi
--- a/arch/arm/boot/dts/sdk2_stih418-family_SE.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/sdk2_stih418-family_SE.dtsi	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,155 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author(s): Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *            Carmelo Amoroso <carmelo.amoroso@st.com>
+ *            Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *            Nunzio Raciti <nunzio.raciti@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+#if defined (CONF_MAP_2GB) || defined (CONF_MAP_1_5GB)
+	#define HADES_FW_ADDR 0x80A00000
+#elif defined (CONF_MAP_3GB)
+	#define HADES_FW_ADDR 0x40A00000
+#elif defined (CONF_MAP_1GB)
+	#define HADES_FW_ADDR 0xA0A00000
+#else
+	#error DDR config (1GB, 1_5GB, 2GB or 3GB) not defined
+#endif
+
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+       #define HADES_FW_NAME "hades_fw_cannes25c2.bin"
+#else
+       #define HADES_FW_NAME "hades_fw_cannes25.bin"
+#endif
+
+#if defined (CONF_SOC_h418) || defined (CONF_SOC_h318) || defined (CONF_SOC_h414) || defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+	#define CLK_PP_DMU_RATE 240000000
+#else
+	#define CLK_PP_DMU_RATE 300000000
+#endif
+	#define CLK_HWPE_HADES_RATE 400000000
+#elif defined (CONF_SOC_h314)
+	#define CLK_PP_DMU_RATE 266250000
+	#define CLK_HWPE_HADES_RATE 355300000
+#else
+	#error SOC config (h418/h414/h318/h314/h419/h319) not defined
+#endif
+
+
+/ {
+
+	soc {
+
+			h264pp {
+			compatible = "st,se-h264pp";
+			status = "okay";
+			reg = <0x8C00000 0x1FFFF>;
+			reg-names = "regs1";
+			interrupts = <0 53 0>;
+			clock-frequency = <CLK_PP_DMU_RATE>;
+			interrupt-names = "its1";
+			stbus-opc-size = <5>;
+			stbus-chunk-size = <0>;
+			stbus-msg-size = <3>;
+			clock-names = "clk_h264pp_0";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_PP_DMU>;
+			power-domains = <&delta_core>;
+		};
+
+		vp8 {
+			compatible = "st,se-hx170";
+			status = "okay";
+			reg = <0x8C80000 0x3FFF>;
+			reg-names = "regs";
+			interrupts = <0 57 0>;
+			clock-frequency = <329500050>;
+			interrupt-names = "its";
+			clock-names = "clk_vp8";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_TX_ICN_DMU>;
+		};
+
+#if defined (CONFIG_AVC)
+		h264encoder {
+			compatible = "st,se-hva";
+			status = "okay";
+			clock-frequency = <300000000>;
+			reg = <0x8C85000 0xFFF>,
+				<0x6000000 0x3FFFF>;
+			reg-names = "hva_registers", "hva_esram";
+			interrupts = <0 58 0>, <0 59 0>;
+			interrupt-names = "hva_its_irq", "hva_err_irq";
+			clock-names = "clk_hva";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_HVA>;
+			power-domains = <&hva_core>;
+		};
+
+		hva@8c85000 {
+			compatible = "st,hva";
+			status = "okay";
+			clock-frequency = <300000000>;
+			reg = <0x8C85000 0xFFF>,
+				<0x6000000 0x3FFFF>;
+			reg-names = "hva_registers", "hva_esram";
+			interrupts = <0 58 0>, <0 59 0>;
+			interrupt-names = "hva_its_irq", "hva_err_irq";
+			clock-names = "clk_hva";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_HVA>;
+			power-domains = <&hva_core>;
+		};
+#endif
+
+		hadespp {
+			compatible = "st,se-hadespp";
+			status = "okay";
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+			clock-frequency = <200000000 100000000>;
+#else
+			clock-frequency = <240000000 100000000>;
+#endif
+			reg = <0xA000000 0x3800>, <0xA003800 0x3800>;
+			reg-names = "hadespp1_registers", "hadespp2_registers";
+			interrupts = <0 78 0>, <0 80 0>;
+			interrupt-names = "hadespp1_irq", "hadespp2_irq";
+			clock-names = "clk_hevc_pp", "clk_avsp_pp";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_PP_HEVC>,
+			         <&CLK_S_C0_FLEXGEN CLK_AVSP_HEVC>;
+			power-domains = <&hades_core>;
+		};
+
+		hades {
+			compatible = "st,se-hades";
+			status = "okay";
+			reg = <0xA010000 0x6F0000>;
+			clock-frequency = <CLK_HWPE_HADES_RATE 332999958>;
+			reg-names = "hades_registers";
+			interrupts = <0 75 0>, <0 76 0>, <0 77 0>, <0 79 0>;
+			interrupt-names = "hades_gen_irq", "hades_err_irq",
+				"hades_mb_irq", "hades_rab_irq";
+			clock-names = "clk_hwpe_hades", "clk_fc_hades", "clk_tx_icn_hades";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_HWPE_HADES>,
+				 <&CLK_S_C0_FLEXGEN CLK_FC_HADES>,
+				 <&CLK_S_C0_FLEXGEN CLK_TX_ICN_HADES>;
+                        firmware = HADES_FW_NAME;
+			firmware-addr = <HADES_FW_ADDR>;
+			power-domains = <&hades_core>;
+		};
+
+#if defined (CONFIG_VP9)
+		vp9 {
+			compatible = "st,se-hx_170";
+			status = "okay";
+			reg = <0xAE00000 0xFFFFF>;
+			reg-names = "vp9_regs";
+			interrupts = <0 60 0>;
+			clock-frequency = <533000000>;
+			interrupt-names = "vp9_its_irq";
+			clock-names = "clk_vp9";
+			clocks = <&CLK_S_D2_FLEXGEN CLK_VP9>;
+		};
+#endif
+	};
+};
diff -urNp a/arch/arm/boot/dts/sdk2_stih418-family_TE.dtsi b/arch/arm/boot/dts/sdk2_stih418-family_TE.dtsi
--- a/arch/arm/boot/dts/sdk2_stih418-family_TE.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/sdk2_stih418-family_TE.dtsi	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,18 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author(s): Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *            Carmelo Amoroso <carmelo.amoroso@st.com>
+ *            Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *            Nunzio Raciti <nunzio.raciti@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+#include "stih419_TE.dtsi"
+#else /* This is common for h314, h318, h414, h418 */
+#include "stih418_TE.dtsi"
+#endif
+
diff -urNp a/arch/arm/boot/dts/sdk2_stih418-family_base_info.dtsi b/arch/arm/boot/dts/sdk2_stih418-family_base_info.dtsi
--- a/arch/arm/boot/dts/sdk2_stih418-family_base_info.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/sdk2_stih418-family_base_info.dtsi	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,231 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author(s): Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *            Carmelo Amoroso <carmelo.amoroso@st.com>
+ *            Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *            Nunzio Raciti <nunzio.raciti@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+#if defined (CONF_MAP_2GB) || defined (CONF_MAP_1_5GB)
+	#define TEE_FW_NAME "tee_firmware-stih419_gp0_2G.elf"
+	#define TEE_FW_RAM_BASE 0x80200000
+#elif defined (CONF_MAP_3GB)
+	#define TEE_FW_NAME "tee_firmware-stih419_gp0_3G.elf"
+	#define TEE_FW_RAM_BASE 0x40200000
+#elif defined (CONF_MAP_1GB)
+	#define TEE_FW_NAME "tee_firmware-stih419_gp0_1G.elf"
+	#define TEE_FW_RAM_BASE 0xA0200000
+#else
+	#error DDR config (1GB, 1_5GB, 2GB or 3GB) not defined
+#endif
+#else /* CONF_SOC_h418 || CONF_SOC_h318 */
+#if defined (CONF_MAP_2GB) || defined (CONF_MAP_1_5GB)
+	#define TEE_FW_NAME "tee_firmware-stih418_gp0_2G.elf"
+	#define TEE_FW_RAM_BASE 0x80200000
+#elif defined (CONF_MAP_3GB)
+	#define TEE_FW_NAME "tee_firmware-stih418_gp0_3G.elf"
+	#define TEE_FW_RAM_BASE 0x40200000
+#elif defined (CONF_MAP_1GB)
+	#define TEE_FW_NAME "tee_firmware-stih418_gp0_1G.elf"
+	#define TEE_FW_RAM_BASE 0xA0200000
+#else
+	#error DDR config (1GB, 1_5GB, 2GB or 3GB) not defined
+#endif
+#endif /* CONF_SOC_h418 || CONF_SOC_h318 */
+
+/*Changes for Remote Proc*/
+#define SECURE_BOOT_MEM_SIZE (0x200000)
+#define ST231_GP0_MEM_SIZE   (0x800000)
+#define HADES_MEM_SIZE       (0x200000)
+#define ST231_AUDIO_MEM_SIZE (0x800000)
+#define ST231_GP1_MEM_SIZE   (0x800000)
+#define ST231_DMU_MEM_SIZE   (0x400000)
+
+#define SECURE_BOOT_BASE_ADDR      PHYS_MEM_START
+#define ST231_GP0_MEM_BASE_ADDR    (SECURE_BOOT_BASE_ADDR + SECURE_BOOT_MEM_SIZE)
+#define HADES_MEM_BASE_ADDR        (ST231_GP0_MEM_BASE_ADDR + ST231_GP0_MEM_SIZE)
+#define ST231_AUDIO_MEM_BASE_ADDR  (HADES_MEM_BASE_ADDR + HADES_MEM_SIZE)
+#define ST231_GP1_MEM_BASE_ADDR    (ST231_AUDIO_MEM_BASE_ADDR + ST231_AUDIO_MEM_SIZE)
+#define ST231_DMU_MEM_BASE_ADDR    (ST231_GP1_MEM_BASE_ADDR + ST231_GP1_MEM_SIZE)
+
+/ {
+	aliases {
+		optee_st231_0 = &optee_st231_0;
+	};
+
+	soc {
+
+		/* SC resources */
+		cesc_config: cesc_config {
+			default-session-name = "default";
+		};
+
+		/* Tango-SC configuration */
+		cesc@09a20000 {
+			compatible = "st,tango-sc";
+			power-domains = <&stbe_core>;
+#ifndef CONFIG_TANGOSC
+			status = "disabled";
+#else
+			status = "okay";
+#endif
+			cesc_config = <&cesc_config>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_PROC_STFE>,
+				 <&CLK_S_C0_FLEXGEN CLK_PROC_SC>,
+				 <&CLK_S_C0_FLEXGEN CLK_PROC_TP>;
+
+			clock-names = "stfe_ccsc",
+				      "CLK_SC",
+				      "CLK_TP";
+
+			clocks_param {
+				clk0 {
+					clk-name = "stfe_ccsc";
+				};
+				clk1 {
+					clk-name = "CLK_SC";
+				};
+				clk2 {
+					clk-name = "CLK_TP";
+				};
+			};
+
+		};
+
+		smcs {
+			compatible = "st,smcs";
+			status = "okay";
+#ifdef CONF_SDP_SdpInactive
+			backend = <0>;
+#else
+			backend = <2>;
+#endif
+		};
+
+
+		mes@09000000 {
+			compatible = "st,mes3";
+			status = "okay";
+			reg		= <0x09000000 0x800>;
+			interrupts	= <0 22 0>;
+			interrupt-names	= "mes-int";
+			numregions	= <128>;
+		};
+
+		mes@0AA00000 {
+			compatible = "st,mes3";
+			status = "okay";
+			reg		= <0x0AA00000 0x800>;
+			interrupts	= <0 209 0>;
+			interrupt-names	= "mes-int";
+			numregions	= <128>;
+		};
+
+		optee_st231_0:st231sec@gp0 {
+			compatible =		"st,st231sec";
+			status =		"okay";
+			core_name =		"gp0";
+			conf =			<0x00000000>;
+			default_ctx =           <1>;
+
+			/* fimware configuration */
+			fw_name =		TEE_FW_NAME;
+			fw_ram_base =		<TEE_FW_RAM_BASE>;
+			fw_ram_size =		<0x00600000>;
+			fw_ram_max_size =	<0x00800000>;
+			ics_msgq_size =		<0x00040000>;
+#ifdef INCLUDE_SEC_DTS
+                        rprocs = <&xp70_tango_sc>;
+			rproc-names = "tango-sc";
+#endif
+		};
+		
+		st231_gp0:st231-gp0@0 {
+			reg = <ST231_GP0_MEM_BASE_ADDR ST231_GP0_MEM_SIZE>;
+		};
+		st231_gp1:st231-gp1@0 {
+			reg = <ST231_GP1_MEM_BASE_ADDR ST231_GP1_MEM_SIZE>;
+		};
+		st231_audio: st231-audio@0 {
+			reg = <ST231_AUDIO_MEM_BASE_ADDR ST231_AUDIO_MEM_SIZE>;
+		};
+		st231_dmu: st231-dmu@0 {
+			reg = <ST231_DMU_MEM_BASE_ADDR ST231_DMU_MEM_SIZE>;
+		};
+
+		ics {
+		compatible = "st,stih407-ics";
+		rprocs = <&st231_gp1>, <&st231_dmu>, <&st231_audio>, <&st231_gp0>;
+		rproc-names = "gp1", "video", "audio", "gp0";
+		};
+
+		/* socinfo:
+		 * product code and commercial code, can be accessed
+		 * from user space respectively from:
+		 *    /sys/bus/soc/devices/soc0/family
+		 *    /sys/bus/soc/devices/soc0/profile
+		 */
+		socinfo {
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+			st,syscfg-socinfo = <&syscfg_fuse 0x12e0 0x12e4>;
+#else
+			st,syscfg-socinfo = <&syscfg_fuse 0x1034 0x1028>;
+#endif
+			st,syscfg-eng = <&syscfg_eng_fuse 0x83c>;
+		};
+
+		/* Temperature sensor compensation */
+		/* not accessible in user space	*/
+		temp0 {
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+			st,syscfg-calib = <&syscfg_eng_fuse 0x498>;
+#else
+			st,syscfg-calib = <&syscfg_eng_fuse 0x840>;
+#endif
+		};
+
+		/* AVS code for DVFS */
+		/* not accessible in user space	*/
+		sti_cpufreq_init {
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+			st,syscfg-pcode = <&syscfg_eng_fuse 0x404>;
+#else
+			st,syscfg-pcode = <&syscfg_eng_fuse 0x840>;
+#endif
+		};
+
+		syscfg_fuse:nvs_10_public_port@0x8a40000 {
+			compatible = "syscon";
+			reg = <0x8a40000 0x2000>;
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+			holes = <0x0     0x12e0
+				 0x12e8  0xd18>;
+#else
+			holes = <0x0     0x1028
+				 0x102c  0x8
+				 0x1038  0xfc8>;
+#endif
+		};
+
+		/* temp0 and sti_cpufreq_init from Sngineering SAFMEM
+		 * (bitfiels of same word)
+		 */
+#if defined (CONF_SOC_h419) || defined (CONF_SOC_h319)
+		syscfg_eng_fuse:nvs_10_public_port@0x08A42000 {
+			compatible = "syscon";
+			reg = <0x08A42000 0x1000>;
+#else
+		syscfg_eng_fuse:nvs_10_public_port@0x08A65000 {
+			compatible = "syscon";
+			reg = <0x08A65000 0x1000>;
+#endif
+			holes = <0x0 0x83c
+				 0x844 0x7bc>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/sh7372-mackerel.dts b/arch/arm/boot/dts/sh7372-mackerel.dts
--- a/arch/arm/boot/dts/sh7372-mackerel.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sh7372-mackerel.dts	2015-10-27 00:45:05.000000000 +0000
@@ -9,7 +9,7 @@
  */
 
 /dts-v1/;
-#include "sh7372.dtsi"
+/include/ "sh7372.dtsi"
 
 / {
 	model = "Mackerel (AP4 EVM 2nd)";
diff -urNp a/arch/arm/boot/dts/sh7372.dtsi b/arch/arm/boot/dts/sh7372.dtsi
--- a/arch/arm/boot/dts/sh7372.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sh7372.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -14,22 +14,8 @@
 	compatible = "renesas,sh7372";
 
 	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
 		cpu@0 {
 			compatible = "arm,cortex-a8";
-			device_type = "cpu";
-			reg = <0x0>;
-			clock-frequency = <800000000>;
 		};
 	};
-
-	pfc: pfc@e6050000 {
-		compatible = "renesas,pfc-sh7372";
-		reg = <0xe6050000 0x8000>,
-		      <0xe605801c 0x1c>;
-		gpio-controller;
-		#gpio-cells = <2>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/sh73a0-kzm9g-reference.dts b/arch/arm/boot/dts/sh73a0-kzm9g-reference.dts
--- a/arch/arm/boot/dts/sh73a0-kzm9g-reference.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sh73a0-kzm9g-reference.dts	2015-10-27 00:45:05.000000000 +0000
@@ -12,35 +12,14 @@
  */
 
 /dts-v1/;
-#include "sh73a0.dtsi"
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-#include <dt-bindings/interrupt-controller/irq.h>
+/include/ "sh73a0.dtsi"
 
 / {
 	model = "KZM-A9-GT";
 	compatible = "renesas,kzm9g-reference", "renesas,sh73a0";
 
-	aliases {
-		serial4 = &scifa4;
-	};
-
-	cpus {
-		cpu@0 {
-			cpu0-supply = <&vdd_dvfs>;
-			operating-points = <
-				/* kHz  uV */
-				1196000 1315000
-				 598000 1175000
-				 398667 1065000
-			>;
-			voltage-tolerance = <1>; /* 1% */
-		};
-	};
-
 	chosen {
-		bootargs = "console=tty0 console=ttySC4,115200 root=/dev/nfs ip=dhcp ignore_loglevel rw";
-		stdout-path = &scifa4;
+		bootargs = "console=tty0 console=ttySC4,115200 root=/dev/nfs ip=dhcp ignore_loglevel earlyprintk=sh-sci.4,115200";
 	};
 
 	memory {
@@ -66,301 +45,35 @@
 		regulator-boot-on;
 	};
 
-	vmmc_sdhi0: regulator@2 {
-		compatible = "regulator-fixed";
-		regulator-name = "SDHI0 Vcc";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		gpio = <&pfc 15 GPIO_ACTIVE_HIGH>;
-		enable-active-high;
-	};
-
-	vmmc_sdhi2: regulator@3 {
-		compatible = "regulator-fixed";
-		regulator-name = "SDHI2 Vcc";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		gpio = <&pfc 14 GPIO_ACTIVE_HIGH>;
-		enable-active-high;
-	};
-
 	lan9220@10000000 {
 		compatible = "smsc,lan9220", "smsc,lan9115";
 		reg = <0x10000000 0x100>;
 		phy-mode = "mii";
 		interrupt-parent = <&irqpin0>;
-		interrupts = <3 IRQ_TYPE_EDGE_FALLING>;
+		interrupts = <3 0>;	/* active low */
 		reg-io-width = <4>;
 		smsc,irq-push-pull;
 		smsc,save-mac-address;
 		vddvario-supply = <&reg_1p8v>;
 		vdd33a-supply = <&reg_3p3v>;
 	};
-
-	leds {
-		compatible = "gpio-leds";
-		led1 {
-			gpios = <&pfc 20 GPIO_ACTIVE_LOW>;
-			label = "LED1";
-		};
-		led2 {
-			gpios = <&pfc 21 GPIO_ACTIVE_LOW>;
-			label = "LED2";
-		};
-		led3 {
-			gpios = <&pfc 22 GPIO_ACTIVE_LOW>;
-			label = "LED3";
-		};
-		led4 {
-			gpios = <&pfc 23 GPIO_ACTIVE_LOW>;
-			label = "LED4";
-		};
-	};
-
-	keyboard {
-		compatible = "gpio-keys";
-
-		back-key {
-			gpios = <&pcf8575 8 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_BACK>;
-			label = "SW3";
-		};
-
-		right-key {
-			gpios = <&pcf8575 9 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_RIGHT>;
-			label = "SW2-R";
-		};
-
-		left-key {
-			gpios = <&pcf8575 10 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_LEFT>;
-			label = "SW2-L";
-		};
-
-		enter-key {
-			gpios = <&pcf8575 11 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_ENTER>;
-			label = "SW2-P";
-		};
-
-		up-key {
-			gpios = <&pcf8575 12 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_UP>;
-			label = "SW2-U";
-		};
-
-		down-key {
-			gpios = <&pcf8575 13 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_DOWN>;
-			label = "SW2-D";
-		};
-
-		home-key {
-			gpios = <&pcf8575 14 GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_HOME>;
-			label = "SW1";
-		};
-	};
-
-	sound {
-		compatible = "simple-audio-card";
-		simple-audio-card,format = "left_j";
-		simple-audio-card,cpu {
-			sound-dai = <&sh_fsi2 0>;
-		};
-		simple-audio-card,codec {
-			sound-dai = <&ak4648>;
-			bitclock-master;
-			frame-master;
-			system-clock-frequency = <11289600>;
-		};
-	};
-};
-
-&cmt1 {
-	status = "okay";
-};
-
-&extal2_clk {
-	clock-frequency = <48000000>;
-};
-
-&i2c0 {
-	status = "okay";
-	as3711@40 {
-		compatible = "ams,as3711";
-		reg = <0x40>;
-
-		regulators {
-			vdd_dvfs: sd1 {
-				regulator-name = "1.315V CPU";
-				regulator-min-microvolt = <1050000>;
-				regulator-max-microvolt = <1350000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-			sd2 {
-				regulator-name = "1.8V";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-			sd4 {
-				regulator-name = "1.215V";
-				regulator-min-microvolt = <1215000>;
-				regulator-max-microvolt = <1235000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-			ldo2 {
-				regulator-name = "2.8V CPU";
-				regulator-min-microvolt = <2800000>;
-				regulator-max-microvolt = <2800000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-			ldo3 {
-				regulator-name = "3.0V CPU";
-				regulator-min-microvolt = <3000000>;
-				regulator-max-microvolt = <3000000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-			ldo4 {
-				regulator-name = "2.8V";
-				regulator-min-microvolt = <2800000>;
-				regulator-max-microvolt = <2800000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-			ldo5 {
-				regulator-name = "2.8V #2";
-				regulator-min-microvolt = <2800000>;
-				regulator-max-microvolt = <2800000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-			ldo7 {
-				regulator-name = "1.15V CPU";
-				regulator-min-microvolt = <1150000>;
-				regulator-max-microvolt = <1150000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-			ldo8 {
-				regulator-name = "1.15V CPU #2";
-				regulator-min-microvolt = <1150000>;
-				regulator-max-microvolt = <1150000>;
-				regulator-always-on;
-				regulator-boot-on;
-			};
-		};
-	};
-
-	ak4648: ak4648@12 {
-		#sound-dai-cells = <0>;
-		compatible = "asahi-kasei,ak4648";
-		reg = <0x12>;
-	};
-};
-
-&i2c3 {
-	pinctrl-0 = <&i2c3_pins>;
-	pinctrl-names = "default";
-	status = "okay";
-
-	pcf8575: gpio@20 {
-		compatible = "nxp,pcf8575";
-		reg = <0x20>;
-		interrupt-parent = <&irqpin2>;
-		interrupts = <3 IRQ_TYPE_EDGE_FALLING>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		interrupt-controller;
-		#interrupt-cells = <2>;
-	};
 };
 
 &mmcif {
-	pinctrl-0 = <&mmcif_pins>;
-	pinctrl-names = "default";
-
 	bus-width = <8>;
 	vmmc-supply = <&reg_1p8v>;
 	status = "okay";
 };
 
-&pfc {
-	i2c3_pins: i2c3 {
-		renesas,groups = "i2c3_1";
-		renesas,function = "i2c3";
-	};
-
-	mmcif_pins: mmc {
-		mux {
-			renesas,groups = "mmc0_data8_0", "mmc0_ctrl_0";
-			renesas,function = "mmc0";
-		};
-		cfg {
-			renesas,groups = "mmc0_data8_0";
-			renesas,pins = "PORT279";
-			bias-pull-up;
-		};
-	};
-
-	scifa4_pins: serial4 {
-		renesas,groups = "scifa4_data", "scifa4_ctrl";
-		renesas,function = "scifa4";
-	};
-
-	sdhi0_pins: sd0 {
-		renesas,groups = "sdhi0_data4", "sdhi0_ctrl", "sdhi0_cd", "sdhi0_wp";
-		renesas,function = "sdhi0";
-	};
-
-	sdhi2_pins: sd2 {
-		renesas,groups = "sdhi2_data4", "sdhi2_ctrl";
-		renesas,function = "sdhi2";
-	};
-
-	fsia_pins: sounda {
-		renesas,groups = "fsia_mclk_in", "fsia_sclk_in",
-				 "fsia_data_in", "fsia_data_out";
-		renesas,function = "fsia";
-	};
-};
-
-&scifa4 {
-	pinctrl-0 = <&scifa4_pins>;
-	pinctrl-names = "default";
-
-	status = "okay";
-};
-
 &sdhi0 {
-	pinctrl-0 = <&sdhi0_pins>;
-	pinctrl-names = "default";
-
-	vmmc-supply = <&vmmc_sdhi0>;
+	vmmc-supply = <&reg_3p3v>;
 	bus-width = <4>;
 	status = "okay";
 };
 
 &sdhi2 {
-	pinctrl-0 = <&sdhi2_pins>;
-	pinctrl-names = "default";
-
-	vmmc-supply = <&vmmc_sdhi2>;
+	vmmc-supply = <&reg_3p3v>;
 	bus-width = <4>;
 	broken-cd;
 	status = "okay";
 };
-
-&sh_fsi2 {
-	pinctrl-0 = <&fsia_pins>;
-	pinctrl-names = "default";
-
-	status = "okay";
-};
diff -urNp a/arch/arm/boot/dts/sh73a0-kzm9g.dts b/arch/arm/boot/dts/sh73a0-kzm9g.dts
--- a/arch/arm/boot/dts/sh73a0-kzm9g.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sh73a0-kzm9g.dts	2015-10-27 00:45:05.000000000 +0000
@@ -9,14 +9,14 @@
  */
 
 /dts-v1/;
-#include "sh73a0.dtsi"
+/include/ "sh73a0.dtsi"
 
 / {
 	model = "KZM-A9-GT";
 	compatible = "renesas,kzm9g", "renesas,sh73a0";
 
 	chosen {
-		bootargs = "console=tty0 console=ttySC4,115200 root=/dev/nfs ip=dhcp ignore_loglevel earlyprintk=sh-sci.4,115200 rw";
+		bootargs = "console=tty0 console=ttySC4,115200 root=/dev/nfs ip=dhcp ignore_loglevel earlyprintk=sh-sci.4,115200";
 	};
 
 	memory {
diff -urNp a/arch/arm/boot/dts/sh73a0.dtsi b/arch/arm/boot/dts/sh73a0.dtsi
--- a/arch/arm/boot/dts/sh73a0.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sh73a0.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -10,12 +10,8 @@
 
 /include/ "skeleton.dtsi"
 
-#include <dt-bindings/clock/sh73a0-clock.h>
-#include <dt-bindings/interrupt-controller/irq.h>
-
 / {
 	compatible = "renesas,sh73a0";
-	interrupt-parent = <&gic>;
 
 	cpus {
 		#address-cells = <1>;
@@ -25,60 +21,25 @@
 			device_type = "cpu";
 			compatible = "arm,cortex-a9";
 			reg = <0>;
-			clock-frequency = <1196000000>;
 		};
 		cpu@1 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a9";
 			reg = <1>;
-			clock-frequency = <1196000000>;
 		};
 	};
 
 	gic: interrupt-controller@f0001000 {
 		compatible = "arm,cortex-a9-gic";
 		#interrupt-cells = <3>;
+		#address-cells = <1>;
 		interrupt-controller;
 		reg = <0xf0001000 0x1000>,
 		      <0xf0000100 0x100>;
 	};
 
-	sbsc2: memory-controller@fb400000 {
-		compatible = "renesas,sbsc-sh73a0";
-		reg = <0xfb400000 0x400>;
-		interrupts = <0 37 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 38 IRQ_TYPE_LEVEL_HIGH>;
-		interrupt-names = "sec", "temp";
-	};
-
-	sbsc1: memory-controller@fe400000 {
-		compatible = "renesas,sbsc-sh73a0";
-		reg = <0xfe400000 0x400>;
-		interrupts = <0 35 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 36 IRQ_TYPE_LEVEL_HIGH>;
-		interrupt-names = "sec", "temp";
-	};
-
-	pmu {
-		compatible = "arm,cortex-a9-pmu";
-		interrupts = <0 55 IRQ_TYPE_LEVEL_HIGH>,
-			     <0 56 IRQ_TYPE_LEVEL_HIGH>;
-	};
-
-	cmt1: timer@e6138000 {
-		compatible = "renesas,cmt-48-sh73a0", "renesas,cmt-48";
-		reg = <0xe6138000 0x200>;
-		interrupts = <0 65 IRQ_TYPE_LEVEL_HIGH>;
-
-		renesas,channels-mask = <0x3f>;
-
-		clocks = <&mstp3_clks SH73A0_CLK_CMT1>;
-		clock-names = "fck";
-		status = "disabled";
-	};
-
 	irqpin0: irqpin@e6900000 {
-		compatible = "renesas,intc-irqpin-sh73a0", "renesas,intc-irqpin";
+		compatible = "renesas,intc-irqpin";
 		#interrupt-cells = <2>;
 		interrupt-controller;
 		reg = <0xe6900000 4>,
@@ -86,18 +47,19 @@
 			<0xe6900020 1>,
 			<0xe6900040 1>,
 			<0xe6900060 1>;
-		interrupts = <0 1 IRQ_TYPE_LEVEL_HIGH
-			      0 2 IRQ_TYPE_LEVEL_HIGH
-			      0 3 IRQ_TYPE_LEVEL_HIGH
-			      0 4 IRQ_TYPE_LEVEL_HIGH
-			      0 5 IRQ_TYPE_LEVEL_HIGH
-			      0 6 IRQ_TYPE_LEVEL_HIGH
-			      0 7 IRQ_TYPE_LEVEL_HIGH
-			      0 8 IRQ_TYPE_LEVEL_HIGH>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 1 0x4
+			      0 2 0x4
+			      0 3 0x4
+			      0 4 0x4
+			      0 5 0x4
+			      0 6 0x4
+			      0 7 0x4
+			      0 8 0x4>;
 	};
 
 	irqpin1: irqpin@e6900004 {
-		compatible = "renesas,intc-irqpin-sh73a0", "renesas,intc-irqpin";
+		compatible = "renesas,intc-irqpin";
 		#interrupt-cells = <2>;
 		interrupt-controller;
 		reg = <0xe6900004 4>,
@@ -105,19 +67,20 @@
 			<0xe6900024 1>,
 			<0xe6900044 1>,
 			<0xe6900064 1>;
-		interrupts = <0 9 IRQ_TYPE_LEVEL_HIGH
-			      0 10 IRQ_TYPE_LEVEL_HIGH
-			      0 11 IRQ_TYPE_LEVEL_HIGH
-			      0 12 IRQ_TYPE_LEVEL_HIGH
-			      0 13 IRQ_TYPE_LEVEL_HIGH
-			      0 14 IRQ_TYPE_LEVEL_HIGH
-			      0 15 IRQ_TYPE_LEVEL_HIGH
-			      0 16 IRQ_TYPE_LEVEL_HIGH>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 9 0x4
+			      0 10 0x4
+			      0 11 0x4
+			      0 12 0x4
+			      0 13 0x4
+			      0 14 0x4
+			      0 15 0x4
+			      0 16 0x4>;
 		control-parent;
 	};
 
 	irqpin2: irqpin@e6900008 {
-		compatible = "renesas,intc-irqpin-sh73a0", "renesas,intc-irqpin";
+		compatible = "renesas,intc-irqpin";
 		#interrupt-cells = <2>;
 		interrupt-controller;
 		reg = <0xe6900008 4>,
@@ -125,18 +88,19 @@
 			<0xe6900028 1>,
 			<0xe6900048 1>,
 			<0xe6900068 1>;
-		interrupts = <0 17 IRQ_TYPE_LEVEL_HIGH
-			      0 18 IRQ_TYPE_LEVEL_HIGH
-			      0 19 IRQ_TYPE_LEVEL_HIGH
-			      0 20 IRQ_TYPE_LEVEL_HIGH
-			      0 21 IRQ_TYPE_LEVEL_HIGH
-			      0 22 IRQ_TYPE_LEVEL_HIGH
-			      0 23 IRQ_TYPE_LEVEL_HIGH
-			      0 24 IRQ_TYPE_LEVEL_HIGH>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 17 0x4
+			      0 18 0x4
+			      0 19 0x4
+			      0 20 0x4
+			      0 21 0x4
+			      0 22 0x4
+			      0 23 0x4
+			      0 24 0x4>;
 	};
 
 	irqpin3: irqpin@e690000c {
-		compatible = "renesas,intc-irqpin-sh73a0", "renesas,intc-irqpin";
+		compatible = "renesas,intc-irqpin";
 		#interrupt-cells = <2>;
 		interrupt-controller;
 		reg = <0xe690000c 4>,
@@ -144,556 +108,118 @@
 			<0xe690002c 1>,
 			<0xe690004c 1>,
 			<0xe690006c 1>;
-		interrupts = <0 25 IRQ_TYPE_LEVEL_HIGH
-			      0 26 IRQ_TYPE_LEVEL_HIGH
-			      0 27 IRQ_TYPE_LEVEL_HIGH
-			      0 28 IRQ_TYPE_LEVEL_HIGH
-			      0 29 IRQ_TYPE_LEVEL_HIGH
-			      0 30 IRQ_TYPE_LEVEL_HIGH
-			      0 31 IRQ_TYPE_LEVEL_HIGH
-			      0 32 IRQ_TYPE_LEVEL_HIGH>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 25 0x4
+			      0 26 0x4
+			      0 27 0x4
+			      0 28 0x4
+			      0 29 0x4
+			      0 30 0x4
+			      0 31 0x4
+			      0 32 0x4>;
 	};
 
-	i2c0: i2c@e6820000 {
+	i2c0: i2c@0xe6820000 {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		compatible = "renesas,iic-sh73a0", "renesas,rmobile-iic";
+		compatible = "renesas,rmobile-iic";
 		reg = <0xe6820000 0x425>;
-		interrupts = <0 167 IRQ_TYPE_LEVEL_HIGH
-			      0 168 IRQ_TYPE_LEVEL_HIGH
-			      0 169 IRQ_TYPE_LEVEL_HIGH
-			      0 170 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp1_clks SH73A0_CLK_IIC0>;
-		status = "disabled";
+		interrupt-parent = <&gic>;
+		interrupts = <0 167 0x4
+			      0 168 0x4
+			      0 169 0x4
+			      0 170 0x4>;
 	};
 
-	i2c1: i2c@e6822000 {
+	i2c1: i2c@0xe6822000 {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		compatible = "renesas,iic-sh73a0", "renesas,rmobile-iic";
+		compatible = "renesas,rmobile-iic";
 		reg = <0xe6822000 0x425>;
-		interrupts = <0 51 IRQ_TYPE_LEVEL_HIGH
-			      0 52 IRQ_TYPE_LEVEL_HIGH
-			      0 53 IRQ_TYPE_LEVEL_HIGH
-			      0 54 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks SH73A0_CLK_IIC1>;
-		status = "disabled";
+		interrupt-parent = <&gic>;
+		interrupts = <0 51 0x4
+			      0 52 0x4
+			      0 53 0x4
+			      0 54 0x4>;
 	};
 
-	i2c2: i2c@e6824000 {
+	i2c2: i2c@0xe6824000 {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		compatible = "renesas,iic-sh73a0", "renesas,rmobile-iic";
+		compatible = "renesas,rmobile-iic";
 		reg = <0xe6824000 0x425>;
-		interrupts = <0 171 IRQ_TYPE_LEVEL_HIGH
-			      0 172 IRQ_TYPE_LEVEL_HIGH
-			      0 173 IRQ_TYPE_LEVEL_HIGH
-			      0 174 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp0_clks SH73A0_CLK_IIC2>;
-		status = "disabled";
+		interrupt-parent = <&gic>;
+		interrupts = <0 171 0x4
+			      0 172 0x4
+			      0 173 0x4
+			      0 174 0x4>;
 	};
 
-	i2c3: i2c@e6826000 {
+	i2c3: i2c@0xe6826000 {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		compatible = "renesas,iic-sh73a0", "renesas,rmobile-iic";
+		compatible = "renesas,rmobile-iic";
 		reg = <0xe6826000 0x425>;
-		interrupts = <0 183 IRQ_TYPE_LEVEL_HIGH
-			      0 184 IRQ_TYPE_LEVEL_HIGH
-			      0 185 IRQ_TYPE_LEVEL_HIGH
-			      0 186 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp4_clks SH73A0_CLK_IIC3>;
-		status = "disabled";
+		interrupt-parent = <&gic>;
+		interrupts = <0 183 0x4
+			      0 184 0x4
+			      0 185 0x4
+			      0 186 0x4>;
 	};
 
-	i2c4: i2c@e6828000 {
+	i2c4: i2c@0xe6828000 {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		compatible = "renesas,iic-sh73a0", "renesas,rmobile-iic";
+		compatible = "renesas,rmobile-iic";
 		reg = <0xe6828000 0x425>;
-		interrupts = <0 187 IRQ_TYPE_LEVEL_HIGH
-			      0 188 IRQ_TYPE_LEVEL_HIGH
-			      0 189 IRQ_TYPE_LEVEL_HIGH
-			      0 190 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp4_clks SH73A0_CLK_IIC4>;
-		status = "disabled";
+		interrupt-parent = <&gic>;
+		interrupts = <0 187 0x4
+			      0 188 0x4
+			      0 189 0x4
+			      0 190 0x4>;
 	};
 
-	mmcif: mmc@e6bd0000 {
+	mmcif: mmcif@0x10010000 {
 		compatible = "renesas,sh-mmcif";
 		reg = <0xe6bd0000 0x100>;
-		interrupts = <0 140 IRQ_TYPE_LEVEL_HIGH
-			      0 141 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks SH73A0_CLK_MMCIF0>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 140 0x4
+			      0 141 0x4>;
 		reg-io-width = <4>;
 		status = "disabled";
 	};
 
-	sdhi0: sd@ee100000 {
-		compatible = "renesas,sdhi-sh73a0";
+	sdhi0: sdhi@0xee100000 {
+		compatible = "renesas,r8a7740-sdhi";
 		reg = <0xee100000 0x100>;
-		interrupts = <0 83 IRQ_TYPE_LEVEL_HIGH
-			      0 84 IRQ_TYPE_LEVEL_HIGH
-			      0 85 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks SH73A0_CLK_SDHI0>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 83 4
+				0 84 4
+				0 85 4>;
 		cap-sd-highspeed;
 		status = "disabled";
 	};
 
 	/* SDHI1 and SDHI2 have no CD pins, no need for CD IRQ */
-	sdhi1: sd@ee120000 {
-		compatible = "renesas,sdhi-sh73a0";
+	sdhi1: sdhi@0xee120000 {
+		compatible = "renesas,r8a7740-sdhi";
 		reg = <0xee120000 0x100>;
-		interrupts = <0 88 IRQ_TYPE_LEVEL_HIGH
-			      0 89 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks SH73A0_CLK_SDHI1>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 88 4
+				0 89 4>;
 		toshiba,mmc-wrprotect-disable;
 		cap-sd-highspeed;
 		status = "disabled";
 	};
 
-	sdhi2: sd@ee140000 {
-		compatible = "renesas,sdhi-sh73a0";
+	sdhi2: sdhi@0xee140000 {
+		compatible = "renesas,r8a7740-sdhi";
 		reg = <0xee140000 0x100>;
-		interrupts = <0 104 IRQ_TYPE_LEVEL_HIGH
-			      0 105 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks SH73A0_CLK_SDHI2>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 104 4
+				0 105 4>;
 		toshiba,mmc-wrprotect-disable;
 		cap-sd-highspeed;
 		status = "disabled";
 	};
-
-	scifa0: serial@e6c40000 {
-		compatible = "renesas,scifa-sh73a0", "renesas,scifa";
-		reg = <0xe6c40000 0x100>;
-		interrupts = <0 72 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks SH73A0_CLK_SCIFA0>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifa1: serial@e6c50000 {
-		compatible = "renesas,scifa-sh73a0", "renesas,scifa";
-		reg = <0xe6c50000 0x100>;
-		interrupts = <0 73 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks SH73A0_CLK_SCIFA1>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifa2: serial@e6c60000 {
-		compatible = "renesas,scifa-sh73a0", "renesas,scifa";
-		reg = <0xe6c60000 0x100>;
-		interrupts = <0 74 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks SH73A0_CLK_SCIFA2>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifa3: serial@e6c70000 {
-		compatible = "renesas,scifa-sh73a0", "renesas,scifa";
-		reg = <0xe6c70000 0x100>;
-		interrupts = <0 75 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks SH73A0_CLK_SCIFA3>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifa4: serial@e6c80000 {
-		compatible = "renesas,scifa-sh73a0", "renesas,scifa";
-		reg = <0xe6c80000 0x100>;
-		interrupts = <0 78 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks SH73A0_CLK_SCIFA4>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifa5: serial@e6cb0000 {
-		compatible = "renesas,scifa-sh73a0", "renesas,scifa";
-		reg = <0xe6cb0000 0x100>;
-		interrupts = <0 79 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks SH73A0_CLK_SCIFA5>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifa6: serial@e6cc0000 {
-		compatible = "renesas,scifa-sh73a0", "renesas,scifa";
-		reg = <0xe6cc0000 0x100>;
-		interrupts = <0 156 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp3_clks SH73A0_CLK_SCIFA6>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifa7: serial@e6cd0000 {
-		compatible = "renesas,scifa-sh73a0", "renesas,scifa";
-		reg = <0xe6cd0000 0x100>;
-		interrupts = <0 143 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks SH73A0_CLK_SCIFA7>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	scifb8: serial@e6c30000 {
-		compatible = "renesas,scifb-sh73a0", "renesas,scifb";
-		reg = <0xe6c30000 0x100>;
-		interrupts = <0 80 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&mstp2_clks SH73A0_CLK_SCIFB>;
-		clock-names = "sci_ick";
-		status = "disabled";
-	};
-
-	pfc: pfc@e6050000 {
-		compatible = "renesas,pfc-sh73a0";
-		reg = <0xe6050000 0x8000>,
-		      <0xe605801c 0x1c>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		interrupts-extended =
-			<&irqpin0 0 0>, <&irqpin0 1 0>, <&irqpin0 2 0>, <&irqpin0 3 0>,
-			<&irqpin0 4 0>, <&irqpin0 5 0>, <&irqpin0 6 0>, <&irqpin0 7 0>,
-			<&irqpin1 0 0>, <&irqpin1 1 0>, <&irqpin1 2 0>, <&irqpin1 3 0>,
-			<&irqpin1 4 0>, <&irqpin1 5 0>, <&irqpin1 6 0>, <&irqpin1 7 0>,
-			<&irqpin2 0 0>, <&irqpin2 1 0>, <&irqpin2 2 0>, <&irqpin2 3 0>,
-			<&irqpin2 4 0>, <&irqpin2 5 0>, <&irqpin2 6 0>, <&irqpin2 7 0>,
-			<&irqpin3 0 0>, <&irqpin3 1 0>, <&irqpin3 2 0>, <&irqpin3 3 0>,
-			<&irqpin3 4 0>, <&irqpin3 5 0>, <&irqpin3 6 0>, <&irqpin3 7 0>;
-	};
-
-	sh_fsi2: sound@ec230000 {
-		#sound-dai-cells = <1>;
-		compatible = "renesas,fsi2-sh73a0", "renesas,sh_fsi2";
-		reg = <0xec230000 0x400>;
-		interrupts = <0 146 0x4>;
-		status = "disabled";
-	};
-
-	clocks {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges;
-
-		/* External root clocks */
-		extalr_clk: extalr_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <32768>;
-			clock-output-names = "extalr";
-		};
-		extal1_clk: extal1_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <26000000>;
-			clock-output-names = "extal1";
-		};
-		extal2_clk: extal2_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-output-names = "extal2";
-		};
-		extcki_clk: extcki_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-output-names = "extcki";
-		};
-		fsiack_clk: fsiack_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-			clock-output-names = "fsiack";
-		};
-		fsibck_clk: fsibck_clk {
-			compatible = "fixed-clock";
-			#clock-cells = <0>;
-			clock-frequency = <0>;
-			clock-output-names = "fsibck";
-		};
-
-		/* Special CPG clocks */
-		cpg_clocks: cpg_clocks@e6150000 {
-			compatible = "renesas,sh73a0-cpg-clocks";
-			reg = <0xe6150000 0x10000>;
-			clocks = <&extal1_clk>, <&extal2_clk>;
-			#clock-cells = <1>;
-			clock-output-names = "main", "pll0", "pll1", "pll2",
-					     "pll3", "dsi0phy", "dsi1phy",
-					     "zg", "m3", "b", "m1", "m2",
-					     "z", "zx", "hp";
-		};
-
-		/* Variable factor clocks (DIV6) */
-		vclk1_clk: vclk1_clk@e6150008 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150008 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "vclk1";
-		};
-		vclk2_clk: vclk2_clk@e615000c {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe615000c 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "vclk2";
-		};
-		vclk3_clk: vclk3_clk@e615001c {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe615001c 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "vclk3";
-		};
-		zb_clk: zb_clk@e6150010 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150010 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "zb";
-		};
-		flctl_clk: flctl_clk@e6150014 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150014 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "flctlck";
-		};
-		sdhi0_clk: sdhi0_clk@e6150074 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150074 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "sdhi0ck";
-		};
-		sdhi1_clk: sdhi1_clk@e6150078 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150078 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "sdhi1ck";
-		};
-		sdhi2_clk: sdhi2_clk@e615007c {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe615007c 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "sdhi2ck";
-		};
-		fsia_clk: fsia_clk@e6150018 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150018 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "fsia";
-		};
-		fsib_clk: fsib_clk@e6150090 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150090 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "fsib";
-		};
-		sub_clk: sub_clk@e6150080 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150080 4>;
-			clocks = <&extal2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "sub";
-		};
-		spua_clk: spua_clk@e6150084 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150084 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "spua";
-		};
-		spuv_clk: spuv_clk@e6150094 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150094 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "spuv";
-		};
-		msu_clk: msu_clk@e6150088 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150088 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "msu";
-		};
-		hsi_clk: hsi_clk@e615008c {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe615008c 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "hsi";
-		};
-		mfg1_clk: mfg1_clk@e6150098 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150098 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "mfg1";
-		};
-		mfg2_clk: mfg2_clk@e615009c {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe615009c 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "mfg2";
-		};
-		dsit_clk: dsit_clk@e6150060 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150060 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "dsit";
-		};
-		dsi0p_clk: dsi0p_clk@e6150064 {
-			compatible = "renesas,sh73a0-div6-clock", "renesas,cpg-div6-clock";
-			reg = <0xe6150064 4>;
-			clocks = <&pll1_div2_clk>;
-			#clock-cells = <0>;
-			clock-output-names = "dsi0pck";
-		};
-
-		/* Fixed factor clocks */
-		main_div2_clk: main_div2_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks SH73A0_CLK_MAIN>;
-			#clock-cells = <0>;
-			clock-div = <2>;
-			clock-mult = <1>;
-			clock-output-names = "main_div2";
-		};
-		pll1_div2_clk: pll1_div2_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks SH73A0_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <2>;
-			clock-mult = <1>;
-			clock-output-names = "pll1_div2";
-		};
-		pll1_div7_clk: pll1_div7_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks SH73A0_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <7>;
-			clock-mult = <1>;
-			clock-output-names = "pll1_div7";
-		};
-		pll1_div13_clk: pll1_div13_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks SH73A0_CLK_PLL1>;
-			#clock-cells = <0>;
-			clock-div = <13>;
-			clock-mult = <1>;
-			clock-output-names = "pll1_div13";
-		};
-		twd_clk: twd_clk {
-			compatible = "fixed-factor-clock";
-			clocks = <&cpg_clocks SH73A0_CLK_Z>;
-			#clock-cells = <0>;
-			clock-div = <4>;
-			clock-mult = <1>;
-			clock-output-names = "twd";
-		};
-
-		/* Gate clocks */
-		mstp0_clks: mstp0_clks@e6150130 {
-			compatible = "renesas,sh73a0-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0xe6150130 4>, <0xe6150030 4>;
-			clocks = <&cpg_clocks SH73A0_CLK_HP>;
-			#clock-cells = <1>;
-			clock-indices = <
-				SH73A0_CLK_IIC2
-			>;
-			clock-output-names =
-				"iic2";
-		};
-		mstp1_clks: mstp1_clks@e6150134 {
-			compatible = "renesas,sh73a0-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0xe6150134 4>, <0xe6150038 4>;
-			clocks = <&cpg_clocks SH73A0_CLK_B>,
-				 <&cpg_clocks SH73A0_CLK_B>,
-				 <&cpg_clocks SH73A0_CLK_B>,
-				 <&cpg_clocks SH73A0_CLK_B>,
-				 <&sub_clk>, <&cpg_clocks SH73A0_CLK_B>,
-				 <&cpg_clocks SH73A0_CLK_HP>,
-				 <&cpg_clocks SH73A0_CLK_ZG>,
-				 <&cpg_clocks SH73A0_CLK_B>;
-			#clock-cells = <1>;
-			clock-indices = <
-				SH73A0_CLK_CEU1 SH73A0_CLK_CSI2_RX1
-				SH73A0_CLK_CEU0 SH73A0_CLK_CSI2_RX0
-				SH73A0_CLK_TMU0	SH73A0_CLK_DSITX0
-				SH73A0_CLK_IIC0 SH73A0_CLK_SGX
-				SH73A0_CLK_LCDC0
-			>;
-			clock-output-names =
-				"ceu1", "csi2_rx1", "ceu0", "csi2_rx0",
-				"tmu0", "dsitx0", "iic0", "sgx", "lcdc0";
-		};
-		mstp2_clks: mstp2_clks@e6150138 {
-			compatible = "renesas,sh73a0-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0xe6150138 4>, <0xe6150040 4>;
-			clocks = <&sub_clk>, <&cpg_clocks SH73A0_CLK_HP>,
-				 <&cpg_clocks SH73A0_CLK_HP>, <&sub_clk>,
-				 <&sub_clk>, <&sub_clk>, <&sub_clk>, <&sub_clk>,
-				 <&sub_clk>, <&sub_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				SH73A0_CLK_SCIFA7 SH73A0_CLK_SY_DMAC
-				SH73A0_CLK_MP_DMAC SH73A0_CLK_SCIFA5
-				SH73A0_CLK_SCIFB SH73A0_CLK_SCIFA0
-				SH73A0_CLK_SCIFA1 SH73A0_CLK_SCIFA2
-				SH73A0_CLK_SCIFA3 SH73A0_CLK_SCIFA4
-			>;
-			clock-output-names =
-				"scifa7", "sy_dmac", "mp_dmac", "scifa5",
-				"scifb", "scifa0", "scifa1", "scifa2",
-				"scifa3", "scifa4";
-		};
-		mstp3_clks: mstp3_clks@e615013c {
-			compatible = "renesas,sh73a0-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0xe615013c 4>, <0xe6150048 4>;
-			clocks = <&sub_clk>, <&extalr_clk>,
-				 <&cpg_clocks SH73A0_CLK_HP>, <&sub_clk>,
-				 <&cpg_clocks SH73A0_CLK_HP>,
-				 <&cpg_clocks SH73A0_CLK_HP>, <&flctl_clk>,
-				 <&sdhi0_clk>, <&sdhi1_clk>,
-				 <&cpg_clocks SH73A0_CLK_HP>, <&sdhi2_clk>,
-				 <&main_div2_clk>, <&main_div2_clk>,
-				 <&main_div2_clk>, <&main_div2_clk>,
-				 <&main_div2_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				SH73A0_CLK_SCIFA6 SH73A0_CLK_CMT1
-				SH73A0_CLK_FSI SH73A0_CLK_IRDA
-				SH73A0_CLK_IIC1 SH73A0_CLK_USB SH73A0_CLK_FLCTL
-				SH73A0_CLK_SDHI0 SH73A0_CLK_SDHI1
-				SH73A0_CLK_MMCIF0 SH73A0_CLK_SDHI2
-				SH73A0_CLK_TPU0 SH73A0_CLK_TPU1
-				SH73A0_CLK_TPU2 SH73A0_CLK_TPU3
-				SH73A0_CLK_TPU4
-			>;
-			clock-output-names =
-				"scifa6", "cmt1", "fsi", "irda", "iic1",
-				"usb", "flctl", "sdhi0", "sdhi1", "mmcif0", "sdhi2",
-				"tpu0", "tpu1", "tpu2", "tpu3", "tpu4";
-		};
-		mstp4_clks: mstp4_clks@e6150140 {
-			compatible = "renesas,sh73a0-mstp-clocks", "renesas,cpg-mstp-clocks";
-			reg = <0xe6150140 4>, <0xe615004c 4>;
-			clocks = <&cpg_clocks SH73A0_CLK_HP>,
-				 <&cpg_clocks SH73A0_CLK_HP>, <&extalr_clk>;
-			#clock-cells = <1>;
-			clock-indices = <
-				SH73A0_CLK_IIC3 SH73A0_CLK_IIC4
-				SH73A0_CLK_KEYSC
-			>;
-			clock-output-names =
-				"iic3", "iic4", "keysc";
-		};
-	};
 };
diff -urNp a/arch/arm/boot/dts/skeleton64.dtsi b/arch/arm/boot/dts/skeleton64.dtsi
--- a/arch/arm/boot/dts/skeleton64.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/skeleton64.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -9,5 +9,5 @@
 	#size-cells = <2>;
 	chosen { };
 	aliases { };
-	memory { device_type = "memory"; reg = <0 0 0 0>; };
+	memory { device_type = "memory"; reg = <0 0>; };
 };
diff -urNp a/arch/arm/boot/dts/snowball.dts b/arch/arm/boot/dts/snowball.dts
--- a/arch/arm/boot/dts/snowball.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/snowball.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,354 @@
+/*
+ * Copyright 2011 ST-Ericsson AB
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/dts-v1/;
+/include/ "dbx5x0.dtsi"
+
+/ {
+	model = "Calao Systems Snowball platform with device tree";
+	compatible = "calaosystems,snowball-a9500", "st-ericsson,u9500";
+
+	memory {
+		reg = <0x00000000 0x20000000>;
+	};
+
+	en_3v3_reg: en_3v3 {
+		compatible = "regulator-fixed";
+                regulator-name = "en-3v3-fixed-supply";
+                regulator-min-microvolt = <3300000>;
+                regulator-max-microvolt = <3300000>;
+                gpios = <&gpio0 26  0x4>; // 26
+                startup-delay-us = <5000>;
+                enable-active-high;
+	};
+
+	gpio_keys {
+		compatible = "gpio-keys";
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		button@1 {
+			debounce_interval = <50>;
+			wakeup = <1>;
+			linux,code = <2>;
+			label = "userpb";
+			gpios = <&gpio1 0 0x4>;
+		};
+		button@2 {
+			debounce_interval = <50>;
+			wakeup = <1>;
+			linux,code = <3>;
+			label = "extkb1";
+			gpios = <&gpio4 23 0x4>;
+		};
+		button@3 {
+			debounce_interval = <50>;
+			wakeup = <1>;
+			linux,code = <4>;
+			label = "extkb2";
+			gpios = <&gpio4 24 0x4>;
+		};
+		button@4 {
+			debounce_interval = <50>;
+			wakeup = <1>;
+			linux,code = <5>;
+			label = "extkb3";
+			gpios = <&gpio5 1 0x4>;
+		};
+		button@5 {
+			debounce_interval = <50>;
+			wakeup = <1>;
+			linux,code = <6>;
+			label = "extkb4";
+			gpios = <&gpio5 2 0x4>;
+		};
+	};
+
+	leds {
+		compatible = "gpio-leds";
+		used-led {
+			label = "user_led";
+			gpios = <&gpio4 14 0x4>;
+			default-state = "on";
+			linux,default-trigger = "heartbeat";
+		};
+	};
+
+	soc-u9500 {
+
+		sound {
+			compatible = "stericsson,snd-soc-mop500";
+
+			stericsson,cpu-dai = <&msp1 &msp3>;
+			stericsson,audio-codec = <&codec>;
+		};
+
+		msp1: msp@80124000 {
+			status = "okay";
+		};
+
+		msp3: msp@80125000 {
+			status = "okay";
+		};
+
+		prcmu@80157000 {
+			thermal@801573c0 {
+				num-trips = <4>;
+
+				trip0-temp = <70000>;
+				trip0-type = "active";
+				trip0-cdev-num = <1>;
+				trip0-cdev-name0 = "thermal-cpufreq-0";
+
+				trip1-temp = <75000>;
+				trip1-type = "active";
+				trip1-cdev-num = <1>;
+				trip1-cdev-name0 = "thermal-cpufreq-0";
+
+				trip2-temp = <80000>;
+				trip2-type = "active";
+				trip2-cdev-num = <1>;
+				trip2-cdev-name0 = "thermal-cpufreq-0";
+
+				trip3-temp = <85000>;
+				trip3-type = "critical";
+				trip3-cdev-num = <0>;
+
+				status = "okay";
+			 };
+		};
+
+		external-bus@50000000 {
+			status = "okay";
+
+			ethernet@0 {
+				compatible = "smsc,lan9115";
+				reg = <0 0x10000>;
+				interrupts = <12 0x1>;
+				interrupt-parent = <&gpio4>;
+				vdd33a-supply = <&en_3v3_reg>;
+				vddvario-supply = <&db8500_vape_reg>;
+
+
+				reg-shift = <1>;
+				reg-io-width = <2>;
+				smsc,force-internal-phy;
+				smsc,irq-active-high;
+				smsc,irq-push-pull;
+			};
+		};
+
+		// External Micro SD slot
+		sdi0_per1@80126000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <50000000>;
+			bus-width = <4>;
+			mmc-cap-mmc-highspeed;
+			vmmc-supply = <&ab8500_ldo_aux3_reg>;
+
+			cd-gpios  = <&gpio6 26 0x4>; // 218
+			cd-inverted;
+
+			status = "okay";
+		};
+
+		// On-board eMMC
+		sdi4_per2@80114000 {
+			arm,primecell-periphid = <0x10480180>;
+		        max-frequency = <50000000>;
+			bus-width = <8>;
+			mmc-cap-mmc-highspeed;
+			vmmc-supply = <&ab8500_ldo_aux2_reg>;
+
+			status = "okay";
+		};
+
+		uart@80120000 {
+			status = "okay";
+		};
+
+		uart@80121000 {
+			status = "okay";
+		};
+
+		uart@80007000 {
+			status = "okay";
+		};
+
+		i2c@80004000 {
+			tc3589x@42 {
+				//compatible = "tc3589x";
+				reg = <0x42>;
+				gpios = <&gpio6 25 0x4>;
+				interrupt-parent = <&gpio6>;
+			};
+			tps61052@33 {
+				//compatible = "tps61052";
+				reg = <0x33>;
+			};
+		};
+
+		i2c@80128000 {
+			lp5521@0x33 {
+				// compatible = "lp5521";
+				reg = <0x33>;
+			};
+			lp5521@0x34 {
+				// compatible = "lp5521";
+				reg = <0x34>;
+			};
+			bh1780@0x29 {
+				// compatible = "rohm,bh1780gli";
+				reg = <0x33>;
+			};
+		};
+
+		cpufreq-cooling {
+			status = "okay";
+		};
+
+		prcmu@80157000 {
+			db8500-prcmu-regulators {
+				db8500_vape_reg: db8500_vape {
+					regulator-name = "db8500-vape";
+				};
+
+				db8500_varm_reg: db8500_varm {
+					regulator-name = "db8500-varm";
+				};
+
+				db8500_vmodem_reg: db8500_vmodem {
+					regulator-name = "db8500-vmodem";
+				};
+
+				db8500_vpll_reg: db8500_vpll {
+					regulator-name = "db8500-vpll";
+				};
+
+				db8500_vsmps1_reg: db8500_vsmps1 {
+					regulator-name = "db8500-vsmps1";
+				};
+
+				db8500_vsmps2_reg: db8500_vsmps2 {
+					regulator-name = "db8500-vsmps2";
+				};
+
+				db8500_vsmps3_reg: db8500_vsmps3 {
+					regulator-name = "db8500-vsmps3";
+				};
+
+				db8500_vrf1_reg: db8500_vrf1 {
+					regulator-name = "db8500-vrf1";
+				};
+
+				db8500_sva_mmdsp_reg: db8500_sva_mmdsp {
+					regulator-name = "db8500-sva-mmdsp";
+				};
+
+				db8500_sva_mmdsp_ret_reg: db8500_sva_mmdsp_ret {
+					regulator-name = "db8500-sva-mmdsp-ret";
+				};
+
+				db8500_sva_pipe_reg: db8500_sva_pipe {
+					regulator-name = "db8500_sva_pipe";
+				};
+
+				db8500_sia_mmdsp_reg: db8500_sia_mmdsp {
+					regulator-name = "db8500_sia_mmdsp";
+				};
+
+				db8500_sia_mmdsp_ret_reg: db8500_sia_mmdsp_ret {
+					regulator-name = "db8500-sia-mmdsp-ret";
+				};
+
+				db8500_sia_pipe_reg: db8500_sia_pipe {
+					regulator-name = "db8500-sia-pipe";
+				};
+
+				db8500_sga_reg: db8500_sga {
+					regulator-name = "db8500-sga";
+				};
+
+				db8500_b2r2_mcde_reg: db8500_b2r2_mcde {
+					regulator-name = "db8500-b2r2-mcde";
+				};
+
+				db8500_esram12_reg: db8500_esram12 {
+					regulator-name = "db8500-esram12";
+				};
+
+				db8500_esram12_ret_reg: db8500_esram12_ret {
+					regulator-name = "db8500-esram12-ret";
+				};
+
+				db8500_esram34_reg: db8500_esram34 {
+					regulator-name = "db8500-esram34";
+				};
+
+				db8500_esram34_ret_reg: db8500_esram34_ret {
+					regulator-name = "db8500-esram34-ret";
+				};
+			};
+
+			ab8500 {
+				ab8500-gpio {
+					compatible = "stericsson,ab8500-gpio";
+				};
+
+				ab8500-regulators {
+					ab8500_ldo_aux1_reg: ab8500_ldo_aux1 {
+						regulator-name = "V-DISPLAY";
+					};
+
+					ab8500_ldo_aux2_reg: ab8500_ldo_aux2 {
+						regulator-name = "V-eMMC1";
+					};
+
+					ab8500_ldo_aux3_reg: ab8500_ldo_aux3 {
+						regulator-name = "V-MMC-SD";
+					};
+
+					ab8500_ldo_initcore_reg: ab8500_ldo_initcore {
+						regulator-name = "V-INTCORE";
+					};
+
+					ab8500_ldo_tvout_reg: ab8500_ldo_tvout {
+						regulator-name = "V-TVOUT";
+					};
+
+					ab8500_ldo_usb_reg: ab8500_ldo_usb {
+						regulator-name = "dummy";
+					};
+
+					ab8500_ldo_audio_reg: ab8500_ldo_audio {
+						regulator-name = "V-AUD";
+					};
+
+					ab8500_ldo_anamic1_reg: ab8500_ldo_anamic1 {
+						regulator-name = "V-AMIC1";
+					};
+
+					ab8500_ldo_amamic2_reg: ab8500_ldo_amamic2 {
+						regulator-name = "V-AMIC2";
+					};
+
+					ab8500_ldo_dmic_reg: ab8500_ldo_dmic {
+						regulator-name = "V-DMIC";
+					};
+
+					ab8500_ldo_ana_reg: ab8500_ldo_ana {
+						regulator-name = "V-CSI/DSI";
+					};
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/socfpga.dtsi b/arch/arm/boot/dts/socfpga.dtsi
--- a/arch/arm/boot/dts/socfpga.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/socfpga.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -15,8 +15,7 @@
  * along with this program.  If not, see <http://www.gnu.org/licenses/>.
  */
 
-#include "skeleton.dtsi"
-#include <dt-bindings/reset/altr,rst-mgr.h>
+/include/ "skeleton.dtsi"
 
 / {
 	#address-cells = <1>;
@@ -24,7 +23,6 @@
 
 	aliases {
 		ethernet0 = &gmac0;
-		ethernet1 = &gmac1;
 		serial0 = &uart0;
 		serial1 = &uart1;
 		timer0 = &timer0;
@@ -76,38 +74,13 @@
 			pdma: pdma@ffe01000 {
 				compatible = "arm,pl330", "arm,primecell";
 				reg = <0xffe01000 0x1000>;
-				interrupts = <0 104 4>,
-					     <0 105 4>,
-					     <0 106 4>,
-					     <0 107 4>,
-					     <0 108 4>,
-					     <0 109 4>,
-					     <0 110 4>,
-					     <0 111 4>;
+				interrupts = <0 180 4>;
 				#dma-cells = <1>;
 				#dma-channels = <8>;
 				#dma-requests = <32>;
-				clocks = <&l4_main_clk>;
-				clock-names = "apb_pclk";
 			};
 		};
 
-		can0: can@ffc00000 {
-			compatible = "bosch,d_can";
-			reg = <0xffc00000 0x1000>;
-			interrupts = <0 131 4>, <0 132 4>, <0 133 4>, <0 134 4>;
-			clocks = <&can0_clk>;
-			status = "disabled";
-		};
-
-		can1: can@ffc01000 {
-			compatible = "bosch,d_can";
-			reg = <0xffc01000 0x1000>;
-			interrupts = <0 135 4>, <0 136 4>, <0 137 4>, <0 138 4>;
-			clocks = <&can1_clk>;
-			status = "disabled";
-		};
-
 		clkmgr@ffd04000 {
 				compatible = "altr,clk-mgr";
 				reg = <0xffd04000 0x1000>;
@@ -116,22 +89,7 @@
 					#address-cells = <1>;
 					#size-cells = <0>;
 
-					osc1: osc1 {
-						#clock-cells = <0>;
-						compatible = "fixed-clock";
-					};
-
-					osc2: osc2 {
-						#clock-cells = <0>;
-						compatible = "fixed-clock";
-					};
-
-					f2s_periph_ref_clk: f2s_periph_ref_clk {
-						#clock-cells = <0>;
-						compatible = "fixed-clock";
-					};
-
-					f2s_sdram_ref_clk: f2s_sdram_ref_clk {
+					osc: osc1 {
 						#clock-cells = <0>;
 						compatible = "fixed-clock";
 					};
@@ -141,14 +99,14 @@
 						#size-cells = <0>;
 						#clock-cells = <0>;
 						compatible = "altr,socfpga-pll-clock";
-						clocks = <&osc1>;
+						clocks = <&osc>;
 						reg = <0x40>;
 
 						mpuclk: mpuclk {
 							#clock-cells = <0>;
 							compatible = "altr,socfpga-perip-clk";
 							clocks = <&main_pll>;
-							div-reg = <0xe0 0 9>;
+							fixed-divider = <2>;
 							reg = <0x48>;
 						};
 
@@ -156,7 +114,7 @@
 							#clock-cells = <0>;
 							compatible = "altr,socfpga-perip-clk";
 							clocks = <&main_pll>;
-							div-reg = <0xe4 0 9>;
+							fixed-divider = <4>;
 							reg = <0x4C>;
 						};
 
@@ -164,7 +122,7 @@
 							#clock-cells = <0>;
 							compatible = "altr,socfpga-perip-clk";
 							clocks = <&main_pll>;
-							div-reg = <0xe8 0 9>;
+							fixed-divider = <4>;
 							reg = <0x50>;
 						};
 
@@ -182,7 +140,7 @@
 							reg = <0x58>;
 						};
 
-						cfg_h2f_usr0_clk: cfg_h2f_usr0_clk {
+						cfg_s2f_usr0_clk: cfg_s2f_usr0_clk {
 							#clock-cells = <0>;
 							compatible = "altr,socfpga-perip-clk";
 							clocks = <&main_pll>;
@@ -195,7 +153,7 @@
 						#size-cells = <0>;
 						#clock-cells = <0>;
 						compatible = "altr,socfpga-pll-clock";
-						clocks = <&osc1>, <&osc2>, <&f2s_periph_ref_clk>;
+						clocks = <&osc>;
 						reg = <0x80>;
 
 						emac0_clk: emac0_clk {
@@ -233,7 +191,7 @@
 							reg = <0x98>;
 						};
 
-						h2f_usr1_clk: h2f_usr1_clk {
+						s2f_usr1_clk: s2f_usr1_clk {
 							#clock-cells = <0>;
 							compatible = "altr,socfpga-perip-clk";
 							clocks = <&periph_pll>;
@@ -246,7 +204,7 @@
 						#size-cells = <0>;
 						#clock-cells = <0>;
 						compatible = "altr,socfpga-pll-clock";
-						clocks = <&osc1>, <&osc2>, <&f2s_sdram_ref_clk>;
+						clocks = <&osc>;
 						reg = <0xC0>;
 
 						ddr_dqs_clk: ddr_dqs_clk {
@@ -270,352 +228,23 @@
 							reg = <0xD0>;
 						};
 
-						h2f_usr2_clk: h2f_usr2_clk {
+						s2f_usr2_clk: s2f_usr2_clk {
 							#clock-cells = <0>;
 							compatible = "altr,socfpga-perip-clk";
 							clocks = <&sdram_pll>;
 							reg = <0xD4>;
 						};
 					};
-
-					mpu_periph_clk: mpu_periph_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-perip-clk";
-						clocks = <&mpuclk>;
-						fixed-divider = <4>;
-					};
-
-					mpu_l2_ram_clk: mpu_l2_ram_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-perip-clk";
-						clocks = <&mpuclk>;
-						fixed-divider = <2>;
-					};
-
-					l4_main_clk: l4_main_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&mainclk>;
-						clk-gate = <0x60 0>;
-					};
-
-					l3_main_clk: l3_main_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-perip-clk";
-						clocks = <&mainclk>;
-						fixed-divider = <1>;
-					};
-
-					l3_mp_clk: l3_mp_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&mainclk>;
-						div-reg = <0x64 0 2>;
-						clk-gate = <0x60 1>;
-					};
-
-					l3_sp_clk: l3_sp_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&mainclk>;
-						div-reg = <0x64 2 2>;
-					};
-
-					l4_mp_clk: l4_mp_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&mainclk>, <&per_base_clk>;
-						div-reg = <0x64 4 3>;
-						clk-gate = <0x60 2>;
-					};
-
-					l4_sp_clk: l4_sp_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&mainclk>, <&per_base_clk>;
-						div-reg = <0x64 7 3>;
-						clk-gate = <0x60 3>;
-					};
-
-					dbg_at_clk: dbg_at_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&dbg_base_clk>;
-						div-reg = <0x68 0 2>;
-						clk-gate = <0x60 4>;
-					};
-
-					dbg_clk: dbg_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&dbg_base_clk>;
-						div-reg = <0x68 2 2>;
-						clk-gate = <0x60 5>;
-					};
-
-					dbg_trace_clk: dbg_trace_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&dbg_base_clk>;
-						div-reg = <0x6C 0 3>;
-						clk-gate = <0x60 6>;
-					};
-
-					dbg_timer_clk: dbg_timer_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&dbg_base_clk>;
-						clk-gate = <0x60 7>;
-					};
-
-					cfg_clk: cfg_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&cfg_h2f_usr0_clk>;
-						clk-gate = <0x60 8>;
-					};
-
-					h2f_user0_clk: h2f_user0_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&cfg_h2f_usr0_clk>;
-						clk-gate = <0x60 9>;
-					};
-
-					emac_0_clk: emac_0_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&emac0_clk>;
-						clk-gate = <0xa0 0>;
-					};
-
-					emac_1_clk: emac_1_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&emac1_clk>;
-						clk-gate = <0xa0 1>;
-					};
-
-					usb_mp_clk: usb_mp_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&per_base_clk>;
-						clk-gate = <0xa0 2>;
-						div-reg = <0xa4 0 3>;
-					};
-
-					spi_m_clk: spi_m_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&per_base_clk>;
-						clk-gate = <0xa0 3>;
-						div-reg = <0xa4 3 3>;
-					};
-
-					can0_clk: can0_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&per_base_clk>;
-						clk-gate = <0xa0 4>;
-						div-reg = <0xa4 6 3>;
-					};
-
-					can1_clk: can1_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&per_base_clk>;
-						clk-gate = <0xa0 5>;
-						div-reg = <0xa4 9 3>;
-					};
-
-					gpio_db_clk: gpio_db_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&per_base_clk>;
-						clk-gate = <0xa0 6>;
-						div-reg = <0xa8 0 24>;
-					};
-
-					h2f_user1_clk: h2f_user1_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&h2f_usr1_clk>;
-						clk-gate = <0xa0 7>;
-					};
-
-					sdmmc_clk: sdmmc_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&f2s_periph_ref_clk>, <&main_nand_sdmmc_clk>, <&per_nand_mmc_clk>;
-						clk-gate = <0xa0 8>;
-						clk-phase = <0 135>;
-					};
-
-					nand_x_clk: nand_x_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&f2s_periph_ref_clk>, <&main_nand_sdmmc_clk>, <&per_nand_mmc_clk>;
-						clk-gate = <0xa0 9>;
-					};
-
-					nand_clk: nand_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&f2s_periph_ref_clk>, <&main_nand_sdmmc_clk>, <&per_nand_mmc_clk>;
-						clk-gate = <0xa0 10>;
-						fixed-divider = <4>;
-					};
-
-					qspi_clk: qspi_clk {
-						#clock-cells = <0>;
-						compatible = "altr,socfpga-gate-clk";
-						clocks = <&f2s_periph_ref_clk>, <&main_qspi_clk>, <&per_qspi_clk>;
-						clk-gate = <0xa0 11>;
-					};
 				};
 			};
 
-		gmac0: ethernet@ff700000 {
+		gmac0: stmmac@ff700000 {
 			compatible = "altr,socfpga-stmmac", "snps,dwmac-3.70a", "snps,dwmac";
-			altr,sysmgr-syscon = <&sysmgr 0x60 0>;
 			reg = <0xff700000 0x2000>;
 			interrupts = <0 115 4>;
 			interrupt-names = "macirq";
 			mac-address = [00 00 00 00 00 00];/* Filled in by U-Boot */
-			clocks = <&emac0_clk>;
-			clock-names = "stmmaceth";
-			resets = <&rst EMAC0_RESET>;
-			reset-names = "stmmaceth";
-			snps,multicast-filter-bins = <256>;
-			snps,perfect-filter-entries = <128>;
-			status = "disabled";
-		};
-
-		gmac1: ethernet@ff702000 {
-			compatible = "altr,socfpga-stmmac", "snps,dwmac-3.70a", "snps,dwmac";
-			altr,sysmgr-syscon = <&sysmgr 0x60 2>;
-			reg = <0xff702000 0x2000>;
-			interrupts = <0 120 4>;
-			interrupt-names = "macirq";
-			mac-address = [00 00 00 00 00 00];/* Filled in by U-Boot */
-			clocks = <&emac1_clk>;
-			clock-names = "stmmaceth";
-			resets = <&rst EMAC1_RESET>;
-			reset-names = "stmmaceth";
-			snps,multicast-filter-bins = <256>;
-			snps,perfect-filter-entries = <128>;
-			status = "disabled";
-		};
-
-		i2c0: i2c@ffc04000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,designware-i2c";
-			reg = <0xffc04000 0x1000>;
-			clocks = <&l4_sp_clk>;
-			interrupts = <0 158 0x4>;
-			status = "disabled";
-		};
-
-		i2c1: i2c@ffc05000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,designware-i2c";
-			reg = <0xffc05000 0x1000>;
-			clocks = <&l4_sp_clk>;
-			interrupts = <0 159 0x4>;
-			status = "disabled";
-		};
-
-		i2c2: i2c@ffc06000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,designware-i2c";
-			reg = <0xffc06000 0x1000>;
-			clocks = <&l4_sp_clk>;
-			interrupts = <0 160 0x4>;
-			status = "disabled";
-		};
-
-		i2c3: i2c@ffc07000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,designware-i2c";
-			reg = <0xffc07000 0x1000>;
-			clocks = <&l4_sp_clk>;
-			interrupts = <0 161 0x4>;
-			status = "disabled";
-		};
-
-		gpio0: gpio@ff708000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,dw-apb-gpio";
-			reg = <0xff708000 0x1000>;
-			clocks = <&per_base_clk>;
-			status = "disabled";
-
-			porta: gpio-controller@0 {
-				compatible = "snps,dw-apb-gpio-port";
-				gpio-controller;
-				#gpio-cells = <2>;
-				snps,nr-gpios = <29>;
-				reg = <0>;
-				interrupt-controller;
-				#interrupt-cells = <2>;
-				interrupts = <0 164 4>;
-			};
-		};
-
-		gpio1: gpio@ff709000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,dw-apb-gpio";
-			reg = <0xff709000 0x1000>;
-			clocks = <&per_base_clk>;
-			status = "disabled";
-
-			portb: gpio-controller@0 {
-				compatible = "snps,dw-apb-gpio-port";
-				gpio-controller;
-				#gpio-cells = <2>;
-				snps,nr-gpios = <29>;
-				reg = <0>;
-				interrupt-controller;
-				#interrupt-cells = <2>;
-				interrupts = <0 165 4>;
-			};
-		};
-
-		gpio2: gpio@ff70a000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,dw-apb-gpio";
-			reg = <0xff70a000 0x1000>;
-			clocks = <&per_base_clk>;
-			status = "disabled";
-
-			portc: gpio-controller@0 {
-				compatible = "snps,dw-apb-gpio-port";
-				gpio-controller;
-				#gpio-cells = <2>;
-				snps,nr-gpios = <27>;
-				reg = <0>;
-				interrupt-controller;
-				#interrupt-cells = <2>;
-				interrupts = <0 166 4>;
-			};
-		};
-
-		sdr: sdr@ffc25000 {
-			compatible = "syscon";
-			reg = <0xffc25000 0x1000>;
-		};
-
-		sdramedac {
-			compatible = "altr,sdram-edac";
-			altr,sdr-syscon = <&sdr>;
-			interrupts = <0 39 4>;
+			phy-mode = "gmii";
 		};
 
 		L2: l2-cache@fffef000 {
@@ -624,46 +253,6 @@
 			interrupts = <0 38 0x04>;
 			cache-unified;
 			cache-level = <2>;
-			arm,tag-latency = <1 1 1>;
-			arm,data-latency = <2 1 1>;
-		};
-
-		mmc: dwmmc0@ff704000 {
-			compatible = "altr,socfpga-dw-mshc";
-			reg = <0xff704000 0x1000>;
-			interrupts = <0 139 4>;
-			fifo-depth = <0x400>;
-			#address-cells = <1>;
-			#size-cells = <0>;
-			clocks = <&l4_mp_clk>, <&sdmmc_clk>;
-			clock-names = "biu", "ciu";
-		};
-
-		ocram: sram@ffff0000 {
-			compatible = "mmio-sram";
-			reg = <0xffff0000 0x10000>;
-		};
-
-		spi0: spi@fff00000 {
-			compatible = "snps,dw-apb-ssi";
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <0xfff00000 0x1000>;
-			interrupts = <0 154 4>;
-			num-cs = <4>;
-			clocks = <&spi_m_clk>;
-			status = "disabled";
-		};
-
-		spi1: spi@fff01000 {
-			compatible = "snps,dw-apb-ssi";
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <0xfff01000 0x1000>;
-			interrupts = <0 155 4>;
-			num-cs = <4>;
-			clocks = <&spi_m_clk>;
-			status = "disabled";
 		};
 
 		/* Local timer */
@@ -671,39 +260,30 @@
 			compatible = "arm,cortex-a9-twd-timer";
 			reg = <0xfffec600 0x100>;
 			interrupts = <1 13 0xf04>;
-			clocks = <&mpu_periph_clk>;
 		};
 
 		timer0: timer0@ffc08000 {
-			compatible = "snps,dw-apb-timer";
+			compatible = "snps,dw-apb-timer-sp";
 			interrupts = <0 167 4>;
 			reg = <0xffc08000 0x1000>;
-			clocks = <&l4_sp_clk>;
-			clock-names = "timer";
 		};
 
 		timer1: timer1@ffc09000 {
-			compatible = "snps,dw-apb-timer";
+			compatible = "snps,dw-apb-timer-sp";
 			interrupts = <0 168 4>;
 			reg = <0xffc09000 0x1000>;
-			clocks = <&l4_sp_clk>;
-			clock-names = "timer";
 		};
 
 		timer2: timer2@ffd00000 {
-			compatible = "snps,dw-apb-timer";
+			compatible = "snps,dw-apb-timer-osc";
 			interrupts = <0 169 4>;
 			reg = <0xffd00000 0x1000>;
-			clocks = <&osc1>;
-			clock-names = "timer";
 		};
 
 		timer3: timer3@ffd01000 {
-			compatible = "snps,dw-apb-timer";
+			compatible = "snps,dw-apb-timer-osc";
 			interrupts = <0 170 4>;
 			reg = <0xffd01000 0x1000>;
-			clocks = <&osc1>;
-			clock-names = "timer";
 		};
 
 		uart0: serial0@ffc02000 {
@@ -712,10 +292,6 @@
 			interrupts = <0 162 4>;
 			reg-shift = <2>;
 			reg-io-width = <4>;
-			clocks = <&l4_sp_clk>;
-			dmas = <&pdma 28>,
-			       <&pdma 29>;
-			dma-names = "tx", "rx";
 		};
 
 		uart1: serial1@ffc03000 {
@@ -724,65 +300,16 @@
 			interrupts = <0 163 4>;
 			reg-shift = <2>;
 			reg-io-width = <4>;
-			clocks = <&l4_sp_clk>;
-			dmas = <&pdma 30>,
-			       <&pdma 31>;
-			dma-names = "tx", "rx";
-		};
-
-		rst: rstmgr@ffd05000 {
-			#reset-cells = <1>;
-			compatible = "altr,rst-mgr";
-			reg = <0xffd05000 0x1000>;
-		};
-
-		usbphy0: usbphy@0 {
-			#phy-cells = <0>;
-			compatible = "usb-nop-xceiv";
-			status = "okay";
-		};
-
-		usb0: usb@ffb00000 {
-			compatible = "snps,dwc2";
-			reg = <0xffb00000 0xffff>;
-			interrupts = <0 125 4>;
-			clocks = <&usb_mp_clk>;
-			clock-names = "otg";
-			phys = <&usbphy0>;
-			phy-names = "usb2-phy";
-			status = "disabled";
-		};
-
-		usb1: usb@ffb40000 {
-			compatible = "snps,dwc2";
-			reg = <0xffb40000 0xffff>;
-			interrupts = <0 128 4>;
-			clocks = <&usb_mp_clk>;
-			clock-names = "otg";
-			phys = <&usbphy0>;
-			phy-names = "usb2-phy";
-			status = "disabled";
-		};
-
-		watchdog0: watchdog@ffd02000 {
-			compatible = "snps,dw-wdt";
-			reg = <0xffd02000 0x1000>;
-			interrupts = <0 171 4>;
-			clocks = <&osc1>;
-			status = "disabled";
-		};
-
-		watchdog1: watchdog@ffd03000 {
-			compatible = "snps,dw-wdt";
-			reg = <0xffd03000 0x1000>;
-			interrupts = <0 172 4>;
-			clocks = <&osc1>;
-			status = "disabled";
-		};
-
-		sysmgr: sysmgr@ffd08000 {
-			compatible = "altr,sys-mgr", "syscon";
-			reg = <0xffd08000 0x4000>;
 		};
+
+		rstmgr@ffd05000 {
+				compatible = "altr,rst-mgr";
+				reg = <0xffd05000 0x1000>;
+			};
+
+		sysmgr@ffd08000 {
+				compatible = "altr,sys-mgr";
+				reg = <0xffd08000 0x4000>;
+			};
 	};
 };
diff -urNp a/arch/arm/boot/dts/socfpga_cyclone5.dts b/arch/arm/boot/dts/socfpga_cyclone5.dts
--- a/arch/arm/boot/dts/socfpga_cyclone5.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/socfpga_cyclone5.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,72 @@
+/*
+ *  Copyright (C) 2012 Altera Corporation <www.altera.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+/dts-v1/;
+/include/ "socfpga.dtsi"
+
+/ {
+	model = "Altera SOCFPGA Cyclone V";
+	compatible = "altr,socfpga-cyclone5", "altr,socfpga";
+
+	chosen {
+		bootargs = "console=ttyS0,57600";
+	};
+
+	memory {
+		name = "memory";
+		device_type = "memory";
+		reg = <0x0 0x40000000>; /* 1GB */
+	};
+
+	soc {
+		clkmgr@ffd04000 {
+			clocks {
+				osc1 {
+					clock-frequency = <25000000>;
+				};
+			};
+		};
+
+		timer0@ffc08000 {
+			clock-frequency = <100000000>;
+		};
+
+		timer1@ffc09000 {
+			clock-frequency = <100000000>;
+		};
+
+		timer2@ffd00000 {
+			clock-frequency = <25000000>;
+		};
+
+		timer3@ffd01000 {
+			clock-frequency = <25000000>;
+		};
+
+		serial0@ffc02000 {
+			clock-frequency = <100000000>;
+		};
+
+		serial1@ffc03000 {
+			clock-frequency = <100000000>;
+		};
+
+		sysmgr@ffd08000 {
+			cpu1-start-addr = <0xffd080c4>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/socfpga_vt.dts b/arch/arm/boot/dts/socfpga_vt.dts
--- a/arch/arm/boot/dts/socfpga_vt.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/socfpga_vt.dts	2015-10-27 00:45:05.000000000 +0000
@@ -16,7 +16,7 @@
  */
 
 /dts-v1/;
-#include "socfpga.dtsi"
+/include/ "socfpga.dtsi"
 
 / {
 	model = "Altera SOCFPGA VT";
@@ -41,19 +41,6 @@
 			};
 		};
 
-		dwmmc0@ff704000 {
-			num-slots = <1>;
-			broken-cd;
-			bus-width = <4>;
-			cap-mmc-highspeed;
-			cap-sd-highspeed;
-		};
-
-		ethernet@ff700000 {
-			phy-mode = "gmii";
-			status = "okay";
-		};
-
 		timer0@ffc08000 {
 			clock-frequency = <7000000>;
 		};
@@ -83,8 +70,3 @@
 		};
 	};
 };
-
-&gmac0 {
-	status = "okay";
-	phy-mode = "gmii";
-};
diff -urNp a/arch/arm/boot/dts/spear1310-evb.dts b/arch/arm/boot/dts/spear1310-evb.dts
--- a/arch/arm/boot/dts/spear1310-evb.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/spear1310-evb.dts	2015-10-27 00:45:05.000000000 +0000
@@ -106,10 +106,6 @@
 			status = "okay";
 		};
 
-		miphy@eb800000 {
-			status = "okay";
-		};
-
 		cf@b2800000 {
 			status = "okay";
 		};
diff -urNp a/arch/arm/boot/dts/spear1310.dtsi b/arch/arm/boot/dts/spear1310.dtsi
--- a/arch/arm/boot/dts/spear1310.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/spear1310.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -29,111 +29,24 @@
 			#gpio-cells = <2>;
 		};
 
-		miphy0: miphy@eb800000 {
-			compatible = "st,spear1310-miphy";
-			reg = <0xeb800000 0x4000>;
-			misc = <&misc>;
-			phy-id = <0>;
-			#phy-cells = <1>;
-			status = "disabled";
-		};
-
-		miphy1: miphy@eb804000 {
-			compatible = "st,spear1310-miphy";
-			reg = <0xeb804000 0x4000>;
-			misc = <&misc>;
-			phy-id = <1>;
-			#phy-cells = <1>;
-			status = "disabled";
-		};
-
-		miphy2: miphy@eb808000 {
-			compatible = "st,spear1310-miphy";
-			reg = <0xeb808000 0x4000>;
-			misc = <&misc>;
-			phy-id = <2>;
-			#phy-cells = <1>;
-			status = "disabled";
-		};
-
-		ahci0: ahci@b1000000 {
+		ahci@b1000000 {
 			compatible = "snps,spear-ahci";
 			reg = <0xb1000000 0x10000>;
 			interrupts = <0 68 0x4>;
-			phys = <&miphy0 0>;
-			phy-names = "sata-phy";
 			status = "disabled";
 		};
 
-		ahci1: ahci@b1800000 {
+		ahci@b1800000 {
 			compatible = "snps,spear-ahci";
 			reg = <0xb1800000 0x10000>;
 			interrupts = <0 69 0x4>;
-			phys = <&miphy1 0>;
-			phy-names = "sata-phy";
 			status = "disabled";
 		};
 
-		ahci2: ahci@b4000000 {
+		ahci@b4000000 {
 			compatible = "snps,spear-ahci";
 			reg = <0xb4000000 0x10000>;
 			interrupts = <0 70 0x4>;
-			phys = <&miphy2 0>;
-			phy-names = "sata-phy";
-			status = "disabled";
-		};
-
-		pcie0: pcie@b1000000 {
-			compatible = "st,spear1340-pcie", "snps,dw-pcie";
-			reg = <0xb1000000 0x4000>, <0x80000000 0x20000>;
-			reg-names = "dbi", "config";
-			interrupts = <0 68 0x4>;
-			interrupt-map-mask = <0 0 0 0>;
-			interrupt-map = <0x0 0 &gic 0 68 0x4>;
-			num-lanes = <1>;
-			phys = <&miphy0 1>;
-			phy-names = "pcie-phy";
-			#address-cells = <3>;
-			#size-cells = <2>;
-			device_type = "pci";
-			ranges = <0x81000000 0 0	 0x80020000 0 0x00010000   /* downstream I/O */
-				0x82000000 0 0x80030000 0xc0030000 0 0x0ffd0000>; /* non-prefetchable memory */
-			status = "disabled";
-		};
-
-		pcie1: pcie@b1800000 {
-			compatible = "st,spear1340-pcie", "snps,dw-pcie";
-			reg = <0xb1800000 0x4000>, <0x90000000 0x20000>;
-			reg-names = "dbi", "config";
-			interrupts = <0 69 0x4>;
-			interrupt-map-mask = <0 0 0 0>;
-			interrupt-map = <0x0 0 &gic 0 69 0x4>;
-			num-lanes = <1>;
-			phys = <&miphy1 1>;
-			phy-names = "pcie-phy";
-			#address-cells = <3>;
-			#size-cells = <2>;
-			device_type = "pci";
-			ranges = <0x81000000 0 0  0x90020000 0 0x00010000   /* downstream I/O */
-				0x82000000 0 0x90030000 0x90030000 0 0x0ffd0000>; /* non-prefetchable memory */
-			status = "disabled";
-		};
-
-		pcie2: pcie@b4000000 {
-			compatible = "st,spear1340-pcie", "snps,dw-pcie";
-			reg = <0xb4000000 0x4000>, <0xc0000000 0x20000>;
-			reg-names = "dbi", "config";
-			interrupts = <0 70 0x4>;
-			interrupt-map-mask = <0 0 0 0>;
-			interrupt-map = <0x0 0 &gic 0 70 0x4>;
-			num-lanes = <1>;
-			phys = <&miphy2 1>;
-			phy-names = "pcie-phy";
-			#address-cells = <3>;
-			#size-cells = <2>;
-			device_type = "pci";
-			ranges = <0x81000000 0 0	 0xc0020000 0 0x00010000   /* downstream I/O */
-				0x82000000 0 0xc0030000 0xc0030000 0 0x0ffd0000>; /* non-prefetchable memory */
 			status = "disabled";
 		};
 
diff -urNp a/arch/arm/boot/dts/spear1340-evb.dts b/arch/arm/boot/dts/spear1340-evb.dts
--- a/arch/arm/boot/dts/spear1340-evb.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/spear1340-evb.dts	2015-10-27 00:45:05.000000000 +0000
@@ -122,10 +122,6 @@
 			status = "okay";
 		};
 
-		miphy@eb800000 {
-			status = "okay";
-		};
-
 		dma@ea800000 {
 			status = "okay";
 		};
diff -urNp a/arch/arm/boot/dts/spear1340.dtsi b/arch/arm/boot/dts/spear1340.dtsi
--- a/arch/arm/boot/dts/spear1340.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/spear1340.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -31,38 +31,10 @@
 			status = "disabled";
 		};
 
-		miphy0: miphy@eb800000 {
-			compatible = "st,spear1340-miphy";
-			reg = <0xeb800000 0x4000>;
-			misc = <&misc>;
-			#phy-cells = <1>;
-			status = "disabled";
-		};
-
-		ahci0: ahci@b1000000 {
+		ahci@b1000000 {
 			compatible = "snps,spear-ahci";
 			reg = <0xb1000000 0x10000>;
 			interrupts = <0 72 0x4>;
-			phys = <&miphy0 0>;
-			phy-names = "sata-phy";
-			status = "disabled";
-		};
-
-		pcie0: pcie@b1000000 {
-			compatible = "st,spear1340-pcie", "snps,dw-pcie";
-			reg = <0xb1000000 0x4000>, <0x80000000 0x20000>;
-			reg-names = "dbi", "config";
-			interrupts = <0 68 0x4>;
-			interrupt-map-mask = <0 0 0 0>;
-			interrupt-map = <0x0 0 &gic 0 68 0x4>;
-			num-lanes = <1>;
-			phys = <&miphy0 1>;
-			phy-names = "pcie-phy";
-			#address-cells = <3>;
-			#size-cells = <2>;
-			device_type = "pci";
-			ranges = <0x81000000 0 0	 0x80020000 0 0x00010000   /* downstream I/O */
-				0x82000000 0 0x80030000 0xc0030000 0 0x0ffd0000>; /* non-prefetchable memory */
 			status = "disabled";
 		};
 
diff -urNp a/arch/arm/boot/dts/spear13xx.dtsi b/arch/arm/boot/dts/spear13xx.dtsi
--- a/arch/arm/boot/dts/spear13xx.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/spear13xx.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -22,14 +22,12 @@
 
 		cpu@0 {
 			compatible = "arm,cortex-a9";
-			device_type = "cpu";
 			reg = <0>;
 			next-level-cache = <&L2>;
 		};
 
 		cpu@1 {
 			compatible = "arm,cortex-a9";
-			device_type = "cpu";
 			reg = <1>;
 			next-level-cache = <&L2>;
 		};
@@ -83,8 +81,8 @@
 		#size-cells = <1>;
 		compatible = "simple-bus";
 		ranges = <0x50000000 0x50000000 0x10000000
-			  0x80000000 0x80000000 0x20000000
-			  0xb0000000 0xb0000000 0x22000000
+			  0xb0000000 0xb0000000 0x10000000
+			  0xd0000000 0xd0000000 0x02000000
 			  0xd8000000 0xd8000000 0x01000000
 			  0xe0000000 0xe0000000 0x10000000>;
 
@@ -117,7 +115,7 @@
 			chan_priority = <1>;
 			block_size = <0xfff>;
 			dma-masters = <2>;
-			data_width = <3 3>;
+			data_width = <3 3 0 0>;
 		};
 
 		dma@eb000000 {
@@ -133,7 +131,7 @@
 			chan_allocation_order = <1>;
 			chan_priority = <1>;
 			block_size = <0xfff>;
-			data_width = <3 3>;
+			data_width = <3 3 0 0>;
 		};
 
 		fsmc: flash@b0000000 {
@@ -220,11 +218,6 @@
 				  0xd8000000 0xd8000000 0x01000000
 				  0xe0000000 0xe0000000 0x10000000>;
 
-			misc: syscon@e0700000 {
-				compatible = "st,spear1340-misc", "syscon";
-				reg = <0xe0700000 0x1000>;
-			};
-
 			gpio0: gpio@e0600000 {
 				compatible = "arm,pl061", "arm,primecell";
 				reg = <0xe0600000 0x1000>;
diff -urNp a/arch/arm/boot/dts/spear320-hmi.dts b/arch/arm/boot/dts/spear320-hmi.dts
--- a/arch/arm/boot/dts/spear320-hmi.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/spear320-hmi.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,7 +1,7 @@
 /*
  * DTS file for SPEAr320 Evaluation Baord
  *
- * Copyright 2012 Shiraz Hashim <shiraz.linux.kernel@gmail.com>
+ * Copyright 2012 Shiraz Hashim <shiraz.hashim@st.com>
  *
  * The code contained herein is licensed under the GNU General Public
  * License. You may obtain a copy of the GNU General Public License
diff -urNp a/arch/arm/boot/dts/spear3xx.dtsi b/arch/arm/boot/dts/spear3xx.dtsi
--- a/arch/arm/boot/dts/spear3xx.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/spear3xx.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -17,12 +17,8 @@
 	interrupt-parent = <&vic>;
 
 	cpus {
-		#address-cells = <0>;
-		#size-cells = <0>;
-
-		cpu {
-			compatible = "arm,arm926ej-s";
-			device_type = "cpu";
+		cpu@0 {
+			compatible = "arm,arm926ejs";
 		};
 	};
 
diff -urNp a/arch/arm/boot/dts/spear600.dtsi b/arch/arm/boot/dts/spear600.dtsi
--- a/arch/arm/boot/dts/spear600.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/spear600.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -15,12 +15,8 @@
 	compatible = "st,spear600";
 
 	cpus {
-		#address-cells = <0>;
-		#size-cells = <0>;
-
-		cpu {
-			compatible = "arm,arm926ej-s";
-			device_type = "cpu";
+		cpu@0 {
+			compatible = "arm,arm926ejs";
 		};
 	};
 
diff -urNp a/arch/arm/boot/dts/ste-nomadik-s8815.dts b/arch/arm/boot/dts/ste-nomadik-s8815.dts
--- a/arch/arm/boot/dts/ste-nomadik-s8815.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/ste-nomadik-s8815.dts	2015-10-27 00:45:05.000000000 +0000
@@ -4,8 +4,7 @@
  */
 
 /dts-v1/;
-#include <dt-bindings/interrupt-controller/irq.h>
-#include "ste-nomadik-stn8815.dtsi"
+/include/ "ste-nomadik-stn8815.dtsi"
 
 / {
 	model = "Calao Systems USB-S8815";
@@ -15,127 +14,23 @@
 		bootargs = "root=/dev/ram0 console=ttyAMA1,115200n8 earlyprintk";
 	};
 
-	src@101e0000 {
-		/* These chrystal drivers are not used on this board */
-		disable-sxtalo;
-		disable-mxtalo;
-	};
-
-	pinctrl {
-		/* Hog CD pins */
-		pinctrl-names = "default";
-		pinctrl-0 = <&cd_default_mode>;
-
-		mmcsd-cd {
-			cd_default_mode: cd_default {
-				cd_default_cfg1 {
-					/* CD input GPIO */
-					pins = "GPIO111_H21";
-					ste,input = <0>;
-				};
-				cd_default_cfg2 {
-					/* CD GPIO biasing */
-					pins = "GPIO112_J21";
-					ste,output = <0>;
-				};
-			};
-		};
-		gpioi2c {
-			gpioi2c_default_mode: gpioi2c_default {
-				gpioi2c_default_cfg {
-					pins = "GPIO73_C21", "GPIO74_C20";
-					ste,input = <0>;
-				};
-			};
-		};
-		user-led {
-			user_led_default_mode: user_led_default {
-				user_led_default_cfg {
-					pins = "GPIO2_C5";
-					ste,output = <1>;
-				};
-			};
-		};
-		user-button {
-			user_button_default_mode: user_button_default {
-				user_button_default_cfg {
-					pins = "GPIO3_A4";
-					ste,input = <0>;
-				};
-			};
-		};
-	};
-
-	/* Ethernet */
+	/* This is where the interrupt is routed on the S8815 board */
 	external-bus@34000000 {
-		compatible = "simple-bus";
-		reg = <0x34000000 0x1000000>;
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges = <0 0x34000000 0x1000000>;
 		ethernet@300 {
-			compatible = "smsc,lan91c111";
-			reg = <0x300 0x0fd00>;
 			interrupt-parent = <&gpio3>;
-			interrupts = <8 IRQ_TYPE_EDGE_RISING>;
-		};
-	};
-
-	/* GPIO I2C connected to the USB portions of the STw4811 only */
-	gpio-i2c {
-		compatible = "i2c-gpio";
-		gpios = <&gpio2 10 0>, /* sda */
-			<&gpio2 9 0>; /* scl */
-		#address-cells = <1>;
-		#size-cells = <0>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&gpioi2c_default_mode>;
-
-		stw4811@2d {
-			   compatible = "st,stw4811-usb";
-			   reg = <0x2d>;
-		};
-	};
-
-
-	/* Configure card detect for the uSD slot */
-	amba {
-		mmcsd: sdi@101f6000 {
-			cd-gpios = <&gpio3 15 GPIO_ACTIVE_LOW>;
+			interrupts = <8 0x1>;
 		};
 	};
 
 	/* Custom board node with GPIO pins to active etc */
 	usb-s8815 {
+		/* The S8815 is using this very GPIO pin for the SMSC91x IRQs */
+		ethernet-gpio {
+			gpios = <&gpio3 8 0x1>;
+		};
 		/* This will bias the MMC/SD card detect line */
 		mmcsd-gpio {
 			gpios = <&gpio3 16 0x1>;
 		};
 	};
-
-	/* The user LED on the board is set up to be used for heartbeat */
-	leds {
-		compatible = "gpio-leds";
-		user-led {
-			label = "user_led";
-			gpios = <&gpio0 2 0x1>;
-			default-state = "off";
-			linux,default-trigger = "heartbeat";
-			pinctrl-names = "default";
-			pinctrl-0 = <&user_led_default_mode>;
-		};
-	};
-
-	/* User key mapped in as "escape" */
-	gpio-keys {
-		compatible = "gpio-keys";
-		user-button {
-			label = "user_button";
-			gpios = <&gpio0 3 0x1>;
-			linux,code = <1>; /* KEY_ESC */
-			gpio-key,wakeup;
-			pinctrl-names = "default";
-			pinctrl-0 = <&user_button_default_mode>;
-		};
-	};
 };
diff -urNp a/arch/arm/boot/dts/ste-nomadik-stn8815.dtsi b/arch/arm/boot/dts/ste-nomadik-stn8815.dtsi
--- a/arch/arm/boot/dts/ste-nomadik-stn8815.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/ste-nomadik-stn8815.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,9 +1,7 @@
 /*
  * Device Tree for the ST-Ericsson Nomadik 8815 STn8815 SoC
  */
-
-#include <dt-bindings/gpio/gpio.h>
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	#address-cells = <1>;
@@ -23,23 +21,18 @@
 		cache-level = <2>;
 	};
 
-	mtu0: mtu@101e2000 {
+	mtu0 {
 		/* Nomadik system timer */
-		compatible = "st,nomadik-mtu";
 		reg = <0x101e2000 0x1000>;
 		interrupt-parent = <&vica>;
 		interrupts = <4>;
-		clocks = <&timclk>, <&pclk>;
-		clock-names = "timclk", "apb_pclk";
 	};
 
-	mtu1: mtu@101e3000 {
+	mtu1 {
 		/* Secondary timer */
 		reg = <0x101e3000 0x1000>;
 		interrupt-parent = <&vica>;
 		interrupts = <5>;
-		clocks = <&timclk>, <&pclk>;
-		clock-names = "timclk", "apb_pclk";
 	};
 
 	gpio0: gpio@101e4000 {
@@ -52,7 +45,6 @@
 		gpio-controller;
 		#gpio-cells = <2>;
 		gpio-bank = <0>;
-		clocks = <&pclk>;
 	};
 
 	gpio1: gpio@101e5000 {
@@ -65,7 +57,6 @@
 		gpio-controller;
 		#gpio-cells = <2>;
 		gpio-bank = <1>;
-		clocks = <&pclk>;
 	};
 
 	gpio2: gpio@101e6000 {
@@ -78,7 +69,6 @@
 		gpio-controller;
 		#gpio-cells = <2>;
 		gpio-bank = <2>;
-		clocks = <&pclk>;
 	};
 
 	gpio3: gpio@101e7000 {
@@ -91,546 +81,10 @@
 		gpio-controller;
 		#gpio-cells = <2>;
 		gpio-bank = <3>;
-		clocks = <&pclk>;
 	};
 
 	pinctrl {
-		compatible = "stericsson,stn8815-pinctrl";
-		/* Pin configurations */
-		uart0 {
-			uart0_default_mux: uart0_mux {
-				u0_default_mux {
-					function = "u0";
-					groups = "u0_a_1";
-				};
-			};
-		};
-		uart1 {
-			uart1_default_mux: uart1_mux {
-				u1_default_mux {
-					function = "u1";
-					groups = "u1_a_1";
-				};
-			};
-		};
-		mmcsd {
-			mmcsd_default_mux: mmcsd_mux {
-				mmcsd_default_mux {
-					function = "mmcsd";
-					groups = "mmcsd_a_1", "mmcsd_b_1";
-				};
-			};
-			mmcsd_default_mode: mmcsd_default {
-				mmcsd_default_cfg1 {
-					/* MCCLK */
-					pins = "GPIO8_B10";
-					ste,output = <0>;
-				};
-				mmcsd_default_cfg2 {
-					/* MCCMDDIR, MCDAT0DIR, MCDAT31DIR, MCDATDIR2 */
-					pins = "GPIO10_C11", "GPIO15_A12",
-					"GPIO16_C13", "GPIO23_D15";
-					ste,output = <1>;
-				};
-				mmcsd_default_cfg3 {
-					/* MCCMD, MCDAT3-0, MCMSFBCLK */
-					pins = "GPIO9_A10", "GPIO11_B11",
-					"GPIO12_A11", "GPIO13_C12",
-					"GPIO14_B12", "GPIO24_C15";
-					ste,input = <1>;
-				};
-			};
-		};
-		i2c0 {
-			i2c0_default_mux: i2c0_mux {
-				i2c0_default_mux {
-					function = "i2c0";
-					groups = "i2c0_a_1";
-				};
-			};
-			i2c0_default_mode: i2c0_default {
-				i2c0_default_cfg {
-					pins = "GPIO62_D3", "GPIO63_D2";
-					ste,input = <0>;
-				};
-			};
-		};
-		i2c1 {
-			i2c1_default_mux: i2c1_mux {
-				i2c1_default_mux {
-					function = "i2c1";
-					groups = "i2c1_a_1";
-				};
-			};
-			i2c1_default_mode: i2c1_default {
-				i2c1_default_cfg {
-					pins = "GPIO53_L4", "GPIO54_L3";
-					ste,input = <0>;
-				};
-			};
-		};
-	};
-
-	src: src@101e0000 {
-		compatible = "stericsson,nomadik-src";
-		reg = <0x101e0000 0x1000>;
-
-		/*
-		 * MXTAL "Main Chrystal" is a chrystal oscillator @19.2 MHz
-		 * that is parent of TIMCLK, PLL1 and PLL2
-		 */
-		mxtal: mxtal@19.2M {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <19200000>;
-		};
-
-		/*
-		 * The 2.4 MHz TIMCLK reference clock is active at
-		 * boot time, this is actually the MXTALCLK @19.2 MHz
-		 * divided by 8. This clock is used by the timers and
-		 * watchdog. See page 105 ff.
-		 */
-		timclk: timclk@2.4M {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			clock-div = <8>;
-			clock-mult = <1>;
-			clocks = <&mxtal>;
-		};
-
-		/* PLL1 is locked to MXTALI and variable from 20.4 to 334 MHz */
-		pll1: pll1@0 {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-pll-clock";
-			pll-id = <1>;
-			clocks = <&mxtal>;
-		};
-
-		/* HCLK divides the PLL1 with 1,2,3 or 4 */
-		hclk: hclk@0 {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-hclk-clock";
-			clocks = <&pll1>;
-		};
-		/* The PCLK domain uses HCLK right off */
-		pclk: pclk@0 {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			clock-div = <1>;
-			clock-mult = <1>;
-			clocks = <&hclk>;
-		};
-
-		/* PLL2 is usually 864 MHz and divided into a few fixed rates */
-		pll2: pll2@0 {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-pll-clock";
-			pll-id = <2>;
-			clocks = <&mxtal>;
-		};
-		clk216: clk216@216M {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			clock-div = <4>;
-			clock-mult = <1>;
-			clocks = <&pll2>;
-		};
-		clk108: clk108@108M {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			clock-div = <2>;
-			clock-mult = <1>;
-			clocks = <&clk216>;
-		};
-		clk72: clk72@72M {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			/* The data sheet does not say how this is derived */
-			clock-div = <12>;
-			clock-mult = <1>;
-			clocks = <&pll2>;
-		};
-		clk48: clk48@48M {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			/* The data sheet does not say how this is derived */
-			clock-div = <18>;
-			clock-mult = <1>;
-			clocks = <&pll2>;
-		};
-		clk27: clk27@27M {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			clock-div = <4>;
-			clock-mult = <1>;
-			clocks = <&clk108>;
-		};
-
-		/* This apparently exists as well */
-		ulpiclk: ulpiclk@60M {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <60000000>;
-		};
-
-		/*
-		 * IP AMBA bus clocks, driving the bus side of the
-		 * peripheral clocking, clock gates.
-		 */
-
-		hclkdma0: hclkdma0@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <0>;
-			clocks = <&hclk>;
-		};
-		hclksmc: hclksmc@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <1>;
-			clocks = <&hclk>;
-		};
-		hclksdram: hclksdram@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <2>;
-			clocks = <&hclk>;
-		};
-		hclkdma1: hclkdma1@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <3>;
-			clocks = <&hclk>;
-		};
-		hclkclcd: hclkclcd@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <4>;
-			clocks = <&hclk>;
-		};
-		pclkirda: pclkirda@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <5>;
-			clocks = <&pclk>;
-		};
-		pclkssp: pclkssp@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <6>;
-			clocks = <&pclk>;
-		};
-		pclkuart0: pclkuart0@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <7>;
-			clocks = <&pclk>;
-		};
-		pclksdi: pclksdi@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <8>;
-			clocks = <&pclk>;
-		};
-		pclki2c0: pclki2c0@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <9>;
-			clocks = <&pclk>;
-		};
-		pclki2c1: pclki2c1@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <10>;
-			clocks = <&pclk>;
-		};
-		pclkuart1: pclkuart1@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <11>;
-			clocks = <&pclk>;
-		};
-		pclkmsp0: pclkmsp0@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <12>;
-			clocks = <&pclk>;
-		};
-		hclkusb: hclkusb@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <13>;
-			clocks = <&hclk>;
-		};
-		hclkdif: hclkdif@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <14>;
-			clocks = <&hclk>;
-		};
-		hclksaa: hclksaa@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <15>;
-			clocks = <&hclk>;
-		};
-		hclksva: hclksva@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <16>;
-			clocks = <&hclk>;
-		};
-		pclkhsi: pclkhsi@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <17>;
-			clocks = <&pclk>;
-		};
-		pclkxti: pclkxti@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <18>;
-			clocks = <&pclk>;
-		};
-		pclkuart2: pclkuart2@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <19>;
-			clocks = <&pclk>;
-		};
-		pclkmsp1: pclkmsp1@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <20>;
-			clocks = <&pclk>;
-		};
-		pclkmsp2: pclkmsp2@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <21>;
-			clocks = <&pclk>;
-		};
-		pclkowm: pclkowm@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <22>;
-			clocks = <&pclk>;
-		};
-		hclkhpi: hclkhpi@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <23>;
-			clocks = <&hclk>;
-		};
-		pclkske: pclkske@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <24>;
-			clocks = <&pclk>;
-		};
-		pclkhsem: pclkhsem@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <25>;
-			clocks = <&pclk>;
-		};
-		hclk3d: hclk3d@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <26>;
-			clocks = <&hclk>;
-		};
-		hclkhash: hclkhash@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <27>;
-			clocks = <&hclk>;
-		};
-		hclkcryp: hclkcryp@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <28>;
-			clocks = <&hclk>;
-		};
-		pclkmshc: pclkmshc@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <29>;
-			clocks = <&pclk>;
-		};
-		hclkusbm: hclkusbm@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <30>;
-			clocks = <&hclk>;
-		};
-		hclkrng: hclkrng@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <31>;
-			clocks = <&hclk>;
-		};
-
-		/* IP kernel clocks */
-		clcdclk: clcdclk@0 {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <36>;
-			clocks = <&clk72 &clk48>;
-		};
-		irdaclk: irdaclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <37>;
-			clocks = <&clk48>;
-		};
-		sspiclk: sspiclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <38>;
-			clocks = <&clk48>;
-		};
-		uart0clk: uart0clk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <39>;
-			clocks = <&clk48>;
-		};
-		sdiclk: sdiclk@48M {
-			/* Also called MCCLK in some documents */
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <40>;
-			clocks = <&clk48>;
-		};
-		i2c0clk: i2c0clk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <41>;
-			clocks = <&clk48>;
-		};
-		i2c1clk: i2c1clk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <42>;
-			clocks = <&clk48>;
-		};
-		uart1clk: uart1clk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <43>;
-			clocks = <&clk48>;
-		};
-		mspclk0: mspclk0@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <44>;
-			clocks = <&clk48>;
-		};
-		usbclk: usbclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <45>;
-			clocks = <&clk48>; /* 48 MHz not ULPI */
-		};
-		difclk: difclk@72M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <46>;
-			clocks = <&clk72>;
-		};
-		ipi2cclk: ipi2cclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <47>;
-			clocks = <&clk48>; /* Guess */
-		};
-		ipbmcclk: ipbmcclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <48>;
-			clocks = <&clk48>; /* Guess */
-		};
-		hsiclkrx: hsiclkrx@216M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <49>;
-			clocks = <&clk216>;
-		};
-		hsiclktx: hsiclktx@108M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <50>;
-			clocks = <&clk108>;
-		};
-		uart2clk: uart2clk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <51>;
-			clocks = <&clk48>;
-		};
-		mspclk1: mspclk1@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <52>;
-			clocks = <&clk48>;
-		};
-		mspclk2: mspclk2@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <53>;
-			clocks = <&clk48>;
-		};
-		owmclk: owmclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <54>;
-			clocks = <&clk48>; /* Guess */
-		};
-		skeclk: skeclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <56>;
-			clocks = <&clk48>; /* Guess */
-		};
-		x3dclk: x3dclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <58>;
-			clocks = <&clk48>; /* Guess */
-		};
-		pclkmsp3: pclkmsp3@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <59>;
-			clocks = <&pclk>;
-		};
-		mspclk3: mspclk3@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <60>;
-			clocks = <&clk48>;
-		};
-		mshcclk: mshcclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <61>;
-			clocks = <&clk48>; /* Guess */
-		};
-		usbmclk: usbmclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <62>;
-			/* Stated as "48 MHz not ULPI clock" */
-			clocks = <&clk48>;
-		};
-		rngcclk: rngcclk@48M {
-			#clock-cells = <0>;
-			compatible = "st,nomadik-src-clock";
-			clock-id = <63>;
-			clocks = <&clk48>; /* Guess */
-		};
+		compatible = "stericsson,nmk-pinctrl-stn8815";
 	};
 
 	/* A NAND flash of 128 MiB */
@@ -643,9 +97,7 @@
 			<0x41000000 0x2000>,	/* NAND Base ADDR */
 			<0x40800000 0x2000>;	/* NAND Base CMD */
 		reg-names = "fsmc_regs", "nand_data", "nand_addr", "nand_cmd";
-		clocks = <&hclksmc>;
 		status = "okay";
-		timings = /bits/ 8 <0 0 0 0x10 0x0a 0>;
 
 		partition@0 {
 		label = "X-Loader(NAND)";
@@ -673,45 +125,39 @@
 		};
 	};
 
+	external-bus@34000000 {
+		compatible = "simple-bus";
+		reg = <0x34000000 0x1000000>;
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges = <0 0x34000000 0x1000000>;
+		ethernet@300 {
+			compatible = "smsc,lan91c111";
+			reg = <0x300 0x0fd00>;
+		};
+	};
+
 	/* I2C0 connected to the STw4811 power management chip */
 	i2c0 {
-		compatible = "st,nomadik-i2c", "arm,primecell";
-		reg = <0x101f8000 0x1000>;
-		interrupt-parent = <&vica>;
-		interrupts = <20>;
-		clock-frequency = <100000>;
+		compatible = "i2c-gpio";
+		gpios = <&gpio1 31 0>, /* sda */
+			<&gpio1 30 0>; /* scl */
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&i2c0clk>, <&pclki2c0>;
-		clock-names = "mclk", "apb_pclk";
-		pinctrl-names = "default";
-		pinctrl-0 = <&i2c0_default_mux>, <&i2c0_default_mode>;
 
 		stw4811@2d {
-			compatible = "st,stw4811";
-			reg = <0x2d>;
-			vmmc_regulator: vmmc {
-				compatible = "st,stw481x-vmmc";
-				regulator-name = "VMMC";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <3300000>;
-			};
+			   compatible = "st,stw4811";
+			   reg = <0x2d>;
 		};
 	};
 
 	/* I2C1 connected to various sensors */
 	i2c1 {
-		compatible = "st,nomadik-i2c", "arm,primecell";
-		reg = <0x101f7000 0x1000>;
-		interrupt-parent = <&vica>;
-		interrupts = <21>;
-		clock-frequency = <100000>;
+		compatible = "i2c-gpio";
+		gpios = <&gpio1 22 0>, /* sda */
+			<&gpio1 21 0>; /* scl */
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&i2c1clk>, <&pclki2c1>;
-		clock-names = "mclk", "apb_pclk";
-		pinctrl-names = "default";
-		pinctrl-0 = <&i2c1_default_mux>, <&i2c1_default_mode>;
 
 		camera@2d {
 			   compatible = "st,camera";
@@ -727,20 +173,33 @@
 		};
 	};
 
+	/* I2C2 connected to the USB portions of the STw4811 only */
+	i2c2 {
+		compatible = "i2c-gpio";
+		gpios = <&gpio2 10 0>, /* sda */
+			<&gpio2 9 0>; /* scl */
+		#address-cells = <1>;
+		#size-cells = <0>;
+		stw4811@2d {
+			   compatible = "st,stw4811-usb";
+			   reg = <0x2d>;
+		};
+	};
+
 	amba {
 		compatible = "arm,amba-bus";
 		#address-cells = <1>;
 		#size-cells = <1>;
 		ranges;
 
-		vica: intc@10140000 {
+		vica: intc@0x10140000 {
 			compatible = "arm,versatile-vic";
 			interrupt-controller;
 			#interrupt-cells = <1>;
 			reg = <0x10140000 0x20>;
 		};
 
-		vicb: intc@10140020 {
+		vicb: intc@0x10140020 {
 			compatible = "arm,versatile-vic";
 			interrupt-controller;
 			#interrupt-cells = <1>;
@@ -752,10 +211,6 @@
 			reg = <0x101fd000 0x1000>;
 			interrupt-parent = <&vica>;
 			interrupts = <12>;
-			clocks = <&uart0clk>, <&pclkuart0>;
-			clock-names = "uartclk", "apb_pclk";
-			pinctrl-names = "default";
-			pinctrl-0 = <&uart0_default_mux>;
 		};
 
 		uart1: uart@101fb000 {
@@ -763,10 +218,6 @@
 			reg = <0x101fb000 0x1000>;
 			interrupt-parent = <&vica>;
 			interrupts = <17>;
-			clocks = <&uart1clk>, <&pclkuart1>;
-			clock-names = "uartclk", "apb_pclk";
-			pinctrl-names = "default";
-			pinctrl-0 = <&uart1_default_mux>;
 		};
 
 		uart2: uart@101f2000 {
@@ -774,23 +225,17 @@
 			reg = <0x101f2000 0x1000>;
 			interrupt-parent = <&vica>;
 			interrupts = <28>;
-			clocks = <&uart2clk>, <&pclkuart2>;
-			clock-names = "uartclk", "apb_pclk";
 			status = "disabled";
 		};
 
 		rng: rng@101b0000 {
 			compatible = "arm,primecell";
 			reg = <0x101b0000 0x1000>;
-			clocks = <&rngcclk>, <&hclkrng>;
-			clock-names = "rng", "apb_pclk";
 		};
 
 		rtc: rtc@101e8000 {
 			compatible = "arm,pl031", "arm,primecell";
 			reg = <0x101e8000 0x1000>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 			interrupt-parent = <&vica>;
 			interrupts = <10>;
 		};
@@ -798,17 +243,14 @@
 		mmcsd: sdi@101f6000 {
 			compatible = "arm,pl18x", "arm,primecell";
 			reg = <0x101f6000 0x1000>;
-			clocks = <&sdiclk>, <&pclksdi>;
-			clock-names = "mclk", "apb_pclk";
 			interrupt-parent = <&vica>;
 			interrupts = <22>;
 			max-frequency = <48000000>;
 			bus-width = <4>;
-			cap-mmc-highspeed;
-			cap-sd-highspeed;
-			pinctrl-names = "default";
-			pinctrl-0 = <&mmcsd_default_mux>, <&mmcsd_default_mode>;
-			vmmc-supply = <&vmmc_regulator>;
+			mmc-cap-mmc-highspeed;
+			mmc-cap-sd-highspeed;
+			cd-gpios = <&gpio3 15 0x1>;
+			cd-inverted;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/stid127-b2112.dts b/arch/arm/boot/dts/stid127-b2112.dts
--- a/arch/arm/boot/dts/stid127-b2112.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127-b2112.dts	2019-09-26 21:23:27.092619100 +0100
@@ -0,0 +1,145 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author: Alexandre Torgue <alexandre.torgue@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stid127.dtsi"
+
+/ {
+	model = "STiD127 B2112 Board";
+	compatible = "st,stid127-b2112", "st,stid127";
+
+	memory{
+		device_type = "memory";
+		reg = <0x40000000 0x10000000>;
+	};
+
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &uart2;
+	};
+
+	aliases {
+		ttyAS0 = &uart2;
+		usb0 = &usb0;
+		if17 = &if17;
+		if18 = &if18;
+		if16 = &if16;
+		if1 = &if1;
+		if0 = &if0;
+		ethernet0 = &ethernet0;
+		ethernet1 = &fpethernet1;
+	};
+
+	soc {
+		uart2: serial@fe532000{
+			status = "okay";
+		};
+
+		ethernet0: dwmac@feb00000 {
+			status = "okay";
+			st,tx-retime-src = "clkgen";
+			max-speed = <100>;
+
+			phy-mode = "rgmii";
+			snps,phy-addr = <0x0>;
+			snps,reset-gpio = <&PIO21 2 0>;
+			snps,reset-active-low;
+			snps,reset-delays-us = <0 10000 10000>;
+		};
+
+		usb0: usb@fe800000{
+			status = "okay";
+		};
+
+		pcie0: pcie@fef20000 {
+			status = "okay";
+		};
+
+		pcie1: pcie@fef30000 {
+			status = "okay";
+		};
+
+		if17:queue_3 {
+			status = "okay";
+		};
+
+		if18:queue_4 {
+			status = "okay";
+		};
+
+		if6:queue_5 {
+			status = "okay";
+		};
+
+		if1:queue_7 {
+			status = "okay";
+		};
+
+		if0:queue_0 {
+			status = "okay";
+		};
+
+		fpethernet:stmfp@fee80000 {
+			status = "okay";
+			phy-mode = "rgmii";
+
+			fpdocsis{
+				fixed-link = <1 1000 0 0>;
+				st,phy-bus-id = <0>;
+				st,phy-addr = <2>;
+			};
+
+			fpethernet0: fpgige0 {
+				fixed-link = <1 100 0 0>;
+				st,phy-bus-id = <0>;
+				st,phy-addr = <3>;
+			};
+
+			fpethernet1: fpgige1 {
+				fixed-link = <1 1000 0 0>;
+				st,phy-bus-id = <0>;
+				st,phy-addr = <1>;
+			};
+		};
+
+		spifsm:	spifsm@fe302000 {
+			status = "okay";
+			flash-name = "n25q256";
+			partitions = <&b2112_fsm_partitions>;
+
+			b2112_fsm_partitions: partitions-b2112 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					reg = <0x00000000 0x01a00000>;
+				};
+				partition@1a00000 {
+					label = "nvm";
+					reg = <0x01a00000 0x00100000>;
+				};
+				partition@1b00000 {
+					label = "rest";
+					reg = <0x01b00000 0x00500000>;
+				};
+			};
+		};
+
+		telss_spi0: telss-spi0{
+			status = "okay";
+		};
+
+		snd_tdm_player0: snd-uni-tdm@0xfeba4000 {
+			status = "okay";
+		};
+
+		snd_tdm_reader0: snd-uni-tdm@0xfeba5000 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid127-b2147.dts b/arch/arm/boot/dts/stid127-b2147.dts
--- a/arch/arm/boot/dts/stid127-b2147.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127-b2147.dts	2019-09-26 21:23:27.092619100 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stid127.dtsi"
+#include "stid127-b2147x.dtsi"
+
+/ {
+	model = "STiD127 B2147 REV A Board";
+	compatible = "st,stid127-b2147", "st,stid127";
+
+	soc {
+		pcie0: pcie@fef20000 {
+			reset-gpio = <&PIO21 4 0>;
+		};
+
+		pcie1: pcie@fef30000 {
+			reset-gpio = <&PIO8 7 0>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid127-b2147bc.dts b/arch/arm/boot/dts/stid127-b2147bc.dts
--- a/arch/arm/boot/dts/stid127-b2147bc.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127-b2147bc.dts	2019-09-26 21:23:27.092619100 +0100
@@ -0,0 +1,27 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stid127.dtsi"
+#include "stid127-b2147x.dtsi"
+
+/ {
+	model = "STiD127 B2147 REV B & C  Board";
+	compatible = "st,stid127-b2147", "st,stid127";
+
+	soc {
+		pcie0: pcie@fef20000 {
+			reset-gpio = <&PIO8 5 0>;
+		};
+
+		pcie1: pcie@fef30000 {
+			reset-gpio = <&PIO8 7 0>;
+		};
+
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid127-b2147x.dtsi b/arch/arm/boot/dts/stid127-b2147x.dtsi
--- a/arch/arm/boot/dts/stid127-b2147x.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127-b2147x.dtsi	2019-09-26 21:23:27.092619100 +0100
@@ -0,0 +1,145 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+
+/ {
+	memory{
+		device_type = "memory";
+		reg = <0x40000000 0x10000000>;
+	};
+
+	chosen {
+		bootargs = "";
+		linux,stdout-path = &uart2;
+	};
+
+	aliases {
+		ttyAS0 = &uart2;
+		usb0 = &usb0;
+		if16 = &if16;
+		if1 = &if1;
+		if0 = &if0;
+		ethernet1 = &fpethernet1;
+	};
+
+	soc {
+		uart2:serial@fe532000{
+			status = "okay";
+		};
+
+		usb0: usb@fe800000{
+			status = "okay";
+		};
+
+		if6:queue_5 {
+			status = "okay";
+		};
+
+		if1:queue_7 {
+			status = "okay";
+		};
+
+
+		if0:queue_0 {
+			status = "okay";
+		};
+
+		rtl8367rb {
+			compatible = "realtek,rtl8367rb";
+			gpio-sck = <&PIO12 6 0>;
+			gpio-sda = <&PIO12 5 0>;
+			gpio-reset = <&PIO21 3 0>;
+
+			rtl8367rb,extif1;
+			rtl8367rb,extif1-mode = <1>;    // RGMII
+			rtl8367rb,extif1-txdelay = <0>;
+			rtl8367rb,extif1-rxdelay = <1>;
+			rtl8367rb,extif1-force_mode = <1>;
+			rtl8367rb,extif1-txpause = <1>;
+			rtl8367rb,extif1-rxpause = <1>;
+			rtl8367rb,extif1-link = <1>;
+			rtl8367rb,extif1-duplex = <1>;
+			rtl8367rb,extif1-speed = <2>;
+		};
+
+		fpethernet:stmfp@fee80000 {
+			status = "okay";
+			phy-mode = "rgmii";
+
+			fpdocsis{
+				fixed-link = <1 1000 0 0>;
+				st,phy-bus-id = <0>;
+				st,phy-addr = <2>;
+			};
+
+			fpethernet0: fpgige0 {
+				fixed-link = <1 1000 0 0>;
+				st,phy-bus-id = <0>;
+				st,phy-addr = <3>;
+			};
+
+			fpethernet1: fpgige1 {
+				fixed-link = <1 1000 0 0>;
+				st,phy-bus-id = <0>;
+				st,phy-addr = <1>;
+			};
+		};
+
+		spifsm:	spifsm@fe302000 {
+			status = "okay";
+			flash-name = "n25q512";
+			partitions = <&b2147_fsm_partitions>;
+
+			b2147_fsm_partitions: partitions-b2147 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					reg = <0x00000000 0x01e00000>;
+				};
+				partition@1e00000 {
+					label = "nvm";
+					reg = <0x01e00000 0x00100000>;
+				};
+				partition@1f00000 {
+					label = "rest";
+					reg = <0x01f00000 0x02100000>;
+				};
+			};
+		};
+
+		pcie0: pcie@fef20000 {
+			status = "okay";
+		};
+
+		pcie1: pcie@fef30000 {
+			status = "okay";
+		};
+
+		telss_spi0: telss-spi0{
+			status = "okay";
+		};
+
+		snd_tdm_player0: snd-uni-tdm@0xfeba4000 {
+			status = "okay";
+		};
+
+		snd_tdm_reader0: snd-uni-tdm@0xfeba5000 {
+			status = "okay";
+		};
+
+		gpio_keys {
+			compatible = "gpio-keys";
+			button_wifi_wps {
+				label = "BUTTON_WIFI_WPS";
+				linux,code = <122>;
+				gpios = <&PIO8 6 0>;
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid127-b2163a.dts b/arch/arm/boot/dts/stid127-b2163a.dts
--- a/arch/arm/boot/dts/stid127-b2163a.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127-b2163a.dts	2019-09-26 21:23:27.092619100 +0100
@@ -0,0 +1,22 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Patrice Chotard <patrice.chotard@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stid127-b2163x.dtsi"
+
+/ {
+	model = "STiD127 B2163 Rev A Board";
+
+	soc {
+		rtl8367rb {
+			gpio-sck = <&PIO12 6 0>;
+			gpio-sda = <&PIO12 5 0>;
+			gpio-reset = <&PIO21 3 0>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid127-b2163b.dts b/arch/arm/boot/dts/stid127-b2163b.dts
--- a/arch/arm/boot/dts/stid127-b2163b.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127-b2163b.dts	2019-09-26 21:23:27.092619100 +0100
@@ -0,0 +1,22 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Patrice Chotard <patrice.chotard@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stid127-b2163x.dtsi"
+
+/ {
+	model = "STiD127 B2163 Rev B Board";
+
+	soc {
+		rtl8367rb {
+			gpio-sck = <&PIO7 6 0>;
+			gpio-sda = <&PIO7 5 0>;
+			gpio-reset = <&PIO21 2 0>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid127-b2163x.dtsi b/arch/arm/boot/dts/stid127-b2163x.dtsi
--- a/arch/arm/boot/dts/stid127-b2163x.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127-b2163x.dtsi	2019-09-26 21:23:27.092619100 +0100
@@ -0,0 +1,237 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Amelie Herault <amelie.herault@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+#include "stid127.dtsi"
+
+/ {
+	model = "STiD127 B2163 Board";
+	compatible = "st,stid127-b2163", "st,stid127";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x10000000>;
+	};
+
+	chosen {
+		bootargs = "";
+		linux,stdout-path = &uart2;
+	};
+
+	aliases {
+		ttyAS0 = &uart2;
+		usb0 = &usb0;
+		if17 = &if17;
+		if18 = &if18;
+		if16 = &if16;
+		if1 = &if1;
+		if0 = &if0;
+		ethernet0 = &ethernet0;
+		ethernet1 = &fpethernet1;
+		i2c4 = &i2c4;
+	};
+
+	soc {
+		uart2: serial@fe532000{
+			status = "okay";
+		};
+
+		leds {
+			compatible = "gpio-leds";
+			led_wifi0 {
+				label = "LED WIFI 0";
+				gpios = <&PIO19 0 1>;
+				default-state = "off";
+			};
+			led_wifi1 {
+				label = "LED WIFI 1";
+				gpios = <&PIO19 1 1>;
+				default-state = "off";
+			};
+			led_wifi_wps {
+				label = "LED WIFI WPS";
+				gpios = <&PIO19 2 1>;
+				default-state = "off";
+			};
+			led_ctr_pwr {
+				label = "LED CTR PWR";
+				gpios = <&PIO19 3 1>;
+				default-state = "off";
+			};
+			led_ctr_ds {
+				label = "LED CTR DS";
+				gpios = <&PIO19 4 1>;
+				default-state = "off";
+			};
+			led_ctr_us {
+				label = "LED CTR US";
+				gpios = <&PIO19 5 1>;
+				default-state = "off";
+			};
+			led_ctr_online {
+				label = "LED CTR ONLINE";
+				gpios = <&PIO19 6 1>;
+				default-state = "off";
+			};
+			led_ctr_link {
+				label = "LED CTR LINK";
+				gpios = <&PIO19 7 1>;
+				default-state = "off";
+			};
+		};
+
+		ethernet0: dwmac@feb00000 {
+			/* can be enable for debug purpose, in this case,
+			 * realtek switch must be disabled as common PIO
+			 * are shared between dwmac and realtek switch */
+			status = "disabled";
+			st,tx-retime-src = "clkgen";
+			max-speed = <100>;
+
+			phy-mode = "rgmii";
+			snps,phy-addr = <0x4>;
+			snps,reset-gpio = <&PIO21 3 0>;
+			snps,reset-active-low;
+			snps,reset-delays-us = <0 2000000 1000000>;
+		};
+
+		usb0: usb@fe800000{
+			status = "okay";
+		};
+
+		rtl8367rb {
+			compatible = "realtek,rtl8367rb";
+			status = "okay";
+
+			/* M1M connected to stid127 RGMII0_FP */
+			rtl8367rb,extif1;
+			rtl8367rb,extif1-mode = <1>;    // RGMII
+			rtl8367rb,extif1-txdelay = <1>;
+			rtl8367rb,extif1-rxdelay = <1>;
+			rtl8367rb,extif1-force_mode = <1>;
+			rtl8367rb,extif1-txpause = <1>;
+			rtl8367rb,extif1-rxpause = <1>;
+			rtl8367rb,extif1-link = <1>;
+			rtl8367rb,extif1-duplex = <1>;
+			rtl8367rb,extif1-speed = <2>;
+
+			/* M2M connected to stih410 RGMII1 */
+			rtl8367rb,extif2;
+			rtl8367rb,extif2-mode = <1>;    // RGMII
+			rtl8367rb,extif2-txdelay = <0>;
+			rtl8367rb,extif2-rxdelay = <1>;
+			rtl8367rb,extif2-force_mode = <1>;
+			rtl8367rb,extif2-txpause = <1>;
+			rtl8367rb,extif2-rxpause = <1>;
+			rtl8367rb,extif2-link = <1>;
+			rtl8367rb,extif2-duplex = <1>;
+			rtl8367rb,extif2-speed = <2>;
+		};
+
+		fpethernet:stmfp@fee80000 {
+			status = "okay";
+			phy-mode = "rgmii";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_b2163_fp0>, <&pinctrl_b2163_fp1>;
+
+			fpdocsis {
+				fixed-link = <1 1000 0 0>;
+				st,phy-bus-id = <0>;
+				st,phy-addr = <2>;
+			};
+
+			fpethernet0: fpgige0 {
+				fixed-link = <1 1000 0 0>;
+				st,phy-bus-id = <0>;
+				st,phy-addr = <3>;
+			};
+
+			fpethernet1: fpgige1 {
+				fixed-link = <1 1000 0 0>;
+				st,phy-bus-id = <0>;
+				st,phy-addr = <1>;
+			};
+		};
+
+		/* Intended for RTL8192ER */
+		pcie0: pcie@fef20000 {
+			status = "okay";
+			reset-gpio = <&PIO8 5 0>;
+		};
+
+		/* Intended for Quantenna module */
+		pcie1: pcie@fef30000 {
+			status = "okay";
+			reset-gpio = <&PIO8 7 0>;
+		};
+
+		/* Intended for MoCA */
+		i2c4: i2c@fe544000 {
+			status = "okay";
+		};
+
+		spi@fe540000 {
+			status = "okay";
+		};
+
+		spifsm:	spifsm@fe302000{
+			status = "okay";
+			flash-name = "n25q512";
+			partitions = <&b2163_fsm_partitions>;
+
+			b2163_fsm_partitions: partitions-b2163 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+                                        label = "boot";
+                                        reg = <0x00000000 0x01A00000>;	/* 26 MB */
+                                };
+                                partition@1a00000{
+                                        label = "nvm";
+                                        reg = <0x01A00000 0x00100000>;	/* 1 MB */
+                                };
+                                partition@1b00000{
+                                        label = "rest";			/* presently unused */
+                                        reg = <0x01B00000 0x02500000>;
+                                };
+			};
+		};
+
+		if17:queue_3 {
+			status = "okay";
+		};
+
+		if18:queue_4 {
+			status = "okay";
+		};
+
+		if6:queue_5 {
+			status = "okay";
+		};
+
+		if1:queue_7 {
+			status = "okay";
+		};
+
+		if0:queue_0 {
+			status = "okay";
+		};
+
+		telss_spi0: telss-spi0{
+			status = "okay";
+		};
+
+		snd_tdm_player0: snd-uni-tdm@0xfeba4000 {
+			status = "okay";
+		};
+
+		snd_tdm_reader0: snd-uni-tdm@0xfeba5000 {
+			status = "okay";
+		};
+	};
+};
+
diff -urNp a/arch/arm/boot/dts/stid127-clks.h b/arch/arm/boot/dts/stid127-clks.h
--- a/arch/arm/boot/dts/stid127-clks.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127-clks.h	2019-09-26 21:23:27.092619100 +0100
@@ -0,0 +1,66 @@
+/*
+ * This header provides constants clk index STMicroelectronics
+ * STiD127 SoC.
+ */
+#ifndef _DT_BINDINGS_CLK_STID127
+#define _DT_BINDINGS_CLK_STID127
+
+/* CLOCKGEN A0 HS0 */
+#define CLK_CT_DIAG		0
+#define CLK_FDMA_0		1
+#define CLK_FDMA_1		2
+
+/* CLOCKGEN A0 LS */
+#define CLK_IC_CM_ST40		0
+#define CLK_IC_SPI		1
+#define CLK_IC_CPU		2
+#define CLK_IC_MAIN		3
+#define CLK_IC_ROUTER		4
+#define CLK_IC_PCIE		5
+#define CLK_IC_LP		6
+#define CLK_IC_LP_CPU		7
+#define CLK_IC_STFE		8
+#define CLK_IC_DMA		9
+#define CLK_IC_GLOBAL_ROUTER	10
+#define CLK_IC_GLOBAL_PCI	11
+#define CLK_IC_GLOBAL_PCI_TARG	12
+#define CLK_IC_GLOBAL_NETWORK	13
+#define CLK_A9_TRACE_INT	14
+#define CLK_A9_EXT2F		15
+#define CLK_IC_LP_D3		16
+#define CLK_IC_LP_DQAM		17
+#define CLK_IC_LP_ETH		18
+#define CLK_IC_LP_HD		19
+#define CLK_IC_SECURE		20
+
+/* CLOCKGEN A1 HS0 */
+#define CLK_IC_DDR		5
+
+/* CLOCKGEN A1 LS */
+
+/* CLOCKGEN TEL */
+#define CLK_FDMA_TEL		0
+#define CLK_ZSI			1
+#define CLK_ETH0		2
+#define CLK_PAD_OUT		3
+#define CLK_USB_SRC		4
+
+/* CLOCKGEN DOC */
+#define CLK_FP			0
+#define CLK_D3_XP70		1
+#define CLK_IFE			2
+#define CLK_TSOUT_SRC		3
+#define CLK_DOC_VCO		4
+
+/* CLOCKGEN CCM TEL */
+#define CLK_ZSI_TEL		0
+#define CLK_ZSI_APPL		3
+
+/* CLOCKGEN CCM USB */
+#define CLK_USB_REF		3
+
+/* CLOCKGEN CCM LPC */
+#define CLK_THERMAL_SENSE	2
+#define CLK_LPC_COMMS		3
+
+#endif
diff -urNp a/arch/arm/boot/dts/stid127-clock.dtsi b/arch/arm/boot/dts/stid127-clock.dtsi
--- a/arch/arm/boot/dts/stid127-clock.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127-clock.dtsi	2019-09-26 21:23:27.096619100 +0100
@@ -0,0 +1,301 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics (R&D) Limited
+ * Author(s): Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *	      Alexandre Torgue <alexandre.torgue@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stid127-clks.h"
+/ {
+	clocks {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges;
+
+		compatible = "st,stid127-clk", "simple-bus";
+
+		/*
+		 * Fixed 27MHz oscillator inputs to SoC
+		 */
+		CLK_IFE_REF: CLK_IFE_REF {
+			#clock-cells = <0>;
+			compatible = "fixed-clock";
+			clock-frequency = <27000000>;
+			clock-output-names = "CLK_IFE_REF";
+		};
+
+		clockgenA@fea10000 {
+			reg = <0xfea10000 0xb58>;
+
+			CLK_S_A0_PLL0: CLK_S_A0_PLL0 {
+				#clock-cells = <1>;
+				compatible = "st,clkgena-plls-c45-ax-0", "st,clkgena-plls-c45";
+
+				clocks = <&CLK_IFE_REF>;
+
+				clock-output-names = "CLK_S_A0_PLL0_HS",
+						     "CLK_S_A0_PLL0_LS";
+			};
+
+			CLK_S_A0_PLL1: CLK_S_A0_PLL1 {
+				#clock-cells = <1>;
+				compatible = "st,clkgena-plls-c45-ax-1", "st,clkgena-plls-c45";
+
+				clocks = <&CLK_IFE_REF>;
+
+				clock-output-names = "CLK_S_A0_PLL1_HS",
+						     "CLK_S_A0_PLL1_LS";
+			};
+
+			CLK_S_A0_OSC_PREDIV: CLK_S_A0_OSC_PREDIV {
+				#clock-cells = <0>;
+				compatible = "st,clkgena-prediv-c45", "st,clkgena-prediv";
+
+				clocks = <&CLK_IFE_REF>;
+
+				clock-output-names = "CLK_S_A0_OSC_PREDIV";
+			};
+
+			CLK_S_A0_HS0: CLK_S_A0_HS0 {
+				#clock-cells = <1>;
+				compatible = "st,clkgena-divmux-c45-hs-0", "st,clkgena-divmux";
+
+				clocks = <&CLK_S_A0_OSC_PREDIV>,
+					 <&CLK_S_A0_PLL0 0>, /* PLL0 HS */
+					 <&CLK_S_A0_PLL1 0>; /* PLL1 HS */
+
+				clock-output-names = "CLK_CT_DIAG",
+						     "CLK_FDMA_0",
+						     "CLK_FDMA_1";
+			};
+
+			CLK_S_A0_HS1: CLK_S_A0_HS1 {
+				#clock-cells = <1>;
+				compatible = "st,clkgena-divmux-c45-hs-1", "st,clkgena-divmux";
+
+				clocks = <&CLK_S_A0_OSC_PREDIV>,
+					 <&CLK_S_A0_PLL0 1>, /* PLL0 LS */
+					 <&CLK_S_A0_PLL1 0>; /* PLL1 HS */
+
+				clock-output-names = "";
+			};
+
+			CLK_S_A0_LS: CLK_S_A0_LS {
+				#clock-cells = <1>;
+				compatible = "st,clkgena-divmux-c45-ls", "st,clkgena-divmux";
+
+				clocks = <&CLK_S_A0_OSC_PREDIV>,
+					 <&CLK_S_A0_PLL0 1>, /* PLL0 LS */
+					 <&CLK_S_A0_PLL1 1>; /* PLL1 LS */
+
+				clock-output-names = "CLK_IC_CM_ST40",
+						     "CLK_IC_SPI",
+						     "CLK_IC_CPU",
+						     "CLK_IC_MAIN",
+						     "CLK_IC_ROUTER",
+						     "CLK_IC_PCIE",
+						     "CLK_IC_LP",
+						     "CLK_IC_LP_CPU",
+						     "CLK_IC_STFE",
+						     "CLK_IC_DMA",
+						     "CLK_IC_GLOBAL_ROUTER",
+						     "CLK_IC_GLOBAL_PCI",
+						     "CLK_IC_GLOBAL_PCI_TARG",
+						     "CLK_IC_GLOBAL_NETWORK",
+						     "CLK_A9_TRACE_INT",
+						     "CLK_A9_EXT2F",
+						     "CLK_IC_LP_D3",
+						     "CLK_IC_LP_DQAM",
+						     "CLK_IC_LP_ETH",
+						     "CLK_IC_LP_HD",
+						     "CLK_IC_SECURE",
+						     "";
+			};
+		};
+
+		CLK_M_A9_EXT2F_DIV2: CLK_M_A9_EXT2F_DIV2S {
+			#clock-cells = <0>;
+			compatible = "fixed-factor-clock";
+			clocks = <&CLK_S_A0_LS 15>;
+			clock-div = <2>;
+			clock-mult = <1>;
+		};
+
+		clockgenA@fea20000 {
+			reg = <0xfea20000 0xb58>;
+
+			CLK_S_A1_PLL0: CLK_S_A1_PLL0 {
+				#clock-cells = <1>;
+				compatible = "st,clkgena-plls-c45-ax-0", "st,clkgena-plls-c45";
+
+				clocks = <&CLK_IFE_REF>;
+
+				clock-output-names = "CLK_S_A1_PLL0_HS",
+						     "CLK_S_A1_PLL0_LS";
+			};
+
+			CLK_S_A1_OSC_PREDIV: CLK_S_A1_OSC_PREDIV {
+				#clock-cells = <0>;
+				compatible = "st,clkgena-prediv-c45", "st,clkgena-prediv";
+
+				clocks = <&CLK_IFE_REF>;
+
+				clock-output-names = "CLK_S_A1_OSC_PREDIV";
+			};
+
+			CLK_S_A1_HS0: CLK_S_A1_HS0 {
+				#clock-cells = <1>;
+				compatible = "st,clkgena-divmux-c45-hs-0", "st,clkgena-divmux";
+
+				clocks = <&CLK_S_A1_OSC_PREDIV>,
+					 <&CLK_S_A1_PLL0 0>; /* PLL0 HS */
+
+				clock-output-names = "",
+						     "",
+						     "",
+						     "",
+						     "",
+						     "CLK_IC_DDR";
+			};
+
+			CLK_S_A1_HS1: CLK_S_A1_HS1 {
+				#clock-cells = <1>;
+				compatible = "st,clkgena-divmux-c45-hs-1", "st,clkgena-divmux";
+
+				clocks = <&CLK_S_A1_OSC_PREDIV>,
+					 <&CLK_S_A1_PLL0 1>; /* PLL0 LS */
+
+				clock-output-names = "";
+			};
+
+			CLK_S_A1_LS: CLK_S_A1_LS {
+				#clock-cells = <1>;
+				compatible = "st,clkgena-divmux-c45-ls", "st,clkgena-divmux";
+
+				clocks = <&CLK_S_A1_OSC_PREDIV>,
+					 <&CLK_S_A1_PLL0 1>; /* PLL0 LS */
+
+				clock-output-names = "";
+			};
+		};
+
+		/*
+		 * A9 PLL.
+		 *
+		 */
+		clockgenA9 {
+			reg = <0xfe9a0058 0x9C>;
+
+			CLOCKGEN_A9_PLL: CLOCKGEN_A9_PLL {
+				#clock-cells = <1>;
+				compatible = "st,stid127-a9-plls-c45", "st,clkgen-pll";
+
+				clocks = <&CLK_IFE_REF>;
+				clock-output-names = "CLOCKGEN_A9_PLL_ODF";
+			};
+		};
+
+		/*
+		 * ARM CPU related clocks.
+		 */
+		CLK_M_A9: CLK_M_A9 {
+			#clock-cells = <0>;
+			compatible = "st,stih415-clkgen-a9-mux", "st,clkgen-mux";
+			reg = <0xfe9a0058 0x4>;
+			clocks = <&CLOCKGEN_A9_PLL 0>, <&CLOCKGEN_A9_PLL 0>, <&CLK_S_A0_LS 15>, <&CLK_M_A9_EXT2F_DIV2>;
+		};
+
+		/*
+		 * ARM Peripheral clock for timers
+		 */
+		arm_periph_clk: CLK_M_A9_PERIPHS {
+			#clock-cells = <0>;
+			compatible = "fixed-factor-clock";
+			clocks = <&CLK_M_A9>;
+			clock-div = <2>;
+			clock-mult = <1>;
+		};
+
+		/*
+		 * Frequency synthesizers.
+		 *
+		 */
+		CLOCKGEN_TEL: CLOCKGEN_TEL {
+				#clock-cells = <1>;
+				compatible = "st,stid127-quadfs660-TEL", "st,quadfs";
+				reg = <0xfe910000 0x24>,
+					  <0xfe91001c 0x4>;
+
+				clocks = <&CLK_IFE_REF>;
+				clock-output-names = "CLK_FDMA_TEL",
+						     "CLK_ZSI",
+						     "CLK_ETH0",
+						     "CLK_PAD_OUT",
+						     "CLK_USB_SRC";	/* VCO Output */
+		};
+
+		CLOCKGEN_DOC: CLOCKGEN_DOC {
+				#clock-cells = <1>;
+				compatible = "st,stid127-quadfs660-TEL", "st,quadfs";
+				reg = <0xfef62000 0x24>,
+					  <0xfef6201c 0x4>;
+
+				clocks = <&CLK_IFE_REF>;
+				clock-output-names = "CLK_FP",
+						     "CLK_D3_XP70",
+						     "CLK_IFE",
+						     "CLK_TSOUT_SRC",
+						     "CLK_DOC_VCO";	/* VCO Output */
+			};
+
+		/*
+		 * CCM Module for TEL
+		 *
+		 */
+		CLOCKGEN_CCM_TEL: CLOCKGEN_CCM_TEL {
+				#clock-cells = <1>;
+				compatible = "st,stid127-ccm-A", "st,clkgen-ccm";
+				reg = <0xfe910060 0x4>;
+
+				clocks = <&CLOCKGEN_TEL 1>;
+				clock-output-names = "CLK_ZSI_TEL",
+						     "",
+						     "",
+						     "CLK_ZSI_APPL";
+		};
+
+		/*
+		 * CCM Module for USB
+		 *
+		 */
+		CLOCKGEN_CCM_USB: CLOCKGEN_CCM_USB {
+				#clock-cells = <1>;
+				compatible = "st,stid127-ccm-B", "st,clkgen-ccm";
+				reg = <0xfe910064 0x4>;
+
+				clocks = <&CLOCKGEN_TEL 4>;
+				clock-output-names = "",
+						     "",
+						     "",
+						     "CLK_USB_REF";
+		};
+
+		/*
+		 * CCM Module for LPC
+		 *
+		 */
+		CLOCKGEN_CCM_LPC: CLOCKGEN_CCM_LPC {
+				#clock-cells = <1>;
+				compatible = "st,stid127-ccm-D", "st,clkgen-ccm";
+				reg = <0xfe91006c 0x4>;
+
+				clocks = <&CLK_IFE_REF>;
+				clock-output-names = "",
+						     "",
+						     "CLK_THERMAL_SENSE",
+						     "CLK_LPC_COMMS";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid127-pinctrl.dtsi b/arch/arm/boot/dts/stid127-pinctrl.dtsi
--- a/arch/arm/boot/dts/stid127-pinctrl.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127-pinctrl.dtsi	2019-09-26 21:23:27.096619100 +0100
@@ -0,0 +1,573 @@
+/*
+ * Copyright (C) 2012 STMicroelectronics Limited.
+ * Author(s): Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *	      Alexandre Torgue <alexandre.torgue@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+#include <dt-bindings/pinctrl/st-pincfg.h>
+/ {
+	aliases {
+		gpio0 = &PIO0;
+		gpio1 = &PIO1;
+		gpio2 = &PIO2;
+		gpio3 = &PIO3;
+		gpio4 = &PIO4;
+		gpio5 = &PIO5;
+		gpio6 = &PIO6;
+		gpio7 = &PIO7;
+		gpio8 = &PIO8;
+		gpio9 = &PIO9;
+		gpio10 = &PIO10;
+		gpio11 = &PIO11;
+		gpio12 = &PIO12;
+		gpio13 = &PIO13;
+		gpio14 = &PIO14;
+		gpio15 = &PIO15;
+		gpio16 = &PIO16;
+		gpio17 = &PIO17;
+		gpio18 = &PIO18;
+		gpio19 = &PIO19;
+		gpio20 = &PIO20;
+		gpio21 = &PIO21;
+		gpio22 = &PIO22;
+
+	};
+
+	soc {
+		pin-controller-pwest {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stid127-pwest-pinctrl";
+			st,syscfg = <&syscfg_pwest>;
+			ranges = <0 0xfebe0000 0x8000>;
+
+			PIO0: gpio@febe0000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 149 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO0";
+			};
+			PIO1: gpio@febe1000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 150 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO1";
+			};
+			PIO2: gpio@febe2000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 151 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO2";
+			};
+			PIO3: gpio@febe3000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x3000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 152 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO3";
+			};
+			PIO4: gpio@febe4000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x4000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 153 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO4";
+			};
+			PIO5: gpio@febe5000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x5000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 154 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO5";
+			};
+			PIO6: gpio@febe6000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x6000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 155 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO6";
+			};
+			PIO7: gpio@febe7000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x7000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 156 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO7";
+			};
+			uart0 {
+				pinctrl_uart0: uart0 {
+					st,pins {
+						tx = <&PIO3 2 ALT2 OUT>;
+						rx = <&PIO3 0 ALT2 IN>;
+					};
+				};
+			};
+
+			fpgige0{
+				pinctrl_fp0: fp0-pinctrl {
+					st,pins {
+						 txd0_0 = <&PIO7 0 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd1_0 = <&PIO7 1 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd2_0 = <&PIO7 2 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd3_0 = <&PIO7 3 ALT1 OUT DE_IO 0 CLK_A>;
+						 txen_0 = <&PIO6 7 ALT1 OUT DE_IO 0 CLK_A>;
+						 txclk_0 = <&PIO7 4 ALT1 OUT NICLK 3250 CLK_A>;
+						 rxd0_0 = <&PIO6 2 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd1_0 = <&PIO6 3 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd2_0 = <&PIO6 4 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd3_0 = <&PIO6 5 ALT1 IN DE_IO 0 CLK_A>;
+						 rxdv_0 = <&PIO6 1 ALT1 IN DE_IO 0 CLK_A>;
+						 rxclk_0 = <&PIO6 6 ALT1 IN NICLK 3250 CLK_A>;
+						 phyclk_0 = <&PIO6 0 ALT1 IN NICLK 0 CLK_A>;
+					};
+				};
+				pinctrl_b2163_fp0: fp0-b2163-pinctrl {
+					st,pins {
+						 txd0_0 = <&PIO7 0 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd1_0 = <&PIO7 1 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd2_0 = <&PIO7 2 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd3_0 = <&PIO7 3 ALT1 OUT DE_IO 0 CLK_A>;
+						 txen_0 = <&PIO6 7 ALT1 OUT DE_IO 0 CLK_A>;
+						 txclk_0 = <&PIO7 4 ALT1 OUT NICLK 3250 CLK_A>;
+						 rxd0_0 = <&PIO6 2 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd1_0 = <&PIO6 3 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd2_0 = <&PIO6 4 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd3_0 = <&PIO6 5 ALT1 IN DE_IO 0 CLK_A>;
+						 rxdv_0 = <&PIO6 1 ALT1 IN DE_IO 0 CLK_A>;
+						 rxclk_0 = <&PIO6 6 ALT1 IN NICLK 500 CLK_A>;
+						 phyclk_0 = <&PIO6 0 ALT1 IN NICLK 0 CLK_A>;
+					};
+				};
+			};
+
+			systrace {
+				pinctrl_systrace_default: systrace-default {
+					st,pins {
+						trc_data0 = <&PIO0 5 ALT4 OUT>;
+						trc_data1 = <&PIO0 6 ALT4 OUT>;
+						trc_data2 = <&PIO0 7 ALT4 OUT>;
+						trc_data3 = <&PIO1 1 ALT4 OUT>;
+						trc_clk = <&PIO1 0 ALT4 OUT>;
+					};
+				};
+			};
+		};
+
+		pin-controller-psouth {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stid127-psouth-pinctrl";
+			st,syscfg = <&syscfg_psouth>;
+			ranges = <0 0xfef70000 0x7000>;
+
+			PIO8: gpio@fef70000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 157 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO8";
+			};
+			PIO9: gpio@fef71000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 158 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO9";
+			};
+			PIO10: gpio@fef72000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 159 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO10";
+			};
+			PIO11: gpio@fef73000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x3000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 160 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO11";
+			};
+			PIO12: gpio@fef74000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x4000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 161 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO12";
+			};
+			PIO13: gpio@fef75000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x5000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 162 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO13";
+			};
+			PIO14: gpio@fef76000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x6000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 163 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO14";
+			};
+
+			gmac0{
+				pinctrl_rgmii0: rgmii0 {
+					st,pins {
+						 txd0 = <&PIO11 0 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd1 = <&PIO11 1 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd2 = <&PIO11 2 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd3 = <&PIO11 3 ALT1 OUT DE_IO 0 CLK_A>;
+						 txen = <&PIO11 4 ALT1 OUT DE_IO 0 CLK_A>;
+						 txclk = <&PIO11 5 ALT1 OUT NICLK 500 CLK_A>;
+
+						 rxd0 = <&PIO11 6 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd1 = <&PIO11 7 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd2 = <&PIO12 0 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd3 = <&PIO12 1 ALT1 IN DE_IO 0 CLK_A>;
+						 rxdv = <&PIO12 2 ALT1 IN DE_IO 0 CLK_A>;
+						 rxclk = <&PIO12 3 ALT1 IN NICLK 500 CLK_A>;
+
+						 phyclk = <&PIO12 4 ALT1 OUT NICLK 0 CLK_A>;
+						 mdio = <&PIO12 5 ALT1 BIDIR_PU BYPASS 0>;
+						 mdc = <&PIO12 6 ALT1 OUT NICLK 0 CLK_A>;
+						 mdint = <&PIO12 7 ALT1 IN BYPASS 0>;
+					};
+				};
+			};
+
+			fpgige1{
+				pinctrl_fp1: fp1-pinctrl {
+					st,pins {
+						 txd0_1 = <&PIO13 0 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd1_1 = <&PIO13 1 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd2_1 = <&PIO13 2 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd3_1 = <&PIO13 3 ALT1 OUT DE_IO 0 CLK_A>;
+						 txen_1 = <&PIO13 4 ALT1 OUT DE_IO 0 CLK_A>;
+						 txclk_1 = <&PIO13 5 ALT1 OUT NICLK 3250 CLK_A>;
+						 rxd0_1 = <&PIO13 6 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd1_1 = <&PIO13 7 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd2_1 = <&PIO14 0 ALT1 IN DE_IO 0 CLK_A>;
+						 rxd3_1 = <&PIO14 1 ALT1 IN DE_IO 0 CLK_A>;
+						 rxdv_1 = <&PIO14 2 ALT1 IN DE_IO 0 CLK_A>;
+						 rxclk_1 = <&PIO14 3 ALT1 IN NICLK 3000 CLK_A>;
+						 phyclk_1 = <&PIO14 4 ALT1 IN NICLK 0 CLK_A>;
+					};
+				};
+				pinctrl_b2163_fp1: fp1-b2163-pinctrl {
+					st,pins {
+						 txd0_1 = <&PIO13 0 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd1_1 = <&PIO13 1 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd2_1 = <&PIO13 2 ALT1 OUT DE_IO 0 CLK_A>;
+						 txd3_1 = <&PIO13 3 ALT1 OUT DE_IO 0 CLK_A>;
+						 txen_1 = <&PIO13 4 ALT1 OUT DE_IO 0 CLK_A>;
+						 txclk_1 = <&PIO13 5 ALT1 OUT NICLK 0 CLK_A>;
+						 rxd0_1 = <&PIO13 6 ALT1 IN DE_IO 1500 CLK_A>;
+						 rxd1_1 = <&PIO13 7 ALT1 IN DE_IO 1500 CLK_A>;
+						 rxd2_1 = <&PIO14 0 ALT1 IN DE_IO 1500 CLK_A>;
+						 rxd3_1 = <&PIO14 1 ALT1 IN DE_IO 1500 CLK_A>;
+						 rxdv_1 = <&PIO14 2 ALT1 IN DE_IO 1500 CLK_A>;
+						 rxclk_1 = <&PIO14 3 ALT1 IN NICLK 0 CLK_A>;
+						 phyclk_1 = <&PIO14 4 ALT1 IN NICLK 0 CLK_A>;
+					};
+				};
+
+			};
+
+			spi0 {
+				pinctrl_spi0_default: spi0-default {
+					st,pins {
+						mtsr = <&PIO8 1 ALT1 BIDIR>;
+						mrst = <&PIO8 0 ALT1 BIDIR>;
+						scl = <&PIO8 2 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			i2c0 {
+				pinctrl_i2c0: i2c0 {
+					st,pins {
+						scl = <&PIO8 2 ALT1 BIDIR>;
+						sda = <&PIO8 1 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			i2c1 {
+				pinctrl_i2c1: i2c1 {
+					st,pins {
+						scl = <&PIO8 3 ALT1 BIDIR>;
+						sda = <&PIO8 4 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			i2c2 {
+				pinctrl_i2c2: i2c2 {
+					st,pins {
+						scl = <&PIO9 0 ALT1 BIDIR>;
+						sda = <&PIO9 1 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			i2c3 {
+				pinctrl_i2c3: i2c3 {
+					st,pins {
+						scl = <&PIO9 5 ALT1 BIDIR>;
+						sda = <&PIO9 4 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			i2c4 {
+				pinctrl_i2c4: i2c4 {
+					st,pins {
+						scl = <&PIO10 0 ALT1 BIDIR>;
+						sda = <&PIO10 1 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			i2c5 {
+				pinctrl_i2c5: i2c5 {
+					st,pins {
+						scl = <&PIO10 3 ALT1 BIDIR>;
+						sda = <&PIO10 4 ALT1 BIDIR>;
+					};
+				};
+			};
+		};
+
+		pin-controller-peast {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stid127-peast-pinctrl";
+			st,syscfg = <&syscfg_peast>;
+			ranges = <0 0xfebc0000 0x8000>;
+
+			PIO15: gpio@febc0000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = < 0 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 164 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO15";
+			};
+			PIO16: gpio@febc1000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 165 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO16";
+			};
+			PIO17: gpio@febc2000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 166 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO17";
+			};
+			PIO18: gpio@febc3000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x3000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 167 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO18";
+			};
+			PIO19: gpio@febc4000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x4000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 168 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO19";
+			};
+			PIO20: gpio@febc5000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x5000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts	= <GIC_SPI 169 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO20";
+			};
+			PIO21: gpio@febc6000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x6000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts	= <GIC_SPI 170 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO21";
+			};
+			PIO22: gpio@febc7000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x7000 0x100>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				interrupt-names = "irqmux";
+				interrupts = <GIC_SPI 171 IRQ_TYPE_NONE>;
+				st,bank-name = "PIO22";
+			};
+
+			fsm {
+				pinctrl_fsm: fsm {
+					st,pins {
+						spi-fsm-clk = <&PIO18 1 ALT1 OUT>;
+						spi-fsm-cs = <&PIO18 2 ALT1 OUT>;
+						spi-fsm-mosi = <&PIO18 3 ALT1 OUT>;
+						spi-fsm-miso = <&PIO18 4 ALT1 IN>;
+						spi-fsm-hol = <&PIO18 5 ALT1 OUT>;
+						spi-fsm-wp = <&PIO18 6 ALT1 OUT>;
+						spi-fsm-cs2 = <&PIO18 7 ALT1 OUT>;
+					};
+				};
+			};
+
+			uart2 {
+				pinctrl_uart2: uart2-0 {
+					st,pins {
+						tx = <&PIO20 1 ALT3 OUT>;
+						rx = <&PIO20 2 ALT3 IN>;
+					};
+				};
+			};
+			usb0 {
+				pinctrl_usb0: usb0 {
+					st,pins {
+						oc-detect = <&PIO22 6 ALT1 IN>;
+						pwr-enable = <&PIO22 7 ALT1 OUT>;
+					};
+				};
+			};
+			pwm0 {
+				pinctrl_pwm0_chan0_default: pwm0-0-default {
+					st,pins {
+						pwm-out = <&PIO20 3 ALT1 OUT>;
+					};
+				};
+				pinctrl_pwm0_chan1_default: pwm0-1-default {
+					st,pins {
+						pwm-out = <&PIO20 7 ALT1 OUT>;
+					};
+				};
+			};
+
+			i2c6 {
+				pinctrl_i2c6: i2c6 {
+					st,pins {
+						scl = <&PIO22 0 ALT1 BIDIR>;
+						sda = <&PIO22 1 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			telss_spi0 {
+				pinctrl_telss_spi0: telss_spi0 {
+					st,pins {
+						tel-spi-clk = <&PIO16 1 ALT1 OUT>;
+						tel-spi-mosi = <&PIO16 2 ALT1 OUT>;
+						tel-spi-miso = <&PIO16 3 ALT1 IN>;
+					};
+				};
+			};
+
+			snd_tdm_player0 {
+				pinctrl_lantiq_duslic_player0: pinctrl-lantiq-duslic-player0 {
+					st,pins {
+						PCLK = <&PIO15 5 ALT1 OUT>;
+						DTX = <&PIO15 6	ALT1 OUT>;
+						FSYNC = <&PIO17 0 ALT2 OUT>;
+					};
+				};
+				pinctrl_zsi_player0: pinctrl-zsi-player0 {
+					st,pins {
+						PCLK = <&PIO16 7 ALT1 OUT>;
+						DTX = <&PIO17 1 ALT1 OUT>;
+						FSYNC = <&PIO17 0 ALT1 OUT>;
+					};
+				};
+			};
+
+			snd_tdm_reader0 {
+				pinctrl_lantiq_duslic_reader0: pinctrl-lantiq-duslic-reader0 {
+					st,pins {
+						DRX = <&PIO15 7	ALT1 IN>;
+					};
+				};
+				pinctrl_zsi_reader0: pinctrl-zsi-reader0 {
+					st,pins {
+						DRX = <&PIO17 2	ALT1 IN>;
+					};
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid127.dtsi b/arch/arm/boot/dts/stid127.dtsi
--- a/arch/arm/boot/dts/stid127.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid127.dtsi	2019-09-26 21:23:27.096619100 +0100
@@ -0,0 +1,972 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author(s): Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *            Alexandre Torgue <alexandre.torgue@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+#include <dt-bindings/interrupt-controller/arm-gic.h>
+#include <dt-bindings/reset-controller/stid127-resets.h>
+#include "stid127-pinctrl.dtsi"
+#include "stid127-clock.dtsi"
+#include "telss/lantiq_duslic.dtsi"
+#include "telss/zsi.dtsi"
+
+/ {
+	#address-cells = <1>;
+	#size-cells = <1>;
+
+	aliases {
+		fdma0 = &fdma0_mpe;
+		fdma1 = &fdma1_mpe;
+		fdma2 = &fdma2_mpe;
+		fdmaxbar0 = &fdma_xbar_mpe;
+	};
+
+	cpus {
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		cpu@0 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <0>;
+		};
+		cpu@1 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <1>;
+		};
+	};
+
+	intc: interrupt-controller@fffe1000 {
+		compatible = "arm,cortex-a9-gic";
+		#interrupt-cells = <3>;
+		interrupt-controller;
+		reg = <0xfffe1000 0x1000>,
+		      <0xfffe0100 0x100>;
+	};
+
+	scu@fffe0000 {
+		compatible = "arm,cortex-a9-scu";
+		reg = <0xfffe0000 0x1000>;
+	};
+
+	timer@fffe0200 {
+		interrupt-parent = <&intc>;
+		compatible = "arm,cortex-a9-global-timer";
+		reg = <0xfffe0200 0x100>;
+		interrupts = <GIC_PPI 11 IRQ_TYPE_LEVEL_HIGH>;
+		clocks = <&arm_periph_clk>;
+	};
+
+	L2: cache-controller {
+		compatible = "arm,pl310-cache";
+		reg = <0xfffe2000 0x1000>;
+		arm,data-latency = <3 3 3>;
+		arm,tag-latency = <2 2 2>;
+		cache-unified;
+		cache-level = <2>;
+	};
+
+	soc {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		interrupt-parent = <&intc>;
+		ranges;
+		compatible = "simple-bus";
+
+		restart{
+			compatible = "st,stid127-restart";
+			st,syscfg = <&syscfg_cpu>;
+		};
+
+		socinfo {
+			compatible = "st,stid127-socinfo";
+			st,syscfg = <&syscfg_cpu>;
+		};
+
+		powerdown: powerdown-controller {
+			#reset-cells = <1>;
+			compatible = "st,stid127-powerdown";
+		};
+
+		ddr-pctl-controller {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges;
+			compatible = "simple-bus";
+			reg = <0xfea20000 0x1000>;
+			reg-names = "ddr_pll";
+
+			ddr-pctl@0xfe990000 {
+				compatible = "st,ddr-controller";
+				reg = <0xfe990000 0x2000>;
+			};
+		};
+
+		memory {
+			device_type = "eram";
+			reg = <0xfe240000 0x8000>;
+			reg-names = "eram_1";
+		};
+
+		softreset: softreset-controller {
+			#reset-cells = <1>;
+			compatible = "st,stid127-softreset";
+		};
+
+		pmu {
+			compatible = "st,stid127-pmu-syscfg";
+			st,syscfg = <&syscfg_cpu>;
+
+			arm-pmu {
+				interrupt-parent = <&intc>;
+				compatible = "arm,cortex-a9-pmu";
+				interrupts = <GIC_PPI 15 IRQ_TYPE_LEVEL_HIGH>;
+			};
+		};
+
+		syscfg_west:west-syscfg@febf0000{
+			compatible = "st,stid127-west-syscfg", "syscon";
+			reg = <0xfebf0000 0x1000>;
+			holes = <0x0 0xac
+				 0xb0 0xc
+				 0xd4 0x4
+				 0xdc 0x4
+				 0xf8 0xf08>;
+		};
+
+		syscfg_south:south-syscfg@fefa0000{
+			compatible = "st,stid127-south-syscfg", "syscon";
+			reg = <0xfefa0000 0x1000>;
+			holes = <0x0 0xd8
+				 0xf8 0x4
+				 0x100 0xc
+				 0x110 0x4
+				 0x13c 0x4
+				 0x144 0xc
+				 0x168 0xe98>;
+		};
+
+		syscfg_docsis:docsis-syscfg@fef90000{
+			compatible = "st,stid127-docsys-syscfg", "syscon";
+			reg = <0xfef90000 0x1000>;
+			holes = <0x14 0xfec>;
+		};
+
+		syscfg_cpu:cpu-syscfg@fe9a0000{
+			compatible = "st,stid127-cpu-syscfg", "syscon";
+			reg = <0xfe9a0000 0x1000>;
+			holes = <0x24 0x34
+				 0x70 0xc
+				 0x9c 0x10
+				 0xc4 0x2c
+				 0xfc 0x10
+				 0x140 0xec0>;
+		};
+
+		syscfg_hd:hd-syscfg@fe930000{
+			compatible = "st,stid127-hd-syscfg", "syscon";
+			reg = <0xfe930000 0x1000>;
+			holes = <0x0 0x4
+				 0x8 0x38
+				 0x44 0xc
+				 0x60 0x4
+				 0x68 0x10
+				 0x90 0x4
+				 0x9c 0x14
+				 0xbc 0xf44>;
+		};
+
+		syscfg_pwest:pwest-syscfg@fec00000{
+			compatible = "st,stid127-pwest-syscfg", "syscon";
+			reg = <0xfec00000 0x1000>;
+			holes = <0x140 0xec0>;
+		};
+
+		syscfg_psouth:psouth-syscfg@fefd0000{
+			compatible = "st,stid127-psouth-syscfg", "syscon";
+			reg = <0xfefd0000 0x1000>;
+			holes = <0x11c 0xee4>;
+		};
+
+		syscfg_peast:peast-syscfg@febd0000{
+			compatible = "st,stid127-peast-syscfg", "syscon";
+			reg = <0xfebd0000 0x1000>;
+			holes = <0x140 0xec0>;
+		};
+
+		/* Comms block ASCs in SASG2 */
+		uart0: serial@fe530000{
+			compatible = "st,asc";
+			reg = <0xfe530000 0x2c>;
+			interrupts = <GIC_SPI 25 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_uart0>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+
+			status = "disabled";
+		};
+
+		uart2: serial@fe532000{
+			compatible = "st,asc";
+			reg = <0xfe532000 0x2c>;
+			interrupts = <GIC_SPI 27 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_uart2>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+
+			status = "disabled";
+		};
+
+		ethernet0: dwmac@feb00000 {
+			device_type = "network";
+			compatible = "st,stid127-dwmac", "snps,dwmac", "snps,dwmac-3.610";
+			reg = <0xfeb00000 0x8000>, <0x158 0x4>;
+			reg-names = "stmmaceth", "sti-ethconf";
+			st,syscon = <&syscfg_south>;
+			st,gmac_en;
+			resets = <&softreset STID127_ETH0_SOFTRESET>;
+			reset-names = "stmmaceth";
+
+			interrupts = <GIC_SPI 31 IRQ_TYPE_NONE>,
+				     <GIC_SPI 30 IRQ_TYPE_NONE>;
+			interrupt-names = "macirq",
+					  "eth_wake_irq";
+
+			snps,pbl = <32>;
+
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rgmii0>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_DQAM>,
+				 <&CLOCKGEN_TEL CLK_ETH0>;
+			clock-names = "stmmaceth",
+				      "sti-ethclk";
+
+			status = "disabled";
+		};
+
+		fpethernet:stmfp@fee80000 {
+			compatible = "st,fplite";
+			device_type = "network";
+
+			reg = <0xfee80000 0x40000>;
+			interrupts = <GIC_SPI 101 IRQ_TYPE_NONE>,
+				     <GIC_SPI 102 IRQ_TYPE_NONE>,
+				     <GIC_SPI 103 IRQ_TYPE_NONE>;
+			interrupt-names = "fptxdmairq",
+				          "fprxdma0irq",
+					  "fprxdma1irq";
+
+			resets = <&softreset STID127_FP_SOFTRESET>;
+			reset-names = "stmfpeth";
+
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_fp0>, <&pinctrl_fp1>;
+
+			clocks = <&CLOCKGEN_DOC CLK_FP>,
+				 <&CLOCKGEN_DOC CLK_IFE>;
+			clock-names = "CLK_FP",
+				      "CLK_IFE_216_FP";
+
+			st,fp_clk_rate = <200>;
+
+			status = "disabled";
+		};
+
+		usb2_phy: usb2phy@0 {
+			compatible = "st,stid127-usb-phy";
+			#phy-cells = <0>;
+
+			st,syscfg = <&syscfg_hd>;
+
+			clocks = <&CLOCKGEN_CCM_USB CLK_USB_REF>;
+			clock-names = "osc_phy";
+		};
+
+		st_usb_bus_config: st-usb-amba-config {
+			st,bridge_type2;
+			st,sd_config_missing;
+			st,complete_on_error;
+			st,read_ahead;
+			st,max_opcode_LD64_ST64;
+			st,chunks_in_msg = <0>;
+			st,packets_in_chunk = <2>;
+			st,threshold = <16>;
+		};
+
+		usb0: usb@fe800000{
+			compatible = "st,usb-300x";
+			st,amba-config = <&st_usb_bus_config>;
+			reg = <0xfe800000 0x100>,
+			      <0xfe803c00 0x100>,
+			      <0xfe803e00 0x100>,
+			      <0xfe803f00 0x100>;
+			reg-names = "wrapper",
+				    "ohci",
+				    "ehci",
+				    "protocol";
+
+			interrupts = <GIC_SPI 147 IRQ_TYPE_NONE>,
+				     <GIC_SPI 148 IRQ_TYPE_NONE>;
+			interrupt-names = "ehci",
+					  "ohci";
+
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_usb0>;
+
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "ic";
+
+			resets = <&powerdown STID127_USB0_POWERDOWN>,
+				 <&softreset STID127_USB0_SOFTRESET>;
+
+			reset-names = "power", "softreset";
+
+			phys = <&usb2_phy>;
+			phy-names = "usb2-phy";
+
+			status = "disabled";
+		};
+
+		temp0{
+			compatible = "st,stid127-thermal";
+			clock-names = "thermal";
+			clocks = <&CLOCKGEN_CCM_LPC CLK_THERMAL_SENSE>;
+		};
+
+		eCM: eCM@0 {
+			compatible = "st,st40-rproc";
+			reg = <0x4be01000 0x04000000>;
+			reg-names = "carveout";
+			resets = <&softreset STID127_ST40_MANRESET>,
+				 <&softreset STID127_ST40_PWRRESET>;
+			reset-names = "sw_reset", "pwr_reset";
+			clocks = <&CLK_S_A0_LS CLK_IC_CM_ST40>;
+			clock-names = "rproc_clk";
+			clock-frequency = <500000000>;
+			st,syscfg-boot = <&syscfg_cpu 0x98>;
+			interrupts = <GIC_SPI 38 IRQ_TYPE_NONE>;
+		};
+
+		docsis: docsis@fee00000 {
+			compatible = "st,docsis";
+			reg = <0xfee2e000 0x100>,
+			      <0xfee1a000 0x100>;
+			reg-names = "dfwd-reg",
+				    "upiim-reg";
+
+			status = "okay";
+		};
+
+		/*
+			ISVE - Virtual Interfaces
+
+			Downstream queue:
+				docsis_base + 0x2E400 + (queue * 0x20)
+			Upstream queue:
+				docsis_base + 0x1A400 + (queue * 0x28)
+		*/
+		if17:queue_3 {
+			compatible = "st,isve";
+			device_type = "network";
+			reg = <0xfee2e460 0x20>, <0xfee1a478 0x20>;
+			interrupts = <GIC_SPI 78 IRQ_TYPE_NONE>,
+				     <GIC_SPI 89 IRQ_TYPE_NONE>;
+			interrupt-names = "isveirq_ds",
+					  "isveirq_us";
+
+			isve,queue_number = <3>;
+			isve,skip_hdr = <0x2>; /* two extra bytes have to be removed */
+			isve,hw_rem_hdr = <0x3>; /* remove docsis and extra HDR */
+
+			status = "disabled";
+		};
+
+		if18:queue_4 {
+			compatible = "st,isve";
+			device_type = "network";
+			reg = <0xfee2e480 0x20>, <0xfee1a4a0 0x20>;
+			interrupts = <GIC_SPI 79 IRQ_TYPE_NONE>,
+				     <GIC_SPI 90 IRQ_TYPE_NONE>;
+			interrupt-names = "isveirq_ds",
+					  "isveirq_us";
+
+			isve,queue_number = <4>;
+			isve,skip_hdr = <0x2>; /* two extra bytes have to be removed */
+			isve,hw_rem_hdr = <0x3>; /* remove docsis and extra HDR */
+
+			status = "disabled";
+		};
+
+		if16:queue_5 {
+			compatible = "st,isve";
+			device_type = "network";
+			reg = <0xfee2e4a0 0x20>, <0xfee1a4c8 0x20>;
+			interrupts = <GIC_SPI 80 IRQ_TYPE_NONE>,
+				     <GIC_SPI 91 IRQ_TYPE_NONE>;
+			interrupt-names = "isveirq_ds",
+					  "isveirq_us";
+			isve,queue_number = <5>;
+			isve,skip_hdr = <0x2>; /* two extra bytes have to be removed */
+			isve,hw_rem_hdr = <0x3>; /* remove docsis and extra HDR */
+
+			status = "disabled";
+		};
+
+		if1:queue_7 {
+			compatible = "st,isve";
+			device_type = "network";
+			reg = <0xfee2e4e0 0x20>, <0xfee1a518 0x20>;
+			interrupts = <GIC_SPI 82 IRQ_TYPE_NONE>,
+				     <GIC_SPI 93 IRQ_TYPE_NONE>;
+			interrupt-names = "isveirq_ds",
+					  "isveirq_us";
+
+			isve,queue_number = <7>;
+			isve,skip_hdr = <0x2>; /* two extra bytes have to be removed */
+			isve,hw_rem_hdr = <0x3>; /* remove docsis and extra HDR */
+
+			status = "disabled";
+		};
+
+		if0:queue_0 {
+			compatible = "st,isve";
+			device_type = "network";
+			reg = <0xfee2e400 0x20>, <0xfee1a400 0x20>;
+			interrupts = <GIC_SPI 75 IRQ_TYPE_NONE>,
+				     <GIC_SPI 86 IRQ_TYPE_NONE>;
+			interrupt-names = "isveirq_ds",
+					  "isveirq_us";
+
+			isve,queue_number = <0>;
+			isve,skip_hdr = <0x2>; /* two extra bytes have to be removed */
+			isve,hw_rem_hdr = <0x3>; /* remove docsis and extra HDR */
+
+			status = "disabled";
+		};
+
+		pwm0: pwm@fe510000 {
+			compatible = "st,sti-pwm";
+			#pwm-cells = <2>;
+			reg = <0xfe510000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_pwm0_chan0_default
+				     &pinctrl_pwm0_chan1_default>;
+			clock-names = "pwm";
+			clocks = <&CLK_IFE_REF>;
+			st,pwm-num-chan = <2>;
+
+			status = "disabled";
+		};
+
+		pcie0: pcie@fef20000 {
+			compatible = "st,stid127-pcie";
+			device_type = "pci";
+			reg = <0xfef20000 0x00001000   /* cntrl registers */
+			       0xfef28000 0x00000008   /* ahb registers */
+			       0x27ff0000 0x00010000   /* configuration space */
+			       0x40000000 0xbc000000   /* lmi mem window */
+			       0x10c 0x04>;            /* syscfg 267 */
+			reg-names = "pcie cntrl",
+				    "pcie ahb",
+				    "pcie cs",
+				    "mem-window",
+				    "syscfg0";
+
+			interrupts = <GIC_SPI 44 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 43 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 46 IRQ_TYPE_LEVEL_HIGH>;
+			interrupt-names = "pcie inta",
+					  "pcie syserr",
+					  "msi";
+
+			#address-cells = <3>;
+			#size-cells = <2>;
+			ranges = <0x82000000 0 0x20000000 0x20000000 0 0x02AA0000   /* non-prefetchable memory */
+				  0xc2000000 0 0x22AA0000 0x22AA0000 0 0x05550000>; /* prefetchable memory */
+			st,syscfg = <&syscfg_south>;
+			st,ahb-fixup = <0x26c028>;
+
+			resets = <&powerdown STID127_PCIE0_POWERDOWN>,
+				 <&softreset STID127_PCIE0_SOFTRESET>;
+			reset-names = "power",
+				      "softreset";
+
+			status = "disabled";
+		};
+
+		pcie1: pcie@fef30000 {
+			compatible = "st,stid127-pcie";
+			device_type = "pci";
+			reg = <0xfef30000 0x00001000   /* cntrl registers */
+			       0xfef38000 0x00000008   /* ahb registers */
+			       0x2fff0000 0x00010000   /* configuration space */
+			       0x40000000 0xbc000000   /* lmi mem window */
+			       0xfc 0x04>;             /* syscfg 263 */
+			reg-names = "pcie cntrl",
+				    "pcie ahb",
+				    "pcie cs",
+				    "mem-window",
+				    "syscfg0";
+
+			interrupts = <GIC_SPI 50 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 49 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 52 IRQ_TYPE_LEVEL_HIGH>;
+			interrupt-names = "pcie inta",
+					  "pcie syserr",
+					  "msi";
+
+			#address-cells = <3>;
+			#size-cells = <2>;
+			ranges = <0x82000000 0 0x28000000 0x28000000 0 0x02AA0000   /* non-prefetchable memory */
+				  0xc2000000 0 0x2AAA0000 0x2AAA0000 0 0x05550000>; /* prefetchable memory */
+			st,syscfg = <&syscfg_south>;
+			st,ahb-fixup = <0x26c028>;
+
+			resets = <&powerdown STID127_PCIE1_POWERDOWN>,
+				 <&softreset STID127_PCIE1_SOFTRESET>;
+			reset-names = "power",
+				      "softreset";
+
+			status = "disabled";
+		};
+
+		/* SSC0 */
+		spi@fe540000 {
+			compatible = "st,comms-ssc-spi";
+			reg = <0xfe540000 0x110>;
+			interrupts = <GIC_SPI 18 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi0_default>;
+			cs-gpios = <&PIO7 7 0>;
+			status = "disabled";
+		};
+
+		i2c@fe540000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			interrupts = <GIC_SPI 18 IRQ_TYPE_LEVEL_HIGH>;
+			reg = <0xfe540000 0x110>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c0>;
+		};
+
+		i2c@fe541000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			interrupts = <GIC_SPI 19 IRQ_TYPE_LEVEL_HIGH>;
+			reg = <0xfe541000 0x110>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c1>;
+		};
+
+		i2c@fe542000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			interrupts = <GIC_SPI 20 IRQ_TYPE_LEVEL_HIGH>;
+			reg = <0xfe542000 0x110>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c2>;
+		};
+
+		i2c@fe543000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			interrupts = <GIC_SPI 21 IRQ_TYPE_LEVEL_HIGH>;
+			reg = <0xfe543000 0x110>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c3>;
+		};
+
+		i2c@fe544000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			interrupts = <GIC_SPI 22 IRQ_TYPE_LEVEL_HIGH>;
+			reg = <0xfe544000 0x110>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c4>;
+		};
+
+		i2c@fe545000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			interrupts = <GIC_SPI 23 IRQ_TYPE_LEVEL_HIGH>;
+			reg = <0xfe545000 0x110>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c5>;
+		};
+
+		i2c@fe546000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			interrupts = <GIC_SPI 24 IRQ_TYPE_LEVEL_HIGH>;
+			reg = <0xfe546000 0x110>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c6>;
+		};
+
+		wdt: lpc_wdt@0xfe9c6000 {
+			compatible = "st,stid127-lpc-wdt";
+			reg = <0xfe9c6000 0x1000>;
+			clock-names = "lpc_wdt";
+			clocks = <&CLOCKGEN_CCM_LPC CLK_LPC_COMMS>;
+			timeout-sec = <30>;
+			st,syscfg = <&syscfg_cpu>;
+			status = "okay";
+		};
+
+		cid-irqmux@fea2d000{
+			compatible = "st,cid-irqmux", "simple-bus";
+			reg = <0xfea2d000 0x400>;
+			irqmux-name = "FDMA-2-CID";
+			irqmux-inputs = <16>;
+			irqmux-outputs = <4>;
+			interrupts-enable;
+			interrupts-multiplier = <0>;
+			interrupts-constant = <0>;
+		};
+
+		/* FDMA */
+		fdma_fw_regs: fdma-fw-regs {
+			fw-rev-id = <0x10000>;
+			fw-mchi-rx-nb-cur = <0x100c4>;
+			fw-mchi-rx-nb-all = <0x100c8>;
+			fw-cmd-statn = <0x10200>;
+			fw-req-ctln = <0x10240>;
+			fw-ptrn = <0x10800>;
+			fw-ctrln = <0x10804>;
+			fw-cntn = <0x10808>;
+			fw-saddrn = <0x1080c>;
+			fw-daddrn = <0x10810>;
+			fw-node-size = <128>;
+		};
+
+		fdma_hw_config: fdma-hw-config {
+			slim-reg-id = <0x0>;
+			slim-reg-ver = <0x4>;
+			slim-reg-en = <0x8>;
+			slim-reg-clk-gate = <0xc>;
+			slim-reg-slim-pc = <0x20>;
+
+			dmem-offset = <0x10000>;
+			dmem-size = <0x3000>;
+
+			periph-reg-sync-reg = <0x17f88>;
+			periph-reg-cmd-sta = <0x17fc0>;
+			periph-reg-cmd-set = <0x17fc4>;
+			periph-reg-cmd-clr = <0x17fc8>;
+			periph-reg-cmd-mask = <0x17fcc>;
+			periph-reg-int-sta = <0x17fd0>;
+			periph-reg-int-set = <0x17fd4>;
+			periph-reg-int-clr = <0x17fd8>;
+			periph-reg-int-mask = <0x17fdc>;
+
+			imem-offset = <0x18000>;
+			imem-size = <0x8000>;
+		};
+
+		fdma_xbar_mpe: fdma-xbar-mpe {
+			compatible = "st,fdma-xbar";
+			reg = <0xfe96a000 0x1000>;
+			first-fdma = <0>;
+			last-fdma = <2>;
+		};
+
+		fdma0_mpe: fdma-mpe@0 {
+			compatible = "st,fdma";
+			reg = <0xfe2c0000 0x20000>;
+			interrupts = <GIC_SPI 172 IRQ_TYPE_NONE>;
+			hw-conf = <&fdma_hw_config>;
+			fw-regs = <&fdma_fw_regs>;
+			xbar = <0>;
+			fw-name = "fdma_STiD127_0.elf";
+			clocks = <&CLK_S_A0_HS0 CLK_FDMA_0>,
+				 <&CLK_S_A0_LS CLK_IC_LP_HD>,
+				 <&CLK_S_A0_LS CLK_IC_DMA>,
+				 <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "fdma_slim",
+				      "fdma_hi",
+				      "fdma_low",
+				      "fdma_ic";
+		};
+
+		fdma1_mpe: fdma-mpe@1 {
+			compatible = "st,fdma";
+			reg = <0xfe2e0000 0x20000>;
+			interrupts = <GIC_SPI 176 IRQ_TYPE_NONE>;
+			hw-conf = <&fdma_hw_config>;
+			fw-regs = <&fdma_fw_regs>;
+			xbar = <0>;
+			fw-name = "fdma_STiD127_1.elf";
+			clocks = <&CLK_S_A0_HS0 CLK_FDMA_1>,
+				 <&CLK_S_A0_LS CLK_IC_LP_HD>,
+				 <&CLK_S_A0_LS CLK_IC_DMA>,
+				 <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "fdma_slim",
+				      "fdma_hi",
+				      "fdma_low",
+				      "fdma_ic";
+		};
+
+		fdma2_mpe: fdma-mpe@2 {
+			compatible = "st,fdma";
+			reg = <0xfeb80000 0x20000>;
+			interrupts = <GIC_SPI 180 IRQ_TYPE_NONE>;
+			hw-conf = <&fdma_hw_config>;
+			fw-regs = <&fdma_fw_regs>;
+			xbar = <0>;
+			fw-name = "fdma_STiD127_2.elf";
+			clocks = <&CLOCKGEN_TEL CLK_FDMA_TEL>,
+				 <&CLK_S_A0_LS CLK_IC_LP_ETH>,
+				 <&CLK_S_A0_LS CLK_IC_ROUTER>,
+				 <&CLK_S_A0_LS CLK_IC_LP_ETH>;
+			clock-names = "fdma_slim",
+				      "fdma_hi",
+				      "fdma_low",
+				      "fdma_ic";
+		};
+
+		/* FSM */
+		spifsm:	spifsm@fe302000 {
+			compatible = "st,spi-fsm";
+			reg = <0xfe302000 0x1000>;
+			reg-names = "spi-fsm";
+			clocks = <&CLK_S_A0_LS CLK_IC_SPI>;
+			clock-names = "emi_clk";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_fsm>;
+			st,syscfg = <&syscfg_west>;
+			st,boot-device-reg = <0xd8>;
+			st,boot-device-spi = <0x68>;
+			st,boot-device-msk = <0x7c>;
+			caps-handle = <&fsm_caps>;
+
+			status = "disabled";
+
+			fsm_caps: fsm-caps {
+				no-read-repeat;
+				no-write-repeat;
+				read-status-clkdiv4;
+				dual-mode;	/* DUAL mode */
+				quad-mode;	/* QUAD mode */
+			};
+		};
+
+		/* sysconfig for TELSS */
+		syscfg_telss_glue: telss-glue-syscfg@0xfeba8000 {
+			compatible = "syscon";
+			reg = <0xfeba8000 0x1000>;
+			holes = <0x0 0x24
+				 0x38 0xc8
+				 0x104 0xefc>;
+		};
+
+		/* fake gpio to control TELSS Glue Ext RST */
+		fakegpio_telss_rst: test-fakegpio-telss-rst-controller {
+			#gpio-cells = <2>;
+			gpio-controller;
+			compatible = "st,fake-gpio";
+			st,syscfg = <&syscfg_telss_glue 0x2c 4>;
+		};
+
+		/* fake gpio to control TELSS Glue Ext CS */
+		fakegpio_telss_cs: test-fakegpio-telss-cs-controller {
+			#gpio-cells = <2>;
+			gpio-controller;
+			compatible = "st,fake-gpio";
+			st,syscfg = <&syscfg_telss_glue 0x30 4>;
+		};
+
+		/* TELSS external CODEC-SLIC Lantiq */
+		duslic_dxt: duslic-dxt{
+			compatible = "st,duslic_dxt";
+			/* GPIO config for external CODEC-SLIC: interrupt, reset */
+			gpios = <&PIO17 2 0>, <&PIO16 7 0>;
+		};
+
+		/* TELSS CODEC-SLIC ZSI */
+		slic_zsi: slic-zsi{
+			compatible = "st,slic_zsi";
+			interrupts = <GIC_SPI 137 IRQ_TYPE_NONE>;
+			/* GPIO config for external CODEC-SLIC: reset */
+			gpios = <&fakegpio_telss_rst 2 0>;
+		};
+
+		/* TELSS SPI */
+		telss_spi0: telss-spi0{
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0xfeba7000 0x110>;
+			interrupts = <GIC_SPI 143 IRQ_TYPE_NONE>;
+			clocks = <&CLK_S_A0_LS CLK_IC_LP_HD>;
+			clock-names = "ssc";
+			cs-gpios = <&PIO17 1 0>, <&fakegpio_telss_cs 2 0>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_telss_spi0>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			/* CODEC-SLIC Lantiq device SPI */
+			slic_lantiq_spi0: slic-lantiq-spi0@0{
+				compatible = "spicore_codec_slic_lantiq";
+				status = "okay";
+				reg = <0>;
+				spi-max-frequency = <4000000>;
+				spi-cpha;
+				spi-cpol;
+			};
+			/* CODEC-SLIC ZSI device SPI */
+			zsi_spi0: zsi-spi0@0{
+				compatible = "spicore_codec_slic_zsi";
+				status = "okay";
+				reg = <1>;
+				spi-max-frequency = <100000>;
+				spi-cpol;
+			};
+		};
+
+		snd_tdm_player0: snd-uni-tdm@0xfeba4000 {
+			compatible = "st,snd_uni_tdm";
+			status = "disabled";
+			reg = <0xfeba4000 0x150>;
+			interrupts = <GIC_SPI 145 IRQ_TYPE_NONE>;
+			description = "Uni TDM Player #0";
+			version	= <0>;
+			card-device = <0xffffffff>;
+			dmas = <&fdma2_mpe>;
+			fdma-name = "stm-fdma.2";
+			fdma-channel = <1>;
+			fdma-initiator = <1>;
+			fdma-direction = "DMA_MEM_TO_DEV";
+			fdma-direct-conn = <1>;
+			fdma-request-line = <30>;
+			rising-edge = <1>;
+			clocks = <&CLOCKGEN_TEL CLK_ZSI>, <&CLOCKGEN_CCM_TEL CLK_ZSI_APPL>;
+			clock-names = "telss_zsi_clk", "uniperif_tdm_pclk";
+			telss-zsi-clk-rate = <49152000>;
+			frame-count = <80>;
+			max-periods = <10>;
+			pinctrl-names = "LANTIQ", "ZSI";
+			pinctrl-0 = <&pinctrl_lantiq_duslic_player0>;
+			pinctrl-1 = <&pinctrl_zsi_player0>;
+			hw-config-names = "LANTIQ", "ZSI";
+			hw-config = <&snd_tdm_lantiq_duslic_config>, <&snd_tdm_zsi_config>;
+			telss-glue = <&snd_telss_glue>;
+		};
+
+		snd_tdm_reader0: snd-uni-tdm@0xfeba5000 {
+			compatible = "st,snd_uni_tdm";
+			status = "disabled";
+			reg = <0xfeba5000 0x150>;
+			interrupts = <GIC_SPI 146 IRQ_TYPE_NONE>;
+			description = "Uni TDM Reader #0";
+			version	= <0>;
+			card-device = <0xffffffff>;
+			dmas = <&fdma2_mpe>;
+			fdma-name = "stm-fdma.2";
+			fdma-channel = <2>;
+			fdma-initiator = <1>;
+			fdma-direction = "DMA_DEV_TO_MEM";
+			fdma-direct-conn = <1>;
+			fdma-request-line = <29>;
+			rising-edge = <0>;
+			frame-count = <80>;
+			max-periods = <10>;
+			pinctrl-names = "LANTIQ", "ZSI";
+			pinctrl-0 = <&pinctrl_lantiq_duslic_reader0>;
+			pinctrl-1 = <&pinctrl_zsi_reader0>;
+			hw-config-names = "LANTIQ", "ZSI";
+			hw-config = <&snd_tdm_lantiq_duslic_config>, <&snd_tdm_zsi_config>;
+			telss-glue = <&snd_telss_glue>;
+		};
+
+		snd_telss_glue: snd-telss-glue {
+			compatible = "st,snd_telss_glue";
+			status = "okay";
+			reg = <0xfeba8000 0x1000>;
+			version = <0>;
+			mode = "LANTIQ";
+			loopback = <0>;
+		};
+
+		/* STM3 System Trace Port */
+		stm_systrace: systrace@fe260000 {
+			compatible = "st,systrace-ipv3";
+			reg = <0xFE260000 0x10000>,
+			      <0xFE270000 0x1000>;
+			reg-names = "stm-systrace-channels",
+				    "stm-systrace-conf";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_systrace_default>;
+
+			/* STM IP v3 configuration */
+			systrace-phy-config {
+				stm_reg0 { /* fck = 25Mhz */
+					nam = "STM_CR";
+					ofs = <0x0000>;
+					val = <0x0200>;
+				};
+				stm_reg1 {
+					nam = "STM_MCR";
+					ofs = <0x0008>;
+					val = <0x0000>;
+				};
+				stm_reg2 { /* Enable all initiators */
+					nam = "STM_TER";
+					ofs = <0x0010>;
+					val = <0x03ff>;
+				};
+				stm_reg3 { /* ASYNC period (ftr) */
+					nam = "STM_FTR";
+					ofs = <0x0080>;
+					val = <1>;
+				};
+				stm_reg4 { /* ASYNC period (ctr) */
+					nam = "STM_CTR";
+					ofs = <0x0088>;
+					val = <1>;
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid325-b2212.dts b/arch/arm/boot/dts/stid325-b2212.dts
--- a/arch/arm/boot/dts/stid325-b2212.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid325-b2212.dts	2019-09-26 21:23:27.096619100 +0100
@@ -0,0 +1,19 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stid325-b22xx.dtsi"
+/ {
+	model = "STiD325 HVK CADIX2 DDR4";
+	compatible = "st,stid325-b2212", "st,stid325";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x80000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid325-b2235.dts b/arch/arm/boot/dts/stid325-b2235.dts
--- a/arch/arm/boot/dts/stid325-b2235.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid325-b2235.dts	2019-09-26 21:23:27.096619100 +0100
@@ -0,0 +1,86 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stid325-b22xx.dtsi"
+/ {
+	model = "STiD325 HDK CADIX1 DDR4";
+	compatible = "st,stid325-b2235", "st,stid325";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x40000000>;
+	};
+
+	soc {
+		/* Voltage measurement (for debugging) */
+		i2c0: i2c0@08a40000 {
+			status = "okay";
+		};
+
+		/* MoCA */
+		i2c1: i2c1@08a41000 {
+			status = "okay";
+		};
+
+		/* FST XCVR */
+		i2c2: i2c2@a190000 {
+			status = "okay";
+		};
+
+		/* Debug purpose */
+		i2c3: i2c3@a1a0000 {
+			status = "okay";
+		};
+
+		/* Battery */
+		i2c4: i2c4@a1b0000 {
+			status = "okay";
+		};
+
+		mmc0: sdhci@1e600000 {
+			status = "okay";
+		};
+
+		nandbch: nand-bch {
+			status = "okay";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		/* MT29F4G08ABAEAH4 */
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>;	/* delay in us */
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid325-b2236.dts b/arch/arm/boot/dts/stid325-b2236.dts
--- a/arch/arm/boot/dts/stid325-b2236.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid325-b2236.dts	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,86 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stid325-b22xx.dtsi"
+/ {
+	model = "STiD325 HDK CADIX1 DDR3";
+	compatible = "st,stid325-b2236", "st,stid325";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x40000000>;
+	};
+
+	soc {
+		/* Voltage measurement (for debugging) */
+		i2c0: i2c0@08a40000 {
+			status = "okay";
+		};
+
+		/* MoCA */
+		i2c1: i2c1@08a41000 {
+			status = "okay";
+		};
+
+		/* FST XCVR */
+		i2c2: i2c2@a190000 {
+			status = "okay";
+		};
+
+		/* Debug purpose */
+		i2c3: i2c3@a1a0000 {
+			status = "okay";
+		};
+
+		/* Battery */
+		i2c4: i2c4@a1b0000 {
+			status = "okay";
+		};
+
+		mmc0: sdhci@1e600000 {
+			status = "okay";
+		};
+
+		nandbch: nand-bch {
+			status = "okay";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		/* MT29F4G08ABAEAH4 */
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>;	/* delay in us */
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid325-b2239.dts b/arch/arm/boot/dts/stid325-b2239.dts
--- a/arch/arm/boot/dts/stid325-b2239.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid325-b2239.dts	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,86 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stid325-b22xx.dtsi"
+/ {
+	model = "STiD325 HDK CADIX2 DDR3";
+	compatible = "st,stid325-b2239", "st,stid325";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x40000000>;
+	};
+
+	soc {
+		/* Voltage measurement (for debugging) */
+		i2c0: i2c0@08a40000 {
+			status = "okay";
+		};
+
+		/* MoCA */
+		i2c1: i2c1@08a41000 {
+			status = "okay";
+		};
+
+		/* FST XCVR */
+		i2c2: i2c2@a190000 {
+			status = "okay";
+		};
+
+		/* Debug purpose */
+		i2c3: i2c3@a1a0000 {
+			status = "okay";
+		};
+
+		/* Battery */
+		i2c4: i2c4@a1b0000 {
+			status = "okay";
+		};
+
+		mmc0: sdhci@1e600000 {
+			status = "okay";
+		};
+
+		nandbch: nand-bch {
+			status = "okay";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		/* MT29F4G08ABAEAH4 */
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>;	/* delay in us */
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid325-b22xx.dtsi b/arch/arm/boot/dts/stid325-b22xx.dtsi
--- a/arch/arm/boot/dts/stid325-b22xx.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid325-b22xx.dtsi	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,52 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Carmelo Amoroso <carmelo.amoroso@st.com>
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stid325.dtsi"
+
+/ {
+	chosen {
+		bootargs = "console=ttyAS0,115200 lpj=1994752 earlyprintk initcall_debug ignore_loglevel";
+		linux,stdout-path = &serial0;
+	};
+
+	aliases {
+		ttyAS0 = &serial0;
+		miphy0 = &miphy28lp_phy0;
+	};
+
+	soc {
+		serial0: serial0@08a30000 {
+			status = "okay";
+		};
+
+		miphy28lp_phy0: miphy28lp@0 {
+			st,sata_gen = "gen3";
+			status = "okay";
+		};
+
+		/* Note: external power is needed for SATA device */
+		sata0: sata@16300000 {
+			status = "okay";
+		};
+
+		st_dwc3_0_glue: dwc3@16104000 {
+			status = "okay";
+		};
+
+		/* Front panel LEDs management */
+		pwm0: pwm@0a160000 {
+			status = "okay";
+		};
+
+		pwm1: pwm@0a170000 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid325-clk-refs.h b/arch/arm/boot/dts/stid325-clk-refs.h
--- a/arch/arm/boot/dts/stid325-clk-refs.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid325-clk-refs.h	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,84 @@
+/*
+ * This header for constants clk index STMicroelectronics
+ * STiD325 SoC.
+ */
+#ifndef _DT_BINDINGS_CLK_STID325
+#define _DT_BINDINGS_CLK_STID325
+
+/* CLOCKGEN B0 */
+#define CLK_ST40		CLK_S_B0_FLEXGEN 0
+#define CLK_ST231		CLK_S_B0_FLEXGEN 1
+#define CLK_ICN_CPU		CLK_S_B0_FLEXGEN 2
+#define CLK_ICN_L0L1		CLK_S_B0_FLEXGEN 3
+#define CLK_ICN_ST231_40	CLK_S_B0_FLEXGEN 4
+#define CLK_ICN_REG_0		CLK_S_B0_FLEXGEN 6
+#define CLK_ATCLK		CLK_S_B0_FLEXGEN 7
+#define CLK_TRACE		CLK_S_B0_FLEXGEN 8
+#define CLK_EXT_A5X		CLK_S_B0_FLEXGEN 9
+#define CLK_TIMER_A5X		CLK_S_B0_FLEXGEN 10
+#define CLK_TIMER_LPC		CLK_S_B0_FLEXGEN 11
+#define CLK_DDR4SS_0_EXT	CLK_S_B0_FLEXGEN 12
+#define CLK_PMB_A5X		CLK_S_B0_FLEXGEN 13
+#define CLK_PROMIP_CPU		CLK_S_B0_FLEXGEN 14
+#define CLK_30_SATA		CLK_S_B0_FLEXGEN 16
+#define CLK_200_SATA		CLK_S_B0_FLEXGEN 17
+
+/* CLOCKGEN B1 */
+#define CLK_SLIM_CC		CLK_S_B1_FLEXGEN 0
+#define CLK_ICN_BD		CLK_S_B1_FLEXGEN 1
+#define CLK_MMC_0		CLK_S_B1_FLEXGEN 2
+#define CLK_SPI			CLK_S_B1_FLEXGEN 3
+#define CLK_SC			CLK_S_B1_FLEXGEN 4
+#define CLK_ICN_REG_2		CLK_S_B1_FLEXGEN 5
+#define CLK_PROC_STFE		CLK_S_B1_FLEXGEN 6
+#define CLK_TSOUT_0		CLK_S_B1_FLEXGEN 7
+#define CLK_TSOUT_1		CLK_S_B1_FLEXGEN 8
+#define CLK_PROMIP_MAC		CLK_S_B1_FLEXGEN 9
+#define CLK_ICN_CCL2		CLK_S_B1_FLEXGEN 10
+#define CLK_ICN_TS		CLK_S_B1_FLEXGEN 11
+#define CLK_FDMA		CLK_S_B1_FLEXGEN 12
+#define CLK_FLASH		CLK_S_B1_FLEXGEN 13
+#define CLK_NAND		CLK_S_B1_FLEXGEN 14
+#define CLK_MMC_1		CLK_S_B1_FLEXGEN 15
+#define CLK_ICN_LPM		CLK_S_B1_FLEXGEN 16
+#define CLK_BACKUP_TO_CLKGEN_D_1	CLK_S_B1_FLEXGEN 17
+
+/* CLOCKGEN D0 */
+#define CLK_TELSS_FDMA		CLK_S_D0_FLEXGEN 0
+#define CLK_PROC_FP3		CLK_S_D0_FLEXGEN 1
+#define CLK_ICN_HSIF_NET	CLK_S_D0_FLEXGEN 2
+#define CLK_32KB_HSIF		CLK_S_D0_FLEXGEN 3
+#define CLK_ICN_REG_1		CLK_S_D0_FLEXGEN 4
+#define CLK_PCM_TELSS		CLK_S_D0_FLEXGEN 5
+#define CLK_ZARLINK		CLK_S_D0_FLEXGEN 6
+#define CLK_PROMIP_NTW		CLK_S_D0_FLEXGEN 7
+#define CLK_ETH0_PHYCLK_INT	CLK_S_D0_FLEXGEN 8
+#define CLK_ETH1_PHYCLK_INT	CLK_S_D0_FLEXGEN 9
+#define CLK_ETH2_PHYCLK_INT	CLK_S_D0_FLEXGEN 10
+#define CLK_250_TO_CLKGEN_D_1	CLK_S_D0_FLEXGEN 12
+
+/* CLOCKGEN D1 */
+#define CLK_CPU_ECM		CLK_S_D1_FLEXGEN 0
+#define CLK_LPC_DS31_PHY	CLK_S_D1_FLEXGEN 1
+#define CLK_ICN_DS		CLK_S_D1_FLEXGEN 2
+#define CLK_ICN_US		CLK_S_D1_FLEXGEN 3
+#define CLK_CMCI_DS		CLK_S_D1_FLEXGEN 4
+#define CLK_CMCI_US		CLK_S_D1_FLEXGEN 5
+#define CLK_D31RX		CLK_S_D1_FLEXGEN 6
+#define CLK_COMMON_216		CLK_S_D1_FLEXGEN 7
+#define CLK_COMMON_54		CLK_S_D1_FLEXGEN 8
+#define CLK_COMMON_PROC		CLK_S_D1_FLEXGEN 9
+#define CLK_IC_DS_OFDM		CLK_S_D1_FLEXGEN 10
+#define CLK_DS_BRG		CLK_S_D1_FLEXGEN 11
+#define CLK_US_BRG		CLK_S_D1_FLEXGEN 12
+#define CLK_DSOFDM_PACK_PROC	CLK_S_D1_FLEXGEN 13
+#define CLK_DS_MAC		CLK_S_D1_FLEXGEN 15
+#define CLK_US_MAC		CLK_S_D1_FLEXGEN 16
+#define CLK_DQAM_108		CLK_S_D1_FLEXGEN 17
+#define CLK_ICN_REG_3		CLK_S_D1_FLEXGEN 18
+#define CLK_ICN_REG_4		CLK_S_D1_FLEXGEN 19
+#define CLK_LP_TO_CLKGENB0	CLK_S_D1_FLEXGEN 20
+#define CLK_LP_TO_CLKGENB1	CLK_S_D1_FLEXGEN 21
+#define CLK_LP_TO_CLKGEND0	CLK_S_D1_FLEXGEN 22
+
+#endif
diff -urNp a/arch/arm/boot/dts/stid325-clock-veloce.dtsi b/arch/arm/boot/dts/stid325-clock-veloce.dtsi
--- a/arch/arm/boot/dts/stid325-clock-veloce.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid325-clock-veloce.dtsi	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,264 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics R&D Limited
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include "stid325-clk-refs.h"
+
+/ {
+	clocks {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges;
+		compatible = "st,stid325-clk", "simple-bus";
+
+		/*
+		 * Fixed 27MHz oscillator inputs to SoC
+		 */
+		CLK_SYSIN: CLK_SYSIN {
+			#clock-cells = <0>;
+			compatible = "fixed-clock";
+			clock-frequency = <27000000>;
+			clock-output-names = "CLK_SYSIN";
+		};
+
+		/*
+		 * Macro to ease defining all the clocks as fixed-frequency clocks
+		 * as temporary use of clocks by drivers, till clock-driver is available
+		 */
+		#define FIXED_CLKDEF(name,id,freq)	name: id { \
+								#clock-cells = <0>; \
+								compatible = "fixed-clock"; \
+								clock-frequency = <freq>; \
+								clock-output-names = #name; \
+							}
+
+		/*
+		 * Fixed clock added to act as parent for flexigen parents
+		 * for unused values in the multiplexer registers
+		 */
+		CLK_INVALID: CLK_INVALID {
+			#clock-cells = <0>;
+			compatible = "fixed-clock";
+			clock-frequency = <0>;
+			clock-output-names = "CLK_INVALID";
+		};
+
+
+		FIXED_CLKDEF(CLK_S_B0_FS0_CH0, CLK_S_B0_QUADFS@0, 600000000);
+		FIXED_CLKDEF(CLK_S_B0_FS0_CH1, CLK_S_B0_QUADFS@1, 500000000);
+		FIXED_CLKDEF(CLK_S_B0_FS0_CH2, CLK_S_B0_QUADFS@2, 0);
+		FIXED_CLKDEF(CLK_S_B0_FS0_CH3, CLK_S_B0_QUADFS@3, 100000000);
+		FIXED_CLKDEF(CLK_S_B0_FS0_VCO, CLK_S_B0_QUADFS@4, 0); /* FIXME */
+
+		CLK_S_B0: clockgenB@8010000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8010000 0x1000>;
+
+			FIXED_CLKDEF(CLK_S_B0_PLL0_ODF_0, CLK_S_B0_PLL0@0, 1400000000);
+			FIXED_CLKDEF(CLK_S_B0_PLL0_ODF_1, CLK_S_B0_PLL0@1, 1400000000);
+			FIXED_CLKDEF(CLK_S_B0_PLL0_ODF_2, CLK_S_B0_PLL0@2, 1400000000);
+			FIXED_CLKDEF(CLK_S_B0_PLL0_ODF_3, CLK_S_B0_PLL0@3, 1400000000);
+
+			CLK_S_B0_FLEXGEN: CLK_S_B0_FLEXGEN {
+				compatible = "st,flexgen";
+
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_B0_PLL0_ODF_0>,
+					 <&CLK_S_B0_PLL0_ODF_1>,
+					 <&CLK_S_B0_PLL0_ODF_2>,
+					 <&CLK_S_B0_PLL0_ODF_3>,
+					 <&CLK_S_B0_FS0_CH0>,
+					 <&CLK_S_B0_FS0_CH1>,
+					 <&CLK_S_B0_FS0_CH2>,
+					 <&CLK_S_B0_FS0_CH3>,
+					 <&CLK_S_B0_FS0_VCO>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_LP_TO_CLKGENB0>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_ST40",
+						     "CLK_ST231",
+						     "CLK_ICN_CPU",
+						     "CLK_ICN_L0L1",
+						     "CLK_ICN_ST231_40",
+						     "",
+						     "CLK_ICN_REG_0",
+						     "CLK_ATCLK",
+						     "CLK_TRACE",
+						     "CLK_EXT_A5X",
+						     "CLK_TIMER_A5X",
+						     "CLK_TIMER_LPC",
+						     "CLK_DDR4SS_0_EXT",
+						     "CLK_PMB_A5X",
+						     "CLK_PROMIP_CPU",
+						     "",
+						     "CLK_30_SATA",
+						     "CLK_200_SATA";
+			};
+		};
+
+
+		FIXED_CLKDEF(CLK_S_B1_FS0_CH0, CLK_S_B1_QUADFS@0, 333000000);
+		FIXED_CLKDEF(CLK_S_B1_FS0_CH1, CLK_S_B1_QUADFS@1, 250000000);
+		FIXED_CLKDEF(CLK_S_B1_FS0_CH2, CLK_S_B1_QUADFS@2, 108000000);
+		FIXED_CLKDEF(CLK_S_B1_FS0_CH3, CLK_S_B1_QUADFS@3, 150000000);
+		FIXED_CLKDEF(CLK_S_B1_FS0_VCO, CLK_S_B1_QUADFS@4, 0); /* FIXME */
+
+		CLK_S_B1: clockgenB@8020000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8020000 0x1000>;
+
+			FIXED_CLKDEF(CLK_S_B1_PLL0_ODF_0, CLK_S_B1_PLL0@0, 1200000000);
+			FIXED_CLKDEF(CLK_S_B1_PLL0_ODF_1, CLK_S_B1_PLL0@1, 1200000000);
+			FIXED_CLKDEF(CLK_S_B1_PLL0_ODF_2, CLK_S_B1_PLL0@2, 1200000000);
+			FIXED_CLKDEF(CLK_S_B1_PLL0_ODF_3, CLK_S_B1_PLL0@3, 1200000000);
+
+			CLK_S_B1_FLEXGEN: CLK_S_B1_FLEXGEN {
+				compatible = "st,flexgen";
+
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_B1_PLL0_ODF_0>,
+					 <&CLK_S_B1_PLL0_ODF_1>,
+					 <&CLK_S_B1_PLL0_ODF_2>,
+					 <&CLK_S_B1_PLL0_ODF_3>,
+					 <&CLK_S_B1_FS0_CH0>,
+					 <&CLK_S_B1_FS0_CH1>,
+					 <&CLK_S_B1_FS0_CH2>,
+					 <&CLK_S_B1_FS0_CH3>,
+					 <&CLK_S_B1_FS0_VCO>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_LP_TO_CLKGENB1>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_SLIM_CC",
+						     "CLK_ICN_BD",
+						     "CLK_MMC_0",
+						     "CLK_SPI",
+						     "CLK_SC",
+						     "CLK_ICN_REG_2",
+						     "CLK_PROC_STFE",
+						     "CLK_TSOUT_0",
+						     "CLK_TSOUT_1",
+						     "CLK_PROMIP_MAC",
+						     "CLK_ICN_CCL2",
+						     "CLK_ICN_TS",
+						     "CLK_FDMA",
+						     "CLK_FLASH",
+						     "CLK_NAND",
+						     "CLK_MMC_1",
+						     "CLK_ICN_LPM",
+						     "CLK_BACKUP_TO_CLKGEN_D_1";
+			};
+		};
+
+		FIXED_CLKDEF(CLK_S_D0_FS0_CH0, CLK_S_D0_QUADFS@0, 49152000);
+		FIXED_CLKDEF(CLK_S_D0_FS0_CH1, CLK_S_D0_QUADFS@1, 250000000);
+		FIXED_CLKDEF(CLK_S_D0_FS0_CH2, CLK_S_D0_QUADFS@2, 400000000);
+		FIXED_CLKDEF(CLK_S_D0_FS0_CH3, CLK_S_D0_QUADFS@3, 125000000);
+		FIXED_CLKDEF(CLK_S_D0_FS0_VCO, CLK_S_D0_QUADFS@4, 0); /* FIXME */
+
+		CLK_S_D0: clockgenD0@8030000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8030000 0x1000>;
+
+			CLK_S_D0_FLEXGEN: CLK_S_D0_FLEXGEN {
+				compatible = "st,flexgen";
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_D0_FS0_CH0>,
+					 <&CLK_S_D0_FS0_CH1>,
+					 <&CLK_S_D0_FS0_CH2>,
+					 <&CLK_S_D0_FS0_CH3>,
+					 <&CLK_INVALID>,
+					 <&CLK_S_D0_FS0_VCO>,
+					 <&CLK_INVALID>,
+					 <&CLK_LP_TO_CLKGEND0>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_TELSS_FDMA",
+						     "CLK_PROC_FP3",
+						     "CLK_ICN_HSIF_NET",
+						     "CLK_32KB_HSIF",
+						     "CLK_ICN_REG_1",
+						     "CLK_PCM_TELSS",
+						     "CLK_ZARLINK",
+						     "CLK_PROMIP_NTW",
+						     "CLK_ETH0_PHYCLK_INT",
+						     "CLK_ETH1_PHYCLK_INT",
+						     "CLK_ETH2_PHYCLK_INT",
+						     "",
+						     "CLK_250_TO_CLKGEN_D_1";
+			};
+		};
+
+		FIXED_CLKDEF(CLK_S_D1_FS0_CH0, CLK_S_D1_QUADFS@0, 432000000);
+		FIXED_CLKDEF(CLK_S_D1_FS0_CH1, CLK_S_D1_QUADFS@1, 409600000);
+		FIXED_CLKDEF(CLK_S_D1_FS0_CH2, CLK_S_D1_QUADFS@2, 270000000);
+		FIXED_CLKDEF(CLK_S_D1_FS0_CH3, CLK_S_D1_QUADFS@3, 360000000);
+		FIXED_CLKDEF(CLK_S_D1_FS0_VCO, CLK_S_D1_QUADFS@4, 0); /* FIXME */
+
+		CLK_S_D1: clockgenD1@8040000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8040000 0x1000>;
+
+			CLK_S_D1_FLEXGEN: CLK_S_D1_FLEXGEN {
+				compatible = "st,flexgen";
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_D1_FS0_CH0>,
+					 <&CLK_S_D1_FS0_CH1>,
+					 <&CLK_S_D1_FS0_CH2>,
+					 <&CLK_S_D1_FS0_CH3>,
+					 <&CLK_INVALID>,
+					 <&CLK_S_D1_FS0_VCO>,
+					 <&CLK_INVALID>,
+					 <&CLK_250_TO_CLKGEN_D_1>,
+					 <&CLK_BACKUP_TO_CLKGEN_D_1>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_CPU_ECM",
+						     "CLK_LPC_DS31_PHY",
+						     "CLK_ICN_DS",
+						     "CLK_ICN_US",
+						     "CLK_CMCI_DS",
+						     "CLK_CMCI_US",
+						     "CLK_D31RX",
+						     "CLK_COMMON_216",
+						     "CLK_COMMON_54",
+						     "CLK_COMMON_PROC",
+						     "CLK_IC_DS_OFDM",
+						     "CLK_DS_BRG",
+						     "CLK_US_BRG",
+						     "CLK_DSOFDM_PACK_PROC",
+						     "",
+						     "CLK_DS_MAC",
+						     "CLK_US_MAC",
+						     "CLK_DQAM_108",
+						     "CLK_ICN_REG_3",
+						     "CLK_ICN_REG_4",
+						     "CLK_LP_TO_CLKGENB0",
+						     "CLK_LP_TO_CLKGENB1",
+						     "CLK_LP_TO_CLKGEND0";
+			};
+		};
+
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid325-clock.dtsi b/arch/arm/boot/dts/stid325-clock.dtsi
--- a/arch/arm/boot/dts/stid325-clock.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid325-clock.dtsi	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,336 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics R&D Limited
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include "stid325-clk-refs.h"
+
+/ {
+	clocks {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges;
+		compatible = "st,stid325-clk", "simple-bus";
+
+		/*
+		 * Fixed 27MHz oscillator inputs to SoC
+		 */
+		CLK_SYSIN: CLK_SYSIN {
+			#clock-cells = <0>;
+			compatible = "fixed-clock";
+			clock-frequency = <27000000>;
+			clock-output-names = "CLK_SYSIN";
+		};
+
+		/*
+		 * Fixed clock added to act as parent for flexigen parents
+		 * for unused values in the multiplexer registers
+		 */
+		CLK_INVALID: CLK_INVALID {
+			#clock-cells = <0>;
+			compatible = "fixed-clock";
+			clock-frequency = <0>;
+			clock-output-names = "CLK_INVALID";
+		};
+
+		CLK_S_B0_QUADFS: CLK_S_B0_QUADFS {
+			compatible = "st,quadfs660-B", "st,quadfs";
+			reg = <0x8010000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_B0_FS0_CH0",
+					     "CLK_S_B0_FS0_CH1",
+					     "CLK_S_B0_FS0_CH2",
+					     "CLK_S_B0_FS0_CH3",
+					     "CLK_S_B0_FS0_VCO";
+		};
+
+		CLK_S_B0: clockgenB@8010000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8010000 0x1000>;
+
+			CLK_S_B0_PLL0: CLK_S_B0_PLL0 {
+				compatible = "st,plls-c32-bx", "st,clkgen-plls-c32";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_B0_PLL0_ODF_0",
+						     "CLK_S_B0_PLL0_ODF_1",
+						     "CLK_S_B0_PLL0_ODF_2",
+						     "CLK_S_B0_PLL0_ODF_3";
+			};
+
+			CLK_S_B0_FLEXGEN: CLK_S_B0_FLEXGEN {
+				compatible = "st,flexgen";
+
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_B0_PLL0 0>,
+					 <&CLK_S_B0_PLL0 1>,
+					 <&CLK_S_B0_PLL0 2>,
+					 <&CLK_S_B0_PLL0 3>,
+					 <&CLK_S_B0_QUADFS 0>,
+					 <&CLK_S_B0_QUADFS 1>,
+					 <&CLK_S_B0_QUADFS 2>,
+					 <&CLK_S_B0_QUADFS 3>,
+					 <&CLK_S_B0_QUADFS 4>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_LP_TO_CLKGENB0>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_ST40",
+						     "CLK_ST231",
+						     "CLK_ICN_CPU",
+						     "CLK_ICN_L0L1",
+						     "CLK_ICN_ST231_40",
+						     "",
+						     "CLK_ICN_REG_0",
+						     "CLK_ATCLK",
+						     "CLK_TRACE",
+						     "CLK_EXT_A5X",
+						     "CLK_TIMER_A5X",
+						     "CLK_TIMER_LPC",
+						     "CLK_DDR4SS_0_EXT",
+						     "CLK_PMB_A5X",
+						     "CLK_PROMIP_CPU",
+						     "",
+						     "CLK_30_SATA",
+						     "CLK_200_SATA";
+			};
+		};
+
+		CLK_S_B1_QUADFS: CLK_S_B1_QUADFS {
+			compatible = "st,quadfs660-B", "st,quadfs";
+			reg = <0x8020000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_B1_FS0_CH0",
+					     "CLK_S_B1_FS0_CH1",
+					     "CLK_S_B1_FS0_CH2",
+					     "CLK_S_B1_FS0_CH3",
+					     "CLK_S_B1_FS0_VCO";
+		};
+
+		CLK_S_B1: clockgenB@8020000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8020000 0x1000>;
+
+			CLK_S_B1_PLL0: CLK_S_B1_PLL0 {
+				compatible = "st,plls-c32-bx", "st,clkgen-plls-c32";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_B1_PLL0_ODF_0",
+						     "CLK_S_B1_PLL0_ODF_1",
+						     "CLK_S_B1_PLL0_ODF_2",
+						     "CLK_S_B1_PLL0_ODF_3";
+			};
+
+			CLK_S_B1_FLEXGEN: CLK_S_B1_FLEXGEN {
+				compatible = "st,flexgen";
+
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_B1_PLL0 0>,
+					 <&CLK_S_B1_PLL0 1>,
+					 <&CLK_S_B1_PLL0 2>,
+					 <&CLK_S_B1_PLL0 3>,
+					 <&CLK_S_B1_QUADFS 0>,
+					 <&CLK_S_B1_QUADFS 1>,
+					 <&CLK_S_B1_QUADFS 2>,
+					 <&CLK_S_B1_QUADFS 3>,
+					 <&CLK_S_B1_QUADFS 4>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_LP_TO_CLKGENB1>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_SLIM_CC",
+						     "CLK_ICN_BD",
+						     "CLK_MMC_0",
+						     "CLK_SPI",
+						     "CLK_SC",
+						     "CLK_ICN_REG_2",
+						     "CLK_PROC_STFE",
+						     "CLK_TSOUT_0",
+						     "CLK_TSOUT_1",
+						     "CLK_PROMIP_MAC",
+						     "CLK_ICN_CCL2",
+						     "CLK_ICN_TS",
+						     "CLK_FDMA",
+						     "CLK_FLASH",
+						     "CLK_NAND",
+						     "CLK_MMC_1",
+						     "CLK_ICN_LPM",
+						     "CLK_BACKUP_TO_CLKGEN_D_1";
+			};
+		};
+
+		CLK_S_D0_QUADFS: CLK_S_D0_QUADFS {
+			compatible = "st,quadfs660-D", "st,quadfs";
+			reg = <0x8030000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D0_FS0_CH0",
+					     "CLK_S_D0_FS0_CH1",
+					     "CLK_S_D0_FS0_CH2",
+					     "CLK_S_D0_FS0_CH3",
+					     "CLK_S_D0_FS0_VCO";
+		};
+
+		CLK_S_D0: clockgenD0@8030000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8030000 0x1000>;
+
+			CLK_S_D0_FLEXGEN: CLK_S_D0_FLEXGEN {
+				compatible = "st,flexgen";
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_D0_QUADFS 0>,
+					 <&CLK_S_D0_QUADFS 1>,
+					 <&CLK_S_D0_QUADFS 2>,
+					 <&CLK_S_D0_QUADFS 3>,
+					 <&CLK_INVALID>,
+					 <&CLK_S_D0_QUADFS 4>,
+					 <&CLK_INVALID>,
+					 <&CLK_LP_TO_CLKGEND0>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_TELSS_FDMA",
+						     "CLK_PROC_FP3",
+						     "CLK_ICN_HSIF_NET",
+						     "CLK_32KB_HSIF",
+						     "CLK_ICN_REG_1",
+						     "CLK_PCM_TELSS",
+						     "CLK_ZARLINK",
+						     "CLK_PROMIP_NTW",
+						     "CLK_ETH0_PHYCLK_INT",
+						     "CLK_ETH1_PHYCLK_INT",
+						     "CLK_ETH2_PHYCLK_INT",
+						     "",
+						     "CLK_250_TO_CLKGEN_D_1";
+			};
+		};
+
+		CLK_S_D1_QUADFS: CLK_S_D1_QUADFS {
+			compatible = "st,quadfs660-D", "st,quadfs";
+			reg = <0x8040000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D1_FS0_CH0",
+					     "CLK_S_D1_FS0_CH1",
+					     "CLK_S_D1_FS0_CH2",
+					     "CLK_S_D1_FS0_CH3",
+					     "CLK_S_D1_FS0_VCO";
+		};
+
+		CLK_S_D1: clockgenD1@8040000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8040000 0x1000>;
+
+			CLK_S_D1_FLEXGEN: CLK_S_D1_FLEXGEN {
+				compatible = "st,flexgen";
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_D1_QUADFS 0>,
+					 <&CLK_S_D1_QUADFS 1>,
+					 <&CLK_S_D1_QUADFS 2>,
+					 <&CLK_S_D1_QUADFS 3>,
+					 <&CLK_INVALID>,
+					 <&CLK_S_D1_QUADFS 4>,
+					 <&CLK_INVALID>,
+					 <&CLK_250_TO_CLKGEN_D_1>,
+					 <&CLK_BACKUP_TO_CLKGEN_D_1>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_CPU_ECM",
+						     "CLK_LPC_DS31_PHY",
+						     "CLK_ICN_DS",
+						     "CLK_ICN_US",
+						     "CLK_CMCI_DS",
+						     "CLK_CMCI_US",
+						     "CLK_D31RX",
+						     "CLK_COMMON_216",
+						     "CLK_COMMON_54",
+						     "CLK_COMMON_PROC",
+						     "CLK_IC_DS_OFDM",
+						     "CLK_DS_BRG",
+						     "CLK_US_BRG",
+						     "CLK_DSOFDM_PACK_PROC",
+						     "",
+						     "CLK_DS_MAC",
+						     "CLK_US_MAC",
+						     "CLK_DQAM_108",
+						     "CLK_ICN_REG_3",
+						     "CLK_ICN_REG_4",
+						     "CLK_LP_TO_CLKGENB0",
+						     "CLK_LP_TO_CLKGENB1",
+						     "CLK_LP_TO_CLKGEND0";
+			};
+		};
+
+		/*
+		 * A53 PLL.
+		 *
+		 */
+		clockgenA53 {
+			compatible = "st,clkgen-c32";
+			reg = <0x6E50000 0x1000>;
+
+			CLOCKGEN_A53_PLL: CLOCKGEN_A53_PLL {
+				compatible = "st,plls-c28-a5x", "st,clkgen-plls-c32";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLOCKGEN_A53_PLL_ODF";
+			};
+		};
+
+		/*
+		 * ARM CPU related clocks.
+		 */
+		CLK_M_A53: CLK_M_A53 {
+			compatible = "st,clkgen-a5x-pll-mux", "st,clkgen-mux";
+			#clock-cells = <0>;
+			reg = <0x6E50000 0x4>;
+			clocks = <&CLOCKGEN_A53_PLL 0>,
+				 <&CLK_M_A53_EXT2F>;
+		};
+
+		CLK_M_A53_EXT2F: CLK_M_A53_EXT2F {
+			compatible = "st,clkgen-a5x-ext-mux", "st,clkgen-mux";
+			#clock-cells = <0>;
+			reg = <0x6E50000 0x4>;
+			clocks = <&CLK_M_A53_EXT2F_DIV2>,
+				 <&CLK_EXT_A5X>;
+		};
+
+		CLK_M_A53_EXT2F_DIV2: CLK_M_A53_EXT2F_DIV2S {
+			compatible = "fixed-factor-clock";
+
+			#clock-cells = <0>;
+			clock-output-names = "CLK_M_A53_EXT2F_DIV2";
+			clocks = <&CLK_EXT_A5X>;
+			clock-div = <2>;
+			clock-mult = <1>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid325-pinctrl.dtsi b/arch/arm/boot/dts/stid325-pinctrl.dtsi
--- a/arch/arm/boot/dts/stid325-pinctrl.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid325-pinctrl.dtsi	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,906 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics Limited.
+ * Author: Carmelo Amoroso <carmelo.amoroso@st.com>
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+
+#include <dt-bindings/pinctrl/st-pincfg.h>
+#include <dt-bindings/interrupt-controller/arm-gic.h>
+
+/ {
+	aliases {
+		/* PIOs for FC_BACKBONE */
+
+		/* PIOs WEST Partition: 0-7 */
+		gpio0 = &PIO0;
+		gpio1 = &PIO1;
+		gpio2 = &PIO2;
+		gpio3 = &PIO3;
+		gpio4 = &PIO4;
+		gpio5 = &PIO5;
+		gpio6 = &PIO6;
+		gpio7 = &PIO7;
+
+		/* PIOs NORTH_LEFT Partition: 10-12 */
+		gpio8 = &PIO10;
+		gpio9 = &PIO11;
+		gpio10 = &PIO12;
+
+		/* PIOs NORTH_RIGHT Partition: 20-24 */
+		gpio11 = &PIO20;
+		gpio12 = &PIO21;
+		gpio13 = &PIO22;
+		gpio14 = &PIO23;
+		gpio15 = &PIO24;
+
+		/* PIOs EAST Partition: 30-37 */
+		gpio16 = &PIO30;
+		gpio17 = &PIO31;
+		gpio18 = &PIO32;
+		gpio19 = &PIO33;
+		gpio20 = &PIO34;
+		gpio21 = &PIO35;
+		gpio22 = &PIO36;
+		gpio23 = &PIO37;
+
+		/* PIOs SOUTH FLASH: 40-42 */
+		gpio24 = &PIO40;
+		gpio25 = &PIO41;
+		gpio26 = &PIO42;
+
+		/* PIOs SD Partition: 50-51 */
+		gpio27 = &PIO50;
+		gpio28 = &PIO51;
+	};
+
+	soc {
+		/* FC_BACKBONE PIO_WEST */
+		pin-controller-west {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stid325-west-pinctrl";
+			st,syscfg = <&syscfg_pio_west>;
+			ranges = <0 0x08200000 0x8000>;
+			reg = <0x0820f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 185 IRQ_TYPE_NONE>;
+			interrupts-names = "irqmux";
+
+			PIO0: PIO@08200000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO0";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO1: PIO@08201000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO1";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO2: PIO@08202000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO2";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO3: PIO@08203000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO3";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO4: PIO@08204000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO4";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO5: PIO@08205000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x5000 0x100>;
+				st,bank-name = "PIO5";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO6: PIO@08206000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x6000 0x100>;
+				st,bank-name = "PIO6";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO7: PIO@08207000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x7000 0x100>;
+				st,bank-name = "PIO7";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			serial3 {
+				pinctrl_serial3: serial3-0 {
+					st,pins {
+						tx = <&PIO7 0 ALT1 OUT>;
+						rx = <&PIO7 1 ALT1 IN>;
+					};
+				};
+			};
+
+			/* RGMII 1,2*/
+			fp3 {
+				pinctrl_rgmii1: rgmii1-0 {
+					st,pins {
+						txd0 = <&PIO0 0 ALT1 OUT DE_IO 0 CLK_A>;
+						txd1 = <&PIO0 1 ALT1 OUT DE_IO 0 CLK_A>;
+						txd2 = <&PIO0 2 ALT1 OUT DE_IO 0 CLK_A>;
+						txd3 = <&PIO0 3 ALT1 OUT DE_IO 0 CLK_A>;
+						txctl = <&PIO0 4 ALT1 OUT NICLK 0 CLK_A>;
+						txclk = <&PIO0 5 ALT1 OUT NICLK 0 CLK_A>;
+						rxd0 = <&PIO0 6 ALT1 IN DE_IO 0 CLK_A>;
+						rxd1 = <&PIO0 7 ALT1 IN DE_IO 0 CLK_A>;
+						rxd2 = <&PIO1 0 ALT1 IN DE_IO 0 CLK_A>;
+						rxd3 = <&PIO1 1 ALT1 IN DE_IO 0 CLK_A>;
+						rxctl = <&PIO1 2 ALT1 IN DE_IO 0 CLK_A>;
+						rxclk = <&PIO1 3 ALT1 IN NICLK 0 CLK_A>;
+						phyclk = <&PIO1 4 ALT1 OUT NICLK 0 CLK_B>;
+					};
+				};
+				pinctrl_rgmii2: rgmii2-0 {
+					st,pins {
+						mdio = <&PIO1 5 ALT1 BIDIR BYPASS 0>;
+						mdc = <&PIO1 6 ALT1 OUT NICLK 0 CLK_A>;
+						mdint = <&PIO1 7 ALT1 IN DE_IO 0 CLK_A>;
+						txd0 = <&PIO2 0 ALT1 OUT DE_IO 0 CLK_A>;
+						txd1 = <&PIO2 1 ALT1 OUT DE_IO 0 CLK_A>;
+						txd2 = <&PIO2 2 ALT1 OUT DE_IO 0 CLK_A>;
+						txd3 = <&PIO2 3 ALT1 OUT DE_IO 0 CLK_A>;
+						txctl = <&PIO2 4 ALT1 OUT NICLK 0 CLK_A>;
+						txclk = <&PIO2 5 ALT1 OUT NICLK 0 CLK_A>;
+						rxd0 = <&PIO2 6 ALT1 IN DE_IO 0 CLK_A>;
+						rxd1 = <&PIO2 7 ALT1 IN DE_IO 0 CLK_A>;
+						rxd2 = <&PIO3 0 ALT1 IN DE_IO 0 CLK_A>;
+						rxd3 = <&PIO3 1 ALT1 IN DE_IO 0 CLK_A>;
+						rxctl = <&PIO3 2 ALT1 IN DE_IO 0 CLK_A>;
+						rxclk = <&PIO3 3 ALT1 IN NICLK 0 CLK_A>;
+						phyclk = <&PIO3 4 ALT1 OUT NICLK 0 CLK_B>;
+					};
+				};
+			};
+
+			i2c6 {
+				pinctrl_i2c6_default: i2c6-default {
+					st,pins {
+						sda = <&PIO5 6 ALT1 BIDIR>;
+						scl = <&PIO5 5 ALT1 BIDIR>;
+					};
+				};
+			};
+			spi6 {
+				pinctrl_spi6_default: spi6-default {
+					st,pins {
+						mtsr = <&PIO5 6 ALT1 BIDIR>;
+						mrst = <&PIO5 7 ALT1 BIDIR>;
+						scl = <&PIO5 5 ALT1 BIDIR>;
+					};
+				};
+			};
+			i2c7 {
+				pinctrl_i2c7_default: i2c7-default {
+					st,pins {
+						sda = <&PIO5 3 ALT1 BIDIR>;
+						scl = <&PIO5 2 ALT1 BIDIR>;
+					};
+				};
+			};
+			spi7 {
+				pinctrl_spi7_default: spi7-default {
+					st,pins {
+						mtsr = <&PIO6 3 ALT1 BIDIR>;
+						mrst = <&PIO6 4 ALT1 BIDIR>;
+						scl = <&PIO6 2 ALT1 BIDIR>;
+					};
+				};
+			};
+			i2c8 {
+				pinctrl_i2c8_default: i2c8-default {
+					st,pins {
+						sda = <&PIO6 6 ALT1 BIDIR>;
+						scl = <&PIO6 5 ALT1 BIDIR>;
+					};
+				};
+			};
+			spi8 {
+				pinctrl_spi8_default: spi8-default {
+					st,pins {
+						mtsr = <&PIO6 6 ALT1 BIDIR>;
+						mrst = <&PIO6 7 ALT1 BIDIR>;
+						scl = <&PIO6 5 ALT1 BIDIR>;
+					};
+				};
+			};
+		};
+
+		/* FC_BACKBONE PIO_NORTH_LEFT */
+		pin-controller-north-left {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stid325-north-left-pinctrl";
+			st,syscfg = <&syscfg_pio_north_left>;
+			ranges = <0 0x08210000 0x3000>;
+			reg = <0x0821f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 183 IRQ_TYPE_NONE>;
+			interrupts-names = "irqmux";
+
+			PIO10: PIO@08210000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO10";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO11: PIO@08211000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO11";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO12: PIO@08212000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO12";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			telss_spi0 {
+				pinctrl_telss_spi0: telss_spi0 {
+					st,pins {
+						tel-spi-clk = <&PIO11 1 ALT1 OUT>;
+						tel-spi-mosi = <&PIO11 2 ALT1 OUT>;
+						tel-spi-miso = <&PIO11 3 ALT1 IN>;
+					};
+				};
+			};
+
+			snd_tdm_player0 {
+				pinctrl_lantiq_duslic_player0: pinctrl-lantiq-duslic-player0 {
+					st,pins {
+						PCLK = <&PIO10 5 ALT1 OUT>;
+						DTX = <&PIO10 6 ALT1 OUT>;
+						FSYNC = <&PIO12 0 ALT2 OUT>;
+					};
+				};
+				pinctrl_zsi_0_player0: pinctrl-zsi-0-player0 {
+					st,pins {
+						PCLK = <&PIO11 7 ALT1 OUT>;
+						DTX = <&PIO12 1 ALT1 OUT>;
+						FSYNC = <&PIO12 0 ALT1 OUT>;
+					};
+				};
+				pinctrl_zsi_1_player0: pinctrl-zsi-1-player0 {
+					st,pins {
+						PCLK = <&PIO11 0 ALT2 OUT>;
+						DTX = <&PIO11 5 ALT2 OUT>;
+						FSYNC = <&PIO11 4 ALT2 OUT>;
+					};
+				};
+			};
+
+			snd_tdm_reader0 {
+				pinctrl_lantiq_duslic_reader0: pinctrl-lantiq-duslic-reader0 {
+					st,pins {
+						DRX = <&PIO10 7 ALT1 IN>;
+					};
+				};
+				pinctrl_zsi_0_reader0: pinctrl-zsi-0-reader0 {
+					st,pins {
+						DRX = <&PIO12 2 ALT1 IN>;
+					};
+				};
+				pinctrl_zsi_1_reader0: pinctrl-zsi-1-reader0 {
+					st,pins {
+						DRX = <&PIO11 6 ALT2 IN>;
+					};
+				};
+			};
+
+			serial2 {
+				pinctrl_serial2: serial2-0 {
+					st,pins {
+						tx = <&PIO12 3 ALT1 OUT>;
+						rx = <&PIO12 4 ALT1 IN>;
+					};
+				};
+			};
+
+			usb3_0 {
+				pinctrl_usb3_0: usb3_0-0 {
+					st,pins {
+						oc-detect = <&PIO12 5 ALT1 IN>;
+						pwr-enable = <&PIO12 6 ALT1 OUT>;
+					};
+				};
+			};
+		};
+
+		/* FC_BACKBONE PIO_NORTH_RIGHT */
+		pin-controller-north-right {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stid325-north-right-pinctrl";
+			st,syscfg = <&syscfg_pio_north_right>;
+			ranges = <0 0x08220000 0x5000>;
+			reg = <0x0822f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 184 IRQ_TYPE_NONE>;
+			interrupts-names = "irqmux";
+
+			PIO20: PIO@08220000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO20";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO21: PIO@08221000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO21";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO22: PIO@08222000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO22";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO23: PIO@08223000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO23";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO24: PIO@08224000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO24";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			serial0 {
+				pinctrl_serial0: serial0-0 {
+					st,pins {
+						tx = <&PIO23 0 ALT1 OUT>;
+						rx = <&PIO23 1 ALT1 IN>;
+					};
+				};
+			};
+
+			/* RGMII 0 */
+			fp3 {
+				pinctrl_rgmii0: rgmii0-0 {
+					st,pins {
+						txd0 = <&PIO21 0 ALT1 OUT DE_IO 0 CLK_A>;
+						txd1 = <&PIO21 1 ALT1 OUT DE_IO 0 CLK_A>;
+						txd2 = <&PIO21 2 ALT1 OUT DE_IO 0 CLK_A>;
+						txd3 = <&PIO21 3 ALT1 OUT DE_IO 0 CLK_A>;
+						txctl = <&PIO21 4 ALT1 OUT NICLK 0 CLK_A>;
+						txclk = <&PIO21 5 ALT1 OUT NICLK 0 CLK_A>;
+						rxd0 = <&PIO21 6 ALT1 IN DE_IO 0 CLK_A>;
+						rxd1 = <&PIO21 7 ALT1 IN DE_IO 0 CLK_A>;
+						rxd2 = <&PIO22 0 ALT1 IN DE_IO 0 CLK_A>;
+						rxd3 = <&PIO22 1 ALT1 IN DE_IO 0 CLK_A>;
+						rxctl = <&PIO22 2 ALT1 IN DE_IO 0 CLK_A>;
+						rxclk = <&PIO22 3 ALT1 IN NICLK 0 CLK_A>;
+						phyclk = <&PIO22 4 ALT1 OUT NICLK 0 CLK_B>;
+						mdio = <&PIO22 5 ALT1 BIDIR BYPASS 0>;
+						mdc = <&PIO22 6 ALT1 OUT NICLK 0 CLK_A>;
+						mdint = <&PIO22 7 ALT1 IN DE_IO 0 CLK_A>;
+					};
+				};
+			};
+
+			/* LED Control for ETH PHY */
+			led_eth_phy {
+				pinctrl_led0: led0-0 {
+					st,pins {
+						blinkb = <&PIO20 0 ALT1 OUT>;
+						txrxb = <&PIO20 1 ALT1 OUT>;
+					};
+				};
+				pinctrl_led1: led1-0 {
+					st,pins {
+						blinkb = <&PIO20 2 ALT1 OUT>;
+						txrxb = <&PIO20 3 ALT1 OUT>;
+					};
+				};
+				pinctrl_led2: led2-0 {
+					st,pins {
+						blinkb = <&PIO20 4 ALT1 OUT>;
+						txrxb = <&PIO20 5 ALT1 OUT>;
+					};
+				};
+				pinctrl_led3: led3-0 {
+					st,pins {
+						blinkb = <&PIO20 6 ALT1 OUT>;
+						txrxb = <&PIO20 7 ALT1 OUT>;
+					};
+				};
+			};
+
+			i2c0 {
+				pinctrl_i2c0_default: i2c0-default {
+					st,pins {
+						sda = <&PIO23 5 ALT1 BIDIR>;
+						scl = <&PIO23 4 ALT1 BIDIR>;
+					};
+				};
+			};
+			spi0 {
+				pinctrl_spi0_default: spi0-default {
+					st,pins {
+						mtsr = <&PIO23 5 ALT1 BIDIR>;
+						mrst = <&PIO23 6 ALT1 BIDIR>;
+						scl = <&PIO23 4 ALT1 BIDIR>;
+					};
+				};
+			};
+			i2c1 {
+				pinctrl_i2c1_default: i2c1-default {
+					st,pins {
+						sda = <&PIO24 0 ALT1 BIDIR>;
+						scl = <&PIO23 7 ALT1 BIDIR>;
+					};
+				};
+			};
+			spi1 {
+				pinctrl_spi1_default: spi1-default {
+					st,pins {
+						mtsr = <&PIO24 0 ALT1 BIDIR>;
+						mrst = <&PIO24 1 ALT1 BIDIR>;
+						scl = <&PIO23 7 ALT1 BIDIR>;
+					};
+				};
+			};
+		};
+
+		/* FC_BACKBONE PIO_EAST */
+		pin-controller-east {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stid325-east-pinctrl";
+			st,syscfg = <&syscfg_pio_east>;
+			ranges = <0 0x08230000 0x8000>;
+			reg = <0x0823f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 186 IRQ_TYPE_NONE>;
+			interrupts-names = "irqmux";
+
+			PIO30: PIO@08230000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO30";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO31: PIO@08231000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO31";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO32: PIO@08232000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO32";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO33: PIO@08233000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO33";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO34: PIO@08234000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO34";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO35: PIO@08235000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x5000 0x100>;
+				st,bank-name = "PIO35";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO36: PIO@08236000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x6000 0x100>;
+				st,bank-name = "PIO36";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO37: PIO@08237000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x7000 0x100>;
+				st,bank-name = "PIO37";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			serial1 {
+				pinctrl_serial1: serial1-0 {
+					st,pins {
+						tx = <&PIO33 3 ALT1 OUT>;
+						rx = <&PIO33 4 ALT1 IN>;
+					};
+				};
+			};
+
+			pwm0 {
+				pinctrl_pwm0_chan0_default: pwm0-0-default {
+					st,pins {
+						pwm-out = <&PIO35 2 ALT1 OUT>;
+					};
+				};
+			};
+			pwm1 {
+				pinctrl_pwm1_chan0_default: pwm1-0-default {
+					st,pins {
+						pwm-out = <&PIO35 3 ALT1 OUT>;
+					};
+				};
+			};
+			pwm2 {
+				pinctrl_pwm2_chan0_default: pwm2-0-default {
+					st,pins {
+						pwm-out = <&PIO35 4 ALT1 OUT>;
+					};
+				};
+			};
+			pwm3 {
+				pinctrl_pwm3_chan0_default: pwm3-0-default {
+					st,pins {
+						pwm-out = <&PIO35 5 ALT1 OUT>;
+					};
+				};
+			};
+			pwm4 {
+				pinctrl_pwm4_chan0_default: pwm4-0-default {
+					st,pins {
+						pwm-out = <&PIO36 0 ALT1 OUT>;
+					};
+				};
+			};
+			pwm5 {
+				pinctrl_pwm5_chan0_default: pwm5-0-default {
+					st,pins {
+						pwm-out = <&PIO36 1 ALT1 OUT>;
+					};
+				};
+			};
+			pwm6 {
+				pinctrl_pwm6_chan0_default: pwm6-0-default {
+					st,pins {
+						pwm-out = <&PIO36 2 ALT1 OUT>;
+					};
+				};
+			};
+			pwm7 {
+				pinctrl_pwm7_chan0_default: pwm7-0-default {
+					st,pins {
+						pwm-out = <&PIO36 3 ALT1 OUT>;
+					};
+				};
+			};
+
+			i2c2 {
+				pinctrl_i2c2_default: i2c2-default {
+					st,pins {
+						sda = <&PIO33 6 ALT1 BIDIR>;
+						scl = <&PIO33 5 ALT1 BIDIR>;
+					};
+				};
+			};
+			spi2 {
+				pinctrl_spi2_default: spi2-default {
+					st,pins {
+						mtsr = <&PIO33 6 ALT1 BIDIR>;
+						mrst = <&PIO33 7 ALT1 BIDIR>;
+						scl = <&PIO33 5 ALT1 BIDIR>;
+					};
+				};
+			};
+			i2c3 {
+				pinctrl_i2c3_default: i2c3-default {
+					st,pins {
+						sda = <&PIO34 1 ALT1 BIDIR>;
+						scl = <&PIO34 0 ALT1 BIDIR>;
+					};
+				};
+			};
+			spi3 {
+				pinctrl_spi3_default: spi3-default {
+					st,pins {
+						mtsr = <&PIO34 1 ALT1 BIDIR>;
+						mrst = <&PIO34 2 ALT1 BIDIR>;
+						scl = <&PIO34 0 ALT1 BIDIR>;
+					};
+				};
+			};
+			i2c4 {
+				pinctrl_i2c4_default: i2c3-default {
+					st,pins {
+						sda = <&PIO34 4 ALT1 BIDIR>;
+						scl = <&PIO34 3 ALT1 BIDIR>;
+					};
+				};
+			};
+			spi4 {
+				pinctrl_spi4_default: spi4-default {
+					st,pins {
+						mtsr = <&PIO34 4 ALT1 BIDIR>;
+						mrst = <&PIO34 5 ALT1 BIDIR>;
+						scl = <&PIO34 3 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			keyscan {
+				pinctrl_keyscan: keyscan {
+					st,pins {
+						keyin0 = <&PIO37 0 ALT6 IN>;
+						keyin1 = <&PIO37 1 ALT4 IN>;
+						keyin2 = <&PIO37 2 ALT2 IN>;
+						keyin3 = <&PIO37 3 ALT2 IN>;
+						keyout0 = <&PIO37 4 ALT4 OUT>;
+						keyout1 = <&PIO37 5 ALT2 OUT>;
+						keyout2 = <&PIO37 6 ALT2 OUT>;
+						keyout3 = <&PIO37 7 ALT2 OUT>;
+					};
+				};
+			};
+		};
+
+		/* PIOs SOUTH FLASH: 40-42 */
+		pin-controller-flash {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stid325-flash-pinctrl";
+			st,syscfg = <&syscfg_pio_flash>;
+			ranges	 = <0 0x1e500000 0x3000>;
+			reg = <0x1e50f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 189 IRQ_TYPE_NONE>;
+			interrupts-names = "irqmux";
+
+			PIO40: PIO@1e500000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO40";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO41: PIO@1e501000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO41";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO42: PIO@1e502000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO42";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			/* MMC/SD from flashSS */
+			mmc1 {
+				pinctrl_sd1: sd1-0 {
+					st,pins {
+						sd_clk = <&PIO40 6 ALT2 BIDIR>;
+						sd_cmd = <&PIO40 7 ALT2 BIDIR>;
+						sd_d0 = <&PIO41 0 ALT2 BIDIR>;
+						sd_d1 = <&PIO41 1 ALT2 BIDIR>;
+						sd_d2 = <&PIO41 2 ALT2 BIDIR>;
+						sd_d3 = <&PIO41 3 ALT2 BIDIR>;
+						sd_led = <&PIO42 0 ALT2 BIDIR>;
+						sd_pwren = <&PIO42 2 ALT2 BIDIR>;
+						sd_vsel = <&PIO42 3 ALT2 BIDIR>;
+						sd_cd = <&PIO42 4 ALT2 BIDIR>;
+						sd_wp = <&PIO42 5 ALT2 BIDIR>;
+					};
+				};
+				pinctrl_emmc1: emmc1-1 {
+					st,pins {
+						emmc_clk = <&PIO40 6 ALT1 BIDIR>;
+						emmc_cmd = <&PIO40 7 ALT1 BIDIR>;
+						emmc_d0 = <&PIO41 0 ALT1 BIDIR>;
+						emmc_d1 = <&PIO41 1 ALT1 BIDIR>;
+						emmc_d2 = <&PIO41 2 ALT1 BIDIR>;
+						emmc_d3 = <&PIO41 3 ALT1 BIDIR>;
+						emmc_d4 = <&PIO41 4 ALT1 BIDIR>;
+						emmc_d5 = <&PIO41 5 ALT1 BIDIR>;
+						emmc_d6 = <&PIO41 6 ALT1 BIDIR>;
+						emmc_d7 = <&PIO41 7 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			/* NAND (Async mode)*/
+			nand {
+				pinctrl_nand: nand {
+					st,pins {
+						nand_cs2 = <&PIO40 4 ALT3 OUT>;
+						nand_cs3 = <&PIO40 5 ALT3 OUT>;
+						nand_cs1 = <&PIO40 6 ALT3 OUT>;
+						nand_cs0 = <&PIO40 7 ALT3 OUT>;
+						nand_d0 = <&PIO41 0 ALT3 BIDIR>;
+						nand_d1 = <&PIO41 1 ALT3 BIDIR>;
+						nand_d2 = <&PIO41 2 ALT3 BIDIR>;
+						nand_d3 = <&PIO41 3 ALT3 BIDIR>;
+						nand_d4 = <&PIO41 4 ALT3 BIDIR>;
+						nand_d5 = <&PIO41 5 ALT3 BIDIR>;
+						nand_d6 = <&PIO41 6 ALT3 BIDIR>;
+						nand_d7 = <&PIO41 7 ALT3 BIDIR>;
+						nand_we = <&PIO42 0 ALT3 OUT>;
+						nand_ale = <&PIO42 2 ALT3 OUT>;
+						nand_cle = <&PIO42 3 ALT3 OUT>;
+						nand_rnb = <&PIO42 4 ALT3 IN>;
+						nand_ren = <&PIO42 5 ALT3 OUT>;
+					};
+				};
+			};
+
+			/* SPI SFC */
+			sfc {
+				pinctrl_sfc: sfc {
+					st,pins {
+						spi-sfc-cs = <&PIO40 0 ALT1 OUT>;
+						spi-sfc-clk = <&PIO40 1 ALT1 OUT>;
+						spi-sfc-d0 = <&PIO40 2 ALT1 OUT>;
+						spi-sfc-d1 = <&PIO40 3 ALT1 IN>;
+						spi-sfc-d2 = <&PIO40 4 ALT1 OUT>;
+						spi-sfc-d3 = <&PIO40 5 ALT1 OUT>;
+					};
+				};
+			};
+		};
+
+		/* FC_BACKBONE PIO_SD */
+		pin-controller-sd {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stid325-sd-pinctrl";
+			st,syscfg = <&syscfg_pio_sd>;
+			ranges = <0 0x08240000 0x2000>;
+			reg = <0x0824f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 187 IRQ_TYPE_NONE>;
+			interrupts-names = "irqmux";
+
+			PIO50: PIO@08240000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO50";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO51: PIO@08241000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO51";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			/* Stand-alone MMC/SD with SD PHY on FC 11 */
+			mmc0 {
+				pinctrl_sd0: sd0-0 {
+					st,pins {
+						sd_clk = <&PIO50 0 ALT2 BIDIR>;
+						sd_cmd = <&PIO50 1 ALT2 BIDIR>;
+						sd_d0 = <&PIO50 2 ALT2 BIDIR>;
+						sd_d1 = <&PIO50 3 ALT2 BIDIR>;
+						sd_d2 = <&PIO50 4 ALT2 BIDIR>;
+						sd_d3 = <&PIO50 5 ALT2 BIDIR>;
+						sd_cd = <&PIO50 6 ALT2 IN>;
+						sd_wp = <&PIO50 7 ALT2 IN>;
+						sd_pwren = <&PIO51 0 ALT2 OUT>;
+						sd_vsel = <&PIO51 1 ALT2 OUT>;
+						sd_led = <&PIO51 2 ALT2 OUT>;
+					};
+				};
+				pinctrl_emmc0: emmc0-1 {
+					st,pins {
+						emmc_clk = <&PIO50 0 ALT1 OUT>;
+						emmc_cmd = <&PIO50 1 ALT1 BIDIR>;
+						emmc_d0 = <&PIO50 2 ALT1 BIDIR>;
+						emmc_d1 = <&PIO50 3 ALT1 BIDIR>;
+						emmc_d2 = <&PIO50 4 ALT1 BIDIR>;
+						emmc_d3 = <&PIO50 5 ALT1 BIDIR>;
+						emmc_d4 = <&PIO50 6 ALT1 BIDIR>;
+						emmc_d5 = <&PIO50 7 ALT1 BIDIR>;
+						emmc_d6 = <&PIO51 0 ALT1 BIDIR>;
+						emmc_d7 = <&PIO51 1 ALT1 BIDIR>;
+					};
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stid325.dtsi b/arch/arm/boot/dts/stid325.dtsi
--- a/arch/arm/boot/dts/stid325.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stid325.dtsi	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,770 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics Limited.
+ * Author: Carmelo Amoroso <carmelo.amoroso@st.com>
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include "stid325-pinctrl.dtsi"
+#include "stid325-clock-veloce.dtsi"
+#include <dt-bindings/reset-controller/stid325-resets.h>
+#include <dt-bindings/phy/phy-miphy28lp.h>
+#include <dt-bindings/phy/usb2_xphy.h>
+#include <dt-bindings/st/flashss.h>
+
+/ {
+	#address-cells = <1>;
+	#size-cells = <1>;
+
+	cpus {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		cpu@0 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a53";
+			reg = <0>;
+			clock-frequency = <1500000000>;
+		};
+
+		cpu@1 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a53";
+			reg = <1>;
+			clock-frequency = <1500000000>;
+		};
+		cpu@2 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a53";
+			reg = <2>;
+			clock-frequency = <1500000000>;
+		};
+		cpu@3 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a53";
+			reg = <3>;
+			clock-frequency = <1500000000>;
+		};
+	};
+
+	intc: interrupt-controller@06c00000 {
+		compatible = "arm,cortex-a15-gic";
+		#interrupt-cells = <3>;
+		interrupt-controller;
+		reg = <0x06c01000 0x1000>, /* GIC Dist */
+		      <0x06c02000 0x2000>; /* GIC CPU */
+	};
+
+	timer {
+		compatible = "arm,armv7-timer";
+		interrupt-parent = <&intc>;
+		interrupts = <GIC_PPI 13 0xff01>,	/* Secure Phys IRQ */
+			     <GIC_PPI 14 0xff01>;	/* Non-secure Phys IRQ */
+	};
+
+	soc {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		interrupt-parent = <&intc>;
+		ranges;
+		compatible = "simple-bus";
+
+		powerdown: powerdown-controller {
+			#reset-cells = <1>;
+			compatible = "st,stid325-powerdown";
+		};
+
+		softreset: softreset-controller {
+			#reset-cells = <1>;
+			compatible = "st,stid325-softreset";
+		};
+
+		/* Global software reset */
+		restart {
+			compatible = "st,stid325-restart";
+			st,syscfg = <&syscfg_fc0_backbone>;
+		};
+
+		/* SYSCONF PIO mux registers */
+
+		syscfg_pio_west: pio-west-syscfg@8300000 {
+			compatible = "st,stid325-pio-west-syscfg", "syscon";
+			reg = <0x8300000 0x280>;
+			holes = <0x20 0x80
+				 0xa8 0x20
+				 0xd0 0x0c
+				 0xe4 0xc
+				 0xf8 0x98>;
+		};
+
+		syscfg_pio_north_left: pio-north-left-syscfg@8310000 {
+			compatible = "st,stid325-pio-north-left-syscfg", "syscon";
+			reg = <0x8310000 0x1f0>;
+			holes = <0x0c 0x94
+				 0xa4 0x24
+				 0xcc 0x10
+				 0xe0 0x10
+				 0xf4 0x9c>;
+		};
+
+		syscfg_pio_north_right: pio-north-right-syscfg@8320000 {
+			compatible = "st,stid325-pio-north-right-syscfg", "syscon";
+			reg = <0x8320000 0x230>;
+			holes = <0x14 0x8c
+				0xa8 0x20
+				0xd0 0xc
+				0xe4 0xc
+				0xf8 0x98>;
+		};
+
+		syscfg_pio_east: pio-east-syscfg@8330000 {
+			compatible = "st,stid325-pio-east-syscfg", "syscon";
+			reg = <0x8330000 0x290>;
+			holes = <0x20 0x80
+				 0xa8 0x20
+				 0xd0 0xc
+				 0xe4 0xc
+				 0xf8 0x48
+				 0x144 0x10
+				 0x158 0x38>;
+		};
+
+		syscfg_pio_sd: pio-sd-syscfg@8340000 {
+			compatible = "st,stid325-pio-sd-syscfg", "syscon";
+			reg = <0x8340000 0x1bc>;
+			holes = <0x8 0x98
+				 0xa4 0x24
+				 0xcc 0x10
+				 0xe0 0x10
+				 0xf4 0x9c>;
+		};
+
+		syscfg_pio_flash: pio-flash-syscfg@1e400000 {
+			compatible = "st,stid325-pio-flash-syscfg", "syscon";
+			reg = <0x1e400000 0x15c>;
+			holes = <0x0c  0xe4
+				 0xf4  0x4c
+				 0x148 0x8>;
+		};
+
+		/* Functional Cluster SYSCONF registers */
+
+		/*
+			This is the layout of the system config registers
+			available in each cluster that has 11 internal areas
+			organized as shown below:
+
+			o 2MiB of sysconfig area
+				RESET/Clock Gating	-> FC_ID*1000+[0-15]
+				RESERVED		-> FC_ID*1000+[100-199]
+				RESERVED		-> FC_ID*1000+[200-299]
+				PANIC_CTRL		-> FC_ID*1000+[300-399]
+				SPECIFIC		-> FC_ID*1000+[400-499]
+				POWER_CTRL		-> FC_ID*1000+[500-599]
+				RESERVED		-> FC_ID*1000+[600-699]
+				NOC_A1			-> FC_ID*1000+[700-799]
+
+			o Sysconf area starts @0x1000000 from the FC memory
+		*/
+
+		/* FC0 BACKBONE Syscfg 0-999 */
+		syscfg_fc0_backbone: fc0-backbone-syscfg@9000000 {
+			compatible = "st,stid325-fc0-backbone-syscfg", "syscon";
+			reg = <0x9000000 0x132004>;
+			holes = <0x4 0xfffc
+				 0x10004 0x11fffc
+				 0x13006c 0x50
+				 0x1300c8 0xc4
+				 0x130190 0xe70
+				 0x13100c 0xff4>;
+		};
+
+		/* FC1 LPM Syscfg 1000-1999 */
+		syscfg_fc1_lpm: fc1-lpm-syscfg@b000000 {
+			compatible = "st,stid325-fc1-lpm-syscfg", "syscon";
+			reg = <0xb000000 0x130124>;
+			holes = <0x4 0xfffc
+				 0x10004 0x11fffc
+				 0x130014 0x8
+				 0x130020 0x4
+				 0x130034 0x4
+				 0x130048 0x18
+				 0x130068 0x54
+				 0x1300d8 0x4
+				 0x1300e0 0x10
+				 0x130104 0x10>;
+		};
+
+		/* FC2 ECM Syscfg 2000-2999 */
+		syscfg_fc2_ecm: fc2-ecm-syscfg@d000000 {
+			compatible = "st,stid325-fc2-ecm-syscfg", "syscon";
+			reg = <0xd000000 0x130008>;
+			holes = <0x8 0xfff8
+				 0x10004 0xfffc
+				 0x20004 0xfffc
+				 0x30004 0xfffc
+				 0x40004 0xfffc
+				 0x50004 0xfffc
+				 0x60004 0xfffc
+				 0x70004 0xfffc
+				 0x80004 0xfffc
+				 0x90004 0xfffc
+				 0xa0004 0xfffc
+				 0xb0004 0xfffc
+				 0xc0004 0x5fffc
+				 0x120004 0xfffc>;
+		};
+
+		/* FC 3,4,5,6 RESERVED */
+
+		/* FC7 HSIF Syscfg 7000-7999 */
+		syscfg_fc7_hsif: fc7-hsif-syscfg@17000000 {
+			compatible = "st,stid325-fc7-hsif-syscfg", "syscon";
+			reg = <0x17000000 0x13013c>;
+			holes = <0x4 0xfffc
+				 0x10004 0xfffc
+				 0x20004 0xfffc
+				 0x30004 0xfffc
+				 0x40004 0xfffc
+				 0x50004 0xcfffc
+				 0x120018 0xffe8
+				 0x130004 0xc
+				 0x13001c 0xc
+				 0x13002c 0x14
+				 0x130044 0x4
+				 0x130050 0x4
+				 0x130058 0x10
+				 0x13006c 0x4
+				 0x130078 0x4
+				 0x130080 0x18
+				 0x1300a0 0x4
+				 0x1300a8 0x4
+				 0x1300b0 0x4
+				 0x1300cc 0x4
+				 0x1300d4 0x4
+				 0x1300dc 0x14
+				 0x1300f4 0x4
+				 0x1300fc 0x4
+				 0x130104 0x4
+				 0x13010c 0x4
+				 0x130114 0x4
+				 0x13011c 0x4
+				 0x130124 0x14>;
+		};
+
+		/* FC8 NETWORKING Syscfg 8000-8999 */
+		syscfg_fc8_networking: fc8-networking-syscfg@19000000 {
+			compatible = "st,stid325-fc8-networking-syscfg", "syscon";
+			reg = <0x19000000 0x138018>;
+			holes = <0x4 0x1fffc
+				 0x20004 0x1b10
+				 0x21b18 0xfe4ec
+				 0x120010 0xfff0
+				 0x130014 0x4
+				 0x130024 0x7fd0
+				 0x138000 0x8>;
+		};
+
+		/* FC9 ST231_40 Syscfg 9000-9999 */
+		syscfg_fc9_st231_40: fc9-st231_40-syscfg@1b000000 {
+			compatible = "st,stid325-fc9-st231_40-syscfg", "syscon";
+			reg = <0x1b000000 0x13800c>;
+			holes = <0x4 0x2fffc
+				 0x30004 0xffffc
+				 0x130008 0x5c
+				 0x130068 0x18
+				 0x13008c 0x30
+				 0x1300c8 0x7f38>;
+		};
+
+		/* FC10 RESERVED */
+
+		/* FC11 BOOTDEV Syscfg 11000-11999 */
+		syscfg_fc11_bootdev: fc11-bootdev-syscfg@1f000000 {
+			compatible = "st,stid325-fc11-bootdev-syscfg", "syscon";
+			reg = <0x1f000000 0x13013C>;
+			holes = <0x4 0x1fffc
+				 0x20004 0xfffc
+				 0x30004 0xfffc
+				 0x40004 0xfffc
+				 0x50004 0xfffc
+				 0x60004 0xbfffc
+				 0x120004 0xfffc
+				 0x130004 0xc
+				 0x13001c 0xc
+				 0x13002c 0x10
+				 0x13004c 0xc
+				 0x130064 0x50
+				 0x1300b8 0x4
+				 0x1300cc 0x4
+				 0x1300d4 0x4
+				 0x1300dc 0x28
+				 0x130114 0x4
+				 0x130124 0x14>;
+		};
+
+		/* FC12 RESERVED */
+
+		/* FC13 TS Syscfg 13000-13999 */
+		syscfg_fc13_ts: fc13-ts-syscfg@23000000 {
+			compatible = "st,stid325-fc13-ts-syscfg", "syscon";
+			reg = <0x23000000 0x50004>;
+			holes = <0x4 0xfffc
+				 0x10004 0x3fffc>;
+		};
+
+		/* FC14 RESERVED */
+
+		/* FC15 CSEM Syscfg 15000-15999 */
+		syscfg_fc15_csem: fc15-csem-syscfg@27000000 {
+			compatible = "st,stid325-fc15-csem-syscfg", "syscon";
+			reg = <0x27000000 0x138008>;
+			holes = <0x4 0xfffc
+				 0x10004 0xfffc
+				 0x20004 0xfffc
+				 0x30004 0xfffc
+				 0x40004 0xefffc
+				 0x130010 0xac
+				 0x1300c8 0x7f38>;
+
+		};
+
+		syscfg_fc1_lpm_config: fc1-lpm_config-syscfg@0xa1f0000{
+			compatible = "st,stid325-fc1-lpm_config", "syscon";
+			reg = <0xa1f0000 0x10000>;
+			holes = <0x70 0xf90>;
+		};
+
+		/* PERIPHERALS IPs */
+
+		/* COMMS_NORTH */
+
+		/* UART_0 / COMMS_NORTH_0*/
+		serial0: serial0@08a30000 {
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0x08a30000 0x2c>;
+			interrupts = <GIC_SPI 170 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_serial0>;
+			clocks = <&CLK_ICN_REG_1>;
+		};
+
+		i2c0@08a40000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x08a40000 0x110>;
+			interrupts = <GIC_SPI 159 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_2>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c0_default>;
+		};
+
+		i2c1@08a41000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x08a41000 0x110>;
+			interrupts = <GIC_SPI 160 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_2>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c1_default>;
+		};
+
+		spi0@08a40000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08a40000 0x110>;
+			interrupts = <GIC_SPI 159 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_2>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi0_default>;
+		};
+
+		spi1@08a41000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08a41000 0x110>;
+			interrupts = <GIC_SPI 160 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_2>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi1_default>;
+		};
+
+		/* COMMS_WEST */
+
+		/* UART_2 / COMMS_WEST_0 */
+		serial2: serial0@08930000 {
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0x08930000 0x2c>;
+			interrupts = <GIC_SPI 174 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_serial2>;
+			clocks = <&CLK_ICN_REG_1>;
+		};
+
+		/* UART_3 / COMMS_WEST_1*/
+		serial3: serial1@08931000 {
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0x08931000 0x2c>;
+			interrupts = <GIC_SPI 175 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_serial3>;
+			clocks = <&CLK_ICN_REG_1>;
+		};
+
+		i2c6@08940000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x08940000 0x110>;
+			interrupts = <GIC_SPI 166 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_1>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c6_default>;
+		};
+
+		i2c7@08941000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x08941000 0x110>;
+			interrupts = <GIC_SPI 167 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_1>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c7_default>;
+		};
+
+		i2c8@08942000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x08942000 0x110>;
+			interrupts = <GIC_SPI 168 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_1>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c8_default>;
+		};
+
+		spi6@08940000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08940000 0x110>;
+			interrupts = <GIC_SPI 166 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_1>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi6_default>;
+		};
+
+		spi7@08941000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08941000 0x110>;
+			interrupts = <GIC_SPI 167 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_1>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi7_default>;
+		};
+
+		spi8@08942000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08942000 0x110>;
+			interrupts = <GIC_SPI 168 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_1>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi8_default>;
+		};
+
+		/* LPM COMMs */
+
+		serial1: serial0@0a180000 {
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0x0a180000 0x2c>;
+			interrupts = <GIC_SPI 200 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_serial1>;
+			clocks = <&CLK_ICN_REG_0>;
+		};
+
+		i2c2@a190000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x0a190000 0x110>;
+			interrupts = <GIC_SPI 196 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_0>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c2_default>;
+		};
+
+		i2c3@a1a0000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x0a1a0000 0x110>;
+			interrupts = <GIC_SPI 197 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_0>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c3_default>;
+		};
+
+		i2c4@a1b0000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x0a1b0000 0x110>;
+			interrupts = <GIC_SPI 198 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_0>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c4_default>;
+		};
+
+		spi2@a190000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x0a190000 0x110>;
+			interrupts = <GIC_SPI 196 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_0>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi2_default>;
+		};
+
+		spi3@a1a0000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x0a1a0000 0x110>;
+			interrupts = <GIC_SPI 197 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_0>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi3_default>;
+		};
+
+		spi4@a1b0000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x0a1b0000 0x110>;
+			interrupts = <GIC_SPI 198 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_0>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi4_default>;
+		};
+
+		keyscan: keyscan@a110000 {
+			compatible = "st,keypad";
+			status = "disabled";
+			reg = <0xa110000 0x2000>;
+			interrupts = <GIC_SPI 202 IRQ_TYPE_NONE>;
+			clocks = <&CLK_ICN_REG_0>;
+			pinctrl-names = "default";
+			resets = <&softreset STID325_FC1_KEYSCAN_SOFTRESET>;
+		};
+
+		pwm0: pwm@0a160000 {
+			compatible = "st,sti-pwm";
+			status = "disabled";
+			#pwm-cells = <2>;
+			reg = <0x0a160000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_pwm0_chan0_default
+				     &pinctrl_pwm1_chan0_default
+				     &pinctrl_pwm2_chan0_default
+				     &pinctrl_pwm3_chan0_default>;
+			clock-names = "pwm";
+			clocks = <&CLK_ICN_REG_0>;
+			st,pwm-num-chan = <4>;
+		};
+
+		pwm1: pwm@0a170000 {
+			compatible = "st,sti-pwm";
+			status = "disabled";
+			#pwm-cells = <2>;
+			reg = <0x0a170000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_pwm4_chan0_default
+				     &pinctrl_pwm5_chan0_default
+				     &pinctrl_pwm6_chan0_default
+				     &pinctrl_pwm7_chan0_default>;
+			clock-names = "pwm";
+			clocks = <&CLK_ICN_REG_0>;
+			st,pwm-num-chan = <4>;
+		};
+
+		/* Supply voltage for I/O */
+		vqmmc_reg: voltage-regulator {
+			compatible = "st,vqmmc";
+			regulator-name = "vqmmc0";
+			/* Control register for the VSENSE Module */
+			reg = <0x1e301804 0x4>;
+			status = "disabled";
+			regulator-min-microvolt = <1800000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+		};
+
+		mmc0: sdhci@1e600000 {
+			compatible = "st,sdhci";
+			status = "disabled";
+			reg = <0x1e600000 0x7ff>;
+			reg-names = "mmc";
+			interrupts = <GIC_SPI 92 IRQ_TYPE_NONE>;
+			interrupt-names = "mmcirq";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_sd0>;
+			clocks = <&CLK_MMC_0>;
+			clock-names = "mmc";
+			resets = <&softreset STID325_FC11_SDEMMC0_HARD_RESET>;
+			st,mmcss-config;
+		};
+
+		mmc1: sdhci@1e300000 {
+			compatible = "st,sdhci";
+			status = "disabled";
+			reg = <0x1e300000 0x7ff>, <0x1e301808 0x20>;
+			reg-names = "mmc", "top-mmc-delay";
+			interrupts = <GIC_SPI 90 IRQ_TYPE_NONE>;
+			interrupt-names = "mmcirq";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_emmc1>;
+			clocks = <&CLK_MMC_1>;
+			clock-names = "mmc";
+			resets = <&softreset STID325_FC11_SDEMMC1_HARD_RESET>;
+			st,mmcss-config;
+			st,flashss-version = <FLASHSS_CORE_VERSION_3_0>;
+			vqmmc-supply = <&vqmmc_reg>;
+		};
+
+		nandbch: nand-bch {
+			compatible = "st,nand-bch-ip-plug", "st,nand-bch-rnd-data-read";
+			status = "disabled";
+			reg = <0x6201000 0x1000>, <0x1e300800 0x1000>;
+			reg-names = "nand_mem", "nand_dma";
+			clocks = <&CLK_FLASH>, <&CLK_NAND>;
+			clock-names = "emi_clk", "bch_clk";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_nand>;
+			interrupts = <GIC_SPI 89 IRQ_TYPE_NONE>;
+			interrupt-names = "nand_irq";
+			st,bch-ecc-mode = "auto";
+			st,flex-select-reg = <0x1e301800>;
+			st,bch-select-msk = <0x1>;
+		};
+
+		usb2_0_xphy0: usb2xphy@0 {
+			compatible = "st,usb2-xphy";
+			#phy-cells = <0>;
+
+			st,syscfg = <&syscfg_fc7_hsif>;
+			reg = <0x16100048 0x10>, <0x0130014 0x4>;
+			reg-names = "xphy-glue", "syscfg-usbss";
+
+			resets = <&softreset STID325_FC7_USB3_PHY_USB2_RESET>;
+			clocks = <&CLK_32KB_HSIF>;
+			clock-names = "osc_phy";
+
+			st,usbxss-xphy-ctrl;
+			st,usbxss = <ST_USB3SS>;
+		};
+
+		dwc3_0_usb3_phy: usb3_phy@0 {
+			compatible = "st,sti-usb3phy";
+			#phy-cells = <0>;
+			reg = <0x16140000 0xff>, <0x16145000 0xff>;
+			reg-names = "usb3-uport", "pipew";
+			st,syscfg = <&syscfg_fc7_hsif>;
+		};
+
+		/* USB3_0 (FC7) */
+		st_dwc3_0_glue: dwc3@16104000 {
+			status = "disabled";
+			compatible = "st,stid325-dwc3";
+			reg = <0x16100000 0x3c>;
+			reg-names = "reg-glue";
+			resets = <&powerdown STID325_FC7_USB3_POWERDOWN_REQ>,
+				 <&softreset STID325_FC7_USB3_RESET>;
+			reset-names = "power", "soft";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_usb3_0>;
+			ranges;
+
+			dwc3_0: dwc3@16000000 {
+				compatible = "synopsys,dwc3";
+				reg = <0x16000000 0x100000>;
+				interrupts = <GIC_SPI 228 IRQ_TYPE_NONE>;
+				phys = <&usb2_0_xphy0>;
+				phy-names = "usb2-phy";
+				usb3-phy = <&dwc3_0_usb3_phy>;
+			};
+		};
+
+		miphy28lp_phy0: miphy28lp@0 {
+			compatible = "st,miphy28lp-phy";
+			#phy-cells = <1>;
+			reg = <0x1650a000 0xff>,
+			      <0x16509000 0xff>,
+			      <0x16504000 0xff>,
+			      <0x00130054 0x4>,
+			      <0x001300f8 0x4>,
+			      <0x0013004c 0x4>,
+			      <0x00130040  0x4>;
+			reg-names = "sata-up",
+				    "pcie-up",
+				    "pipew",
+				    "miphy-ctrl-glue",
+				    "miphy-status-glue",
+				    "pcie-glue",
+				    "sata-glue";
+			st,syscfg = <&syscfg_fc7_hsif>;
+
+			resets = <&softreset STID325_FC7_PCIE_SATA_0_MIPHY_RESET>;
+			reset-names = "miphy-sw-rst";
+		};
+
+		sata0: sata@16300000  {
+			compatible = "st,ahci";
+			reg = <0x16300000 0x1000>;
+
+			interrupts = <GIC_SPI 242 IRQ_TYPE_NONE>;
+			interrupt-names = "hostc";
+
+			status = "disabled";
+
+			phys = <&miphy28lp_phy0 MIPHY28LP_SATA>;
+			phy-names = "ahci_phy";
+
+			resets = <&powerdown STID325_FC7_SATA_0_POWERDOWN_REQ>,
+				 <&softreset STID325_FC7_SATA_0_RESET>,
+				 <&softreset STID325_FC7_PCIE_SATA_0_HARDRESET>;
+			reset-names = "pwr-dwn",
+				      "sw-rst",
+				      "pwr-rst";
+
+			clocks = <&CLK_30_SATA>;	/* FIXME */
+			clock-names = "ahci_clk";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih301-b2120.dts b/arch/arm/boot/dts/stih301-b2120.dts
--- a/arch/arm/boot/dts/stih301-b2120.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih301-b2120.dts	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,51 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Krishna R DHARASURKAR <krishna.dharasurkar@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih301.dtsi"
+#include "stihxxx-b2120.dtsi"
+/ {
+	model = "STiH301 B2120";
+	compatible = "st,stih301-b2120", "st,stih301", "st,stih410";
+
+	aliases {
+		usb0 = &usb0;
+		usb1 = &usb1;
+	};
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x20000000>;
+	};
+
+	soc {
+		miphy28lp_phy1: miphy28lp@1 {
+			status = "disabled";
+		};
+
+		sata1: sata@9b28000 {
+			status = "disabled";
+		};
+
+		vqmmc_reg: voltage-regulator {
+			status = "okay";
+		};
+
+		mmc0: sdhci@09060000 {
+			max-frequency = <200000000>;
+			mmc-cap-uhs-sdr50;
+			mmc-cap-uhs-sdr104;
+			mmc-cap-uhs-ddr50;
+			mmc-cap-1p8;
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih301-b2173.dts b/arch/arm/boot/dts/stih301-b2173.dts
--- a/arch/arm/boot/dts/stih301-b2173.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih301-b2173.dts	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,54 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Seraphin Bonnaffe <seraphin.bonnaffe@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih301-b21xx.dts"
+/ {
+	model = "STiH301 B2173";
+	compatible = "st,stih301-b2173", "st,stih301", "st,stih410";
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out";
+		st,backend-cpu-dai = <&snd_uni_player0>;
+		st,backend-codec = <&sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy";
+	};
+
+	soc {
+		pcie0: pcie@9b00000{
+			status = "okay";
+			reset-gpio = <&PIO34 2 0>;
+		};
+
+		/*
+		 * On B2173, PCIe and SATA are exclusive, and PCIe is enabled
+		 * by default. To enable SATA instead, move pcie0 node to
+		 * disabled and move sata and miphy nodes below to okay.
+		 * Note that SATA usage requires b2136 adaptor.
+		 */
+		miphy28lp_phy0: miphy28lp@0 {
+			/* select internal clock for miphy0 (sata) */
+			st,sata_gen = "gen3";
+			st,px_rx_pol_inv;
+			status = "disabled";
+		};
+
+		sata0: sata@9b20000 {
+			status = "disabled";
+		};
+
+		snd_uni_player0: snd-uni-player@0 {
+			compatible = "st,uni_player";
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih301-b2196.dts b/arch/arm/boot/dts/stih301-b2196.dts
--- a/arch/arm/boot/dts/stih301-b2196.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih301-b2196.dts	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,64 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Seraphin Bonnaffe <seraphin.bonnaffe@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih301-b21xx.dts"
+/ {
+	model = "STiH301 B2196";
+	compatible = "st,stih301-b2196", "st,stih301", "st,stih410";
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "Analog_out",
+				   "spdif";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player2
+				      &snd_uni_player3>;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dac",
+				       "sas-dai-spdif-out";
+	};
+
+	soc {
+		pcie0: pcie@9b00000{
+			status = "okay";
+			reset-gpio = <&PIO34 2 0>;
+		};
+
+		/*
+		 * On B2196, PCIe and SATA are exclusive, and PCIe is enabled
+		 * by default. To enable SATA instead, move pcie0 node to
+		 * disabled and move sata and miphy nodes below to okay.
+		 * Note that SATA usage requires b2136 adaptor.
+		 */
+		miphy28lp_phy0: miphy28lp@0 {
+			/* select internal clock for miphy0 (sata) */
+			st,sata_gen = "gen3";
+			status = "okay";
+		};
+
+		sata0: sata@9b20000 {
+			status = "disabled";
+		};
+
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih301-b21xx.dts b/arch/arm/boot/dts/stih301-b21xx.dts
--- a/arch/arm/boot/dts/stih301-b21xx.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih301-b21xx.dts	2019-09-26 21:23:27.100619100 +0100
@@ -0,0 +1,170 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Amelie Herault <amelie.herault@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih301.dtsi"
+/ {
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &sbc_serial0;
+	};
+
+	aliases {
+		ttyAS0 = &sbc_serial0;
+		ethernet0 = &ethernet0;
+		miphy0 = &miphy28lp_phy0;
+		miphy1 = &miphy28lp_phy1;
+		miphy2 = &miphy28lp_phy2;
+		usb1 = &usb1;
+	};
+
+	memory {
+		device_type = "memory";
+		/*
+		 * 2 x 16 bits x 512MB: reg = <0x40000000 0x40000000>;
+		 * 1 x 16 bits x 512MB: reg = <0x40000000 0x20000000>;
+		 */
+		reg = <0x40000000 0x20000000>;
+	};
+
+	soc {
+		mmc1: sdhci@09080000 {
+			status = "okay";
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO3 2 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+                };
+
+		sbc_serial0: serial@9530000 {
+			status = "okay";
+		};
+
+		leds {
+			compatible = "gpio-leds";
+			red {
+				#gpio-cells = <2>;
+				label = "Front Panel LED";
+				gpios = <&PIO4 1 0>;
+				linux,default-trigger = "heartbeat";
+			};
+			green {
+				#gpio-cells = <2>;
+				gpios = <&PIO1 3 0>;
+				default-state = "off";
+			};
+		};
+
+		/* SSC4 to PCIe connector */
+		i2c4: i2c@9844000 {
+			status = "okay";
+		};
+
+		/* SSC11 to HDMI */
+		i2c11: i2c@9541000 {
+			status = "okay";
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+		};
+
+		rc: rc@09518000 {
+			status = "okay";
+		};
+
+		ethernet0: dwmac@9630000 {
+			st,tx-retime-src = "clkgen";
+			status = "okay";
+			phy-mode = "rgmii";
+			pinctrl-0 = <&pinctrl_rgmii1 &pinctrl_rgmii1_mdio>;
+
+			snps,phy-bus-name = "stmmac";
+			snps,phy-bus-id = <0>;
+			snps,phy-addr = <0x04>;
+			snps,reset-gpio = <&PIO0 7 0>;
+			snps,reset-active-low;
+			snps,reset-delays-us = <0 10000 1000000>;
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
+		};
+
+		/*
+		 * B2173 has a MALI-400 MP2 (dual core) instead of
+		 * MALI-400 MP4 (quad core)
+		 */
+		mali: mali@09f00000 {
+			compatible = "st,mali";
+			reg = <0x09f01000 0x200>,
+			      <0x09f00000 0x100>, <0x09f03000 0x100>,
+			      <0x09f08000 0x1100>, <0x09f04000 0x100>,
+			      <0x09f0a000 0x1100>, <0x09f05000 0x100>;
+			reg-names = "Mali_L2",
+				    "Mali_GP", "Mali_GP_MMU",
+				    "Mali_PP0", "Mali_PP0_MMU",
+				    "Mali_PP1", "Mali_PP1_MMU";
+
+			interrupts = <GIC_SPI 49 IRQ_TYPE_NONE>,
+				     <GIC_SPI 50 IRQ_TYPE_NONE>,
+				     <GIC_SPI 41 IRQ_TYPE_NONE>,
+				     <GIC_SPI 45 IRQ_TYPE_NONE>,
+				     <GIC_SPI 42 IRQ_TYPE_NONE>,
+				     <GIC_SPI 46 IRQ_TYPE_NONE>;
+			interrupt-names = "Mali_GP_IRQ",
+					  "Mali_GP_MMU_IRQ",
+					  "Mali_PP0_IRQ",
+					  "Mali_PP0_MMU_IRQ",
+					  "Mali_PP1_IRQ",
+					  "Mali_PP1_MMU_IRQ";
+		};
+
+		nandbch: nand-bch {
+			st,bch-ecc-mode = "18bit";
+			status = "okay";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>; /* delay in us */
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih301-b2204.dts b/arch/arm/boot/dts/stih301-b2204.dts
--- a/arch/arm/boot/dts/stih301-b2204.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih301-b2204.dts	2019-09-26 21:23:27.104619200 +0100
@@ -0,0 +1,110 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Laurent Meunier <laurent.meunier@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih301-b21xx.dts"
+/ {
+	model = "STiH301 B2204";
+	compatible = "st,stih301-b2204", "st,stih301", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		/*
+		 * 2 x 16 bits x 512MB: reg = <0x40000000 0x40000000>;
+		 * 1 x 16 bits x 512MB: reg = <0x40000000 0x20000000>;
+		 */
+		reg = <0x40000000 0x40000000>;
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "spdif";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player3>;
+		st,backend-codec = <&sti_sasg_codec&sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-spdif-out";
+	};
+
+	soc {
+		mmc0: sdhci@09060000 {
+			non-removable;
+			status = "okay";
+		};
+
+		leds {
+			compatible = "gpio-leds";
+			green {
+				#gpio-cells = <2>;
+				gpios = <&PIO4 6 0>;
+				default-state = "off";
+			};
+		};
+
+		ethernet0: dwmac@9630000 {
+			st,tx-retime-src = "clkgen";
+			status = "okay";
+			phy-mode = "mii";
+			pinctrl-0 = <&pinctrl_mii1>;
+
+			snps,phy-bus-name = "stmmac";
+			snps,phy-bus-id = <0>;
+			snps,phy-addr = <0x00>;
+			snps,reset-gpio = <&PIO4 4 0>;
+			snps,reset-active-low;
+			snps,reset-delays-us = <0 10000 1000000>;
+		};
+
+		spifsm@9022000 {
+			status = "okay";
+			flash-name = "mx25l25655f";
+			partitions = <&b2204_fsm_partitions>;
+
+			b2204_fsm_partitions: partitions-b2204 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@1400000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+
+		gpio_keys {
+			compatible = "gpio-keys";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			button@1 {
+				label = "wakeup";
+				linux,code = <41>;
+				gpios = <&PIO3 3 1>;
+				gpio-key,wakeup;
+			};
+		};
+
+		nandbch: nand-bch {
+			status = "disabled";
+		};
+
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih301-pinctrl.dtsi b/arch/arm/boot/dts/stih301-pinctrl.dtsi
--- a/arch/arm/boot/dts/stih301-pinctrl.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih301-pinctrl.dtsi	2019-09-26 21:23:27.104619200 +0100
@@ -0,0 +1,500 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Amelie Herault <amelie.herault@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+#include <dt-bindings/pinctrl/st-pincfg.h>
+#include <dt-bindings/interrupt-controller/arm-gic.h>
+/ {
+
+	aliases {
+		/* 0-5: PIO_SBC */
+		gpio0 = &PIO0;
+		gpio1 = &PIO1;
+		gpio2 = &PIO2;
+		gpio3 = &PIO3;
+		gpio4 = &PIO4;
+		gpio5 = &PIO5;
+		/* 10-19: PIO_FRONT0 */
+		gpio6 = &PIO10;
+		gpio7 = &PIO11;
+		gpio8 = &PIO12;
+		gpio9 = &PIO13;
+		gpio10 = &PIO14;
+		gpio11 = &PIO15;
+		gpio12 = &PIO16;
+		gpio13 = &PIO17;
+		gpio14 = &PIO18;
+		gpio15 = &PIO19;
+		/* 20: PIO_FRONT1 */
+		gpio16 = &PIO20;
+		/* 30-35: PIO_REAR */
+		gpio17 = &PIO30;
+		gpio18 = &PIO31;
+		gpio19 = &PIO32;
+		gpio20 = &PIO33;
+		gpio21 = &PIO34;
+		gpio22 = &PIO35;
+		/* 40-42: PIO_FLASH */
+		gpio23 = &PIO40;
+		gpio24 = &PIO41;
+		gpio25 = &PIO42;
+	};
+
+	soc {
+		pin-controller-sbc {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih407-sbc-pinctrl";
+			st,syscfg = <&syscfg_sbc>;
+			reg = <0x0961f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 188 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+			ranges = <0 0x09610000 0x6000>;
+
+			PIO0: gpio@09610000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO0";
+			};
+			PIO1: gpio@09611000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO1";
+			};
+			PIO2: gpio@09612000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO2";
+			};
+			PIO3: gpio@09613000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO3";
+			};
+			PIO4: gpio@09614000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO4";
+			};
+
+			PIO5: gpio@09615000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x5000 0x100>;
+				st,bank-name = "PIO5";
+				st,retime-pin-mask = <0x3f>;
+			};
+
+			rc {
+				pinctrl_ir: ir0 {
+					st,pins {
+						ir = <&PIO4 0 ALT2 IN>;
+					};
+				};
+			};
+
+			/* SBC_ASC0 - UART10 */
+			sbc_serial0 {
+				pinctrl_sbc_serial0: sbc_serial0-0 {
+					st,pins {
+						tx = <&PIO3 4 ALT1 OUT>;
+						rx = <&PIO3 5 ALT1 IN>;
+					};
+				};
+			};
+			/* SBC_ASC1 - UART11 */
+			sbc_serial1 {
+				pinctrl_sbc_serial1: sbc_serial1-0 {
+					st,pins {
+						tx = <&PIO2 6 ALT3 OUT>;
+						rx = <&PIO2 7 ALT3 IN>;
+					};
+				};
+			};
+
+			i2c11 {
+				pinctrl_i2c11_default: i2c11-default {
+					st,pins {
+						sda = <&PIO5 1 ALT1 BIDIR>;
+						scl = <&PIO5 0 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			gmac1 {
+				/*
+				  Almost all the boards based on STiH407 SoC have an embedded
+				  switch where the mdio/mdc have been used for managing the SMI
+				  iface via I2C. For this reason these lines can be allocated
+				  by using dedicated configuration (in case of there will be a
+				  standard PHY transceiver on-board).
+				*/
+				pinctrl_rgmii1: rgmii1-0 {
+					st,pins {
+
+						txd0 = <&PIO0 0 ALT1 OUT DE_IO 0 CLK_A>;
+						txd1 = <&PIO0 1 ALT1 OUT DE_IO 0 CLK_A>;
+						txd2 = <&PIO0 2 ALT1 OUT DE_IO 0 CLK_A>;
+						txd3 = <&PIO0 3 ALT1 OUT DE_IO 0 CLK_A>;
+						txen = <&PIO0 5 ALT1 OUT DE_IO 0 CLK_A>;
+						rxd0 = <&PIO1 4 ALT1 IN DE_IO 0 CLK_A>;
+						rxd1 = <&PIO1 5 ALT1 IN DE_IO 0 CLK_A>;
+						rxd2 = <&PIO1 6 ALT1 IN DE_IO 0 CLK_A>;
+						rxd3 = <&PIO1 7 ALT1 IN DE_IO 0 CLK_A>;
+						rxdv = <&PIO2 0 ALT1 IN DE_IO 0 CLK_A>;
+						rxclk = <&PIO2 2 ALT1 IN NICLK 500 CLK_A>;
+						clk125 = <&PIO3 7 ALT4 IN NICLK 0 CLK_A>;
+						phyclk = <&PIO2 3 ALT4 OUT NICLK 1750 CLK_B>;
+					};
+				};
+
+				pinctrl_rgmii1_mdio: rgmii1-mdio {
+					st,pins {
+						mdio = <&PIO1 0 ALT1 OUT BYPASS 0>;
+						mdc = <&PIO1 1 ALT1 OUT NICLK 0 CLK_A>;
+						mdint = <&PIO1 3 ALT1 IN BYPASS 0>;
+					};
+				};
+
+				pinctrl_mii1: mii1 {
+					st,pins {
+						txd0 = <&PIO0 0 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txd1 = <&PIO0 1 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txd2 = <&PIO0 2 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txd3 = <&PIO0 3 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txer = <&PIO0 4 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txen = <&PIO0 5 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						col = <&PIO0 7 ALT1 IN BYPASS 1000>;
+
+						mdio = <&PIO1 0 ALT1 OUT BYPASS 1500>;
+						mdc = <&PIO1 1 ALT1 OUT NICLK 0 CLK_A>;
+						crs = <&PIO1 2 ALT1 IN BYPASS 1000>;
+						mdint = <&PIO1 3 ALT1 IN BYPASS 0>;
+						rxd0 = <&PIO1 4 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxd1 = <&PIO1 5 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxd2 = <&PIO1 6 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxd3 = <&PIO1 7 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+
+						rxdv = <&PIO2 0 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxclk = <&PIO2 2 ALT1 IN NICLK 0 CLK_A>;
+						phyclk = <&PIO2 3 ALT1 OUT NICLK 0 CLK_A>;
+					};
+				};
+
+			};
+
+			pwm1 {
+				pinctrl_pwm1_chan0_default: pwm1-0-default {
+					st,pins {
+						pwm-out = <&PIO3 0 ALT1 OUT>;
+					};
+				};
+			};
+		};
+
+		pin-controller-front0 {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih407-front-pinctrl";
+			st,syscfg = <&syscfg_front>;
+			reg = <0x0920f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 189 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+			ranges = <0 0x09200000 0x10000>;
+
+			PIO10: PIO@09200000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO10";
+			};
+			PIO11: PIO@09201000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO11";
+			};
+			PIO12: PIO@09202000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO12";
+			};
+			PIO13: PIO@09203000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO13";
+			};
+			PIO14: PIO@09204000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO14";
+			};
+			PIO15: PIO@09205000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x5000 0x100>;
+				st,bank-name = "PIO15";
+			};
+			PIO16: PIO@09206000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x6000 0x100>;
+				st,bank-name = "PIO16";
+			};
+			PIO17: PIO@09207000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x7000 0x100>;
+				st,bank-name = "PIO17";
+			};
+			PIO18: PIO@09208000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x8000 0x100>;
+				st,bank-name = "PIO18";
+			};
+			PIO19: PIO@09209000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x9000 0x100>;
+				st,bank-name = "PIO19";
+			};
+
+			mmc1 {
+				pinctrl_sd1: sd1-0 {
+					st,pins {
+						sd_clk = <&PIO19 3 ALT5 BIDIR NICLK 0 CLK_B>;
+						sd_cmd = <&PIO19 2 ALT5 BIDIR_PU BYPASS 0>;
+						sd_dat0 = <&PIO19 4 ALT5 BIDIR_PU BYPASS 0>;
+						sd_dat1 = <&PIO19 5 ALT5 BIDIR_PU BYPASS 0>;
+						sd_dat2 = <&PIO19 6 ALT5 BIDIR_PU BYPASS 0>;
+						sd_dat3 = <&PIO19 7 ALT5 BIDIR_PU BYPASS 0>;
+						sd_pwren = <&PIO16 7 ALT6 OUT>;
+						sd_cd = <&PIO19 0 ALT6 IN_PU>;
+						sd_wp = <&PIO19 1 ALT6 IN>;
+					};
+				};
+			};
+
+			systrace {
+				pinctrl_systrace_default: systrace-default {
+					st,pins {
+						trc_data0 = <&PIO11 3 ALT5 OUT>;
+						trc_data1 = <&PIO11 4 ALT5 OUT>;
+						trc_data2 = <&PIO11 5 ALT5 OUT>;
+						trc_data3 = <&PIO11 6 ALT5 OUT>;
+						trc_clk   = <&PIO11 7 ALT5 OUT>;
+					};
+				};
+			};
+		};
+
+		pin-controller-front1 {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih407-front-pinctrl";
+			st,syscfg = <&syscfg_front>;
+			reg = <0x0921f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 190 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+			ranges = <0 0x09210000 0x10000>;
+
+			PIO20: PIO@09210000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO20";
+			};
+		};
+
+		pin-controller-rear {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih407-rear-pinctrl";
+			st,syscfg = <&syscfg_rear>;
+			reg = <0x0922f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 191 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+			ranges = <0 0x09220000 0x6000>;
+
+			PIO30: gpio@09220000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO30";
+			};
+			PIO31: gpio@09221000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO31";
+			};
+			PIO32: gpio@09222000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO32";
+			};
+			PIO33: gpio@09223000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO33";
+			};
+			PIO34: gpio@09224000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO34";
+			};
+			PIO35: gpio@09225000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x5000 0x100>;
+				st,bank-name = "PIO35";
+				st,retime-pin-mask = <0x7f>;
+			};
+
+			i2c4 {
+				pinctrl_i2c4_default: i2c4-default {
+					st,pins {
+						sda = <&PI034 1 ALT1 BIDIR>;
+						scl = <&PIO34 0 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			usb3 {
+				pinctrl_usb3: usb3-2 {
+					st,pins {
+						usb-oc-detect = <&PIO35 4 ALT1 IN>;
+						usb-pwr-enable = <&PIO35 5 ALT1 OUT>;
+						usb-vbus-valid = <&PIO35 6 ALT1 IN>;
+					};
+				};
+			};
+		};
+
+		pin-controller-flash {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih407-flash-pinctrl";
+			st,syscfg = <&syscfg_flash>;
+			reg = <0x0923f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 192 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+			ranges = <0 0x09230000 0x3000>;
+
+			PIO40: gpio@09230000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0 0x100>;
+				st,bank-name = "PIO40";
+			};
+			PIO41: gpio@09231000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO41";
+			};
+			PIO42: gpio@09232000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO42";
+			};
+
+			nand {
+				pinctrl_nand: nand {
+					st,pins {
+						nand_cs1 = <&PIO40 6 ALT3 OUT>;
+						nand_cs0 = <&PIO40 7 ALT3 OUT>;
+						nand_d0 = <&PIO41 0 ALT3 BIDIR>;
+						nand_d1 = <&PIO41 1 ALT3 BIDIR>;
+						nand_d2 = <&PIO41 2 ALT3 BIDIR>;
+						nand_d3 = <&PIO41 3 ALT3 BIDIR>;
+						nand_d4 = <&PIO41 4 ALT3 BIDIR>;
+						nand_d5 = <&PIO41 5 ALT3 BIDIR>;
+						nand_d6 = <&PIO41 6 ALT3 BIDIR>;
+						nand_d7 = <&PIO41 7 ALT3 BIDIR>;
+						nand_we = <&PIO42 0 ALT3 OUT>;
+						nand_dqs = <&PIO42 1 ALT3 OUT>;
+						nand_ale = <&PIO42 2 ALT3 OUT>;
+						nand_cle = <&PIO42 3 ALT3 OUT>;
+						nand_rnb = <&PIO42 4 ALT3 IN>;
+						nand_oe = <&PIO42 5 ALT3 OUT>;
+					};
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih301.dtsi b/arch/arm/boot/dts/stih301.dtsi
--- a/arch/arm/boot/dts/stih301.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih301.dtsi	2019-09-26 21:23:27.104619200 +0100
@@ -0,0 +1,30 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Amelie Herault <amelie.herault@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih410-clock.dtsi"
+#include "stih407-family.dtsi"
+/ {
+	soc {
+		st_usb_bus_config: st-usb-amba-config {
+			st,complete_on_error;
+			st,read_ahead;
+			st,max_opcode_LD64_ST64;
+			st,chunks_in_msg = <0>;
+			st,packets_in_chunk = <2>;
+			st,threshold = <256>;
+		};
+
+		sti_cpufreq_init {
+			compatible = "st,stih407-cpufreq-init";
+			st,operating-points = <
+				/* kHz */
+				1500000 1200000	800000 500000
+			 >;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih301cut1-b2173.dts b/arch/arm/boot/dts/stih301cut1-b2173.dts
--- a/arch/arm/boot/dts/stih301cut1-b2173.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih301cut1-b2173.dts	2019-09-26 21:23:27.104619200 +0100
@@ -0,0 +1,56 @@
+
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Seraphin Bonnaffe <seraphin.bonnaffe@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih301cut1-b21xx.dts"
+/ {
+	model = "STiH301cut1 B2173";
+	compatible = "st,stih301-b2173", "st,stih301", "st,stih410";
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out";
+		st,backend-cpu-dai = <&snd_uni_player0>;
+		st,backend-codec = <&sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy";
+	};
+
+	soc {
+		pcie0: pcie@9b00000{
+			status = "okay";
+			reset-gpio = <&PIO34 2 0>;
+		};
+
+		/*
+		 * On B2173, PCIe and SATA are exclusive, and PCIe is enabled
+		 * by default. To enable SATA instead, move pcie0 node to
+		 * disabled and move sata and miphy nodes below to okay.
+		 * Note that SATA usage requires b2136 adaptor.
+		 */
+		miphy28lp_phy0: miphy28lp@0 {
+			st,px_rx_pol_inv;
+			/* select internal clock for miphy0 (sata) */
+			st,sata_gen = "gen3";
+			/* set tx impedance compensation */
+			st,tx-impedance-comp;
+			status = "disabled";
+		};
+
+		sata0: sata@9b20000 {
+			status = "disabled";
+		};
+
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih301cut1-b21xx.dts b/arch/arm/boot/dts/stih301cut1-b21xx.dts
--- a/arch/arm/boot/dts/stih301cut1-b21xx.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih301cut1-b21xx.dts	2019-09-26 21:23:27.104619200 +0100
@@ -0,0 +1,173 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Amelie Herault <amelie.herault@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih301-pinctrl.dtsi"
+#include "stih301.dtsi"
+/ {
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &sbc_serial0;
+	};
+
+	aliases {
+		ttyAS0 = &sbc_serial0;
+		ethernet0 = &ethernet0;
+		miphy0 = &miphy28lp_phy0;
+		miphy1 = &miphy28lp_phy1;
+		miphy2 = &miphy28lp_phy2;
+	};
+
+	memory {
+		device_type = "memory";
+		/*
+		 * 2 x 16 bits x 512MB: reg = <0x40000000 0x40000000>;
+		 * 1 x 16 bits x 512MB: reg = <0x40000000 0x20000000>;
+		 */
+		reg = <0x40000000 0x20000000>;
+	};
+
+	soc {
+		mmc0: sdhci@09060000 {
+			status = "disabled";
+		};
+
+		mmc1: sdhci@09080000 {
+			status = "okay";
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO3 2 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+		};
+
+		sbc_serial0: serial@9530000 {
+			status = "okay";
+		};
+
+		sbc_serial1: serial@9531000 {
+			status = "disabled";
+		};
+
+		leds {
+			compatible = "gpio-leds";
+			red {
+				#gpio-cells = <2>;
+				label = "Front Panel LED";
+				gpios = <&PIO4 1 0>;
+				linux,default-trigger = "heartbeat";
+			};
+			green {
+				#gpio-cells = <2>;
+				gpios = <&PIO1 3 0>;
+				default-state = "off";
+			};
+		};
+
+		/* SSC4 to PCIe connector */
+		i2c4: i2c@9844000 {
+			status = "okay";
+		};
+
+		/* SSC11 to HDMI */
+		i2c11: i2c@9541000 {
+			status = "okay";
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+		};
+
+		ethernet0: dwmac@9630000 {
+			st,tx-retime-src = "clkgen";
+			status = "okay";
+			phy-mode = "rgmii";
+			pinctrl-0 = <&pinctrl_rgmii1 &pinctrl_rgmii1_mdio>;
+
+			snps,phy-bus-name = "stmmac";
+			snps,phy-bus-id = <0>;
+			snps,phy-addr = <0x04>;
+			snps,reset-gpio = <&PIO0 7 0>;
+			snps,reset-active-low;
+			snps,reset-delays-us = <0 10000 1000000>;
+		};
+
+		usb3_phy: usb3_phy@0 {
+			st,auto-calibration;
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
+		};
+
+		/*
+		 * B2173 has a MALI-400 MP2 (dual core) instead of
+		 * MALI-400 MP4 (quad core)
+		 */
+		mali: mali@09f00000 {
+			compatible = "st,mali";
+			reg = <0x09f01000 0x200>,
+				<0x09f00000 0x100>, <0x09f03000 0x100>,
+				<0x09f08000 0x1100>, <0x09f04000 0x100>,
+				<0x09f0a000 0x1100>, <0x09f05000 0x100>;
+			reg-names = "Mali_L2",
+				"Mali_GP", "Mali_GP_MMU",
+				"Mali_PP0", "Mali_PP0_MMU",
+				"Mali_PP1", "Mali_PP1_MMU";
+			interrupts = <GIC_SPI 49 IRQ_TYPE_NONE>,
+				<GIC_SPI 50 IRQ_TYPE_NONE>,
+				<GIC_SPI 41 IRQ_TYPE_NONE>,
+				<GIC_SPI 45 IRQ_TYPE_NONE>,
+				<GIC_SPI 42 IRQ_TYPE_NONE>,
+				<GIC_SPI 46 IRQ_TYPE_NONE>;
+			interrupt-names = "Mali_GP_IRQ",
+				"Mali_GP_MMU_IRQ",
+				"Mali_PP0_IRQ",
+				"Mali_PP0_MMU_IRQ",
+				"Mali_PP1_IRQ",
+				"Mali_PP1_MMU_IRQ";
+		};
+
+		nandbch: nand-bch {
+			st,bch-ecc-mode = "18bit";
+			status = "okay";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>; /* delay in us */
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih305-b2089.dts b/arch/arm/boot/dts/stih305-b2089.dts
--- a/arch/arm/boot/dts/stih305-b2089.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih305-b2089.dts	2019-09-26 21:23:27.108619200 +0100
@@ -0,0 +1,20 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih407.dtsi"
+#include "stihxxx-b2089.dtsi"
+/ {
+	model = "STiH305 B2089";
+	compatible = "st,stih305-b2089", "st,stih305", "st,stih407";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih305-b2120.dts b/arch/arm/boot/dts/stih305-b2120.dts
--- a/arch/arm/boot/dts/stih305-b2120.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih305-b2120.dts	2019-09-26 21:23:27.108619200 +0100
@@ -0,0 +1,20 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih407.dtsi"
+#include "stihxxx-b2120.dtsi"
+/ {
+	model = "STiH305 B2120";
+	compatible = "st,stih305-b2120", "st,stih305", "st,stih407";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih305-b2148.dts b/arch/arm/boot/dts/stih305-b2148.dts
--- a/arch/arm/boot/dts/stih305-b2148.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih305-b2148.dts	2019-09-26 21:23:27.108619200 +0100
@@ -0,0 +1,21 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+
+#include "stih407.dtsi"
+#include "stihxxx-b2148.dtsi"
+
+/ {
+	model = "STiH305 B2148";
+	compatible = "st,stih305-b2148", "st,stih305", "st,stih407";
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih310-b2089.dts b/arch/arm/boot/dts/stih310-b2089.dts
--- a/arch/arm/boot/dts/stih310-b2089.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih310-b2089.dts	2019-09-26 21:23:27.108619200 +0100
@@ -0,0 +1,20 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+#include "stihxxx-b2089.dtsi"
+/ {
+	model = "STiH310 B2089";
+	compatible = "st,stih310-b2089", "st,stih310", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih310-b2120.dts b/arch/arm/boot/dts/stih310-b2120.dts
--- a/arch/arm/boot/dts/stih310-b2120.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih310-b2120.dts	2019-09-26 21:23:27.108619200 +0100
@@ -0,0 +1,46 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+#include "stihxxx-b2120.dtsi"
+/ {
+	model = "STiH310 B2120";
+	compatible = "st,stih310-b2120", "st,stih310", "st,stih410";
+
+	aliases {
+		usb0 = &usb0;
+		usb1 = &usb1;
+	};
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+
+	soc {
+		vqmmc_reg: voltage-regulator {
+			status = "okay";
+		};
+		mmc0: sdhci@09060000 {
+			max-frequency = <200000000>;
+			mmc-cap-uhs-sdr50;
+			mmc-cap-uhs-sdr104;
+			mmc-cap-uhs-ddr50;
+			mmc-cap-1p8;
+		};
+
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih310-b2148.dts b/arch/arm/boot/dts/stih310-b2148.dts
--- a/arch/arm/boot/dts/stih310-b2148.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih310-b2148.dts	2019-09-26 21:23:27.108619200 +0100
@@ -0,0 +1,37 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+
+#include "stih410.dtsi"
+#include "stihxxx-b2148.dtsi"
+
+/ {
+	model = "STiH310 B2148";
+	compatible = "st,stih310-b2148", "st,stih310", "st,stih410";
+
+	aliases {
+		usb0 = &usb0;
+		usb1 = &usb1;
+	};
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+
+	soc {
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih310cut1-b2120.dts b/arch/arm/boot/dts/stih310cut1-b2120.dts
--- a/arch/arm/boot/dts/stih310cut1-b2120.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih310cut1-b2120.dts	2019-09-26 21:23:27.120619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+#include "stihxxx-b2120.dtsi"
+/ {
+	model = "STiH310cut1 B2120";
+	compatible = "st,stih410", "st,stih310-b2120";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+
+	soc {
+		usb3_phy: usb3_phy@0 {
+			st,auto-calibration;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih310cut1-b2148.dts b/arch/arm/boot/dts/stih310cut1-b2148.dts
--- a/arch/arm/boot/dts/stih310cut1-b2148.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih310cut1-b2148.dts	2019-09-26 21:23:27.124619200 +0100
@@ -0,0 +1,37 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+
+#include "stih410.dtsi"
+#include "stihxxx-b2148.dtsi"
+
+/ {
+	model = "STiH310cut1 B2148";
+	compatible = "st,stih310-b2148", "st,stih310";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+
+	soc {
+		usb3_phy: usb3_phy@0 {
+			st,auto-calibration;
+		};
+
+		/* set tx impedance compensation */
+		miphy28lp_phy0: miphy28lp@0 {
+			st,tx-impedance-comp;
+		};
+
+		miphy28lp_phy1: miphy28lp@1 {
+			st,tx-impedance-comp;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih312-b2120.dts b/arch/arm/boot/dts/stih312-b2120.dts
--- a/arch/arm/boot/dts/stih312-b2120.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih312-b2120.dts	2019-09-26 21:23:27.124619200 +0100
@@ -0,0 +1,40 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Gabriel Fernandez <gabriel.fernandez@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih412.dtsi"
+#include "stihxxx-b2120.dtsi"
+/ {
+	model = "STiH312 B2120";
+	compatible = "st,stih312-b2120", "st,stih310", "st,stih410";
+
+	aliases {
+		usb0 = &usb0;
+		usb1 = &usb1;
+	};
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+
+	soc {
+		mmc0: sdhci@09060000 {
+			status = "okay";
+			non-removable;
+		};
+
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih314-b2188.dts b/arch/arm/boot/dts/stih314-b2188.dts
--- a/arch/arm/boot/dts/stih314-b2188.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih314-b2188.dts	2019-09-26 21:23:27.124619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih314.dtsi"
+#include "stihxxx-b2188.dtsi"
+/ {
+	model = "STiH314 B2188";
+	compatible = "st,stih314-b2188", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x80000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih314-b2199.dts b/arch/arm/boot/dts/stih314-b2199.dts
--- a/arch/arm/boot/dts/stih314-b2199.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih314-b2199.dts	2019-09-26 21:23:27.124619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih314.dtsi"
+#include "stihxxx-b2199.dtsi"
+/ {
+	model = "STiH314 B2199";
+	compatible = "st,stih314-b2199", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0xc0000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih314-b2206.dts b/arch/arm/boot/dts/stih314-b2206.dts
--- a/arch/arm/boot/dts/stih314-b2206.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih314-b2206.dts	2019-09-26 21:23:27.124619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih314.dtsi"
+#include "stihxxx-b2206.dtsi"
+/ {
+	model = "STiH314 B2206";
+	compatible = "st,stih314-b2206", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0xc0000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih314-clkconf.dtsi b/arch/arm/boot/dts/stih314-clkconf.dtsi
--- a/arch/arm/boot/dts/stih314-clkconf.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih314-clkconf.dtsi	2019-09-26 21:23:27.124619200 +0100
@@ -0,0 +1,129 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih418-clks.h"
+/ {
+	clocks {
+						/* Clockgen D0 */
+		assigned-clocks =   		<&CLK_S_D0_QUADFS VCO>,
+						<&CLK_S_D0_QUADFS 0>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_0>,
+						<&CLK_S_D0_QUADFS 1>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_1>,
+						<&CLK_S_D0_QUADFS 2>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_2>,
+						<&CLK_S_D0_QUADFS 3>,
+						<&CLK_S_D0_FLEXGEN CLK_SPDIFF>,
+						/* Clockgen D2 */
+						<&CLK_S_D2_QUADFS VCO>,
+						<&CLK_S_D2_QUADFS 2>,
+						<&CLK_S_D2_QUADFS 3>,
+						<&CLK_S_D2_FLEXGEN CLK_VP9>,
+						/* Clockgen D3 */
+						<&CLK_S_D3_QUADFS VCO>,
+						<&CLK_S_D3_QUADFS 0>,
+						<&CLK_S_D3_FLEXGEN CLK_STFE_FRC1>,
+						<&CLK_S_D3_FLEXGEN CLK_FRC1_REMOTE>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_FLEXGEN CLK_TSOUT_0>,
+						<&CLK_S_D3_FLEXGEN CLK_TSOUT_1>,
+						<&CLK_S_D3_FLEXGEN CLK_MCHI>,
+						<&CLK_S_D3_FLEXGEN CLK_LPC_0>,
+						/* Clockgen C0 */
+						<&CLK_S_C0_QUADFS 2>,
+						<&CLK_S_C0_FLEXGEN CLK_DSS_LPC>,
+						<&CLK_S_C0_FLEXGEN CLK_MMC_0>,
+						<&CLK_S_C0_QUADFS 3>,
+						<&CLK_S_C0_FLEXGEN CLK_ETH_PHYREF>,
+						<&CLK_S_C0_FLEXGEN CLK_ETH_PHY>,
+						<&CLK_S_C0_FLEXGEN CLK_ICN_GPU>,
+						<&CLK_S_C0_FLEXGEN CLK_PP_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_VID_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_ST231_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_HWPE_HEVC>,
+						<&CLK_S_C0_FLEXGEN CLK_PROC_SC>;
+
+						/* Clockgen D0 */
+		assigned-clock-parents =	<0>,
+						<0>,
+						<&CLK_S_D0_QUADFS 0>,
+						<0>,
+						<&CLK_S_D0_QUADFS 1>,
+						<0>,
+						<&CLK_S_D0_QUADFS 2>,
+						<0>,
+						<&CLK_S_D0_QUADFS 3>,
+						/* Clockgen D2 */
+						<0>,
+						<0>,
+						<0>,
+						<&CLK_S_D2_QUADFS 3>,
+						/* Clockgen D3 */
+						<0>,
+						<0>,
+						<&CLK_S_D3_QUADFS 0>,
+						<&CLK_S_D3_QUADFS 0>,
+						<0>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_SYSIN>,
+						/* Clockgen C0 */
+						<0>,
+						<&CLK_S_C0_QUADFS 2>,
+						<&CLK_S_C0_PLL1 0>,
+						<0>,
+						<0>,
+						<0>,
+						<&CLK_S_C0_PLL0 0>,
+						<&CLK_S_C0_PLL0 0>,
+						<&CLK_S_C0_PLL0 0>,
+						<&CLK_S_C0_PLL1 0>,
+						<&CLK_S_C0_PLL0 0>,
+						<&CLK_S_C0_PLL0 0>;
+
+						/* Clockgen D0 */
+		assigned-clock-rates =		<660000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						/* Clockgen D2 */
+						<660000000>,
+						<297000000>,
+						<430000000>,
+						<0>,
+						/* Clockgen D3 */
+						<660000000>,
+						<27000000>,
+						<27000000>,
+						<27000000>,
+						<108000000>,
+						<108000000>,
+						<108000000>,
+						<27000000>,
+						<600000>,
+						/* Clockgen C0 */
+						<27000000>,
+						<27000000>,
+						<200000000>,
+						<250000000>,
+						<125000000>,
+						<125000000>,
+						<355300000>,
+						<266500000>,
+						<533000000>,
+						<600000000>,
+						<355300000>,
+						<266500000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih314.dtsi b/arch/arm/boot/dts/stih314.dtsi
--- a/arch/arm/boot/dts/stih314.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih314.dtsi	2019-09-26 21:23:27.124619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih418.dtsi"
+#include "stih314-clkconf.dtsi"
+/ {
+	clocks {
+		compatible = "st,stih314-clk", "simple-bus";
+	};
+
+	cpus {
+		cpu@0 {
+			operating-points = <
+                               /* kHz   uV, dummy values */
+                               800000   900000
+                               500000   900000
+			 >;
+			cpu0-supply = <&pwm_regulator>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih314cut0-b2188.dts b/arch/arm/boot/dts/stih314cut0-b2188.dts
--- a/arch/arm/boot/dts/stih314cut0-b2188.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih314cut0-b2188.dts	2019-09-26 21:23:27.124619200 +0100
@@ -0,0 +1,20 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Maxime Coquelin <maxime.coquelin@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+#include "stihxxx-b2188.dtsi"
+/ {
+	model = "STiH314 Cut0 B2188";
+	compatible = "st,stih314cut0-b2188", "st,stih314cut0", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih314cut0-b2199.dts b/arch/arm/boot/dts/stih314cut0-b2199.dts
--- a/arch/arm/boot/dts/stih314cut0-b2199.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih314cut0-b2199.dts	2019-09-26 21:23:27.124619200 +0100
@@ -0,0 +1,20 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Maxime Coquelin <maxime.coquelin@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+#include "stihxxx-b2199.dtsi"
+/ {
+	model = "STiH314 Cut0 B2199";
+	compatible = "st,stih314cut0-b2199", "st,stih314cut0", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih314cut0-b2206.dts b/arch/arm/boot/dts/stih314cut0-b2206.dts
--- a/arch/arm/boot/dts/stih314cut0-b2206.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih314cut0-b2206.dts	2019-09-26 21:23:27.124619200 +0100
@@ -0,0 +1,20 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Allen Wu <allen.wu@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+#include "stihxxx-b2206.dtsi"
+/ {
+	model = "STiH314 Cut0 B2206";
+	compatible = "st,stih314cut0-b2206", "st,stih314cut0", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih390-b2214.dts b/arch/arm/boot/dts/stih390-b2214.dts
--- a/arch/arm/boot/dts/stih390-b2214.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih390-b2214.dts	2019-09-26 21:23:27.128619200 +0100
@@ -0,0 +1,145 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Alexandre Torgue <alexandre.torgue@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih390.dtsi"
+/ {
+	model = "STiH390 B2214";
+	compatible = "st,stih390-b2214", "st,stih390";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x40000000>;
+	};
+
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &serial11;
+	};
+
+	aliases {
+		ttyAS0 = &serial11;
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "Analog_out",
+				   "spdif", "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player1 &snd_uni_player2
+				      &snd_uni_player3 &snd_uni_reader1>;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dac",
+				       "sas-dai-spdif-out", "sas-dai-dummy";
+	};
+
+	soc {
+		serial11: serial11@0a1b0000 {
+			status = "okay";
+		};
+
+		/* Uniperipheral players/readers */
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+		spi5: spi5@08a40000 {
+			status = "okay" ;
+		};
+
+		i2c6: i2c6@08a41000 {
+			status = "okay" ;
+		};
+
+		i2c11: i2c11@0a1d0000 {
+			status = "okay" ;
+		};
+
+		/* FlashSS Flash/ eMMC/ SD */
+		mmc0: sdhci@1e300000 {
+			status = "okay";
+		};
+
+		/* SD3.0/SDIO */
+		mmc1: sdhci@1e600000 {
+			status = "okay";
+		};
+
+		nandbch: nand-bch {
+			status = "disabled";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>;		/* delay in us */
+		};
+
+		spisfc: spisfc@1e302000 {
+			/* flash used: n25q256 */
+			status = "okay";
+			partitions = <&b2214_fsm_partitions>;
+
+			b2214_fsm_partitions: partitions-b2214 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@a00000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih390-b2216.dts b/arch/arm/boot/dts/stih390-b2216.dts
--- a/arch/arm/boot/dts/stih390-b2216.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih390-b2216.dts	2019-09-26 21:23:27.128619200 +0100
@@ -0,0 +1,173 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Guillaume Kouadio Carry <guillaume.kouadio-carry@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih390.dtsi"
+/ {
+	model = "STiH390 B2216";
+	compatible = "st,stih390-b2216", "st,stih390";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x40000000>;
+	};
+
+	chosen {
+		bootargs = "lpj=1994752 console=ttyAS0,115200 earlyprintk";
+		linux,stdout-path = &serial11;
+	};
+
+	aliases {
+		ttyAS0 = &serial11;
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "I2S_out", "HDMI_out",
+				   "Analog_out", "spdif",
+				   "I2S_in", "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player1
+				      &snd_uni_player2 &snd_uni_player3
+				      &snd_uni_reader0 &snd_uni_reader1>;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dummy",
+				       "sas-dai-dac", "sas-dai-spdif-out",
+				       "sas-dai-dummy", "sas-dai-dummy";
+	};
+
+	soc {
+		serial10: serial10@0a1a0000 {
+			status = "okay" ;
+		};
+
+		serial11: serial11@0a1b0000 {
+			status = "okay" ;
+		};
+
+		spi10: spi10@0a1c0000 {
+			status = "okay" ;
+		};
+
+		i2c12: i2c12@0a1e0000 {
+			status = "okay" ;
+		};
+
+		/* FlashSS Flash/ eMMC/ SD */
+		mmc0: sdhci@1e300000 {
+			status = "okay";
+		};
+
+		/* SD3.0/SDIO */
+		mmc1: sdhci@1e600000 {
+			status = "okay";
+		};
+
+		spi5: spi5@08a40000 {
+			status = "okay" ;
+		};
+
+		i2c6: i2c6@08a41000 {
+			status = "okay" ;
+		};
+
+		i2c11: i2c11@0a1d0000 {
+			status = "okay" ;
+		};
+
+		serial3: serial3@08a30000 {
+			status = "okay" ;
+		};
+
+		/* Uniperipheral players/readers */
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			status = "okay";
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+		nandbch: nand-bch {
+			status = "okay";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>;		/* delay in us */
+		};
+
+		spisfc: spisfc@1e302000 {
+			/* flash used: mx25l25635f */
+			status = "okay";
+			partitions = <&b2216_fsm_partitions>;
+
+			b2216_fsm_partitions: partitions-b2216 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@a00000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih390-clks-refs.h b/arch/arm/boot/dts/stih390-clks-refs.h
--- a/arch/arm/boot/dts/stih390-clks-refs.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih390-clks-refs.h	2019-09-26 21:23:27.128619200 +0100
@@ -0,0 +1,90 @@
+/*
+ * This header for constants clk index STMicroelectronics
+ * STiH390 SoC.
+ */
+#ifndef _DT_BINDINGS_CLK_STIH390
+#define _DT_BINDINGS_CLK_STIH390
+
+/* Clockgen_A0_FlexGen */
+#define CLK_ICN_LMI			CLK_S_A0_FLEXGEN 0
+
+/* Clockgen_C0_FlexGen */
+#define CLK_SLIM_CC		CLK_S_C0_FLEXGEN 0
+#define CLK_SPI			CLK_S_C0_FLEXGEN 1
+#define CLK_FLASH		CLK_S_C0_FLEXGEN 2
+#define CLK_ICN_BD		CLK_FLASH
+#define CLK_MMC_0		CLK_S_C0_FLEXGEN 3
+#define CLK_PERIPH_TS		CLK_S_C0_FLEXGEN 4
+#define CLK_EXT2F_A9		CLK_S_C0_FLEXGEN 5
+#define CLK_ICN_TS		CLK_S_C0_FLEXGEN 6
+#define CLK_NAND		CLK_S_C0_FLEXGEN 7
+#define CLK_MMC_1		CLK_S_C0_FLEXGEN 8
+#define CLK_ST231_GP_2		CLK_S_C0_FLEXGEN 9
+#define CLK_ST231_VDEC		CLK_S_C0_FLEXGEN 10
+#define CLK_ST231_GP_0		CLK_S_C0_FLEXGEN 11
+#define CLK_ST231_GP_1_AUDIO	CLK_S_C0_FLEXGEN 12
+#define CLK_ETH_GMAC_S		CLK_S_C0_FLEXGEN 13
+#define CLK_GMAC_S_PHYCLK	CLK_S_C0_FLEXGEN 14
+#define CLK_ETH_GMAC_W		CLK_S_C0_FLEXGEN 15
+#define CLK_GMAC_W_PHYCLK	CLK_S_C0_FLEXGEN 16
+#define CLK_STBE		CLK_S_C0_FLEXGEN 17
+#define CLK_HEVC_H264		CLK_S_C0_FLEXGEN 18
+#define CLK_HEVC		CLK_HEVC_H264
+#define CLK_H264		CLK_HEVC_H264
+#define CLK_AVSP		CLK_S_C0_FLEXGEN 19
+#define CLK_TIMER_A9		CLK_S_C0_FLEXGEN 20
+#define CLK_SLIM_VDEC		CLK_S_C0_FLEXGEN 21
+#define CLK_DEC_JPEG		CLK_S_C0_FLEXGEN 22
+#define CLK_WIFI		CLK_S_C0_FLEXGEN 23
+#define CLK_RX_ICN_L0L1		CLK_S_C0_FLEXGEN 24
+#define CLK_FRC_1		CLK_S_C0_FLEXGEN 25
+#define CLK_FRC_1_PAD		CLK_S_C0_FLEXGEN 26
+#define CLK_DVP_PROC		CLK_S_C0_FLEXGEN 27
+#define CLK_TX_ICN_L0L1		CLK_S_C0_FLEXGEN 28
+#define CLK_SYS_CLK_OUT		CLK_S_C0_FLEXGEN 29
+#define CLK_SYSTEM_STFE		CLK_S_C0_FLEXGEN 30
+#define CLK_SLIM_FDMA_1		CLK_S_C0_FLEXGEN 32
+#define CLK_ATB			CLK_S_C0_FLEXGEN 33
+#define CLK_TRACE		CLK_S_C0_FLEXGEN 34
+#define CLK_BDISP		CLK_S_C0_FLEXGEN 35
+#define CLK_PROC_VDP		CLK_S_C0_FLEXGEN 36
+#define CLK_DSS			CLK_S_C0_FLEXGEN 37
+#define CLK_LPC			CLK_S_C0_FLEXGEN 39
+#define CLK_GPU			CLK_S_C0_FLEXGEN 40
+#define CLK_ICN_WIFI		CLK_S_C0_FLEXGEN 41
+#define CLK_ICN_DISP		CLK_S_C0_FLEXGEN 42
+#define CLK_ICN_CPU		CLK_S_C0_FLEXGEN 43
+#define CLK_PERIPH_WIFI		CLK_S_C0_FLEXGEN 44
+#define CLK_SLIM_FDMA_0		CLK_S_C0_FLEXGEN 45
+#define CLK_PERIPH_DISP		CLK_S_C0_FLEXGEN 46
+#define CLK_PERIPH_CPU		CLK_S_C0_FLEXGEN 47
+
+/* Clockgen_D0_FlexGen */
+#define CLK_PCM_0		CLK_S_D0_FLEXGEN 0
+#define CLK_PCM_1		CLK_S_D0_FLEXGEN 1
+#define CLK_PCM_2		CLK_S_D0_FLEXGEN 2
+#define CLK_SPDIF		CLK_S_D0_FLEXGEN 3
+#define CLK_PCMR_0_MASTER	CLK_S_D0_FLEXGEN 4
+#define CLK_MCLK_OUT		CLK_S_D0_FLEXGEN 5
+
+/* Clockgen_D1_FlexGen */
+#define CLK_PIX_MAIN_DISP	CLK_S_D1_FLEXGEN 0
+#define CLK_PIX_AUX_DISP	CLK_S_D1_FLEXGEN 1
+#define CLK_PIX_HDDAC		CLK_S_D1_FLEXGEN 2
+#define CLK_HDDAC		CLK_S_D1_FLEXGEN 3
+#define CLK_TVOUT_SDDAC		CLK_S_D1_FLEXGEN 6
+#define CLK_PIX_HDMI		CLK_S_D1_FLEXGEN 7
+#define CLK_DENC		CLK_S_D1_FLEXGEN 8
+#define CLK_REF_HDMIPHY		CLK_S_D1_FLEXGEN 9
+#define CLK_TMDS_HDMI		CLK_S_D1_FLEXGEN 10
+#define CLK_PROC_HQVDP		CLK_S_D1_FLEXGEN 11
+#define CLK_IQI_HQVDP		CLK_S_D1_FLEXGEN 12
+#define CLK_PROC_MIXER		CLK_S_D1_FLEXGEN 13
+#define CLK_PROC_GDP_COMPO	CLK_S_D1_FLEXGEN 14
+#define CLK_PWM			CLK_S_D1_FLEXGEN 15
+#define CLK_FRC_0		CLK_S_D1_FLEXGEN 16
+#define CLK_FRC_0_PAD		CLK_S_D1_FLEXGEN 17
+#define CLK_FRC_2		CLK_S_D1_FLEXGEN 18
+#define CLK_HDMI_PHASE_REG	CLK_S_D1_FLEXGEN 40
+
+#endif
diff -urNp a/arch/arm/boot/dts/stih390-clock.dtsi b/arch/arm/boot/dts/stih390-clock.dtsi
--- a/arch/arm/boot/dts/stih390-clock.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih390-clock.dtsi	2019-09-26 21:23:27.128619200 +0100
@@ -0,0 +1,632 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics R&D Limited
+ * Author: Guillaume Kouadio Carry <guillaume.kouadio-carry@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include "dt-bindings/reset-controller/stih390-resets.h"
+
+/ {
+	fcgate_clocks {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges;
+
+		/* FC - HSIF */
+		usb3_hsif: usb3_hsif@7000 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc7_hsif SYSCFG_7000 16>;
+			#power-domain-cells = <0>;
+		};
+
+		usb2_hsif: usb2_hsif@7010 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc7_hsif SYSCFG_7010 16>;
+			#power-domain-cells = <0>;
+		};
+
+		gmac_hsif: gmac_hsif@7060 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc7_hsif SYSCFG_7060 16>;
+			#power-domain-cells = <0>;
+		};
+
+		hsif_fc:hsif_fc {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&usb3_hsif>, <&usb2_hsif>, <&gmac_hsif>;
+		};
+
+		/* FC - VDEC */
+		c8vdec_vdec:c8vdec_vdec@3000 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc3_vdec SYSCFG_3000 16>;
+			#power-domain-cells = <0>;
+		};
+
+		c8had_vdec:c8had_vdec@3001 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc3_vdec SYSCFG_3001 16>;
+			#power-domain-cells = <0>;
+		};
+
+		c8jpg_vdec:c8jpg_vdec@3002 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc3_vdec SYSCFG_3002 16>;
+			#power-domain-cells = <0>;
+		};
+
+		st231dmu_vdec:st231dmu_vdec@3003 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc3_vdec SYSCFG_3003 16>;
+			#power-domain-cells = <0>;
+		};
+
+		mbxdmu_vdec:mbxdmu_vdec@3004 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc3_vdec SYSCFG_3004 16>;
+			#power-domain-cells = <0>;
+		};
+
+		vdec_fc:vdec_fc {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&c8vdec_vdec>, <&c8had_vdec>,
+			<&c8jpg_vdec>, <&st231dmu_vdec>, <&mbxdmu_vdec>;
+		};
+
+		/* FC - BOOTDEV */
+		sdemmc0_bootdev:sdemmc0_bootdev@11006 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc11_bootdev SYSCFG_11006 16>;
+			#power-domain-cells = <0>;
+		};
+
+		nandpwrdn_bootdev:nandpwrdn_bootdev@11008 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc11_bootdev SYSCFG_11008 17>;
+			#power-domain-cells = <0>;
+		};
+
+		nand_bootdev:nand_bootdev@11008 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc11_bootdev SYSCFG_11008 16>;
+			#power-domain-cells = <0>;
+		};
+
+		spi_bootdev:spi_bootdev@11009 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc11_bootdev SYSCFG_11009 16>;
+			#power-domain-cells = <0>;
+		};
+
+		emmc_bootdev:emmc_bootdev@11010 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc11_bootdev SYSCFG_11010 16>;
+			#power-domain-cells = <0>;
+		};
+
+		bootdev_fc:bootdev_fc {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&sdemmc0_bootdev>, <&nandpwrdn_bootdev>,
+			<&nand_bootdev>, <&spi_bootdev>, <&emmc_bootdev>;
+		};
+
+		/* FC - TS */
+		stfe_ts:stfe_ts@13000 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc13_ts SYSCFG_13000 16>;
+			#power-domain-cells = <0>;
+		};
+
+		stbe_ts:stbe_ts@13008 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc13_ts SYSCFG_13008 16>;
+			#power-domain-cells = <0>;
+		};
+
+		ts_fc:ts_fc {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&stfe_ts>, <&stbe_ts>;
+		};
+
+		/* FC - GPU */
+		mali_gpu:mali_gpu@10000 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc10_gpu SYSCFG_10000 16>;
+			#power-domain-cells = <0>;
+		};
+
+		ths_gpu:ths_gpu@10010 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc10_gpu SYSCFG_10010 16>;
+			#power-domain-cells = <0>;
+		};
+
+		gpu_fc:gpu_fc {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&mali_gpu>, <&ths_gpu>;
+		};
+
+		/* FC - ST231 */
+		gp0_st231ss:gp0_st231ss@9010 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc9_st231ss SYSCFG_9010 16>;
+			#power-domain-cells = <0>;
+		};
+
+		gp1_st231ss:gp1_st231ss@9020 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc9_st231ss SYSCFG_9020 16>;
+			#power-domain-cells = <0>;
+		};
+
+		st231ss_fc:st231ss_fc {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&gp0_st231ss>, <&gp1_st231ss>;
+		};
+
+		/* FC - WIFI */
+		gmacw_wifi:gmacw_wifi@2000 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc2_wifi SYSCFG_2000 16>;
+			#power-domain-cells = <0>;
+		};
+
+		wifiwrap_wifi:wifiwrap_wifi@2010 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc2_wifi SYSCFG_2010 16>;
+			#power-domain-cells = <0>;
+		};
+
+		wifi_fc:wifi_fc {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&gmacw_wifi>, <&wifiwrap_wifi>;
+		};
+
+		/* FC - DISPLAY */
+		hqvdp_display:hqvdp_display@6000 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6000 16>;
+			#power-domain-cells = <0>;
+		};
+
+		vdpaux_display:vdpaux_display@6001 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6001 16>;
+			#power-domain-cells = <0>;
+		};
+
+		compo_display:compo_display@6002 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6002 16>;
+			#power-domain-cells = <0>;
+		};
+
+		hdtvout_display:hdtvout_display@6003 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6003 16>;
+			#power-domain-cells = <0>;
+		};
+
+		fdma0_display:fdma0_display@6004 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6004 16>;
+			#power-domain-cells = <0>;
+		};
+
+		fdma1_display:fdma1_display@6005 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6005 16>;
+			#power-domain-cells = <0>;
+		};
+
+		uplayer1_display:uplayer1_display@6006 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6006 16>;
+			#power-domain-cells = <0>;
+		};
+
+		uplayer2_display:uplayer2_display@6007 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6007 16>;
+			#power-domain-cells = <0>;
+		};
+
+		uplayer3_display:uplayer3_display@6008 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6008 16>;
+			#power-domain-cells = <0>;
+		};
+
+		ureader1_display:ureader1_display@6009 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6009 16>;
+			#power-domain-cells = <0>;
+		};
+
+		bdisp_display:bdisp_display@6010 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6010 16>;
+			#power-domain-cells = <0>;
+		};
+
+		hdmirx_display:hdmirx_display@6011 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6011 16>;
+			#power-domain-cells = <0>;
+		};
+
+		hdmirx_phy_display:hdmirx_phy_display@6012 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6012 16>;
+			#power-domain-cells = <0>;
+		};
+
+		dvpin_display:dvpin_display@6013 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6013 16>;
+			#power-domain-cells = <0>;
+		};
+
+		hdmitx_phy_display:hdmitx_phy_display@6014 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_fc6_display SYSCFG_6014 16>;
+			#power-domain-cells = <0>;
+		};
+
+		display_fc:display_fc {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&hqvdp_display>, <&vdpaux_display>,
+			<&compo_display>, <&hdtvout_display>, <&fdma0_display>,
+			<&fdma1_display>,<&uplayer1_display>, <&uplayer2_display>,
+			<&uplayer3_display>, <&ureader1_display>, <&bdisp_display>,
+			<&hdmirx_display>, <&hdmirx_phy_display>, <&dvpin_display>,
+			<&hdmitx_phy_display>;
+		};
+
+		/* FC - ARMCORES */
+		nic301_armcores: nic301_armcores@15000 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_a9 SYSCFG_15000 16>;
+			#power-domain-cells = <0>;
+		};
+
+		debug_armcores: debug_armcores@15001 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_a9 SYSCFG_15001 16>;
+			#power-domain-cells = <0>;
+		};
+
+		atb_armcores: atb_armcores@15002 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_a9 SYSCFG_15002 16>;
+			#power-domain-cells = <0>;
+		};
+
+		trace_armcores: trace_armcores@15003 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_a9 SYSCFG_15003 16>;
+			#power-domain-cells = <0>;
+		};
+
+		stbus2axi_armcores: stbus2axi_armcores@15004 {
+			compatible = "st,fcgate-pd";
+			st,syscfg = <&syscfg_a9 SYSCFG_15004 16>;
+			#power-domain-cells = <0>;
+		};
+
+		armcores_fc: armcores_fc {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&nic301_armcores>, <&debug_armcores>,
+			<&atb_armcores>, <&trace_armcores>, <&stbus2axi_armcores>;
+		};
+	};
+
+	fcgate_grp: fcgate_grp {
+		compatible = "st,grp-pd";
+		#power-domain-cells = <0>;
+		power-domains = <&hsif_fc>, <&vdec_fc>, <&bootdev_fc>,
+		<&ts_fc>, <&gpu_fc>, <&st231ss_fc>, <&wifi_fc>, <&display_fc>,
+		<&armcores_fc>;
+	};
+
+	clocks {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges;
+		compatible = "st,stih390-clk", "simple-bus";
+		power-domains = <&fcgate_grp>;
+
+		/*
+		 * Fixed 30MHz oscillator inputs to SoC
+		 */
+		CLK_SYSIN: CLK_SYSIN {
+			#clock-cells = <0>;
+			compatible = "fixed-clock";
+			clock-frequency = <30000000>;
+			clock-output-names = "CLK_SYSIN";
+		};
+
+		/*
+		 * Fixed clock added to act as parent for flexigen parents
+		 * for unused values in the multiplexer registers
+		 */
+		CLK_INVALID: CLK_INVALID {
+			#clock-cells = <0>;
+			compatible = "fixed-clock";
+			clock-frequency = <0>;
+			clock-output-names = "CLK_INVALID";
+		};
+
+		CLK_S_A0: clockgenA@8060000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8060000 0x1000>;
+
+			CLK_S_A0_PLL0: CLK_S_A0_PLL0 {
+				compatible = "st,plls-c32-bx", "st,clkgen-plls-c32";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_A0_PLL0_ODF_0",
+						     "CLK_S_A0_PLL0_ODF_1",
+						     "CLK_S_A0_PLL0_ODF_2",
+						     "CLK_S_A0_PLL0_ODF_3";
+			};
+
+			CLK_S_A0_FLEXGEN: CLK_S_A0_FLEXGEN {
+				compatible = "st,flexgen";
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_A0_PLL0 0>,
+					 <&CLK_S_A0_PLL0 1>,
+					 <&CLK_S_A0_PLL0 2>,
+					 <&CLK_S_A0_PLL0 3>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_ICN_LMI";
+			};
+		};
+
+		CLK_S_C0_QUADFS: CLK_S_C0_QUADFS {
+			compatible = "st,quadfs660-B", "st,quadfs";
+			reg = <0x8000000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_C0_FS0_CH0",
+					     "CLK_S_C0_FS0_CH1",
+					     "CLK_S_C0_FS0_CH2",
+					     "CLK_S_C0_FS0_CH3",
+					     "CLK_S_C0_FS0_VCO";
+		};
+
+		CLK_S_C0: clockgenC@8000000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8000000 0x1000>;
+
+			CLK_S_C0_PLL0: CLK_S_C0_PLL0 {
+				compatible = "st,plls-c32-bx", "st,clkgen-plls-c32";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_C0_PLL0_ODF_0",
+						     "CLK_S_C0_PLL0_ODF_1",
+						     "CLK_S_C0_PLL0_ODF_2",
+						     "CLK_S_C0_PLL0_ODF_3";
+			};
+
+			CLK_S_C0_PLL1: CLK_S_C0_PLL1 {
+				compatible = "st,plls-c32-bx", "st,clkgen-plls-c32";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_C0_PLL1_ODF_0",
+						     "CLK_S_C0_PLL1_ODF_1",
+						     "CLK_S_C0_PLL1_ODF_2",
+						     "CLK_S_C0_PLL1_ODF_3";
+			};
+
+			CLK_S_C0_FLEXGEN: CLK_S_C0_FLEXGEN {
+				compatible = "st,flexgen";
+
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_C0_PLL0 0>,
+					 <&CLK_S_C0_PLL0 1>,
+					 <&CLK_S_C0_PLL0 2>,
+					 <&CLK_S_C0_PLL0 3>,
+					 <&CLK_S_C0_PLL1 0>,
+					 <&CLK_S_C0_PLL1 1>,
+					 <&CLK_S_C0_PLL1 2>,
+					 <&CLK_S_C0_PLL1 3>,
+					 <&CLK_S_C0_QUADFS 4>,
+					 <&CLK_S_C0_QUADFS 0>,
+					 <&CLK_S_C0_QUADFS 1>,
+					 <&CLK_S_C0_QUADFS 2>,
+					 <&CLK_S_C0_QUADFS 3>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_SLIM_CC", /*div_0 */
+						     "CLK_SPI",
+						     "CLK_FLASH",
+						     "CLK_MMC_0",
+						     "CLK_PERIPH_TS",
+						     "CLK_EXT2F_A9",
+						     "CLK_ICN_TS",
+						     "CLK_NAND",
+						     "CLK_MMC_1",
+						     "CLK_ST231_GP_2",
+						     "CLK_ST231_VDEC", /*div_10 */
+						     "CLK_ST231_GP_0",
+						     "CLK_ST231_GP_1_AUDIO",
+						     "CLK_ETH_GMAC_S",
+						     "CLK_GMAC_S_PHYCLK",
+						     "CLK_ETH_GMAC_W",
+						     "CLK_GMAC_W_PHYCLK",
+						     "CLK_STBE",
+						     "CLK_HEVC_H264",
+						     "CLK_AVSP",
+						     "CLK_TIMER_A9", /*div_20 */
+						     "CLK_SLIM_VDEC",
+						     "CLK_DEC_JPEG",
+						     "CLK_WIFI",
+						     "CLK_RX_ICN_L0L1",
+						     "CLK_FRC_1",
+						     "CLK_FRC_1_PAD",
+						     "CLK_DVP_PROC",
+						     "CLK_TX_ICN_L0L1",
+						     "CLK_SYS_CLK_OUT",
+						     "CLK_SYSTEM_STFE", /*div_30 */
+						     "",
+						     "CLK_SLIM_FDMA_1",
+						     "CLK_ATB",
+						     "CLK_TRACE",
+						     "CLK_BDISP",
+						     "CLK_PROC_VDP",
+						     "CLK_DSS",
+						     "",
+     						     "CLK_LPC",
+						     "CLK_GPU", /*div_40 */
+						     "CLK_ICN_WIFI",
+						     "CLK_ICN_DISP",
+						     "CLK_ICN_CPU",
+						     "CLK_PERIPH_WIFI",
+						     "CLK_SLIM_FDMA_0",
+						     "CLK_PERIPH_DISP",
+						     "CLK_PERIPH_CPU"; /*div_47 */
+				};
+		};
+
+		CLK_S_D0_QUADFS: CLK_S_D0_QUADFS {
+			compatible = "st,quadfs660-B", "st,quadfs";
+			reg = <0x8030000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D0_FS0_CH0",
+					     "CLK_S_D0_FS0_CH1",
+					     "CLK_S_D0_FS0_CH2",
+					     "CLK_S_D0_FS0_CH3",
+					     "CLK_S_D0_FS0_VCO";
+		};
+
+		CLK_S_D0: clockgenD@8030000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8030000 0x1000>;
+
+			CLK_S_D0_FLEXGEN: CLK_S_D0_FLEXGEN {
+				compatible = "st,flexgen";
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_D0_QUADFS 4>,
+					 <&CLK_S_D0_QUADFS 0>,
+					 <&CLK_S_D0_QUADFS 1>,
+					 <&CLK_S_D0_QUADFS 2>,
+					 <&CLK_S_D0_QUADFS 3>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_PCM_0", /* div_0 */
+						     "CLK_PCM_1",
+						     "CLK_PCM_2",
+						     "CLK_SPDIF",
+						     "CLK_PCMR_0_MASTER",
+						     "CLK_MCLK_OUT"; /* div_5 */
+			};
+		};
+
+		/*
+		 * SRCCLKIN_0 is the clock source for TMDS_CLK
+		 */
+		SRCCLKIN_0: SRCCLKIN_0 {
+			#clock-cells = <0>;
+			compatible = "fixed-clock";
+			clock-frequency = <225000000>;
+		};
+
+		CLK_S_D1_QUADFS: CLK_S_D1_QUADFS {
+			compatible = "st,quadfs660-B", "st,quadfs";
+			reg = <0x8040000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D1_FS0_CH0",
+					     "CLK_S_D1_FS0_CH1",
+					     "CLK_S_D1_FS0_CH2",
+					     "CLK_S_D1_FS0_CH3",
+					     "CLK_S_D1_FS0_VCO";
+		};
+
+
+		CLK_S_D1: clockgenD@8040000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x8040000 0x1000>;
+
+			CLK_S_D1_FLEXGEN: CLK_S_D1_FLEXGEN {
+				compatible = "st,flexgen";
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_D1_QUADFS 4>,
+					 <&CLK_S_D1_QUADFS 0>,
+					 <&CLK_S_D1_QUADFS 1>,
+					 <&CLK_S_D1_QUADFS 2>,
+					 <&CLK_S_D1_QUADFS 3>,
+					 <&SRCCLKIN_0>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_INVALID>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_PIX_MAIN_DISP", /* div_0 */
+						     "CLK_PIX_AUX_DISP",
+						     "CLK_PIX_HDDAC",
+						     "CLK_HDDAC",
+						     "",
+						     "",
+						     "CLK_SDDAC",
+						     "CLK_PIX_HDMI",
+						     "CLK_DENC",
+						     "CLK_REF_HDMIPHY",
+						     "CLK_TMDS_HDMI", /* div_10 */
+						     "CLK_PROC_HQVDP",
+ 						     "CLK_IQI_HQVDP",
+						     "CLK_PROC_MIXER",
+     						     "CLK_PROC_GDP_COMPO",
+						     "CLK_PWM",
+						     "CLK_FRC_0",
+ 						     "CLK_FRC_0_PAD",
+ 						     "CLK_FRC_2",
+						     "","",/* div_20 */
+						     "","","","","",
+						     "","","","","",/* div_30 */
+						     "","","","","",
+						     "","","","","CLK_HDMI_PHASE_REG";/* div_40 */
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih390-pinctrl.dtsi b/arch/arm/boot/dts/stih390-pinctrl.dtsi
--- a/arch/arm/boot/dts/stih390-pinctrl.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih390-pinctrl.dtsi	2019-09-26 21:23:27.128619200 +0100
@@ -0,0 +1,893 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics Limited.
+ * Author: Guillaume Kouadio Carry <guillaume.kouadio-carry@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include <dt-bindings/pinctrl/st-pincfg.h>
+#include <dt-bindings/interrupt-controller/arm-gic.h>
+/ {
+	aliases {
+		/* PIO for FC_BACKBONE */
+
+		/* 0-3: PIO_VSAFE */
+		gpio0 = &PIO0;
+		gpio1 = &PIO1;
+		gpio2 = &PIO2;
+		gpio3 = &PIO3;
+
+		/* 10-12: PIO_FRONT1 */
+		gpio4 = &PIO10;
+		gpio5 = &PIO11;
+		gpio6 = &PIO12;
+
+		/* 20-25: PIO_FRONT0 */
+		gpio7 = &PIO20;
+		gpio8 = &PIO21;
+		gpio9 = &PIO22;
+		gpio10 = &PIO23;
+		gpio11 = &PIO24;
+		gpio12 = &PIO25;
+
+		/* 30-34: PIO_REAR */
+		gpio13 = &PIO30;
+		gpio14 = &PIO31;
+		gpio15 = &PIO32;
+		gpio16 = &PIO33;
+		gpio17 = &PIO34;
+
+		/* 40-42: PIO_FLASH */
+		gpio18 = &PIO40;
+		gpio19 = &PIO41;
+		gpio20 = &PIO42;
+
+	};
+
+	soc {
+		/* FC_VSAFE PIO_VSAFE */
+		pin-controller-vsafe{
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih390-vsafe-pinctrl";
+			st,syscfg = <&syscfg_pio_vsafe>;
+			ranges = <0 0x0a500000 0x4000>;
+			reg = <0x0a50f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 198 IRQ_TYPE_NONE>;
+			interrupts-names = "irqmux";
+
+			PIO0: gpio@0a500000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO0";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO1: gpio@0a501000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO1";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO2: gpio@a502000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO2";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO3: gpio@0a503000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO3";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			serial10 {
+				 pinctrl_vsafe_serial10_alt1_0: serial10_alt1-0 {
+					st,pins {
+						tx = <&PIO0 1 ALT1 OUT>;
+						rx = <&PIO0 2 ALT1 IN>;
+					};
+				 };
+				 pinctrl_vsafe_serial10_alt2_0: serial10_alt2-0 {
+					st,pins {
+						tx = <&PIO1 1 ALT2 OUT>;
+						rx = <&PIO1 0 ALT2 IN>;
+					};
+				};
+			};
+
+			serial11 {
+				 pinctrl_vsafe_serial11_alt2_0: serial11_alt2-0 {
+					st,pins {
+						tx = <&PIO0 4 ALT2 OUT>;
+						rx = <&PIO0 7 ALT2 IN>;
+					};
+				};
+				 pinctrl_vsafe_serial11_alt2_1: serial11_alt2-1 {
+					st,pins {
+						tx = <&PIO1 4 ALT2 OUT>;
+						rx = <&PIO1 5 ALT2 IN>;
+					};
+				};
+			};
+
+			spi10 {
+			       pinctrl_vsafe_spi10_4w_alt1_0: spi10_4w_alt1-0 {
+					st,pins {
+						 mrst = <&PIO0 7 ALT1 BIDIR>;
+						 scl = <&PIO0 5 ALT1 BIDIR>;
+						 mtsr = <&PIO0 6 ALT1 BIDIR>;
+					};
+			       };
+			       pinctrl_vsafe_spi10_4w_alt2_0: spi10_4w_alt2-0 {
+					st,pins {
+						 mrst = <&PIO0 3 ALT2 BIDIR>;
+						 scl = <&PIO0 1 ALT2 BIDIR>;
+						 mtsr = <&PIO0 2 ALT2 BIDIR>;
+					};
+			       };
+			};
+
+			spi12 {
+			       pinctrl_vsafe_spi12_4w_alt1_0: spi12_4w_alt1-0 {
+					st,pins {
+						 mrst = <&PIO1 0 ALT1 BIDIR>;
+						 scl = <&PIO1 3 ALT1 BIDIR>;
+						 mtsr = <&PIO1 2 ALT1 BIDIR>;
+					};
+			       };
+			       pinctrl_vsafe_spi12_4w_alt2_0: spi12_4w_alt2-0 {
+					st,pins {
+						 mrst = <&PIO2 3 ALT2 BIDIR>;
+						 scl = <&PIO2 1 ALT2 BIDIR>;
+						 mtsr = <&PIO2 2 ALT2 BIDIR>;
+					};
+			       };
+			};
+
+			i2c12 {
+			       pinctrl_vsafe_i2c12_alt1_0: i2c12_alt1-0 {
+					st,pins {
+						 scl = <&PIO1 3 ALT1 BIDIR>;
+						 sda = <&PIO1 2 ALT1 BIDIR>;
+					};
+			       };
+			       pinctrl_vsafe_i2c12_alt2_0: i2c12_alt2-0 {
+					st,pins {
+						 scl = <&PIO2 1 ALT2 BIDIR>;
+						 sda = <&PIO2 2 ALT2 BIDIR>;
+					};
+			       };
+			};
+
+			spi11 {
+			       pinctrl_vsafe_spi11_3w_alt1_0: spi13_3w_alt1-0 {
+					st,pins {
+						 scl = <&PIO2 4 ALT1 BIDIR>;
+						 mtsr = <&PIO2 5 ALT1 BIDIR>;
+					};
+			       };
+			};
+
+			i2c11 {
+			       pinctrl_vsafe_i2c11_alt1_0: i2c11_alt1-0 {
+					st,pins {
+						 scl = <&PIO2 4 ALT1 BIDIR>;
+						 sda = <&PIO2 5 ALT1 BIDIR>;
+					};
+			       };
+			};
+
+			pwm10 {
+				pinctrl_vsafe_pwm10: pwm10-0 {
+					st,pins {
+						pwm_out = <&PIO0 4 ALT1 OUT>;
+					};
+				};
+			};
+
+			pwm11 {
+				pinctrl_vsafe_pwm11: pwm11-0 {
+					st,pins {
+						pwm_out = <&PIO0 7 ALT3 OUT>;
+					};
+				};
+			};
+
+			pwm12 {
+				pinctrl_vsafe_pwm12: pwm12-0 {
+					st,pins {
+						pwm_out = <&PIO2 2 ALT3 OUT>;
+					};
+				};
+			};
+
+			pwm13 {
+				pinctrl_vsafe_pwm13: pwm13-0 {
+					st,pins {
+						pwm_out = <&PIO2 3 ALT3 OUT>;
+					};
+				};
+			};
+
+			keyscan {
+				pinctrl_keyscan: keyscan {
+					st,pins {
+						keyin0 = <&PIO1 4 ALT1 IN>;
+						keyin1 = <&PIO1 5 ALT1 IN>;
+						keyin2 = <&PIO2 0 ALT1 IN>;
+						keyin3 = <&PIO2 1 ALT2 IN>;
+						keyout0 = <&PIO1 6 ALT1 OUT>;
+						keyout1 = <&PIO1 7 ALT1 OUT>;
+						keyout2 = <&PIO2 2 ALT1 OUT>;
+						keyout3 = <&PIO2 3 ALT1 OUT>;
+					};
+				};
+			};
+		};
+
+		/* FC_BACKBONE PIO_FRONT1 */
+		pin-controller-front-1 {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih390-front1-pinctrl";
+			st,syscfg = <&syscfg_pio_front_1>;
+			ranges = <0 0x08210000 0x6000>;
+			reg = <0x0821f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 200 IRQ_TYPE_NONE>;
+			interrupts-names = "irqmux";
+
+			PIO10: gpio@08210000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO10";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO11: gpio@08211000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO11";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO12: gpio@08212000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO12";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			synp_gmac {
+				pinctrl_front1_rgmii: rgmii {
+					st,pins {
+						txd0 = <&PIO10 0 ALT2 OUT DE_IO 0 CLK_A>;
+						txd1 = <&PIO10 1 ALT2 OUT DE_IO 0 CLK_A>;
+						txd2 = <&PIO10 2 ALT2 OUT DE_IO 0 CLK_A>;
+						txd3 = <&PIO10 3 ALT2 OUT DE_IO 0 CLK_A>;
+						txen = <&PIO11 6 ALT2 OUT DE_IO 0 CLK_A>;
+						txclk = <&PIO11 7 ALT2 OUT NICLK 0 CLK_A>;
+
+						mdio = <&PIO11 0 ALT2 BIDIR_PU BYPASS 0>;
+						mdc = <&PIO11 2 ALT2 OUT NICLK 0 CLK_A>;
+						mdint = <&PIO11 3 ALT2 IN BYPASS 0>;
+						rxd0 = <&PIO10 4 ALT2 IN DE_IO 0 CLK_A>;
+						rxd1 = <&PIO10 5 ALT2 IN DE_IO 0 CLK_A>;
+						rxd2 = <&PIO10 6 ALT2 IN DE_IO 0 CLK_A>;
+						rxd3 = <&PIO10 7 ALT2 IN DE_IO 0 CLK_A>;
+
+						rxdv = <&PIO11 1 ALT2 IN DE_IO 0 CLK_A>;
+						rxclk = <&PIO11 5 ALT2 IN NICLK 0 CLK_A>;
+						phyclk = <&PIO11 4 ALT2 OUT NICLK 1750 CLK_A>;
+					};
+				};
+			};
+		};
+
+		/* FC_BACKBONE PIO_FRONT0 */
+		pin-controller-front0 {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih390-front0-pinctrl";
+			st,syscfg = <&syscfg_pio_front_0>;
+			ranges = <0 0x08200000 0x6000>;
+			reg = <0x0820f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 199 IRQ_TYPE_NONE>;
+			interrupts-names = "irqmux";
+
+			PIO20: gpio@08200000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO20";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO21: gpio@08201000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO21";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO22: gpio@08202000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO22";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO23: gpio@08203000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO23";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO24: gpio@08204000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO24";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO25: gpio@08205000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x5000 0x100>;
+				st,bank-name = "PIO25";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			serial0 {
+				pinctrl_front0_serial0: serial0-0 {
+					st,pins {
+						tx = <&PIO21 0 ALT2 OUT>;
+						rx = <&PIO21 1 ALT2 IN>;
+					};
+				};
+			};
+
+			serial1 {
+				pinctrl_front0_serial1_alt2_0: serial1_alt2-0 {
+					st,pins {
+						tx = <&PIO22 7 ALT2 OUT>;
+						rx = <&PIO23 0 ALT2 IN>;
+					};
+				};
+				pinctrl_front0_serial1_alt3_0: serial1_alt3-0 {
+					st,pins {
+						tx = <&PIO25 2 ALT3 OUT>;
+						rx = <&PIO25 2 ALT3 IN>;
+					};
+				};
+			};
+
+			serial2 {
+				pinctrl_front0_serial2_alt2_0: serial2-alt2-0 {
+					st,pins {
+						tx = <&PIO23 3 ALT2 OUT>;
+						rx = <&PIO23 4 ALT2 IN>;
+					};
+				};
+				pinctrl_front0_serial2_alt2_1: serial2_alt2-1 {
+					st,pins {
+						tx = <&PIO24 4 ALT2 OUT>;
+						rx = <&PIO24 7 ALT2 IN>;
+					};
+				};
+			};
+
+			spi3 {
+			      pinctrl_front0_spi3_4w_alt2_0: spi3_4w_alt2-0 {
+					st,pins {
+						 mrst = <&PIO21 5 ALT2 BIDIR>;
+						 scl = <&PIO21 6 ALT2 BIDIR>;
+						 mtsr = <&PIO21 7 ALT2 BIDIR>;
+					};
+			      };
+			      pinctrl_front0_spi3_3w_alt2_0: spi3_3w_alt2-0 {
+					st,pins {
+						 scl = <&PIO21 6 ALT2 BIDIR>;
+						 mtsr = <&PIO21 7 ALT2 BIDIR>;
+					};
+			      };
+			      pinctrl_front0_spi3_4w_alt3_0: spi3_4w_alt3-0 {
+					st,pins {
+						 scl = <&PIO24 5 ALT3 BIDIR>;
+						 mtsr = <&PIO24 6 ALT3 BIDIR>;
+						 mrst = <&PIO24 4 ALT3 BIDIR>;
+					};
+			      };
+			};
+
+			spi2 {
+			      pinctrl_front0_spi2_4w_alt2_0: spi2_4w_alt2-0 {
+					st,pins {
+						 mrst = <&PIO24 2 ALT2 BIDIR>;
+						 scl = <&PIO24 0 ALT2 BIDIR>;
+						 mtsr = <&PIO24 1 ALT2 BIDIR>;
+					};
+			      };
+			      pinctrl_front0_spi2_3w_alt2_0: spi2_3w_alt2-0 {
+					st,pins {
+						 scl = <&PIO24 0 ALT2 BIDIR>;
+						 mtsr = <&PIO24 1 ALT2 BIDIR>;
+					};
+			      };
+
+			      pinctrl_front0_spi2_4w_alt2_1: spi2_4w_alt2-1 {
+					st,pins {
+						 mrst = <&PIO25 5 ALT2 BIDIR>;
+						 scl = <&PIO25 6 ALT2 BIDIR>;
+						 mtsr = <&PIO25 7 ALT2 BIDIR>;
+					};
+			      };
+			      pinctrl_front0_spi2_3w_alt2_1: spi2_3w_alt2-1 {
+					st,pins {
+						 scl = <&PIO25 6 ALT2 BIDIR>;
+						 mtsr = <&PIO25 7 ALT2 BIDIR>;
+					};
+			      };
+			      pinctrl_front0_spi2_4w_alt4_0: spi2_4w_alt4-0 {
+					st,pins {
+						 scl = <&PIO23 6 ALT4 BIDIR>;
+						 mtsr = <&PIO23 5 ALT4 BIDIR>;
+						 mrst = <&PIO23 7 ALT4 BIDIR>;
+					};
+			      };
+			      pinctrl_front0_spi2_3w_alt4_0: spi2_3w_alt4-0 {
+					st,pins {
+						 scl = <&PIO23 6 ALT4 BIDIR>;
+						 mtsr = <&PIO23 5 ALT4 BIDIR>;
+					};
+			      };
+
+			};
+
+			i2c0 {
+			      pinctrl_front0_i2c0_alt3_0: i2c0_alt3-0 {
+					st,pins {
+						 scl = <&PIO21 2 ALT3 BIDIR>;
+						 sda = <&PIO21 3 ALT3 BIDIR>;
+					};
+			      };
+			};
+
+			spi0 {
+			      pinctrl_front0_spi0_4w_alt3_0: spi0_4w_alt3-0 {
+					st,pins {
+						 scl = <&PIO22 4 ALT3 BIDIR>;
+						 mtsr = <&PIO22 5 ALT3 BIDIR>;
+						 mrst = <&PIO22 6 ALT3 BIDIR>;
+					};
+			      };
+			      pinctrl_front0_spi0_3w_alt3_0: spi0_3w_alt3-0 {
+					st,pins {
+						 scl = <&PIO22 4 ALT3 BIDIR>;
+						 mtsr = <&PIO22 5 ALT3 BIDIR>;
+					};
+			      };
+			      pinctrl_front0_spi0_4w_alt2_0: spi0_4w_alt2-0 {
+					st,pins {
+						 scl = <&PIO25 2 ALT2 BIDIR>;
+						 mtsr = <&PIO25 3 ALT2 BIDIR>;
+						 mrst = <&PIO25 4 ALT2 BIDIR>;
+					};
+			      };
+			      pinctrl_front0_spi0_3w_alt2_0: spi0_3w_alt2-0 {
+					st,pins {
+						 scl = <&PIO25 2 ALT2 BIDIR>;
+						 mtsr = <&PIO25 3 ALT2 BIDIR>;
+					};
+			      };
+			};
+
+			spi1 {
+			      pinctrl_front0_spi1_4w_alt3_0: spi1_4w_alt3-0 {
+					st,pins {
+						 scl = <&PIO22 7 ALT3 BIDIR>;
+						 mtsr = <&PIO23 0 ALT3 BIDIR>;
+						 mrst = <&PIO23 1 ALT3 BIDIR>;
+					};
+			      };
+			      pinctrl_front0_spi1_3w_alt3_0: spi1_3w_alt3-0 {
+					st,pins {
+						 scl = <&PIO22 7 ALT3 BIDIR>;
+						 mtsr = <&PIO23 0 ALT3 BIDIR>;
+					};
+			      };
+			};
+
+			mmc1 {
+				pinctrl_sd1: sd1-0 {
+					st,pins {
+						sd_clk = <&PIO24 0 ALT5 BIDIR>;
+						sd_cmd = <&PIO24 1 ALT5 BIDIR>;
+						sd_dat0 = <&PIO24 2 ALT5 BIDIR>;
+						sd_dat1 = <&PIO24 3 ALT5 BIDIR>;
+						sd_dat2 = <&PIO24 4 ALT5 BIDIR>;
+						sd_dat3 = <&PIO25 2 ALT5 BIDIR>;
+						sd_led = <&PIO25 6 ALT5 OUT>;
+						sd_pwren = <&PIO25 5 ALT5 OUT>;
+						sd_cd = <&PIO25 3 ALT5 IN>;
+						sd_wp = <&PIO25 4 ALT5 IN>;
+					};
+				};
+			};
+
+			i2s_out {
+				pinctrl_i2s_8ch_out: i2s_8ch_out{
+					st,pins {
+						mclk = <&PIO22 4 ALT6 OUT>;
+						lrclk = <&PIO22 6 ALT6 OUT>;
+						sclk = <&PIO22 5 ALT6 OUT>;
+						data0 = <&PIO23 0 ALT6 OUT>;
+						data1 = <&PIO23 1 ALT6 OUT>;
+						data2 = <&PIO23 2 ALT6 OUT>;
+						data3 = <&PIO22 7 ALT6 OUT>;
+					};
+				};
+
+				pinctrl_i2s_2ch_out: i2s_2ch_out{
+					st,pins {
+						mclk = <&PIO22 4 ALT6 OUT>;
+						lrclk = <&PIO22 6 ALT6 OUT>;
+						sclk = <&PIO22 5 ALT6 OUT>;
+						data0 = <&PIO23 0 ALT6 OUT>;
+					};
+				};
+			};
+
+			i2s_in {
+				pinctrl_i2s_8ch_in: i2s_8ch_in{
+					st,pins {
+						mclk = <&PIO23 0 ALT5 IN>;
+						lrclk = <&PIO23 2 ALT5 IN>;
+						sclk = <&PIO23 1 ALT5 IN>;
+						data0 = <&PIO22 7 ALT5 IN>;
+						data1 = <&PIO22 6 ALT5 IN>;
+						data2 = <&PIO22 5 ALT5 IN>;
+						data3 = <&PIO22 4 ALT5 IN>;
+					};
+				};
+
+				pinctrl_i2s_2ch_in: i2s_2ch_in{
+					st,pins {
+						lrclk = <&PIO23 2 ALT5 IN>;
+						sclk = <&PIO23 1 ALT5 IN>;
+						data0 = <&PIO22 7 ALT5 IN>;
+					};
+				};
+			};
+
+	 	};
+
+		/* FC_BACKBONE PIO_REAR */
+		pin-controller-rear0 {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih390-rear0-pinctrl";
+			st,syscfg = <&syscfg_pio_rear_0>;
+			ranges = <0 0x08220000 0x6000>;
+			reg = <0x0822f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 201 IRQ_TYPE_NONE>;
+			interrupts-names = "irqmux";
+
+			PIO30: gpio@08220000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x0 0x100>;
+				st,bank-name = "PIO30";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO31: gpio@08221000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO31";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO32: gpio@08222000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO32";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO33: gpio@08223000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO33";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			PIO34: gpio@08224000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO34";
+				interrupt-controller;
+				#interrupt-cells = <2>;
+			};
+
+			spi5 {
+			      pinctrl_rear0_spi5_4w_alt1_0: spi5_4w_alt1-0 {
+					st,pins {
+						 scl = <&PIO32 0 ALT1 BIDIR>;
+						 mtsr = <&PIO32 1 ALT1 BIDIR>;
+						 mrst = <&PIO32 2 ALT1 BIDIR>;
+					};
+			      };
+			      pinctrl_rear0_spi5_3w_alt1_0: spi5_3w_alt1-0 {
+					st,pins {
+						 scl = <&PIO32 0 ALT1 BIDIR>;
+						 mtsr = <&PIO32 1 ALT1 BIDIR>;
+					};
+			      };
+			};
+
+			spi6 {
+			      pinctrl_rear0_spi6_4w_alt1_0: spi6_4w_alt1-0 {
+					st,pins {
+						 scl = <&PIO32 3 ALT1 BIDIR>;
+						 mtsr = <&PIO32 4 ALT1 BIDIR>;
+						 mrst = <&PIO33 1 ALT1 BIDIR>;
+					};
+			      };
+			      pinctrl_rear0_spi6_3w_alt1_0: spi6_3w_alt1-0 {
+					st,pins {
+						 scl = <&PIO32 3 ALT1 BIDIR>;
+						 mtsr = <&PIO32 4 ALT1 BIDIR>;
+					};
+			      };
+
+			};
+
+			i2c6 {
+			      pinctrl_rear0_i2c6_alt1_0: i2c6_alt1-0 {
+					st,pins {
+						 scl = <&PIO32 3 ALT1 BIDIR>;
+						 sda = <&PIO32 4 ALT1 BIDIR>;
+					};
+			      };
+			};
+
+			serial3 {
+				pinctrl_rear0_serial3_alt1_0: serial3_alt1-0 {
+					st,pins {
+						tx = <&PIO32 6 ALT1 OUT>;
+						rx = <&PIO32 5 ALT1 IN>;
+					};
+				};
+			};
+
+			pwm3 {
+				pinctrl_rear0_pwm3: pwm3-0 {
+					st,pins {
+						pwm_out = <&PIO30 3 ALT2 OUT>;
+					};
+				};
+			};
+			pwm2 {
+				pinctrl_rear0_pwm2: pwm2-0 {
+					st,pins {
+						pwm_out = <&PIO32 7 ALT2 OUT>;
+					};
+				};
+			};
+			pwm0 {
+				pinctrl_rear0_pwm0: pwm0-0 {
+					st,pins {
+						pwm_out = <&PIO33 0 ALT2 OUT>;
+					};
+				};
+			};
+			pwm1 {
+				pinctrl_rear0_pwm1: pwm1-0 {
+					st,pins {
+						pwm_out = <&PIO33 7 ALT1 OUT>;
+					};
+				};
+			};
+
+			synp_gmac {
+				pinctrl_rear0_rgmii4: rgmii-4 {
+					st,pins {
+						txd0 = <&PIO30 0 ALT1 OUT DE_IO 0 CLK_A>;
+						txd1 = <&PIO30 1 ALT1 OUT DE_IO 0 CLK_A>;
+						txd2 = <&PIO30 2 ALT1 OUT DE_IO 0 CLK_A>;
+						txd3 = <&PIO30 3 ALT1 OUT DE_IO 0 CLK_A>;
+						txen = <&PIO31 6 ALT1 OUT DE_IO 0 CLK_A>;
+						txclk = <&PIO31 7 ALT1 OUT NICLK 0 CLK_A>;
+
+						mdio = <&PIO31 0 ALT1 BIDIR_PU BYPASS 0>;
+						mdc = <&PIO31 2 ALT1 OUT NICLK 0 CLK_A>;
+						mdint = <&PIO31 1 ALT1 IN BYPASS 0>;
+						rxd0 = <&PIO30 4 ALT1 IN DE_IO 0 CLK_A>;
+						rxd1 = <&PIO30 5 ALT1 IN DE_IO 0 CLK_A>;
+						rxd2 = <&PIO30 6 ALT1 IN DE_IO 0 CLK_A>;
+						rxd3 = <&PIO30 7 ALT1 IN DE_IO 0 CLK_A>;
+
+						rxdv = <&PIO31 3 ALT1 IN DE_IO 0 CLK_A>;
+						rxclk = <&PIO31 5 ALT1 IN NICLK 0 CLK_A>;
+						phyclk = <&PIO31 4 ALT1 OUT NICLK 1750 CLK_A>;
+					};
+				};
+			};
+
+			spdif_out {
+				pinctrl_spdif_out: spdif_out{
+					st,pins {
+						spdif_out = <&PIO33 2 ALT1 OUT>;
+					};
+				};
+			};
+
+			usb2_0 {
+				pinctrl_rear0_usb2_0: usb2_0-0 {
+					st,pins {
+						oc-detect = <&PIO33 4 ALT1 IN>;
+						pwr-enable = <&PIO33 5 ALT1 OUT>;
+					};
+				};
+			};
+
+			usb3_0 {
+				pinctrl_rear0_usb3_0: usb3_0-0 {
+					st,pins {
+						oc-detect = <&PIO33 3 ALT1 IN>;
+						pwr-enable = <&PIO33 6 ALT1 OUT>;
+					};
+				};
+			};
+		};
+		pin-controller-flash {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih390-flash-pinctrl";
+			st,syscfg = <&syscfg_pio_flash>;
+			ranges = <0 0x1E500000 0x3000>;
+			reg = <0x1E50f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 202 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+
+			PIO40: gpio@1E500000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0 0x100>;
+				st,bank-name = "PIO40";
+			};
+			PIO41: gpio@1E501000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO41";
+			};
+			PIO42: gpio@1E502000 {
+				gpio-controller;
+				#gpio-cells = <2>;
+				interrupt-controller;
+				#interrupt-cells = <2>;
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO42";
+			};
+
+			mmc0 {
+				pinctrl_emmc0: emmc0-0 {
+					st,pins {
+						emmc_clk = <&PIO40 6 ALT1 BIDIR>;
+						emmc_cmd = <&PIO40 7 ALT1 BIDIR>;
+						emmc_d0 = <&PIO41 0 ALT1 BIDIR>;
+						emmc_d1 = <&PIO41 1 ALT1 BIDIR>;
+						emmc_d2 = <&PIO41 2 ALT1 BIDIR>;
+						emmc_d3 = <&PIO41 3 ALT1 BIDIR>;
+						emmc_d4 = <&PIO41 4 ALT1 BIDIR>;
+						emmc_d5 = <&PIO41 5 ALT1 BIDIR>;
+						emmc_d6 = <&PIO41 6 ALT1 BIDIR>;
+						emmc_d7 = <&PIO41 7 ALT1 BIDIR>;
+					};
+				};
+				pinctrl_sd0: sd0-0 {
+					st,pins {
+						SD_CLK = <&PIO40 6 ALT2 BIDIR>;
+						SD_CMD = <&PIO40 7 ALT2 BIDIR>;
+						SD_DAT0 = <&PIO41 0 ALT2 BIDIR>;
+						SD_DAT1 = <&PIO41 1 ALT2 BIDIR>;
+						SD_DAT2 = <&PIO41 2 ALT2 BIDIR>;
+						SD_DAT3 = <&PIO41 3 ALT2 BIDIR>;
+						SD_LED = <&PIO42 0 ALT2 OUT>;
+						SD_PWREN = <&PIO42 2 ALT2 OUT>;
+						SD_VSEL = <&PIO42 3 ALT2 OUT>;
+						SD_CD = <&PIO42 4 ALT2 IN>;
+						SD_WP = <&PIO42 5 ALT2 IN>;
+					};
+				};
+			};
+
+			sfc {
+				pinctrl_sfc: sfc {
+					st,pins {
+						spi-sfc-clk = <&PIO40 1 ALT1 OUT>;
+						spi-sfc-cs = <&PIO40 0 ALT1 OUT>;
+						spi-sfc-mosi = <&PIO40 2 ALT1 OUT>;
+						spi-sfc-miso = <&PIO40 3 ALT1 IN>;
+						spi-sfc-hol = <&PIO40 5 ALT1 OUT>;
+						spi-sfc-wp = <&PIO40 4 ALT1 OUT>;
+					};
+				};
+			};
+
+			nand {
+				pinctrl_nand: nand {
+					st,pins {
+						nand_cs2 = <&PIO40 4 ALT3 OUT>;
+						nand_cs3 = <&PIO40 5 ALT3 OUT>;
+						nand_cs1 = <&PIO40 6 ALT3 OUT>;
+						nand_cs0 = <&PIO40 7 ALT3 OUT>;
+						nand_d0 = <&PIO41 0 ALT3 BIDIR>;
+						nand_d1 = <&PIO41 1 ALT3 BIDIR>;
+						nand_d2 = <&PIO41 2 ALT3 BIDIR>;
+						nand_d3 = <&PIO41 3 ALT3 BIDIR>;
+						nand_d4 = <&PIO41 4 ALT3 BIDIR>;
+						nand_d5 = <&PIO41 5 ALT3 BIDIR>;
+						nand_d6 = <&PIO41 6 ALT3 BIDIR>;
+						nand_d7 = <&PIO41 7 ALT3 BIDIR>;
+						nand_we = <&PIO42 0 ALT3 OUT>;
+						nand_ale = <&PIO42 2 ALT3 OUT>;
+						nand_cle = <&PIO42 3 ALT3 OUT>;
+						nand_rnb = <&PIO42 4 ALT3 IN>;
+						nand_ren = <&PIO42 5 ALT3 OUT>;
+					};
+				};
+			};
+		};
+	};
+};
+
diff -urNp a/arch/arm/boot/dts/stih390.dtsi b/arch/arm/boot/dts/stih390.dtsi
--- a/arch/arm/boot/dts/stih390.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih390.dtsi	2019-09-26 21:23:27.128619200 +0100
@@ -0,0 +1,910 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics Limited.
+ * Author: Guillaume Kouadio Carry <guillaume.kouadio-carry@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include "stih390-pinctrl.dtsi"
+#include <dt-bindings/reset-controller/stih390-resets.h>
+#include "stih390-clock.dtsi"
+#include "stih390-clks-refs.h"
+#include <dt-bindings/phy/usb2_xphy.h>
+#include <dt-bindings/st/flashss.h>
+/ {
+	#address-cells = <1>;
+	#size-cells = <1>;
+
+	cpus {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		cpu@0 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <0>;
+			clock-frequency = <1500000000>;
+		};
+		cpu@1 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <1>;
+			clock-frequency = <1500000000>;
+		};
+	};
+
+	intc: interrupt-controller@26101000 {
+		compatible = "arm,cortex-a9-gic";
+		#interrupt-cells = <3>;
+		interrupt-controller;
+		reg = <0x26101000 0x1000>,
+		      <0x26100100 0x100>;
+	};
+
+	timer@26100200 {
+		interrupt-parent = <&intc>;
+		compatible = "arm,cortex-a9-global-timer";
+		reg = <0x26100200 0x100>;
+		interrupts = <GIC_PPI 11 IRQ_TYPE_LEVEL_HIGH>;
+		clocks = <&CLK_TIMER_A9>;
+	};
+
+	soc {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		interrupt-parent = <&intc>;
+		ranges;
+		compatible = "simple-bus";
+
+		powerdown: powerdown-controller {
+			#reset-cells = <1>;
+			compatible = "st,stih390-powerdown";
+		};
+
+		softreset: softreset-controller {
+			#reset-cells = <1>;
+			compatible = "st,stih390-softreset";
+		};
+
+		/* Functional Cluster SYSCONF registers */
+
+		/*
+			This is the layout of the system config registers
+			available in each cluster that has 11 internal areas
+			organized as shown below:
+
+			o 2MiB of sysconfig area
+				RESET/Clock Gating	-> FC_ID*1000+[0-15]
+				RESERVED		-> FC_ID*1000+[100-199]
+				RESERVED		-> FC_ID*1000+[200-299]
+				PANIC_CTRL		-> FC_ID*1000+[300-399]
+				SPECIFIC		-> FC_ID*1000+[400-499]
+				POWER_CTRL		-> FC_ID*1000+[500-599]
+				RESERVED		-> FC_ID*1000+[600-699]
+				NOC_A1			-> FC_ID*1000+[700-799]
+
+			o Sysconf area starts @0x1000000 from the FC memory
+				For instance, FC1 VSAFE baseAddr is  0xa000000
+				So, syscfg_fc1_vsafe starts @
+				0xa000000 + 0x1000000 = 0xb000000
+		*/
+
+		/* FC0 BACKBONE Syscfg 0-799 */
+		syscfg_fc0_backbone: fc0-backbone-syscfg@9000000 {
+			compatible = "st,stih390-syscfg-fc0-backbone", "syscon";
+			reg = <0x9000000 0x200000>;
+		};
+
+		/* FC1 VSAFE Syscfg 1000-1799 */
+		syscfg_fc1_vsafe: fc1-vsafe-syscfg@b000000 {
+			compatible = "st,stih390-syscfg-fc1-vsafe", "syscon";
+			reg = <0xb000000 0x200000>;
+		};
+
+		/* FC2 WIFI Syscfg 2000-2799 */
+		syscfg_fc2_wifi: fc2-wifi-syscfg@d000000 {
+			compatible = "st,stih390-syscfg-fc2-wifi", "syscon";
+			reg = <0xd000000 0x200000>;
+		};
+
+		/* FC3 VDEC Syscfg 3000-3799 */
+		syscfg_fc3_vdec: fc3-vdec-syscfg@f000000 {
+			compatible = "st,stih390-syscfg-fc3-vdec", "syscon";
+			reg = <0xf000000 0x200000>;
+		};
+
+		/* FC 4,5 RESERVED */
+
+		/* FC6 DISPLAY Syscfg 6000-6799 */
+		syscfg_fc6_display: fc6-display-syscfg@15000000 {
+			compatible = "st,stih390-syscfg-fc6-display", "syscon";
+			reg = <0x15000000 0x200000>;
+		};
+
+		/* FC7 HSIF Syscfg 7000-7799 */
+		syscfg_fc7_hsif: fc7-hsif-syscfg@17000000 {
+			compatible = "st,stih390-syscfg-fc7-hsif", "syscon";
+			reg = <0x17000000 0x200000>;
+		};
+
+		/* FC 8 RESERVED */
+
+		/* FC9 ST231SS Syscfg 9000-9799 */
+		syscfg_fc9_st231ss: fc9-st231ss-syscfg@1b000000 {
+			compatible = "st,stih390-syscfg-fc9-st231ss", "syscon";
+			reg = <0x1b000000 0x200000>;
+		};
+
+		/* FC10 GPU Syscfg 10000-10799 */
+		syscfg_fc10_gpu: fc10-gpu-syscfg@1d000000 {
+			compatible = "st,stih390-syscfg-fc10-gpu", "syscon";
+			reg = <0x1d000000 0x200000>;
+		};
+
+		/* FC11 BOOTDEV Syscfg 11000-11799 */
+		syscfg_fc11_bootdev: fc11-bootdev-syscfg@1f000000 {
+			compatible = "st,stih390-syscfg-fc11-bootdev", "syscon";
+			reg = <0x1f000000 0x200000>;
+		};
+
+		/* FC12 RESERVED */
+
+		/* FC13 TS Syscfg 13000-13799 */
+		syscfg_fc13_ts: fc13-ts-syscfg@23000000 {
+			compatible = "st,stih390-syscfg-fc13-ts", "syscon";
+			reg = <0x23000000 0x200000>;
+		};
+
+		/* FC14 RESERVED */
+
+		/* FC15 A9 Syscfg 15000-15799 */
+		syscfg_a9: fc15-a9-syscfg@27000000 {
+			compatible = "st,stih390-syscfg-fc15-a9", "syscon";
+			reg = <0x27000000 0x200000>;
+		};
+
+		/* SYSCONF PIO mux registers */
+
+		/* SYSCONF for PIOmuxing */
+
+		syscfg_pio_front_0: pio-front0-syscfg@08300000 {
+			compatible = "st,stih390-pio-front0-syscfg", "syscon";
+			reg = <0x8300000 0x1000>;
+		};
+
+
+		syscfg_pio_front_1: pio-front1-syscfg@08310000 {
+			compatible = "st,stih390-pio-front1-syscfg", "syscon";
+			reg = <0x8310000 0x1000>;
+		};
+
+		syscfg_pio_rear_0: pio-rear0-syscfg@08320000 {
+			compatible = "st,stih390-pio-rear0-syscfg", "syscon";
+			reg = <0x8320000 0x1000>;
+		};
+
+		syscfg_pio_vsafe: pio-vsafe-syscfg@0a600000 {
+			compatible = "st,stih390-pio-vsafe-syscfg", "syscon";
+			reg = <0x0a600000 0x100000>;
+		};
+
+		syscfg_pio_flash: pio-flash-syscfg@1e400000 {
+			compatible = "st,stih390-pio-flash-syscfg", "syscon";
+			reg = <0x1e400000 0x1000>;
+		};
+
+		/* PERIPHERALS IPs */
+
+		/* UART_0 COMMS_FRONT0*/
+		serial0: serial0@08930000 {
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0x08930000 0x2c>;
+			interrupts = <GIC_SPI 122 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_front0_serial0>;
+			clocks = <&CLK_PERIPH_TS>;
+		};
+		/* UART_1 COMMS_FRONT0*/
+		serial1: serial1@08931000 {
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0x08931000 0x2c>;
+			interrupts = <GIC_SPI 123 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_front0_serial1_alt2_0>;
+			clocks = <&CLK_PERIPH_TS>;
+		};
+
+		/* UART_2 COMMS_FRONT0*/
+		serial2: serial2@089320000 {
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0x08932000 0x2c>;
+			interrupts = <GIC_SPI 124 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_front0_serial2_alt2_0>;
+			clocks = <&CLK_PERIPH_TS>;
+		};
+
+		i2c0: i2c0@08940000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x08940000 0x110>;
+			interrupts = <GIC_SPI 114 IRQ_TYPE_NONE>;
+			clocks = <&CLK_PERIPH_TS>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_front0_i2c0_alt3_0>;
+		};
+
+		spi0: spi0@08940000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08940000 0x110>;
+			interrupts = <GIC_SPI 114 IRQ_TYPE_NONE>;
+			clocks = <&CLK_PERIPH_TS>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_front0_spi0_4w_alt3_0>;
+		};
+
+		spi1: spi1@08941000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08941000 0x110>;
+			interrupts = <GIC_SPI 115 IRQ_TYPE_NONE>;
+			clocks = <&CLK_PERIPH_TS>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_front0_spi1_4w_alt3_0>;
+		};
+
+		spi2: spi2@08942000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08942000 0x110>;
+			interrupts = <GIC_SPI 116 IRQ_TYPE_NONE>;
+			clocks = <&CLK_PERIPH_TS>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_front0_spi2_4w_alt2_0>;
+		};
+
+		spi3: spi3@08943000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08943000 0x110>;
+			interrupts = <GIC_SPI 117 IRQ_TYPE_NONE>;
+			clocks = <&CLK_PERIPH_TS>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_front0_spi3_4w_alt2_0>;
+		};
+
+		/* UART_3 COMMS_REAR0*/
+		serial3: serial3@08a30000 {
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0x08a30000 0x2c>;
+			interrupts = <GIC_SPI 125 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rear0_serial3_alt1_0>;
+			clocks = <&CLK_PERIPH_DISP>;
+		};
+
+		/* Synopsys GMAC */
+		ethernet0: dwmac@16900000 {
+			device_type = "network";
+			status = "disabled";
+			compatible = "st,stih390-dwmac", "snps,dwmac-4.00";
+
+			reg-names = "stmmaceth", "sti-ethconf", "sti-clkconf";
+			reg = <0x16900000 0x8000>, <0x13002c 0x4>,
+			      <0x130030 0x4>;
+
+			interrupt-names = "macirq", "eth_wake_irq", "eth_lpi";
+			interrupts = <GIC_SPI 218 IRQ_TYPE_NONE>,
+				     <GIC_SPI 219 IRQ_TYPE_NONE>,
+				     <GIC_SPI 220 IRQ_TYPE_NONE>;
+
+			st,syscon = <&syscfg_fc7_hsif>;
+			st,gmac_en;
+
+			resets = <&softreset STIH390_FC7_GMAC_SOFTRESET>;
+			reset-names = "stmmaceth";
+
+			pinctrl-names = "default";
+
+			clock-names = "stmmaceth", "sti-ethclk";
+			clocks = <&CLK_PERIPH_DISP>, <&CLK_ETH_GMAC_S>;
+
+			power-domains = <&gmac_hsif>;
+		};
+
+		ethernet1: dwmac@c600000 {
+			device_type = "network";
+			status = "disabled";
+			compatible = "st,stih390-dwmac", "snps,dwmac-4.00";
+
+			reg-names = "stmmaceth", "sti-ethconf";
+			reg = <0xc600000 0x100000>, <0x200 0x4>;
+
+			interrupt-names = "macirq", "eth_wake_irq", "eth_lpi";
+			interrupts = <GIC_SPI 179 IRQ_TYPE_NONE>,
+				     <GIC_SPI 180 IRQ_TYPE_NONE>,
+				     <GIC_SPI 181 IRQ_TYPE_NONE>;
+
+			st,syscon = <&syscfg_fc2_wifi>;
+			st,gmac_en;
+
+			resets = <&softreset STIH390_FC2_GMAC_W_0_SOFTRESET>;
+			reset-names = "stmmaceth";
+
+			pinctrl-names = "default";
+
+			clock-names = "stmmaceth", "sti-ethclk";
+			clocks = <&CLK_PERIPH_WIFI>, <&CLK_ETH_GMAC_W>;
+
+			power-domains = <&gmacw_wifi>;
+		};
+		spi5: spi5@08a40000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08a40000 0x110>;
+			interrupts = <GIC_SPI 118 IRQ_TYPE_NONE>;
+			clocks = <&CLK_PERIPH_DISP>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rear0_spi5_4w_alt1_0>;
+		};
+
+		spi6: spi6@08a41000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x08a41000 0x110>;
+			interrupts = <GIC_SPI 119 IRQ_TYPE_NONE>;
+			clocks = <&CLK_PERIPH_DISP>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rear0_spi6_4w_alt1_0>;
+		};
+
+		i2c6: i2c6@08a41000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x08a41000 0x110>;
+			interrupts = <GIC_SPI 119 IRQ_TYPE_NONE>;
+			clocks = <&CLK_PERIPH_DISP>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rear0_i2c6_alt1_0>;
+		};
+
+		temp0{
+			compatible = "st,stih407-thermal";
+			reg = <0x0A900000 0x28>;
+			clock-names = "thermal";
+			clocks = <&CLK_SYSIN>;
+			interrupts = <GIC_SPI 72 IRQ_TYPE_EDGE_RISING>;
+			st,passive_cooling_temp = <110>;
+		};
+
+		pwm0: pwm0@08a10000 {
+			compatible = "st,sti-pwm";
+			status = "disabled";
+			#pwm-cells = <2>;
+			reg = <0x08a10000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rear0_pwm0
+				     &pinctrl_rear0_pwm1
+				     &pinctrl_rear0_pwm2
+				     &pinctrl_rear0_pwm3>;
+			clock-names = "pwm";
+			clocks = <&CLK_PWM>;
+			st,pwm-num-chan = <4>;
+		};
+
+		/* VSAFE */
+		serial10: serial10@0a1a0000 {
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0x0a1a0000 0x2c>;
+			interrupts = <GIC_SPI 140 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_vsafe_serial10_alt1_0>;
+			clocks = <&CLK_SYSIN>;
+		};
+
+		serial11: serial11@0a1b0000 {
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0x0a1b0000 0x2c>;
+			interrupts = <GIC_SPI 141 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_vsafe_serial11_alt2_0>;
+			clocks = <&CLK_SYSIN>;
+		};
+
+		spi10: spi10@0a1c0000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x0a1c0000 0x110>;
+			interrupts = <GIC_SPI 137 IRQ_TYPE_NONE>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_vsafe_spi10_4w_alt1_0>;
+		};
+
+		spi11: spi11@0a1d0000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x0a1d0000 0x110>;
+			interrupts = <GIC_SPI 138 IRQ_TYPE_NONE>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_vsafe_spi11_3w_alt1_0>;
+		};
+
+		i2c11: i2c11@0a1d0000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x0a1d0000 0x110>;
+			interrupts = <GIC_SPI 138 IRQ_TYPE_NONE>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_vsafe_i2c11_alt1_0>;
+		};
+
+
+		i2c12: i2c12@0a1e0000 {
+			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
+			reg = <0x0a1e0000 0x110>;
+			interrupts = <GIC_SPI 139 IRQ_TYPE_NONE>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_vsafe_i2c12_alt2_0>;
+		};
+
+		spi12: spi12@0a1e0000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x0a1e0000 0x110>;
+			interrupts = <GIC_SPI 139 IRQ_TYPE_NONE>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_vsafe_spi12_4w_alt1_0>;
+		};
+
+		pwm10: pwm10@0a160000 {
+			compatible = "st,sti-pwm";
+			status = "disabled";
+			#pwm-cells = <2>;
+			reg = <0x0a160000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_vsafe_pwm10>;
+			clock-names = "pwm";
+			clocks = <&CLK_SYSIN>;
+			st,pwm-num-chan = <1>;
+		};
+
+		pwm11: pwm11@0a170000 {
+			compatible = "st,sti-pwm";
+			status = "disabled";
+			#pwm-cells = <2>;
+			reg = <0x0a170000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_vsafe_pwm11>;
+			clock-names = "pwm";
+			clocks = <&CLK_SYSIN>;
+			st,pwm-num-chan = <1>;
+		};
+
+		pwm12: pwm12@0a180000 {
+			compatible = "st,sti-pwm";
+			status = "disabled";
+			#pwm-cells = <2>;
+			reg = <0x0a180000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_vsafe_pwm12>;
+			clock-names = "pwm";
+			clocks = <&CLK_SYSIN>;
+			st,pwm-num-chan = <1>;
+		};
+
+		keyscan: pinctrl_keyscan@0a110000 {
+			compatible = "st,keypad";
+			status = "disabled";
+			reg = <0x0a110000 0x2000>;
+			interrupts = <GIC_SPI 143 IRQ_TYPE_NONE>;
+			clocks = <&CLK_SYSIN>;
+			pinctrl-names = "default";
+		};
+		/* FlashSS*/
+		/* Supply voltage for I/O */
+		vqmmc_reg: voltage-regulator {
+			compatible = "st,vqmmc";
+			regulator-name = "vqmmc0";
+			/* Control register for the VSENSE Module */
+			reg = <0x1e301804 0x4>;
+			status = "disabled";
+			regulator-min-microvolt = <1800000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+		};
+
+		mmc0: sdhci@1e300000 {
+			compatible = "st,sdhci";
+			status = "disabled";
+			reg = <0x1e300000 0x800>, <0x1e301808 0x20>;
+			reg-names = "mmc", "top-mmc-delay";
+			interrupts = <GIC_SPI 92 IRQ_TYPE_NONE>;
+			interrupt-names = "mmcirq";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_emmc0>;
+			clocks = <&CLK_MMC_0>;
+			clock-names = "mmc";
+			resets = <&softreset STIH390_FC11_SDEMMC_0_SOFTRESET>;
+			st,mmcss-config;
+			st,flashss-version = <FLASHSS_CORE_VERSION_3_0>;
+			vqmmc-supply = <&vqmmc_reg>;
+			power-domains = <&emmc_bootdev>;
+		};
+
+		mmc1: sdhci@1e600000 {
+			compatible = "st,sdhci";
+			status = "disabled";
+			reg = <0x1e600000 0x800>;
+			reg-names = "mmc";
+			interrupts = <GIC_SPI 88 IRQ_TYPE_NONE>;
+			interrupt-names = "mmcirq";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_sd1>;
+			clocks = <&CLK_MMC_1>;
+			clock-names = "mmc";
+			st,mmcss-config;
+			power-domains = <&sdemmc0_bootdev>;
+		};
+
+		usb2_0: usb@16200000 {
+			compatible = "st,usb-300x";
+			status = "disabled";
+			reg = <0x16203c00 0x100>, <0x16203e00 0x100>;
+			reg-names = "ohci", "ehci";
+
+			interrupts = <GIC_SPI 177 IRQ_TYPE_NONE>,
+				     <GIC_SPI 178 IRQ_TYPE_NONE>;
+			interrupt-names = "ehci","ohci";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rear0_usb2_0>;
+			clocks = <&CLK_ICN_DISP>;
+			clock-names = "ic";
+
+			resets = <&powerdown STIH390_FC7_USB2_0_POWERDOWN_REQ>,
+				 <&softreset STIH390_FC7_USB2_RESET>;
+			reset-names = "power", "softreset";
+
+			phys = <&usb2_0_xphy0>;
+			phy-names = "usb2-phy";
+
+			power-domains = <&usb2_hsif>;
+		};
+
+		usb2_0_xphy0: usb2xphy@0 {
+			compatible = "st,usb2-xphy", "st,stih390-usb2-xphy";
+			#phy-cells = <0>;
+
+			st,syscfg = <&syscfg_fc7_hsif>;
+			reg = <0x16100084 0x8>, <0x0130014 0x4>;
+			reg-names = "xphy-glue", "syscfg-usbss";
+
+			resets = <&softreset STIH390_FC7_USB2_PHY_RESET>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "osc_phy";
+
+			st,usbxss-xphy-ctrl;
+			st,usbxss = <ST_USB2SS>;
+		};
+
+		usb2_0_xphy1: usb2xphy@1 {
+			compatible = "st,usb2-xphy";
+			#phy-cells = <0>;
+
+			st,syscfg = <&syscfg_fc7_hsif>;
+			reg = <0x16100048 0x10>, <0x0130014 0x4>;
+			reg-names = "xphy-glue", "syscfg-usbss";
+
+			resets = <&softreset STIH390_FC7_USB3_PHY_USB2_RESET>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "osc_phy";
+
+			st,usbxss-xphy-ctrl;
+			st,usbxss = <ST_USB3SS>;
+		};
+
+		dwc3_0_usb3_phy: usb3_phy@0 {
+			compatible = "st,sti-usb3phy";
+			#phy-cells = <0>;
+			reg = <0x16140000 0xff>, <0x16145000 0xff>;
+			reg-names = "usb3-uport", "pipew";
+			st,syscfg = <&syscfg_fc7_hsif>;
+		};
+
+		st_dwc3_0_glue: dwc3@16100000 {
+			status = "disabled";
+			compatible = "st,stih390-dwc3";
+			reg = <0x16100000 0x3c>;
+			reg-names = "reg-glue";
+			resets = <&powerdown STIH390_FC7_USB3_0_POWERDOWN_REQ>,
+				 <&softreset STIH390_FC7_USB3_RESET>;
+			reset-names = "power", "soft";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rear0_usb3_0>;
+			ranges;
+
+			power-domains = <&usb3_hsif>;
+
+			dwc3_0: dwc3@16000000 {
+				compatible = "synopsys,dwc3";
+				reg = <0x16000000 0x100000>;
+				interrupts = <GIC_SPI 166 IRQ_TYPE_NONE>;
+
+				phys = <&usb2_0_xphy1>;
+				phy-names = "usb2-phy";
+
+				usb3-phy = <&dwc3_0_usb3_phy>;
+			};
+		};
+
+		fdma0: fdma0@0 {
+			compatible = "st,fdma_mpe31";
+			reg = <0x14600000 0x20000>;
+			interrupts = <GIC_SPI 3 IRQ_TYPE_NONE>;
+			dma-channels = <16>;
+			#dma-cells = <3>;
+			st,fw-name = "fdma_STiH390_0.elf";
+			clocks = <&CLK_SLIM_FDMA_0>,
+				 <&CLK_ICN_DISP>,
+				 <&CLK_ICN_DISP>,
+				 <&CLK_PERIPH_DISP>;
+			clock-names = "fdma_slim",
+				      "fdma_hi",
+				      "fdma_low",
+				      "fdma_ic";
+		};
+
+		fdma1: fdma1@1 {
+			compatible = "st,fdma_mpe31";
+			reg = <0x14620000 0x20000>;
+			interrupts = <GIC_SPI 5 IRQ_TYPE_NONE>;
+			dma-channels = <16>;
+			#dma-cells = <3>;
+			st,fw-name = "fdma_STiH390_1.elf";
+			clocks = <&CLK_SLIM_FDMA_1>,
+				 <&CLK_ICN_DISP>,
+				 <&CLK_ICN_DISP>,
+				 <&CLK_PERIPH_DISP>;
+			clock-names = "fdma_slim",
+				      "fdma_hi",
+				      "fdma_low",
+				      "fdma_ic";
+		};
+
+		/* uniperipheral players */
+		/* due to PIO mux, if you configure player0 with 8 channels, */
+		/* then you cannot enable reader0, and vice versa */
+		snd_uni_player0: snd-uni-player@0 {
+			compatible = "st,uni_player";
+			status = "disabled";
+			reg = <0x14700000 0x158>;
+			interrupts = <GIC_SPI 78 IRQ_TYPE_NONE>;
+			version = <5>;
+			dmas = <&fdma0 12 0 1>;
+			dma-names = "tx";
+			description = "Uni Player #0 (PIO)";
+			card-device = <0>;
+			mode = "PCM";
+			channels = <8>;
+			standby = <1>;
+			underflow = <1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2s_2ch_out>;
+			clocks = <&CLK_PCM_0>;
+			clock-names = "uni_player_clk";
+			auto-suspend-delay = <5000>;
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			compatible = "st,uni_player";
+			status = "disabled";
+			reg = <0x14710000 0x158>;
+			interrupts = <GIC_SPI 79 IRQ_TYPE_NONE>;
+			version = <5>;
+			dmas = <&fdma0 2 0 1>;
+			dma-names = "tx";
+			description = "Uni Player #1 (HDMI)";
+			card-device = <1>;
+			mode = "HDMI";
+			iec958-lr-pol = <0>;
+			iec958-i2s-mode = <0>;
+			channels = <8>;
+			standby = <1>;
+			underflow = <1>;
+			clocks = <&CLK_PCM_1>;
+			clock-names = "uni_player_clk";
+			mclk_oversampling = <128>;
+			auto-suspend-delay = <5000>;
+			resets = <&softreset STIH390_FC6_UPLAYER_1_SOFTRESET>;
+			reset-names = "player-rst";
+			power-domains = <&uplayer1_display>;
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			compatible = "st,uni_player";
+			status = "disabled";
+			reg = <0x14720000 0x158>;
+			interrupts = <GIC_SPI 80 IRQ_TYPE_NONE>;
+			version = <5>;
+			dmas = <&fdma0 3 0 1>;
+			dma-names = "tx";
+			description = "Uni Player #2 (DAC)";
+			card-device = <2>;
+			mode = "PCM";
+			channels = <2>;
+			standby = <1>;
+			underflow = <1>;
+			s16-swap-lr = <1>;
+			clocks = <&CLK_PCM_2>;
+			clock-names = "uni_player_clk";
+			mclk_oversampling = <256>;
+			auto-suspend-delay = <5000>;
+			resets = <&softreset STIH390_FC6_UPLAYER_2_SOFTRESET>;
+			reset-names = "player-rst";
+			power-domains = <&uplayer2_display>;
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			compatible = "st,uni_player";
+			status = "disabled";
+			reg = <0x14730000 0x158>;
+			interrupts = <GIC_SPI 81 IRQ_TYPE_NONE>;
+			version = <5>;
+			dmas = <&fdma0 7 0 1>;
+			dma-names = "tx";
+			description = "Uni Player #3 (SPDIF)";
+			iec958-lr-pol = <0>;
+			iec958-i2s-mode	= <1>;
+			card-device = <3>;
+			mode = "SPDIF";
+			channels = <2>;
+			standby = <1>;
+			underflow = <1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spdif_out>;
+			clocks = <&CLK_SPDIF>;
+			clock-names = "uni_player_clk";
+			auto-suspend-delay = <5000>;
+			resets = <&softreset STIH390_FC6_UPLAYER_3_SOFTRESET>;
+			reset-names = "player-rst";
+			power-domains = <&uplayer3_display>;
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			compatible = "st,uni_reader";
+			status = "disabled";
+			reg = <0x14740000 0x158>;
+			interrupts = <GIC_SPI 76 IRQ_TYPE_NONE>;
+			version = <3>;
+			dmas = <&fdma0 13 0 1>;
+			dma-names = "rx";
+			description = "Uni Reader #0 (SPDIF)";
+			card-device = <4>;
+			channels = <8>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2s_2ch_in>;
+		};
+
+		/* uniperipheral readers */
+		snd_uni_reader1: snd-uni-reader@1 {
+			compatible = "st,uni_reader";
+			status = "disabled";
+			reg = <0x14750000 0x158>;
+			interrupts = <GIC_SPI 77 IRQ_TYPE_NONE>;
+			version = <3>;
+			dmas = <&fdma0 9 0 1>;
+			dma-names = "rx";
+			description = "Uni Reader #1 (HDMI)";
+			card-device = <5>;
+			channels = <8>;
+			resets = <&softreset STIH390_FC6_UREADER_1_SOFTRESET>;
+			reset-names = "reader-rst";
+			power-domains = <&ureader1_display>;
+		};
+
+		sti_audio_clk_glue: sti-audio-clk-glue {
+			st,syscfg = <&syscfg_fc6_display>;
+			reg-offset = <0x0013000c>;
+			bit-offset = <8>;
+		};
+
+		hdmi_formater:hdmi_fformat@14404000 {
+			compatible = "st,stih390-hdmi_fformat", "syscon";
+			reg = <0x14404000 0x1000>;
+			holes = <0x14 0x8
+				 0x24 0xdc
+				 0x130 0xd0
+				 0x208 0x8
+				 0x240 0x4
+				 0x24c 0xb8
+				 0x324 0xdc
+				 0x408 0xf8
+				 0x508 0x8
+				 0x514 0x4
+				 0x51c 0x4
+				 0x528 0xd8
+				 0x6a0 0x960>;
+		};
+
+		/* ASOC codecs */
+		sti_sasg_codec: sti-sasg-codec {
+			compatible = "st,stih390-sas-codec";
+			status = "okay";
+			st,reg_audio = <&syscfg_fc6_display>;
+			st,reg_hdmi_ff = <&hdmi_formater>;
+			resets = <&softreset STIH390_FC6_HDTVOUT_0_SOFTRESET>;
+			interrupts = <GIC_SPI 106 IRQ_TYPE_NONE>;
+		};
+
+		/* ASOC platform */
+		sti_asoc_platform: sti-asoc-platform {
+			compatible = "st,sti-asoc-platform";
+			status = "okay";
+			st,mem-partition-name = "audio";
+		};
+
+		nandbch: nand-bch {
+			compatible = "st,nand-bch-ip-plug";
+			status = "disabled";
+			reg = <0x6201000 0x1000>, <0x1e300800 0x1000>;
+			reg-names = "nand_mem", "nand_dma";
+			clocks = <&CLK_FLASH>, <&CLK_NAND>;
+			clock-names = "emi_clk", "bch_clk";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_nand>;
+			interrupts = <GIC_SPI 94 IRQ_TYPE_NONE>;
+			interrupt-names = "nand_irq";
+			st,bch-ecc-mode = "auto";
+			st,flex-select-reg = <0x1e301800>;
+			st,bch-select-msk = <0x1>;
+			power-domains = <&nand_bootdev>;
+		};
+
+		spisfc: spisfc@1e302000 {
+			compatible = "st,stih390-sfc-revc";
+			status = "disabled";
+			reg = <0x1e302000 0x1000>;
+			reg-names = "sfc_mem";
+			clocks = <&CLK_SPI>;
+			clock-names = "sfc_clk";
+			pinctrl-0 = <&pinctrl_sfc>;
+			pinctrl-names = "default";
+			interrupts = <GIC_SPI 97 IRQ_TYPE_NONE>;
+			interrupt-names = "sfc_irq";
+			st,syscfg = <&syscfg_fc0_backbone>;
+			power-domains = <&spi_bootdev>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih407-b2089.dts b/arch/arm/boot/dts/stih407-b2089.dts
--- a/arch/arm/boot/dts/stih407-b2089.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih407-b2089.dts	2019-09-26 21:23:27.128619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih407.dtsi"
+#include "stihxxx-b2089.dtsi"
+/ {
+	model = "STiH407 B2089";
+	compatible = "st,stih407-b2089", "st,stih407";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+
+	soc {
+		pcie1: pcie@9b10000 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih407-b2120.dts b/arch/arm/boot/dts/stih407-b2120.dts
--- a/arch/arm/boot/dts/stih407-b2120.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih407-b2120.dts	2019-09-26 21:23:27.128619200 +0100
@@ -7,24 +7,20 @@
  * published by the Free Software Foundation.
  */
 /dts-v1/;
-#include "stihxxx-b2120.dtsi"
 #include "stih407.dtsi"
+#include "stihxxx-b2120.dtsi"
 / {
 	model = "STiH407 B2120";
 	compatible = "st,stih407-b2120", "st,stih407";
 
-	chosen {
-		bootargs = "console=ttyAS0,115200 clk_ignore_unused";
-		linux,stdout-path = &sbc_serial0;
-	};
-
 	memory {
 		device_type = "memory";
 		reg = <0x40000000 0x80000000>;
 	};
 
-	aliases {
-		ttyAS0 = &sbc_serial0;
+	soc {
+		usb3_phy: usb3_phy@0 {
+			st,auto-calibration;
+		};
 	};
-
 };
diff -urNp a/arch/arm/boot/dts/stih407-b2148.dts b/arch/arm/boot/dts/stih407-b2148.dts
--- a/arch/arm/boot/dts/stih407-b2148.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih407-b2148.dts	2019-09-26 21:23:27.132619200 +0100
@@ -0,0 +1,21 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+
+#include "stih407.dtsi"
+#include "stihxxx-b2148.dtsi"
+
+/ {
+	model = "STiH407 B2148";
+	compatible = "st,stih407-b2148", "st,stih407";
+	memory{
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih407-b2172.dts b/arch/arm/boot/dts/stih407-b2172.dts
--- a/arch/arm/boot/dts/stih407-b2172.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih407-b2172.dts	2019-09-26 21:23:27.132619200 +0100
@@ -0,0 +1,227 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ * Author:  Seraphin Bonnaffe	<seraphin.bonnaffe@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih407.dtsi"
+/ {
+	model = "STiH407 B2172";
+	compatible = "st,stih407", "st,stih407-b2172";
+
+	cpus {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		cpu@1 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <1>;
+		};
+	};
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &sbc_serial0;
+	};
+
+	aliases {
+		ttyAS0 = &sbc_serial0;
+		ethernet0 = &ethernet0;
+		miphy0 = &miphy28lp_phy0;
+		miphy1 = &miphy28lp_phy1;
+		miphy2 = &miphy28lp_phy2;
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "PCM_out",
+				   "Analog_out", "spdif",
+				   "PCM_in", "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player1
+				      &snd_uni_player2 &snd_uni_player3
+				      &snd_uni_reader0 &snd_uni_reader1 >;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dummy",
+				       "sas-dai-dac", "sas-dai-spdif-out",
+				       "sas-dai-dummy","sas-dai-dummy";
+	};
+
+	soc {
+		sbc_serial0: serial@9530000 {
+			status = "okay";
+		};
+
+		leds {
+			compatible = "gpio-leds";
+			red {
+				#gpio-cells = <2>;
+				gpios = <&PIO12 0 0>;
+				linux,default-trigger = "heartbeat";
+			};
+			green {
+				#gpio-cells = <2>;
+				gpios = <&PIO11 2 0>;
+				default-state = "off";
+			};
+		};
+
+		rc: rc@09518000 {
+			status = "disabled";
+		};
+
+		/* SSC0 to connector CN1031 */
+		spi0: spi@9840000 {
+			status = "okay";
+		};
+
+		/* SSC1 to connector CN37 */
+		i2c1: i2c@9841000 {
+			status = "okay";
+		};
+
+		/* SSC2 to PCIe connector, E2PROM */
+		i2c2: i2c@9842000 {
+			status = "okay";
+		};
+
+		/* SSC3 to MLB connector */
+		i2c3: i2c@9843000 {
+			status = "okay";
+			pinctrl-0 = <&pinctrl_i2c3_alt3_0>;
+		};
+
+		/* SSC4 to PCIe connector */
+		i2c4: i2c@9844000 {
+			status = "okay";
+		};
+
+		/* SSC10 to STV0368 */
+		i2c@9540000 {
+			status = "okay";
+		};
+
+		/* SSC11 to HDMI */
+		i2c@9541000 {
+			status = "okay";
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+		};
+
+		mmc0: sdhci@09060000 {
+			status = "okay";
+			non-removable;
+		};
+
+		mmc1: sdhci@09080000 {
+			status = "okay";
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO4 0 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+                };
+
+		ethernet0: dwmac@9630000 {
+			st,tx-retime-src = "clkgen";
+			status = "okay";
+			phy-mode = "rgmii";
+			pinctrl-0 = <&pinctrl_rgmii1 &pinctrl_rgmii1_mdio>;
+
+			snps,phy-bus-name = "stmmac";
+			snps,phy-bus-id = <0>;
+			snps,phy-addr = <0>;
+			snps,reset-gpio = <&PIO2 6 0>;
+			snps,reset-active-low;
+			snps,reset-delays-us = <0 10000 1000000>;
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
+		};
+
+		miphy28lp_phy0: miphy28lp@0 {
+                        status = "okay";
+                };
+
+		pcie0: pcie@9b00000 {
+			status = "okay";
+		};
+
+		gpio_keys {
+			compatible = "gpio-keys";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			button@1 {
+				label = "wakeup";
+				linux,code = <41>;
+				gpios = <&PIO3 3 1>;
+				gpio-key,wakeup;
+			};
+		};
+
+		spifsm@9022000 {
+			status = "okay";
+			flash-name = "n25q256";
+			partitions = <&b2172_fsm_partitions>;
+
+			b2172_fsm_partitions: partitions-b2172 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@1400000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+
+		/* Uniperipheral*/
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			status = "okay";
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih407-clks.h b/arch/arm/boot/dts/stih407-clks.h
--- a/arch/arm/boot/dts/stih407-clks.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih407-clks.h	2019-09-26 21:23:27.132619200 +0100
@@ -0,0 +1,88 @@
+/*
+ * This header provides constants clk index STMicroelectronics
+ * STiH407 SoC.
+ */
+#ifndef _DT_BINDINGS_CLK_STIH407
+#define _DT_BINDINGS_CLK_STIH407
+
+/* CLOCKGEN C0 */
+#define CLK_ICN_GPU		0
+#define CLK_FDMA		1
+#define CLK_NAND		2
+#define CLK_HVA			3
+#define CLK_PROC_STFE		4
+#define CLK_PROC_TP		5
+#define CLK_RX_ICN_DMU		6
+#define CLK_RX_ICN_DISP_0	6
+#define CLK_RX_ICN_DISP_1	6
+#define CLK_RX_ICN_HVA		7
+#define CLK_RX_ICN_TS		7
+#define CLK_ICN_CPU		8
+#define CLK_TX_ICN_DMU		9
+#define CLK_TX_ICN_HVA		9
+#define CLK_TX_ICN_TS		9
+#define CLK_ICN_COMPO		9
+#define CLK_MMC_0		10
+#define CLK_MMC_1		11
+#define CLK_JPEGDEC		12
+#define CLK_ICN_REG		13
+#define CLK_TRACE_A9		13
+#define CLK_PTI_STM		13
+#define CLK_EXT2F_A9		13
+#define CLK_IC_BDISP_0		14
+#define CLK_IC_BDISP_1		15
+#define CLK_PP_DMU		16
+#define CLK_VID_DMU		17
+#define CLK_DSS_LPC		18
+#define CLK_ST231_AUD_0		19
+#define CLK_ST231_GP_0		19
+#define CLK_ST231_GP_1		20
+#define CLK_ST231_DMU		21
+#define CLK_ICN_LMI		22
+#define CLK_TX_ICN_DISP_0	23
+#define CLK_TX_ICN_DISP_1	23
+#define CLK_ICN_SBC		24
+#define CLK_STFE_FRC2		25
+#define CLK_ETH_PHY		26
+#define CLK_ETH_REF_PHYCLK	27
+#define CLK_FLASH_PROMIP	28
+#define CLK_MAIN_DISP		29
+#define CLK_AUX_DISP		30
+#define CLK_COMPO_DVP		31
+
+#define VCO			4
+/* CLOCKGEN D0 */
+#define CLK_PCM_0		0
+#define CLK_PCM_1		1
+#define CLK_PCM_2		2
+#define CLK_SPDIFF		3
+
+/* CLOCKGEN D2 */
+#define CLK_PIX_MAIN_DISP	0
+#define CLK_PIX_PIP		1
+#define CLK_PIX_GDP1		2
+#define CLK_PIX_GDP2		3
+#define CLK_PIX_GDP3		4
+#define CLK_PIX_GDP4		5
+#define CLK_PIX_AUX_DISP	6
+#define CLK_DENC		7
+#define CLK_PIX_HDDAC		8
+#define CLK_HDDAC		9
+#define CLK_SDDAC		10
+#define CLK_PIX_DVO		11
+#define CLK_DVO			12
+#define CLK_PIX_HDMI		13
+#define CLK_TMDS_HDMI		14
+#define CLK_REF_HDMIPHY		15
+
+/* CLOCKGEN D3 */
+#define CLK_STFE_FRC1		0
+#define CLK_TSOUT_0		1
+#define CLK_TSOUT_1		2
+#define CLK_MCHI		3
+#define CLK_VSENS_COMPO		4
+#define CLK_FRC1_REMOTE		5
+#define CLK_LPC_0		6
+#define CLK_LPC_1		7
+
+#endif
diff -urNp a/arch/arm/boot/dts/stih407-clock.dtsi b/arch/arm/boot/dts/stih407-clock.dtsi
--- a/arch/arm/boot/dts/stih407-clock.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih407-clock.dtsi	2019-09-26 21:23:27.132619200 +0100
@@ -1,325 +1,312 @@
 /*
- * Copyright (C) 2014 STMicroelectronics R&D Limited
+ * Copyright (C) 2013 STMicroelectronics R&D Limited
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
  */
-#include <dt-bindings/clock/stih407-clks.h>
+#include "stih407-clks.h"
 / {
 	clocks {
 		#address-cells = <1>;
 		#size-cells = <1>;
 		ranges;
 
+		compatible = "st,stih407-clk", "simple-bus";
+
 		/*
 		 * Fixed 30MHz oscillator inputs to SoC
 		 */
-		clk_sysin: clk-sysin {
+		CLK_SYSIN: CLK_SYSIN {
 			#clock-cells = <0>;
 			compatible = "fixed-clock";
 			clock-frequency = <30000000>;
+			clock-output-names = "CLK_SYSIN";
 		};
 
 		/*
 		 * ARM Peripheral clock for timers
 		 */
-		arm_periph_clk: clk-m-a9-periphs {
+		arm_periph_clk: CLK_M_A9_PERIPHS {
 			#clock-cells = <0>;
 			compatible = "fixed-factor-clock";
-
-			clocks = <&clk_m_a9>;
+			clocks = <&CLK_M_A9>;
 			clock-div = <2>;
 			clock-mult = <1>;
 		};
 
 		/*
 		 * A9 PLL.
+		 *
 		 */
-		clockgen-a9@92b0000 {
+		clockgenA9 {
 			compatible = "st,clkgen-c32";
 			reg = <0x92b0000 0xffff>;
 
-			clockgen_a9_pll: clockgen-a9-pll {
-				#clock-cells = <1>;
+			CLOCKGEN_A9_PLL: CLOCKGEN_A9_PLL {
 				compatible = "st,stih407-plls-c32-a9", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
-
-				clock-output-names = "clockgen-a9-pll-odf";
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLOCKGEN_A9_PLL_ODF";
 			};
 		};
 
 		/*
 		 * ARM CPU related clocks.
 		 */
-		clk_m_a9: clk-m-a9@92b0000 {
-			#clock-cells = <0>;
+		CLK_M_A9: CLK_M_A9 {
 			compatible = "st,stih407-clkgen-a9-mux", "st,clkgen-mux";
+			#clock-cells = <0>;
 			reg = <0x92b0000 0x10000>;
-
-			clocks = <&clockgen_a9_pll 0>,
-				 <&clockgen_a9_pll 0>,
-				 <&clk_s_c0_flexgen 13>,
-				 <&clk_m_a9_ext2f_div2>;
+			clocks = <&CLOCKGEN_A9_PLL 0>,
+				 <&CLOCKGEN_A9_PLL 0>,
+				 <&CLK_S_C0_FLEXGEN 13>,
+				 <&CLK_M_A9_EXT2F_DIV2>;
 		};
 
 		/*
 		 * ARM Peripheral clock for timers
 		 */
-		clk_m_a9_ext2f_div2: clk-m-a9-ext2f-div2s {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
 
-			clocks = <&clk_s_c0_flexgen 13>;
-
-			clock-output-names = "clk-m-a9-ext2f-div2";
+		CLK_M_A9_EXT2F_DIV2: CLK_M_A9_EXT2F_DIV2S {
+			compatible = "fixed-factor-clock";
 
+			#clock-cells = <0>;
+			clock-output-names = "CLK_M_A9_EXT2F_DIV2";
+			clocks = <&CLK_S_C0_FLEXGEN 13>;
 			clock-div = <2>;
 			clock-mult = <1>;
 		};
 
 		/*
-		 * Bootloader initialized system infrastructure clock for
-		 * serial devices.
+		 * ClockGenAs on SASG2
 		 */
-		clk_ext2f_a9: clockgen-c0@13 {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <200000000>;
-			clock-output-names = "clk-s-icn-reg-0";
-		};
 
-		clockgen-a@090ff000 {
+		clockgenA@090ff000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x90ff000 0x1000>;
 
-			clk_s_a0_pll: clk-s-a0-pll {
-				#clock-cells = <1>;
+			CLK_S_A0_PLL: CLK_S_A0_PLL {
 				compatible = "st,stih407-plls-c32-a0", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
-
-				clock-output-names = "clk-s-a0-pll-ofd-0";
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_A0_PLL_ODF_0";
 			};
 
-			clk_s_a0_flexgen: clk-s-a0-flexgen {
+			CLK_S_A0_FLEXGEN: CLK_S_A0_FLEXGEN {
 				compatible = "st,flexgen";
 
 				#clock-cells = <1>;
-
-				clocks = <&clk_s_a0_pll 0>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-ic-lmi0";
+				clocks = <&CLK_S_A0_PLL 0>, <&CLK_SYSIN>;
+				clock-output-names = "CLK_IC_LMI0";
 			};
 		};
 
-		clk_s_c0_quadfs: clk-s-c0-quadfs@9103000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-C", "st,quadfs";
+		CLK_S_C0_QUADFS: CLK_S_C0_QUADFS {
+			compatible = "st,quadfs660-C", "st,quadfs";
 			reg = <0x9103000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-c0-fs0-ch0",
-					     "clk-s-c0-fs0-ch1",
-					     "clk-s-c0-fs0-ch2",
-					     "clk-s-c0-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_C0_FS0_CH0",
+					     "CLK_S_C0_FS0_CH1",
+					     "CLK_S_C0_FS0_CH2",
+					     "CLK_S_C0_FS0_CH3";
 		};
 
-		clk_s_c0: clockgen-c@09103000 {
+		CLK_S_C0: clockgenC@09103000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x9103000 0x1000>;
 
-			clk_s_c0_pll0: clk-s-c0-pll0 {
-				#clock-cells = <1>;
-				compatible = "st,stih407-plls-c32-c0_0", "st,clkgen-plls-c32";
-
-				clocks = <&clk_sysin>;
-
-				clock-output-names = "clk-s-c0-pll0-odf-0";
-			};
+			CLK_S_C0_PLL0: CLK_S_C0_PLL0 {
+				compatible = "st,plls-c32-cx_0", "st,clkgen-plls-c32";
 
-			clk_s_c0_pll1: clk-s-c0-pll1 {
 				#clock-cells = <1>;
-				compatible = "st,stih407-plls-c32-c0_1", "st,clkgen-plls-c32";
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_C0_PLL0_ODF_0";
+			};
 
-				clocks = <&clk_sysin>;
+			CLK_S_C0_PLL1: CLK_S_C0_PLL1 {
+				compatible = "st,stih407-plls-conf-c32-c0_1", "st,plls-c32-cx_1", "st,clkgen-plls-c32";
 
-				clock-output-names = "clk-s-c0-pll1-odf-0";
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_C0_PLL1_ODF_0";
 			};
 
-			clk_s_c0_flexgen: clk-s-c0-flexgen {
-				#clock-cells = <1>;
-				compatible = "st,flexgen";
+			CLK_S_C0_FLEXGEN: CLK_S_C0_FLEXGEN {
+				compatible = "st,stih407-flexgen-conf-c0", "st,stih407-clkgenc0", "st,flexgen";
 
-				clocks = <&clk_s_c0_pll0 0>,
-					 <&clk_s_c0_pll1 0>,
-					 <&clk_s_c0_quadfs 0>,
-					 <&clk_s_c0_quadfs 1>,
-					 <&clk_s_c0_quadfs 2>,
-					 <&clk_s_c0_quadfs 3>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-icn-gpu",
-						     "clk-fdma",
-						     "clk-nand",
-						     "clk-hva",
-						     "clk-proc-stfe",
-						     "clk-proc-tp",
-						     "clk-rx-icn-dmu",
-						     "clk-rx-icn-hva",
-						     "clk-icn-cpu",
-						     "clk-tx-icn-dmu",
-						     "clk-mmc-0",
-						     "clk-mmc-1",
-						     "clk-jpegdec",
-						     "clk-ext2fa9",
-						     "clk-ic-bdisp-0",
-						     "clk-ic-bdisp-1",
-						     "clk-pp-dmu",
-						     "clk-vid-dmu",
-						     "clk-dss-lpc",
-						     "clk-st231-aud-0",
-						     "clk-st231-gp-1",
-						     "clk-st231-dmu",
-						     "clk-icn-lmi",
-						     "clk-tx-icn-disp-1",
-						     "clk-icn-sbc",
-						     "clk-stfe-frc2",
-						     "clk-eth-phy",
-						     "clk-eth-ref-phyclk",
-						     "clk-flash-promip",
-						     "clk-main-disp",
-						     "clk-aux-disp",
-						     "clk-compo-dvp";
+				#clock-cells = <1>;
+				clocks = <&CLK_S_C0_PLL0 0>,
+					 <&CLK_S_C0_PLL1 0>,
+					 <&CLK_S_C0_QUADFS 0>,
+					 <&CLK_S_C0_QUADFS 1>,
+					 <&CLK_S_C0_QUADFS 2>,
+					 <&CLK_S_C0_QUADFS 3>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_ICN_GPU",
+						     "CLK_FDMA",
+						     "CLK_NAND",
+						     "CLK_HVA",
+						     "CLK_PROC_STFE",
+						     "CLK_PROC_TP",
+						     "CLK_RX_ICN_DMU",
+						     "CLK_RX_ICN_HVA",
+						     "CLK_ICN_CPU",
+						     "CLK_TX_ICN_DMU",
+						     "CLK_MMC_0",
+						     "CLK_MMC_1",
+						     "CLK_JPEGDEC",
+						     "CLK_EXT2FA9",
+						     "CLK_IC_BDISP_0",
+						     "CLK_IC_BDISP_1",
+						     "CLK_PP_DMU",
+						     "CLK_VID_DMU",
+						     "CLK_DSS_LPC",
+						     "CLK_ST231_AUD_0",
+						     "CLK_ST231_GP_1",
+						     "CLK_ST231_DMU",
+						     "CLK_ICN_LMI",
+						     "CLK_TX_ICN_DISP_1",
+						     "CLK_ICN_SBC",
+						     "CLK_STFE_FRC2",
+						     "CLK_ETH_PHY",
+						     "CLK_ETH_REF_PHYCLK",
+						     "CLK_FLASH_PROMIP",
+						     "CLK_MAIN_DISP",
+						     "CLK_AUX_DISP",
+						     "CLK_COMPO_DVP";
 			};
 		};
 
-		clk_s_d0_quadfs: clk-s-d0-quadfs@9104000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-D", "st,quadfs";
+		CLK_S_D0_QUADFS: CLK_S_D0_QUADFS {
+			compatible = "st,stih407-quadfs660-D0", "st,quadfs";
 			reg = <0x9104000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-d0-fs0-ch0",
-					     "clk-s-d0-fs0-ch1",
-					     "clk-s-d0-fs0-ch2",
-					     "clk-s-d0-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D0_FS0_CH0",
+					     "CLK_S_D0_FS0_CH1",
+					     "CLK_S_D0_FS0_CH2",
+					     "CLK_S_D0_FS0_CH3";
 		};
 
-		clockgen-d0@09104000 {
-			compatible = "st,clkgen-c32";
+		clockgenD0@09104000 {
+			compatible = "st,flexgen-ref";
 			reg = <0x9104000 0x1000>;
 
-			clk_s_d0_flexgen: clk-s-d0-flexgen {
-				#clock-cells = <1>;
-				compatible = "st,flexgen";
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "",
+					     "CLK_USB2_PHY",
+					     "";
 
-				clocks = <&clk_s_d0_quadfs 0>,
-					 <&clk_s_d0_quadfs 1>,
-					 <&clk_s_d0_quadfs 2>,
-					 <&clk_s_d0_quadfs 3>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-pcm-0",
-						     "clk-pcm-1",
-						     "clk-pcm-2",
-						     "clk-spdiff";
+			CLK_S_D0_FLEXGEN: CLK_S_D0_FLEXGEN {
+				compatible = "st,stih407-clkgend0", "st,flexgen";
+				#clock-cells = <1>;
+				clocks = <&CLK_S_D0_QUADFS 0>,
+					 <&CLK_S_D0_QUADFS 1>,
+					 <&CLK_S_D0_QUADFS 2>,
+					 <&CLK_S_D0_QUADFS 3>,
+					 <&CLK_SYSIN>;
+				clock-output-names = "CLK_PCM_0",
+						     "CLK_PCM_1",
+						     "CLK_PCM_2",
+						     "CLK_SPDIFF";
 			};
 		};
 
-		clk_s_d2_quadfs: clk-s-d2-quadfs@9106000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-D", "st,quadfs";
+		CLK_S_D2_QUADFS: CLK_S_D2_QUADFS {
+			compatible = "st,stih407-quadfs660-conf-D2", "st,stih407-quadfs660-D2", "st,quadfs";
 			reg = <0x9106000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-d2-fs0-ch0",
-					     "clk-s-d2-fs0-ch1",
-					     "clk-s-d2-fs0-ch2",
-					     "clk-s-d2-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D2_FS0_CH0",
+					     "CLK_S_D2_FS0_CH1",
+					     "CLK_S_D2_FS0_CH2",
+					     "CLK_S_D2_FS0_CH3";
 		};
 
-		clk_tmdsout_hdmi: clk-tmdsout-hdmi {
+		CLK_TMDSOUT_HDMI: CLK_TMDSOUT_HDMI {
 			#clock-cells = <0>;
 			compatible = "fixed-clock";
 			clock-frequency = <0>;
 		};
 
-		clockgen-d2@x9106000 {
+		clockgenD2@x9106000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x9106000 0x1000>;
 
-			clk_s_d2_flexgen: clk-s-d2-flexgen {
+			CLK_S_D2_FLEXGEN: CLK_S_D2_FLEXGEN {
+				compatible = "st,stih407-flexgen-conf-d2", "st,stih407-clkgend2", "st,flexgen";
 				#clock-cells = <1>;
-				compatible = "st,flexgen";
 
-				clocks = <&clk_s_d2_quadfs 0>,
-					 <&clk_s_d2_quadfs 1>,
-					 <&clk_s_d2_quadfs 2>,
-					 <&clk_s_d2_quadfs 3>,
-					 <&clk_sysin>,
-					 <&clk_sysin>,
-					 <&clk_tmdsout_hdmi>;
-
-				clock-output-names = "clk-pix-main-disp",
-						     "clk-pix-pip",
-						     "clk-pix-gdp1",
-						     "clk-pix-gdp2",
-						     "clk-pix-gdp3",
-						     "clk-pix-gdp4",
-						     "clk-pix-aux-disp",
-						     "clk-denc",
-						     "clk-pix-hddac",
-						     "clk-hddac",
-						     "clk-sddac",
-						     "clk-pix-dvo",
-						     "clk-dvo",
-						     "clk-pix-hdmi",
-						     "clk-tmds-hdmi",
-						     "clk-ref-hdmiphy";
-						     };
+				clocks = <&CLK_S_D2_QUADFS 0>,
+					 <&CLK_S_D2_QUADFS 1>,
+					 <&CLK_S_D2_QUADFS 2>,
+					 <&CLK_S_D2_QUADFS 3>,
+					 <&CLK_SYSIN>,
+					 <&CLK_SYSIN>,
+					 <&CLK_TMDSOUT_HDMI>;
+
+				clock-output-names = "CLK_PIX_MAIN_DISP",
+						     "CLK_PIX_PIP",
+						     "CLK_PIX_GDP1",
+						     "CLK_PIX_GDP2",
+						     "CLK_PIX_GDP3",
+						     "CLK_PIX_GDP4",
+						     "CLK_PIX_AUX_DISP",
+						     "CLK_DENC",
+						     "CLK_PIX_HDDAC",
+						     "CLK_HDDAC",
+						     "CLK_SDDAC",
+						     "CLK_PIX_DVO",
+						     "CLK_DVO",
+						     "CLK_PIX_HDMI",
+						     "CLK_TMDS_HDMI",
+						     "CLK_REF_HDMIPHY";
+			};
 		};
 
-		clk_s_d3_quadfs: clk-s-d3-quadfs@9107000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-D", "st,quadfs";
+		CLK_S_D3_QUADFS: CLK_S_D3_QUADFS {
+			compatible = "st,quadfs660-D", "st,quadfs";
 			reg = <0x9107000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-d3-fs0-ch0",
-					     "clk-s-d3-fs0-ch1",
-					     "clk-s-d3-fs0-ch2",
-					     "clk-s-d3-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D3_FS0_CH0",
+					     "CLK_S_D3_FS0_CH1",
+					     "CLK_S_D3_FS0_CH2",
+					     "CLK_S_D3_FS0_CH3";
 		};
 
-		clockgen-d3@9107000 {
+		clockgenD3@9107000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x9107000 0x1000>;
 
-			clk_s_d3_flexgen: clk-s-d3-flexgen {
-				#clock-cells = <1>;
+			CLK_S_D3_FLEXGEN: CLK_S_D3_FLEXGEN {
 				compatible = "st,flexgen";
+				#clock-cells = <1>;
 
-				clocks = <&clk_s_d3_quadfs 0>,
-					 <&clk_s_d3_quadfs 1>,
-					 <&clk_s_d3_quadfs 2>,
-					 <&clk_s_d3_quadfs 3>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-stfe-frc1",
-						     "clk-tsout-0",
-						     "clk-tsout-1",
-						     "clk-mchi",
-						     "clk-vsens-compo",
-						     "clk-frc1-remote",
-						     "clk-lpc-0",
-						     "clk-lpc-1";
+				clocks = <&CLK_S_D3_QUADFS 0>,
+					 <&CLK_S_D3_QUADFS 1>,
+					 <&CLK_S_D3_QUADFS 2>,
+					 <&CLK_S_D3_QUADFS 3>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_STFE_FRC1",
+						     "CLK_TSOUT_0",
+						     "CLK_TSOUT_1",
+						     "CLK_MCHI",
+						     "CLK_VSENS_COMPO",
+						     "CLK_FRC1_REMOTE",
+						     "CLK_LPC_0",
+						     "CLK_LPC_1";
 			};
 		};
 	};
diff -urNp a/arch/arm/boot/dts/stih407-family.dtsi b/arch/arm/boot/dts/stih407-family.dtsi
--- a/arch/arm/boot/dts/stih407-family.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih407-family.dtsi	2019-09-26 21:23:27.132619200 +0100
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2014 STMicroelectronics Limited.
+ * Copyright (C) 2013 STMicroelectronics Limited.
  * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
@@ -8,10 +8,29 @@
  */
 #include "stih407-pinctrl.dtsi"
 #include <dt-bindings/reset-controller/stih407-resets.h>
+#include <dt-bindings/phy/phy-miphy28lp.h>
+#include <dt-bindings/gpio/gpio-st-wakeup.h>
+#include <dt-bindings/st/flashss.h>
+
+#define CLK_PCM_0 0
+#define CLK_PCM_1 1
+#define CLK_PCM_2 2
+#define CLK_SPDIF 3
+
 / {
 	#address-cells = <1>;
 	#size-cells = <1>;
 
+	aliases {
+		sata0 = &sata0;
+		sata1 = &sata1;
+		mailbox0 = &mailbox0;
+		mailbox1 = &mailbox1;
+		mailbox2 = &mailbox2;
+		mailbox3 = &mailbox3;
+		mailbox4 = &mailbox4;
+	};
+
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
@@ -19,19 +38,22 @@
 			device_type = "cpu";
 			compatible = "arm,cortex-a9";
 			reg = <0>;
+			clocks = <&CLK_M_A9>;
+			clock-names = "cpu";
+			clock-latency = <100000>;
 		};
-		cpu@1 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <1>;
-		};
+	};
+
+	cpuidle {
+		compatible = "st,cpuidle";
 	};
 
 	intc: interrupt-controller@08761000 {
 		compatible = "arm,cortex-a9-gic";
 		#interrupt-cells = <3>;
 		interrupt-controller;
-		reg = <0x08761000 0x1000>, <0x08760100 0x100>;
+		reg = <0x08761000 0x1000>,
+		      <0x08760100 0x100>;
 	};
 
 	scu@08760000 {
@@ -39,6 +61,13 @@
 		reg = <0x08760000 0x1000>;
 	};
 
+	lpc-timer@0x8788000 {
+		compatible = "st,st_lpc_timer";
+		reg = <0x8788000 0x1000>;
+		clock-names = "lpc_clk";
+		clocks = <&CLK_S_D3_FLEXGEN CLK_LPC_1>;
+	};
+
 	timer@08760200 {
 		interrupt-parent = <&intc>;
 		compatible = "arm,cortex-a9-global-timer";
@@ -47,7 +76,7 @@
 		clocks = <&arm_periph_clk>;
 	};
 
-	l2: cache-controller {
+	L2: cache-controller {
 		compatible = "arm,pl310-cache";
 		reg = <0x08762000 0x1000>;
 		arm,data-latency = <3 3 3>;
@@ -63,277 +92,1505 @@
 		ranges;
 		compatible = "simple-bus";
 
+		restart {
+			compatible = "st,stih407-restart";
+			st,syscfg = <&syscfg_sbc_reg>;
+		};
+
+		socinfo {
+			compatible = "st,stih407-socinfo";
+			st,syscfg = <&syscfg_core>;
+		};
+
 		powerdown: powerdown-controller {
-			compatible = "st,stih407-powerdown";
 			#reset-cells = <1>;
+			compatible = "st,stih407-powerdown";
+		};
+
+		ddr-pctl-controller {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges;
+			compatible = "st,ddr-pctl", "simple-bus";
+			reg = <0x090ff000 0x1000>;
+			reg-names = "ddr_pll";
+			ddr-pctl@09010000 {
+				compatible = "st,stih407-ddr-controller", "st,ddr-controller";
+				reg = <0x09010000 0x2000>;
+				st,syscfg = <&syscfg_core>;
+			};
+		};
+
+		ddr-mixer {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges;
+			compatible = "st,ddr-mixer", "simple-bus";
+			ddr-mixer@09012000 {
+				reg = <0x09012000 0x2000>;
+			};
+		};
+
+		abap-regs {
+			reg = <0xffff0020 0x20>;
+		};
+
+		memory {
+			device_type = "eram";
+			reg = <0x06000000 0x20000>;
+			reg-names = "eram_1";
+		};
+
+		lpm:stm-lpm@9400000 {
+			compatible = "st,stih407-family-lpm", "st,lpm";
+			reg = <0x9400000 0xa0000>,
+			<0x94b4000 0x400>,
+			<0x94b5100 0x100>,
+			<0x020000 0x0>;
+			reg-names = "base", "mailbox", "confreg", "pmem";
+			interrupts = <GIC_SPI 144 IRQ_TYPE_NONE>;
+			st,fw_name = "lpm-fw-STiH407.elf";
+			st,acg_calib = "on";
+			status = "disabled";
+
+			rtc: rtc_sbc@0 {
+				compatible = "st,rtc-sbc";
+			};
 		};
 
 		softreset: softreset-controller {
-			compatible = "st,stih407-softreset";
 			#reset-cells = <1>;
+			compatible = "st,stih407-softreset";
 		};
 
 		picophyreset: picophyreset-controller {
-			compatible = "st,stih407-picophyreset";
 			#reset-cells = <1>;
+			compatible = "st,stih407-picophyreset";
 		};
 
-		syscfg_sbc: sbc-syscfg@9620000 {
+		pmu {
+			compatible = "st,stih407-pmu-syscfg";
+			st,syscfg = <&syscfg_core>;
+
+			arm-pmu {
+				interrupt-parent = <&intc>;
+				compatible = "arm,cortex-a9-pmu";
+				interrupts = <GIC_PPI 15 IRQ_TYPE_LEVEL_HIGH>;
+			};
+		};
+
+		syscfg_sbc:sbc-syscfg@9620000{
 			compatible = "st,stih407-sbc-syscfg", "syscon";
 			reg = <0x9620000 0x1000>;
+			holes = <0x18 0x88
+				 0xa8 0x20
+				 0xd0 0x20
+				 0xf8 0x98
+				 0x248 0xdb8>;
 		};
 
-		syscfg_front: front-syscfg@9280000 {
+		syscfg_front:front-syscfg@9280000{
 			compatible = "st,stih407-front-syscfg", "syscon";
 			reg = <0x9280000 0x1000>;
+			holes = <0x2c 0x74
+				 0xac 0x1c
+				 0xd4 0x1c
+				 0xfc 0x94
+				 0x2f0 0xd10>;
 		};
 
-		syscfg_rear: rear-syscfg@9290000 {
+		syscfg_rear:rear-syscfg@9290000{
 			compatible = "st,stih407-rear-syscfg", "syscon";
 			reg = <0x9290000 0x1000>;
+			holes = <0x18 0x88
+				 0xa8 0x20
+				 0xd0 0x20
+				 0xf8 0x98
+				 0x24c 0xdb4>;
 		};
 
-		syscfg_flash: flash-syscfg@92a0000 {
+		syscfg_flash:flash-syscfg@92a0000{
 			compatible = "st,stih407-flash-syscfg", "syscon";
 			reg = <0x92a0000 0x1000>;
+			holes = <0xc 0xe4
+				 0xf4 0x4c
+				 0x148 0xc
+				 0x15c 0xea4>;
 		};
 
-		syscfg_sbc_reg: fvdp-lite-syscfg@9600000 {
+		syscfg_sbc_reg:fvdp-lite-syscfg@9600000{
 			compatible = "st,stih407-sbc-reg-syscfg", "syscon";
 			reg = <0x9600000 0x1000>;
+			holes = <0x4 0x4
+				 0xc 0x4
+				 0x14 0xc
+				 0x24 0xc
+				 0x34 0xc
+				 0x48 0x8
+				 0x54 0xc
+				 0x64 0x1c
+				 0x84 0x15c
+				 0x1e8 0x5e8
+				 0x7dc 0x4
+				 0x7e4 0xc
+				 0x7f8 0x8
+				 0x804 0xc
+				 0x814 0xc
+				 0x824 0x7dc>;
 		};
 
-		syscfg_core: core-syscfg@92b0000 {
+		syscfg_core:core-syscfg@92b0000{
 			compatible = "st,stih407-core-syscfg", "syscon";
 			reg = <0x92b0000 0x1000>;
+			holes = <0xc 0x14
+				 0x24 0x20
+				 0x48 0x38
+				 0x84 0x1c
+				 0xac 0x2c
+				 0xe8 0x4
+				 0x104 0x4
+				 0x128 0x18
+				 0x144 0x1c
+				 0x164 0x1c
+				 0x184 0x14
+				 0x19c 0x4
+				 0x1dc 0x24
+				 0x214 0xc
+				 0x24c 0x14
+				 0x268 0x40
+				 0x2ac 0x10
+				 0x2c8 0x508
+				 0x7d8 0x20
+				 0x808 0x8
+				 0x824 0xc
+				 0x83c 0x38
+				 0x878 0x4
+				 0x898 0x2c
+				 0x8c8 0x18
+				 0x8ec 0x24
+				 0x914 0xc
+				 0x924 0x6dc>;
 		};
 
-		syscfg_lpm: lpm-syscfg@94b5100 {
+		syscfg_lpm:lpm-syscfg@94b5100{
 			compatible = "st,stih407-lpm-syscfg", "syscon";
 			reg = <0x94b5100 0x1000>;
+			holes = <0x70 0xf90>;
 		};
 
-		serial@9830000 {
+		/* Comms block ASCs */
+		serial0: serial@9830000{
 			compatible = "st,asc";
+			status = "disabled";
 			reg = <0x9830000 0x2c>;
 			interrupts = <GIC_SPI 122 IRQ_TYPE_NONE>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_serial0>;
-			clocks = <&clk_s_c0_flexgen CLK_EXT2F_A9>;
-
-			status = "disabled";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
 		};
 
-		serial@9831000 {
+		serial1: serial@9831000{
 			compatible = "st,asc";
+			status = "disabled";
 			reg = <0x9831000 0x2c>;
 			interrupts = <GIC_SPI 123 IRQ_TYPE_NONE>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_serial1>;
-			clocks = <&clk_s_c0_flexgen CLK_EXT2F_A9>;
-
-			status = "disabled";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
 		};
 
-		serial@9832000 {
+		serial2: serial@9832000{
 			compatible = "st,asc";
+			status = "disabled";
 			reg = <0x9832000 0x2c>;
 			interrupts = <GIC_SPI 124 IRQ_TYPE_NONE>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_serial2>;
-			clocks = <&clk_s_c0_flexgen CLK_EXT2F_A9>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+		};
 
+		serial3: serial@9833000{
+			compatible = "st,asc";
 			status = "disabled";
+			reg = <0x9833000 0x2c>;
+			interrupts = <GIC_SPI 125 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_serial3>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
 		};
 
 		/* SBC_ASC0 - UART10 */
 		sbc_serial0: serial@9530000 {
 			compatible = "st,asc";
+			status = "disabled";
 			reg = <0x9530000 0x2c>;
 			interrupts = <GIC_SPI 138 IRQ_TYPE_NONE>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_sbc_serial0>;
-			clocks = <&clk_sysin>;
-
-			status = "disabled";
+			clocks = <&CLK_SYSIN>;
 		};
 
-		serial@9531000 {
+		/* SBC_ASC1 - UART11 */
+		sbc_serial1: serial@9531000 {
 			compatible = "st,asc";
+			status = "disabled";
 			reg = <0x9531000 0x2c>;
 			interrupts = <GIC_SPI 139 IRQ_TYPE_NONE>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_sbc_serial1>;
-			clocks = <&clk_sysin>;
+			clocks = <&CLK_SYSIN>;
+		};
 
+		/* RNG */
+		rng: rng@08A89000 {
+			compatible = "st,rng";
+			reg = <0x08A89000 0x1000>;
+			clocks = <&CLK_SYSIN>;
+		};
+
+		rc: rc@09518000 {
+			compatible = "st,comms-irb";
+			reg = <0x09518000 0x234>;
+			interrupts = <GIC_SPI 132 IRQ_TYPE_NONE>;
+			rx-mode = "infrared";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_ir>;
+			clocks = <&CLK_SYSIN>;
+			resets = <&softreset STIH407_IRB_SOFTRESET>;
+		};
+
+		/*
+		 * The table below summarizes which uses the FlashSS Top
+		 * registers. For example the vsense register is exclusively
+		 * mapped by the voltage regulator, the subset of registers
+		 * to manage the eMMC RX/TX delay are only used inside the
+		 * SDHCI ST driver.
+		 *
+		 *----------------------------------------------------------
+		 * Offset	   Register		Driver
+		 *----------------------------------------------------------
+		 *   0x0	FLASHSS_CONFIG		NAND
+		 *   0x4	VSENSE_CONFIG		Voltage Regulator
+		 *   0x8	eMMC_TX_CLK_DELAY	SDHCI-ST
+		 *		 ...
+		 */
+
+		/* Supply voltage for I/O */
+		vqmmc_reg: voltage-regulator {
+			compatible = "st,vqmmc";
+			regulator-name = "vqmmc0";
+			/* Control register for the VSENSE Module */
+			reg = <0x9061004 0x4>;
+			status = "disabled";
+			regulator-min-microvolt = <1800000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+		};
+
+		/*
+		 * STiH407 and STiH410 SoCs support FlashSS Core version 1.6
+		 * (FlashSS IP functional specification revision 1.3).
+		 */
+		mmc0: sdhci@09060000 {
+			compatible = "st,sdhci";
+			status = "disabled";
+			reg = <0x09060000 0x7ff>, <0x9061008 0x20>;
+			reg-names = "mmc", "top-mmc-delay";
+			interrupts = <GIC_SPI 92 IRQ_TYPE_NONE>;
+			interrupt-names = "mmcirq";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_mmc0>;
+			clock-names = "mmc";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_MMC_0>;
+			st,no-hispd-bit;
+			st,flashss-version = <FLASHSS_CORE_VERSION_1_6>;
+			st,mmcss-config;
+			vqmmc-supply = <&vqmmc_reg>;
+		};
+
+		mmc1: sdhci@09080000 {
+			compatible = "st,sdhci";
 			status = "disabled";
+			reg = <0x09080000 0x7ff>;
+			reg-names = "mmc";
+			interrupts = <GIC_SPI 90 IRQ_TYPE_NONE>;
+			interrupt-names = "mmcirq";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_sd1>;
+			cd-gpios = <&PIO19 0 0>;
+			clock-names = "mmc";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_MMC_1>;
+			resets = <&softreset STIH407_MMC1_SOFTRESET>;
+			st,mmcss-config;
 		};
 
 		i2c@9840000 {
 			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
 			interrupts = <GIC_SPI 112 IRQ_TYPE_LEVEL_HIGH>;
 			reg = <0x9840000 0x110>;
-			clocks = <&clk_s_c0_flexgen CLK_EXT2F_A9>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
 			clock-names = "ssc";
 			clock-frequency = <400000>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_i2c0_default>;
-
-			status = "disabled";
 		};
 
 		i2c@9841000 {
 			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
 			reg = <0x9841000 0x110>;
 			interrupts = <GIC_SPI 113 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clk_s_c0_flexgen CLK_EXT2F_A9>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
 			clock-names = "ssc";
 			clock-frequency = <400000>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_i2c1_default>;
-
-			status = "disabled";
 		};
 
 		i2c@9842000 {
 			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
 			reg = <0x9842000 0x110>;
 			interrupts = <GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clk_s_c0_flexgen CLK_EXT2F_A9>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
 			clock-names = "ssc";
 			clock-frequency = <400000>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_i2c2_default>;
-
-			status = "disabled";
 		};
 
 		i2c@9843000 {
 			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
 			reg = <0x9843000 0x110>;
 			interrupts = <GIC_SPI 115 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clk_s_c0_flexgen CLK_EXT2F_A9>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
 			clock-names = "ssc";
 			clock-frequency = <400000>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_i2c3_default>;
-
-			status = "disabled";
 		};
 
 		i2c@9844000 {
 			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
 			reg = <0x9844000 0x110>;
 			interrupts = <GIC_SPI 116 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clk_s_c0_flexgen CLK_EXT2F_A9>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
 			clock-names = "ssc";
 			clock-frequency = <400000>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_i2c4_default>;
-
-			status = "disabled";
 		};
 
 		i2c@9845000 {
 			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
 			reg = <0x9845000 0x110>;
 			interrupts = <GIC_SPI 117 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clk_s_c0_flexgen CLK_EXT2F_A9>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
 			clock-names = "ssc";
 			clock-frequency = <400000>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_i2c5_default>;
-
-			status = "disabled";
 		};
 
 
 		/* SSCs on SBC */
 		i2c@9540000 {
 			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
 			reg = <0x9540000 0x110>;
 			interrupts = <GIC_SPI 135 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clk_sysin>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_SYSIN>;
 			clock-names = "ssc";
 			clock-frequency = <400000>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_i2c10_default>;
-
-			status = "disabled";
 		};
 
 		i2c@9541000 {
 			compatible = "st,comms-ssc4-i2c";
+			status = "disabled";
 			reg = <0x9541000 0x110>;
 			interrupts = <GIC_SPI 136 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&clk_sysin>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_SYSIN>;
 			clock-names = "ssc";
 			clock-frequency = <400000>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_i2c11_default>;
+		};
 
+		i2c@9542000 {
+			compatible = "st,comms-ssc4-i2c";
 			status = "disabled";
+			reg = <0x9542000 0x110>;
+			interrupts = <GIC_SPI 137 IRQ_TYPE_LEVEL_HIGH>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c12_default>;
 		};
 
-		usb2_picophy0: phy1 {
+		stmmac_axi_config: stmmac-axi-config {
+			snps,wr_osr_lmt = <0xf>;
+			snps,rd_osr_lmt = <0xf>;
+			snps,blen = <0 0 0 0 16 0 0>;
+		};
+
+		ethernet0: dwmac@9630000 {
+			device_type = "network";
+			status = "disabled";
+			compatible = "st,stih407-dwmac", "snps,dwmac", "snps,dwmac-3.710";
+			reg = <0x9630000 0x8000>, <0x80 0x4>;
+			reg-names = "stmmaceth", "sti-ethconf";
+
+			st,syscon = <&syscfg_sbc_reg>;
+			st,gmac_en;
+			resets = <&softreset STIH407_ETH1_SOFTRESET>;
+			reset-names = "stmmaceth";
+
+			interrupts = <GIC_SPI 98 IRQ_TYPE_NONE>,
+				     <GIC_SPI 99 IRQ_TYPE_NONE>;
+			interrupt-names = "macirq", "eth_wake_irq";
+
+			/* DMA Bus Mode */
+			snps,pbl = <8>;
+			snps,aal;
+			/* AXI Mode */
+			snps,axi-config = <&stmmac_axi_config>;
+
+			snps,eee-force-disable;
+
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rgmii1>;
+
+			clock-names = "stmmaceth", "sti-ethclk";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>,
+				 <&CLK_S_C0_FLEXGEN CLK_ETH_PHY>;
+		};
+
+		/* Generic picoPHY */
+		usb2_picophy0: usbpicophy@0 {
 			compatible = "st,stih407-usb2-phy";
+			reg =	<0xf8 0x04>,	/* syscfg 5062 */
+				<0xf4 0x04>;    /* syscfg 5061 */
+			reg-names =	"param",
+					"ctrl";
 			#phy-cells = <0>;
-			st,syscfg = <&syscfg_core 0x100 0xf4>;
+
+			st,syscfg = <&syscfg_core>;
 			resets = <&softreset STIH407_PICOPHY_SOFTRESET>,
 				 <&picophyreset STIH407_PICOPHY0_RESET>;
-			reset-names = "global", "port";
+			reset-names = "global",
+				      "port";
 		};
 
-		miphy28lp_phy: miphy28lp@9b22000 {
-			compatible = "st,miphy28lp-phy";
+		usb2_picophy1: usbpicophy@1 {
+			compatible = "st,stih407-usb2-phy";
+			#phy-cells = <0>;
+			reg =	<0xfc 0x04>,	/* syscfg 5063 */
+				<0xf4 0x04>;    /* syscfg 5061 */
+			reg-names =	"param",
+					"ctrl";
+
 			st,syscfg = <&syscfg_core>;
-			#address-cells	= <1>;
-			#size-cells	= <1>;
-			ranges;
+			resets = <&softreset STIH407_PICOPHY_SOFTRESET>,
+				 <&picophyreset STIH407_PICOPHY1_RESET>;
+			reset-names = "global",
+				      "port";
+		};
 
-			phy_port0: port@9b22000 {
-				reg = <0x9b22000 0xff>,
-				      <0x9b09000 0xff>,
-				      <0x9b04000 0xff>;
-				reg-names = "sata-up",
-					    "pcie-up",
-					    "pipew";
+		usb2_picophy2: usbpicophy@2 {
+			compatible = "st,stih407-usb2-phy";
+			#phy-cells = <0>;
+			reg =	<0x100 0x04>,	/* syscfg 5064 */
+				<0xf4 0x04>;    /* syscfg 5061 */
+			reg-names =	"param",
+					"ctrl";
+			st,syscfg = <&syscfg_core>;
+			resets = <&softreset STIH407_PICOPHY_SOFTRESET>,
+				 <&picophyreset STIH407_PICOPHY2_RESET>;
+			reset-names = "global",
+				      "port";
+			st,txvreftune = <0xb>; /* +16% in HS DC level voltage */
+		};
 
-				st,syscfg = <0x114 0x818 0xe0 0xec>;
-				#phy-cells = <1>;
+		st_usb_bus_config: st-usb-amba-config {
+			st,bridge_type2;
+			st,sd_config_missing;
+		};
 
-				reset-names = "miphy-sw-rst";
-				resets = <&softreset STIH407_MIPHY0_SOFTRESET>;
+		usb0: usb@9A00000 {
+			compatible = "st,usb-300x";
+			status = "disabled";
+			st,amba-config = <&st_usb_bus_config>;
+			reg = <0x9a03c00 0x100>,
+			      <0x9a03e00 0x100>,
+			      <0x9a03f00 0x100>;
+			reg-names = "ohci", "ehci", "protocol";
+			interrupts = <GIC_SPI 151 IRQ_TYPE_NONE>,
+				     <GIC_SPI 180 IRQ_TYPE_NONE>;
+			interrupt-names = "ehci","ohci";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_usb0>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_TX_ICN_DISP_0>;
+			clock-names = "ic";
+			resets = <&powerdown STIH407_USB2_PORT0_POWERDOWN>,
+				 <&softreset STIH407_USB2_PORT0_SOFTRESET>;
+			reset-names = "power", "softreset";
+
+			phys = <&usb2_picophy0>;
+			phy-names = "usb2-phy";
+		};
+
+		usb1: usb@9A80000 {
+			compatible = "st,usb-300x";
+			status = "disabled";
+			st,amba-config = <&st_usb_bus_config>;
+			reg = <0x9a83c00 0x100>,
+			      <0x9a83e00 0x100>,
+			      <0x9a83f00 0x100>;
+			reg-names = "ohci", "ehci", "protocol";
+			interrupts = <GIC_SPI 153 IRQ_TYPE_NONE>,
+				     <GIC_SPI 181 IRQ_TYPE_NONE>;
+			interrupt-names = "ehci","ohci";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_usb1>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_TX_ICN_DISP_0>;
+			clock-names = "ic";
+			resets = <&powerdown STIH407_USB2_PORT1_POWERDOWN>,
+				 <&softreset STIH407_USB2_PORT1_SOFTRESET>;
+			reset-names = "power", "softreset";
+
+			phys = <&usb2_picophy1>;
+			phy-names = "usb2-phy";
+		};
+
+		usb3_phy: usb3_phy@0 {
+			compatible = "st,sti-usb3phy";
+			#phy-cells = <0>;
+			resets = <&softreset STIH407_MIPHY2_SOFTRESET>;
+			reg = <0x08f90000 0xff>, <0x08f95000 0xff>;
+			reg-names = "usb3-uport", "pipew";
+			st,syscfg = <&syscfg_core>;
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "disabled";
+			compatible = "st,stih407-dwc3";
+			reg = <0x08f94000 0x1000>, <0x110 0x4>;
+			reg-names = "reg-glue", "syscfg-reg";
+			st,syscfg = <&syscfg_core>;
+			resets = <&powerdown STIH407_USB3_POWERDOWN>,
+			<&softreset STIH407_MIPHY2_SOFTRESET>;
+			reset-names = "power", "soft";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_usb3>;
+			ranges;
+
+			dwc3: dwc3@9900000 {
+				compatible = "synopsys,dwc3";
+				reg = <0x09900000 0x100000>;
+				interrupts = <GIC_SPI 155 IRQ_TYPE_NONE>;
+
+				/* usb2 picophy port2, MiPHY2 port for USB3 */
+				phys = <&usb2_picophy2>;
+				phy-names = "usb2-phy";
+
+				usb3-phy = <&usb3_phy>;
 			};
+		};
+
+		mailbox0: mailbox@0  {
+			compatible = "st,stih407-mailbox";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			#mbox-cells = <1>;
+			reg = <0x8f00000 0x1000>;
+			reg-names = "mbox-reg";
+			interrupts = <GIC_SPI 1 IRQ_TYPE_NONE>;
+			interrupt-names = "mb0_irq";
+			status = "okay";
+			st,name = "a9";
+			st,mbox-rx;
+			st,mbox-rx-id = <0>;
+			st,mbox-names = "chan0_a9";
+			st,mbox-chans = <0 1 0 1>;
+		};
+
+		mailbox1: mailbox@1 {
+			compatible = "st,stih407-mailbox";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			#mbox-cells = <1>;
+			reg = <0x8f01000 0x1000>;
+			reg-names = "mbox-reg";
+			status = "okay";
+			st,name = "st231_gp_1";
+			st,mbox-rx-id = <0>;
+			st,mbox-names = "chan0_gp1";
+			st,mbox-chans = <1 1 0 1>;
+		};
+
+		mailbox2: mailbox@2 {
+			compatible = "st,stih407-mailbox";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			#mbox-cells = <1>;
+			reg = <0x8f02000 0x1000>;
+			reg-names = "mbox-reg";
+			status = "okay";
+			st,name = "st231_gp_0";
+			st,mbox-rx-id = <0>;
+			st,mbox-names = "chan0_gp0";
+			st,mbox-chans = <4 1 0 1>;
+		};
+
+		mailbox3: mailbox@3 {
+			compatible = "st,stih407-mailbox";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			#mbox-cells = <1>;
+			reg = <0x8f03000 0x100>;
+			reg-names = "mbox-reg";
+			status = "okay";
+			st,name = "st231_video";
+			st,mbox-type = "tx";
+			st,mbox-rx-id = <0>;
+			st,mbox-names = "chan0_video";
+			st,mbox-chans = <2 1 0 1>;
+		};
+
+		mailbox4: mailbox@4 {
+			compatible = "st,stih407-mailbox";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			#mbox-cells = <1>;
+			reg = <0x8f03100 0x100>;
+			reg-names = "mbox-reg";
+			status = "okay";
+			st,name = "st231_audio";
+			st,mbox-type = "tx";
+			st,mbox-rx-id = <0>;
+			st,mbox-names = "chan0_audio";
+			st,mbox-chans = <3 1 0 1>;
+		};
+
+		ics {
+			#clock-cells = <1>;
+			compatible = "st,stih407-ics";
+
+			clocks = <&CLK_S_C0_FLEXGEN CLK_ST231_GP_1>,
+				 <&CLK_S_C0_FLEXGEN CLK_ST231_DMU>,
+				 <&CLK_S_C0_FLEXGEN CLK_ST231_AUD_0>,
+				 <&CLK_S_C0_FLEXGEN CLK_ST231_GP_0>;
+
+			clock-names = "clk_00", /* CLK_ST231_GP_1 */
+				      "clk_01", /* CLK_ST231_DMU */
+				      "clk_02", /* CLK_ST231_AUD_0 */
+				      "clk_03"; /* CLK_ST231_GP_0 */
+
+			#mbox-cells = <1>;
+
+			mbox-names = "mbox_a9",
+				"mbox_gp1",
+				"mbox_video",
+				"mbox_audio",
+				"mbox_gp0";
+
+			mboxes     = <&mailbox0 0>,
+				   <&mailbox1 0>,
+				   <&mailbox3 0>,
+				   <&mailbox4 0>,
+				   <&mailbox2 0>;
+		};
+
+		temp0{
+			compatible = "st,stih407-thermal";
+			reg = <0x91a0000 0x28>;
+			clock-names = "thermal";
+			clocks = <&CLK_SYSIN>;
+			interrupts = <GIC_SPI 205 IRQ_TYPE_EDGE_RISING>;
+			st,passive_cooling_temp = <110>;
+		};
+
+		/* COMMS PWM MODULE */
+		pwm0: pwm@9810000 {
+			compatible = "st,sti-pwm";
+			status = "disabled";
+			#pwm-cells = <2>;
+			reg = <0x9810000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_pwm0_chan0_default>;
+			clock-names = "pwm";
+			clocks = <&CLK_SYSIN>;
+			st,pwm-num-chan = <1>;
+		};
 
-			phy_port1: port@9b2a000 {
-				reg = <0x9b2a000 0xff>,
-				      <0x9b19000 0xff>,
-				      <0x9b14000 0xff>;
-				reg-names = "sata-up",
-					    "pcie-up",
-					    "pipew";
+		/* SBC PWM MODULE */
+		pwm1: pwm@9510000 {
+			compatible = "st,sti-pwm";
+			status = "disabled";
+			#pwm-cells = <2>;
+			reg = <0x9510000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_pwm1_chan0_default
+				     &pinctrl_pwm1_chan1_default
+				     &pinctrl_pwm1_chan2_default
+				     &pinctrl_pwm1_chan3_default>;
+
+			clock-names = "pwm";
+			clocks = <&CLK_SYSIN>;
+			st,pwm-num-chan = <4>;
+		};
+
+		wdt: lpc_wdt@0x8787000 {
+			compatible = "st,stih407-lpc-wdt";
+			reg = <0x8787000 0x1000>;
+			clock-names = "lpc_wdt";
+			clocks = <&CLK_S_D3_FLEXGEN CLK_LPC_0>;
+			timeout-sec = <600>;
+			st,syscfg = <&syscfg_core>;
+		};
 
-				st,syscfg = <0x118 0x81c 0xe4 0xf0>;
+		miphy28lp_phy0: miphy28lp@0 {
+			compatible = "st,miphy28lp-phy";
+			#phy-cells = <1>;
+			reg = <0x9b22000 0xff>,
+			      <0x9b09000 0xff>,
+			      <0x9b04000 0xff>,
+			      <0x114 0x4>,	/* sysctrl MiPHY cntrl */
+			      <0x818 0x4>,	/* sysctrl MiPHY status*/
+			      <0xe0  0x4>,	/* sysctrl PCIe */
+			      <0xec  0x4>;	/* sysctrl SATA */
+			reg-names = "sata-up",
+				    "pcie-up",
+				    "pipew",
+				    "miphy-ctrl-glue",
+				    "miphy-status-glue",
+				    "pcie-glue",
+				    "sata-glue";
 
-				#phy-cells = <1>;
+			st,syscfg = <&syscfg_core>;
 
-				reset-names = "miphy-sw-rst";
-				resets = <&softreset STIH407_MIPHY1_SOFTRESET>;
+			resets = <&softreset STIH407_MIPHY0_SOFTRESET>;
+			reset-names = "miphy-sw-rst";
+
+			st,osc-rdy;
+			status = "disabled";
+		};
+
+		miphy28lp_phy1: miphy28lp@1 {
+			compatible = "st,miphy28lp-phy";
+			#phy-cells = <1>;
+			reg = <0x9b2a000 0xff>,
+			      <0x9b19000 0xff>,
+			      <0x9b14000 0xff>,
+			      <0x118 0x4>,
+			      <0x81c 0x4>,
+			      <0xe4  0x4>,
+			      <0xf0  0x4>,
+			      <0x330 0x4>;
+
+			reg-names = "sata-up",
+				    "pcie-up",
+				    "pipew",
+				    "miphy-ctrl-glue",
+				    "miphy-status-glue",
+				    "pcie-glue",
+				    "sata-glue",
+				    "miphy-osc-on";
+
+			st,syscfg = <&syscfg_core>;
+
+			resets = <&softreset STIH407_MIPHY1_SOFTRESET>;
+			reset-names = "miphy-sw-rst";
+			st,osc-force-ext-active-low;
+			status = "disabled";
+		};
+
+		miphy28lp_phy2: miphy28lp@2 {
+			compatible = "st,miphy28lp-phy";
+			#phy-cells = <1>;
+			reg = <0x8f95000 0xff>,
+			      <0x8f90000 0xff>,
+			      <0x11c 0x4>,
+			      <0x820 0x4>;
+
+			reg-names = "pipew",
+				    "usb3-up",
+				    "miphy-ctrl-glue",
+				    "miphy-status-glue";
+
+			st,syscfg = <&syscfg_core>;
+
+			resets = <&softreset STIH407_MIPHY2_SOFTRESET>;
+			reset-names = "miphy-sw-rst";
+			status = "disabled";
+		};
+
+		sata0: sata@9b20000 {
+			compatible = "st,ahci";
+			reg = <0x9b20000 0x1000>;
+
+			interrupts = <GIC_SPI 159 IRQ_TYPE_NONE>;
+			interrupt-names = "hostc";
+
+			status = "disabled";
+
+			phys = <&miphy28lp_phy0 MIPHY28LP_SATA>;
+			phy-names = "ahci_phy";
+
+			resets = <&powerdown STIH407_SATA0_POWERDOWN>,
+				 <&softreset STIH407_SATA0_SOFTRESET>,
+				 <&softreset STIH407_SATA0_PWR_SOFTRESET>;
+			reset-names = "pwr-dwn",
+				      "sw-rst",
+				      "pwr-rst";
+
+			clock-names = "ahci_clk";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_ICN_REG>;
+		};
+
+		sata1: sata@9b28000 {
+			compatible = "st,ahci";
+			reg = <0x9b28000 0x1000>;
+
+			interrupts = <GIC_SPI 170 IRQ_TYPE_NONE>;
+			interrupt-names = "hostc";
+
+			status = "disabled";
+
+			phys = <&miphy28lp_phy1 MIPHY28LP_SATA>;
+			phy-names = "ahci_phy";
+
+			resets = <&powerdown STIH407_SATA1_POWERDOWN>,
+				 <&softreset STIH407_SATA1_SOFTRESET>,
+				 <&softreset STIH407_SATA1_PWR_SOFTRESET>;
+			reset-names = "pwr-dwn",
+				      "sw-rst",
+				      "pwr-rst";
+
+			clock-names = "ahci_clk";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_ICN_REG>;
+		};
+
+		pcie0: pcie@9b00000 {
+			compatible = "st,stih407-pcie";
+			device_type = "pci";
+			reg = <0x09b00000 0x00001000   /* cntrl registers */
+			       0x2fff0000 0x00010000   /* configuration space */
+			       0x40000000 0x80000000   /* lmi mem window */
+			       0xd8 0x04               /* syscfg 5054 */
+			       0xe0 0x04>;             /* syscfg 5056 */
+
+			reg-names = "pcie cntrl",
+				    "pcie cs",
+				    "mem-window",
+				    "syscfg0",
+				    "syscfg1";
+
+			interrupts = <GIC_SPI 160 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 161 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 162 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 163 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 166 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 164 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 167 IRQ_TYPE_LEVEL_HIGH>;
+			interrupt-names = "pcie inta",
+				          "pcie intb",
+					  "pcie intc",
+					  "pcie intd",
+					  "pcie syserr",
+					  "msi",
+					  "pcie link_rst";
+
+			#address-cells = <3>;
+			#size-cells = <2>;
+			ranges = <0x82000000 0 0x20000000 0x20000000 0 0x05550000   /* non-prefetchable memory */
+				  0xc2000000 0 0x25550000 0x25550000 0 0x0AAA0000>; /* prefetchable memory */
+			st,syscfg = <&syscfg_core>;
+
+			resets = <&powerdown STIH407_PCIE0_POWERDOWN>,
+				 <&softreset STIH407_PCIE0_SOFTRESET>;
+
+			reset-names = "power",
+				      "softreset";
+
+			phys = <&miphy28lp_phy0 MIPHY28LP_PCIE>;
+			phy-names = "pcie_phy";
+
+			status = "disabled";
+		};
+
+		pcie1: pcie@9b10000 {
+			compatible = "st,stih407-pcie";
+			device_type = "pci";
+			reg = <0x09b10000 0x00001000   /* cntrl registers */
+			       0x3fff0000 0x00010000   /* configuration space */
+			       0x40000000 0x80000000   /* lmi mem window */
+			       0xdc 0x04               /* syscfg 5055 */
+			       0xe4 0x04>;             /* syscfg 5057 */
+			reg-names = "pcie cntrl",
+				    "pcie cs",
+				    "mem-window",
+				    "syscfg0",
+				    "syscfg1";
+
+			interrupts = <GIC_SPI 171 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 172 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 173 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 174 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 177 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 175 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 178 IRQ_TYPE_LEVEL_HIGH>;
+			interrupt-names = "pcie inta",
+					  "pcie intb",
+					  "pcie intc",
+					  "pcie intd",
+					  "pcie syserr",
+					  "msi",
+					  "pcie link_rst";
+
+			#address-cells = <3>;
+			#size-cells = <2>;
+			ranges = <0x82000000 0 0x30000000 0x30000000 0 0x05550000   /* non-prefetchable memory */
+				  0xc2000000 0 0x35550000 0x35550000 0 0x0AAA0000>; /* prefetchable memory */
+			st,syscfg = <&syscfg_core>;
+
+			resets = <&powerdown STIH407_PCIE1_POWERDOWN>,
+				 <&softreset STIH407_PCIE1_SOFTRESET>;
+			reset-names = "power", "softreset";
+
+			phys = <&miphy28lp_phy1 MIPHY28LP_PCIE>;
+			phy-names = "pcie_phy";
+
+			status = "disabled";
+		};
+
+		keyscan: keyscan@94b0000 {
+			compatible = "st,keypad";
+			status = "disabled";
+			reg = <0x94b0000 0x2000>;
+			interrupts = <GIC_SPI 141 IRQ_TYPE_NONE>;
+			clocks = <&CLK_SYSIN>;
+			pinctrl-names = "default";
+			resets = <&softreset STIH407_KEYSCAN_SOFTRESET>;
+		};
+
+		spi@9840000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x9840000 0x110>;
+			interrupts = <GIC_SPI 112 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi0_default>;
+		};
+
+		spi@9841000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x9841000 0x110>;
+			interrupts = <GIC_SPI 113 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi1_default>;
+		};
+
+		spi@9842000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x9842000 0x110>;
+			interrupts = <GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi2_default>;
+		};
+
+		spi@9843000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x9843000 0x110>;
+			interrupts = <GIC_SPI 115 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi3_default>;
+		};
+
+		spi@9844000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x9844000 0x110>;
+			interrupts = <GIC_SPI 116 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi4_default>;
+		};
+
+		spi@9540000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x9540000 0x110>;
+			interrupts = <GIC_SPI 135 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi10_default>;
+		};
+
+		spi@9541000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x9541000 0x110>;
+			interrupts = <GIC_SPI 136 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi11_default>;
+		};
+
+		spi@9542000 {
+			compatible = "st,comms-ssc-spi";
+			status = "disabled";
+			reg = <0x9542000 0x110>;
+			interrupts = <GIC_SPI 137 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi12_default>;
+		};
+
+		xbar0: fdma-xbar-mpe@0 {
+			compatible = "st,fdma-xbar-1.0";
+			reg = <0x8e80000 0x1000>;
+			dma-requests = <79>;
+			#st,fdma-xbar-cells = <1>;
+		};
+
+		fdma0: fdma-audio@0 {
+			compatible = "st,fdma_mpe31";
+			reg = <0x8e20000 0x20000>;
+			interrupts = <GIC_SPI 5 IRQ_TYPE_NONE>;
+			dma-channels = <16>;
+			#dma-cells = <3>;
+			st,fw-name = "fdma_STiH407_0.elf";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_FDMA>,
+				 <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>,
+				 <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>,
+				 <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+			clock-names = "fdma_slim",
+				      "fdma_hi",
+				      "fdma_low",
+				      "fdma_ic";
+		};
+
+		fdma1: fdma-app@1 {
+			compatible = "st,fdma_mpe31";
+			reg = <0x8e40000 0x20000>;
+			interrupts = <GIC_SPI 7 IRQ_TYPE_NONE>;
+			dma-channels = <16>;
+			#dma-cells = <3>;
+			st,fdma-xbar = <&xbar0 1>;
+			st,fw-name = "fdma_STiH407_1.elf";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_FDMA>,
+				 <&CLK_S_C0_FLEXGEN CLK_TX_ICN_DMU>,
+				 <&CLK_S_C0_FLEXGEN CLK_TX_ICN_DMU>,
+				 <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+			clock-names = "fdma_slim",
+				      "fdma_hi",
+				      "fdma_low",
+				      "fdma_ic";
+		};
+
+		fdma2: fdma-free_running@2 {
+			compatible = "st,fdma_mpe31";
+			reg = <0x8e60000 0x20000>;
+			interrupts = <GIC_SPI 9 IRQ_TYPE_NONE>;
+			dma-channels = <16>;
+			#dma-cells = <3>;
+			st,fw-name = "fdma_STiH407_2.elf";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_FDMA>,
+				 <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>,
+				 <&CLK_S_C0_FLEXGEN CLK_TX_ICN_DISP_0>,
+				 <&CLK_S_C0_FLEXGEN CLK_EXT2F_A9>;
+			clock-names = "fdma_slim",
+			              "fdma_hi",
+				      "fdma_low",
+				      "fdma_ic";
+		};
+
+		/* Uniperipheral */
+		snd_uni_player0: snd-uni-player@0 {
+			compatible = "st,uni_player";
+			status = "disabled";
+			reg = <0x8D80000 0x158>;
+			interrupts = <GIC_SPI 84 IRQ_TYPE_NONE>;
+			version = <5>;
+			dmas = <&fdma0 2 0 1>;
+			dma-names = "tx";
+			description = "Uni Player #0 (HDMI)";
+			card-device = <0>;
+			mode = "HDMI";
+			iec958-lr-pol = <0>;
+			iec958-i2s-mode = <0>;
+			channels = <8>;
+			standby = <1>;
+			underflow = <1>;
+			clocks = <&CLK_S_D0_FLEXGEN CLK_PCM_0>;
+			clock-names = "uni_player_clk";
+			mclk_oversampling = <128>;
+			auto-suspend-delay = <5000>;
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			compatible = "st,uni_player";
+			status = "disabled";
+			reg = <0x8D81000  0x158>;
+			interrupts = <GIC_SPI 85 IRQ_TYPE_NONE>;
+			version = <5>;
+			dmas = <&fdma0 3 0 1>;
+			dma-names = "tx";
+			description = "Uni Player #1 (PIO)";
+			card-device = <1>;
+			mode = "PCM";
+			channels = <8>;
+			standby = <1>;
+			underflow = <1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2s_8ch_out>;
+			clocks = <&CLK_S_D0_FLEXGEN CLK_PCM_1>;
+			clock-names = "uni_player_clk";
+			auto-suspend-delay = <5000>;
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			compatible = "st,uni_player";
+			status = "disabled";
+			reg = <0x8D82000  0x158>;
+			interrupts = <GIC_SPI 86 IRQ_TYPE_NONE>;
+			version = <5>;
+			dmas = <&fdma0 4 0 1>;
+			dma-names = "tx";
+			description = "Uni Player #2 (DAC)";
+			card-device = <2>;
+			mode = "PCM";
+			channels = <2>;
+			standby = <1>;
+			underflow = <1>;
+			s16-swap-lr = <1>;
+			clocks = <&CLK_S_D0_FLEXGEN CLK_PCM_2>;
+			clock-names = "uni_player_clk";
+			mclk_oversampling = <256>;
+			auto-suspend-delay = <5000>;
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			compatible = "st,uni_player";
+			status = "disabled";
+			reg = <0x8D85000  0x158>;
+			interrupts = <GIC_SPI 89 IRQ_TYPE_NONE>;
+			version = <5>;
+			dmas = <&fdma0 7 0 1>;
+			dma-names = "tx";
+			description = "Uni Player #3 (SPDIF)";
+			iec958-lr-pol = <0>;
+			iec958-i2s-mode	= <1>;
+			card-device = <3>;
+			mode = "SPDIF";
+			channels = <2>;
+			standby = <1>;
+			underflow = <1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spdif_out>;
+			clocks = <&CLK_S_D0_FLEXGEN CLK_SPDIF>;
+			clock-names = "uni_player_clk";
+			auto-suspend-delay = <5000>;
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			compatible = "st,uni_reader";
+			status = "disabled";
+			reg = <0x8D83000  0x158>;
+			interrupts = <GIC_SPI 87 IRQ_TYPE_NONE>;
+			version = <3>;
+			dmas = <&fdma0 5 0 1>;
+			dma-names = "rx";
+			description = "Uni Reader #0 (SPDIF)";
+			card-device = <4>;
+			channels = <8>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2s_8ch_in>;
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			compatible = "st,uni_reader";
+			status = "disabled";
+			reg = <0x8D84000  0x158>;
+			interrupts = <GIC_SPI 88 IRQ_TYPE_NONE>;
+			version = <3>;
+			dmas = <&fdma0 6 0 1>;
+			dma-names = "rx";
+			description = "Uni Reader #1 (HDMI)";
+			card-device = <5>;
+			channels = <8>;
+		};
+
+		sti_audio_clk_glue: sti-audio-clk-glue {
+			st,syscfg = <&syscfg_core>;
+			reg-offset = <0x000000A4>;
+			bit-offset = <8>;
+		};
+
+		hdmi_formater:hdmi_fformat@8D04000 {
+			compatible = "st,stih407-hdmi_fformat", "syscon";
+			reg = <0x08D04000 0x1000>;
+			holes = <0x14 0x8
+				 0x24 0xdc
+				 0x130 0xd0
+				 0x208 0x8
+				 0x240 0x4
+				 0x24c 0xb8
+				 0x324 0xdc
+				 0x408 0xf8
+				 0x508 0x8
+				 0x514 0x4
+				 0x51c 0x4
+				 0x528 0xd8
+				 0x6a0 0x960>;
+		};
+
+		sti_sasg_codec: sti-sasg-codec {
+			compatible = "st,stih407-sas-codec";
+			status = "okay";
+			st,reg_audio = <&syscfg_core>;
+			st,reg_hdmi_ff = <&hdmi_formater>;
+			resets = <&softreset STIH407_HDTVOUT_SOFTRESET>;
+			interrupts = <GIC_SPI 106 IRQ_TYPE_NONE>;
+		};
+
+		sti_asoc_platform: sti-asoc-platform {
+			compatible = "st,sti-asoc-platform";
+			status = "okay";
+			st,mem-partition-name = "audio";
+		};
+
+		sti_cpufreq_init {
+			compatible = "st,stih407-cpufreq-init";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			ranges;
+
+			sti_bb {
+				compatible = "st,stih407-bb";
+				st,syscfg = <&syscfg_core>;
 			};
+		};
 
-			phy_port2: port@8f95000 {
-				reg = <0x8f95000 0xff>,
-				      <0x8f90000 0xff>;
-				reg-names = "pipew",
-					    "usb3-up";
+		st231_gp0: st231-gp0@0 {
+			compatible = "st,st231-rproc";
+			reg = <0x40000000 0x01000000>;
+			reg-names = "carveout";
+			resets = <&softreset STIH407_ST231_GP0_SOFTRESET>;
+			reset-names = "sw_reset";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_ST231_GP_0>;
+			clock-names = "rproc_clk";
+			clock-frequency = <600000000>;
+			st,syscfg-boot = <&syscfg_core 0x22C>;
+		};
+
+		st231_gp1: st231-gp1@0 {
+			compatible = "st,st231-rproc";
+			reg = <0x41000000 0x01000000>;
+			reg-names = "carveout";
+			resets = <&softreset STIH407_ST231_GP1_SOFTRESET>;
+			reset-names = "sw_reset";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_ST231_GP_1>;
+			clock-names = "rproc_clk";
+			clock-frequency = <600000000>;
+			st,syscfg-boot = <&syscfg_core 0x220>;
+		};
+
+		st231_audio: st231-audio@0 {
+			compatible = "st,st231-rproc";
+			reg = <0x42000000 0x01000000>;
+			reg-names = "carveout";
+			resets = <&softreset STIH407_ST231_AUD_SOFTRESET>;
+			reset-names = "sw_reset";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_ST231_AUD_0>;
+			clock-names = "rproc_clk";
+			clock-frequency = <600000000>;
+			st,syscfg-boot = <&syscfg_core 0x228>;
+		};
+
+		st231_dmu: st231-dmu@0 {
+			compatible = "st,st231-rproc";
+			reg = <0x43000000 0x01000000>;
+			reg-names = "carveout";
+			resets = <&softreset STIH407_ST231_DMU_SOFTRESET>;
+			reset-names = "sw_reset";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_ST231_DMU>;
+			clock-names = "rproc_clk";
+			clock-frequency = <600000000>;
+			st,syscfg-boot = <&syscfg_core 0x224>;
+		};
+
+		sti_aloop: sti-aloop {
+			compatible = "st,snd-sti-aloop";
+			status = "okay";
+			st,mem-partition-name = "audio";
+			num_devices = <4>;
+		};
+
+		/* FSM */
+		spifsm:	spifsm@9022000{
+			compatible = "st,spi-fsm";
+			status = "disabled";
+			reg = <0x9022000 0x1000>;
+			reg-names = "spi-fsm";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_FLASH_PROMIP>;
+			clock-names = "emi_clk";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_fsm>;
+			st,syscfg = <&syscfg_core>;
+			st,boot-device-reg = <0x8c4>;
+			st,boot-device-spi = <0x68>;
+			st,boot-device-msk = <0x7c>;
+			caps-handle = <&fsm_caps>;
+
+			fsm_caps: fsm-caps {
+				no-read-repeat;
+				no-write-repeat;
+				read-status-clkdiv4;
+				dual-mode;		/* DUAL mode */
+				quad-mode;		/* QUAD mode */
+			};
+		};
+
+		nandflex: nand-flex {
+			compatible = "st,nand-flex";
+			reg = <0x09021000 0x1000>;
+			reg-names = "nand_mem";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_FLASH_PROMIP>;
+			clock-names = "emi_clk";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_nand>;
+			st,flex-select-reg = <0x09061000>;
+			st,flex-select-msk = <0x1>;
+			status = "disabled";
+		};
+
+		nandafm: nand-afm {
+			compatible = "st,nand-afm";
+			reg = <0x09021000 0x1000>, <0x09060800 0x0800>;
+			reg-names = "nand_mem", "nand_dma";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_FLASH_PROMIP>;
+			clock-names = "emi_clk";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_nand>;
+			interrupts = <GIC_SPI 94 IRQ_TYPE_NONE>;
+			interrupt-names = "nand_irq";
+			st,flex-select-reg = <0x09061000>;
+			st,flex-select-msk = <0x1>;
+			status = "disabled";
+		};
 
-				st,syscfg = <0x11c 0x820>;
+		nandbch: nand-bch {
+			compatible = "st,nand-bch";
+			reg = <0x09021000 0x1000>, <0x09060800 0x0800>;
+			reg-names = "nand_mem", "nand_dma";
+			clocks = <&CLK_S_C0_FLEXGEN CLK_FLASH_PROMIP>,
+				 <&CLK_S_C0_FLEXGEN CLK_NAND>;
+			clock-names = "emi_clk", "bch_clk";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_nand>;
+			interrupts = <GIC_SPI 94 IRQ_TYPE_NONE>;
+			interrupt-names = "nand_irq";
+			st,bch-ecc-mode = "auto";
+			st,bch-select-reg = <0x09061000>;
+			st,bch-select-msk = <0x1>;
+			status = "disabled";
+		};
 
-				#phy-cells = <1>;
+		stm_systrace: systrace@09180000 {
+			compatible = "st,systrace-ipv3";
+			st,syscfg = <&syscfg_core>;
+			reg = <0x09180000 0x10000
+			       0x09190000 0x1000
+			       0x2F8 0x04		/* syscfg 5190 */
+			       0x2FC 0x04		/* syscfg 5191 */
+			       0x300 0x04		/* syscfg 5192 */
+			       0x304 0x04		/* syscfg 5193 */
+			       0x308 0x04		/* syscfg 5194 */
+			       0x30C 0x04		/* syscfg 5195 */
+			       0x310 0x04>;		/* syscfg 5196 */
+			reg-names = "stm-systrace-channels",
+			            "stm-systrace-conf",
+				    "syscfg0",
+				    "syscfg1",
+				    "syscfg2",
+				    "syscfg3",
+				    "syscfg4",
+				    "syscfg5",
+				    "syscfg6";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_systrace_default>;
+
+			v_sysconfs {
+				sysconf0 = <0x003f0000>;
+				sysconf1 = <0x00580058>;
+				sysconf2 = <0x00990098>;
+				sysconf3 = <0x00530050>;
+				sysconf4 = <0x00550054>;
+				sysconf5 = <0x00570056>;
+				sysconf6 = <0x03ff03ff>; /* Not the reset value */
+			};
 
-				reset-names = "miphy-sw-rst";
-				resets = <&softreset STIH407_MIPHY2_SOFTRESET>;
+			/* STM IP v3 configuration */
+			systrace-phy-config {
+				stm_reg0 { /* fck = 25Mhz */
+				    nam = "STM_CR";  ofs = <0x0000>; val = <0x0600>;
+				};
+				stm_reg1 {
+				    nam = "STM_MCR"; ofs = <0x0008>; val = <0x0000>;
+				};
+				stm_reg2 { /* Enable all initiators */
+				    nam = "STM_TER"; ofs = <0x0010>; val = <0x03ff>;
+				};
+				stm_reg3 { /*ASYNC period */
+				    nam = "STM_FTR"; ofs = <0x0080>; val = <1>;
+				};
+				stm_reg4 { /*ASYNC period */
+				    nam = "STM_CTR"; ofs = <0x0088>; val = <1>;
+				};
 			};
 		};
 	};
diff -urNp a/arch/arm/boot/dts/stih407-pinctrl.dtsi b/arch/arm/boot/dts/stih407-pinctrl.dtsi
--- a/arch/arm/boot/dts/stih407-pinctrl.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih407-pinctrl.dtsi	2019-09-26 21:23:27.132619200 +0100
@@ -1,47 +1,47 @@
 /*
- * Copyright (C) 2014 STMicroelectronics Limited.
+ * Copyright (C) 2013 STMicroelectronics Limited.
  * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
  * publishhed by the Free Software Foundation.
  */
-#include "st-pincfg.h"
+#include <dt-bindings/pinctrl/st-pincfg.h>
 #include <dt-bindings/interrupt-controller/arm-gic.h>
 / {
 
 	aliases {
 		/* 0-5: PIO_SBC */
-		gpio0 = &pio0;
-		gpio1 = &pio1;
-		gpio2 = &pio2;
-		gpio3 = &pio3;
-		gpio4 = &pio4;
-		gpio5 = &pio5;
+		gpio0 = &PIO0;
+		gpio1 = &PIO1;
+		gpio2 = &PIO2;
+		gpio3 = &PIO3;
+		gpio4 = &PIO4;
+		gpio5 = &PIO5;
 		/* 10-19: PIO_FRONT0 */
-		gpio6 = &pio10;
-		gpio7 = &pio11;
-		gpio8 = &pio12;
-		gpio9 = &pio13;
-		gpio10 = &pio14;
-		gpio11 = &pio15;
-		gpio12 = &pio16;
-		gpio13 = &pio17;
-		gpio14 = &pio18;
-		gpio15 = &pio19;
+		gpio6 = &PIO10;
+		gpio7 = &PIO11;
+		gpio8 = &PIO12;
+		gpio9 = &PIO13;
+		gpio10 = &PIO14;
+		gpio11 = &PIO15;
+		gpio12 = &PIO16;
+		gpio13 = &PIO17;
+		gpio14 = &PIO18;
+		gpio15 = &PIO19;
 		/* 20: PIO_FRONT1 */
-		gpio16 = &pio20;
+		gpio16 = &PIO20;
 		/* 30-35: PIO_REAR */
-		gpio17 = &pio30;
-		gpio18 = &pio31;
-		gpio19 = &pio32;
-		gpio20 = &pio33;
-		gpio21 = &pio34;
-		gpio22 = &pio35;
+		gpio17 = &PIO30;
+		gpio18 = &PIO31;
+		gpio19 = &PIO32;
+		gpio20 = &PIO33;
+		gpio21 = &PIO34;
+		gpio22 = &PIO35;
 		/* 40-42: PIO_FLASH */
-		gpio23 = &pio40;
-		gpio24 = &pio41;
-		gpio25 = &pio42;
+		gpio23 = &PIO40;
+		gpio24 = &PIO41;
+		gpio25 = &PIO42;
 	};
 
 	soc {
@@ -53,63 +53,72 @@
 			reg = <0x0961f080 0x4>;
 			reg-names = "irqmux";
 			interrupts = <GIC_SPI 188 IRQ_TYPE_NONE>;
-			interrupts-names = "irqmux";
+			interrupt-names = "irqmux";
 			ranges = <0 0x09610000 0x6000>;
 
-			pio0: gpio@09610000 {
+			PIO0: gpio@09610000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x0 0x100>;
 				st,bank-name = "PIO0";
 			};
-			pio1: gpio@09611000 {
+			PIO1: gpio@09611000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x1000 0x100>;
 				st,bank-name = "PIO1";
 			};
-			pio2: gpio@09612000 {
+			PIO2: gpio@09612000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x2000 0x100>;
 				st,bank-name = "PIO2";
 			};
-			pio3: gpio@09613000 {
+			PIO3: gpio@09613000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x3000 0x100>;
 				st,bank-name = "PIO3";
 			};
-			pio4: gpio@09614000 {
+			PIO4: gpio@09614000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x4000 0x100>;
 				st,bank-name = "PIO4";
 			};
 
-			pio5: gpio@09615000 {
+			PIO5: gpio@09615000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x5000 0x100>;
 				st,bank-name = "PIO5";
+				st,retime-pin-mask = <0x3f>;
+			};
+
+			wakeup-pin {
+				pinctrl_wk_pin: wkpin0 {
+					st,pins {
+						wk = <&PIO3 3 ALT3 IN>;
+					};
+				};
 			};
 
 			rc {
 				pinctrl_ir: ir0 {
 					st,pins {
-						ir = <&pio4 0 ALT2 IN>;
+						ir = <&PIO4 0 ALT2 IN>;
 					};
 				};
 			};
@@ -118,17 +127,42 @@
 			sbc_serial0 {
 				pinctrl_sbc_serial0: sbc_serial0-0 {
 					st,pins {
-						tx = <&pio3 4 ALT1 OUT>;
-						rx = <&pio3 5 ALT1 IN>;
+						tx = <&PIO3 4 ALT1 OUT>;
+						rx = <&PIO3 5 ALT1 IN>;
+					};
+				};
+
+				pinctrl_sbc_serial0_rts: sbc_serial0_rts {
+					st,pins {
+						rts = <&PIO3 7 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_sbc_serial0_cts: sbc_serial0_cts {
+					st,pins {
+						cts = <&PIO3 6 ALT1 IN>;
 					};
 				};
 			};
+
 			/* SBC_ASC1 - UART11 */
 			sbc_serial1 {
 				pinctrl_sbc_serial1: sbc_serial1-0 {
 					st,pins {
-						tx = <&pio2 6 ALT3 OUT>;
-						rx = <&pio2 7 ALT3 IN>;
+						tx = <&PIO2 6 ALT3 OUT>;
+						rx = <&PIO2 7 ALT3 IN>;
+					};
+				};
+
+				pinctrl_sbc_serial1_rts: sbc_serial1_rts {
+					st,pins {
+						rts = <&PIO3 1 ALT3 OUT>;
+					};
+				};
+
+				pinctrl_sbc_serial1_cts: sbc_serial1_cts {
+					st,pins {
+						cts = <&PIO3 0 ALT3 IN>;
 					};
 				};
 			};
@@ -136,8 +170,8 @@
 			i2c10 {
 				pinctrl_i2c10_default: i2c10-default {
 					st,pins {
-						sda = <&pio4 6 ALT1 BIDIR>;
-						scl = <&pio4 5 ALT1 BIDIR>;
+						sda = <&PIO4 6 ALT1 BIDIR>;
+						scl = <&PIO4 5 ALT1 BIDIR>;
 					};
 				};
 			};
@@ -145,8 +179,17 @@
 			i2c11 {
 				pinctrl_i2c11_default: i2c11-default {
 					st,pins {
-						sda = <&pio5 1 ALT1 BIDIR>;
-						scl = <&pio5 0 ALT1 BIDIR>;
+						sda = <&PIO5 1 ALT1 BIDIR>;
+						scl = <&PIO5 0 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			i2c12 {
+				pinctrl_i2c12_default: i2c12-default {
+					st,pins {
+						sda = <&PIO3 6 ALT2 BIDIR>;
+						scl = <&PIO3 7 ALT2 BIDIR>;
 					};
 				};
 			};
@@ -154,79 +197,111 @@
 			keyscan {
 				pinctrl_keyscan: keyscan {
 					st,pins {
-						keyin0 = <&pio4 0 ALT6 IN>;
-						keyin1 = <&pio4 5 ALT4 IN>;
-						keyin2 = <&pio0 4 ALT2 IN>;
-						keyin3 = <&pio2 6 ALT2 IN>;
-
-						keyout0 = <&pio4 6 ALT4 OUT>;
-						keyout1 = <&pio1 7 ALT2 OUT>;
-						keyout2 = <&pio0 6 ALT2 OUT>;
-						keyout3 = <&pio2 7 ALT2 OUT>;
+						keyin0 = <&PIO4 0 ALT6 IN>;
+						keyin1 = <&PIO4 5 ALT4 IN>;
+						keyin2 = <&PIO0 4 ALT2 IN>;
+						keyin3 = <&PIO2 6 ALT2 IN>;
+
+						keyout0 = <&PIO4 6 ALT4 OUT>;
+						keyout1 = <&PIO1 7 ALT2 OUT>;
+						keyout2 = <&PIO0 6 ALT2 OUT>;
+						keyout3 = <&PIO2 7 ALT2 OUT>;
 					};
 				};
 			};
 
 			gmac1 {
 				/*
-				 * Almost all the boards based on STiH407 SoC have an embedded
-				 * switch where the mdio/mdc have been used for managing the SMI
-				 * iface via I2C. For this reason these lines can be allocated
-				 * by using dedicated configuration (in case of there will be a
-				 * standard PHY transceiver on-board).
-				 */
+				  Almost all the boards based on STiH407 SoC have an embedded
+				  switch where the mdio/mdc have been used for managing the SMI
+				  iface via I2C. For this reason these lines can be allocated
+				  by using dedicated configuration (in case of there will be a
+				  standard PHY transceiver on-board).
+				*/
 				pinctrl_rgmii1: rgmii1-0 {
 					st,pins {
 
-						txd0 = <&pio0 0 ALT1 OUT DE_IO 0 CLK_A>;
-						txd1 = <&pio0 1 ALT1 OUT DE_IO 0 CLK_A>;
-						txd2 = <&pio0 2 ALT1 OUT DE_IO 0 CLK_A>;
-						txd3 = <&pio0 3 ALT1 OUT DE_IO 0 CLK_A>;
-						txen = <&pio0 5 ALT1 OUT DE_IO 0 CLK_A>;
-						txclk = <&pio0 6 ALT1 IN NICLK 0 CLK_A>;
-						rxd0 = <&pio1 4 ALT1 IN DE_IO 0 CLK_A>;
-						rxd1 = <&pio1 5 ALT1 IN DE_IO 0 CLK_A>;
-						rxd2 = <&pio1 6 ALT1 IN DE_IO 0 CLK_A>;
-						rxd3 = <&pio1 7 ALT1 IN DE_IO 0 CLK_A>;
-						rxdv = <&pio2 0 ALT1 IN DE_IO 0 CLK_A>;
-						rxclk = <&pio2 2 ALT1 IN NICLK 500 CLK_A>;
-						clk125 = <&pio3 7 ALT4 IN NICLK 0 CLK_A>;
-						phyclk = <&pio2 3 ALT4 OUT NICLK 1750 CLK_B>;
+						txd0 = <&PIO0 0 ALT1 OUT DE_IO 0 CLK_A>;
+						txd1 = <&PIO0 1 ALT1 OUT DE_IO 0 CLK_A>;
+						txd2 = <&PIO0 2 ALT1 OUT DE_IO 0 CLK_A>;
+						txd3 = <&PIO0 3 ALT1 OUT DE_IO 0 CLK_A>;
+						txen = <&PIO0 5 ALT1 OUT DE_IO 0 CLK_A>;
+						txclk = <&PIO0 6 ALT1 IN NICLK 0 CLK_A>;
+						rxd0 = <&PIO1 4 ALT1 IN DE_IO 0 CLK_A>;
+						rxd1 = <&PIO1 5 ALT1 IN DE_IO 0 CLK_A>;
+						rxd2 = <&PIO1 6 ALT1 IN DE_IO 0 CLK_A>;
+						rxd3 = <&PIO1 7 ALT1 IN DE_IO 0 CLK_A>;
+						rxdv = <&PIO2 0 ALT1 IN DE_IO 0 CLK_A>;
+						rxclk = <&PIO2 2 ALT1 IN NICLK 0 CLK_A>;
+						clk125 = <&PIO3 7 ALT4 IN NICLK 0 CLK_A>;
+						phyclk = <&PIO2 3 ALT4 OUT NICLK 1250 CLK_B>;
 					};
 				};
 
 				pinctrl_rgmii1_mdio: rgmii1-mdio {
 					st,pins {
-						mdio = <&pio1 0 ALT1 OUT BYPASS 0>;
-						mdc = <&pio1 1 ALT1 OUT NICLK 0 CLK_A>;
-						mdint = <&pio1 3 ALT1 IN BYPASS 0>;
+						mdio = <&PIO1 0 ALT1 OUT BYPASS 0>;
+						mdc = <&PIO1 1 ALT1 OUT NICLK 0 CLK_A>;
+					};
+				};
+
+				pinctrl_rgmii1_mdint: rgmii1-mdint {
+					st,pins {
+						mdint = <&PIO1 3 ALT1 IN BYPASS 0>;
 					};
 				};
 
 				pinctrl_mii1: mii1 {
 					st,pins {
-						txd0 = <&pio0 0 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txd1 = <&pio0 1 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txd2 = <&pio0 2 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txd3 = <&pio0 3 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txer = <&pio0 4 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txen = <&pio0 5 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txclk = <&pio0 6 ALT1 IN NICLK 0 CLK_A>;
-						col = <&pio0 7 ALT1 IN BYPASS 1000>;
-
-						mdio = <&pio1 0 ALT1 OUT BYPASS 1500>;
-						mdc = <&pio1 1 ALT1 OUT NICLK 0 CLK_A>;
-						crs = <&pio1 2 ALT1 IN BYPASS 1000>;
-						mdint = <&pio1 3 ALT1 IN BYPASS 0>;
-						rxd0 = <&pio1 4 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-						rxd1 = <&pio1 5 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-						rxd2 = <&pio1 6 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-						rxd3 = <&pio1 7 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-
-						rxdv = <&pio2 0 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-						rx_er = <&pio2 1 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-						rxclk = <&pio2 2 ALT1 IN NICLK 0 CLK_A>;
-						phyclk = <&pio2 3 ALT1 OUT NICLK 0 CLK_A>;
+						txd0 = <&PIO0 0 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txd1 = <&PIO0 1 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txd2 = <&PIO0 2 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txd3 = <&PIO0 3 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txer = <&PIO0 4 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txen = <&PIO0 5 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txclk = <&PIO0 6 ALT1 IN NICLK 0 CLK_A>;
+						col = <&PIO0 7 ALT1 IN BYPASS 1000>;
+
+						mdio = <&PIO1 0 ALT1 OUT BYPASS 1500>;
+						mdc = <&PIO1 1 ALT1 OUT NICLK 0 CLK_A>;
+						crs = <&PIO1 2 ALT1 IN BYPASS 1000>;
+						mdint = <&PIO1 3 ALT1 IN BYPASS 0>;
+						rxd0 = <&PIO1 4 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxd1 = <&PIO1 5 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxd2 = <&PIO1 6 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxd3 = <&PIO1 7 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+
+						rxdv = <&PIO2 0 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rx_er = <&PIO2 1 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxclk = <&PIO2 2 ALT1 IN NICLK 0 CLK_A>;
+						phyclk = <&PIO2 3 ALT1 OUT NICLK 0 CLK_A>;
+					};
+				};
+
+				pinctrl_rmii1: rmii1-0 {
+					st,pins {
+						txd0 = <&PIO0 0 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txd1 = <&PIO0 1 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txen = <&PIO0 5 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						mdio = <&PIO1 0 ALT1 OUT BYPASS 0>;
+						mdc = <&PIO1 1 ALT1 OUT NICLK 0 CLK_A>;
+						mdint = <&PIO1 3 ALT1 IN BYPASS 0>;
+						rxd0 = <&PIO1 4 ALT1 IN SE_NICLK_IO 0 CLK_B>;
+						rxd1 = <&PIO1 5 ALT1 IN SE_NICLK_IO 0 CLK_B>;
+						rxdv = <&PIO2 0 ALT1 IN SE_NICLK_IO 0 CLK_B>;
+						rx_er = <&PIO2 1 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+					};
+				};
+
+				pinctrl_rmii1_phyclk: rmii1_phyclk {
+					st,pins {
+						phyclk = <&PIO2 3 ALT1 OUT NICLK 0 CLK_A>;
+					};
+				};
+
+				pinctrl_rmii1_phyclk_ext: rmii1_phyclk_ext {
+					st,pins {
+						phyclk = <&PIO2 3 ALT2 IN NICLK 0 CLK_A>;
 					};
 				};
 			};
@@ -234,22 +309,73 @@
 			pwm1 {
 				pinctrl_pwm1_chan0_default: pwm1-0-default {
 					st,pins {
-						pwm-out = <&pio3 0 ALT1 OUT>;
+						pwm-out = <&PIO3 0 ALT1 OUT>;
 					};
 				};
 				pinctrl_pwm1_chan1_default: pwm1-1-default {
 					st,pins {
-						pwm-out = <&pio4 4 ALT1 OUT>;
+						pwm-out = <&PIO4 4 ALT1 OUT>;
 					};
 				};
 				pinctrl_pwm1_chan2_default: pwm1-2-default {
 					st,pins {
-						pwm-out = <&pio4 6 ALT3 OUT>;
+						pwm-out = <&PIO4 6 ALT3 OUT>;
 					};
 				};
 				pinctrl_pwm1_chan3_default: pwm1-3-default {
 					st,pins {
-						pwm-out = <&pio4 7 ALT3 OUT>;
+						pwm-out = <&PIO4 7 ALT3 OUT>;
+					};
+				};
+			};
+
+			spi10 {
+				pinctrl_spi10_default: spi10-4w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO4 6 ALT1 OUT>;
+						mrst = <&PIO4 7 ALT1 IN>;
+						scl = <&PIO4 5 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_spi10_3w_alt1_0: spi10-3w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO4 6 ALT1 BIDIR_PU>;
+						scl = <&PIO4 5 ALT1 OUT>;
+					};
+				};
+			};
+
+			spi11 {
+				pinctrl_spi11_default: spi11-4w-alt2-0 {
+					st,pins {
+						mtsr = <&PIO3 1 ALT2 OUT>;
+						mrst = <&PIO3 0 ALT2 IN>;
+						scl = <&PIO3 2 ALT2 OUT>;
+					};
+				};
+
+				pinctrl_spi11_3w_alt2_0: spi11-3w-alt2-0 {
+					st,pins {
+						mtsr = <&PIO3 1 ALT2 BIDIR_PU>;
+						scl = <&PIO3 2 ALT2 OUT>;
+					};
+				};
+			};
+
+			spi12 {
+				pinctrl_spi12_default: spi12-4w-alt2-0 {
+					st,pins {
+						mtsr = <&PIO3 6 ALT2 OUT>;
+						mrst = <&PIO3 4 ALT2 IN>;
+						scl = <&PIO3 7 ALT2 OUT>;
+					};
+				};
+
+				pinctrl_spi12_3w_alt2_0: spi12-3w-alt2-0 {
+					st,pins {
+						mtsr = <&PIO3 6 ALT2 BIDIR_PU>;
+						scl = <&PIO3 7 ALT2 OUT>;
 					};
 				};
 			};
@@ -263,84 +389,84 @@
 			reg = <0x0920f080 0x4>;
 			reg-names = "irqmux";
 			interrupts = <GIC_SPI 189 IRQ_TYPE_NONE>;
-			interrupts-names = "irqmux";
+			interrupt-names = "irqmux";
 			ranges = <0 0x09200000 0x10000>;
 
-			pio10: pio@09200000 {
+			PIO10: PIO@09200000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x0 0x100>;
 				st,bank-name = "PIO10";
 			};
-			pio11: pio@09201000 {
+			PIO11: PIO@09201000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x1000 0x100>;
 				st,bank-name = "PIO11";
 			};
-			pio12: pio@09202000 {
+			PIO12: PIO@09202000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x2000 0x100>;
 				st,bank-name = "PIO12";
 			};
-			pio13: pio@09203000 {
+			PIO13: PIO@09203000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x3000 0x100>;
 				st,bank-name = "PIO13";
 			};
-			pio14: pio@09204000 {
+			PIO14: PIO@09204000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x4000 0x100>;
 				st,bank-name = "PIO14";
 			};
-			pio15: pio@09205000 {
+			PIO15: PIO@09205000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x5000 0x100>;
 				st,bank-name = "PIO15";
 			};
-			pio16: pio@09206000 {
+			PIO16: PIO@09206000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x6000 0x100>;
 				st,bank-name = "PIO16";
 			};
-			pio17: pio@09207000 {
+			PIO17: PIO@09207000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x7000 0x100>;
 				st,bank-name = "PIO17";
 			};
-			pio18: pio@09208000 {
+			PIO18: PIO@09208000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x8000 0x100>;
 				st,bank-name = "PIO18";
 			};
-			pio19: pio@09209000 {
+			PIO19: PIO@09209000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x9000 0x100>;
@@ -351,8 +477,20 @@
 			serial0 {
 				pinctrl_serial0: serial0-0 {
 					st,pins {
-						tx = <&pio17 0 ALT1 OUT>;
-						rx = <&pio17 1 ALT1 IN>;
+						tx = <&PIO17 0 ALT1 OUT>;
+						rx = <&PIO17 1 ALT1 IN>;
+					};
+				};
+
+				pinctrl_serial0_rts: serial0_rts {
+					st,pins {
+						rts = <&PIO17 3 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_serial0_cts: serial0_cts {
+					st,pins {
+						cts = <&PIO17 2 ALT1 IN>;
 					};
 				};
 			};
@@ -360,8 +498,20 @@
 			serial1 {
 				pinctrl_serial1: serial1-0 {
 					st,pins {
-						tx = <&pio16 0 ALT1 OUT>;
-						rx = <&pio16 1 ALT1 IN>;
+						tx = <&PIO16 0 ALT1 OUT>;
+						rx = <&PIO16 1 ALT1 IN>;
+					};
+				};
+
+				pinctrl_serial1_rts: serial1_rts {
+					st,pins {
+						rts = <&PIO16 3 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_serial1_cts: serial1_cts {
+					st,pins {
+						cts = <&PIO16 2 ALT1 IN>;
 					};
 				};
 			};
@@ -369,8 +519,20 @@
 			serial2 {
 				pinctrl_serial2: serial2-0 {
 					st,pins {
-						tx = <&pio15 0 ALT1 OUT>;
-						rx = <&pio15 1 ALT1 IN>;
+						tx = <&PIO15 0 ALT1 OUT>;
+						rx = <&PIO15 1 ALT1 IN>;
+					};
+				};
+
+				pinctrl_serial2_rts: serial2_rts {
+					st,pins {
+						rts = <&PIO15 3 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_serial2_cts: serial2_cts {
+					st,pins {
+						cts = <&PIO15 2 ALT1 IN>;
 					};
 				};
 			};
@@ -378,16 +540,16 @@
 			mmc1 {
 				pinctrl_sd1: sd1-0 {
 					st,pins {
-						sd_clk = <&pio19 3 ALT5 BIDIR NICLK 0 CLK_B>;
-						sd_cmd = <&pio19 2 ALT5 BIDIR_PU BYPASS 0>;
-						sd_dat0 = <&pio19 4 ALT5 BIDIR_PU BYPASS 0>;
-						sd_dat1 = <&pio19 5 ALT5 BIDIR_PU BYPASS 0>;
-						sd_dat2 = <&pio19 6 ALT5 BIDIR_PU BYPASS 0>;
-						sd_dat3 = <&pio19 7 ALT5 BIDIR_PU BYPASS 0>;
-						sd_led = <&pio16 6 ALT6 OUT>;
-						sd_pwren = <&pio16 7 ALT6 OUT>;
-						sd_cd = <&pio19 0 ALT6 IN>;
-						sd_wp = <&pio19 1 ALT6 IN>;
+						sd_clk = <&PIO19 3 ALT5 BIDIR NICLK 0 CLK_B>;
+						sd_cmd = <&PIO19 2 ALT5 BIDIR_PU BYPASS 0>;
+						sd_dat0 = <&PIO19 4 ALT5 BIDIR_PU BYPASS 0>;
+						sd_dat1 = <&PIO19 5 ALT5 BIDIR_PU BYPASS 0>;
+						sd_dat2 = <&PIO19 6 ALT5 BIDIR_PU BYPASS 0>;
+						sd_dat3 = <&PIO19 7 ALT5 BIDIR_PU BYPASS 0>;
+						sd_led = <&PIO16 6 ALT6 OUT>;
+						sd_pwren = <&PIO16 7 ALT6 OUT>;
+						sd_cd = <&PIO19 0 ALT6 IN>;
+						sd_wp = <&PIO19 1 ALT6 IN>;
 					};
 				};
 			};
@@ -396,8 +558,8 @@
 			i2c0 {
 				pinctrl_i2c0_default: i2c0-default {
 					st,pins {
-						sda = <&pio10 6 ALT2 BIDIR>;
-						scl = <&pio10 5 ALT2 BIDIR>;
+						sda = <&PIO10 6 ALT2 BIDIR>;
+						scl = <&PIO10 5 ALT2 BIDIR>;
 					};
 				};
 			};
@@ -405,8 +567,8 @@
 			i2c1 {
 				pinctrl_i2c1_default: i2c1-default {
 					st,pins {
-						sda = <&pio11 1 ALT2 BIDIR>;
-						scl = <&pio11 0 ALT2 BIDIR>;
+						sda = <&PIO11 1 ALT2 BIDIR>;
+						scl = <&PIO11 0 ALT2 BIDIR>;
 					};
 				};
 			};
@@ -414,27 +576,199 @@
 			i2c2 {
 				pinctrl_i2c2_default: i2c2-default {
 					st,pins {
-						sda = <&pio15 6 ALT2 BIDIR>;
-						scl = <&pio15 5 ALT2 BIDIR>;
+						sda = <&PIO15 6 ALT2 BIDIR>;
+						scl = <&PIO15 5 ALT2 BIDIR>;
 					};
 				};
 			};
 
 			i2c3 {
-				pinctrl_i2c3_default: i2c3-default {
+				pinctrl_i2c3_default: i2c3-alt1-0 {
+					st,pins {
+						sda = <&PIO18 6 ALT1 BIDIR>;
+						scl = <&PIO18 5 ALT1 BIDIR>;
+					};
+				};
+				pinctrl_i2c3_alt1_1: i2c3-alt1-1 {
 					st,pins {
-						sda = <&pio18 6 ALT1 BIDIR>;
-						scl = <&pio18 5 ALT1 BIDIR>;
+						sda = <&PIO17 7 ALT1 BIDIR>;
+						scl = <&PIO17 6 ALT1 BIDIR>;
+					};
+				};
+				pinctrl_i2c3_alt3_0: i2c3-alt3-0 {
+					st,pins {
+						sda = <&PIO13 6 ALT3 BIDIR>;
+						scl = <&PIO13 5 ALT3 BIDIR>;
 					};
 				};
 			};
 
 			spi0 {
-				pinctrl_spi0_default: spi0-default {
+				pinctrl_spi0_default: spi0-4w-alt2-0 {
+					st,pins {
+						mtsr = <&PIO10 6 ALT2 OUT>;
+						mrst = <&PIO10 7 ALT2 IN>;
+						scl = <&PIO10 5 ALT2 OUT>;
+					};
+				};
+
+				pinctrl_spi0_3w_alt2_0: spi0-3w-alt2-0 {
+					st,pins {
+						mtsr = <&PIO10 6 ALT2 BIDIR_PU>;
+						scl = <&PIO10 5 ALT2 OUT>;
+					};
+				};
+
+				pinctrl_spi0_4w_alt1_0: spi0-4w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO19 7 ALT1 OUT>;
+						mrst = <&PIO19 5 ALT1 IN>;
+						scl = <&PIO19 6 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_spi0_3w_alt1_0: spi0-3w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO19 7 ALT1 BIDIR_PU>;
+						scl = <&PIO19 6 ALT1 OUT>;
+					};
+				};
+			};
+
+			spi1 {
+				pinctrl_spi1_default: spi1-4w-alt2-0 {
+					st,pins {
+						mtsr = <&PIO11 1 ALT2 OUT>;
+						mrst = <&PIO11 2 ALT2 IN>;
+						scl = <&PIO11 0 ALT2 OUT>;
+					};
+				};
+
+				pinctrl_spi1_3w_alt2_0: spi1-3w-alt2-0 {
+					st,pins {
+						mtsr = <&PIO11 1 ALT2 BIDIR_PU>;
+						scl = <&PIO11 0 ALT2 OUT>;
+					};
+				};
+
+				pinctrl_spi1_4w_alt1_0: spi1-4w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO14 3 ALT1 OUT>;
+						mrst = <&PIO14 4 ALT1 IN>;
+						scl = <&PIO14 2 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_spi1_3w_alt1_0: spi1-3w-alt1-0 {
 					st,pins {
-						mtsr = <&pio12 6 ALT2 BIDIR>;
-						mrst = <&pio12 7 ALT2 BIDIR>;
-						scl = <&pio12 5 ALT2 BIDIR>;
+						mtsr = <&PIO14 3 ALT1 BIDIR_PU>;
+						scl = <&PIO14 2 ALT1 OUT>;
+					};
+				};
+			};
+
+			spi2 {
+				pinctrl_spi2_default: spi2-4w-alt2-0 {
+					st,pins {
+						mtsr = <&PIO12 6 ALT2 OUT>;
+						mrst = <&PIO12 7 ALT2 IN>;
+						scl = <&PIO12 5 ALT2 OUT>;
+					};
+				};
+
+				pinctrl_spi2_3w_alt2_0: spi2-3w-alt2-0 {
+					st,pins {
+						mtsr = <&PIO12 6 ALT2 BIDIR_PU>;
+						scl = <&PIO12 5 ALT2 OUT>;
+					};
+				};
+
+				pinctrl_spi2_4w_alt1_0: spi2-4w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO14 6 ALT1 OUT>;
+						mrst = <&PIO14 7 ALT1 IN>;
+						scl = <&PIO14 5 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_spi2_3w_alt1_0: spi2-3w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO14 6 ALT1 BIDIR_PU>;
+						scl = <&PIO14 5 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_spi2_4w_alt2_1: spi2-4w-alt2-1 {
+					st,pins {
+						mtsr = <&PIO15 6 ALT2 OUT>;
+						mrst = <&PIO15 7 ALT2 IN>;
+						scl = <&PIO15 5 ALT2 OUT>;
+					};
+				};
+
+				pinctrl_spi2_3w_alt2_1: spi2-3w-alt2-1 {
+					st,pins {
+						mtsr = <&PIO15 6 ALT2 BIDIR_PU>;
+						scl = <&PIO15 5 ALT2 OUT>;
+					};
+				};
+			};
+
+			spi3 {
+				pinctrl_spi3_default: spi3-4w-alt3-0 {
+					st,pins {
+						mtsr = <&PIO13 6 ALT3 OUT>;
+						mrst = <&PIO13 7 ALT3 IN>;
+						scl = <&PIO13 5 ALT3 OUT>;
+					};
+				};
+
+				pinctrl_spi3_3w_alt3_0: spi3-3w-alt3-0 {
+					st,pins {
+						mtsr = <&PIO13 6 ALT3 BIDIR_PU>;
+						scl = <&PIO13 5 ALT3 OUT>;
+					};
+				};
+
+				pinctrl_spi3_4w_alt1_0: spi3-4w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO17 7 ALT1 OUT>;
+						mrst = <&PIO17 5 ALT1 IN>;
+						scl = <&PIO17 6 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_spi3_3w_alt1_0: spi3-3w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO17 7 ALT1 BIDIR_PU>;
+						scl = <&PIO17 6 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_spi3_4w_alt1_1: spi3-4w-alt1-1 {
+					st,pins {
+						mtsr = <&PIO18 6 ALT1 OUT>;
+						mrst = <&PIO18 7 ALT1 IN>;
+						scl = <&PIO18 5 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_spi3_3w_alt1_1: spi3-3w-alt1-1 {
+					st,pins {
+						mtsr = <&PIO18 6 ALT1 BIDIR_PU>;
+						scl = <&PIO18 5 ALT1 OUT>;
+					};
+				};
+			};
+
+			systrace {
+				pinctrl_systrace_default: systrace-default {
+					st,pins {
+						trc_data0 = <&PIO11 3 ALT5 OUT>;
+						trc_data1 = <&PIO11 4 ALT5 OUT>;
+						trc_data2 = <&PIO11 5 ALT5 OUT>;
+						trc_data3 = <&PIO11 6 ALT5 OUT>;
+						trc_clk   = <&PIO11 7 ALT5 OUT>;
 					};
 				};
 			};
@@ -448,16 +782,17 @@
 			reg = <0x0921f080 0x4>;
 			reg-names = "irqmux";
 			interrupts = <GIC_SPI 190 IRQ_TYPE_NONE>;
-			interrupts-names = "irqmux";
+			interrupt-names = "irqmux";
 			ranges = <0 0x09210000 0x10000>;
 
-			pio20: pio@09210000 {
+			PIO20: PIO@09210000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x0 0x100>;
 				st,bank-name = "PIO20";
+				st,bank-offset = <10>;
 			};
 		};
 
@@ -469,63 +804,99 @@
 			reg = <0x0922f080 0x4>;
 			reg-names = "irqmux";
 			interrupts = <GIC_SPI 191 IRQ_TYPE_NONE>;
-			interrupts-names = "irqmux";
+			interrupt-names = "irqmux";
 			ranges = <0 0x09220000 0x6000>;
 
-			pio30: gpio@09220000 {
+			PIO30: gpio@09220000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x0 0x100>;
 				st,bank-name = "PIO30";
 			};
-			pio31: gpio@09221000 {
+			PIO31: gpio@09221000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x1000 0x100>;
 				st,bank-name = "PIO31";
 			};
-			pio32: gpio@09222000 {
+			PIO32: gpio@09222000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x2000 0x100>;
 				st,bank-name = "PIO32";
 			};
-			pio33: gpio@09223000 {
+			PIO33: gpio@09223000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x3000 0x100>;
 				st,bank-name = "PIO33";
 			};
-			pio34: gpio@09224000 {
+			PIO34: gpio@09224000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x4000 0x100>;
 				st,bank-name = "PIO34";
 			};
-			pio35: gpio@09225000 {
+			PIO35: gpio@09225000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x5000 0x100>;
 				st,bank-name = "PIO35";
+				st,retime-pin-mask = <0x7f>;
+			};
+
+			dvo {
+				pinctrl_dvo: dvo {
+					st,pins {
+						hs = <&PIO30 0 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						vs = <&PIO30 1 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						de = <&PIO30 2 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						ck = <&PIO30 3 ALT2 (OE | CLKNOTDATA) 0>;
+						d0 = <&PIO30 4 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d1 = <&PIO30 5 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d2 = <&PIO30 6 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d3 = <&PIO30 7 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d4 = <&PIO31 0 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d5 = <&PIO31 1 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d6 = <&PIO31 2 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d7 = <&PIO31 3 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d8 = <&PIO31 4 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d9 = <&PIO31 5 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d10 = <&PIO31 6 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d11 = <&PIO31 7 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d12 = <&PIO32 0 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d13 = <&PIO32 1 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d14 = <&PIO32 2 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d15 = <&PIO32 3 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d16 = <&PIO32 4 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d17 = <&PIO32 5 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d18 = <&PIO32 6 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d19 = <&PIO32 7 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d20 = <&PIO33 0 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d21 = <&PIO33 1 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d22 = <&PIO33 2 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						d23 = <&PIO33 3 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+					};
+				};
 			};
 
 			i2c4 {
 				pinctrl_i2c4_default: i2c4-default {
 					st,pins {
-						sda = <&pio30 1 ALT1 BIDIR>;
-						scl = <&pio30 0 ALT1 BIDIR>;
+						sda = <&PIO30 1 ALT1 BIDIR>;
+						scl = <&PIO30 0 ALT1 BIDIR>;
 					};
 				};
 			};
@@ -533,8 +904,26 @@
 			i2c5 {
 				pinctrl_i2c5_default: i2c5-default {
 					st,pins {
-						sda = <&pio34 4 ALT1 BIDIR>;
-						scl = <&pio34 3 ALT1 BIDIR>;
+						sda = <&PIO34 4 ALT1 BIDIR>;
+						scl = <&PIO34 3 ALT1 BIDIR>;
+					};
+				};
+			};
+
+			usb0 {
+				pinctrl_usb0: usb2-0 {
+					st,pins {
+						usb-oc-detect = <&PIO35 0 ALT1 IN>;
+						usb-pwr-enable = <&PIO35 1 ALT1 OUT>;
+					};
+				};
+			};
+
+			usb1 {
+				pinctrl_usb1: usb2-1 {
+					st,pins {
+						usb-oc-detect = <&PIO35 2 ALT1 IN>;
+						usb-pwr-enable = <&PIO35 3 ALT1 OUT>;
 					};
 				};
 			};
@@ -542,9 +931,9 @@
 			usb3 {
 				pinctrl_usb3: usb3-2 {
 					st,pins {
-						usb-oc-detect = <&pio35 4 ALT1 IN>;
-						usb-pwr-enable = <&pio35 5 ALT1 OUT>;
-						usb-vbus-valid = <&pio35 6 ALT1 IN>;
+						usb-oc-detect = <&PIO35 4 ALT1 IN>;
+						usb-pwr-enable = <&PIO35 5 ALT1 OUT>;
+						usb-vbus-valid = <&PIO35 6 ALT1 IN>;
 					};
 				};
 			};
@@ -552,7 +941,114 @@
 			pwm0 {
 				pinctrl_pwm0_chan0_default: pwm0-0-default {
 					st,pins {
-						pwm-out = <&pio31 1 ALT1 OUT>;
+						pwm-out = <&PIO31 1 ALT1 OUT>;
+					};
+				};
+			};
+
+			spi4 {
+				pinctrl_spi4_default: spi4-4w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO30 1 ALT1 OUT>;
+						mrst = <&PIO30 2 ALT1 IN>;
+						scl = <&PIO30 0 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_spi4_3w_alt1_0: spi4-3w-alt1-0 {
+					st,pins {
+						mtsr = <&PIO30 1 ALT1 BIDIR_PU>;
+						scl = <&PIO30 0 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_spi4_4w_alt3_0: spi4-4w-alt3-0 {
+					st,pins {
+						mtsr = <&PIO34 1 ALT3 OUT>;
+						mrst = <&PIO34 2 ALT3 IN>;
+						scl = <&PIO34 0 ALT3 OUT>;
+					};
+				};
+
+				pinctrl_spi4_3w_alt3_0: spi4-3w-alt3-0 {
+					st,pins {
+						mtsr = <&PIO34 1 ALT3 BIDIR_PU>;
+						scl = <&PIO34 0 ALT3 OUT>;
+					};
+				};
+			};
+
+			i2s_out {
+				pinctrl_i2s_8ch_out: i2s_8ch_out{
+					st,pins {
+						mclk = <&PIO33 5 ALT1 OUT>;
+						lrclk = <&PIO33 7 ALT1 OUT>;
+						sclk = <&PIO33 6 ALT1 OUT>;
+						data0 = <&PIO33 4 ALT1 OUT>;
+						data1 = <&PIO34 0 ALT1 OUT>;
+						data2 = <&PIO34 1 ALT1 OUT>;
+						data3 = <&PIO34 2 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_i2s_2ch_out: i2s_2ch_out{
+					st,pins {
+						mclk = <&PIO33 5 ALT1 OUT>;
+						lrclk = <&PIO33 7 ALT1 OUT>;
+						sclk = <&PIO33 6 ALT1 OUT>;
+						data0 = <&PIO33 4 ALT1 OUT>;
+					};
+				};
+			};
+
+			i2s_in {
+				pinctrl_i2s_8ch_in: i2s_8ch_in{
+					st,pins {
+						mclk = <&PIO32 5 ALT1 IN>;
+						lrclk = <&PIO32 7 ALT1 IN>;
+						sclk = <&PIO32 6 ALT1 IN>;
+						data0 = <&PIO32 4 ALT1 IN>;
+						data1 = <&PIO33 0 ALT1 IN>;
+						data2 = <&PIO33 1 ALT1 IN>;
+						data3 = <&PIO33 2 ALT1 IN>;
+					};
+				};
+
+				pinctrl_i2s_2ch_in: i2s_2ch_in{
+					st,pins {
+						mclk = <&PIO32 5 ALT1 IN>;
+						lrclk = <&PIO32 7 ALT1 IN>;
+						sclk = <&PIO32 6 ALT1 IN>;
+						data0 = <&PIO32 4 ALT1 IN>;
+					};
+				};
+			};
+
+			spdif_out {
+				pinctrl_spdif_out: spdif_out{
+					st,pins {
+						spdif_out = <&PIO34 7 ALT1 OUT>;
+					};
+				};
+			};
+
+			serial3 {
+				pinctrl_serial3: serial3-0 {
+					st,pins {
+						tx = <&PIO31 3 ALT1 OUT>;
+						rx = <&PIO31 4 ALT1 IN>;
+					};
+				};
+
+				pinctrl_serial3_rts: serial3_rts {
+					st,pins {
+						rts = <&PIO31 6 ALT1 OUT>;
+					};
+				};
+
+				pinctrl_serial3_cts: serial3_cts {
+					st,pins {
+						cts = <&PIO31 5 ALT1 IN>;
 					};
 				};
 			};
@@ -566,28 +1062,28 @@
 			reg = <0x0923f080 0x4>;
 			reg-names = "irqmux";
 			interrupts = <GIC_SPI 192 IRQ_TYPE_NONE>;
-			interrupts-names = "irqmux";
+			interrupt-names = "irqmux";
 			ranges = <0 0x09230000 0x3000>;
 
-			pio40: gpio@09230000 {
+			PIO40: gpio@09230000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0 0x100>;
 				st,bank-name = "PIO40";
 			};
-			pio41: gpio@09231000 {
+			PIO41: gpio@09231000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x1000 0x100>;
 				st,bank-name = "PIO41";
 			};
-			pio42: gpio@09232000 {
+			PIO42: gpio@09232000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
 				reg = <0x2000 0x100>;
@@ -597,16 +1093,67 @@
 			mmc0 {
 				pinctrl_mmc0: mmc0-0 {
 					st,pins {
-						emmc_clk = <&pio40 6 ALT1 BIDIR>;
-						emmc_cmd = <&pio40 7 ALT1 BIDIR_PU>;
-						emmc_d0 = <&pio41 0 ALT1 BIDIR_PU>;
-						emmc_d1 = <&pio41 1 ALT1 BIDIR_PU>;
-						emmc_d2 = <&pio41 2 ALT1 BIDIR_PU>;
-						emmc_d3 = <&pio41 3 ALT1 BIDIR_PU>;
-						emmc_d4 = <&pio41 4 ALT1 BIDIR_PU>;
-						emmc_d5 = <&pio41 5 ALT1 BIDIR_PU>;
-						emmc_d6 = <&pio41 6 ALT1 BIDIR_PU>;
-						emmc_d7 = <&pio41 7 ALT1 BIDIR_PU>;
+						emmc_clk = <&PIO40 6 ALT1 BIDIR>;
+						emmc_cmd = <&PIO40 7 ALT1 BIDIR_PU>;
+						emmc_d0 = <&PIO41 0 ALT1 BIDIR_PU>;
+						emmc_d1 = <&PIO41 1 ALT1 BIDIR_PU>;
+						emmc_d2 = <&PIO41 2 ALT1 BIDIR_PU>;
+						emmc_d3 = <&PIO41 3 ALT1 BIDIR_PU>;
+						emmc_d4 = <&PIO41 4 ALT1 BIDIR_PU>;
+						emmc_d5 = <&PIO41 5 ALT1 BIDIR_PU>;
+						emmc_d6 = <&PIO41 6 ALT1 BIDIR_PU>;
+						emmc_d7 = <&PIO41 7 ALT1 BIDIR_PU>;
+					};
+				};
+				pinctrl_sd0: sd0-0 {
+					st,pins {
+						SD_CLK = <&PIO40 6 ALT1 BIDIR>;
+						SD_CMD = <&PIO40 7 ALT1 BIDIR_PU>;
+						SD_DAT0 = <&PIO41 0 ALT1 BIDIR_PU>;
+						SD_DAT1 = <&PIO41 1 ALT1 BIDIR_PU>;
+						SD_DAT2 = <&PIO41 2 ALT1 BIDIR_PU>;
+						SD_DAT3 = <&PIO41 3 ALT1 BIDIR_PU>;
+						SD_LED = <&PIO42 0 ALT2 OUT>;
+						SD_PWREN = <&PIO42 2 ALT2 OUT>;
+						SD_VSEL = <&PIO42 3 ALT2 OUT>;
+						SD_CD = <&PIO42 4 ALT2 IN>;
+						SD_WP = <&PIO42 5 ALT2 IN>;
+					};
+				};
+			};
+
+			fsm {
+				pinctrl_fsm: fsm {
+					st,pins {
+						spi-fsm-clk = <&PIO40 1 ALT1 OUT>;
+						spi-fsm-cs = <&PIO40 0 ALT1 OUT>;
+						spi-fsm-mosi = <&PIO40 2 ALT1 OUT>;
+						spi-fsm-miso = <&PIO40 3 ALT1 IN>;
+						spi-fsm-hol = <&PIO40 5 ALT1 OUT>;
+						spi-fsm-wp = <&PIO40 4 ALT1 OUT>;
+					};
+				};
+			};
+
+			nand {
+				pinctrl_nand: nand {
+					st,pins {
+						nand_cs1 = <&PIO40 6 ALT3 OUT>;
+						nand_cs0 = <&PIO40 7 ALT3 OUT>;
+						nand_d0 = <&PIO41 0 ALT3 BIDIR>;
+						nand_d1 = <&PIO41 1 ALT3 BIDIR>;
+						nand_d2 = <&PIO41 2 ALT3 BIDIR>;
+						nand_d3 = <&PIO41 3 ALT3 BIDIR>;
+						nand_d4 = <&PIO41 4 ALT3 BIDIR>;
+						nand_d5 = <&PIO41 5 ALT3 BIDIR>;
+						nand_d6 = <&PIO41 6 ALT3 BIDIR>;
+						nand_d7 = <&PIO41 7 ALT3 BIDIR>;
+						nand_we = <&PIO42 0 ALT3 OUT>;
+						nand_dqs = <&PIO42 1 ALT3 OUT>;
+						nand_ale = <&PIO42 2 ALT3 OUT>;
+						nand_cle = <&PIO42 3 ALT3 OUT>;
+						nand_rnb = <&PIO42 4 ALT3 IN>;
+						nand_oe = <&PIO42 5 ALT3 OUT>;
 					};
 				};
 			};
diff -urNp a/arch/arm/boot/dts/stih407.dtsi b/arch/arm/boot/dts/stih407.dtsi
--- a/arch/arm/boot/dts/stih407.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih407.dtsi	2019-09-26 21:23:27.136619200 +0100
@@ -1,151 +1,40 @@
 /*
- * Copyright (C) 2015 STMicroelectronics Limited.
- * Author: Gabriel Fernandez <gabriel.fernandez@linaro.org>
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
- * publishhed by the Free Software Foundation.
+ * published by the Free Software Foundation.
  */
 #include "stih407-clock.dtsi"
 #include "stih407-family.dtsi"
 / {
-	soc {
-		/* Display */
-		vtg_main: sti-vtg-main@8d02800 {
-			compatible = "st,vtg";
-			reg = <0x8d02800 0x200>;
-			interrupts = <GIC_SPI 108 IRQ_TYPE_NONE>;
+	cpus {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		cpu@1 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <1>;
 		};
+	};
 
-		vtg_aux: sti-vtg-aux@8d00200 {
-			compatible = "st,vtg";
-			reg = <0x8d00200 0x100>;
-			interrupts = <GIC_SPI 109 IRQ_TYPE_NONE>;
+	soc {
+		st_usb_bus_config: st-usb-amba-config {
+			st,complete_on_error;
+			st,read_ahead;
+			st,max_opcode_LD64_ST64;
+			st,chunks_in_msg = <0>;
+			st,packets_in_chunk = <2>;
+			st,threshold = <256>;
 		};
 
-		sti-display-subsystem {
-			compatible = "st,sti-display-subsystem";
-			#address-cells = <1>;
-			#size-cells = <1>;
-
-			assigned-clocks	= <&clk_s_d2_quadfs 0>,
-					  <&clk_s_d2_quadfs 0>,
-					  <&clk_s_d2_flexgen CLK_PIX_MAIN_DISP>,
-					  <&clk_s_d2_flexgen CLK_PIX_AUX_DISP>,
-					  <&clk_s_d2_flexgen CLK_PIX_GDP1>,
-					  <&clk_s_d2_flexgen CLK_PIX_GDP2>,
-					  <&clk_s_d2_flexgen CLK_PIX_GDP3>,
-					  <&clk_s_d2_flexgen CLK_PIX_GDP4>;
-
-			assigned-clock-parents = <0>,
-						 <0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 0>;
-
-			assigned-clock-rates = <297000000>, <297000000>;
-
-			ranges;
-
-			sti-compositor@9d11000 {
-				compatible = "st,stih407-compositor";
-				reg = <0x9d11000 0x1000>;
-
-				clock-names = "compo_main",
-					      "compo_aux",
-					      "pix_main",
-					      "pix_aux",
-					      "pix_gdp1",
-					      "pix_gdp2",
-					      "pix_gdp3",
-					      "pix_gdp4",
-					      "main_parent",
-					      "aux_parent";
-
-				clocks = <&clk_s_c0_flexgen CLK_COMPO_DVP>,
-					 <&clk_s_c0_flexgen CLK_COMPO_DVP>,
-					 <&clk_s_d2_flexgen CLK_PIX_MAIN_DISP>,
-					 <&clk_s_d2_flexgen CLK_PIX_AUX_DISP>,
-					 <&clk_s_d2_flexgen CLK_PIX_GDP1>,
-					 <&clk_s_d2_flexgen CLK_PIX_GDP2>,
-					 <&clk_s_d2_flexgen CLK_PIX_GDP3>,
-					 <&clk_s_d2_flexgen CLK_PIX_GDP4>,
-					 <&clk_s_d2_quadfs 0>,
-					 <&clk_s_d2_quadfs 1>;
-
-				reset-names = "compo-main", "compo-aux";
-				resets = <&softreset STIH407_COMPO_SOFTRESET>,
-					 <&softreset STIH407_COMPO_SOFTRESET>;
-				st,vtg = <&vtg_main>, <&vtg_aux>;
-			};
-
-			sti-tvout@8d08000 {
-				compatible = "st,stih407-tvout";
-				reg = <0x8d08000 0x1000>;
-				reg-names = "tvout-reg";
-				reset-names = "tvout";
-				resets = <&softreset STIH407_HDTVOUT_SOFTRESET>;
-				#address-cells = <1>;
-				#size-cells = <1>;
-				assigned-clocks = <&clk_s_d2_flexgen CLK_PIX_HDMI>,
-						  <&clk_s_d2_flexgen CLK_TMDS_HDMI>,
-						  <&clk_s_d2_flexgen CLK_REF_HDMIPHY>,
-						  <&clk_s_d0_flexgen CLK_PCM_0>,
-						  <&clk_s_d2_flexgen CLK_PIX_HDDAC>,
-						  <&clk_s_d2_flexgen CLK_HDDAC>;
-
-				assigned-clock-parents = <&clk_s_d2_quadfs 0>,
-							 <&clk_tmdsout_hdmi>,
-							 <&clk_s_d2_quadfs 0>,
-							 <&clk_s_d0_quadfs 0>,
-							 <&clk_s_d2_quadfs 0>,
-							 <&clk_s_d2_quadfs 0>;
-				ranges;
-
-				sti-hdmi@8d04000 {
-					compatible = "st,stih407-hdmi";
-					reg = <0x8d04000 0x1000>;
-					reg-names = "hdmi-reg";
-					interrupts = <GIC_SPI 106 IRQ_TYPE_NONE>;
-					interrupt-names	= "irq";
-					clock-names = "pix",
-						      "tmds",
-						      "phy",
-						      "audio",
-						      "main_parent",
-						      "aux_parent";
-
-					clocks = <&clk_s_d2_flexgen CLK_PIX_HDMI>,
-						 <&clk_s_d2_flexgen CLK_TMDS_HDMI>,
-						 <&clk_s_d2_flexgen CLK_REF_HDMIPHY>,
-						 <&clk_s_d0_flexgen CLK_PCM_0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 1>;
-
-					hdmi,hpd-gpio = <&pio5 3>;
-					reset-names = "hdmi";
-					resets = <&softreset STIH407_HDMI_TX_PHY_SOFTRESET>;
-					ddc = <&hdmiddc>;
-
-				};
-
-				sti-hda@8d02000 {
-					compatible = "st,stih407-hda";
-					reg = <0x8d02000 0x400>, <0x92b0120 0x4>;
-					reg-names = "hda-reg", "video-dacs-ctrl";
-					clock-names = "pix",
-						      "hddac",
-						      "main_parent",
-						      "aux_parent";
-					clocks = <&clk_s_d2_flexgen CLK_PIX_HDDAC>,
-						 <&clk_s_d2_flexgen CLK_HDDAC>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 1>;
-				};
-			};
+		sti_cpufreq_init {
+			compatible = "st,stih407-cpufreq-init";
+			st,operating-points = <
+				/* kHz */
+				1500000 1200000	800000 500000
+			 >;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih410-b2089.dts b/arch/arm/boot/dts/stih410-b2089.dts
--- a/arch/arm/boot/dts/stih410-b2089.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih410-b2089.dts	2019-09-26 21:23:27.136619200 +0100
@@ -0,0 +1,20 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+#include "stihxxx-b2089.dtsi"
+/ {
+	model = "STiH410 B2089";
+	compatible = "st,stih410-b2089", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih410-b2120.dts b/arch/arm/boot/dts/stih410-b2120.dts
--- a/arch/arm/boot/dts/stih410-b2120.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih410-b2120.dts	2019-09-26 21:23:27.136619200 +0100
@@ -1,6 +1,6 @@
 /*
  * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
- * Author: Peter Griffin <peter.griffin@linaro.org>
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
@@ -13,9 +13,9 @@
 	model = "STiH410 B2120";
 	compatible = "st,stih410-b2120", "st,stih410";
 
-	chosen {
-		bootargs = "console=ttyAS0,115200 clk_ignore_unused";
-		linux,stdout-path = &sbc_serial0;
+	aliases {
+		usb0 = &usb0;
+		usb1 = &usb1;
 	};
 
 	memory {
@@ -23,7 +23,45 @@
 		reg = <0x40000000 0x80000000>;
 	};
 
-	aliases {
-		ttyAS0 = &sbc_serial0;
+	sti_bb {
+		compatible = "st,stih407-bb";
+		cpu0-supply = <&pwm_regulator>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		regulator-name = "CPU_1V0_AVS";
+		regulator-min-microvolt = <848000>;
+		regulator-max-microvolt = <1147000>;
+		regulator-always-on;
+		pwms = <&pwm1 3 8448>;
+		status = "okay";
+	};
+
+	soc {
+		vqmmc_reg: voltage-regulator {
+			status = "okay";
+		};
+
+		mmc0: sdhci@09060000 {
+			max-frequency = <200000000>;
+			mmc-cap-uhs-sdr50;
+			mmc-cap-uhs-ddr50;
+			mmc-cap-1p8;
+		};
+
+		pwm1: pwm@9510000 {
+			compatible = "st,sti-pwm";
+			status = "okay";
+			pinctrl-0 = <&pinctrl_pwm1_chan3_default>;
+		};
+
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih410-b2120d.dts b/arch/arm/boot/dts/stih410-b2120d.dts
--- a/arch/arm/boot/dts/stih410-b2120d.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih410-b2120d.dts	2019-09-26 21:23:27.136619200 +0100
@@ -0,0 +1,72 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+#include "stihxxx-b2120.dtsi"
+/ {
+	model = "STiH410 B2120";
+	compatible = "st,stih410-b2120", "st,stih410";
+
+	aliases {
+		usb0 = &usb0;
+		usb1 = &usb1;
+	};
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+
+	sti_bb {
+		compatible = "st,stih407-bb";
+		cpu0-supply = <&pwm_regulator>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		regulator-name = "CPU_1V0_AVS";
+		regulator-min-microvolt = <848000>;
+		regulator-max-microvolt = <1147000>;
+		regulator-always-on;
+		pwms = <&pwm1 3 8448>;
+		status = "okay";
+	};
+
+	soc {
+		vqmmc_reg: voltage-regulator {
+			status = "okay";
+		};
+
+		mmc0: sdhci@09060000 {
+			max-frequency = <200000000>;
+			mmc-cap-uhs-sdr50;
+			mmc-cap-uhs-sdr104;
+			mmc-cap-uhs-ddr50;
+			mmc-cap-1p8;
+		};
+
+		pwm1: pwm@9510000 {
+			compatible = "st,sti-pwm";
+			status = "okay";
+			pinctrl-0 = <&pinctrl_pwm1_chan3_default>;
+		};
+
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+
+		ddr-pctl-controller {
+			st,ddr-poweroff-gpio = <&PIO1 2 0>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih410-b2148.dts b/arch/arm/boot/dts/stih410-b2148.dts
--- a/arch/arm/boot/dts/stih410-b2148.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih410-b2148.dts	2019-09-26 21:23:27.136619200 +0100
@@ -0,0 +1,37 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+
+#include "stih410.dtsi"
+#include "stihxxx-b2148.dtsi"
+
+/ {
+	model = "STiH410 B2148";
+	compatible = "st,stih410-b2148", "st,stih410";
+
+	aliases {
+		usb0 = &usb0;
+		usb1 = &usb1;
+	};
+
+	memory{
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+
+	soc {
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih410-clks.h b/arch/arm/boot/dts/stih410-clks.h
--- a/arch/arm/boot/dts/stih410-clks.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih410-clks.h	2019-09-26 21:23:27.136619200 +0100
@@ -0,0 +1,24 @@
+/*
+ * This header provides constants clk index STMicroelectronics
+ * STiH410 SoC.
+ */
+#ifndef _DT_BINDINGS_CLK_STIH410
+#define _DT_BINDINGS_CLK_STIH410
+#include "stih407-clks.h"
+
+/* STiH410 introduces new clock outputs compared to STiH407 */
+
+/* CLOCKGEN C0 */
+#define CLK_TX_ICN_HADES	32
+#define CLK_RX_ICN_HADES	33
+#define CLK_ICN_REG_16		34
+#define CLK_PP_HADES		35
+#define CLK_CLUST_HADES		36
+#define CLK_HWPE_HADES		37
+#define CLK_FC_HADES		38
+
+/* CLOCKGEN D0 */
+#define CLK_PCMR10_MASTER	4
+#define CLK_USB2_PHY		5
+
+#endif
diff -urNp a/arch/arm/boot/dts/stih410-clock.dtsi b/arch/arm/boot/dts/stih410-clock.dtsi
--- a/arch/arm/boot/dts/stih410-clock.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih410-clock.dtsi	2019-09-26 21:23:27.136619200 +0100
@@ -1,11 +1,12 @@
 /*
- * Copyright (C) 2014 STMicroelectronics R&D Limited
+ * Copyright (C) 2013 STMicroelectronics R&D Limited
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
  */
-#include <dt-bindings/clock/stih410-clks.h>
+#include "stih410-clks.h"
 / {
 	clocks {
 		#address-cells = <1>;
@@ -17,7 +18,7 @@
 		/*
 		 * Fixed 30MHz oscillator inputs to SoC
 		 */
-		clk_sysin: clk-sysin {
+		CLK_SYSIN: CLK_SYSIN {
 			#clock-cells = <0>;
 			compatible = "fixed-clock";
 			clock-frequency = <30000000>;
@@ -27,311 +28,295 @@
 		/*
 		 * ARM Peripheral clock for timers
 		 */
-		arm_periph_clk: clk-m-a9-periphs {
+		arm_periph_clk: CLK_M_A9_PERIPHS {
 			#clock-cells = <0>;
 			compatible = "fixed-factor-clock";
-			clocks = <&clk_m_a9>;
+			clocks = <&CLK_M_A9>;
 			clock-div = <2>;
 			clock-mult = <1>;
 		};
 
 		/*
 		 * A9 PLL.
+		 *
 		 */
-		clockgen-a9@92b0000 {
+		clockgenA9 {
 			compatible = "st,clkgen-c32";
 			reg = <0x92b0000 0xffff>;
 
-			clockgen_a9_pll: clockgen-a9-pll {
-				#clock-cells = <1>;
+			CLOCKGEN_A9_PLL: CLOCKGEN_A9_PLL {
 				compatible = "st,stih407-plls-c32-a9", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
-
-				clock-output-names = "clockgen-a9-pll-odf";
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLOCKGEN_A9_PLL_ODF";
 			};
 		};
 
 		/*
 		 * ARM CPU related clocks.
 		 */
-		clk_m_a9: clk-m-a9@92b0000 {
-			#clock-cells = <0>;
+		CLK_M_A9: CLK_M_A9 {
 			compatible = "st,stih407-clkgen-a9-mux", "st,clkgen-mux";
+			#clock-cells = <0>;
 			reg = <0x92b0000 0x10000>;
-
-			clocks = <&clockgen_a9_pll 0>,
-				 <&clockgen_a9_pll 0>,
-				 <&clk_s_c0_flexgen 13>,
-				 <&clk_m_a9_ext2f_div2>;
+			clocks = <&CLOCKGEN_A9_PLL 0>,
+				 <&CLOCKGEN_A9_PLL 0>,
+				 <&CLK_S_C0_FLEXGEN 13>,
+				 <&CLK_M_A9_EXT2F_DIV2>;
 		};
 
 		/*
 		 * ARM Peripheral clock for timers
 		 */
-		clk_m_a9_ext2f_div2: clk-m-a9-ext2f-div2s {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-
-			clocks = <&clk_s_c0_flexgen 13>;
 
-			clock-output-names = "clk-m-a9-ext2f-div2";
+		CLK_M_A9_EXT2F_DIV2: CLK_M_A9_EXT2F_DIV2S {
+			compatible = "fixed-factor-clock";
 
+			#clock-cells = <0>;
+			clock-output-names = "CLK_M_A9_EXT2F_DIV2";
+			clocks = <&CLK_S_C0_FLEXGEN 13>;
 			clock-div = <2>;
 			clock-mult = <1>;
 		};
 
 		/*
-		 * Bootloader initialized system infrastructure clock for
-		 * serial devices.
+		 * ClockGenAs on SASG2
 		 */
-		clk_ext2f_a9: clockgen-c0@13 {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <200000000>;
-			clock-output-names = "clk-s-icn-reg-0";
-		};
 
-		clockgen-a@090ff000 {
+		clockgenA@090ff000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x90ff000 0x1000>;
 
-			clk_s_a0_pll: clk-s-a0-pll {
-				#clock-cells = <1>;
+			CLK_S_A0_PLL: CLK_S_A0_PLL {
 				compatible = "st,stih407-plls-c32-a0", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
-
-				clock-output-names = "clk-s-a0-pll-ofd-0";
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_A0_PLL_ODF_0";
 			};
 
-			clk_s_a0_flexgen: clk-s-a0-flexgen {
+			CLK_S_A0_FLEXGEN: CLK_S_A0_FLEXGEN {
 				compatible = "st,flexgen";
 
 				#clock-cells = <1>;
-
-				clocks = <&clk_s_a0_pll 0>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-ic-lmi0",
-						     "clk-ic-lmi1";
+				clocks = <&CLK_S_A0_PLL 0>,
+					 <&CLK_SYSIN>;
+				clock-output-names = "CLK_IC_LMI0",
+						     "CLK_IC_LMI1";
 			};
 		};
 
-		clk_s_c0_quadfs: clk-s-c0-quadfs@9103000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-C", "st,quadfs";
+		CLK_S_C0_QUADFS: CLK_S_C0_QUADFS {
+			compatible = "st,quadfs660-C", "st,quadfs";
 			reg = <0x9103000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-c0-fs0-ch0",
-					     "clk-s-c0-fs0-ch1",
-					     "clk-s-c0-fs0-ch2",
-					     "clk-s-c0-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_C0_FS0_CH0",
+					     "CLK_S_C0_FS0_CH1",
+					     "CLK_S_C0_FS0_CH2",
+					     "CLK_S_C0_FS0_CH3";
 		};
 
-		clk_s_c0: clockgen-c@09103000 {
+		CLK_S_C0: clockgenC@09103000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x9103000 0x1000>;
 
-			clk_s_c0_pll0: clk-s-c0-pll0 {
-				#clock-cells = <1>;
-				compatible = "st,stih407-plls-c32-c0_0", "st,clkgen-plls-c32";
-
-				clocks = <&clk_sysin>;
+			CLK_S_C0_PLL0: CLK_S_C0_PLL0 {
+				compatible = "st,plls-c32-cx_0", "st,clkgen-plls-c32";
 
-				clock-output-names = "clk-s-c0-pll0-odf-0";
-			};
-
-			clk_s_c0_pll1: clk-s-c0-pll1 {
 				#clock-cells = <1>;
-				compatible = "st,stih407-plls-c32-c0_1", "st,clkgen-plls-c32";
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_C0_PLL0_ODF_0";
+			};
 
-				clocks = <&clk_sysin>;
+			CLK_S_C0_PLL1: CLK_S_C0_PLL1 {
+				compatible = "st,stih407-plls-conf-c32-c0_1", "st,plls-c32-cx_1", "st,clkgen-plls-c32";
 
-				clock-output-names = "clk-s-c0-pll1-odf-0";
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_C0_PLL1_ODF_0";
 			};
 
-			clk_s_c0_flexgen: clk-s-c0-flexgen {
-				#clock-cells = <1>;
-				compatible = "st,flexgen";
+			CLK_S_C0_FLEXGEN: CLK_S_C0_FLEXGEN {
+				compatible = "st,stih407-flexgen-conf-c0", "st,stih407-clkgenc0", "st,flexgen";
 
-				clocks = <&clk_s_c0_pll0 0>,
-					 <&clk_s_c0_pll1 0>,
-					 <&clk_s_c0_quadfs 0>,
-					 <&clk_s_c0_quadfs 1>,
-					 <&clk_s_c0_quadfs 2>,
-					 <&clk_s_c0_quadfs 3>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-icn-gpu",
-						     "clk-fdma",
-						     "clk-nand",
-						     "clk-hva",
-						     "clk-proc-stfe",
-						     "clk-proc-tp",
-						     "clk-rx-icn-dmu",
-						     "clk-rx-icn-hva",
-						     "clk-icn-cpu",
-						     "clk-tx-icn-dmu",
-						     "clk-mmc-0",
-						     "clk-mmc-1",
-						     "clk-jpegdec",
-						     "clk-ext2fa9",
-						     "clk-ic-bdisp-0",
-						     "clk-ic-bdisp-1",
-						     "clk-pp-dmu",
-						     "clk-vid-dmu",
-						     "clk-dss-lpc",
-						     "clk-st231-aud-0",
-						     "clk-st231-gp-1",
-						     "clk-st231-dmu",
-						     "clk-icn-lmi",
-						     "clk-tx-icn-disp-1",
-						     "clk-icn-sbc",
-						     "clk-stfe-frc2",
-						     "clk-eth-phy",
-						     "clk-eth-ref-phyclk",
-						     "clk-flash-promip",
-						     "clk-main-disp",
-						     "clk-aux-disp",
-						     "clk-compo-dvp",
-						     "clk-tx-icn-hades",
-						     "clk-rx-icn-hades",
-						     "clk-icn-reg-16",
-						     "clk-pp-hades",
-						     "clk-clust-hades",
-						     "clk-hwpe-hades",
-						     "clk-fc-hades";
+				#clock-cells = <1>;
+				clocks = <&CLK_S_C0_PLL0 0>,
+					 <&CLK_S_C0_PLL1 0>,
+					 <&CLK_S_C0_QUADFS 0>,
+					 <&CLK_S_C0_QUADFS 1>,
+					 <&CLK_S_C0_QUADFS 2>,
+					 <&CLK_S_C0_QUADFS 3>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_ICN_GPU",
+						     "CLK_FDMA",
+						     "CLK_NAND",
+						     "CLK_HVA",
+						     "CLK_PROC_STFE",
+						     "CLK_PROC_TP",
+						     "CLK_RX_ICN_DMU",
+						     "CLK_RX_ICN_HVA",
+						     "CLK_ICN_CPU",
+						     "CLK_TX_ICN_DMU",
+						     "CLK_MMC_0",
+						     "CLK_MMC_1",
+						     "CLK_JPEGDEC",
+						     "CLK_EXT2FA9",
+						     "CLK_IC_BDISP_0",
+						     "CLK_IC_BDISP_1",
+						     "CLK_PP_DMU",
+						     "CLK_VID_DMU",
+						     "CLK_DSS_LPC",
+						     "CLK_ST231_AUD_0",
+						     "CLK_ST231_GP_1",
+						     "CLK_ST231_DMU",
+						     "CLK_ICN_LMI",
+						     "CLK_TX_ICN_DISP_1",
+						     "CLK_ICN_SBC",
+						     "CLK_STFE_FRC2",
+						     "CLK_ETH_PHY",
+						     "CLK_ETH_REF_PHYCLK",
+						     "CLK_FLASH_PROMIP",
+						     "CLK_MAIN_DISP",
+						     "CLK_AUX_DISP",
+						     "CLK_COMPO_DVP",
+						     "CLK_TX_ICN_HADES",
+						     "CLK_RX_ICN_HADES",
+						     "CLK_ICN_REG_16",
+						     "CLK_PP_HADES",
+						     "CLK_CLUST_HADES",
+						     "CLK_HWPE_HADES",
+						     "CLK_FC_HADES";
 			};
 		};
 
-		clk_s_d0_quadfs: clk-s-d0-quadfs@9104000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-D", "st,quadfs";
+		CLK_S_D0_QUADFS: CLK_S_D0_QUADFS {
+			compatible = "st,stih407-quadfs660-D0", "st,quadfs";
 			reg = <0x9104000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-d0-fs0-ch0",
-					     "clk-s-d0-fs0-ch1",
-					     "clk-s-d0-fs0-ch2",
-					     "clk-s-d0-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D0_FS0_CH0",
+					     "CLK_S_D0_FS0_CH1",
+					     "CLK_S_D0_FS0_CH2",
+					     "CLK_S_D0_FS0_CH3";
 		};
 
-		clockgen-d0@09104000 {
-			compatible = "st,clkgen-c32";
+		clockgenD0@09104000 {
+			compatible = "st,flexgen-ref";
 			reg = <0x9104000 0x1000>;
 
-			clk_s_d0_flexgen: clk-s-d0-flexgen {
-				#clock-cells = <1>;
-				compatible = "st,flexgen";
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "",
+					     "CLK_USB2_PHY",
+					     "";
 
-				clocks = <&clk_s_d0_quadfs 0>,
-					 <&clk_s_d0_quadfs 1>,
-					 <&clk_s_d0_quadfs 2>,
-					 <&clk_s_d0_quadfs 3>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-pcm-0",
-						     "clk-pcm-1",
-						     "clk-pcm-2",
-						     "clk-spdiff",
-						     "clk-pcmr10-master",
-						     "clk-usb2-phy";
+			CLK_S_D0_FLEXGEN: CLK_S_D0_FLEXGEN {
+				compatible = "st,stih407-clkgend0", "st,flexgen";
+				#clock-cells = <1>;
+				clocks = <&CLK_S_D0_QUADFS 0>,
+					 <&CLK_S_D0_QUADFS 1>,
+					 <&CLK_S_D0_QUADFS 2>,
+					 <&CLK_S_D0_QUADFS 3>,
+					 <&CLK_SYSIN>;
+				clock-output-names = "CLK_PCM_0",
+						     "CLK_PCM_1",
+						     "CLK_PCM_2",
+						     "CLK_SPDIFF",
+						     "CLK_PCMR10_MASTER";
 			};
 		};
 
-		clk_s_d2_quadfs: clk-s-d2-quadfs@9106000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-D", "st,quadfs";
+		CLK_S_D2_QUADFS: CLK_S_D2_QUADFS {
+			compatible = "st,stih407-quadfs660-conf-D2", "st,stih407-quadfs660-D2", "st,quadfs";
 			reg = <0x9106000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-d2-fs0-ch0",
-					     "clk-s-d2-fs0-ch1",
-					     "clk-s-d2-fs0-ch2",
-					     "clk-s-d2-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D2_FS0_CH0",
+					     "CLK_S_D2_FS0_CH1",
+					     "CLK_S_D2_FS0_CH2",
+					     "CLK_S_D2_FS0_CH3";
 		};
 
-		clk_tmdsout_hdmi: clk-tmdsout-hdmi {
+		CLK_TMDSOUT_HDMI: CLK_TMDSOUT_HDMI {
 			#clock-cells = <0>;
 			compatible = "fixed-clock";
 			clock-frequency = <0>;
 		};
 
-		clockgen-d2@x9106000 {
+		clockgenD2@x9106000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x9106000 0x1000>;
 
-			clk_s_d2_flexgen: clk-s-d2-flexgen {
+			CLK_S_D2_FLEXGEN: CLK_S_D2_FLEXGEN {
+				compatible = "st,stih407-flexgen-conf-d2", "st,stih407-clkgend2", "st,flexgen";
 				#clock-cells = <1>;
-				compatible = "st,flexgen";
 
-				clocks = <&clk_s_d2_quadfs 0>,
-					 <&clk_s_d2_quadfs 1>,
-					 <&clk_s_d2_quadfs 2>,
-					 <&clk_s_d2_quadfs 3>,
-					 <&clk_sysin>,
-					 <&clk_sysin>,
-					 <&clk_tmdsout_hdmi>;
-
-				clock-output-names = "clk-pix-main-disp",
-						     "clk-pix-pip",
-						     "clk-pix-gdp1",
-						     "clk-pix-gdp2",
-						     "clk-pix-gdp3",
-						     "clk-pix-gdp4",
-						     "clk-pix-aux-disp",
-						     "clk-denc",
-						     "clk-pix-hddac",
-						     "clk-hddac",
-						     "clk-sddac",
-						     "clk-pix-dvo",
-						     "clk-dvo",
-						     "clk-pix-hdmi",
-						     "clk-tmds-hdmi",
-						     "clk-ref-hdmiphy";
-						     };
+				clocks = <&CLK_S_D2_QUADFS 0>,
+					 <&CLK_S_D2_QUADFS 1>,
+					 <&CLK_S_D2_QUADFS 2>,
+					 <&CLK_S_D2_QUADFS 3>,
+					 <&CLK_SYSIN>,
+					 <&CLK_SYSIN>,
+					 <&CLK_TMDSOUT_HDMI>;
+
+				clock-output-names = "CLK_PIX_MAIN_DISP",
+						     "CLK_PIX_PIP",
+						     "CLK_PIX_GDP1",
+						     "CLK_PIX_GDP2",
+						     "CLK_PIX_GDP3",
+						     "CLK_PIX_GDP4",
+						     "CLK_PIX_AUX_DISP",
+						     "CLK_DENC",
+						     "CLK_PIX_HDDAC",
+						     "CLK_HDDAC",
+						     "CLK_SDDAC",
+						     "CLK_PIX_DVO",
+						     "CLK_DVO",
+						     "CLK_PIX_HDMI",
+						     "CLK_TMDS_HDMI",
+						     "CLK_REF_HDMIPHY";
+			};
 		};
 
-		clk_s_d3_quadfs: clk-s-d3-quadfs@9107000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-D", "st,quadfs";
+		CLK_S_D3_QUADFS: CLK_S_D3_QUADFS {
+			compatible = "st,quadfs660-D", "st,quadfs";
 			reg = <0x9107000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-d3-fs0-ch0",
-					     "clk-s-d3-fs0-ch1",
-					     "clk-s-d3-fs0-ch2",
-					     "clk-s-d3-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D3_FS0_CH0",
+					     "CLK_S_D3_FS0_CH1",
+					     "CLK_S_D3_FS0_CH2",
+					     "CLK_S_D3_FS0_CH3";
 		};
 
-		clockgen-d3@9107000 {
+		clockgenD3@9107000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x9107000 0x1000>;
 
-			clk_s_d3_flexgen: clk-s-d3-flexgen {
-				#clock-cells = <1>;
+			CLK_S_D3_FLEXGEN: CLK_S_D3_FLEXGEN {
 				compatible = "st,flexgen";
+				#clock-cells = <1>;
 
-				clocks = <&clk_s_d3_quadfs 0>,
-					 <&clk_s_d3_quadfs 1>,
-					 <&clk_s_d3_quadfs 2>,
-					 <&clk_s_d3_quadfs 3>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-stfe-frc1",
-						     "clk-tsout-0",
-						     "clk-tsout-1",
-						     "clk-mchi",
-						     "clk-vsens-compo",
-						     "clk-frc1-remote",
-						     "clk-lpc-0",
-						     "clk-lpc-1";
+				clocks = <&CLK_S_D3_QUADFS 0>,
+					 <&CLK_S_D3_QUADFS 1>,
+					 <&CLK_S_D3_QUADFS 2>,
+					 <&CLK_S_D3_QUADFS 3>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_STFE_FRC1",
+						     "CLK_TSOUT_0",
+						     "CLK_TSOUT_1",
+						     "CLK_MCHI",
+						     "CLK_VSENS_COMPO",
+						     "CLK_FRC1_REMOTE",
+						     "CLK_LPC_0",
+						     "CLK_LPC_1";
 			};
 		};
 	};
diff -urNp a/arch/arm/boot/dts/stih410.dtsi b/arch/arm/boot/dts/stih410.dtsi
--- a/arch/arm/boot/dts/stih410.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih410.dtsi	2019-09-26 21:23:27.140619200 +0100
@@ -1,222 +1,44 @@
 /*
  * Copyright (C) 2014 STMicroelectronics Limited.
- * Author: Peter Griffin <peter.griffin@linaro.org>
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
- * publishhed by the Free Software Foundation.
+ * published by the Free Software Foundation.
  */
 #include "stih410-clock.dtsi"
 #include "stih407-family.dtsi"
-#include "stih410-pinctrl.dtsi"
 / {
-	soc {
-		usb2_picophy1: phy2 {
-			compatible = "st,stih407-usb2-phy";
-			#phy-cells = <0>;
-			st,syscfg = <&syscfg_core 0xf8 0xf4>;
-			resets = <&softreset STIH407_PICOPHY_SOFTRESET>,
-				 <&picophyreset STIH407_PICOPHY0_RESET>;
-			reset-names = "global", "port";
-		};
-
-		usb2_picophy2: phy3 {
-			compatible = "st,stih407-usb2-phy";
-			#phy-cells = <0>;
-			st,syscfg = <&syscfg_core 0xfc 0xf4>;
-			resets = <&softreset STIH407_PICOPHY_SOFTRESET>,
-				 <&picophyreset STIH407_PICOPHY1_RESET>;
-			reset-names = "global", "port";
-		};
-
-		ohci0: usb@9a03c00 {
-			compatible = "st,st-ohci-300x";
-			reg = <0x9a03c00 0x100>;
-			interrupts = <GIC_SPI 180 IRQ_TYPE_NONE>;
-			clocks = <&clk_s_c0_flexgen CLK_TX_ICN_DISP_0>;
-			resets = <&powerdown STIH407_USB2_PORT0_POWERDOWN>,
-				 <&softreset STIH407_USB2_PORT0_SOFTRESET>;
-			reset-names = "power", "softreset";
-			phys = <&usb2_picophy1>;
-			phy-names = "usb";
-		};
-
-		ehci0: usb@9a03e00 {
-			compatible = "st,st-ehci-300x";
-			reg = <0x9a03e00 0x100>;
-			interrupts = <GIC_SPI 151 IRQ_TYPE_NONE>;
-			pinctrl-names = "default";
-			pinctrl-0 = <&pinctrl_usb0>;
-			clocks = <&clk_s_c0_flexgen CLK_TX_ICN_DISP_0>;
-			resets = <&powerdown STIH407_USB2_PORT0_POWERDOWN>,
-				 <&softreset STIH407_USB2_PORT0_SOFTRESET>;
-			reset-names = "power", "softreset";
-			phys = <&usb2_picophy1>;
-			phy-names = "usb";
-		};
-
-		ohci1: usb@9a83c00 {
-			compatible = "st,st-ohci-300x";
-			reg = <0x9a83c00 0x100>;
-			interrupts = <GIC_SPI 181 IRQ_TYPE_NONE>;
-			clocks = <&clk_s_c0_flexgen CLK_TX_ICN_DISP_0>;
-			resets = <&powerdown STIH407_USB2_PORT1_POWERDOWN>,
-				 <&softreset STIH407_USB2_PORT1_SOFTRESET>;
-			reset-names = "power", "softreset";
-			phys = <&usb2_picophy2>;
-			phy-names = "usb";
-		};
-
-		ehci1: usb@9a83e00 {
-			compatible = "st,st-ehci-300x";
-			reg = <0x9a83e00 0x100>;
-			interrupts = <GIC_SPI 153 IRQ_TYPE_NONE>;
-			pinctrl-names = "default";
-			pinctrl-0 = <&pinctrl_usb1>;
-			clocks = <&clk_s_c0_flexgen CLK_TX_ICN_DISP_0>;
-			resets = <&powerdown STIH407_USB2_PORT1_POWERDOWN>,
-				 <&softreset STIH407_USB2_PORT1_SOFTRESET>;
-			reset-names = "power", "softreset";
-			phys = <&usb2_picophy2>;
-			phy-names = "usb";
-		};
-
-		/* Display */
-		vtg_main: sti-vtg-main@8d02800 {
-			compatible = "st,vtg";
-			reg = <0x8d02800 0x200>;
-			interrupts = <GIC_SPI 108 IRQ_TYPE_NONE>;
-		};
-
-		vtg_aux: sti-vtg-aux@8d00200 {
-			compatible = "st,vtg";
-			reg = <0x8d00200 0x100>;
-			interrupts = <GIC_SPI 109 IRQ_TYPE_NONE>;
+	cpus {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		cpu@1 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <1>;
 		};
+	};
 
-		sti-display-subsystem {
-			compatible = "st,sti-display-subsystem";
-			#address-cells = <1>;
-			#size-cells = <1>;
-
-			assigned-clocks	= <&clk_s_d2_quadfs 0>,
-					  <&clk_s_d2_quadfs 0>,
-					  <&clk_s_d2_flexgen CLK_PIX_MAIN_DISP>,
-					  <&clk_s_d2_flexgen CLK_PIX_AUX_DISP>,
-					  <&clk_s_d2_flexgen CLK_PIX_GDP1>,
-					  <&clk_s_d2_flexgen CLK_PIX_GDP2>,
-					  <&clk_s_d2_flexgen CLK_PIX_GDP3>,
-					  <&clk_s_d2_flexgen CLK_PIX_GDP4>;
-
-			assigned-clock-parents = <0>,
-						 <0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 0>;
-
-			assigned-clock-rates = <297000000>, <297000000>;
-
-			ranges;
-
-			sti-compositor@9d11000 {
-				compatible = "st,stih407-compositor";
-				reg = <0x9d11000 0x1000>;
-
-				clock-names = "compo_main",
-					      "compo_aux",
-					      "pix_main",
-					      "pix_aux",
-					      "pix_gdp1",
-					      "pix_gdp2",
-					      "pix_gdp3",
-					      "pix_gdp4",
-					      "main_parent",
-					      "aux_parent";
-
-				clocks = <&clk_s_c0_flexgen CLK_COMPO_DVP>,
-					 <&clk_s_c0_flexgen CLK_COMPO_DVP>,
-					 <&clk_s_d2_flexgen CLK_PIX_MAIN_DISP>,
-					 <&clk_s_d2_flexgen CLK_PIX_AUX_DISP>,
-					 <&clk_s_d2_flexgen CLK_PIX_GDP1>,
-					 <&clk_s_d2_flexgen CLK_PIX_GDP2>,
-					 <&clk_s_d2_flexgen CLK_PIX_GDP3>,
-					 <&clk_s_d2_flexgen CLK_PIX_GDP4>,
-					 <&clk_s_d2_quadfs 0>,
-					 <&clk_s_d2_quadfs 1>;
-
-				reset-names = "compo-main", "compo-aux";
-				resets = <&softreset STIH407_COMPO_SOFTRESET>,
-					 <&softreset STIH407_COMPO_SOFTRESET>;
-				st,vtg = <&vtg_main>, <&vtg_aux>;
-			};
-
-			sti-tvout@8d08000 {
-				compatible = "st,stih407-tvout";
-				reg = <0x8d08000 0x1000>;
-				reg-names = "tvout-reg";
-				reset-names = "tvout";
-				resets = <&softreset STIH407_HDTVOUT_SOFTRESET>;
-				#address-cells = <1>;
-				#size-cells = <1>;
-				assigned-clocks = <&clk_s_d2_flexgen CLK_PIX_HDMI>,
-						  <&clk_s_d2_flexgen CLK_TMDS_HDMI>,
-						  <&clk_s_d2_flexgen CLK_REF_HDMIPHY>,
-						  <&clk_s_d0_flexgen CLK_PCM_0>,
-						  <&clk_s_d2_flexgen CLK_PIX_HDDAC>,
-						  <&clk_s_d2_flexgen CLK_HDDAC>;
-
-				assigned-clock-parents = <&clk_s_d2_quadfs 0>,
-							 <&clk_tmdsout_hdmi>,
-							 <&clk_s_d2_quadfs 0>,
-							 <&clk_s_d0_quadfs 0>,
-							 <&clk_s_d2_quadfs 0>,
-							 <&clk_s_d2_quadfs 0>;
-				ranges;
-
-				sti-hdmi@8d04000 {
-					compatible = "st,stih407-hdmi";
-					reg = <0x8d04000 0x1000>;
-					reg-names = "hdmi-reg";
-					interrupts = <GIC_SPI 106 IRQ_TYPE_NONE>;
-					interrupt-names	= "irq";
-					clock-names = "pix",
-						      "tmds",
-						      "phy",
-						      "audio",
-						      "main_parent",
-						      "aux_parent";
-
-					clocks = <&clk_s_d2_flexgen CLK_PIX_HDMI>,
-						 <&clk_s_d2_flexgen CLK_TMDS_HDMI>,
-						 <&clk_s_d2_flexgen CLK_REF_HDMIPHY>,
-						 <&clk_s_d0_flexgen CLK_PCM_0>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 1>;
-
-					hdmi,hpd-gpio = <&pio5 3>;
-					reset-names = "hdmi";
-					resets = <&softreset STIH407_HDMI_TX_PHY_SOFTRESET>;
-					ddc = <&hdmiddc>;
-
-				};
-
-				sti-hda@8d02000 {
-					compatible = "st,stih407-hda";
-					reg = <0x8d02000 0x400>, <0x92b0120 0x4>;
-					reg-names = "hda-reg", "video-dacs-ctrl";
-					clock-names = "pix",
-						      "hddac",
-						      "main_parent",
-						      "aux_parent";
-					clocks = <&clk_s_d2_flexgen CLK_PIX_HDDAC>,
-						 <&clk_s_d2_flexgen CLK_HDDAC>,
-						 <&clk_s_d2_quadfs 0>,
-						 <&clk_s_d2_quadfs 1>;
-				};
-			};
+	soc {
+		st_usb_bus_config: st-usb-amba-config {
+			st,complete_on_error;
+			st,read_ahead;
+			st,max_opcode_LD64_ST64;
+			st,chunks_in_msg = <0>;
+			st,packets_in_chunk = <2>;
+			st,threshold = <256>;
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			st,gsbuscfg = <0xE 0xF00>;
+		};
+
+		sti_cpufreq_init {
+			compatible = "st,stih407-cpufreq-init";
+			st,operating-points = <
+				/* kHz */
+				1500000 1200000	800000 500000
+			 >;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih410cut1-b2120.dts b/arch/arm/boot/dts/stih410cut1-b2120.dts
--- a/arch/arm/boot/dts/stih410cut1-b2120.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih410cut1-b2120.dts	2019-09-26 21:23:27.140619200 +0100
@@ -0,0 +1,35 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+#include "stihxxx-b2120.dtsi"
+/ {
+	model = "STiH410cut1 B2120";
+	compatible = "st,stih410", "st,stih410-b2120";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+
+	soc {
+		usb3_phy: usb3_phy@0 {
+			st,auto-calibration;
+		};
+
+		/* set tx impedance compensation */
+		miphy28lp_phy0: miphy28lp@0 {
+			st,tx-impedance-comp;
+		};
+
+		miphy28lp_phy1: miphy28lp@1 {
+			st,tx-impedance-comp;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih410cut1-b2148.dts b/arch/arm/boot/dts/stih410cut1-b2148.dts
--- a/arch/arm/boot/dts/stih410cut1-b2148.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih410cut1-b2148.dts	2019-09-26 21:23:27.144619200 +0100
@@ -0,0 +1,36 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+
+#include "stih410.dtsi"
+#include "stihxxx-b2148.dtsi"
+
+/ {
+	model = "STiH410cut1 B2148";
+	compatible = "st,stih410-b2148", "st,stih410";
+	memory{
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>;
+	};
+
+	soc {
+		usb3_phy: usb3_phy@0 {
+			st,auto-calibration;
+		};
+
+		/* set tx impedance compensation */
+		miphy28lp_phy0: miphy28lp@0 {
+			st,tx-impedance-comp;
+		};
+
+		miphy28lp_phy1: miphy28lp@1 {
+			st,tx-impedance-comp;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih410cut1-b2163.dts b/arch/arm/boot/dts/stih410cut1-b2163.dts
--- a/arch/arm/boot/dts/stih410cut1-b2163.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih410cut1-b2163.dts	2019-09-26 21:23:27.144619200 +0100
@@ -0,0 +1,208 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ * Author: Amelie Herault <amelie.herault@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+
+/ {
+	model = "STiH410cut1 B2163 Board";
+	compatible = "st,stih410-b2163", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &sbc_serial0;
+	};
+
+	aliases {
+		ttyAS0 = &sbc_serial0;
+		ethernet0 = &ethernet0;
+		miphy0 = &miphy28lp_phy0;
+		miphy1 = &miphy28lp_phy1;
+		miphy2 = &miphy28lp_phy2;
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "PCM_out",
+				   "Analog_out", "spdif",
+				   "PCM_in", "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player1
+				      &snd_uni_player2 &snd_uni_player3
+				      &snd_uni_reader0 &snd_uni_reader1 >;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dummy",
+				       "sas-dai-dac", "sas-dai-spdif-out",
+				       "sas-dai-dummy","sas-dai-dummy";
+	};
+
+	soc {
+		sbc_serial0: serial@9530000 {
+			status = "okay";
+		};
+
+		leds {
+			compatible = "gpio-leds";
+			red {
+				#gpio-cells = <2>;
+				label = "Front Panel LED";
+				gpios = <&PIO4 1 0>;
+				linux,default-trigger = "heartbeat";
+			};
+			green {
+				#gpio-cells = <2>;
+				gpios = <&PIO1 3 0>;
+				default-state = "off";
+			};
+		};
+
+		rc: rc@09518000 {
+			status = "okay";
+		};
+
+		/* SSC? to Alicante: i2c1 or i2c2? */
+		//i2c1: i2c@9841000 {
+		i2c2: i2c@9842000 {
+			/*
+			 * Disabled for now as there is no i2c slave driver
+			 * available for stih407 side
+			 */
+			status = "disabled";
+		};
+
+		/* SSC5 to STV6440, NFC, I2C Eeprom */
+		i2c5: i2c@9845000 {
+			status = "okay";
+		};
+
+		/* SSC10 to TDA18288 */
+		i2c10: i2c@9540000 {
+			status = "okay";
+		};
+
+		/* SSC11 to HDMI */
+		i2c11: i2c@9541000 {
+			status = "okay";
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+		};
+
+		ethernet0: dwmac@9630000 {
+			st,tx-retime-src = "clkgen";
+			status = "okay";
+			phy-mode = "rgmii";
+			fixed-link = <1 1000 0 0>;
+			snps,phy-addr = <0x1>;
+		};
+
+		usb3_phy: usb3_phy@0 {
+			st,auto-calibration;
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
+		};
+
+		/* select internal clock for miphy0 (sata) */
+		miphy28lp_phy0: miphy28lp@0 {
+			st,sata_gen = "gen3";
+			/* set tx impedance compensation */
+			st,tx-impedance-comp;
+			status = "okay";
+		};
+
+		sata0: sata@9b20000 {
+			status	= "okay";
+		};
+
+		mmc0: sdhci@09060000 {
+			status = "okay";
+			non-removable;
+		};
+
+		mmc1: sdhci@09080000 {
+			status = "okay";
+		};
+
+		spifsm@9022000 {
+			status = "okay";
+			flash-name = "n25q256";
+			partitions = <&b2163_fsm_partitions>;
+
+			b2163_fsm_partitions: partitions-b2163 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@1400000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+
+		gpio_keys {
+			compatible = "gpio-keys";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			button@1 {
+				label = "wakeup";
+				linux,code = <41>;
+				gpios = <&PIO3 3 1>;
+				gpio-key,wakeup;
+			};
+		};
+
+		/* Uniperipheral*/
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			status = "okay";
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO3 2 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih412-b2120.dts b/arch/arm/boot/dts/stih412-b2120.dts
--- a/arch/arm/boot/dts/stih412-b2120.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih412-b2120.dts	2019-09-26 21:23:27.144619200 +0100
@@ -0,0 +1,61 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Carmelo Amoroso <carmelo.amoroso@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih412.dtsi"
+#include "stihxxx-b2120.dtsi"
+/ {
+	model = "STiH412 B2120";
+	compatible = "st,stih412-b2120", "st,stih410";
+
+	aliases {
+		usb0 = &usb0;
+		usb1 = &usb1;
+	};
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+
+	sti_bb {
+		compatible = "st,stih407-bb";
+		cpu0-supply = <&pwm_regulator>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		regulator-name = "CPU_1V0_AVS";
+		regulator-min-microvolt = <848000>;
+		regulator-max-microvolt = <1147000>;
+		regulator-always-on;
+		pwms = <&pwm1 3 8448>;
+		status = "okay";
+	};
+
+	soc {
+		mmc0: sdhci@09060000 {
+			status = "okay";
+			non-removable;
+		};
+
+		pwm1: pwm@9510000 {
+			compatible = "st,sti-pwm";
+			status = "okay";
+			pinctrl-0 = <&pinctrl_pwm1_chan3_default>;
+		};
+
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih412.dtsi b/arch/arm/boot/dts/stih412.dtsi
--- a/arch/arm/boot/dts/stih412.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih412.dtsi	2019-09-26 21:23:27.148619200 +0100
@@ -0,0 +1,14 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics Limited.
+ * Author: Carmelo Amoroso <carmelo.amoroso@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih410.dtsi"
+/ {
+	clocks {
+		compatible = "st,stih412-clk", "simple-bus";
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih414-b2188.dts b/arch/arm/boot/dts/stih414-b2188.dts
--- a/arch/arm/boot/dts/stih414-b2188.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih414-b2188.dts	2019-09-26 21:23:27.148619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih414.dtsi"
+#include "stihxxx-b2188.dtsi"
+/ {
+	model = "STiH414 B2188";
+	compatible = "st,stih414-b2188", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x80000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih414-b2199.dts b/arch/arm/boot/dts/stih414-b2199.dts
--- a/arch/arm/boot/dts/stih414-b2199.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih414-b2199.dts	2019-09-26 21:23:27.148619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih414.dtsi"
+#include "stihxxx-b2199.dtsi"
+/ {
+	model = "STiH414 B2199";
+	compatible = "st,stih414-b2199", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0xc0000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih414-b2206.dts b/arch/arm/boot/dts/stih414-b2206.dts
--- a/arch/arm/boot/dts/stih414-b2206.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih414-b2206.dts	2019-09-26 21:23:27.148619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih414.dtsi"
+#include "stihxxx-b2206.dtsi"
+/ {
+	model = "STiH414 B2206";
+	compatible = "st,stih414-b2206", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0xc0000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih414-clkconf.dtsi b/arch/arm/boot/dts/stih414-clkconf.dtsi
--- a/arch/arm/boot/dts/stih414-clkconf.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih414-clkconf.dtsi	2019-09-26 21:23:27.160619200 +0100
@@ -0,0 +1,129 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih418-clks.h"
+/ {
+	clocks {
+						/* Clockgen D0 */
+		assigned-clocks =   		<&CLK_S_D0_QUADFS VCO>,
+						<&CLK_S_D0_QUADFS 0>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_0>,
+						<&CLK_S_D0_QUADFS 1>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_1>,
+						<&CLK_S_D0_QUADFS 2>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_2>,
+						<&CLK_S_D0_QUADFS 3>,
+						<&CLK_S_D0_FLEXGEN CLK_SPDIFF>,
+						/* Clockgen D2 */
+						<&CLK_S_D2_QUADFS VCO>,
+						<&CLK_S_D2_QUADFS 2>,
+						<&CLK_S_D2_QUADFS 3>,
+						<&CLK_S_D2_FLEXGEN CLK_VP9>,
+						/* Clockgen D3 */
+						<&CLK_S_D3_QUADFS VCO>,
+						<&CLK_S_D3_QUADFS 0>,
+						<&CLK_S_D3_FLEXGEN CLK_STFE_FRC1>,
+						<&CLK_S_D3_FLEXGEN CLK_FRC1_REMOTE>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_FLEXGEN CLK_TSOUT_0>,
+						<&CLK_S_D3_FLEXGEN CLK_TSOUT_1>,
+						<&CLK_S_D3_FLEXGEN CLK_MCHI>,
+						<&CLK_S_D3_FLEXGEN CLK_LPC_0>,
+						/* Clockgen C0 */
+						<&CLK_S_C0_QUADFS 2>,
+						<&CLK_S_C0_FLEXGEN CLK_DSS_LPC>,
+						<&CLK_S_C0_FLEXGEN CLK_MMC_0>,
+						<&CLK_S_C0_QUADFS 3>,
+						<&CLK_S_C0_FLEXGEN CLK_ETH_PHYREF>,
+						<&CLK_S_C0_FLEXGEN CLK_ETH_PHY>,
+						<&CLK_S_C0_FLEXGEN CLK_ICN_GPU>,
+						<&CLK_S_C0_FLEXGEN CLK_PP_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_VID_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_ST231_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_HWPE_HEVC>,
+						<&CLK_S_C0_FLEXGEN CLK_PROC_SC>;
+
+						/* Clockgen D0 */
+		assigned-clock-parents =	<0>,
+						<0>,
+						<&CLK_S_D0_QUADFS 0>,
+						<0>,
+						<&CLK_S_D0_QUADFS 1>,
+						<0>,
+						<&CLK_S_D0_QUADFS 2>,
+						<0>,
+						<&CLK_S_D0_QUADFS 3>,
+						/* Clockgen D2 */
+						<0>,
+						<0>,
+						<0>,
+						<&CLK_S_D2_QUADFS 3>,
+						/* Clockgen D3 */
+						<0>,
+						<0>,
+						<&CLK_S_D3_QUADFS 0>,
+						<&CLK_S_D3_QUADFS 0>,
+						<0>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_SYSIN>,
+						/* Clockgen C0 */
+						<0>,
+						<&CLK_S_C0_QUADFS 2>,
+						<&CLK_S_C0_PLL1 0>,
+						<0>,
+						<0>,
+						<0>,
+						<&CLK_S_C0_PLL0 0>,
+						<&CLK_S_C0_PLL1 0>,
+						<&CLK_S_C0_QUADFS 0>,
+						<&CLK_S_C0_QUADFS 0>,
+						<&CLK_S_C0_PLL1 0>,
+						<&CLK_S_C0_QUADFS 0>;
+
+						/* Clockgen D0 */
+		assigned-clock-rates =		<660000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						/* Clockgen D2 */
+						<660000000>,
+						<297000000>,
+						<430000000>,
+						<0>,
+						/* Clockgen D3 */
+						<660000000>,
+						<27000000>,
+						<27000000>,
+						<27000000>,
+						<108000000>,
+						<108000000>,
+						<108000000>,
+						<27000000>,
+						<600000>,
+						/* Clockgen C0 */
+						<27000000>,
+						<27000000>,
+						<200000000>,
+						<250000000>,
+						<125000000>,
+						<125000000>,
+						<355300000>,
+						<300000000>,
+						<660000000>,
+						<660000000>,
+						<400000000>,
+						<330000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih414.dtsi b/arch/arm/boot/dts/stih414.dtsi
--- a/arch/arm/boot/dts/stih414.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih414.dtsi	2019-09-26 21:23:27.160619200 +0100
@@ -0,0 +1,24 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih418.dtsi"
+#include "stih414-clkconf.dtsi"
+/ {
+	clocks {
+		compatible = "st,stih414-clk", "simple-bus";
+	};
+	soc {
+		sti_cpufreq_init {
+			compatible = "st,stih407-cpufreq-init";
+			st,operating-points = <
+				/* kHz */
+				800000 500000
+			 >;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih416-b2000.dts b/arch/arm/boot/dts/stih416-b2000.dts
--- a/arch/arm/boot/dts/stih416-b2000.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih416-b2000.dts	2019-09-26 21:23:27.164619200 +0100
@@ -9,7 +9,32 @@
 /dts-v1/;
 #include "stih416.dtsi"
 #include "stih41x-b2000.dtsi"
+
 / {
 	model = "STiH416 B2000";
 	compatible = "st,stih416-b2000", "st,stih416";
+
+	memory {
+		device_type = "memory";
+		reg = <0x60000000 0x40000000>;
+	};
+
+	aliases {
+		usb3 = &usb3;
+	};
+
+	soc {
+		usb3: usb@fe340000 {
+			status = "okay";
+		};
+
+		miphy365x_phy: miphy365x@0 {
+			st,pcie_tx_pol_inv = <1>;
+			st,sata_gen = "gen3";
+		};
+
+		sata0: sata@fe380000{
+			status = "okay";
+		};
+	};
 };
diff -urNp a/arch/arm/boot/dts/stih416-b2020.dts b/arch/arm/boot/dts/stih416-b2020.dts
--- a/arch/arm/boot/dts/stih416-b2020.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih416-b2020.dts	2019-09-26 21:23:27.164619200 +0100
@@ -13,25 +13,36 @@
 	model = "STiH416 B2020";
 	compatible = "st,stih416-b2020", "st,stih416";
 
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+
+	aliases {
+		usb3 = &usb3;
+	};
+
 	soc {
 		mmc1: sdhci@fe81f000 {
-			status       = "okay";
-			bus-width    = <8>;
+			status = "okay";
 			non-removable;
 		};
 
-		miphy365x_phy: phy@fe382000 {
-			phy_port0: port@fe382000 {
-				st,sata-gen = <3>;
-			};
-
-			phy_port1: port@fe38a000 {
-				st,pcie-tx-pol-inv;
-			};
+		usb3: usb@fe340000 {
+			status = "okay";
+		};
+
+		miphy365x_phy: miphy365x@0 {
+			st,pcie_tx_pol_inv = <1>;
+			st,sata_gen = "gen3";
 		};
 
 		sata0: sata@fe380000{
 			status = "okay";
 		};
+
+		pcie1: pcie@fe800000 {
+			status = "okay";
+		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih416-b2020e.dts b/arch/arm/boot/dts/stih416-b2020e.dts
--- a/arch/arm/boot/dts/stih416-b2020e.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih416-b2020e.dts	2019-09-26 21:23:27.164619200 +0100
@@ -1,6 +1,6 @@
 /*
- * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
- * Author: Lee Jones <lee.jones@linaro.org>
+ * Copyright (C) 2013 STMicroelectronics (R&D) Limited.
+ * Author: Srinivas Kandagatla <srinivas.kandagatla@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
@@ -8,47 +8,35 @@
  */
 /dts-v1/;
 #include "stih416.dtsi"
-#include "stih41x-b2020.dtsi"
+#include "stih41x-b2020e.dtsi"
 / {
-	model = "STiH416 B2020 REV-E";
+	model = "STiH416 B2020 rev E";
 	compatible = "st,stih416-b2020", "st,stih416";
 
+	aliases {
+		usb3 = &usb3;
+	};
+
 	soc {
-		leds {
-			compatible = "gpio-leds";
-			red {
-				#gpio-cells		= <1>;
-				label			= "Front Panel LED";
-				gpios			= <&pio4 1>;
-				linux,default-trigger	= "heartbeat";
-			};
-			green {
-				gpios			= <&pio1 3>;
-				default-state 		= "off";
-			};
+		mmc1: sdhci@fe81f000 {
+			status = "okay";
+			non-removable;
 		};
 
-		ethernet1: dwmac@fef08000 {
-			snps,reset-gpio = <&pio0 7>;
+		usb3: usb@fe340000 {
+			status = "okay";
 		};
 
-		mmc1: sdhci@fe81f000 {
-			status       = "okay";
-			bus-width    = <8>;
-			non-removable;
+		miphy365x_phy: miphy365x@0 {
+			st,pcie_tx_pol_inv = <1>;
+			st,sata_gen = "gen3";
 		};
 
-		miphy365x_phy: phy@fe382000 {
-			phy_port0: port@fe382000 {
-				st,sata-gen = <3>;
-			};
-
-			phy_port1: port@fe38a000 {
-				st,pcie-tx-pol-inv;
-			};
+		sata0: sata@fe380000{
+			status = "okay";
 		};
 
-		sata0: sata@fe380000{
+		pcie1: pcie@fe800000 {
 			status = "okay";
 		};
 	};
diff -urNp a/arch/arm/boot/dts/stih416-b2105.dts b/arch/arm/boot/dts/stih416-b2105.dts
--- a/arch/arm/boot/dts/stih416-b2105.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih416-b2105.dts	2019-09-26 21:23:27.164619200 +0100
@@ -0,0 +1,60 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics (R&D) Limited.
+ * Author: Srinivas Kandagatla <srinivas.kandagatla@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih416.dtsi"
+
+/ {
+	compatible = "st,stih416-b2105";
+	model = "STiH416 B2105";
+
+	memory{
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &serial2;
+	};
+
+	aliases {
+		ttyAS0 = &serial2;
+		ethernet0 = &ethernet0;
+	};
+
+	soc {
+		serial2: serial@fed32000 {
+			status = "okay";
+		};
+
+		leds {
+			compatible	= "gpio-leds";
+			fp_led {
+				#gpio-cells = <1>;
+				label	= "Front Panel LED";
+				gpios	= <&PIO0 4 0>;
+				linux,default-trigger = "heartbeat";
+			};
+		};
+
+		ethernet0:dwmac@fe810000 {
+			status = "okay";
+			st,tx-retime-src = "clkgen";
+
+			phy-mode = "rgmii-id";
+			snps,phy-addr = <0x1>;
+			max-speed = <100>;
+			pinctrl-0 = <&pinctrl_rgmii0>;
+
+			snps,reset-gpio = <&PIO13 6 0>;
+			snps,reset-active-low;
+			snps,reset-delays-us = <0 10000 10000>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih416-clock.dtsi b/arch/arm/boot/dts/stih416-clock.dtsi
--- a/arch/arm/boot/dts/stih416-clock.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih416-clock.dtsi	2019-09-26 21:23:27.164619200 +0100
@@ -6,365 +6,365 @@
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
  */
-
-#include <dt-bindings/clock/stih416-clks.h>
-
 / {
 	clocks {
 		#address-cells = <1>;
 		#size-cells = <1>;
 		ranges;
 
+		compatible = "st,stih416-clk", "simple-bus";
+
 		/*
 		 * Fixed 30MHz oscillator inputs to SoC
 		 */
-		clk_sysin: clk-sysin {
+		CLK_SYSIN: CLK_SYSIN {
 			#clock-cells = <0>;
 			compatible = "fixed-clock";
 			clock-frequency = <30000000>;
+			clock-output-names = "CLK_SYSIN";
 		};
 
 		/*
 		 * ClockGenAs on SASG2
 		 */
-		clockgen-a@fee62000 {
+		clockgenA@fee62000 {
 			reg = <0xfee62000 0xb48>;
 
-			clk_s_a0_pll: clk-s-a0-pll {
+			CLK_S_A0_PLL: CLK_S_A0_PLL {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-plls-c65";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-s-a0-pll0-hs",
-						     "clk-s-a0-pll0-ls",
-						     "clk-s-a0-pll1";
+				clock-output-names = "CLK_S_A0_PLL0_HS",
+						     "CLK_S_A0_PLL0_LS",
+						     "CLK_S_A0_PLL1";
 			};
 
-			clk_s_a0_osc_prediv: clk-s-a0-osc-prediv {
+			CLK_S_A0_OSC_PREDIV: CLK_S_A0_OSC_PREDIV {
 				#clock-cells = <0>;
 				compatible = "st,clkgena-prediv-c65",
 					     "st,clkgena-prediv";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-s-a0-osc-prediv";
+				clock-output-names = "CLK_S_A0_OSC_PREDIV";
 			};
 
-			clk_s_a0_hs: clk-s-a0-hs {
+			CLK_S_A0_HS: CLK_S_A0_HS {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c65-hs",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_s_a0_osc_prediv>,
-					 <&clk_s_a0_pll 0>, /* PLL0 HS */
-					 <&clk_s_a0_pll 2>; /* PLL1 */
-
-				clock-output-names = "clk-s-fdma-0",
-						     "clk-s-fdma-1",
-						     ""; /* clk-s-jit-sense */
+				clocks = <&CLK_S_A0_OSC_PREDIV>,
+					 <&CLK_S_A0_PLL 0>, /* PLL0 HS */
+					 <&CLK_S_A0_PLL 2>; /* PLL1 */
+
+				clock-output-names = "CLK_S_FDMA_0",
+						     "CLK_S_FDMA_1",
+						     ""; /* CLK_S_JIT_SENSE */
 						     /* Fourth output unused */
 			};
 
-			clk_s_a0_ls: clk-s-a0-ls {
+			CLK_S_A0_LS: CLK_S_A0_LS {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c65-ls",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_s_a0_osc_prediv>,
-					 <&clk_s_a0_pll 1>, /* PLL0 LS */
-					 <&clk_s_a0_pll 2>; /* PLL1 */
+				clocks = <&CLK_S_A0_OSC_PREDIV>,
+					 <&CLK_S_A0_PLL 1>, /* PLL0 LS */
+					 <&CLK_S_A0_PLL 2>; /* PLL1 */
 
-				clock-output-names = "clk-s-icn-reg-0",
-						     "clk-s-icn-if-0",
-						     "clk-s-icn-reg-lp-0",
-						     "clk-s-emiss",
-						     "clk-s-eth1-phy",
-						     "clk-s-mii-ref-out";
-						     /* Remaining outputs unused */
+				clock-output-names = "CLK_S_ICN_REG_0",
+						     "CLK_S_ICN_IF_0",
+						     "CLK_S_ICN_REG_LP_0",
+						     "CLK_S_EMISS",
+						     "CLK_S_ETH1_PHY",
+						     "CLK_S_MII_REF_OUT";
+						 /* Remaining outputs unused */
 			};
 		};
 
-		clockgen-a@fee81000 {
+		clockgenA@fee81000 {
 			reg = <0xfee81000 0xb48>;
 
-			clk_s_a1_pll: clk-s-a1-pll {
+			CLK_S_A1_PLL: CLK_S_A1_PLL {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-plls-c65";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-s-a1-pll0-hs",
-						     "clk-s-a1-pll0-ls",
-						     "clk-s-a1-pll1";
+				clock-output-names = "CLK_S_A1_PLL0_HS",
+						     "CLK_S_A1_PLL0_LS",
+						     "CLK_S_A1_PLL1";
 			};
 
-			clk_s_a1_osc_prediv: clk-s-a1-osc-prediv {
+			CLK_S_A1_OSC_PREDIV: CLK_S_A1_OSC_PREDIV {
 				#clock-cells = <0>;
 				compatible = "st,clkgena-prediv-c65",
 					     "st,clkgena-prediv";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-s-a1-osc-prediv";
+				clock-output-names = "CLK_S_A1_OSC_PREDIV";
 			};
 
-			clk_s_a1_hs: clk-s-a1-hs {
+			CLK_S_A1_HS: CLK_S_A1_HS {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c65-hs",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_s_a1_osc_prediv>,
-					 <&clk_s_a1_pll 0>, /* PLL0 HS */
-					 <&clk_s_a1_pll 2>; /* PLL1 */
+				clocks = <&CLK_S_A1_OSC_PREDIV>,
+					 <&CLK_S_A1_PLL 0>, /* PLL0 HS */
+					 <&CLK_S_A1_PLL 2>; /* PLL1 */
 
 				clock-output-names = "", /* Reserved */
 						     "", /* Reserved */
-						     "clk-s-stac-phy",
-						     "clk-s-vtac-tx-phy";
+						     "CLK_S_STAC_PHY",
+						     "CLK_S_VTAC_TX_PHY";
 			};
 
-			clk_s_a1_ls: clk-s-a1-ls {
+			CLK_S_A1_LS: CLK_S_A1_LS {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c65-ls",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_s_a1_osc_prediv>,
-					 <&clk_s_a1_pll 1>, /* PLL0 LS */
-					 <&clk_s_a1_pll 2>; /* PLL1 */
-
-				clock-output-names = "clk-s-icn-if-2",
-						     "clk-s-card-mmc-0",
-						     "clk-s-icn-if-1",
-						     "clk-s-gmac0-phy",
-						     "clk-s-nand-ctrl",
+				clocks = <&CLK_S_A1_OSC_PREDIV>,
+					 <&CLK_S_A1_PLL 1>, /* PLL0 LS */
+					 <&CLK_S_A1_PLL 2>; /* PLL1 */
+
+				clock-output-names = "CLK_S_ICN_IF_2",
+						     "CLK_S_CARD_MMC_0",
+						     "CLK_S_ICN_IF_1",
+						     "CLK_S_GMAC0_PHY",
+						     "CLK_S_NAND_CTRL",
 						     "", /* Reserved */
-						     "clk-s-mii0-ref-out",
-						     "clk-s-stac-sys",
-						     "clk-s-card-mmc-1";
-						     /* Remaining outputs unused */
+						     "CLK_S_MII0_REF_OUT",
+						     "CLK_S_STAC_SYS",
+						     "CLK_S_CARD_MMC_1";
+						 /* Remaining outputs unused */
 			};
 		};
 
 		/*
 		 * ClockGenAs on MPE42
 		 */
-		clockgen-a@fde12000 {
+		clockgenA@fde12000 {
 			reg = <0xfde12000 0xb50>;
 
-			clk_m_a0_pll0: clk-m-a0-pll0 {
+			CLK_M_A0_PLL0: CLK_M_A0_PLL0 {
 				#clock-cells = <1>;
 				compatible = "st,plls-c32-a1x-0", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-m-a0-pll0-phi0",
-						     "clk-m-a0-pll0-phi1",
-						     "clk-m-a0-pll0-phi2",
-						     "clk-m-a0-pll0-phi3";
+				clock-output-names = "CLK_M_A0_PLL0_PHI0",
+						     "CLK_M_A0_PLL0_PHI1",
+						     "CLK_M_A0_PLL0_PHI2",
+						     "CLK_M_A0_PLL0_PHI3";
 			};
 
-			clk_m_a0_pll1: clk-m-a0-pll1 {
+			CLK_M_A0_PLL1: CLK_M_A0_PLL1 {
 				#clock-cells = <1>;
 				compatible = "st,plls-c32-a1x-1", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-m-a0-pll1-phi0",
-						     "clk-m-a0-pll1-phi1",
-						     "clk-m-a0-pll1-phi2",
-						     "clk-m-a0-pll1-phi3";
+				clock-output-names = "CLK_M_A0_PLL1_PHI0",
+						     "CLK_M_A0_PLL1_PHI1",
+						     "CLK_M_A0_PLL1_PHI2",
+						     "CLK_M_A0_PLL1_PHI3";
 			};
 
-			clk_m_a0_osc_prediv: clk-m-a0-osc-prediv {
+			CLK_M_A0_OSC_PREDIV: CLK_M_A0_OSC_PREDIV {
 				#clock-cells = <0>;
 				compatible = "st,clkgena-prediv-c32",
 					     "st,clkgena-prediv";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-m-a0-osc-prediv";
+				clock-output-names = "CLK_M_A0_OSC_PREDIV";
 			};
 
-			clk_m_a0_div0: clk-m-a0-div0 {
+			CLK_M_A0_DIV0: CLK_M_A0_DIV0 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf0",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a0_osc_prediv>,
-					 <&clk_m_a0_pll0 0>, /* PLL0 PHI0 */
-					 <&clk_m_a0_pll1 0>; /* PLL1 PHI0 */
+				clocks = <&CLK_M_A0_OSC_PREDIV>,
+					 <&CLK_M_A0_PLL0 0>, /* PLL0 PHI0 */
+					 <&CLK_M_A0_PLL1 0>; /* PLL1 PHI0 */
 
 				clock-output-names = "", /* Unused */
 						     "", /* Unused */
-						     "clk-m-fdma-12",
+						     "CLK_M_FDMA_12",
 						     "", /* Unused */
-						     "clk-m-pp-dmu-0",
-						     "clk-m-pp-dmu-1",
-						     "clk-m-icm-lmi",
-						     "clk-m-vid-dmu-0";
+						     "CLK_M_PP_DMU_0",
+						     "CLK_M_PP_DMU_1",
+						     "CLK_M_ICM_LMI",
+						     "CLK_M_VID_DMU_0";
 			};
 
-			clk_m_a0_div1: clk-m-a0-div1 {
+			CLK_M_A0_DIV1: CLK_M_A0_DIV1 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf1",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a0_osc_prediv>,
-					 <&clk_m_a0_pll0 1>, /* PLL0 PHI1 */
-					 <&clk_m_a0_pll1 1>; /* PLL1 PHI1 */
+				clocks = <&CLK_M_A0_OSC_PREDIV>,
+					 <&CLK_M_A0_PLL0 1>, /* PLL0 PHI1 */
+					 <&CLK_M_A0_PLL1 1>; /* PLL1 PHI1 */
 
-				clock-output-names = "clk-m-vid-dmu-1",
+				clock-output-names = "CLK_M_VID_DMU_1",
 						     "", /* Unused */
-						     "clk-m-a9-ext2f",
-						     "clk-m-st40rt",
-						     "clk-m-st231-dmu-0",
-						     "clk-m-st231-dmu-1",
-						     "clk-m-st231-aud",
-						     "clk-m-st231-gp-0";
+						     "CLK_M_A9_EXT2F",
+						     "CLK_M_ST40RT",
+						     "CLK_M_ST231_DMU_0",
+						     "CLK_M_ST231_DMU_1",
+						     "CLK_M_ST231_AUD",
+						     "CLK_M_ST231_GP_0";
 			};
 
-			clk_m_a0_div2: clk-m-a0-div2 {
+			CLK_M_A0_DIV2: CLK_M_A0_DIV2 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf2",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a0_osc_prediv>,
-					 <&clk_m_a0_pll0 2>, /* PLL0 PHI2 */
-					 <&clk_m_a0_pll1 2>; /* PLL1 PHI2 */
-
-				clock-output-names = "clk-m-st231-gp-1",
-						     "clk-m-icn-cpu",
-						     "clk-m-icn-stac",
-						     "clk-m-tx-icn-dmu-0",
-						     "clk-m-tx-icn-dmu-1",
-						     "clk-m-tx-icn-ts",
-						     "clk-m-icn-vdp-0",
-						     "clk-m-icn-vdp-1";
+				clocks = <&CLK_M_A0_OSC_PREDIV>,
+					 <&CLK_M_A0_PLL0 2>, /* PLL0 PHI2 */
+					 <&CLK_M_A0_PLL1 2>; /* PLL1 PHI2 */
+
+				clock-output-names = "CLK_M_ST231_GP_1",
+						     "CLK_M_ICN_CPU",
+						     "CLK_M_ICN_STAC",
+						     "CLK_M_TX_ICN_DMU_0",
+						     "CLK_M_TX_ICN_DMU_1",
+						     "CLK_M_TX_ICN_TS",
+						     "CLK_M_ICN_VDP_0",
+						     "CLK_M_ICN_VDP_1";
 			};
 
-			clk_m_a0_div3: clk-m-a0-div3 {
+			CLK_M_A0_DIV3: CLK_M_A0_DIV3 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf3",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a0_osc_prediv>,
-					 <&clk_m_a0_pll0 3>, /* PLL0 PHI3 */
-					 <&clk_m_a0_pll1 3>; /* PLL1 PHI3 */
+				clocks = <&CLK_M_A0_OSC_PREDIV>,
+					 <&CLK_M_A0_PLL0 3>, /* PLL0 PHI3 */
+					 <&CLK_M_A0_PLL1 3>; /* PLL1 PHI3 */
 
 				clock-output-names = "", /* Unused */
 						     "", /* Unused */
 						     "", /* Unused */
 						     "", /* Unused */
-						     "clk-m-icn-vp8",
+						     "CLK_M_ICN_VP8",
 						     "", /* Unused */
-						     "clk-m-icn-reg-11",
-						     "clk-m-a9-trace";
+						     "CLK_M_ICN_REG_11",
+						     "CLK_M_A9_TRACE";
 			};
 		};
 
-		clockgen-a@fd6db000 {
+		clockgenA@fd6db000 {
 			reg = <0xfd6db000 0xb50>;
 
-			clk_m_a1_pll0: clk-m-a1-pll0 {
+			CLK_M_A1_PLL0: CLK_M_A1_PLL0 {
 				#clock-cells = <1>;
 				compatible = "st,plls-c32-a1x-0", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-m-a1-pll0-phi0",
-						     "clk-m-a1-pll0-phi1",
-						     "clk-m-a1-pll0-phi2",
-						     "clk-m-a1-pll0-phi3";
+				clock-output-names = "CLK_M_A1_PLL0_PHI0",
+						     "CLK_M_A1_PLL0_PHI1",
+						     "CLK_M_A1_PLL0_PHI2",
+						     "CLK_M_A1_PLL0_PHI3";
 			};
 
-			clk_m_a1_pll1: clk-m-a1-pll1 {
+			CLK_M_A1_PLL1: CLK_M_A1_PLL1 {
 				#clock-cells = <1>;
 				compatible = "st,plls-c32-a1x-1", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-m-a1-pll1-phi0",
-						     "clk-m-a1-pll1-phi1",
-						     "clk-m-a1-pll1-phi2",
-						     "clk-m-a1-pll1-phi3";
+				clock-output-names = "CLK_M_A1_PLL1_PHI0",
+						     "CLK_M_A1_PLL1_PHI1",
+						     "CLK_M_A1_PLL1_PHI2",
+						     "CLK_M_A1_PLL1_PHI3";
 			};
 
-			clk_m_a1_osc_prediv: clk-m-a1-osc-prediv {
+			CLK_M_A1_OSC_PREDIV: CLK_M_A1_OSC_PREDIV {
 				#clock-cells = <0>;
 				compatible = "st,clkgena-prediv-c32",
 					     "st,clkgena-prediv";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-m-a1-osc-prediv";
+				clock-output-names = "CLK_M_A1_OSC_PREDIV";
 			};
 
-			clk_m_a1_div0: clk-m-a1-div0 {
+			CLK_M_A1_DIV0: CLK_M_A1_DIV0 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf0",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a1_osc_prediv>,
-					 <&clk_m_a1_pll0 0>, /* PLL0 PHI0 */
-					 <&clk_m_a1_pll1 0>; /* PLL1 PHI0 */
+				clocks = <&CLK_M_A1_OSC_PREDIV>,
+					 <&CLK_M_A1_PLL0 0>, /* PLL0 PHI0 */
+					 <&CLK_M_A1_PLL1 0>; /* PLL1 PHI0 */
 
 				clock-output-names = "", /* Unused */
-						     "clk-m-fdma-10",
-						     "clk-m-fdma-11",
-						     "clk-m-hva-alt",
-						     "clk-m-proc-sc",
-						     "clk-m-tp",
-						     "clk-m-rx-icn-dmu-0",
-						     "clk-m-rx-icn-dmu-1";
+						     "CLK_M_FDMA_10",
+						     "CLK_M_FDMA_11",
+						     "CLK_M_HVA_ALT",
+						     "CLK_M_PROC_SC",
+						     "CLK_M_TP",
+						     "CLK_M_RX_ICN_DMU_0",
+						     "CLK_M_RX_ICN_DMU_1";
 			};
 
-			clk_m_a1_div1: clk-m-a1-div1 {
+			CLK_M_A1_DIV1: CLK_M_A1_DIV1 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf1",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a1_osc_prediv>,
-					 <&clk_m_a1_pll0 1>, /* PLL0 PHI1 */
-					 <&clk_m_a1_pll1 1>; /* PLL1 PHI1 */
+				clocks = <&CLK_M_A1_OSC_PREDIV>,
+					 <&CLK_M_A1_PLL0 1>, /* PLL0 PHI1 */
+					 <&CLK_M_A1_PLL1 1>; /* PLL1 PHI1 */
 
-				clock-output-names = "clk-m-rx-icn-ts",
-						     "clk-m-rx-icn-vdp-0",
+				clock-output-names = "CLK_M_RX_ICN_TS",
+						     "CLK_M_RX_ICN_VDP_0",
 						     "", /* Unused */
-						     "clk-m-prv-t1-bus",
-						     "clk-m-icn-reg-12",
-						     "clk-m-icn-reg-10",
+						     "CLK_M_PRV_T1_BUS",
+						     "CLK_M_ICN_REG_12",
+						     "CLK_M_ICN_REG_10",
 						     "", /* Unused */
-						     "clk-m-icn-st231";
+						     "CLK_M_ICN_ST231";
 			};
 
-			clk_m_a1_div2: clk-m-a1-div2 {
+			CLK_M_A1_DIV2: CLK_M_A1_DIV2 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf2",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a1_osc_prediv>,
-					 <&clk_m_a1_pll0 2>, /* PLL0 PHI2 */
-					 <&clk_m_a1_pll1 2>; /* PLL1 PHI2 */
+				clocks = <&CLK_M_A1_OSC_PREDIV>,
+					 <&CLK_M_A1_PLL0 2>, /* PLL0 PHI2 */
+					 <&CLK_M_A1_PLL1 2>; /* PLL1 PHI2 */
 
-				clock-output-names = "clk-m-fvdp-proc-alt",
-						     "clk-m-icn-reg-13",
-						     "clk-m-tx-icn-gpu",
-						     "clk-m-rx-icn-gpu",
+				clock-output-names = "CLK_M_FVDP_PROC_ALT",
+						     "CLK_M_ICN_REG_13",
+						     "CLK_M_TX_ICN_GPU",
+						     "CLK_M_RX_ICN_GPU",
 						     "", /* Unused */
 						     "", /* Unused */
-						     "", /* clk-m-apb-pm-12 */
+						     "", /* CLK_M_APB_PM_12 */
 						     ""; /* Unused */
 			};
 
-			clk_m_a1_div3: clk-m-a1-div3 {
+			CLK_M_A1_DIV3: CLK_M_A1_DIV3 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf3",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a1_osc_prediv>,
-					 <&clk_m_a1_pll0 3>, /* PLL0 PHI3 */
-					 <&clk_m_a1_pll1 3>; /* PLL1 PHI3 */
+				clocks = <&CLK_M_A1_OSC_PREDIV>,
+					 <&CLK_M_A1_PLL0 3>, /* PLL0 PHI3 */
+					 <&CLK_M_A1_PLL1 3>; /* PLL1 PHI3 */
 
 				clock-output-names = "", /* Unused */
 						     "", /* Unused */
@@ -373,383 +373,364 @@
 						     "", /* Unused */
 						     "", /* Unused */
 						     "", /* Unused */
-						     ""; /* clk-m-gpu-alt */
+						     ""; /* CLK_M_GPU_ALT */
 			};
 		};
 
-		clk_m_a9_ext2f_div2: clk-m-a9-ext2f-div2 {
+		CLK_M_A9_EXT2F_DIV2: CLK_M_A9_EXT2F_DIV2S {
 			#clock-cells = <0>;
 			compatible = "fixed-factor-clock";
-			clocks = <&clk_m_a0_div1 2>;
+			clocks = <&CLK_M_A0_DIV1 2>;
 			clock-div = <2>;
 			clock-mult = <1>;
 		};
 
-		clockgen-a@fd345000 {
+		clockgenA@fd345000 {
 			reg = <0xfd345000 0xb50>;
 
-			clk_m_a2_pll0: clk-m-a2-pll0 {
+			CLK_M_A2_PLL0: CLK_M_A2_PLL0 {
 				#clock-cells = <1>;
 				compatible = "st,plls-c32-a1x-0", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-m-a2-pll0-phi0",
-						     "clk-m-a2-pll0-phi1",
-						     "clk-m-a2-pll0-phi2",
-						     "clk-m-a2-pll0-phi3";
+				clock-output-names = "CLK_M_A2_PLL0_PHI0",
+						     "CLK_M_A2_PLL0_PHI1",
+						     "CLK_M_A2_PLL0_PHI2",
+						     "CLK_M_A2_PLL0_PHI3";
 			};
 
-			clk_m_a2_pll1: clk-m-a2-pll1 {
+			CLK_M_A2_PLL1: CLK_M_A2_PLL1 {
 				#clock-cells = <1>;
 				compatible = "st,plls-c32-a1x-1", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-m-a2-pll1-phi0",
-						     "clk-m-a2-pll1-phi1",
-						     "clk-m-a2-pll1-phi2",
-						     "clk-m-a2-pll1-phi3";
+				clock-output-names = "CLK_M_A2_PLL1_PHI0",
+						     "CLK_M_A2_PLL1_PHI1",
+						     "CLK_M_A2_PLL1_PHI2",
+						     "CLK_M_A2_PLL1_PHI3";
 			};
 
-			clk_m_a2_osc_prediv: clk-m-a2-osc-prediv {
+			CLK_M_A2_OSC_PREDIV: CLK_M_A2_OSC_PREDIV {
 				#clock-cells = <0>;
 				compatible = "st,clkgena-prediv-c32",
 					     "st,clkgena-prediv";
 
-				clocks = <&clk_sysin>;
+				clocks = <&CLK_SYSIN>;
 
-				clock-output-names = "clk-m-a2-osc-prediv";
+				clock-output-names = "CLK_M_A2_OSC_PREDIV";
 			};
 
-			clk_m_a2_div0: clk-m-a2-div0 {
+			CLK_M_A2_DIV0: CLK_M_A2_DIV0 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf0",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a2_osc_prediv>,
-					 <&clk_m_a2_pll0 0>, /* PLL0 PHI0 */
-					 <&clk_m_a2_pll1 0>; /* PLL1 PHI0 */
-
-				clock-output-names = "clk-m-vtac-main-phy",
-						     "clk-m-vtac-aux-phy",
-						     "clk-m-stac-phy",
-						     "clk-m-stac-sys",
-						     "", /* clk-m-mpestac-pg */
-						     "", /* clk-m-mpestac-wc */
-						     "", /* clk-m-mpevtacaux-pg*/
-						     ""; /* clk-m-mpevtacmain-pg*/
+				clocks = <&CLK_M_A2_OSC_PREDIV>,
+					 <&CLK_M_A2_PLL0 0>, /* PLL0 PHI0 */
+					 <&CLK_M_A2_PLL1 0>; /* PLL1 PHI0 */
+
+				clock-output-names = "CLK_M_VTAC_MAIN_PHY",
+						     "CLK_M_VTAC_AUX_PHY",
+						     "CLK_M_STAC_PHY",
+						     "CLK_M_STAC_SYS",
+						     "", /* CLK_M_MPESTAC_PG */
+						     "", /* CLK_M_MPESTAC_WC */
+						     "", /* CLK_M_MPEVTACAUX_PG*/
+						     ""; /* CLK_M_MPEVTACMAIN_PG*/
 			};
 
-			clk_m_a2_div1: clk-m-a2-div1 {
+			CLK_M_A2_DIV1: CLK_M_A2_DIV1 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf1",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a2_osc_prediv>,
-					 <&clk_m_a2_pll0 1>, /* PLL0 PHI1 */
-					 <&clk_m_a2_pll1 1>; /* PLL1 PHI1 */
-
-				clock-output-names = "", /* clk-m-mpevtacrx0-wc */
-						     "", /* clk-m-mpevtacrx1-wc */
-						     "clk-m-compo-main",
-						     "clk-m-compo-aux",
-						     "clk-m-bdisp-0",
-						     "clk-m-bdisp-1",
-						     "clk-m-icn-bdisp",
-						     "clk-m-icn-compo";
+				clocks = <&CLK_M_A2_OSC_PREDIV>,
+					 <&CLK_M_A2_PLL0 1>, /* PLL0 PHI1 */
+					 <&CLK_M_A2_PLL1 1>; /* PLL1 PHI1 */
+
+				clock-output-names = "", /* CLK_M_MPEVTACRX0_WC */
+						     "", /* CLK_M_MPEVTACRX1_WC */
+						     "CLK_M_COMPO_MAIN",
+						     "CLK_M_COMPO_AUX",
+						     "CLK_M_BDISP_0",
+						     "CLK_M_BDISP_1",
+						     "CLK_M_ICN_BDISP",
+						     "CLK_M_ICN_COMPO";
 			};
 
-			clk_m_a2_div2: clk-m-a2-div2 {
+			CLK_M_A2_DIV2: CLK_M_A2_DIV2 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf2",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a2_osc_prediv>,
-					 <&clk_m_a2_pll0 2>, /* PLL0 PHI2 */
-					 <&clk_m_a2_pll1 2>; /* PLL1 PHI2 */
+				clocks = <&CLK_M_A2_OSC_PREDIV>,
+					 <&CLK_M_A2_PLL0 2>, /* PLL0 PHI2 */
+					 <&CLK_M_A2_PLL1 2>; /* PLL1 PHI2 */
 
-				clock-output-names = "clk-m-icn-vdp-2",
+				clock-output-names = "CLK_M_ICN_VDP_2",
 						     "", /* Unused */
-						     "clk-m-icn-reg-14",
-						     "clk-m-mdtp",
-						     "clk-m-jpegdec",
+						     "CLK_M_ICN_REG_14",
+						     "CLK_M_MDTP",
+						     "CLK_M_JPEGDEC",
 						     "", /* Unused */
-						     "clk-m-dcephy-impctrl",
+						     "CLK_M_DCEPHY_IMPCTRL",
 						     ""; /* Unused */
 			};
 
-			clk_m_a2_div3: clk-m-a2-div3 {
+			CLK_M_A2_DIV3: CLK_M_A2_DIV3 {
 				#clock-cells = <1>;
 				compatible = "st,clkgena-divmux-c32-odf3",
 					     "st,clkgena-divmux";
 
-				clocks = <&clk_m_a2_osc_prediv>,
-					 <&clk_m_a2_pll0 3>, /* PLL0 PHI3 */
-					 <&clk_m_a2_pll1 3>; /* PLL1 PHI3 */
+				clocks = <&CLK_M_A2_OSC_PREDIV>,
+					 <&CLK_M_A2_PLL0 3>, /* PLL0 PHI3 */
+					 <&CLK_M_A2_PLL1 3>; /* PLL1 PHI3 */
 
 				clock-output-names = "", /* Unused */
-						     ""; /* clk-m-apb-pm-11 */
-						     /* Remaining outputs unused */
+						     ""; /* CLK_M_APB_PM_11 */
+						/* Remaining outputs unused */
 			};
 		};
 
 		/*
-		 * A9 PLL
+		 * A9 PLL.
+		 *
 		 */
-		clockgen-a9@fdde08b0 {
+		clockgenA9 {
 			reg = <0xfdde08b0 0x70>;
 
-			clockgen_a9_pll: clockgen-a9-pll {
+			CLOCKGEN_A9_PLL: CLOCKGEN_A9_PLL {
 				#clock-cells = <1>;
 				compatible = "st,stih416-plls-c32-a9", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
-				clock-output-names = "clockgen-a9-pll-odf";
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLOCKGEN_A9_PLL_ODF";
 			};
 		};
 
 		/*
-		 * ARM CPU related clocks
+		 * ARM CPU related clocks.
 		 */
-		clk_m_a9: clk-m-a9@fdde08ac {
+		CLK_M_A9: CLK_M_A9 {
 			#clock-cells = <0>;
 			compatible = "st,stih416-clkgen-a9-mux", "st,clkgen-mux";
 			reg = <0xfdde08ac 0x4>;
-			clocks = <&clockgen_a9_pll 0>,
-				 <&clockgen_a9_pll 0>,
-				 <&clk_m_a0_div1 2>,
-				 <&clk_m_a9_ext2f_div2>;
+			clocks = <&CLOCKGEN_A9_PLL 0>, <&CLOCKGEN_A9_PLL 0>, <&CLK_M_A0_DIV1 2>, <&CLK_M_A9_EXT2F_DIV2>;
 		};
 
 		/*
 		 * ARM Peripheral clock for timers
 		 */
-		arm_periph_clk: clk-m-a9-periphs {
+		arm_periph_clk: CLK_M_A9_PERIPHS {
 			#clock-cells = <0>;
 			compatible = "fixed-factor-clock";
-			clocks = <&clk_m_a9>;
+			clocks = <&CLK_M_A9>;
 			clock-div = <2>;
 			clock-mult = <1>;
 		};
 
-		/*
-		 * Frequency synthesizers on the SASG2
-		 */
-		clockgen_b0: clockgen-b0@fee108b4 {
-			#clock-cells = <1>;
-			compatible = "st,stih416-quadfs216", "st,quadfs";
-			reg = <0xfee108b4 0x44>;
-
-			clocks = <&clk_sysin>;
-			clock-output-names = "clk-s-usb48",
-					     "clk-s-dss",
-					     "clk-s-stfe-frc-2",
-					     "clk-s-thsens-scard";
-		};
-
-		clockgen_b1: clockgen-b1@fe8308c4 {
-			#clock-cells = <1>;
-			compatible = "st,stih416-quadfs216", "st,quadfs";
-			reg = <0xfe8308c4 0x44>;
-
-			clocks = <&clk_sysin>;
-			clock-output-names = "clk-s-pcm-0",
-					     "clk-s-pcm-1",
-					     "clk-s-pcm-2",
-					     "clk-s-pcm-3";
-		};
-
-		clockgen_c: clockgen-c@fe8307d0 {
-			#clock-cells = <1>;
-			compatible = "st,stih416-quadfs432", "st,quadfs";
-			reg = <0xfe8307d0 0x44>;
-
-			clocks = <&clk_sysin>;
-			clock-output-names = "clk-s-c-fs0-ch0",
-					     "clk-s-c-vcc-sd",
-					     "clk-s-c-fs0-ch2";
-		};
-
-		clk_s_vcc_hd: clk-s-vcc-hd@fe8308b8 {
-			#clock-cells = <0>;
-			compatible = "st,stih416-clkgenc-vcc-hd", "st,clkgen-mux";
-			reg = <0xfe8308b8 0x4>; /* SYSCFG2558 */
-
-			clocks = <&clk_sysin>,
-				 <&clockgen_c 0>;
-		};
-
-		/*
-		 * Add a dummy clock for the HDMI PHY for the VCC input mux
-		 */
-		clk_s_tmds_fromphy: clk-s-tmds-fromphy {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <0>;
-		};
-
-		clockgen_c_vcc: clockgen-c-vcc@fe8308ac {
-			#clock-cells = <1>;
-			compatible = "st,stih416-clkgenc", "st,clkgen-vcc";
-			reg = <0xfe8308ac 0xc>; /* SYSCFG2555,2556,2557 */
-
-			clocks = <&clk_s_vcc_hd>,
-				 <&clockgen_c 1>,
-				 <&clk_s_tmds_fromphy>,
-				 <&clockgen_c 2>;
-
-			clock-output-names  = "clk-s-pix-hdmi",
-					      "clk-s-pix-dvo",
-					      "clk-s-out-dvo",
-					      "clk-s-pix-hd",
-					      "clk-s-hddac",
-					      "clk-s-denc",
-					      "clk-s-sddac",
-					      "clk-s-pix-main",
-					      "clk-s-pix-aux",
-					      "clk-s-stfe-frc-0",
-					      "clk-s-ref-mcru",
-					      "clk-s-slave-mcru",
-					      "clk-s-tmds-hdmi",
-					      "clk-s-hdmi-reject-pll",
-					      "clk-s-thsens";
-		};
-
-		clockgen_d: clockgen-d@fee107e0 {
-			#clock-cells = <1>;
-			compatible = "st,stih416-quadfs216", "st,quadfs";
-			reg = <0xfee107e0 0x44>;
-
-			clocks = <&clk_sysin>;
-			clock-output-names = "clk-s-ccsc",
-					     "clk-s-stfe-frc-1",
-					     "clk-s-tsout-1",
-					     "clk-s-mchi";
-		};
+                /*
+                 * Frequency synthesizers on the SASG2.
+                 *
+                 */
+                CLOCKGEN_B0: CLOCKGEN_B0 {
+                        #clock-cells = <1>;
+                        compatible = "st,stih416-quadfs216", "st,quadfs";
+                        reg = <0xfee108b4 0x44>;
+
+                        clocks = <&CLK_SYSIN>;
+                        clock-output-names = "CLK_S_USB48",
+                                             "CLK_S_DSS",
+                                             "CLK_S_STFE_FRC_2",
+                                             "CLK_S_THSENS_SCARD";
+                };
+
+                CLOCKGEN_B1: CLOCKGEN_B1 {
+                        #clock-cells = <1>;
+                        compatible = "st,stih416-quadfs216", "st,quadfs";
+                        reg = <0xfe8308c4 0x44>;
+
+                        clocks = <&CLK_SYSIN>;
+                        clock-output-names = "CLK_S_PCM_0",
+                                             "CLK_S_PCM_1",
+                                             "CLK_S_PCM_2",
+                                             "CLK_S_PCM_3";
+                };
+
+                CLOCKGEN_C: CLOCKGEN_C {
+                        #clock-cells = <1>;
+                        compatible = "st,stih416-quadfs432", "st,quadfs";
+                        reg = <0xfe8307d0 0x44>;
+
+                        clocks = <&CLK_SYSIN>;
+                        clock-output-names = "CLK_S_C_FS0_CH0",
+                                             "CLK_S_C_VCC_SD",
+                                             "CLK_S_C_FS0_CH2";
+                };
+
+                CLK_S_VCC_HD: CLK_S_VCC_HD {
+                        #clock-cells = <0>;
+                        compatible = "st,stih416-clkgenc-vcc-hd", "st,clkgen-mux";
+                        reg = <0xfe8308b8 4>; /* SYSCFG2558 */
+
+                        clocks = <&CLK_SYSIN>, <&CLOCKGEN_C 0>;
+                };
+
+                /*
+                 * Add a dummy clock for the HDMI PHY for the VCC input mux
+                 */
+                CLK_S_TMDS_FROMPHY: CLK_S_TMDS_FROMPHY {
+                        #clock-cells = <0>;
+                        compatible = "fixed-clock";
+                        clock-frequency = <0>;
+                };
+
+                CLOCKGEN_C_VCC: CLOCKGEN_C_VCC {
+                        #clock-cells = <1>;
+                        compatible = "st,stih41x-clkgenc", "st,clkgen-vcc";
+                        reg = <0xfe8308ac 12>; /* SYSCFG2555,2556,2557 */
+
+                        clocks = <&CLK_S_VCC_HD>, <&CLOCKGEN_C 1>,
+                                 <&CLK_S_TMDS_FROMPHY>, <&CLOCKGEN_C 2>;
+
+                        clock-output-names  =
+                                "CLK_S_PIX_HDMI",  "CLK_S_PIX_DVO",
+                                "CLK_S_OUT_DVO",   "CLK_S_PIX_HD",
+                                "CLK_S_HDDAC",     "CLK_S_DENC",
+                                "CLK_S_SDDAC",     "CLK_S_PIX_MAIN",
+                                "CLK_S_PIX_AUX",   "CLK_S_STFE_FRC_0",
+                                "CLK_S_REF_MCRU",  "CLK_S_SLAVE_MCRU",
+                                "CLK_S_TMDS_HDMI", "CLK_S_HDMI_REJECT_PLL",
+                                "CLK_S_THSENS";
+                };
+
+                CLOCKGEN_D: CLOCKGEN_D {
+                        #clock-cells = <1>;
+                        compatible = "st,stih416-quadfs216", "st,quadfs";
+                        reg = <0xfee107e0 0x44>;
+
+                        clocks = <&CLK_SYSIN>;
+                        clock-output-names = "CLK_S_CCSC",
+                                             "CLK_S_STFE_FRC_1",
+                                             "CLK_S_TSOUT_1",
+                                             "CLK_S_MCHI";
+                };
 
 		/*
 		 * Frequency synthesizers on the MPE42
 		 */
-		clockgen_e: clockgen-e@fd3208bc {
-			#clock-cells = <1>;
-			compatible = "st,stih416-quadfs660-E", "st,quadfs";
-			reg = <0xfd3208bc 0xb0>;
-
-			clocks = <&clk_sysin>;
-			clock-output-names = "clk-m-pix-mdtp-0",
-					     "clk-m-pix-mdtp-1",
-					     "clk-m-pix-mdtp-2",
-					     "clk-m-mpelpc";
-		};
-
-		clockgen_f: clockgen-f@fd320878 {
-			#clock-cells = <1>;
-			compatible = "st,stih416-quadfs660-F", "st,quadfs";
-			reg = <0xfd320878 0xf0>;
-
-			clocks = <&clk_sysin>;
-			clock-output-names = "clk-m-main-vidfs",
-					     "clk-m-hva-fs",
-					     "clk-m-fvdp-vcpu",
-					     "clk-m-fvdp-proc-fs";
-		};
-
-		clk_m_fvdp_proc: clk-m-fvdp-proc@fd320910 {
-			#clock-cells = <0>;
-			compatible = "st,stih416-clkgenf-vcc-fvdp", "st,clkgen-mux";
-			reg = <0xfd320910 0x4>; /* SYSCFG8580 */
-
-			clocks = <&clk_m_a1_div2 0>,
-				 <&clockgen_f 3>;
-		};
-
-		clk_m_hva: clk-m-hva@fd690868 {
-			#clock-cells = <0>;
-			compatible = "st,stih416-clkgenf-vcc-hva", "st,clkgen-mux";
-			reg = <0xfd690868 0x4>; /* SYSCFG9538 */
-
-			clocks = <&clockgen_f 1>,
-				 <&clk_m_a1_div0 3>;
-		};
-
-		clk_m_f_vcc_hd: clk-m-f-vcc-hd@fd32086c {
-			#clock-cells = <0>;
-			compatible = "st,stih416-clkgenf-vcc-hd", "st,clkgen-mux";
-			reg = <0xfd32086c 0x4>; /* SYSCFG8539 */
-
-			clocks = <&clockgen_c_vcc 7>,
-				 <&clockgen_f 0>;
-		};
-
-		clk_m_f_vcc_sd: clk-m-f-vcc-sd@fd32086c {
-			#clock-cells = <0>;
-			compatible = "st,stih416-clkgenf-vcc-sd", "st,clkgen-mux";
-			reg = <0xfd32086c 0x4>; /* SYSCFG8539 */
-
-			clocks = <&clockgen_c_vcc 8>,
-				 <&clockgen_f 1>;
-		};
-
-		/*
-		 * Add a dummy clock for the HDMIRx external signal clock
-		 */
-		clk_m_pix_hdmirx_sas: clk-m-pix-hdmirx-sas {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <0>;
-		};
-
-		clockgen_f_vcc: clockgen-f-vcc@fd32086c {
-			#clock-cells = <1>;
-			compatible = "st,stih416-clkgenf", "st,clkgen-vcc";
-			reg = <0xfd32086c 0xc>; /* SYSCFG8539,8540,8541 */
-
-			clocks = <&clk_m_f_vcc_hd>,
-				 <&clk_m_f_vcc_sd>,
-				 <&clockgen_f 0>,
-				 <&clk_m_pix_hdmirx_sas>;
-
-			clock-output-names  = "clk-m-pix-main-pipe",
-					      "clk-m-pix-aux-pipe",
-					      "clk-m-pix-main-cru",
-					      "clk-m-pix-aux-cru",
-					      "clk-m-xfer-be-compo",
-					      "clk-m-xfer-pip-compo",
-					      "clk-m-xfer-aux-compo",
-					      "clk-m-vsens",
-					      "clk-m-pix-hdmirx-0",
-					      "clk-m-pix-hdmirx-1";
-		};
+                CLOCKGEN_E: CLOCKGEN_E {
+                        #clock-cells = <1>;
+                        compatible = "st,stih416-quadfs660-E", "st,quadfs";
+                        reg = <0xfd3208bc 0xB0>;
+
+                        clocks = <&CLK_SYSIN>;
+                        clock-output-names = "CLK_M_PIX_MDTP_0",
+                                             "CLK_M_PIX_MDTP_1",
+                                             "CLK_M_PIX_MDTP_2",
+                                             "CLK_M_MPELPC";
+                };
+
+                CLOCKGEN_F: CLOCKGEN_F {
+                        #clock-cells = <1>;
+                        compatible = "st,stih416-quadfs660-F", "st,quadfs";
+                        reg = <0xfd320878 0xF0>;
+
+                        clocks = <&CLK_SYSIN>;
+                        clock-output-names = "CLK_M_MAIN_VIDFS",
+                                             "CLK_M_HVA_FS",
+                                             "CLK_M_FVDP_VCPU",
+					     "CLK_M_FVDP_PROC_FS";
+                };
+
+                CLK_M_FVDP_PROC: CLK_M_FVDP_PROC {
+                        #clock-cells = <0>;
+                        compatible = "st,stih416-clkgenf-vcc-fvdp", "st,clkgen-mux";
+                        reg = <0xfd320910 4>; /* SYSCFG8580 */
+
+                        clocks = <&CLK_M_A1_DIV2 0>, <&CLOCKGEN_F 3>;
+                };
+
+                CLK_M_HVA: CLK_M_HVA {
+                        #clock-cells = <0>;
+                        compatible = "st,stih416-clkgenf-vcc-hva", "st,clkgen-mux";
+                        reg = <0xfd690868 4>; /* SYSCFG9538 */
+
+                        clocks = <&CLOCKGEN_F 1>, <&CLK_M_A1_DIV0 3>;
+                };
+
+                CLK_M_F_VCC_HD: CLK_M_F_VCC_HD {
+                        #clock-cells = <0>;
+                        compatible = "st,stih416-clkgenf-vcc-hd", "st,clkgen-mux";
+                        reg = <0xfd32086c 4>; /* SYSCFG8539 */
+
+                        clocks = <&CLOCKGEN_C_VCC 7>, <&CLOCKGEN_F 0>;
+                };
+
+                CLK_M_F_VCC_SD: CLK_M_F_VCC_SD {
+                        #clock-cells = <0>;
+                        compatible = "st,stih416-clkgenf-vcc-sd", "st,clkgen-mux";
+                        reg = <0xfd32086c 4>; /* SYSCFG8539 */
+
+                        clocks = <&CLOCKGEN_C_VCC 8>, <&CLOCKGEN_F 1>;
+                };
+
+                /*
+                 * Add a dummy clock for the HDMIRx external signal clock
+                 */
+                CLK_M_PIX_HDMIRX_SAS: CLK_M_PIX_HDMIRX_SAS {
+                        #clock-cells = <0>;
+                        compatible = "fixed-clock";
+                        clock-frequency = <0>;
+                };
+
+                CLOCKGEN_F_VCC: CLOCKGEN_F_VCC {
+                        #clock-cells = <1>;
+                        compatible = "st,stih416-clkgenf", "st,clkgen-vcc";
+                        reg = <0xfd32086c 12>; /* SYSCFG8539,8540,8541 */
+
+                        clocks = <&CLK_M_F_VCC_HD>, <&CLK_M_F_VCC_SD>,
+                                 <&CLOCKGEN_F 0>, <&CLK_M_PIX_HDMIRX_SAS>;
+
+                        clock-output-names  =
+                                "CLK_M_PIX_MAIN_PIPE",  "CLK_M_PIX_AUX_PIPE",
+                                "CLK_M_PIX_MAIN_CRU",   "CLK_M_PIX_AUX_CRU",
+                                "CLK_M_XFER_BE_COMPO",  "CLK_M_XFER_PIP_COMPO",
+                                "CLK_M_XFER_AUX_COMPO", "CLK_M_VSENS",
+                                "CLK_M_PIX_HDMIRX_0",   "CLK_M_PIX_HDMIRX_1";
+                };
 
 		/*
-		 * DDR PLL
+		 * DDR PLL.
+		 *
 		 */
-		clockgen-ddr@0xfdde07d8 {
+		clockgenDDR {
 			reg = <0xfdde07d8 0x110>;
 
-			clockgen_ddr_pll: clockgen-ddr-pll {
+			CLOCKGEN_DDR_PLL: CLOCKGEN_DDR_PLL {
 				#clock-cells = <1>;
 				compatible = "st,stih416-plls-c32-ddr", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
-				clock-output-names = "clockgen-ddr0",
-						     "clockgen-ddr1";
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLOCKGEN_DDR0", "CLOCKGEN_DDR1";
 			};
 		};
 
 		/*
-		 * GPU PLL
+		 * GPU PLL.
+		 *
 		 */
-		clockgen-gpu@fd68ff00 {
+		clockgenGPU {
 			reg = <0xfd68ff00 0x910>;
 
-			clockgen_gpu_pll: clockgen-gpu-pll {
+			CLOCKGEN_GPU_PLL: CLOCKGEN_GPU_PLL {
 				#clock-cells = <1>;
-				compatible = "st,stih416-gpu-pll-c32", "st,clkgengpu-pll-c32";
+				compatible = "st,stih416-gpu-pll-c32", "st,clkgen-pll";
 
-				clocks = <&clk_sysin>;
-				clock-output-names = "clockgen-gpu-pll";
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLOCKGEN_GPU_PLL";
 			};
 		};
 	};
diff -urNp a/arch/arm/boot/dts/stih416-pinctrl.dtsi b/arch/arm/boot/dts/stih416-pinctrl.dtsi
--- a/arch/arm/boot/dts/stih416-pinctrl.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih416-pinctrl.dtsi	2019-09-26 21:23:27.164619200 +0100
@@ -7,117 +7,116 @@
  * it under the terms of the GNU General Public License version 2 as
  * publishhed by the Free Software Foundation.
  */
-#include "st-pincfg.h"
-#include <dt-bindings/interrupt-controller/arm-gic.h>
+#include <dt-bindings/pinctrl/st-pincfg.h>
 / {
 
 	aliases {
-		gpio0	= &pio0;
-		gpio1	= &pio1;
-		gpio2	= &pio2;
-		gpio3	= &pio3;
-		gpio4	= &pio4;
-		gpio5	= &pio40;
-		gpio6	= &pio5;
-		gpio7	= &pio6;
-		gpio8	= &pio7;
-		gpio9	= &pio8;
-		gpio10	= &pio9;
-		gpio11	= &pio10;
-		gpio12	= &pio11;
-		gpio13	= &pio12;
-		gpio14	= &pio30;
-		gpio15	= &pio31;
-		gpio16	= &pio13;
-		gpio17	= &pio14;
-		gpio18	= &pio15;
-		gpio19	= &pio16;
-		gpio20	= &pio17;
-		gpio21	= &pio18;
-		gpio22	= &pio100;
-		gpio23	= &pio101;
-		gpio24	= &pio102;
-		gpio25	= &pio103;
-		gpio26	= &pio104;
-		gpio27	= &pio105;
-		gpio28	= &pio106;
-		gpio29	= &pio107;
+		gpio0 = &PIO0;
+		gpio1 = &PIO1;
+		gpio2 = &PIO2;
+		gpio3 = &PIO3;
+		gpio4 = &PIO4;
+		gpio5 = &PIO40;
+		gpio6 = &PIO5;
+		gpio7 = &PIO6;
+		gpio8 = &PIO7;
+		gpio9 = &PIO8;
+		gpio10 = &PIO9;
+		gpio11 = &PIO10;
+		gpio12 = &PIO11;
+		gpio13 = &PIO12;
+		gpio14 = &PIO30;
+		gpio15 = &PIO31;
+		gpio16 = &PIO13;
+		gpio17 = &PIO14;
+		gpio18 = &PIO15;
+		gpio19 = &PIO16;
+		gpio20 = &PIO17;
+		gpio21 = &PIO18;
+		gpio22 = &PIO100;
+		gpio23 = &PIO101;
+		gpio24 = &PIO102;
+		gpio25 = &PIO103;
+		gpio26 = &PIO104;
+		gpio27 = &PIO105;
+		gpio28 = &PIO106;
+		gpio29 = &PIO107;
 	};
 
 	soc {
 		pin-controller-sbc {
-			#address-cells	= <1>;
-			#size-cells	= <1>;
-			compatible	= "st,stih416-sbc-pinctrl";
-			st,syscfg	= <&syscfg_sbc>;
-			reg 		= <0xfe61f080 0x4>;
-			reg-names	= "irqmux";
-			interrupts 	= <GIC_SPI 182 IRQ_TYPE_LEVEL_HIGH>;
-			interrupt-names	= "irqmux";
-			ranges		= <0 0xfe610000 0x6000>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih416-sbc-pinctrl";
+			st,syscfg = <&syscfg_sbc>;
+			reg = <0xfe61f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 182 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+			ranges = <0 0xfe610000 0x6000>;
 
-			pio0: gpio@fe610000 {
+			PIO0: gpio@fe610000 {
 				gpio-controller;
-				#gpio-cells = <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0 0x100>;
-				st,bank-name	= "PIO0";
+				reg = <0 0x100>;
+				st,bank-name = "PIO0";
 			};
-			pio1: gpio@fe611000 {
+			PIO1: gpio@fe611000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x1000 0x100>;
-				st,bank-name	= "PIO1";
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO1";
 			};
-			pio2: gpio@fe612000 {
+			PIO2: gpio@fe612000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x2000 0x100>;
-				st,bank-name	= "PIO2";
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO2";
 			};
-			pio3: gpio@fe613000 {
+			PIO3: gpio@fe613000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x3000 0x100>;
-				st,bank-name	= "PIO3";
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO3";
 			};
-			pio4: gpio@fe614000 {
+			PIO4: gpio@fe614000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x4000 0x100>;
-				st,bank-name	= "PIO4";
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO4";
 			};
-			pio40: gpio@fe615000 {
+			PIO40: gpio@fe615000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x5000 0x100>;
-				st,bank-name	= "PIO40";
+				reg = <0x5000 0x100>;
+				st,bank-name = "PIO40";
 				st,retime-pin-mask = <0x7f>;
 			};
 
 			rc{
 				pinctrl_ir: ir0 {
 					st,pins {
-						ir = <&pio4 0 ALT2 IN>;
+						ir = <&PIO4 0 ALT2 IN>;
 					};
 				};
 			};
 			sbc_serial1 {
 				pinctrl_sbc_serial1: sbc_serial1 {
 					st,pins {
-						tx	= <&pio2 6 ALT3 OUT>;
-						rx	= <&pio2 7 ALT3 IN>;
+						tx = <&PIO2 6 ALT3 OUT>;
+						rx = <&PIO2 7 ALT3 IN>;
 					};
 				};
 			};
@@ -125,15 +124,67 @@
 			keyscan {
 				pinctrl_keyscan: keyscan {
 					st,pins {
-						keyin0 = <&pio0 2 ALT2 IN>;
-						keyin1 = <&pio0 3 ALT2 IN>;
-						keyin2 = <&pio0 4 ALT2 IN>;
-						keyin3 = <&pio2 6 ALT2 IN>;
-
-						keyout0 = <&pio1 6 ALT2 OUT>;
-						keyout1 = <&pio1 7 ALT2 OUT>;
-						keyout2 = <&pio0 6 ALT2 OUT>;
-						keyout3 = <&pio2 7 ALT2 OUT>;
+						keyin0	= <&PIO0 2 ALT2 IN>;
+						keyin1	= <&PIO0 3 ALT2 IN>;
+						keyin2	= <&PIO0 4 ALT2 IN>;
+						keyin3	= <&PIO2 6 ALT2 IN>;
+
+						keyout0 = <&PIO1 6 ALT2 OUT>;
+						keyout1 = <&PIO1 7 ALT2 OUT>;
+						keyout2 = <&PIO0 6 ALT2 OUT>;
+						keyout3 = <&PIO2 7 ALT2 OUT>;
+					};
+				};
+			};
+
+			gmac1 {
+				pinctrl_mii1: mii1 {
+					st,pins {
+						txd0 = <&PIO0 0 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txd1 = <&PIO0 1 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txd2 = <&PIO0 2 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txd3 = <&PIO0 3 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txer = <&PIO0 4 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txen = <&PIO0 5 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
+						txclk = <&PIO0 6 ALT1 IN NICLK 0 CLK_A>;
+						col = <&PIO0 7 ALT1 IN BYPASS 1000>;
+
+						mdio = <&PIO1 0 ALT1 OUT BYPASS 1500>;
+						mdc = <&PIO1 1 ALT1 OUT NICLK 0 CLK_A>;
+						crs = <&PIO1 2 ALT1 IN BYPASS 1000>;
+						mdint = <&PIO1 3 ALT1 IN BYPASS 0>;
+						rxd0 = <&PIO1 4 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxd1 = <&PIO1 5 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxd2 = <&PIO1 6 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxd3 = <&PIO1 7 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+
+						rxdv = <&PIO2 0 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rx_er = <&PIO2 1 ALT1 IN SE_NICLK_IO 0 CLK_A>;
+						rxclk = <&PIO2 2 ALT1 IN NICLK 0 CLK_A>;
+					 	phyclk = <&PIO2 3 ALT1 OUT NICLK 0 CLK_A>;
+					};
+				};
+				pinctrl_rgmii1: rgmii1-0 {
+					st,pins {
+						txd0 = <&PIO0 0 ALT1 OUT DE_IO 500 CLK_A>;
+						txd1 = <&PIO0 1 ALT1 OUT DE_IO 500 CLK_A>;
+						txd2 = <&PIO0 2 ALT1 OUT DE_IO 500 CLK_A>;
+						txd3 = <&PIO0 3 ALT1 OUT DE_IO 500 CLK_A>;
+						txen = <&PIO0 5 ALT1 OUT DE_IO 0 CLK_A>;
+						txclk = <&PIO0 6 ALT1 IN NICLK 0 CLK_A>;
+
+						mdio = <&PIO1 0 ALT1 OUT BYPASS 0>;
+						mdc = <&PIO1 1 ALT1 OUT NICLK 0 CLK_A>;
+						rxd0 = <&PIO1 4 ALT1 IN DE_IO 500 CLK_A>;
+						rxd1 = <&PIO1 5 ALT1 IN DE_IO 500 CLK_A>;
+						rxd2 = <&PIO1 6 ALT1 IN DE_IO 500 CLK_A>;
+						rxd3 = <&PIO1 7 ALT1 IN DE_IO 500 CLK_A>;
+
+						rxdv = <&PIO2 0 ALT1 IN DE_IO 500 CLK_A>;
+						rxclk = <&PIO2 2 ALT1 IN NICLK 0 CLK_A>;
+						phyclk = <&PIO2 3 ALT4 OUT NICLK 0 CLK_B>;
+
+						clk125= <&PIO3 7 ALT4 IN NICLK 0 CLK_A>;
 					};
 				};
 			};
@@ -141,8 +192,8 @@
 			sbc_i2c0 {
 				pinctrl_sbc_i2c0_default: sbc_i2c0-default {
 					st,pins {
-						sda = <&pio4 6 ALT1 BIDIR>;
-						scl = <&pio4 5 ALT1 BIDIR>;
+						sda = <&PIO4 6 ALT1 BIDIR>;
+						scl = <&PIO4 5 ALT1 BIDIR>;
 					};
 				};
 			};
@@ -150,8 +201,8 @@
 			usb {
 				pinctrl_usb3: usb3 {
 					st,pins {
-						oc-detect = <&pio40 0 ALT1 IN>;
-						pwr-enable = <&pio40 1 ALT1 OUT>;
+						oc-detect = <&PIO40 0 ALT1 IN>;
+						pwr-enable = <&PIO40 1 ALT1 OUT>;
 					};
 				};
 			};
@@ -159,161 +210,140 @@
 			sbc_i2c1 {
 				pinctrl_sbc_i2c1_default: sbc_i2c1-default {
 					st,pins {
-						sda = <&pio3 2 ALT2 BIDIR>;
-						scl = <&pio3 1 ALT2 BIDIR>;
+						sda = <&PIO3 2 ALT2 BIDIR>;
+						scl = <&PIO3 1 ALT2 BIDIR>;
 					};
 				};
 			};
 
-			gmac1 {
-				pinctrl_mii1: mii1 {
+			pwm1 {
+				pinctrl_pwm1_chan0_default: pwm1-0-default {
 					st,pins {
-						txd0 = <&pio0 0 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txd1 = <&pio0 1 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txd2 = <&pio0 2 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txd3 = <&pio0 3 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txer = <&pio0 4 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txen = <&pio0 5 ALT1 OUT SE_NICLK_IO 0 CLK_A>;
-						txclk = <&pio0 6 ALT1 IN NICLK 0 CLK_A>;
-						col =   <&pio0 7 ALT1 IN BYPASS 1000>;
-
-						mdio =  <&pio1 0 ALT1 OUT BYPASS 1500>;
-						mdc =   <&pio1 1 ALT1 OUT NICLK 0 CLK_A>;
-						crs =   <&pio1 2 ALT1 IN BYPASS 1000>;
-						mdint = <&pio1 3 ALT1 IN BYPASS 0>;
-						rxd0 =  <&pio1 4 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-						rxd1 =  <&pio1 5 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-						rxd2 =  <&pio1 6 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-						rxd3 =  <&pio1 7 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-
-						rxdv =  <&pio2 0 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-						rx_er = <&pio2 1 ALT1 IN SE_NICLK_IO 0 CLK_A>;
-						rxclk = <&pio2 2 ALT1 IN NICLK 0 CLK_A>;
-						phyclk = <&pio2 3 ALT1 OUT NICLK 0 CLK_A>;
+						pwm-out = <&PIO3 0 ALT1 OUT>;
 					};
 				};
-				pinctrl_rgmii1: rgmii1-0 {
+				pinctrl_pwm1_chan1_default: pwm1-1-default {
 					st,pins {
-						txd0 =  <&pio0 0 ALT1 OUT DE_IO 500 CLK_A>;
-						txd1 =  <&pio0 1 ALT1 OUT DE_IO 500 CLK_A>;
-						txd2 =  <&pio0 2 ALT1 OUT DE_IO 500 CLK_A>;
-						txd3 =  <&pio0 3 ALT1 OUT DE_IO 500 CLK_A>;
-						txen =  <&pio0 5 ALT1 OUT DE_IO 0   CLK_A>;
-						txclk = <&pio0 6 ALT1 IN  NICLK 0   CLK_A>;
-
-						mdio = <&pio1 0 ALT1 OUT BYPASS 0>;
-						mdc  = <&pio1 1 ALT1 OUT NICLK  0 CLK_A>;
-						rxd0 = <&pio1 4 ALT1 IN DE_IO 500 CLK_A>;
-						rxd1 = <&pio1 5 ALT1 IN DE_IO 500 CLK_A>;
-						rxd2 = <&pio1 6 ALT1 IN DE_IO 500 CLK_A>;
-						rxd3 = <&pio1 7 ALT1 IN DE_IO 500 CLK_A>;
-
-						rxdv   = <&pio2 0 ALT1 IN  DE_IO 500 CLK_A>;
-						rxclk  = <&pio2 2 ALT1 IN  NICLK 0   CLK_A>;
-						phyclk = <&pio2 3 ALT4 OUT NICLK 0   CLK_B>;
-
-						clk125= <&pio3 7 ALT4 IN NICLK 0 CLK_A>;
+						pwm-out = <&PIO4 4 ALT1 OUT>;
+					};
+				};
+				pinctrl_pwm1_chan2_default: pwm1-2-default {
+					st,pins {
+						pwm-out = <&PIO4 6 ALT3 OUT>;
+					};
+				};
+				pinctrl_pwm1_chan3_default: pwm1-3-default {
+					st,pins {
+						pwm-out = <&PIO4 7 ALT3 OUT>;
 					};
 				};
 			};
 		};
 
 		pin-controller-front {
-			#address-cells	= <1>;
-			#size-cells	= <1>;
-			compatible	= "st,stih416-front-pinctrl";
-			st,syscfg	= <&syscfg_front>;
-			reg 		= <0xfee0f080 0x4>;
-			reg-names	= "irqmux";
-			interrupts 	= <GIC_SPI 183 IRQ_TYPE_LEVEL_HIGH>;
-			interrupt-names	= "irqmux";
-			ranges		= <0 0xfee00000 0x10000>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih416-front-pinctrl";
+			st,syscfg = <&syscfg_front>;
+			reg = <0xfee0f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 183 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+			ranges = <0 0xfee00000 0x10000>;
 
-			pio5: gpio@fee00000 {
+			PIO5: gpio@fee00000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0 0x100>;
-				st,bank-name	= "PIO5";
+				reg = <0 0x100>;
+				st,bank-name = "PIO5";
 			};
-			pio6: gpio@fee01000 {
+			PIO6: gpio@fee01000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x1000 0x100>;
-				st,bank-name	= "PIO6";
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO6";
 			};
-			pio7: gpio@fee02000 {
+			PIO7: gpio@fee02000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x2000 0x100>;
-				st,bank-name	= "PIO7";
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO7";
 			};
-			pio8: gpio@fee03000 {
+			PIO8: gpio@fee03000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x3000 0x100>;
-				st,bank-name	= "PIO8";
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO8";
 			};
-			pio9: gpio@fee04000 {
+			PIO9: gpio@fee04000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x4000 0x100>;
-				st,bank-name	= "PIO9";
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO9";
 			};
-			pio10: gpio@fee05000 {
+			PIO10: gpio@fee05000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x5000 0x100>;
-				st,bank-name	= "PIO10";
+				reg = <0x5000 0x100>;
+				st,bank-name = "PIO10";
 			};
-			pio11: gpio@fee06000 {
+			PIO11: gpio@fee06000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x6000 0x100>;
-				st,bank-name	= "PIO11";
+				reg = <0x6000 0x100>;
+				st,bank-name = "PIO11";
 			};
-			pio12: gpio@fee07000 {
+			PIO12: gpio@fee07000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x7000 0x100>;
-				st,bank-name	= "PIO12";
+				reg = <0x7000 0x100>;
+				st,bank-name = "PIO12";
 			};
-			pio30: gpio@fee08000 {
+			PIO30: gpio@fee08000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x8000 0x100>;
-				st,bank-name	= "PIO30";
+				reg = <0x8000 0x100>;
+				st,bank-name = "PIO30";
 			};
-			pio31: gpio@fee09000 {
+			PIO31: gpio@fee09000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x9000 0x100>;
-				st,bank-name	= "PIO31";
+				reg = <0x9000 0x100>;
+				st,bank-name = "PIO31";
+			};
+
+			pwm0 {
+				pinctrl_pwm0_chan0_default: pwm0-0-default {
+					st,pins {
+						pwm-out = <&PIO9 7 ALT2 OUT>;
+					};
+				};
 			};
 
 			serial2-oe {
 				pinctrl_serial2_oe: serial2-1 {
 					st,pins {
-						output-enable	= <&pio11 3 ALT2 OUT>;
+						output-enable = <&PIO11 3 ALT2 OUT>;
 					};
 				};
 			};
@@ -321,8 +351,8 @@
 			i2c0 {
 				pinctrl_i2c0_default: i2c0-default {
 					st,pins {
-						sda = <&pio9 3 ALT1 BIDIR>;
-						scl = <&pio9 2 ALT1 BIDIR>;
+						sda = <&PIO9 3 ALT1 BIDIR>;
+						scl = <&PIO9 2 ALT1 BIDIR>;
 					};
 				};
 			};
@@ -330,102 +360,99 @@
 			usb {
 				pinctrl_usb0: usb0 {
 					st,pins {
-						oc-detect = <&pio9 4 ALT1 IN>;
-						pwr-enable = <&pio9 5 ALT1 OUT>;
+						oc-detect = <&PIO9 4 ALT1 IN>;
+						pwr-enable = <&PIO9 5 ALT1 OUT>;
 					};
 				};
 			};
 
-
 			i2c1 {
 				pinctrl_i2c1_default: i2c1-default {
 					st,pins {
-						sda = <&pio12 1 ALT1 BIDIR>;
-						scl = <&pio12 0 ALT1 BIDIR>;
+						sda = <&PIO12 1 ALT1 BIDIR>;
+						scl = <&PIO12 0 ALT1 BIDIR>;
 					};
 				};
 			};
 
-			fsm {
-				pinctrl_fsm: fsm {
+			spi0 {
+				pinctrl_spi0_default: spi0-default {
 					st,pins {
-						spi-fsm-clk  = <&pio12 2 ALT1 OUT>;
-						spi-fsm-cs   = <&pio12 3 ALT1 OUT>;
-						spi-fsm-mosi = <&pio12 4 ALT1 OUT>;
-						spi-fsm-miso = <&pio12 5 ALT1 IN>;
-						spi-fsm-hol  = <&pio12 6 ALT1 OUT>;
-						spi-fsm-wp   = <&pio12 7 ALT1 OUT>;
+						mtsr = <&PIO9 3 ALT1 BIDIR>;
+						mrst = <&PIO9 6 ALT1 BIDIR>;
+						scl = <&PIO9 2 ALT1 BIDIR>;
 					};
 				};
 			};
+
 		};
 
 		pin-controller-rear {
-			#address-cells	= <1>;
-			#size-cells	= <1>;
-			compatible	= "st,stih416-rear-pinctrl";
-			st,syscfg	= <&syscfg_rear>;
-			reg 		= <0xfe82f080 0x4>;
-			reg-names	= "irqmux";
-			interrupts 	= <GIC_SPI 184 IRQ_TYPE_LEVEL_HIGH>;
-			interrupt-names	= "irqmux";
-			ranges 		= <0 0xfe820000 0x6000>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih416-rear-pinctrl";
+			st,syscfg = <&syscfg_rear>;
+			reg = <0xfe82f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 184 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+			ranges = <0 0xfe820000 0x6000>;
 
-			pio13: gpio@fe820000 {
+			PIO13: gpio@fe820000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0 0x100>;
-				st,bank-name	= "PIO13";
+				reg = <0 0x100>;
+				st,bank-name = "PIO13";
 			};
-			pio14: gpio@fe821000 {
+			PIO14: gpio@fe821000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x1000 0x100>;
-				st,bank-name	= "PIO14";
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO14";
 			};
-			pio15: gpio@fe822000 {
+			PIO15: gpio@fe822000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x2000 0x100>;
-				st,bank-name	= "PIO15";
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO15";
 			};
-			pio16: gpio@fe823000 {
+			PIO16: gpio@fe823000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x3000 0x100>;
-				st,bank-name	= "PIO16";
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO16";
 			};
-			pio17: gpio@fe824000 {
+			PIO17: gpio@fe824000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x4000 0x100>;
-				st,bank-name	= "PIO17";
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO17";
 			};
-			pio18: gpio@fe825000 {
+			PIO18: gpio@fe825000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x5000 0x100>;
-				st,bank-name	= "PIO18";
+				reg = <0x5000 0x100>;
+				st,bank-name = "PIO18";
 				st,retime-pin-mask = <0xf>;
 			};
 
 			serial2 {
 				pinctrl_serial2: serial2-0 {
 					st,pins {
-						tx	= <&pio17 4 ALT2 OUT>;
-						rx	= <&pio17 5 ALT2 IN>;
+						tx = <&PIO17 4 ALT2 OUT>;
+						rx = <&PIO17 5 ALT2 IN>;
 					};
 				};
 			};
@@ -433,56 +460,52 @@
 			gmac0 {
 				pinctrl_mii0: mii0 {
 					st,pins {
-						mdint = <&pio13 6 ALT2 IN  BYPASS      0>;
-						txen =  <&pio13 7 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
-						txd0 =  <&pio14 0 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
-						txd1 =  <&pio14 1 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
-						txd2 =  <&pio14 2 ALT2 OUT SE_NICLK_IO 0 CLK_B>;
-						txd3 =  <&pio14 3 ALT2 OUT SE_NICLK_IO 0 CLK_B>;
-
-						txclk = <&pio15 0 ALT2 IN  NICLK       0 CLK_A>;
-						txer =  <&pio15 1 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
-						crs = <&pio15 2 ALT2 IN  BYPASS 1000>;
-						col = <&pio15 3 ALT2 IN  BYPASS 1000>;
-						mdio= <&pio15 4 ALT2 OUT BYPASS 1500>;
-						mdc = <&pio15 5 ALT2 OUT NICLK  0    CLK_B>;
-
-						rxd0 =  <&pio16 0 ALT2 IN SE_NICLK_IO 0 CLK_A>;
-						rxd1 =  <&pio16 1 ALT2 IN SE_NICLK_IO 0 CLK_A>;
-						rxd2 =  <&pio16 2 ALT2 IN SE_NICLK_IO 0 CLK_A>;
-						rxd3 =  <&pio16 3 ALT2 IN SE_NICLK_IO 0 CLK_A>;
-						rxdv =  <&pio15 6 ALT2 IN SE_NICLK_IO 0 CLK_A>;
-						rx_er = <&pio15 7 ALT2 IN SE_NICLK_IO 0 CLK_A>;
-						rxclk = <&pio17 0 ALT2 IN NICLK 0 CLK_A>;
-						phyclk = <&pio13 5 ALT2 OUT NICLK 0 CLK_B>;
+						mdint = <&PIO13 6 ALT2 IN BYPASS 0>;
+						txen = <&PIO13 7 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						txd0 = <&PIO14 0 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						txd1 = <&PIO14 1 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						txd2 = <&PIO14 2 ALT2 OUT SE_NICLK_IO 0 CLK_B>;
+						txd3 = <&PIO14 3 ALT2 OUT SE_NICLK_IO 0 CLK_B>;
+
+						txclk = <&PIO15 0 ALT2 IN NICLK 0 CLK_A>;
+						txer = <&PIO15 1 ALT2 OUT SE_NICLK_IO 0 CLK_A>;
+						crs = <&PIO15 2 ALT2 IN BYPASS 1000>;
+						col = <&PIO15 3 ALT2 IN BYPASS 1000>;
+						mdio = <&PIO15 4 ALT2 OUT BYPASS 1500>;
+						mdc = <&PIO15 5 ALT2 OUT NICLK 0 CLK_B>;
+
+						rxd0 = <&PIO16 0 ALT2 IN SE_NICLK_IO 0 CLK_A>;
+						rxd1 = <&PIO16 1 ALT2 IN SE_NICLK_IO 0 CLK_A>;
+						rxd2 = <&PIO16 2 ALT2 IN SE_NICLK_IO 0 CLK_A>;
+						rxd3 = <&PIO16 3 ALT2 IN SE_NICLK_IO 0 CLK_A>;
+						rxdv = <&PIO15 6 ALT2 IN SE_NICLK_IO 0 CLK_A>;
+						rx_er = <&PIO15 7 ALT2 IN SE_NICLK_IO 0 CLK_A>;
+						rxclk = <&PIO17 0 ALT2 IN NICLK 0 CLK_A>;
+					 	phyclk = <&PIO13 5 ALT2 OUT NICLK 0 CLK_B>;
 					};
 				};
 
-				pinctrl_gmii0: gmii0 {
-					st,pins {
-						};
-				};
 				pinctrl_rgmii0: rgmii0 {
 					st,pins {
-						 phyclk = <&pio13  5 ALT4 OUT NICLK 0 CLK_B>;
-						 txen = <&pio13 7 ALT2 OUT DE_IO 0 CLK_A>;
-						 txd0  = <&pio14 0 ALT2 OUT DE_IO 500 CLK_A>;
-						 txd1  = <&pio14 1 ALT2 OUT DE_IO 500 CLK_A>;
-						 txd2  = <&pio14 2 ALT2 OUT DE_IO 500 CLK_B>;
-						 txd3  = <&pio14 3 ALT2 OUT DE_IO 500 CLK_B>;
-						 txclk = <&pio15 0 ALT2 IN NICLK 0 CLK_A>;
-
-						 mdio = <&pio15 4 ALT2 OUT BYPASS 0>;
-						 mdc = <&pio15 5 ALT2 OUT NICLK 0 CLK_B>;
-
-						 rxdv = <&pio15 6 ALT2 IN DE_IO 500 CLK_A>;
-						 rxd0 =<&pio16 0 ALT2 IN DE_IO	500 CLK_A>;
-						 rxd1 =<&pio16 1 ALT2 IN DE_IO	500 CLK_A>;
-						 rxd2 =<&pio16 2 ALT2 IN DE_IO	500 CLK_A>;
-						 rxd3  =<&pio16 3 ALT2 IN DE_IO 500 CLK_A>;
-						 rxclk =<&pio17 0 ALT2 IN NICLK 0 CLK_A>;
+						 phyclk = <&PIO13 5 ALT4 OUT NICLK 0 CLK_B>;
+						 txen = <&PIO13 7 ALT2 OUT DE_IO 0 CLK_A>;
+						 txd0 = <&PIO14 0 ALT2 OUT DE_IO 500 CLK_A>;
+						 txd1 = <&PIO14 1 ALT2 OUT DE_IO 500 CLK_A>;
+						 txd2 = <&PIO14 2 ALT2 OUT DE_IO 500 CLK_B>;
+						 txd3 = <&PIO14 3 ALT2 OUT DE_IO 500 CLK_B>;
+						 txclk = <&PIO15 0 ALT2 IN NICLK 0 CLK_A>;
+
+						 mdio = <&PIO15 4 ALT2 OUT BYPASS 0>;
+						 mdc = <&PIO15 5 ALT2 OUT NICLK 0 CLK_B>;
+
+						 rxdv = <&PIO15 6 ALT2 IN DE_IO 500 CLK_A>;
+						 rxd0 = <&PIO16 0 ALT2 IN DE_IO	500 CLK_A>;
+						 rxd1 = <&PIO16 1 ALT2 IN DE_IO	500 CLK_A>;
+						 rxd2 = <&PIO16 2 ALT2 IN DE_IO	500 CLK_A>;
+						 rxd3 = <&PIO16 3 ALT2 IN DE_IO 500 CLK_A>;
+						 rxclk = <&PIO17 0 ALT2 IN NICLK 0 CLK_A>;
 
-						 clk125=<&pio17 6 ALT1 IN NICLK 0 CLK_A>;
+						 clk125 = <&PIO17 6 ALT1 IN NICLK 0 CLK_A>;
 					};
 				};
 			};
@@ -490,38 +513,57 @@
 			mmc0 {
 				pinctrl_mmc0: mmc0 {
 					st,pins {
-						mmcclk  = <&pio13 4 ALT4 BIDIR_PU NICLK 0 CLK_B>;
-						data0   = <&pio14 4 ALT4 BIDIR_PU BYPASS 0>;
-						data1   = <&pio14 5 ALT4 BIDIR_PU BYPASS 0>;
-						data2   = <&pio14 6 ALT4 BIDIR_PU BYPASS 0>;
-						data3   = <&pio14 7 ALT4 BIDIR_PU BYPASS 0>;
-						cmd     = <&pio15 1 ALT4 BIDIR_PU BYPASS 0>;
-						wp      = <&pio15 3 ALT4 IN>;
-						data4   = <&pio16 4 ALT4 BIDIR_PU BYPASS 0>;
-						data5   = <&pio16 5 ALT4 BIDIR_PU BYPASS 0>;
-						data6   = <&pio16 6 ALT4 BIDIR_PU BYPASS 0>;
-						data7   = <&pio16 7 ALT4 BIDIR_PU BYPASS 0>;
-						pwr     = <&pio17 1 ALT4 OUT>;
-						cd      = <&pio17 2 ALT4 IN>;
-						led     = <&pio17 3 ALT4 OUT>;
+						mmcclk = <&PIO13 4 ALT4 BIDIR_PU NICLK 0 CLK_B>;
+						data0 = <&PIO14 4 ALT4 BIDIR_PU BYPASS 0>;
+						data1 = <&PIO14 5 ALT4 BIDIR_PU BYPASS 0>;
+						data2 = <&PIO14 6 ALT4 BIDIR_PU BYPASS 0>;
+						data3 = <&PIO14 7 ALT4 BIDIR_PU BYPASS 0>;
+						cmd = <&PIO15 1 ALT4 BIDIR_PU BYPASS 0>;
+						wp = <&PIO15 3 ALT4 IN>;
+						data4 = <&PIO16 4 ALT4 BIDIR_PU BYPASS 0>;
+						data5 = <&PIO16 5 ALT4 BIDIR_PU BYPASS 0>;
+						data6 = <&PIO16 6 ALT4 BIDIR_PU BYPASS 0>;
+						data7 = <&PIO16 7 ALT4 BIDIR_PU BYPASS 0>;
+						pwr = <&PIO17 1 ALT4 OUT>;
+						cd = <&PIO17 2 ALT4 IN>;
+						led = <&PIO17 3 ALT4 OUT>;
 					};
 				};
 			};
 			mmc1 {
 				pinctrl_mmc1: mmc1 {
 					st,pins {
-						mmcclk  = <&pio15 0 ALT3 BIDIR_PU NICLK 0 CLK_B>;
-						data0   = <&pio13 7 ALT3 BIDIR_PU BYPASS 0>;
-						data1   = <&pio14 1 ALT3 BIDIR_PU BYPASS 0>;
-						data2   = <&pio14 2 ALT3 BIDIR_PU BYPASS 0>;
-						data3   = <&pio14 3 ALT3 BIDIR_PU BYPASS 0>;
-						cmd     = <&pio15 4 ALT3 BIDIR_PU BYPASS 0>;
-						data4   = <&pio15 6 ALT3 BIDIR_PU BYPASS 0>;
-						data5   = <&pio15 7 ALT3 BIDIR_PU BYPASS 0>;
-						data6   = <&pio16 0 ALT3 BIDIR_PU BYPASS 0>;
-						data7   = <&pio16 1 ALT3 BIDIR_PU BYPASS 0>;
-						pwr     = <&pio16 2 ALT3 OUT>;
-						nreset  = <&pio13 6 ALT3 OUT>;
+						mmcclk = <&PIO15 0 ALT3 BIDIR_PU NICLK 0 CLK_B>;
+						data0 = <&PIO13 7 ALT3 BIDIR_PU BYPASS 0>;
+						data1 = <&PIO14 1 ALT3 BIDIR_PU BYPASS 0>;
+						data2 = <&PIO14 2 ALT3 BIDIR_PU BYPASS 0>;
+						data3 = <&PIO14 3 ALT3 BIDIR_PU BYPASS 0>;
+						cmd = <&PIO15 4 ALT3 BIDIR_PU BYPASS 0>;
+						data4 = <&PIO15 6 ALT3 BIDIR_PU BYPASS 0>;
+						data5 = <&PIO15 7 ALT3 BIDIR_PU BYPASS 0>;
+						data6 = <&PIO16 0 ALT3 BIDIR_PU BYPASS 0>;
+						data7 = <&PIO16 1 ALT3 BIDIR_PU BYPASS 0>;
+						pwr = <&PIO16 2 ALT3 OUT>;
+						nreset = <&PIO13 6 ALT3 OUT>;
+					};
+				};
+			};
+
+
+			pwm0 {
+				pinctrl_pwm0_chan1_default: pwm0-1-default {
+					st,pins {
+						pwm-out = <&PIO13 2 ALT2 OUT>;
+					};
+				};
+				pinctrl_pwm0_chan2_default: pwm0-2-default {
+					st,pins {
+						pwm-out = <&PIO15 2 ALT4 OUT>;
+					};
+				};
+				pinctrl_pwm0_chan3_default: pwm0-3-default {
+					st,pins {
+						pwm-out = <&PIO17 4 ALT1 OUT>;
 					};
 				};
 			};
@@ -529,107 +571,107 @@
 			usb {
 				pinctrl_usb1: usb1 {
 					st,pins {
-						oc-detect = <&pio18 0 ALT1 IN>;
-						pwr-enable = <&pio18 1 ALT1 OUT>;
+						oc-detect = <&PIO18 0 ALT1 IN>;
+						pwr-enable = <&PIO18 1 ALT1 OUT>;
 					};
 				};
 				pinctrl_usb2: usb2 {
 					st,pins {
-						oc-detect = <&pio18 2 ALT1 IN>;
-						pwr-enable = <&pio18 3 ALT1 OUT>;
+						oc-detect = <&PIO18 2 ALT1 IN>;
+						pwr-enable = <&PIO18 3 ALT1 OUT>;
 					};
 				};
 			};
 		};
 
 		pin-controller-fvdp-fe {
-			#address-cells	= <1>;
-			#size-cells	= <1>;
-			compatible	= "st,stih416-fvdp-fe-pinctrl";
-			st,syscfg	= <&syscfg_fvdp_fe>;
-			reg 		= <0xfd6bf080 0x4>;
-			reg-names	= "irqmux";
-			interrupts 	= <GIC_SPI 113 IRQ_TYPE_LEVEL_HIGH>;
-			interrupt-names	= "irqmux";
-			ranges		= <0 0xfd6b0000 0x3000>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih416-fvdp-fe-pinctrl";
+			st,syscfg = <&syscfg_fvdp_fe>;
+			reg = <0xfd6bf080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 113 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+			ranges = <0 0xfd6b0000 0x3000>;
 
-			pio100: gpio@fd6b0000 {
+			PIO100: gpio@fd6b0000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0 0x100>;
-				st,bank-name	= "PIO100";
+				reg = <0 0x100>;
+				st,bank-name = "PIO100";
 			};
-			pio101: gpio@fd6b1000 {
+			PIO101: gpio@fd6b1000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x1000 0x100>;
-				st,bank-name	= "PIO101";
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO101";
 			};
-			pio102: gpio@fd6b2000 {
+			PIO102: gpio@fd6b2000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x2000 0x100>;
-				st,bank-name	= "PIO102";
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO102";
 			};
 		};
 
 		pin-controller-fvdp-lite {
-			#address-cells	= <1>;
-			#size-cells	= <1>;
-			compatible	= "st,stih416-fvdp-lite-pinctrl";
-			st,syscfg		= <&syscfg_fvdp_lite>;
-			reg 		= <0xfd33f080 0x4>;
-			reg-names	= "irqmux";
-			interrupts 	= <GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH>;
-			interrupt-names	= "irqmux";
-			ranges			= <0 0xfd330000 0x5000>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "st,stih416-fvdp-lite-pinctrl";
+			st,syscfg = <&syscfg_fvdp_lite>;
+			reg = <0xfd33f080 0x4>;
+			reg-names = "irqmux";
+			interrupts = <GIC_SPI 114 IRQ_TYPE_NONE>;
+			interrupt-names = "irqmux";
+			ranges = <0 0xfd330000 0x5000>;
 
-			pio103: gpio@fd330000 {
+			PIO103: gpio@fd330000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0 0x100>;
-				st,bank-name	= "PIO103";
+				reg = <0 0x100>;
+				st,bank-name = "PIO103";
 			};
-			pio104: gpio@fd331000 {
+			PIO104: gpio@fd331000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x1000 0x100>;
-				st,bank-name	= "PIO104";
+				reg = <0x1000 0x100>;
+				st,bank-name = "PIO104";
 			};
-			pio105: gpio@fd332000 {
+			PIO105: gpio@fd332000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x2000 0x100>;
-				st,bank-name	= "PIO105";
+				reg = <0x2000 0x100>;
+				st,bank-name = "PIO105";
 			};
-			pio106: gpio@fd333000 {
+			PIO106: gpio@fd333000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x3000 0x100>;
-				st,bank-name	= "PIO106";
+				reg = <0x3000 0x100>;
+				st,bank-name = "PIO106";
 			};
 
-			pio107: gpio@fd334000 {
+			PIO107: gpio@fd334000 {
 				gpio-controller;
-				#gpio-cells	= <1>;
+				#gpio-cells = <2>;
 				interrupt-controller;
 				#interrupt-cells = <2>;
-				reg		= <0x4000 0x100>;
-				st,bank-name	= "PIO107";
+				reg = <0x4000 0x100>;
+				st,bank-name = "PIO107";
 				st,retime-pin-mask = <0xf>;
 			};
 		};
diff -urNp a/arch/arm/boot/dts/stih416.dtsi b/arch/arm/boot/dts/stih416.dtsi
--- a/arch/arm/boot/dts/stih416.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih416.dtsi	2019-09-26 21:23:27.164619200 +0100
@@ -6,13 +6,12 @@
  * it under the terms of the GNU General Public License version 2 as
  * publishhed by the Free Software Foundation.
  */
+#include <dt-bindings/interrupt-controller/arm-gic.h>
+#include <dt-bindings/reset-controller/stih416-resets.h>
+#include <dt-bindings/phy/phy-miphy365x.h>
 #include "stih41x.dtsi"
 #include "stih416-clock.dtsi"
 #include "stih416-pinctrl.dtsi"
-
-#include <dt-bindings/phy/phy-miphy365x.h>
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-#include <dt-bindings/reset-controller/stih416-resets.h>
 / {
 	L2: cache-controller {
 		compatible = "arm,pl310-cache";
@@ -28,422 +27,511 @@
 		#size-cells = <1>;
 		interrupt-parent = <&intc>;
 		ranges;
-		compatible	= "simple-bus";
+		compatible = "simple-bus";
+
+		restart {
+			compatible = "st,stih416-restart";
+			st,syscfg = <&syscfg_sbc>;
+		};
+
+		socinfo {
+			compatible = "st,stih416-socinfo";
+			st,syscfg = <&syscfg_transport>;
+		};
 
 		powerdown: powerdown-controller {
 			#reset-cells = <1>;
 			compatible = "st,stih416-powerdown";
 		};
 
+		lpm:stm-lpm@fe400000 {
+			compatible = "st,lpm";
+			reg = <0xfe400000 0xa0000>,
+			      <0xfe4b4000 0x400>,
+			      <0xfe4b5100 0x100>,
+			      <0x020000 0x0>;
+			reg-names = "base", "mailbox", "confreg", "pmem";
+			interrupts = <GIC_SPI 215 IRQ_TYPE_NONE>;
+			status = "disabled";
+		};
+
 		softreset: softreset-controller {
 			#reset-cells = <1>;
 			compatible = "st,stih416-softreset";
 		};
 
+		pmu {
+			compatible = "st,stih416-pmu-syscfg";
+			st,syscfg = <&syscfg_cpu>;
+
+			arm-pmu {
+				interrupt-parent = <&intc>;
+				compatible = "arm,cortex-a9-pmu";
+				interrupts = <GIC_PPI 15 IRQ_TYPE_LEVEL_HIGH>;
+			};
+		};
+
 		syscfg_sbc:sbc-syscfg@fe600000{
-			compatible	= "st,stih416-sbc-syscfg", "syscon";
-			reg		= <0xfe600000 0x1000>;
+			compatible = "st,stih416-sbc-syscfg", "syscon";
+			reg = <0xfe600000 0x1000>;
 		};
 
 		syscfg_front:front-syscfg@fee10000{
-			compatible	= "st,stih416-front-syscfg", "syscon";
-			reg		= <0xfee10000 0x1000>;
+			compatible = "st,stih416-front-syscfg", "syscon";
+			reg = <0xfee10000 0x1000>;
 		};
 
 		syscfg_rear:rear-syscfg@fe830000{
-			compatible	= "st,stih416-rear-syscfg", "syscon";
-			reg		= <0xfe830000 0x1000>;
+			compatible = "st,stih416-rear-syscfg", "syscon";
+			reg = <0xfe830000 0x1000>;
 		};
 
 		/* MPE */
 		syscfg_fvdp_fe:fvdp-fe-syscfg@fddf0000{
-			compatible	= "st,stih416-fvdp-fe-syscfg", "syscon";
-			reg		= <0xfddf0000 0x1000>;
+			compatible = "st,stih416-fvdp-fe-syscfg", "syscon";
+			reg = <0xfddf0000 0x1000>;
 		};
 
 		syscfg_fvdp_lite:fvdp-lite-syscfg@fd6a0000{
-			compatible	= "st,stih416-fvdp-lite-syscfg", "syscon";
-			reg		= <0xfd6a0000 0x1000>;
+			compatible = "st,stih416-fvdp-lite-syscfg", "syscon";
+			reg = <0xfd6a0000 0x1000>;
 		};
 
 		syscfg_cpu:cpu-syscfg@fdde0000{
-			compatible	= "st,stih416-cpu-syscfg", "syscon";
-			reg		= <0xfdde0000 0x1000>;
+			compatible = "st,stih416-cpu-syscfg", "syscon";
+			reg = <0xfdde0000 0x1000>;
 		};
 
 		syscfg_compo:compo-syscfg@fd320000{
-			compatible	= "st,stih416-compo-syscfg", "syscon";
-			reg		= <0xfd320000 0x1000>;
+			compatible = "st,stih416-compo-syscfg", "syscon";
+			reg = <0xfd320000 0x1000>;
 		};
 
 		syscfg_transport:transport-syscfg@fd690000{
-			compatible	= "st,stih416-transport-syscfg", "syscon";
-			reg		= <0xfd690000 0x1000>;
+			compatible = "st,stih416-transport-syscfg", "syscon";
+			reg = <0xfd690000 0x1000>;
 		};
 
 		syscfg_lpm:lpm-syscfg@fe4b5100{
-			compatible	= "st,stih416-lpm-syscfg", "syscon";
-			reg		= <0xfe4b5100 0x8>;
+			compatible = "st,stih416-lpm-syscfg", "syscon";
+			reg = <0xfe4b5100 0x8>;
 		};
 
 		serial2: serial@fed32000{
-			compatible	= "st,asc";
-			status 		= "disabled";
-			reg		= <0xfed32000 0x2c>;
-			interrupts	= <0 197 0>;
-			clocks 		= <&clk_s_a0_ls CLK_ICN_REG>;
-			pinctrl-names 	= "default";
-			pinctrl-0 	= <&pinctrl_serial2 &pinctrl_serial2_oe>;
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0xfed32000 0x2c>;
+			interrupts = <GIC_SPI 197 IRQ_TYPE_NONE>;
+			clocks = <&CLK_S_A0_LS 0>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_serial2 &pinctrl_serial2_oe>;
 		};
 
 		/* SBC_UART1 */
 		sbc_serial1: serial@fe531000 {
-			compatible	= "st,asc";
-			status 		= "disabled";
-			reg		= <0xfe531000 0x2c>;
-			interrupts	= <0 210 0>;
-			pinctrl-names 	= "default";
-			pinctrl-0 	= <&pinctrl_sbc_serial1>;
-			clocks          = <&clk_sysin>;
-		};
-
-		i2c@fed40000 {
-			compatible	= "st,comms-ssc4-i2c";
-			reg		= <0xfed40000 0x110>;
-			interrupts	= <GIC_SPI 187 IRQ_TYPE_LEVEL_HIGH>;
-			clocks 		= <&clk_s_a0_ls CLK_ICN_REG>;
-			clock-names	= "ssc";
-			clock-frequency = <400000>;
-			pinctrl-names	= "default";
-			pinctrl-0	= <&pinctrl_i2c0_default>;
-
-			status		= "disabled";
-		};
-
-		i2c@fed41000 {
-			compatible	= "st,comms-ssc4-i2c";
-			reg		= <0xfed41000 0x110>;
-			interrupts	= <GIC_SPI 188 IRQ_TYPE_LEVEL_HIGH>;
-			clocks 		= <&clk_s_a0_ls CLK_ICN_REG>;
-			clock-names	= "ssc";
-			clock-frequency = <400000>;
-			pinctrl-names	= "default";
-			pinctrl-0	= <&pinctrl_i2c1_default>;
-
-			status		= "disabled";
-		};
-
-		i2c@fe540000 {
-			compatible	= "st,comms-ssc4-i2c";
-			reg		= <0xfe540000 0x110>;
-			interrupts	= <GIC_SPI 206 IRQ_TYPE_LEVEL_HIGH>;
-			clocks		= <&clk_sysin>;
-			clock-names	= "ssc";
-			clock-frequency = <400000>;
-			pinctrl-names	= "default";
-			pinctrl-0	= <&pinctrl_sbc_i2c0_default>;
-
-			status		= "disabled";
+			compatible = "st,asc";
+			status = "disabled";
+			reg = <0xfe531000 0x2c>;
+			interrupts = <GIC_SPI 210 IRQ_TYPE_NONE>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_sbc_serial1>;
+			clocks = <&CLK_SYSIN>;
 		};
 
-		i2c@fe541000 {
-			compatible	= "st,comms-ssc4-i2c";
-			reg		= <0xfe541000 0x110>;
-			interrupts	= <GIC_SPI 207 IRQ_TYPE_LEVEL_HIGH>;
-			clocks		= <&clk_sysin>;
-			clock-names	= "ssc";
-			clock-frequency = <400000>;
-			pinctrl-names	= "default";
-			pinctrl-0	= <&pinctrl_sbc_i2c1_default>;
-
-			status		= "disabled";
+		/* RNG */
+		rng: rng@fee80000 {
+			compatible = "st,rng";
+			reg = <0xfee80000 0x1000>;
+			clocks = <&CLK_SYSIN>;
 		};
 
 		ethernet0: dwmac@fe810000 {
-			device_type 	= "network";
-			compatible	= "st,stih416-dwmac", "snps,dwmac", "snps,dwmac-3.710";
-			status 		= "disabled";
-			reg		= <0xfe810000 0x8000>;
-			reg-names	= "stmmaceth";
+			device_type = "network";
+			status = "disabled";
+			compatible = "st,stih416-dwmac", "snps,dwmac", "snps,dwmac-3.710";
+			reg = <0xfe810000 0x8000>, <0x8bc 0x4>;
+			reg-names = "stmmaceth", "sti-ethconf";
+			st,syscon = <&syscfg_rear>;
+			resets = <&softreset STIH416_ETH0_SOFTRESET>;
+			reset-names = "stmmaceth";
+			interrupts = <GIC_SPI 133 IRQ_TYPE_NONE>,
+				     <GIC_SPI 134 IRQ_TYPE_NONE>,
+				     <GIC_SPI 135 IRQ_TYPE_NONE>;
 
-			interrupts = <0 133 0>, <0 134 0>, <0 135 0>;
 			interrupt-names = "macirq", "eth_wake_irq", "eth_lpi";
 
-			snps,pbl 	= <32>;
+			snps,pbl = <32>;
 			snps,mixed-burst;
 
-			st,syscon		= <&syscfg_rear 0x8bc>;
-			resets			= <&softreset STIH416_ETH0_SOFTRESET>;
-			reset-names		= "stmmaceth";
-			pinctrl-names 	= "default";
-			pinctrl-0	= <&pinctrl_mii0>;
-			clock-names	= "stmmaceth", "sti-ethclk";
-			clocks		= <&clk_s_a1_ls CLK_ICN_IF_2>, <&clk_s_a1_ls CLK_GMAC0_PHY>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_mii0>;
+			clock-names = "stmmaceth", "sti-ethclk";
+			clocks = <&CLK_S_A1_LS 0>, <&CLK_S_A1_LS 3>;
 		};
 
 		ethernet1: dwmac@fef08000 {
 			device_type = "network";
-			compatible		= "st,stih416-dwmac", "snps,dwmac", "snps,dwmac-3.710";
-			status 		= "disabled";
-			reg		= <0xfef08000 0x8000>;
-			reg-names	= "stmmaceth";
-			interrupts = <0 136 0>, <0 137 0>, <0 138 0>;
+			status = "disabled";
+			compatible = "st,stih416-dwmac", "snps,dwmac", "snps,dwmac-3.710";
+			reg = <0xfef08000 0x8000>, <0x7f0 0x4>;
+			reg-names = "stmmaceth", "sti-ethconf";
+			st,syscon = <&syscfg_sbc>;
+			resets = <&softreset STIH416_ETH1_SOFTRESET>;
+			reset-names = "stmmaceth";
+
+			interrupts = <GIC_SPI 136 IRQ_TYPE_NONE>,
+					     <GIC_SPI 137 IRQ_TYPE_NONE>,
+					     <GIC_SPI 138 IRQ_TYPE_NONE>;
+
 			interrupt-names = "macirq", "eth_wake_irq", "eth_lpi";
 
-			snps,pbl	= <32>;
+			snps,pbl = <32>;
 			snps,mixed-burst;
 
-			st,syscon	= <&syscfg_sbc 0x7f0>;
-
-			resets		= <&softreset STIH416_ETH1_SOFTRESET>;
-			reset-names	= "stmmaceth";
-			pinctrl-names 	= "default";
-			pinctrl-0	= <&pinctrl_mii1>;
-			clock-names	= "stmmaceth", "sti-ethclk";
-			clocks		= <&clk_s_a0_ls CLK_ICN_REG>, <&clk_s_a0_ls CLK_ETH1_PHY>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_mii1>;
+			clock-names = "stmmaceth", "sti-ethclk";
+			clocks = <&CLK_S_A0_LS 0>, <&CLK_S_A0_LS 4>;
 		};
 
 		rc: rc@fe518000 {
-			compatible	= "st,comms-irb";
-			reg		= <0xfe518000 0x234>;
-			interrupts	=  <0 203 0>;
-			rx-mode         = "infrared";
-			clocks		= <&clk_sysin>;
-			pinctrl-names 	= "default";
-			pinctrl-0	= <&pinctrl_ir>;
-			resets		= <&softreset STIH416_IRB_SOFTRESET>;
-		};
-
-		/* FSM */
-		spifsm: spifsm@fe902000 {
-			compatible	   = "st,spi-fsm";
-			reg		   = <0xfe902000 0x1000>;
-			pinctrl-0	   = <&pinctrl_fsm>;
-
-			st,syscfg	   = <&syscfg_rear>;
-			st,boot-device-reg = <0x958>;
-			st,boot-device-spi = <0x1a>;
+			compatible = "st,comms-irb";
+			reg = <0xfe518000 0x234>;
+			interrupts = <GIC_SPI 203 IRQ_TYPE_NONE>;
+			rx-mode = "infrared";
+			clocks = <&CLK_SYSIN>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_ir>;
+			resets = <&softreset STIH416_IRB_SOFTRESET>;
+		};
+
+		i2c@fed40000 {
+			compatible = "st,comms-ssc4-i2c";
+			reg	= <0xfed40000 0x110>;
+			interrupts = <GIC_SPI 187 IRQ_TYPE_LEVEL_HIGH>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_A0_LS 0>;
+			clock-names	= "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c0_default>;
 
 			status = "disabled";
 		};
 
-		keyscan: keyscan@fe4b0000 {
-			compatible = "st,sti-keyscan";
+		i2c@fed41000 {
+			compatible = "st,comms-ssc4-i2c";
+			reg = <0xfed41000 0x110>;
+			interrupts = <GIC_SPI 188 IRQ_TYPE_LEVEL_HIGH>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_S_A0_LS 0>;
+			clock-names	= "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2c1_default>;
+
 			status = "disabled";
-			reg = <0xfe4b0000 0x2000>;
-			interrupts = <GIC_SPI 212 IRQ_TYPE_NONE>;
-			clocks = <&clk_sysin>;
+		};
+
+		i2c@fe540000 {
+			compatible = "st,comms-ssc4-i2c";
+			reg = <0xfe540000 0x110>;
+			interrupts = <GIC_SPI 206 IRQ_TYPE_LEVEL_HIGH>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
 			pinctrl-names = "default";
-			pinctrl-0 = <&pinctrl_keyscan>;
-			resets	= <&powerdown STIH416_KEYSCAN_POWERDOWN>,
-				  <&softreset STIH416_KEYSCAN_SOFTRESET>;
+			pinctrl-0 = <&pinctrl_sbc_i2c0_default>;
+
+			status = "disabled";
+		};
+
+		i2c@fe541000 {
+			compatible = "st,comms-ssc4-i2c";
+			reg = <0xfe541000 0x110>;
+			interrupts = <GIC_SPI 207 IRQ_TYPE_LEVEL_HIGH>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			clocks = <&CLK_SYSIN>;
+			clock-names = "ssc";
+			clock-frequency = <400000>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_sbc_i2c1_default>;
+
+			status = "disabled";
 		};
 
-		temp0 {
+		temp0{
 			compatible = "st,stih416-sas-thermal";
 			clock-names = "thermal";
-			clocks = <&clockgen_c_vcc 14>;
-
-			status = "okay";
+			clocks = <&CLOCKGEN_C_VCC 14>;
 		};
 
-		temp1@fdfe8000 {
+		temp1{
 			compatible = "st,stih416-mpe-thermal";
 			reg = <0xfdfe8000 0x10>;
-			clocks = <&clockgen_e 3>;
 			clock-names = "thermal";
+			clocks = <&CLOCKGEN_E 3>;
 			interrupts = <GIC_SPI 23 IRQ_TYPE_EDGE_RISING>;
-
-			status = "okay";
 		};
 
 		mmc0: sdhci@fe81e000 {
-			compatible	= "st,sdhci";
-			status		= "disabled";
-			reg		= <0xfe81e000 0x1000>;
-			interrupts	= <GIC_SPI 127 IRQ_TYPE_NONE>;
-			interrupt-names	= "mmcirq";
-			pinctrl-names	= "default";
-			pinctrl-0	= <&pinctrl_mmc0>;
+			compatible = "st,sdhci";
+			status = "disabled";
+			reg = <0xfe81e000 0x1000>;
+			interrupts = <GIC_SPI 127 IRQ_TYPE_NONE>;
+			interrupt-names = "mmcirq";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_mmc0>;
 			clock-names	= "mmc";
-			clocks		= <&clk_s_a1_ls 1>;
+			clocks = <&CLK_S_A1_LS 1>;
 		};
 
 		mmc1: sdhci@fe81f000 {
-			compatible	= "st,sdhci";
-			status		= "disabled";
-			reg		= <0xfe81f000 0x1000>;
-			interrupts	= <GIC_SPI 128 IRQ_TYPE_NONE>;
-			interrupt-names	= "mmcirq";
-			pinctrl-names	= "default";
-			pinctrl-0	= <&pinctrl_mmc1>;
+			compatible = "st,sdhci";
+			status = "disabled";
+			reg = <0xfe81f000 0x1000>;
+			interrupts = <GIC_SPI 128 IRQ_TYPE_NONE>;
+			interrupt-names = "mmcirq";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_mmc1>;
 			clock-names	= "mmc";
-			clocks		= <&clk_s_a1_ls 8>;
+			clocks = <&CLK_S_A1_LS 8>;
 		};
 
-		miphy365x_phy: phy@fe382000 {
-			compatible      = "st,miphy365x-phy";
-			st,syscfg	= <&syscfg_rear 0x824 0x828>;
-			#address-cells	= <1>;
-			#size-cells	= <1>;
-			ranges;
-
-			phy_port0: port@fe382000 {
-				#phy-cells = <1>;
-				reg = <0xfe382000 0x100>, <0xfe394000 0x100>;
-				reg-names = "sata", "pcie";
-			};
-
-			phy_port1: port@fe38a000 {
-				#phy-cells = <1>;
-				reg = <0xfe38a000 0x100>, <0xfe804000 0x100>;
-				reg-names = "sata", "pcie";
-			};
+		/* SAS PWM MODULE */
+		pwm0: pwm@fed10000 {
+			compatible = "st,sti-pwm";
+			status = "disabled";
+			#pwm-cells = <2>;
+			reg = <0xfed10000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_pwm0_chan0_default
+				     &pinctrl_pwm0_chan1_default
+				     &pinctrl_pwm0_chan2_default
+				     &pinctrl_pwm0_chan3_default>;
+			clock-names = "pwm";
+			clocks = <&CLK_SYSIN>;
+			st,pwm-num-chan = <4>;
 		};
 
-		sata0: sata@fe380000 {
-			compatible      = "st,sti-ahci";
-			reg             = <0xfe380000 0x1000>;
-			interrupts      = <GIC_SPI 157 IRQ_TYPE_NONE>;
-			interrupt-names = "hostc";
-			phys	        = <&phy_port0 MIPHY_TYPE_SATA>;
-			phy-names       = "sata-phy";
-			resets	        = <&powerdown STIH416_SATA0_POWERDOWN>,
-					  <&softreset STIH416_SATA0_SOFTRESET>;
-			reset-names     = "pwr-dwn", "sw-rst";
-			clock-names     = "ahci_clk";
-			clocks	        = <&clk_s_a0_ls CLK_ICN_REG>;
-
-			status	        = "disabled";
+		/* SBC PWM MODULE */
+		pwm1: pwm@fe510000 {
+			compatible = "st,sti-pwm";
+			status = "disabled";
+			#pwm-cells = <2>;
+			reg = <0xfe510000 0x68>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_pwm1_chan0_default
+				     &pinctrl_pwm1_chan1_default
+				     &pinctrl_pwm1_chan2_default
+				     &pinctrl_pwm1_chan3_default>;
+			clock-names = "pwm";
+			clocks = <&CLK_SYSIN>;
+			st,pwm-num-chan = <4>;
 		};
 
-		usb2_phy: phy@0 {
+		usb2_phy: usb2phy@0 {
 			compatible = "st,stih416-usb-phy";
 			#phy-cells = <0>;
+
 			st,syscfg = <&syscfg_rear>;
-			clocks = <&clk_sysin>;
+
+			clocks = <&CLK_SYSIN>;
 			clock-names = "osc_phy";
 		};
 
-		ehci0: usb@fe1ffe00 {
-			compatible = "st,st-ehci-300x";
-			reg = <0xfe1ffe00 0x100>;
-			interrupts = <GIC_SPI 148 IRQ_TYPE_NONE>;
+		usb0: usb@fe100000 {
+			compatible = "st,usb-300x";
+			status = "disabled";
+			reg = <0xfe1ffc00 0x100>,
+				  <0xfe1ffe00 0x100>;
+			reg-names = "ohci", "ehci";
+
+			interrupts = <GIC_SPI 148 IRQ_TYPE_NONE>,
+				     <GIC_SPI 149 IRQ_TYPE_NONE>;
+			interrupt-names = "ehci","ohci";
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_usb0>;
-			clocks = <&clk_s_a1_ls 0>,
-				 <&clockgen_b0 0>;
-			clock-names = "ic", "clk48";
-			phys = <&usb2_phy>;
-			phy-names = "usb";
+			clocks = <&CLK_S_A1_LS 0>,
+				 <&CLOCKGEN_B0 0>;
+			clock-names = "ic", "ohci";
+
 			resets = <&powerdown STIH416_USB0_POWERDOWN>,
 				 <&softreset STIH416_USB0_SOFTRESET>;
 			reset-names = "power", "softreset";
-		};
 
-		ohci0: usb@fe1ffc00 {
-			compatible = "st,st-ohci-300x";
-			reg = <0xfe1ffc00 0x100>;
-			interrupts = <GIC_SPI 149 IRQ_TYPE_NONE>;
-			clocks = <&clk_s_a1_ls 0>,
-				 <&clockgen_b0 0>;
-			clock-names = "ic", "clk48";
 			phys = <&usb2_phy>;
-			phy-names = "usb";
-			status = "okay";
-			resets = <&powerdown STIH416_USB0_POWERDOWN>,
-				 <&softreset STIH416_USB0_SOFTRESET>;
-			reset-names = "power", "softreset";
+			phy-names = "usb2-phy";
 		};
 
-		ehci1: usb@fe203e00 {
-			compatible = "st,st-ehci-300x";
-			reg = <0xfe203e00 0x100>;
-			interrupts = <GIC_SPI 150 IRQ_TYPE_NONE>;
+		usb1: usb@fe200000 {
+			compatible = "st,usb-300x";
+			status = "disabled";
+			reg = <0xfe203c00 0x100>,
+			      <0xfe203e00 0x100>;
+			reg-names = "ohci", "ehci";
+
+			interrupts = <GIC_SPI 150 IRQ_TYPE_NONE>,
+				     <GIC_SPI 151 IRQ_TYPE_NONE>;
+			interrupt-names = "ehci","ohci";
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_usb1>;
-			clocks = <&clk_s_a1_ls 0>,
-				 <&clockgen_b0 0>;
-			clock-names = "ic", "clk48";
-			phys = <&usb2_phy>;
-			phy-names = "usb";
+			clocks = <&CLK_S_A1_LS 0>,
+				 <&CLOCKGEN_B0 0>;
+			clock-names = "ic", "ohci";
+
 			resets = <&powerdown STIH416_USB1_POWERDOWN>,
 				 <&softreset STIH416_USB1_SOFTRESET>;
 			reset-names = "power", "softreset";
-		};
 
-		ohci1: usb@fe203c00 {
-			compatible = "st,st-ohci-300x";
-			reg = <0xfe203c00 0x100>;
-			interrupts = <GIC_SPI 151 IRQ_TYPE_NONE>;
-			clocks = <&clk_s_a1_ls 0>,
-				 <&clockgen_b0 0>;
-			clock-names = "ic", "clk48";
 			phys = <&usb2_phy>;
-			phy-names = "usb";
-			resets = <&powerdown STIH416_USB1_POWERDOWN>,
-				 <&softreset STIH416_USB1_SOFTRESET>;
-			reset-names = "power", "softreset";
+			phy-names = "usb2-phy";
 		};
 
-		ehci2: usb@fe303e00 {
-			compatible = "st,st-ehci-300x";
-			reg = <0xfe303e00 0x100>;
-			interrupts = <GIC_SPI 152 IRQ_TYPE_NONE>;
+		usb2: usb@fe300000 {
+			compatible = "st,usb-300x";
+			status = "disabled";
+			reg = <0xfe303c00 0x100>,
+			      <0xfe303e00 0x100>;
+			reg-names = "ohci", "ehci";
+
+			interrupts = <GIC_SPI 152 IRQ_TYPE_NONE>,
+				     <GIC_SPI 153 IRQ_TYPE_NONE>;
+			interrupt-names = "ehci","ohci";
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_usb2>;
-			clocks = <&clk_s_a1_ls 0>,
-				 <&clockgen_b0 0>;
-			clock-names = "ic", "clk48";
-			phys = <&usb2_phy>;
-			phy-names = "usb";
+			clocks = <&CLK_S_A1_LS 0>,
+				 <&CLOCKGEN_B0 0>;
+			clock-names = "ic", "ohci";
+
 			resets = <&powerdown STIH416_USB2_POWERDOWN>,
 				 <&softreset STIH416_USB2_SOFTRESET>;
 			reset-names = "power", "softreset";
-		};
 
-		ohci2: usb@fe303c00 {
-			compatible = "st,st-ohci-300x";
-			reg = <0xfe303c00 0x100>;
-			interrupts = <GIC_SPI 153 IRQ_TYPE_NONE>;
-			clocks = <&clk_s_a1_ls 0>,
-				 <&clockgen_b0 0>;
-			clock-names = "ic", "clk48";
 			phys = <&usb2_phy>;
-			phy-names = "usb";
-			resets = <&powerdown STIH416_USB2_POWERDOWN>,
-				 <&softreset STIH416_USB2_SOFTRESET>;
-			reset-names = "power", "softreset";
+			phy-names = "usb2-phy";
 		};
 
-		ehci3: usb@fe343e00 {
-			compatible = "st,st-ehci-300x";
-			reg = <0xfe343e00 0x100>;
-			interrupts = <GIC_SPI 154 IRQ_TYPE_NONE>;
+		usb3: usb@fe340000 {
+			compatible = "st,usb-300x";
+			status = "disabled";
+			reg = <0xfe343c00 0x100>, <0xfe343e00 0x100>;
+			reg-names = "ohci", "ehci";
+
+			interrupts = <GIC_SPI 154 IRQ_TYPE_NONE>,
+				     <GIC_SPI 155 IRQ_TYPE_NONE>;
+			interrupt-names = "ehci","ohci";
 			pinctrl-names = "default";
 			pinctrl-0 = <&pinctrl_usb3>;
-			clocks = <&clk_s_a1_ls 0>,
-				 <&clockgen_b0 0>;
-			clock-names = "ic", "clk48";
-			phys = <&usb2_phy>;
-			phy-names = "usb";
+			clocks = <&CLK_S_A1_LS 0>,
+				 <&CLOCKGEN_B0 0>;
+			clock-names = "ic", "ohci";
+
 			resets = <&powerdown STIH416_USB3_POWERDOWN>,
 				 <&softreset STIH416_USB3_SOFTRESET>;
 			reset-names = "power", "softreset";
-		};
 
-		ohci3: usb@fe343c00 {
-			compatible = "st,st-ohci-300x";
-			reg = <0xfe343c00 0x100>;
-			interrupts = <GIC_SPI 155 IRQ_TYPE_NONE>;
-			clocks = <&clk_s_a1_ls 0>,
-				 <&clockgen_b0 0>;
-			clock-names = "ic", "clk48";
 			phys = <&usb2_phy>;
-			phy-names = "usb";
-			resets = <&powerdown STIH416_USB3_POWERDOWN>,
-				 <&softreset STIH416_USB3_SOFTRESET>;
+			phy-names = "usb2-phy";
+		};
+
+		/* SSC0 */
+		spi@fed40000 {
+			compatible = "st,comms-ssc-spi";
+			reg = <0xfed40000 0x110>;
+			interrupts = <GIC_SPI 187 IRQ_TYPE_LEVEL_HIGH>;
+			clocks = <&CLK_S_A0_LS 0>;
+			clock-names = "ssc";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_spi0_default>;
+			cs-gpios = <&PIO31 7 0>;
+
+			status = "disabled";
+		};
+
+		miphy365x_phy: miphy365x@0 {
+			compatible = "st,miphy365x-phy";
+			#phy-cells = <1>;
+			reg = <0xfe382000 0x100>,
+			      <0xfe38a000 0x100>,
+			      <0xfe394000 0x100>,
+			      <0xfe804000 0x100>;
+			reg-names = "sata0", "sata1", "pcie0", "pcie1";
+			st,syscfg= <&syscfg_rear>;
+		};
+
+		sata0: sata@fe380000 {
+			compatible = "st,ahci";
+			reg = <0xfe380000 0x1000>;
+			interrupts = <GIC_SPI 157 IRQ_TYPE_NONE>;
+			interrupt-names = "hostc";
+			status = "disabled";
+			phys = <&miphy365x_phy MIPHY365X_SATA0_PORT0>;
+			phy-names = "ahci_phy";
+			resets = <&powerdown STIH416_SATA0_POWERDOWN>,
+				 <&softreset STIH416_SATA0_SOFTRESET>;
+			reset-names = "pwr-dwn", "sw-rst";
+			clock-names = "ahci_clk";
+			clocks = <&CLK_S_A0_LS 0>;
+		};
+
+		pcie1: pcie@fe800000 {
+			compatible = "st,stih416-pcie";
+			device_type = "pci";
+			reg = <0xfe800000 0x00001000   /* cntrl registers */
+			       0xfe808000 0x00000008   /* ahb registers */
+			       0x2fff0000 0x00010000   /* configuration space */
+			       0x40000000 0x80000000   /* lmi mem window */
+			      0x82C 0x04>;            /* syscfg 2523 */
+			reg-names = "pcie cntrl", "pcie ahb", "pcie cs", "mem-window",
+				    "syscfg0";
+
+			interrupts = <GIC_SPI 166 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 169 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 167 IRQ_TYPE_LEVEL_HIGH>;
+			interrupt-names = "pcie inta", "pcie syserr", "msi";
+
+			#address-cells = <3>;
+			#size-cells = <2>;
+			ranges = <0x82000000 0 0x20000000 0x20000000 0 0x05550000   /* non-prefetchable memory */
+				  0xc2000000 0 0x25550000 0x25550000 0 0x0AAA0000>; /* prefetchable memory */
+			st,syscfg = <&syscfg_rear>;
+			st,ahb-fixup = <0x26C208>;
+
+			resets = <&powerdown STIH416_PCIE1_POWERDOWN>,
+				 <&softreset STIH416_PCIE1_SOFTRESET>;
 			reset-names = "power", "softreset";
+
+			phys = <&miphy365x_phy MIPHY365X_PCIE1_PORT1>;
+			phy-names = "pcie_phy";
+
+			status = "disabled";
+		};
+
+		wdt: lpc_wdt@0xfde05000 {
+			compatible = "st,stih416-lpc-wdt";
+			reg = <0xfde05000 0x1000>;
+			clock-names = "lpc_wdt";
+			clocks = <&CLOCKGEN_E 3>;
+			timeout-sec = <600>;
+			st,syscfg = <&syscfg_cpu>;
+		};
+
+		keyscan: keyscan@fe4b0000 {
+			compatible = "st,keypad";
+			status = "disabled";
+			reg = <0xfe4b0000 0x2000>;
+			interrupts = <GIC_SPI 212 IRQ_TYPE_NONE>;
+			clocks	= <&CLK_SYSIN>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_keyscan>;
+			resets	= <&powerdown STIH416_KEYSCAN_POWERDOWN>,
+				  <&softreset STIH416_KEYSCAN_SOFTRESET>;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih418-b2188.dts b/arch/arm/boot/dts/stih418-b2188.dts
--- a/arch/arm/boot/dts/stih418-b2188.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih418-b2188.dts	2019-09-26 21:23:27.168619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Maxime Coquelin <maxime.coquelin@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih418.dtsi"
+#include "stihxxx-b2188.dtsi"
+/ {
+	model = "STiH418 B2188";
+	compatible = "st,stih418-b2188", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x80000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih418-b2199.dts b/arch/arm/boot/dts/stih418-b2199.dts
--- a/arch/arm/boot/dts/stih418-b2199.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih418-b2199.dts	2019-09-26 21:23:27.168619200 +0100
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
  * Author: Maxime Coquelin <maxime.coquelin@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
@@ -8,71 +8,19 @@
  */
 /dts-v1/;
 #include "stih418.dtsi"
+#include "stihxxx-b2199.dtsi"
 / {
 	model = "STiH418 B2199";
-	compatible = "st,stih418-b2199", "st,stih418";
-
-	chosen {
-		bootargs = "console=ttyAS0,115200 clk_ignore_unused";
-		linux,stdout-path = &sbc_serial0;
-	};
+	compatible = "st,stih418-b2199", "st,stih418", "st,stih410";
 
 	memory {
 		device_type = "memory";
 		reg = <0x40000000 0xc0000000>;
 	};
 
-	aliases {
-		ttyAS0 = &sbc_serial0;
-	};
-
-	soc {
-		sbc_serial0: serial@9530000 {
-			status = "okay";
-		};
-
-		leds {
-			compatible = "gpio-leds";
-			red {
-				#gpio-cells = <2>;
-				label = "Front Panel LED";
-				gpios = <&pio4 1 0>;
-				linux,default-trigger = "heartbeat";
-			};
-			green {
-				#gpio-cells = <2>;
-				gpios = <&pio1 3 0>;
-				default-state = "off";
-			};
-		};
-
-		i2c@9842000 {
-			status = "okay";
-		};
-
-		i2c@9843000 {
-			status = "okay";
-		};
-
-		i2c@9844000 {
-			status = "okay";
-		};
-
-		i2c@9845000 {
-			status = "okay";
-		};
-
-		i2c@9540000 {
-			status = "okay";
-		};
-
-		/* SSC11 to HDMI */
-		i2c@9541000 {
-			status = "okay";
-			/* HDMI V1.3a supports Standard mode only */
-			clock-frequency = <100000>;
-			st,i2c-min-scl-pulse-width-us = <0>;
-			st,i2c-min-sda-pulse-width-us = <5>;
-		};
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih418-b2206.dts b/arch/arm/boot/dts/stih418-b2206.dts
--- a/arch/arm/boot/dts/stih418-b2206.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih418-b2206.dts	2019-09-26 21:23:27.168619200 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Fabrice Gasnier <fabrice.gasnier@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih418.dtsi"
+#include "stihxxx-b2206.dtsi"
+/ {
+	model = "STiH418 B2206";
+	compatible = "st,stih418-b2206", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0xc0000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih418-b2264.dts b/arch/arm/boot/dts/stih418-b2264.dts
--- a/arch/arm/boot/dts/stih418-b2264.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih418-b2264.dts	2019-09-26 21:23:27.168619200 +0100
@@ -0,0 +1,25 @@
+/*
+ * Copyright (C) 2017 STMicroelectronics (R&D) Limited.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih418.dtsi"
+#include "stihxxx-b2264.dtsi"
+/ {
+	model = "STiH418 B2264";
+	compatible = "st,stih418-b2264", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0xc0000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih418-clkconf.dtsi b/arch/arm/boot/dts/stih418-clkconf.dtsi
--- a/arch/arm/boot/dts/stih418-clkconf.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih418-clkconf.dtsi	2019-09-26 21:23:27.168619200 +0100
@@ -0,0 +1,129 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih418-clks.h"
+/ {
+	clocks {
+						/* Clockgen D0 */
+		assigned-clocks =   		<&CLK_S_D0_QUADFS VCO>,
+						<&CLK_S_D0_QUADFS 0>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_0>,
+						<&CLK_S_D0_QUADFS 1>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_1>,
+						<&CLK_S_D0_QUADFS 2>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_2>,
+						<&CLK_S_D0_QUADFS 3>,
+						<&CLK_S_D0_FLEXGEN CLK_SPDIFF>,
+						/* Clockgen D2 */
+						<&CLK_S_D2_QUADFS VCO>,
+						<&CLK_S_D2_QUADFS 2>,
+						<&CLK_S_D2_QUADFS 3>,
+						<&CLK_S_D2_FLEXGEN CLK_VP9>,
+						/* Clockgen D3 */
+						<&CLK_S_D3_QUADFS VCO>,
+						<&CLK_S_D3_QUADFS 0>,
+						<&CLK_S_D3_FLEXGEN CLK_STFE_FRC1>,
+						<&CLK_S_D3_FLEXGEN CLK_FRC1_REMOTE>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_FLEXGEN CLK_TSOUT_0>,
+						<&CLK_S_D3_FLEXGEN CLK_TSOUT_1>,
+						<&CLK_S_D3_FLEXGEN CLK_MCHI>,
+						<&CLK_S_D3_FLEXGEN CLK_LPC_0>,
+						/* Clockgen C0 */
+						<&CLK_S_C0_QUADFS 2>,
+						<&CLK_S_C0_FLEXGEN CLK_DSS_LPC>,
+						<&CLK_S_C0_FLEXGEN CLK_MMC_0>,
+						<&CLK_S_C0_QUADFS 3>,
+						<&CLK_S_C0_FLEXGEN CLK_ETH_PHYREF>,
+						<&CLK_S_C0_FLEXGEN CLK_ETH_PHY>,
+						<&CLK_S_C0_FLEXGEN CLK_ICN_GPU>,
+						<&CLK_S_C0_FLEXGEN CLK_PP_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_VID_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_ST231_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_HWPE_HEVC>,
+						<&CLK_S_C0_FLEXGEN CLK_PROC_SC>;
+
+						/* Clockgen D0 */
+		assigned-clock-parents =	<0>,
+						<0>,
+						<&CLK_S_D0_QUADFS 0>,
+						<0>,
+						<&CLK_S_D0_QUADFS 1>,
+						<0>,
+						<&CLK_S_D0_QUADFS 2>,
+						<0>,
+						<&CLK_S_D0_QUADFS 3>,
+						/* Clockgen D2 */
+						<0>,
+						<0>,
+						<0>,
+						<&CLK_S_D2_QUADFS 3>,
+						/* Clockgen D3 */
+						<0>,
+						<0>,
+						<&CLK_S_D3_QUADFS 0>,
+						<&CLK_S_D3_QUADFS 0>,
+						<0>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_SYSIN>,
+						/* Clockgen C0 */
+						<0>,
+						<&CLK_S_C0_QUADFS 2>,
+						<&CLK_S_C0_PLL1 0>,
+						<0>,
+						<0>,
+						<0>,
+						<&CLK_S_C0_PLL1 0>,
+						<&CLK_S_C0_PLL1 0>,
+						<&CLK_S_C0_QUADFS 0>,
+						<&CLK_S_C0_QUADFS 0>,
+						<&CLK_S_C0_PLL1 0>,
+						<&CLK_S_C0_QUADFS 0>;
+
+						/* Clockgen D0 */
+		assigned-clock-rates =		<660000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						/* Clockgen D2 */
+						<660000000>,
+						<297000000>,
+						<430000000>,
+						<0>,
+						/* Clockgen D3 */
+						<660000000>,
+						<27000000>,
+						<27000000>,
+						<27000000>,
+						<108000000>,
+						<108000000>,
+						<108000000>,
+						<27000000>,
+						<600000>,
+						/* Clockgen C0 */
+						<27000000>,
+						<27000000>,
+						<200000000>,
+						<250000000>,
+						<125000000>,
+						<125000000>,
+					        <400000000>,
+						<300000000>,
+						<660000000>,
+						<660000000>,
+						<400000000>,
+						<330000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih418-clks.h b/arch/arm/boot/dts/stih418-clks.h
--- a/arch/arm/boot/dts/stih418-clks.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih418-clks.h	2019-09-26 21:23:27.168619200 +0100
@@ -0,0 +1,34 @@
+/*
+ * This header provides constants clk index STMicroelectronics
+ * STiH418 SoC.
+ */
+#ifndef _DT_BINDINGS_CLK_STIH418
+#define _DT_BINDINGS_CLK_STIH418
+#include "stih410-clks.h"
+
+/* STiH418 introduces new clock outputs compared to STiH410 */
+
+/* CLOCKGEN C0 */
+#define CLK_PROC_BDISP_0        14
+#define CLK_PROC_BDISP_1        15
+#define CLK_TX_ICN_1            23
+#define CLK_ETH_PHYREF          27
+#define CLK_PP_HEVC             35
+#define CLK_CLUST_HEVC          36
+#define CLK_HWPE_HEVC           37
+#define CLK_FC_HEVC             38
+#define CLK_PROC_MIXER		39
+#define CLK_PROC_SC		40
+#define CLK_AVSP_HEVC		41
+
+/* CLOCKGEN D2 */
+#undef CLK_PIX_PIP
+#undef CLK_PIX_GDP1
+#undef CLK_PIX_GDP2
+#undef CLK_PIX_GDP3
+#undef CLK_PIX_GDP4
+
+#define CLK_TMDS_HDMI_DIV2	5
+#define CLK_VP9			47
+
+#endif
diff -urNp a/arch/arm/boot/dts/stih418-clock.dtsi b/arch/arm/boot/dts/stih418-clock.dtsi
--- a/arch/arm/boot/dts/stih418-clock.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih418-clock.dtsi	2019-09-26 21:23:27.168619200 +0100
@@ -1,23 +1,82 @@
 /*
- * Copyright (C) 2015 STMicroelectronics R&D Limited
+ * Copyright (C) 2014 STMicroelectronics
+ * Author: Pankaj Dev <pankaj.dev@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
  */
-#include <dt-bindings/clock/stih418-clks.h>
+#include "stih418-clks.h"
+#include "stih418-clkconf.dtsi"
 / {
+
+	core_clocks {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "simple-bus";
+		ranges;
+
+                delta_core:delta_core@5208 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x340>;
+                        #power-domain-cells = <0>;
+                };
+
+                hva_core:hva_core@5209 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x344>;
+                        #power-domain-cells = <0>;
+                };
+
+                stbe_core:stbe_core@5210 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x348>;
+                        #power-domain-cells = <0>;
+                };
+
+                hades_core:hades_core@5211 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x34c>;
+                        #power-domain-cells = <0>;
+                };
+
+		hqvdp10_core:hqvdp10_core@5212 {
+			compatible = "st,core-pd";
+			st,syscfg = <&syscfg_core 0x350>;
+			#power-domain-cells = <0>;
+                };
+
+                hqvdp11_core:hqvdp11_core@5213 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x354>;
+                        #power-domain-cells = <0>;
+                };
+
+                hqvdp12_core:hqvdp12_core@5214 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x358>;
+                        #power-domain-cells = <0>;
+                };
+
+		core_grp:core_grp {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&stbe_core>, <&hva_core>;
+		};
+	};
+
 	clocks {
 		#address-cells = <1>;
 		#size-cells = <1>;
 		ranges;
 
 		compatible = "st,stih418-clk", "simple-bus";
+		power-domains = <&core_grp>;
 
 		/*
 		 * Fixed 30MHz oscillator inputs to SoC
 		 */
-		clk_sysin: clk-sysin {
+		CLK_SYSIN: CLK_SYSIN {
 			#clock-cells = <0>;
 			compatible = "fixed-clock";
 			clock-frequency = <30000000>;
@@ -27,321 +86,309 @@
 		/*
 		 * ARM Peripheral clock for timers
 		 */
-		arm_periph_clk: clk-m-a9-periphs {
+		arm_periph_clk: CLK_M_A9_PERIPHS {
 			#clock-cells = <0>;
 			compatible = "fixed-factor-clock";
-			clocks = <&clk_m_a9>;
+			clocks = <&CLK_M_A9>;
 			clock-div = <2>;
 			clock-mult = <1>;
 		};
 
 		/*
 		 * A9 PLL.
+		 *
 		 */
-		clockgen-a9@92b0000 {
+		clockgenA9 {
 			compatible = "st,clkgen-c32";
 			reg = <0x92b0000 0xffff>;
 
-			clockgen_a9_pll: clockgen-a9-pll {
-				#clock-cells = <1>;
-				compatible = "st,stih407-plls-c32-a9", "st,clkgen-plls-c32";
-
-				clocks = <&clk_sysin>;
+			CLOCKGEN_A9_PLL: CLOCKGEN_A9_PLL {
+				compatible = "st,stih418-plls-c28-a9", "st,clkgen-plls-c32";
 
-				clock-output-names = "clockgen-a9-pll-odf";
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLOCKGEN_A9_PLL_ODF";
 			};
 		};
 
 		/*
 		 * ARM CPU related clocks.
 		 */
-		clk_m_a9: clk-m-a9@92b0000 {
-			#clock-cells = <0>;
+		CLK_M_A9: CLK_M_A9 {
 			compatible = "st,stih407-clkgen-a9-mux", "st,clkgen-mux";
-			reg = <0x92b0000 0x10000>;
-
-			clocks = <&clockgen_a9_pll 0>,
-				 <&clockgen_a9_pll 0>,
-				 <&clk_s_c0_flexgen 13>,
-				 <&clk_m_a9_ext2f_div2>;
+			#clock-cells = <0>;
+			reg = <0x92b0000 0x1000>;
+			clocks = <&CLOCKGEN_A9_PLL 0>,
+				 <&CLOCKGEN_A9_PLL 0>,
+				 <&CLK_S_C0_FLEXGEN 13>,
+				 <&CLK_M_A9_EXT2F_DIV2>;
 		};
 
 		/*
 		 * ARM Peripheral clock for timers
 		 */
-		clk_m_a9_ext2f_div2: clk-m-a9-ext2f-div2s {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
 
-			clocks = <&clk_s_c0_flexgen 13>;
-
-			clock-output-names = "clk-m-a9-ext2f-div2";
+		CLK_M_A9_EXT2F_DIV2: CLK_M_A9_EXT2F_DIV2S {
+			compatible = "fixed-factor-clock";
 
+			#clock-cells = <0>;
+			clock-output-names = "CLK_M_A9_EXT2F_DIV2";
+			clocks = <&CLK_S_C0_FLEXGEN 13>;
 			clock-div = <2>;
 			clock-mult = <1>;
 		};
 
 		/*
-		 * Bootloader initialized system infrastructure clock for
-		 * serial devices.
+		 * ClockGenAs on SASG2
 		 */
-		clk_ext2f_a9: clockgen-c0@13 {
-			#clock-cells = <0>;
-			compatible = "fixed-clock";
-			clock-frequency = <200000000>;
-			clock-output-names = "clk-s-icn-reg-0";
-		};
 
-		clockgen-a@090ff000 {
+		clockgenA@090ff000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x90ff000 0x1000>;
 
-			clk_s_a0_pll: clk-s-a0-pll {
-				#clock-cells = <1>;
+			CLK_S_A0_PLL: CLK_S_A0_PLL {
 				compatible = "st,stih407-plls-c32-a0", "st,clkgen-plls-c32";
 
-				clocks = <&clk_sysin>;
-
-				clock-output-names = "clk-s-a0-pll-ofd-0";
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_A0_PLL_ODF_0";
 			};
 
-			clk_s_a0_flexgen: clk-s-a0-flexgen {
+			CLK_S_A0_FLEXGEN: CLK_S_A0_FLEXGEN {
 				compatible = "st,flexgen";
 
 				#clock-cells = <1>;
-
-				clocks = <&clk_s_a0_pll 0>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-ic-lmi0",
-						     "clk-ic-lmi1";
+				clocks = <&CLK_S_A0_PLL 0>,
+					 <&CLK_SYSIN>;
+				clock-output-names = "CLK_IC_LMI0",
+						     "CLK_IC_LMI1";
 			};
 		};
 
-		clk_s_c0_quadfs: clk-s-c0-quadfs@9103000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-C", "st,quadfs";
+		CLK_S_C0_QUADFS: CLK_S_C0_QUADFS {
+			compatible = "st,quadfs660-C", "st,quadfs";
 			reg = <0x9103000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-c0-fs0-ch0",
-					     "clk-s-c0-fs0-ch1",
-					     "clk-s-c0-fs0-ch2",
-					     "clk-s-c0-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_C0_FS0_CH0",
+					     "CLK_S_C0_FS0_CH1",
+					     "CLK_S_C0_FS0_CH2",
+					     "CLK_S_C0_FS0_CH3",
+					     "CLK_S_C0_QUADFS.pll";
 		};
 
-		clk_s_c0: clockgen-c@09103000 {
+		CLK_S_C0: clockgenC@09103000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x9103000 0x1000>;
 
-			clk_s_c0_pll0: clk-s-c0-pll0 {
-				#clock-cells = <1>;
-				compatible = "st,stih407-plls-c32-c0_0", "st,clkgen-plls-c32";
-
-				clocks = <&clk_sysin>;
+			CLK_S_C0_PLL0: CLK_S_C0_PLL0 {
+				compatible = "st,plls-c32-cx_0", "st,clkgen-plls-c32";
 
-				clock-output-names = "clk-s-c0-pll0-odf-0";
-			};
-
-			clk_s_c0_pll1: clk-s-c0-pll1 {
 				#clock-cells = <1>;
-				compatible = "st,stih407-plls-c32-c0_1", "st,clkgen-plls-c32";
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_C0_PLL0_ODF_0";
+			};
 
-				clocks = <&clk_sysin>;
+			CLK_S_C0_PLL1: CLK_S_C0_PLL1 {
+				compatible = "st,stih407-plls-conf-c32-c0_1", "st,plls-c32-cx_1", "st,clkgen-plls-c32";
 
-				clock-output-names = "clk-s-c0-pll1-odf-0";
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_C0_PLL1_ODF_0";
 			};
 
-			clk_s_c0_flexgen: clk-s-c0-flexgen {
-				#clock-cells = <1>;
-				compatible = "st,flexgen";
+			CLK_S_C0_FLEXGEN: CLK_S_C0_FLEXGEN {
+				compatible = "st,stih418-flexgen-conf-c0", "st,stih407-clkgenc0", "st,flexgen";
 
-				clocks = <&clk_s_c0_pll0 0>,
-					 <&clk_s_c0_pll1 0>,
-					 <&clk_s_c0_quadfs 0>,
-					 <&clk_s_c0_quadfs 1>,
-					 <&clk_s_c0_quadfs 2>,
-					 <&clk_s_c0_quadfs 3>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-icn-gpu",
-						     "clk-fdma",
-						     "clk-nand",
-						     "clk-hva",
-						     "clk-proc-stfe",
-						     "clk-tp",
-						     "clk-rx-icn-dmu",
-						     "clk-rx-icn-hva",
-						     "clk-icn-cpu",
-						     "clk-tx-icn-dmu",
-						     "clk-mmc-0",
-						     "clk-mmc-1",
-						     "clk-jpegdec",
-						     "clk-icn-reg",
-						     "clk-proc-bdisp-0",
-						     "clk-proc-bdisp-1",
-						     "clk-pp-dmu",
-						     "clk-vid-dmu",
-						     "clk-dss-lpc",
-						     "clk-st231-aud-0",
-						     "clk-st231-gp-1",
-						     "clk-st231-dmu",
-						     "clk-icn-lmi",
-						     "clk-tx-icn-1",
-						     "clk-icn-sbc",
-						     "clk-stfe-frc2",
-						     "clk-eth-phyref",
-						     "clk-eth-ref-phyclk",
-						     "clk-flash-promip",
-						     "clk-main-disp",
-						     "clk-aux-disp",
-						     "clk-compo-dvp",
-						     "clk-tx-icn-hades",
-						     "clk-rx-icn-hades",
-						     "clk-icn-reg-16",
-						     "clk-pp-hevc",
-						     "clk-clust-hevc",
-						     "clk-hwpe-hevc",
-						     "clk-fc-hevc",
-						     "clk-proc-mixer",
-						     "clk-proc-sc",
-						     "clk-avsp-hevc";
+				#clock-cells = <1>;
+				clocks = <&CLK_S_C0_PLL0 0>,
+					 <&CLK_S_C0_PLL1 0>,
+					 <&CLK_S_C0_QUADFS 0>,
+					 <&CLK_S_C0_QUADFS 1>,
+					 <&CLK_S_C0_QUADFS 2>,
+					 <&CLK_S_C0_QUADFS 3>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_ICN_GPU",
+						     "CLK_FDMA",
+						     "CLK_NAND",
+						     "CLK_HVA",
+						     "CLK_PROC_STFE",
+						     "CLK_TP",
+						     "CLK_RX_ICN_DMU",
+						     "CLK_RX_ICN_HVA",
+						     "CLK_ICN_CPU",
+						     "CLK_TX_ICN_DMU",
+						     "CLK_MMC_0",
+						     "CLK_MMC_1",
+						     "CLK_JPEGDEC",
+						     "CLK_ICN_REG",
+						     "CLK_PROC_BDISP_0",
+						     "CLK_PROC_BDISP_1",
+						     "CLK_PP_DMU",
+						     "CLK_VID_DMU",
+						     "CLK_DSS_LPC",
+						     "CLK_ST231_AUD_0",
+						     "CLK_ST231_GP_1",
+						     "CLK_ST231_DMU",
+						     "CLK_ICN_LMI",
+						     "CLK_TX_ICN_1",
+						     "CLK_ICN_SBC",
+						     "CLK_STFE_FRC2",
+						     "CLK_ETH_PHY",
+						     "CLK_ETH_PHYREF",
+						     "CLK_FLASH_PROMIP",
+						     "CLK_MAIN_DISP",
+						     "CLK_AUX_DISP",
+						     "CLK_COMPO_DVP",
+						     "CLK_TX_ICN_HADES",
+						     "CLK_RX_ICN_HADES",
+						     "CLK_ICN_REG_16",
+						     "CLK_PP_HEVC",
+						     "CLK_CLUST_HEVC",
+						     "CLK_HWPE_HEVC",
+						     "CLK_FC_HEVC",
+						     "CLK_PROC_MIXER",
+						     "CLK_PROC_SC",
+						     "CLK_AVSP_HEVC";
 			};
 		};
 
-		clk_s_d0_quadfs: clk-s-d0-quadfs@9104000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-D", "st,quadfs";
+		CLK_S_D0_QUADFS: CLK_S_D0_QUADFS {
+			compatible = "st,stih407-quadfs660-D0", "st,quadfs";
 			reg = <0x9104000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-d0-fs0-ch0",
-					     "clk-s-d0-fs0-ch1",
-					     "clk-s-d0-fs0-ch2",
-					     "clk-s-d0-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D0_FS0_CH0",
+					     "CLK_S_D0_FS0_CH1",
+					     "CLK_S_D0_FS0_CH2",
+					     "CLK_S_D0_FS0_CH3",
+					     "CLK_S_D0_QUADFS.pll";
 		};
 
-		clockgen-d0@09104000 {
-			compatible = "st,clkgen-c32";
+		clockgenD0@09104000 {
+			compatible = "st,flexgen-ref";
 			reg = <0x9104000 0x1000>;
 
-			clk_s_d0_flexgen: clk-s-d0-flexgen {
-				#clock-cells = <1>;
-				compatible = "st,flexgen";
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "",
+					     "CLK_USB2_PHY",
+					     "";
 
-				clocks = <&clk_s_d0_quadfs 0>,
-					 <&clk_s_d0_quadfs 1>,
-					 <&clk_s_d0_quadfs 2>,
-					 <&clk_s_d0_quadfs 3>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-pcm-0",
-						     "clk-pcm-1",
-						     "clk-pcm-2",
-						     "clk-spdiff",
-						     "clk-pcmr10-master",
-						     "clk-usb2-phy";
+			CLK_S_D0_FLEXGEN: CLK_S_D0_FLEXGEN {
+				compatible = "st,stih407-clkgend0", "st,flexgen";
+				#clock-cells = <1>;
+				clocks = <&CLK_S_D0_QUADFS 0>,
+					 <&CLK_S_D0_QUADFS 1>,
+					 <&CLK_S_D0_QUADFS 2>,
+					 <&CLK_S_D0_QUADFS 3>,
+					 <&CLK_SYSIN>;
+				clock-output-names = "CLK_PCM_0",
+						     "CLK_PCM_1",
+						     "CLK_PCM_2",
+						     "CLK_SPDIFF",
+						     "CLK_PCMR10_MASTER";
 			};
 		};
 
-		clk_s_d2_quadfs: clk-s-d2-quadfs@9106000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-D", "st,quadfs";
+		CLK_S_D2_QUADFS: CLK_S_D2_QUADFS {
+			compatible = "st,stih407-quadfs660-conf-D2", "st,stih407-quadfs660-D2", "st,quadfs";
 			reg = <0x9106000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-d2-fs0-ch0",
-					     "clk-s-d2-fs0-ch1",
-					     "clk-s-d2-fs0-ch2",
-					     "clk-s-d2-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D2_FS0_CH0",
+					     "CLK_S_D2_FS0_CH1",
+					     "CLK_S_D2_FS0_CH2",
+					     "CLK_S_D2_FS0_CH3",
+					     "CLK_S_D2_QUADFS.pll";
 		};
 
-		clk_tmdsout_hdmi: clk-tmdsout-hdmi {
+		CLK_TMDSOUT_HDMI: CLK_TMDSOUT_HDMI {
 			#clock-cells = <0>;
 			compatible = "fixed-clock";
-			clock-frequency = <0>;
+			clock-frequency = <594000000>;
 		};
 
-		clockgen-d2@x9106000 {
+		clockgenD2@x9106000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x9106000 0x1000>;
 
-			clk_s_d2_flexgen: clk-s-d2-flexgen {
+			CLK_S_D2_FLEXGEN: CLK_S_D2_FLEXGEN {
+				compatible = "st,stih407-flexgen-conf-d2", "st,stih418-clkgend2", "st,flexgen";
 				#clock-cells = <1>;
-				compatible = "st,flexgen";
 
-				clocks = <&clk_s_d2_quadfs 0>,
-					 <&clk_s_d2_quadfs 1>,
-					 <&clk_s_d2_quadfs 2>,
-					 <&clk_s_d2_quadfs 3>,
-					 <&clk_sysin>,
-					 <&clk_sysin>,
-					 <&clk_tmdsout_hdmi>;
+				clocks = <&CLK_S_D2_QUADFS 0>,
+					 <&CLK_S_D2_QUADFS 1>,
+					 <&CLK_S_D2_QUADFS 2>,
+					 <&CLK_S_D2_QUADFS 3>,
+					 <&CLK_SYSIN>,
+					 <&CLK_SYSIN>,
+					 <&CLK_TMDSOUT_HDMI>;
 
-				clock-output-names = "clk-pix-main-disp",
+				clock-output-names = "CLK_PIX_MAIN_DISP",
 						     "",
 						     "",
 						     "",
 						     "",
-						     "clk-tmds-hdmi-div2",
-						     "clk-pix-aux-disp",
-						     "clk-denc",
-						     "clk-pix-hddac",
-						     "clk-hddac",
-						     "clk-sddac",
-						     "clk-pix-dvo",
-						     "clk-dvo",
-						     "clk-pix-hdmi",
-						     "clk-tmds-hdmi",
-						     "clk-ref-hdmiphy",
+						     "CLK_TMDS_HDMI_DIV2",
+						     "CLK_PIX_AUX_DISP",
+						     "CLK_DENC",
+						     "CLK_PIX_HDDAC",
+						     "CLK_HDDAC",
+						     "CLK_SDDAC",
+						     "CLK_PIX_DVO",
+						     "CLK_DVO",
+						     "CLK_PIX_HDMI",
+						     "CLK_TMDS_HDMI",
+						     "CLK_REF_HDMIPHY",
 						     "", "", "", "", "",
 						     "", "", "", "", "",
 						     "", "", "", "", "",
 						     "", "", "", "", "",
 						     "", "", "", "", "",
 						     "", "", "", "", "",
-						     "", "clk-vp9";
+						     "", "CLK_VP9";
 			};
 		};
 
-		clk_s_d3_quadfs: clk-s-d3-quadfs@9107000 {
-			#clock-cells = <1>;
-			compatible = "st,stih407-quadfs660-D", "st,quadfs";
+		CLK_S_D3_QUADFS: CLK_S_D3_QUADFS {
+			compatible = "st,quadfs660-D", "st,quadfs";
 			reg = <0x9107000 0x1000>;
 
-			clocks = <&clk_sysin>;
-
-			clock-output-names = "clk-s-d3-fs0-ch0",
-					     "clk-s-d3-fs0-ch1",
-					     "clk-s-d3-fs0-ch2",
-					     "clk-s-d3-fs0-ch3";
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D3_FS0_CH0",
+					     "CLK_S_D3_FS0_CH1",
+					     "CLK_S_D3_FS0_CH2",
+					     "CLK_S_D3_FS0_CH3",
+					     "CLK_S_D3_QUADFS.pll";
 		};
 
-		clockgen-d3@9107000 {
+		clockgenD3@9107000 {
 			compatible = "st,clkgen-c32";
 			reg = <0x9107000 0x1000>;
 
-			clk_s_d3_flexgen: clk-s-d3-flexgen {
-				#clock-cells = <1>;
+			CLK_S_D3_FLEXGEN: CLK_S_D3_FLEXGEN {
 				compatible = "st,flexgen";
+				#clock-cells = <1>;
 
-				clocks = <&clk_s_d3_quadfs 0>,
-					 <&clk_s_d3_quadfs 1>,
-					 <&clk_s_d3_quadfs 2>,
-					 <&clk_s_d3_quadfs 3>,
-					 <&clk_sysin>;
-
-				clock-output-names = "clk-stfe-frc1",
-						     "clk-tsout-0",
-						     "clk-tsout-1",
-						     "clk-mchi",
-						     "clk-vsens-compo",
-						     "clk-frc1-remote",
-						     "clk-lpc-0",
-						     "clk-lpc-1";
+				clocks = <&CLK_S_D3_QUADFS 0>,
+					 <&CLK_S_D3_QUADFS 1>,
+					 <&CLK_S_D3_QUADFS 2>,
+					 <&CLK_S_D3_QUADFS 3>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_STFE_FRC1",
+						     "CLK_TSOUT_0",
+						     "CLK_TSOUT_1",
+						     "CLK_MCHI",
+						     "CLK_VSENS_COMPO",
+						     "CLK_FRC1_REMOTE",
+						     "CLK_LPC_0",
+						     "CLK_LPC_1";
 			};
 		};
 	};
diff -urNp a/arch/arm/boot/dts/stih418-display.h b/arch/arm/boot/dts/stih418-display.h
--- a/arch/arm/boot/dts/stih418-display.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih418-display.h	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,53 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author(s): Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *            Carmelo Amoroso <carmelo.amoroso@st.com>
+ *            Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *            Nunzio Raciti <nunzio.raciti@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#ifndef STIH418_DISPLAY_H_
+#define STIH418_DISPLAY_H_
+
+/* display definitions */
+
+#define OUTPUT_IDX_MAIN 0
+#define OUTPUT_IDX_HDMI 1
+#define OUTPUT_IDX_AUX  2
+#define OUTPUT_IDX_DVO  3
+#define OUTPUT_COUNT    4
+
+#define PLANE_IDX_GDP1       0
+#define PLANE_IDX_GDP2       1
+#define PLANE_IDX_GDP3       2
+#define PLANE_IDX_GDP4       3
+#define PLANE_IDX_VID_MAIN_1 4
+#define PLANE_IDX_VID_MAIN_2 5
+#define PLANE_IDX_VBI_MAIN   6
+#define PLANE_IDX_VBI_AUX    7
+#define PLANE_COUNT          8
+
+#define SOURCE_COUNT PLANE_COUNT
+
+#define STMCORE_PLANE_VIDEO     1 /* (1L<<0) */
+#define STMCORE_PLANE_GFX       2 /* (1L<<1) */
+#define STMCORE_PLANE_PREFERRED 4 /* (1L<<2) */
+#define STMCORE_PLANE_SHARED    8 /* (1L<<3) */
+#define STMCORE_PLANE_MEM_VIDEO 16 /* (1L<<4) */
+#define STMCORE_PLANE_MEM_SYS   32 /* (1L<<5) */
+#define STMCORE_PLANE_MEM_ANY   48 /*(STMCORE_PLANE_MEM_VIDEO|STMCORE_PLANE_MEM_SYS)*/
+
+#define STiH418_REGISTER_BASE     0x08D00000
+#define STiH418_DENC_BASE         0x0
+
+#define SDTP_UNPACED            0
+#define SDTP_HDMI1_IFRAME       1
+#define SDTP_DENC1_TELETEXT     2
+#define SDTP_DENC2_TELETEXT     3
+#define SDTP_LAST_ENTRY         3
+
+#endif /* STIH418_DISPLAY_H_ */
diff -urNp a/arch/arm/boot/dts/stih418.dtsi b/arch/arm/boot/dts/stih418.dtsi
--- a/arch/arm/boot/dts/stih418.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih418.dtsi	2019-09-26 21:23:27.168619200 +0100
@@ -1,18 +1,25 @@
 /*
  * Copyright (C) 2014 STMicroelectronics Limited.
- * Author: Peter Griffin <peter.griffin@linaro.org>
+ * Author: Maxime Coquelin <maxime.coquelin@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
- * publishhed by the Free Software Foundation.
+ * published by the Free Software Foundation.
  */
 #include "stih418-clock.dtsi"
 #include "stih407-family.dtsi"
-#include "stih410-pinctrl.dtsi"
 / {
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
+		cpu@0 {
+			cpu0-supply = <&pwm_regulator>;
+		};
+		cpu@1 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <1>;
+		};
 		cpu@2 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a9";
@@ -25,75 +32,166 @@
 		};
 	};
 
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "disabled";
+		regulator-name = "CPU_1V0_AVS";
+		regulator-min-microvolt = <848000>;
+		regulator-max-microvolt = <1147000>;
+		regulator-always-on;
+	};
+
 	soc {
-		usb2_picophy1: phy2 {
-			compatible = "st,stih407-usb2-phy";
-			#phy-cells = <0>;
-			st,syscfg = <&syscfg_core 0xf8 0xf4>;
-			resets = <&softreset STIH407_PICOPHY_SOFTRESET>,
-				 <&picophyreset STIH407_PICOPHY0_RESET>;
-			reset-names = "global", "port";
-		};
-
-		usb2_picophy2: phy3 {
-			compatible = "st,stih407-usb2-phy";
-			#phy-cells = <0>;
-			st,syscfg = <&syscfg_core 0xfc 0xf4>;
-			resets = <&softreset STIH407_PICOPHY_SOFTRESET>,
-				 <&picophyreset STIH407_PICOPHY1_RESET>;
-			reset-names = "global", "port";
-		};
-
-		ohci0: usb@9a03c00 {
-			compatible = "st,st-ohci-300x";
-			reg = <0x9a03c00 0x100>;
-			interrupts = <GIC_SPI 180 IRQ_TYPE_NONE>;
-			clocks = <&clk_s_c0_flexgen CLK_TX_ICN_DISP_0>;
-			resets = <&powerdown STIH407_USB2_PORT0_POWERDOWN>,
-				 <&softreset STIH407_USB2_PORT0_SOFTRESET>;
-			reset-names = "power", "softreset";
-			phys = <&usb2_picophy1>;
-			phy-names = "usb";
-		};
-
-		ehci0: usb@9a03e00 {
-			compatible = "st,st-ehci-300x";
-			reg = <0x9a03e00 0x100>;
-			interrupts = <GIC_SPI 151 IRQ_TYPE_NONE>;
-			pinctrl-names = "default";
-			pinctrl-0 = <&pinctrl_usb0>;
-			clocks = <&clk_s_c0_flexgen CLK_TX_ICN_DISP_0>;
-			resets = <&powerdown STIH407_USB2_PORT0_POWERDOWN>,
-				 <&softreset STIH407_USB2_PORT0_SOFTRESET>;
-			reset-names = "power", "softreset";
-			phys = <&usb2_picophy1>;
-			phy-names = "usb";
-		};
-
-		ohci1: usb@9a83c00 {
-			compatible = "st,st-ohci-300x";
-			reg = <0x9a83c00 0x100>;
-			interrupts = <GIC_SPI 181 IRQ_TYPE_NONE>;
-			clocks = <&clk_s_c0_flexgen CLK_TX_ICN_DISP_0>;
-			resets = <&powerdown STIH407_USB2_PORT1_POWERDOWN>,
-				 <&softreset STIH407_USB2_PORT1_SOFTRESET>;
-			reset-names = "power", "softreset";
-			phys = <&usb2_picophy2>;
-			phy-names = "usb";
-		};
-
-		ehci1: usb@9a83e00 {
-			compatible = "st,st-ehci-300x";
-			reg = <0x9a83e00 0x100>;
-			interrupts = <GIC_SPI 153 IRQ_TYPE_NONE>;
-			pinctrl-names = "default";
-			pinctrl-0 = <&pinctrl_usb1>;
-			clocks = <&clk_s_c0_flexgen CLK_TX_ICN_DISP_0>;
-			resets = <&powerdown STIH407_USB2_PORT1_POWERDOWN>,
-				 <&softreset STIH407_USB2_PORT1_SOFTRESET>;
-			reset-names = "power", "softreset";
-			phys = <&usb2_picophy2>;
-			phy-names = "usb";
+		pmu {
+			compatible = "st,stih418-pmu-syscfg";
+		};
+
+		syscfg_sbc_reg:fvdp-lite-syscfg@9600000{
+			holes = <0x0 0x8
+				 0xc 0x4
+				 0x14 0xc
+				 0x24 0xc
+				 0x34 0xc
+				 0x48 0x8
+				 0x54 0xc
+				 0x68 0x18
+				 0x84 0x15c
+				 0x1e8 0x20
+				 0x210 0x5c0
+				 0x7dc 0x4
+				 0x7e8 0x8
+				 0x7f8 0x8
+				 0x804 0xc
+				 0x818 0x8
+				 0x824 0x28
+				 0x850 0x7b0>;
+		};
+
+		syscfg_core:core-syscfg@92b0000{
+			holes = <0xc 0x14
+				 0x24 0x20
+				 0x48 0x18
+				 0x64 0xc
+				 0x74 0xc
+				 0x84 0x1c
+				 0xac 0x2c
+				 0xe8 0x4
+				 0x104 0xc
+				 0x128 0x18
+				 0x144 0x1c
+				 0x164 0x1c
+				 0x184 0x14
+				 0x1dc 0x24
+				 0x21c 0x4
+				 0x24c 0x48
+				 0x298 0x10
+				 0x2ac 0x10
+				 0x2c8 0x68
+				 0x35c 0x474
+				 0x7d8 0x18
+				 0x808 0x8
+				 0x824 0xc
+				 0x83c 0x38
+				 0x878 0x4
+				 0x89c 0x14
+				 0x8b8 0xc
+				 0x8c8 0xc
+				 0x8d8 0xc
+				 0x8ec 0x24
+				 0x914 0xc
+				 0x924 0x24
+				 0x94c 0x6b4>;
+		};
+
+		socinfo {
+			compatible = "st,stih418-socinfo";
+			st,syscfg = <&syscfg_sbc_reg>;
+		};
+
+		hdmi_formater:hdmi_fformat@8D04000 {
+			holes = <0x14 0x8
+				 0x28 0xd8
+				 0x130 0xd0
+				 0x208 0x8
+				 0x240 0x4
+				 0x24c 0xb8
+				 0x324 0xdc
+				 0x408 0xf8
+				 0x50c 0x4
+				 0x514 0x4
+				 0x524 0xc
+				 0x538 0xc8
+				 0x6a0 0x960>;
+		};
+
+		st_usb_bus_config: st-usb-amba-config {
+			st,set_by_boot;
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			st,gsbuscfg = <0xE 0xF00>;
+		};
+
+		pwm1: pwm@9510000 {
+			compatible = "st,sti-pwm";
+			status = "okay";
+			pinctrl-0 = <&pinctrl_pwm1_chan3_default>;
+		};
+
+		sti_cpufreq_init {
+			compatible = "st,stih407-cpufreq-init";
+			st,operating-points = <
+				/* kHz */
+				1200000 800000 500000
+			 >;
+			sti_bb {
+				compatible = "st,stih407-bb";
+				cpu0-supply = <&pwm_regulator>;
+			};
+		};
+
+		nandbch: nand-bch {
+			compatible = "st,nand-bch-ip-plug", "st,nand-bch-rnd-data-read";
+			reg = <0x09021000 0x1000>, <0x09060800 0x1000>;
+			st,bch-select-reg = <0x09061800>;
+		};
+
+		vqmmc_reg: voltage-regulator {
+			/* Control register for the VSENSE Module */
+			reg = <0x9061804 0x4>;
+		};
+
+		/*
+		 * STiH418 has integrated the FlashSS Core version 2.0
+		 * (FlashSS IP functional specification revision 1.5).
+		 */
+		mmc0: sdhci@09060000 {
+			reg = <0x09060000 0x7ff>, <0x9061808 0x20>;
+			st,flashss-version = <FLASHSS_CORE_VERSION_2_0>;
+		};
+
+		lpm:stm-lpm@9400000 {
+			compatible = "st,stih418-lpm", "st,lpm";
+			st,fw_name = "lpm-fw-STiH418.elf";
+		};
+
+		ddr-pctl-controller {
+			st,interleaving;
+			ddr-pctl@0aa10000 {
+				compatible = "st,stih407-ddr-controller_new", "st,ddr-controller";
+				reg = <0x0aa10000 0x2000>;
+				st,syscfg = <&syscfg_core>;
+			};
+		};
+
+		ddr-mixer {
+			ddr-mixer@0aa12000 {
+				reg = <0x0aa12000 0x2000>;
+			};
+		};
+
+		st231_dmu: st231-dmu@0 {
+			power-domains = <&delta_core>;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih418_TE.dtsi b/arch/arm/boot/dts/stih418_TE.dtsi
--- a/arch/arm/boot/dts/stih418_TE.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih418_TE.dtsi	2019-09-26 21:23:33.080627600 +0100
@@ -0,0 +1,149 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited.
+ * Author(s): Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *            Carmelo Amoroso <carmelo.amoroso@st.com>
+ *            Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *            Nunzio Raciti <nunzio.raciti@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+
+/ {
+
+	soc {
+		/* STFE resources */
+		stfe_hw_config: stfe-hw-config {
+			stfe-version = <2>;
+
+			nb-ib = <7>;
+			nb-mib = <1>;
+			nb-swts = <8>;
+			nb-tsdma = <2>;
+			nb-ccsc = <1>;
+			nb-tag = <3>;
+
+			ib-offset = <0x1000>;
+			tag-offset = <0x2000>;
+			pid-filter-offset = <0x2800>;
+			system-regs-offset = <0x0000>;
+			memdma-offset = <0x4000>;
+			tsdma-offset = <0x3000>;
+			ccsc-offset = <0x2c00>;
+
+			firmware = "pti_memdma_h407.elf";
+		};
+
+
+		tefe@08a20000 {
+			compatible = "st,tango-fe";
+			status = "okay";
+			reg = <0x08a20000 0x10000>, <0x08a00000 0x4000>;
+			power-down = "no";
+			power-domains = <&stbe_core>;
+			reg-names = "stfe", "stfe-ram";
+			interrupts = <GIC_SPI 35 IRQ_TYPE_NONE>, <GIC_SPI 34 IRQ_TYPE_NONE>;
+			interrupt-names = "stfe-idle-irq", "stfe-error-irq";
+			stfe_config = <&stfe_hw_config>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_PROC_STFE>,
+				 <&CLK_S_D3_FLEXGEN CLK_TSOUT_0>,
+				 <&CLK_S_D3_FLEXGEN CLK_TSOUT_1>,
+				 <&CLK_S_D3_FLEXGEN CLK_STFE_FRC1>,
+				 <&CLK_S_C0_FLEXGEN CLK_STFE_FRC2>,
+				 <&CLK_S_D3_FLEXGEN CLK_MCHI>;
+
+			clock-names = "stfe_ccsc",
+				      "stfe_tsout-0",
+				      "stfe_tsout-1",
+				      "stfe_frc-0",
+				      "stfe_frc-1",
+				      "stfe_mchi";
+			clocks_param {
+				clk0 {
+					clk-name = "stfe_ccsc";
+				};
+				clk1 {
+					clk-name = "stfe_tsout-0";
+					clk-rate = <108000000>;
+				};
+				clk2 {
+					clk-name = "stfe_tsout-1";
+					clk-rate = <108000000>;
+				};
+				clk3 {
+					clk-name = "stfe_frc-0";
+					clk-rate = <27000000>;
+				};
+				clk4 {
+					clk-name = "stfe_frc-1";
+					clk-rate = <27000000>;
+				};
+				clk5 {
+					clk-name = "stfe_mchi";
+					clk-rate = <27000000>;
+				};
+			};
+		};
+
+		/* Tango resources */
+		tp_hw_config: tp-hw-config {
+			ddem-offset = <0x00000>;
+			idem-offset = <0x10000>;
+			st-bux-plug-write-offset = <0x28000>;
+			st-bux-plug-read-offset = <0x2a000>;
+			core-ctrl-offset = <0x2d000>;
+			mailbox0-to-xp70-offset = <0x2d020>;
+			mailbox0-to-host-offset = <0x2d030>;
+			writelock-error-offset = <0x2d068>;
+			t3-addr-filter-offset = <0x2d06c>;
+			timer-counter-offset = <0x2e060>;
+
+			firmware = "pti_tp3.elf";
+			tp-ver = <3>;
+
+			nb-vdevice = <16>;
+			nb-slot = <246>;
+			nb-section-filter = <208>;
+			nb-dma-structure = <210>;
+			nb-indexer = <32>;
+			nb-status-blk = <32>;
+
+                        /* Max SF allocated for large pool for a unique
+demux*/
+                        nb-large-pool-sf = <44>;
+                        /* Entry to disable TE feature to reserve memory for
+Large pool SF */
+                        disable-data-entry;
+
+			timer-counter-divider = <0x0b>;
+
+			permit-powerdown;
+
+			sc-bypass;
+		};
+
+		tetp@08880000 {
+			compatible = "st,tango-tp";
+			status = "okay";
+			reg = <0x08880000 0x2f000>;
+			power-down = "no";
+			reg-names = "tp";
+			interrupts = <GIC_SPI 25 IRQ_TYPE_NONE>;
+			power-domains = <&stbe_core>;
+			tp_config = <&tp_hw_config>;
+			clocks = <&CLK_S_C0_FLEXGEN CLK_PROC_TP>,
+				 <&CLK_S_C0_FLEXGEN CLK_PROC_SC>;
+			clock-names = "CLK_TP", "CLK_SC";
+			clocks_param {
+				clk0 {
+					clk-name = "CLK_TP";
+				};
+				clk1 {
+					clk-name = "CLK_SC";
+				};
+			};
+		};
+	};
+};
+
diff -urNp a/arch/arm/boot/dts/stih419-b2188.dts b/arch/arm/boot/dts/stih419-b2188.dts
--- a/arch/arm/boot/dts/stih419-b2188.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih419-b2188.dts	2019-09-26 21:23:27.168619200 +0100
@@ -0,0 +1,30 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih419.dtsi"
+#include "stihxxx-b2188.dtsi"
+/ {
+	model = "STiH419 B2188";
+	/*
+	 * Keeping "st,stih418", used by power-code, so that same code
+	 * can be used by STIH419
+	 */
+	compatible = "st,stih419-b2188", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x80000000 0x80000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih419-b2199.dts b/arch/arm/boot/dts/stih419-b2199.dts
--- a/arch/arm/boot/dts/stih419-b2199.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih419-b2199.dts	2019-09-26 21:23:27.168619200 +0100
@@ -0,0 +1,30 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih419.dtsi"
+#include "stihxxx-b2199.dtsi"
+/ {
+	model = "STiH419 B2199";
+	/*
+	 * Keeping "st,stih418", used by power-code, so that same code
+	 * can be used by STIH419
+	 */
+	compatible = "st,stih419-b2199", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0xc0000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih419-b2206.dts b/arch/arm/boot/dts/stih419-b2206.dts
--- a/arch/arm/boot/dts/stih419-b2206.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih419-b2206.dts	2019-09-26 21:23:27.168619200 +0100
@@ -0,0 +1,30 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih419.dtsi"
+#include "stihxxx-b2206.dtsi"
+/ {
+	model = "STiH419 B2206";
+	/*
+	 * Keeping "st,stih418", used by power-code, so that same code
+	 * can be used by STIH419
+	 */
+	compatible = "st,stih419-b2206", "st,stih418", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0xc0000000>;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "okay";
+		pwms = <&pwm1 3 8448>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih419-clkconf.dtsi b/arch/arm/boot/dts/stih419-clkconf.dtsi
--- a/arch/arm/boot/dts/stih419-clkconf.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih419-clkconf.dtsi	2019-09-26 21:23:27.168619200 +0100
@@ -0,0 +1,135 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih419-clks.h"
+/ {
+	clocks {
+						/* Clockgen D0 */
+		assigned-clocks =   		<&CLK_S_D0_QUADFS VCO>,
+						<&CLK_S_D0_QUADFS 0>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_0>,
+						<&CLK_S_D0_QUADFS 1>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_1>,
+						<&CLK_S_D0_QUADFS 2>,
+						<&CLK_S_D0_FLEXGEN CLK_PCM_2>,
+						<&CLK_S_D0_QUADFS 3>,
+						<&CLK_S_D0_FLEXGEN CLK_SPDIFF>,
+						/* Clockgen D2 */
+						<&CLK_S_D2_QUADFS VCO>,
+						<&CLK_S_D2_QUADFS 2>,
+						<&CLK_S_D2_QUADFS 3>,
+						<&CLK_S_D2_FLEXGEN CLK_VP9>,
+						/* Clockgen D3 */
+						<&CLK_S_D3_QUADFS VCO>,
+						<&CLK_S_D3_QUADFS 0>,
+						<&CLK_S_D3_FLEXGEN CLK_STFE_FRC1>,
+						<&CLK_S_D3_FLEXGEN CLK_FRC1_REMOTE>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_FLEXGEN CLK_TSOUT_0>,
+						<&CLK_S_D3_FLEXGEN CLK_TSOUT_1>,
+						<&CLK_S_D3_FLEXGEN CLK_MCHI>,
+						<&CLK_S_D3_FLEXGEN CLK_LPC_0>,
+						<&CLK_S_D3_QUADFS 2>,
+						/* Clockgen C0 */
+						<&CLK_S_C0_QUADFS 2>,
+						<&CLK_S_C0_FLEXGEN CLK_DSS_LPC>,
+						<&CLK_S_C0_FLEXGEN CLK_MMC_0>,
+						<&CLK_S_C0_QUADFS 3>,
+						<&CLK_S_C0_FLEXGEN CLK_ETH_PHYREF>,
+						<&CLK_S_C0_FLEXGEN CLK_ETH_PHY>,
+						<&CLK_S_C0_FLEXGEN CLK_ICN_GPU>,
+						<&CLK_S_C0_FLEXGEN CLK_PP_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_VID_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_ST231_DMU>,
+						<&CLK_S_C0_FLEXGEN CLK_HWPE_HEVC>,
+						<&CLK_S_C0_FLEXGEN CLK_PROC_SC>,
+						<&CLK_S_C0_FLEXGEN CLK_PROC_DVP>;
+
+						/* Clockgen D0 */
+		assigned-clock-parents =	<0>,
+						<0>,
+						<&CLK_S_D0_QUADFS 0>,
+						<0>,
+						<&CLK_S_D0_QUADFS 1>,
+						<0>,
+						<&CLK_S_D0_QUADFS 2>,
+						<0>,
+						<&CLK_S_D0_QUADFS 3>,
+						/* Clockgen D2 */
+						<0>,
+						<0>,
+						<0>,
+						<&CLK_S_D2_QUADFS 3>,
+						/* Clockgen D3 */
+						<0>,
+						<0>,
+						<&CLK_S_D3_QUADFS 0>,
+						<&CLK_S_D3_QUADFS 0>,
+						<0>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_S_D3_QUADFS 1>,
+						<&CLK_SYSIN>,
+						<&CLK_S_D3_QUADFS 2>,
+						/* Clockgen C0 */
+						<0>,
+						<&CLK_S_C0_QUADFS 2>,
+						<&CLK_S_C0_PLL1 0>,
+						<0>,
+						<0>,
+						<0>,
+						<&CLK_S_C0_PLL1 0>,
+						<&CLK_S_C0_PLL1 0>,
+						<&CLK_S_C0_QUADFS 0>,
+						<&CLK_S_C0_QUADFS 0>,
+						<&CLK_S_C0_PLL1 0>,
+						<&CLK_S_D3_QUADFS 2>,
+						<&CLK_S_C0_PLL1 0>;
+
+						/* Clockgen D0 */
+		assigned-clock-rates =		<660000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						<50000000>,
+						/* Clockgen D2 */
+						<660000000>,
+						<297000000>,
+						<430000000>,
+						<0>,
+						/* Clockgen D3 */
+						<660000000>,
+						<27000000>,
+						<27000000>,
+						<27000000>,
+						<108000000>,
+						<108000000>,
+						<108000000>,
+						<27000000>,
+						<600000>,
+						<533000000>,
+						/* Clockgen C0 */
+						<27000000>,
+						<27000000>,
+						<200000000>,
+						<250000000>,
+						<125000000>,
+						<125000000>,
+						<400000000>,
+						<240000000>,
+						<660000000>,
+						<660000000>,
+						<400000000>,
+						<533000000>,
+						<400000000>;
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih419-clks.h b/arch/arm/boot/dts/stih419-clks.h
--- a/arch/arm/boot/dts/stih419-clks.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih419-clks.h	2019-09-26 21:23:27.172619200 +0100
@@ -0,0 +1,19 @@
+/*
+ * This header provides constants clk index STMicroelectronics
+ * STiH419 SoC.
+ */
+#ifndef _DT_BINDINGS_CLK_STIH419
+#define _DT_BINDINGS_CLK_STIH419
+#include "stih418-clks.h"
+
+/* CLOCKGEN C0 */
+#undef CLK_TP
+#define CLK_PROC_GDP_COMPO	31
+#define CLK_STBE		40
+#define CLK_PROC_DVP		43
+#define CLK_DVP_PROC		43
+
+/* CLOCKGEN D3 */
+#define CLK_XP70_TSIO		8
+
+#endif
diff -urNp a/arch/arm/boot/dts/stih419-clock.dtsi b/arch/arm/boot/dts/stih419-clock.dtsi
--- a/arch/arm/boot/dts/stih419-clock.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih419-clock.dtsi	2019-09-26 21:23:27.172619200 +0100
@@ -0,0 +1,414 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih419-clks.h"
+#include "stih419-clkconf.dtsi"
+/ {
+
+	core_clocks {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "simple-bus";
+		ranges;
+
+                delta_core:delta_core@5208 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x340>;
+                        #power-domain-cells = <0>;
+                };
+
+                hva_core:hva_core@5209 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x344>;
+                        #power-domain-cells = <0>;
+                };
+
+                stbe_core:stbe_core@5210 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x348>;
+                        #power-domain-cells = <0>;
+                };
+
+                hades_core:hades_core@5211 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x34c>;
+                        #power-domain-cells = <0>;
+                };
+
+		hqvdp10_core:hqvdp10_core@5212 {
+			compatible = "st,core-pd";
+			st,syscfg = <&syscfg_core 0x350>;
+			#power-domain-cells = <0>;
+                };
+
+                hqvdp11_core:hqvdp11_core@5213 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x354>;
+                        #power-domain-cells = <0>;
+                };
+
+                hqvdp12_core:hqvdp12_core@5214 {
+                        compatible = "st,core-pd";
+                        st,syscfg = <&syscfg_core 0x358>;
+                        #power-domain-cells = <0>;
+                };
+
+		slim_core:slim_core@8010 {
+			compatible = "st,core-pd";
+			st,syscfg = <&syscfg_gp_13 0x28>;
+			#power-domain-cells = <0>;
+		};
+
+		vp8_core:vp8_core@8011 {
+			compatible = "st,core-pd";
+			st,syscfg = <&syscfg_gp_13 0x2c>;
+			#power-domain-cells = <0>;
+		};
+
+		vp9_core:vp9_core@8012 {
+			compatible = "st,core-pd";
+			st,syscfg = <&syscfg_gp_13 0x30>;
+			#power-domain-cells = <0>;
+		};
+
+		core_grp:core_grp {
+			compatible = "st,grp-pd";
+			#power-domain-cells = <0>;
+			power-domains = <&stbe_core>, <&hva_core>, <&slim_core>, <&vp8_core>, <&vp9_core>;
+		};
+	};
+
+	clocks {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges;
+
+		compatible = "st,stih419-clk", "simple-bus";
+		power-domains = <&core_grp>;
+
+		/*
+		 * Fixed 30MHz oscillator inputs to SoC
+		 */
+		CLK_SYSIN: CLK_SYSIN {
+			#clock-cells = <0>;
+			compatible = "fixed-clock";
+			clock-frequency = <30000000>;
+			clock-output-names = "CLK_SYSIN";
+		};
+
+		/*
+		 * ARM Peripheral clock for timers
+		 */
+		arm_periph_clk: CLK_M_A9_PERIPHS {
+			#clock-cells = <0>;
+			compatible = "fixed-factor-clock";
+			clocks = <&CLK_M_A9>;
+			clock-div = <2>;
+			clock-mult = <1>;
+		};
+
+		/*
+		 * A9 PLL.
+		 *
+		 */
+		clockgenA9 {
+			compatible = "st,clkgen-c32";
+			reg = <0x92b0000 0xffff>;
+
+			CLOCKGEN_A9_PLL: CLOCKGEN_A9_PLL {
+				compatible = "st,stih418-plls-c28-a9", "st,clkgen-plls-c32";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLOCKGEN_A9_PLL_ODF";
+			};
+		};
+
+		/*
+		 * ARM CPU related clocks.
+		 */
+		CLK_M_A9: CLK_M_A9 {
+			compatible = "st,stih407-clkgen-a9-mux", "st,clkgen-mux";
+			#clock-cells = <0>;
+			reg = <0x92b0000 0x10000>;
+			clocks = <&CLOCKGEN_A9_PLL 0>,
+				 <&CLOCKGEN_A9_PLL 0>,
+				 <&CLK_S_C0_FLEXGEN 13>,
+				 <&CLK_M_A9_EXT2F_DIV2>;
+		};
+
+		/*
+		 * ARM Peripheral clock for timers
+		 */
+
+		CLK_M_A9_EXT2F_DIV2: CLK_M_A9_EXT2F_DIV2S {
+			compatible = "fixed-factor-clock";
+
+			#clock-cells = <0>;
+			clock-output-names = "CLK_M_A9_EXT2F_DIV2";
+			clocks = <&CLK_S_C0_FLEXGEN 13>;
+			clock-div = <2>;
+			clock-mult = <1>;
+		};
+
+		/*
+		 * ClockGenAs on SASG2
+		 */
+
+		clockgenA@090ff000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x90ff000 0x1000>;
+
+			CLK_S_A0_PLL: CLK_S_A0_PLL {
+				compatible = "st,stih407-plls-c32-a0", "st,clkgen-plls-c32";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_A0_PLL_ODF_0";
+			};
+
+			CLK_S_A0_FLEXGEN: CLK_S_A0_FLEXGEN {
+				compatible = "st,flexgen";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_S_A0_PLL 0>,
+					 <&CLK_SYSIN>;
+				clock-output-names = "CLK_IC_LMI0",
+						     "CLK_IC_LMI1";
+			};
+		};
+
+		CLK_S_C0_QUADFS: CLK_S_C0_QUADFS {
+			compatible = "st,quadfs660-C", "st,quadfs";
+			reg = <0x9103000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_C0_FS0_CH0",
+					     "CLK_S_C0_FS0_CH1",
+					     "CLK_S_C0_FS0_CH2",
+					     "CLK_S_C0_FS0_CH3",
+					     "CLK_S_C0_QUADFS.pll";
+		};
+
+		CLK_S_C0: clockgenC@09103000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x9103000 0x1000>;
+
+			CLK_S_C0_PLL0: CLK_S_C0_PLL0 {
+				compatible = "st,plls-c32-cx_0", "st,clkgen-plls-c32";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_C0_PLL0_ODF_0";
+			};
+
+			CLK_S_C0_PLL1: CLK_S_C0_PLL1 {
+				compatible = "st,stih407-plls-conf-c32-c0_1", "st,plls-c32-cx_1", "st,clkgen-plls-c32";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_SYSIN>;
+				clock-output-names = "CLK_S_C0_PLL1_ODF_0";
+			};
+
+			CLK_S_C0_FLEXGEN: CLK_S_C0_FLEXGEN {
+				compatible = "st,stih418-flexgen-conf-c0", "st,stih407-clkgenc0", "st,flexgen";
+
+				#clock-cells = <1>;
+				clocks = <&CLK_S_C0_PLL0 0>,
+					 <&CLK_S_C0_PLL1 0>,
+					 <&CLK_S_C0_QUADFS 0>,
+					 <&CLK_S_C0_QUADFS 1>,
+					 <&CLK_S_C0_QUADFS 2>,
+					 <&CLK_S_C0_QUADFS 3>,
+					 <&CLK_SYSIN>,
+					 <&CLK_SYSIN>,
+					 <&CLK_S_D3_QUADFS 2>;
+
+				clock-output-names = "CLK_ICN_GPU",
+						     "CLK_FDMA",
+						     "CLK_NAND",
+						     "CLK_HVA",
+						     "CLK_PROC_STFE",
+						     "",
+						     "CLK_RX_ICN_DMU",
+						     "CLK_RX_ICN_HVA",
+						     "CLK_ICN_CPU",
+						     "CLK_TX_ICN_DMU",
+						     "CLK_MMC_0",
+						     "CLK_MMC_1",
+						     "CLK_JPEGDEC",
+						     "CLK_ICN_REG",
+						     "CLK_PROC_BDISP_0",
+						     "CLK_PROC_BDISP_1",
+						     "CLK_PP_DMU",
+						     "CLK_VID_DMU",
+						     "CLK_DSS_LPC",
+						     "CLK_ST231_AUD_0",
+						     "CLK_ST231_GP_1",
+						     "CLK_ST231_DMU",
+						     "CLK_ICN_LMI",
+						     "CLK_TX_ICN_1",
+						     "CLK_ICN_SBC",
+						     "CLK_STFE_FRC2",
+						     "CLK_ETH_PHY",
+						     "CLK_ETH_PHYREF",
+						     "CLK_FLASH_PROMIP",
+						     "CLK_MAIN_DISP",
+						     "CLK_AUX_DISP",
+						     "CLK_PROC_GDP_COMPO",
+						     "CLK_TX_ICN_HADES",
+						     "CLK_RX_ICN_HADES",
+						     "CLK_ICN_REG_16",
+						     "CLK_PP_HEVC",
+						     "CLK_CLUST_HEVC",
+						     "CLK_HWPE_HEVC",
+						     "CLK_FC_HEVC",
+						     "CLK_PROC_MIXER",
+						     "CLK_PROC_SC", /* also CLK_STBE */
+						     "CLK_AVSP_HEVC",
+						     "",
+						     "CLK_PROC_DVP";
+			};
+		};
+
+		CLK_S_D0_QUADFS: CLK_S_D0_QUADFS {
+			compatible = "st,stih407-quadfs660-D0", "st,quadfs";
+			reg = <0x9104000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D0_FS0_CH0",
+					     "CLK_S_D0_FS0_CH1",
+					     "CLK_S_D0_FS0_CH2",
+					     "CLK_S_D0_FS0_CH3",
+					     "CLK_S_D0_QUADFS.pll";
+		};
+
+		clockgenD0@09104000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x9104000 0x1000>;
+
+			CLK_S_D0_FLEXGEN: CLK_S_D0_FLEXGEN {
+				compatible = "st,stih407-clkgend0", "st,flexgen";
+				#clock-cells = <1>;
+				clocks = <&CLK_S_D0_QUADFS 0>,
+					 <&CLK_S_D0_QUADFS 1>,
+					 <&CLK_S_D0_QUADFS 2>,
+					 <&CLK_S_D0_QUADFS 3>,
+					 <&CLK_SYSIN>;
+				clock-output-names = "CLK_PCM_0",
+						     "CLK_PCM_1",
+						     "CLK_PCM_2",
+						     "CLK_SPDIFF",
+						     "CLK_PCMR10_MASTER",
+						     "CLK_USB2_PHY";
+			};
+		};
+
+		CLK_S_D2_QUADFS: CLK_S_D2_QUADFS {
+			compatible = "st,stih407-quadfs660-conf-D2", "st,stih407-quadfs660-D2", "st,quadfs";
+			reg = <0x9106000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D2_FS0_CH0",
+					     "CLK_S_D2_FS0_CH1",
+					     "CLK_S_D2_FS0_CH2",
+					     "CLK_S_D2_FS0_CH3",
+					     "CLK_S_D2_QUADFS.pll";
+		};
+
+		CLK_TMDSOUT_HDMI: CLK_TMDSOUT_HDMI {
+			#clock-cells = <0>;
+			compatible = "fixed-clock";
+			clock-frequency = <594000000>;
+		};
+
+		clockgenD2@x9106000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x9106000 0x1000>;
+
+			CLK_S_D2_FLEXGEN: CLK_S_D2_FLEXGEN {
+				compatible = "st,stih407-flexgen-conf-d2", "st,stih418-clkgend2", "st,flexgen";
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_D2_QUADFS 0>,
+					 <&CLK_S_D2_QUADFS 1>,
+					 <&CLK_S_D2_QUADFS 2>,
+					 <&CLK_S_D2_QUADFS 3>,
+					 <&CLK_SYSIN>,
+					 <&CLK_SYSIN>,
+					 <&CLK_TMDSOUT_HDMI>;
+
+				clock-output-names = "CLK_PIX_MAIN_DISP",
+						     "",
+						     "",
+						     "",
+						     "",
+						     "CLK_TMDS_HDMI_DIV2",
+						     "CLK_PIX_AUX_DISP",
+						     "CLK_DENC",
+						     "CLK_PIX_HDDAC",
+						     "CLK_HDDAC",
+						     "CLK_SDDAC",
+						     "CLK_PIX_DVO",
+						     "CLK_DVO",
+						     "CLK_PIX_HDMI",
+						     "CLK_TMDS_HDMI",
+						     "CLK_REF_HDMIPHY",
+						     "", "", "", "", "",
+						     "", "", "", "", "",
+						     "", "", "", "", "",
+						     "", "", "", "", "",
+						     "", "", "", "", "",
+						     "", "", "", "", "",
+						     "", "CLK_VP9";
+			};
+		};
+
+		CLK_S_D3_QUADFS: CLK_S_D3_QUADFS {
+			compatible = "st,quadfs660-D", "st,quadfs";
+			reg = <0x9107000 0x1000>;
+
+			#clock-cells = <1>;
+			clocks = <&CLK_SYSIN>;
+			clock-output-names = "CLK_S_D3_FS0_CH0",
+					     "CLK_S_D3_FS0_CH1",
+					     "CLK_S_D3_FS0_CH2",
+					     "CLK_S_D3_FS0_CH3",
+					     "CLK_S_D3_QUADFS.pll";
+		};
+
+		clockgenD3@9107000 {
+			compatible = "st,clkgen-c32";
+			reg = <0x9107000 0x1000>;
+
+			CLK_S_D3_FLEXGEN: CLK_S_D3_FLEXGEN {
+				compatible = "st,flexgen";
+				#clock-cells = <1>;
+
+				clocks = <&CLK_S_D3_QUADFS 0>,
+					 <&CLK_S_D3_QUADFS 1>,
+					 <&CLK_S_D3_QUADFS 2>,
+					 <&CLK_S_D3_QUADFS 3>,
+					 <&CLK_SYSIN>;
+
+				clock-output-names = "CLK_STFE_FRC1",
+						     "CLK_TSOUT_0",
+						     "CLK_TSOUT_1",
+						     "CLK_MCHI",
+						     "CLK_VSENS_COMPO",
+						     "CLK_FRC1_REMOTE",
+						     "CLK_LPC_0",
+						     "CLK_LPC_1",
+						     "CLK_XP70_TSIO";
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih419.dtsi b/arch/arm/boot/dts/stih419.dtsi
--- a/arch/arm/boot/dts/stih419.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih419.dtsi	2019-09-26 21:23:27.172619200 +0100
@@ -0,0 +1,212 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics Limited.
+ * Author: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stih419-clock.dtsi"
+#include "stih407-family.dtsi"
+/ {
+	cpus {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		cpu@0 {
+			cpu0-supply = <&pwm_regulator>;
+		};
+		cpu@1 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <1>;
+		};
+		cpu@2 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <2>;
+		};
+		cpu@3 {
+			device_type = "cpu";
+			compatible = "arm,cortex-a9";
+			reg = <3>;
+		};
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		status = "disabled";
+		regulator-name = "CPU_1V0_AVS";
+		regulator-min-microvolt = <848000>;
+		regulator-max-microvolt = <1147000>;
+		regulator-always-on;
+	};
+
+	soc {
+		pmu {
+			compatible = "st,stih418-pmu-syscfg";
+		};
+
+		temp0{
+			compatible = "st,stih419-thermal";
+		};
+
+		syscfg_sbc_reg:fvdp-lite-syscfg@9600000{
+			holes = <0x0 0x8
+				 0xc 0x4
+				 0x14 0xc
+				 0x24 0xc
+				 0x34 0xc
+				 0x48 0x8
+				 0x54 0xc
+				 0x68 0x18
+				 0x84 0x15c
+				 0x1e8 0x20
+				 0x210 0x5c0
+				 0x7dc 0x4
+				 0x7e8 0x8
+				 0x7f8 0x8
+				 0x804 0xc
+				 0x818 0x8
+				 0x824 0x28
+				 0x850 0x7b0>;
+		};
+
+		syscfg_core:core-syscfg@92b0000{
+			holes = <0xc 0x14
+				 0x24 0x20
+				 0x48 0x18
+				 0x64 0xc
+				 0x74 0xc
+				 0x84 0x1c
+				 0xac 0x2c
+				 0xe8 0x4
+				 0x104 0xc
+				 0x128 0x18
+				 0x144 0x1c
+				 0x164 0x1c
+				 0x184 0x14
+				 0x1dc 0x24
+				 0x21c 0x4
+				 0x24c 0x48
+				 0x298 0x10
+				 0x2ac 0x10
+				 0x2c8 0x68
+				 0x35c 0x474
+				 0x7d8 0x18
+				 0x808 0x8
+				 0x824 0xc
+				 0x83c 0x38
+				 0x878 0x4
+				 0x89c 0x14
+				 0x8b8 0xc
+				 0x8c8 0xc
+				 0x8d8 0xc
+				 0x8ec 0x24
+				 0x914 0xc
+				 0x924 0x24
+				 0x94c 0x6b4>;
+		};
+
+		/* sysconfig for GP_13 */
+		syscfg_gp_13: gp-13-syscfg@0x0b300000 {
+			compatible = "syscon";
+			reg = <0xb300000 0x1000>;
+			 holes = <0x4 0x24
+				  0x38 0x18
+				  0x58 0x138
+				  0x198 0xe68>;
+                };
+
+		socinfo {
+			compatible = "st,stih418-socinfo";
+			st,syscfg = <&syscfg_sbc_reg>;
+		};
+
+		hdmi_formater:hdmi_fformat@8D04000 {
+			holes = <0x14 0x8
+				 0x28 0xd8
+				 0x130 0xd0
+				 0x208 0x8
+				 0x240 0x4
+				 0x24c 0xb8
+				 0x324 0xdc
+				 0x408 0xf8
+				 0x50c 0x4
+				 0x514 0x4
+				 0x524 0xc
+				 0x538 0xc8
+				 0x6a0 0x960>;
+		};
+
+		st_usb_bus_config: st-usb-amba-config {
+			st,set_by_boot;
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			st,gsbuscfg = <0xE 0xF00>;
+		};
+
+		pwm1: pwm@9510000 {
+			compatible = "st,sti-pwm";
+			status = "okay";
+			pinctrl-0 = <&pinctrl_pwm1_chan3_default>;
+		};
+
+		sti_cpufreq_init {
+			compatible = "st,stih419-cpufreq-init";
+			st,operating-points = <
+				/* kHz */
+				1200000 800000 500000
+			 >;
+			sti_bb {
+				compatible = "st,stih407-bb";
+				cpu0-supply = <&pwm_regulator>;
+			};
+		};
+
+		nandbch: nand-bch {
+			compatible = "st,nand-bch-ip-plug", "st,nand-bch-rnd-data-read";
+			reg = <0x09021000 0x1000>, <0x09060800 0x1000>;
+			st,bch-select-reg = <0x09061800>;
+		};
+
+		vqmmc_reg: voltage-regulator {
+			/* Control register for the VSENSE Module */
+			reg = <0x9061804 0x4>;
+		};
+
+		/*
+		 * STiH419 has integrated the FlashSS Core version 2.0
+		 * (FlashSS IP functional specification revision 1.5).
+		 */
+		mmc0: sdhci@09060000 {
+			reg = <0x09060000 0x7ff>, <0x9061808 0x20>;
+			st,flashss-version = <FLASHSS_CORE_VERSION_2_0>;
+		};
+
+		lpm:stm-lpm@9400000 {
+			compatible = "st,stih418-lpm", "st,lpm";
+			st,fw_name = "lpm-fw-STiH418.elf";
+		};
+
+		ddr-pctl-controller {
+			st,interleaving;
+			st,ddr_sr_ack_pctl;
+			ddr-pctl@0aa10000 {
+				compatible = "st,stih407-ddr-controller_new", "st,ddr-controller";
+				reg = <0x0aa10000 0x2000>;
+				st,syscfg = <&syscfg_core>;
+			};
+		};
+
+		ddr-mixer {
+			ddr-mixer@0aa12000 {
+				reg = <0x0aa12000 0x2000>;
+			};
+		};
+
+		st231_dmu: st231-dmu@0 {
+			power-domains = <&delta_core>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih41x-b2000.dtsi b/arch/arm/boot/dts/stih41x-b2000.dtsi
--- a/arch/arm/boot/dts/stih41x-b2000.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih41x-b2000.dtsi	2019-09-26 21:23:27.172619200 +0100
@@ -15,7 +15,7 @@
 	};
 
 	chosen {
-		bootargs = "console=ttyAS0,115200 clk_ignore_unused";
+		bootargs = "console=ttyAS0,115200";
 		linux,stdout-path = &serial2;
 	};
 
@@ -23,6 +23,9 @@
 		ttyAS0 = &serial2;
 		ethernet0 = &ethernet0;
 		ethernet1 = &ethernet1;
+		usb0 = &usb0;
+		usb1 = &usb1;
+		usb2 = &usb2;
 	};
 
 	soc {
@@ -35,61 +38,83 @@
 			fp_led {
 				#gpio-cells = <1>;
 				label	= "Front Panel LED";
-				gpios	= <&pio105 7>;
+				gpios	= <&PIO105 7 0>;
 				linux,default-trigger	= "heartbeat";
 			};
 		};
 
-		/* HDMI Tx I2C */
-		i2c@fed41000 {
-			/* HDMI V1.3a supports Standard mode only */
-			clock-frequency = <100000>;
-			i2c-min-scl-pulse-width-us = <0>;
-			i2c-min-sda-pulse-width-us = <5>;
-
-			status = "okay";
-		};
-
 		ethernet0: dwmac@fe810000 {
-			status			= "okay";
+			status 		= "okay";
+			st,tx-retime-src	= "txclk";
+
 			phy-mode		= "mii";
-			pinctrl-0		= <&pinctrl_mii0>;
 
-			snps,reset-gpio 	= <&pio106 2>;
+			snps,reset-gpio 	= <&PIO106 2 0>;
 			snps,reset-active-low;
 			snps,reset-delays-us 	= <0 10000 10000>;
 		};
 
 		ethernet1: dwmac@fef08000 {
-			status			= "disabled";
-			phy-mode		= "mii";
+			status 		= "okay";
 			st,tx-retime-src	= "txclk";
 
-			snps,reset-gpio 	= <&pio4 7>;
+			phy-mode		= "mii";
+
+			snps,reset-gpio 	= <&PIO4 7 0>;
 			snps,reset-active-low;
 			snps,reset-delays-us 	= <0 10000 10000>;
 		};
 
+		lpm:stm-lpm@fe400000 {
+			status = "okay";
+			gpios = <&PIO4 3 0>;
+			lmi,retention-gpio = <&PIO4 4 0>;
+		};
+
+		/* HDMI Tx I2C */
+		i2c@fed41000 {
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+
+			status = "okay";
+		};
+
+		/* On the reference boards, the mmc can be available if use the
+		   b2048 daughter board exclusively plugged on CN22 (often used
+		   for b2032 daughter board (PHY device).
+		   The b2048 can be available with eMMC or SD/MMC slot so
+		   "non-removable" field should be used as consequence of the
+		   selected setup.
+
+		mmc0: sdhci@fe81e000 {
+			status	= "okay";
+			non-removable;
+		};
+		*/
+
+		usb0: usb@fe100000 {
+			status = "okay";
+		};
+
+		usb1: usb@fe200000 {
+			status = "okay";
+		};
+
+		usb2: usb@fe300000 {
+			status = "okay";
+		};
+
 		keyscan: keyscan@fe4b0000 {
 			keypad,num-rows = <4>;
 			keypad,num-columns = <4>;
-			st,debounce-us = <5000>;
-			linux,keymap = < MATRIX_KEY(0x00, 0x00, KEY_F13)
-					 MATRIX_KEY(0x00, 0x01, KEY_F9)
-					 MATRIX_KEY(0x00, 0x02, KEY_F5)
-					 MATRIX_KEY(0x00, 0x03, KEY_F1)
-					 MATRIX_KEY(0x01, 0x00, KEY_F14)
-					 MATRIX_KEY(0x01, 0x01, KEY_F10)
-					 MATRIX_KEY(0x01, 0x02, KEY_F6)
-					 MATRIX_KEY(0x01, 0x03, KEY_F2)
-					 MATRIX_KEY(0x02, 0x00, KEY_F15)
-					 MATRIX_KEY(0x02, 0x01, KEY_F11)
-					 MATRIX_KEY(0x02, 0x02, KEY_F7)
-					 MATRIX_KEY(0x02, 0x03, KEY_F3)
-					 MATRIX_KEY(0x03, 0x00, KEY_F16)
-					 MATRIX_KEY(0x03, 0x01, KEY_F12)
-					 MATRIX_KEY(0x03, 0x02, KEY_F8)
-					 MATRIX_KEY(0x03, 0x03, KEY_F4) >;
+			st,debounce_us = <5000>;
+			linux,keymap = < /* in0	in1	in2	in3 */
+				KEY_F13 KEY_F9  KEY_F5 KEY_F1		/* out0 */
+				KEY_F14 KEY_F10 KEY_F6 KEY_F2		/* out1 */
+				KEY_F15 KEY_F11 KEY_F7 KEY_F3		/* out2 */
+				KEY_F16 KEY_F12 KEY_F8 KEY_F4 >;	/* out3 */
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih41x-b2020.dtsi b/arch/arm/boot/dts/stih41x-b2020.dtsi
--- a/arch/arm/boot/dts/stih41x-b2020.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih41x-b2020.dtsi	2019-09-26 21:23:27.172619200 +0100
@@ -8,75 +8,32 @@
  */
 #include "stih41x-b2020x.dtsi"
 / {
-	memory{
-		device_type = "memory";
-		reg = <0x40000000 0x80000000>;
-	};
-
-	chosen {
-		bootargs = "console=ttyAS0,115200 clk_ignore_unused";
-		linux,stdout-path = &sbc_serial1;
-	};
-
 	aliases {
-		ttyAS0 = &sbc_serial1;
 		ethernet1 = &ethernet1;
 	};
 	soc {
-		sbc_serial1: serial@fe531000 {
-			status = "okay";
-		};
-
-		leds {
-			compatible	= "gpio-leds";
-			red {
-				#gpio-cells = <1>;
-				label	= "Front Panel LED";
-				gpios	= <&pio4 1>;
-				linux,default-trigger	= "heartbeat";
-			};
-			green {
-				gpios	= <&pio4 7>;
-				default-state = "off";
-			};
-		};
-
-		i2c@fed40000 {
-			status = "okay";
+		ethernet1: dwmac@fef08000 {
+			st,tx-retime-src = "clk_125";
+			snps,reset-gpio = <&PIO3 0 0>;
 		};
 
-		/* HDMI Tx I2C */
-		i2c@fed41000 {
-			/* HDMI V1.3a supports Standard mode only */
-			clock-frequency = <100000>;
-			i2c-min-scl-pulse-width-us = <0>;
-			i2c-min-sda-pulse-width-us = <5>;
-
+		lpm:stm-lpm@fe400000 {
 			status = "okay";
-		};
+			gpios = <&PIO3 6 0>;
+			lmi,retention-gpio = <&PIO4 4 0>;
+                };
 
 		i2c@fe540000 {
 			status = "okay";
-		};
 
-		i2c@fe541000 {
-			status = "okay";
-		};
+			#address-cells = <1>;
+			#size-cells = <0>;
 
-		ethernet1: dwmac@fef08000 {
-			status			= "okay";
-			phy-mode		= "rgmii-id";
-			max-speed		= <1000>;
-			st,tx-retime-src	= "clk_125";
-			snps,reset-gpio 	= <&pio3 0>;
-			snps,reset-active-low;
-			snps,reset-delays-us 	= <0 10000 10000>;
-
-			pinctrl-0	= <&pinctrl_rgmii1>;
-		};
-
-		mmc0: sdhci@fe81e000 {
-			bus-width = <8>;
+			eeprom@50 {
+				compatible = "at,24c256";
+				pagesize = <64>;
+				reg = <0x50>;
+			};
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih41x-b2020e.dtsi b/arch/arm/boot/dts/stih41x-b2020e.dtsi
--- a/arch/arm/boot/dts/stih41x-b2020e.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih41x-b2020e.dtsi	2019-09-26 21:23:27.172619200 +0100
@@ -0,0 +1,33 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics (R&D) Limited.
+ * Author: Srinivas Kandagatla <srinivas.kandagatla@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * publishhed by the Free Software Foundation.
+ */
+#include "stih41x-b2020x.dtsi"
+/ {
+	aliases {
+		ethernet1 = &ethernet1;
+	};
+	soc {
+		ethernet1: dwmac@fef08000 {
+			st,tx-retime-src = "clk_125";
+			snps,reset-gpio	= <&PIO0 7 0>;
+		};
+
+		i2c@fe541000 {
+			status = "okay";
+
+			#address-cells = <1>;
+			#size-cells = <0>;
+
+			eeprom@50 {
+				compatible = "at,24c256";
+				pagesize = <64>;
+				reg = <0x50>;
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stih41x-b2020x.dtsi b/arch/arm/boot/dts/stih41x-b2020x.dtsi
--- a/arch/arm/boot/dts/stih41x-b2020x.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih41x-b2020x.dtsi	2019-09-26 21:23:27.172619200 +0100
@@ -1,32 +1,88 @@
 /*
  * Copyright (C) 2013 STMicroelectronics (R&D) Limited.
- * Author: Lee Jones <lee.jones@linaro.org>
+ * Author: Patrice Chotard <patrice.chotard@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
  * publishhed by the Free Software Foundation.
  */
 / {
+	memory{
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &sbc_serial1;
+	};
+
+	aliases {
+		usb0 = &usb0;
+		usb1 = &usb1;
+		usb2 = &usb2;
+	};
+
 	soc {
-		mmc0: sdhci@fe81e000 {
+		sbc_serial1: serial@fe531000 {
 			status = "okay";
 		};
 
-		spifsm: spifsm@fe902000 {
-			#address-cells = <1>;
-			#size-cells    = <1>;
+		leds {
+			compatible	= "gpio-leds";
+			red {
+				#gpio-cells = <1>;
+				label	= "Front Panel LED";
+				gpios	= <&PIO4 1 0>;
+				linux,default-trigger	= "heartbeat";
+			};
+			green {
+				gpios	= <&PIO4 7 0>;
+				default-state = "off";
+			};
+		};
+
+		ethernet1: dwmac@fef08000 {
+			status 		= "okay";
+			phy-mode	= "rgmii-id";
+			snps,reset-active-low;
+			snps,reset-delays-us 	= <0 10000 10000>;
+			pinctrl-0	= <&pinctrl_rgmii1>;
+		};
 
+		usb0: usb@fe100000 {
 			status = "okay";
+		};
 
-			partition@0 {
-				label = "SerialFlash1";
-				reg   = <0x00000000 0x00500000>;
-			};
+		usb1: usb@fe200000 {
+			status = "okay";
+		};
 
-			partition@500000 {
-				label = "SerialFlash2";
-				reg   = <0x00500000 0x00b00000>;
-			};
+		usb2: usb@fe300000 {
+			status = "okay";
+		};
+
+		i2c@fed40000 {
+			status = "okay";
+		};
+
+		/* HDMI Tx I2C */
+		i2c@fed41000 {
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+
+			status = "okay";
 		};
+
+		i2c@fe541000 {
+			status = "okay";
+		};
+
+		mmc0: sdhci@fe81e000 {
+			status = "okay";
+		};
+
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih41x.dtsi b/arch/arm/boot/dts/stih41x.dtsi
--- a/arch/arm/boot/dts/stih41x.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stih41x.dtsi	2019-09-26 21:23:27.172619200 +0100
@@ -1,10 +1,3 @@
-/*
- * Copyright (C) 2014 STMicroelectronics Limited.
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License version 2 as
- * publishhed by the Free Software Foundation.
- */
 / {
 	#address-cells = <1>;
 	#size-cells = <1>;
@@ -29,7 +22,7 @@
 		#interrupt-cells = <3>;
 		interrupt-controller;
 		reg = <0xfffe1000 0x1000>,
-		      <0xfffe0100 0x100>;
+			  <0xfffe0100 0x100>;
 	};
 
 	scu@fffe0000 {
@@ -41,7 +34,7 @@
 		interrupt-parent = <&intc>;
 		compatible = "arm,cortex-a9-global-timer";
 		reg = <0xfffe0200 0x100>;
-		interrupts = <1 11 0x04>;
+		interrupts = <GIC_PPI 11 IRQ_TYPE_LEVEL_HIGH>;
 		clocks = <&arm_periph_clk>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/stih812-b2187.dts b/arch/arm/boot/dts/stih812-b2187.dts
--- a/arch/arm/boot/dts/stih812-b2187.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stih812-b2187.dts	2019-09-26 21:23:27.172619200 +0100
@@ -0,0 +1,293 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Vincent Abriou <vincent.abriou@st.com>
+ * Author: Amelie Delaunay <amelie.delaunay@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+#include "stih410.dtsi"
+/ {
+	model = "STiH812 B2187";
+	compatible = "st,stih812-b2187", "st,stih410";
+
+	memory {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>;
+	};
+
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &sbc_serial0;
+	};
+
+	aliases {
+		ttyAS0 = &sbc_serial0;
+		ethernet0 = &ethernet0;
+		usb0 = &usb0;
+	};
+
+	pwm_regulator: pwm-regulator {
+		compatible = "st,pwm-regulator";
+		regulator-name = "CPU_1V0_AVS";
+		regulator-min-microvolt = <848000>;
+		regulator-max-microvolt = <1147000>;
+		regulator-always-on;
+		pwms = <&pwm1 3 8448>;
+		status = "okay";
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "PCM_out",
+				   "Analog_out", "spdif",
+				   "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player1
+				      &snd_uni_player2 &snd_uni_player3
+				      &snd_uni_reader1 >;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dummy",
+				       "sas-dai-dac", "sas-dai-spdif-out",
+				       "sas-dai-dummy";
+	};
+
+	soc {
+		vqmmc_reg: voltage-regulator {
+			status = "okay";
+		};
+
+		pwm1: pwm@9510000 {
+			compatible = "st,sti-pwm";
+			status = "okay";
+			pinctrl-0 = <&pinctrl_pwm1_chan3_default>;
+		};
+
+		sbc_serial0: serial@9530000 {
+			status = "okay";
+		};
+
+		leds {
+			compatible = "gpio-leds";
+			red {
+				#gpio-cells = <2>;
+				gpios = <&PIO12 0 0>;
+				linux,default-trigger = "heartbeat";
+			};
+			green {
+				#gpio-cells = <2>;
+				gpios = <&PIO11 2 0>;
+				default-state = "off";
+			};
+		};
+
+		rc: rc@09518000 {
+			status = "disabled";
+		};
+
+                /* Fixed 16MHz clock for MCP251x CAN controller */
+                mcp251x_clock: mcp2515 {
+                        compatible = "fixed-clock";
+                        #clock-cells = <0>;
+                        clock-frequency = <16000000>;
+                };
+
+		/* SSC0 to CAN controller */
+		spi0: spi@9840000 {
+			status = "okay";
+                        cs-gpios = <&PIO14 7 0>;
+                        #address-cells = <1>;
+                        #size-cells = <0>;
+
+                        /*CAN over SPI with MCP251x from Microchip */
+                        can0: can@0 {
+                                status = "okay";
+                                compatible = "microchip,mcp2515";
+                                reg = <0>;
+                                spi-max-frequency = <5000000>;
+                                clocks = <&mcp251x_clock>;
+                                interrupt-parent = <&intc>;
+                                interrupts = <&PIO14 1 0>;
+                        };
+		};
+
+		/* SSC1 to Touch screen connector, Audio DAC AK4359 */
+		i2c1: i2c@9841000 {
+			status = "okay";
+		};
+
+		/* SSC2 to MiniPCIe connector, Monitor Controller STDP6028 */
+		i2c2: i2c@9842000 {
+			status = "okay";
+			stftk:st-ftk@4b {
+				compatible = "st,ftk";
+				reg = <0x4b>;
+				status = "okay";
+				touchscreen-size-x = <1280>;
+				touchscreen-size-y = <800>;
+				touchscreen-fuzz-pressure = <0>;
+				touchscreen-max-pressure = <256>;
+				touchscreen-inverted-x;
+				touchscreen-inverted-y;
+				gpio-reset = <&PIO12 6 0>;
+				st,gpio-int = <&PIO17 5 0>;
+				st,fw-file = "st-ftkt.bin";
+			};
+		};
+
+		/* SSC3 to MLB connector, Touch screen connector, Video Decoder ML86V7668A */
+		i2c3: i2c@9843000 {
+			status = "okay";
+			pinctrl-0 = <&pinctrl_i2c3_alt3_0>;
+		};
+
+		/*
+		 * SSC4 to PCIe connector
+		 * Disabled as there are PIOs conflicts with DVO
+		 */
+		i2c4: i2c@9844000 {
+			status = "disabled";
+		};
+
+		/* SSC10 to Generic Connector */
+		i2c@9540000 {
+			status = "okay";
+		};
+
+		/* SSC11 to HDMI */
+		i2c@9541000 {
+			status = "okay";
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+
+			hdmiddc@50 {
+				compatible = "st,sti-hdmiddc";
+				reg = <0x50>;
+			};
+		};
+
+		ethernet0: dwmac@9630000 {
+			st,tx-retime-src = "clkgen";
+			status = "okay";
+			phy-mode = "rgmii";
+			pinctrl-0 = <&pinctrl_rgmii1 &pinctrl_rgmii1_mdio>;
+
+			snps,phy-bus-name = "stmmac";
+			snps,phy-bus-id = <0>;
+			snps,phy-addr = <0>;
+			snps,reset-gpio = <&PIO10 0 0>;
+			snps,reset-active-low;
+			snps,reset-delays-us = <0 10000 1000000>;
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
+		};
+
+		pcie0: pcie@9b00000 {
+			status = "okay";
+		};
+
+		miphy28lp_phy1: miphy28lp@1 {
+			status = "okay";
+		};
+
+		pcie1: pcie@9b10000 {
+			status = "okay";
+		};
+
+		spifsm@9022000 {
+			status = "okay";
+			flash-name = "n25q256";
+			partitions = <&b2187_fsm_partitions>;
+
+			b2187_fsm_partitions: partitions-b2187 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@1400000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+
+		/* Uniperipheral */
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		/* Disabled as there are PIOs conflicts with DVO */
+		snd_uni_reader0: snd-uni-reader@0 {
+			status = "disabled";
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+		/* SSC5 to audio dac buffer */
+		i2c@9845000 {
+			status = "okay";
+			#address-cells = <1>;
+			#size-cells = <0>;
+
+			snd_dac_buffer@4a {
+				compatible = "st6440";
+				reg = <0x4a>;
+				st,source-bus-id = <&snd_uni_player2>;
+				st,buffer-gain = <2>;
+			};
+		};
+
+		mmc0: sdhci@09060000 {
+			status = "okay";
+			non-removable;
+			max-frequency = <200000000>;
+			mmc-cap-uhs-sdr50;
+			mmc-cap-uhs-sdr104;
+			mmc-cap-uhs-ddr50;
+			mmc-cap-1p8;
+		};
+
+		mmc1: sdhci@09080000 {
+			status = "okay";
+		};
+
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO4 0 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stihxxx-b2089.dtsi b/arch/arm/boot/dts/stihxxx-b2089.dtsi
--- a/arch/arm/boot/dts/stihxxx-b2089.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stihxxx-b2089.dtsi	2019-09-26 21:23:27.180619300 +0100
@@ -0,0 +1,272 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include <dt-bindings/input/input.h>
+/ {
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &serial1;
+	};
+
+	aliases {
+		ttyAS0 = &serial1;
+		ethernet0 = &ethernet0;
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "PCM_out",
+				   "Analog_out", "spdif",
+				   "PCM_in", "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player1
+				      &snd_uni_player2 &snd_uni_player3
+				      &snd_uni_reader0 &snd_uni_reader1 >;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dummy",
+				       "sas-dai-dac", "sas-dai-spdif-out",
+				       "sas-dai-dummy","sas-dai-dummy";
+	};
+
+	soc {
+		/* COMMS_ASC1 - UART1 */
+		serial1: serial@9831000 {
+			status = "okay";
+		};
+
+		rc: rc@09518000 {
+			status = "okay";
+		};
+
+		/* SSC4 to AUDIO */
+		i2c4: i2c@9844000 {
+			status = "okay";
+		};
+
+		/* SSC1 to MediaLB/ADC */
+		i2c1: i2c@9841000 {
+			status = "okay";
+		};
+
+		/* SSC0 to NIM-A */
+		i2c0: i2c@9840000 {
+			status = "okay";
+		};
+
+		/* SSC11 to HDMI */
+		i2c11: i2c@9541000 {
+			status = "okay";
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO3 2 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+		};
+
+		gmac1 {
+			rgmii1-0 {
+				st,pins {
+					phyclk = <&PIO2 3 ALT4 OUT NICLK 1750 CLK_B>;
+				};
+			};
+		};
+
+		ethernet0: dwmac@9630000 {
+			status = "okay";
+			phy-mode = "rgmii";
+			st,tx-retime-src = "clkgen";
+			/* In case of using a PHY daughter board (instead
+			 * of the embedded switch) remove fixed link.
+			 *
+			 * pinctrl-0 = <&pinctrl_rgmii1
+			 *		&pinctrl_rgmii1_mdio
+			 *		&pinctrl_rgmii1_mdint>;
+			 * manage: snps,reset-gpio snps,reset-active-low
+			 *	   snps,reset-delays-us
+			 */
+			fixed-link = <1 100 0 0>;
+			snps,phy-addr = <0x1>;
+		};
+
+		/* Disable it in case of using a PHY daughter board */
+
+		/* CLK_ETH_PHY has to reduced to 25MHz and speed fixed to 100
+		 * for stability problems.
+		 */
+		realtek: rtl8367rb {
+			compatible = "realtek,rtl8367rb";
+			status = "okay";
+
+			gpio-reset = <&PIO3 5 0>;
+			gpio-sck = <&PIO1 1 0>;
+			gpio-sda = <&PIO1 0 0>;
+
+			rtl8367rb,extif1;
+			rtl8367rb,extif1-mode = <1>;	// RGMII
+			rtl8367rb,extif1-txdelay = <0>;
+			rtl8367rb,extif1-rxdelay = <1>;
+			rtl8367rb,extif1-force_mode = <1>;
+			rtl8367rb,extif1-txpause = <2>;
+			rtl8367rb,extif1-rxpause = <2>;
+			rtl8367rb,extif1-link = <1>;
+			rtl8367rb,extif1-duplex = <1>;
+			rtl8367rb,extif1-speed = <1>; // 2 Giga speed
+
+			rtl8367rb,extif2;
+			rtl8367rb,extif2-mode = <1>;	// RGMII
+			rtl8367rb,extif2-txdelay = <1>;
+			rtl8367rb,extif2-rxdelay = <1>;
+			rtl8367rb,extif2-force_mode = <1>;
+			rtl8367rb,extif2-txpause = <1>;
+			rtl8367rb,extif2-rxpause = <1>;
+			rtl8367rb,extif2-link = <1>;
+			rtl8367rb,extif2-duplex = <1>;
+			rtl8367rb,extif2-speed = <1>; // 2 Giga speed
+		};
+
+		usb3_phy: usb3_phy@0 {
+			st,auto-calibration;
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
+		};
+
+		/* select internal clock for miphy0 (sata) */
+		miphy28lp_phy0: miphy28lp@0 {
+			st,sata_gen = "gen3";
+			/* set tx impedance compensation */
+			st,tx-impedance-comp;
+			status = "okay";
+		};
+
+		sata0: sata@9b20000 {
+			status = "okay";
+		};
+
+		keyscan: keyscan@94b0000 {
+			keypad,num-rows = <4>;
+			keypad,num-columns = <4>;
+			st,debounce_us = <5000>;
+			linux,keymap = < /* in0	in1	in2    in3 */
+					KEY_F13 KEY_F9  KEY_F5 KEY_F1	/* out0 */
+					KEY_F14 KEY_F10 KEY_F6 KEY_F2	/* out1 */
+					KEY_F15 KEY_F11 KEY_F7 KEY_F3	/* out2 */
+					KEY_F16 KEY_F12 KEY_F8 KEY_F4 >;/* out3 */
+		};
+
+		/* Uniperipheral*/
+		snd_uni_player0: snd-uni-player@0 {
+
+			status = "okay";
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			status = "okay";
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+		gpio_keys {
+			compatible = "gpio-keys";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			button@1 {
+				label = "wakeup";
+				linux,code = <41>;
+				gpios = <&PIO3 3 1>;
+				gpio-key,wakeup;
+			};
+		};
+
+		spifsm: spifsm@9022000 {
+			status = "okay";
+			flash-name = "mx25l25635f";
+			partitions = <&b2089_fsm_partitions>;
+
+			b2089_fsm_partitions: partitions-b2089 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@1400000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+
+		nandbch: nand-bch {
+			status = "okay";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>;		/* delay in us */
+		};
+
+		/* Enable when use the B2143 eMMC daughter board. */
+		mmc0: sdhci@09060000 {
+			non-removable;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stihxxx-b2120.dtsi b/arch/arm/boot/dts/stihxxx-b2120.dtsi
--- a/arch/arm/boot/dts/stihxxx-b2120.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/stihxxx-b2120.dtsi	2019-09-26 21:23:27.180619300 +0100
@@ -7,6 +7,36 @@
  * published by the Free Software Foundation.
  */
 / {
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &sbc_serial0;
+	};
+
+	aliases {
+		ttyAS0 = &sbc_serial0;
+		ethernet0 = &ethernet0;
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "PCM_out",
+				   "Analog_out", "spdif",
+				   "PCM_in", "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player1
+				      &snd_uni_player2 &snd_uni_player3
+				      &snd_uni_reader0 &snd_uni_reader1 >;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dummy",
+				       "sas-dai-dac", "sas-dai-spdif-out",
+				       "sas-dai-dummy","sas-dai-dummy";
+	};
+
 	soc {
 		sbc_serial0: serial@9530000 {
 			status = "okay";
@@ -17,54 +47,240 @@
 			red {
 				#gpio-cells = <2>;
 				label = "Front Panel LED";
-				gpios = <&pio4 1 0>;
+				gpios = <&PIO4 1 0>;
 				linux,default-trigger = "heartbeat";
 			};
 			green {
 				#gpio-cells = <2>;
-				gpios = <&pio1 3 0>;
+				gpios = <&PIO1 3 0>;
 				default-state = "off";
 			};
 		};
 
-		i2c@9842000 {
+		front-panel {
+			compatible = "tm1668-b2120-front-panel";
+			gpios = <&PIO20 5 0>, /* dio */
+				<&PIO20 7 0>, /* sclk */
+				<&PIO20 6 0>; /* stb */
+		};
+
+		rc: rc@09518000 {
 			status = "okay";
 		};
 
-		i2c@9843000 {
+		/* NIM-A */
+		i2c2: i2c@9842000 {
 			status = "okay";
 		};
 
-		i2c@9844000 {
+		/* NIM-B */
+		i2c3: i2c@9843000 {
 			status = "okay";
 		};
 
-		i2c@9845000 {
+		/* SSC4 to PCIe connector */
+		i2c4: i2c@9844000 {
 			status = "okay";
 		};
 
-		i2c@9540000 {
+		/* SSC5 to STV6440,  PCIe connector, I2C Eeprom */
+		i2c5: i2c@9845000 {
+			status = "okay";
+			#address-cells = <1>;
+			#size-cells = <0>;
+
+			snd_dac_buffer@4a {
+				compatible = "st6440";
+				reg = <0x4a>;
+				st,source-bus-id = <&snd_uni_player2>;
+				st,buffer-gain = <2>;
+			};
+		};
+
+		/* SSC10 to STV0368 */
+		i2c10: i2c@9540000 {
 			status = "okay";
 		};
 
 		/* SSC11 to HDMI */
-		hdmiddc: i2c@9541000 {
+		i2c11: i2c@9541000 {
 			status = "okay";
 			/* HDMI V1.3a supports Standard mode only */
 			clock-frequency = <100000>;
 			st,i2c-min-scl-pulse-width-us = <0>;
-			st,i2c-min-sda-pulse-width-us = <5>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO3 2 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+
+			st_wakeup_pin.ext_it {
+				compatible = "st,wakeup-pins";
+				status = "disabled";
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_wk_pin>;
+				wkpin@0 {
+					interrupts = <GIC_SPI 184 IRQ_TYPE_EDGE_RISING>;
+					label = "ext_it_wakeup";
+					st,pio_use = <EXT_IT_WAKEUP_MODE>;
+					st,ext_it_num = <2>;
+				};
+			};
+
+			st_wakeup_pin.pio {
+				compatible = "st,wakeup-pins";
+				status = "disabled";
+				wkpin@0 {
+					label = "pio_wakeup";
+					gpios = <&PIO3 3 0>;
+					st,pio_use = <PIO_WAKEUP_MODE>;
+					st,pio_dir = <GPIO_AS_INPUT>;
+					st,int_enabled;
+				};
+			};
+
+			st_wakeup_pin.pio_polling {
+				compatible = "st,wakeup-pins";
+				status = "disabled";
+				wkpin@0 {
+					label = "pio_polling_wakeup";
+					gpios = <&PIO3 3 0>;
+					st,pio_use = <PIO_WAKEUP_MODE>;
+					st,pio_dir = <GPIO_AS_INPUT>;
+					st,pio_level = <GPIO_ACTIVE_LOW>;
+				};
+			};
+
+		};
+
+		ethernet0: dwmac@9630000 {
+			st,tx-retime-src = "clkgen";
+			status = "okay";
+			phy-mode = "rgmii";
+			fixed-link = <1 1000 0 0>;
+			snps,phy-addr = <0x1>;
+		};
+
+		realtek: rtl8367rb {
+			compatible = "realtek,rtl8367rb";
+			status = "okay";
+
+			gpio-reset = <&PIO0 7 0>;
+			gpio-sck = <&PIO1 1 0>;
+			gpio-sda = <&PIO1 0 0>;
+
+			rtl8367rb,extif1;
+			rtl8367rb,extif1-mode = <1>;	// RGMII
+			rtl8367rb,extif1-txdelay = <0>;
+			rtl8367rb,extif1-rxdelay = <1>;
+			rtl8367rb,extif1-force_mode = <1>;
+			rtl8367rb,extif1-txpause = <2>;
+			rtl8367rb,extif1-rxpause = <2>;
+			rtl8367rb,extif1-link = <1>;
+			rtl8367rb,extif1-duplex = <1>;
+			rtl8367rb,extif1-speed = <2>; // Giga speed
+
+			rtl8367rb,extif2;
+			rtl8367rb,extif2-mode = <1>;	// RGMII
+			rtl8367rb,extif2-txdelay = <1>;
+			rtl8367rb,extif2-rxdelay = <1>;
+			rtl8367rb,extif2-force_mode = <1>;
+			rtl8367rb,extif2-txpause = <1>;
+			rtl8367rb,extif2-rxpause = <1>;
+			rtl8367rb,extif2-link = <1>;
+			rtl8367rb,extif2-duplex = <1>;
+			rtl8367rb,extif2-speed = <2>; // Giga speed
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
 		};
 
-		miphy28lp_phy: miphy28lp@9b22000 {
+                miphy28lp_phy0: miphy28lp@0 {
+                        status = "okay";
+                };
 
-			phy_port0: port@9b22000 {
-				st,osc-rdy;
+		miphy28lp_phy1: miphy28lp@1 {
+			/* SATA via B2136 MiniPCIe to eSATA/SATA board */
+			st,sata_gen	= "gen3";
+			status = "okay";
+		};
+
+		pcie0: pcie@9b00000 {
+			status = "okay";
+		};
+
+		sata1: sata@9b28000 {
+			status = "okay";
+		};
+
+		/* Uniperipheral */
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			status = "okay";
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+		gpio_keys {
+			status = "okay";
+			compatible = "gpio-keys";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			button@1 {
+				label = "wakeup";
+				linux,code = <41>;
+				gpios = <&PIO3 3 1>;
+				gpio-key,wakeup;
 			};
+		};
 
-			phy_port1: port@9b2a000 {
-				st,osc-force-ext;
+		spifsm@9022000 {
+			status = "okay";
+			flash-name = "n25q256";
+			partitions = <&b2120_fsm_partitions>;
+
+			b2120_fsm_partitions: partitions-b2120 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@1400000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
 			};
 		};
+
+		mmc0: sdhci@09060000 {
+			non-removable;
+			status = "okay";
+		};
+		mmc1: sdhci@09080000 {
+			status = "okay";
+		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/stihxxx-b2148.dtsi b/arch/arm/boot/dts/stihxxx-b2148.dtsi
--- a/arch/arm/boot/dts/stihxxx-b2148.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stihxxx-b2148.dtsi	2019-09-26 21:23:27.180619300 +0100
@@ -0,0 +1,252 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Giuseppe Condorelli <giuseppe.condorelli@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/ {
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &sbc_serial0;
+	};
+
+	aliases {
+		ttyAS0 = &sbc_serial0;
+		ethernet0 = &ethernet0;
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "PCM_out",
+				   "Analog_out", "spdif",
+				   "PCM_in", "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player1
+				      &snd_uni_player2 &snd_uni_player3
+				      &snd_uni_reader0 &snd_uni_reader1 >;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dummy",
+				       "sas-dai-dac", "sas-dai-spdif-out",
+				       "sas-dai-dummy","sas-dai-dummy";
+	};
+
+	soc {
+		sbc_serial0: serial@9530000 {
+			status = "okay";
+		};
+
+		leds {
+			compatible = "gpio-leds";
+			red {
+				#gpio-cells = <2>;
+				label = "Front Panel LED";
+				gpios = <&PIO4 1 0>;
+				linux,default-trigger = "heartbeat";
+			};
+			green {
+				#gpio-cells = <2>;
+				gpios = <&PIO1 3 0>;
+				default-state = "off";
+			};
+		};
+
+		rc: rc@09518000 {
+			status = "okay";
+		};
+
+		/* SSC4 to PCIe connector */
+		i2c4: i2c@9844000 {
+			status = "okay";
+		};
+
+		/* SSC5 to STV6440,  PCIe connector, I2C Eeprom */
+		i2c@9845000 {
+			status = "okay";
+		};
+
+		/* SSC10 to STV0368 */
+		i2c@9540000 {
+			status = "okay";
+		};
+
+		/* SSC11 to HDMI */
+		i2c@9541000 {
+			status = "okay";
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+		};
+
+		ethernet0: dwmac@9630000 {
+			st,tx-retime-src = "clkgen";
+			status = "okay";
+			phy-mode = "rgmii";
+			fixed-link = <1 1000 0 0>;
+			snps,phy-addr = <0x1>;
+		};
+
+		realtek: rtl8367rb {
+			compatible = "realtek,rtl8367rb";
+			status = "okay";
+
+			gpio-reset = <&PIO0 7 0>;
+			gpio-sck = <&PIO1 1 0>;
+			gpio-sda = <&PIO1 0 0>;
+
+			rtl8367rb,extif1;
+			rtl8367rb,extif1-mode = <1>;	// RGMII
+			rtl8367rb,extif1-txdelay = <0>;
+			rtl8367rb,extif1-rxdelay = <1>;
+			rtl8367rb,extif1-force_mode = <1>;
+			rtl8367rb,extif1-txpause = <2>;
+			rtl8367rb,extif1-rxpause = <2>;
+			rtl8367rb,extif1-link = <1>;
+			rtl8367rb,extif1-duplex = <1>;
+			rtl8367rb,extif1-speed = <2>; // Giga speed
+
+			rtl8367rb,extif2;
+			rtl8367rb,extif2-mode = <1>;	// RGMII
+			rtl8367rb,extif2-txdelay = <1>;
+			rtl8367rb,extif2-rxdelay = <1>;
+			rtl8367rb,extif2-force_mode = <1>;
+			rtl8367rb,extif2-txpause = <1>;
+			rtl8367rb,extif2-rxpause = <1>;
+			rtl8367rb,extif2-link = <1>;
+			rtl8367rb,extif2-duplex = <1>;
+			rtl8367rb,extif2-speed = <2>; // Giga speed
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
+		};
+
+		/* select internal clock for miphy0 (sata) */
+		miphy28lp_phy0: miphy28lp@0 {
+			st,sata_gen = "gen3";
+			status = "okay";
+		};
+
+		miphy28lp_phy1: miphy28lp@1 {
+			status = "okay";
+		};
+
+		sata1: sata@9b28000 {
+			status = "okay";
+		};
+
+		pcie0: pcie@9b00000 {
+			status = "okay";
+		};
+
+		mmc1: sdhci@09080000 {
+			status = "okay";
+		};
+
+		/* Uniperipheral*/
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			status = "okay";
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+		gpio_keys {
+			compatible = "gpio-keys";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			button@1 {
+				label = "wakeup";
+				linux,code = <41>;
+				gpios = <&PIO3 3 1>;
+				gpio-key,wakeup;
+			};
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO3 2 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+		};
+
+		nandbch: nand-bch {
+			status = "okay";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-csn = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash";
+						reg = <0x00000000 0x20000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hol = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>;		/* delay in us */
+		};
+
+		spifsm@9022000 {
+			status = "okay";
+			flash-name = "n25q256";
+			partitions = <&b2148_fsm_partitions>;
+
+			b2148_fsm_partitions: partitions-b2148 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@1400000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stihxxx-b2188.dtsi b/arch/arm/boot/dts/stihxxx-b2188.dtsi
--- a/arch/arm/boot/dts/stihxxx-b2188.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stihxxx-b2188.dtsi	2019-09-26 21:23:27.180619300 +0100
@@ -0,0 +1,26 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Maxime Coquelin <maxime.coquelin@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include "stihxxx-b2199.dtsi"
+/ {
+	soc {
+		/* audio dac buffer */
+		i2c@9845000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+
+			snd_dac_buffer@4a {
+				compatible = "st6440";
+				reg = <0x4a>;
+				st,source-bus-id = <&snd_uni_player2>;
+				st,buffer-gain = <2>;
+			};
+
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stihxxx-b2199.dtsi b/arch/arm/boot/dts/stihxxx-b2199.dtsi
--- a/arch/arm/boot/dts/stihxxx-b2199.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stihxxx-b2199.dtsi	2019-09-26 21:23:27.180619300 +0100
@@ -0,0 +1,360 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Maxime Coquelin <maxime.coquelin@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/ {
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &sbc_serial0;
+	};
+
+	aliases {
+		ttyAS0 = &sbc_serial0;
+		ethernet0 = &ethernet0;
+		usb0 = &usb0;
+		usb1 = &usb1;
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "PCM_out",
+				   "Analog_out", "spdif",
+				   "PCM_in", "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player1
+				      &snd_uni_player2 &snd_uni_player3
+				      &snd_uni_reader0 &snd_uni_reader1 >;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dummy",
+				       "sas-dai-dac", "sas-dai-spdif-out",
+				       "sas-dai-dummy","sas-dai-dummy";
+	};
+
+	soc {
+		sbc_serial0: serial@9530000 {
+			status = "okay";
+		};
+
+		leds {
+			compatible = "gpio-leds";
+			red {
+				#gpio-cells = <2>;
+				label = "Front Panel LED";
+				gpios = <&PIO4 1 0>;
+				linux,default-trigger = "heartbeat";
+			};
+			green {
+				#gpio-cells = <2>;
+				gpios = <&PIO1 3 0>;
+				default-state = "off";
+			};
+		};
+
+		rc: rc@09518000 {
+			status = "okay";
+		};
+
+		/* NIM-A */
+		i2c2: i2c@9842000 {
+			status = "okay";
+		};
+
+		/* NIM-B */
+		i2c3: i2c@9843000 {
+			status = "okay";
+		};
+
+		/* SSC4 to PCIe connector */
+		i2c4: i2c@9844000 {
+			status = "okay";
+		};
+
+		/* SSC5 to STV6440,  PCIe connector, I2C Eeprom */
+		i2c5: i2c@9845000 {
+			status = "okay";
+		};
+
+		/* SSC10 to STV0368 */
+		i2c10: i2c@9540000 {
+			status = "okay";
+		};
+
+		/* SSC11 to HDMI */
+		i2c11: i2c@9541000 {
+			status = "okay";
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+		};
+
+		gmac1 {
+			rgmii1-0 {
+				st,pins {
+					rxclk = <&PIO2 2 ALT1 IN NICLK 1000 CLK_A>;
+				};
+			};
+		};
+
+		ethernet0: dwmac@9630000 {
+			st,tx-retime-src = "clkgen";
+			status = "okay";
+			phy-mode = "rgmii";
+			fixed-link = <1 1000 0 0>;
+			snps,phy-addr = <0x1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rgmii1>;
+		};
+
+		realtek: rtl8367rb {
+			compatible = "realtek,rtl8367rb";
+			status = "okay";
+
+			gpio-reset = <&PIO0 7 0>;
+			gpio-sck = <&PIO1 1 0>;
+			gpio-sda = <&PIO1 0 0>;
+
+			rtl8367rb,extif1;
+			rtl8367rb,extif1-mode = <1>; // RGMII
+			rtl8367rb,extif1-txdelay = <0>;
+			rtl8367rb,extif1-rxdelay = <1>;
+			rtl8367rb,extif1-force_mode = <1>;
+			rtl8367rb,extif1-txpause = <2>;
+			rtl8367rb,extif1-rxpause = <2>;
+			rtl8367rb,extif1-link = <1>;
+			rtl8367rb,extif1-duplex = <1>;
+			rtl8367rb,extif1-speed = <1>; // 100M speed
+
+			rtl8367rb,extif2;
+			rtl8367rb,extif2-mode = <1>; // RGMII
+			rtl8367rb,extif2-txdelay = <0>;
+			rtl8367rb,extif2-rxdelay = <1>;
+			rtl8367rb,extif2-force_mode = <1>;
+			rtl8367rb,extif2-txpause = <1>;
+			rtl8367rb,extif2-rxpause = <1>;
+			rtl8367rb,extif2-link = <1>;
+			rtl8367rb,extif2-duplex = <1>;
+			rtl8367rb,extif2-speed = <2>; // 1000M speed
+		};
+
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
+		};
+
+		miphy28lp_phy0: miphy28lp@0 {
+                        status = "okay";
+                };
+
+		miphy28lp_phy1: miphy28lp@1 {
+			status = "okay";
+			/* SATA via B2136 MiniPCIe to eSATA/SATA board */
+			st,sata_gen = "gen3";
+		};
+
+		pcie0: pcie@9b00000 {
+			/* Override "lmi mem window" size : 3GB */
+			reg = <0x09b00000 0x00001000
+			       0x2fff0000 0x00010000
+			       0x40000000 0xc0000000   /* lmi mem window */
+			       0xd8 0x04
+			       0xe0 0x04>;
+			status = "okay";
+		};
+
+		pcie1: pcie@9b10000 {
+			/* Override "lmi mem window" size : 3GB */
+			reg = <0x09b10000 0x00001000
+			       0x3fff0000 0x00010000
+			       0x40000000 0xc0000000   /* lmi mem window */
+			       0xdc 0x04
+			       0xe4 0x04>;
+		};
+
+		sata1: sata@9b28000 {
+			status = "okay";
+		};
+
+		mmc0: sdhci@09060000 {
+			status = "okay";
+			non-removable;
+		};
+
+		mmc1: sdhci@09080000 {
+			status = "okay";
+		};
+
+		/* Uniperipheral*/
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+			channels = <2>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2s_2ch_out>;
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			status = "okay";
+			channels = <2>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2s_2ch_in>;
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+		gpio_keys {
+			status = "okay";
+			compatible = "gpio-keys";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			button@1 {
+				label = "wakeup";
+				linux,code = <41>;
+				gpios = <&PIO3 3 1>;
+				gpio-key,wakeup;
+			};
+		};
+
+		spifsm@9022000 {
+			status = "okay";
+			flash-name = "n25q256";
+			partitions = <&b2199_fsm_partitions>;
+
+			b2199_fsm_partitions: partitions-b2199 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@a00000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+
+		nandbch: nand-bch {
+			status = "disabled";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>;		/* delay in us */
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO3 2 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+
+			st_wakeup_pin.ext_it {
+				compatible = "st,wakeup-pins";
+				status = "disabled";
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_wk_pin>;
+				wkpin@0 {
+					interrupts = <GIC_SPI 184 IRQ_TYPE_EDGE_RISING>;
+					label = "ext_it_wakeup";
+					st,pio_use = <EXT_IT_WAKEUP_MODE>;
+					st,ext_it_num = <2>;
+				};
+			};
+
+			st_wakeup_pin.pio {
+				compatible = "st,wakeup-pins";
+				status = "disabled";
+				wkpin@0 {
+					label = "pio_wakeup";
+					gpios = <&PIO3 3 0>;
+					st,pio_use = <PIO_WAKEUP_MODE>;
+					st,pio_dir = <GPIO_AS_INPUT>;
+					st,int_enabled;
+				};
+			};
+
+			st_wakeup_pin.pio_polling {
+				compatible = "st,wakeup-pins";
+				status = "disabled";
+				wkpin@0 {
+					label = "pio_polling_wakeup";
+					gpios = <&PIO3 3 0>;
+					st,pio_use = <PIO_WAKEUP_MODE>;
+					st,pio_dir = <GPIO_AS_INPUT>;
+					st,pio_level = <GPIO_ACTIVE_LOW>;
+				};
+			};
+
+
+		};
+	};
+
+	reserved-memory {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges;
+
+		/* reserved area for wifi coprocessor - 64MB */
+		wifi_isolation: wifi-iso@B0000000 {
+			reg = <0xB0000000 0x4000000>;
+			no-map;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stihxxx-b2206.dtsi b/arch/arm/boot/dts/stihxxx-b2206.dtsi
--- a/arch/arm/boot/dts/stihxxx-b2206.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stihxxx-b2206.dtsi	2019-09-26 21:23:27.180619300 +0100
@@ -0,0 +1,316 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited.
+ * Author: Allen Wu <allen.wu@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include <dt-bindings/input/input.h>
+/ {
+	chosen {
+		bootargs = "console=ttyAS0,115200";
+		linux,stdout-path = &sbc_serial1;
+	};
+
+	aliases {
+		ttyAS0 = &sbc_serial1;
+		ethernet0 = &ethernet0;
+		usb0 = &usb0;
+		usb1 = &usb1;
+	};
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "PCM_out",
+				   "Analog_out", "spdif",
+				   "PCM_in", "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player1
+				      &snd_uni_player2 &snd_uni_player3
+				      &snd_uni_reader0 &snd_uni_reader1 >;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dummy",
+				       "sas-dai-dac", "sas-dai-spdif-out",
+				       "sas-dai-dummy","sas-dai-dummy";
+	};
+
+	soc {
+		pin-controller-sbc {
+			keyscan {
+				pinctrl_keyscan: keyscan {
+					st,pins {
+						keyin0 = <&PIO4 4 ALT4 IN>;
+						keyin1 = <&PIO4 5 ALT4 IN>;
+						keyin2 = <&PIO0 4 ALT2 IN>;
+						keyin3 = <&PIO2 6 ALT2 IN>;
+
+						keyout0 = <&PIO4 6 ALT4 OUT>;
+						keyout1 = <&PIO4 7 ALT4 OUT>;
+						keyout2 = <&PIO5 2 ALT4 OUT>;
+						keyout3 = <&PIO2 7 ALT2 OUT>;
+					};
+				};
+			};
+		};
+
+		sbc_serial1: serial@9531000 {
+			status = "okay";
+		};
+
+		rc: rc@09518000 {
+			status = "okay";
+		};
+
+		/* SSC4 to NIM-A */
+		i2c4: i2c@9844000 {
+			status = "okay";
+		};
+
+		/* SSC5 to NIM-B */
+		i2c5: i2c@9845000 {
+			status = "okay";
+		};
+
+		/* SSC11 to HDMI */
+		i2c11: i2c@9541000 {
+			status = "okay";
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <5>;
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO3 2 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+		};
+
+		gmac1 {
+			rgmii1-0 {
+				st,pins {
+					rxclk = <&PIO2 2 ALT1 IN NICLK 1000 CLK_A>;
+				};
+			};
+		};
+
+		ethernet0: dwmac@9630000 {
+			status = "okay";
+			phy-mode = "rgmii";
+			st,tx-retime-src = "clkgen";
+			fixed-link = <1 1000 0 0>;
+			snps,phy-addr = <0x1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_rgmii1>;
+
+			/* In case of using a PHY daughter board (instead
+			 * of the embedded switch) remove fixed link.
+			 *
+			 * pinctrl-0 = <&pinctrl_rgmii1 &pinctrl_rgmii1_mdio
+			 *              &pinctrl_rgmii1_mdint>;
+			 * snps,reset-gpio = <&PIO17 7 0>;
+			 * snps,reset-active-low;
+			 * snps,reset-delays-us = <0 10000 1000000>;
+			 */
+
+		};
+
+		/* Disable it in case of using a PHY daughter board */
+
+		/* CLK_ETH_PHY has to reduced to 25MHz and speed fixed to 100
+		 * for stability problems.
+		 */
+		realtek: rtl8367rb {
+			compatible = "realtek,rtl8367rb";
+			status = "okay";
+
+			gpio-reset = <&PIO3 5 0>;
+			gpio-sck = <&PIO1 1 0>;
+			gpio-sda = <&PIO1 0 0>;
+
+			rtl8367rb,extif1;
+			rtl8367rb,extif1-mode = <1>; // RGMII
+			rtl8367rb,extif1-txdelay = <0>;
+			rtl8367rb,extif1-rxdelay = <1>;
+			rtl8367rb,extif1-force_mode = <1>;
+			rtl8367rb,extif1-txpause = <2>;
+			rtl8367rb,extif1-rxpause = <2>;
+			rtl8367rb,extif1-link = <1>;
+			rtl8367rb,extif1-duplex = <1>;
+			rtl8367rb,extif1-speed = <1>; // 100M speed
+
+			rtl8367rb,extif2;
+			rtl8367rb,extif2-mode = <1>; // RGMII
+			rtl8367rb,extif2-txdelay = <0>;
+			rtl8367rb,extif2-rxdelay = <1>;
+			rtl8367rb,extif2-force_mode = <1>;
+			rtl8367rb,extif2-txpause = <1>;
+			rtl8367rb,extif2-rxpause = <1>;
+			rtl8367rb,extif2-link = <1>;
+			rtl8367rb,extif2-duplex = <1>;
+			rtl8367rb,extif2-speed = <2>; // 1000M speed
+		};
+
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
+		};
+
+                miphy28lp_phy0: miphy28lp@0 {
+                        status = "okay";
+                };
+
+		miphy28lp_phy1: miphy28lp@1 {
+			st,sata_gen = "gen3";
+			status = "okay";
+		};
+
+		pcie0: pcie@9b00000 {
+			/* Override "lmi mem window" size : 3GB */
+			reg = <0x09b00000 0x00001000
+			       0x2fff0000 0x00010000
+			       0x40000000 0xc0000000   /* lmi mem window */
+			       0xd8 0x04
+			       0xe0 0x04>;
+			status = "okay";
+		};
+
+		pcie1: pcie@9b10000 {
+			/* Override "lmi mem window" size : 3GB */
+			reg = <0x09b10000 0x00001000
+			       0x3fff0000 0x00010000
+			       0x40000000 0xc0000000   /* lmi mem window */
+			       0xdc 0x04
+			       0xe4 0x04>;
+		};
+
+		sata1: sata@9b28000 {
+			status = "okay";
+		};
+
+		keyscan: keyscan@94b0000 {
+			compatible = "st,keypad";
+			status = "disabled";
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_keyscan>;
+			keypad,num-rows = <4>;
+			keypad,num-columns = <4>;
+			st,debounce_us = <5000>;
+			linux,keymap = < /* in0	  in1	in2	in3 */
+				KEY_F13 KEY_F9  KEY_F5 KEY_F1	/* out0 */
+				KEY_F14 KEY_F10 KEY_F6 KEY_F2	/* out1 */
+				KEY_F15 KEY_F11 KEY_F7 KEY_F3	/* out2 */
+				KEY_F16 KEY_F12 KEY_F8 KEY_F4 >;/* out3 */
+		};
+
+		spifsm@9022000 {
+			status = "okay";
+			flash-name = "mx25l25635f";
+			partitions = <&b2206_fsm_partitions>;
+
+			b2206_fsm_partitions: partitions-b2206 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@1400000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+
+		nandbch: nand-bch {
+			status = "okay";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>;		/* delay in us */
+		};
+
+		/* Enable when use the B2143 eMMC daughter board. */
+		mmc0: sdhci@09060000 {
+			non-removable;
+		};
+
+		/* Uniperipheral */
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			status = "okay";
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+		gpio_keys {
+			compatible = "gpio-keys";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			button@1 {
+				label = "wakeup";
+				linux,code = <41>;
+				gpios = <&PIO3 3 1>;
+				gpio-key,wakeup;
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stihxxx-b2264.dtsi b/arch/arm/boot/dts/stihxxx-b2264.dtsi
--- a/arch/arm/boot/dts/stihxxx-b2264.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stihxxx-b2264.dtsi	2019-10-06 16:12:04.228453500 +0100
@@ -0,0 +1,315 @@
+/*
+ * Copyright (C) 2017 STMicroelectronics (R&D) Limited.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/ {
+
+	chosen {
+		bootargs = "console=ttyAS0,115200 earlyprintk ignore_loglevel";
+		linux,stdout-path = &sbc_serial0;
+	};
+
+	aliases {
+		ttyAS0 = &sbc_serial0;
+		ethernet0 = &ethernet0;
+		usb0 = &usb0;
+		usb1 = &usb1;
+	};
+
+	sound {
+		compatible = "st,snd-soc-sti";
+		status = "okay";
+		st,card-name = "sti audio card";
+
+		st,asoc-platform = <&sti_asoc_platform>;
+		st,backend-name  = "HDMI_out", "PCM_out",
+				   "Analog_out", "spdif",
+				   "PCM_in", "HDMI_in";
+		st,backend-cpu-dai = <&snd_uni_player0 &snd_uni_player1
+				      &snd_uni_player2 &snd_uni_player3
+				      &snd_uni_reader0 &snd_uni_reader1 >;
+		st,backend-codec = <&sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec
+				    &sti_sasg_codec &sti_sasg_codec>;
+		st,backend-codec-dai = "sas-dai-dummy", "sas-dai-dummy",
+				       "sas-dai-dac", "sas-dai-spdif-out",
+				       "sas-dai-dummy","sas-dai-dummy";
+	};
+
+	soc {
+		sbc_serial0: serial@9530000 {
+			status = "okay";
+		};
+
+		leds {
+			compatible = "gpio-leds";
+			red {
+				#gpio-cells = <2>;
+				label = "Front Panel LED";
+				gpios = <&PIO4 1 0>;
+				linux,default-trigger = "heartbeat";
+			};
+			green {
+				#gpio-cells = <2>;
+				gpios = <&PIO1 3 0>;
+				default-state = "off";
+			};
+		};
+
+		rc: rc@09518000 {
+			status = "okay";
+		};
+
+		/* SSC5 to STV6440,  PCIe connector, I2C Eeprom */
+		i2c5: i2c@9845000 {
+			status = "okay";
+		};
+
+		/* SSC11 to HDMI */
+		i2c11: i2c@9541000 {
+			status = "okay";
+			/* HDMI V1.3a supports Standard mode only */
+			clock-frequency = <100000>;
+			st,i2c-min-scl-pulse-width-us = <0>;
+			st,i2c-min-sda-pulse-width-us = <1>;
+		};
+
+		gmac1 {
+			rgmii1-0 {
+				st,pins {
+					rxclk = <&PIO2 2 ALT1 IN NICLK 1000 CLK_A>;
+				};
+			};
+		};
+
+		ethernet0: dwmac@9630000 {
+			st,tx-retime-src = "clkgen";
+			status = "okay";
+			phy-mode = "rgmii";
+			pinctrl-0 = <&pinctrl_rgmii1 &pinctrl_rgmii1_mdio>;
+
+			snps,phy-bus-name = "stmmac";
+			snps,phy-bus-id = <0>;
+			snps,phy-addr = <0x04>;
+			snps,reset-gpio = <&PIO0 7 0>;
+			snps,reset-active-low;
+			snps,reset-delays-us = <0 10000 1000000>;
+		};
+
+		pin-controller-sbc {
+			gmac1 {
+				rgmii1-0 {
+					st,pins {
+						rxd0 = <&PIO1 4 ALT1 IN DE_IO 250 CLK_A>;
+						rxd1 = <&PIO1 5 ALT1 IN DE_IO 250 CLK_A>;
+						rxd2 = <&PIO1 6 ALT1 IN DE_IO 250 CLK_A>;
+						rxd3 = <&PIO1 7 ALT1 IN DE_IO 250 CLK_A>;
+						rxdv = <&PIO2 0 ALT1 IN DE_IO 250 CLK_A>;
+					};
+				};
+			};
+		};
+
+		usb0: usb@9A00000 {
+			status = "okay";
+		};
+
+		usb1: usb@9A80000 {
+			status = "okay";
+		};
+
+		st_dwc3: dwc3@8f94000 {
+			status = "okay";
+		};
+
+		miphy28lp_phy0: miphy28lp@0 {
+                        status = "okay";
+                };
+
+		miphy28lp_phy1: miphy28lp@1 {
+			status = "okay";
+			/* SATA via B2136 MiniPCIe to eSATA/SATA board */
+			st,sata_gen = "gen3";
+		};
+
+		pcie0: pcie@9b00000 {
+			/* Override "lmi mem window" size : 3GB */
+			reg = <0x09b00000 0x00001000
+			       0x2fff0000 0x00010000
+			       0x40000000 0xc0000000   /* lmi mem window */
+			       0xd8 0x04
+			       0xe0 0x04>;
+			status = "okay";
+		};
+
+		pcie1: pcie@9b10000 {
+			/* Override "lmi mem window" size : 3GB */
+			reg = <0x09b10000 0x00001000
+			       0x3fff0000 0x00010000
+			       0x40000000 0xc0000000   /* lmi mem window */
+			       0xdc 0x04
+			       0xe4 0x04>;
+		};
+
+		sata1: sata@9b28000 {
+			status = "okay";
+		};
+
+		mmc0: sdhci@09060000 {
+			status = "okay";
+			non-removable;
+		};
+
+		mmc1: sdhci@09080000 {
+			status = "okay";
+		};
+
+		/* Uniperipheral*/
+		snd_uni_player0: snd-uni-player@0 {
+			status = "okay";
+		};
+
+		snd_uni_player1: snd-uni-player@1 {
+			status = "okay";
+			channels = <2>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2s_2ch_out>;
+		};
+
+		snd_uni_player2: snd-uni-player@2 {
+			status = "okay";
+		};
+
+		snd_uni_player3: snd-uni-player@3 {
+			status = "okay";
+		};
+
+		snd_uni_reader0: snd-uni-reader@0 {
+			status = "okay";
+			channels = <2>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&pinctrl_i2s_2ch_in>;
+		};
+
+		snd_uni_reader1: snd-uni-reader@1 {
+			status = "okay";
+		};
+
+		gpio_keys {
+			status = "okay";
+			compatible = "gpio-keys";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			button@1 {
+				label = "wakeup";
+				linux,code = <41>;
+				gpios = <&PIO3 3 1>;
+				gpio-key,wakeup;
+			};
+		};
+
+		spifsm@9022000 {
+			status = "okay";
+			flash-name = "n25q256";
+			partitions = <&b2264_fsm_partitions>;
+
+			b2264_fsm_partitions: partitions-b2264 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "boot";
+					/* 20M */
+					reg = <0x00000000 0x01400000>;
+				};
+				partition@a00000 {
+					label = "rest";
+					/* 12M */
+					reg = <0x01400000 0x00c00000>;
+				};
+			};
+		};
+
+		nandbch: nand-bch {
+			status = "disabled";
+			st,nand-banks = <&nand_banks>;
+		};
+
+		nand_banks: nand-banks {
+			bank0 {
+				/* NAND_BBT_USE_FLASH (4Gbit) */
+				nand-on-flash-bbt;
+				nand-no-autoincr;
+				st,nand-cs = <0>;
+				st,nand-timing-data = <&nand_timing0>;
+				partitions {
+					#address-cells = <1>;
+					#size-cells = <1>;
+					partition@0{
+						label = "NAND Flash 1";
+						reg = <0x00000000 0x1e000000>;
+					};
+				};
+			};
+		};
+
+		nand_timing0: nand-timing {
+			sig-setup = <10>;
+			sig-hold = <10>;
+			CE-deassert = <0>;
+			WE-to-RBn = <100>;
+			wr-on = <10>;
+			wr-off = <30>;
+			rd-on = <10>;
+			rd-off = <30>;
+			chip-delay = <30>;		/* delay in us */
+		};
+
+		lpm:stm-lpm@9400000 {
+			status = "okay";
+			gpios = <&PIO3 2 0>;
+			st,lmi-ret-gpio = <&PIO5 2 0>;
+
+			st_wakeup_pin.ext_it {
+				compatible = "st,wakeup-pins";
+				status = "disabled";
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_wk_pin>;
+				wkpin@0 {
+					interrupts = <GIC_SPI 184 IRQ_TYPE_EDGE_RISING>;
+					label = "ext_it_wakeup";
+					st,pio_use = <EXT_IT_WAKEUP_MODE>;
+					st,ext_it_num = <2>;
+				};
+			};
+
+			st_wakeup_pin.pio {
+				compatible = "st,wakeup-pins";
+				status = "disabled";
+				wkpin@0 {
+					label = "pio_wakeup";
+					gpios = <&PIO3 3 0>;
+					st,pio_use = <PIO_WAKEUP_MODE>;
+					st,pio_dir = <GPIO_AS_INPUT>;
+					st,int_enabled;
+				};
+			};
+
+			st_wakeup_pin.pio_polling {
+				compatible = "st,wakeup-pins";
+				status = "disabled";
+				wkpin@0 {
+					label = "pio_polling_wakeup";
+					gpios = <&PIO3 3 0>;
+					st,pio_use = <PIO_WAKEUP_MODE>;
+					st,pio_dir = <GPIO_AS_INPUT>;
+					st,pio_level = <GPIO_ACTIVE_LOW>;
+				};
+			};
+
+
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/stuib.dtsi b/arch/arm/boot/dts/stuib.dtsi
--- a/arch/arm/boot/dts/stuib.dtsi	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/stuib.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,78 @@
+/*
+ * Copyright 2012 ST-Ericsson AB
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/ {
+	soc-u9500 {
+		i2c@80004000 {
+			stmpe1601: stmpe1601@40 {
+				compatible = "st,stmpe1601";
+				reg = <0x40>;
+				interrupts = <26 0x2>;
+				interrupt-parent = <&gpio6>;
+				interrupt-controller;
+
+				wakeup-source;
+				st,autosleep-timeout = <1024>;
+
+				stmpe_keypad {
+					compatible = "st,stmpe-keypad";
+
+					debounce-interval = <64>;
+					st,scan-count = <8>;
+					st,no-autorepeat;
+
+					linux,keymap = <0x205006b
+							0x4010074
+							0x3050072
+							0x1030004
+							0x502006a
+							0x500000a
+							0x5008b
+							0x706001c
+							0x405000b
+							0x6070003
+							0x3040067
+							0x303006c
+							0x60400e7
+							0x602009e
+							0x4020073
+							0x5050002
+							0x4030069
+							0x3020008>;
+				};
+			};
+		};
+
+		i2c@80110000 {
+			bu21013_tp@0x5c {
+				compatible = "rhom,bu21013_tp";
+				reg = <0x5c>;
+				touch-gpio = <&gpio2 20 0x4>;
+				avdd-supply = <&ab8500_ldo_aux1_reg>;
+
+				rhom,touch-max-x = <384>;
+				rhom,touch-max-y = <704>;
+				rhom,flip-y;
+			};
+
+			bu21013_tp@0x5d {
+				compatible = "rhom,bu21013_tp";
+				reg = <0x5d>;
+				touch-gpio = <&gpio2 20 0x4>;
+				avdd-supply = <&ab8500_ldo_aux1_reg>;
+
+				rhom,touch-max-x = <384>;
+				rhom,touch-max-y = <704>;
+				rhom,flip-y;
+			};
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/sun4i-a10-cubieboard.dts b/arch/arm/boot/dts/sun4i-a10-cubieboard.dts
--- a/arch/arm/boot/dts/sun4i-a10-cubieboard.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sun4i-a10-cubieboard.dts	2015-10-27 00:45:05.000000000 +0000
@@ -2,157 +2,45 @@
  * Copyright 2012 Stefan Roese
  * Stefan Roese <sr@denx.de>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
  *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful,
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- *     You should have received a copy of the GNU General Public
- *     License along with this file; if not, write to the Free
- *     Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston,
- *     MA 02110-1301 USA
- *
- * Or, alternatively,
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use,
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
  */
 
 /dts-v1/;
-#include "sun4i-a10.dtsi"
-#include "sunxi-common-regulators.dtsi"
-
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/pinctrl/sun4i-a10.h>
+/include/ "sun4i-a10.dtsi"
 
 / {
 	model = "Cubietech Cubieboard";
 	compatible = "cubietech,a10-cubieboard", "allwinner,sun4i-a10";
 
-	soc@01c00000 {
-		emac: ethernet@01c0b000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&emac_pins_a>;
-			phy = <&phy1>;
-			status = "okay";
-		};
-
-		mdio@01c0b080 {
-			status = "okay";
-
-			phy1: ethernet-phy@1 {
-				reg = <1>;
-			};
-		};
-
-		mmc0: mmc@01c0f000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_reference_design>;
-			vmmc-supply = <&reg_vcc3v3>;
-			bus-width = <4>;
-			cd-gpios = <&pio 7 1 GPIO_ACTIVE_HIGH>; /* PH1 */
-			cd-inverted;
-			status = "okay";
-		};
-
-		usbphy: phy@01c13400 {
-			usb1_vbus-supply = <&reg_usb1_vbus>;
-			usb2_vbus-supply = <&reg_usb2_vbus>;
-			status = "okay";
-		};
-
-		ehci0: usb@01c14000 {
-			status = "okay";
-		};
-
-		ohci0: usb@01c14400 {
-			status = "okay";
-		};
-
-		ahci: sata@01c18000 {
-			target-supply = <&reg_ahci_5v>;
-			status = "okay";
-		};
-
-		ehci1: usb@01c1c000 {
-			status = "okay";
-		};
+	aliases {
+		serial0 = &uart0;
+		serial1 = &uart1;
+	};
 
-		ohci1: usb@01c1c400 {
-			status = "okay";
-		};
+	chosen {
+		bootargs = "earlyprintk console=ttyS0,115200";
+	};
 
+	soc@01c20000 {
 		pinctrl@01c20800 {
 			led_pins_cubieboard: led_pins@0 {
 				allwinner,pins = "PH20", "PH21";
 				allwinner,function = "gpio_out";
-				allwinner,drive = <SUN4I_PINCTRL_20_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
+				allwinner,drive = <1>;
+				allwinner,pull = <0>;
 			};
 		};
 
-		ir0: ir@01c21800 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&ir0_pins_a>;
-			status = "okay";
-		};
-
 		uart0: serial@01c28000 {
 			pinctrl-names = "default";
 			pinctrl-0 = <&uart0_pins_a>;
 			status = "okay";
 		};
-
-		i2c0: i2c@01c2ac00 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&i2c0_pins_a>;
-			status = "okay";
-
-			axp209: pmic@34 {
-				reg = <0x34>;
-				interrupts = <0>;
-			};
-		};
-
-		i2c1: i2c@01c2b000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&i2c1_pins_a>;
-			status = "okay";
-		};
-
-		spi0: spi@01c05000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&spi0_pins_a>;
-			status = "okay";
-		};
 	};
 
 	leds {
@@ -161,57 +49,14 @@
 		pinctrl-0 = <&led_pins_cubieboard>;
 
 		blue {
-			label = "cubieboard:blue:usr";
-			gpios = <&pio 7 21 GPIO_ACTIVE_HIGH>; /* LED1 */
+			label = "cubieboard::blue";
+			gpios = <&pio 7 21 0>; /* LED1 */
 		};
 
 		green {
-			label = "cubieboard:green:usr";
-			gpios = <&pio 7 20 GPIO_ACTIVE_HIGH>; /* LED2 */
+			label = "cubieboard::green";
+			gpios = <&pio 7 20 0>; /* LED2 */
 			linux,default-trigger = "heartbeat";
 		};
 	};
-
-	reg_ahci_5v: ahci-5v {
-		status = "okay";
-	};
-
-	reg_usb1_vbus: usb1-vbus {
-		status = "okay";
-	};
-
-	reg_usb2_vbus: usb2-vbus {
-		status = "okay";
-	};
-};
-
-#include "axp209.dtsi"
-
-&cpu0 {
-	cpu-supply = <&reg_dcdc2>;
-};
-
-&reg_dcdc2 {
-	regulator-always-on;
-	regulator-min-microvolt = <1000000>;
-	regulator-max-microvolt = <1450000>;
-	regulator-name = "vdd-cpu";
-};
-
-&reg_dcdc3 {
-	regulator-always-on;
-	regulator-min-microvolt = <1000000>;
-	regulator-max-microvolt = <1400000>;
-	regulator-name = "vdd-int-dll";
-};
-
-&reg_ldo1 {
-	regulator-name = "vdd-rtc";
-};
-
-&reg_ldo2 {
-	regulator-always-on;
-	regulator-min-microvolt = <3000000>;
-	regulator-max-microvolt = <3000000>;
-	regulator-name = "avcc";
 };
diff -urNp a/arch/arm/boot/dts/sun4i-a10-hackberry.dts b/arch/arm/boot/dts/sun4i-a10-hackberry.dts
--- a/arch/arm/boot/dts/sun4i-a10-hackberry.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sun4i-a10-hackberry.dts	2015-10-27 00:45:05.000000000 +0000
@@ -3,173 +3,30 @@
  *
  * Maxime Ripard <maxime.ripard@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
  *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful,
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- *     You should have received a copy of the GNU General Public
- *     License along with this file; if not, write to the Free
- *     Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston,
- *     MA 02110-1301 USA
- *
- * Or, alternatively,
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use,
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
  */
 
 /dts-v1/;
-#include "sun4i-a10.dtsi"
-#include "sunxi-common-regulators.dtsi"
-
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/pinctrl/sun4i-a10.h>
+/include/ "sun4i-a10.dtsi"
 
 / {
 	model = "Miniand Hackberry";
 	compatible = "miniand,hackberry", "allwinner,sun4i-a10";
 
-	soc@01c00000 {
-		emac: ethernet@01c0b000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&emac_pins_a>;
-			phy = <&phy0>;
-			status = "okay";
-		};
-
-		mdio@01c0b080 {
-			phy-supply = <&reg_emac_3v3>;
-			status = "okay";
-
-			phy0: ethernet-phy@0 {
-				reg = <0>;
-			};
-		};
-
-		mmc0: mmc@01c0f000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_reference_design>;
-			vmmc-supply = <&reg_vcc3v3>;
-			bus-width = <4>;
-			cd-gpios = <&pio 7 1 GPIO_ACTIVE_HIGH>; /* PH1 */
-			cd-inverted;
-			status = "okay";
-		};
-
-		usbphy: phy@01c13400 {
-			usb1_vbus-supply = <&reg_usb1_vbus>;
-			usb2_vbus-supply = <&reg_usb2_vbus>;
-			status = "okay";
-		};
-
-		ehci0: usb@01c14000 {
-			status = "okay";
-		};
-
-		ohci0: usb@01c14400 {
-			status = "okay";
-		};
-
-		ehci1: usb@01c1c000 {
-			status = "okay";
-		};
-
-		ohci1: usb@01c1c400 {
-			status = "okay";
-		};
-
-		pio: pinctrl@01c20800 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&hackberry_hogs>;
-
-			hackberry_hogs: hogs@0 {
-				allwinner,pins = "PH19";
-				allwinner,function = "gpio_out";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			usb2_vbus_pin_hackberry: usb2_vbus_pin@0 {
-					allwinner,pins = "PH12";
-					allwinner,function = "gpio_out";
-					allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-					allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-		};
-
-		ir0: ir@01c21800 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&ir0_pins_a>;
-			status = "okay";
-		};
+	chosen {
+		bootargs = "earlyprintk console=ttyS0,115200";
+	};
 
+	soc@01c20000 {
 		uart0: serial@01c28000 {
 			pinctrl-names = "default";
 			pinctrl-0 = <&uart0_pins_a>;
 			status = "okay";
 		};
-
-		i2c0: i2c@01c2ac00 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&i2c0_pins_a>;
-			status = "okay";
-
-			axp209: pmic@34 {
-				compatible = "x-powers,axp209";
-				reg = <0x34>;
-				interrupts = <0>;
-
-				interrupt-controller;
-				#interrupt-cells = <1>;
-			};
-		};
-	};
-
-	reg_emac_3v3: emac-3v3 {
-		compatible = "regulator-fixed";
-		regulator-name = "emac-3v3";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		enable-active-high;
-		gpio = <&pio 7 19 GPIO_ACTIVE_HIGH>;
-	};
-
-	reg_usb1_vbus: usb1-vbus {
-		status = "okay";
-	};
-
-	reg_usb2_vbus: usb2-vbus {
-		pinctrl-0 = <&usb2_vbus_pin_hackberry>;
-		gpio = <&pio 7 12 GPIO_ACTIVE_HIGH>;
-		status = "okay";
 	};
 };
diff -urNp a/arch/arm/boot/dts/sun4i-a10-mini-xplus.dts b/arch/arm/boot/dts/sun4i-a10-mini-xplus.dts
--- a/arch/arm/boot/dts/sun4i-a10-mini-xplus.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sun4i-a10-mini-xplus.dts	2015-10-27 00:45:05.000000000 +0000
@@ -3,134 +3,30 @@
  *
  * Maxime Ripard <maxime.ripard@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
  *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful,
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- *     You should have received a copy of the GNU General Public
- *     License along with this file; if not, write to the Free
- *     Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston,
- *     MA 02110-1301 USA
- *
- * Or, alternatively,
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use,
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
  */
 
 /dts-v1/;
-#include "sun4i-a10.dtsi"
-#include "sunxi-common-regulators.dtsi"
-
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/pinctrl/sun4i-a10.h>
+/include/ "sun4i-a10.dtsi"
 
 / {
 	model = "PineRiver Mini X-Plus";
 	compatible = "pineriver,mini-xplus", "allwinner,sun4i-a10";
 
-	soc@01c00000 {
-		mmc0: mmc@01c0f000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_reference_design>;
-			vmmc-supply = <&reg_vcc3v3>;
-			bus-width = <4>;
-			cd-gpios = <&pio 7 1 GPIO_ACTIVE_HIGH>; /* PH1 */
-			cd-inverted;
-			status = "okay";
-		};
-
-		usbphy: phy@01c13400 {
-			usb1_vbus-supply = <&reg_usb1_vbus>;
-			usb2_vbus-supply = <&reg_usb2_vbus>;
-			status = "okay";
-		};
-
-		ehci0: usb@01c14000 {
-			status = "okay";
-		};
-
-		ohci0: usb@01c14400 {
-			status = "okay";
-		};
-
-		ehci1: usb@01c1c000 {
-			status = "okay";
-		};
-
-		ohci1: usb@01c1c400 {
-			status = "okay";
-		};
-
-		pinctrl@01c20800 {
-			ir0_pins_a: ir0@0 {
-				/* The ir receiver is not always populated */
-				allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
-			};
-		};
-
-		ir0: ir@01c21800 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&ir0_pins_a>;
-			status = "okay";
-		};
+	chosen {
+		bootargs = "earlyprintk console=ttyS0,115200";
+	};
 
+	soc@01c20000 {
 		uart0: serial@01c28000 {
 			pinctrl-names = "default";
 			pinctrl-0 = <&uart0_pins_a>;
 			status = "okay";
 		};
-
-		i2c0: i2c@01c2ac00 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&i2c0_pins_a>;
-			status = "okay";
-
-			axp209: pmic@34 {
-				compatible = "x-powers,axp209";
-				reg = <0x34>;
-				interrupts = <0>;
-
-				interrupt-controller;
-				#interrupt-cells = <1>;
-			};
-		};
-	};
-
-	reg_usb1_vbus: usb1-vbus {
-		status = "okay";
-	};
-
-	reg_usb2_vbus: usb2-vbus {
-		status = "okay";
 	};
 };
diff -urNp a/arch/arm/boot/dts/sun4i-a10.dtsi b/arch/arm/boot/dts/sun4i-a10.dtsi
--- a/arch/arm/boot/dts/sun4i-a10.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sun4i-a10.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -10,111 +10,18 @@
  * http://www.gnu.org/copyleft/gpl.html
  */
 
-#include "skeleton.dtsi"
-
-#include <dt-bindings/thermal/thermal.h>
-
-#include <dt-bindings/dma/sun4i-a10.h>
-#include <dt-bindings/pinctrl/sun4i-a10.h>
+/include/ "skeleton.dtsi"
 
 / {
 	interrupt-parent = <&intc>;
 
-	aliases {
-		ethernet0 = &emac;
-	};
-
-	chosen {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges;
-
-		framebuffer@0 {
-			compatible = "allwinner,simple-framebuffer", "simple-framebuffer";
-			allwinner,pipeline = "de_be0-lcd0-hdmi";
-			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 43>,
-				 <&ahb_gates 44>;
-			status = "disabled";
-		};
-
-		framebuffer@1 {
-			compatible = "allwinner,simple-framebuffer", "simple-framebuffer";
-			allwinner,pipeline = "de_fe0-de_be0-lcd0-hdmi";
-			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 43>,
-				 <&ahb_gates 44>, <&ahb_gates 46>;
-			status = "disabled";
-		};
-
-		framebuffer@2 {
-			compatible = "allwinner,simple-framebuffer",
-				     "simple-framebuffer";
-			allwinner,pipeline = "de_fe0-de_be0-lcd0";
-			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 44>,
-				 <&ahb_gates 46>;
-			status = "disabled";
-		};
-
-		framebuffer@3 {
-			compatible = "allwinner,simple-framebuffer",
-				     "simple-framebuffer";
-			allwinner,pipeline = "de_fe0-de_be0-lcd0-tve0";
-			clocks = <&pll5 1>, <&ahb_gates 34>, <&ahb_gates 36>,
-				 <&ahb_gates 44>, <&ahb_gates 46>;
-			status = "disabled";
-		};
-	};
-
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
-		cpu0: cpu@0 {
+		cpu@0 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a8";
 			reg = <0x0>;
-			clocks = <&cpu>;
-			clock-latency = <244144>; /* 8 32k periods */
-			operating-points = <
-				/* kHz    uV */
-				1008000 1400000
-				912000  1350000
-				864000  1300000
-				624000  1250000
-				>;
-			#cooling-cells = <2>;
-			cooling-min-level = <0>;
-			cooling-max-level = <3>;
-		};
-	};
-
-	thermal-zones {
-		cpu_thermal {
-			/* milliseconds */
-			polling-delay-passive = <250>;
-			polling-delay = <1000>;
-			thermal-sensors = <&rtp>;
-
-			cooling-maps {
-				map0 {
-					trip = <&cpu_alert0>;
-					cooling-device = <&cpu0 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
-				};
-			};
-
-			trips {
-				cpu_alert0: cpu_alert0 {
-					/* milliCelsius */
-					temperature = <850000>;
-					hysteresis = <2000>;
-					type = "passive";
-				};
-
-				cpu_crit: cpu_crit {
-					/* milliCelsius */
-					temperature = <100000>;
-					hysteresis = <2000>;
-					type = "critical";
-				};
-			};
 		};
 	};
 
@@ -139,73 +46,44 @@
 			clock-frequency = <0>;
 		};
 
-		osc24M: clk@01c20050 {
+		osc24M: osc24M@01c20050 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-osc-clk";
+			compatible = "allwinner,sun4i-osc-clk";
 			reg = <0x01c20050 0x4>;
 			clock-frequency = <24000000>;
-			clock-output-names = "osc24M";
 		};
 
-		osc32k: clk@0 {
+		osc32k: osc32k {
 			#clock-cells = <0>;
 			compatible = "fixed-clock";
 			clock-frequency = <32768>;
-			clock-output-names = "osc32k";
 		};
 
-		pll1: clk@01c20000 {
+		pll1: pll1@01c20000 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-pll1-clk";
+			compatible = "allwinner,sun4i-pll1-clk";
 			reg = <0x01c20000 0x4>;
 			clocks = <&osc24M>;
-			clock-output-names = "pll1";
-		};
-
-		pll4: clk@01c20018 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-pll1-clk";
-			reg = <0x01c20018 0x4>;
-			clocks = <&osc24M>;
-			clock-output-names = "pll4";
-		};
-
-		pll5: clk@01c20020 {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-pll5-clk";
-			reg = <0x01c20020 0x4>;
-			clocks = <&osc24M>;
-			clock-output-names = "pll5_ddr", "pll5_other";
-		};
-
-		pll6: clk@01c20028 {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-pll6-clk";
-			reg = <0x01c20028 0x4>;
-			clocks = <&osc24M>;
-			clock-output-names = "pll6_sata", "pll6_other", "pll6";
 		};
 
 		/* dummy is 200M */
 		cpu: cpu@01c20054 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-cpu-clk";
+			compatible = "allwinner,sun4i-cpu-clk";
 			reg = <0x01c20054 0x4>;
 			clocks = <&osc32k>, <&osc24M>, <&pll1>, <&dummy>;
-			clock-output-names = "cpu";
 		};
 
 		axi: axi@01c20054 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-axi-clk";
+			compatible = "allwinner,sun4i-axi-clk";
 			reg = <0x01c20054 0x4>;
 			clocks = <&cpu>;
-			clock-output-names = "axi";
 		};
 
-		axi_gates: clk@01c2005c {
+		axi_gates: axi_gates@01c2005c {
 			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-axi-gates-clk";
+			compatible = "allwinner,sun4i-axi-gates-clk";
 			reg = <0x01c2005c 0x4>;
 			clocks = <&axi>;
 			clock-output-names = "axi_dram";
@@ -213,15 +91,14 @@
 
 		ahb: ahb@01c20054 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-ahb-clk";
+			compatible = "allwinner,sun4i-ahb-clk";
 			reg = <0x01c20054 0x4>;
 			clocks = <&axi>;
-			clock-output-names = "ahb";
 		};
 
-		ahb_gates: clk@01c20060 {
+		ahb_gates: ahb_gates@01c20060 {
 			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-ahb-gates-clk";
+			compatible = "allwinner,sun4i-ahb-gates-clk";
 			reg = <0x01c20060 0x8>;
 			clocks = <&ahb>;
 			clock-output-names = "ahb_usb0", "ahb_ehci0",
@@ -239,15 +116,14 @@
 
 		apb0: apb0@01c20054 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-apb0-clk";
+			compatible = "allwinner,sun4i-apb0-clk";
 			reg = <0x01c20054 0x4>;
 			clocks = <&ahb>;
-			clock-output-names = "apb0";
 		};
 
-		apb0_gates: clk@01c20068 {
+		apb0_gates: apb0_gates@01c20068 {
 			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-apb0-gates-clk";
+			compatible = "allwinner,sun4i-apb0-gates-clk";
 			reg = <0x01c20068 0x4>;
 			clocks = <&apb0>;
 			clock-output-names = "apb0_codec", "apb0_spdif",
@@ -255,17 +131,24 @@
 				"apb0_ir1", "apb0_keypad";
 		};
 
-		apb1: clk@01c20058 {
+		/* dummy is pll62 */
+		apb1_mux: apb1_mux@01c20058 {
+			#clock-cells = <0>;
+			compatible = "allwinner,sun4i-apb1-mux-clk";
+			reg = <0x01c20058 0x4>;
+			clocks = <&osc24M>, <&dummy>, <&osc32k>;
+		};
+
+		apb1: apb1@01c20058 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-apb1-clk";
+			compatible = "allwinner,sun4i-apb1-clk";
 			reg = <0x01c20058 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&osc32k>;
-			clock-output-names = "apb1";
+			clocks = <&apb1_mux>;
 		};
 
-		apb1_gates: clk@01c2006c {
+		apb1_gates: apb1_gates@01c2006c {
 			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-apb1-gates-clk";
+			compatible = "allwinner,sun4i-apb1-gates-clk";
 			reg = <0x01c2006c 0x4>;
 			clocks = <&apb1>;
 			clock-output-names = "apb1_i2c0", "apb1_i2c1",
@@ -275,353 +158,17 @@
 				"apb1_uart4", "apb1_uart5", "apb1_uart6",
 				"apb1_uart7";
 		};
-
-		nand_clk: clk@01c20080 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c20080 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "nand";
-		};
-
-		ms_clk: clk@01c20084 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c20084 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "ms";
-		};
-
-		mmc0_clk: clk@01c20088 {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-mmc-clk";
-			reg = <0x01c20088 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "mmc0",
-					     "mmc0_output",
-					     "mmc0_sample";
-		};
-
-		mmc1_clk: clk@01c2008c {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-mmc-clk";
-			reg = <0x01c2008c 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "mmc1",
-					     "mmc1_output",
-					     "mmc1_sample";
-		};
-
-		mmc2_clk: clk@01c20090 {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-mmc-clk";
-			reg = <0x01c20090 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "mmc2",
-					     "mmc2_output",
-					     "mmc2_sample";
-		};
-
-		mmc3_clk: clk@01c20094 {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-mmc-clk";
-			reg = <0x01c20094 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "mmc3",
-					     "mmc3_output",
-					     "mmc3_sample";
-		};
-
-		ts_clk: clk@01c20098 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c20098 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "ts";
-		};
-
-		ss_clk: clk@01c2009c {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c2009c 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "ss";
-		};
-
-		spi0_clk: clk@01c200a0 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200a0 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "spi0";
-		};
-
-		spi1_clk: clk@01c200a4 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200a4 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "spi1";
-		};
-
-		spi2_clk: clk@01c200a8 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200a8 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "spi2";
-		};
-
-		pata_clk: clk@01c200ac {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200ac 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "pata";
-		};
-
-		ir0_clk: clk@01c200b0 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200b0 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "ir0";
-		};
-
-		ir1_clk: clk@01c200b4 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200b4 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "ir1";
-		};
-
-		usb_clk: clk@01c200cc {
-			#clock-cells = <1>;
-		        #reset-cells = <1>;
-			compatible = "allwinner,sun4i-a10-usb-clk";
-			reg = <0x01c200cc 0x4>;
-			clocks = <&pll6 1>;
-			clock-output-names = "usb_ohci0", "usb_ohci1", "usb_phy";
-		};
-
-		spi3_clk: clk@01c200d4 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200d4 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "spi3";
-		};
 	};
 
-	soc@01c00000 {
+	soc@01c20000 {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <1>;
+		reg = <0x01c20000 0x300000>;
 		ranges;
 
-		dma: dma-controller@01c02000 {
-			compatible = "allwinner,sun4i-a10-dma";
-			reg = <0x01c02000 0x1000>;
-			interrupts = <27>;
-			clocks = <&ahb_gates 6>;
-			#dma-cells = <2>;
-		};
-
-		spi0: spi@01c05000 {
-			compatible = "allwinner,sun4i-a10-spi";
-			reg = <0x01c05000 0x1000>;
-			interrupts = <10>;
-			clocks = <&ahb_gates 20>, <&spi0_clk>;
-			clock-names = "ahb", "mod";
-			dmas = <&dma SUN4I_DMA_DEDICATED 27>,
-			       <&dma SUN4I_DMA_DEDICATED 26>;
-			dma-names = "rx", "tx";
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		spi1: spi@01c06000 {
-			compatible = "allwinner,sun4i-a10-spi";
-			reg = <0x01c06000 0x1000>;
-			interrupts = <11>;
-			clocks = <&ahb_gates 21>, <&spi1_clk>;
-			clock-names = "ahb", "mod";
-			dmas = <&dma SUN4I_DMA_DEDICATED 9>,
-			       <&dma SUN4I_DMA_DEDICATED 8>;
-			dma-names = "rx", "tx";
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		emac: ethernet@01c0b000 {
-			compatible = "allwinner,sun4i-a10-emac";
-			reg = <0x01c0b000 0x1000>;
-			interrupts = <55>;
-			clocks = <&ahb_gates 17>;
-			status = "disabled";
-		};
-
-		mdio: mdio@01c0b080 {
-			compatible = "allwinner,sun4i-a10-mdio";
-			reg = <0x01c0b080 0x14>;
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		mmc0: mmc@01c0f000 {
-			compatible = "allwinner,sun4i-a10-mmc";
-			reg = <0x01c0f000 0x1000>;
-			clocks = <&ahb_gates 8>,
-				 <&mmc0_clk 0>,
-				 <&mmc0_clk 1>,
-				 <&mmc0_clk 2>;
-			clock-names = "ahb",
-				      "mmc",
-				      "output",
-				      "sample";
-			interrupts = <32>;
-			status = "disabled";
-		};
-
-		mmc1: mmc@01c10000 {
-			compatible = "allwinner,sun4i-a10-mmc";
-			reg = <0x01c10000 0x1000>;
-			clocks = <&ahb_gates 9>,
-				 <&mmc1_clk 0>,
-				 <&mmc1_clk 1>,
-				 <&mmc1_clk 2>;
-			clock-names = "ahb",
-				      "mmc",
-				      "output",
-				      "sample";
-			interrupts = <33>;
-			status = "disabled";
-		};
-
-		mmc2: mmc@01c11000 {
-			compatible = "allwinner,sun4i-a10-mmc";
-			reg = <0x01c11000 0x1000>;
-			clocks = <&ahb_gates 10>,
-				 <&mmc2_clk 0>,
-				 <&mmc2_clk 1>,
-				 <&mmc2_clk 2>;
-			clock-names = "ahb",
-				      "mmc",
-				      "output",
-				      "sample";
-			interrupts = <34>;
-			status = "disabled";
-		};
-
-		mmc3: mmc@01c12000 {
-			compatible = "allwinner,sun4i-a10-mmc";
-			reg = <0x01c12000 0x1000>;
-			clocks = <&ahb_gates 11>,
-				 <&mmc3_clk 0>,
-				 <&mmc3_clk 1>,
-				 <&mmc3_clk 2>;
-			clock-names = "ahb",
-				      "mmc",
-				      "output",
-				      "sample";
-			interrupts = <35>;
-			status = "disabled";
-		};
-
-		usbphy: phy@01c13400 {
-			#phy-cells = <1>;
-			compatible = "allwinner,sun4i-a10-usb-phy";
-			reg = <0x01c13400 0x10 0x01c14800 0x4 0x01c1c800 0x4>;
-			reg-names = "phy_ctrl", "pmu1", "pmu2";
-			clocks = <&usb_clk 8>;
-			clock-names = "usb_phy";
-			resets = <&usb_clk 0>, <&usb_clk 1>, <&usb_clk 2>;
-			reset-names = "usb0_reset", "usb1_reset", "usb2_reset";
-			status = "disabled";
-		};
-
-		ehci0: usb@01c14000 {
-			compatible = "allwinner,sun4i-a10-ehci", "generic-ehci";
-			reg = <0x01c14000 0x100>;
-			interrupts = <39>;
-			clocks = <&ahb_gates 1>;
-			phys = <&usbphy 1>;
-			phy-names = "usb";
-			status = "disabled";
-		};
-
-		ohci0: usb@01c14400 {
-			compatible = "allwinner,sun4i-a10-ohci", "generic-ohci";
-			reg = <0x01c14400 0x100>;
-			interrupts = <64>;
-			clocks = <&usb_clk 6>, <&ahb_gates 2>;
-			phys = <&usbphy 1>;
-			phy-names = "usb";
-			status = "disabled";
-		};
-
-		spi2: spi@01c17000 {
-			compatible = "allwinner,sun4i-a10-spi";
-			reg = <0x01c17000 0x1000>;
-			interrupts = <12>;
-			clocks = <&ahb_gates 22>, <&spi2_clk>;
-			clock-names = "ahb", "mod";
-			dmas = <&dma SUN4I_DMA_DEDICATED 29>,
-			       <&dma SUN4I_DMA_DEDICATED 28>;
-			dma-names = "rx", "tx";
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		ahci: sata@01c18000 {
-			compatible = "allwinner,sun4i-a10-ahci";
-			reg = <0x01c18000 0x1000>;
-			interrupts = <56>;
-			clocks = <&pll6 0>, <&ahb_gates 25>;
-			status = "disabled";
-		};
-
-		ehci1: usb@01c1c000 {
-			compatible = "allwinner,sun4i-a10-ehci", "generic-ehci";
-			reg = <0x01c1c000 0x100>;
-			interrupts = <40>;
-			clocks = <&ahb_gates 3>;
-			phys = <&usbphy 2>;
-			phy-names = "usb";
-			status = "disabled";
-		};
-
-		ohci1: usb@01c1c400 {
-			compatible = "allwinner,sun4i-a10-ohci", "generic-ohci";
-			reg = <0x01c1c400 0x100>;
-			interrupts = <65>;
-			clocks = <&usb_clk 7>, <&ahb_gates 4>;
-			phys = <&usbphy 2>;
-			phy-names = "usb";
-			status = "disabled";
-		};
-
-		spi3: spi@01c1f000 {
-			compatible = "allwinner,sun4i-a10-spi";
-			reg = <0x01c1f000 0x1000>;
-			interrupts = <50>;
-			clocks = <&ahb_gates 23>, <&spi3_clk>;
-			clock-names = "ahb", "mod";
-			dmas = <&dma SUN4I_DMA_DEDICATED 31>,
-			       <&dma SUN4I_DMA_DEDICATED 30>;
-			dma-names = "rx", "tx";
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
 		intc: interrupt-controller@01c20400 {
-			compatible = "allwinner,sun4i-a10-ic";
+			compatible = "allwinner,sun4i-ic";
 			reg = <0x01c20400 0x400>;
 			interrupt-controller;
 			#interrupt-cells = <1>;
@@ -630,215 +177,46 @@
 		pio: pinctrl@01c20800 {
 			compatible = "allwinner,sun4i-a10-pinctrl";
 			reg = <0x01c20800 0x400>;
-			interrupts = <28>;
 			clocks = <&apb0_gates 5>;
 			gpio-controller;
-			interrupt-controller;
-			#interrupt-cells = <2>;
+			#address-cells = <1>;
 			#size-cells = <0>;
 			#gpio-cells = <3>;
 
-			pwm0_pins_a: pwm0@0 {
-				allwinner,pins = "PB2";
-				allwinner,function = "pwm";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			pwm1_pins_a: pwm1@0 {
-				allwinner,pins = "PI3";
-				allwinner,function = "pwm";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
 			uart0_pins_a: uart0@0 {
 				allwinner,pins = "PB22", "PB23";
 				allwinner,function = "uart0";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
+				allwinner,drive = <0>;
+				allwinner,pull = <0>;
 			};
 
 			uart0_pins_b: uart0@1 {
 				allwinner,pins = "PF2", "PF4";
 				allwinner,function = "uart0";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
+				allwinner,drive = <0>;
+				allwinner,pull = <0>;
 			};
 
 			uart1_pins_a: uart1@0 {
 				allwinner,pins = "PA10", "PA11";
 				allwinner,function = "uart1";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			i2c0_pins_a: i2c0@0 {
-				allwinner,pins = "PB0", "PB1";
-				allwinner,function = "i2c0";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			i2c1_pins_a: i2c1@0 {
-				allwinner,pins = "PB18", "PB19";
-				allwinner,function = "i2c1";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			i2c2_pins_a: i2c2@0 {
-				allwinner,pins = "PB20", "PB21";
-				allwinner,function = "i2c2";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			emac_pins_a: emac0@0 {
-				allwinner,pins = "PA0", "PA1", "PA2",
-						"PA3", "PA4", "PA5", "PA6",
-						"PA7", "PA8", "PA9", "PA10",
-						"PA11", "PA12", "PA13", "PA14",
-						"PA15", "PA16";
-				allwinner,function = "emac";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			mmc0_pins_a: mmc0@0 {
-				allwinner,pins = "PF0","PF1","PF2","PF3","PF4","PF5";
-				allwinner,function = "mmc0";
-				allwinner,drive = <SUN4I_PINCTRL_30_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			mmc0_cd_pin_reference_design: mmc0_cd_pin@0 {
-				allwinner,pins = "PH1";
-				allwinner,function = "gpio_in";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
-			};
-
-			ir0_pins_a: ir0@0 {
-				allwinner,pins = "PB3","PB4";
-				allwinner,function = "ir0";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			ir1_pins_a: ir1@0 {
-				allwinner,pins = "PB22","PB23";
-				allwinner,function = "ir1";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			spi0_pins_a: spi0@0 {
-				allwinner,pins = "PI10", "PI11", "PI12", "PI13";
-				allwinner,function = "spi0";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			spi1_pins_a: spi1@0 {
-				allwinner,pins = "PI16", "PI17", "PI18", "PI19";
-				allwinner,function = "spi1";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			spi2_pins_a: spi2@0 {
-				allwinner,pins = "PB14", "PB15", "PB16", "PB17";
-				allwinner,function = "spi2";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			spi2_pins_b: spi2@1 {
-				allwinner,pins = "PC19", "PC20", "PC21", "PC22";
-				allwinner,function = "spi2";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			ps20_pins_a: ps20@0 {
-				allwinner,pins = "PI20", "PI21";
-				allwinner,function = "ps2";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			ps21_pins_a: ps21@0 {
-				allwinner,pins = "PH12", "PH13";
-				allwinner,function = "ps2";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
+				allwinner,drive = <0>;
+				allwinner,pull = <0>;
 			};
 		};
 
 		timer@01c20c00 {
-			compatible = "allwinner,sun4i-a10-timer";
+			compatible = "allwinner,sun4i-timer";
 			reg = <0x01c20c00 0x90>;
 			interrupts = <22>;
 			clocks = <&osc24M>;
 		};
 
 		wdt: watchdog@01c20c90 {
-			compatible = "allwinner,sun4i-a10-wdt";
+			compatible = "allwinner,sun4i-wdt";
 			reg = <0x01c20c90 0x10>;
 		};
 
-		rtc: rtc@01c20d00 {
-			compatible = "allwinner,sun4i-a10-rtc";
-			reg = <0x01c20d00 0x20>;
-			interrupts = <24>;
-		};
-
-		pwm: pwm@01c20e00 {
-			compatible = "allwinner,sun4i-a10-pwm";
-			reg = <0x01c20e00 0xc>;
-			clocks = <&osc24M>;
-			#pwm-cells = <3>;
-			status = "disabled";
-		};
-
-		ir0: ir@01c21800 {
-			compatible = "allwinner,sun4i-a10-ir";
-			clocks = <&apb0_gates 6>, <&ir0_clk>;
-			clock-names = "apb", "ir";
-			interrupts = <5>;
-			reg = <0x01c21800 0x40>;
-			status = "disabled";
-		};
-
-		ir1: ir@01c21c00 {
-			compatible = "allwinner,sun4i-a10-ir";
-			clocks = <&apb0_gates 7>, <&ir1_clk>;
-			clock-names = "apb", "ir";
-			interrupts = <6>;
-			reg = <0x01c21c00 0x40>;
-			status = "disabled";
-		};
-
-		lradc: lradc@01c22800 {
-			compatible = "allwinner,sun4i-a10-lradc-keys";
-			reg = <0x01c22800 0x100>;
-			interrupts = <31>;
-			status = "disabled";
-		};
-
-		sid: eeprom@01c23800 {
-			compatible = "allwinner,sun4i-a10-sid";
-			reg = <0x01c23800 0x10>;
-		};
-
-		rtp: rtp@01c25000 {
-			compatible = "allwinner,sun4i-a10-ts";
-			reg = <0x01c25000 0x100>;
-			interrupts = <29>;
-			#thermal-sensor-cells = <0>;
-		};
-
 		uart0: serial@01c28000 {
 			compatible = "snps,dw-apb-uart";
 			reg = <0x01c28000 0x400>;
@@ -918,51 +296,5 @@
 			clocks = <&apb1_gates 23>;
 			status = "disabled";
 		};
-
-		i2c0: i2c@01c2ac00 {
-			compatible = "allwinner,sun4i-a10-i2c";
-			reg = <0x01c2ac00 0x400>;
-			interrupts = <7>;
-			clocks = <&apb1_gates 0>;
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		i2c1: i2c@01c2b000 {
-			compatible = "allwinner,sun4i-a10-i2c";
-			reg = <0x01c2b000 0x400>;
-			interrupts = <8>;
-			clocks = <&apb1_gates 1>;
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		i2c2: i2c@01c2b400 {
-			compatible = "allwinner,sun4i-a10-i2c";
-			reg = <0x01c2b400 0x400>;
-			interrupts = <9>;
-			clocks = <&apb1_gates 2>;
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		ps20: ps2@01c2a000 {
-			compatible = "allwinner,sun4i-a10-ps2";
-			reg = <0x01c2a000 0x400>;
-			interrupts = <62>;
-			clocks = <&apb1_gates 6>;
-			status = "disabled";
-		};
-
-		ps21: ps2@01c2a400 {
-			compatible = "allwinner,sun4i-a10-ps2";
-			reg = <0x01c2a400 0x400>;
-			interrupts = <63>;
-			clocks = <&apb1_gates 7>;
-			status = "disabled";
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/sun5i-a13-olinuxino.dts b/arch/arm/boot/dts/sun5i-a13-olinuxino.dts
--- a/arch/arm/boot/dts/sun5i-a13-olinuxino.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sun5i-a13-olinuxino.dts	2015-10-27 00:45:05.000000000 +0000
@@ -3,150 +3,32 @@
  *
  * Maxime Ripard <maxime.ripard@free-electrons.com>
  *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
  *
- *  a) This file is free software; you can redistribute it and/or
- *     modify it under the terms of the GNU General Public License as
- *     published by the Free Software Foundation; either version 2 of the
- *     License, or (at your option) any later version.
- *
- *     This file is distributed in the hope that it will be useful,
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- *
- *     You should have received a copy of the GNU General Public
- *     License along with this file; if not, write to the Free
- *     Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston,
- *     MA 02110-1301 USA
- *
- * Or, alternatively,
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use,
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
  */
 
 /dts-v1/;
-#include "sun5i-a13.dtsi"
-#include "sunxi-common-regulators.dtsi"
-
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-#include <dt-bindings/pinctrl/sun4i-a10.h>
+/include/ "sun5i-a13.dtsi"
 
 / {
 	model = "Olimex A13-Olinuxino";
 	compatible = "olimex,a13-olinuxino", "allwinner,sun5i-a13";
 
-	aliases {
-		serial0 = &uart1;
+	chosen {
+		bootargs = "earlyprintk console=ttyS0,115200";
 	};
 
-	soc@01c00000 {
-		mmc0: mmc@01c0f000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&mmc0_pins_a>, <&mmc0_cd_pin_olinuxino>;
-			vmmc-supply = <&reg_vcc3v3>;
-			bus-width = <4>;
-			cd-gpios = <&pio 6 0 GPIO_ACTIVE_HIGH>; /* PG0 */
-			cd-inverted;
-			status = "okay";
-		};
-
-		usbphy: phy@01c13400 {
-			usb1_vbus-supply = <&reg_usb1_vbus>;
-			status = "okay";
-		};
-
-		ehci0: usb@01c14000 {
-			status = "okay";
-		};
-
-		ohci0: usb@01c14400 {
-			status = "okay";
-		};
-
+	soc@01c20000 {
 		pinctrl@01c20800 {
-			mmc0_cd_pin_olinuxino: mmc0_cd_pin@0 {
-				allwinner,pins = "PG0";
-				allwinner,function = "gpio_in";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_PULL_UP>;
-			};
-
 			led_pins_olinuxino: led_pins@0 {
 				allwinner,pins = "PG9";
 				allwinner,function = "gpio_out";
-				allwinner,drive = <SUN4I_PINCTRL_20_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			usb1_vbus_pin_olinuxino: usb1_vbus_pin@0 {
-				allwinner,pins = "PG11";
-				allwinner,function = "gpio_out";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-		};
-
-		lradc: lradc@01c22800 {
-			vref-supply = <&reg_vcc3v0>;
-			status = "okay";
-
-			button@191 {
-				label = "Volume Up";
-				linux,code = <KEY_VOLUMEUP>;
-				channel = <0>;
-				voltage = <191274>;
-			};
-
-			button@392 {
-				label = "Volume Down";
-				linux,code = <KEY_VOLUMEDOWN>;
-				channel = <0>;
-				voltage = <392644>;
-			};
-
-			button@601 {
-				label = "Menu";
-				linux,code = <KEY_MENU>;
-				channel = <0>;
-				voltage = <601151>;
-			};
-
-			button@795 {
-				label = "Enter";
-				linux,code = <KEY_ENTER>;
-				channel = <0>;
-				voltage = <795090>;
-			};
-
-			button@987 {
-				label = "Home";
-				linux,code = <KEY_HOMEPAGE>;
-				channel = <0>;
-				voltage = <987387>;
+				allwinner,drive = <1>;
+				allwinner,pull = <0>;
 			};
 		};
 
@@ -155,33 +37,6 @@
 			pinctrl-0 = <&uart1_pins_b>;
 			status = "okay";
 		};
-
-		i2c0: i2c@01c2ac00 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&i2c0_pins_a>;
-			status = "okay";
-
-			axp209: pmic@34 {
-				compatible = "x-powers,axp209";
-				reg = <0x34>;
-				interrupts = <0>;
-
-				interrupt-controller;
-				#interrupt-cells = <1>;
-			};
-		};
-
-		i2c1: i2c@01c2b000 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&i2c1_pins_a>;
-			status = "okay";
-		};
-
-		i2c2: i2c@01c2b400 {
-			pinctrl-names = "default";
-			pinctrl-0 = <&i2c2_pins_a>;
-			status = "okay";
-		};
 	};
 
 	leds {
@@ -190,14 +45,8 @@
 		pinctrl-0 = <&led_pins_olinuxino>;
 
 		power {
-			gpios = <&pio 6 9 GPIO_ACTIVE_HIGH>;
+			gpios = <&pio 6 9 0>;
 			default-state = "on";
 		};
 	};
-
-	reg_usb1_vbus: usb1-vbus {
-		pinctrl-0 = <&usb1_vbus_pin_olinuxino>;
-		gpio = <&pio 6 11 GPIO_ACTIVE_HIGH>;
-		status = "okay";
-	};
 };
diff -urNp a/arch/arm/boot/dts/sun5i-a13.dtsi b/arch/arm/boot/dts/sun5i-a13.dtsi
--- a/arch/arm/boot/dts/sun5i-a13.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/sun5i-a13.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -11,84 +11,18 @@
  * http://www.gnu.org/copyleft/gpl.html
  */
 
-#include "skeleton.dtsi"
-
-#include <dt-bindings/thermal/thermal.h>
-
-#include <dt-bindings/dma/sun4i-a10.h>
-#include <dt-bindings/pinctrl/sun4i-a10.h>
+/include/ "skeleton.dtsi"
 
 / {
 	interrupt-parent = <&intc>;
 
-	chosen {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		ranges;
-
-		framebuffer@0 {
-			compatible = "allwinner,simple-framebuffer",
-				     "simple-framebuffer";
-			allwinner,pipeline = "de_be0-lcd0";
-			clocks = <&pll5 1>, <&ahb_gates 36>, <&ahb_gates 44>;
-			status = "disabled";
-		};
-	};
-
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
-
-		cpu0: cpu@0 {
+		cpu@0 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a8";
 			reg = <0x0>;
-			clocks = <&cpu>;
-			clock-latency = <244144>; /* 8 32k periods */
-			operating-points = <
-				/* kHz    uV */
-				1008000 1400000
-				912000  1350000
-				864000  1300000
-				624000  1200000
-				576000  1200000
-				432000  1200000
-				>;
-			#cooling-cells = <2>;
-			cooling-min-level = <0>;
-			cooling-max-level = <5>;
-		};
-	};
-
-	thermal-zones {
-		cpu_thermal {
-			/* milliseconds */
-			polling-delay-passive = <250>;
-			polling-delay = <1000>;
-			thermal-sensors = <&rtp>;
-
-			cooling-maps {
-				map0 {
-					trip = <&cpu_alert0>;
-					cooling-device = <&cpu0 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
-				};
-			};
-
-			trips {
-				cpu_alert0: cpu_alert0 {
-					/* milliCelsius */
-					temperature = <850000>;
-					hysteresis = <2000>;
-					type = "passive";
-				};
-
-				cpu_crit: cpu_crit {
-					/* milliCelsius */
-					temperature = <100000>;
-					hysteresis = <2000>;
-					type = "critical";
-				};
-			};
 		};
 	};
 
@@ -113,73 +47,44 @@
 			clock-frequency = <0>;
 		};
 
-		osc24M: clk@01c20050 {
+		osc24M: osc24M@01c20050 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-osc-clk";
+			compatible = "allwinner,sun4i-osc-clk";
 			reg = <0x01c20050 0x4>;
 			clock-frequency = <24000000>;
-			clock-output-names = "osc24M";
 		};
 
-		osc32k: clk@0 {
+		osc32k: osc32k {
 			#clock-cells = <0>;
 			compatible = "fixed-clock";
 			clock-frequency = <32768>;
-			clock-output-names = "osc32k";
 		};
 
-		pll1: clk@01c20000 {
+		pll1: pll1@01c20000 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-pll1-clk";
+			compatible = "allwinner,sun4i-pll1-clk";
 			reg = <0x01c20000 0x4>;
 			clocks = <&osc24M>;
-			clock-output-names = "pll1";
-		};
-
-		pll4: clk@01c20018 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-pll1-clk";
-			reg = <0x01c20018 0x4>;
-			clocks = <&osc24M>;
-			clock-output-names = "pll4";
-		};
-
-		pll5: clk@01c20020 {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-pll5-clk";
-			reg = <0x01c20020 0x4>;
-			clocks = <&osc24M>;
-			clock-output-names = "pll5_ddr", "pll5_other";
-		};
-
-		pll6: clk@01c20028 {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-pll6-clk";
-			reg = <0x01c20028 0x4>;
-			clocks = <&osc24M>;
-			clock-output-names = "pll6_sata", "pll6_other", "pll6";
 		};
 
 		/* dummy is 200M */
 		cpu: cpu@01c20054 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-cpu-clk";
+			compatible = "allwinner,sun4i-cpu-clk";
 			reg = <0x01c20054 0x4>;
 			clocks = <&osc32k>, <&osc24M>, <&pll1>, <&dummy>;
-			clock-output-names = "cpu";
 		};
 
 		axi: axi@01c20054 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-axi-clk";
+			compatible = "allwinner,sun4i-axi-clk";
 			reg = <0x01c20054 0x4>;
 			clocks = <&cpu>;
-			clock-output-names = "axi";
 		};
 
-		axi_gates: clk@01c2005c {
+		axi_gates: axi_gates@01c2005c {
 			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-axi-gates-clk";
+			compatible = "allwinner,sun4i-axi-gates-clk";
 			reg = <0x01c2005c 0x4>;
 			clocks = <&axi>;
 			clock-output-names = "axi_dram";
@@ -187,290 +92,84 @@
 
 		ahb: ahb@01c20054 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-ahb-clk";
+			compatible = "allwinner,sun4i-ahb-clk";
 			reg = <0x01c20054 0x4>;
 			clocks = <&axi>;
-			clock-output-names = "ahb";
 		};
 
-		ahb_gates: clk@01c20060 {
+		ahb_gates: ahb_gates@01c20060 {
 			#clock-cells = <1>;
-			compatible = "allwinner,sun5i-a13-ahb-gates-clk";
+			compatible = "allwinner,sun4i-ahb-gates-clk";
 			reg = <0x01c20060 0x8>;
 			clocks = <&ahb>;
-			clock-output-names = "ahb_usbotg", "ahb_ehci", "ahb_ohci",
-				"ahb_ss", "ahb_dma", "ahb_bist", "ahb_mmc0",
-				"ahb_mmc1", "ahb_mmc2", "ahb_nand", "ahb_sdram",
-				"ahb_spi0", "ahb_spi1", "ahb_spi2", "ahb_stimer",
-				"ahb_ve", "ahb_lcd", "ahb_csi", "ahb_de_be",
-				"ahb_de_fe", "ahb_iep", "ahb_mali400";
+			clock-output-names = "ahb_usb0", "ahb_ehci0",
+				"ahb_ohci0", "ahb_ehci1", "ahb_ohci1", "ahb_ss",
+				"ahb_dma", "ahb_bist", "ahb_mmc0", "ahb_mmc1",
+				"ahb_mmc2", "ahb_mmc3", "ahb_ms", "ahb_nand",
+				"ahb_sdram", "ahb_ace",	"ahb_emac", "ahb_ts",
+				"ahb_spi0", "ahb_spi1", "ahb_spi2", "ahb_spi3",
+				"ahb_pata", "ahb_sata", "ahb_gps", "ahb_ve",
+				"ahb_tvd", "ahb_tve0", "ahb_tve1", "ahb_lcd0",
+				"ahb_lcd1", "ahb_csi0", "ahb_csi1", "ahb_hdmi",
+				"ahb_de_be0", "ahb_de_be1", "ahb_de_fe0",
+				"ahb_de_fe1", "ahb_mp", "ahb_mali400";
 		};
 
 		apb0: apb0@01c20054 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-apb0-clk";
+			compatible = "allwinner,sun4i-apb0-clk";
 			reg = <0x01c20054 0x4>;
 			clocks = <&ahb>;
-			clock-output-names = "apb0";
 		};
 
-		apb0_gates: clk@01c20068 {
+		apb0_gates: apb0_gates@01c20068 {
 			#clock-cells = <1>;
-			compatible = "allwinner,sun5i-a13-apb0-gates-clk";
+			compatible = "allwinner,sun4i-apb0-gates-clk";
 			reg = <0x01c20068 0x4>;
 			clocks = <&apb0>;
-			clock-output-names = "apb0_codec", "apb0_pio", "apb0_ir";
+			clock-output-names = "apb0_codec", "apb0_spdif",
+				"apb0_ac97", "apb0_iis", "apb0_pio", "apb0_ir0",
+				"apb0_ir1", "apb0_keypad";
 		};
 
-		apb1: clk@01c20058 {
+		/* dummy is pll62 */
+		apb1_mux: apb1_mux@01c20058 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-apb1-clk";
+			compatible = "allwinner,sun4i-apb1-mux-clk";
 			reg = <0x01c20058 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&osc32k>;
-			clock-output-names = "apb1";
+			clocks = <&osc24M>, <&dummy>, <&osc32k>;
 		};
 
-		apb1_gates: clk@01c2006c {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun5i-a13-apb1-gates-clk";
-			reg = <0x01c2006c 0x4>;
-			clocks = <&apb1>;
-			clock-output-names = "apb1_i2c0", "apb1_i2c1",
-				"apb1_i2c2", "apb1_uart1", "apb1_uart3";
-		};
-
-		nand_clk: clk@01c20080 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c20080 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "nand";
-		};
-
-		ms_clk: clk@01c20084 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c20084 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "ms";
-		};
-
-		mmc0_clk: clk@01c20088 {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-mmc-clk";
-			reg = <0x01c20088 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "mmc0",
-					     "mmc0_output",
-					     "mmc0_sample";
-		};
-
-		mmc1_clk: clk@01c2008c {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-mmc-clk";
-			reg = <0x01c2008c 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "mmc1",
-					     "mmc1_output",
-					     "mmc1_sample";
-		};
-
-		mmc2_clk: clk@01c20090 {
-			#clock-cells = <1>;
-			compatible = "allwinner,sun4i-a10-mmc-clk";
-			reg = <0x01c20090 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "mmc2",
-					     "mmc2_output",
-					     "mmc2_sample";
-		};
-
-		ts_clk: clk@01c20098 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c20098 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "ts";
-		};
-
-		ss_clk: clk@01c2009c {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c2009c 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "ss";
-		};
-
-		spi0_clk: clk@01c200a0 {
+		apb1: apb1@01c20058 {
 			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200a0 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "spi0";
-		};
-
-		spi1_clk: clk@01c200a4 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200a4 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "spi1";
-		};
-
-		spi2_clk: clk@01c200a8 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200a8 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "spi2";
-		};
-
-		ir0_clk: clk@01c200b0 {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun4i-a10-mod0-clk";
-			reg = <0x01c200b0 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "ir0";
+			compatible = "allwinner,sun4i-apb1-clk";
+			reg = <0x01c20058 0x4>;
+			clocks = <&apb1_mux>;
 		};
 
-		usb_clk: clk@01c200cc {
+		apb1_gates: apb1_gates@01c2006c {
 			#clock-cells = <1>;
-		        #reset-cells = <1>;
-			compatible = "allwinner,sun5i-a13-usb-clk";
-			reg = <0x01c200cc 0x4>;
-			clocks = <&pll6 1>;
-			clock-output-names = "usb_ohci0", "usb_phy";
-		};
-
-		mbus_clk: clk@01c2015c {
-			#clock-cells = <0>;
-			compatible = "allwinner,sun5i-a13-mbus-clk";
-			reg = <0x01c2015c 0x4>;
-			clocks = <&osc24M>, <&pll6 1>, <&pll5 1>;
-			clock-output-names = "mbus";
+			compatible = "allwinner,sun4i-apb1-gates-clk";
+			reg = <0x01c2006c 0x4>;
+			clocks = <&apb1>;
+			clock-output-names = "apb1_i2c0", "apb1_i2c1",
+				"apb1_i2c2", "apb1_can", "apb1_scr",
+				"apb1_ps20", "apb1_ps21", "apb1_uart0",
+				"apb1_uart1", "apb1_uart2", "apb1_uart3",
+				"apb1_uart4", "apb1_uart5", "apb1_uart6",
+				"apb1_uart7";
 		};
 	};
 
-	soc@01c00000 {
+	soc@01c20000 {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <1>;
+		reg = <0x01c20000 0x300000>;
 		ranges;
 
-		dma: dma-controller@01c02000 {
-			compatible = "allwinner,sun4i-a10-dma";
-			reg = <0x01c02000 0x1000>;
-			interrupts = <27>;
-			clocks = <&ahb_gates 6>;
-			#dma-cells = <2>;
-		};
-
-		spi0: spi@01c05000 {
-			compatible = "allwinner,sun4i-a10-spi";
-			reg = <0x01c05000 0x1000>;
-			interrupts = <10>;
-			clocks = <&ahb_gates 20>, <&spi0_clk>;
-			clock-names = "ahb", "mod";
-			dmas = <&dma SUN4I_DMA_DEDICATED 27>,
-			       <&dma SUN4I_DMA_DEDICATED 26>;
-			dma-names = "rx", "tx";
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		spi1: spi@01c06000 {
-			compatible = "allwinner,sun4i-a10-spi";
-			reg = <0x01c06000 0x1000>;
-			interrupts = <11>;
-			clocks = <&ahb_gates 21>, <&spi1_clk>;
-			clock-names = "ahb", "mod";
-			dmas = <&dma SUN4I_DMA_DEDICATED 9>,
-			       <&dma SUN4I_DMA_DEDICATED 8>;
-			dma-names = "rx", "tx";
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		mmc0: mmc@01c0f000 {
-			compatible = "allwinner,sun5i-a13-mmc";
-			reg = <0x01c0f000 0x1000>;
-			clocks = <&ahb_gates 8>,
-				 <&mmc0_clk 0>,
-				 <&mmc0_clk 1>,
-				 <&mmc0_clk 2>;
-			clock-names = "ahb",
-				      "mmc",
-				      "output",
-				      "sample";
-			interrupts = <32>;
-			status = "disabled";
-		};
-
-		mmc2: mmc@01c11000 {
-			compatible = "allwinner,sun5i-a13-mmc";
-			reg = <0x01c11000 0x1000>;
-			clocks = <&ahb_gates 10>,
-				 <&mmc2_clk 0>,
-				 <&mmc2_clk 1>,
-				 <&mmc2_clk 2>;
-			clock-names = "ahb",
-				      "mmc",
-				      "output",
-				      "sample";
-			interrupts = <34>;
-			status = "disabled";
-		};
-
-		usbphy: phy@01c13400 {
-			#phy-cells = <1>;
-			compatible = "allwinner,sun5i-a13-usb-phy";
-			reg = <0x01c13400 0x10 0x01c14800 0x4>;
-			reg-names = "phy_ctrl", "pmu1";
-			clocks = <&usb_clk 8>;
-			clock-names = "usb_phy";
-			resets = <&usb_clk 0>, <&usb_clk 1>;
-			reset-names = "usb0_reset", "usb1_reset";
-			status = "disabled";
-		};
-
-		ehci0: usb@01c14000 {
-			compatible = "allwinner,sun5i-a13-ehci", "generic-ehci";
-			reg = <0x01c14000 0x100>;
-			interrupts = <39>;
-			clocks = <&ahb_gates 1>;
-			phys = <&usbphy 1>;
-			phy-names = "usb";
-			status = "disabled";
-		};
-
-		ohci0: usb@01c14400 {
-			compatible = "allwinner,sun5i-a13-ohci", "generic-ohci";
-			reg = <0x01c14400 0x100>;
-			interrupts = <40>;
-			clocks = <&usb_clk 6>, <&ahb_gates 2>;
-			phys = <&usbphy 1>;
-			phy-names = "usb";
-			status = "disabled";
-		};
-
-		spi2: spi@01c17000 {
-			compatible = "allwinner,sun4i-a10-spi";
-			reg = <0x01c17000 0x1000>;
-			interrupts = <12>;
-			clocks = <&ahb_gates 22>, <&spi2_clk>;
-			clock-names = "ahb", "mod";
-			dmas = <&dma SUN4I_DMA_DEDICATED 29>,
-			       <&dma SUN4I_DMA_DEDICATED 28>;
-			dma-names = "rx", "tx";
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
 		intc: interrupt-controller@01c20400 {
-			compatible = "allwinner,sun4i-a10-ic";
+			compatible = "allwinner,sun4i-ic";
 			reg = <0x01c20400 0x400>;
 			interrupt-controller;
 			#interrupt-cells = <1>;
@@ -479,88 +178,39 @@
 		pio: pinctrl@01c20800 {
 			compatible = "allwinner,sun5i-a13-pinctrl";
 			reg = <0x01c20800 0x400>;
-			interrupts = <28>;
 			clocks = <&apb0_gates 5>;
 			gpio-controller;
-			interrupt-controller;
-			#interrupt-cells = <2>;
+			#address-cells = <1>;
 			#size-cells = <0>;
 			#gpio-cells = <3>;
 
 			uart1_pins_a: uart1@0 {
 				allwinner,pins = "PE10", "PE11";
 				allwinner,function = "uart1";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
+				allwinner,drive = <0>;
+				allwinner,pull = <0>;
 			};
 
 			uart1_pins_b: uart1@1 {
 				allwinner,pins = "PG3", "PG4";
 				allwinner,function = "uart1";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			i2c0_pins_a: i2c0@0 {
-				allwinner,pins = "PB0", "PB1";
-				allwinner,function = "i2c0";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			i2c1_pins_a: i2c1@0 {
-				allwinner,pins = "PB15", "PB16";
-				allwinner,function = "i2c1";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			i2c2_pins_a: i2c2@0 {
-				allwinner,pins = "PB17", "PB18";
-				allwinner,function = "i2c2";
-				allwinner,drive = <SUN4I_PINCTRL_10_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
-			};
-
-			mmc0_pins_a: mmc0@0 {
-				allwinner,pins = "PF0","PF1","PF2","PF3","PF4","PF5";
-				allwinner,function = "mmc0";
-				allwinner,drive = <SUN4I_PINCTRL_30_MA>;
-				allwinner,pull = <SUN4I_PINCTRL_NO_PULL>;
+				allwinner,drive = <0>;
+				allwinner,pull = <0>;
 			};
 		};
 
 		timer@01c20c00 {
-			compatible = "allwinner,sun4i-a10-timer";
+			compatible = "allwinner,sun4i-timer";
 			reg = <0x01c20c00 0x90>;
 			interrupts = <22>;
 			clocks = <&osc24M>;
 		};
 
 		wdt: watchdog@01c20c90 {
-			compatible = "allwinner,sun4i-a10-wdt";
+			compatible = "allwinner,sun4i-wdt";
 			reg = <0x01c20c90 0x10>;
 		};
 
-		lradc: lradc@01c22800 {
-			compatible = "allwinner,sun4i-a10-lradc-keys";
-			reg = <0x01c22800 0x100>;
-			interrupts = <31>;
-			status = "disabled";
-		};
-
-		sid: eeprom@01c23800 {
-			compatible = "allwinner,sun4i-a10-sid";
-			reg = <0x01c23800 0x10>;
-		};
-
-		rtp: rtp@01c25000 {
-			compatible = "allwinner,sun4i-a10-ts";
-			reg = <0x01c25000 0x100>;
-			interrupts = <29>;
-			#thermal-sensor-cells = <0>;
-		};
-
 		uart1: serial@01c28400 {
 			compatible = "snps,dw-apb-uart";
 			reg = <0x01c28400 0x400>;
@@ -580,42 +230,5 @@
 			clocks = <&apb1_gates 19>;
 			status = "disabled";
 		};
-
-		i2c0: i2c@01c2ac00 {
-			compatible = "allwinner,sun5i-a13-i2c", "allwinner,sun4i-a10-i2c";
-			reg = <0x01c2ac00 0x400>;
-			interrupts = <7>;
-			clocks = <&apb1_gates 0>;
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		i2c1: i2c@01c2b000 {
-			compatible = "allwinner,sun5i-a13-i2c", "allwinner,sun4i-a10-i2c";
-			reg = <0x01c2b000 0x400>;
-			interrupts = <8>;
-			clocks = <&apb1_gates 1>;
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		i2c2: i2c@01c2b400 {
-			compatible = "allwinner,sun5i-a13-i2c", "allwinner,sun4i-a10-i2c";
-			reg = <0x01c2b400 0x400>;
-			interrupts = <9>;
-			clocks = <&apb1_gates 2>;
-			status = "disabled";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		timer@01c60000 {
-			compatible = "allwinner,sun5i-a13-hstimer";
-			reg = <0x01c60000 0x1000>;
-			interrupts = <82>, <83>;
-			clocks = <&ahb_gates 28>;
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra114-dalmore.dts b/arch/arm/boot/dts/tegra114-dalmore.dts
--- a/arch/arm/boot/dts/tegra114-dalmore.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra114-dalmore.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,57 +1,16 @@
-/*
- * This dts file supports Dalmore A04.
- * Other board revisions are not supported
- */
-
 /dts-v1/;
 
-#include <dt-bindings/input/input.h>
-#include "tegra114.dtsi"
+/include/ "tegra114.dtsi"
 
 / {
 	model = "NVIDIA Tegra114 Dalmore evaluation board";
 	compatible = "nvidia,dalmore", "nvidia,tegra114";
 
-	aliases {
-		rtc0 = "/i2c@7000d000/tps65913@58";
-		rtc1 = "/rtc@7000e000";
-		serial0 = &uartd;
-	};
-
 	memory {
 		reg = <0x80000000 0x40000000>;
 	};
 
-	host1x@50000000 {
-		hdmi@54280000 {
-			status = "okay";
-
-			hdmi-supply = <&vdd_5v0_hdmi>;
-			vdd-supply = <&vdd_hdmi_reg>;
-			pll-supply = <&palmas_smps3_reg>;
-
-			nvidia,ddc-i2c-bus = <&hdmi_ddc>;
-			nvidia,hpd-gpio =
-				<&gpio TEGRA_GPIO(N, 7) GPIO_ACTIVE_HIGH>;
-		};
-
-		dsi@54300000 {
-			status = "okay";
-
-			avdd-dsi-csi-supply = <&avdd_1v2_reg>;
-
-			panel@0 {
-				compatible = "panasonic,vvx10f004b00",
-					     "simple-panel";
-				reg = <0>;
-
-				power-supply = <&avdd_lcd_reg>;
-				backlight = <&backlight>;
-			};
-		};
-	};
-
-	pinmux@70000868 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -59,41 +18,41 @@
 			clk1_out_pw4 {
 				nvidia,pins = "clk1_out_pw4";
 				nvidia,function = "extperiph1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			dap1_din_pn1 {
 				nvidia,pins = "dap1_din_pn1";
 				nvidia,function = "i2s0";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			dap1_dout_pn2 {
 				nvidia,pins = "dap1_dout_pn2",
 						"dap1_fs_pn0",
 						"dap1_sclk_pn3";
 				nvidia,function = "i2s0";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			dap2_din_pa4 {
 				nvidia,pins = "dap2_din_pa4";
 				nvidia,function = "i2s1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			dap2_dout_pa5 {
 				nvidia,pins = "dap2_dout_pa5",
 						"dap2_fs_pa2",
 						"dap2_sclk_pa3";
 				nvidia,function = "i2s1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			dap4_din_pp5 {
 				nvidia,pins = "dap4_din_pp5",
@@ -101,17 +60,17 @@
 						"dap4_fs_pp4",
 						"dap4_sclk_pp7";
 				nvidia,function = "i2s3";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			dvfs_pwm_px0 {
 				nvidia,pins = "dvfs_pwm_px0",
 						"dvfs_clk_px2";
 				nvidia,function = "cldvfs";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			ulpi_clk_py0 {
 				nvidia,pins = "ulpi_clk_py0",
@@ -124,128 +83,128 @@
 						"ulpi_data6_po7",
 						"ulpi_data7_po0";
 				nvidia,function = "ulpi";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			ulpi_dir_py1 {
 				nvidia,pins = "ulpi_dir_py1",
 						"ulpi_nxt_py2";
 				nvidia,function = "ulpi";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			ulpi_stp_py3 {
 				nvidia,pins = "ulpi_stp_py3";
 				nvidia,function = "ulpi";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			cam_i2c_scl_pbb1 {
 				nvidia,pins = "cam_i2c_scl_pbb1",
 						"cam_i2c_sda_pbb2";
 				nvidia,function = "i2c3";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
-				nvidia,lock = <TEGRA_PIN_DISABLE>;
-				nvidia,open-drain = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
+				nvidia,lock = <0>;
+				nvidia,open-drain = <0>;
 			};
 			cam_mclk_pcc0 {
 				nvidia,pins = "cam_mclk_pcc0",
 						"pbb0";
 				nvidia,function = "vi_alt3";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
-				nvidia,lock = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
+				nvidia,lock = <0>;
 			};
 			gen2_i2c_scl_pt5 {
 				nvidia,pins = "gen2_i2c_scl_pt5",
 						"gen2_i2c_sda_pt6";
 				nvidia,function = "i2c2";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
-				nvidia,lock = <TEGRA_PIN_DISABLE>;
-				nvidia,open-drain = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
+				nvidia,lock = <0>;
+				nvidia,open-drain = <0>;
 			};
 			gmi_a16_pj7 {
 				nvidia,pins = "gmi_a16_pj7";
 				nvidia,function = "uartd";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			gmi_a17_pb0 {
 				nvidia,pins = "gmi_a17_pb0",
 						"gmi_a18_pb1";
 				nvidia,function = "uartd";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			gmi_a19_pk7 {
 				nvidia,pins = "gmi_a19_pk7";
 				nvidia,function = "uartd";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			gmi_ad5_pg5 {
 				nvidia,pins = "gmi_ad5_pg5",
 						"gmi_cs6_n_pi3",
 						"gmi_wr_n_pi0";
 				nvidia,function = "spi4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			gmi_ad6_pg6 {
 				nvidia,pins = "gmi_ad6_pg6",
 						"gmi_ad7_pg7";
 				nvidia,function = "spi4";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			gmi_ad12_ph4 {
 				nvidia,pins = "gmi_ad12_ph4";
 				nvidia,function = "rsvd4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			gmi_ad9_ph1 {
 				nvidia,pins = "gmi_ad9_ph1";
 				nvidia,function = "pwm1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			gmi_cs1_n_pj2 {
 				nvidia,pins = "gmi_cs1_n_pj2",
 						"gmi_oe_n_pi1";
 				nvidia,function = "soc";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			clk2_out_pw5 {
 				nvidia,pins = "clk2_out_pw5";
 				nvidia,function = "extperiph2";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			sdmmc1_clk_pz0 {
 				nvidia,pins = "sdmmc1_clk_pz0";
 				nvidia,function = "sdmmc1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			sdmmc1_cmd_pz1 {
 				nvidia,pins = "sdmmc1_cmd_pz1",
@@ -254,23 +213,23 @@
 						"sdmmc1_dat2_py5",
 						"sdmmc1_dat3_py4";
 				nvidia,function = "sdmmc1";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			sdmmc1_wp_n_pv3 {
 				nvidia,pins = "sdmmc1_wp_n_pv3";
 				nvidia,function = "spi4";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			sdmmc3_clk_pa6 {
 				nvidia,pins = "sdmmc3_clk_pa6";
 				nvidia,function = "sdmmc3";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			sdmmc3_cmd_pa7 {
 				nvidia,pins = "sdmmc3_cmd_pa7",
@@ -282,16 +241,16 @@
 						"sdmmc3_clk_lb_out_pee4",
 						"sdmmc3_clk_lb_in_pee5";
 				nvidia,function = "sdmmc3";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			sdmmc4_clk_pcc4 {
 				nvidia,pins = "sdmmc4_clk_pcc4";
 				nvidia,function = "sdmmc4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			sdmmc4_cmd_pt7 {
 				nvidia,pins = "sdmmc4_cmd_pt7",
@@ -304,16 +263,16 @@
 						"sdmmc4_dat6_paa6",
 						"sdmmc4_dat7_paa7";
 				nvidia,function = "sdmmc4";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			clk_32k_out_pa0 {
 				nvidia,pins = "clk_32k_out_pa0";
 				nvidia,function = "blink";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			kb_col0_pq0 {
 				nvidia,pins = "kb_col0_pq0",
@@ -323,265 +282,265 @@
 						"kb_row1_pr1",
 						"kb_row2_pr2";
 				nvidia,function = "kbc";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			dap3_din_pp1 {
 				nvidia,pins = "dap3_din_pp1",
 						"dap3_sclk_pp3";
 				nvidia,function = "displayb";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <0>;
 			};
 			pv0 {
 				nvidia,pins = "pv0";
 				nvidia,function = "rsvd4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <0>;
 			};
 			kb_row7_pr7 {
 				nvidia,pins = "kb_row7_pr7";
 				nvidia,function = "rsvd2";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			kb_row10_ps2 {
 				nvidia,pins = "kb_row10_ps2";
 				nvidia,function = "uarta";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			kb_row9_ps1 {
 				nvidia,pins = "kb_row9_ps1";
 				nvidia,function = "uarta";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			pwr_i2c_scl_pz6 {
 				nvidia,pins = "pwr_i2c_scl_pz6",
 						"pwr_i2c_sda_pz7";
 				nvidia,function = "i2cpwr";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
-				nvidia,lock = <TEGRA_PIN_DISABLE>;
-				nvidia,open-drain = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
+				nvidia,lock = <0>;
+				nvidia,open-drain = <0>;
 			};
 			sys_clk_req_pz5 {
 				nvidia,pins = "sys_clk_req_pz5";
 				nvidia,function = "sysclk";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			core_pwr_req {
 				nvidia,pins = "core_pwr_req";
 				nvidia,function = "pwron";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			cpu_pwr_req {
 				nvidia,pins = "cpu_pwr_req";
 				nvidia,function = "cpu";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			pwr_int_n {
 				nvidia,pins = "pwr_int_n";
 				nvidia,function = "pmi";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			reset_out_n {
 				nvidia,pins = "reset_out_n";
 				nvidia,function = "reset_out_n";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			clk3_out_pee0 {
 				nvidia,pins = "clk3_out_pee0";
 				nvidia,function = "extperiph3";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			gen1_i2c_scl_pc4 {
 				nvidia,pins = "gen1_i2c_scl_pc4",
 						"gen1_i2c_sda_pc5";
 				nvidia,function = "i2c1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
-				nvidia,lock = <TEGRA_PIN_DISABLE>;
-				nvidia,open-drain = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
+				nvidia,lock = <0>;
+				nvidia,open-drain = <0>;
 			};
 			uart2_cts_n_pj5 {
 				nvidia,pins = "uart2_cts_n_pj5";
 				nvidia,function = "uartb";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			uart2_rts_n_pj6 {
 				nvidia,pins = "uart2_rts_n_pj6";
 				nvidia,function = "uartb";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			uart2_rxd_pc3 {
 				nvidia,pins = "uart2_rxd_pc3";
 				nvidia,function = "irda";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			uart2_txd_pc2 {
 				nvidia,pins = "uart2_txd_pc2";
 				nvidia,function = "irda";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			uart3_cts_n_pa1 {
 				nvidia,pins = "uart3_cts_n_pa1",
 						"uart3_rxd_pw7";
 				nvidia,function = "uartc";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			uart3_rts_n_pc0 {
 				nvidia,pins = "uart3_rts_n_pc0",
 						"uart3_txd_pw6";
 				nvidia,function = "uartc";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			owr {
 				nvidia,pins = "owr";
 				nvidia,function = "owr";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			hdmi_cec_pee3 {
 				nvidia,pins = "hdmi_cec_pee3";
 				nvidia,function = "cec";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
-				nvidia,lock = <TEGRA_PIN_DISABLE>;
-				nvidia,open-drain = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
+				nvidia,lock = <0>;
+				nvidia,open-drain = <0>;
 			};
 			ddc_scl_pv4 {
 				nvidia,pins = "ddc_scl_pv4",
 						"ddc_sda_pv5";
 				nvidia,function = "i2c4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
-				nvidia,lock = <TEGRA_PIN_DISABLE>;
-				nvidia,rcv-sel = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
+				nvidia,lock = <0>;
+				nvidia,rcv-sel = <1>;
 			};
 			spdif_in_pk6 {
 				nvidia,pins = "spdif_in_pk6";
 				nvidia,function = "usb";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
-				nvidia,lock = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
+				nvidia,lock = <0>;
 			};
 			usb_vbus_en0_pn4 {
 				nvidia,pins = "usb_vbus_en0_pn4";
 				nvidia,function = "usb";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
-				nvidia,lock = <TEGRA_PIN_DISABLE>;
-				nvidia,open-drain = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
+				nvidia,lock = <0>;
+				nvidia,open-drain = <1>;
 			};
 			gpio_x6_aud_px6 {
 				nvidia,pins = "gpio_x6_aud_px6";
 				nvidia,function = "spi6";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <1>;
 			};
 			gpio_x4_aud_px4 {
 				nvidia,pins = "gpio_x4_aud_px4",
 						"gpio_x7_aud_px7";
 				nvidia,function = "rsvd1";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			gpio_x5_aud_px5 {
 				nvidia,pins = "gpio_x5_aud_px5";
 				nvidia,function = "rsvd1";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			gpio_w2_aud_pw2 {
 				nvidia,pins = "gpio_w2_aud_pw2";
 				nvidia,function = "rsvd2";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			gpio_w3_aud_pw3 {
 				nvidia,pins = "gpio_w3_aud_pw3";
 				nvidia,function = "spi6";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			gpio_x1_aud_px1 {
 				nvidia,pins = "gpio_x1_aud_px1";
 				nvidia,function = "rsvd4";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			gpio_x3_aud_px3 {
 				nvidia,pins = "gpio_x3_aud_px3";
 				nvidia,function = "rsvd4";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			dap3_fs_pp0 {
 				nvidia,pins = "dap3_fs_pp0";
 				nvidia,function = "i2s2";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			dap3_dout_pp2 {
 				nvidia,pins = "dap3_dout_pp2";
 				nvidia,function = "i2s2";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			pv1 {
 				nvidia,pins = "pv1";
 				nvidia,function = "rsvd1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			pbb3 {
 				nvidia,pins = "pbb3",
@@ -589,25 +548,25 @@
 						"pbb6",
 						"pbb7";
 				nvidia,function = "rsvd4";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			pcc1 {
 				nvidia,pins = "pcc1",
 						"pcc2";
 				nvidia,function = "rsvd4";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			gmi_ad0_pg0 {
 				nvidia,pins = "gmi_ad0_pg0",
 						"gmi_ad1_pg1";
 				nvidia,function = "gmi";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			gmi_ad10_ph2 {
 				nvidia,pins = "gmi_ad10_ph2",
@@ -616,17 +575,17 @@
 						"gmi_ad8_ph0",
 						"gmi_clk_pk1";
 				nvidia,function = "gmi";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			gmi_ad2_pg2 {
 				nvidia,pins = "gmi_ad2_pg2",
 						"gmi_ad3_pg3";
 				nvidia,function = "gmi";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			gmi_adv_n_pk0 {
 				nvidia,pins = "gmi_adv_n_pk0",
@@ -638,39 +597,39 @@
 						"gmi_iordy_pi5",
 						"gmi_wp_n_pc7";
 				nvidia,function = "gmi";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			gmi_cs3_n_pk4 {
 				nvidia,pins = "gmi_cs3_n_pk4";
 				nvidia,function = "gmi";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			clk2_req_pcc5 {
 				nvidia,pins = "clk2_req_pcc5";
 				nvidia,function = "rsvd4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			kb_col3_pq3 {
 				nvidia,pins = "kb_col3_pq3",
 						"kb_col6_pq6",
 						"kb_col7_pq7";
 				nvidia,function = "kbc";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			kb_col5_pq5 {
 				nvidia,pins = "kb_col5_pq5";
 				nvidia,function = "kbc";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			kb_row3_pr3 {
 				nvidia,pins = "kb_row3_pr3",
@@ -678,74 +637,78 @@
 						"kb_row6_pr6",
 						"kb_row8_ps0";
 				nvidia,function = "kbc";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			clk3_req_pee1 {
 				nvidia,pins = "clk3_req_pee1";
 				nvidia,function = "rsvd4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			pu4 {
 				nvidia,pins = "pu4";
 				nvidia,function = "displayb";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <0>;
 			};
 			pu5 {
 				nvidia,pins = "pu5",
 						"pu6";
 				nvidia,function = "displayb";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			hdmi_int_pn7 {
 				nvidia,pins = "hdmi_int_pn7";
 				nvidia,function = "rsvd1";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-				nvidia,enable-input = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
+				nvidia,enable-input = <1>;
 			};
 			clk1_req_pee2 {
 				nvidia,pins = "clk1_req_pee2",
 						"usb_vbus_en1_pn5";
 				nvidia,function = "rsvd4";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
-				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <1>;
+				nvidia,enable-input = <0>;
 			};
 
 			drive_sdio1 {
 				nvidia,pins = "drive_sdio1";
-				nvidia,high-speed-mode = <TEGRA_PIN_ENABLE>;
-				nvidia,schmitt = <TEGRA_PIN_DISABLE>;
+				nvidia,high-speed-mode = <1>;
+				nvidia,schmitt = <0>;
+				nvidia,low-power-mode = <3>;
 				nvidia,pull-down-strength = <36>;
 				nvidia,pull-up-strength = <20>;
-				nvidia,slew-rate-rising = <TEGRA_PIN_SLEW_RATE_SLOW>;
-				nvidia,slew-rate-falling = <TEGRA_PIN_SLEW_RATE_SLOW>;
+				nvidia,slew-rate-rising = <2>;
+				nvidia,slew-rate-falling = <2>;
 			};
 			drive_sdio3 {
 				nvidia,pins = "drive_sdio3";
-				nvidia,high-speed-mode = <TEGRA_PIN_ENABLE>;
-				nvidia,schmitt = <TEGRA_PIN_DISABLE>;
+				nvidia,high-speed-mode = <1>;
+				nvidia,schmitt = <0>;
+				nvidia,low-power-mode = <3>;
 				nvidia,pull-down-strength = <22>;
 				nvidia,pull-up-strength = <36>;
-				nvidia,slew-rate-rising = <TEGRA_PIN_SLEW_RATE_FASTEST>;
-				nvidia,slew-rate-falling = <TEGRA_PIN_SLEW_RATE_FASTEST>;
+				nvidia,slew-rate-rising = <0>;
+				nvidia,slew-rate-falling = <0>;
 			};
 			drive_gma {
 				nvidia,pins = "drive_gma";
-				nvidia,high-speed-mode = <TEGRA_PIN_ENABLE>;
-				nvidia,schmitt = <TEGRA_PIN_DISABLE>;
+				nvidia,high-speed-mode = <1>;
+				nvidia,schmitt = <0>;
+				nvidia,low-power-mode = <3>;
 				nvidia,pull-down-strength = <2>;
 				nvidia,pull-up-strength = <1>;
-				nvidia,slew-rate-rising = <TEGRA_PIN_SLEW_RATE_FASTEST>;
-				nvidia,slew-rate-falling = <TEGRA_PIN_SLEW_RATE_FASTEST>;
+				nvidia,slew-rate-rising = <0>;
+				nvidia,slew-rate-falling = <0>;
+				nvidia,drive-type = <1>;
 			};
 		};
 	};
@@ -754,50 +717,24 @@
 		status = "okay";
 	};
 
-	pwm@7000a000 {
-		status = "okay";
-	};
-
 	i2c@7000c000 {
 		status = "okay";
 		clock-frequency = <100000>;
 
-		battery: smart-battery@b {
+		battery: smart-battery {
 			compatible = "ti,bq20z45", "sbs,sbs-battery";
 			reg = <0xb>;
 			battery-name = "battery";
 			sbs,i2c-retry-count = <2>;
 			sbs,poll-retry-count = <100>;
-			power-supplies = <&charger>;
-		};
-
-		rt5640: rt5640@1c {
-			compatible = "realtek,rt5640";
-			reg = <0x1c>;
-			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(W, 3) GPIO_ACTIVE_HIGH>;
-			realtek,ldo1-en-gpios =
-				<&gpio TEGRA_GPIO(V, 3) GPIO_ACTIVE_HIGH>;
-		};
-
-		temperature-sensor@4c {
-			compatible = "onnn,nct1008";
-			reg = <0x4c>;
-			vcc-supply = <&palmas_ldo6_reg>;
-			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(O, 4) IRQ_TYPE_LEVEL_LOW>;
 		};
 	};
 
-	hdmi_ddc: i2c@7000c700 {
-		status = "okay";
-	};
-
 	i2c@7000d000 {
 		status = "okay";
 		clock-frequency = <400000>;
 
-		tps51632@43 {
+		tps51632 {
 			compatible = "ti,tps51632";
 			reg = <0x43>;
 			regulator-name = "vdd-cpu";
@@ -807,11 +744,11 @@
 			regulator-always-on;
 		};
 
-		tps65090@48 {
+		tps65090 {
 			compatible = "ti,tps65090";
 			reg = <0x48>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(J, 0) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <72 0x04>; /* gpio PJ0 */
 
 			vsys1-supply = <&vdd_ac_bat_reg>;
 			vsys2-supply = <&vdd_ac_bat_reg>;
@@ -826,11 +763,6 @@
 			vsys-l1-supply = <&vdd_ac_bat_reg>;
 			vsys-l2-supply = <&vdd_ac_bat_reg>;
 
-			charger: charger {
-				compatible = "ti,tps65090-charger";
-				ti,enable-low-current-chrg;
-			};
-
 			regulators {
 				tps65090_dcdc1_reg: dcdc1 {
 					regulator-name = "vdd-sys-5v0";
@@ -844,13 +776,13 @@
 					regulator-boot-on;
 				};
 
-				tps65090_dcdc3_reg: dcdc3 {
+				dcdc3 {
 					regulator-name = "vdd-ao";
 					regulator-always-on;
 					regulator-boot-on;
 				};
 
-				vdd_bl_reg: fet1 {
+				fet1 {
 					regulator-name = "vdd-lcd-bl";
 				};
 
@@ -858,7 +790,7 @@
 					regulator-name = "vdd-modem-3v3";
 				};
 
-				avdd_lcd_reg: fet4 {
+				fet4 {
 					regulator-name = "avdd-lcd";
 				};
 
@@ -889,225 +821,14 @@
 				};
 			};
 		};
-
-		palmas: tps65913@58 {
-			compatible = "ti,palmas";
-			reg = <0x58>;
-			interrupts = <0 86 IRQ_TYPE_LEVEL_LOW>;
-
-			#interrupt-cells = <2>;
-			interrupt-controller;
-
-			ti,system-power-controller;
-
-			palmas_gpio: gpio {
-				compatible = "ti,palmas-gpio";
-				gpio-controller;
-				#gpio-cells = <2>;
-			};
-
-			pmic {
-				compatible = "ti,tps65913-pmic", "ti,palmas-pmic";
-				smps1-in-supply = <&tps65090_dcdc3_reg>;
-				smps3-in-supply = <&tps65090_dcdc3_reg>;
-				smps4-in-supply = <&tps65090_dcdc2_reg>;
-				smps7-in-supply = <&tps65090_dcdc2_reg>;
-				smps8-in-supply = <&tps65090_dcdc2_reg>;
-				smps9-in-supply = <&tps65090_dcdc2_reg>;
-				ldo1-in-supply = <&tps65090_dcdc2_reg>;
-				ldo2-in-supply = <&tps65090_dcdc2_reg>;
-				ldo3-in-supply = <&palmas_smps3_reg>;
-				ldo4-in-supply = <&tps65090_dcdc2_reg>;
-				ldo5-in-supply = <&vdd_ac_bat_reg>;
-				ldo6-in-supply = <&tps65090_dcdc2_reg>;
-				ldo7-in-supply = <&tps65090_dcdc2_reg>;
-				ldo8-in-supply = <&tps65090_dcdc3_reg>;
-				ldo9-in-supply = <&palmas_smps9_reg>;
-				ldoln-in-supply = <&tps65090_dcdc1_reg>;
-				ldousb-in-supply = <&tps65090_dcdc1_reg>;
-
-				regulators {
-					smps12 {
-						regulator-name = "vddio-ddr";
-						regulator-min-microvolt = <1350000>;
-						regulator-max-microvolt = <1350000>;
-						regulator-always-on;
-						regulator-boot-on;
-					};
-
-					palmas_smps3_reg: smps3 {
-						regulator-name = "vddio-1v8";
-						regulator-min-microvolt = <1800000>;
-						regulator-max-microvolt = <1800000>;
-						regulator-always-on;
-						regulator-boot-on;
-					};
-
-					smps45 {
-						regulator-name = "vdd-core";
-						regulator-min-microvolt = <900000>;
-						regulator-max-microvolt = <1400000>;
-						regulator-always-on;
-						regulator-boot-on;
-					};
-
-					smps457 {
-						regulator-name = "vdd-core";
-						regulator-min-microvolt = <900000>;
-						regulator-max-microvolt = <1400000>;
-						regulator-always-on;
-						regulator-boot-on;
-					};
-
-					smps8 {
-						regulator-name = "avdd-pll";
-						regulator-min-microvolt = <1050000>;
-						regulator-max-microvolt = <1050000>;
-						regulator-always-on;
-						regulator-boot-on;
-					};
-
-					palmas_smps9_reg: smps9 {
-						regulator-name = "sdhci-vdd-sd-slot";
-						regulator-min-microvolt = <2800000>;
-						regulator-max-microvolt = <2800000>;
-						regulator-always-on;
-					};
-
-					ldo1 {
-						regulator-name = "avdd-cam1";
-						regulator-min-microvolt = <2800000>;
-						regulator-max-microvolt = <2800000>;
-					};
-
-					ldo2 {
-						regulator-name = "avdd-cam2";
-						regulator-min-microvolt = <2800000>;
-						regulator-max-microvolt = <2800000>;
-					};
-
-					avdd_1v2_reg: ldo3 {
-						regulator-name = "avdd-dsi-csi";
-						regulator-min-microvolt = <1200000>;
-						regulator-max-microvolt = <1200000>;
-					};
-
-					ldo4 {
-						regulator-name = "vpp-fuse";
-						regulator-min-microvolt = <1800000>;
-						regulator-max-microvolt = <1800000>;
-					};
-
-					palmas_ldo6_reg: ldo6 {
-						regulator-name = "vdd-sensor-2v85";
-						regulator-min-microvolt = <2850000>;
-						regulator-max-microvolt = <2850000>;
-					};
-
-					ldo7 {
-						regulator-name = "vdd-af-cam1";
-						regulator-min-microvolt = <2800000>;
-						regulator-max-microvolt = <2800000>;
-					};
-
-					ldo8 {
-						regulator-name = "vdd-rtc";
-						regulator-min-microvolt = <900000>;
-						regulator-max-microvolt = <900000>;
-						regulator-always-on;
-						regulator-boot-on;
-						ti,enable-ldo8-tracking;
-					};
-
-					ldo9 {
-						regulator-name = "vddio-sdmmc-2";
-						regulator-min-microvolt = <1800000>;
-						regulator-max-microvolt = <3300000>;
-						regulator-always-on;
-						regulator-boot-on;
-					};
-
-					ldoln {
-						regulator-name = "hvdd-usb";
-						regulator-min-microvolt = <3300000>;
-						regulator-max-microvolt = <3300000>;
-					};
-
-					ldousb {
-						regulator-name = "avdd-usb";
-						regulator-min-microvolt = <3300000>;
-						regulator-max-microvolt = <3300000>;
-						regulator-always-on;
-						regulator-boot-on;
-					};
-
-					regen1 {
-						regulator-name = "rail-3v3";
-						regulator-max-microvolt = <3300000>;
-						regulator-always-on;
-						regulator-boot-on;
-					};
-
-					regen2 {
-						regulator-name = "rail-5v0";
-						regulator-max-microvolt = <5000000>;
-						regulator-always-on;
-						regulator-boot-on;
-					};
-				};
-			};
-
-			rtc {
-				compatible = "ti,palmas-rtc";
-				interrupt-parent = <&palmas>;
-				interrupts = <8 0>;
-			};
-
-			pinmux {
-				compatible = "ti,tps65913-pinctrl";
-				pinctrl-names = "default";
-				pinctrl-0 = <&palmas_default>;
-
-				palmas_default: pinmux {
-					pin_gpio6 {
-						pins = "gpio6";
-						function = "gpio";
-					};
-				};
-			};
-		};
-	};
-
-	spi@7000da00 {
-		status = "okay";
-		spi-max-frequency = <25000000>;
-		spi-flash@0 {
-			compatible = "winbond,w25q32dw";
-			reg = <0>;
-			spi-max-frequency = <20000000>;
-		};
 	};
 
-	pmc@7000e400 {
+	pmc {
 		nvidia,invert-interrupt;
-		nvidia,suspend-mode = <1>;
-		nvidia,cpu-pwr-good-time = <500>;
-		nvidia,cpu-pwr-off-time = <300>;
-		nvidia,core-pwr-good-time = <641 3845>;
-		nvidia,core-pwr-off-time = <61036>;
-		nvidia,core-power-req-active-high;
-		nvidia,sys-clock-req-active-high;
-	};
-
-	ahub@70080000 {
-		i2s@70080400 {
-			status = "okay";
-		};
 	};
 
 	sdhci@78000400 {
-		cd-gpios = <&gpio TEGRA_GPIO(V, 2) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(Q, 4) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 170 1>; /* gpio PV2 */
 		bus-width = <4>;
 		status = "okay";
 	};
@@ -1118,32 +839,12 @@
 		non-removable;
 	};
 
-	usb@7d008000 {
-		status = "okay";
-	};
-
-	usb-phy@7d008000 {
-		status = "okay";
-		vbus-supply = <&usb3_vbus_reg>;
-	};
-
-	backlight: backlight {
-		compatible = "pwm-backlight";
-
-		enable-gpios = <&gpio TEGRA_GPIO(H, 2) GPIO_ACTIVE_HIGH>;
-		power-supply = <&vdd_bl_reg>;
-		pwms = <&pwm 1 1000000>;
-
-		brightness-levels = <0 4 8 16 32 64 128 255>;
-		default-brightness-level = <6>;
-	};
-
 	clocks {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -1151,35 +852,6 @@
 		};
 	};
 
-	gpio-keys {
-		compatible = "gpio-keys";
-
-		home {
-			label = "Home";
-			gpios = <&gpio TEGRA_GPIO(I, 5) GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_HOME>;
-		};
-
-		power {
-			label = "Power";
-			gpios = <&gpio TEGRA_GPIO(Q, 0) GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_POWER>;
-			gpio-key,wakeup;
-		};
-
-		volume_down {
-			label = "Volume Down";
-			gpios = <&gpio TEGRA_GPIO(R, 1) GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_VOLUMEDOWN>;
-		};
-
-		volume_up {
-			label = "Volume Up";
-			gpios = <&gpio TEGRA_GPIO(R, 2) GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_VOLUMEUP>;
-		};
-	};
-
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -1201,7 +873,17 @@
 			regulator-min-microvolt = <1800000>;
 			regulator-max-microvolt = <1800000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(H, 5) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 61 0>; /* GPIO PH5 */
+		};
+
+		lcd_bl_en_reg: regulator@2 {
+			compatible = "regulator-fixed";
+			reg = <2>;
+			regulator-name = "lcd_bl_en";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			enable-active-high;
+			gpio = <&gpio 58 0>; /* GPIO PH2 */
 		};
 
 		usb1_vbus_reg: regulator@3 {
@@ -1211,7 +893,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(N, 4) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 108 0>; /* GPIO PN4 */
 			gpio-open-drain;
 			vin-supply = <&tps65090_dcdc1_reg>;
 		};
@@ -1223,7 +905,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(K, 6) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 86 0>; /* GPIO PK6 */
 			gpio-open-drain;
 			vin-supply = <&tps65090_dcdc1_reg>;
 		};
@@ -1234,54 +916,9 @@
 			regulator-name = "vdd_hdmi_5v0";
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
-			vin-supply = <&tps65090_dcdc1_reg>;
-		};
-
-		vdd_cam_1v8_reg: regulator@6 {
-			compatible = "regulator-fixed";
-			reg = <6>;
-			regulator-name = "vdd_cam_1v8_reg";
-			regulator-min-microvolt = <1800000>;
-			regulator-max-microvolt = <1800000>;
-			enable-active-high;
-			gpio = <&palmas_gpio 6 0>;
-		};
-
-		vdd_5v0_hdmi: regulator@7 {
-			compatible = "regulator-fixed";
-			reg = <7>;
-			regulator-name = "VDD_5V0_HDMI_CON";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			gpio = <&gpio TEGRA_GPIO(K, 1) GPIO_ACTIVE_HIGH>;
 			enable-active-high;
+			gpio = <&gpio 81 0>; /* GPIO PK1 */
 			vin-supply = <&tps65090_dcdc1_reg>;
 		};
 	};
-
-	sound {
-		compatible = "nvidia,tegra-audio-rt5640-dalmore",
-			     "nvidia,tegra-audio-rt5640";
-		nvidia,model = "NVIDIA Tegra Dalmore";
-
-		nvidia,audio-routing =
-			"Headphones", "HPOR",
-			"Headphones", "HPOL",
-			"Speakers", "SPORP",
-			"Speakers", "SPORN",
-			"Speakers", "SPOLP",
-			"Speakers", "SPOLN",
-			"Mic Jack", "MICBIAS1",
-			"IN2P", "Mic Jack";
-
-		nvidia,i2s-controller = <&tegra_i2s1>;
-		nvidia,audio-codec = <&rt5640>;
-
-		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(R, 7) GPIO_ACTIVE_HIGH>;
-
-		clocks = <&tegra_car TEGRA114_CLK_PLL_A>,
-			 <&tegra_car TEGRA114_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA114_CLK_EXTERN1>;
-		clock-names = "pll_a", "pll_a_out0", "mclk";
-	};
 };
diff -urNp a/arch/arm/boot/dts/tegra114-pluto.dts b/arch/arm/boot/dts/tegra114-pluto.dts
--- a/arch/arm/boot/dts/tegra114-pluto.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/tegra114-pluto.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,33 @@
+/dts-v1/;
+
+/include/ "tegra114.dtsi"
+
+/ {
+	model = "NVIDIA Tegra114 Pluto evaluation board";
+	compatible = "nvidia,pluto", "nvidia,tegra114";
+
+	memory {
+		reg = <0x80000000 0x40000000>;
+	};
+
+	serial@70006300 {
+		status = "okay";
+	};
+
+	pmc {
+		nvidia,invert-interrupt;
+	};
+
+	clocks {
+		compatible = "simple-bus";
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		clk32k_in: clock {
+			compatible = "fixed-clock";
+			reg=<0>;
+			#clock-cells = <0>;
+			clock-frequency = <32768>;
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/tegra114.dtsi b/arch/arm/boot/dts/tegra114.dtsi
--- a/arch/arm/boot/dts/tegra114.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra114.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,130 +1,17 @@
-#include <dt-bindings/clock/tegra114-car.h>
-#include <dt-bindings/gpio/tegra-gpio.h>
-#include <dt-bindings/memory/tegra114-mc.h>
-#include <dt-bindings/pinctrl/pinctrl-tegra.h>
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	compatible = "nvidia,tegra114";
 	interrupt-parent = <&gic>;
 
-	host1x@50000000 {
-		compatible = "nvidia,tegra114-host1x", "simple-bus";
-		reg = <0x50000000 0x00028000>;
-		interrupts = <GIC_SPI 65 IRQ_TYPE_LEVEL_HIGH>, /* syncpt */
-			     <GIC_SPI 67 IRQ_TYPE_LEVEL_HIGH>; /* general */
-		clocks = <&tegra_car TEGRA114_CLK_HOST1X>;
-		resets = <&tegra_car 28>;
-		reset-names = "host1x";
-
-		#address-cells = <1>;
-		#size-cells = <1>;
-
-		ranges = <0x54000000 0x54000000 0x01000000>;
-
-		gr2d@54140000 {
-			compatible = "nvidia,tegra114-gr2d", "nvidia,tegra20-gr2d";
-			reg = <0x54140000 0x00040000>;
-			interrupts = <GIC_SPI 72 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA114_CLK_GR2D>;
-			resets = <&tegra_car 21>;
-			reset-names = "2d";
-		};
-
-		gr3d@54180000 {
-			compatible = "nvidia,tegra114-gr3d", "nvidia,tegra20-gr3d";
-			reg = <0x54180000 0x00040000>;
-			clocks = <&tegra_car TEGRA114_CLK_GR3D>;
-			resets = <&tegra_car 24>;
-			reset-names = "3d";
-		};
-
-		dc@54200000 {
-			compatible = "nvidia,tegra114-dc", "nvidia,tegra20-dc";
-			reg = <0x54200000 0x00040000>;
-			interrupts = <GIC_SPI 73 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA114_CLK_DISP1>,
-				 <&tegra_car TEGRA114_CLK_PLL_P>;
-			clock-names = "dc", "parent";
-			resets = <&tegra_car 27>;
-			reset-names = "dc";
-
-			iommus = <&mc TEGRA_SWGROUP_DC>;
-
-			nvidia,head = <0>;
-
-			rgb {
-				status = "disabled";
-			};
-		};
-
-		dc@54240000 {
-			compatible = "nvidia,tegra114-dc", "nvidia,tegra20-dc";
-			reg = <0x54240000 0x00040000>;
-			interrupts = <GIC_SPI 74 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA114_CLK_DISP2>,
-				 <&tegra_car TEGRA114_CLK_PLL_P>;
-			clock-names = "dc", "parent";
-			resets = <&tegra_car 26>;
-			reset-names = "dc";
-
-			iommus = <&mc TEGRA_SWGROUP_DCB>;
-
-			nvidia,head = <1>;
-
-			rgb {
-				status = "disabled";
-			};
-		};
-
-		hdmi@54280000 {
-			compatible = "nvidia,tegra114-hdmi";
-			reg = <0x54280000 0x00040000>;
-			interrupts = <GIC_SPI 75 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA114_CLK_HDMI>,
-				 <&tegra_car TEGRA114_CLK_PLL_D2_OUT0>;
-			clock-names = "hdmi", "parent";
-			resets = <&tegra_car 51>;
-			reset-names = "hdmi";
-			status = "disabled";
-		};
-
-		dsi@54300000 {
-			compatible = "nvidia,tegra114-dsi";
-			reg = <0x54300000 0x00040000>;
-			clocks = <&tegra_car TEGRA114_CLK_DSIA>,
-				 <&tegra_car TEGRA114_CLK_DSIALP>,
-				 <&tegra_car TEGRA114_CLK_PLL_D_OUT0>;
-			clock-names = "dsi", "lp", "parent";
-			resets = <&tegra_car 48>;
-			reset-names = "dsi";
-			nvidia,mipi-calibrate = <&mipi 0x060>; /* DSIA & DSIB pads */
-			status = "disabled";
-
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		dsi@54400000 {
-			compatible = "nvidia,tegra114-dsi";
-			reg = <0x54400000 0x00040000>;
-			clocks = <&tegra_car TEGRA114_CLK_DSIB>,
-				 <&tegra_car TEGRA114_CLK_DSIBLP>,
-				 <&tegra_car TEGRA114_CLK_PLL_D2_OUT0>;
-			clock-names = "dsi", "lp", "parent";
-			resets = <&tegra_car 82>;
-			reset-names = "dsi";
-			nvidia,mipi-calibrate = <&mipi 0x180>; /* DSIC & DSID pads */
-			status = "disabled";
-
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
+	aliases {
+		serial0 = &uarta;
+		serial1 = &uartb;
+		serial2 = &uartc;
+		serial3 = &uartd;
 	};
 
-	gic: interrupt-controller@50041000 {
+	gic: interrupt-controller {
 		compatible = "arm,cortex-a15-gic";
 		#interrupt-cells = <3>;
 		interrupt-controller;
@@ -132,104 +19,88 @@
 		      <0x50042000 0x1000>,
 		      <0x50044000 0x2000>,
 		      <0x50046000 0x2000>;
-		interrupts = <GIC_PPI 9
-			(GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_HIGH)>;
+		interrupts = <1 9 0xf04>;
 	};
 
 	timer@60005000 {
 		compatible = "nvidia,tegra114-timer", "nvidia,tegra20-timer";
 		reg = <0x60005000 0x400>;
-		interrupts = <GIC_SPI 0 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 1 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 41 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 42 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 121 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 122 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_TIMER>;
+		interrupts = <0 0 0x04
+			      0 1 0x04
+			      0 41 0x04
+			      0 42 0x04
+			      0 121 0x04
+			      0 122 0x04>;
+		clocks = <&tegra_car 5>;
 	};
 
-	tegra_car: clock@60006000 {
+	tegra_car: clock {
 		compatible = "nvidia,tegra114-car";
 		reg = <0x60006000 0x1000>;
 		#clock-cells = <1>;
-		#reset-cells = <1>;
-	};
-
-	flow-controller@60007000 {
-		compatible = "nvidia,tegra114-flowctrl";
-		reg = <0x60007000 0x1000>;
 	};
 
-	apbdma: dma@6000a000 {
+	apbdma: dma {
 		compatible = "nvidia,tegra114-apbdma";
 		reg = <0x6000a000 0x1400>;
-		interrupts = <GIC_SPI 104 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 105 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 106 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 107 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 108 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 109 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 110 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 111 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 112 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 113 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 115 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 116 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 117 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 118 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 119 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 128 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 129 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 130 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 131 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 132 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 133 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 134 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 135 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 136 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 137 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 138 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 139 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 140 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 141 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 142 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 143 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_APBDMA>;
-		resets = <&tegra_car 34>;
-		reset-names = "dma";
-		#dma-cells = <1>;
+		interrupts = <0 104 0x04
+			      0 105 0x04
+			      0 106 0x04
+			      0 107 0x04
+			      0 108 0x04
+			      0 109 0x04
+			      0 110 0x04
+			      0 111 0x04
+			      0 112 0x04
+			      0 113 0x04
+			      0 114 0x04
+			      0 115 0x04
+			      0 116 0x04
+			      0 117 0x04
+			      0 118 0x04
+			      0 119 0x04
+			      0 128 0x04
+			      0 129 0x04
+			      0 130 0x04
+			      0 131 0x04
+			      0 132 0x04
+			      0 133 0x04
+			      0 134 0x04
+			      0 135 0x04
+			      0 136 0x04
+			      0 137 0x04
+			      0 138 0x04
+			      0 139 0x04
+			      0 140 0x04
+			      0 141 0x04
+			      0 142 0x04
+			      0 143 0x04>;
+		clocks = <&tegra_car 34>;
 	};
 
-	ahb: ahb@6000c004 {
+	ahb: ahb {
 		compatible = "nvidia,tegra114-ahb", "nvidia,tegra30-ahb";
 		reg = <0x6000c004 0x14c>;
 	};
 
-	gpio: gpio@6000d000 {
+	gpio: gpio {
 		compatible = "nvidia,tegra114-gpio", "nvidia,tegra30-gpio";
 		reg = <0x6000d000 0x1000>;
-		interrupts = <GIC_SPI 32 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 33 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 34 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 35 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 55 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 87 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 89 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 125 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 32 0x04
+			      0 33 0x04
+			      0 34 0x04
+			      0 35 0x04
+			      0 55 0x04
+			      0 87 0x04
+			      0 89 0x04
+			      0 125 0x04>;
 		#gpio-cells = <2>;
 		gpio-controller;
 		#interrupt-cells = <2>;
 		interrupt-controller;
 	};
 
-	apbmisc@70000800 {
-		compatible = "nvidia,tegra114-apbmisc", "nvidia,tegra20-apbmisc";
-		reg = <0x70000800 0x64   /* Chip revision */
-		       0x70000008 0x04>; /* Strapping options */
-	};
-
-	pinmux: pinmux@70000868 {
+	pinmux: pinmux {
 		compatible = "nvidia,tegra114-pinmux";
 		reg = <0x70000868 0x148		/* Pad control registers */
 		       0x70003000 0x40c>;	/* Mux registers */
@@ -247,483 +118,240 @@
 		compatible = "nvidia,tegra114-uart", "nvidia,tegra20-uart";
 		reg = <0x70006000 0x40>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 36 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_UARTA>;
-		resets = <&tegra_car 6>;
-		reset-names = "serial";
-		dmas = <&apbdma 8>, <&apbdma 8>;
-		dma-names = "rx", "tx";
+		interrupts = <0 36 0x04>;
+		nvidia,dma-request-selector = <&apbdma 8>;
 		status = "disabled";
+		clocks = <&tegra_car 6>;
 	};
 
 	uartb: serial@70006040 {
 		compatible = "nvidia,tegra114-uart", "nvidia,tegra20-uart";
 		reg = <0x70006040 0x40>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 37 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_UARTB>;
-		resets = <&tegra_car 7>;
-		reset-names = "serial";
-		dmas = <&apbdma 9>, <&apbdma 9>;
-		dma-names = "rx", "tx";
+		interrupts = <0 37 0x04>;
+		nvidia,dma-request-selector = <&apbdma 9>;
 		status = "disabled";
+		clocks = <&tegra_car 192>;
 	};
 
 	uartc: serial@70006200 {
 		compatible = "nvidia,tegra114-uart", "nvidia,tegra20-uart";
 		reg = <0x70006200 0x100>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 46 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_UARTC>;
-		resets = <&tegra_car 55>;
-		reset-names = "serial";
-		dmas = <&apbdma 10>, <&apbdma 10>;
-		dma-names = "rx", "tx";
+		interrupts = <0 46 0x04>;
+		nvidia,dma-request-selector = <&apbdma 10>;
 		status = "disabled";
+		clocks = <&tegra_car 55>;
 	};
 
 	uartd: serial@70006300 {
 		compatible = "nvidia,tegra114-uart", "nvidia,tegra20-uart";
 		reg = <0x70006300 0x100>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 90 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_UARTD>;
-		resets = <&tegra_car 65>;
-		reset-names = "serial";
-		dmas = <&apbdma 19>, <&apbdma 19>;
-		dma-names = "rx", "tx";
+		interrupts = <0 90 0x04>;
+		nvidia,dma-request-selector = <&apbdma 19>;
 		status = "disabled";
+		clocks = <&tegra_car 65>;
 	};
 
-	pwm: pwm@7000a000 {
+	pwm: pwm {
 		compatible = "nvidia,tegra114-pwm", "nvidia,tegra20-pwm";
 		reg = <0x7000a000 0x100>;
 		#pwm-cells = <2>;
-		clocks = <&tegra_car TEGRA114_CLK_PWM>;
-		resets = <&tegra_car 17>;
-		reset-names = "pwm";
+		clocks = <&tegra_car 17>;
 		status = "disabled";
 	};
 
 	i2c@7000c000 {
 		compatible = "nvidia,tegra114-i2c";
 		reg = <0x7000c000 0x100>;
-		interrupts = <GIC_SPI 38 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 38 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_I2C1>;
+		clocks = <&tegra_car 12>;
 		clock-names = "div-clk";
-		resets = <&tegra_car 12>;
-		reset-names = "i2c";
-		dmas = <&apbdma 21>, <&apbdma 21>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	i2c@7000c400 {
 		compatible = "nvidia,tegra114-i2c";
 		reg = <0x7000c400 0x100>;
-		interrupts = <GIC_SPI 84 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 84 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_I2C2>;
+		clocks = <&tegra_car 54>;
 		clock-names = "div-clk";
-		resets = <&tegra_car 54>;
-		reset-names = "i2c";
-		dmas = <&apbdma 22>, <&apbdma 22>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	i2c@7000c500 {
 		compatible = "nvidia,tegra114-i2c";
 		reg = <0x7000c500 0x100>;
-		interrupts = <GIC_SPI 92 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 92 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_I2C3>;
+		clocks = <&tegra_car 67>;
 		clock-names = "div-clk";
-		resets = <&tegra_car 67>;
-		reset-names = "i2c";
-		dmas = <&apbdma 23>, <&apbdma 23>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	i2c@7000c700 {
 		compatible = "nvidia,tegra114-i2c";
 		reg = <0x7000c700 0x100>;
-		interrupts = <GIC_SPI 120 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 120 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_I2C4>;
+		clocks = <&tegra_car 103>;
 		clock-names = "div-clk";
-		resets = <&tegra_car 103>;
-		reset-names = "i2c";
-		dmas = <&apbdma 26>, <&apbdma 26>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	i2c@7000d000 {
 		compatible = "nvidia,tegra114-i2c";
 		reg = <0x7000d000 0x100>;
-		interrupts = <GIC_SPI 53 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 53 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_I2C5>;
+		clocks = <&tegra_car 47>;
 		clock-names = "div-clk";
-		resets = <&tegra_car 47>;
-		reset-names = "i2c";
-		dmas = <&apbdma 24>, <&apbdma 24>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	spi@7000d400 {
 		compatible = "nvidia,tegra114-spi";
 		reg = <0x7000d400 0x200>;
-		interrupts = <GIC_SPI 59 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 59 0x04>;
+		nvidia,dma-request-selector = <&apbdma 15>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_SBC1>;
+		clocks = <&tegra_car 41>;
 		clock-names = "spi";
-		resets = <&tegra_car 41>;
-		reset-names = "spi";
-		dmas = <&apbdma 15>, <&apbdma 15>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	spi@7000d600 {
 		compatible = "nvidia,tegra114-spi";
 		reg = <0x7000d600 0x200>;
-		interrupts = <GIC_SPI 82 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 82 0x04>;
+		nvidia,dma-request-selector = <&apbdma 16>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_SBC2>;
+		clocks = <&tegra_car 44>;
 		clock-names = "spi";
-		resets = <&tegra_car 44>;
-		reset-names = "spi";
-		dmas = <&apbdma 16>, <&apbdma 16>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	spi@7000d800 {
 		compatible = "nvidia,tegra114-spi";
 		reg = <0x7000d800 0x200>;
-		interrupts = <GIC_SPI 83 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 83 0x04>;
+		nvidia,dma-request-selector = <&apbdma 17>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_SBC3>;
+		clocks = <&tegra_car 46>;
 		clock-names = "spi";
-		resets = <&tegra_car 46>;
-		reset-names = "spi";
-		dmas = <&apbdma 17>, <&apbdma 17>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	spi@7000da00 {
 		compatible = "nvidia,tegra114-spi";
 		reg = <0x7000da00 0x200>;
-		interrupts = <GIC_SPI 93 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 93 0x04>;
+		nvidia,dma-request-selector = <&apbdma 18>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_SBC4>;
+		clocks = <&tegra_car 68>;
 		clock-names = "spi";
-		resets = <&tegra_car 68>;
-		reset-names = "spi";
-		dmas = <&apbdma 18>, <&apbdma 18>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	spi@7000dc00 {
 		compatible = "nvidia,tegra114-spi";
 		reg = <0x7000dc00 0x200>;
-		interrupts = <GIC_SPI 94 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 94 0x04>;
+		nvidia,dma-request-selector = <&apbdma 27>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_SBC5>;
+		clocks = <&tegra_car 104>;
 		clock-names = "spi";
-		resets = <&tegra_car 104>;
-		reset-names = "spi";
-		dmas = <&apbdma 27>, <&apbdma 27>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	spi@7000de00 {
 		compatible = "nvidia,tegra114-spi";
 		reg = <0x7000de00 0x200>;
-		interrupts = <GIC_SPI 79 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 79 0x04>;
+		nvidia,dma-request-selector = <&apbdma 28>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA114_CLK_SBC6>;
+		clocks = <&tegra_car 105>;
 		clock-names = "spi";
-		resets = <&tegra_car 105>;
-		reset-names = "spi";
-		dmas = <&apbdma 28>, <&apbdma 28>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
-	rtc@7000e000 {
+	rtc {
 		compatible = "nvidia,tegra114-rtc", "nvidia,tegra20-rtc";
 		reg = <0x7000e000 0x100>;
-		interrupts = <GIC_SPI 2 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_RTC>;
+		interrupts = <0 2 0x04>;
+		clocks = <&tegra_car 4>;
 	};
 
-	kbc@7000e200 {
+	kbc {
 		compatible = "nvidia,tegra114-kbc";
 		reg = <0x7000e200 0x100>;
-		interrupts = <GIC_SPI 85 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_KBC>;
-		resets = <&tegra_car 36>;
-		reset-names = "kbc";
+		interrupts = <0 85 0x04>;
+		clocks = <&tegra_car 36>;
 		status = "disabled";
 	};
 
-	pmc@7000e400 {
+	pmc {
 		compatible = "nvidia,tegra114-pmc";
 		reg = <0x7000e400 0x400>;
-		clocks = <&tegra_car TEGRA114_CLK_PCLK>, <&clk32k_in>;
+		clocks = <&tegra_car 261>, <&clk32k_in>;
 		clock-names = "pclk", "clk32k_in";
 	};
 
-	fuse@7000f800 {
-		compatible = "nvidia,tegra114-efuse";
-		reg = <0x7000f800 0x400>;
-		clocks = <&tegra_car TEGRA114_CLK_FUSE>;
-		clock-names = "fuse";
-		resets = <&tegra_car 39>;
-		reset-names = "fuse";
-	};
-
-	mc: memory-controller@70019000 {
-		compatible = "nvidia,tegra114-mc";
-		reg = <0x70019000 0x1000>;
-		clocks = <&tegra_car TEGRA114_CLK_MC>;
-		clock-names = "mc";
-
-		interrupts = <GIC_SPI 77 IRQ_TYPE_LEVEL_HIGH>;
-
-		#iommu-cells = <1>;
-	};
-
-	ahub@70080000 {
-		compatible = "nvidia,tegra114-ahub";
-		reg = <0x70080000 0x200>,
-		      <0x70080200 0x100>,
-		      <0x70081000 0x200>;
-		interrupts = <GIC_SPI 103 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_D_AUDIO>,
-			 <&tegra_car TEGRA114_CLK_APBIF>;
-		clock-names = "d_audio", "apbif";
-		resets = <&tegra_car 106>, /* d_audio */
-			 <&tegra_car 107>, /* apbif */
-			 <&tegra_car 30>,  /* i2s0 */
-			 <&tegra_car 11>,  /* i2s1 */
-			 <&tegra_car 18>,  /* i2s2 */
-			 <&tegra_car 101>, /* i2s3 */
-			 <&tegra_car 102>, /* i2s4 */
-			 <&tegra_car 108>, /* dam0 */
-			 <&tegra_car 109>, /* dam1 */
-			 <&tegra_car 110>, /* dam2 */
-			 <&tegra_car 10>,  /* spdif */
-			 <&tegra_car 153>, /* amx */
-			 <&tegra_car 154>; /* adx */
-		reset-names = "d_audio", "apbif", "i2s0", "i2s1", "i2s2",
-			      "i2s3", "i2s4", "dam0", "dam1", "dam2",
-			      "spdif", "amx", "adx";
-		dmas = <&apbdma 1>, <&apbdma 1>,
-		       <&apbdma 2>, <&apbdma 2>,
-		       <&apbdma 3>, <&apbdma 3>,
-		       <&apbdma 4>, <&apbdma 4>,
-		       <&apbdma 6>, <&apbdma 6>,
-		       <&apbdma 7>, <&apbdma 7>,
-		       <&apbdma 12>, <&apbdma 12>,
-		       <&apbdma 13>, <&apbdma 13>,
-		       <&apbdma 14>, <&apbdma 14>,
-		       <&apbdma 29>, <&apbdma 29>;
-		dma-names = "rx0", "tx0", "rx1", "tx1", "rx2", "tx2",
-			    "rx3", "tx3", "rx4", "tx4", "rx5", "tx5",
-			    "rx6", "tx6", "rx7", "tx7", "rx8", "tx8",
-			    "rx9", "tx9";
-		ranges;
-		#address-cells = <1>;
-		#size-cells = <1>;
-
-		tegra_i2s0: i2s@70080300 {
-			compatible = "nvidia,tegra114-i2s", "nvidia,tegra30-i2s";
-			reg = <0x70080300 0x100>;
-			nvidia,ahub-cif-ids = <4 4>;
-			clocks = <&tegra_car TEGRA114_CLK_I2S0>;
-			resets = <&tegra_car 30>;
-			reset-names = "i2s";
-			status = "disabled";
-		};
-
-		tegra_i2s1: i2s@70080400 {
-			compatible = "nvidia,tegra114-i2s", "nvidia,tegra30-i2s";
-			reg = <0x70080400 0x100>;
-			nvidia,ahub-cif-ids = <5 5>;
-			clocks = <&tegra_car TEGRA114_CLK_I2S1>;
-			resets = <&tegra_car 11>;
-			reset-names = "i2s";
-			status = "disabled";
-		};
-
-		tegra_i2s2: i2s@70080500 {
-			compatible = "nvidia,tegra114-i2s", "nvidia,tegra30-i2s";
-			reg = <0x70080500 0x100>;
-			nvidia,ahub-cif-ids = <6 6>;
-			clocks = <&tegra_car TEGRA114_CLK_I2S2>;
-			resets = <&tegra_car 18>;
-			reset-names = "i2s";
-			status = "disabled";
-		};
-
-		tegra_i2s3: i2s@70080600 {
-			compatible = "nvidia,tegra114-i2s", "nvidia,tegra30-i2s";
-			reg = <0x70080600 0x100>;
-			nvidia,ahub-cif-ids = <7 7>;
-			clocks = <&tegra_car TEGRA114_CLK_I2S3>;
-			resets = <&tegra_car 101>;
-			reset-names = "i2s";
-			status = "disabled";
-		};
-
-		tegra_i2s4: i2s@70080700 {
-			compatible = "nvidia,tegra114-i2s", "nvidia,tegra30-i2s";
-			reg = <0x70080700 0x100>;
-			nvidia,ahub-cif-ids = <8 8>;
-			clocks = <&tegra_car TEGRA114_CLK_I2S4>;
-			resets = <&tegra_car 102>;
-			reset-names = "i2s";
-			status = "disabled";
-		};
-	};
-
-	mipi: mipi@700e3000 {
-		compatible = "nvidia,tegra114-mipi";
-		reg = <0x700e3000 0x100>;
-		clocks = <&tegra_car TEGRA114_CLK_MIPI_CAL>;
-		#nvidia,mipi-calibrate-cells = <1>;
+	iommu {
+		compatible = "nvidia,tegra114-smmu", "nvidia,tegra30-smmu";
+		reg = <0x7000f010 0x02c
+		       0x7000f1f0 0x010
+		       0x7000f228 0x074>;
+		nvidia,#asids = <4>;
+		dma-window = <0 0x40000000>;
+		nvidia,swgroups = <0x18659fe>;
+		nvidia,ahb = <&ahb>;
 	};
 
 	sdhci@78000000 {
 		compatible = "nvidia,tegra114-sdhci", "nvidia,tegra30-sdhci";
 		reg = <0x78000000 0x200>;
-		interrupts = <GIC_SPI 14 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_SDMMC1>;
-		resets = <&tegra_car 14>;
-		reset-names = "sdhci";
-		status = "disabled";
+		interrupts = <0 14 0x04>;
+		clocks = <&tegra_car 14>;
+		status = "disable";
 	};
 
 	sdhci@78000200 {
 		compatible = "nvidia,tegra114-sdhci", "nvidia,tegra30-sdhci";
 		reg = <0x78000200 0x200>;
-		interrupts = <GIC_SPI 15 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_SDMMC2>;
-		resets = <&tegra_car 9>;
-		reset-names = "sdhci";
-		status = "disabled";
+		interrupts = <0 15 0x04>;
+		clocks = <&tegra_car 9>;
+		status = "disable";
 	};
 
 	sdhci@78000400 {
 		compatible = "nvidia,tegra114-sdhci", "nvidia,tegra30-sdhci";
 		reg = <0x78000400 0x200>;
-		interrupts = <GIC_SPI 19 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_SDMMC3>;
-		resets = <&tegra_car 69>;
-		reset-names = "sdhci";
-		status = "disabled";
+		interrupts = <0 19 0x04>;
+		clocks = <&tegra_car 69>;
+		status = "disable";
 	};
 
 	sdhci@78000600 {
 		compatible = "nvidia,tegra114-sdhci", "nvidia,tegra30-sdhci";
 		reg = <0x78000600 0x200>;
-		interrupts = <GIC_SPI 31 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA114_CLK_SDMMC4>;
-		resets = <&tegra_car 15>;
-		reset-names = "sdhci";
-		status = "disabled";
-	};
-
-	usb@7d000000 {
-		compatible = "nvidia,tegra30-ehci", "usb-ehci";
-		reg = <0x7d000000 0x4000>;
-		interrupts = <GIC_SPI 20 IRQ_TYPE_LEVEL_HIGH>;
-		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA114_CLK_USBD>;
-		resets = <&tegra_car 22>;
-		reset-names = "usb";
-		nvidia,phy = <&phy1>;
-		status = "disabled";
-	};
-
-	phy1: usb-phy@7d000000 {
-		compatible = "nvidia,tegra30-usb-phy";
-		reg = <0x7d000000 0x4000 0x7d000000 0x4000>;
-		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA114_CLK_USBD>,
-			 <&tegra_car TEGRA114_CLK_PLL_U>,
-			 <&tegra_car TEGRA114_CLK_USBD>;
-		clock-names = "reg", "pll_u", "utmi-pads";
-		resets = <&tegra_car 22>, <&tegra_car 22>;
-		reset-names = "usb", "utmi-pads";
-		nvidia,hssync-start-delay = <0>;
-		nvidia,idle-wait-delay = <17>;
-		nvidia,elastic-limit = <16>;
-		nvidia,term-range-adj = <6>;
-		nvidia,xcvr-setup = <9>;
-		nvidia,xcvr-lsfslew = <0>;
-		nvidia,xcvr-lsrslew = <3>;
-		nvidia,hssquelch-level = <2>;
-		nvidia,hsdiscon-level = <5>;
-		nvidia,xcvr-hsslew = <12>;
-		nvidia,has-utmi-pad-registers;
-		status = "disabled";
-	};
-
-	usb@7d008000 {
-		compatible = "nvidia,tegra30-ehci", "usb-ehci";
-		reg = <0x7d008000 0x4000>;
-		interrupts = <GIC_SPI 97 IRQ_TYPE_LEVEL_HIGH>;
-		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA114_CLK_USB3>;
-		resets = <&tegra_car 59>;
-		reset-names = "usb";
-		nvidia,phy = <&phy3>;
-		status = "disabled";
-	};
-
-	phy3: usb-phy@7d008000 {
-		compatible = "nvidia,tegra30-usb-phy";
-		reg = <0x7d008000 0x4000 0x7d000000 0x4000>;
-		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA114_CLK_USB3>,
-			 <&tegra_car TEGRA114_CLK_PLL_U>,
-			 <&tegra_car TEGRA114_CLK_USBD>;
-		clock-names = "reg", "pll_u", "utmi-pads";
-		resets = <&tegra_car 59>, <&tegra_car 22>;
-		reset-names = "usb", "utmi-pads";
-		nvidia,hssync-start-delay = <0>;
-		nvidia,idle-wait-delay = <17>;
-		nvidia,elastic-limit = <16>;
-		nvidia,term-range-adj = <6>;
-		nvidia,xcvr-setup = <9>;
-		nvidia,xcvr-lsfslew = <0>;
-		nvidia,xcvr-lsrslew = <3>;
-		nvidia,hssquelch-level = <2>;
-		nvidia,hsdiscon-level = <5>;
-		nvidia,xcvr-hsslew = <12>;
-		status = "disabled";
+		interrupts = <0 31 0x04>;
+		clocks = <&tegra_car 15>;
+		status = "disable";
 	};
 
 	cpus {
@@ -757,14 +385,9 @@
 
 	timer {
 		compatible = "arm,armv7-timer";
-		interrupts =
-			<GIC_PPI 13
-				(GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
-			<GIC_PPI 14
-				(GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
-			<GIC_PPI 11
-				(GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
-			<GIC_PPI 10
-				(GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>;
+		interrupts = <1 13 0xf08>,
+			     <1 14 0xf08>,
+			     <1 11 0xf08>,
+			     <1 10 0xf08>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-colibri-512.dtsi b/arch/arm/boot/dts/tegra20-colibri-512.dtsi
--- a/arch/arm/boot/dts/tegra20-colibri-512.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-colibri-512.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,30 +1,24 @@
-#include "tegra20.dtsi"
+/include/ "tegra20.dtsi"
 
 / {
 	model = "Toradex Colibri T20 512MB";
 	compatible = "toradex,colibri_t20-512", "nvidia,tegra20";
 
-	aliases {
-		rtc0 = "/i2c@7000d000/tps6586x@34";
-		rtc1 = "/rtc@7000e000";
-	};
-
 	memory {
 		reg = <0x00000000 0x20000000>;
 	};
 
-	host1x@50000000 {
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			vdd-supply = <&hdmi_vdd_reg>;
 			pll-supply = <&hdmi_pll_reg>;
 
 			nvidia,ddc-i2c-bus = <&i2c_ddc>;
-			nvidia,hpd-gpio = <&gpio TEGRA_GPIO(N, 7)
-				GPIO_ACTIVE_HIGH>;
+			nvidia,hpd-gpio = <&gpio 111 0>; /* PN7 */
 		};
 	};
 
-	pinmux@70000014 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -32,20 +26,20 @@
 			audio_refclk {
 				nvidia,pins = "cdev1";
 				nvidia,function = "plla_out";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			crt {
 				nvidia,pins = "crtp";
 				nvidia,function = "crt";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			dap3 {
 				nvidia,pins = "dap3";
 				nvidia,function = "dap3";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			displaya {
 				nvidia,pins = "ld0", "ld1", "ld2", "ld3",
@@ -55,163 +49,155 @@
 					"lhs", "lpw0", "lpw2", "lsc0",
 					"lsc1", "lsck", "lsda", "lspi", "lvs";
 				nvidia,function = "displaya";
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,tristate = <1>;
 			};
 			gpio_dte {
 				nvidia,pins = "dte";
 				nvidia,function = "rsvd1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			gpio_gmi {
 				nvidia,pins = "ata", "atc", "atd", "ate",
 					"dap1", "dap2", "dap4", "gpu", "irrx",
 					"irtx", "spia", "spib", "spic";
 				nvidia,function = "gmi";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			gpio_pta {
 				nvidia,pins = "pta";
 				nvidia,function = "rsvd4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			gpio_uac {
 				nvidia,pins = "uac";
 				nvidia,function = "rsvd2";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			hdint {
 				nvidia,pins = "hdint";
 				nvidia,function = "hdmi";
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,tristate = <1>;
 			};
 			i2c1 {
 				nvidia,pins = "rm";
 				nvidia,function = "i2c1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			i2c3 {
 				nvidia,pins = "dtf";
 				nvidia,function = "i2c3";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			i2cddc {
 				nvidia,pins = "ddc";
 				nvidia,function = "i2c2";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <1>;
 			};
 			i2cp {
 				nvidia,pins = "i2cp";
 				nvidia,function = "i2cp";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			irda {
 				nvidia,pins = "uad";
 				nvidia,function = "irda";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			nand {
 				nvidia,pins = "kbca", "kbcc", "kbcd",
 					"kbce", "kbcf";
 				nvidia,function = "nand";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			owc {
 				nvidia,pins = "owc";
 				nvidia,function = "owr";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			pmc {
 				nvidia,pins = "pmc";
 				nvidia,function = "pwr_on";
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 			pwm {
 				nvidia,pins = "sdb", "sdc", "sdd";
 				nvidia,function = "pwm";
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,tristate = <1>;
 			};
 			sdio4 {
 				nvidia,pins = "atb", "gma", "gme";
 				nvidia,function = "sdio4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			spi1 {
 				nvidia,pins = "spid", "spie", "spif";
 				nvidia,function = "spi1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			spi4 {
 				nvidia,pins = "slxa", "slxc", "slxd", "slxk";
 				nvidia,function = "spi4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			uarta {
 				nvidia,pins = "sdio1";
 				nvidia,function = "uarta";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			uartd {
 				nvidia,pins = "gmc";
 				nvidia,function = "uartd";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			ulpi {
 				nvidia,pins = "uaa", "uab", "uda";
 				nvidia,function = "ulpi";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			ulpi_refclk {
 				nvidia,pins = "cdev2";
 				nvidia,function = "pllp_out4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			usb_gpio {
 				nvidia,pins = "spig", "spih";
 				nvidia,function = "spi2_alt";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			vi {
 				nvidia,pins = "dta", "dtb", "dtc", "dtd";
 				nvidia,function = "vi";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			vi_sc {
 				nvidia,pins = "csus";
 				nvidia,function = "vi_sensor_clk";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 		};
 	};
 
-	ac97: ac97@70002000 {
-		status = "okay";
-		nvidia,codec-reset-gpio = <&gpio TEGRA_GPIO(V, 0)
-			GPIO_ACTIVE_HIGH>;
-		nvidia,codec-sync-gpio = <&gpio TEGRA_GPIO(P, 0)
-			GPIO_ACTIVE_HIGH>;
-	};
-
 	i2c@7000c000 {
 		clock-frequency = <400000>;
 	};
@@ -231,22 +217,22 @@
 		pmic: tps6586x@34 {
 			compatible = "ti,tps6586x";
 			reg = <0x34>;
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 
 			ti,system-power-controller;
 
 			#gpio-cells = <2>;
 			gpio-controller;
 
-			sys-supply = <&vdd_3v3_reg>;
+			sys-supply = <&vdd_5v0_reg>;
 			vin-sm0-supply = <&sys_reg>;
 			vin-sm1-supply = <&sys_reg>;
 			vin-sm2-supply = <&sys_reg>;
 			vinldo01-supply = <&sm2_reg>;
-			vinldo23-supply = <&vdd_3v3_reg>;
-			vinldo4-supply = <&vdd_3v3_reg>;
-			vinldo678-supply = <&vdd_3v3_reg>;
-			vinldo9-supply = <&vdd_3v3_reg>;
+			vinldo23-supply = <&sm2_reg>;
+			vinldo4-supply = <&sm2_reg>;
+			vinldo678-supply = <&sm2_reg>;
+			vinldo9-supply = <&sm2_reg>;
 
 			regulators {
 				#address-cells = <1>;
@@ -263,8 +249,8 @@
 					reg = <1>;
 					regulator-compatible = "sm0";
 					regulator-name = "vdd_sm0,vdd_core";
-					regulator-min-microvolt = <1200000>;
-					regulator-max-microvolt = <1200000>;
+					regulator-min-microvolt = <1275000>;
+					regulator-max-microvolt = <1275000>;
 					regulator-always-on;
 				};
 
@@ -272,8 +258,8 @@
 					reg = <2>;
 					regulator-compatible = "sm1";
 					regulator-name = "vdd_sm1,vdd_cpu";
-					regulator-min-microvolt = <1000000>;
-					regulator-max-microvolt = <1000000>;
+					regulator-min-microvolt = <1100000>;
+					regulator-max-microvolt = <1100000>;
 					regulator-always-on;
 				};
 
@@ -281,8 +267,8 @@
 					reg = <3>;
 					regulator-compatible = "sm2";
 					regulator-name = "vdd_sm2,vin_ldo*";
-					regulator-min-microvolt = <1800000>;
-					regulator-max-microvolt = <1800000>;
+					regulator-min-microvolt = <3700000>;
+					regulator-max-microvolt = <3700000>;
 					regulator-always-on;
 				};
 
@@ -329,8 +315,8 @@
 					reg = <10>;
 					regulator-compatible = "ldo6";
 					regulator-name = "vdd_ldo6,avdd_vdac,vddio_vi,vddio_cam";
-					regulator-min-microvolt = <2850000>;
-					regulator-max-microvolt = <2850000>;
+					regulator-min-microvolt = <1800000>;
+					regulator-max-microvolt = <1800000>;
 				};
 
 				hdmi_vdd_reg: regulator@11 {
@@ -375,8 +361,8 @@
 		};
 	};
 
-	pmc@7000e400 {
-		nvidia,suspend-mode = <1>;
+	pmc {
+		nvidia,suspend-mode = <2>;
 		nvidia,cpu-pwr-good-time = <5000>;
 		nvidia,cpu-pwr-off-time = <5000>;
 		nvidia,core-pwr-good-time = <3845 3845>;
@@ -455,20 +441,19 @@
 		};
 	};
 
-	usb@c5004000 {
+	ac97: ac97 {
 		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 1)
-			GPIO_ACTIVE_LOW>;
+		nvidia,codec-reset-gpio = <&gpio 168 0>; /* gpio PV0 */
+		nvidia,codec-sync-gpio = <&gpio 120 0>; /* gpio PP0 */
 	};
 
-	usb-phy@c5004000 {
+	usb@c5004000 {
 		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 1)
-			GPIO_ACTIVE_LOW>;
+		nvidia,phy-reset-gpio = <&gpio 169 0>; /* gpio PV1 */
 	};
 
 	sdhci@c8000600 {
-		cd-gpios = <&gpio TEGRA_GPIO(C, 7) GPIO_ACTIVE_LOW>;
+		cd-gpios = <&gpio 23 1>; /* gpio PC7 */
 	};
 
 	clocks {
@@ -476,7 +461,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -484,17 +469,35 @@
 		};
 	};
 
+	sound {
+		compatible = "nvidia,tegra-audio-wm9712-colibri_t20",
+			         "nvidia,tegra-audio-wm9712";
+		nvidia,model = "Colibri T20 AC97 Audio";
+
+		nvidia,audio-routing =
+			"Headphone", "HPOUTL",
+			"Headphone", "HPOUTR",
+			"LineIn", "LINEINL",
+			"LineIn", "LINEINR",
+			"Mic", "MIC1";
+
+		nvidia,ac97-controller = <&ac97>;
+
+		clocks = <&tegra_car 112>, <&tegra_car 113>, <&tegra_car 94>;
+		clock-names = "pll_a", "pll_a_out0", "mclk";
+	};
+
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		vdd_3v3_reg: regulator@100 {
+		vdd_5v0_reg: regulator@100 {
 			compatible = "regulator-fixed";
 			reg = <100>;
-			regulator-name = "vdd_3v3";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
+			regulator-name = "vdd_5v0";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
 			regulator-always-on;
 		};
 
@@ -507,27 +510,7 @@
 			enable-active-high;
 			regulator-boot-on;
 			regulator-always-on;
-			gpio = <&gpio TEGRA_GPIO(BB, 1) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 217 0>;
 		};
 	};
-
-	sound {
-		compatible = "nvidia,tegra-audio-wm9712-colibri_t20",
-			         "nvidia,tegra-audio-wm9712";
-		nvidia,model = "Colibri T20 AC97 Audio";
-
-		nvidia,audio-routing =
-			"Headphone", "HPOUTL",
-			"Headphone", "HPOUTR",
-			"LineIn", "LINEINL",
-			"LineIn", "LINEINR",
-			"Mic", "MIC1";
-
-		nvidia,ac97-controller = <&ac97>;
-
-		clocks = <&tegra_car TEGRA20_CLK_PLL_A>,
-			 <&tegra_car TEGRA20_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA20_CLK_CDEV1>;
-		clock-names = "pll_a", "pll_a_out0", "mclk";
-	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-harmony.dts b/arch/arm/boot/dts/tegra20-harmony.dts
--- a/arch/arm/boot/dts/tegra20-harmony.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-harmony.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,45 +1,28 @@
 /dts-v1/;
 
-#include <dt-bindings/input/input.h>
-#include "tegra20.dtsi"
+/include/ "tegra20.dtsi"
 
 / {
 	model = "NVIDIA Tegra20 Harmony evaluation board";
 	compatible = "nvidia,harmony", "nvidia,tegra20";
 
-	aliases {
-		rtc0 = "/i2c@7000d000/tps6586x@34";
-		rtc1 = "/rtc@7000e000";
-		serial0 = &uartd;
-	};
-
 	memory {
 		reg = <0x00000000 0x40000000>;
 	};
 
-	host1x@50000000 {
-		dc@54200000 {
-			rgb {
-				status = "okay";
-
-				nvidia,panel = <&panel>;
-			};
-		};
-
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			status = "okay";
 
-			hdmi-supply = <&vdd_5v0_hdmi>;
 			vdd-supply = <&hdmi_vdd_reg>;
 			pll-supply = <&hdmi_pll_reg>;
 
 			nvidia,ddc-i2c-bus = <&hdmi_ddc>;
-			nvidia,hpd-gpio = <&gpio TEGRA_GPIO(N, 7)
-				GPIO_ACTIVE_HIGH>;
+			nvidia,hpd-gpio = <&gpio 111 0>; /* PN7 */
 		};
 	};
 
-	pinmux@70000014 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -200,50 +183,50 @@
 					"gmb", "gmc", "gmd", "gme", "gpu7",
 					"gpv", "i2cp", "pta", "rm", "slxa",
 					"slxk", "spia", "spib", "uac";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			conf_ck32 {
 				nvidia,pins = "ck32", "ddrc", "pmca", "pmcb",
 					"pmcc", "pmcd", "pmce", "xm2c", "xm2d";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
+				nvidia,pull = <0>;
 			};
 			conf_csus {
 				nvidia,pins = "csus", "spid", "spif";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <1>;
 			};
 			conf_crtp {
 				nvidia,pins = "crtp", "dap2", "dap3", "dap4",
 					"dtc", "dte", "dtf", "gpu", "sdio1",
 					"slxc", "slxd", "spdi", "spdo", "spig",
 					"uda";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			conf_ddc {
 				nvidia,pins = "ddc", "dta", "dtd", "kbca",
 					"kbcb", "kbcc", "kbcd", "kbce", "kbcf",
 					"sdc";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			conf_hdint {
 				nvidia,pins = "hdint", "lcsn", "ldc", "lm1",
 					"lpw1", "lsc1", "lsck", "lsda", "lsdi",
 					"lvp0", "owc", "sdb";
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,tristate = <1>;
 			};
 			conf_irrx {
 				nvidia,pins = "irrx", "irtx", "sdd", "spic",
 					"spie", "spih", "uaa", "uab", "uad",
 					"uca", "ucb";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <1>;
 			};
 			conf_lc {
 				nvidia,pins = "lc", "ls";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
+				nvidia,pull = <2>;
 			};
 			conf_ld0 {
 				nvidia,pins = "ld0", "ld1", "ld2", "ld3", "ld4",
@@ -253,12 +236,12 @@
 					"lhp1", "lhp2", "lhs", "lm0", "lpp",
 					"lpw0", "lpw2", "lsc0", "lspi", "lvp1",
 					"lvs", "pmc";
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 			conf_ld17_0 {
 				nvidia,pins = "ld17_0", "ld19_18", "ld21_20",
 					"ld23_22";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
+				nvidia,pull = <1>;
 			};
 		};
 	};
@@ -271,10 +254,6 @@
 		status = "okay";
 	};
 
-	pwm: pwm@7000a000 {
-		status = "okay";
-	};
-
 	i2c@7000c000 {
 		status = "okay";
 		clock-frequency = <400000>;
@@ -283,7 +262,7 @@
 			compatible = "wlf,wm8903";
 			reg = <0x1a>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(X, 3) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <187 0x04>;
 
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -311,7 +290,7 @@
 		pmic: tps6586x@34 {
 			compatible = "ti,tps6586x";
 			reg = <0x34>;
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 
 			ti,system-power-controller;
 
@@ -355,7 +334,7 @@
 					regulator-always-on;
 				};
 
-				pci_clk_reg: ldo0 {
+				ldo0 {
 					regulator-name = "vdd_ldo0,vddio_pex_clk";
 					regulator-min-microvolt = <3300000>;
 					regulator-max-microvolt = <3300000>;
@@ -435,126 +414,9 @@
 		};
 	};
 
-	kbc@7000e200 {
-		status = "okay";
-		nvidia,debounce-delay-ms = <2>;
-		nvidia,repeat-delay-ms = <160>;
-		nvidia,kbc-row-pins = <0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15>;
-		nvidia,kbc-col-pins = <16 17 18 19 20 21 22 23>;
-		linux,keymap = <MATRIX_KEY(0x00, 0x02, KEY_W)
-				MATRIX_KEY(0x00, 0x03, KEY_S)
-				MATRIX_KEY(0x00, 0x04, KEY_A)
-				MATRIX_KEY(0x00, 0x05, KEY_Z)
-				MATRIX_KEY(0x00, 0x07, KEY_FN)
-				MATRIX_KEY(0x01, 0x07, KEY_MENU)
-				MATRIX_KEY(0x02, 0x06, KEY_LEFTALT)
-				MATRIX_KEY(0x02, 0x07, KEY_RIGHTALT)
-				MATRIX_KEY(0x03, 0x00, KEY_5)
-				MATRIX_KEY(0x03, 0x01, KEY_4)
-				MATRIX_KEY(0x03, 0x02, KEY_R)
-				MATRIX_KEY(0x03, 0x03, KEY_E)
-				MATRIX_KEY(0x03, 0x04, KEY_F)
-				MATRIX_KEY(0x03, 0x05, KEY_D)
-				MATRIX_KEY(0x03, 0x06, KEY_X)
-				MATRIX_KEY(0x04, 0x00, KEY_7)
-				MATRIX_KEY(0x04, 0x01, KEY_6)
-				MATRIX_KEY(0x04, 0x02, KEY_T)
-				MATRIX_KEY(0x04, 0x03, KEY_H)
-				MATRIX_KEY(0x04, 0x04, KEY_G)
-				MATRIX_KEY(0x04, 0x05, KEY_V)
-				MATRIX_KEY(0x04, 0x06, KEY_C)
-				MATRIX_KEY(0x04, 0x07, KEY_SPACE)
-				MATRIX_KEY(0x05, 0x00, KEY_9)
-				MATRIX_KEY(0x05, 0x01, KEY_8)
-				MATRIX_KEY(0x05, 0x02, KEY_U)
-				MATRIX_KEY(0x05, 0x03, KEY_Y)
-				MATRIX_KEY(0x05, 0x04, KEY_J)
-				MATRIX_KEY(0x05, 0x05, KEY_N)
-				MATRIX_KEY(0x05, 0x06, KEY_B)
-				MATRIX_KEY(0x05, 0x07, KEY_BACKSLASH)
-				MATRIX_KEY(0x06, 0x00, KEY_MINUS)
-				MATRIX_KEY(0x06, 0x01, KEY_0)
-				MATRIX_KEY(0x06, 0x02, KEY_O)
-				MATRIX_KEY(0x06, 0x03, KEY_I)
-				MATRIX_KEY(0x06, 0x04, KEY_L)
-				MATRIX_KEY(0x06, 0x05, KEY_K)
-				MATRIX_KEY(0x06, 0x06, KEY_COMMA)
-				MATRIX_KEY(0x06, 0x07, KEY_M)
-				MATRIX_KEY(0x07, 0x01, KEY_EQUAL)
-				MATRIX_KEY(0x07, 0x02, KEY_RIGHTBRACE)
-				MATRIX_KEY(0x07, 0x03, KEY_ENTER)
-				MATRIX_KEY(0x07, 0x07, KEY_MENU)
-				MATRIX_KEY(0x08, 0x04, KEY_LEFTSHIFT)
-				MATRIX_KEY(0x08, 0x05, KEY_RIGHTSHIFT)
-				MATRIX_KEY(0x09, 0x05, KEY_LEFTCTRL)
-				MATRIX_KEY(0x09, 0x07, KEY_RIGHTCTRL)
-				MATRIX_KEY(0x0B, 0x00, KEY_LEFTBRACE)
-				MATRIX_KEY(0x0B, 0x01, KEY_P)
-				MATRIX_KEY(0x0B, 0x02, KEY_APOSTROPHE)
-				MATRIX_KEY(0x0B, 0x03, KEY_SEMICOLON)
-				MATRIX_KEY(0x0B, 0x04, KEY_SLASH)
-				MATRIX_KEY(0x0B, 0x05, KEY_DOT)
-				MATRIX_KEY(0x0C, 0x00, KEY_F10)
-				MATRIX_KEY(0x0C, 0x01, KEY_F9)
-				MATRIX_KEY(0x0C, 0x02, KEY_BACKSPACE)
-				MATRIX_KEY(0x0C, 0x03, KEY_3)
-				MATRIX_KEY(0x0C, 0x04, KEY_2)
-				MATRIX_KEY(0x0C, 0x05, KEY_UP)
-				MATRIX_KEY(0x0C, 0x06, KEY_PRINT)
-				MATRIX_KEY(0x0C, 0x07, KEY_PAUSE)
-				MATRIX_KEY(0x0D, 0x00, KEY_INSERT)
-				MATRIX_KEY(0x0D, 0x01, KEY_DELETE)
-				MATRIX_KEY(0x0D, 0x03, KEY_PAGEUP )
-				MATRIX_KEY(0x0D, 0x04, KEY_PAGEDOWN)
-				MATRIX_KEY(0x0D, 0x05, KEY_RIGHT)
-				MATRIX_KEY(0x0D, 0x06, KEY_DOWN)
-				MATRIX_KEY(0x0D, 0x07, KEY_LEFT)
-				MATRIX_KEY(0x0E, 0x00, KEY_F11)
-				MATRIX_KEY(0x0E, 0x01, KEY_F12)
-				MATRIX_KEY(0x0E, 0x02, KEY_F8)
-				MATRIX_KEY(0x0E, 0x03, KEY_Q)
-				MATRIX_KEY(0x0E, 0x04, KEY_F4)
-				MATRIX_KEY(0x0E, 0x05, KEY_F3)
-				MATRIX_KEY(0x0E, 0x06, KEY_1)
-				MATRIX_KEY(0x0E, 0x07, KEY_F7)
-				MATRIX_KEY(0x0F, 0x00, KEY_ESC)
-				MATRIX_KEY(0x0F, 0x01, KEY_GRAVE)
-				MATRIX_KEY(0x0F, 0x02, KEY_F5)
-				MATRIX_KEY(0x0F, 0x03, KEY_TAB)
-				MATRIX_KEY(0x0F, 0x04, KEY_F1)
-				MATRIX_KEY(0x0F, 0x05, KEY_F2)
-				MATRIX_KEY(0x0F, 0x06, KEY_CAPSLOCK)
-				MATRIX_KEY(0x0F, 0x07, KEY_F6)
-				MATRIX_KEY(0x14, 0x00, KEY_KP7)
-				MATRIX_KEY(0x15, 0x00, KEY_KP9)
-				MATRIX_KEY(0x15, 0x01, KEY_KP8)
-				MATRIX_KEY(0x15, 0x02, KEY_KP4)
-				MATRIX_KEY(0x15, 0x04, KEY_KP1)
-				MATRIX_KEY(0x16, 0x01, KEY_KPSLASH)
-				MATRIX_KEY(0x16, 0x02, KEY_KP6)
-				MATRIX_KEY(0x16, 0x03, KEY_KP5)
-				MATRIX_KEY(0x16, 0x04, KEY_KP3)
-				MATRIX_KEY(0x16, 0x05, KEY_KP2)
-				MATRIX_KEY(0x16, 0x07, KEY_KP0)
-				MATRIX_KEY(0x1B, 0x01, KEY_KPASTERISK)
-				MATRIX_KEY(0x1B, 0x03, KEY_KPMINUS)
-				MATRIX_KEY(0x1B, 0x04, KEY_KPPLUS)
-				MATRIX_KEY(0x1B, 0x05, KEY_KPDOT)
-				MATRIX_KEY(0x1C, 0x05, KEY_VOLUMEUP)
-				MATRIX_KEY(0x1D, 0x03, KEY_HOME)
-				MATRIX_KEY(0x1D, 0x04, KEY_END)
-				MATRIX_KEY(0x1D, 0x05, KEY_BRIGHTNESSUP)
-				MATRIX_KEY(0x1D, 0x06, KEY_VOLUMEDOWN)
-				MATRIX_KEY(0x1D, 0x07, KEY_BRIGHTNESSDOWN)
-				MATRIX_KEY(0x1E, 0x00, KEY_NUMLOCK)
-				MATRIX_KEY(0x1E, 0x01, KEY_SCROLLLOCK)
-				MATRIX_KEY(0x1E, 0x02, KEY_MUTE)
-				MATRIX_KEY(0x1F, 0x04, KEY_QUESTION)>;
-	};
-
-	pmc@7000e400 {
+	pmc {
 		nvidia,invert-interrupt;
-		nvidia,suspend-mode = <1>;
+		nvidia,suspend-mode = <2>;
 		nvidia,cpu-pwr-good-time = <5000>;
 		nvidia,cpu-pwr-off-time = <5000>;
 		nvidia,core-pwr-good-time = <3845 3845>;
@@ -562,85 +424,45 @@
 		nvidia,sys-clock-req-active-high;
 	};
 
-	pcie-controller@80003000 {
-		status = "okay";
-
-		avdd-pex-supply = <&pci_vdd_reg>;
-		vdd-pex-supply = <&pci_vdd_reg>;
-		avdd-pex-pll-supply = <&pci_vdd_reg>;
-		avdd-plle-supply = <&pci_vdd_reg>;
-		vddio-pex-clk-supply = <&pci_clk_reg>;
-
-		pci@1,0 {
-			status = "okay";
-		};
-
-		pci@2,0 {
-			status = "okay";
-		};
-	};
-
 	usb@c5000000 {
 		status = "okay";
 	};
 
-	usb-phy@c5000000 {
-		status = "okay";
-	};
-
 	usb@c5004000 {
 		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 1)
-			GPIO_ACTIVE_LOW>;
-	};
-
-	usb-phy@c5004000 {
-		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 1)
-			GPIO_ACTIVE_LOW>;
+		nvidia,phy-reset-gpio = <&gpio 169 0>; /* gpio PV1 */
 	};
 
 	usb@c5008000 {
 		status = "okay";
 	};
 
-	usb-phy@c5008000 {
-		status = "okay";
+	usb-phy@c5004400 {
+		nvidia,phy-reset-gpio = <&gpio 169 0>; /* gpio PV1 */
 	};
 
 	sdhci@c8000200 {
 		status = "okay";
-		cd-gpios = <&gpio TEGRA_GPIO(I, 5) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(H, 1) GPIO_ACTIVE_HIGH>;
-		power-gpios = <&gpio TEGRA_GPIO(T, 3) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 69 1>; /* gpio PI5 */
+		wp-gpios = <&gpio 57 0>; /* gpio PH1 */
+		power-gpios = <&gpio 155 0>; /* gpio PT3 */
 		bus-width = <4>;
 	};
 
 	sdhci@c8000600 {
 		status = "okay";
-		cd-gpios = <&gpio TEGRA_GPIO(H, 2) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(H, 3) GPIO_ACTIVE_HIGH>;
-		power-gpios = <&gpio TEGRA_GPIO(I, 6) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 58 1>; /* gpio PH2 */
+		wp-gpios = <&gpio 59 0>; /* gpio PH3 */
+		power-gpios = <&gpio 70 0>; /* gpio PI6 */
 		bus-width = <8>;
 	};
 
-	backlight: backlight {
-		compatible = "pwm-backlight";
-
-		enable-gpios = <&gpio TEGRA_GPIO(B, 5) GPIO_ACTIVE_HIGH>;
-		power-supply = <&vdd_bl_reg>;
-		pwms = <&pwm 0 5000000>;
-
-		brightness-levels = <0 4 8 16 32 64 128 255>;
-		default-brightness-level = <6>;
-	};
-
 	clocks {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -653,19 +475,127 @@
 
 		power {
 			label = "Power";
-			gpios = <&gpio TEGRA_GPIO(V, 2) GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_POWER>;
+			gpios = <&gpio 170 1>; /* gpio PV2, active low */
+			linux,code = <116>; /* KEY_POWER */
 			gpio-key,wakeup;
 		};
 	};
 
-	panel: panel {
-		compatible = "auo,b101aw03", "simple-panel";
-
-		power-supply = <&vdd_pnl_reg>;
-		enable-gpios = <&gpio TEGRA_GPIO(B, 2) GPIO_ACTIVE_HIGH>;
-
-		backlight = <&backlight>;
+	kbc {
+		status = "okay";
+		nvidia,debounce-delay-ms = <2>;
+		nvidia,repeat-delay-ms = <160>;
+		nvidia,kbc-row-pins = <0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15>;
+		nvidia,kbc-col-pins = <16 17 18 19 20 21 22 23>;
+		linux,keymap = <0x00020011	/* KEY_W */
+				0x0003001F	/* KEY_S */
+				0x0004001E	/* KEY_A */
+				0x0005002C	/* KEY_Z */
+				0x000701D0	/* KEY_FN */
+				0x0107008B	/* KEY_MENU */
+				0x02060038	/* KEY_LEFTALT */
+				0x02070064	/* KEY_RIGHTALT */
+				0x03000006	/* KEY_5 */
+				0x03010005	/* KEY_4 */
+				0x03020013	/* KEY_R */
+				0x03030012	/* KEY_E */
+				0x03040021	/* KEY_F */
+				0x03050020	/* KEY_D */
+				0x0306002D	/* KEY_X */
+				0x04000008	/* KEY_7 */
+				0x04010007	/* KEY_6 */
+				0x04020014	/* KEY_T */
+				0x04030023	/* KEY_H */
+				0x04040022	/* KEY_G */
+				0x0405002F	/* KEY_V */
+				0x0406002E	/* KEY_C */
+				0x04070039	/* KEY_SPACE */
+				0x0500000A	/* KEY_9 */
+				0x05010009	/* KEY_8 */
+				0x05020016	/* KEY_U */
+				0x05030015	/* KEY_Y */
+				0x05040024	/* KEY_J */
+				0x05050031	/* KEY_N */
+				0x05060030	/* KEY_B */
+				0x0507002B	/* KEY_BACKSLASH */
+				0x0600000C	/* KEY_MINUS */
+				0x0601000B	/* KEY_0 */
+				0x06020018	/* KEY_O */
+				0x06030017	/* KEY_I */
+				0x06040026	/* KEY_L */
+				0x06050025	/* KEY_K */
+				0x06060033	/* KEY_COMMA */
+				0x06070032	/* KEY_M */
+				0x0701000D	/* KEY_EQUAL */
+				0x0702001B	/* KEY_RIGHTBRACE */
+				0x0703001C	/* KEY_ENTER */
+				0x0707008B	/* KEY_MENU */
+				0x0804002A	/* KEY_LEFTSHIFT */
+				0x08050036	/* KEY_RIGHTSHIFT */
+				0x0905001D	/* KEY_LEFTCTRL */
+				0x09070061	/* KEY_RIGHTCTRL */
+				0x0B00001A	/* KEY_LEFTBRACE */
+				0x0B010019	/* KEY_P */
+				0x0B020028	/* KEY_APOSTROPHE */
+				0x0B030027	/* KEY_SEMICOLON */
+				0x0B040035	/* KEY_SLASH */
+				0x0B050034	/* KEY_DOT */
+				0x0C000044	/* KEY_F10 */
+				0x0C010043	/* KEY_F9 */
+				0x0C02000E	/* KEY_BACKSPACE */
+				0x0C030004	/* KEY_3 */
+				0x0C040003	/* KEY_2 */
+				0x0C050067	/* KEY_UP */
+				0x0C0600D2	/* KEY_PRINT */
+				0x0C070077	/* KEY_PAUSE */
+				0x0D00006E	/* KEY_INSERT */
+				0x0D01006F	/* KEY_DELETE */
+				0x0D030068	/* KEY_PAGEUP */
+				0x0D04006D	/* KEY_PAGEDOWN */
+				0x0D05006A	/* KEY_RIGHT */
+				0x0D06006C	/* KEY_DOWN */
+				0x0D070069	/* KEY_LEFT */
+				0x0E000057	/* KEY_F11 */
+				0x0E010058	/* KEY_F12 */
+				0x0E020042	/* KEY_F8 */
+				0x0E030010	/* KEY_Q */
+				0x0E04003E	/* KEY_F4 */
+				0x0E05003D	/* KEY_F3 */
+				0x0E060002	/* KEY_1 */
+				0x0E070041	/* KEY_F7 */
+				0x0F000001	/* KEY_ESC */
+				0x0F010029	/* KEY_GRAVE */
+				0x0F02003F	/* KEY_F5 */
+				0x0F03000F	/* KEY_TAB */
+				0x0F04003B	/* KEY_F1 */
+				0x0F05003C	/* KEY_F2 */
+				0x0F06003A	/* KEY_CAPSLOCK */
+				0x0F070040	/* KEY_F6 */
+				0x14000047	/* KEY_KP7 */
+				0x15000049	/* KEY_KP9 */
+				0x15010048	/* KEY_KP8 */
+				0x1502004B	/* KEY_KP4 */
+				0x1504004F	/* KEY_KP1 */
+				0x1601004E	/* KEY_KPSLASH */
+				0x1602004D	/* KEY_KP6 */
+				0x1603004C	/* KEY_KP5 */
+				0x16040051	/* KEY_KP3 */
+				0x16050050	/* KEY_KP2 */
+				0x16070052	/* KEY_KP0 */
+				0x1B010037	/* KEY_KPASTERISK */
+				0x1B03004A	/* KEY_KPMINUS */
+				0x1B04004E	/* KEY_KPPLUS */
+				0x1B050053	/* KEY_KPDOT */
+				0x1C050073	/* KEY_VOLUMEUP */
+				0x1D030066	/* KEY_HOME */
+				0x1D04006B	/* KEY_END */
+				0x1D0500E1	/* KEY_BRIGHTNESSUP */
+				0x1D060072	/* KEY_VOLUMEDOWN */
+				0x1D0700E0	/* KEY_BRIGHTNESSDOWN */
+				0x1E000045	/* KEY_NUMLOCK */
+				0x1E010046	/* KEY_SCROLLLOCK */
+				0x1E020071	/* KEY_MUTE */
+				0x1F0400D6>;	/* KEY_QUESTION */
 	};
 
 	regulators {
@@ -688,7 +618,7 @@
 			regulator-name = "vdd_1v5";
 			regulator-min-microvolt = <1500000>;
 			regulator-max-microvolt = <1500000>;
-			gpio = <&pmic 0 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 0 0>;
 		};
 
 		regulator@2 {
@@ -697,49 +627,40 @@
 			regulator-name = "vdd_1v2";
 			regulator-min-microvolt = <1200000>;
 			regulator-max-microvolt = <1200000>;
-			gpio = <&pmic 1 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 1 0>;
 			enable-active-high;
 		};
 
-		pci_vdd_reg: regulator@3 {
+		regulator@3 {
 			compatible = "regulator-fixed";
 			reg = <3>;
 			regulator-name = "vdd_1v05";
 			regulator-min-microvolt = <1050000>;
 			regulator-max-microvolt = <1050000>;
-			gpio = <&pmic 2 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 2 0>;
 			enable-active-high;
+			/* Hack until board-harmony-pcie.c is removed */
+			status = "disabled";
 		};
 
-		vdd_pnl_reg: regulator@4 {
+		regulator@4 {
 			compatible = "regulator-fixed";
 			reg = <4>;
 			regulator-name = "vdd_pnl";
 			regulator-min-microvolt = <2800000>;
 			regulator-max-microvolt = <2800000>;
-			gpio = <&gpio TEGRA_GPIO(C, 6) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 22 0>; /* gpio PC6 */
 			enable-active-high;
 		};
 
-		vdd_bl_reg: regulator@5 {
+		regulator@5 {
 			compatible = "regulator-fixed";
 			reg = <5>;
 			regulator-name = "vdd_bl";
 			regulator-min-microvolt = <2800000>;
 			regulator-max-microvolt = <2800000>;
-			gpio = <&gpio TEGRA_GPIO(W, 0) GPIO_ACTIVE_HIGH>;
-			enable-active-high;
-		};
-
-		vdd_5v0_hdmi: regulator@6 {
-			compatible = "regulator-fixed";
-			reg = <6>;
-			regulator-name = "VDDIO_HDMI";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			gpio = <&gpio TEGRA_GPIO(T, 2) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 176 0>; /* gpio PW0 */
 			enable-active-high;
-			vin-supply = <&vdd_5v0_reg>;
 		};
 	};
 
@@ -761,17 +682,12 @@
 		nvidia,i2s-controller = <&tegra_i2s1>;
 		nvidia,audio-codec = <&wm8903>;
 
-		nvidia,spkr-en-gpios = <&wm8903 2 GPIO_ACTIVE_HIGH>;
-		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(W, 2)
-			GPIO_ACTIVE_HIGH>;
-		nvidia,int-mic-en-gpios = <&gpio TEGRA_GPIO(X, 0)
-			GPIO_ACTIVE_HIGH>;
-		nvidia,ext-mic-en-gpios = <&gpio TEGRA_GPIO(X, 1)
-			GPIO_ACTIVE_HIGH>;
-
-		clocks = <&tegra_car TEGRA20_CLK_PLL_A>,
-			 <&tegra_car TEGRA20_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA20_CLK_CDEV1>;
+		nvidia,spkr-en-gpios = <&wm8903 2 0>;
+		nvidia,hp-det-gpios = <&gpio 178 0>; /* gpio PW2 */
+		nvidia,int-mic-en-gpios = <&gpio 184 0>; /*gpio PX0 */
+		nvidia,ext-mic-en-gpios = <&gpio 185 0>; /* gpio PX1 */
+
+		clocks = <&tegra_car 112>, <&tegra_car 113>, <&tegra_car 94>;
 		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-iris-512.dts b/arch/arm/boot/dts/tegra20-iris-512.dts
--- a/arch/arm/boot/dts/tegra20-iris-512.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-iris-512.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,71 +1,59 @@
 /dts-v1/;
 
-#include "tegra20-colibri-512.dtsi"
+/include/ "tegra20-colibri-512.dtsi"
 
 / {
 	model = "Toradex Colibri T20 512MB on Iris";
 	compatible = "toradex,iris", "toradex,colibri_t20-512", "nvidia,tegra20";
 
-	aliases {
-		serial0 = &uarta;
-		serial1 = &uartd;
-	};
-
-	host1x@50000000 {
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			status = "okay";
 		};
 	};
 
-	pinmux@70000014 {
+	pinmux {
 		state_default: pinmux {
 			hdint {
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 
 			i2cddc {
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 
 			sdio4 {
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 
 			uarta {
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 
 			uartd {
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 		};
 	};
 
-	serial@70006000 {
-		status = "okay";
-	};
-
-	serial@70006300 {
-		status = "okay";
-	};
-
-	i2c_ddc: i2c@7000c400 {
+	usb@c5000000 {
 		status = "okay";
+		dr_mode = "otg";
 	};
 
-	usb@c5000000 {
+	usb@c5008000 {
 		status = "okay";
 	};
 
-	usb-phy@c5000000 {
+	serial@70006000 {
 		status = "okay";
 	};
 
-	usb@c5008000 {
+	serial@70006300 {
 		status = "okay";
 	};
 
-	usb-phy@c5008000 {
+	i2c_ddc: i2c@7000c400 {
 		status = "okay";
 	};
 
@@ -85,7 +73,7 @@
 			regulator-max-microvolt = <5000000>;
 			regulator-boot-on;
 			regulator-always-on;
-			gpio = <&gpio TEGRA_GPIO(W, 2) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 178 0>;
 		};
 
 		vcc_sd_reg: regulator@1 {
diff -urNp a/arch/arm/boot/dts/tegra20-medcom-wide.dts b/arch/arm/boot/dts/tegra20-medcom-wide.dts
--- a/arch/arm/boot/dts/tegra20-medcom-wide.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-medcom-wide.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,34 +1,21 @@
 /dts-v1/;
 
-#include "tegra20-tamonten.dtsi"
+/include/ "tegra20-tamonten.dtsi"
 
 / {
 	model = "Avionic Design Medcom-Wide board";
 	compatible = "ad,medcom-wide", "ad,tamonten", "nvidia,tegra20";
 
-	aliases {
-		serial0 = &uartd;
-	};
-
-	pwm@7000a000 {
+	pwm {
 		status = "okay";
 	};
 
-	host1x@50000000 {
-		dc@54200000 {
-			rgb {
-				status = "okay";
-				nvidia,panel = <&panel>;
-			};
-		};
-	};
-
 	i2c@7000c000 {
 		wm8903: wm8903@1a {
 			compatible = "wlf,wm8903";
 			reg = <0x1a>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(X, 3) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <187 0x04>;
 
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -43,7 +30,7 @@
 		};
 	};
 
-	backlight: backlight {
+	backlight {
 		compatible = "pwm-backlight";
 		pwms = <&pwm 0 5000000>;
 
@@ -51,15 +38,6 @@
 		default-brightness-level = <6>;
 	};
 
-	panel: panel {
-		compatible = "innolux,n156bge-l21", "simple-panel";
-
-		power-supply =  <&vdd_1v8_reg>, <&vdd_3v3_reg>;
-		enable-gpios = <&gpio TEGRA_GPIO(B, 2) GPIO_ACTIVE_HIGH>;
-
-		backlight = <&backlight>;
-	};
-
 	sound {
 		compatible = "ad,tegra-audio-wm8903-medcom-wide",
 			     "nvidia,tegra-audio-wm8903";
@@ -78,53 +56,10 @@
 		nvidia,i2s-controller = <&tegra_i2s1>;
 		nvidia,audio-codec = <&wm8903>;
 
-		nvidia,spkr-en-gpios = <&wm8903 2 GPIO_ACTIVE_HIGH>;
-		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(W, 2) GPIO_ACTIVE_HIGH>;
+		nvidia,spkr-en-gpios = <&wm8903 2 0>;
+		nvidia,hp-det-gpios = <&gpio 178 0>; /* gpio PW2 */
 
-		clocks = <&tegra_car TEGRA20_CLK_PLL_A>,
-			 <&tegra_car TEGRA20_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA20_CLK_CDEV1>;
+		clocks = <&tegra_car 112>, <&tegra_car 113>, <&tegra_car 94>;
 		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
-
-	regulators {
-		vcc_24v_reg: regulator@100 {
-			compatible = "regulator-fixed";
-			reg = <100>;
-			regulator-name = "vcc_24v";
-			regulator-min-microvolt = <24000000>;
-			regulator-max-microvolt = <24000000>;
-			regulator-always-on;
-		};
-
-		vdd_5v0_reg: regulator@101 {
-			compatible = "regulator-fixed";
-			reg = <101>;
-			regulator-name = "vdd_5v0";
-			vin-supply = <&vcc_24v_reg>;
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			regulator-always-on;
-		};
-
-		vdd_3v3_reg: regulator@102 {
-			compatible = "regulator-fixed";
-			reg = <102>;
-			regulator-name = "vdd_3v3";
-			vin-supply = <&vcc_24v_reg>;
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			regulator-always-on;
-		};
-
-		vdd_1v8_reg: regulator@103 {
-			compatible = "regulator-fixed";
-			reg = <103>;
-			regulator-name = "vdd_1v8";
-			vin-supply = <&vdd_3v3_reg>;
-			regulator-min-microvolt = <1800000>;
-			regulator-max-microvolt = <1800000>;
-			regulator-always-on;
-		};
-	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-paz00.dts b/arch/arm/boot/dts/tegra20-paz00.dts
--- a/arch/arm/boot/dts/tegra20-paz00.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-paz00.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,45 +1,28 @@
 /dts-v1/;
 
-#include <dt-bindings/input/input.h>
-#include "tegra20.dtsi"
+/include/ "tegra20.dtsi"
 
 / {
 	model = "Toshiba AC100 / Dynabook AZ";
 	compatible = "compal,paz00", "nvidia,tegra20";
 
-	aliases {
-		rtc0 = "/i2c@7000d000/tps6586x@34";
-		rtc1 = "/rtc@7000e000";
-		serial0 = &uarta;
-		serial1 = &uartc;
-	};
-
 	memory {
 		reg = <0x00000000 0x20000000>;
 	};
 
-	host1x@50000000 {
-		dc@54200000 {
-			rgb {
-				status = "okay";
-
-				nvidia,panel = <&panel>;
-			};
-		};
-
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			status = "okay";
 
 			vdd-supply = <&hdmi_vdd_reg>;
 			pll-supply = <&hdmi_pll_reg>;
 
 			nvidia,ddc-i2c-bus = <&hdmi_ddc>;
-			nvidia,hpd-gpio = <&gpio TEGRA_GPIO(N, 7)
-				GPIO_ACTIVE_HIGH>;
+			nvidia,hpd-gpio = <&gpio 111 0>; /* PN7 */
 		};
 	};
 
-	pinmux@70000014 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -193,39 +176,39 @@
 					"gpu", "gpu7", "gpv", "i2cp", "pta",
 					"rm", "sdio1", "slxk", "spdo", "uac",
 					"uda";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			conf_ck32 {
 				nvidia,pins = "ck32", "ddrc", "pmca", "pmcb",
 					"pmcc", "pmcd", "pmce", "xm2c", "xm2d";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
+				nvidia,pull = <0>;
 			};
 			conf_crtp {
 				nvidia,pins = "crtp", "dap3", "dap4", "dtb",
 					"dtc", "dte", "slxa", "slxc", "slxd",
 					"spdi";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			conf_csus {
 				nvidia,pins = "csus", "spia", "spib", "spid",
 					"spif";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <1>;
 			};
 			conf_ddc {
 				nvidia,pins = "ddc", "irrx", "irtx", "kbca",
 					"kbcb", "kbcc", "kbcd", "kbce", "kbcf",
 					"spic", "spig", "uaa", "uab";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			conf_dta {
 				nvidia,pins = "dta", "dtd", "owc", "sdc", "sdd",
 					"spie", "spih", "uad", "uca", "ucb";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <1>;
 			};
 			conf_hdint {
 				nvidia,pins = "hdint", "ld0", "ld1", "ld2",
@@ -234,23 +217,23 @@
 					"ld13", "ld14", "ld15", "ld16", "ld17",
 					"ldc", "ldi", "lhs", "lsc0", "lspi",
 					"lvs", "pmc";
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 			conf_lc {
 				nvidia,pins = "lc", "ls";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
+				nvidia,pull = <2>;
 			};
 			conf_lcsn {
 				nvidia,pins = "lcsn", "lhp0", "lhp1", "lhp2",
 					"lm0", "lm1", "lpp", "lpw0", "lpw1",
 					"lpw2", "lsc1", "lsck", "lsda", "lsdi",
 					"lvp0", "lvp1", "sdb";
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,tristate = <1>;
 			};
 			conf_ld17_0 {
 				nvidia,pins = "ld17_0", "ld19_18", "ld21_20",
 					"ld23_22";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
+				nvidia,pull = <1>;
 			};
 		};
 	};
@@ -267,11 +250,7 @@
 		status = "okay";
 	};
 
-	pwm: pwm@7000a000 {
-		status = "okay";
-	};
-
-	lvds_ddc: i2c@7000c000 {
+	i2c@7000c000 {
 		status = "okay";
 		clock-frequency = <400000>;
 
@@ -288,20 +267,17 @@
 		clock-frequency = <100000>;
 	};
 
-	nvec@7000c500 {
+	nvec {
 		compatible = "nvidia,nvec";
 		reg = <0x7000c500 0x100>;
-		interrupts = <GIC_SPI 92 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 92 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
 		clock-frequency = <80000>;
-		request-gpios = <&gpio TEGRA_GPIO(V, 2) GPIO_ACTIVE_HIGH>;
+		request-gpios = <&gpio 170 0>; /* gpio PV2 */
 		slave-addr = <138>;
-		clocks = <&tegra_car TEGRA20_CLK_I2C3>,
-		         <&tegra_car TEGRA20_CLK_PLL_P_OUT3>;
+		clocks = <&tegra_car 67>, <&tegra_car 124>;
 		clock-names = "div-clk", "fast-clk";
-		resets = <&tegra_car 67>;
-		reset-names = "i2c";
 	};
 
 	i2c@7000d000 {
@@ -311,7 +287,7 @@
 		pmic: tps6586x@34 {
 			compatible = "ti,tps6586x";
 			reg = <0x34>;
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 
 			#gpio-cells = <2>;
 			gpio-controller;
@@ -437,9 +413,9 @@
 		};
 	};
 
-	pmc@7000e400 {
+	pmc {
 		nvidia,invert-interrupt;
-		nvidia,suspend-mode = <1>;
+		nvidia,suspend-mode = <2>;
 		nvidia,cpu-pwr-good-time = <2000>;
 		nvidia,cpu-pwr-off-time = <0>;
 		nvidia,core-pwr-good-time = <3845 3845>;
@@ -451,35 +427,24 @@
 		status = "okay";
 	};
 
-	usb-phy@c5000000 {
-		status = "okay";
-	};
-
 	usb@c5004000 {
 		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 0)
-			GPIO_ACTIVE_LOW>;
-	};
-
-	usb-phy@c5004000 {
-		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 0)
-			GPIO_ACTIVE_LOW>;
+		nvidia,phy-reset-gpio = <&gpio 168 0>; /* gpio PV0 */
 	};
 
 	usb@c5008000 {
 		status = "okay";
 	};
 
-	usb-phy@c5008000 {
-		status = "okay";
+	usb-phy@c5004400 {
+		nvidia,phy-reset-gpio = <&gpio 168 0>; /* gpio PV0 */
 	};
 
 	sdhci@c8000000 {
 		status = "okay";
-		cd-gpios = <&gpio TEGRA_GPIO(V, 5) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(H, 1) GPIO_ACTIVE_HIGH>;
-		power-gpios = <&gpio TEGRA_GPIO(V, 1) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 173 1>; /* gpio PV5 */
+		wp-gpios = <&gpio 57 0>;  /* gpio PH1 */
+		power-gpios = <&gpio 169 0>; /* gpio PV1 */
 		bus-width = <4>;
 	};
 
@@ -489,24 +454,12 @@
 		non-removable;
 	};
 
-	backlight: backlight {
-		compatible = "pwm-backlight";
-
-		enable-gpios = <&gpio TEGRA_GPIO(U, 4) GPIO_ACTIVE_HIGH>;
-		pwms = <&pwm 0 5000000>;
-
-		brightness-levels = <0 16 32 48 64 80 96 112 128 144 160 176 192 208 224 240 255>;
-		default-brightness-level = <10>;
-
-		backlight-boot-off;
-	};
-
 	clocks {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -519,8 +472,8 @@
 
 		power {
 			label = "Power";
-			gpios = <&gpio TEGRA_GPIO(J, 7) GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_POWER>;
+			gpios = <&gpio 79 1>; /* gpio PJ7, active low */
+			linux,code = <116>; /* KEY_POWER */
 			gpio-key,wakeup;
 		};
 	};
@@ -530,21 +483,11 @@
 
 		wifi {
 			label = "wifi-led";
-			gpios = <&gpio TEGRA_GPIO(D, 0) GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio 24 0>; /* gpio PD0 */
 			linux,default-trigger = "rfkill0";
 		};
 	};
 
-	panel: panel {
-		compatible = "samsung,ltn101nt05", "simple-panel";
-
-		ddc-i2c-bus = <&lvds_ddc>;
-		power-supply = <&vdd_pnl_reg>;
-		enable-gpios = <&gpio TEGRA_GPIO(M, 6) GPIO_ACTIVE_HIGH>;
-
-		backlight = <&backlight>;
-	};
-
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -558,16 +501,6 @@
 			regulator-max-microvolt = <5000000>;
 			regulator-always-on;
 		};
-
-		vdd_pnl_reg: regulator@1 {
-			compatible = "regulator-fixed";
-			reg = <1>;
-			regulator-name = "+3VS,vdd_pnl";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			gpio = <&gpio TEGRA_GPIO(A, 4) GPIO_ACTIVE_HIGH>;
-			enable-active-high;
-		};
 	};
 
 	sound {
@@ -587,12 +520,9 @@
 
 		nvidia,audio-codec = <&alc5632>;
 		nvidia,i2s-controller = <&tegra_i2s1>;
-		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(W, 2)
-			GPIO_ACTIVE_HIGH>;
+		nvidia,hp-det-gpios = <&gpio 178 0>; /* gpio PW2 */
 
-		clocks = <&tegra_car TEGRA20_CLK_PLL_A>,
-		         <&tegra_car TEGRA20_CLK_PLL_A_OUT0>,
-		         <&tegra_car TEGRA20_CLK_CDEV1>;
+		clocks = <&tegra_car 112>, <&tegra_car 113>, <&tegra_car 94>;
 		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-plutux.dts b/arch/arm/boot/dts/tegra20-plutux.dts
--- a/arch/arm/boot/dts/tegra20-plutux.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-plutux.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,13 +1,13 @@
 /dts-v1/;
 
-#include "tegra20-tamonten.dtsi"
+/include/ "tegra20-tamonten.dtsi"
 
 / {
 	model = "Avionic Design Plutux board";
 	compatible = "ad,plutux", "ad,tamonten", "nvidia,tegra20";
 
-	host1x@50000000 {
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			status = "okay";
 		};
 	};
@@ -17,7 +17,7 @@
 			compatible = "wlf,wm8903";
 			reg = <0x1a>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(X, 3) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <187 0x04>;
 
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -50,53 +50,10 @@
 		nvidia,i2s-controller = <&tegra_i2s1>;
 		nvidia,audio-codec = <&wm8903>;
 
-		nvidia,spkr-en-gpios = <&wm8903 2 GPIO_ACTIVE_HIGH>;
-		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(W, 2) GPIO_ACTIVE_HIGH>;
+		nvidia,spkr-en-gpios = <&wm8903 2 0>;
+		nvidia,hp-det-gpios = <&gpio 178 0>; /* gpio PW2 */
 
-		clocks = <&tegra_car TEGRA20_CLK_PLL_A>,
-			 <&tegra_car TEGRA20_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA20_CLK_CDEV1>;
+		clocks = <&tegra_car 112>, <&tegra_car 113>, <&tegra_car 94>;
 		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
-
-	regulators {
-		vcc_24v_reg: regulator@100 {
-			compatible = "regulator-fixed";
-			reg = <100>;
-			regulator-name = "vcc_24v";
-			regulator-min-microvolt = <24000000>;
-			regulator-max-microvolt = <24000000>;
-			regulator-always-on;
-		};
-
-		vdd_5v0_reg: regulator@101 {
-			compatible = "regulator-fixed";
-			reg = <101>;
-			regulator-name = "vdd_5v0";
-			vin-supply = <&vcc_24v_reg>;
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			regulator-always-on;
-		};
-
-		vdd_3v3_reg: regulator@102 {
-			compatible = "regulator-fixed";
-			reg = <102>;
-			regulator-name = "vdd_3v3";
-			vin-supply = <&vcc_24v_reg>;
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			regulator-always-on;
-		};
-
-		vdd_1v8_reg: regulator@103 {
-			compatible = "regulator-fixed";
-			reg = <103>;
-			regulator-name = "vdd_1v8";
-			vin-supply = <&vdd_3v3_reg>;
-			regulator-min-microvolt = <1800000>;
-			regulator-max-microvolt = <1800000>;
-			regulator-always-on;
-		};
-	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-seaboard.dts b/arch/arm/boot/dts/tegra20-seaboard.dts
--- a/arch/arm/boot/dts/tegra20-seaboard.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-seaboard.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,44 +1,28 @@
 /dts-v1/;
 
-#include <dt-bindings/input/input.h>
-#include "tegra20.dtsi"
+/include/ "tegra20.dtsi"
 
 / {
 	model = "NVIDIA Seaboard";
 	compatible = "nvidia,seaboard", "nvidia,tegra20";
 
-	aliases {
-		rtc0 = "/i2c@7000d000/tps6586x@34";
-		rtc1 = "/rtc@7000e000";
-		serial0 = &uartd;
-	};
-
 	memory {
 		reg = <0x00000000 0x40000000>;
 	};
 
-	host1x@50000000 {
-		dc@54200000 {
-			rgb {
-				status = "okay";
-
-				nvidia,panel = <&panel>;
-			};
-		};
-
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			status = "okay";
 
 			vdd-supply = <&hdmi_vdd_reg>;
 			pll-supply = <&hdmi_pll_reg>;
 
 			nvidia,ddc-i2c-bus = <&hdmi_ddc>;
-			nvidia,hpd-gpio = <&gpio TEGRA_GPIO(N, 7)
-				GPIO_ACTIVE_HIGH>;
+			nvidia,hpd-gpio = <&gpio 111 0>; /* PN7 */
 		};
 	};
 
-	pinmux@70000014 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -204,53 +188,53 @@
 					"irtx", "pta", "rm", "sdc", "sdd",
 					"slxd", "slxk", "spdi", "spdo", "uac",
 					"uad", "uca", "ucb", "uda";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			conf_ate {
 				nvidia,pins = "ate", "csus", "dap3",
 					"gpv", "owc", "slxc", "spib", "spid",
 					"spie";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			conf_ck32 {
 				nvidia,pins = "ck32", "ddrc", "pmca", "pmcb",
 					"pmcc", "pmcd", "pmce", "xm2c", "xm2d";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
+				nvidia,pull = <0>;
 			};
 			conf_crtp {
 				nvidia,pins = "crtp", "gmb", "slxa", "spia",
 					"spig", "spih";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <1>;
 			};
 			conf_dta {
 				nvidia,pins = "dta", "dtb", "dtc", "dtd";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
 			};
 			conf_dte {
 				nvidia,pins = "dte", "spif";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <1>;
 			};
 			conf_hdint {
 				nvidia,pins = "hdint", "lcsn", "ldc", "lm1",
 					"lpw1", "lsc1", "lsck", "lsda", "lsdi",
 					"lvp0";
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,tristate = <1>;
 			};
 			conf_kbca {
 				nvidia,pins = "kbca", "kbcb", "kbcc", "kbcd",
 					"kbce", "kbcf", "sdio1", "spic", "uaa",
 					"uab";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			conf_lc {
 				nvidia,pins = "lc", "ls";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
+				nvidia,pull = <2>;
 			};
 			conf_ld0 {
 				nvidia,pins = "ld0", "ld1", "ld2", "ld3", "ld4",
@@ -260,22 +244,22 @@
 					"lhp1", "lhp2", "lhs", "lm0", "lpp",
 					"lpw0", "lpw2", "lsc0", "lspi", "lvp1",
 					"lvs", "pmc", "sdb";
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 			conf_ld17_0 {
 				nvidia,pins = "ld17_0", "ld19_18", "ld21_20",
 					"ld23_22";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
+				nvidia,pull = <1>;
 			};
 			drive_sdio1 {
 				nvidia,pins = "drive_sdio1";
-				nvidia,high-speed-mode = <TEGRA_PIN_DISABLE>;
-				nvidia,schmitt = <TEGRA_PIN_DISABLE>;
-				nvidia,low-power-mode = <TEGRA_PIN_LP_DRIVE_DIV_1>;
+				nvidia,high-speed-mode = <0>;
+				nvidia,schmitt = <0>;
+				nvidia,low-power-mode = <3>;
 				nvidia,pull-down-strength = <31>;
 				nvidia,pull-up-strength = <31>;
-				nvidia,slew-rate-rising = <TEGRA_PIN_SLEW_RATE_SLOWEST>;
-				nvidia,slew-rate-falling = <TEGRA_PIN_SLEW_RATE_SLOWEST>;
+				nvidia,slew-rate-rising = <3>;
+				nvidia,slew-rate-falling = <3>;
 			};
 		};
 
@@ -321,10 +305,6 @@
 		status = "okay";
 	};
 
-	pwm: pwm@7000a000 {
-		status = "okay";
-	};
-
 	i2c@7000c000 {
 		status = "okay";
 		clock-frequency = <400000>;
@@ -333,7 +313,7 @@
 			compatible = "wlf,wm8903";
 			reg = <0x1a>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(X, 3) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <187 0x04>;
 
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -348,14 +328,14 @@
 			compatible = "isil,isl29018";
 			reg = <0x44>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(Z, 2) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <202 0x04>; /* GPIO PZ2 */
 		};
 
 		gyrometer@68 {
 			compatible = "invn,mpu3050";
 			reg = <0x68>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(Z, 4) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <204 0x04>; /* gpio PZ4 */
 		};
 	};
 
@@ -382,7 +362,7 @@
 			#size-cells = <0>;
 		};
 
-		lvds_ddc: i2c@1 {
+		i2c@1 {
 			reg = <1>;
 			#address-cells = <1>;
 			#size-cells = <0>;
@@ -405,17 +385,10 @@
 		status = "okay";
 		clock-frequency = <400000>;
 
-		magnetometer@c {
-			compatible = "asahi-kasei,ak8975";
-			reg = <0xc>;
-			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(N, 5) IRQ_TYPE_LEVEL_HIGH>;
-		};
-
 		pmic: tps6586x@34 {
 			compatible = "ti,tps6586x";
 			reg = <0x34>;
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 
 			ti,system-power-controller;
 
@@ -533,151 +506,18 @@
 			compatible = "onnn,nct1008";
 			reg = <0x4c>;
 		};
-	};
 
-	kbc@7000e200 {
-		status = "okay";
-		nvidia,debounce-delay-ms = <32>;
-		nvidia,repeat-delay-ms = <160>;
-		nvidia,ghost-filter;
-		nvidia,kbc-row-pins = <0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15>;
-		nvidia,kbc-col-pins = <16 17 18 19 20 21 22 23>;
-		linux,keymap = <MATRIX_KEY(0x00, 0x02, KEY_W)
-				MATRIX_KEY(0x00, 0x03, KEY_S)
-				MATRIX_KEY(0x00, 0x04, KEY_A)
-				MATRIX_KEY(0x00, 0x05, KEY_Z)
-				MATRIX_KEY(0x00, 0x07, KEY_FN)
-
-				MATRIX_KEY(0x01, 0x07, KEY_LEFTMETA)
-				MATRIX_KEY(0x02, 0x06, KEY_RIGHTALT)
-				MATRIX_KEY(0x02, 0x07, KEY_LEFTALT)
-
-				MATRIX_KEY(0x03, 0x00, KEY_5)
-				MATRIX_KEY(0x03, 0x01, KEY_4)
-				MATRIX_KEY(0x03, 0x02, KEY_R)
-				MATRIX_KEY(0x03, 0x03, KEY_E)
-				MATRIX_KEY(0x03, 0x04, KEY_F)
-				MATRIX_KEY(0x03, 0x05, KEY_D)
-				MATRIX_KEY(0x03, 0x06, KEY_X)
-
-				MATRIX_KEY(0x04, 0x00, KEY_7)
-				MATRIX_KEY(0x04, 0x01, KEY_6)
-				MATRIX_KEY(0x04, 0x02, KEY_T)
-				MATRIX_KEY(0x04, 0x03, KEY_H)
-				MATRIX_KEY(0x04, 0x04, KEY_G)
-				MATRIX_KEY(0x04, 0x05, KEY_V)
-				MATRIX_KEY(0x04, 0x06, KEY_C)
-				MATRIX_KEY(0x04, 0x07, KEY_SPACE)
-
-				MATRIX_KEY(0x05, 0x00, KEY_9)
-				MATRIX_KEY(0x05, 0x01, KEY_8)
-				MATRIX_KEY(0x05, 0x02, KEY_U)
-				MATRIX_KEY(0x05, 0x03, KEY_Y)
-				MATRIX_KEY(0x05, 0x04, KEY_J)
-				MATRIX_KEY(0x05, 0x05, KEY_N)
-				MATRIX_KEY(0x05, 0x06, KEY_B)
-				MATRIX_KEY(0x05, 0x07, KEY_BACKSLASH)
-
-				MATRIX_KEY(0x06, 0x00, KEY_MINUS)
-				MATRIX_KEY(0x06, 0x01, KEY_0)
-				MATRIX_KEY(0x06, 0x02, KEY_O)
-				MATRIX_KEY(0x06, 0x03, KEY_I)
-				MATRIX_KEY(0x06, 0x04, KEY_L)
-				MATRIX_KEY(0x06, 0x05, KEY_K)
-				MATRIX_KEY(0x06, 0x06, KEY_COMMA)
-				MATRIX_KEY(0x06, 0x07, KEY_M)
-
-				MATRIX_KEY(0x07, 0x01, KEY_EQUAL)
-				MATRIX_KEY(0x07, 0x02, KEY_RIGHTBRACE)
-				MATRIX_KEY(0x07, 0x03, KEY_ENTER)
-				MATRIX_KEY(0x07, 0x07, KEY_MENU)
-
-				MATRIX_KEY(0x08, 0x04, KEY_RIGHTSHIFT)
-				MATRIX_KEY(0x08, 0x05, KEY_LEFTSHIFT)
-
-				MATRIX_KEY(0x09, 0x05, KEY_RIGHTCTRL)
-				MATRIX_KEY(0x09, 0x07, KEY_LEFTCTRL)
-
-				MATRIX_KEY(0x0B, 0x00, KEY_LEFTBRACE)
-				MATRIX_KEY(0x0B, 0x01, KEY_P)
-				MATRIX_KEY(0x0B, 0x02, KEY_APOSTROPHE)
-				MATRIX_KEY(0x0B, 0x03, KEY_SEMICOLON)
-				MATRIX_KEY(0x0B, 0x04, KEY_SLASH)
-				MATRIX_KEY(0x0B, 0x05, KEY_DOT)
-
-				MATRIX_KEY(0x0C, 0x00, KEY_F10)
-				MATRIX_KEY(0x0C, 0x01, KEY_F9)
-				MATRIX_KEY(0x0C, 0x02, KEY_BACKSPACE)
-				MATRIX_KEY(0x0C, 0x03, KEY_3)
-				MATRIX_KEY(0x0C, 0x04, KEY_2)
-				MATRIX_KEY(0x0C, 0x05, KEY_UP)
-				MATRIX_KEY(0x0C, 0x06, KEY_PRINT)
-				MATRIX_KEY(0x0C, 0x07, KEY_PAUSE)
-
-				MATRIX_KEY(0x0D, 0x00, KEY_INSERT)
-				MATRIX_KEY(0x0D, 0x01, KEY_DELETE)
-				MATRIX_KEY(0x0D, 0x03, KEY_PAGEUP )
-				MATRIX_KEY(0x0D, 0x04, KEY_PAGEDOWN)
-				MATRIX_KEY(0x0D, 0x05, KEY_RIGHT)
-				MATRIX_KEY(0x0D, 0x06, KEY_DOWN)
-				MATRIX_KEY(0x0D, 0x07, KEY_LEFT)
-
-				MATRIX_KEY(0x0E, 0x00, KEY_F11)
-				MATRIX_KEY(0x0E, 0x01, KEY_F12)
-				MATRIX_KEY(0x0E, 0x02, KEY_F8)
-				MATRIX_KEY(0x0E, 0x03, KEY_Q)
-				MATRIX_KEY(0x0E, 0x04, KEY_F4)
-				MATRIX_KEY(0x0E, 0x05, KEY_F3)
-				MATRIX_KEY(0x0E, 0x06, KEY_1)
-				MATRIX_KEY(0x0E, 0x07, KEY_F7)
-
-				MATRIX_KEY(0x0F, 0x00, KEY_ESC)
-				MATRIX_KEY(0x0F, 0x01, KEY_GRAVE)
-				MATRIX_KEY(0x0F, 0x02, KEY_F5)
-				MATRIX_KEY(0x0F, 0x03, KEY_TAB)
-				MATRIX_KEY(0x0F, 0x04, KEY_F1)
-				MATRIX_KEY(0x0F, 0x05, KEY_F2)
-				MATRIX_KEY(0x0F, 0x06, KEY_CAPSLOCK)
-				MATRIX_KEY(0x0F, 0x07, KEY_F6)
-
-				/* Software Handled Function Keys */
-				MATRIX_KEY(0x14, 0x00, KEY_KP7)
-
-				MATRIX_KEY(0x15, 0x00, KEY_KP9)
-				MATRIX_KEY(0x15, 0x01, KEY_KP8)
-				MATRIX_KEY(0x15, 0x02, KEY_KP4)
-				MATRIX_KEY(0x15, 0x04, KEY_KP1)
-
-				MATRIX_KEY(0x16, 0x01, KEY_KPSLASH)
-				MATRIX_KEY(0x16, 0x02, KEY_KP6)
-				MATRIX_KEY(0x16, 0x03, KEY_KP5)
-				MATRIX_KEY(0x16, 0x04, KEY_KP3)
-				MATRIX_KEY(0x16, 0x05, KEY_KP2)
-				MATRIX_KEY(0x16, 0x07, KEY_KP0)
-
-				MATRIX_KEY(0x1B, 0x01, KEY_KPASTERISK)
-				MATRIX_KEY(0x1B, 0x03, KEY_KPMINUS)
-				MATRIX_KEY(0x1B, 0x04, KEY_KPPLUS)
-				MATRIX_KEY(0x1B, 0x05, KEY_KPDOT)
-
-				MATRIX_KEY(0x1C, 0x05, KEY_VOLUMEUP)
-
-				MATRIX_KEY(0x1D, 0x03, KEY_HOME)
-				MATRIX_KEY(0x1D, 0x04, KEY_END)
-				MATRIX_KEY(0x1D, 0x05, KEY_BRIGHTNESSDOWN)
-				MATRIX_KEY(0x1D, 0x06, KEY_VOLUMEDOWN)
-				MATRIX_KEY(0x1D, 0x07, KEY_BRIGHTNESSUP)
-
-				MATRIX_KEY(0x1E, 0x00, KEY_NUMLOCK)
-				MATRIX_KEY(0x1E, 0x01, KEY_SCROLLLOCK)
-				MATRIX_KEY(0x1E, 0x02, KEY_MUTE)
-
-				MATRIX_KEY(0x1F, 0x04, KEY_HELP)>;
+		magnetometer@c {
+			compatible = "ak,ak8975";
+			reg = <0xc>;
+			interrupt-parent = <&gpio>;
+			interrupts = <109 0x04>; /* gpio PN5 */
+		};
 	};
 
-	pmc@7000e400 {
+	pmc {
 		nvidia,invert-interrupt;
-		nvidia,suspend-mode = <1>;
+		nvidia,suspend-mode = <2>;
 		nvidia,cpu-pwr-good-time = <5000>;
 		nvidia,cpu-pwr-off-time = <5000>;
 		nvidia,core-pwr-good-time = <3845 3845>;
@@ -725,47 +565,35 @@
 
 	usb@c5000000 {
 		status = "okay";
-		dr_mode = "otg";
-	};
-
-	usb-phy@c5000000 {
-		status = "okay";
-		vbus-supply = <&vbus_reg>;
+		nvidia,vbus-gpio = <&gpio 24 0>; /* PD0 */
 		dr_mode = "otg";
 	};
 
 	usb@c5004000 {
 		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 1)
-			GPIO_ACTIVE_LOW>;
-	};
-
-	usb-phy@c5004000 {
-		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 1)
-			GPIO_ACTIVE_LOW>;
+		nvidia,phy-reset-gpio = <&gpio 169 0>; /* gpio PV1 */
 	};
 
 	usb@c5008000 {
 		status = "okay";
 	};
 
-	usb-phy@c5008000 {
-		status = "okay";
+	usb-phy@c5004400 {
+		nvidia,phy-reset-gpio = <&gpio 169 0>; /* gpio PV1 */
 	};
 
 	sdhci@c8000000 {
 		status = "okay";
-		power-gpios = <&gpio TEGRA_GPIO(K, 6) GPIO_ACTIVE_HIGH>;
+		power-gpios = <&gpio 86 0>; /* gpio PK6 */
 		bus-width = <4>;
 		keep-power-in-suspend;
 	};
 
 	sdhci@c8000400 {
 		status = "okay";
-		cd-gpios = <&gpio TEGRA_GPIO(I, 5) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(H, 1) GPIO_ACTIVE_HIGH>;
-		power-gpios = <&gpio TEGRA_GPIO(I, 6) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 69 1>; /* gpio PI5 */
+		wp-gpios = <&gpio 57 0>; /* gpio PH1 */
+		power-gpios = <&gpio 70 0>; /* gpio PI6 */
 		bus-width = <4>;
 	};
 
@@ -775,23 +603,12 @@
 		non-removable;
 	};
 
-	backlight: backlight {
-		compatible = "pwm-backlight";
-
-		enable-gpios = <&gpio TEGRA_GPIO(D, 4) GPIO_ACTIVE_HIGH>;
-		power-supply = <&vdd_bl_reg>;
-		pwms = <&pwm 2 5000000>;
-
-		brightness-levels = <0 4 8 16 32 64 128 255>;
-		default-brightness-level = <6>;
-	};
-
 	clocks {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -804,14 +621,14 @@
 
 		power {
 			label = "Power";
-			gpios = <&gpio TEGRA_GPIO(V, 2) GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_POWER>;
+			gpios = <&gpio 170 1>; /* gpio PV2, active low */
+			linux,code = <116>; /* KEY_POWER */
 			gpio-key,wakeup;
 		};
 
 		lid {
 			label = "Lid";
-			gpios = <&gpio TEGRA_GPIO(C, 7) GPIO_ACTIVE_HIGH>;
+			gpios = <&gpio 23 0>; /* gpio PC7 */
 			linux,input-type = <5>; /* EV_SW */
 			linux,code = <0>; /* SW_LID */
 			debounce-interval = <1>;
@@ -819,16 +636,145 @@
 		};
 	};
 
-	panel: panel {
-		compatible = "chunghwa,claa101wa01a", "simple-panel";
+	kbc {
+		status = "okay";
+		nvidia,debounce-delay-ms = <32>;
+		nvidia,repeat-delay-ms = <160>;
+		nvidia,ghost-filter;
+		nvidia,kbc-row-pins = <0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15>;
+		nvidia,kbc-col-pins = <16 17 18 19 20 21 22 23>;
+		linux,keymap = <0x00020011	/* KEY_W */
+				0x0003001F	/* KEY_S */
+				0x0004001E	/* KEY_A */
+				0x0005002C	/* KEY_Z */
+				0x000701d0	/* KEY_FN */
+
+				0x0107007D	/* KEY_LEFTMETA */
+				0x02060064 	/* KEY_RIGHTALT */
+				0x02070038	/* KEY_LEFTALT */
+
+				0x03000006	/* KEY_5 */
+				0x03010005	/* KEY_4 */
+				0x03020013	/* KEY_R */
+				0x03030012	/* KEY_E */
+				0x03040021	/* KEY_F */
+				0x03050020	/* KEY_D */
+				0x0306002D	/* KEY_X */
+
+				0x04000008	/* KEY_7 */
+				0x04010007	/* KEY_6 */
+				0x04020014	/* KEY_T */
+				0x04030023	/* KEY_H */
+				0x04040022	/* KEY_G */
+				0x0405002F	/* KEY_V */
+				0x0406002E	/* KEY_C */
+				0x04070039	/* KEY_SPACE */
+
+				0x0500000A	/* KEY_9 */
+				0x05010009	/* KEY_8 */
+				0x05020016	/* KEY_U */
+				0x05030015	/* KEY_Y */
+				0x05040024	/* KEY_J */
+				0x05050031	/* KEY_N */
+				0x05060030	/* KEY_B */
+				0x0507002B	/* KEY_BACKSLASH */
+
+				0x0600000C	/* KEY_MINUS */
+				0x0601000B	/* KEY_0 */
+				0x06020018	/* KEY_O */
+				0x06030017	/* KEY_I */
+				0x06040026	/* KEY_L */
+				0x06050025	/* KEY_K */
+				0x06060033	/* KEY_COMMA */
+				0x06070032	/* KEY_M */
+
+				0x0701000D	/* KEY_EQUAL */
+				0x0702001B	/* KEY_RIGHTBRACE */
+				0x0703001C	/* KEY_ENTER */
+				0x0707008B	/* KEY_MENU */
+
+				0x08040036	/* KEY_RIGHTSHIFT */
+				0x0805002A	/* KEY_LEFTSHIFT */
+
+				0x09050061	/* KEY_RIGHTCTRL */
+				0x0907001D	/* KEY_LEFTCTRL */
+
+				0x0B00001A	/* KEY_LEFTBRACE */
+				0x0B010019	/* KEY_P */
+				0x0B020028	/* KEY_APOSTROPHE */
+				0x0B030027	/* KEY_SEMICOLON */
+				0x0B040035	/* KEY_SLASH */
+				0x0B050034	/* KEY_DOT */
+
+				0x0C000044	/* KEY_F10 */
+				0x0C010043	/* KEY_F9 */
+				0x0C02000E	/* KEY_BACKSPACE */
+				0x0C030004	/* KEY_3 */
+				0x0C040003	/* KEY_2 */
+				0x0C050067	/* KEY_UP */
+				0x0C0600D2	/* KEY_PRINT */
+				0x0C070077	/* KEY_PAUSE */
+
+				0x0D00006E	/* KEY_INSERT */
+				0x0D01006F	/* KEY_DELETE */
+				0x0D030068	/* KEY_PAGEUP  */
+				0x0D04006D	/* KEY_PAGEDOWN */
+				0x0D05006A	/* KEY_RIGHT */
+				0x0D06006C	/* KEY_DOWN */
+				0x0D070069	/* KEY_LEFT */
+
+				0x0E000057	/* KEY_F11 */
+				0x0E010058	/* KEY_F12 */
+				0x0E020042	/* KEY_F8 */
+				0x0E030010	/* KEY_Q */
+				0x0E04003E	/* KEY_F4 */
+				0x0E05003D	/* KEY_F3 */
+				0x0E060002	/* KEY_1 */
+				0x0E070041	/* KEY_F7 */
+
+				0x0F000001	/* KEY_ESC */
+				0x0F010029	/* KEY_GRAVE */
+				0x0F02003F	/* KEY_F5 */
+				0x0F03000F	/* KEY_TAB */
+				0x0F04003B	/* KEY_F1 */
+				0x0F05003C	/* KEY_F2 */
+				0x0F06003A	/* KEY_CAPSLOCK */
+				0x0F070040	/* KEY_F6 */
 
-		power-supply = <&vdd_pnl_reg>;
-		enable-gpios = <&gpio TEGRA_GPIO(B, 2) GPIO_ACTIVE_HIGH>;
+				/* Software Handled Function Keys */
+				0x14000047	/* KEY_KP7 */
 
-		backlight = <&backlight>;
-		ddc-i2c-bus = <&lvds_ddc>;
-	};
+				0x15000049	/* KEY_KP9 */
+				0x15010048	/* KEY_KP8 */
+				0x1502004B	/* KEY_KP4 */
+				0x1504004F	/* KEY_KP1 */
+
+				0x1601004E	/* KEY_KPSLASH */
+				0x1602004D	/* KEY_KP6 */
+				0x1603004C	/* KEY_KP5 */
+				0x16040051	/* KEY_KP3 */
+				0x16050050	/* KEY_KP2 */
+				0x16070052	/* KEY_KP0 */
+
+				0x1B010037	/* KEY_KPASTERISK */
+				0x1B03004A	/* KEY_KPMINUS */
+				0x1B04004E	/* KEY_KPPLUS */
+				0x1B050053	/* KEY_KPDOT */
+
+				0x1C050073	/* KEY_VOLUMEUP */
+
+				0x1D030066	/* KEY_HOME */
+				0x1D04006B	/* KEY_END */
+				0x1D0500E0	/* KEY_BRIGHTNESSDOWN */
+				0x1D060072	/* KEY_VOLUMEDOWN */
+				0x1D0700E1	/* KEY_BRIGHTNESSUP */
+
+				0x1E000045	/* KEY_NUMLOCK */
+				0x1E010046	/* KEY_SCROLLLOCK */
+				0x1E020071	/* KEY_MUTE */
 
+				0x1F04008A>;	/* KEY_HELP */
+	};
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -849,7 +795,7 @@
 			regulator-name = "vdd_1v5";
 			regulator-min-microvolt = <1500000>;
 			regulator-max-microvolt = <1500000>;
-			gpio = <&pmic 0 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 0 0>;
 		};
 
 		regulator@2 {
@@ -858,39 +804,7 @@
 			regulator-name = "vdd_1v2";
 			regulator-min-microvolt = <1200000>;
 			regulator-max-microvolt = <1200000>;
-			gpio = <&pmic 1 GPIO_ACTIVE_HIGH>;
-			enable-active-high;
-		};
-
-		vbus_reg: regulator@3 {
-			compatible = "regulator-fixed";
-			reg = <3>;
-			regulator-name = "vdd_vbus_wup1";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(D, 0) 0>;
-			regulator-always-on;
-			regulator-boot-on;
-		};
-
-		vdd_pnl_reg: regulator@4 {
-			compatible = "regulator-fixed";
-			reg = <4>;
-			regulator-name = "vdd_pnl";
-			regulator-min-microvolt = <2800000>;
-			regulator-max-microvolt = <2800000>;
-			gpio = <&gpio TEGRA_GPIO(C, 6) GPIO_ACTIVE_HIGH>;
-			enable-active-high;
-		};
-
-		vdd_bl_reg: regulator@5 {
-			compatible = "regulator-fixed";
-			reg = <5>;
-			regulator-name = "vdd_bl";
-			regulator-min-microvolt = <2800000>;
-			regulator-max-microvolt = <2800000>;
-			gpio = <&gpio TEGRA_GPIO(W, 0) GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 1 0>;
 			enable-active-high;
 		};
 	};
@@ -913,12 +827,10 @@
 		nvidia,i2s-controller = <&tegra_i2s1>;
 		nvidia,audio-codec = <&wm8903>;
 
-		nvidia,spkr-en-gpios = <&wm8903 2 GPIO_ACTIVE_HIGH>;
-		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(X, 1) GPIO_ACTIVE_HIGH>;
+		nvidia,spkr-en-gpios = <&wm8903 2 0>;
+		nvidia,hp-det-gpios = <&gpio 185 0>; /* gpio PX1 */
 
-		clocks = <&tegra_car TEGRA20_CLK_PLL_A>,
-			 <&tegra_car TEGRA20_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA20_CLK_CDEV1>;
+		clocks = <&tegra_car 112>, <&tegra_car 113>, <&tegra_car 94>;
 		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-tamonten.dtsi b/arch/arm/boot/dts/tegra20-tamonten.dtsi
--- a/arch/arm/boot/dts/tegra20-tamonten.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-tamonten.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,31 +1,24 @@
-#include "tegra20.dtsi"
+/include/ "tegra20.dtsi"
 
 / {
 	model = "Avionic Design Tamonten SOM";
 	compatible = "ad,tamonten", "nvidia,tegra20";
 
-	aliases {
-		rtc0 = "/i2c@7000d000/tps6586x@34";
-		rtc1 = "/rtc@7000e000";
-		serial0 = &uartd;
-	};
-
 	memory {
 		reg = <0x00000000 0x20000000>;
 	};
 
-	host1x@50000000 {
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			vdd-supply = <&hdmi_vdd_reg>;
 			pll-supply = <&hdmi_pll_reg>;
 
 			nvidia,ddc-i2c-bus = <&hdmi_ddc>;
-			nvidia,hpd-gpio = <&gpio TEGRA_GPIO(N, 7)
-				GPIO_ACTIVE_HIGH>;
+			nvidia,hpd-gpio = <&gpio 111 0>; /* PN7 */
 		};
 	};
 
-	pinmux@70000014 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -182,50 +175,50 @@
 					"gmb", "gmc", "gmd", "gme", "gpu7",
 					"gpv", "i2cp", "pta", "rm", "slxa",
 					"slxk", "spia", "spib", "uac";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			conf_ck32 {
 				nvidia,pins = "ck32", "ddrc", "pmca", "pmcb",
 					"pmcc", "pmcd", "pmce", "xm2c", "xm2d";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
+				nvidia,pull = <0>;
 			};
 			conf_csus {
 				nvidia,pins = "csus", "spid", "spif";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <1>;
 			};
 			conf_crtp {
 				nvidia,pins = "crtp", "dap2", "dap3", "dap4",
 					"dtc", "dte", "dtf", "gpu", "sdio1",
 					"slxc", "slxd", "spdi", "spdo", "spig",
 					"uda";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			conf_ddc {
 				nvidia,pins = "ddc", "dta", "dtd", "kbca",
 					"kbcb", "kbcc", "kbcd", "kbce", "kbcf",
 					"sdc";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			conf_hdint {
 				nvidia,pins = "hdint", "lcsn", "ldc", "lm1",
 					"lpw1", "lsc1", "lsck", "lsda", "lsdi",
 					"lvp0", "owc", "sdb";
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,tristate = <1>;
 			};
 			conf_irrx {
 				nvidia,pins = "irrx", "irtx", "sdd", "spic",
 					"spie", "spih", "uaa", "uab", "uad",
 					"uca", "ucb";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <1>;
 			};
 			conf_lc {
 				nvidia,pins = "lc", "ls";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
+				nvidia,pull = <2>;
 			};
 			conf_ld0 {
 				nvidia,pins = "ld0", "ld1", "ld2", "ld3", "ld4",
@@ -235,12 +228,12 @@
 					"lhp1", "lhp2", "lhs", "lm0", "lpp",
 					"lpw0", "lpw2", "lsc0", "lspi", "lvp1",
 					"lvs", "pmc";
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 			conf_ld17_0 {
 				nvidia,pins = "ld17_0", "ld19_18", "ld21_20",
 					"ld23_22";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
+				nvidia,pull = <1>;
 			};
 		};
 
@@ -328,14 +321,13 @@
 		pmic: tps6586x@34 {
 			compatible = "ti,tps6586x";
 			reg = <0x34>;
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 
 			ti,system-power-controller;
 
 			#gpio-cells = <2>;
 			gpio-controller;
 
-			/* vdd_5v0_reg must be provided by the base board */
 			sys-supply = <&vdd_5v0_reg>;
 			vin-sm0-supply = <&sys_reg>;
 			vin-sm1-supply = <&sys_reg>;
@@ -373,7 +365,7 @@
 					regulator-always-on;
 				};
 
-				pci_clk_reg: ldo0 {
+				ldo0 {
 					regulator-name = "vdd_ldo0,vddio_pex_clk";
 					regulator-min-microvolt = <3300000>;
 					regulator-max-microvolt = <3300000>;
@@ -464,9 +456,9 @@
 		};
 	};
 
-	pmc@7000e400 {
+	pmc {
 		nvidia,invert-interrupt;
-		nvidia,suspend-mode = <1>;
+		nvidia,suspend-mode = <2>;
 		nvidia,cpu-pwr-good-time = <5000>;
 		nvidia,cpu-pwr-off-time = <5000>;
 		nvidia,core-pwr-good-time = <3845 3845>;
@@ -474,25 +466,13 @@
 		nvidia,sys-clock-req-active-high;
 	};
 
-	pcie-controller@80003000 {
-		avdd-pex-supply = <&pci_vdd_reg>;
-		vdd-pex-supply = <&pci_vdd_reg>;
-		avdd-pex-pll-supply = <&pci_vdd_reg>;
-		avdd-plle-supply = <&pci_vdd_reg>;
-		vddio-pex-clk-supply = <&pci_clk_reg>;
-	};
-
 	usb@c5008000 {
 		status = "okay";
 	};
 
-	usb-phy@c5008000 {
-		status = "okay";
-	};
-
 	sdhci@c8000600 {
-		cd-gpios = <&gpio TEGRA_GPIO(H, 2) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(H, 3) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 58 1>; /* gpio PH2 */
+		wp-gpios = <&gpio 59 0>; /* gpio PH3 */
 		bus-width = <4>;
 		status = "okay";
 	};
@@ -502,7 +482,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -516,14 +496,13 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		pci_vdd_reg: regulator@1 {
+		vdd_5v0_reg: regulator@0 {
 			compatible = "regulator-fixed";
-			reg = <1>;
-			regulator-name = "vdd_1v05";
-			regulator-min-microvolt = <1050000>;
-			regulator-max-microvolt = <1050000>;
-			gpio = <&pmic 2 0>;
-			enable-active-high;
+			reg = <0>;
+			regulator-name = "vdd_5v0";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			regulator-always-on;
 		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-tec.dts b/arch/arm/boot/dts/tegra20-tec.dts
--- a/arch/arm/boot/dts/tegra20-tec.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-tec.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,13 +1,13 @@
 /dts-v1/;
 
-#include "tegra20-tamonten.dtsi"
+/include/ "tegra20-tamonten.dtsi"
 
 / {
 	model = "Avionic Design Tamonten Evaluation Carrier";
 	compatible = "ad,tec", "ad,tamonten", "nvidia,tegra20";
 
-	host1x@50000000 {
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			status = "okay";
 		};
 	};
@@ -17,7 +17,7 @@
 			compatible = "wlf,wm8903";
 			reg = <0x1a>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(X, 3) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <187 0x04>;
 
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -32,14 +32,6 @@
 		};
 	};
 
-	pcie-controller@80003000 {
-		status = "okay";
-
-		pci@1,0 {
-			status = "okay";
-		};
-	};
-
 	sound {
 		compatible = "ad,tegra-audio-wm8903-tec",
 			     "nvidia,tegra-audio-wm8903";
@@ -58,54 +50,10 @@
 		nvidia,i2s-controller = <&tegra_i2s1>;
 		nvidia,audio-codec = <&wm8903>;
 
-		nvidia,spkr-en-gpios = <&wm8903 2 GPIO_ACTIVE_HIGH>;
-		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(W, 2)
-			GPIO_ACTIVE_HIGH>;
-
-		clocks = <&tegra_car TEGRA20_CLK_PLL_A>,
-			 <&tegra_car TEGRA20_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA20_CLK_CDEV1>;
-		clock-names = "pll_a", "pll_a_out0", "mclk";
-	};
+		nvidia,spkr-en-gpios = <&wm8903 2 0>;
+		nvidia,hp-det-gpios = <&gpio 178 0>; /* gpio PW2 */
 
-	regulators {
-		vcc_24v_reg: regulator@100 {
-			compatible = "regulator-fixed";
-			reg = <100>;
-			regulator-name = "vcc_24v";
-			regulator-min-microvolt = <24000000>;
-			regulator-max-microvolt = <24000000>;
-			regulator-always-on;
-		};
-
-		vdd_5v0_reg: regulator@101 {
-			compatible = "regulator-fixed";
-			reg = <101>;
-			regulator-name = "vdd_5v0";
-			vin-supply = <&vcc_24v_reg>;
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			regulator-always-on;
-		};
-
-		vdd_3v3_reg: regulator@102 {
-			compatible = "regulator-fixed";
-			reg = <102>;
-			regulator-name = "vdd_3v3";
-			vin-supply = <&vcc_24v_reg>;
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			regulator-always-on;
-		};
-
-		vdd_1v8_reg: regulator@103 {
-			compatible = "regulator-fixed";
-			reg = <103>;
-			regulator-name = "vdd_1v8";
-			vin-supply = <&vdd_3v3_reg>;
-			regulator-min-microvolt = <1800000>;
-			regulator-max-microvolt = <1800000>;
-			regulator-always-on;
-		};
+		clocks = <&tegra_car 112>, <&tegra_car 113>, <&tegra_car 94>;
+		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-trimslice.dts b/arch/arm/boot/dts/tegra20-trimslice.dts
--- a/arch/arm/boot/dts/tegra20-trimslice.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-trimslice.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,36 +1,28 @@
 /dts-v1/;
 
-#include <dt-bindings/input/input.h>
-#include "tegra20.dtsi"
+/include/ "tegra20.dtsi"
 
 / {
 	model = "Compulab TrimSlice board";
 	compatible = "compulab,trimslice", "nvidia,tegra20";
 
-	aliases {
-		rtc0 = "/i2c@7000c500/rtc@56";
-		rtc1 = "/rtc@7000e000";
-		serial0 = &uarta;
-	};
-
 	memory {
 		reg = <0x00000000 0x40000000>;
 	};
 
-	host1x@50000000 {
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			status = "okay";
 
 			vdd-supply = <&hdmi_vdd_reg>;
 			pll-supply = <&hdmi_pll_reg>;
 
 			nvidia,ddc-i2c-bus = <&hdmi_ddc>;
-			nvidia,hpd-gpio = <&gpio TEGRA_GPIO(N, 7)
-				GPIO_ACTIVE_HIGH>;
+			nvidia,hpd-gpio = <&gpio 111 0>; /* PN7 */
 		};
 	};
 
-	pinmux@70000014 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -198,49 +190,49 @@
 					"dtb", "dtc", "dtd", "dte", "gmb",
 					"gme", "i2cp", "pta", "slxc", "slxd",
 					"spdi", "spdo", "uda";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			conf_atb {
 				nvidia,pins = "atb", "cdev1", "cdev2", "dap1",
 					"gma", "gmc", "gmd", "gpu", "gpu7",
 					"gpv", "sdio1", "slxa", "slxk", "uac";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			conf_ck32 {
 				nvidia,pins = "ck32", "ddrc", "pmca", "pmcb",
 					"pmcc", "pmcd", "pmce", "xm2c", "xm2d";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
+				nvidia,pull = <0>;
 			};
 			conf_csus {
 				nvidia,pins = "csus", "spia", "spib",
 					"spid", "spif";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <1>;
 			};
 			conf_ddc {
 				nvidia,pins = "ddc", "dtf", "rm", "sdc", "sdd";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			conf_hdint {
 				nvidia,pins = "hdint", "lcsn", "ldc", "lm1",
 					"lpw1", "lsc1", "lsck", "lsda", "lsdi",
 					"lvp0", "pmc";
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,tristate = <1>;
 			};
 			conf_irrx {
 				nvidia,pins = "irrx", "irtx", "kbca", "kbcb",
 					"kbcc", "kbcd", "kbce", "kbcf", "owc",
 					"spic", "spie", "spig", "spih", "uaa",
 					"uab", "uad", "uca", "ucb";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <1>;
 			};
 			conf_lc {
 				nvidia,pins = "lc", "ls";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
+				nvidia,pull = <2>;
 			};
 			conf_ld0 {
 				nvidia,pins = "ld0", "ld1", "ld2", "ld3", "ld4",
@@ -250,17 +242,17 @@
 					"lhp1", "lhp2", "lhs", "lm0", "lpp",
 					"lpw0", "lpw2", "lsc0", "lspi", "lvp1",
 					"lvs", "sdb";
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 			conf_ld17_0 {
 				nvidia,pins = "ld17_0", "ld19_18", "ld21_20",
 					"ld23_22";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
+				nvidia,pull = <1>;
 			};
 			conf_spif {
 				nvidia,pins = "spif";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
 			};
 		};
 	};
@@ -308,8 +300,8 @@
 		};
 	};
 
-	pmc@7000e400 {
-		nvidia,suspend-mode = <1>;
+	pmc {
+		nvidia,suspend-mode = <2>;
 		nvidia,cpu-pwr-good-time = <5000>;
 		nvidia,cpu-pwr-off-time = <5000>;
 		nvidia,core-pwr-good-time = <3845 3845>;
@@ -317,47 +309,22 @@
 		nvidia,sys-clock-req-active-high;
 	};
 
-	pcie-controller@80003000 {
-		status = "okay";
-
-		avdd-pex-supply = <&pci_vdd_reg>;
-		vdd-pex-supply = <&pci_vdd_reg>;
-		avdd-pex-pll-supply = <&pci_vdd_reg>;
-		avdd-plle-supply = <&pci_vdd_reg>;
-		vddio-pex-clk-supply = <&pci_clk_reg>;
-
-		pci@1,0 {
-			status = "okay";
-		};
-	};
-
 	usb@c5000000 {
 		status = "okay";
-	};
-
-	usb-phy@c5000000 {
-		status = "okay";
-		vbus-supply = <&vbus_reg>;
+		nvidia,vbus-gpio = <&gpio 170 0>; /* gpio PV2 */
 	};
 
 	usb@c5004000 {
 		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 0)
-			GPIO_ACTIVE_LOW>;
-	};
-
-	usb-phy@c5004000 {
-		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 0)
-			GPIO_ACTIVE_LOW>;
+		nvidia,phy-reset-gpio = <&gpio 168 0>; /* gpio PV0 */
 	};
 
 	usb@c5008000 {
 		status = "okay";
 	};
 
-	usb-phy@c5008000 {
-		status = "okay";
+	usb-phy@c5004400 {
+		nvidia,phy-reset-gpio = <&gpio 168 0>; /* gpio PV0 */
 	};
 
 	sdhci@c8000000 {
@@ -367,8 +334,8 @@
 
 	sdhci@c8000600 {
 		status = "okay";
-		cd-gpios = <&gpio TEGRA_GPIO(P, 1) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(P, 2) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 121 1>; /* gpio PP1 */
+		wp-gpios = <&gpio 122 0>; /* gpio PP2 */
 		bus-width = <4>;
 	};
 
@@ -377,7 +344,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -390,15 +357,15 @@
 
 		power {
 			label = "Power";
-			gpios = <&gpio TEGRA_GPIO(X, 6) GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_POWER>;
+			gpios = <&gpio 190 1>; /* gpio PX6, active low */
+			linux,code = <116>; /* KEY_POWER */
 			gpio-key,wakeup;
 		};
 	};
 
 	poweroff {
 		compatible = "gpio-poweroff";
-		gpios = <&gpio TEGRA_GPIO(X, 7) GPIO_ACTIVE_LOW>;
+		gpios = <&gpio 191 1>; /* gpio PX7, active low */
 	};
 
 	regulators {
@@ -423,36 +390,6 @@
 			regulator-max-microvolt = <1800000>;
 			regulator-always-on;
 		};
-
-		vbus_reg: regulator@2 {
-			compatible = "regulator-fixed";
-			reg = <2>;
-			regulator-name = "usb1_vbus";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(V, 2) 0>;
-			regulator-always-on;
-			regulator-boot-on;
-		};
-
-		pci_clk_reg: regulator@3 {
-			compatible = "regulator-fixed";
-			reg = <3>;
-			regulator-name = "pci_clk";
-			regulator-min-microvolt = <3300000>;
-			regulator-max-microvolt = <3300000>;
-			regulator-always-on;
-		};
-
-		pci_vdd_reg: regulator@4 {
-			compatible = "regulator-fixed";
-			reg = <4>;
-			regulator-name = "pci_vdd";
-			regulator-min-microvolt = <1050000>;
-			regulator-max-microvolt = <1050000>;
-			regulator-always-on;
-		};
 	};
 
 	sound {
@@ -460,9 +397,7 @@
 		nvidia,i2s-controller = <&tegra_i2s1>;
 		nvidia,audio-codec = <&codec>;
 
-		clocks = <&tegra_car TEGRA20_CLK_PLL_A>,
-			 <&tegra_car TEGRA20_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA20_CLK_CDEV1>;
+		clocks = <&tegra_car 112>, <&tegra_car 113>, <&tegra_car 94>;
 		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-ventana.dts b/arch/arm/boot/dts/tegra20-ventana.dts
--- a/arch/arm/boot/dts/tegra20-ventana.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-ventana.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,44 +1,28 @@
 /dts-v1/;
 
-#include <dt-bindings/input/input.h>
-#include "tegra20.dtsi"
+/include/ "tegra20.dtsi"
 
 / {
 	model = "NVIDIA Tegra20 Ventana evaluation board";
 	compatible = "nvidia,ventana", "nvidia,tegra20";
 
-	aliases {
-		rtc0 = "/i2c@7000d000/tps6586x@34";
-		rtc1 = "/rtc@7000e000";
-		serial0 = &uartd;
-	};
-
 	memory {
 		reg = <0x00000000 0x40000000>;
 	};
 
-	host1x@50000000 {
-		dc@54200000 {
-			rgb {
-				status = "okay";
-
-				nvidia,panel = <&panel>;
-			};
-		};
-
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			status = "okay";
 
 			vdd-supply = <&hdmi_vdd_reg>;
 			pll-supply = <&hdmi_pll_reg>;
 
 			nvidia,ddc-i2c-bus = <&hdmi_ddc>;
-			nvidia,hpd-gpio = <&gpio TEGRA_GPIO(N, 7)
-				GPIO_ACTIVE_HIGH>;
+			nvidia,hpd-gpio = <&gpio 111 0>; /* PN7 */
 		};
 	};
 
-	pinmux@70000014 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -204,50 +188,50 @@
 					"irtx", "pta", "rm", "sdc", "sdd",
 					"slxc", "slxd", "slxk", "spdi", "spdo",
 					"uac", "uad", "uca", "ucb", "uda";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			conf_ate {
 				nvidia,pins = "ate", "csus", "dap3", "gmd",
 					"gpv", "owc", "spia", "spib", "spic",
 					"spid", "spie", "spig";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			conf_ck32 {
 				nvidia,pins = "ck32", "ddrc", "pmca", "pmcb",
 					"pmcc", "pmcd", "pmce", "xm2c", "xm2d";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
+				nvidia,pull = <0>;
 			};
 			conf_crtp {
 				nvidia,pins = "crtp", "gmb", "slxa", "spih";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <1>;
 			};
 			conf_dta {
 				nvidia,pins = "dta", "dtb", "dtc", "dtd";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
 			};
 			conf_dte {
 				nvidia,pins = "dte", "spif";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <1>;
 			};
 			conf_hdint {
 				nvidia,pins = "hdint", "lcsn", "ldc", "lm1",
 					"lpw1", "lsck", "lsda", "lsdi", "lvp0";
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,tristate = <1>;
 			};
 			conf_kbca {
 				nvidia,pins = "kbca", "kbcb", "kbcc", "kbcd",
 					"kbce", "kbcf", "sdio1", "uaa", "uab";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			conf_lc {
 				nvidia,pins = "lc", "ls";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
+				nvidia,pull = <2>;
 			};
 			conf_ld0 {
 				nvidia,pins = "ld0", "ld1", "ld2", "ld3", "ld4",
@@ -257,22 +241,22 @@
 					"lhp1", "lhp2", "lhs", "lm0", "lpp",
 					"lpw0", "lpw2", "lsc0", "lsc1", "lspi",
 					"lvp1", "lvs", "pmc", "sdb";
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,tristate = <0>;
 			};
 			conf_ld17_0 {
 				nvidia,pins = "ld17_0", "ld19_18", "ld21_20",
 					"ld23_22";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
+				nvidia,pull = <1>;
 			};
 			drive_sdio1 {
 				nvidia,pins = "drive_sdio1";
-				nvidia,high-speed-mode = <TEGRA_PIN_DISABLE>;
-				nvidia,schmitt = <TEGRA_PIN_ENABLE>;
-				nvidia,low-power-mode = <TEGRA_PIN_LP_DRIVE_DIV_1>;
+				nvidia,high-speed-mode = <0>;
+				nvidia,schmitt = <1>;
+				nvidia,low-power-mode = <3>;
 				nvidia,pull-down-strength = <31>;
 				nvidia,pull-up-strength = <31>;
-				nvidia,slew-rate-rising = <TEGRA_PIN_SLEW_RATE_SLOWEST>;
-				nvidia,slew-rate-falling = <TEGRA_PIN_SLEW_RATE_SLOWEST>;
+				nvidia,slew-rate-rising = <3>;
+				nvidia,slew-rate-falling = <3>;
 			};
 		};
 
@@ -318,10 +302,6 @@
 		status = "okay";
 	};
 
-	pwm: pwm@7000a000 {
-		status = "okay";
-	};
-
 	i2c@7000c000 {
 		status = "okay";
 		clock-frequency = <400000>;
@@ -330,7 +310,7 @@
 			compatible = "wlf,wm8903";
 			reg = <0x1a>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(X, 3) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <187 0x04>;
 
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -345,7 +325,7 @@
 			compatible = "isil,isl29018";
 			reg = <0x44>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(Z, 2) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <202 0x04>; /*gpio PZ2 */
 		};
 	};
 
@@ -372,7 +352,7 @@
 			#size-cells = <0>;
 		};
 
-		lvds_ddc: i2c@1 {
+		i2c@1 {
 			reg = <1>;
 			#address-cells = <1>;
 			#size-cells = <0>;
@@ -391,7 +371,7 @@
 		pmic: tps6586x@34 {
 			compatible = "ti,tps6586x";
 			reg = <0x34>;
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 
 			ti,system-power-controller;
 
@@ -511,9 +491,9 @@
 		};
 	};
 
-	pmc@7000e400 {
+	pmc {
 		nvidia,invert-interrupt;
-		nvidia,suspend-mode = <1>;
+		nvidia,suspend-mode = <2>;
 		nvidia,cpu-pwr-good-time = <2000>;
 		nvidia,cpu-pwr-off-time = <100>;
 		nvidia,core-pwr-good-time = <3845 3845>;
@@ -525,42 +505,31 @@
 		status = "okay";
 	};
 
-	usb-phy@c5000000 {
-		status = "okay";
-	};
-
 	usb@c5004000 {
 		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 1)
-			GPIO_ACTIVE_LOW>;
-	};
-
-	usb-phy@c5004000 {
-		status = "okay";
-		nvidia,phy-reset-gpio = <&gpio TEGRA_GPIO(V, 1)
-			GPIO_ACTIVE_LOW>;
+		nvidia,phy-reset-gpio = <&gpio 169 0>; /* gpio PV1 */
 	};
 
 	usb@c5008000 {
 		status = "okay";
 	};
 
-	usb-phy@c5008000 {
-		status = "okay";
+	usb-phy@c5004400 {
+		nvidia,phy-reset-gpio = <&gpio 169 0>; /* gpio PV1 */
 	};
 
 	sdhci@c8000000 {
 		status = "okay";
-		power-gpios = <&gpio TEGRA_GPIO(K, 6) GPIO_ACTIVE_HIGH>;
+		power-gpios = <&gpio 86 0>; /* gpio PK6 */
 		bus-width = <4>;
 		keep-power-in-suspend;
 	};
 
 	sdhci@c8000400 {
 		status = "okay";
-		cd-gpios = <&gpio TEGRA_GPIO(I, 5) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(H, 1) GPIO_ACTIVE_HIGH>;
-		power-gpios = <&gpio TEGRA_GPIO(I, 6) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 69 1>; /* gpio PI5 */
+		wp-gpios = <&gpio 57 0>; /* gpio PH1 */
+		power-gpios = <&gpio 70 0>; /* gpio PI6 */
 		bus-width = <4>;
 	};
 
@@ -570,23 +539,12 @@
 		non-removable;
 	};
 
-	backlight: backlight {
-		compatible = "pwm-backlight";
-
-		enable-gpios = <&gpio TEGRA_GPIO(D, 4) GPIO_ACTIVE_HIGH>;
-		power-supply = <&vdd_bl_reg>;
-		pwms = <&pwm 2 5000000>;
-
-		brightness-levels = <0 4 8 16 32 64 128 255>;
-		default-brightness-level = <6>;
-	};
-
 	clocks {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -599,22 +557,12 @@
 
 		power {
 			label = "Power";
-			gpios = <&gpio TEGRA_GPIO(V, 2) GPIO_ACTIVE_LOW>;
-			linux,code = <KEY_POWER>;
+			gpios = <&gpio 170 1>; /* gpio PV2, active low */
+			linux,code = <116>; /* KEY_POWER */
 			gpio-key,wakeup;
 		};
 	};
 
-	panel: panel {
-		compatible = "chunghwa,claa101wa01a", "simple-panel";
-
-		power-supply = <&vdd_pnl_reg>;
-		enable-gpios = <&gpio TEGRA_GPIO(B, 2) GPIO_ACTIVE_HIGH>;
-
-		backlight = <&backlight>;
-		ddc-i2c-bus = <&lvds_ddc>;
-	};
-
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -635,7 +583,7 @@
 			regulator-name = "vdd_1v5";
 			regulator-min-microvolt = <1500000>;
 			regulator-max-microvolt = <1500000>;
-			gpio = <&pmic 0 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 0 0>;
 		};
 
 		regulator@2 {
@@ -644,27 +592,27 @@
 			regulator-name = "vdd_1v2";
 			regulator-min-microvolt = <1200000>;
 			regulator-max-microvolt = <1200000>;
-			gpio = <&pmic 1 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 1 0>;
 			enable-active-high;
 		};
 
-		vdd_pnl_reg: regulator@3 {
+		regulator@3 {
 			compatible = "regulator-fixed";
 			reg = <3>;
 			regulator-name = "vdd_pnl";
 			regulator-min-microvolt = <2800000>;
 			regulator-max-microvolt = <2800000>;
-			gpio = <&gpio TEGRA_GPIO(C, 6) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 22 0>; /* gpio PC6 */
 			enable-active-high;
 		};
 
-		vdd_bl_reg: regulator@4 {
+		regulator@4 {
 			compatible = "regulator-fixed";
 			reg = <4>;
 			regulator-name = "vdd_bl";
 			regulator-min-microvolt = <2800000>;
 			regulator-max-microvolt = <2800000>;
-			gpio = <&gpio TEGRA_GPIO(W, 0) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 176 0>; /* gpio PW0 */
 			enable-active-high;
 		};
 	};
@@ -687,16 +635,12 @@
 		nvidia,i2s-controller = <&tegra_i2s1>;
 		nvidia,audio-codec = <&wm8903>;
 
-		nvidia,spkr-en-gpios = <&wm8903 2 GPIO_ACTIVE_HIGH>;
-		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(W, 2) GPIO_ACTIVE_HIGH>;
-		nvidia,int-mic-en-gpios = <&gpio TEGRA_GPIO(X, 0)
-			GPIO_ACTIVE_HIGH>;
-		nvidia,ext-mic-en-gpios = <&gpio TEGRA_GPIO(X, 1)
-			GPIO_ACTIVE_HIGH>;
-
-		clocks = <&tegra_car TEGRA20_CLK_PLL_A>,
-			 <&tegra_car TEGRA20_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA20_CLK_CDEV1>;
+		nvidia,spkr-en-gpios = <&wm8903 2 0>;
+		nvidia,hp-det-gpios = <&gpio 178 0>; /* gpio PW2 */
+		nvidia,int-mic-en-gpios = <&gpio 184 0>; /* gpio PX0 */
+		nvidia,ext-mic-en-gpios = <&gpio 185 0>; /* gpio PX1 */
+
+		clocks = <&tegra_car 112>, <&tegra_car 113>, <&tegra_car 94>;
 		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20-whistler.dts b/arch/arm/boot/dts/tegra20-whistler.dts
--- a/arch/arm/boot/dts/tegra20-whistler.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20-whistler.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,36 +1,28 @@
 /dts-v1/;
 
-#include <dt-bindings/input/input.h>
-#include "tegra20.dtsi"
+/include/ "tegra20.dtsi"
 
 / {
 	model = "NVIDIA Tegra20 Whistler evaluation board";
 	compatible = "nvidia,whistler", "nvidia,tegra20";
 
-	aliases {
-		rtc0 = "/i2c@7000d000/max8907@3c";
-		rtc1 = "/rtc@7000e000";
-		serial0 = &uarta;
-	};
-
 	memory {
 		reg = <0x00000000 0x20000000>;
 	};
 
-	host1x@50000000 {
-		hdmi@54280000 {
+	host1x {
+		hdmi {
 			status = "okay";
 
 			vdd-supply = <&hdmi_vdd_reg>;
 			pll-supply = <&hdmi_pll_reg>;
 
 			nvidia,ddc-i2c-bus = <&hdmi_ddc>;
-			nvidia,hpd-gpio = <&gpio TEGRA_GPIO(N, 7)
-				GPIO_ACTIVE_HIGH>;
+			nvidia,hpd-gpio = <&gpio 111 0>; /* PN7 */
 		};
 	};
 
-	pinmux@70000014 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -196,8 +188,8 @@
 					"kbcf", "sdc", "sdd", "spie", "spig",
 					"spih", "uaa", "uab", "uad", "uca",
 					"ucb";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			conf_atd {
 				nvidia,pins = "atd", "ate", "cdev1", "csus",
@@ -205,54 +197,54 @@
 					"dtf", "gpu", "gpu7", "gpv", "i2cp",
 					"rm", "sdio1", "slxa", "slxc", "slxd",
 					"slxk", "spdi", "spdo", "uac", "uda";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			conf_cdev2 {
 				nvidia,pins = "cdev2", "spia", "spib";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <1>;
 			};
 			conf_ck32 {
 				nvidia,pins = "ck32", "ddrc", "lc", "pmca",
 					"pmcb", "pmcc", "pmcd", "xm2c",
 					"xm2d";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
+				nvidia,pull = <0>;
 			};
 			conf_crtp {
 				nvidia,pins = "crtp";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <1>;
 			};
 			conf_dta {
 				nvidia,pins = "dta", "dtb", "dtc", "dtd",
 					"spid", "spif";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <1>;
+				nvidia,tristate = <0>;
 			};
 			conf_gme {
 				nvidia,pins = "gme", "owc", "pta", "spic";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_ENABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <1>;
 			};
 			conf_ld17_0 {
 				nvidia,pins = "ld17_0", "ld19_18", "ld21_20",
 					"ld23_22";
-				nvidia,pull = <TEGRA_PIN_PULL_DOWN>;
+				nvidia,pull = <1>;
 			};
 			conf_ls {
 				nvidia,pins = "ls", "pmce";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
+				nvidia,pull = <2>;
 			};
 			drive_dap1 {
 				nvidia,pins = "drive_dap1";
-				nvidia,high-speed-mode = <TEGRA_PIN_DISABLE>;
-				nvidia,schmitt = <TEGRA_PIN_ENABLE>;
-				nvidia,low-power-mode = <TEGRA_PIN_LP_DRIVE_DIV_8>;
+				nvidia,high-speed-mode = <0>;
+				nvidia,schmitt = <1>;
+				nvidia,low-power-mode = <0>;
 				nvidia,pull-down-strength = <0>;
 				nvidia,pull-up-strength = <0>;
-				nvidia,slew-rate-rising = <TEGRA_PIN_SLEW_RATE_FASTEST>;
-				nvidia,slew-rate-falling = <TEGRA_PIN_SLEW_RATE_FASTEST>;
+				nvidia,slew-rate-rising = <0>;
+				nvidia,slew-rate-falling = <0>;
 			};
 		};
 	};
@@ -289,7 +281,7 @@
 		max8907@3c {
 			compatible = "maxim,max8907";
 			reg = <0x3c>;
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 
 			maxim,system-power-controller;
 
@@ -502,22 +494,9 @@
 		};
 	};
 
-	kbc@7000e200 {
-		status = "okay";
-		nvidia,debounce-delay-ms = <20>;
-		nvidia,repeat-delay-ms = <160>;
-		nvidia,kbc-row-pins = <0 1 2>;
-		nvidia,kbc-col-pins = <16 17>;
-		nvidia,wakeup-source;
-		linux,keymap = <MATRIX_KEY(0x00, 0x00, KEY_POWER)
-				MATRIX_KEY(0x01, 0x00, KEY_HOME)
-				MATRIX_KEY(0x01, 0x01, KEY_BACK)
-				MATRIX_KEY(0x02, 0x01, KEY_MENU)>;
-	};
-
-	pmc@7000e400 {
+	pmc {
 		nvidia,invert-interrupt;
-		nvidia,suspend-mode = <1>;
+		nvidia,suspend-mode = <2>;
 		nvidia,cpu-pwr-good-time = <2000>;
 		nvidia,cpu-pwr-off-time = <1000>;
 		nvidia,core-pwr-good-time = <0 3845>;
@@ -529,26 +508,18 @@
 
 	usb@c5000000 {
 		status = "okay";
-	};
-
-	usb-phy@c5000000 {
-		status = "okay";
-		vbus-supply = <&vbus1_reg>;
+		nvidia,vbus-gpio = <&tca6416 0 0>; /* GPIO_PMU0 */
 	};
 
 	usb@c5008000 {
 		status = "okay";
-	};
-
-	usb-phy@c5008000 {
-		status = "okay";
-		vbus-supply = <&vbus3_reg>;
+		nvidia,vbus-gpio = <&tca6416 1 0>; /* GPIO_PMU1 */
 	};
 
 	sdhci@c8000400 {
 		status = "okay";
-		cd-gpios = <&gpio TEGRA_GPIO(I, 5) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(V, 5) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 69 1>; /* gpio PI5 */
+		wp-gpios = <&gpio 173 0>; /* gpio PV5 */
 		bus-width = <8>;
 	};
 
@@ -563,7 +534,7 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -571,12 +542,25 @@
 		};
 	};
 
+	kbc {
+		status = "okay";
+		nvidia,debounce-delay-ms = <20>;
+		nvidia,repeat-delay-ms = <160>;
+		nvidia,kbc-row-pins = <0 1 2>;
+		nvidia,kbc-col-pins = <16 17>;
+		nvidia,wakeup-source;
+		linux,keymap = <0x00000074	/* KEY_POWER */
+				0x01000066	/* KEY_HOME */
+				0x0101009E	/* KEY_BACK */
+				0x0201008B>;	/* KEY_MENU */
+	};
+
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		usb0_vbus_reg: regulator@0 {
+		usb0_vbus_reg: regulator {
 			compatible = "regulator-fixed";
 			reg = <0>;
 			regulator-name = "usb0_vbus";
@@ -584,30 +568,6 @@
 			regulator-max-microvolt = <5000000>;
 			regulator-always-on;
 		};
-
-		vbus1_reg: regulator@2 {
-			compatible = "regulator-fixed";
-			reg = <2>;
-			regulator-name = "vbus1";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			enable-active-high;
-			gpio = <&tca6416 0 0>; /* GPIO_PMU0 */
-			regulator-always-on;
-			regulator-boot-on;
-		};
-
-		vbus3_reg: regulator@3 {
-			compatible = "regulator-fixed";
-			reg = <3>;
-			regulator-name = "vbus3";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			enable-active-high;
-			gpio = <&tca6416 1 0>; /* GPIO_PMU1 */
-			regulator-always-on;
-			regulator-boot-on;
-		};
 	};
 
 	sound {
@@ -624,9 +584,7 @@
 		nvidia,i2s-controller = <&tegra_i2s1>;
 		nvidia,audio-codec = <&codec>;
 
-		clocks = <&tegra_car TEGRA20_CLK_PLL_A>,
-			 <&tegra_car TEGRA20_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA20_CLK_CDEV1>;
+		clocks = <&tegra_car 112>, <&tegra_car 113>, <&tegra_car 94>;
 		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra20.dtsi b/arch/arm/boot/dts/tegra20.dtsi
--- a/arch/arm/boot/dts/tegra20.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra20.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,92 +1,76 @@
-#include <dt-bindings/clock/tegra20-car.h>
-#include <dt-bindings/gpio/tegra-gpio.h>
-#include <dt-bindings/pinctrl/pinctrl-tegra.h>
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	compatible = "nvidia,tegra20";
 	interrupt-parent = <&intc>;
 
-	host1x@50000000 {
+	aliases {
+		serial0 = &uarta;
+		serial1 = &uartb;
+		serial2 = &uartc;
+		serial3 = &uartd;
+		serial4 = &uarte;
+	};
+
+	host1x {
 		compatible = "nvidia,tegra20-host1x", "simple-bus";
 		reg = <0x50000000 0x00024000>;
-		interrupts = <GIC_SPI 65 IRQ_TYPE_LEVEL_HIGH>, /* syncpt */
-			     <GIC_SPI 67 IRQ_TYPE_LEVEL_HIGH>; /* general */
-		clocks = <&tegra_car TEGRA20_CLK_HOST1X>;
-		resets = <&tegra_car 28>;
-		reset-names = "host1x";
+		interrupts = <0 65 0x04   /* mpcore syncpt */
+			      0 67 0x04>; /* mpcore general */
+		clocks = <&tegra_car 28>;
 
 		#address-cells = <1>;
 		#size-cells = <1>;
 
 		ranges = <0x54000000 0x54000000 0x04000000>;
 
-		mpe@54040000 {
+		mpe {
 			compatible = "nvidia,tegra20-mpe";
 			reg = <0x54040000 0x00040000>;
-			interrupts = <GIC_SPI 68 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA20_CLK_MPE>;
-			resets = <&tegra_car 60>;
-			reset-names = "mpe";
+			interrupts = <0 68 0x04>;
+			clocks = <&tegra_car 60>;
 		};
 
-		vi@54080000 {
+		vi {
 			compatible = "nvidia,tegra20-vi";
 			reg = <0x54080000 0x00040000>;
-			interrupts = <GIC_SPI 69 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA20_CLK_VI>;
-			resets = <&tegra_car 20>;
-			reset-names = "vi";
+			interrupts = <0 69 0x04>;
+			clocks = <&tegra_car 100>;
 		};
 
-		epp@540c0000 {
+		epp {
 			compatible = "nvidia,tegra20-epp";
 			reg = <0x540c0000 0x00040000>;
-			interrupts = <GIC_SPI 70 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA20_CLK_EPP>;
-			resets = <&tegra_car 19>;
-			reset-names = "epp";
+			interrupts = <0 70 0x04>;
+			clocks = <&tegra_car 19>;
 		};
 
-		isp@54100000 {
+		isp {
 			compatible = "nvidia,tegra20-isp";
 			reg = <0x54100000 0x00040000>;
-			interrupts = <GIC_SPI 71 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA20_CLK_ISP>;
-			resets = <&tegra_car 23>;
-			reset-names = "isp";
+			interrupts = <0 71 0x04>;
+			clocks = <&tegra_car 23>;
 		};
 
-		gr2d@54140000 {
+		gr2d {
 			compatible = "nvidia,tegra20-gr2d";
 			reg = <0x54140000 0x00040000>;
-			interrupts = <GIC_SPI 72 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA20_CLK_GR2D>;
-			resets = <&tegra_car 21>;
-			reset-names = "2d";
+			interrupts = <0 72 0x04>;
+			clocks = <&tegra_car 21>;
 		};
 
-		gr3d@54180000 {
+		gr3d {
 			compatible = "nvidia,tegra20-gr3d";
 			reg = <0x54180000 0x00040000>;
-			clocks = <&tegra_car TEGRA20_CLK_GR3D>;
-			resets = <&tegra_car 24>;
-			reset-names = "3d";
+			clocks = <&tegra_car 24>;
 		};
 
 		dc@54200000 {
 			compatible = "nvidia,tegra20-dc";
 			reg = <0x54200000 0x00040000>;
-			interrupts = <GIC_SPI 73 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA20_CLK_DISP1>,
-				 <&tegra_car TEGRA20_CLK_PLL_P>;
-			clock-names = "dc", "parent";
-			resets = <&tegra_car 27>;
-			reset-names = "dc";
-
-			nvidia,head = <0>;
+			interrupts = <0 73 0x04>;
+			clocks = <&tegra_car 27>, <&tegra_car 121>;
+			clock-names = "disp1", "parent";
 
 			rgb {
 				status = "disabled";
@@ -96,59 +80,48 @@
 		dc@54240000 {
 			compatible = "nvidia,tegra20-dc";
 			reg = <0x54240000 0x00040000>;
-			interrupts = <GIC_SPI 74 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA20_CLK_DISP2>,
-				 <&tegra_car TEGRA20_CLK_PLL_P>;
-			clock-names = "dc", "parent";
-			resets = <&tegra_car 26>;
-			reset-names = "dc";
-
-			nvidia,head = <1>;
+			interrupts = <0 74 0x04>;
+			clocks = <&tegra_car 26>, <&tegra_car 121>;
+			clock-names = "disp2", "parent";
 
 			rgb {
 				status = "disabled";
 			};
 		};
 
-		hdmi@54280000 {
+		hdmi {
 			compatible = "nvidia,tegra20-hdmi";
 			reg = <0x54280000 0x00040000>;
-			interrupts = <GIC_SPI 75 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA20_CLK_HDMI>,
-				 <&tegra_car TEGRA20_CLK_PLL_D_OUT0>;
+			interrupts = <0 75 0x04>;
+			clocks = <&tegra_car 51>, <&tegra_car 117>;
 			clock-names = "hdmi", "parent";
-			resets = <&tegra_car 51>;
-			reset-names = "hdmi";
 			status = "disabled";
 		};
 
-		tvo@542c0000 {
+		tvo {
 			compatible = "nvidia,tegra20-tvo";
 			reg = <0x542c0000 0x00040000>;
-			interrupts = <GIC_SPI 76 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA20_CLK_TVO>;
+			interrupts = <0 76 0x04>;
+			clocks = <&tegra_car 102>;
 			status = "disabled";
 		};
 
-		dsi@54300000 {
+		dsi {
 			compatible = "nvidia,tegra20-dsi";
 			reg = <0x54300000 0x00040000>;
-			clocks = <&tegra_car TEGRA20_CLK_DSI>;
-			resets = <&tegra_car 48>;
-			reset-names = "dsi";
+			clocks = <&tegra_car 48>;
 			status = "disabled";
 		};
 	};
 
-	timer@50040600 {
+	timer@50004600 {
 		compatible = "arm,cortex-a9-twd-timer";
 		reg = <0x50040600 0x20>;
-		interrupts = <GIC_PPI 13
-			(GIC_CPU_MASK_SIMPLE(2) | IRQ_TYPE_LEVEL_HIGH)>;
-		clocks = <&tegra_car TEGRA20_CLK_TWD>;
+		interrupts = <1 13 0x304>;
+		clocks = <&tegra_car 132>;
 	};
 
-	intc: interrupt-controller@50041000 {
+	intc: interrupt-controller {
 		compatible = "arm,cortex-a9-gic";
 		reg = <0x50041000 0x1000
 		       0x50040100 0x0100>;
@@ -156,7 +129,7 @@
 		#interrupt-cells = <3>;
 	};
 
-	cache-controller@50043000 {
+	cache-controller {
 		compatible = "arm,pl310-cache";
 		reg = <0x50043000 0x1000>;
 		arm,data-latency = <5 5 2>;
@@ -168,78 +141,63 @@
 	timer@60005000 {
 		compatible = "nvidia,tegra20-timer";
 		reg = <0x60005000 0x60>;
-		interrupts = <GIC_SPI 0 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 1 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 41 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 42 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_TIMER>;
+		interrupts = <0 0 0x04
+			      0 1 0x04
+			      0 41 0x04
+			      0 42 0x04>;
+		clocks = <&tegra_car 5>;
 	};
 
-	tegra_car: clock@60006000 {
+	tegra_car: clock {
 		compatible = "nvidia,tegra20-car";
 		reg = <0x60006000 0x1000>;
 		#clock-cells = <1>;
-		#reset-cells = <1>;
-	};
-
-	flow-controller@60007000 {
-		compatible = "nvidia,tegra20-flowctrl";
-		reg = <0x60007000 0x1000>;
 	};
 
-	apbdma: dma@6000a000 {
+	apbdma: dma {
 		compatible = "nvidia,tegra20-apbdma";
 		reg = <0x6000a000 0x1200>;
-		interrupts = <GIC_SPI 104 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 105 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 106 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 107 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 108 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 109 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 110 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 111 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 112 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 113 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 115 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 116 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 117 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 118 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 119 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_APBDMA>;
-		resets = <&tegra_car 34>;
-		reset-names = "dma";
-		#dma-cells = <1>;
+		interrupts = <0 104 0x04
+			      0 105 0x04
+			      0 106 0x04
+			      0 107 0x04
+			      0 108 0x04
+			      0 109 0x04
+			      0 110 0x04
+			      0 111 0x04
+			      0 112 0x04
+			      0 113 0x04
+			      0 114 0x04
+			      0 115 0x04
+			      0 116 0x04
+			      0 117 0x04
+			      0 118 0x04
+			      0 119 0x04>;
+		clocks = <&tegra_car 34>;
 	};
 
-	ahb@6000c004 {
+	ahb {
 		compatible = "nvidia,tegra20-ahb";
 		reg = <0x6000c004 0x10c>; /* AHB Arbitration + Gizmo Controller */
 	};
 
-	gpio: gpio@6000d000 {
+	gpio: gpio {
 		compatible = "nvidia,tegra20-gpio";
 		reg = <0x6000d000 0x1000>;
-		interrupts = <GIC_SPI 32 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 33 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 34 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 35 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 55 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 87 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 89 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 32 0x04
+			      0 33 0x04
+			      0 34 0x04
+			      0 35 0x04
+			      0 55 0x04
+			      0 87 0x04
+			      0 89 0x04>;
 		#gpio-cells = <2>;
 		gpio-controller;
 		#interrupt-cells = <2>;
 		interrupt-controller;
 	};
 
-	apbmisc@70000800 {
-		compatible = "nvidia,tegra20-apbmisc";
-		reg = <0x70000800 0x64   /* Chip revision */
-		       0x70000008 0x04>; /* Strapping options */
-	};
-
-	pinmux: pinmux@70000014 {
+	pinmux: pinmux {
 		compatible = "nvidia,tegra20-pinmux";
 		reg = <0x70000014 0x10   /* Tri-state registers */
 		       0x70000080 0x20   /* Mux registers */
@@ -247,44 +205,35 @@
 		       0x70000868 0xa8>; /* Pad control registers */
 	};
 
-	das@70000c00 {
+	das {
 		compatible = "nvidia,tegra20-das";
 		reg = <0x70000c00 0x80>;
 	};
 
-	tegra_ac97: ac97@70002000 {
+	tegra_ac97: ac97 {
 		compatible = "nvidia,tegra20-ac97";
 		reg = <0x70002000 0x200>;
-		interrupts = <GIC_SPI 81 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_AC97>;
-		resets = <&tegra_car 3>;
-		reset-names = "ac97";
-		dmas = <&apbdma 12>, <&apbdma 12>;
-		dma-names = "rx", "tx";
+		interrupts = <0 81 0x04>;
+		nvidia,dma-request-selector = <&apbdma 12>;
+		clocks = <&tegra_car 3>;
 		status = "disabled";
 	};
 
 	tegra_i2s1: i2s@70002800 {
 		compatible = "nvidia,tegra20-i2s";
 		reg = <0x70002800 0x200>;
-		interrupts = <GIC_SPI 13 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_I2S1>;
-		resets = <&tegra_car 11>;
-		reset-names = "i2s";
-		dmas = <&apbdma 2>, <&apbdma 2>;
-		dma-names = "rx", "tx";
+		interrupts = <0 13 0x04>;
+		nvidia,dma-request-selector = <&apbdma 2>;
+		clocks = <&tegra_car 11>;
 		status = "disabled";
 	};
 
 	tegra_i2s2: i2s@70002a00 {
 		compatible = "nvidia,tegra20-i2s";
 		reg = <0x70002a00 0x200>;
-		interrupts = <GIC_SPI 3 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_I2S2>;
-		resets = <&tegra_car 18>;
-		reset-names = "i2s";
-		dmas = <&apbdma 1>, <&apbdma 1>;
-		dma-names = "rx", "tx";
+		interrupts = <0 3 0x04>;
+		nvidia,dma-request-selector = <&apbdma 1>;
+		clocks = <&tegra_car 18>;
 		status = "disabled";
 	};
 
@@ -299,12 +248,9 @@
 		compatible = "nvidia,tegra20-uart";
 		reg = <0x70006000 0x40>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 36 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_UARTA>;
-		resets = <&tegra_car 6>;
-		reset-names = "serial";
-		dmas = <&apbdma 8>, <&apbdma 8>;
-		dma-names = "rx", "tx";
+		interrupts = <0 36 0x04>;
+		nvidia,dma-request-selector = <&apbdma 8>;
+		clocks = <&tegra_car 6>;
 		status = "disabled";
 	};
 
@@ -312,12 +258,9 @@
 		compatible = "nvidia,tegra20-uart";
 		reg = <0x70006040 0x40>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 37 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_UARTB>;
-		resets = <&tegra_car 7>;
-		reset-names = "serial";
-		dmas = <&apbdma 9>, <&apbdma 9>;
-		dma-names = "rx", "tx";
+		interrupts = <0 37 0x04>;
+		nvidia,dma-request-selector = <&apbdma 9>;
+		clocks = <&tegra_car 96>;
 		status = "disabled";
 	};
 
@@ -325,12 +268,9 @@
 		compatible = "nvidia,tegra20-uart";
 		reg = <0x70006200 0x100>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 46 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_UARTC>;
-		resets = <&tegra_car 55>;
-		reset-names = "serial";
-		dmas = <&apbdma 10>, <&apbdma 10>;
-		dma-names = "rx", "tx";
+		interrupts = <0 46 0x04>;
+		nvidia,dma-request-selector = <&apbdma 10>;
+		clocks = <&tegra_car 55>;
 		status = "disabled";
 	};
 
@@ -338,12 +278,9 @@
 		compatible = "nvidia,tegra20-uart";
 		reg = <0x70006300 0x100>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 90 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_UARTD>;
-		resets = <&tegra_car 65>;
-		reset-names = "serial";
-		dmas = <&apbdma 19>, <&apbdma 19>;
-		dma-names = "rx", "tx";
+		interrupts = <0 90 0x04>;
+		nvidia,dma-request-selector = <&apbdma 19>;
+		clocks = <&tegra_car 65>;
 		status = "disabled";
 	};
 
@@ -351,180 +288,138 @@
 		compatible = "nvidia,tegra20-uart";
 		reg = <0x70006400 0x100>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 91 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_UARTE>;
-		resets = <&tegra_car 66>;
-		reset-names = "serial";
-		dmas = <&apbdma 20>, <&apbdma 20>;
-		dma-names = "rx", "tx";
+		interrupts = <0 91 0x04>;
+		nvidia,dma-request-selector = <&apbdma 20>;
+		clocks = <&tegra_car 66>;
 		status = "disabled";
 	};
 
-	pwm: pwm@7000a000 {
+	pwm: pwm {
 		compatible = "nvidia,tegra20-pwm";
 		reg = <0x7000a000 0x100>;
 		#pwm-cells = <2>;
-		clocks = <&tegra_car TEGRA20_CLK_PWM>;
-		resets = <&tegra_car 17>;
-		reset-names = "pwm";
+		clocks = <&tegra_car 17>;
 		status = "disabled";
 	};
 
-	rtc@7000e000 {
+	rtc {
 		compatible = "nvidia,tegra20-rtc";
 		reg = <0x7000e000 0x100>;
-		interrupts = <GIC_SPI 2 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_RTC>;
+		interrupts = <0 2 0x04>;
+		clocks = <&tegra_car 4>;
 	};
 
 	i2c@7000c000 {
 		compatible = "nvidia,tegra20-i2c";
 		reg = <0x7000c000 0x100>;
-		interrupts = <GIC_SPI 38 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 38 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA20_CLK_I2C1>,
-			 <&tegra_car TEGRA20_CLK_PLL_P_OUT3>;
+		clocks = <&tegra_car 12>, <&tegra_car 124>;
 		clock-names = "div-clk", "fast-clk";
-		resets = <&tegra_car 12>;
-		reset-names = "i2c";
-		dmas = <&apbdma 21>, <&apbdma 21>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	spi@7000c380 {
 		compatible = "nvidia,tegra20-sflash";
 		reg = <0x7000c380 0x80>;
-		interrupts = <GIC_SPI 39 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 39 0x04>;
+		nvidia,dma-request-selector = <&apbdma 11>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA20_CLK_SPI>;
-		resets = <&tegra_car 43>;
-		reset-names = "spi";
-		dmas = <&apbdma 11>, <&apbdma 11>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 43>;
 		status = "disabled";
 	};
 
 	i2c@7000c400 {
 		compatible = "nvidia,tegra20-i2c";
 		reg = <0x7000c400 0x100>;
-		interrupts = <GIC_SPI 84 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 84 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA20_CLK_I2C2>,
-			 <&tegra_car TEGRA20_CLK_PLL_P_OUT3>;
+		clocks = <&tegra_car 54>, <&tegra_car 124>;
 		clock-names = "div-clk", "fast-clk";
-		resets = <&tegra_car 54>;
-		reset-names = "i2c";
-		dmas = <&apbdma 22>, <&apbdma 22>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	i2c@7000c500 {
 		compatible = "nvidia,tegra20-i2c";
 		reg = <0x7000c500 0x100>;
-		interrupts = <GIC_SPI 92 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 92 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA20_CLK_I2C3>,
-			 <&tegra_car TEGRA20_CLK_PLL_P_OUT3>;
+		clocks = <&tegra_car 67>, <&tegra_car 124>;
 		clock-names = "div-clk", "fast-clk";
-		resets = <&tegra_car 67>;
-		reset-names = "i2c";
-		dmas = <&apbdma 23>, <&apbdma 23>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	i2c@7000d000 {
 		compatible = "nvidia,tegra20-i2c-dvc";
 		reg = <0x7000d000 0x200>;
-		interrupts = <GIC_SPI 53 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 53 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA20_CLK_DVC>,
-			 <&tegra_car TEGRA20_CLK_PLL_P_OUT3>;
+		clocks = <&tegra_car 47>, <&tegra_car 124>;
 		clock-names = "div-clk", "fast-clk";
-		resets = <&tegra_car 47>;
-		reset-names = "i2c";
-		dmas = <&apbdma 24>, <&apbdma 24>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	spi@7000d400 {
 		compatible = "nvidia,tegra20-slink";
 		reg = <0x7000d400 0x200>;
-		interrupts = <GIC_SPI 59 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 59 0x04>;
+		nvidia,dma-request-selector = <&apbdma 15>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA20_CLK_SBC1>;
-		resets = <&tegra_car 41>;
-		reset-names = "spi";
-		dmas = <&apbdma 15>, <&apbdma 15>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 41>;
 		status = "disabled";
 	};
 
 	spi@7000d600 {
 		compatible = "nvidia,tegra20-slink";
 		reg = <0x7000d600 0x200>;
-		interrupts = <GIC_SPI 82 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 82 0x04>;
+		nvidia,dma-request-selector = <&apbdma 16>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA20_CLK_SBC2>;
-		resets = <&tegra_car 44>;
-		reset-names = "spi";
-		dmas = <&apbdma 16>, <&apbdma 16>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 44>;
 		status = "disabled";
 	};
 
 	spi@7000d800 {
 		compatible = "nvidia,tegra20-slink";
 		reg = <0x7000d800 0x200>;
-		interrupts = <GIC_SPI 83 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 83 0x04>;
+		nvidia,dma-request-selector = <&apbdma 17>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA20_CLK_SBC3>;
-		resets = <&tegra_car 46>;
-		reset-names = "spi";
-		dmas = <&apbdma 17>, <&apbdma 17>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 46>;
 		status = "disabled";
 	};
 
 	spi@7000da00 {
 		compatible = "nvidia,tegra20-slink";
 		reg = <0x7000da00 0x200>;
-		interrupts = <GIC_SPI 93 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 93 0x04>;
+		nvidia,dma-request-selector = <&apbdma 18>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA20_CLK_SBC4>;
-		resets = <&tegra_car 68>;
-		reset-names = "spi";
-		dmas = <&apbdma 18>, <&apbdma 18>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 68>;
 		status = "disabled";
 	};
 
-	kbc@7000e200 {
+	kbc {
 		compatible = "nvidia,tegra20-kbc";
 		reg = <0x7000e200 0x100>;
-		interrupts = <GIC_SPI 85 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_KBC>;
-		resets = <&tegra_car 36>;
-		reset-names = "kbc";
+		interrupts = <0 85 0x04>;
+		clocks = <&tegra_car 36>;
 		status = "disabled";
 	};
 
-	pmc@7000e400 {
+	pmc {
 		compatible = "nvidia,tegra20-pmc";
 		reg = <0x7000e400 0x400>;
-		clocks = <&tegra_car TEGRA20_CLK_PCLK>, <&clk32k_in>;
+		clocks = <&tegra_car 110>, <&clk32k_in>;
 		clock-names = "pclk", "clk32k_in";
 	};
 
@@ -532,10 +427,10 @@
 		compatible = "nvidia,tegra20-mc";
 		reg = <0x7000f000 0x024
 		       0x7000f03c 0x3c4>;
-		interrupts = <GIC_SPI 77 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 77 0x04>;
 	};
 
-	iommu@7000f024 {
+	iommu {
 		compatible = "nvidia,tegra20-gart";
 		reg = <0x7000f024 0x00000018	/* controller registers */
 		       0x58000000 0x02000000>;	/* GART aperture */
@@ -548,209 +443,92 @@
 		#size-cells = <0>;
 	};
 
-	fuse@7000f800 {
-		compatible = "nvidia,tegra20-efuse";
-		reg = <0x7000F800 0x400>;
-		clocks = <&tegra_car TEGRA20_CLK_FUSE>;
-		clock-names = "fuse";
-		resets = <&tegra_car 39>;
-		reset-names = "fuse";
-	};
-
-	pcie-controller@80003000 {
-		compatible = "nvidia,tegra20-pcie";
-		device_type = "pci";
-		reg = <0x80003000 0x00000800   /* PADS registers */
-		       0x80003800 0x00000200   /* AFI registers */
-		       0x90000000 0x10000000>; /* configuration space */
-		reg-names = "pads", "afi", "cs";
-		interrupts = <GIC_SPI 98 IRQ_TYPE_LEVEL_HIGH   /* controller interrupt */
-			      GIC_SPI 99 IRQ_TYPE_LEVEL_HIGH>; /* MSI interrupt */
-		interrupt-names = "intr", "msi";
-
-		#interrupt-cells = <1>;
-		interrupt-map-mask = <0 0 0 0>;
-		interrupt-map = <0 0 0 0 &intc GIC_SPI 98 IRQ_TYPE_LEVEL_HIGH>;
-
-		bus-range = <0x00 0xff>;
-		#address-cells = <3>;
-		#size-cells = <2>;
-
-		ranges = <0x82000000 0 0x80000000 0x80000000 0 0x00001000   /* port 0 registers */
-			  0x82000000 0 0x80001000 0x80001000 0 0x00001000   /* port 1 registers */
-			  0x81000000 0 0          0x82000000 0 0x00010000   /* downstream I/O */
-			  0x82000000 0 0xa0000000 0xa0000000 0 0x08000000   /* non-prefetchable memory */
-			  0xc2000000 0 0xa8000000 0xa8000000 0 0x18000000>; /* prefetchable memory */
-
-		clocks = <&tegra_car TEGRA20_CLK_PEX>,
-			 <&tegra_car TEGRA20_CLK_AFI>,
-			 <&tegra_car TEGRA20_CLK_PLL_E>;
-		clock-names = "pex", "afi", "pll_e";
-		resets = <&tegra_car 70>,
-		         <&tegra_car 72>,
-		         <&tegra_car 74>;
-		reset-names = "pex", "afi", "pcie_x";
-		status = "disabled";
-
-		pci@1,0 {
-			device_type = "pci";
-			assigned-addresses = <0x82000800 0 0x80000000 0 0x1000>;
-			reg = <0x000800 0 0 0 0>;
-			status = "disabled";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-			ranges;
-
-			nvidia,num-lanes = <2>;
-		};
-
-		pci@2,0 {
-			device_type = "pci";
-			assigned-addresses = <0x82001000 0 0x80001000 0 0x1000>;
-			reg = <0x001000 0 0 0 0>;
-			status = "disabled";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-			ranges;
-
-			nvidia,num-lanes = <2>;
-		};
-	};
-
 	usb@c5000000 {
 		compatible = "nvidia,tegra20-ehci", "usb-ehci";
 		reg = <0xc5000000 0x4000>;
-		interrupts = <GIC_SPI 20 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 20 0x04>;
 		phy_type = "utmi";
 		nvidia,has-legacy-mode;
-		clocks = <&tegra_car TEGRA20_CLK_USBD>;
-		resets = <&tegra_car 22>;
-		reset-names = "usb";
+		clocks = <&tegra_car 22>;
 		nvidia,needs-double-reset;
 		nvidia,phy = <&phy1>;
 		status = "disabled";
 	};
 
-	phy1: usb-phy@c5000000 {
+	phy1: usb-phy@c5000400 {
 		compatible = "nvidia,tegra20-usb-phy";
-		reg = <0xc5000000 0x4000 0xc5000000 0x4000>;
+		reg = <0xc5000400 0x3c00>;
 		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA20_CLK_USBD>,
-			 <&tegra_car TEGRA20_CLK_PLL_U>,
-			 <&tegra_car TEGRA20_CLK_CLK_M>,
-			 <&tegra_car TEGRA20_CLK_USBD>;
-		clock-names = "reg", "pll_u", "timer", "utmi-pads";
-		resets = <&tegra_car 22>, <&tegra_car 22>;
-		reset-names = "usb", "utmi-pads";
 		nvidia,has-legacy-mode;
-		nvidia,hssync-start-delay = <9>;
-		nvidia,idle-wait-delay = <17>;
-		nvidia,elastic-limit = <16>;
-		nvidia,term-range-adj = <6>;
-		nvidia,xcvr-setup = <9>;
-		nvidia,xcvr-lsfslew = <1>;
-		nvidia,xcvr-lsrslew = <1>;
-		nvidia,has-utmi-pad-registers;
-		status = "disabled";
+		clocks = <&tegra_car 22>, <&tegra_car 127>;
+		clock-names = "phy", "pll_u";
 	};
 
 	usb@c5004000 {
 		compatible = "nvidia,tegra20-ehci", "usb-ehci";
 		reg = <0xc5004000 0x4000>;
-		interrupts = <GIC_SPI 21 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 21 0x04>;
 		phy_type = "ulpi";
-		clocks = <&tegra_car TEGRA20_CLK_USB2>;
-		resets = <&tegra_car 58>;
-		reset-names = "usb";
+		clocks = <&tegra_car 58>;
 		nvidia,phy = <&phy2>;
 		status = "disabled";
 	};
 
-	phy2: usb-phy@c5004000 {
+	phy2: usb-phy@c5004400 {
 		compatible = "nvidia,tegra20-usb-phy";
-		reg = <0xc5004000 0x4000>;
+		reg = <0xc5004400 0x3c00>;
 		phy_type = "ulpi";
-		clocks = <&tegra_car TEGRA20_CLK_USB2>,
-			 <&tegra_car TEGRA20_CLK_PLL_U>,
-			 <&tegra_car TEGRA20_CLK_CDEV2>;
-		clock-names = "reg", "pll_u", "ulpi-link";
-		resets = <&tegra_car 58>, <&tegra_car 22>;
-		reset-names = "usb", "utmi-pads";
-		status = "disabled";
+		clocks = <&tegra_car 93>, <&tegra_car 127>;
+		clock-names = "phy", "pll_u";
 	};
 
 	usb@c5008000 {
 		compatible = "nvidia,tegra20-ehci", "usb-ehci";
 		reg = <0xc5008000 0x4000>;
-		interrupts = <GIC_SPI 97 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 97 0x04>;
 		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA20_CLK_USB3>;
-		resets = <&tegra_car 59>;
-		reset-names = "usb";
+		clocks = <&tegra_car 59>;
 		nvidia,phy = <&phy3>;
 		status = "disabled";
 	};
 
-	phy3: usb-phy@c5008000 {
+	phy3: usb-phy@c5008400 {
 		compatible = "nvidia,tegra20-usb-phy";
-		reg = <0xc5008000 0x4000 0xc5000000 0x4000>;
+		reg = <0xc5008400 0x3c00>;
 		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA20_CLK_USB3>,
-			 <&tegra_car TEGRA20_CLK_PLL_U>,
-			 <&tegra_car TEGRA20_CLK_CLK_M>,
-			 <&tegra_car TEGRA20_CLK_USBD>;
-		clock-names = "reg", "pll_u", "timer", "utmi-pads";
-		resets = <&tegra_car 59>, <&tegra_car 22>;
-		reset-names = "usb", "utmi-pads";
-		nvidia,hssync-start-delay = <9>;
-		nvidia,idle-wait-delay = <17>;
-		nvidia,elastic-limit = <16>;
-		nvidia,term-range-adj = <6>;
-		nvidia,xcvr-setup = <9>;
-		nvidia,xcvr-lsfslew = <2>;
-		nvidia,xcvr-lsrslew = <2>;
-		status = "disabled";
+		clocks = <&tegra_car 22>, <&tegra_car 127>;
+		clock-names = "phy", "pll_u";
 	};
 
 	sdhci@c8000000 {
 		compatible = "nvidia,tegra20-sdhci";
 		reg = <0xc8000000 0x200>;
-		interrupts = <GIC_SPI 14 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_SDMMC1>;
-		resets = <&tegra_car 14>;
-		reset-names = "sdhci";
+		interrupts = <0 14 0x04>;
+		clocks = <&tegra_car 14>;
 		status = "disabled";
 	};
 
 	sdhci@c8000200 {
 		compatible = "nvidia,tegra20-sdhci";
 		reg = <0xc8000200 0x200>;
-		interrupts = <GIC_SPI 15 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_SDMMC2>;
-		resets = <&tegra_car 9>;
-		reset-names = "sdhci";
+		interrupts = <0 15 0x04>;
+		clocks = <&tegra_car 9>;
 		status = "disabled";
 	};
 
 	sdhci@c8000400 {
 		compatible = "nvidia,tegra20-sdhci";
 		reg = <0xc8000400 0x200>;
-		interrupts = <GIC_SPI 19 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_SDMMC3>;
-		resets = <&tegra_car 69>;
-		reset-names = "sdhci";
+		interrupts = <0 19 0x04>;
+		clocks = <&tegra_car 69>;
 		status = "disabled";
 	};
 
 	sdhci@c8000600 {
 		compatible = "nvidia,tegra20-sdhci";
 		reg = <0xc8000600 0x200>;
-		interrupts = <GIC_SPI 31 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA20_CLK_SDMMC4>;
-		resets = <&tegra_car 15>;
-		reset-names = "sdhci";
+		interrupts = <0 31 0x04>;
+		clocks = <&tegra_car 15>;
 		status = "disabled";
 	};
 
@@ -773,7 +551,7 @@
 
 	pmu {
 		compatible = "arm,cortex-a9-pmu";
-		interrupts = <GIC_SPI 56 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 57 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 56 0x04
+			      0 57 0x04>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra30-beaver.dts b/arch/arm/boot/dts/tegra30-beaver.dts
--- a/arch/arm/boot/dts/tegra30-beaver.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra30-beaver.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,63 +1,16 @@
 /dts-v1/;
 
-#include "tegra30.dtsi"
+/include/ "tegra30.dtsi"
 
 / {
 	model = "NVIDIA Tegra30 Beaver evaluation board";
 	compatible = "nvidia,beaver", "nvidia,tegra30";
 
-	aliases {
-		rtc0 = "/i2c@7000d000/tps65911@2d";
-		rtc1 = "/rtc@7000e000";
-		serial0 = &uarta;
-	};
-
 	memory {
-		reg = <0x80000000 0x7ff00000>;
-	};
-
-	pcie-controller@00003000 {
-		status = "okay";
-
-		avdd-pexa-supply = <&ldo1_reg>;
-		vdd-pexa-supply = <&ldo1_reg>;
-		avdd-pexb-supply = <&ldo1_reg>;
-		vdd-pexb-supply = <&ldo1_reg>;
-		avdd-pex-pll-supply = <&ldo1_reg>;
-		avdd-plle-supply = <&ldo1_reg>;
-		vddio-pex-ctl-supply = <&sys_3v3_reg>;
-		hvdd-pex-supply = <&sys_3v3_pexs_reg>;
-
-		pci@1,0 {
-			status = "okay";
-			nvidia,num-lanes = <2>;
-		};
-
-		pci@2,0 {
-			nvidia,num-lanes = <2>;
-		};
-
-		pci@3,0 {
-			status = "okay";
-			nvidia,num-lanes = <2>;
-		};
-	};
-
-	host1x@50000000 {
-		hdmi@54280000 {
-			status = "okay";
-
-			hdmi-supply = <&vdd_5v0_hdmi>;
-			vdd-supply = <&sys_3v3_reg>;
-			pll-supply = <&vio_reg>;
-
-			nvidia,hpd-gpio =
-				<&gpio TEGRA_GPIO(N, 7) GPIO_ACTIVE_HIGH>;
-			nvidia,ddc-i2c-bus = <&hdmiddc>;
-		};
+		reg = <0x80000000 0x80000000>;
 	};
 
-	pinmux@70000868 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -65,8 +18,8 @@
 			sdmmc1_clk_pz0 {
 				nvidia,pins = "sdmmc1_clk_pz0";
 				nvidia,function = "sdmmc1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			sdmmc1_cmd_pz1 {
 				nvidia,pins =	"sdmmc1_cmd_pz1",
@@ -75,14 +28,14 @@
 						"sdmmc1_dat2_py5",
 						"sdmmc1_dat3_py4";
 				nvidia,function = "sdmmc1";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			sdmmc3_clk_pa6 {
 				nvidia,pins = "sdmmc3_clk_pa6";
 				nvidia,function = "sdmmc3";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			sdmmc3_cmd_pa7 {
 				nvidia,pins =	"sdmmc3_cmd_pa7",
@@ -91,15 +44,15 @@
 						"sdmmc3_dat2_pb5",
 						"sdmmc3_dat3_pb4";
 				nvidia,function = "sdmmc3";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			sdmmc4_clk_pcc4 {
 				nvidia,pins =	"sdmmc4_clk_pcc4",
 						"sdmmc4_rst_n_pcc3";
 				nvidia,function = "sdmmc4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			sdmmc4_dat0_paa0 {
 				nvidia,pins =	"sdmmc4_dat0_paa0",
@@ -111,8 +64,8 @@
 						"sdmmc4_dat6_paa6",
 						"sdmmc4_dat7_paa7";
 				nvidia,function = "sdmmc4";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			dap2_fs_pa2 {
 				nvidia,pins =	"dap2_fs_pa2",
@@ -120,27 +73,18 @@
 						"dap2_din_pa4",
 						"dap2_dout_pa5";
 				nvidia,function = "i2s1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
-			};
-			pex_l1_prsnt_n_pdd4 {
-				nvidia,pins =	"pex_l1_prsnt_n_pdd4",
-						"pex_l1_clkreq_n_pdd6";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			sdio3 {
 				nvidia,pins = "drive_sdio3";
-				nvidia,high-speed-mode = <TEGRA_PIN_DISABLE>;
-				nvidia,schmitt = <TEGRA_PIN_DISABLE>;
+				nvidia,high-speed-mode = <0>;
+				nvidia,schmitt = <0>;
 				nvidia,pull-down-strength = <46>;
 				nvidia,pull-up-strength = <42>;
 				nvidia,slew-rate-rising = <1>;
 				nvidia,slew-rate-falling = <1>;
 			};
-			gpv {
-				nvidia,pins = "drive_gpv";
-				nvidia,pull-up-strength = <16>;
-			};
 		};
 	};
 
@@ -163,7 +107,7 @@
 		clock-frequency = <100000>;
 	};
 
-	hdmiddc: i2c@7000c700 {
+	i2c@7000c700 {
 		status = "okay";
 		clock-frequency = <100000>;
 	};
@@ -172,20 +116,24 @@
 		status = "okay";
 		clock-frequency = <100000>;
 
-		rt5640: rt5640@1c {
-			compatible = "realtek,rt5640";
-			reg = <0x1c>;
-			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(X, 3) GPIO_ACTIVE_HIGH>;
-			realtek,ldo1-en-gpios =
-				<&gpio TEGRA_GPIO(X, 2) GPIO_ACTIVE_HIGH>;
+		tps62361 {
+			compatible = "ti,tps62361";
+			reg = <0x60>;
+
+			regulator-name = "tps62361-vout";
+			regulator-min-microvolt = <500000>;
+			regulator-max-microvolt = <1500000>;
+			regulator-boot-on;
+			regulator-always-on;
+			ti,vsel0-state-high;
+			ti,vsel1-state-high;
 		};
 
 		pmic: tps65911@2d {
 			compatible = "ti,tps65911";
 			reg = <0x2d>;
 
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 			#interrupt-cells = <2>;
 			interrupt-controller;
 
@@ -284,19 +232,6 @@
 				};
 			};
 		};
-
-		tps62361@60 {
-			compatible = "ti,tps62361";
-			reg = <0x60>;
-
-			regulator-name = "tps62361-vout";
-			regulator-min-microvolt = <500000>;
-			regulator-max-microvolt = <1500000>;
-			regulator-boot-on;
-			regulator-always-on;
-			ti,vsel0-state-high;
-			ti,vsel1-state-high;
-		};
 	};
 
 	spi@7000da00 {
@@ -309,10 +244,16 @@
 		};
 	};
 
-	pmc@7000e400 {
+	ahub {
+		i2s@70080400 {
+			status = "okay";
+		};
+	};
+
+	pmc {
 		status = "okay";
 		nvidia,invert-interrupt;
-		nvidia,suspend-mode = <1>;
+		nvidia,suspend-mode = <2>;
 		nvidia,cpu-pwr-good-time = <2000>;
 		nvidia,cpu-pwr-off-time = <200>;
 		nvidia,core-pwr-good-time = <3845 3845>;
@@ -321,17 +262,11 @@
 		nvidia,sys-clock-req-active-high;
 	};
 
-	ahub@70080000 {
-		i2s@70080400 {
-			status = "okay";
-		};
-	};
-
 	sdhci@78000000 {
 		status = "okay";
-		cd-gpios = <&gpio TEGRA_GPIO(I, 5) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(T, 3) GPIO_ACTIVE_HIGH>;
-		power-gpios = <&gpio TEGRA_GPIO(D, 7) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 69 1>; /* gpio PI5 */
+		wp-gpios = <&gpio 155 0>; /* gpio PT3 */
+		power-gpios = <&gpio 31 0>; /* gpio PD7 */
 		bus-width = <4>;
 	};
 
@@ -341,30 +276,12 @@
 		non-removable;
 	};
 
-	usb@7d004000 {
-		status = "okay";
-	};
-
-	phy2: usb-phy@7d004000 {
-		vbus-supply = <&sys_3v3_reg>;
-		status = "okay";
-	};
-
-	usb@7d008000 {
-		status = "okay";
-	};
-
-	usb-phy@7d008000 {
-		vbus-supply = <&usb3_vbus_reg>;
-		status = "okay";
-	};
-
 	clocks {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -372,19 +289,6 @@
 		};
 	};
 
-	gpio-leds {
-		compatible = "gpio-leds";
-
-		gpled1 {
-			label = "LED1"; /* CR5A1 (blue) */
-			gpios = <&gpio TEGRA_GPIO(L, 1) GPIO_ACTIVE_HIGH>;
-		};
-		gpled2 {
-			label = "LED2"; /* CR4A2 (green) */
-			gpios = <&gpio TEGRA_GPIO(L, 0) GPIO_ACTIVE_HIGH>;
-		};
-	};
-
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -408,7 +312,7 @@
 			regulator-boot-on;
 			regulator-always-on;
 			enable-active-high;
-			gpio = <&pmic 0 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 0 0>; /* PMIC TPS65911 GPIO0 */
 		};
 
 		ddr_reg: regulator@2 {
@@ -420,7 +324,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&pmic 7 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 7 0>; /* PMIC TPS65911 GPIO7 */
 			vin-supply = <&vdd_5v_in_reg>;
 		};
 
@@ -433,7 +337,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(D, 6) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 30 0>; /* gpio PD6 */
 			vin-supply = <&vdd_5v_in_reg>;
 		};
 
@@ -444,7 +348,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(DD, 6) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 68 0>; /* GPIO PI4 */
 			gpio-open-drain;
 			vin-supply = <&vdd_5v_in_reg>;
 		};
@@ -456,7 +360,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(DD, 4) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 63 0>; /* GPIO PH7 */
 			gpio-open-drain;
 			vin-supply = <&vdd_5v_in_reg>;
 		};
@@ -470,7 +374,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&pmic 6 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 6 0>; /* PMIC TPS65911 GPIO6 */
 			vin-supply = <&vdd_5v_in_reg>;
 		};
 
@@ -483,41 +387,8 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(L, 7) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 95 0>; /* gpio PL7 */
 			vin-supply = <&sys_3v3_reg>;
 		};
-
-		vdd_5v0_hdmi: regulator@8 {
-			compatible = "regulator-fixed";
-			reg = <8>;
-			regulator-name = "+VDD_5V_HDMI";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			regulator-always-on;
-			regulator-boot-on;
-			vin-supply = <&sys_3v3_reg>;
-		};
-	};
-
-	sound {
-		compatible = "nvidia,tegra-audio-rt5640-beaver",
-			     "nvidia,tegra-audio-rt5640";
-		nvidia,model = "NVIDIA Tegra Beaver";
-
-		nvidia,audio-routing =
-			"Headphones", "HPOR",
-			"Headphones", "HPOL",
-			"Mic Jack", "MICBIAS1",
-			"IN2P", "Mic Jack";
-
-		nvidia,i2s-controller = <&tegra_i2s1>;
-		nvidia,audio-codec = <&rt5640>;
-
-		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(W, 2) GPIO_ACTIVE_HIGH>;
-
-		clocks = <&tegra_car TEGRA30_CLK_PLL_A>,
-			 <&tegra_car TEGRA30_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA30_CLK_EXTERN1>;
-		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra30-cardhu-a02.dts b/arch/arm/boot/dts/tegra30-cardhu-a02.dts
--- a/arch/arm/boot/dts/tegra30-cardhu-a02.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra30-cardhu-a02.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "tegra30-cardhu.dtsi"
+/include/ "tegra30-cardhu.dtsi"
 
 /* This dts file support the cardhu A02 version of board */
 
@@ -8,13 +8,6 @@
 	model = "NVIDIA Tegra30 Cardhu A02 evaluation board";
 	compatible = "nvidia,cardhu-a02", "nvidia,cardhu", "nvidia,tegra30";
 
-	sdhci@78000400 {
-		status = "okay";
-		power-gpios = <&gpio TEGRA_GPIO(D, 4) GPIO_ACTIVE_HIGH>;
-		bus-width = <4>;
-		keep-power-in-suspend;
-	};
-
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -29,7 +22,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&pmic 6 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 6 0>;
 		};
 
 		sys_3v3_reg: regulator@101 {
@@ -41,7 +34,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&pmic 7 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 7 0>;
 		};
 
 		usb1_vbus_reg: regulator@102 {
@@ -51,7 +44,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(I, 4) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 68 0>; /* GPIO PI4 */
 			gpio-open-drain;
 			vin-supply = <&vdd_5v0_reg>;
 		};
@@ -63,7 +56,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(H, 7) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 63 0>; /* GPIO PH7 */
 			gpio-open-drain;
 			vin-supply = <&vdd_5v0_reg>;
 		};
@@ -75,7 +68,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&pmic 2 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 2 0>;
 		};
 
 		vdd_bl_reg: regulator@105 {
@@ -87,8 +80,15 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(K, 3) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 83 0>; /* GPIO PK3 */
 		};
 	};
+
+	sdhci@78000400 {
+		status = "okay";
+		power-gpios = <&gpio 28 0>; /* gpio PD4 */
+		bus-width = <4>;
+		keep-power-in-suspend;
+	};
 };
 
diff -urNp a/arch/arm/boot/dts/tegra30-cardhu-a04.dts b/arch/arm/boot/dts/tegra30-cardhu-a04.dts
--- a/arch/arm/boot/dts/tegra30-cardhu-a04.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra30-cardhu-a04.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,6 +1,6 @@
 /dts-v1/;
 
-#include "tegra30-cardhu.dtsi"
+/include/ "tegra30-cardhu.dtsi"
 
 /* This dts file support the cardhu A04 and later versions of board */
 
@@ -8,13 +8,6 @@
 	model = "NVIDIA Tegra30 Cardhu A04 (A05, A06, A07) evaluation board";
 	compatible = "nvidia,cardhu-a04", "nvidia,cardhu", "nvidia,tegra30";
 
-	sdhci@78000400 {
-		status = "okay";
-		power-gpios = <&gpio TEGRA_GPIO(D, 3) GPIO_ACTIVE_HIGH>;
-		bus-width = <4>;
-		keep-power-in-suspend;
-	};
-
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -29,7 +22,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&pmic 7 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 7 0>;
 		};
 
 		sys_3v3_reg: regulator@101 {
@@ -41,7 +34,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&pmic 6 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 6 0>;
 		};
 
 		usb1_vbus_reg: regulator@102 {
@@ -51,7 +44,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(DD, 6) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 238 0>; /* GPIO PDD6 */
 			gpio-open-drain;
 			vin-supply = <&vdd_5v0_reg>;
 		};
@@ -63,7 +56,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(DD, 4) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 236 0>; /* GPIO PDD4 */
 			gpio-open-drain;
 			vin-supply = <&vdd_5v0_reg>;
 		};
@@ -75,7 +68,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&pmic 8 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 8 0>;
 		};
 
 		vdd_bl_reg: regulator@105 {
@@ -87,7 +80,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(DD, 2) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 234 0>; /* GPIO PDD2 */
 		};
 
 		vdd_bl2_reg: regulator@106 {
@@ -99,7 +92,14 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(DD, 0) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 232 0>; /* GPIO PDD0 */
 		};
 	};
+
+	sdhci@78000400 {
+		status = "okay";
+		power-gpios = <&gpio 27 0>; /* gpio PD3 */
+		bus-width = <4>;
+		keep-power-in-suspend;
+	};
 };
diff -urNp a/arch/arm/boot/dts/tegra30-cardhu.dtsi b/arch/arm/boot/dts/tegra30-cardhu.dtsi
--- a/arch/arm/boot/dts/tegra30-cardhu.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra30-cardhu.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,4 +1,4 @@
-#include "tegra30.dtsi"
+/include/ "tegra30.dtsi"
 
 /**
  * This file contains common DT entry for all fab version of Cardhu.
@@ -27,53 +27,11 @@
 	model = "NVIDIA Tegra30 Cardhu evaluation board";
 	compatible = "nvidia,cardhu", "nvidia,tegra30";
 
-	aliases {
-		rtc0 = "/i2c@7000d000/tps65911@2d";
-		rtc1 = "/rtc@7000e000";
-		serial0 = &uarta;
-		serial1 = &uartc;
-	};
-
 	memory {
 		reg = <0x80000000 0x40000000>;
 	};
 
-	pcie-controller@00003000 {
-		status = "okay";
-
-		/* AVDD_PEXA and VDD_PEXA inputs are grounded on Cardhu. */
-		avdd-pexb-supply = <&ldo1_reg>;
-		vdd-pexb-supply = <&ldo1_reg>;
-		avdd-pex-pll-supply = <&ldo1_reg>;
-		hvdd-pex-supply = <&pex_hvdd_3v3_reg>;
-		vddio-pex-ctl-supply = <&sys_3v3_reg>;
-		avdd-plle-supply = <&ldo2_reg>;
-
-		pci@1,0 {
-			nvidia,num-lanes = <4>;
-		};
-
-		pci@2,0 {
-			nvidia,num-lanes = <1>;
-		};
-
-		pci@3,0 {
-			status = "okay";
-			nvidia,num-lanes = <1>;
-		};
-	};
-
-	host1x@50000000 {
-		dc@54200000 {
-			rgb {
-				status = "okay";
-
-				nvidia,panel = <&panel>;
-			};
-		};
-	};
-
-	pinmux@70000868 {
+	pinmux {
 		pinctrl-names = "default";
 		pinctrl-0 = <&state_default>;
 
@@ -81,8 +39,8 @@
 			sdmmc1_clk_pz0 {
 				nvidia,pins = "sdmmc1_clk_pz0";
 				nvidia,function = "sdmmc1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			sdmmc1_cmd_pz1 {
 				nvidia,pins =	"sdmmc1_cmd_pz1",
@@ -91,14 +49,14 @@
 						"sdmmc1_dat2_py5",
 						"sdmmc1_dat3_py4";
 				nvidia,function = "sdmmc1";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			sdmmc3_clk_pa6 {
 				nvidia,pins = "sdmmc3_clk_pa6";
 				nvidia,function = "sdmmc3";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			sdmmc3_cmd_pa7 {
 				nvidia,pins =	"sdmmc3_cmd_pa7",
@@ -107,15 +65,15 @@
 						"sdmmc3_dat2_pb5",
 						"sdmmc3_dat3_pb4";
 				nvidia,function = "sdmmc3";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			sdmmc4_clk_pcc4 {
 				nvidia,pins =	"sdmmc4_clk_pcc4",
 						"sdmmc4_rst_n_pcc3";
 				nvidia,function = "sdmmc4";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			sdmmc4_dat0_paa0 {
 				nvidia,pins =	"sdmmc4_dat0_paa0",
@@ -127,8 +85,8 @@
 						"sdmmc4_dat6_paa6",
 						"sdmmc4_dat7_paa7";
 				nvidia,function = "sdmmc4";
-				nvidia,pull = <TEGRA_PIN_PULL_UP>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <2>;
+				nvidia,tristate = <0>;
 			};
 			dap2_fs_pa2 {
 				nvidia,pins =	"dap2_fs_pa2",
@@ -136,17 +94,17 @@
 						"dap2_din_pa4",
 						"dap2_dout_pa5";
 				nvidia,function = "i2s1";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 			sdio3 {
 				nvidia,pins = "drive_sdio3";
-				nvidia,high-speed-mode = <TEGRA_PIN_DISABLE>;
-				nvidia,schmitt = <TEGRA_PIN_DISABLE>;
+				nvidia,high-speed-mode = <0>;
+				nvidia,schmitt = <0>;
 				nvidia,pull-down-strength = <46>;
 				nvidia,pull-up-strength = <42>;
-				nvidia,slew-rate-rising = <TEGRA_PIN_SLEW_RATE_FAST>;
-				nvidia,slew-rate-falling = <TEGRA_PIN_SLEW_RATE_FAST>;
+				nvidia,slew-rate-rising = <1>;
+				nvidia,slew-rate-falling = <1>;
 			};
 			uart3_txd_pw6 {
 				nvidia,pins =	"uart3_txd_pw6",
@@ -154,8 +112,8 @@
 						"uart3_rts_n_pc0",
 						"uart3_rxd_pw7";
 				nvidia,function = "uartc";
-				nvidia,pull = <TEGRA_PIN_PULL_NONE>;
-				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,pull = <0>;
+				nvidia,tristate = <0>;
 			};
 		};
 	};
@@ -169,11 +127,7 @@
 		status = "okay";
 	};
 
-	pwm@7000a000 {
-		status = "okay";
-	};
-
-	panelddc: i2c@7000c000 {
+	i2c@7000c000 {
 		status = "okay";
 		clock-frequency = <100000>;
 	};
@@ -192,14 +146,7 @@
 			compatible = "isil,isl29028";
 			reg = <0x44>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(L, 0) IRQ_TYPE_LEVEL_HIGH>;
-		};
-
-		i2cmux@70 {
-			compatible = "nxp,pca9546";
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <0x70>;
+			interrupts = <88 0x04>; /*gpio PL0 */
 		};
 	};
 
@@ -216,7 +163,7 @@
 			compatible = "wlf,wm8903";
 			reg = <0x1a>;
 			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(W, 3) IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <179 0x04>; /* gpio PW3 */
 
 			gpio-controller;
 			#gpio-cells = <2>;
@@ -226,11 +173,24 @@
 			gpio-cfg = <0xffffffff 0xffffffff 0 0xffffffff 0xffffffff>;
 		};
 
+		tps62361 {
+			compatible = "ti,tps62361";
+			reg = <0x60>;
+
+			regulator-name = "tps62361-vout";
+			regulator-min-microvolt = <500000>;
+			regulator-max-microvolt = <1500000>;
+			regulator-boot-on;
+			regulator-always-on;
+			ti,vsel0-state-high;
+			ti,vsel1-state-high;
+		};
+
 		pmic: tps65911@2d {
 			compatible = "ti,tps65911";
 			reg = <0x2d>;
 
-			interrupts = <GIC_SPI 86 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <0 86 0x4>;
 			#interrupt-cells = <2>;
 			interrupt-controller;
 
@@ -326,27 +286,6 @@
 				};
 			};
 		};
-
-		temperature-sensor@4c {
-			compatible = "onnn,nct1008";
-			reg = <0x4c>;
-			vcc-supply = <&sys_3v3_reg>;
-			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(CC, 2) IRQ_TYPE_LEVEL_LOW>;
-		};
-
-		tps62361@60 {
-			compatible = "ti,tps62361";
-			reg = <0x60>;
-
-			regulator-name = "tps62361-vout";
-			regulator-min-microvolt = <500000>;
-			regulator-max-microvolt = <1500000>;
-			regulator-boot-on;
-			regulator-always-on;
-			ti,vsel0-state-high;
-			ti,vsel1-state-high;
-		};
 	};
 
 	spi@7000da00 {
@@ -359,10 +298,16 @@
 		};
 	};
 
-	pmc@7000e400 {
+	ahub {
+		i2s@70080400 {
+			status = "okay";
+		};
+	};
+
+	pmc {
 		status = "okay";
 		nvidia,invert-interrupt;
-		nvidia,suspend-mode = <1>;
+		nvidia,suspend-mode = <2>;
 		nvidia,cpu-pwr-good-time = <2000>;
 		nvidia,cpu-pwr-off-time = <200>;
 		nvidia,core-pwr-good-time = <3845 3845>;
@@ -371,17 +316,11 @@
 		nvidia,sys-clock-req-active-high;
 	};
 
-	ahub@70080000 {
-		i2s@70080400 {
-			status = "okay";
-		};
-	};
-
 	sdhci@78000000 {
 		status = "okay";
-		cd-gpios = <&gpio TEGRA_GPIO(I, 5) GPIO_ACTIVE_LOW>;
-		wp-gpios = <&gpio TEGRA_GPIO(T, 3) GPIO_ACTIVE_HIGH>;
-		power-gpios = <&gpio TEGRA_GPIO(D, 7) GPIO_ACTIVE_HIGH>;
+		cd-gpios = <&gpio 69 1>; /* gpio PI5 */
+		wp-gpios = <&gpio 155 0>; /* gpio PT3 */
+		power-gpios = <&gpio 31 0>; /* gpio PD7 */
 		bus-width = <4>;
 	};
 
@@ -391,32 +330,12 @@
 		non-removable;
 	};
 
-	usb@7d008000 {
-		status = "okay";
-	};
-
-	usb-phy@7d008000 {
-		vbus-supply = <&usb3_vbus_reg>;
-		status = "okay";
-	};
-
-	backlight: backlight {
-		compatible = "pwm-backlight";
-
-		enable-gpios = <&gpio TEGRA_GPIO(H, 2) GPIO_ACTIVE_HIGH>;
-		power-supply = <&vdd_bl_reg>;
-		pwms = <&pwm 0 5000000>;
-
-		brightness-levels = <0 4 8 16 32 64 128 255>;
-		default-brightness-level = <6>;
-	};
-
 	clocks {
 		compatible = "simple-bus";
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		clk32k_in: clock@0 {
+		clk32k_in: clock {
 			compatible = "fixed-clock";
 			reg=<0>;
 			#clock-cells = <0>;
@@ -424,16 +343,6 @@
 		};
 	};
 
-	panel: panel {
-		compatible = "chunghwa,claa101wb01", "simple-panel";
-		ddc-i2c-bus = <&panelddc>;
-
-		power-supply = <&vdd_pnl1_reg>;
-		enable-gpios = <&gpio TEGRA_GPIO(L, 2) GPIO_ACTIVE_HIGH>;
-
-		backlight = <&backlight>;
-	};
-
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -455,7 +364,7 @@
 			regulator-min-microvolt = <1800000>;
 			regulator-max-microvolt = <1800000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(BB, 4) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 220 0>; /* gpio PBB4 */
 			vin-supply = <&vio_reg>;
 		};
 
@@ -468,7 +377,7 @@
 			regulator-boot-on;
 			regulator-always-on;
 			enable-active-high;
-			gpio = <&pmic 0 GPIO_ACTIVE_HIGH>;
+			gpio = <&pmic 0 0>; /* PMIC TPS65911 GPIO0 */
 		};
 
 		emmc_3v3_reg: regulator@3 {
@@ -480,7 +389,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(D, 1) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 25 0>; /* gpio PD1 */
 			vin-supply = <&sys_3v3_reg>;
 		};
 
@@ -491,7 +400,7 @@
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(D, 6) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 30 0>; /* gpio PD6 */
 		};
 
 		pex_hvdd_3v3_reg: regulator@5 {
@@ -501,7 +410,7 @@
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(L, 7) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 95 0>; /* gpio PL7 */
 			vin-supply = <&sys_3v3_reg>;
 		};
 
@@ -512,7 +421,7 @@
 			regulator-min-microvolt = <2800000>;
 			regulator-max-microvolt = <2800000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(R, 6) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 142 0>; /* gpio PR6 */
 			vin-supply = <&sys_3v3_reg>;
 		};
 
@@ -523,7 +432,7 @@
 			regulator-min-microvolt = <2800000>;
 			regulator-max-microvolt = <2800000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(R, 7) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 143 0>; /* gpio PR7 */
 			vin-supply = <&sys_3v3_reg>;
 		};
 
@@ -534,7 +443,7 @@
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(S, 0) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 144 0>; /* gpio PS0 */
 			vin-supply = <&sys_3v3_reg>;
 		};
 
@@ -547,7 +456,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(D, 0) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 24 0>; /* gpio PD0 */
 			vin-supply = <&sys_3v3_reg>;
 		};
 
@@ -558,7 +467,7 @@
 			regulator-min-microvolt = <3300000>;
 			regulator-max-microvolt = <3300000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(L, 6) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 94 0>; /* gpio PL6 */
 			vin-supply = <&sys_3v3_reg>;
 		};
 
@@ -571,7 +480,7 @@
 			regulator-always-on;
 			regulator-boot-on;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(L, 4) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 92 0>; /* gpio PL4 */
 			vin-supply = <&sys_3v3_reg>;
 		};
 
@@ -582,7 +491,7 @@
 			regulator-min-microvolt = <5000000>;
 			regulator-max-microvolt = <5000000>;
 			enable-active-high;
-			gpio = <&gpio TEGRA_GPIO(T, 0) GPIO_ACTIVE_HIGH>;
+			gpio = <&gpio 152 0>; /* GPIO PT0 */
 			gpio-open-drain;
 			vin-supply = <&vdd_5v0_reg>;
 		};
@@ -606,13 +515,10 @@
 		nvidia,i2s-controller = <&tegra_i2s1>;
 		nvidia,audio-codec = <&wm8903>;
 
-		nvidia,spkr-en-gpios = <&wm8903 2 GPIO_ACTIVE_HIGH>;
-		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(W, 2)
-			GPIO_ACTIVE_HIGH>;
-
-		clocks = <&tegra_car TEGRA30_CLK_PLL_A>,
-			 <&tegra_car TEGRA30_CLK_PLL_A_OUT0>,
-			 <&tegra_car TEGRA30_CLK_EXTERN1>;
+		nvidia,spkr-en-gpios = <&wm8903 2 0>;
+		nvidia,hp-det-gpios = <&gpio 178 0>; /* gpio PW2 */
+
+		clocks = <&tegra_car 184>, <&tegra_car 185>, <&tegra_car 120>;
 		clock-names = "pll_a", "pll_a_out0", "mclk";
 	};
 };
diff -urNp a/arch/arm/boot/dts/tegra30.dtsi b/arch/arm/boot/dts/tegra30.dtsi
--- a/arch/arm/boot/dts/tegra30.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tegra30.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,175 +1,77 @@
-#include <dt-bindings/clock/tegra30-car.h>
-#include <dt-bindings/gpio/tegra-gpio.h>
-#include <dt-bindings/memory/tegra30-mc.h>
-#include <dt-bindings/pinctrl/pinctrl-tegra.h>
-#include <dt-bindings/interrupt-controller/arm-gic.h>
-
-#include "skeleton.dtsi"
+/include/ "skeleton.dtsi"
 
 / {
 	compatible = "nvidia,tegra30";
 	interrupt-parent = <&intc>;
 
-	pcie-controller@00003000 {
-		compatible = "nvidia,tegra30-pcie";
-		device_type = "pci";
-		reg = <0x00003000 0x00000800   /* PADS registers */
-		       0x00003800 0x00000200   /* AFI registers */
-		       0x10000000 0x10000000>; /* configuration space */
-		reg-names = "pads", "afi", "cs";
-		interrupts = <GIC_SPI 98 IRQ_TYPE_LEVEL_HIGH   /* controller interrupt */
-			      GIC_SPI 99 IRQ_TYPE_LEVEL_HIGH>; /* MSI interrupt */
-		interrupt-names = "intr", "msi";
-
-		#interrupt-cells = <1>;
-		interrupt-map-mask = <0 0 0 0>;
-		interrupt-map = <0 0 0 0 &intc GIC_SPI 98 IRQ_TYPE_LEVEL_HIGH>;
-
-		bus-range = <0x00 0xff>;
-		#address-cells = <3>;
-		#size-cells = <2>;
-
-		ranges = <0x82000000 0 0x00000000 0x00000000 0 0x00001000   /* port 0 configuration space */
-			  0x82000000 0 0x00001000 0x00001000 0 0x00001000   /* port 1 configuration space */
-			  0x82000000 0 0x00004000 0x00004000 0 0x00001000   /* port 2 configuration space */
-			  0x81000000 0 0          0x02000000 0 0x00010000   /* downstream I/O */
-			  0x82000000 0 0x20000000 0x20000000 0 0x08000000   /* non-prefetchable memory */
-			  0xc2000000 0 0x28000000 0x28000000 0 0x18000000>; /* prefetchable memory */
-
-		clocks = <&tegra_car TEGRA30_CLK_PCIE>,
-			 <&tegra_car TEGRA30_CLK_AFI>,
-			 <&tegra_car TEGRA30_CLK_PLL_E>,
-			 <&tegra_car TEGRA30_CLK_CML0>;
-		clock-names = "pex", "afi", "pll_e", "cml";
-		resets = <&tegra_car 70>,
-		         <&tegra_car 72>,
-		         <&tegra_car 74>;
-		reset-names = "pex", "afi", "pcie_x";
-		status = "disabled";
-
-		pci@1,0 {
-			device_type = "pci";
-			assigned-addresses = <0x82000800 0 0x00000000 0 0x1000>;
-			reg = <0x000800 0 0 0 0>;
-			status = "disabled";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-			ranges;
-
-			nvidia,num-lanes = <2>;
-		};
-
-		pci@2,0 {
-			device_type = "pci";
-			assigned-addresses = <0x82001000 0 0x00001000 0 0x1000>;
-			reg = <0x001000 0 0 0 0>;
-			status = "disabled";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-			ranges;
-
-			nvidia,num-lanes = <2>;
-		};
-
-		pci@3,0 {
-			device_type = "pci";
-			assigned-addresses = <0x82001800 0 0x00004000 0 0x1000>;
-			reg = <0x001800 0 0 0 0>;
-			status = "disabled";
-
-			#address-cells = <3>;
-			#size-cells = <2>;
-			ranges;
-
-			nvidia,num-lanes = <2>;
-		};
+	aliases {
+		serial0 = &uarta;
+		serial1 = &uartb;
+		serial2 = &uartc;
+		serial3 = &uartd;
+		serial4 = &uarte;
 	};
 
-	host1x@50000000 {
+	host1x {
 		compatible = "nvidia,tegra30-host1x", "simple-bus";
 		reg = <0x50000000 0x00024000>;
-		interrupts = <GIC_SPI 65 IRQ_TYPE_LEVEL_HIGH>, /* syncpt */
-			     <GIC_SPI 67 IRQ_TYPE_LEVEL_HIGH>; /* general */
-		clocks = <&tegra_car TEGRA30_CLK_HOST1X>;
-		resets = <&tegra_car 28>;
-		reset-names = "host1x";
+		interrupts = <0 65 0x04   /* mpcore syncpt */
+			      0 67 0x04>; /* mpcore general */
+		clocks = <&tegra_car 28>;
 
 		#address-cells = <1>;
 		#size-cells = <1>;
 
 		ranges = <0x54000000 0x54000000 0x04000000>;
 
-		mpe@54040000 {
+		mpe {
 			compatible = "nvidia,tegra30-mpe";
 			reg = <0x54040000 0x00040000>;
-			interrupts = <GIC_SPI 68 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA30_CLK_MPE>;
-			resets = <&tegra_car 60>;
-			reset-names = "mpe";
+			interrupts = <0 68 0x04>;
+			clocks = <&tegra_car 60>;
 		};
 
-		vi@54080000 {
+		vi {
 			compatible = "nvidia,tegra30-vi";
 			reg = <0x54080000 0x00040000>;
-			interrupts = <GIC_SPI 69 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA30_CLK_VI>;
-			resets = <&tegra_car 20>;
-			reset-names = "vi";
+			interrupts = <0 69 0x04>;
+			clocks = <&tegra_car 164>;
 		};
 
-		epp@540c0000 {
+		epp {
 			compatible = "nvidia,tegra30-epp";
 			reg = <0x540c0000 0x00040000>;
-			interrupts = <GIC_SPI 70 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA30_CLK_EPP>;
-			resets = <&tegra_car 19>;
-			reset-names = "epp";
+			interrupts = <0 70 0x04>;
+			clocks = <&tegra_car 19>;
 		};
 
-		isp@54100000 {
+		isp {
 			compatible = "nvidia,tegra30-isp";
 			reg = <0x54100000 0x00040000>;
-			interrupts = <GIC_SPI 71 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA30_CLK_ISP>;
-			resets = <&tegra_car 23>;
-			reset-names = "isp";
+			interrupts = <0 71 0x04>;
+			clocks = <&tegra_car 23>;
 		};
 
-		gr2d@54140000 {
+		gr2d {
 			compatible = "nvidia,tegra30-gr2d";
 			reg = <0x54140000 0x00040000>;
-			interrupts = <GIC_SPI 72 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA30_CLK_GR2D>;
-			resets = <&tegra_car 21>;
-			reset-names = "2d";
+			interrupts = <0 72 0x04>;
+			clocks = <&tegra_car 21>;
 		};
 
-		gr3d@54180000 {
+		gr3d {
 			compatible = "nvidia,tegra30-gr3d";
 			reg = <0x54180000 0x00040000>;
-			clocks = <&tegra_car TEGRA30_CLK_GR3D
-				  &tegra_car TEGRA30_CLK_GR3D2>;
+			clocks = <&tegra_car 24 &tegra_car 98>;
 			clock-names = "3d", "3d2";
-			resets = <&tegra_car 24>,
-			         <&tegra_car 98>;
-			reset-names = "3d", "3d2";
 		};
 
 		dc@54200000 {
-			compatible = "nvidia,tegra30-dc", "nvidia,tegra20-dc";
+			compatible = "nvidia,tegra30-dc";
 			reg = <0x54200000 0x00040000>;
-			interrupts = <GIC_SPI 73 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA30_CLK_DISP1>,
-				 <&tegra_car TEGRA30_CLK_PLL_P>;
-			clock-names = "dc", "parent";
-			resets = <&tegra_car 27>;
-			reset-names = "dc";
-
-			iommus = <&mc TEGRA_SWGROUP_DC>;
-
-			nvidia,head = <0>;
+			interrupts = <0 73 0x04>;
+			clocks = <&tegra_car 27>, <&tegra_car 179>;
+			clock-names = "disp1", "parent";
 
 			rgb {
 				status = "disabled";
@@ -179,61 +81,48 @@
 		dc@54240000 {
 			compatible = "nvidia,tegra30-dc";
 			reg = <0x54240000 0x00040000>;
-			interrupts = <GIC_SPI 74 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA30_CLK_DISP2>,
-				 <&tegra_car TEGRA30_CLK_PLL_P>;
-			clock-names = "dc", "parent";
-			resets = <&tegra_car 26>;
-			reset-names = "dc";
-
-			iommus = <&mc TEGRA_SWGROUP_DCB>;
-
-			nvidia,head = <1>;
+			interrupts = <0 74 0x04>;
+			clocks = <&tegra_car 26>, <&tegra_car 179>;
+			clock-names = "disp2", "parent";
 
 			rgb {
 				status = "disabled";
 			};
 		};
 
-		hdmi@54280000 {
+		hdmi {
 			compatible = "nvidia,tegra30-hdmi";
 			reg = <0x54280000 0x00040000>;
-			interrupts = <GIC_SPI 75 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA30_CLK_HDMI>,
-				 <&tegra_car TEGRA30_CLK_PLL_D2_OUT0>;
+			interrupts = <0 75 0x04>;
+			clocks = <&tegra_car 51>, <&tegra_car 189>;
 			clock-names = "hdmi", "parent";
-			resets = <&tegra_car 51>;
-			reset-names = "hdmi";
 			status = "disabled";
 		};
 
-		tvo@542c0000 {
+		tvo {
 			compatible = "nvidia,tegra30-tvo";
 			reg = <0x542c0000 0x00040000>;
-			interrupts = <GIC_SPI 76 IRQ_TYPE_LEVEL_HIGH>;
-			clocks = <&tegra_car TEGRA30_CLK_TVO>;
+			interrupts = <0 76 0x04>;
+			clocks = <&tegra_car 169>;
 			status = "disabled";
 		};
 
-		dsi@54300000 {
+		dsi {
 			compatible = "nvidia,tegra30-dsi";
 			reg = <0x54300000 0x00040000>;
-			clocks = <&tegra_car TEGRA30_CLK_DSIA>;
-			resets = <&tegra_car 48>;
-			reset-names = "dsi";
+			clocks = <&tegra_car 48>;
 			status = "disabled";
 		};
 	};
 
-	timer@50040600 {
+	timer@50004600 {
 		compatible = "arm,cortex-a9-twd-timer";
 		reg = <0x50040600 0x20>;
-		interrupts = <GIC_PPI 13
-			(GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_HIGH)>;
-		clocks = <&tegra_car TEGRA30_CLK_TWD>;
+		interrupts = <1 13 0xf04>;
+		clocks = <&tegra_car 214>;
 	};
 
-	intc: interrupt-controller@50041000 {
+	intc: interrupt-controller {
 		compatible = "arm,cortex-a9-gic";
 		reg = <0x50041000 0x1000
 		       0x50040100 0x0100>;
@@ -241,7 +130,7 @@
 		#interrupt-cells = <3>;
 	};
 
-	cache-controller@50043000 {
+	cache-controller {
 		compatible = "arm,pl310-cache";
 		reg = <0x50043000 0x1000>;
 		arm,data-latency = <6 6 2>;
@@ -253,97 +142,82 @@
 	timer@60005000 {
 		compatible = "nvidia,tegra30-timer", "nvidia,tegra20-timer";
 		reg = <0x60005000 0x400>;
-		interrupts = <GIC_SPI 0 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 1 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 41 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 42 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 121 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 122 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_TIMER>;
+		interrupts = <0 0 0x04
+			      0 1 0x04
+			      0 41 0x04
+			      0 42 0x04
+			      0 121 0x04
+			      0 122 0x04>;
+		clocks = <&tegra_car 5>;
 	};
 
-	tegra_car: clock@60006000 {
+	tegra_car: clock {
 		compatible = "nvidia,tegra30-car";
 		reg = <0x60006000 0x1000>;
 		#clock-cells = <1>;
-		#reset-cells = <1>;
-	};
-
-	flow-controller@60007000 {
-		compatible = "nvidia,tegra30-flowctrl";
-		reg = <0x60007000 0x1000>;
 	};
 
-	apbdma: dma@6000a000 {
+	apbdma: dma {
 		compatible = "nvidia,tegra30-apbdma", "nvidia,tegra20-apbdma";
 		reg = <0x6000a000 0x1400>;
-		interrupts = <GIC_SPI 104 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 105 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 106 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 107 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 108 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 109 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 110 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 111 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 112 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 113 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 115 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 116 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 117 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 118 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 119 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 128 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 129 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 130 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 131 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 132 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 133 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 134 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 135 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 136 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 137 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 138 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 139 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 140 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 141 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 142 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 143 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_APBDMA>;
-		resets = <&tegra_car 34>;
-		reset-names = "dma";
-		#dma-cells = <1>;
+		interrupts = <0 104 0x04
+			      0 105 0x04
+			      0 106 0x04
+			      0 107 0x04
+			      0 108 0x04
+			      0 109 0x04
+			      0 110 0x04
+			      0 111 0x04
+			      0 112 0x04
+			      0 113 0x04
+			      0 114 0x04
+			      0 115 0x04
+			      0 116 0x04
+			      0 117 0x04
+			      0 118 0x04
+			      0 119 0x04
+			      0 128 0x04
+			      0 129 0x04
+			      0 130 0x04
+			      0 131 0x04
+			      0 132 0x04
+			      0 133 0x04
+			      0 134 0x04
+			      0 135 0x04
+			      0 136 0x04
+			      0 137 0x04
+			      0 138 0x04
+			      0 139 0x04
+			      0 140 0x04
+			      0 141 0x04
+			      0 142 0x04
+			      0 143 0x04>;
+		clocks = <&tegra_car 34>;
 	};
 
-	ahb: ahb@6000c004 {
+	ahb: ahb {
 		compatible = "nvidia,tegra30-ahb";
 		reg = <0x6000c004 0x14c>; /* AHB Arbitration + Gizmo Controller */
 	};
 
-	gpio: gpio@6000d000 {
+	gpio: gpio {
 		compatible = "nvidia,tegra30-gpio";
 		reg = <0x6000d000 0x1000>;
-		interrupts = <GIC_SPI 32 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 33 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 34 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 35 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 55 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 87 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 89 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 125 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 32 0x04
+			      0 33 0x04
+			      0 34 0x04
+			      0 35 0x04
+			      0 55 0x04
+			      0 87 0x04
+			      0 89 0x04
+			      0 125 0x04>;
 		#gpio-cells = <2>;
 		gpio-controller;
 		#interrupt-cells = <2>;
 		interrupt-controller;
 	};
 
-	apbmisc@70000800 {
-		compatible = "nvidia,tegra30-apbmisc", "nvidia,tegra20-apbmisc";
-		reg = <0x70000800 0x64   /* Chip revision */
-		       0x70000008 0x04>; /* Strapping options */
-	};
-
-	pinmux: pinmux@70000868 {
+	pinmux: pinmux {
 		compatible = "nvidia,tegra30-pinmux";
 		reg = <0x70000868 0xd4    /* Pad control registers */
 		       0x70003000 0x3e4>; /* Mux registers */
@@ -361,12 +235,9 @@
 		compatible = "nvidia,tegra30-uart", "nvidia,tegra20-uart";
 		reg = <0x70006000 0x40>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 36 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_UARTA>;
-		resets = <&tegra_car 6>;
-		reset-names = "serial";
-		dmas = <&apbdma 8>, <&apbdma 8>;
-		dma-names = "rx", "tx";
+		interrupts = <0 36 0x04>;
+		nvidia,dma-request-selector = <&apbdma 8>;
+		clocks = <&tegra_car 6>;
 		status = "disabled";
 	};
 
@@ -374,12 +245,9 @@
 		compatible = "nvidia,tegra30-uart", "nvidia,tegra20-uart";
 		reg = <0x70006040 0x40>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 37 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_UARTB>;
-		resets = <&tegra_car 7>;
-		reset-names = "serial";
-		dmas = <&apbdma 9>, <&apbdma 9>;
-		dma-names = "rx", "tx";
+		interrupts = <0 37 0x04>;
+		nvidia,dma-request-selector = <&apbdma 9>;
+		clocks = <&tegra_car 160>;
 		status = "disabled";
 	};
 
@@ -387,12 +255,9 @@
 		compatible = "nvidia,tegra30-uart", "nvidia,tegra20-uart";
 		reg = <0x70006200 0x100>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 46 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_UARTC>;
-		resets = <&tegra_car 55>;
-		reset-names = "serial";
-		dmas = <&apbdma 10>, <&apbdma 10>;
-		dma-names = "rx", "tx";
+		interrupts = <0 46 0x04>;
+		nvidia,dma-request-selector = <&apbdma 10>;
+		clocks = <&tegra_car 55>;
 		status = "disabled";
 	};
 
@@ -400,12 +265,9 @@
 		compatible = "nvidia,tegra30-uart", "nvidia,tegra20-uart";
 		reg = <0x70006300 0x100>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 90 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_UARTD>;
-		resets = <&tegra_car 65>;
-		reset-names = "serial";
-		dmas = <&apbdma 19>, <&apbdma 19>;
-		dma-names = "rx", "tx";
+		interrupts = <0 90 0x04>;
+		nvidia,dma-request-selector = <&apbdma 19>;
+		clocks = <&tegra_car 65>;
 		status = "disabled";
 	};
 
@@ -413,261 +275,195 @@
 		compatible = "nvidia,tegra30-uart", "nvidia,tegra20-uart";
 		reg = <0x70006400 0x100>;
 		reg-shift = <2>;
-		interrupts = <GIC_SPI 91 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_UARTE>;
-		resets = <&tegra_car 66>;
-		reset-names = "serial";
-		dmas = <&apbdma 20>, <&apbdma 20>;
-		dma-names = "rx", "tx";
+		interrupts = <0 91 0x04>;
+		nvidia,dma-request-selector = <&apbdma 20>;
+		clocks = <&tegra_car 66>;
 		status = "disabled";
 	};
 
-	pwm: pwm@7000a000 {
+	pwm: pwm {
 		compatible = "nvidia,tegra30-pwm", "nvidia,tegra20-pwm";
 		reg = <0x7000a000 0x100>;
 		#pwm-cells = <2>;
-		clocks = <&tegra_car TEGRA30_CLK_PWM>;
-		resets = <&tegra_car 17>;
-		reset-names = "pwm";
+		clocks = <&tegra_car 17>;
 		status = "disabled";
 	};
 
-	rtc@7000e000 {
+	rtc {
 		compatible = "nvidia,tegra30-rtc", "nvidia,tegra20-rtc";
 		reg = <0x7000e000 0x100>;
-		interrupts = <GIC_SPI 2 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_RTC>;
+		interrupts = <0 2 0x04>;
+		clocks = <&tegra_car 4>;
 	};
 
 	i2c@7000c000 {
 		compatible =  "nvidia,tegra30-i2c", "nvidia,tegra20-i2c";
 		reg = <0x7000c000 0x100>;
-		interrupts = <GIC_SPI 38 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 38 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_I2C1>,
-			 <&tegra_car TEGRA30_CLK_PLL_P_OUT3>;
+		clocks = <&tegra_car 12>, <&tegra_car 182>;
 		clock-names = "div-clk", "fast-clk";
-		resets = <&tegra_car 12>;
-		reset-names = "i2c";
-		dmas = <&apbdma 21>, <&apbdma 21>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	i2c@7000c400 {
 		compatible = "nvidia,tegra30-i2c", "nvidia,tegra20-i2c";
 		reg = <0x7000c400 0x100>;
-		interrupts = <GIC_SPI 84 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 84 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_I2C2>,
-			 <&tegra_car TEGRA30_CLK_PLL_P_OUT3>;
+		clocks = <&tegra_car 54>, <&tegra_car 182>;
 		clock-names = "div-clk", "fast-clk";
-		resets = <&tegra_car 54>;
-		reset-names = "i2c";
-		dmas = <&apbdma 22>, <&apbdma 22>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	i2c@7000c500 {
 		compatible = "nvidia,tegra30-i2c", "nvidia,tegra20-i2c";
 		reg = <0x7000c500 0x100>;
-		interrupts = <GIC_SPI 92 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 92 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_I2C3>,
-			 <&tegra_car TEGRA30_CLK_PLL_P_OUT3>;
+		clocks = <&tegra_car 67>, <&tegra_car 182>;
 		clock-names = "div-clk", "fast-clk";
-		resets = <&tegra_car 67>;
-		reset-names = "i2c";
-		dmas = <&apbdma 23>, <&apbdma 23>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	i2c@7000c700 {
 		compatible = "nvidia,tegra30-i2c", "nvidia,tegra20-i2c";
 		reg = <0x7000c700 0x100>;
-		interrupts = <GIC_SPI 120 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 120 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_I2C4>,
-			 <&tegra_car TEGRA30_CLK_PLL_P_OUT3>;
-		resets = <&tegra_car 103>;
-		reset-names = "i2c";
+		clocks = <&tegra_car 103>, <&tegra_car 182>;
 		clock-names = "div-clk", "fast-clk";
-		dmas = <&apbdma 26>, <&apbdma 26>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	i2c@7000d000 {
 		compatible = "nvidia,tegra30-i2c", "nvidia,tegra20-i2c";
 		reg = <0x7000d000 0x100>;
-		interrupts = <GIC_SPI 53 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 53 0x04>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_I2C5>,
-			 <&tegra_car TEGRA30_CLK_PLL_P_OUT3>;
+		clocks = <&tegra_car 47>, <&tegra_car 182>;
 		clock-names = "div-clk", "fast-clk";
-		resets = <&tegra_car 47>;
-		reset-names = "i2c";
-		dmas = <&apbdma 24>, <&apbdma 24>;
-		dma-names = "rx", "tx";
 		status = "disabled";
 	};
 
 	spi@7000d400 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000d400 0x200>;
-		interrupts = <GIC_SPI 59 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 59 0x04>;
+		nvidia,dma-request-selector = <&apbdma 15>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_SBC1>;
-		resets = <&tegra_car 41>;
-		reset-names = "spi";
-		dmas = <&apbdma 15>, <&apbdma 15>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 41>;
 		status = "disabled";
 	};
 
 	spi@7000d600 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000d600 0x200>;
-		interrupts = <GIC_SPI 82 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 82 0x04>;
+		nvidia,dma-request-selector = <&apbdma 16>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_SBC2>;
-		resets = <&tegra_car 44>;
-		reset-names = "spi";
-		dmas = <&apbdma 16>, <&apbdma 16>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 44>;
 		status = "disabled";
 	};
 
 	spi@7000d800 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000d800 0x200>;
-		interrupts = <GIC_SPI 83 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 83 0x04>;
+		nvidia,dma-request-selector = <&apbdma 17>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_SBC3>;
-		resets = <&tegra_car 46>;
-		reset-names = "spi";
-		dmas = <&apbdma 17>, <&apbdma 17>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 46>;
 		status = "disabled";
 	};
 
 	spi@7000da00 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000da00 0x200>;
-		interrupts = <GIC_SPI 93 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 93 0x04>;
+		nvidia,dma-request-selector = <&apbdma 18>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_SBC4>;
-		resets = <&tegra_car 68>;
-		reset-names = "spi";
-		dmas = <&apbdma 18>, <&apbdma 18>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 68>;
 		status = "disabled";
 	};
 
 	spi@7000dc00 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000dc00 0x200>;
-		interrupts = <GIC_SPI 94 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 94 0x04>;
+		nvidia,dma-request-selector = <&apbdma 27>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_SBC5>;
-		resets = <&tegra_car 104>;
-		reset-names = "spi";
-		dmas = <&apbdma 27>, <&apbdma 27>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 104>;
 		status = "disabled";
 	};
 
 	spi@7000de00 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000de00 0x200>;
-		interrupts = <GIC_SPI 79 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 79 0x04>;
+		nvidia,dma-request-selector = <&apbdma 28>;
 		#address-cells = <1>;
 		#size-cells = <0>;
-		clocks = <&tegra_car TEGRA30_CLK_SBC6>;
-		resets = <&tegra_car 106>;
-		reset-names = "spi";
-		dmas = <&apbdma 28>, <&apbdma 28>;
-		dma-names = "rx", "tx";
+		clocks = <&tegra_car 105>;
 		status = "disabled";
 	};
 
-	kbc@7000e200 {
+	kbc {
 		compatible = "nvidia,tegra30-kbc", "nvidia,tegra20-kbc";
 		reg = <0x7000e200 0x100>;
-		interrupts = <GIC_SPI 85 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_KBC>;
-		resets = <&tegra_car 36>;
-		reset-names = "kbc";
+		interrupts = <0 85 0x04>;
+		clocks = <&tegra_car 36>;
 		status = "disabled";
 	};
 
-	pmc@7000e400 {
+	pmc {
 		compatible = "nvidia,tegra30-pmc";
 		reg = <0x7000e400 0x400>;
-		clocks = <&tegra_car TEGRA30_CLK_PCLK>, <&clk32k_in>;
+		clocks = <&tegra_car 218>, <&clk32k_in>;
 		clock-names = "pclk", "clk32k_in";
 	};
 
-	mc: memory-controller@7000f000 {
+	memory-controller {
 		compatible = "nvidia,tegra30-mc";
-		reg = <0x7000f000 0x400>;
-		clocks = <&tegra_car TEGRA30_CLK_MC>;
-		clock-names = "mc";
-
-		interrupts = <GIC_SPI 77 IRQ_TYPE_LEVEL_HIGH>;
-
-		#iommu-cells = <1>;
-	};
-
-	fuse@7000f800 {
-		compatible = "nvidia,tegra30-efuse";
-		reg = <0x7000f800 0x400>;
-		clocks = <&tegra_car TEGRA30_CLK_FUSE>;
-		clock-names = "fuse";
-		resets = <&tegra_car 39>;
-		reset-names = "fuse";
+		reg = <0x7000f000 0x010
+		       0x7000f03c 0x1b4
+		       0x7000f200 0x028
+		       0x7000f284 0x17c>;
+		interrupts = <0 77 0x04>;
+	};
+
+	iommu {
+		compatible = "nvidia,tegra30-smmu";
+		reg = <0x7000f010 0x02c
+		       0x7000f1f0 0x010
+		       0x7000f228 0x05c>;
+		nvidia,#asids = <4>;		/* # of ASIDs */
+		dma-window = <0 0x40000000>;	/* IOVA start & length */
+		nvidia,ahb = <&ahb>;
 	};
 
-	ahub@70080000 {
+	ahub {
 		compatible = "nvidia,tegra30-ahub";
 		reg = <0x70080000 0x200
 		       0x70080200 0x100>;
-		interrupts = <GIC_SPI 103 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_D_AUDIO>,
-			 <&tegra_car TEGRA30_CLK_APBIF>;
-		clock-names = "d_audio", "apbif";
-		resets = <&tegra_car 106>, /* d_audio */
-			 <&tegra_car 107>, /* apbif */
-			 <&tegra_car 30>,  /* i2s0 */
-			 <&tegra_car 11>,  /* i2s1 */
-			 <&tegra_car 18>,  /* i2s2 */
-			 <&tegra_car 101>, /* i2s3 */
-			 <&tegra_car 102>, /* i2s4 */
-			 <&tegra_car 108>, /* dam0 */
-			 <&tegra_car 109>, /* dam1 */
-			 <&tegra_car 110>, /* dam2 */
-			 <&tegra_car 10>;  /* spdif */
-		reset-names = "d_audio", "apbif", "i2s0", "i2s1", "i2s2",
+		interrupts = <0 103 0x04>;
+		nvidia,dma-request-selector = <&apbdma 1>;
+		clocks = <&tegra_car 106>, <&tegra_car 107>, <&tegra_car 30>,
+			 <&tegra_car 11>, <&tegra_car 18>, <&tegra_car 101>,
+			 <&tegra_car 102>, <&tegra_car 108>, <&tegra_car 109>,
+			 <&tegra_car 110>, <&tegra_car 162>;
+		clock-names = "d_audio", "apbif", "i2s0", "i2s1", "i2s2",
 			      "i2s3", "i2s4", "dam0", "dam1", "dam2",
-			      "spdif";
-		dmas = <&apbdma 1>, <&apbdma 1>,
-		       <&apbdma 2>, <&apbdma 2>,
-		       <&apbdma 3>, <&apbdma 3>,
-		       <&apbdma 4>, <&apbdma 4>;
-		dma-names = "rx0", "tx0", "rx1", "tx1", "rx2", "tx2",
-			    "rx3", "tx3";
+			      "spdif_in";
 		ranges;
 		#address-cells = <1>;
 		#size-cells = <1>;
@@ -676,9 +472,7 @@
 			compatible = "nvidia,tegra30-i2s";
 			reg = <0x70080300 0x100>;
 			nvidia,ahub-cif-ids = <4 4>;
-			clocks = <&tegra_car TEGRA30_CLK_I2S0>;
-			resets = <&tegra_car 30>;
-			reset-names = "i2s";
+			clocks = <&tegra_car 30>;
 			status = "disabled";
 		};
 
@@ -686,9 +480,7 @@
 			compatible = "nvidia,tegra30-i2s";
 			reg = <0x70080400 0x100>;
 			nvidia,ahub-cif-ids = <5 5>;
-			clocks = <&tegra_car TEGRA30_CLK_I2S1>;
-			resets = <&tegra_car 11>;
-			reset-names = "i2s";
+			clocks = <&tegra_car 11>;
 			status = "disabled";
 		};
 
@@ -696,9 +488,7 @@
 			compatible = "nvidia,tegra30-i2s";
 			reg = <0x70080500 0x100>;
 			nvidia,ahub-cif-ids = <6 6>;
-			clocks = <&tegra_car TEGRA30_CLK_I2S2>;
-			resets = <&tegra_car 18>;
-			reset-names = "i2s";
+			clocks = <&tegra_car 18>;
 			status = "disabled";
 		};
 
@@ -706,9 +496,7 @@
 			compatible = "nvidia,tegra30-i2s";
 			reg = <0x70080600 0x100>;
 			nvidia,ahub-cif-ids = <7 7>;
-			clocks = <&tegra_car TEGRA30_CLK_I2S3>;
-			resets = <&tegra_car 101>;
-			reset-names = "i2s";
+			clocks = <&tegra_car 101>;
 			status = "disabled";
 		};
 
@@ -716,9 +504,7 @@
 			compatible = "nvidia,tegra30-i2s";
 			reg = <0x70080700 0x100>;
 			nvidia,ahub-cif-ids = <8 8>;
-			clocks = <&tegra_car TEGRA30_CLK_I2S4>;
-			resets = <&tegra_car 102>;
-			reset-names = "i2s";
+			clocks = <&tegra_car 102>;
 			status = "disabled";
 		};
 	};
@@ -726,150 +512,32 @@
 	sdhci@78000000 {
 		compatible = "nvidia,tegra30-sdhci", "nvidia,tegra20-sdhci";
 		reg = <0x78000000 0x200>;
-		interrupts = <GIC_SPI 14 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_SDMMC1>;
-		resets = <&tegra_car 14>;
-		reset-names = "sdhci";
+		interrupts = <0 14 0x04>;
+		clocks = <&tegra_car 14>;
 		status = "disabled";
 	};
 
 	sdhci@78000200 {
 		compatible = "nvidia,tegra30-sdhci", "nvidia,tegra20-sdhci";
 		reg = <0x78000200 0x200>;
-		interrupts = <GIC_SPI 15 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_SDMMC2>;
-		resets = <&tegra_car 9>;
-		reset-names = "sdhci";
+		interrupts = <0 15 0x04>;
+		clocks = <&tegra_car 9>;
 		status = "disabled";
 	};
 
 	sdhci@78000400 {
 		compatible = "nvidia,tegra30-sdhci", "nvidia,tegra20-sdhci";
 		reg = <0x78000400 0x200>;
-		interrupts = <GIC_SPI 19 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_SDMMC3>;
-		resets = <&tegra_car 69>;
-		reset-names = "sdhci";
+		interrupts = <0 19 0x04>;
+		clocks = <&tegra_car 69>;
 		status = "disabled";
 	};
 
 	sdhci@78000600 {
 		compatible = "nvidia,tegra30-sdhci", "nvidia,tegra20-sdhci";
 		reg = <0x78000600 0x200>;
-		interrupts = <GIC_SPI 31 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&tegra_car TEGRA30_CLK_SDMMC4>;
-		resets = <&tegra_car 15>;
-		reset-names = "sdhci";
-		status = "disabled";
-	};
-
-	usb@7d000000 {
-		compatible = "nvidia,tegra30-ehci", "usb-ehci";
-		reg = <0x7d000000 0x4000>;
-		interrupts = <GIC_SPI 20 IRQ_TYPE_LEVEL_HIGH>;
-		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA30_CLK_USBD>;
-		resets = <&tegra_car 22>;
-		reset-names = "usb";
-		nvidia,needs-double-reset;
-		nvidia,phy = <&phy1>;
-		status = "disabled";
-	};
-
-	phy1: usb-phy@7d000000 {
-		compatible = "nvidia,tegra30-usb-phy";
-		reg = <0x7d000000 0x4000 0x7d000000 0x4000>;
-		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA30_CLK_USBD>,
-			 <&tegra_car TEGRA30_CLK_PLL_U>,
-			 <&tegra_car TEGRA30_CLK_USBD>;
-		clock-names = "reg", "pll_u", "utmi-pads";
-		resets = <&tegra_car 22>, <&tegra_car 22>;
-		reset-names = "usb", "utmi-pads";
-		nvidia,hssync-start-delay = <9>;
-		nvidia,idle-wait-delay = <17>;
-		nvidia,elastic-limit = <16>;
-		nvidia,term-range-adj = <6>;
-		nvidia,xcvr-setup = <51>;
-		nvidia.xcvr-setup-use-fuses;
-		nvidia,xcvr-lsfslew = <1>;
-		nvidia,xcvr-lsrslew = <1>;
-		nvidia,xcvr-hsslew = <32>;
-		nvidia,hssquelch-level = <2>;
-		nvidia,hsdiscon-level = <5>;
-		nvidia,has-utmi-pad-registers;
-		status = "disabled";
-	};
-
-	usb@7d004000 {
-		compatible = "nvidia,tegra30-ehci", "usb-ehci";
-		reg = <0x7d004000 0x4000>;
-		interrupts = <GIC_SPI 21 IRQ_TYPE_LEVEL_HIGH>;
-		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA30_CLK_USB2>;
-		resets = <&tegra_car 58>;
-		reset-names = "usb";
-		nvidia,phy = <&phy2>;
-		status = "disabled";
-	};
-
-	phy2: usb-phy@7d004000 {
-		compatible = "nvidia,tegra30-usb-phy";
-		reg = <0x7d004000 0x4000 0x7d000000 0x4000>;
-		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA30_CLK_USB2>,
-			 <&tegra_car TEGRA30_CLK_PLL_U>,
-			 <&tegra_car TEGRA30_CLK_USBD>;
-		clock-names = "reg", "pll_u", "utmi-pads";
-		resets = <&tegra_car 58>, <&tegra_car 22>;
-		reset-names = "usb", "utmi-pads";
-		nvidia,hssync-start-delay = <9>;
-		nvidia,idle-wait-delay = <17>;
-		nvidia,elastic-limit = <16>;
-		nvidia,term-range-adj = <6>;
-		nvidia,xcvr-setup = <51>;
-		nvidia.xcvr-setup-use-fuses;
-		nvidia,xcvr-lsfslew = <2>;
-		nvidia,xcvr-lsrslew = <2>;
-		nvidia,xcvr-hsslew = <32>;
-		nvidia,hssquelch-level = <2>;
-		nvidia,hsdiscon-level = <5>;
-		status = "disabled";
-	};
-
-	usb@7d008000 {
-		compatible = "nvidia,tegra30-ehci", "usb-ehci";
-		reg = <0x7d008000 0x4000>;
-		interrupts = <GIC_SPI 97 IRQ_TYPE_LEVEL_HIGH>;
-		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA30_CLK_USB3>;
-		resets = <&tegra_car 59>;
-		reset-names = "usb";
-		nvidia,phy = <&phy3>;
-		status = "disabled";
-	};
-
-	phy3: usb-phy@7d008000 {
-		compatible = "nvidia,tegra30-usb-phy";
-		reg = <0x7d008000 0x4000 0x7d000000 0x4000>;
-		phy_type = "utmi";
-		clocks = <&tegra_car TEGRA30_CLK_USB3>,
-			 <&tegra_car TEGRA30_CLK_PLL_U>,
-			 <&tegra_car TEGRA30_CLK_USBD>;
-		clock-names = "reg", "pll_u", "utmi-pads";
-		resets = <&tegra_car 59>, <&tegra_car 22>;
-		reset-names = "usb", "utmi-pads";
-		nvidia,hssync-start-delay = <0>;
-		nvidia,idle-wait-delay = <17>;
-		nvidia,elastic-limit = <16>;
-		nvidia,term-range-adj = <6>;
-		nvidia,xcvr-setup = <51>;
-		nvidia.xcvr-setup-use-fuses;
-		nvidia,xcvr-lsfslew = <2>;
-		nvidia,xcvr-lsrslew = <2>;
-		nvidia,xcvr-hsslew = <32>;
-		nvidia,hssquelch-level = <2>;
-		nvidia,hsdiscon-level = <5>;
+		interrupts = <0 31 0x04>;
+		clocks = <&tegra_car 15>;
 		status = "disabled";
 	};
 
@@ -904,9 +572,9 @@
 
 	pmu {
 		compatible = "arm,cortex-a9-pmu";
-		interrupts = <GIC_SPI 144 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 145 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 146 IRQ_TYPE_LEVEL_HIGH>,
-			     <GIC_SPI 147 IRQ_TYPE_LEVEL_HIGH>;
+		interrupts = <0 144 0x04
+			      0 145 0x04
+			      0 146 0x04
+			      0 147 0x04>;
 	};
 };
diff -urNp a/arch/arm/boot/dts/tny_a9260.dts b/arch/arm/boot/dts/tny_a9260.dts
--- a/arch/arm/boot/dts/tny_a9260.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tny_a9260.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,8 +6,8 @@
  * Licensed under GPLv2.
  */
 /dts-v1/;
-#include "at91sam9260.dtsi"
-#include "tny_a9260_common.dtsi"
+/include/ "at91sam9260.dtsi"
+/include/ "tny_a9260_common.dtsi"
 
 / {
 	model = "Calao TNY A9260";
diff -urNp a/arch/arm/boot/dts/tny_a9260_common.dtsi b/arch/arm/boot/dts/tny_a9260_common.dtsi
--- a/arch/arm/boot/dts/tny_a9260_common.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tny_a9260_common.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -24,14 +24,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <12000000>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <12000000>;
-		};
 	};
 
 	ahb {
diff -urNp a/arch/arm/boot/dts/tny_a9263.dts b/arch/arm/boot/dts/tny_a9263.dts
--- a/arch/arm/boot/dts/tny_a9263.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tny_a9263.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2 only
  */
 /dts-v1/;
-#include "at91sam9263.dtsi"
+/include/ "at91sam9263.dtsi"
 
 / {
 	model = "Calao TNY A9263";
@@ -29,14 +29,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <12000000>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <12000000>;
-		};
 	};
 
 	ahb {
@@ -46,7 +38,7 @@
 			};
 
 			usb1: gadget@fff78000 {
-				atmel,vbus-gpio = <&pioB 11 GPIO_ACTIVE_HIGH>;
+				atmel,vbus-gpio = <&pioB 11 0>;
 				status = "okay";
 			};
 		};
diff -urNp a/arch/arm/boot/dts/tny_a9g20.dts b/arch/arm/boot/dts/tny_a9g20.dts
--- a/arch/arm/boot/dts/tny_a9g20.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tny_a9g20.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,8 +6,8 @@
  * Licensed under GPLv2.
  */
 /dts-v1/;
-#include "at91sam9g20.dtsi"
-#include "tny_a9260_common.dtsi"
+/include/ "at91sam9g20.dtsi"
+/include/ "tny_a9260_common.dtsi"
 
 / {
 	model = "Calao TNY A9G20";
diff -urNp a/arch/arm/boot/dts/tps65910.dtsi b/arch/arm/boot/dts/tps65910.dtsi
--- a/arch/arm/boot/dts/tps65910.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/tps65910.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -82,10 +82,5 @@
 			reg = <12>;
 			regulator-compatible = "vmmc";
 		};
-
-		vbb_reg: regulator@13 {
-			reg = <13>;
-			regulator-compatible = "vbb";
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/twl4030.dtsi b/arch/arm/boot/dts/twl4030.dtsi
--- a/arch/arm/boot/dts/twl4030.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/twl4030.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -19,32 +19,10 @@
 		interrupts = <11>;
 	};
 
-	charger: bci {
-		compatible = "ti,twl4030-bci";
-		interrupts = <9>, <2>;
-		bci3v1-supply = <&vusb3v1>;
-	};
-
 	watchdog {
 		compatible = "ti,twl4030-wdt";
 	};
 
-	vaux1: regulator-vaux1 {
-		compatible = "ti,twl4030-vaux1";
-	};
-
-	vaux2: regulator-vaux2 {
-		compatible = "ti,twl4030-vaux2";
-	};
-
-	vaux3: regulator-vaux3 {
-		compatible = "ti,twl4030-vaux3";
-	};
-
-	vaux4: regulator-vaux4 {
-		compatible = "ti,twl4030-vaux4";
-	};
-
 	vcc: regulator-vdd1 {
 		compatible = "ti,twl4030-vdd1";
 		regulator-min-microvolt = <600000>;
@@ -57,20 +35,10 @@
 		regulator-max-microvolt = <1800000>;
 	};
 
-	vio: regulator-vio {
-		compatible = "ti,twl4030-vio";
-	};
-
-	vintana1: regulator-vintana1 {
-		compatible = "ti,twl4030-vintana1";
-	};
-
-	vintana2: regulator-vintana2 {
-		compatible = "ti,twl4030-vintana2";
-	};
-
-	vintdig: regulator-vintdig {
-		compatible = "ti,twl4030-vintdig";
+	vpll2: regulator-vpll2 {
+		compatible = "ti,twl4030-vpll2";
+		regulator-min-microvolt = <1800000>;
+		regulator-max-microvolt = <1800000>;
 	};
 
 	vmmc1: regulator-vmmc1 {
@@ -79,12 +47,6 @@
 		regulator-max-microvolt = <3150000>;
 	};
 
-	vmmc2: regulator-vmmc2 {
-		compatible = "ti,twl4030-vmmc2";
-		regulator-min-microvolt = <1850000>;
-		regulator-max-microvolt = <3150000>;
-	};
-
 	vusb1v5: regulator-vusb1v5 {
 		compatible = "ti,twl4030-vusb1v5";
 	};
@@ -97,16 +59,6 @@
 		compatible = "ti,twl4030-vusb3v1";
 	};
 
-	vpll1: regulator-vpll1 {
-		compatible = "ti,twl4030-vpll1";
-	};
-
-	vpll2: regulator-vpll2 {
-		compatible = "ti,twl4030-vpll2";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <1800000>;
-	};
-
 	vsim: regulator-vsim {
 		compatible = "ti,twl4030-vsim";
 		regulator-min-microvolt = <1800000>;
@@ -128,7 +80,6 @@
 		usb1v8-supply = <&vusb1v8>;
 		usb3v1-supply = <&vusb3v1>;
 		usb_mode = <1>;
-		#phy-cells = <0>;
 	};
 
 	twl_pwm: pwm {
@@ -140,22 +91,4 @@
 		compatible = "ti,twl4030-pwmled";
 		#pwm-cells = <2>;
 	};
-
-	twl_pwrbutton: pwrbutton {
-		compatible = "ti,twl4030-pwrbutton";
-		interrupts = <8>;
-	};
-
-	twl_keypad: keypad {
-		compatible = "ti,twl4030-keypad";
-		interrupts = <1>;
-		keypad,num-rows = <8>;
-		keypad,num-columns = <8>;
-	};
-
-	twl_madc: madc {
-		compatible = "ti,twl4030-madc";
-		interrupts = <3>;
-		#io-channel-cells = <1>;
-	};
 };
diff -urNp a/arch/arm/boot/dts/twl6030.dtsi b/arch/arm/boot/dts/twl6030.dtsi
--- a/arch/arm/boot/dts/twl6030.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/twl6030.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -83,6 +83,10 @@
 		regulator-always-on;
 	};
 
+	clk32kg: regulator-clk32kg {
+		compatible = "ti,twl6030-clk32kg";
+	};
+
 	twl_usb_comparator: usb-comparator {
 		compatible = "ti,twl6030-usb";
 		interrupts = <4>, <10>;
diff -urNp a/arch/arm/boot/dts/u9540.dts b/arch/arm/boot/dts/u9540.dts
--- a/arch/arm/boot/dts/u9540.dts	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/boot/dts/u9540.dts	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,72 @@
+/*
+ * Copyright 2012 ST-Ericsson AB
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/dts-v1/;
+/include/ "dbx5x0.dtsi"
+
+/ {
+	model = "ST-Ericsson U9540 platform with Device Tree";
+	compatible = "st-ericsson,u9540";
+
+	memory {
+		reg = <0x00000000 0x20000000>;
+	};
+
+	soc-u9500 {
+		uart@80120000 {
+			status = "okay";
+		};
+
+		uart@80121000 {
+			status = "okay";
+		};
+
+		uart@80007000 {
+			status = "okay";
+		};
+
+		// External Micro SD slot
+		sdi0_per1@80126000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <100000000>;
+			bus-width = <4>;
+			mmc-cap-sd-highspeed;
+			mmc-cap-mmc-highspeed;
+			vmmc-supply = <&ab8500_ldo_aux3_reg>;
+
+			cd-gpios  = <&gpio7 6 0x4>; // 230
+			cd-inverted;
+
+			status = "okay";
+		};
+
+
+		// WLAN SDIO channel
+		sdi1_per2@80118000 {
+			arm,primecell-periphid = <0x10480180>;
+			max-frequency = <50000000>;
+			bus-width = <4>;
+
+			status = "okay";
+		};
+
+		// On-board eMMC
+		sdi4_per2@80114000 {
+			arm,primecell-periphid = <0x10480180>;
+		        max-frequency = <100000000>;
+			bus-width = <8>;
+			mmc-cap-mmc-highspeed;
+			vmmc-supply = <&ab8500_ldo_aux2_reg>;
+
+			status = "okay";
+		};
+	};
+};
diff -urNp a/arch/arm/boot/dts/usb_a9260.dts b/arch/arm/boot/dts/usb_a9260.dts
--- a/arch/arm/boot/dts/usb_a9260.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/usb_a9260.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,8 +6,8 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "at91sam9260.dtsi"
-#include "usb_a9260_common.dtsi"
+/include/ "at91sam9260.dtsi"
+/include/ "usb_a9260_common.dtsi"
 
 / {
 	model = "Calao USB A9260";
@@ -20,13 +20,4 @@
 	memory {
 		reg = <0x20000000 0x4000000>;
 	};
-
-	ahb {
-		apb {
-			shdwc@fffffd10 {
-				atmel,wakeup-counter = <10>;
-				atmel,wakeup-rtt-timer;
-			};
-		};
-	};
 };
diff -urNp a/arch/arm/boot/dts/usb_a9260_common.dtsi b/arch/arm/boot/dts/usb_a9260_common.dtsi
--- a/arch/arm/boot/dts/usb_a9260_common.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/usb_a9260_common.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -16,14 +16,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <12000000>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <12000000>;
-		};
 	};
 
 	ahb {
@@ -38,7 +30,7 @@
 			};
 
 			usb1: gadget@fffa4000 {
-				atmel,vbus-gpio = <&pioC 5 GPIO_ACTIVE_HIGH>;
+				atmel,vbus-gpio = <&pioC 5 0>;
 				status = "okay";
 			};
 		};
@@ -101,7 +93,7 @@
 
 		user_led {
 			label = "user_led";
-			gpios = <&pioB 21 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 21 1>;
 			linux,default-trigger = "heartbeat";
 		};
 	};
@@ -113,7 +105,7 @@
 
 		user_pb {
 			label = "user_pb";
-			gpios = <&pioB 10 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 10 1>;
 			linux,code = <28>;
 			gpio-key,wakeup;
 		};
diff -urNp a/arch/arm/boot/dts/usb_a9263.dts b/arch/arm/boot/dts/usb_a9263.dts
--- a/arch/arm/boot/dts/usb_a9263.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/usb_a9263.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,7 +6,7 @@
  * Licensed under GPLv2 only
  */
 /dts-v1/;
-#include "at91sam9263.dtsi"
+/include/ "at91sam9263.dtsi"
 
 / {
 	model = "Calao USB A9263";
@@ -29,14 +29,6 @@
 			compatible = "atmel,osc", "fixed-clock";
 			clock-frequency = <12000000>;
 		};
-
-		slow_xtal {
-			clock-frequency = <32768>;
-		};
-
-		main_xtal {
-			clock-frequency = <12000000>;
-		};
 	};
 
 	ahb {
@@ -51,24 +43,10 @@
 			};
 
 			usb1: gadget@fff78000 {
-				atmel,vbus-gpio = <&pioB 11 GPIO_ACTIVE_HIGH>;
+				atmel,vbus-gpio = <&pioB 11 0>;
 				status = "okay";
 			};
 
-			spi0: spi@fffa4000 {
-				cs-gpios = <&pioB 15 GPIO_ACTIVE_HIGH>;
-				status = "okay";
-				mtd_dataflash@0 {
-					compatible = "atmel,at45", "atmel,dataflash";
-					reg = <0>;
-					spi-max-frequency = <15000000>;
-				};
-			};
-
-			shdwc@fffffd10 {
-				atmel,wakeup-counter = <10>;
-				atmel,wakeup-rtt-timer;
-			};
 		};
 
 		nand0: nand@40000000 {
@@ -129,7 +107,7 @@
 
 		user_led {
 			label = "user_led";
-			gpios = <&pioB 21 GPIO_ACTIVE_HIGH>;
+			gpios = <&pioB 21 0>;
 			linux,default-trigger = "heartbeat";
 		};
 	};
@@ -141,7 +119,7 @@
 
 		user_pb {
 			label = "user_pb";
-			gpios = <&pioB 10 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 10 1>;
 			linux,code = <28>;
 			gpio-key,wakeup;
 		};
diff -urNp a/arch/arm/boot/dts/usb_a9g20-dab-mmx.dtsi b/arch/arm/boot/dts/usb_a9g20-dab-mmx.dtsi
--- a/arch/arm/boot/dts/usb_a9g20-dab-mmx.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/usb_a9g20-dab-mmx.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -28,39 +28,39 @@
 
 		user_led1 {
 			label = "user_led1";
-			gpios = <&pioB 20 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 20 1>;
 		};
 
 /*
 * led already used by mother board but active as high
 *		user_led2 {
 *			label = "user_led2";
-*			gpios = <&pioB 21 GPIO_ACTIVE_LOW>;
+*			gpios = <&pioB 21 1>;
 *		};
 */
 		user_led3 {
 			label = "user_led3";
-			gpios = <&pioB 22 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 22 1>;
 		};
 
 		user_led4 {
 			label = "user_led4";
-			gpios = <&pioB 23 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 23 1>;
 		};
 
 		red {
 			label = "red";
-			gpios = <&pioB 24 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 24 1>;
 		};
 
 		orange {
 			label = "orange";
-			gpios = <&pioB 30 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 30 1>;
 		};
 
 		green {
 			label = "green";
-			gpios = <&pioB 31 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 31 1>;
 		};
 	};
 
@@ -71,25 +71,25 @@
 
 		user_pb1 {
 			label = "user_pb1";
-			gpios = <&pioB 25 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 25 1>;
 			linux,code = <0x100>;
 		};
 
 		user_pb2 {
 			label = "user_pb2";
-			gpios = <&pioB 13 GPIO_ACTIVE_LOW>;
+			gpios = <&pioB 13 1>;
 			linux,code = <0x101>;
 		};
 
 		user_pb3 {
 			label = "user_pb3";
-			gpios = <&pioA 26 GPIO_ACTIVE_LOW>;
+			gpios = <&pioA 26 1>;
 			linux,code = <0x102>;
 		};
 
 		user_pb4 {
 			label = "user_pb4";
-			gpios = <&pioC 9 GPIO_ACTIVE_LOW>;
+			gpios = <&pioC 9 1>;
 			linux,code = <0x103>;
 		};
 	};
diff -urNp a/arch/arm/boot/dts/usb_a9g20.dts b/arch/arm/boot/dts/usb_a9g20.dts
--- a/arch/arm/boot/dts/usb_a9g20.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/usb_a9g20.dts	2015-10-27 00:45:05.000000000 +0000
@@ -6,9 +6,25 @@
  * Licensed under GPLv2 or later.
  */
 /dts-v1/;
-#include "usb_a9g20_common.dtsi"
+/include/ "at91sam9g20.dtsi"
+/include/ "usb_a9260_common.dtsi"
 
 / {
 	model = "Calao USB A9G20";
 	compatible = "calao,usb-a9g20", "atmel,at91sam9g20", "atmel,at91sam9";
+
+	chosen {
+		bootargs = "mem=64M console=ttyS0,115200 root=/dev/mtdblock5 rw rootfstype=ubifs";
+	};
+
+	memory {
+		reg = <0x20000000 0x4000000>;
+	};
+
+	i2c@0 {
+		rv3029c2@56 {
+			compatible = "rv3029c2";
+			reg = <0x56>;
+		};
+	};
 };
diff -urNp a/arch/arm/boot/dts/versatile-ab.dts b/arch/arm/boot/dts/versatile-ab.dts
--- a/arch/arm/boot/dts/versatile-ab.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/versatile-ab.dts	2015-10-27 00:45:05.000000000 +0000
@@ -15,49 +15,10 @@
 		i2c0 = &i2c0;
 	};
 
-	chosen {
-		stdout-path = &uart0;
-	};
-
 	memory {
 		reg = <0x0 0x08000000>;
 	};
 
-	xtal24mhz: xtal24mhz@24M {
-		#clock-cells = <0>;
-		compatible = "fixed-clock";
-		clock-frequency = <24000000>;
-	};
-
-	core-module@10000000 {
-		compatible = "arm,core-module-versatile", "syscon";
-		reg = <0x10000000 0x200>;
-
-		/* OSC1 on AB, OSC4 on PB */
-		osc1: cm_aux_osc@24M {
-			#clock-cells = <0>;
-			compatible = "arm,versatile-cm-auxosc";
-			clocks = <&xtal24mhz>;
-		};
-
-		/* The timer clock is the 24 MHz oscillator divided to 1MHz */
-		timclk: timclk@1M {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			clock-div = <24>;
-			clock-mult = <1>;
-			clocks = <&xtal24mhz>;
-		};
-
-		pclk: pclk@24M {
-			#clock-cells = <0>;
-			compatible = "fixed-factor-clock";
-			clock-div = <1>;
-			clock-mult = <1>;
-			clocks = <&xtal24mhz>;
-		};
-	};
-
 	flash@34000000 {
 		compatible = "arm,versatile-flash";
 		reg = <0x34000000 0x4000000>;
@@ -98,8 +59,6 @@
 			interrupt-controller;
 			#interrupt-cells = <1>;
 			reg = <0x10140000 0x1000>;
-			clear-mask = <0xffffffff>;
-			valid-mask = <0xffffffff>;
 		};
 
 		sic: intc@10003000 {
@@ -109,93 +68,69 @@
 			reg = <0x10003000 0x1000>;
 			interrupt-parent = <&vic>;
 			interrupts = <31>; /* Cascaded to vic */
-			clear-mask = <0xffffffff>;
-			valid-mask = <0xffc203f8>;
 		};
 
 		dma@10130000 {
 			compatible = "arm,pl081", "arm,primecell";
 			reg = <0x10130000 0x1000>;
 			interrupts = <17>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		uart0: uart@101f1000 {
 			compatible = "arm,pl011", "arm,primecell";
 			reg = <0x101f1000 0x1000>;
 			interrupts = <12>;
-			clocks = <&xtal24mhz>, <&pclk>;
-			clock-names = "uartclk", "apb_pclk";
 		};
 
 		uart1: uart@101f2000 {
 			compatible = "arm,pl011", "arm,primecell";
 			reg = <0x101f2000 0x1000>;
 			interrupts = <13>;
-			clocks = <&xtal24mhz>, <&pclk>;
-			clock-names = "uartclk", "apb_pclk";
 		};
 
 		uart2: uart@101f3000 {
 			compatible = "arm,pl011", "arm,primecell";
 			reg = <0x101f3000 0x1000>;
 			interrupts = <14>;
-			clocks = <&xtal24mhz>, <&pclk>;
-			clock-names = "uartclk", "apb_pclk";
 		};
 
 		smc@10100000 {
 			compatible = "arm,primecell";
 			reg = <0x10100000 0x1000>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		mpmc@10110000 {
 			compatible = "arm,primecell";
 			reg = <0x10110000 0x1000>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		display@10120000 {
 			compatible = "arm,pl110", "arm,primecell";
 			reg = <0x10120000 0x1000>;
 			interrupts = <16>;
-			clocks = <&osc1>, <&pclk>;
-			clock-names = "clcd", "apb_pclk";
 		};
 
 		sctl@101e0000 {
 			compatible = "arm,primecell";
 			reg = <0x101e0000 0x1000>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		watchdog@101e1000 {
 			compatible = "arm,primecell";
 			reg = <0x101e1000 0x1000>;
 			interrupts = <0>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		timer@101e2000 {
 			compatible = "arm,sp804", "arm,primecell";
 			reg = <0x101e2000 0x1000>;
 			interrupts = <4>;
-			clocks = <&timclk>, <&timclk>, <&pclk>;
-			clock-names = "timer0", "timer1", "apb_pclk";
 		};
 
 		timer@101e3000 {
 			compatible = "arm,sp804", "arm,primecell";
 			reg = <0x101e3000 0x1000>;
 			interrupts = <5>;
-			clocks = <&timclk>, <&timclk>, <&pclk>;
-			clock-names = "timer0", "timer1", "apb_pclk";
 		};
 
 		gpio0: gpio@101e4000 {
@@ -206,8 +141,6 @@
 			#gpio-cells = <2>;
 			interrupt-controller;
 			#interrupt-cells = <2>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		gpio1: gpio@101e5000 {
@@ -218,32 +151,24 @@
 			#gpio-cells = <2>;
 			interrupt-controller;
 			#interrupt-cells = <2>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		rtc@101e8000 {
 			compatible = "arm,pl030", "arm,primecell";
 			reg = <0x101e8000 0x1000>;
 			interrupts = <10>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		sci@101f0000 {
 			compatible = "arm,primecell";
 			reg = <0x101f0000 0x1000>;
 			interrupts = <15>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		ssp@101f4000 {
 			compatible = "arm,pl022", "arm,primecell";
 			reg = <0x101f4000 0x1000>;
 			interrupts = <11>;
-			clocks = <&xtal24mhz>, <&pclk>;
-			clock-names = "SSPCLK", "apb_pclk";
 		};
 
 		fpga {
@@ -252,40 +177,27 @@
 			#size-cells = <1>;
 			ranges = <0 0x10000000 0x10000>;
 
-			sysreg@0 {
-				compatible = "arm,versatile-sysreg", "syscon";
-				reg = <0x00000 0x1000>;
-			};
-
 			aaci@4000 {
 				compatible = "arm,primecell";
 				reg = <0x4000 0x1000>;
 				interrupts = <24>;
-				clocks = <&pclk>;
-				clock-names = "apb_pclk";
 			};
 			mmc@5000 {
-				compatible = "arm,pl180", "arm,primecell";
+				compatible = "arm,primecell";
 				reg = < 0x5000 0x1000>;
-				interrupts-extended = <&vic 22 &sic 2>;
-				clocks = <&xtal24mhz>, <&pclk>;
-				clock-names = "mclk", "apb_pclk";
+				interrupts = <22 34>;
 			};
 			kmi@6000 {
 				compatible = "arm,pl050", "arm,primecell";
 				reg = <0x6000 0x1000>;
 				interrupt-parent = <&sic>;
 				interrupts = <3>;
-				clocks = <&xtal24mhz>, <&pclk>;
-				clock-names = "KMIREFCLK", "apb_pclk";
 			};
 			kmi@7000 {
 				compatible = "arm,pl050", "arm,primecell";
 				reg = <0x7000 0x1000>;
 				interrupt-parent = <&sic>;
 				interrupts = <4>;
-				clocks = <&xtal24mhz>, <&pclk>;
-				clock-names = "KMIREFCLK", "apb_pclk";
 			};
 		};
 	};
diff -urNp a/arch/arm/boot/dts/versatile-pb.dts b/arch/arm/boot/dts/versatile-pb.dts
--- a/arch/arm/boot/dts/versatile-pb.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/versatile-pb.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,4 +1,4 @@
-#include <versatile-ab.dts>
+/include/ "versatile-ab.dts"
 
 / {
 	model = "ARM Versatile PB";
@@ -13,8 +13,6 @@
 			#gpio-cells = <2>;
 			interrupt-controller;
 			#interrupt-cells = <2>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
 		};
 
 		gpio3: gpio@101e7000 {
@@ -25,45 +23,6 @@
 			#gpio-cells = <2>;
 			interrupt-controller;
 			#interrupt-cells = <2>;
-			clocks = <&pclk>;
-			clock-names = "apb_pclk";
-		};
-
-		pci-controller@10001000 {
-			compatible = "arm,versatile-pci";
-			device_type = "pci";
-			reg = <0x10001000 0x1000
-			       0x41000000 0x10000
-			       0x42000000 0x100000>;
-			bus-range = <0 0xff>;
-			#address-cells = <3>;
-			#size-cells = <2>;
-			#interrupt-cells = <1>;
-
-			ranges = <0x01000000 0 0x00000000 0x43000000 0 0x00010000   /* downstream I/O */
-				  0x02000000 0 0x50000000 0x50000000 0 0x10000000   /* non-prefetchable memory */
-				  0x42000000 0 0x60000000 0x60000000 0 0x10000000>; /* prefetchable memory */
-
-			interrupt-map-mask = <0x1800 0 0 7>;
-			interrupt-map = <0x1800 0 0 1 &sic 28
-					 0x1800 0 0 2 &sic 29
-					 0x1800 0 0 3 &sic 30
-					 0x1800 0 0 4 &sic 27
-
-					 0x1000 0 0 1 &sic 27
-					 0x1000 0 0 2 &sic 28
-					 0x1000 0 0 3 &sic 29
-					 0x1000 0 0 4 &sic 30
-
-					 0x0800 0 0 1 &sic 30
-					 0x0800 0 0 2 &sic 27
-					 0x0800 0 0 3 &sic 28
-					 0x0800 0 0 4 &sic 29
-
-					 0x0000 0 0 1 &sic 29
-					 0x0000 0 0 2 &sic 30
-					 0x0000 0 0 3 &sic 27
-					 0x0000 0 0 4 &sic 28>;
 		};
 
 		fpga {
@@ -72,24 +31,20 @@
 				reg = <0x9000 0x1000>;
 				interrupt-parent = <&sic>;
 				interrupts = <6>;
-				clocks = <&xtal24mhz>, <&pclk>;
-				clock-names = "uartclk", "apb_pclk";
 			};
 			sci@a000 {
 				compatible = "arm,primecell";
 				reg = <0xa000 0x1000>;
 				interrupt-parent = <&sic>;
 				interrupts = <5>;
-				clocks = <&xtal24mhz>;
-				clock-names = "apb_pclk";
 			};
 			mmc@b000 {
-				compatible = "arm,pl180", "arm,primecell";
+				compatible = "arm,primecell";
 				reg = <0xb000 0x1000>;
-				interrupts-extended = <&vic 23 &sic 2>;
-				clocks = <&xtal24mhz>, <&pclk>;
-				clock-names = "mclk", "apb_pclk";
+				interrupts = <23 34>;
 			};
 		};
 	};
 };
+
+/include/ "testcases/tests.dtsi"
diff -urNp a/arch/arm/boot/dts/vexpress-v2m-rs1.dtsi b/arch/arm/boot/dts/vexpress-v2m-rs1.dtsi
--- a/arch/arm/boot/dts/vexpress-v2m-rs1.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/vexpress-v2m-rs1.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -41,7 +41,7 @@
 			bank-width = <4>;
 		};
 
-		v2m_video_ram: vram@2,00000000 {
+		vram@2,00000000 {
 			compatible = "arm,vexpress-vram";
 			reg = <2 0x00000000 0x00800000>;
 		};
@@ -74,24 +74,8 @@
 			v2m_sysreg: sysreg@010000 {
 				compatible = "arm,vexpress-sysreg";
 				reg = <0x010000 0x1000>;
-
-				v2m_led_gpios: sys_led@08 {
-					compatible = "arm,vexpress-sysreg,sys_led";
-					gpio-controller;
-					#gpio-cells = <2>;
-				};
-
-				v2m_mmc_gpios: sys_mci@48 {
-					compatible = "arm,vexpress-sysreg,sys_mci";
-					gpio-controller;
-					#gpio-cells = <2>;
-				};
-
-				v2m_flash_gpios: sys_flash@4c {
-					compatible = "arm,vexpress-sysreg,sys_flash";
-					gpio-controller;
-					#gpio-cells = <2>;
-				};
+				gpio-controller;
+				#gpio-cells = <2>;
 			};
 
 			v2m_sysctl: sysctl@020000 {
@@ -129,8 +113,8 @@
 				compatible = "arm,pl180", "arm,primecell";
 				reg = <0x050000 0x1000>;
 				interrupts = <9 10>;
-				cd-gpios = <&v2m_mmc_gpios 0 0>;
-				wp-gpios = <&v2m_mmc_gpios 1 0>;
+				cd-gpios = <&v2m_sysreg 0 0>;
+				wp-gpios = <&v2m_sysreg 1 0>;
 				max-frequency = <12000000>;
 				vmmc-supply = <&v2m_fixed_3v3>;
 				clocks = <&v2m_clk24mhz>, <&smbclk>;
@@ -246,41 +230,9 @@
 			clcd@1f0000 {
 				compatible = "arm,pl111", "arm,primecell";
 				reg = <0x1f0000 0x1000>;
-				interrupt-names = "combined";
 				interrupts = <14>;
 				clocks = <&v2m_oscclk1>, <&smbclk>;
 				clock-names = "clcdclk", "apb_pclk";
-				memory-region = <&v2m_video_ram>;
-				max-memory-bandwidth = <50350000>; /* 16bpp @ 25.175MHz */
-
-				port {
-					v2m_clcd_pads: endpoint {
-						remote-endpoint = <&v2m_clcd_panel>;
-						arm,pl11x,tft-r0g0b0-pads = <0 8 16>;
-					};
-				};
-
-				panel {
-					compatible = "panel-dpi";
-
-					port {
-						v2m_clcd_panel: endpoint {
-							remote-endpoint = <&v2m_clcd_pads>;
-						};
-					};
-
-					panel-timing {
-						clock-frequency = <25175000>;
-						hactive = <640>;
-						hback-porch = <40>;
-						hfront-porch = <24>;
-						hsync-len = <96>;
-						vactive = <480>;
-						vback-porch = <32>;
-						vfront-porch = <11>;
-						vsync-len = <2>;
-					};
-				};
 			};
 		};
 
@@ -313,58 +265,6 @@
 			clock-output-names = "v2m:refclk32khz";
 		};
 
-		leds {
-			compatible = "gpio-leds";
-
-			user@1 {
-				label = "v2m:green:user1";
-				gpios = <&v2m_led_gpios 0 0>;
-				linux,default-trigger = "heartbeat";
-			};
-
-			user@2 {
-				label = "v2m:green:user2";
-				gpios = <&v2m_led_gpios 1 0>;
-				linux,default-trigger = "mmc0";
-			};
-
-			user@3 {
-				label = "v2m:green:user3";
-				gpios = <&v2m_led_gpios 2 0>;
-				linux,default-trigger = "cpu0";
-			};
-
-			user@4 {
-				label = "v2m:green:user4";
-				gpios = <&v2m_led_gpios 3 0>;
-				linux,default-trigger = "cpu1";
-			};
-
-			user@5 {
-				label = "v2m:green:user5";
-				gpios = <&v2m_led_gpios 4 0>;
-				linux,default-trigger = "cpu2";
-			};
-
-			user@6 {
-				label = "v2m:green:user6";
-				gpios = <&v2m_led_gpios 5 0>;
-				linux,default-trigger = "cpu3";
-			};
-
-			user@7 {
-				label = "v2m:green:user7";
-				gpios = <&v2m_led_gpios 6 0>;
-				linux,default-trigger = "cpu4";
-			};
-
-			user@8 {
-				label = "v2m:green:user8";
-				gpios = <&v2m_led_gpios 7 0>;
-				linux,default-trigger = "cpu5";
-			};
-		};
-
 		mcc {
 			compatible = "arm,vexpress,config-bus";
 			arm,vexpress,config-bridge = <&v2m_sysreg>;
@@ -382,7 +282,7 @@
 				/* CLCD clock */
 				compatible = "arm,vexpress-osc";
 				arm,vexpress-sysreg,func = <1 1>;
-				freq-range = <23750000 65000000>;
+				freq-range = <23750000 63500000>;
 				#clock-cells = <0>;
 				clock-output-names = "v2m:oscclk1";
 			};
diff -urNp a/arch/arm/boot/dts/vexpress-v2m.dtsi b/arch/arm/boot/dts/vexpress-v2m.dtsi
--- a/arch/arm/boot/dts/vexpress-v2m.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/vexpress-v2m.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -40,7 +40,7 @@
 			bank-width = <4>;
 		};
 
-		v2m_video_ram: vram@3,00000000 {
+		vram@3,00000000 {
 			compatible = "arm,vexpress-vram";
 			reg = <3 0x00000000 0x00800000>;
 		};
@@ -73,24 +73,8 @@
 			v2m_sysreg: sysreg@00000 {
 				compatible = "arm,vexpress-sysreg";
 				reg = <0x00000 0x1000>;
-
-				v2m_led_gpios: sys_led@08 {
-					compatible = "arm,vexpress-sysreg,sys_led";
-					gpio-controller;
-					#gpio-cells = <2>;
-				};
-
-				v2m_mmc_gpios: sys_mci@48 {
-					compatible = "arm,vexpress-sysreg,sys_mci";
-					gpio-controller;
-					#gpio-cells = <2>;
-				};
-
-				v2m_flash_gpios: sys_flash@4c {
-					compatible = "arm,vexpress-sysreg,sys_flash";
-					gpio-controller;
-					#gpio-cells = <2>;
-				};
+				gpio-controller;
+				#gpio-cells = <2>;
 			};
 
 			v2m_sysctl: sysctl@01000 {
@@ -128,8 +112,8 @@
 				compatible = "arm,pl180", "arm,primecell";
 				reg = <0x05000 0x1000>;
 				interrupts = <9 10>;
-				cd-gpios = <&v2m_mmc_gpios 0 0>;
-				wp-gpios = <&v2m_mmc_gpios 1 0>;
+				cd-gpios = <&v2m_sysreg 0 0>;
+				wp-gpios = <&v2m_sysreg 1 0>;
 				max-frequency = <12000000>;
 				vmmc-supply = <&v2m_fixed_3v3>;
 				clocks = <&v2m_clk24mhz>, <&smbclk>;
@@ -245,41 +229,9 @@
 			clcd@1f000 {
 				compatible = "arm,pl111", "arm,primecell";
 				reg = <0x1f000 0x1000>;
-				interrupt-names = "combined";
 				interrupts = <14>;
 				clocks = <&v2m_oscclk1>, <&smbclk>;
 				clock-names = "clcdclk", "apb_pclk";
-				memory-region = <&v2m_video_ram>;
-				max-memory-bandwidth = <50350000>; /* 16bpp @ 25.175MHz */
-
-				port {
-					v2m_clcd_pads: endpoint {
-						remote-endpoint = <&v2m_clcd_panel>;
-						arm,pl11x,tft-r0g0b0-pads = <0 8 16>;
-					};
-				};
-
-				panel {
-					compatible = "panel-dpi";
-
-					port {
-						v2m_clcd_panel: endpoint {
-							remote-endpoint = <&v2m_clcd_pads>;
-						};
-					};
-
-					panel-timing {
-						clock-frequency = <25175000>;
-						hactive = <640>;
-						hback-porch = <40>;
-						hfront-porch = <24>;
-						hsync-len = <96>;
-						vactive = <480>;
-						vback-porch = <32>;
-						vfront-porch = <11>;
-						vsync-len = <2>;
-					};
-				};
 			};
 		};
 
@@ -312,58 +264,6 @@
 			clock-output-names = "v2m:refclk32khz";
 		};
 
-		leds {
-			compatible = "gpio-leds";
-
-			user@1 {
-				label = "v2m:green:user1";
-				gpios = <&v2m_led_gpios 0 0>;
-				linux,default-trigger = "heartbeat";
-			};
-
-			user@2 {
-				label = "v2m:green:user2";
-				gpios = <&v2m_led_gpios 1 0>;
-				linux,default-trigger = "mmc0";
-			};
-
-			user@3 {
-				label = "v2m:green:user3";
-				gpios = <&v2m_led_gpios 2 0>;
-				linux,default-trigger = "cpu0";
-			};
-
-			user@4 {
-				label = "v2m:green:user4";
-				gpios = <&v2m_led_gpios 3 0>;
-				linux,default-trigger = "cpu1";
-			};
-
-			user@5 {
-				label = "v2m:green:user5";
-				gpios = <&v2m_led_gpios 4 0>;
-				linux,default-trigger = "cpu2";
-			};
-
-			user@6 {
-				label = "v2m:green:user6";
-				gpios = <&v2m_led_gpios 5 0>;
-				linux,default-trigger = "cpu3";
-			};
-
-			user@7 {
-				label = "v2m:green:user7";
-				gpios = <&v2m_led_gpios 6 0>;
-				linux,default-trigger = "cpu4";
-			};
-
-			user@8 {
-				label = "v2m:green:user8";
-				gpios = <&v2m_led_gpios 7 0>;
-				linux,default-trigger = "cpu5";
-			};
-		};
-
 		mcc {
 			compatible = "arm,vexpress,config-bus";
 			arm,vexpress,config-bridge = <&v2m_sysreg>;
@@ -381,7 +281,7 @@
 				/* CLCD clock */
 				compatible = "arm,vexpress-osc";
 				arm,vexpress-sysreg,func = <1 1>;
-				freq-range = <23750000 65000000>;
+				freq-range = <23750000 63500000>;
 				#clock-cells = <0>;
 				clock-output-names = "v2m:oscclk1";
 			};
diff -urNp a/arch/arm/boot/dts/vexpress-v2p-ca15_a7.dts b/arch/arm/boot/dts/vexpress-v2p-ca15_a7.dts
--- a/arch/arm/boot/dts/vexpress-v2p-ca15_a7.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/vexpress-v2p-ca15_a7.dts	2015-10-27 00:45:05.000000000 +0000
@@ -37,58 +37,30 @@
 			device_type = "cpu";
 			compatible = "arm,cortex-a15";
 			reg = <0>;
-			cci-control-port = <&cci_control1>;
-			cpu-idle-states = <&CLUSTER_SLEEP_BIG>;
 		};
 
 		cpu1: cpu@1 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a15";
 			reg = <1>;
-			cci-control-port = <&cci_control1>;
-			cpu-idle-states = <&CLUSTER_SLEEP_BIG>;
 		};
 
 		cpu2: cpu@2 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a7";
 			reg = <0x100>;
-			cci-control-port = <&cci_control2>;
-			cpu-idle-states = <&CLUSTER_SLEEP_LITTLE>;
 		};
 
 		cpu3: cpu@3 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a7";
 			reg = <0x101>;
-			cci-control-port = <&cci_control2>;
-			cpu-idle-states = <&CLUSTER_SLEEP_LITTLE>;
 		};
 
 		cpu4: cpu@4 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a7";
 			reg = <0x102>;
-			cci-control-port = <&cci_control2>;
-			cpu-idle-states = <&CLUSTER_SLEEP_LITTLE>;
-		};
-
-		idle-states {
-			CLUSTER_SLEEP_BIG: cluster-sleep-big {
-				compatible = "arm,idle-state";
-				local-timer-stop;
-				entry-latency-us = <1000>;
-				exit-latency-us = <700>;
-				min-residency-us = <2000>;
-			};
-
-			CLUSTER_SLEEP_LITTLE: cluster-sleep-little {
-				compatible = "arm,idle-state";
-				local-timer-stop;
-				entry-latency-us = <1000>;
-				exit-latency-us = <500>;
-				min-residency-us = <2500>;
-			};
 		};
 	};
 
@@ -132,26 +104,6 @@
 		interrupts = <1 9 0xf04>;
 	};
 
-	cci@2c090000 {
-		compatible = "arm,cci-400";
-		#address-cells = <1>;
-		#size-cells = <1>;
-		reg = <0 0x2c090000 0 0x1000>;
-		ranges = <0x0 0x0 0x2c090000 0x10000>;
-
-		cci_control1: slave-if@4000 {
-			compatible = "arm,cci-400-ctrl-if";
-			interface-type = "ace";
-			reg = <0x4000 0x1000>;
-		};
-
-		cci_control2: slave-if@5000 {
-			compatible = "arm,cci-400-ctrl-if";
-			interface-type = "ace";
-			reg = <0x5000 0x1000>;
-		};
-	};
-
 	memory-controller@7ffd0000 {
 		compatible = "arm,pl354", "arm,primecell";
 		reg = <0 0x7ffd0000 0 0x1000>;
@@ -173,12 +125,6 @@
 		clock-names = "apb_pclk";
 	};
 
-        scc@7fff0000 {
-		compatible = "arm,vexpress-scc,v2p-ca15_a7", "arm,vexpress-scc";
-		reg = <0 0x7fff0000 0 0x1000>;
-		interrupts = <0 95 4>;
-        };
-
 	timer {
 		compatible = "arm,armv7-timer";
 		interrupts = <1 13 0xf08>,
@@ -335,7 +281,6 @@
 			arm,vexpress-sysreg,func = <12 0>;
 			label = "A15 Pcore";
 		};
-
 		power@1 {
 			/* Total power for the three A7 cores */
 			compatible = "arm,vexpress-power";
@@ -346,217 +291,18 @@
 		energy@0 {
 			/* Total energy for the two A15 cores */
 			compatible = "arm,vexpress-energy";
-			arm,vexpress-sysreg,func = <13 0>, <13 1>;
+			arm,vexpress-sysreg,func = <13 0>;
 			label = "A15 Jcore";
 		};
 
 		energy@2 {
 			/* Total energy for the three A7 cores */
 			compatible = "arm,vexpress-energy";
-			arm,vexpress-sysreg,func = <13 2>, <13 3>;
+			arm,vexpress-sysreg,func = <13 2>;
 			label = "A7 Jcore";
 		};
 	};
 
-	etb@0,20010000 {
-		compatible = "arm,coresight-etb10", "arm,primecell";
-		reg = <0 0x20010000 0 0x1000>;
-
-		coresight-default-sink;
-		clocks = <&oscclk6a>;
-		clock-names = "apb_pclk";
-		port {
-			etb_in_port: endpoint@0 {
-				slave-mode;
-				remote-endpoint = <&replicator_out_port0>;
-			};
-		};
-	};
-
-	tpiu@0,20030000 {
-		compatible = "arm,coresight-tpiu", "arm,primecell";
-		reg = <0 0x20030000 0 0x1000>;
-
-		clocks = <&oscclk6a>;
-		clock-names = "apb_pclk";
-		port {
-			tpiu_in_port: endpoint@0 {
-				slave-mode;
-				remote-endpoint = <&replicator_out_port1>;
-			};
-		};
-	};
-
-	replicator {
-		/* non-configurable replicators don't show up on the
-		 * AMBA bus.  As such no need to add "arm,primecell".
-		 */
-		compatible = "arm,coresight-replicator";
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			/* replicator output ports */
-			port@0 {
-				reg = <0>;
-				replicator_out_port0: endpoint {
-					remote-endpoint = <&etb_in_port>;
-				};
-			};
-
-			port@1 {
-				reg = <1>;
-				replicator_out_port1: endpoint {
-					remote-endpoint = <&tpiu_in_port>;
-				};
-			};
-
-			/* replicator input port */
-			port@2 {
-				reg = <0>;
-				replicator_in_port0: endpoint {
-					slave-mode;
-					remote-endpoint = <&funnel_out_port0>;
-				};
-			};
-		};
-	};
-
-	funnel@0,20040000 {
-		compatible = "arm,coresight-funnel", "arm,primecell";
-		reg = <0 0x20040000 0 0x1000>;
-
-		clocks = <&oscclk6a>;
-		clock-names = "apb_pclk";
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			/* funnel output port */
-			port@0 {
-				reg = <0>;
-				funnel_out_port0: endpoint {
-					remote-endpoint =
-						<&replicator_in_port0>;
-				};
-			};
-
-			/* funnel input ports */
-			port@1 {
-				reg = <0>;
-				funnel_in_port0: endpoint {
-					slave-mode;
-					remote-endpoint = <&ptm0_out_port>;
-				};
-			};
-
-			port@2 {
-				reg = <1>;
-				funnel_in_port1: endpoint {
-					slave-mode;
-					remote-endpoint = <&ptm1_out_port>;
-				};
-			};
-
-			port@3 {
-				reg = <2>;
-				funnel_in_port2: endpoint {
-					slave-mode;
-					remote-endpoint = <&etm0_out_port>;
-				};
-			};
-
-			/* Input port #3 is for ITM, not supported here */
-
-			port@4 {
-				reg = <4>;
-				funnel_in_port4: endpoint {
-					slave-mode;
-					remote-endpoint = <&etm1_out_port>;
-				};
-			};
-
-			port@5 {
-				reg = <5>;
-				funnel_in_port5: endpoint {
-					slave-mode;
-					remote-endpoint = <&etm2_out_port>;
-				};
-			};
-		};
-	};
-
-	ptm@0,2201c000 {
-		compatible = "arm,coresight-etm3x", "arm,primecell";
-		reg = <0 0x2201c000 0 0x1000>;
-
-		cpu = <&cpu0>;
-		clocks = <&oscclk6a>;
-		clock-names = "apb_pclk";
-		port {
-			ptm0_out_port: endpoint {
-				remote-endpoint = <&funnel_in_port0>;
-			};
-		};
-	};
-
-	ptm@0,2201d000 {
-		compatible = "arm,coresight-etm3x", "arm,primecell";
-		reg = <0 0x2201d000 0 0x1000>;
-
-		cpu = <&cpu1>;
-		clocks = <&oscclk6a>;
-		clock-names = "apb_pclk";
-		port {
-			ptm1_out_port: endpoint {
-				remote-endpoint = <&funnel_in_port1>;
-			};
-		};
-	};
-
-	etm@0,2203c000 {
-		compatible = "arm,coresight-etm3x", "arm,primecell";
-		reg = <0 0x2203c000 0 0x1000>;
-
-		cpu = <&cpu2>;
-		clocks = <&oscclk6a>;
-		clock-names = "apb_pclk";
-		port {
-			etm0_out_port: endpoint {
-				remote-endpoint = <&funnel_in_port2>;
-			};
-		};
-	};
-
-	etm@0,2203d000 {
-		compatible = "arm,coresight-etm3x", "arm,primecell";
-		reg = <0 0x2203d000 0 0x1000>;
-
-		cpu = <&cpu3>;
-		clocks = <&oscclk6a>;
-		clock-names = "apb_pclk";
-		port {
-			etm1_out_port: endpoint {
-				remote-endpoint = <&funnel_in_port4>;
-			};
-		};
-	};
-
-	etm@0,2203e000 {
-		compatible = "arm,coresight-etm3x", "arm,primecell";
-		reg = <0 0x2203e000 0 0x1000>;
-
-		cpu = <&cpu4>;
-		clocks = <&oscclk6a>;
-		clock-names = "apb_pclk";
-		port {
-			etm2_out_port: endpoint {
-				remote-endpoint = <&funnel_in_port5>;
-			};
-		};
-	};
-
 	smb {
 		compatible = "simple-bus";
 
diff -urNp a/arch/arm/boot/dts/vexpress-v2p-ca5s.dts b/arch/arm/boot/dts/vexpress-v2p-ca5s.dts
--- a/arch/arm/boot/dts/vexpress-v2p-ca5s.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/vexpress-v2p-ca5s.dts	2015-10-27 00:45:05.000000000 +0000
@@ -88,14 +88,6 @@
 		interrupts = <1 13 0x304>;
 	};
 
-	timer@2c000200 {
-		compatible = "arm,cortex-a5-global-timer",
-		             "arm,cortex-a9-global-timer";
-		reg = <0x2c000200 0x20>;
-		interrupts = <1 11 0x304>;
-		clocks = <&oscclk0>;
-	};
-
 	watchdog@2c000620 {
 		compatible = "arm,cortex-a5-twd-wdt";
 		reg = <0x2c000620 0x20>;
@@ -128,7 +120,7 @@
 		compatible = "arm,vexpress,config-bus";
 		arm,vexpress,config-bridge = <&v2m_sysreg>;
 
-		oscclk0: osc@0 {
+		osc@0 {
 			/* CPU and internal AXI reference clock */
 			compatible = "arm,vexpress-osc";
 			arm,vexpress-sysreg,func = <1 0>;
diff -urNp a/arch/arm/boot/dts/vexpress-v2p-ca9.dts b/arch/arm/boot/dts/vexpress-v2p-ca9.dts
--- a/arch/arm/boot/dts/vexpress-v2p-ca9.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/vexpress-v2p-ca9.dts	2015-10-27 00:45:05.000000000 +0000
@@ -70,40 +70,9 @@
 	clcd@10020000 {
 		compatible = "arm,pl111", "arm,primecell";
 		reg = <0x10020000 0x1000>;
-		interrupt-names = "combined";
 		interrupts = <0 44 4>;
 		clocks = <&oscclk1>, <&oscclk2>;
 		clock-names = "clcdclk", "apb_pclk";
-		max-memory-bandwidth = <130000000>; /* 16bpp @ 63.5MHz */
-
-		port {
-			clcd_pads: endpoint {
-				remote-endpoint = <&clcd_panel>;
-				arm,pl11x,tft-r0g0b0-pads = <0 8 16>;
-			};
-		};
-
-		panel {
-			compatible = "panel-dpi";
-
-			port {
-				clcd_panel: endpoint {
-					remote-endpoint = <&clcd_pads>;
-				};
-			};
-
-			panel-timing {
-				clock-frequency = <63500127>;
-				hactive = <1024>;
-				hback-porch = <152>;
-				hfront-porch = <48>;
-				hsync-len = <104>;
-				vactive = <768>;
-				vback-porch = <23>;
-				vfront-porch = <3>;
-				vsync-len = <4>;
-			};
-		};
 	};
 
 	memory-controller@100e0000 {
diff -urNp a/arch/arm/boot/dts/vt8500-bv07.dts b/arch/arm/boot/dts/vt8500-bv07.dts
--- a/arch/arm/boot/dts/vt8500-bv07.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/vt8500-bv07.dts	2015-10-27 00:45:05.000000000 +0000
@@ -30,7 +30,3 @@
 		};
 	};
 };
-
-&uart0 {
-	status = "okay";
-};
diff -urNp a/arch/arm/boot/dts/vt8500.dtsi b/arch/arm/boot/dts/vt8500.dtsi
--- a/arch/arm/boot/dts/vt8500.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/vt8500.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -11,23 +11,6 @@
 / {
 	compatible = "via,vt8500";
 
-	cpus {
-		#address-cells = <0>;
-		#size-cells = <0>;
-
-		cpu {
-			device_type = "cpu";
-			compatible = "arm,arm926ej-s";
-		};
-	};
-
-	aliases {
-		serial0 = &uart0;
-		serial1 = &uart1;
-		serial2 = &uart2;
-		serial3 = &uart3;
-	};
-
 	soc {
 		#address-cells = <1>;
 		#size-cells = <1>;
@@ -128,36 +111,32 @@
 			reg = <0xd8050400 0x100>;
 		};
 
-		uart0: serial@d8200000 {
+		uart@d8200000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd8200000 0x1040>;
 			interrupts = <32>;
 			clocks = <&clkuart0>;
-			status = "disabled";
 		};
 
-		uart1: serial@d82b0000 {
+		uart@d82b0000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd82b0000 0x1040>;
 			interrupts = <33>;
 			clocks = <&clkuart1>;
-			status = "disabled";
 		};
 
-		uart2: serial@d8210000 {
+		uart@d8210000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd8210000 0x1040>;
 			interrupts = <47>;
 			clocks = <&clkuart2>;
-			status = "disabled";
 		};
 
-		uart3: serial@d82c0000 {
+		uart@d82c0000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd82c0000 0x1040>;
 			interrupts = <50>;
 			clocks = <&clkuart3>;
-			status = "disabled";
 		};
 
 		rtc@d8100000 {
@@ -165,11 +144,5 @@
 			reg = <0xd8100000 0x10000>;
 			interrupts = <48>;
 		};
-
-		ethernet@d8004000 {
-			compatible = "via,vt8500-rhine";
-			reg = <0xd8004000 0x100>;
-			interrupts = <10>;
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/wm8505-ref.dts b/arch/arm/boot/dts/wm8505-ref.dts
--- a/arch/arm/boot/dts/wm8505-ref.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/wm8505-ref.dts	2015-10-27 00:45:05.000000000 +0000
@@ -30,7 +30,3 @@
 		};
 	};
 };
-
-&uart0 {
-	status = "okay";
-};
diff -urNp a/arch/arm/boot/dts/wm8505.dtsi b/arch/arm/boot/dts/wm8505.dtsi
--- a/arch/arm/boot/dts/wm8505.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/wm8505.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -12,24 +12,11 @@
 	compatible = "wm,wm8505";
 
 	cpus {
-		#address-cells = <0>;
-		#size-cells = <0>;
-
-		cpu {
-			device_type = "cpu";
-			compatible = "arm,arm926ej-s";
+		cpu@0 {
+			compatible = "arm,arm926ejs";
 		};
 	};
 
- 	aliases {
-		serial0 = &uart0;
-		serial1 = &uart1;
-		serial2 = &uart2;
-		serial3 = &uart3;
-		serial4 = &uart4;
-		serial5 = &uart5;
- 	};
-
 	soc {
 		#address-cells = <1>;
 		#size-cells = <1>;
@@ -81,13 +68,6 @@
 					clock-frequency = <25000000>;
 				};
 
-				plla: plla {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-pll-clock";
-					clocks = <&ref25>;
-					reg = <0x200>;
-				};
-
 				pllb: pllb {
 					#clock-cells = <0>;
 					compatible = "via,vt8500-pll-clock";
@@ -95,48 +75,6 @@
 					reg = <0x204>;
 				};
 
-				pllc: pllc {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-pll-clock";
-					clocks = <&ref25>;
-					reg = <0x208>;
-				};
-
-				plld: plld {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-pll-clock";
-					clocks = <&ref25>;
-					reg = <0x20c>;
-				};
-
-				clkarm: arm {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&plla>;
-					divisor-reg = <0x300>;
-				};
-
-				clkahb: ahb {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&pllb>;
-					divisor-reg = <0x304>;
-				};
-
-				clkapb: apb {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&pllb>;
-					divisor-reg = <0x350>;
-				};
-
-				clkddr: ddr {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&plld>;
-					divisor-reg = <0x310>;
-				};
-
 				clkuart0: uart0 {
 					#clock-cells = <0>;
 					compatible = "via,vt8500-device-clock";
@@ -225,52 +163,46 @@
 			reg = <0xd8050400 0x100>;
 		};
 
-		uart0: serial@d8200000 {
+		uart@d8200000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd8200000 0x1040>;
 			interrupts = <32>;
 			clocks = <&clkuart0>;
-			status = "disabled";
 		};
 
-		uart1: serial@d82b0000 {
+		uart@d82b0000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd82b0000 0x1040>;
 			interrupts = <33>;
 			clocks = <&clkuart1>;
-			status = "disabled";
 		};
 
-		uart2: serial@d8210000 {
+		uart@d8210000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd8210000 0x1040>;
 			interrupts = <47>;
 			clocks = <&clkuart2>;
-			status = "disabled";
 		};
 
-		uart3: serial@d82c0000 {
+		uart@d82c0000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd82c0000 0x1040>;
 			interrupts = <50>;
 			clocks = <&clkuart3>;
-			status = "disabled";
 		};
 
-		uart4: serial@d8370000 {
+		uart@d8370000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd8370000 0x1040>;
 			interrupts = <31>;
 			clocks = <&clkuart4>;
-			status = "disabled";
 		};
 
-		uart5: serial@d8380000 {
+		uart@d8380000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd8380000 0x1040>;
 			interrupts = <30>;
 			clocks = <&clkuart5>;
-			status = "disabled";
 		};
 
 		rtc@d8100000 {
diff -urNp a/arch/arm/boot/dts/wm8650-mid.dts b/arch/arm/boot/dts/wm8650-mid.dts
--- a/arch/arm/boot/dts/wm8650-mid.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/wm8650-mid.dts	2015-10-27 00:45:05.000000000 +0000
@@ -32,6 +32,3 @@
 	};
 };
 
-&uart0 {
-	status = "okay";
-};
diff -urNp a/arch/arm/boot/dts/wm8650.dtsi b/arch/arm/boot/dts/wm8650.dtsi
--- a/arch/arm/boot/dts/wm8650.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/wm8650.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -11,21 +11,6 @@
 / {
 	compatible = "wm,wm8650";
 
-	cpus {
-		#address-cells = <0>;
-		#size-cells = <0>;
-
-		cpu {
-			device_type = "cpu";
-			compatible = "arm,arm926ej-s";
-		};
-	};
-
- 	aliases {
-		serial0 = &uart0;
-		serial1 = &uart1;
-	};
-
 	soc {
 		#address-cells = <1>;
 		#size-cells = <1>;
@@ -92,55 +77,6 @@
 					reg = <0x204>;
 				};
 
-				pllc: pllc {
-					#clock-cells = <0>;
-					compatible = "wm,wm8650-pll-clock";
-					clocks = <&ref25>;
-					reg = <0x208>;
-				};
-
-				plld: plld {
-					#clock-cells = <0>;
-					compatible = "wm,wm8650-pll-clock";
-					clocks = <&ref25>;
-					reg = <0x20c>;
-				};
-
-				plle: plle {
-					#clock-cells = <0>;
-					compatible = "wm,wm8650-pll-clock";
-					clocks = <&ref25>;
-					reg = <0x210>;
-				};
-
-				clkarm: arm {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&plla>;
-					divisor-reg = <0x300>;
-				};
-
-				clkahb: ahb {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&pllb>;
-					divisor-reg = <0x304>;
-				};
-
-				clkapb: apb {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&pllb>;
-					divisor-reg = <0x320>;
-				};
-
-				clkddr: ddr {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&plld>;
-					divisor-reg = <0x310>;
-				};
-
 				clkuart0: uart0 {
  					#clock-cells = <0>;
  					compatible = "via,vt8500-device-clock";
@@ -157,7 +93,14 @@
 					enable-bit = <2>;
 				};
 
-				clksdhc: sdhc {
+				arm: arm {
+					#clock-cells = <0>;
+					compatible = "via,vt8500-device-clock";
+					clocks = <&plla>;
+					divisor-reg = <0x300>;
+				};
+
+				sdhc: sdhc {
 					#clock-cells = <0>;
 					compatible = "via,vt8500-device-clock";
 					clocks = <&pllb>;
@@ -197,20 +140,18 @@
 			reg = <0xd8050400 0x100>;
 		};
 
-		uart0: serial@d8200000 {
+		uart@d8200000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd8200000 0x1040>;
 			interrupts = <32>;
 			clocks = <&clkuart0>;
-			status = "disabled";
 		};
 
-		uart1: serial@d82b0000 {
+		uart@d82b0000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd82b0000 0x1040>;
 			interrupts = <33>;
 			clocks = <&clkuart1>;
-			status = "disabled";
 		};
 
 		rtc@d8100000 {
@@ -218,11 +159,5 @@
 			reg = <0xd8100000 0x10000>;
 			interrupts = <48>;
 		};
-
-		ethernet@d8004000 {
-			compatible = "via,vt8500-rhine";
-			reg = <0xd8004000 0x100>;
-			interrupts = <10>;
-		};
 	};
 };
diff -urNp a/arch/arm/boot/dts/wm8850-w70v2.dts b/arch/arm/boot/dts/wm8850-w70v2.dts
--- a/arch/arm/boot/dts/wm8850-w70v2.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/wm8850-w70v2.dts	2015-10-27 00:45:05.000000000 +0000
@@ -11,14 +11,13 @@
 
 /dts-v1/;
 /include/ "wm8850.dtsi"
-#include <dt-bindings/pwm/pwm.h>
 
 / {
 	model = "Wondermedia WM8850-W70v2 Tablet";
 
 	backlight {
 		compatible = "pwm-backlight";
-		pwms = <&pwm 0 50000 PWM_POLARITY_INVERTED>;
+		pwms = <&pwm 0 50000 1>;	/* duty inverted */
 
 		brightness-levels = <0 40 60 80 100 130 190 255>;
 		default-brightness-level = <5>;
@@ -42,7 +41,3 @@
 		};
 	};
 };
-
-&uart0 {
-	status = "okay";
-};
diff -urNp a/arch/arm/boot/dts/wm8850.dtsi b/arch/arm/boot/dts/wm8850.dtsi
--- a/arch/arm/boot/dts/wm8850.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/wm8850.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -11,17 +11,6 @@
 / {
 	compatible = "wm,wm8850";
 
-	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		cpu@0 {
-			device_type = "cpu";
-			compatible = "arm,cortex-a9";
-			reg = <0x0>;
-		};
-	};
-
 	aliases {
 		serial0 = &uart0;
 		serial1 = &uart1;
@@ -83,81 +72,18 @@
 
 				plla: plla {
 					#clock-cells = <0>;
-					compatible = "wm,wm8850-pll-clock";
-					clocks = <&ref24>;
+					compatible = "wm,wm8750-pll-clock";
+					clocks = <&ref25>;
 					reg = <0x200>;
 				};
 
 				pllb: pllb {
 					#clock-cells = <0>;
-					compatible = "wm,wm8850-pll-clock";
-					clocks = <&ref24>;
+					compatible = "wm,wm8750-pll-clock";
+					clocks = <&ref25>;
 					reg = <0x204>;
 				};
 
-				pllc: pllc {
-					#clock-cells = <0>;
-					compatible = "wm,wm8850-pll-clock";
-					clocks = <&ref24>;
-					reg = <0x208>;
-				};
-
-				plld: plld {
-					#clock-cells = <0>;
-					compatible = "wm,wm8850-pll-clock";
-					clocks = <&ref24>;
-					reg = <0x20c>;
-				};
-
-				plle: plle {
-					#clock-cells = <0>;
-					compatible = "wm,wm8850-pll-clock";
-					clocks = <&ref24>;
-					reg = <0x210>;
-				};
-
-				pllf: pllf {
-					#clock-cells = <0>;
-					compatible = "wm,wm8850-pll-clock";
-					clocks = <&ref24>;
-					reg = <0x214>;
-				};
-
-				pllg: pllg {
-					#clock-cells = <0>;
-					compatible = "wm,wm8850-pll-clock";
-					clocks = <&ref24>;
-					reg = <0x218>;
-				};
-
-				clkarm: arm {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&plla>;
-					divisor-reg = <0x300>;
-				};
-
-				clkahb: ahb {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&pllb>;
-					divisor-reg = <0x304>;
-				};
-
-				clkapb: apb {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&pllb>;
-					divisor-reg = <0x320>;
-				};
-
-				clkddr: ddr {
-					#clock-cells = <0>;
-					compatible = "via,vt8500-device-clock";
-					clocks = <&plld>;
-					divisor-reg = <0x310>;
-				};
-
 				clkuart0: uart0 {
 					#clock-cells = <0>;
 					compatible = "via,vt8500-device-clock";
@@ -252,36 +178,32 @@
 			interrupts = <26>;
 		};
 
-		uart0: serial@d8200000 {
+		uart0: uart@d8200000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd8200000 0x1040>;
 			interrupts = <32>;
 			clocks = <&clkuart0>;
-			status = "disabled";
 		};
 
-		uart1: serial@d82b0000 {
+		uart1: uart@d82b0000 {
 			compatible = "via,vt8500-uart";
 			reg = <0xd82b0000 0x1040>;
 			interrupts = <33>;
 			clocks = <&clkuart1>;
-			status = "disabled";
 		};
 
-                uart2: serial@d8210000 {
+                uart2: uart@d8210000 {
                         compatible = "via,vt8500-uart";
                         reg = <0xd8210000 0x1040>;
                         interrupts = <47>;
                         clocks = <&clkuart2>;
-			status = "disabled";
                 };
 
-                uart3: serial@d82c0000 {
+                uart3: uart@d82c0000 {
                         compatible = "via,vt8500-uart";
                         reg = <0xd82c0000 0x1040>;
                         interrupts = <50>;
                         clocks = <&clkuart3>;
-			status = "disabled";
                 };
 
 		rtc@d8100000 {
@@ -298,11 +220,5 @@
 			bus-width = <4>;
 			sdon-inverted;
 		};
-
-		ethernet@d8004000 {
-			compatible = "via,vt8500-rhine";
-			reg = <0xd8004000 0x100>;
-			interrupts = <10>;
-                };
 	};
 };
diff -urNp a/arch/arm/boot/dts/zynq-7000.dtsi b/arch/arm/boot/dts/zynq-7000.dtsi
--- a/arch/arm/boot/dts/zynq-7000.dtsi	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/zynq-7000.dtsi	2015-10-27 00:45:05.000000000 +0000
@@ -1,5 +1,5 @@
 /*
- *  Copyright (C) 2011 - 2014 Xilinx
+ *  Copyright (C) 2011 Xilinx
  *
  * This software is licensed under the terms of the GNU General Public
  * License version 2, as published by the Free Software Foundation, and
@@ -15,32 +15,6 @@
 / {
 	compatible = "xlnx,zynq-7000";
 
-	cpus {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		cpu@0 {
-			compatible = "arm,cortex-a9";
-			device_type = "cpu";
-			reg = <0>;
-			clocks = <&clkc 3>;
-			clock-latency = <1000>;
-			cpu0-supply = <&regulator_vccpint>;
-			operating-points = <
-				/* kHz    uV */
-				666667  1000000
-				333334  1000000
-			>;
-		};
-
-		cpu@1 {
-			compatible = "arm,cortex-a9";
-			device_type = "cpu";
-			reg = <1>;
-			clocks = <&clkc 3>;
-		};
-	};
-
 	pmu {
 		compatible = "arm,cortex-a9-pmu";
 		interrupts = <0 5 4>, <0 6 4>;
@@ -48,15 +22,6 @@
 		reg = < 0xf8891000 0x1000 0xf8893000 0x1000 >;
 	};
 
-	regulator_vccpint: fixedregulator@0 {
-		compatible = "regulator-fixed";
-		regulator-name = "VCCPINT";
-		regulator-min-microvolt = <1000000>;
-		regulator-max-microvolt = <1000000>;
-		regulator-boot-on;
-		regulator-always-on;
-	};
-
 	amba {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -64,289 +29,119 @@
 		interrupt-parent = <&intc>;
 		ranges;
 
-		adc: adc@f8007100 {
-			compatible = "xlnx,zynq-xadc-1.00.a";
-			reg = <0xf8007100 0x20>;
-			interrupts = <0 7 4>;
-			interrupt-parent = <&intc>;
-			clocks = <&clkc 12>;
-		};
-
-		can0: can@e0008000 {
-			compatible = "xlnx,zynq-can-1.0";
-			status = "disabled";
-			clocks = <&clkc 19>, <&clkc 36>;
-			clock-names = "can_clk", "pclk";
-			reg = <0xe0008000 0x1000>;
-			interrupts = <0 28 4>;
-			interrupt-parent = <&intc>;
-			tx-fifo-depth = <0x40>;
-			rx-fifo-depth = <0x40>;
-		};
-
-		can1: can@e0009000 {
-			compatible = "xlnx,zynq-can-1.0";
-			status = "disabled";
-			clocks = <&clkc 20>, <&clkc 37>;
-			clock-names = "can_clk", "pclk";
-			reg = <0xe0009000 0x1000>;
-			interrupts = <0 51 4>;
-			interrupt-parent = <&intc>;
-			tx-fifo-depth = <0x40>;
-			rx-fifo-depth = <0x40>;
-		};
-
-		gpio0: gpio@e000a000 {
-			compatible = "xlnx,zynq-gpio-1.0";
-			#gpio-cells = <2>;
-			clocks = <&clkc 42>;
-			gpio-controller;
-			interrupt-parent = <&intc>;
-			interrupts = <0 20 4>;
-			reg = <0xe000a000 0x1000>;
-		};
-
-		i2c0: i2c@e0004000 {
-			compatible = "cdns,i2c-r1p10";
-			status = "disabled";
-			clocks = <&clkc 38>;
-			interrupt-parent = <&intc>;
-			interrupts = <0 25 4>;
-			reg = <0xe0004000 0x1000>;
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		i2c1: i2c@e0005000 {
-			compatible = "cdns,i2c-r1p10";
-			status = "disabled";
-			clocks = <&clkc 39>;
-			interrupt-parent = <&intc>;
-			interrupts = <0 48 4>;
-			reg = <0xe0005000 0x1000>;
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
 		intc: interrupt-controller@f8f01000 {
 			compatible = "arm,cortex-a9-gic";
 			#interrupt-cells = <3>;
+			#address-cells = <1>;
 			interrupt-controller;
 			reg = <0xF8F01000 0x1000>,
 			      <0xF8F00100 0x100>;
 		};
 
-		L2: cache-controller@f8f02000 {
+		L2: cache-controller {
 			compatible = "arm,pl310-cache";
 			reg = <0xF8F02000 0x1000>;
-			arm,data-latency = <3 2 2>;
-			arm,tag-latency = <2 2 2>;
+			arm,data-latency = <2 3 2>;
+			arm,tag-latency = <2 3 2>;
 			cache-unified;
 			cache-level = <2>;
 		};
 
-		mc: memory-controller@f8006000 {
-			compatible = "xlnx,zynq-ddrc-a05";
-			reg = <0xf8006000 0x1000>;
-		};
-
-		uart0: serial@e0000000 {
-			compatible = "xlnx,xuartps", "cdns,uart-r1p8";
-			status = "disabled";
-			clocks = <&clkc 23>, <&clkc 40>;
-			clock-names = "uart_clk", "pclk";
+		uart0: uart@e0000000 {
+			compatible = "xlnx,xuartps";
 			reg = <0xE0000000 0x1000>;
 			interrupts = <0 27 4>;
+			clocks = <&uart_clk 0>;
 		};
 
-		uart1: serial@e0001000 {
-			compatible = "xlnx,xuartps", "cdns,uart-r1p8";
-			status = "disabled";
-			clocks = <&clkc 24>, <&clkc 41>;
-			clock-names = "uart_clk", "pclk";
+		uart1: uart@e0001000 {
+			compatible = "xlnx,xuartps";
 			reg = <0xE0001000 0x1000>;
 			interrupts = <0 50 4>;
-		};
-
-		spi0: spi@e0006000 {
-			compatible = "xlnx,zynq-spi-r1p6";
-			reg = <0xe0006000 0x1000>;
-			status = "disabled";
-			interrupt-parent = <&intc>;
-			interrupts = <0 26 4>;
-			clocks = <&clkc 25>, <&clkc 34>;
-			clock-names = "ref_clk", "pclk";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		spi1: spi@e0007000 {
-			compatible = "xlnx,zynq-spi-r1p6";
-			reg = <0xe0007000 0x1000>;
-			status = "disabled";
-			interrupt-parent = <&intc>;
-			interrupts = <0 49 4>;
-			clocks = <&clkc 26>, <&clkc 35>;
-			clock-names = "ref_clk", "pclk";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		gem0: ethernet@e000b000 {
-			compatible = "cdns,gem";
-			reg = <0xe000b000 0x1000>;
-			status = "disabled";
-			interrupts = <0 22 4>;
-			clocks = <&clkc 30>, <&clkc 30>, <&clkc 13>;
-			clock-names = "pclk", "hclk", "tx_clk";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		gem1: ethernet@e000c000 {
-			compatible = "cdns,gem";
-			reg = <0xe000c000 0x1000>;
-			status = "disabled";
-			interrupts = <0 45 4>;
-			clocks = <&clkc 31>, <&clkc 31>, <&clkc 14>;
-			clock-names = "pclk", "hclk", "tx_clk";
-			#address-cells = <1>;
-			#size-cells = <0>;
-		};
-
-		sdhci0: sdhci@e0100000 {
-			compatible = "arasan,sdhci-8.9a";
-			status = "disabled";
-			clock-names = "clk_xin", "clk_ahb";
-			clocks = <&clkc 21>, <&clkc 32>;
-			interrupt-parent = <&intc>;
-			interrupts = <0 24 4>;
-			reg = <0xe0100000 0x1000>;
-		};
-
-		sdhci1: sdhci@e0101000 {
-			compatible = "arasan,sdhci-8.9a";
-			status = "disabled";
-			clock-names = "clk_xin", "clk_ahb";
-			clocks = <&clkc 22>, <&clkc 33>;
-			interrupt-parent = <&intc>;
-			interrupts = <0 47 4>;
-			reg = <0xe0101000 0x1000>;
+			clocks = <&uart_clk 1>;
 		};
 
 		slcr: slcr@f8000000 {
-			#address-cells = <1>;
-			#size-cells = <1>;
-			compatible = "xlnx,zynq-slcr", "syscon", "simple-bus";
+			compatible = "xlnx,zynq-slcr";
 			reg = <0xF8000000 0x1000>;
-			ranges;
-			clkc: clkc@100 {
-				#clock-cells = <1>;
-				compatible = "xlnx,ps7-clkc";
-				fclk-enable = <0>;
-				clock-output-names = "armpll", "ddrpll", "iopll", "cpu_6or4x",
-						"cpu_3or2x", "cpu_2x", "cpu_1x", "ddr2x", "ddr3x",
-						"dci", "lqspi", "smc", "pcap", "gem0", "gem1",
-						"fclk0", "fclk1", "fclk2", "fclk3", "can0", "can1",
-						"sdio0", "sdio1", "uart0", "uart1", "spi0", "spi1",
-						"dma", "usb0_aper", "usb1_aper", "gem0_aper",
-						"gem1_aper", "sdio0_aper", "sdio1_aper",
-						"spi0_aper", "spi1_aper", "can0_aper", "can1_aper",
-						"i2c0_aper", "i2c1_aper", "uart0_aper", "uart1_aper",
-						"gpio_aper", "lqspi_aper", "smc_aper", "swdt",
-						"dbg_trc", "dbg_apb";
-				reg = <0x100 0x100>;
-			};
 
-			pinctrl0: pinctrl@700 {
-				compatible = "xlnx,pinctrl-zynq";
-				reg = <0x700 0x200>;
-				syscon = <&slcr>;
+			clocks {
+				#address-cells = <1>;
+				#size-cells = <0>;
+
+				ps_clk: ps_clk {
+					#clock-cells = <0>;
+					compatible = "fixed-clock";
+					/* clock-frequency set in board-specific file */
+					clock-output-names = "ps_clk";
+				};
+				armpll: armpll {
+					#clock-cells = <0>;
+					compatible = "xlnx,zynq-pll";
+					clocks = <&ps_clk>;
+					reg = <0x100 0x110>;
+					clock-output-names = "armpll";
+				};
+				ddrpll: ddrpll {
+					#clock-cells = <0>;
+					compatible = "xlnx,zynq-pll";
+					clocks = <&ps_clk>;
+					reg = <0x104 0x114>;
+					clock-output-names = "ddrpll";
+				};
+				iopll: iopll {
+					#clock-cells = <0>;
+					compatible = "xlnx,zynq-pll";
+					clocks = <&ps_clk>;
+					reg = <0x108 0x118>;
+					clock-output-names = "iopll";
+				};
+				uart_clk: uart_clk {
+					#clock-cells = <1>;
+					compatible = "xlnx,zynq-periph-clock";
+					clocks = <&iopll &armpll &ddrpll>;
+					reg = <0x154>;
+					clock-output-names = "uart0_ref_clk",
+							     "uart1_ref_clk";
+				};
+				cpu_clk: cpu_clk {
+					#clock-cells = <1>;
+					compatible = "xlnx,zynq-cpu-clock";
+					clocks = <&iopll &armpll &ddrpll>;
+					reg = <0x120 0x1C4>;
+					clock-output-names = "cpu_6x4x",
+							     "cpu_3x2x",
+							     "cpu_2x",
+							     "cpu_1x";
+				};
 			};
 		};
 
-		dmac_s: dmac@f8003000 {
-			compatible = "arm,pl330", "arm,primecell";
-			reg = <0xf8003000 0x1000>;
-			interrupt-parent = <&intc>;
-			interrupt-names = "abort", "dma0", "dma1", "dma2", "dma3",
-				"dma4", "dma5", "dma6", "dma7";
-			interrupts = <0 13 4>,
-			             <0 14 4>, <0 15 4>,
-			             <0 16 4>, <0 17 4>,
-			             <0 40 4>, <0 41 4>,
-			             <0 42 4>, <0 43 4>;
-			#dma-cells = <1>;
-			#dma-channels = <8>;
-			#dma-requests = <4>;
-			clocks = <&clkc 27>;
-			clock-names = "apb_pclk";
-		};
-
-		devcfg: devcfg@f8007000 {
-			compatible = "xlnx,zynq-devcfg-1.0";
-			reg = <0xf8007000 0x100>;
-		};
-
-		global_timer: timer@f8f00200 {
-			compatible = "arm,cortex-a9-global-timer";
-			reg = <0xf8f00200 0x20>;
-			interrupts = <1 11 0x301>;
+		ttc0: ttc0@f8001000 {
 			interrupt-parent = <&intc>;
-			clocks = <&clkc 4>;
-		};
-
-		ttc0: timer@f8001000 {
-			interrupt-parent = <&intc>;
-			interrupts = <0 10 4>, <0 11 4>, <0 12 4>;
+			interrupts = < 0 10 4 0 11 4 0 12 4 >;
 			compatible = "cdns,ttc";
-			clocks = <&clkc 6>;
 			reg = <0xF8001000 0x1000>;
+			clocks = <&cpu_clk 3>;
+			clock-names = "cpu_1x";
+			clock-ranges;
 		};
 
-		ttc1: timer@f8002000 {
+		ttc1: ttc1@f8002000 {
 			interrupt-parent = <&intc>;
-			interrupts = <0 37 4>, <0 38 4>, <0 39 4>;
+			interrupts = < 0 37 4 0 38 4 0 39 4 >;
 			compatible = "cdns,ttc";
-			clocks = <&clkc 6>;
 			reg = <0xF8002000 0x1000>;
+			clocks = <&cpu_clk 3>;
+			clock-names = "cpu_1x";
+			clock-ranges;
 		};
-
-		scutimer: timer@f8f00600 {
+		scutimer: scutimer@f8f00600 {
 			interrupt-parent = <&intc>;
-			interrupts = <1 13 0x301>;
+			interrupts = < 1 13 0x301 >;
 			compatible = "arm,cortex-a9-twd-timer";
-			reg = <0xf8f00600 0x20>;
-			clocks = <&clkc 4>;
-		};
-
-		usb0: usb@e0002000 {
-			compatible = "xlnx,zynq-usb-2.20a", "chipidea,usb2";
-			status = "disabled";
-			clocks = <&clkc 28>;
-			interrupt-parent = <&intc>;
-			interrupts = <0 21 4>;
-			reg = <0xe0002000 0x1000>;
-			phy_type = "ulpi";
-		};
-
-		usb1: usb@e0003000 {
-			compatible = "xlnx,zynq-usb-2.20a", "chipidea,usb2";
-			status = "disabled";
-			clocks = <&clkc 29>;
-			interrupt-parent = <&intc>;
-			interrupts = <0 44 4>;
-			reg = <0xe0003000 0x1000>;
-			phy_type = "ulpi";
-		};
-
-		watchdog0: watchdog@f8005000 {
-			clocks = <&clkc 45>;
-			compatible = "cdns,wdt-r1p2";
-			interrupt-parent = <&intc>;
-			interrupts = <0 9 1>;
-			reg = <0xf8005000 0x1000>;
-			timeout-sec = <10>;
-		};
+			reg = < 0xf8f00600 0x20 >;
+			clocks = <&cpu_clk 1>;
+		} ;
 	};
 };
diff -urNp a/arch/arm/boot/dts/zynq-zc702.dts b/arch/arm/boot/dts/zynq-zc702.dts
--- a/arch/arm/boot/dts/zynq-zc702.dts	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/boot/dts/zynq-zc702.dts	2015-10-27 00:45:05.000000000 +0000
@@ -1,5 +1,5 @@
 /*
- *  Copyright (C) 2011 - 2014 Xilinx
+ *  Copyright (C) 2011 Xilinx
  *  Copyright (C) 2012 National Instruments Corp.
  *
  * This software is licensed under the terms of the GNU General Public
@@ -18,348 +18,17 @@
 	model = "Zynq ZC702 Development Board";
 	compatible = "xlnx,zynq-zc702", "xlnx,zynq-7000";
 
-	aliases {
-		ethernet0 = &gem0;
-		i2c0 = &i2c0;
-		serial0 = &uart1;
-	};
-
 	memory {
 		device_type = "memory";
 		reg = <0x0 0x40000000>;
 	};
 
 	chosen {
-		bootargs = "console=ttyPS0,115200 earlyprintk";
-	};
-
-	leds {
-		compatible = "gpio-leds";
-
-		ds23 {
-			label = "ds23";
-			gpios = <&gpio0 10 0>;
-			linux,default-trigger = "heartbeat";
-		};
-	};
-
-	usb_phy0: phy0 {
-		compatible = "usb-nop-xceiv";
-		#phy-cells = <0>;
-	};
-};
-
-&can0 {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_can0_default>;
-};
-
-&clkc {
-	ps-clk-frequency = <33333333>;
-};
-
-&gem0 {
-	status = "okay";
-	phy-mode = "rgmii-id";
-	phy-handle = <&ethernet_phy>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_gem0_default>;
-
-	ethernet_phy: ethernet-phy@7 {
-		reg = <7>;
-	};
-};
-
-&gpio0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_gpio0_default>;
-};
-
-&i2c0 {
-	status = "okay";
-	clock-frequency = <400000>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_i2c0_default>;
-
-	i2cswitch@74 {
-		compatible = "nxp,pca9548";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		reg = <0x74>;
-
-		i2c@0 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <0>;
-			si570: clock-generator@5d {
-				#clock-cells = <0>;
-				compatible = "silabs,si570";
-				temperature-stability = <50>;
-				reg = <0x5d>;
-				factory-fout = <156250000>;
-				clock-frequency = <148500000>;
-			};
-		};
-
-		i2c@2 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <2>;
-			eeprom@54 {
-				compatible = "at,24c08";
-				reg = <0x54>;
-			};
-		};
-
-		i2c@3 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <3>;
-			gpio@21 {
-				compatible = "ti,tca6416";
-				reg = <0x21>;
-				gpio-controller;
-				#gpio-cells = <2>;
-			};
-		};
-
-		i2c@4 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <4>;
-			rtc@51 {
-				compatible = "nxp,pcf8563";
-				reg = <0x51>;
-			};
-		};
-
-		i2c@7 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			reg = <7>;
-			hwmon@52 {
-				compatible = "ti,ucd9248";
-				reg = <52>;
-			};
-			hwmon@53 {
-				compatible = "ti,ucd9248";
-				reg = <53>;
-			};
-			hwmon@54 {
-				compatible = "ti,ucd9248";
-				reg = <54>;
-			};
-		};
+		bootargs = "console=ttyPS1,115200 earlyprintk";
 	};
-};
-
-&pinctrl0 {
-	pinctrl_can0_default: can0-default {
-		mux {
-			function = "can0";
-			groups = "can0_9_grp";
-		};
-
-		conf {
-			groups = "can0_9_grp";
-			slew-rate = <0>;
-			io-standard = <1>;
-		};
-
-		conf-rx {
-			pins = "MIO46";
-			bias-high-impedance;
-		};
-
-		conf-tx {
-			pins = "MIO47";
-			bias-disable;
-		};
-	};
-
-	pinctrl_gem0_default: gem0-default {
-		mux {
-			function = "ethernet0";
-			groups = "ethernet0_0_grp";
-		};
-
-		conf {
-			groups = "ethernet0_0_grp";
-			slew-rate = <0>;
-			io-standard = <4>;
-		};
-
-		conf-rx {
-			pins = "MIO22", "MIO23", "MIO24", "MIO25", "MIO26", "MIO27";
-			bias-high-impedance;
-			low-power-disable;
-		};
-
-		conf-tx {
-			pins = "MIO16", "MIO17", "MIO18", "MIO19", "MIO20", "MIO21";
-			bias-disable;
-			low-power-enable;
-		};
-
-		mux-mdio {
-			function = "mdio0";
-			groups = "mdio0_0_grp";
-		};
-
-		conf-mdio {
-			groups = "mdio0_0_grp";
-			slew-rate = <0>;
-			io-standard = <1>;
-			bias-disable;
-		};
-	};
-
-	pinctrl_gpio0_default: gpio0-default {
-		mux {
-			function = "gpio0";
-			groups = "gpio0_7_grp", "gpio0_8_grp", "gpio0_9_grp",
-				 "gpio0_10_grp", "gpio0_11_grp", "gpio0_12_grp",
-				 "gpio0_13_grp", "gpio0_14_grp";
-		};
-
-		conf {
-			groups = "gpio0_7_grp", "gpio0_8_grp", "gpio0_9_grp",
-				 "gpio0_10_grp", "gpio0_11_grp", "gpio0_12_grp",
-				 "gpio0_13_grp", "gpio0_14_grp";
-			slew-rate = <0>;
-			io-standard = <1>;
-		};
-
-		conf-pull-up {
-			pins = "MIO9", "MIO10", "MIO11", "MIO12", "MIO13", "MIO14";
-			bias-pull-up;
-		};
-
-		conf-pull-none {
-			pins = "MIO7", "MIO8";
-			bias-disable;
-		};
-	};
-
-	pinctrl_i2c0_default: i2c0-default {
-		mux {
-			groups = "i2c0_10_grp";
-			function = "i2c0";
-		};
-
-		conf {
-			groups = "i2c0_10_grp";
-			bias-pull-up;
-			slew-rate = <0>;
-			io-standard = <1>;
-		};
-	};
-
-	pinctrl_sdhci0_default: sdhci0-default {
-		mux {
-			groups = "sdio0_2_grp";
-			function = "sdio0";
-		};
-
-		conf {
-			groups = "sdio0_2_grp";
-			slew-rate = <0>;
-			io-standard = <1>;
-			bias-disable;
-		};
-
-		mux-cd {
-			groups = "gpio0_0_grp";
-			function = "sdio0_cd";
-		};
-
-		conf-cd {
-			groups = "gpio0_0_grp";
-			bias-high-impedance;
-			bias-pull-up;
-			slew-rate = <0>;
-			io-standard = <1>;
-		};
-
-		mux-wp {
-			groups = "gpio0_15_grp";
-			function = "sdio0_wp";
-		};
-
-		conf-wp {
-			groups = "gpio0_15_grp";
-			bias-high-impedance;
-			bias-pull-up;
-			slew-rate = <0>;
-			io-standard = <1>;
-		};
-	};
-
-	pinctrl_uart1_default: uart1-default {
-		mux {
-			groups = "uart1_10_grp";
-			function = "uart1";
-		};
-
-		conf {
-			groups = "uart1_10_grp";
-			slew-rate = <0>;
-			io-standard = <1>;
-		};
-
-		conf-rx {
-			pins = "MIO49";
-			bias-high-impedance;
-		};
-
-		conf-tx {
-			pins = "MIO48";
-			bias-disable;
-		};
-	};
-
-	pinctrl_usb0_default: usb0-default {
-		mux {
-			groups = "usb0_0_grp";
-			function = "usb0";
-		};
-
-		conf {
-			groups = "usb0_0_grp";
-			slew-rate = <0>;
-			io-standard = <1>;
-		};
-
-		conf-rx {
-			pins = "MIO29", "MIO31", "MIO36";
-			bias-high-impedance;
-		};
-
-		conf-tx {
-			pins = "MIO28", "MIO30", "MIO32", "MIO33", "MIO34",
-			       "MIO35", "MIO37", "MIO38", "MIO39";
-			bias-disable;
-		};
-	};
-};
-
-&sdhci0 {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_sdhci0_default>;
-};
 
-&uart1 {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_uart1_default>;
 };
 
-&usb0 {
-	status = "okay";
-	dr_mode = "host";
-	usb-phy = <&usb_phy0>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usb0_default>;
+&ps_clk {
+	clock-frequency = <33333330>;
 };
diff -urNp a/arch/arm/configs/sti_defconfig b/arch/arm/configs/sti_defconfig
--- a/arch/arm/configs/sti_defconfig	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/configs/sti_defconfig	2019-10-03 19:36:27.527945700 +0100
@@ -0,0 +1 @@
+# CONFIG_SWAP is not setCONFIG_POSIX_MQUEUE=yCONFIG_NO_HZ=yCONFIG_HIGH_RES_TIMERS=yCONFIG_IKCONFIG=yCONFIG_IKCONFIG_PROC=yCONFIG_LOG_BUF_SHIFT=19CONFIG_CGROUPS=yCONFIG_CGROUP_FREEZER=yCONFIG_CGROUP_DEVICE=yCONFIG_CPUSETS=yCONFIG_CGROUP_CPUACCT=yCONFIG_RESOURCE_COUNTERS=yCONFIG_MEMCG=yCONFIG_MEMCG_KMEM=yCONFIG_NAMESPACES=yCONFIG_EMBEDDED=yCONFIG_PERF_EVENTS=y# CONFIG_COMPAT_BRK is not setCONFIG_MODULE_UNLOAD=yCONFIG_MODULE_SRCVERSION_ALL=yCONFIG_ARCH_STI=yCONFIG_PCI=yCONFIG_PCI_MSI=yCONFIG_PCI_ST=yCONFIG_SMP=yCONFIG_PREEMPT=yCONFIG_AEABI=yCONFIG_HIGHMEM=yCONFIG_HIGHPTE=yCONFIG_CC_STACKPROTECTOR=yCONFIG_ARM_APPENDED_DTB=yCONFIG_CPU_FREQ=yCONFIG_CPU_FREQ_GOV_USERSPACE=yCONFIG_CPU_FREQ_GOV_ONDEMAND=yCONFIG_GENERIC_CPUFREQ_CPU0=yCONFIG_VFP=yCONFIG_NEON=yCONFIG_PM_RUNTIME=yCONFIG_PM_OPP=yCONFIG_NET=yCONFIG_PACKET=yCONFIG_UNIX=yCONFIG_INET=yCONFIG_IP_PNP=yCONFIG_IP_PNP_DHCP=yCONFIG_SYN_COOKIES=yCONFIG_IPV6=yCONFIG_NETFILTER=yCONFIG_NF_CONNTRACK=yCONFIG_NF_CONNTRACK_IPV4=yCONFIG_IP_NF_IPTABLES=yCONFIG_IP_NF_FILTER=yCONFIG_NF_NAT_IPV4=yCONFIG_IP_NF_RAW=yCONFIG_NF_CONNTRACK_IPV6=yCONFIG_IP6_NF_IPTABLES=yCONFIG_IP6_NF_FILTER=yCONFIG_IP6_NF_RAW=yCONFIG_NF_NAT_IPV6=yCONFIG_BRIDGE=y# CONFIG_BRIDGE_IGMP_SNOOPING is not setCONFIG_CAN=yCONFIG_CAN_VCAN=yCONFIG_CAN_MCP251X=yCONFIG_DEVTMPFS=yCONFIG_DEVTMPFS_MOUNT=yCONFIG_CONNECTOR=yCONFIG_MTD=yCONFIG_MTD_BLOCK=yCONFIG_MTD_STM_SPI_FSM=yCONFIG_MTD_ST_SFC_C=yCONFIG_MTD_NAND=yCONFIG_MTD_NAND_STM_BCH=yCONFIG_MTD_UBI=yCONFIG_EEPROM_AT24=yCONFIG_BLK_DEV_SD=yCONFIG_ATA=yCONFIG_SATA_AHCI_PLATFORM=yCONFIG_SATA_AHCI_ST=yCONFIG_NETDEVICES=yCONFIG_VETH=y# CONFIG_NET_VENDOR_3COM is not set# CONFIG_NET_VENDOR_ADAPTEC is not set# CONFIG_NET_VENDOR_ALTEON is not set# CONFIG_NET_VENDOR_AMD is not set# CONFIG_NET_VENDOR_ATHEROS is not set# CONFIG_NET_CADENCE is not set# CONFIG_NET_VENDOR_BROADCOM is not set# CONFIG_NET_VENDOR_BROCADE is not set# CONFIG_NET_VENDOR_CHELSIO is not set# CONFIG_NET_VENDOR_CIRRUS is not set# CONFIG_NET_VENDOR_CISCO is not set# CONFIG_NET_VENDOR_DEC is not set# CONFIG_NET_VENDOR_DLINK is not set# CONFIG_NET_VENDOR_EMULEX is not set# CONFIG_NET_VENDOR_EXAR is not set# CONFIG_NET_VENDOR_FARADAY is not set# CONFIG_NET_VENDOR_HP is not set# CONFIG_NET_VENDOR_INTEL is not set# CONFIG_NET_VENDOR_MARVELL is not set# CONFIG_NET_VENDOR_MELLANOX is not set# CONFIG_NET_VENDOR_MICREL is not set# CONFIG_NET_VENDOR_MICROCHIP is not set# CONFIG_NET_VENDOR_MYRI is not set# CONFIG_NET_VENDOR_NATSEMI is not set# CONFIG_NET_VENDOR_NVIDIA is not set# CONFIG_NET_VENDOR_OKI is not set# CONFIG_NET_PACKET_ENGINE is not set# CONFIG_NET_VENDOR_QLOGIC is not set# CONFIG_NET_VENDOR_RDC is not set# CONFIG_NET_VENDOR_SEEQ is not set# CONFIG_NET_VENDOR_SILAN is not set# CONFIG_NET_VENDOR_SIS is not set# CONFIG_NET_VENDOR_SMSC is not setCONFIG_STMMAC_ETH=yCONFIG_FASTPATH_ST=yCONFIG_ISVE_ST=y# CONFIG_NET_VENDOR_SUN is not set# CONFIG_NET_VENDOR_TEHUTI is not set# CONFIG_NET_VENDOR_TI is not set# CONFIG_NET_VENDOR_VIA is not set# CONFIG_NET_VENDOR_WIZNET is not setCONFIG_ICPLUS_PHY=yCONFIG_REALTEK_PHY=yCONFIG_RTL8366_SMI=yCONFIG_RTL8366_SMI_DEBUG_FS=yCONFIG_RTL8367_PHY=yCONFIG_USB_PEGASUS=yCONFIG_USB_USBNET=yCONFIG_INPUT_MATRIXKMAP=y# CONFIG_INPUT_MOUSEDEV is not set# CONFIG_KEYBOARD_ATKBD is not setCONFIG_KEYBOARD_GPIO=yCONFIG_KEYBOARD_ST_KEYSCAN=y# CONFIG_INPUT_MOUSE is not setCONFIG_INPUT_TOUCHSCREEN=yCONFIG_TOUCHSCREEN_ST_FTK=yCONFIG_INPUT_MISC=yCONFIG_INPUT_TM1668=y# CONFIG_SERIO is not set# CONFIG_LEGACY_PTYS is not set# CONFIG_DEVKMEM is not setCONFIG_SERIAL_ST_ASC=yCONFIG_SERIAL_ST_ASC_CONSOLE=yCONFIG_HW_RANDOM=yCONFIG_HW_RANDOM_ST=yCONFIG_I2C=yCONFIG_I2C_CHARDEV=yCONFIG_I2C_ST=yCONFIG_SPI=yCONFIG_SPI_GPIO=yCONFIG_SPI_ST=yCONFIG_SPI_SPIDEV=yCONFIG_GPIO_SYSFS=yCONFIG_GPIO_ST_FAKE=yCONFIG_GPIO_ST_WAKEUP=yCONFIG_POWER_SUPPLY=yCONFIG_POWER_RESET=yCONFIG_POWER_RESET_ST=y# CONFIG_HWMON is not setCONFIG_THERMAL=yCONFIG_CPU_THERMAL=yCONFIG_ST_THERMAL=yCONFIG_ST_THERMAL_SYSCFG=yCONFIG_ST_THERMAL_MEMMAP=yCONFIG_WATCHDOG=yCONFIG_ST_LPC_WATCHDOG=yCONFIG_REGULATOR=yCONFIG_REGULATOR_ST_PWM=yCONFIG_REGULATOR_ST_FLASHSS=yCONFIG_MEDIA_SUPPORT=yCONFIG_MEDIA_CAMERA_SUPPORT=yCONFIG_MEDIA_ANALOG_TV_SUPPORT=yCONFIG_MEDIA_DIGITAL_TV_SUPPORT=yCONFIG_MEDIA_RC_SUPPORT=yCONFIG_MEDIA_CONTROLLER=yCONFIG_VIDEO_V4L2_SUBDEV_API=yCONFIG_DVB_DYNAMIC_MINORS=yCONFIG_LIRC=yCONFIG_RC_DEVICES=yCONFIG_RC_ST=yCONFIG_V4L_PLATFORM_DRIVERS=yCONFIG_VIDEO_STI=yCONFIG_FB=yCONFIG_FB_MODE_HELPERS=yCONFIG_FB_SIMPLE=yCONFIG_SOUND=yCONFIG_SND=yCONFIG_SND_PCM_OSS=yCONFIG_SND_DYNAMIC_MINORS=yCONFIG_SND_SOC=yCONFIG_SND_SOC_STI=yCONFIG_SND_SOC_STI_SAS=yCONFIG_SND_SOC_ST6440=yCONFIG_SND_STM=yCONFIG_SND_STI_ALOOP=yCONFIG_USB=yCONFIG_USB_XHCI_HCD=yCONFIG_USB_EHCI_HCD=yCONFIG_USB_OHCI_HCD=yCONFIG_USB_HCD_ST=yCONFIG_USB_STORAGE=yCONFIG_USB_DWC3=yCONFIG_USB_PHY=yCONFIG_ST_USB3_MIPHY=yCONFIG_MMC=yCONFIG_MMC_SDHCI=yCONFIG_MMC_SDHCI_PLTFM=yCONFIG_MMC_SDHCI_ST=yCONFIG_NEW_LEDS=yCONFIG_LEDS_CLASS=yCONFIG_LEDS_GPIO=yCONFIG_LEDS_TRIGGERS=yCONFIG_LEDS_TRIGGER_HEARTBEAT=yCONFIG_RTC_CLASS=y# CONFIG_RTC_SYSTOHC is not setCONFIG_RTC_DRV_ST_SBC=yCONFIG_ST_AMBA_BRIDGE=yCONFIG_ST_CPUFREQ_INIT=yCONFIG_MAILBOX=yCONFIG_STI_MBOX=y# CONFIG_IOMMU_SUPPORT is not setCONFIG_ST_REMOTEPROC=mCONFIG_MEMORY=yCONFIG_ST_DDR_CNTRL=yCONFIG_PWM=yCONFIG_PWM_STI=yCONFIG_PHY_STIH41X_USB=yCONFIG_PHY_MIPHY365X=yCONFIG_PHY_STID127_USB=yCONFIG_PHY_MIPHY28LP=yCONFIG_PHY_STIH407_USB=yCONFIG_STI_USB2_XPHY=yCONFIG_EXT2_FS=yCONFIG_EXT2_FS_XATTR=yCONFIG_EXT2_FS_POSIX_ACL=yCONFIG_EXT2_FS_SECURITY=yCONFIG_EXT3_FS=yCONFIG_EXT3_FS_POSIX_ACL=yCONFIG_EXT3_FS_SECURITY=yCONFIG_EXT4_FS=yCONFIG_EXT4_FS_POSIX_ACL=yCONFIG_EXT4_FS_SECURITY=y# CONFIG_DNOTIFY is not setCONFIG_FUSE_FS=yCONFIG_VFAT_FS=yCONFIG_NTFS_FS=yCONFIG_TMPFS=yCONFIG_TMPFS_POSIX_ACL=yCONFIG_JFFS2_FS=yCONFIG_JFFS2_FS_XATTR=yCONFIG_UBIFS_FS=yCONFIG_NFS_FS=yCONFIG_ROOT_NFS=yCONFIG_NLS_CODEPAGE_437=yCONFIG_NLS_ISO8859_1=yCONFIG_PRINTK_TIME=yCONFIG_FRAME_WARN=2048CONFIG_MAGIC_SYSRQ=yCONFIG_DEBUG_SECTION_MISMATCH=yCONFIG_DEBUG_INFO=yCONFIG_DEBUG_MEMORY_INIT=yCONFIG_FUNCTION_TRACER=yCONFIG_KPTRACE=yCONFIG_KPTRACE_SYNC=yCONFIG_STM_SYSTRACE=yCONFIG_DYNAMIC_DEBUG=yCONFIG_CRYPTO_MANAGER=yCONFIG_CRYPTO_SEQIV=yCONFIG_CRYPTO_MD5=yCONFIG_CRYPTO_SHA1=yCONFIG_CRYPTO_SHA256=y# CONFIG_CRYPTO_ANSI_CPRNG is not set# CONFIG_CRYPTO_HW is not setCONFIG_XZ_DEC=y
\ No newline at end of file
diff -urNp a/arch/arm/include/asm/bug.h b/arch/arm/include/asm/bug.h
--- a/arch/arm/include/asm/bug.h	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/include/asm/bug.h	2019-10-03 19:39:29.646276600 +0100
@@ -56,7 +56,19 @@ do {								\
 #endif  /* CONFIG_DEBUG_BUGVERBOSE */
 
 #define HAVE_ARCH_BUG
-#endif  /* CONFIG_BUG */
+#elif defined(CONFIG_ARCH_STI)  /* CONFIG_BUG */
+#include <asm/system_misc.h>
+
+#define HAVE_ARCH_BUG
+#define BUG() do { \
+	arm_pm_restart('h', NULL); \
+	unreachable();						\
+} while (0)
+
+#define HAVE_ARCH_BUG_ON
+#define BUG_ON(condition) do { if (unlikely(condition)) BUG(); } while (0)
+
+#endif /* CONFIG_ARCH_STI */
 
 #include <asm-generic/bug.h>
 
diff -urNp a/arch/arm/include/asm/hardware/cache-l2x0.h b/arch/arm/include/asm/hardware/cache-l2x0.h
--- a/arch/arm/include/asm/hardware/cache-l2x0.h	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/include/asm/hardware/cache-l2x0.h	2019-10-04 08:14:52.501812900 +0100
@@ -26,8 +26,8 @@
 #define L2X0_CACHE_TYPE			0x004
 #define L2X0_CTRL			0x100
 #define L2X0_AUX_CTRL			0x104
-#define L310_TAG_LATENCY_CTRL		0x108
-#define L310_DATA_LATENCY_CTRL		0x10C
+#define L2X0_TAG_LATENCY_CTRL		0x108
+#define L2X0_DATA_LATENCY_CTRL		0x10C
 #define L2X0_EVENT_CNT_CTRL		0x200
 #define L2X0_EVENT_CNT1_CFG		0x204
 #define L2X0_EVENT_CNT0_CFG		0x208
@@ -54,16 +54,16 @@
 #define L2X0_LOCKDOWN_WAY_D_BASE	0x900
 #define L2X0_LOCKDOWN_WAY_I_BASE	0x904
 #define L2X0_LOCKDOWN_STRIDE		0x08
-#define L310_ADDR_FILTER_START		0xC00
-#define L310_ADDR_FILTER_END		0xC04
+#define L2X0_ADDR_FILTER_START		0xC00
+#define L2X0_ADDR_FILTER_END		0xC04
 #define L2X0_TEST_OPERATION		0xF00
 #define L2X0_LINE_DATA			0xF10
 #define L2X0_LINE_TAG			0xF30
 #define L2X0_DEBUG_CTRL			0xF40
-#define L310_PREFETCH_CTRL		0xF60
-#define L310_POWER_CTRL			0xF80
-#define   L310_DYNAMIC_CLK_GATING_EN	(1 << 1)
-#define   L310_STNDBY_MODE_EN		(1 << 0)
+#define L2X0_PREFETCH_CTRL		0xF60
+#define L2X0_POWER_CTRL			0xF80
+#define   L2X0_DYNAMIC_CLK_GATING_EN	(1 << 1)
+#define   L2X0_STNDBY_MODE_EN		(1 << 0)
 
 /* Registers shifts and masks */
 #define L2X0_CACHE_ID_PART_MASK		(0xf << 6)
@@ -87,6 +87,63 @@
 #define L310_CACHE_ID_RTL_R3P2		0x08
 #define L310_CACHE_ID_RTL_R3P3		0x09
 
+#define L2X0_AUX_CTRL_MASK			0xc0000fff
+#define L2X0_AUX_CTRL_DATA_RD_LATENCY_SHIFT	0
+#define L2X0_AUX_CTRL_DATA_RD_LATENCY_MASK	0x7
+#define L2X0_AUX_CTRL_DATA_WR_LATENCY_SHIFT	3
+#define L2X0_AUX_CTRL_DATA_WR_LATENCY_MASK	(0x7 << 3)
+#define L2X0_AUX_CTRL_TAG_LATENCY_SHIFT		6
+#define L2X0_AUX_CTRL_TAG_LATENCY_MASK		(0x7 << 6)
+#define L2X0_AUX_CTRL_DIRTY_LATENCY_SHIFT	9
+#define L2X0_AUX_CTRL_DIRTY_LATENCY_MASK	(0x7 << 9)
+#define L2X0_AUX_CTRL_ASSOCIATIVITY_SHIFT	16
+#define L2X0_AUX_CTRL_WAY_SIZE_SHIFT		17
+#define L2X0_AUX_CTRL_WAY_SIZE_MASK		(0x7 << 17)
+#define L2X0_AUX_CTRL_SHARE_OVERRIDE_SHIFT	22
+#define L2X0_AUX_CTRL_NS_LOCKDOWN_SHIFT		26
+#define L2X0_AUX_CTRL_NS_INT_CTRL_SHIFT		27
+#define L2X0_AUX_CTRL_DATA_PREFETCH_SHIFT	28
+#define L2X0_AUX_CTRL_INSTR_PREFETCH_SHIFT	29
+#define L2X0_AUX_CTRL_EARLY_BRESP_SHIFT		30
+
+#define L2X0_LATENCY_CTRL_SETUP_SHIFT	0
+#define L2X0_LATENCY_CTRL_RD_SHIFT	4
+#define L2X0_LATENCY_CTRL_WR_SHIFT	8
+
+#define L2X0_ADDR_FILTER_EN		1
+
+#define L2X0_CTRL_EN			1
+
+#define L2X0_WAY_SIZE_SHIFT		3
+
+/* L2C-220 specific bits */
+#define L220_AUX_CTRL_EXCLUSIVE_CACHE		BIT(12)
+#define L220_AUX_CTRL_FWA_SHIFT			23
+#define L220_AUX_CTRL_FWA_MASK			(3 << 23)
+#define L220_AUX_CTRL_NS_LOCKDOWN		BIT(26)
+#define L220_AUX_CTRL_NS_INT_CTRL		BIT(27)
+
+#define L310_TAG_LATENCY_CTRL		0x108
+#define L310_DATA_LATENCY_CTRL		0x10C
+
+#define L310_ADDR_FILTER_START		0xC00
+#define L310_ADDR_FILTER_END		0xC04
+
+#define L310_PREFETCH_CTRL		0xF60
+#define L310_POWER_CTRL			0xF80
+#define   L310_DYNAMIC_CLK_GATING_EN	(1 << 1)
+#define   L310_STNDBY_MODE_EN		(1 << 0)
+#define L310_CACHE_ID_RTL_R0P0		0x00
+#define L310_CACHE_ID_RTL_R1P0		0x02
+#define L310_CACHE_ID_RTL_R2P0		0x04
+#define L310_CACHE_ID_RTL_R3P0		0x05
+#define L310_CACHE_ID_RTL_R3P1		0x06
+#define L310_CACHE_ID_RTL_R3P1_50REL0	0x07
+#define L310_CACHE_ID_RTL_R3P2		0x08
+#define L310_CACHE_ID_RTL_R3P3		0x09
+
+#define L2X0_CACHE_ID_PART_L310		(3 << 6)
+
 /* L2C auxiliary control register - bits common to L2C-210/220/310 */
 #define L2C_AUX_CTRL_WAY_SIZE_SHIFT		17
 #define L2C_AUX_CTRL_WAY_SIZE_MASK		(7 << 17)
@@ -115,6 +172,8 @@
 #define L220_AUX_CTRL_FWA_MASK			(3 << 23)
 #define L220_AUX_CTRL_NS_LOCKDOWN		BIT(26)
 #define L220_AUX_CTRL_NS_INT_CTRL		BIT(27)
+
+
 /* L2C-310 specific bits */
 #define L310_AUX_CTRL_FULL_LINE_ZERO		BIT(0)	/* R2P0+ */
 #define L310_AUX_CTRL_HIGHPRIO_SO_DEV		BIT(10)	/* R2P0+ */
@@ -142,9 +201,7 @@
 #define L310_PREFETCH_CTRL_INSTR_PREFETCH	BIT(29)
 #define L310_PREFETCH_CTRL_DBL_LINEFILL		BIT(30)
 
-#define L2X0_CTRL_EN			1
 
-#define L2X0_WAY_SIZE_SHIFT		3
 
 #ifndef __ASSEMBLY__
 extern void __init l2x0_init(void __iomem *base, u32 aux_val, u32 aux_mask);
diff -urNp a/arch/arm/include/asm/sched_clock.h b/arch/arm/include/asm/sched_clock.h
--- a/arch/arm/include/asm/sched_clock.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/include/asm/sched_clock.h	2015-10-27 00:45:05.000000000 +0000
@@ -0,0 +1,16 @@
+/*
+ * sched_clock.h: support for extending counters to full 64-bit ns counter
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#ifndef ASM_SCHED_CLOCK
+#define ASM_SCHED_CLOCK
+
+extern void sched_clock_postinit(void);
+extern void setup_sched_clock(u32 (*read)(void), int bits, unsigned long rate);
+
+extern unsigned long long (*sched_clock_func)(void);
+
+#endif
diff -urNp a/arch/arm/include/debug/sti.S b/arch/arm/include/debug/sti.S
--- a/arch/arm/include/debug/sti.S	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/include/debug/sti.S	2019-10-07 11:05:05.558897300 +0100
@@ -16,8 +16,29 @@
 #define STIH41X_SBC_COMMS_BASE          (STIH41X_SBC_LPM_BASE + 0x100000)
 #define STIH41X_SBC_ASC1_BASE           (STIH41X_SBC_COMMS_BASE + 0x31000)
 
+#define STIH407_SBC_COMMS_BASE          0x09500000
+#define STIH407_SBC_ASC0_BASE           (STIH407_SBC_COMMS_BASE + 0x30000)
 
-#define VIRT_ADDRESS(x)		(x - 0x1000000)
+#define STID127_COMMS_BASE              0xfe500000
+#define STID127_ASC2_BASE               (STID127_COMMS_BASE+0x32000)
+
+#define STIH390_COMMS_BASE              0x08900000
+#define STIH390_ASC0_BASE		(STIH390_COMMS_BASE + 0x30000)
+
+#define STID325_COMMS_BASE              0x08a00000
+#define STID325_ASC0_BASE		(STID325_COMMS_BASE + 0x30000)
+
+/* macro to get at IO space when running virtually */
+#ifdef CONFIG_MMU
+/*
+ * Statically mapped addresses:
+ *
+ * fc000000 to ffffffff (physical) -> fb000000 to feffffff (virtual)
+ */
+#define VIRT_ADDRESS(x)		(((x) & 0x03ffffff) + 0xfb000000)
+#else
+#define VIRT_ADDRESS(x)		(x)
+#endif
 
 #if IS_ENABLED(CONFIG_STIH41X_DEBUG_ASC2)
 #define DEBUG_LL_UART_BASE	STIH41X_ASC2_BASE
@@ -27,6 +48,22 @@
 #define DEBUG_LL_UART_BASE	STIH41X_SBC_ASC1_BASE
 #endif
 
+#if IS_ENABLED(CONFIG_STIH407_DEBUG_SBC_ASC0)
+#define DEBUG_LL_UART_BASE	STIH407_SBC_ASC0_BASE
+#endif
+
+#if IS_ENABLED(CONFIG_STID127_DEBUG_ASC2)
+#define DEBUG_LL_UART_BASE      STID127_ASC2_BASE
+#endif
+
+#if IS_ENABLED(CONFIG_STIH390_DEBUG_ASC0)
+#define DEBUG_LL_UART_BASE	STIH390_ASC0_BASE
+#endif
+
+#if IS_ENABLED(CONFIG_STID325_DEBUG_ASC0)
+#define DEBUG_LL_UART_BASE	STID325_ASC0_BASE
+#endif
+
 #ifndef DEBUG_LL_UART_BASE
 #error "DEBUG UART is not Configured"
 #endif
@@ -58,4 +95,4 @@
 1001:           ldr     \rd, [\rx, #ASC_STA_OFF]
                 tst     \rd, #ASC_STA_TX_EMPTY
                 beq     1001b
-                .endm
+                .endm
\ No newline at end of file
diff -urNp a/arch/arm/include/uapi/asm/setup.h b/arch/arm/include/uapi/asm/setup.h
--- a/arch/arm/include/uapi/asm/setup.h	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/include/uapi/asm/setup.h	2019-10-07 11:07:23.972405200 +0100
@@ -16,7 +16,7 @@
 
 #include <linux/types.h>
 
-#define COMMAND_LINE_SIZE 1024
+#define COMMAND_LINE_SIZE 2048
 
 /* The list ends with an ATAG_NONE node. */
 #define ATAG_NONE	0x00000000
diff -urNp a/arch/arm/kernel/bios32.c b/arch/arm/kernel/bios32.c
--- a/arch/arm/kernel/bios32.c	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/kernel/bios32.c	2019-10-07 10:45:08.616857200 +0100
@@ -369,6 +369,22 @@ void pcibios_fixup_bus(struct pci_bus *b
 }
 EXPORT_SYMBOL(pcibios_fixup_bus);
 
+
+void pcibios_add_bus(struct pci_bus *bus)
+{
+	struct pci_sys_data *sys = bus->sysdata;
+	if (sys->add_bus)
+		sys->add_bus(bus);
+}
+
+void pcibios_remove_bus(struct pci_bus *bus)
+{
+	struct pci_sys_data *sys = bus->sysdata;
+	if (sys->remove_bus)
+		sys->remove_bus(bus);
+}
+
+
 /*
  * Swizzle the device pin each time we cross a bridge.  If a platform does
  * not provide a swizzle function, we perform the standard PCI swizzling.
@@ -424,6 +440,9 @@ static int pcibios_init_resources(int bu
 	int ret;
 	struct resource_entry *window;
 
+	if (IS_ENABLED(CONFIG_ARCH_STI))
+		return 0;
+
 	if (list_empty(&sys->resources)) {
 		pci_add_resource_offset(&sys->resources,
 			 &iomem_resource, sys->mem_offset);
@@ -469,6 +488,8 @@ static void pcibios_init_hw(struct devic
 		sys->swizzle = hw->swizzle;
 		sys->map_irq = hw->map_irq;
 		sys->align_resource = hw->align_resource;
+		sys->add_bus = hw->add_bus;
+		sys->remove_bus = hw->remove_bus;
 		INIT_LIST_HEAD(&sys->resources);
 
 		if (hw->private_data)
diff -urNp a/arch/arm/kernel/entry-armv.S b/arch/arm/kernel/entry-armv.S
--- a/arch/arm/kernel/entry-armv.S	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/kernel/entry-armv.S	2019-10-07 10:47:46.063160700 +0100
@@ -548,7 +548,7 @@ ENDPROC(__und_usr)
 	.pushsection .fixup, "ax"
 	.align	2
 4:	str     r4, [sp, #S_PC]			@ retry current instruction
-	ret	r9
+	mov pc, r9
 	.popsection
 	.pushsection __ex_table,"a"
 	.long	1b, 4b
diff -urNp a/arch/arm/kernel/head-common.S b/arch/arm/kernel/head-common.S
--- a/arch/arm/kernel/head-common.S	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/kernel/head-common.S	2019-10-07 10:51:41.584023700 +0100
@@ -79,6 +79,47 @@ ENDPROC(__vet_atags)
  */
 	__INIT
 __mmap_switched:
+#ifdef CONFIG_ARCH_STI
+        /*
+         * Remove identity mapping as soon as possible i.e. just after
+         * MMU is switched ON, since the idmap entries might hide some
+         * part of kernel image if the virt-addr range of kernel image
+         * intersects with phy-addr range
+         */
+#ifdef CONFIG_ARM_LPAE
+	add     r4, r4, #0x1000         @ point to the PMD table
+#ifdef CONFIG_CPU_ENDIAN_BE8
+	add     r4, r4, #4              @ we only write the bottom word
+#endif
+#endif
+	ldr     r10, =PAGE_OFFSET
+	and     r6, lr, #0xff000000
+	sub     r10, r6, r10
+
+	mov     r4, r4, lsr #12
+	mov     r4, r4, lsl #12
+
+	sub     r4, r4, r10
+
+	add     r5, r4, #PAGE_OFFSET >> (SECTION_SHIFT - PMD_ORDER)
+	ldr     r6, =(_end - 1)
+	add     r6, r4, r6, lsr #(SECTION_SHIFT - PMD_ORDER)
+	mov     r4, r5
+	ldr	r3, [r4]
+1:      str     r3, [r4]
+	add     r4, r4, #1 << PMD_ORDER
+	add     r3, r3, #1 << SECTION_SHIFT
+	cmp     r4, r6
+	bls     1b
+	mcr     p15, 0, ip, c8, c7, 0
+#ifdef CONFIG_ARM_LPAE
+#ifdef CONFIG_CPU_ENDIAN_BE8
+	sub     r4, r4, #4                      @ Fixup page table pointer
+						@ for 64-bit descriptors
+#endif
+	sub     r4, r4, #0x1000         @ point to the PGD table
+#endif
+#endif
 	adr	r3, __mmap_switched_data
 
 	ldmia	r3!, {r4, r5, r6, r7}
diff -urNp a/arch/arm/kernel/head.S b/arch/arm/kernel/head.S
--- a/arch/arm/kernel/head.S	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/kernel/head.S	2019-10-07 11:00:01.921618800 +0100
@@ -397,6 +397,48 @@ ENDPROC(secondary_startup_arm)
 	 * r6  = &secondary_data
 	 */
 ENTRY(__secondary_switched)
+#ifdef CONFIG_ARCH_STI
+        /*
+         * Remove identity mapping as soon as possible i.e. just after
+	 * MMU is switched ON, since the idmap entries might hide some
+	 * part of kernel image if the virt-addr range of kernel image
+	 * intersects with phy-addr range
+         */
+#ifdef CONFIG_ARM_LPAE
+	add     r4, r4, #0x1000         @ point to the PMD table
+#ifdef CONFIG_CPU_ENDIAN_BE8
+	add     r4, r4, #4              @ we only write the bottom word
+#endif
+#endif
+	ldr     r10, =PAGE_OFFSET
+	and     r6, lr, #0xff000000
+	sub     r10, r6, r10
+
+	mov     r4, r4, lsr #12
+	mov     r4, r4, lsl #12
+
+	sub     r4, r4, r10
+
+	add     r5, r4, #PAGE_OFFSET >> (SECTION_SHIFT - PMD_ORDER)
+	ldr     r6, =(_end - 1)
+
+	add     r6, r4, r6, lsr #(SECTION_SHIFT - PMD_ORDER)
+	mov     r4, r5
+	ldr	r3, [r4]
+1:      str     r3, [r4]
+	add     r4, r4, #1 << PMD_ORDER
+	add     r3, r3, #1 << SECTION_SHIFT
+	cmp     r4, r6
+	bls     1b
+	mcr     p15, 0, ip, c8, c7, 0
+#ifdef CONFIG_ARM_LPAE
+#ifdef CONFIG_CPU_ENDIAN_BE8
+	sub     r4, r4, #4                      @ Fixup page table pointer
+						@ for 64-bit descriptors
+#endif
+	sub     r4, r4, #0x1000         @ point to the PGD table
+#endif
+#endif
 	ldr	sp, [r7, #4]			@ get secondary_data.stack
 	mov	fp, #0
 	b	secondary_start_kernel
diff -urNp a/arch/arm/mach-sti/.board-dt.o.cmd b/arch/arm/mach-sti/.board-dt.o.cmd
--- a/arch/arm/mach-sti/.board-dt.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/.board-dt.o.cmd	2019-09-26 21:23:55.508662300 +0100
@@ -0,0 +1,649 @@
+cmd_arch/arm/mach-sti/board-dt.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/.board-dt.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(board_dt)"  -D"KBUILD_MODNAME=KBUILD_STR(board_dt)" -c -o arch/arm/mach-sti/board-dt.o arch/arm/mach-sti/board-dt.c
+
+source_arch/arm/mach-sti/board-dt.o := arch/arm/mach-sti/board-dt.c
+
+deps_arch/arm/mach-sti/board-dt.o := \
+    $(wildcard include/config/fixed/phy.h) \
+  include/linux/clk-provider.h \
+    $(wildcard include/config/common/clk.h) \
+    $(wildcard include/config/pm/sleep.h) \
+  include/linux/clk.h \
+    $(wildcard include/config/have/clk/prepare.h) \
+    $(wildcard include/config/have/clk.h) \
+    $(wildcard include/config/of.h) \
+  include/linux/err.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/kernel.h \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/ring/buffer.h) \
+    $(wildcard include/config/tracing.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+    $(wildcard include/config/smp.h) \
+  include/linux/irqflags.h \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  include/linux/typecheck.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+    $(wildcard include/config/arm/lpae.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug.h) \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  include/linux/notifier.h \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/debug/lock/alloc.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  include/linux/spinlock_types.h \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/debug/spinlock.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/rwlock_types.h \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+    $(wildcard include/config/outer/cache.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/sa110.h) \
+    $(wildcard include/config/cpu/v6.h) \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/spinlock.h \
+    $(wildcard include/config/preempt.h) \
+  include/linux/preempt.h \
+    $(wildcard include/config/debug/preempt.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  include/linux/bug.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  include/linux/bottom_half.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/hotplug/cpu.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/cpumask.h \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/bitmap.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/seqlock.h \
+  include/linux/completion.h \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/rcutree.h \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+    $(wildcard include/config/sysfs.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/clocksource.h \
+    $(wildcard include/config/arch/clocksource/data.h) \
+    $(wildcard include/config/clocksource/watchdog.h) \
+    $(wildcard include/config/clksrc/of.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/io.h \
+    $(wildcard include/config/need/mach/io/h.h) \
+    $(wildcard include/config/pci.h) \
+    $(wildcard include/config/pcmcia/soc/common.h) \
+    $(wildcard include/config/isa.h) \
+    $(wildcard include/config/pccard.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+    $(wildcard include/config/sparsemem.h) \
+  include/asm-generic/pci_iomap.h \
+    $(wildcard include/config/no/generic/pci/ioport/map.h) \
+    $(wildcard include/config/generic/pci/iomap.h) \
+  arch/arm/mach-sti/include/mach/io.h \
+  include/linux/irq.h \
+    $(wildcard include/config/generic/hardirqs.h) \
+    $(wildcard include/config/generic/pending/irq.h) \
+    $(wildcard include/config/hardirqs/sw/resend.h) \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/gfp.h \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/zone/dma32.h) \
+    $(wildcard include/config/cma.h) \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/compaction.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/linux/nodemask.h \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/page-flags-layout.h \
+  include/generated/bounds.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  include/asm-generic/getorder.h \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/memory/hotremove.h) \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  include/linux/mmdebug.h \
+    $(wildcard include/config/debug/vm.h) \
+    $(wildcard include/config/debug/virtual.h) \
+  include/linux/irqreturn.h \
+  include/linux/irqnr.h \
+  include/uapi/linux/irqnr.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irq.h \
+    $(wildcard include/config/sparse/irq.h) \
+    $(wildcard include/config/multi/irq/handler.h) \
+  arch/arm/include/generated/asm/irq_regs.h \
+  include/asm-generic/irq_regs.h \
+  include/linux/irqdesc.h \
+    $(wildcard include/config/irq/preflow/fasteoi.h) \
+    $(wildcard include/config/proc/fs.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_irq.h \
+  include/linux/of.h \
+    $(wildcard include/config/sparc.h) \
+    $(wildcard include/config/of/dynamic.h) \
+    $(wildcard include/config/attach/node.h) \
+    $(wildcard include/config/detach/node.h) \
+    $(wildcard include/config/add/property.h) \
+    $(wildcard include/config/remove/property.h) \
+    $(wildcard include/config/update/property.h) \
+    $(wildcard include/config/proc/devicetree.h) \
+  include/linux/kref.h \
+  include/linux/mod_devicetable.h \
+  include/linux/uuid.h \
+  include/uapi/linux/uuid.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/prom.h \
+  include/linux/of_address.h \
+    $(wildcard include/config/of/address.h) \
+  include/linux/ioport.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hardware/cache-l2x0.h \
+    $(wildcard include/config/cache/l2x0.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/mach/arch.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/mach/map.h \
+    $(wildcard include/config/debug/ll.h) \
+  arch/arm/mach-sti/smp.h \
+  arch/arm/mach-sti/sti.h \
+  include/linux/phy.h \
+  include/linux/ethtool.h \
+  include/linux/compat.h \
+    $(wildcard include/config/compat/old/sigaction.h) \
+    $(wildcard include/config/odd/rt/sigaction.h) \
+  include/uapi/linux/ethtool.h \
+  include/linux/if_ether.h \
+  include/linux/skbuff.h \
+    $(wildcard include/config/nf/conntrack.h) \
+    $(wildcard include/config/bridge/netfilter.h) \
+    $(wildcard include/config/xfrm.h) \
+    $(wildcard include/config/net/sched.h) \
+    $(wildcard include/config/net/cls/act.h) \
+    $(wildcard include/config/ipv6/ndisc/nodetype.h) \
+    $(wildcard include/config/net/dma.h) \
+    $(wildcard include/config/network/secmark.h) \
+    $(wildcard include/config/network/phy/timestamping.h) \
+    $(wildcard include/config/netfilter/xt/target/trace.h) \
+  include/linux/kmemcheck.h \
+    $(wildcard include/config/kmemcheck.h) \
+  include/linux/mm_types.h \
+    $(wildcard include/config/split/ptlock/cpus.h) \
+    $(wildcard include/config/have/cmpxchg/double.h) \
+    $(wildcard include/config/have/aligned/struct/page.h) \
+    $(wildcard include/config/want/page/debug/flags.h) \
+    $(wildcard include/config/aio.h) \
+    $(wildcard include/config/mm/owner.h) \
+    $(wildcard include/config/mmu/notifier.h) \
+    $(wildcard include/config/transparent/hugepage.h) \
+  include/linux/auxvec.h \
+  include/uapi/linux/auxvec.h \
+  arch/arm/include/generated/asm/auxvec.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/auxvec.h \
+  include/linux/rbtree.h \
+  include/linux/page-debug-flags.h \
+    $(wildcard include/config/page/poisoning.h) \
+    $(wildcard include/config/page/guard.h) \
+    $(wildcard include/config/page/debug/something/else.h) \
+  include/linux/uprobes.h \
+    $(wildcard include/config/arch/supports/uprobes.h) \
+    $(wildcard include/config/uprobes.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/mmu.h \
+    $(wildcard include/config/cpu/has/asid.h) \
+  include/linux/net.h \
+  include/linux/random.h \
+    $(wildcard include/config/arch/random.h) \
+  include/uapi/linux/random.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/ioctl.h \
+  arch/arm/include/generated/asm/ioctl.h \
+  include/asm-generic/ioctl.h \
+  include/uapi/asm-generic/ioctl.h \
+  include/linux/fcntl.h \
+  include/uapi/linux/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/fcntl.h \
+  include/uapi/linux/net.h \
+  include/linux/socket.h \
+  arch/arm/include/generated/asm/socket.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/socket.h \
+  arch/arm/include/generated/asm/sockios.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/sockios.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sockios.h \
+  include/linux/uio.h \
+  include/uapi/linux/uio.h \
+  include/uapi/linux/socket.h \
+  include/linux/textsearch.h \
+  include/linux/slab.h \
+    $(wildcard include/config/slab/debug.h) \
+    $(wildcard include/config/failslab.h) \
+    $(wildcard include/config/slob.h) \
+    $(wildcard include/config/slab.h) \
+    $(wildcard include/config/slub.h) \
+    $(wildcard include/config/debug/slab.h) \
+  include/linux/slub_def.h \
+    $(wildcard include/config/slub/stats.h) \
+    $(wildcard include/config/memcg/kmem.h) \
+    $(wildcard include/config/slub/debug.h) \
+  include/linux/kobject.h \
+  include/linux/sysfs.h \
+  include/linux/kobject_ns.h \
+  include/linux/stat.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/stat.h \
+  include/uapi/linux/stat.h \
+  include/linux/uidgid.h \
+    $(wildcard include/config/uidgid/strict/type/checks.h) \
+    $(wildcard include/config/user/ns.h) \
+  include/linux/highuid.h \
+  include/linux/kmemleak.h \
+    $(wildcard include/config/debug/kmemleak.h) \
+  include/net/checksum.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/uaccess.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/unified.h \
+    $(wildcard include/config/arm/asm/unified.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/checksum.h \
+  include/linux/in6.h \
+  include/uapi/linux/in6.h \
+  include/linux/dmaengine.h \
+    $(wildcard include/config/async/tx/enable/channel/switch.h) \
+    $(wildcard include/config/rapidio/dma/engine.h) \
+    $(wildcard include/config/dma/engine.h) \
+    $(wildcard include/config/async/tx/dma.h) \
+  include/linux/device.h \
+    $(wildcard include/config/debug/devres.h) \
+    $(wildcard include/config/acpi.h) \
+    $(wildcard include/config/pinctrl.h) \
+    $(wildcard include/config/devtmpfs.h) \
+    $(wildcard include/config/sysfs/deprecated.h) \
+  include/linux/klist.h \
+  include/linux/pinctrl/devinfo.h \
+    $(wildcard include/config/pm.h) \
+  include/linux/pinctrl/consumer.h \
+    $(wildcard include/config/pinconf.h) \
+  include/linux/seq_file.h \
+  include/linux/pinctrl/pinctrl-state.h \
+  include/linux/pm.h \
+    $(wildcard include/config/vt/console/sleep.h) \
+    $(wildcard include/config/pm/runtime.h) \
+    $(wildcard include/config/pm/clk.h) \
+    $(wildcard include/config/pm/generic/domains.h) \
+  include/linux/ratelimit.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/device.h \
+    $(wildcard include/config/dmabounce.h) \
+    $(wildcard include/config/iommu/api.h) \
+    $(wildcard include/config/arm/dma/use/iommu.h) \
+    $(wildcard include/config/arch/omap.h) \
+  include/linux/pm_wakeup.h \
+  include/linux/scatterlist.h \
+    $(wildcard include/config/debug/sg.h) \
+  include/linux/mm.h \
+    $(wildcard include/config/sysctl.h) \
+    $(wildcard include/config/x86.h) \
+    $(wildcard include/config/ppc.h) \
+    $(wildcard include/config/parisc.h) \
+    $(wildcard include/config/metag.h) \
+    $(wildcard include/config/ia64.h) \
+    $(wildcard include/config/stack/growsup.h) \
+    $(wildcard include/config/ksm.h) \
+    $(wildcard include/config/debug/vm/rb.h) \
+    $(wildcard include/config/arch/uses/numa/prot/none.h) \
+    $(wildcard include/config/debug/pagealloc.h) \
+    $(wildcard include/config/hibernation.h) \
+    $(wildcard include/config/hugetlbfs.h) \
+  include/linux/debug_locks.h \
+    $(wildcard include/config/debug/locking/api/selftests.h) \
+  include/linux/range.h \
+  include/linux/bit_spinlock.h \
+  include/linux/shrinker.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable.h \
+    $(wildcard include/config/highpte.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/proc-fns.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue-proc.h \
+    $(wildcard include/config/cpu/arm7tdmi.h) \
+    $(wildcard include/config/cpu/arm720t.h) \
+    $(wildcard include/config/cpu/arm740t.h) \
+    $(wildcard include/config/cpu/arm9tdmi.h) \
+    $(wildcard include/config/cpu/arm920t.h) \
+    $(wildcard include/config/cpu/arm922t.h) \
+    $(wildcard include/config/cpu/arm925t.h) \
+    $(wildcard include/config/cpu/arm926t.h) \
+    $(wildcard include/config/cpu/arm940t.h) \
+    $(wildcard include/config/cpu/arm946e.h) \
+    $(wildcard include/config/cpu/arm1020.h) \
+    $(wildcard include/config/cpu/arm1020e.h) \
+    $(wildcard include/config/cpu/arm1022.h) \
+    $(wildcard include/config/cpu/arm1026.h) \
+    $(wildcard include/config/cpu/mohawk.h) \
+    $(wildcard include/config/cpu/feroceon.h) \
+    $(wildcard include/config/cpu/v6k.h) \
+    $(wildcard include/config/cpu/v7.h) \
+    $(wildcard include/config/cpu/pj4b.h) \
+  include/asm-generic/pgtable-nopud.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level.h \
+  include/asm-generic/pgtable.h \
+  include/linux/page-flags.h \
+    $(wildcard include/config/pageflags/extended.h) \
+    $(wildcard include/config/arch/uses/pg/uncached.h) \
+    $(wildcard include/config/memory/failure.h) \
+    $(wildcard include/config/swap.h) \
+  include/linux/huge_mm.h \
+  include/linux/vmstat.h \
+    $(wildcard include/config/vm/event/counters.h) \
+  include/linux/vm_event_item.h \
+    $(wildcard include/config/migration.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/scatterlist.h \
+    $(wildcard include/config/arm/has/sg/chain.h) \
+  include/asm-generic/scatterlist.h \
+    $(wildcard include/config/need/sg/dma/length.h) \
+  include/linux/hrtimer.h \
+    $(wildcard include/config/high/res/timers.h) \
+    $(wildcard include/config/timerfd.h) \
+  include/linux/timerqueue.h \
+  include/linux/dma-mapping.h \
+    $(wildcard include/config/has/dma.h) \
+    $(wildcard include/config/arch/has/dma/set/coherent/mask.h) \
+    $(wildcard include/config/have/dma/attrs.h) \
+    $(wildcard include/config/need/dma/map/state.h) \
+  include/linux/dma-attrs.h \
+  include/linux/dma-direction.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/dma-mapping.h \
+  include/linux/dma-debug.h \
+    $(wildcard include/config/dma/api/debug.h) \
+  include/asm-generic/dma-coherent.h \
+    $(wildcard include/config/have/generic/dma/coherent.h) \
+  include/asm-generic/dma-mapping-common.h \
+  include/linux/netdev_features.h \
+  include/net/flow_keys.h \
+  include/uapi/linux/if_ether.h \
+  include/linux/rculist.h \
+  include/linux/mii.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/if.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/hdlc/ioctl.h \
+  include/uapi/linux/mii.h \
+  include/linux/phy_fixed.h \
+
+arch/arm/mach-sti/board-dt.o: $(deps_arch/arm/mach-sti/board-dt.o)
+
+$(deps_arch/arm/mach-sti/board-dt.o):
diff -urNp a/arch/arm/mach-sti/.built-in.o.cmd b/arch/arm/mach-sti/.built-in.o.cmd
--- a/arch/arm/mach-sti/.built-in.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/.built-in.o.cmd	2019-09-26 21:23:59.684669400 +0100
@@ -0,0 +1 @@
+cmd_arch/arm/mach-sti/built-in.o :=  /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-ld -EL    -r -o arch/arm/mach-sti/built-in.o arch/arm/mach-sti/platsmp.o arch/arm/mach-sti/headsmp.o arch/arm/mach-sti/board-dt.o arch/arm/mach-sti/sti.o arch/arm/mach-sti/pm_domains.o arch/arm/mach-sti/st-pmu-syscfg.o arch/arm/mach-sti/pm/built-in.o ; scripts/mod/modpost arch/arm/mach-sti/built-in.o
diff -urNp a/arch/arm/mach-sti/.headsmp.o.cmd b/arch/arm/mach-sti/.headsmp.o.cmd
--- a/arch/arm/mach-sti/.headsmp.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/.headsmp.o.cmd	2019-09-26 21:23:55.008661500 +0100
@@ -0,0 +1,43 @@
+cmd_arch/arm/mach-sti/headsmp.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/.headsmp.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include  -D__ASSEMBLY__ -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a  -include asm/unified.h -msoft-float -gdwarf-2          -c -o arch/arm/mach-sti/headsmp.o arch/arm/mach-sti/headsmp.S
+
+source_arch/arm/mach-sti/headsmp.o := arch/arm/mach-sti/headsmp.S
+
+deps_arch/arm/mach-sti/headsmp.o := \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/unified.h \
+    $(wildcard include/config/arm/asm/unified.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+  include/linux/linkage.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+
+arch/arm/mach-sti/headsmp.o: $(deps_arch/arm/mach-sti/headsmp.o)
+
+$(deps_arch/arm/mach-sti/headsmp.o):
diff -urNp a/arch/arm/mach-sti/.platsmp.o.cmd b/arch/arm/mach-sti/.platsmp.o.cmd
--- a/arch/arm/mach-sti/.platsmp.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/.platsmp.o.cmd	2019-09-26 21:23:54.944661400 +0100
@@ -0,0 +1,511 @@
+cmd_arch/arm/mach-sti/platsmp.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/.platsmp.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(platsmp)"  -D"KBUILD_MODNAME=KBUILD_STR(platsmp)" -c -o arch/arm/mach-sti/platsmp.o arch/arm/mach-sti/platsmp.c
+
+source_arch/arm/mach-sti/platsmp.o := arch/arm/mach-sti/platsmp.c
+
+deps_arch/arm/mach-sti/platsmp.o := \
+    $(wildcard include/config/kexec.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/hotplug/cpu.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+    $(wildcard include/config/modules.h) \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/delay.h \
+  include/linux/kernel.h \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/ring/buffer.h) \
+    $(wildcard include/config/tracing.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+    $(wildcard include/config/smp.h) \
+  include/linux/irqflags.h \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  include/linux/typecheck.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+    $(wildcard include/config/arm/lpae.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug.h) \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/delay.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+    $(wildcard include/config/sparsemem.h) \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+    $(wildcard include/config/debug/preempt.h) \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  include/linux/cpumask.h \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/bitmap.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/bug.h \
+  include/linux/preempt.h \
+    $(wildcard include/config/preempt.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+    $(wildcard include/config/outer/cache.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/io.h \
+    $(wildcard include/config/has/ioport.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/io.h \
+    $(wildcard include/config/need/mach/io/h.h) \
+    $(wildcard include/config/pci.h) \
+    $(wildcard include/config/pcmcia/soc/common.h) \
+    $(wildcard include/config/isa.h) \
+    $(wildcard include/config/pccard.h) \
+  include/asm-generic/pci_iomap.h \
+    $(wildcard include/config/no/generic/pci/ioport/map.h) \
+    $(wildcard include/config/generic/pci/iomap.h) \
+  arch/arm/mach-sti/include/mach/io.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  include/asm-generic/getorder.h \
+  include/linux/of.h \
+    $(wildcard include/config/sparc.h) \
+    $(wildcard include/config/of/dynamic.h) \
+    $(wildcard include/config/of.h) \
+    $(wildcard include/config/attach/node.h) \
+    $(wildcard include/config/detach/node.h) \
+    $(wildcard include/config/add/property.h) \
+    $(wildcard include/config/remove/property.h) \
+    $(wildcard include/config/update/property.h) \
+    $(wildcard include/config/proc/fs.h) \
+    $(wildcard include/config/proc/devicetree.h) \
+  include/linux/kref.h \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+    $(wildcard include/config/cpu/sa110.h) \
+    $(wildcard include/config/cpu/v6.h) \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/debug/lock/alloc.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/spinlock_types.h \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/debug/spinlock.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/rwlock_types.h \
+  include/linux/spinlock.h \
+  include/linux/bottom_half.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/mod_devicetable.h \
+  include/linux/uuid.h \
+  include/uapi/linux/uuid.h \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/cma.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/zone/dma32.h) \
+    $(wildcard include/config/compaction.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/linux/seqlock.h \
+  include/linux/nodemask.h \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/page-flags-layout.h \
+  include/generated/bounds.h \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/memory/hotremove.h) \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/notifier.h \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/completion.h \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/rcutree.h \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+    $(wildcard include/config/sysfs.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/prom.h \
+  include/linux/of_address.h \
+    $(wildcard include/config/of/address.h) \
+  include/linux/ioport.h \
+  include/linux/reboot.h \
+  include/uapi/linux/reboot.h \
+  arch/arm/include/generated/asm/emergency-restart.h \
+  include/asm-generic/emergency-restart.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cacheflush.h \
+    $(wildcard include/config/cpu/v7.h) \
+    $(wildcard include/config/cpu/v6k.h) \
+    $(wildcard include/config/smp/on/up.h) \
+    $(wildcard include/config/arm/errata/411920.h) \
+    $(wildcard include/config/cpu/cache/vipt.h) \
+  include/linux/mm.h \
+    $(wildcard include/config/sysctl.h) \
+    $(wildcard include/config/x86.h) \
+    $(wildcard include/config/ppc.h) \
+    $(wildcard include/config/parisc.h) \
+    $(wildcard include/config/metag.h) \
+    $(wildcard include/config/ia64.h) \
+    $(wildcard include/config/stack/growsup.h) \
+    $(wildcard include/config/transparent/hugepage.h) \
+    $(wildcard include/config/ksm.h) \
+    $(wildcard include/config/debug/vm/rb.h) \
+    $(wildcard include/config/arch/uses/numa/prot/none.h) \
+    $(wildcard include/config/debug/pagealloc.h) \
+    $(wildcard include/config/hibernation.h) \
+    $(wildcard include/config/hugetlbfs.h) \
+  include/linux/gfp.h \
+    $(wildcard include/config/pm/sleep.h) \
+  include/linux/mmdebug.h \
+    $(wildcard include/config/debug/vm.h) \
+    $(wildcard include/config/debug/virtual.h) \
+  include/linux/rbtree.h \
+  include/linux/debug_locks.h \
+    $(wildcard include/config/debug/locking/api/selftests.h) \
+  include/linux/mm_types.h \
+    $(wildcard include/config/split/ptlock/cpus.h) \
+    $(wildcard include/config/have/cmpxchg/double.h) \
+    $(wildcard include/config/have/aligned/struct/page.h) \
+    $(wildcard include/config/want/page/debug/flags.h) \
+    $(wildcard include/config/kmemcheck.h) \
+    $(wildcard include/config/aio.h) \
+    $(wildcard include/config/mm/owner.h) \
+    $(wildcard include/config/mmu/notifier.h) \
+  include/linux/auxvec.h \
+  include/uapi/linux/auxvec.h \
+  arch/arm/include/generated/asm/auxvec.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/auxvec.h \
+  include/linux/page-debug-flags.h \
+    $(wildcard include/config/page/poisoning.h) \
+    $(wildcard include/config/page/guard.h) \
+    $(wildcard include/config/page/debug/something/else.h) \
+  include/linux/uprobes.h \
+    $(wildcard include/config/arch/supports/uprobes.h) \
+    $(wildcard include/config/uprobes.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/mmu.h \
+    $(wildcard include/config/cpu/has/asid.h) \
+  include/linux/range.h \
+  include/linux/bit_spinlock.h \
+  include/linux/shrinker.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable.h \
+    $(wildcard include/config/highpte.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/proc-fns.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue-proc.h \
+    $(wildcard include/config/cpu/arm7tdmi.h) \
+    $(wildcard include/config/cpu/arm720t.h) \
+    $(wildcard include/config/cpu/arm740t.h) \
+    $(wildcard include/config/cpu/arm9tdmi.h) \
+    $(wildcard include/config/cpu/arm920t.h) \
+    $(wildcard include/config/cpu/arm922t.h) \
+    $(wildcard include/config/cpu/arm925t.h) \
+    $(wildcard include/config/cpu/arm926t.h) \
+    $(wildcard include/config/cpu/arm940t.h) \
+    $(wildcard include/config/cpu/arm946e.h) \
+    $(wildcard include/config/cpu/arm1020.h) \
+    $(wildcard include/config/cpu/arm1020e.h) \
+    $(wildcard include/config/cpu/arm1022.h) \
+    $(wildcard include/config/cpu/arm1026.h) \
+    $(wildcard include/config/cpu/mohawk.h) \
+    $(wildcard include/config/cpu/feroceon.h) \
+    $(wildcard include/config/cpu/pj4b.h) \
+  include/asm-generic/pgtable-nopud.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level.h \
+  include/asm-generic/pgtable.h \
+  include/linux/page-flags.h \
+    $(wildcard include/config/pageflags/extended.h) \
+    $(wildcard include/config/arch/uses/pg/uncached.h) \
+    $(wildcard include/config/memory/failure.h) \
+    $(wildcard include/config/swap.h) \
+  include/linux/huge_mm.h \
+  include/linux/vmstat.h \
+    $(wildcard include/config/vm/event/counters.h) \
+  include/linux/vm_event_item.h \
+    $(wildcard include/config/migration.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue-cache.h \
+    $(wildcard include/config/cpu/cache/v4.h) \
+    $(wildcard include/config/cpu/cache/v4wb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/shmparam.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cachetype.h \
+    $(wildcard include/config/cpu/cache/vivt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp_plat.h \
+  include/linux/err.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cputype.h \
+    $(wildcard include/config/cpu/cp15.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp_scu.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cp15.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/idmap.h \
+  include/linux/power/st_lpm_def.h \
+    $(wildcard include/config/1/offset.h) \
+  arch/arm/mach-sti/smp.h \
+
+arch/arm/mach-sti/platsmp.o: $(deps_arch/arm/mach-sti/platsmp.o)
+
+$(deps_arch/arm/mach-sti/platsmp.o):
diff -urNp a/arch/arm/mach-sti/.pm_domains.o.cmd b/arch/arm/mach-sti/.pm_domains.o.cmd
--- a/arch/arm/mach-sti/.pm_domains.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/.pm_domains.o.cmd	2019-09-26 21:23:56.176663400 +0100
@@ -0,0 +1,465 @@
+cmd_arch/arm/mach-sti/pm_domains.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/.pm_domains.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(pm_domains)"  -D"KBUILD_MODNAME=KBUILD_STR(pm_domains)" -c -o arch/arm/mach-sti/pm_domains.o arch/arm/mach-sti/pm_domains.c
+
+source_arch/arm/mach-sti/pm_domains.o := arch/arm/mach-sti/pm_domains.c
+
+deps_arch/arm/mach-sti/pm_domains.o := \
+  include/linux/err.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/slab.h \
+    $(wildcard include/config/slab/debug.h) \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/kmemcheck.h) \
+    $(wildcard include/config/failslab.h) \
+    $(wildcard include/config/slob.h) \
+    $(wildcard include/config/slab.h) \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/slub.h) \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/debug/slab.h) \
+    $(wildcard include/config/tracing.h) \
+  include/linux/gfp.h \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/zone/dma32.h) \
+    $(wildcard include/config/pm/sleep.h) \
+    $(wildcard include/config/cma.h) \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/smp.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/compaction.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/sparsemem.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/spinlock.h \
+    $(wildcard include/config/debug/spinlock.h) \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/preempt.h) \
+    $(wildcard include/config/debug/lock/alloc.h) \
+  include/linux/typecheck.h \
+  include/linux/preempt.h \
+    $(wildcard include/config/debug/preempt.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/bug.h \
+    $(wildcard include/config/generic/bug.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+    $(wildcard include/config/arm/lpae.h) \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  include/linux/kernel.h \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/ring/buffer.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+  include/linux/irqflags.h \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+    $(wildcard include/config/outer/cache.h) \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  include/linux/bottom_half.h \
+  include/linux/spinlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/rwlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/sa110.h) \
+    $(wildcard include/config/cpu/v6.h) \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/linux/seqlock.h \
+  include/linux/nodemask.h \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/bitmap.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/page-flags-layout.h \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+  include/generated/bounds.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+  include/asm-generic/getorder.h \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/memory/hotremove.h) \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/notifier.h \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/hotplug/cpu.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/cpumask.h \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/completion.h \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/rcutree.h \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+    $(wildcard include/config/sysfs.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  include/linux/mmdebug.h \
+    $(wildcard include/config/debug/vm.h) \
+    $(wildcard include/config/debug/virtual.h) \
+  include/linux/slub_def.h \
+    $(wildcard include/config/slub/stats.h) \
+    $(wildcard include/config/memcg/kmem.h) \
+    $(wildcard include/config/slub/debug.h) \
+  include/linux/kobject.h \
+  include/linux/sysfs.h \
+  include/linux/kobject_ns.h \
+  include/linux/stat.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/stat.h \
+  include/uapi/linux/stat.h \
+  include/linux/uidgid.h \
+    $(wildcard include/config/uidgid/strict/type/checks.h) \
+    $(wildcard include/config/user/ns.h) \
+  include/linux/highuid.h \
+  include/linux/kref.h \
+  include/linux/kmemleak.h \
+    $(wildcard include/config/debug/kmemleak.h) \
+  include/linux/pm_domain.h \
+    $(wildcard include/config/pm/generic/domains.h) \
+    $(wildcard include/config/pm/generic/domains/runtime.h) \
+    $(wildcard include/config/pm/generic/domains/sleep.h) \
+    $(wildcard include/config/pm/generic/domains/of.h) \
+  include/linux/device.h \
+    $(wildcard include/config/debug/devres.h) \
+    $(wildcard include/config/acpi.h) \
+    $(wildcard include/config/pinctrl.h) \
+    $(wildcard include/config/devtmpfs.h) \
+    $(wildcard include/config/sysfs/deprecated.h) \
+  include/linux/ioport.h \
+  include/linux/klist.h \
+  include/linux/pinctrl/devinfo.h \
+    $(wildcard include/config/pm.h) \
+  include/linux/pinctrl/consumer.h \
+    $(wildcard include/config/pinconf.h) \
+  include/linux/seq_file.h \
+  include/linux/pinctrl/pinctrl-state.h \
+  include/linux/pm.h \
+    $(wildcard include/config/vt/console/sleep.h) \
+    $(wildcard include/config/pm/runtime.h) \
+    $(wildcard include/config/pm/clk.h) \
+  include/linux/ratelimit.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/device.h \
+    $(wildcard include/config/dmabounce.h) \
+    $(wildcard include/config/iommu/api.h) \
+    $(wildcard include/config/arm/dma/use/iommu.h) \
+    $(wildcard include/config/arch/omap.h) \
+  include/linux/pm_wakeup.h \
+  include/linux/of.h \
+    $(wildcard include/config/sparc.h) \
+    $(wildcard include/config/of/dynamic.h) \
+    $(wildcard include/config/of.h) \
+    $(wildcard include/config/attach/node.h) \
+    $(wildcard include/config/detach/node.h) \
+    $(wildcard include/config/add/property.h) \
+    $(wildcard include/config/remove/property.h) \
+    $(wildcard include/config/update/property.h) \
+    $(wildcard include/config/proc/fs.h) \
+    $(wildcard include/config/proc/devicetree.h) \
+  include/linux/mod_devicetable.h \
+  include/linux/uuid.h \
+  include/uapi/linux/uuid.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/prom.h \
+  include/linux/cpuidle.h \
+    $(wildcard include/config/arch/needs/cpu/idle/coupled.h) \
+    $(wildcard include/config/cpu/idle.h) \
+    $(wildcard include/config/arch/has/cpu/relax.h) \
+  include/linux/hrtimer.h \
+    $(wildcard include/config/high/res/timers.h) \
+    $(wildcard include/config/timerfd.h) \
+  include/linux/rbtree.h \
+  include/linux/timerqueue.h \
+  include/linux/of_address.h \
+    $(wildcard include/config/of/address.h) \
+    $(wildcard include/config/pci.h) \
+  include/linux/of_platform.h \
+    $(wildcard include/config/of/device.h) \
+  include/linux/of_device.h \
+  include/linux/platform_device.h \
+    $(wildcard include/config/suspend.h) \
+    $(wildcard include/config/hibernate/callbacks.h) \
+  include/linux/mfd/syscon.h \
+  include/linux/regmap.h \
+    $(wildcard include/config/regmap.h) \
+  include/linux/pm_runtime.h \
+
+arch/arm/mach-sti/pm_domains.o: $(deps_arch/arm/mach-sti/pm_domains.o)
+
+$(deps_arch/arm/mach-sti/pm_domains.o):
diff -urNp a/arch/arm/mach-sti/.st-pmu-syscfg.o.cmd b/arch/arm/mach-sti/.st-pmu-syscfg.o.cmd
--- a/arch/arm/mach-sti/.st-pmu-syscfg.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/.st-pmu-syscfg.o.cmd	2019-09-26 21:23:56.460663900 +0100
@@ -0,0 +1,468 @@
+cmd_arch/arm/mach-sti/st-pmu-syscfg.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/.st-pmu-syscfg.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(st_pmu_syscfg)"  -D"KBUILD_MODNAME=KBUILD_STR(st_pmu_syscfg)" -c -o arch/arm/mach-sti/st-pmu-syscfg.o arch/arm/mach-sti/st-pmu-syscfg.c
+
+source_arch/arm/mach-sti/st-pmu-syscfg.o := arch/arm/mach-sti/st-pmu-syscfg.c
+
+deps_arch/arm/mach-sti/st-pmu-syscfg.o := \
+    $(wildcard include/config/pm/sleep.h) \
+  include/linux/module.h \
+    $(wildcard include/config/sysfs.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/unused/symbols.h) \
+    $(wildcard include/config/module/sig.h) \
+    $(wildcard include/config/generic/bug.h) \
+    $(wildcard include/config/kallsyms.h) \
+    $(wildcard include/config/smp.h) \
+    $(wildcard include/config/tracepoints.h) \
+    $(wildcard include/config/tracing.h) \
+    $(wildcard include/config/event/tracing.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+    $(wildcard include/config/module/unload.h) \
+    $(wildcard include/config/constructors.h) \
+    $(wildcard include/config/debug/set/module/ronx.h) \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  include/linux/stat.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/stat.h \
+  include/uapi/linux/stat.h \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  include/linux/kernel.h \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/ring/buffer.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modversions.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+  include/linux/irqflags.h \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  include/linux/typecheck.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+    $(wildcard include/config/arm/lpae.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/seqlock.h \
+  include/linux/spinlock.h \
+    $(wildcard include/config/debug/spinlock.h) \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/preempt.h) \
+    $(wildcard include/config/debug/lock/alloc.h) \
+  include/linux/preempt.h \
+    $(wildcard include/config/debug/preempt.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  include/linux/bug.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+    $(wildcard include/config/outer/cache.h) \
+  include/linux/bottom_half.h \
+  include/linux/spinlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/rwlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/sa110.h) \
+    $(wildcard include/config/cpu/v6.h) \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/uidgid.h \
+    $(wildcard include/config/uidgid/strict/type/checks.h) \
+    $(wildcard include/config/user/ns.h) \
+  include/linux/highuid.h \
+  include/linux/kmod.h \
+  include/linux/gfp.h \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/zone/dma32.h) \
+    $(wildcard include/config/cma.h) \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/compaction.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/sparsemem.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/linux/nodemask.h \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/bitmap.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/page-flags-layout.h \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+  include/generated/bounds.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+  include/asm-generic/getorder.h \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/memory/hotremove.h) \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/notifier.h \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/hotplug/cpu.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/cpumask.h \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/completion.h \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/rcutree.h \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  include/linux/mmdebug.h \
+    $(wildcard include/config/debug/vm.h) \
+    $(wildcard include/config/debug/virtual.h) \
+  include/linux/sysctl.h \
+    $(wildcard include/config/sysctl.h) \
+  include/linux/rbtree.h \
+  include/uapi/linux/sysctl.h \
+  include/linux/elf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/elf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/user.h \
+  include/uapi/linux/elf.h \
+    $(wildcard include/config/st/elf/extensions.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/elf-em.h \
+  include/linux/kobject.h \
+  include/linux/sysfs.h \
+  include/linux/kobject_ns.h \
+  include/linux/kref.h \
+  include/linux/moduleparam.h \
+    $(wildcard include/config/alpha.h) \
+    $(wildcard include/config/ia64.h) \
+    $(wildcard include/config/ppc64.h) \
+  include/linux/tracepoint.h \
+  include/linux/static_key.h \
+  include/linux/jump_label.h \
+    $(wildcard include/config/jump/label.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/module.h \
+    $(wildcard include/config/arm/unwind.h) \
+  include/asm-generic/module.h \
+    $(wildcard include/config/have/mod/arch/specific.h) \
+    $(wildcard include/config/modules/use/elf/rel.h) \
+    $(wildcard include/config/modules/use/elf/rela.h) \
+  include/linux/of.h \
+    $(wildcard include/config/sparc.h) \
+    $(wildcard include/config/of/dynamic.h) \
+    $(wildcard include/config/of.h) \
+    $(wildcard include/config/attach/node.h) \
+    $(wildcard include/config/detach/node.h) \
+    $(wildcard include/config/add/property.h) \
+    $(wildcard include/config/remove/property.h) \
+    $(wildcard include/config/update/property.h) \
+    $(wildcard include/config/proc/fs.h) \
+    $(wildcard include/config/proc/devicetree.h) \
+  include/linux/mod_devicetable.h \
+  include/linux/uuid.h \
+  include/uapi/linux/uuid.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/prom.h \
+  include/linux/of_platform.h \
+    $(wildcard include/config/of/device.h) \
+    $(wildcard include/config/of/address.h) \
+  include/linux/device.h \
+    $(wildcard include/config/debug/devres.h) \
+    $(wildcard include/config/acpi.h) \
+    $(wildcard include/config/pinctrl.h) \
+    $(wildcard include/config/devtmpfs.h) \
+    $(wildcard include/config/sysfs/deprecated.h) \
+  include/linux/ioport.h \
+  include/linux/klist.h \
+  include/linux/pinctrl/devinfo.h \
+    $(wildcard include/config/pm.h) \
+  include/linux/pinctrl/consumer.h \
+    $(wildcard include/config/pinconf.h) \
+  include/linux/err.h \
+  include/linux/seq_file.h \
+  include/linux/pinctrl/pinctrl-state.h \
+  include/linux/pm.h \
+    $(wildcard include/config/vt/console/sleep.h) \
+    $(wildcard include/config/pm/runtime.h) \
+    $(wildcard include/config/pm/clk.h) \
+    $(wildcard include/config/pm/generic/domains.h) \
+  include/linux/ratelimit.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/device.h \
+    $(wildcard include/config/dmabounce.h) \
+    $(wildcard include/config/iommu/api.h) \
+    $(wildcard include/config/arm/dma/use/iommu.h) \
+    $(wildcard include/config/arch/omap.h) \
+  include/linux/pm_wakeup.h \
+  include/linux/of_device.h \
+  include/linux/platform_device.h \
+    $(wildcard include/config/suspend.h) \
+    $(wildcard include/config/hibernate/callbacks.h) \
+  include/linux/mfd/syscon.h \
+  include/linux/regmap.h \
+    $(wildcard include/config/regmap.h) \
+
+arch/arm/mach-sti/st-pmu-syscfg.o: $(deps_arch/arm/mach-sti/st-pmu-syscfg.o)
+
+$(deps_arch/arm/mach-sti/st-pmu-syscfg.o):
diff -urNp a/arch/arm/mach-sti/.sti.o.cmd b/arch/arm/mach-sti/.sti.o.cmd
--- a/arch/arm/mach-sti/.sti.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/.sti.o.cmd	2019-09-26 21:23:55.792662800 +0100
@@ -0,0 +1,462 @@
+cmd_arch/arm/mach-sti/sti.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/.sti.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(sti)"  -D"KBUILD_MODNAME=KBUILD_STR(sti)" -c -o arch/arm/mach-sti/sti.o arch/arm/mach-sti/sti.c
+
+source_arch/arm/mach-sti/sti.o := arch/arm/mach-sti/sti.c
+
+deps_arch/arm/mach-sti/sti.o := \
+  include/linux/of.h \
+    $(wildcard include/config/sparc.h) \
+    $(wildcard include/config/of/dynamic.h) \
+    $(wildcard include/config/of.h) \
+    $(wildcard include/config/attach/node.h) \
+    $(wildcard include/config/detach/node.h) \
+    $(wildcard include/config/add/property.h) \
+    $(wildcard include/config/remove/property.h) \
+    $(wildcard include/config/update/property.h) \
+    $(wildcard include/config/proc/fs.h) \
+    $(wildcard include/config/proc/devicetree.h) \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+    $(wildcard include/config/smp.h) \
+  include/linux/irqflags.h \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  include/linux/typecheck.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/kref.h \
+  include/linux/bug.h \
+    $(wildcard include/config/generic/bug.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+    $(wildcard include/config/arm/lpae.h) \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  include/linux/kernel.h \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/ring/buffer.h) \
+    $(wildcard include/config/tracing.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+    $(wildcard include/config/outer/cache.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/sa110.h) \
+    $(wildcard include/config/cpu/v6.h) \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/debug/lock/alloc.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  include/linux/spinlock_types.h \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/debug/spinlock.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/rwlock_types.h \
+  include/linux/spinlock.h \
+    $(wildcard include/config/preempt.h) \
+  include/linux/preempt.h \
+    $(wildcard include/config/debug/preempt.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  include/linux/bottom_half.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/mod_devicetable.h \
+  include/linux/uuid.h \
+  include/uapi/linux/uuid.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+  include/linux/cpumask.h \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/hotplug/cpu.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/bitmap.h \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/cma.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/zone/dma32.h) \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/compaction.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/sparsemem.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/linux/seqlock.h \
+  include/linux/nodemask.h \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/page-flags-layout.h \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+  include/generated/bounds.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+  include/asm-generic/getorder.h \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/memory/hotremove.h) \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/notifier.h \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/completion.h \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/rcutree.h \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+    $(wildcard include/config/sysfs.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/prom.h \
+  include/linux/of_platform.h \
+    $(wildcard include/config/of/device.h) \
+    $(wildcard include/config/of/address.h) \
+  include/linux/device.h \
+    $(wildcard include/config/debug/devres.h) \
+    $(wildcard include/config/acpi.h) \
+    $(wildcard include/config/pinctrl.h) \
+    $(wildcard include/config/pm/sleep.h) \
+    $(wildcard include/config/devtmpfs.h) \
+    $(wildcard include/config/sysfs/deprecated.h) \
+  include/linux/ioport.h \
+  include/linux/kobject.h \
+  include/linux/sysfs.h \
+  include/linux/kobject_ns.h \
+  include/linux/stat.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/stat.h \
+  include/uapi/linux/stat.h \
+  include/linux/uidgid.h \
+    $(wildcard include/config/uidgid/strict/type/checks.h) \
+    $(wildcard include/config/user/ns.h) \
+  include/linux/highuid.h \
+  include/linux/klist.h \
+  include/linux/pinctrl/devinfo.h \
+    $(wildcard include/config/pm.h) \
+  include/linux/pinctrl/consumer.h \
+    $(wildcard include/config/pinconf.h) \
+  include/linux/err.h \
+  include/linux/seq_file.h \
+  include/linux/pinctrl/pinctrl-state.h \
+  include/linux/pm.h \
+    $(wildcard include/config/vt/console/sleep.h) \
+    $(wildcard include/config/pm/runtime.h) \
+    $(wildcard include/config/pm/clk.h) \
+    $(wildcard include/config/pm/generic/domains.h) \
+  include/linux/ratelimit.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/device.h \
+    $(wildcard include/config/dmabounce.h) \
+    $(wildcard include/config/iommu/api.h) \
+    $(wildcard include/config/arm/dma/use/iommu.h) \
+    $(wildcard include/config/arch/omap.h) \
+  include/linux/pm_wakeup.h \
+  include/linux/of_device.h \
+  include/linux/platform_device.h \
+    $(wildcard include/config/suspend.h) \
+    $(wildcard include/config/hibernate/callbacks.h) \
+  include/linux/mfd/syscon.h \
+  include/linux/io.h \
+    $(wildcard include/config/has/ioport.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/io.h \
+    $(wildcard include/config/need/mach/io/h.h) \
+    $(wildcard include/config/pci.h) \
+    $(wildcard include/config/pcmcia/soc/common.h) \
+    $(wildcard include/config/isa.h) \
+    $(wildcard include/config/pccard.h) \
+  include/asm-generic/pci_iomap.h \
+    $(wildcard include/config/no/generic/pci/ioport/map.h) \
+    $(wildcard include/config/generic/pci/iomap.h) \
+  arch/arm/mach-sti/include/mach/io.h \
+  include/linux/regmap.h \
+    $(wildcard include/config/regmap.h) \
+  include/linux/rbtree.h \
+  include/linux/clk-provider.h \
+    $(wildcard include/config/common/clk.h) \
+  include/linux/clk.h \
+    $(wildcard include/config/have/clk/prepare.h) \
+    $(wildcard include/config/have/clk.h) \
+  include/linux/of_gpio.h \
+    $(wildcard include/config/of/gpio.h) \
+  include/linux/gpio.h \
+    $(wildcard include/config/gpiolib.h) \
+    $(wildcard include/config/arch/have/custom/gpio/h.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/gpio.h \
+    $(wildcard include/config/arch/nr/gpio.h) \
+    $(wildcard include/config/need/mach/gpio/h.h) \
+  include/asm-generic/gpio.h \
+    $(wildcard include/config/gpio/sysfs.h) \
+  include/linux/pinctrl/pinctrl.h \
+  include/linux/radix-tree.h \
+  arch/arm/mach-sti/sti.h \
+
+arch/arm/mach-sti/sti.o: $(deps_arch/arm/mach-sti/sti.o)
+
+$(deps_arch/arm/mach-sti/sti.o):
diff -urNp a/arch/arm/mach-sti/Kconfig b/arch/arm/mach-sti/Kconfig
--- a/arch/arm/mach-sti/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/mach-sti/Kconfig	2019-09-26 21:23:27.220619300 +0100
@@ -1,19 +1,27 @@
 menuconfig ARCH_STI
-	bool "STMicroelectronics Consumer Electronics SOCs" if ARCH_MULTI_V7
+	bool "STMicroelectronics Consumer Electronics SOCs with Device Trees" if ARCH_MULTI_V7
+	select GENERIC_CLOCKEVENTS
+	select CLKDEV_LOOKUP
 	select ARM_GIC
 	select ARM_GLOBAL_TIMER
+	select ST_LPC_CLOCK
+	select ARCH_HAS_CPUFREQ
+	select ARCH_HAS_OPP
 	select PINCTRL
 	select PINCTRL_ST
 	select MFD_SYSCON
 	select ARCH_HAS_RESET_CONTROLLER
+	select MIGHT_HAVE_CACHE_L2X0
+	select HAVE_SMP
 	select HAVE_ARM_SCU if SMP
 	select ARCH_REQUIRE_GPIOLIB
+	select MIGHT_HAVE_PCI
+	select NEED_MACH_IO_H if PCI
 	select ARM_ERRATA_754322
 	select ARM_ERRATA_764369 if SMP
 	select ARM_ERRATA_775420
-	select PL310_ERRATA_753970 if CACHE_L2X0
-	select PL310_ERRATA_769419 if CACHE_L2X0
-	select RESET_CONTROLLER
+	select PM_GENERIC_DOMAINS
+	select ST_LPM if SUSPEND
 	help
 	  Include support for STiH41x SOCs like STiH415/416 using the device tree
 	  for discovery
@@ -29,7 +37,7 @@ config SOC_STIH415
 	select STIH415_RESET
 	help
 	  This enables support for STMicroelectronics Digital Consumer
-	  Electronics family StiH415 parts, primarily targeted at set-top-box
+	  Electronics family StiH415 parts, primarily targetted at set-top-box
 	  and other digital audio/video applications using Flattned Device
 	  Trees.
 
@@ -39,7 +47,7 @@ config SOC_STIH416
 	select STIH416_RESET
 	help
 	  This enables support for STMicroelectronics Digital Consumer
-	  Electronics family StiH416 parts, primarily targeted at set-top-box
+	  Electronics family StiH416 parts, primarily targetted at set-top-box
 	  and other digital audio/video applications using Flattened Device
 	  Trees.
 
@@ -47,10 +55,44 @@ config SOC_STIH407
 	bool "STiH407 STMicroelectronics Consumer Electronics family"
 	default y
 	select STIH407_RESET
+	select USB_ARCH_HAS_XHCI
 	help
 	  This enables support for STMicroelectronics Digital Consumer
 	  Electronics family StiH407 parts, targetted at set-top-box
 	  and other digital audio/video applications using Flattened Device
 	  Trees.
 
+config SOC_STID127
+	bool "STiD127 STMicroelectronics Consumer Electronics family"
+	default y
+	select STID127_RESET
+	help
+	  This enables support for STMicroelectronics Digital Consumer
+	  Electronics family StiD127 parts, primarily targetted at set-top-box
+	  and other digital audio/video applications using Flattened Device
+	  Trees.
+
+config SOC_STIH390
+	bool "STIH390 STMicroelectronics Consumer Electronics family"
+	default y
+	select STIH390_RESET
+	help
+	  This enables support for STMicroelectronics Digital Consumer
+	  Electronics family STIH390 parts.
+
+config SOC_STID325
+	bool "STID325 STMicroelectronics Consumer Electronics family"
+	default y
+	select STID325_RESET
+	help
+	  This enables support for STMicroelectronics Digital Consumer
+	  Electronics family STID325 parts.
+
+config ST_CID_IRQMUX
+	bool "st cid steerer irq mux"
+	default y
+	depends on SOC_STID127
+	help
+	  Enable this option to support CID irqmux mapping in the kernel
+
 endif
diff -urNp a/arch/arm/mach-sti/Makefile b/arch/arm/mach-sti/Makefile
--- a/arch/arm/mach-sti/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/mach-sti/Makefile	2019-09-26 21:23:27.220619300 +0100
@@ -1,2 +1,6 @@
 obj-$(CONFIG_SMP)		+= platsmp.o headsmp.o
-obj-$(CONFIG_ARCH_STI) 		+= board-dt.o
+obj-$(CONFIG_ARCH_STI) 		+= board-dt.o sti.o
+obj-$(CONFIG_PM_GENERIC_DOMAINS) += pm_domains.o
+obj-$(CONFIG_PERF_EVENTS)	+= st-pmu-syscfg.o
+obj-$(CONFIG_SUSPEND)		+= pm/
+obj-$(CONFIG_ST_CID_IRQMUX) 	+= cid-irqmux.o
diff -urNp a/arch/arm/mach-sti/Makefile.boot b/arch/arm/mach-sti/Makefile.boot
--- a/arch/arm/mach-sti/Makefile.boot	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/Makefile.boot	2019-09-26 21:23:27.220619300 +0100
@@ -0,0 +1,3 @@
+   zreladdr-y	:= 0x40008000
+params_phys-y	:= 0x40000100
+initrd_phys-y	:= 0x40800000
diff -urNp a/arch/arm/mach-sti/board-dt.c b/arch/arm/mach-sti/board-dt.c
--- a/arch/arm/mach-sti/board-dt.c	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/mach-sti/board-dt.c	2019-09-26 21:23:27.220619300 +0100
@@ -7,28 +7,193 @@
  * published by the Free Software Foundation.
  */
 
+#include <linux/clk-provider.h>
+#include <linux/clocksource.h>
 #include <linux/irq.h>
-#include <linux/of_platform.h>
+#include <linux/of.h>
+#include <linux/of_address.h>
 #include <asm/hardware/cache-l2x0.h>
 #include <asm/mach/arch.h>
+#include <asm/mach/map.h>
 
 #include "smp.h"
+#include "sti.h"
 
-static const char *stih41x_dt_match[] __initdata = {
+enum sti_kernel_modes {
+	STI_KERNEL_NON_SECURE,
+	STI_KERNEL_SECURE,
+};
+
+static int sti_kernel_mode;
+
+#ifdef CONFIG_FIXED_PHY
+#include <linux/phy.h>
+#include <linux/phy_fixed.h>
+
+static int __init of_add_fixed_phys(void)
+{
+	int ret;
+	struct device_node *np, *node;
+	u32 f_link[4];
+	struct fixed_phy_status status = {};
+
+	for_each_node_by_name(np, "stmfp") {
+		for_each_child_of_node(np, node) {
+			int phy_id;
+
+			ret = of_property_read_u32_array(node,
+							 "fixed-link",
+							 f_link, 4);
+			if (ret < 0)
+				continue;
+
+			status.link = 1;
+			status.duplex = f_link[0];
+			status.speed = f_link[1];
+			status.pause = f_link[2];
+			status.asym_pause = f_link[3];
+
+			of_property_read_u32(node, "st,phy-addr", &phy_id);
+			ret = fixed_phy_add(PHY_POLL, phy_id, &status);
+			if (ret) {
+				of_node_put(np);
+				return ret;
+			}
+		}
+	}
+
+	for_each_node_by_name(np, "dwmac") {
+		int phy_id;
+
+		ret = of_property_read_u32_array(np, "fixed-link", f_link, 4);
+		if (ret < 0)
+			return ret;
+
+		status.link = 1;
+		status.duplex = f_link[0];
+		status.speed = f_link[1];
+		status.pause = f_link[2];
+		status.asym_pause = f_link[3];
+
+		of_property_read_u32(np, "snps,phy-addr", &phy_id);
+
+		ret = fixed_phy_add(PHY_POLL, phy_id, &status);
+		if (ret) {
+			of_node_put(np);
+			return ret;
+		}
+	}
+	return 0;
+}
+arch_initcall(of_add_fixed_phys);
+#endif /* CONFIG_FIXED_PHY */
+
+static void sti_l2c310_write_sec(unsigned long val, unsigned reg)
+{
+	pr_debug("%s: reg = 0x%08x, val = 0x%08lx\n", __func__, reg, val);
+}
+
+static void __init sti_l2x0_init(void)
+{
+	u32 way_size = 0x4;
+	u32 aux_ctrl;
+
+	if (of_machine_is_compatible("st,stid127"))
+		way_size = 0x3;
+
+	/* may be this can be encoded in macros like BIT*() */
+	aux_ctrl = (0x1 << L2X0_AUX_CTRL_SHARE_OVERRIDE_SHIFT) |
+		(0x1 << L2X0_AUX_CTRL_DATA_PREFETCH_SHIFT) |
+		(0x1 << L2X0_AUX_CTRL_INSTR_PREFETCH_SHIFT) |
+		(way_size << L2X0_AUX_CTRL_WAY_SIZE_SHIFT);
+
+	if (sti_kernel_mode == STI_KERNEL_NON_SECURE)
+		outer_cache.write_sec = sti_l2c310_write_sec;
+
+	l2x0_of_init(aux_ctrl, L2X0_AUX_CTRL_MASK);
+}
+
+#define PMU_PMNC_MASK		0x3f
+#define PMU_PMNC_ENABLE		BIT(0)
+#define PMU_PMNC_EXPORT		BIT(4)
+
+#define SYSCFG5544		0x880
+#define SYSCFG5544_PMUSECURE	BIT(14)
+
+static int __init sti_get_kernel_mode(void)
+{
+	struct device_node *np;
+	void __iomem *syscfg_core;
+	u32 bak, val;
+
+	/*
+	 * Core syscon instance not yet initialized at this stage,
+	 * so ioremap the section directly.
+	 * Also, only STih407 family concerned for now, so return as secure if
+	 * not these SoCs.
+	 */
+	np = of_find_compatible_node(NULL, NULL, "st,stih407-core-syscfg");
+	if (!np)
+		return STI_KERNEL_SECURE;
+
+	syscfg_core = of_iomap(np, 0);
+	if (!syscfg_core) {
+		pr_err("%s: Failed to map Sysconf Core registers.\n", __func__);
+		return STI_KERNEL_SECURE;
+	}
+
+	/* Read PMU's PMCR register */
+	asm volatile("mrc p15, 0, %0, c9, c12, 0" : "=r"(bak));
+
+	/* Keep only write-able bits */
+	bak &= PMU_PMNC_MASK;
+
+	/* Enable PMU and export events*/
+	val = bak | PMU_PMNC_ENABLE | PMU_PMNC_EXPORT;
+	asm volatile("mcr p15, 0, %0, c9, c12, 0" : : "r"(val));
+
+	/* Read cpu0 secure state */
+	val = readl(syscfg_core + SYSCFG5544);
+	iounmap(syscfg_core);
+
+	/* Restore back PMU's PMCR register */
+	asm volatile("mcr p15, 0, %0, c9, c12, 0" : : "r"(bak));
+
+	if (val & SYSCFG5544_PMUSECURE)
+		return STI_KERNEL_SECURE;
+
+	return STI_KERNEL_NON_SECURE;
+}
+
+static void __init sti_timer_init(void)
+{
+	sti_kernel_mode = sti_get_kernel_mode();
+	pr_info("Kernel running in %s world.\n",
+			sti_kernel_mode == STI_KERNEL_SECURE ?
+			"Secure" : "Normal");
+
+	of_clk_init(NULL);
+	clocksource_of_init();
+	sti_l2x0_init();
+}
+
+static const char *sti_dt_match[] __initdata = {
 	"st,stih415",
 	"st,stih416",
+	"st,stid127",
 	"st,stih407",
 	"st,stih410",
 	"st,stih418",
+	"st,stih390",
+	"st,stid325",
 	NULL
 };
 
-DT_MACHINE_START(STM, "STiH415/416 SoC with Flattened Device Tree")
-	.dt_compat	= stih41x_dt_match,
-	.l2c_aux_val	= L2C_AUX_CTRL_SHARED_OVERRIDE |
-			  L310_AUX_CTRL_DATA_PREFETCH |
-			  L310_AUX_CTRL_INSTR_PREFETCH |
-			  L2C_AUX_CTRL_WAY_SIZE(4),
-	.l2c_aux_mask	= 0xc0000fff,
+DT_MACHINE_START(STM, "STi SoC with Flattened Device Tree")
+	.map_io		= debug_ll_io_init,
+	.init_late	= sti_init_machine_late,
+	.init_time	= sti_timer_init,
+	.init_machine	= sti_init_machine,
 	.smp		= smp_ops(sti_smp_ops),
+	.dt_compat	= sti_dt_match,
 MACHINE_END
Binary files a/arch/arm/mach-sti/board-dt.o and b/arch/arm/mach-sti/board-dt.o differ
diff -urNp a/arch/arm/mach-sti/built-in.mod.c b/arch/arm/mach-sti/built-in.mod.c
--- a/arch/arm/mach-sti/built-in.mod.c	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/built-in.mod.c	2019-09-26 21:23:59.684669400 +0100
@@ -0,0 +1,19 @@
+#include <linux/module.h>
+#include <linux/vermagic.h>
+#include <linux/compiler.h>
+
+MODULE_INFO(vermagic, VERMAGIC_STRING);
+
+struct module __this_module
+__attribute__((section(".gnu.linkonce.this_module"))) = {
+	.name = KBUILD_MODNAME,
+	.arch = MODULE_ARCH_INIT,
+};
+
+MODULE_INFO(intree, "Y");
+
+static const char __module_depends[]
+__used
+__attribute__((section(".modinfo"))) =
+"depends=";
+
Binary files a/arch/arm/mach-sti/built-in.o and b/arch/arm/mach-sti/built-in.o differ
diff -urNp a/arch/arm/mach-sti/cid-irqmux.c b/arch/arm/mach-sti/cid-irqmux.c
--- a/arch/arm/mach-sti/cid-irqmux.c	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/cid-irqmux.c	2019-09-26 21:23:27.220619300 +0100
@@ -0,0 +1,217 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited
+ *
+ * Author: Francesco Virlinzi <francesco.virlinzist.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#include <linux/init.h>
+#include <linux/module.h>
+#include <linux/platform_device.h>
+#include <linux/of.h>
+#include <linux/io.h>
+
+#define IRQMUX_OUTPUT_MASK	GENMASK(29, 0)
+#define IRQMUX_INPUT_INVERT	BIT(30)
+#define IRQMUX_INPUT_ENABLE	BIT(31)
+
+struct st_cid_irqmux_data {
+	const char *name;
+	u32 num_input;
+	u32 num_output;
+	int (*custom_mapping)(struct device *dev, long input, long *enable,
+			      long *output, long *inv);
+};
+
+struct st_cid_irqmux_info {
+	struct list_head list;
+	void __iomem *base;
+	struct device *dev;
+};
+
+static int apply_irqmux_mapping(struct device *dev)
+{
+	struct st_cid_irqmux_info *info = dev_get_drvdata(dev);
+	struct st_cid_irqmux_data *pdata = dev_get_platdata(dev);
+	int ret;
+
+	if (pdata->custom_mapping) {
+		long input, output, invert, enable;
+		for (input = 0; input < pdata->num_input; ++input) {
+			long mapping_value;
+			output = invert = enable = 0;
+			ret = pdata->custom_mapping(dev,
+					input, &enable, &output, &invert);
+			if (ret) {
+				dev_err(dev, "Mapping failed for input %ld\n",
+					input);
+				return ret;
+			}
+			mapping_value = (output & IRQMUX_OUTPUT_MASK);
+			mapping_value |= (enable ? IRQMUX_INPUT_ENABLE : 0);
+			mapping_value |= (invert ? IRQMUX_INPUT_INVERT : 0);
+			writel_relaxed(mapping_value, info->base + input * 4);
+		}
+	}
+
+	return 0;
+}
+
+static int of_generic_irqmux_mapping(struct device *dev, long input,
+				     long *enable, long *output, long *inv)
+{
+	struct st_cid_irqmux_data *pdata = dev_get_platdata(dev);
+	struct device_node *np;
+
+	np = dev->of_node;
+	if (of_property_read_bool(np, "interrupts-enable"))
+		*enable = 1;
+	else
+		*enable = 0;
+
+	if (of_property_read_bool(np, "interrupts-invert"))
+		*inv = 1;
+	else
+		*inv = 0;
+
+	*output = input % pdata->num_output;
+
+	return 0;
+}
+
+static int of_custom_irqmux_mapping(struct device *dev, long input,
+				    long *enable, long *output, long *inv)
+{
+	struct device_node *np;
+	union {
+		u32 array[5];
+		struct {
+			u32 begin;
+			u32 size;
+			u32 output;
+			u32 enabled;
+			u32 inverted;
+		};
+	} irqmux_map_entry;
+	const __be32 *list;
+	const struct property *pp;
+	int remaining;
+
+	np = dev->of_node;
+	pp = of_find_property(np, "irqmux-map", NULL);
+	BUG_ON(!pp);
+
+	list = pp->value;
+	remaining = pp->length / sizeof(*list);
+	while (remaining >= ARRAY_SIZE(irqmux_map_entry.array)) {
+		int i;
+		for (i = 0; i < ARRAY_SIZE(irqmux_map_entry.array); ++i)
+			irqmux_map_entry.array[i] = be32_to_cpup(list++);
+
+		if (input >= irqmux_map_entry.begin &&
+		    input < (irqmux_map_entry.begin + irqmux_map_entry.size))
+			goto found;
+
+		remaining -= ARRAY_SIZE(irqmux_map_entry.array);
+	}
+
+	return -EINVAL;
+
+found:
+	*enable = irqmux_map_entry.enabled;
+	*inv = irqmux_map_entry.inverted;
+	*output = irqmux_map_entry.output;
+
+	return 0;
+}
+
+static void *st_cid_irqmux_probe_dt(struct platform_device *pdev)
+{
+	struct device_node *np = pdev->dev.of_node;
+	struct st_cid_irqmux_data *pdata;
+
+	if (!np)
+		return ERR_PTR(-EINVAL);
+
+	pdata = devm_kzalloc(&pdev->dev, sizeof(*pdata), GFP_KERNEL);
+	if (!pdata)
+		return ERR_PTR(-ENOMEM);
+
+	of_property_read_string(np, "irqmux-name", &pdata->name);
+	of_property_read_u32(np, "irqmux-inputs", &pdata->num_input);
+	of_property_read_u32(np, "irqmux-outputs", &pdata->num_output);
+
+	if (of_find_property(np, "irqmux-map", NULL))
+		pdata->custom_mapping = of_custom_irqmux_mapping;
+	else
+		pdata->custom_mapping = of_generic_irqmux_mapping;
+
+	return pdev->dev.platform_data = pdata;
+}
+
+static int st_cid_irqmux_probe(struct platform_device *pdev)
+{
+	struct st_cid_irqmux_data *pdata;
+	struct st_cid_irqmux_info *info;
+	struct resource *res;
+	int ret;
+
+	pdata = st_cid_irqmux_probe_dt(pdev);
+	if (IS_ERR(pdata))
+		return PTR_ERR(pdata);
+
+	info = devm_kzalloc(&pdev->dev, sizeof(*info), GFP_KERNEL);
+	if (!info)
+		return -ENOMEM;
+
+	info->dev = &pdev->dev;
+	platform_set_drvdata(pdev, info);
+
+	res = platform_get_resource(pdev, IORESOURCE_MEM, 0);
+	info->base = devm_ioremap_resource(&pdev->dev, res);
+	if (IS_ERR(info->base))
+		return PTR_ERR(info->base);
+
+	ret = apply_irqmux_mapping(&pdev->dev);
+	if (ret)
+		return ret;
+
+	dev_info(&pdev->dev, "%s configured\n", pdata->name);
+
+	return 0;
+}
+
+static struct of_device_id st_cid_irqmux_match[] = {
+	{ .compatible = "st,cid-irqmux",},
+	{},
+};
+
+#ifdef CONFIG_PM_SLEEP
+static int st_cid_irqmux_resume(struct device *dev)
+{
+	return apply_irqmux_mapping(dev);
+}
+
+static SIMPLE_DEV_PM_OPS(st_cid_irqmux_pm, NULL, st_cid_irqmux_resume);
+#define ST_CID_IRQMUX	(&st_cid_irqmux_pm)
+#else
+#define ST_CID_IRQMUX	NULL
+#endif
+
+static struct platform_driver st_cid_irqmux_driver = {
+	.driver = {
+		.name = "st-cid-irqmux",
+		.owner = THIS_MODULE,
+		.of_match_table = st_cid_irqmux_match,
+		.pm = ST_CID_IRQMUX,
+	},
+	.probe = st_cid_irqmux_probe,
+};
+
+static int __init st_cid_irqmux_init(void)
+{
+	return platform_driver_register(&st_cid_irqmux_driver);
+}
+core_initcall(st_cid_irqmux_init);
diff -urNp a/arch/arm/mach-sti/headsmp.S b/arch/arm/mach-sti/headsmp.S
--- a/arch/arm/mach-sti/headsmp.S	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/mach-sti/headsmp.S	2019-09-26 21:23:27.224619300 +0100
@@ -13,30 +13,79 @@
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
  */
+
 #include <linux/linkage.h>
 #include <linux/init.h>
 
+#define MPIDR_HWID_BITMASK 0xFFF
+#define A9MP_ICCICR_REG_OFFSET   0x100
+#define A9MP_ICCPMR_REG_OFFSET   0x104
+#define ACTLR_SMP_SHIFT          6
+#define ACTLR_SMP_MASK           (1 << ACTLR_SMP_SHIFT)
+
 /*
  * ST specific entry point for secondary CPUs.  This provides
  * a "holding pen" into which all secondary cores are held until we're
  * ready for them to initialise.
  */
 ENTRY(sti_secondary_startup)
+	mrc	p15, 0, r1, c1, c0, 1
+	bic	r1, r1, #(ACTLR_SMP_MASK)
+	mcr	p15, 0, r1, c1, c0, 1
+	bl      v7_invalidate_l1
+
+	/*
+	 * Enable CPU interface interrupt fwding for the
+	 * current secondary core
+	 */
+	mrc	p15, 4, r1, c15, c0, 0
+	mov	r2, #1
+	str	r2, [r1, #A9MP_ICCICR_REG_OFFSET]
+	mov	r2, #0xff
+	str	r2, [r1, #A9MP_ICCPMR_REG_OFFSET]
+
+	/* Read the current secondary core number that we are running on ! */
 	mrc	p15, 0, r0, c0, c0, 5
-	and	r0, r0, #15
+	ldr     r7, =MPIDR_HWID_BITMASK
+	and	r0, r0, r7
+
+	/*
+	 * Read the linux kernel global pen holding variable and
+	 * compare it with the current CPU number.
+	 * If matches, go ahead to boot the current CPU, otherwise
+	 * wait for the next turn. While waiting fall on to a WFI
+	 */
 	adr	r4, 1f
 	ldmia	r4, {r5, r6}
 	sub	r4, r4, r5
 	add	r6, r6, r4
 pen:	ldr	r7, [r6]
 	cmp	r7, r0
-	bne	pen
+	beq	out
+	wfi
+	b	pen
 
 	/*
 	 * we've been released from the holding pen: secondary_stack
 	 * should now contain the SVC stack for this core
 	 */
-	b	secondary_startup
-
+out:	b	secondary_startup
+ENDPROC(sti_secondary_startup)
+	.align
 1:	.long	.
 	.long	pen_release
+
+ENTRY(sti_abap_c_start)
+	wfi
+	adr	r6, slave_jump_add
+2:	ldr	r5, [r6]
+	cmp     r5, #(~0)
+	beq	2b
+	bx	r5
+slave_jump_add:
+	.word ~0
+ENDPROC(sti_abap_c_start)
+stm_abap_c_end:
+	.globl sti_abap_c_size
+sti_abap_c_size:
+	.long stm_abap_c_end - sti_abap_c_start
Binary files a/arch/arm/mach-sti/headsmp.o and b/arch/arm/mach-sti/headsmp.o differ
diff -urNp a/arch/arm/mach-sti/include/mach/io.h b/arch/arm/mach-sti/include/mach/io.h
--- a/arch/arm/mach-sti/include/mach/io.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/include/mach/io.h	2019-09-26 21:23:27.224619300 +0100
@@ -0,0 +1,37 @@
+/*
+ * arch/arm/mach-sti/include/mach/io.h
+ *
+ * IO definitions for STMicroelectronics SoCs and boards
+ *
+ * Copied from arch/arm/mach-omap1/include/mach/io.h
+ *
+ * This program is free software; you can redistribute it and/or modify it
+ * under the terms of the GNU General Public License as published by the
+ * Free Software Foundation; either version 2 of the License, or (at your
+ * option) any later version.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESS OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
+ * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN
+ * NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
+ * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
+ * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
+ * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+ *
+ * You should have received a copy of the GNU General Public License along
+ * with this program; if not, write to the Free Software Foundation, Inc.,
+ * 675 Mass Ave, Cambridge, MA 02139, USA.
+ */
+
+#ifndef __ASM_ARM_ARCH_IO_H
+#define __ASM_ARM_ARCH_IO_H
+
+/* We don't support IO anyway */
+#define IO_SPACE_LIMIT ((resource_size_t)0)
+
+#define __io(a)		__typesafe_io((a) & IO_SPACE_LIMIT)
+
+#endif
diff -urNp a/arch/arm/mach-sti/platsmp.c b/arch/arm/mach-sti/platsmp.c
--- a/arch/arm/mach-sti/platsmp.c	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/mach-sti/platsmp.c	2019-09-26 21:23:28.296620800 +0100
@@ -20,23 +20,50 @@
 #include <linux/io.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
+#include <linux/reboot.h>
+#include <linux/notifier.h>
 
 #include <asm/cacheflush.h>
 #include <asm/smp_plat.h>
 #include <asm/smp_scu.h>
+#include <asm/cp15.h>
+#include <asm/idmap.h>
 
+#include <linux/power/st_lpm_def.h>
 #include "smp.h"
 
-static void write_pen_release(int val)
+static void __iomem *sbc_base;
+static unsigned long sbc_ph_base;
+void *abap_prg_base;
+static unsigned long abap_ph_base;
+
+#ifdef CONFIG_KEXEC
+static int kexec_case;
+
+static int kexec_notify_cb(struct notifier_block *nb, ulong event, void *buf)
+{
+	if (event == SYS_RESTART)
+		kexec_case = 1;
+	return NOTIFY_DONE;
+};
+
+static struct notifier_block kexec_notifier = {
+	.notifier_call = kexec_notify_cb,
+};
+#endif
+
+static void __cpuinit write_pen_release(int val)
 {
 	pen_release = val;
+	/* wmb so that all cores can see this and before cache flush */
 	smp_wmb();
-	sync_cache_w(&pen_release);
+	__cpuc_flush_dcache_area((void *)&pen_release, sizeof(pen_release));
+	outer_clean_range(__pa(&pen_release), __pa(&pen_release + 1));
 }
 
 static DEFINE_SPINLOCK(boot_lock);
 
-static void sti_secondary_init(unsigned int cpu)
+static void __cpuinit sti_secondary_init(unsigned int cpu)
 {
 	trace_hardirqs_off();
 
@@ -53,7 +80,8 @@ static void sti_secondary_init(unsigned
 	spin_unlock(&boot_lock);
 }
 
-static int sti_boot_secondary(unsigned int cpu, struct task_struct *idle)
+static int __cpuinit sti_boot_secondary(unsigned int cpu,
+					struct task_struct *idle)
 {
 	unsigned long timeout;
 
@@ -81,7 +109,6 @@ static int sti_boot_secondary(unsigned i
 
 	timeout = jiffies + (1 * HZ);
 	while (time_before(jiffies, timeout)) {
-		smp_rmb();
 		if (pen_release == -1)
 			break;
 
@@ -97,20 +124,288 @@ static int sti_boot_secondary(unsigned i
 	return pen_release != -1 ? -ENOSYS : 0;
 }
 
+static const unsigned int sti_get_sbc_penhold_var_offset(void)
+{
+	unsigned int sbc_offset = DATA_OFFSET;
+
+	if ((of_machine_is_compatible("st,stih407")
+		|| of_machine_is_compatible("st,stih410")) &&
+		!of_machine_is_compatible("st,stih418"))
+		sbc_offset += PEN_HOLD_VAR_OFFSET_4xx;
+	else
+		/* pen holding offset will be same from stih418 */
+		sbc_offset += PEN_HOLD_VAR_OFFSET_418;
+
+	return sbc_offset;
+}
+
 static void __init sti_smp_prepare_cpus(unsigned int max_cpus)
 {
 	void __iomem *scu_base = NULL;
+	struct resource res;
+
 	struct device_node *np = of_find_compatible_node(
 					NULL, NULL, "arm,cortex-a9-scu");
+	void __iomem *cpu_strt_ptr =
+		(void *)CONFIG_PAGE_OFFSET + 0x200;
+
+	unsigned long entry_pa = virt_to_phys(sti_secondary_startup);
+
+
 	if (np) {
 		scu_base = of_iomap(np, 0);
 		scu_enable(scu_base);
 		of_node_put(np);
+
+		if (max_cpus > 1) {
+			/*
+			 * register a shutdown notification to catch
+			 * kexec call
+			 */
+#ifdef CONFIG_KEXEC
+			register_reboot_notifier(&kexec_notifier);
+#endif
+
+			np = of_find_compatible_node(NULL, NULL, "st,lpm");
+
+			/*
+			 * If LPM not found, fallback to legacy pen holding
+			 * policy in RAM
+			 */
+			if (IS_ERR_OR_NULL(np)) {
+				__raw_writel(entry_pa, cpu_strt_ptr);
+				/*
+				 * wmb so that data is actually written
+				 * before cache flush is done
+				 */
+				smp_wmb();
+				__cpuc_flush_dcache_area(cpu_strt_ptr, 4);
+				outer_clean_range(__pa(cpu_strt_ptr),
+						  __pa(cpu_strt_ptr + 1));
+
+				np = of_find_node_by_name(NULL, "abap-regs");
+				if (IS_ERR_OR_NULL(np))
+					return;
+
+				abap_prg_base = of_iomap(np, 0);
+				if (!of_address_to_resource(np, 0, &res))
+					abap_ph_base = res.start;
+
+				of_node_put(np);
+				if (!abap_prg_base)
+					return;
+				/*
+				 * we never know if this boot is a
+				 * kexec initiated warm boot case of a
+				 * new kernel, so signal the sec core(s)
+				 * by writing also to the abap area.
+				 * No harm in case we came here during
+				 * other boot cases !
+				 */
+				__raw_writel(entry_pa, abap_prg_base +
+						sti_abap_c_size - sizeof(int));
+
+#ifndef CONFIG_KEXEC
+				iounmap(abap_prg_base);
+#endif
+				return;
+			}
+
+			sbc_base = of_iomap(np, 0);
+			if (!of_address_to_resource(np, 0, &res))
+				sbc_ph_base = res.start;
+
+			of_node_put(np);
+			if (!sbc_base)
+				return;
+
+			writel(entry_pa, sbc_base +
+				sti_get_sbc_penhold_var_offset());
+#ifndef CONFIG_KEXEC
+			iounmap(sbc_base);
+#endif
+		}
+	}
+}
+
+#ifdef CONFIG_HOTPLUG_CPU
+
+static inline void cpu_enter_lowpower(void)
+{
+	unsigned int v;
+
+	flush_cache_louis();
+	asm volatile(
+	"	mcr	p15, 0, %1, c7, c5, 0\n"
+	"	dsb\n"
+	/*
+	 * Turn off coherency
+	 */
+	"	mrc	p15, 0, %0, c1, c0, 1\n"
+	"	bic	%0, %0, #0x40\n"
+	"	mcr	p15, 0, %0, c1, c0, 1\n"
+	"	mrc	p15, 0, %0, c1, c0, 0\n"
+	"	bic	%0, %0, %2\n"
+	"	mcr	p15, 0, %0, c1, c0, 0\n"
+	  : "=&r" (v)
+	  : "r" (0), "Ir" (CR_C)
+	  : "cc");
+}
+
+static inline void cpu_leave_lowpower(void)
+{
+	unsigned int v;
+
+	asm volatile(
+	"	mrc	p15, 0, %0, c1, c0, 0\n"
+	"	orr	%0, %0, %1\n"
+	"	mcr	p15, 0, %0, c1, c0, 0\n"
+	"	mrc	p15, 0, %0, c1, c0, 1\n"
+	"	orr	%0, %0, #0x40\n"
+	"	mcr	p15, 0, %0, c1, c0, 1\n"
+	  : "=&r" (v)
+	  : "Ir" (CR_C)
+	  : "cc");
+}
+
+static inline void platform_do_lowpower(unsigned int cpu, int *spurious)
+{
+	/*
+	 * there is no power-control hardware on this platform, so all
+	 * we can do is put the core into WFI; this is safe as the calling
+	 * code will have already disabled interrupts
+	 */
+	for (;;) {
+		dsb();
+		wfi();
+
+		if (pen_release == cpu_logical_map(cpu)) {
+			/*
+			 * OK, proper wakeup, we're done
+			 */
+			break;
+		}
+
+		/*
+		 * Getting here, means that we have come out of WFI without
+		 * having been woken up - this shouldn't happen
+		 *
+		 * Just note it happening - when we're woken, we can report
+		 * its occurrence.
+		 */
+		(*spurious)++;
+	}
+}
+
+#ifdef CONFIG_KEXEC
+
+/*
+ * Start of pen-holding code = pen-holding variable + 4
+ * Since the pen-holding code is thumb compiled, add 1
+ * so that bx switches code to thumb mode
+ */
+#define PENHOLD_CODE_OFF	(4 + 1)
+
+static void kexec_sleep(unsigned int cpu)
+{
+	unsigned long val;
+	typedef void (*phys_reset_t)(unsigned long);
+	phys_reset_t phys_reset;
+	unsigned int rst_add;
+
+	/* If no SBC available, try to use abap area of the SOC */
+	if (!sbc_base || !sbc_ph_base) {
+		/*
+		 * if abap not available or code size that needs to copy
+		 * is greater than abap area (8 word size registers), fail !
+		 */
+		if (!abap_prg_base || !abap_ph_base || sti_abap_c_size > 32)
+			return;
+
+		/*
+		 * copy the pen holding code from the linked location
+		 * to abap area
+		 */
+		memcpy(abap_prg_base, sti_abap_c_start, sti_abap_c_size);
+		rst_add = abap_ph_base;
+	} else {
+		const unsigned int penhold_var_off =
+					sti_get_sbc_penhold_var_offset();
+
+		val = readl_relaxed(sbc_base + penhold_var_off);
+
+		/*
+		 * val must be ~0, this is ensured by lpm driver's
+		 * shutdown routine that is called before this.
+		 * Otherwise no point in jumping to lpm based pen holding
+		 * code. We could have directly written ~0 to pen holding var
+		 * from here, but lpm driver is already doing this in shutdown
+		 * taking care of all warm restart use cases that involves lpm !
+		 */
+		if (val != (~0))
+			return;
+
+		rst_add = sbc_ph_base + penhold_var_off + PENHOLD_CODE_OFF;
+	}
+
+	setup_mm_for_reboot(); /* setup identity mapping(s) */
+	flush_cache_all();
+	cpu_proc_fin();
+	flush_cache_all();
+	phys_reset = (phys_reset_t)virt_to_phys(cpu_reset);
+	phys_reset(rst_add);
+	/* Should never get here. */
+}
+#endif
+
+/*
+ * platform-specific code to shutdown a CPU
+ *
+ * Called with IRQs disabled
+ */
+static void __ref sti_cpu_die(unsigned int cpu)
+{
+	int spurious = 0;
+
+	/*
+	 * We're ready for shutdown now, so do it.
+	 * First check if it came here beacuse of
+	 * a kexec !
+	 */
+#ifdef CONFIG_KEXEC
+	if (kexec_case) {
+		kexec_sleep(cpu);
+		pr_err("kexec not handled, core%d failed to sleep\n", cpu);
+		kexec_case = 0;
+		BUG();
 	}
+#endif
+
+	/*
+	 * Go for a easy to wake-up WFI
+	 * for the secondary cores !
+	 */
+	cpu_enter_lowpower();
+
+	platform_do_lowpower(cpu, &spurious);
+
+	/*
+	 * bring this CPU back into the world of cache
+	 * coherency, and then restore interrupts
+	 */
+	cpu_leave_lowpower();
+
+	if (spurious)
+		pr_warn("CPU%u: %u spurious wakeup calls\n", cpu, spurious);
 }
 
+#endif /* CONFIG_HOTPLUG_CPU */
+
 struct smp_operations __initdata sti_smp_ops = {
 	.smp_prepare_cpus	= sti_smp_prepare_cpus,
 	.smp_secondary_init	= sti_secondary_init,
 	.smp_boot_secondary	= sti_boot_secondary,
+#ifdef CONFIG_HOTPLUG_CPU
+	.cpu_die		= sti_cpu_die,
+#endif
 };
Binary files a/arch/arm/mach-sti/platsmp.o and b/arch/arm/mach-sti/platsmp.o differ
diff -urNp a/arch/arm/mach-sti/pm/.built-in.o.cmd b/arch/arm/mach-sti/pm/.built-in.o.cmd
--- a/arch/arm/mach-sti/pm/.built-in.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/.built-in.o.cmd	2019-09-26 21:23:59.656669400 +0100
@@ -0,0 +1 @@
+cmd_arch/arm/mach-sti/pm/built-in.o :=  /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-ld -EL    -r -o arch/arm/mach-sti/pm/built-in.o arch/arm/mach-sti/pm/pokeloop.o arch/arm/mach-sti/pm/suspend.o arch/arm/mach-sti/pm/suspend_asm.o arch/arm/mach-sti/pm/suspend_hps.o arch/arm/mach-sti/pm/suspend_cps.o arch/arm/mach-sti/pm/suspend_dcps_ddr_off.o ; scripts/mod/modpost arch/arm/mach-sti/pm/built-in.o
diff -urNp a/arch/arm/mach-sti/pm/.pokeloop.o.cmd b/arch/arm/mach-sti/pm/.pokeloop.o.cmd
--- a/arch/arm/mach-sti/pm/.pokeloop.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/.pokeloop.o.cmd	2019-09-26 21:23:56.520664000 +0100
@@ -0,0 +1,13 @@
+cmd_arch/arm/mach-sti/pm/pokeloop.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/pm/.pokeloop.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include  -D__ASSEMBLY__ -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a  -include asm/unified.h -msoft-float -gdwarf-2           -c -o arch/arm/mach-sti/pm/pokeloop.o arch/arm/mach-sti/pm/pokeloop.S
+
+source_arch/arm/mach-sti/pm/pokeloop.o := arch/arm/mach-sti/pm/pokeloop.S
+
+deps_arch/arm/mach-sti/pm/pokeloop.o := \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/unified.h \
+    $(wildcard include/config/arm/asm/unified.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+  arch/arm/mach-sti/pm/poke_table.h \
+
+arch/arm/mach-sti/pm/pokeloop.o: $(deps_arch/arm/mach-sti/pm/pokeloop.o)
+
+$(deps_arch/arm/mach-sti/pm/pokeloop.o):
diff -urNp a/arch/arm/mach-sti/pm/.suspend.o.cmd b/arch/arm/mach-sti/pm/.suspend.o.cmd
--- a/arch/arm/mach-sti/pm/.suspend.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/.suspend.o.cmd	2019-09-26 21:23:57.208665100 +0100
@@ -0,0 +1,736 @@
+cmd_arch/arm/mach-sti/pm/suspend.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/pm/.suspend.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(suspend)"  -D"KBUILD_MODNAME=KBUILD_STR(suspend)" -c -o arch/arm/mach-sti/pm/suspend.o arch/arm/mach-sti/pm/suspend.c
+
+source_arch/arm/mach-sti/pm/suspend.o := arch/arm/mach-sti/pm/suspend.c
+
+deps_arch/arm/mach-sti/pm/suspend.o := \
+  include/linux/irq.h \
+    $(wildcard include/config/generic/hardirqs.h) \
+    $(wildcard include/config/smp.h) \
+    $(wildcard include/config/generic/pending/irq.h) \
+    $(wildcard include/config/hardirqs/sw/resend.h) \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+    $(wildcard include/config/debug/preempt.h) \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  include/linux/cpumask.h \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/hotplug/cpu.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/kernel.h \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/ring/buffer.h) \
+    $(wildcard include/config/tracing.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+  include/linux/irqflags.h \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  include/linux/typecheck.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+    $(wildcard include/config/arm/lpae.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug.h) \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/bitmap.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/bug.h \
+  include/linux/preempt.h \
+    $(wildcard include/config/preempt.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+    $(wildcard include/config/outer/cache.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/spinlock.h \
+    $(wildcard include/config/debug/spinlock.h) \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/debug/lock/alloc.h) \
+  include/linux/bottom_half.h \
+  include/linux/spinlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/rwlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/sa110.h) \
+    $(wildcard include/config/cpu/v6.h) \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/gfp.h \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/zone/dma32.h) \
+    $(wildcard include/config/pm/sleep.h) \
+    $(wildcard include/config/cma.h) \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/compaction.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/sparsemem.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/linux/seqlock.h \
+  include/linux/nodemask.h \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/page-flags-layout.h \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+  include/generated/bounds.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+  include/asm-generic/getorder.h \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/memory/hotremove.h) \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/notifier.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/completion.h \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/rcutree.h \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+    $(wildcard include/config/sysfs.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  include/linux/mmdebug.h \
+    $(wildcard include/config/debug/vm.h) \
+    $(wildcard include/config/debug/virtual.h) \
+  include/linux/irqreturn.h \
+  include/linux/irqnr.h \
+  include/uapi/linux/irqnr.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irq.h \
+    $(wildcard include/config/sparse/irq.h) \
+    $(wildcard include/config/multi/irq/handler.h) \
+  arch/arm/include/generated/asm/irq_regs.h \
+  include/asm-generic/irq_regs.h \
+  include/linux/irqdesc.h \
+    $(wildcard include/config/irq/preflow/fasteoi.h) \
+    $(wildcard include/config/proc/fs.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_irq.h \
+  include/linux/io.h \
+    $(wildcard include/config/has/ioport.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/io.h \
+    $(wildcard include/config/need/mach/io/h.h) \
+    $(wildcard include/config/pci.h) \
+    $(wildcard include/config/pcmcia/soc/common.h) \
+    $(wildcard include/config/isa.h) \
+    $(wildcard include/config/pccard.h) \
+  include/asm-generic/pci_iomap.h \
+    $(wildcard include/config/no/generic/pci/ioport/map.h) \
+    $(wildcard include/config/generic/pci/iomap.h) \
+  arch/arm/mach-sti/include/mach/io.h \
+  include/linux/irqchip/arm-gic.h \
+  include/linux/of.h \
+    $(wildcard include/config/sparc.h) \
+    $(wildcard include/config/of/dynamic.h) \
+    $(wildcard include/config/of.h) \
+    $(wildcard include/config/attach/node.h) \
+    $(wildcard include/config/detach/node.h) \
+    $(wildcard include/config/add/property.h) \
+    $(wildcard include/config/remove/property.h) \
+    $(wildcard include/config/update/property.h) \
+    $(wildcard include/config/proc/devicetree.h) \
+  include/linux/kref.h \
+  include/linux/mod_devicetable.h \
+  include/linux/uuid.h \
+  include/uapi/linux/uuid.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/prom.h \
+  include/linux/of_address.h \
+    $(wildcard include/config/of/address.h) \
+  include/linux/ioport.h \
+  include/linux/platform_device.h \
+    $(wildcard include/config/suspend.h) \
+    $(wildcard include/config/hibernate/callbacks.h) \
+  include/linux/device.h \
+    $(wildcard include/config/debug/devres.h) \
+    $(wildcard include/config/acpi.h) \
+    $(wildcard include/config/pinctrl.h) \
+    $(wildcard include/config/devtmpfs.h) \
+    $(wildcard include/config/sysfs/deprecated.h) \
+  include/linux/kobject.h \
+  include/linux/sysfs.h \
+  include/linux/kobject_ns.h \
+  include/linux/stat.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/stat.h \
+  include/uapi/linux/stat.h \
+  include/linux/uidgid.h \
+    $(wildcard include/config/uidgid/strict/type/checks.h) \
+    $(wildcard include/config/user/ns.h) \
+  include/linux/highuid.h \
+  include/linux/klist.h \
+  include/linux/pinctrl/devinfo.h \
+    $(wildcard include/config/pm.h) \
+  include/linux/pinctrl/consumer.h \
+    $(wildcard include/config/pinconf.h) \
+  include/linux/err.h \
+  include/linux/seq_file.h \
+  include/linux/pinctrl/pinctrl-state.h \
+  include/linux/pm.h \
+    $(wildcard include/config/vt/console/sleep.h) \
+    $(wildcard include/config/pm/runtime.h) \
+    $(wildcard include/config/pm/clk.h) \
+    $(wildcard include/config/pm/generic/domains.h) \
+  include/linux/ratelimit.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/device.h \
+    $(wildcard include/config/dmabounce.h) \
+    $(wildcard include/config/iommu/api.h) \
+    $(wildcard include/config/arm/dma/use/iommu.h) \
+    $(wildcard include/config/arch/omap.h) \
+  include/linux/pm_wakeup.h \
+  include/linux/vmalloc.h \
+  include/linux/rbtree.h \
+  arch/arm/mach-sti/pm/suspend.h \
+  include/linux/suspend.h \
+    $(wildcard include/config/vt.h) \
+    $(wildcard include/config/hibernation.h) \
+    $(wildcard include/config/pm/sleep/debug.h) \
+    $(wildcard include/config/pm/autosleep.h) \
+    $(wildcard include/config/arch/save/page/keys.h) \
+  include/linux/swap.h \
+    $(wildcard include/config/migration.h) \
+    $(wildcard include/config/memory/failure.h) \
+    $(wildcard include/config/frontswap.h) \
+    $(wildcard include/config/memcg/swap.h) \
+    $(wildcard include/config/swap.h) \
+  include/linux/memcontrol.h \
+    $(wildcard include/config/transparent/hugepage.h) \
+    $(wildcard include/config/inet.h) \
+    $(wildcard include/config/memcg/kmem.h) \
+  include/linux/cgroup.h \
+    $(wildcard include/config/cgroups.h) \
+  include/linux/sched.h \
+    $(wildcard include/config/sched/debug.h) \
+    $(wildcard include/config/no/hz/common.h) \
+    $(wildcard include/config/lockup/detector.h) \
+    $(wildcard include/config/core/dump/default/elf/headers.h) \
+    $(wildcard include/config/sched/autogroup.h) \
+    $(wildcard include/config/virt/cpu/accounting/native.h) \
+    $(wildcard include/config/bsd/process/acct.h) \
+    $(wildcard include/config/taskstats.h) \
+    $(wildcard include/config/audit.h) \
+    $(wildcard include/config/inotify/user.h) \
+    $(wildcard include/config/fanotify.h) \
+    $(wildcard include/config/epoll.h) \
+    $(wildcard include/config/posix/mqueue.h) \
+    $(wildcard include/config/keys.h) \
+    $(wildcard include/config/perf/events.h) \
+    $(wildcard include/config/schedstats.h) \
+    $(wildcard include/config/task/delay/acct.h) \
+    $(wildcard include/config/fair/group/sched.h) \
+    $(wildcard include/config/rt/group/sched.h) \
+    $(wildcard include/config/cgroup/sched.h) \
+    $(wildcard include/config/blk/dev/io/trace.h) \
+    $(wildcard include/config/rcu/boost.h) \
+    $(wildcard include/config/compat/brk.h) \
+    $(wildcard include/config/cc/stackprotector.h) \
+    $(wildcard include/config/virt/cpu/accounting/gen.h) \
+    $(wildcard include/config/sysvipc.h) \
+    $(wildcard include/config/detect/hung/task.h) \
+    $(wildcard include/config/auditsyscall.h) \
+    $(wildcard include/config/rt/mutexes.h) \
+    $(wildcard include/config/block.h) \
+    $(wildcard include/config/task/xacct.h) \
+    $(wildcard include/config/cpusets.h) \
+    $(wildcard include/config/futex.h) \
+    $(wildcard include/config/fault/injection.h) \
+    $(wildcard include/config/latencytop.h) \
+    $(wildcard include/config/function/graph/tracer.h) \
+    $(wildcard include/config/uprobes.h) \
+    $(wildcard include/config/bcache.h) \
+    $(wildcard include/config/have/unstable/sched/clock.h) \
+    $(wildcard include/config/irq/time/accounting.h) \
+    $(wildcard include/config/no/hz/full.h) \
+    $(wildcard include/config/stack/growsup.h) \
+    $(wildcard include/config/mm/owner.h) \
+  include/uapi/linux/sched.h \
+  include/linux/capability.h \
+  include/uapi/linux/capability.h \
+  include/linux/mm_types.h \
+    $(wildcard include/config/split/ptlock/cpus.h) \
+    $(wildcard include/config/have/cmpxchg/double.h) \
+    $(wildcard include/config/have/aligned/struct/page.h) \
+    $(wildcard include/config/want/page/debug/flags.h) \
+    $(wildcard include/config/kmemcheck.h) \
+    $(wildcard include/config/aio.h) \
+    $(wildcard include/config/mmu/notifier.h) \
+  include/linux/auxvec.h \
+  include/uapi/linux/auxvec.h \
+  arch/arm/include/generated/asm/auxvec.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/auxvec.h \
+  include/linux/page-debug-flags.h \
+    $(wildcard include/config/page/poisoning.h) \
+    $(wildcard include/config/page/guard.h) \
+    $(wildcard include/config/page/debug/something/else.h) \
+  include/linux/uprobes.h \
+    $(wildcard include/config/arch/supports/uprobes.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/mmu.h \
+    $(wildcard include/config/cpu/has/asid.h) \
+  arch/arm/include/generated/asm/cputime.h \
+  include/asm-generic/cputime.h \
+    $(wildcard include/config/virt/cpu/accounting.h) \
+  include/asm-generic/cputime_jiffies.h \
+  include/linux/sem.h \
+  include/uapi/linux/sem.h \
+  include/linux/ipc.h \
+  include/uapi/linux/ipc.h \
+  arch/arm/include/generated/asm/ipcbuf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/ipcbuf.h \
+  arch/arm/include/generated/asm/sembuf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/sembuf.h \
+  include/linux/signal.h \
+    $(wildcard include/config/old/sigaction.h) \
+  include/uapi/linux/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/signal-defs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/sigcontext.h \
+  arch/arm/include/generated/asm/siginfo.h \
+  include/asm-generic/siginfo.h \
+  include/uapi/asm-generic/siginfo.h \
+  include/linux/pid.h \
+  include/linux/proportions.h \
+  include/linux/percpu_counter.h \
+  include/linux/seccomp.h \
+    $(wildcard include/config/seccomp.h) \
+    $(wildcard include/config/seccomp/filter.h) \
+  include/uapi/linux/seccomp.h \
+  include/linux/rculist.h \
+  include/linux/rtmutex.h \
+    $(wildcard include/config/debug/rt/mutexes.h) \
+  include/linux/plist.h \
+    $(wildcard include/config/debug/pi/list.h) \
+  include/linux/resource.h \
+  include/uapi/linux/resource.h \
+  arch/arm/include/generated/asm/resource.h \
+  include/asm-generic/resource.h \
+  include/uapi/asm-generic/resource.h \
+  include/linux/hrtimer.h \
+    $(wildcard include/config/high/res/timers.h) \
+    $(wildcard include/config/timerfd.h) \
+  include/linux/timerqueue.h \
+  include/linux/task_io_accounting.h \
+    $(wildcard include/config/task/io/accounting.h) \
+  include/linux/latencytop.h \
+  include/linux/cred.h \
+    $(wildcard include/config/debug/credentials.h) \
+    $(wildcard include/config/security.h) \
+  include/linux/key.h \
+    $(wildcard include/config/sysctl.h) \
+  include/linux/sysctl.h \
+  include/uapi/linux/sysctl.h \
+  include/linux/selinux.h \
+    $(wildcard include/config/security/selinux.h) \
+  include/linux/llist.h \
+    $(wildcard include/config/arch/have/nmi/safe/cmpxchg.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/cgroupstats.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/taskstats.h \
+  include/linux/prio_heap.h \
+  include/linux/idr.h \
+  include/linux/xattr.h \
+  include/linux/slab.h \
+    $(wildcard include/config/slab/debug.h) \
+    $(wildcard include/config/failslab.h) \
+    $(wildcard include/config/slob.h) \
+    $(wildcard include/config/slab.h) \
+    $(wildcard include/config/slub.h) \
+    $(wildcard include/config/debug/slab.h) \
+  include/linux/slub_def.h \
+    $(wildcard include/config/slub/stats.h) \
+    $(wildcard include/config/slub/debug.h) \
+  include/linux/kmemleak.h \
+    $(wildcard include/config/debug/kmemleak.h) \
+  include/uapi/linux/xattr.h \
+  include/linux/fs.h \
+    $(wildcard include/config/fs/posix/acl.h) \
+    $(wildcard include/config/quota.h) \
+    $(wildcard include/config/fsnotify.h) \
+    $(wildcard include/config/ima.h) \
+    $(wildcard include/config/debug/writecount.h) \
+    $(wildcard include/config/file/locking.h) \
+    $(wildcard include/config/fs/xip.h) \
+  include/linux/kdev_t.h \
+  include/uapi/linux/kdev_t.h \
+  include/linux/dcache.h \
+  include/linux/rculist_bl.h \
+  include/linux/list_bl.h \
+  include/linux/bit_spinlock.h \
+  include/linux/path.h \
+  include/linux/radix-tree.h \
+  include/linux/semaphore.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/fiemap.h \
+  include/linux/shrinker.h \
+  include/linux/migrate_mode.h \
+  include/linux/percpu-rwsem.h \
+  include/linux/blk_types.h \
+    $(wildcard include/config/blk/cgroup.h) \
+    $(wildcard include/config/blk/dev/integrity.h) \
+  include/uapi/linux/fs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/limits.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/ioctl.h \
+  arch/arm/include/generated/asm/ioctl.h \
+  include/asm-generic/ioctl.h \
+  include/uapi/asm-generic/ioctl.h \
+  include/linux/quota.h \
+    $(wildcard include/config/quota/netlink/interface.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/dqblk_xfs.h \
+  include/linux/dqblk_v1.h \
+  include/linux/dqblk_v2.h \
+  include/linux/dqblk_qtree.h \
+  include/linux/projid.h \
+  include/uapi/linux/quota.h \
+  include/linux/nfs_fs_i.h \
+  include/linux/fcntl.h \
+  include/uapi/linux/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/fcntl.h \
+  include/linux/cgroup_subsys.h \
+    $(wildcard include/config/cgroup/debug.h) \
+    $(wildcard include/config/cgroup/cpuacct.h) \
+    $(wildcard include/config/cgroup/device.h) \
+    $(wildcard include/config/cgroup/freezer.h) \
+    $(wildcard include/config/net/cls/cgroup.h) \
+    $(wildcard include/config/cgroup/perf.h) \
+    $(wildcard include/config/netprio/cgroup.h) \
+    $(wildcard include/config/cgroup/hugetlb.h) \
+    $(wildcard include/config/cgroup/bcache.h) \
+  include/linux/vm_event_item.h \
+  include/linux/hardirq.h \
+  include/linux/ftrace_irq.h \
+    $(wildcard include/config/ftrace/nmi/enter.h) \
+  include/linux/vtime.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hardirq.h \
+  include/linux/irq_cpustat.h \
+  include/linux/jump_label.h \
+    $(wildcard include/config/jump/label.h) \
+  include/linux/node.h \
+    $(wildcard include/config/memory/hotplug/sparse.h) \
+    $(wildcard include/config/hugetlbfs.h) \
+  include/linux/mm.h \
+    $(wildcard include/config/x86.h) \
+    $(wildcard include/config/ppc.h) \
+    $(wildcard include/config/parisc.h) \
+    $(wildcard include/config/metag.h) \
+    $(wildcard include/config/ia64.h) \
+    $(wildcard include/config/ksm.h) \
+    $(wildcard include/config/debug/vm/rb.h) \
+    $(wildcard include/config/arch/uses/numa/prot/none.h) \
+    $(wildcard include/config/debug/pagealloc.h) \
+  include/linux/debug_locks.h \
+    $(wildcard include/config/debug/locking/api/selftests.h) \
+  include/linux/range.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable.h \
+    $(wildcard include/config/highpte.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/proc-fns.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue-proc.h \
+    $(wildcard include/config/cpu/arm7tdmi.h) \
+    $(wildcard include/config/cpu/arm720t.h) \
+    $(wildcard include/config/cpu/arm740t.h) \
+    $(wildcard include/config/cpu/arm9tdmi.h) \
+    $(wildcard include/config/cpu/arm920t.h) \
+    $(wildcard include/config/cpu/arm922t.h) \
+    $(wildcard include/config/cpu/arm925t.h) \
+    $(wildcard include/config/cpu/arm926t.h) \
+    $(wildcard include/config/cpu/arm940t.h) \
+    $(wildcard include/config/cpu/arm946e.h) \
+    $(wildcard include/config/cpu/arm1020.h) \
+    $(wildcard include/config/cpu/arm1020e.h) \
+    $(wildcard include/config/cpu/arm1022.h) \
+    $(wildcard include/config/cpu/arm1026.h) \
+    $(wildcard include/config/cpu/mohawk.h) \
+    $(wildcard include/config/cpu/feroceon.h) \
+    $(wildcard include/config/cpu/v6k.h) \
+    $(wildcard include/config/cpu/v7.h) \
+    $(wildcard include/config/cpu/pj4b.h) \
+  include/asm-generic/pgtable-nopud.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level.h \
+  include/asm-generic/pgtable.h \
+  include/linux/page-flags.h \
+    $(wildcard include/config/pageflags/extended.h) \
+    $(wildcard include/config/arch/uses/pg/uncached.h) \
+  include/linux/huge_mm.h \
+  include/linux/vmstat.h \
+    $(wildcard include/config/vm/event/counters.h) \
+  include/linux/freezer.h \
+  arch/arm/mach-sti/pm/suspend_internal.h \
+  arch/arm/mach-sti/pm/poke_table.h \
+
+arch/arm/mach-sti/pm/suspend.o: $(deps_arch/arm/mach-sti/pm/suspend.o)
+
+$(deps_arch/arm/mach-sti/pm/suspend.o):
diff -urNp a/arch/arm/mach-sti/pm/.suspend_asm.o.cmd b/arch/arm/mach-sti/pm/.suspend_asm.o.cmd
--- a/arch/arm/mach-sti/pm/.suspend_asm.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/.suspend_asm.o.cmd	2019-09-26 21:23:57.256665100 +0100
@@ -0,0 +1,36 @@
+cmd_arch/arm/mach-sti/pm/suspend_asm.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/pm/.suspend_asm.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include  -D__ASSEMBLY__ -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a  -include asm/unified.h -msoft-float -gdwarf-2           -c -o arch/arm/mach-sti/pm/suspend_asm.o arch/arm/mach-sti/pm/suspend_asm.S
+
+source_arch/arm/mach-sti/pm/suspend_asm.o := arch/arm/mach-sti/pm/suspend_asm.S
+
+deps_arch/arm/mach-sti/pm/suspend_asm.o := \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/unified.h \
+    $(wildcard include/config/arm/asm/unified.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+  include/linux/linkage.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cp15.h \
+    $(wildcard include/config/cpu/cp15.h) \
+    $(wildcard include/config/smp.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+
+arch/arm/mach-sti/pm/suspend_asm.o: $(deps_arch/arm/mach-sti/pm/suspend_asm.o)
+
+$(deps_arch/arm/mach-sti/pm/suspend_asm.o):
diff -urNp a/arch/arm/mach-sti/pm/.suspend_cps.o.cmd b/arch/arm/mach-sti/pm/.suspend_cps.o.cmd
--- a/arch/arm/mach-sti/pm/.suspend_cps.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/.suspend_cps.o.cmd	2019-09-26 21:23:58.948668100 +0100
@@ -0,0 +1,781 @@
+cmd_arch/arm/mach-sti/pm/suspend_cps.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/pm/.suspend_cps.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(suspend_cps)"  -D"KBUILD_MODNAME=KBUILD_STR(suspend_cps)" -c -o arch/arm/mach-sti/pm/suspend_cps.o arch/arm/mach-sti/pm/suspend_cps.c
+
+source_arch/arm/mach-sti/pm/suspend_cps.o := arch/arm/mach-sti/pm/suspend_cps.c
+
+deps_arch/arm/mach-sti/pm/suspend_cps.o := \
+    $(wildcard include/config/reg/offset.h) \
+    $(wildcard include/config/smp.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cacheflush.h \
+    $(wildcard include/config/cpu/v7.h) \
+    $(wildcard include/config/cpu/v6.h) \
+    $(wildcard include/config/cpu/v6k.h) \
+    $(wildcard include/config/smp/on/up.h) \
+    $(wildcard include/config/arm/errata/411920.h) \
+    $(wildcard include/config/cpu/cache/vipt.h) \
+    $(wildcard include/config/outer/cache.h) \
+  include/linux/mm.h \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/sysctl.h) \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/x86.h) \
+    $(wildcard include/config/ppc.h) \
+    $(wildcard include/config/parisc.h) \
+    $(wildcard include/config/metag.h) \
+    $(wildcard include/config/ia64.h) \
+    $(wildcard include/config/stack/growsup.h) \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/transparent/hugepage.h) \
+    $(wildcard include/config/sparsemem.h) \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/ksm.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/debug/vm/rb.h) \
+    $(wildcard include/config/arch/uses/numa/prot/none.h) \
+    $(wildcard include/config/proc/fs.h) \
+    $(wildcard include/config/debug/pagealloc.h) \
+    $(wildcard include/config/hibernation.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/hugetlbfs.h) \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/gfp.h \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/zone/dma32.h) \
+    $(wildcard include/config/pm/sleep.h) \
+    $(wildcard include/config/cma.h) \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/compaction.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/spinlock.h \
+    $(wildcard include/config/debug/spinlock.h) \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/preempt.h) \
+    $(wildcard include/config/debug/lock/alloc.h) \
+  include/linux/typecheck.h \
+  include/linux/preempt.h \
+    $(wildcard include/config/debug/preempt.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/bug.h \
+    $(wildcard include/config/generic/bug.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+    $(wildcard include/config/arm/lpae.h) \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  include/linux/kernel.h \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/ring/buffer.h) \
+    $(wildcard include/config/tracing.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+  include/linux/irqflags.h \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  include/linux/bottom_half.h \
+  include/linux/spinlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/rwlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/sa110.h) \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/linux/seqlock.h \
+  include/linux/nodemask.h \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/bitmap.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/page-flags-layout.h \
+  include/generated/bounds.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+  include/asm-generic/getorder.h \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/memory/hotremove.h) \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/notifier.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/hotplug/cpu.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/cpumask.h \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/completion.h \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/rcutree.h \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+    $(wildcard include/config/sysfs.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  include/linux/mmdebug.h \
+    $(wildcard include/config/debug/vm.h) \
+    $(wildcard include/config/debug/virtual.h) \
+  include/linux/rbtree.h \
+  include/linux/debug_locks.h \
+    $(wildcard include/config/debug/locking/api/selftests.h) \
+  include/linux/mm_types.h \
+    $(wildcard include/config/split/ptlock/cpus.h) \
+    $(wildcard include/config/have/cmpxchg/double.h) \
+    $(wildcard include/config/have/aligned/struct/page.h) \
+    $(wildcard include/config/want/page/debug/flags.h) \
+    $(wildcard include/config/kmemcheck.h) \
+    $(wildcard include/config/aio.h) \
+    $(wildcard include/config/mm/owner.h) \
+    $(wildcard include/config/mmu/notifier.h) \
+  include/linux/auxvec.h \
+  include/uapi/linux/auxvec.h \
+  arch/arm/include/generated/asm/auxvec.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/auxvec.h \
+  include/linux/page-debug-flags.h \
+    $(wildcard include/config/page/poisoning.h) \
+    $(wildcard include/config/page/guard.h) \
+    $(wildcard include/config/page/debug/something/else.h) \
+  include/linux/uprobes.h \
+    $(wildcard include/config/arch/supports/uprobes.h) \
+    $(wildcard include/config/uprobes.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/mmu.h \
+    $(wildcard include/config/cpu/has/asid.h) \
+  include/linux/range.h \
+  include/linux/bit_spinlock.h \
+  include/linux/shrinker.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable.h \
+    $(wildcard include/config/highpte.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/proc-fns.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue-proc.h \
+    $(wildcard include/config/cpu/arm7tdmi.h) \
+    $(wildcard include/config/cpu/arm720t.h) \
+    $(wildcard include/config/cpu/arm740t.h) \
+    $(wildcard include/config/cpu/arm9tdmi.h) \
+    $(wildcard include/config/cpu/arm920t.h) \
+    $(wildcard include/config/cpu/arm922t.h) \
+    $(wildcard include/config/cpu/arm925t.h) \
+    $(wildcard include/config/cpu/arm926t.h) \
+    $(wildcard include/config/cpu/arm940t.h) \
+    $(wildcard include/config/cpu/arm946e.h) \
+    $(wildcard include/config/cpu/arm1020.h) \
+    $(wildcard include/config/cpu/arm1020e.h) \
+    $(wildcard include/config/cpu/arm1022.h) \
+    $(wildcard include/config/cpu/arm1026.h) \
+    $(wildcard include/config/cpu/mohawk.h) \
+    $(wildcard include/config/cpu/feroceon.h) \
+    $(wildcard include/config/cpu/pj4b.h) \
+  include/asm-generic/pgtable-nopud.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level.h \
+  include/asm-generic/pgtable.h \
+  include/linux/page-flags.h \
+    $(wildcard include/config/pageflags/extended.h) \
+    $(wildcard include/config/arch/uses/pg/uncached.h) \
+    $(wildcard include/config/memory/failure.h) \
+    $(wildcard include/config/swap.h) \
+  include/linux/huge_mm.h \
+  include/linux/vmstat.h \
+    $(wildcard include/config/vm/event/counters.h) \
+  include/linux/vm_event_item.h \
+    $(wildcard include/config/migration.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue-cache.h \
+    $(wildcard include/config/cpu/cache/v4.h) \
+    $(wildcard include/config/cpu/cache/v4wb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/shmparam.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cachetype.h \
+    $(wildcard include/config/cpu/cache/vivt.h) \
+  include/asm-generic/sections.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp_scu.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cputype.h \
+    $(wildcard include/config/cpu/cp15.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/suspend.h \
+  include/linux/io.h \
+    $(wildcard include/config/has/ioport.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/io.h \
+    $(wildcard include/config/need/mach/io/h.h) \
+    $(wildcard include/config/pci.h) \
+    $(wildcard include/config/pcmcia/soc/common.h) \
+    $(wildcard include/config/isa.h) \
+    $(wildcard include/config/pccard.h) \
+  include/asm-generic/pci_iomap.h \
+    $(wildcard include/config/no/generic/pci/ioport/map.h) \
+    $(wildcard include/config/generic/pci/iomap.h) \
+  arch/arm/mach-sti/include/mach/io.h \
+  include/linux/of_gpio.h \
+    $(wildcard include/config/of/gpio.h) \
+  include/linux/gpio.h \
+    $(wildcard include/config/gpiolib.h) \
+    $(wildcard include/config/arch/have/custom/gpio/h.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/gpio.h \
+    $(wildcard include/config/arch/nr/gpio.h) \
+    $(wildcard include/config/need/mach/gpio/h.h) \
+  include/asm-generic/gpio.h \
+    $(wildcard include/config/of.h) \
+    $(wildcard include/config/pinctrl.h) \
+    $(wildcard include/config/gpio/sysfs.h) \
+  include/linux/of.h \
+    $(wildcard include/config/sparc.h) \
+    $(wildcard include/config/of/dynamic.h) \
+    $(wildcard include/config/attach/node.h) \
+    $(wildcard include/config/detach/node.h) \
+    $(wildcard include/config/add/property.h) \
+    $(wildcard include/config/remove/property.h) \
+    $(wildcard include/config/update/property.h) \
+    $(wildcard include/config/proc/devicetree.h) \
+  include/linux/kref.h \
+  include/linux/mod_devicetable.h \
+  include/linux/uuid.h \
+  include/uapi/linux/uuid.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/prom.h \
+  include/linux/pinctrl/pinctrl.h \
+  include/linux/radix-tree.h \
+  include/linux/seq_file.h \
+    $(wildcard include/config/user/ns.h) \
+  include/linux/pinctrl/pinctrl-state.h \
+  include/linux/of_address.h \
+    $(wildcard include/config/of/address.h) \
+  include/linux/ioport.h \
+  include/linux/clk.h \
+    $(wildcard include/config/common/clk.h) \
+    $(wildcard include/config/have/clk/prepare.h) \
+    $(wildcard include/config/have/clk.h) \
+  include/linux/err.h \
+  include/linux/power/st_lpm.h \
+    $(wildcard include/config/cec/wu/reason.h) \
+    $(wildcard include/config/cec/wu/custom/msg.h) \
+    $(wildcard include/config/cec/version.h) \
+    $(wildcard include/config/cec/device/vendor/id.h) \
+    $(wildcard include/config/st/lpm.h) \
+  include/linux/rtc.h \
+    $(wildcard include/config/rtc/intf/dev/uie/emul.h) \
+    $(wildcard include/config/rtc/hctosys/device.h) \
+  include/linux/interrupt.h \
+    $(wildcard include/config/generic/hardirqs.h) \
+    $(wildcard include/config/irq/forced/threading.h) \
+    $(wildcard include/config/generic/irq/probe.h) \
+  include/linux/irqreturn.h \
+  include/linux/irqnr.h \
+  include/uapi/linux/irqnr.h \
+  include/linux/hardirq.h \
+  include/linux/ftrace_irq.h \
+    $(wildcard include/config/ftrace/nmi/enter.h) \
+  include/linux/vtime.h \
+    $(wildcard include/config/virt/cpu/accounting.h) \
+    $(wildcard include/config/virt/cpu/accounting/native.h) \
+    $(wildcard include/config/virt/cpu/accounting/gen.h) \
+    $(wildcard include/config/irq/time/accounting.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hardirq.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irq.h \
+    $(wildcard include/config/sparse/irq.h) \
+    $(wildcard include/config/multi/irq/handler.h) \
+  include/linux/irq_cpustat.h \
+  include/linux/hrtimer.h \
+    $(wildcard include/config/high/res/timers.h) \
+    $(wildcard include/config/timerfd.h) \
+  include/linux/timerqueue.h \
+  include/uapi/linux/rtc.h \
+  include/linux/device.h \
+    $(wildcard include/config/debug/devres.h) \
+    $(wildcard include/config/acpi.h) \
+    $(wildcard include/config/devtmpfs.h) \
+    $(wildcard include/config/sysfs/deprecated.h) \
+  include/linux/kobject.h \
+  include/linux/sysfs.h \
+  include/linux/kobject_ns.h \
+  include/linux/stat.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/stat.h \
+  include/uapi/linux/stat.h \
+  include/linux/uidgid.h \
+    $(wildcard include/config/uidgid/strict/type/checks.h) \
+  include/linux/highuid.h \
+  include/linux/klist.h \
+  include/linux/pinctrl/devinfo.h \
+    $(wildcard include/config/pm.h) \
+  include/linux/pinctrl/consumer.h \
+    $(wildcard include/config/pinconf.h) \
+  include/linux/pm.h \
+    $(wildcard include/config/vt/console/sleep.h) \
+    $(wildcard include/config/pm/runtime.h) \
+    $(wildcard include/config/pm/clk.h) \
+    $(wildcard include/config/pm/generic/domains.h) \
+  include/linux/ratelimit.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/device.h \
+    $(wildcard include/config/dmabounce.h) \
+    $(wildcard include/config/iommu/api.h) \
+    $(wildcard include/config/arm/dma/use/iommu.h) \
+    $(wildcard include/config/arch/omap.h) \
+  include/linux/pm_wakeup.h \
+  include/linux/cdev.h \
+  include/linux/kdev_t.h \
+  include/uapi/linux/kdev_t.h \
+  include/linux/poll.h \
+  include/linux/fs.h \
+    $(wildcard include/config/fs/posix/acl.h) \
+    $(wildcard include/config/security.h) \
+    $(wildcard include/config/quota.h) \
+    $(wildcard include/config/fsnotify.h) \
+    $(wildcard include/config/ima.h) \
+    $(wildcard include/config/epoll.h) \
+    $(wildcard include/config/debug/writecount.h) \
+    $(wildcard include/config/file/locking.h) \
+    $(wildcard include/config/auditsyscall.h) \
+    $(wildcard include/config/block.h) \
+    $(wildcard include/config/fs/xip.h) \
+  include/linux/dcache.h \
+  include/linux/rculist.h \
+  include/linux/rculist_bl.h \
+  include/linux/list_bl.h \
+  include/linux/path.h \
+  include/linux/llist.h \
+    $(wildcard include/config/arch/have/nmi/safe/cmpxchg.h) \
+  include/linux/pid.h \
+  include/linux/capability.h \
+  include/uapi/linux/capability.h \
+  include/linux/semaphore.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/fiemap.h \
+  include/linux/migrate_mode.h \
+  include/linux/percpu-rwsem.h \
+  include/linux/blk_types.h \
+    $(wildcard include/config/blk/cgroup.h) \
+    $(wildcard include/config/blk/dev/integrity.h) \
+  include/uapi/linux/fs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/limits.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/ioctl.h \
+  arch/arm/include/generated/asm/ioctl.h \
+  include/asm-generic/ioctl.h \
+  include/uapi/asm-generic/ioctl.h \
+  include/linux/quota.h \
+    $(wildcard include/config/quota/netlink/interface.h) \
+  include/linux/percpu_counter.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/dqblk_xfs.h \
+  include/linux/dqblk_v1.h \
+  include/linux/dqblk_v2.h \
+  include/linux/dqblk_qtree.h \
+  include/linux/projid.h \
+  include/uapi/linux/quota.h \
+  include/linux/nfs_fs_i.h \
+  include/linux/fcntl.h \
+  include/uapi/linux/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/fcntl.h \
+  include/linux/sysctl.h \
+  include/uapi/linux/sysctl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/uaccess.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/unified.h \
+    $(wildcard include/config/arm/asm/unified.h) \
+  include/uapi/linux/poll.h \
+  arch/arm/include/generated/asm/poll.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/poll.h \
+  include/linux/power/st_lpm_def.h \
+    $(wildcard include/config/1/offset.h) \
+  include/linux/power/st_lpm_def.h \
+  arch/arm/mach-sti/pm/suspend.h \
+  include/linux/suspend.h \
+    $(wildcard include/config/vt.h) \
+    $(wildcard include/config/suspend.h) \
+    $(wildcard include/config/pm/sleep/debug.h) \
+    $(wildcard include/config/pm/autosleep.h) \
+    $(wildcard include/config/arch/save/page/keys.h) \
+  include/linux/swap.h \
+    $(wildcard include/config/frontswap.h) \
+    $(wildcard include/config/memcg/swap.h) \
+  include/linux/memcontrol.h \
+    $(wildcard include/config/inet.h) \
+    $(wildcard include/config/memcg/kmem.h) \
+  include/linux/cgroup.h \
+    $(wildcard include/config/cgroups.h) \
+  include/linux/sched.h \
+    $(wildcard include/config/sched/debug.h) \
+    $(wildcard include/config/no/hz/common.h) \
+    $(wildcard include/config/lockup/detector.h) \
+    $(wildcard include/config/core/dump/default/elf/headers.h) \
+    $(wildcard include/config/sched/autogroup.h) \
+    $(wildcard include/config/bsd/process/acct.h) \
+    $(wildcard include/config/taskstats.h) \
+    $(wildcard include/config/audit.h) \
+    $(wildcard include/config/inotify/user.h) \
+    $(wildcard include/config/fanotify.h) \
+    $(wildcard include/config/posix/mqueue.h) \
+    $(wildcard include/config/keys.h) \
+    $(wildcard include/config/perf/events.h) \
+    $(wildcard include/config/schedstats.h) \
+    $(wildcard include/config/task/delay/acct.h) \
+    $(wildcard include/config/fair/group/sched.h) \
+    $(wildcard include/config/rt/group/sched.h) \
+    $(wildcard include/config/cgroup/sched.h) \
+    $(wildcard include/config/blk/dev/io/trace.h) \
+    $(wildcard include/config/rcu/boost.h) \
+    $(wildcard include/config/compat/brk.h) \
+    $(wildcard include/config/cc/stackprotector.h) \
+    $(wildcard include/config/sysvipc.h) \
+    $(wildcard include/config/detect/hung/task.h) \
+    $(wildcard include/config/rt/mutexes.h) \
+    $(wildcard include/config/task/xacct.h) \
+    $(wildcard include/config/cpusets.h) \
+    $(wildcard include/config/futex.h) \
+    $(wildcard include/config/fault/injection.h) \
+    $(wildcard include/config/latencytop.h) \
+    $(wildcard include/config/function/graph/tracer.h) \
+    $(wildcard include/config/bcache.h) \
+    $(wildcard include/config/have/unstable/sched/clock.h) \
+    $(wildcard include/config/no/hz/full.h) \
+  include/uapi/linux/sched.h \
+  arch/arm/include/generated/asm/cputime.h \
+  include/asm-generic/cputime.h \
+  include/asm-generic/cputime_jiffies.h \
+  include/linux/sem.h \
+  include/uapi/linux/sem.h \
+  include/linux/ipc.h \
+  include/uapi/linux/ipc.h \
+  arch/arm/include/generated/asm/ipcbuf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/ipcbuf.h \
+  arch/arm/include/generated/asm/sembuf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/sembuf.h \
+  include/linux/signal.h \
+    $(wildcard include/config/old/sigaction.h) \
+  include/uapi/linux/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/signal-defs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/sigcontext.h \
+  arch/arm/include/generated/asm/siginfo.h \
+  include/asm-generic/siginfo.h \
+  include/uapi/asm-generic/siginfo.h \
+  include/linux/proportions.h \
+  include/linux/seccomp.h \
+    $(wildcard include/config/seccomp.h) \
+    $(wildcard include/config/seccomp/filter.h) \
+  include/uapi/linux/seccomp.h \
+  include/linux/rtmutex.h \
+    $(wildcard include/config/debug/rt/mutexes.h) \
+  include/linux/plist.h \
+    $(wildcard include/config/debug/pi/list.h) \
+  include/linux/resource.h \
+  include/uapi/linux/resource.h \
+  arch/arm/include/generated/asm/resource.h \
+  include/asm-generic/resource.h \
+  include/uapi/asm-generic/resource.h \
+  include/linux/task_io_accounting.h \
+    $(wildcard include/config/task/io/accounting.h) \
+  include/linux/latencytop.h \
+  include/linux/cred.h \
+    $(wildcard include/config/debug/credentials.h) \
+  include/linux/key.h \
+  include/linux/selinux.h \
+    $(wildcard include/config/security/selinux.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/cgroupstats.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/taskstats.h \
+  include/linux/prio_heap.h \
+  include/linux/idr.h \
+  include/linux/xattr.h \
+  include/linux/slab.h \
+    $(wildcard include/config/slab/debug.h) \
+    $(wildcard include/config/failslab.h) \
+    $(wildcard include/config/slob.h) \
+    $(wildcard include/config/slab.h) \
+    $(wildcard include/config/slub.h) \
+    $(wildcard include/config/debug/slab.h) \
+  include/linux/slub_def.h \
+    $(wildcard include/config/slub/stats.h) \
+    $(wildcard include/config/slub/debug.h) \
+  include/linux/kmemleak.h \
+    $(wildcard include/config/debug/kmemleak.h) \
+  include/uapi/linux/xattr.h \
+  include/linux/cgroup_subsys.h \
+    $(wildcard include/config/cgroup/debug.h) \
+    $(wildcard include/config/cgroup/cpuacct.h) \
+    $(wildcard include/config/cgroup/device.h) \
+    $(wildcard include/config/cgroup/freezer.h) \
+    $(wildcard include/config/net/cls/cgroup.h) \
+    $(wildcard include/config/cgroup/perf.h) \
+    $(wildcard include/config/netprio/cgroup.h) \
+    $(wildcard include/config/cgroup/hugetlb.h) \
+    $(wildcard include/config/cgroup/bcache.h) \
+  include/linux/jump_label.h \
+    $(wildcard include/config/jump/label.h) \
+  include/linux/node.h \
+    $(wildcard include/config/memory/hotplug/sparse.h) \
+  include/linux/freezer.h \
+  arch/arm/mach-sti/pm/suspend_internal.h \
+  arch/arm/mach-sti/pm/poke_table.h \
+  arch/arm/mach-sti/pm/synopsys_dwc_ddr32.h \
+  arch/arm/mach-sti/pm/../smp.h \
+
+arch/arm/mach-sti/pm/suspend_cps.o: $(deps_arch/arm/mach-sti/pm/suspend_cps.o)
+
+$(deps_arch/arm/mach-sti/pm/suspend_cps.o):
diff -urNp a/arch/arm/mach-sti/pm/.suspend_dcps_ddr_off.o.cmd b/arch/arm/mach-sti/pm/.suspend_dcps_ddr_off.o.cmd
--- a/arch/arm/mach-sti/pm/.suspend_dcps_ddr_off.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/.suspend_dcps_ddr_off.o.cmd	2019-09-26 21:23:59.624669300 +0100
@@ -0,0 +1,769 @@
+cmd_arch/arm/mach-sti/pm/suspend_dcps_ddr_off.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/pm/.suspend_dcps_ddr_off.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(suspend_dcps_ddr_off)"  -D"KBUILD_MODNAME=KBUILD_STR(suspend_dcps_ddr_off)" -c -o arch/arm/mach-sti/pm/suspend_dcps_ddr_off.o arch/arm/mach-sti/pm/suspend_dcps_ddr_off.c
+
+source_arch/arm/mach-sti/pm/suspend_dcps_ddr_off.o := arch/arm/mach-sti/pm/suspend_dcps_ddr_off.c
+
+deps_arch/arm/mach-sti/pm/suspend_dcps_ddr_off.o := \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cacheflush.h \
+    $(wildcard include/config/cpu/v7.h) \
+    $(wildcard include/config/cpu/v6.h) \
+    $(wildcard include/config/cpu/v6k.h) \
+    $(wildcard include/config/smp/on/up.h) \
+    $(wildcard include/config/smp.h) \
+    $(wildcard include/config/arm/errata/411920.h) \
+    $(wildcard include/config/cpu/cache/vipt.h) \
+    $(wildcard include/config/outer/cache.h) \
+  include/linux/mm.h \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/sysctl.h) \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/x86.h) \
+    $(wildcard include/config/ppc.h) \
+    $(wildcard include/config/parisc.h) \
+    $(wildcard include/config/metag.h) \
+    $(wildcard include/config/ia64.h) \
+    $(wildcard include/config/stack/growsup.h) \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/transparent/hugepage.h) \
+    $(wildcard include/config/sparsemem.h) \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/ksm.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/debug/vm/rb.h) \
+    $(wildcard include/config/arch/uses/numa/prot/none.h) \
+    $(wildcard include/config/proc/fs.h) \
+    $(wildcard include/config/debug/pagealloc.h) \
+    $(wildcard include/config/hibernation.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/hugetlbfs.h) \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/gfp.h \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/zone/dma32.h) \
+    $(wildcard include/config/pm/sleep.h) \
+    $(wildcard include/config/cma.h) \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/compaction.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/spinlock.h \
+    $(wildcard include/config/debug/spinlock.h) \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/preempt.h) \
+    $(wildcard include/config/debug/lock/alloc.h) \
+  include/linux/typecheck.h \
+  include/linux/preempt.h \
+    $(wildcard include/config/debug/preempt.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/bug.h \
+    $(wildcard include/config/generic/bug.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+    $(wildcard include/config/arm/lpae.h) \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  include/linux/kernel.h \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/ring/buffer.h) \
+    $(wildcard include/config/tracing.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+  include/linux/irqflags.h \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  include/linux/bottom_half.h \
+  include/linux/spinlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/rwlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/sa110.h) \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/linux/seqlock.h \
+  include/linux/nodemask.h \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/bitmap.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/page-flags-layout.h \
+  include/generated/bounds.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+  include/asm-generic/getorder.h \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/memory/hotremove.h) \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/notifier.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/hotplug/cpu.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/cpumask.h \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/completion.h \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/rcutree.h \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+    $(wildcard include/config/sysfs.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  include/linux/mmdebug.h \
+    $(wildcard include/config/debug/vm.h) \
+    $(wildcard include/config/debug/virtual.h) \
+  include/linux/rbtree.h \
+  include/linux/debug_locks.h \
+    $(wildcard include/config/debug/locking/api/selftests.h) \
+  include/linux/mm_types.h \
+    $(wildcard include/config/split/ptlock/cpus.h) \
+    $(wildcard include/config/have/cmpxchg/double.h) \
+    $(wildcard include/config/have/aligned/struct/page.h) \
+    $(wildcard include/config/want/page/debug/flags.h) \
+    $(wildcard include/config/kmemcheck.h) \
+    $(wildcard include/config/aio.h) \
+    $(wildcard include/config/mm/owner.h) \
+    $(wildcard include/config/mmu/notifier.h) \
+  include/linux/auxvec.h \
+  include/uapi/linux/auxvec.h \
+  arch/arm/include/generated/asm/auxvec.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/auxvec.h \
+  include/linux/page-debug-flags.h \
+    $(wildcard include/config/page/poisoning.h) \
+    $(wildcard include/config/page/guard.h) \
+    $(wildcard include/config/page/debug/something/else.h) \
+  include/linux/uprobes.h \
+    $(wildcard include/config/arch/supports/uprobes.h) \
+    $(wildcard include/config/uprobes.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/mmu.h \
+    $(wildcard include/config/cpu/has/asid.h) \
+  include/linux/range.h \
+  include/linux/bit_spinlock.h \
+  include/linux/shrinker.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable.h \
+    $(wildcard include/config/highpte.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/proc-fns.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue-proc.h \
+    $(wildcard include/config/cpu/arm7tdmi.h) \
+    $(wildcard include/config/cpu/arm720t.h) \
+    $(wildcard include/config/cpu/arm740t.h) \
+    $(wildcard include/config/cpu/arm9tdmi.h) \
+    $(wildcard include/config/cpu/arm920t.h) \
+    $(wildcard include/config/cpu/arm922t.h) \
+    $(wildcard include/config/cpu/arm925t.h) \
+    $(wildcard include/config/cpu/arm926t.h) \
+    $(wildcard include/config/cpu/arm940t.h) \
+    $(wildcard include/config/cpu/arm946e.h) \
+    $(wildcard include/config/cpu/arm1020.h) \
+    $(wildcard include/config/cpu/arm1020e.h) \
+    $(wildcard include/config/cpu/arm1022.h) \
+    $(wildcard include/config/cpu/arm1026.h) \
+    $(wildcard include/config/cpu/mohawk.h) \
+    $(wildcard include/config/cpu/feroceon.h) \
+    $(wildcard include/config/cpu/pj4b.h) \
+  include/asm-generic/pgtable-nopud.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level.h \
+  include/asm-generic/pgtable.h \
+  include/linux/page-flags.h \
+    $(wildcard include/config/pageflags/extended.h) \
+    $(wildcard include/config/arch/uses/pg/uncached.h) \
+    $(wildcard include/config/memory/failure.h) \
+    $(wildcard include/config/swap.h) \
+  include/linux/huge_mm.h \
+  include/linux/vmstat.h \
+    $(wildcard include/config/vm/event/counters.h) \
+  include/linux/vm_event_item.h \
+    $(wildcard include/config/migration.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue-cache.h \
+    $(wildcard include/config/cpu/cache/v4.h) \
+    $(wildcard include/config/cpu/cache/v4wb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/shmparam.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cachetype.h \
+    $(wildcard include/config/cpu/cache/vivt.h) \
+  include/linux/io.h \
+    $(wildcard include/config/has/ioport.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/io.h \
+    $(wildcard include/config/need/mach/io/h.h) \
+    $(wildcard include/config/pci.h) \
+    $(wildcard include/config/pcmcia/soc/common.h) \
+    $(wildcard include/config/isa.h) \
+    $(wildcard include/config/pccard.h) \
+  include/asm-generic/pci_iomap.h \
+    $(wildcard include/config/no/generic/pci/ioport/map.h) \
+    $(wildcard include/config/generic/pci/iomap.h) \
+  arch/arm/mach-sti/include/mach/io.h \
+  include/linux/of_gpio.h \
+    $(wildcard include/config/of/gpio.h) \
+  include/linux/gpio.h \
+    $(wildcard include/config/gpiolib.h) \
+    $(wildcard include/config/arch/have/custom/gpio/h.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/gpio.h \
+    $(wildcard include/config/arch/nr/gpio.h) \
+    $(wildcard include/config/need/mach/gpio/h.h) \
+  include/asm-generic/gpio.h \
+    $(wildcard include/config/of.h) \
+    $(wildcard include/config/pinctrl.h) \
+    $(wildcard include/config/gpio/sysfs.h) \
+  include/linux/of.h \
+    $(wildcard include/config/sparc.h) \
+    $(wildcard include/config/of/dynamic.h) \
+    $(wildcard include/config/attach/node.h) \
+    $(wildcard include/config/detach/node.h) \
+    $(wildcard include/config/add/property.h) \
+    $(wildcard include/config/remove/property.h) \
+    $(wildcard include/config/update/property.h) \
+    $(wildcard include/config/proc/devicetree.h) \
+  include/linux/kref.h \
+  include/linux/mod_devicetable.h \
+  include/linux/uuid.h \
+  include/uapi/linux/uuid.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/prom.h \
+  include/linux/pinctrl/pinctrl.h \
+  include/linux/radix-tree.h \
+  include/linux/seq_file.h \
+    $(wildcard include/config/user/ns.h) \
+  include/linux/pinctrl/pinctrl-state.h \
+  include/linux/of_address.h \
+    $(wildcard include/config/of/address.h) \
+  include/linux/ioport.h \
+  include/linux/power/st_lpm_def.h \
+    $(wildcard include/config/1/offset.h) \
+  include/linux/power/st_lpm.h \
+    $(wildcard include/config/cec/wu/reason.h) \
+    $(wildcard include/config/cec/wu/custom/msg.h) \
+    $(wildcard include/config/cec/version.h) \
+    $(wildcard include/config/cec/device/vendor/id.h) \
+    $(wildcard include/config/st/lpm.h) \
+  include/linux/rtc.h \
+    $(wildcard include/config/rtc/intf/dev/uie/emul.h) \
+    $(wildcard include/config/rtc/hctosys/device.h) \
+  include/linux/interrupt.h \
+    $(wildcard include/config/generic/hardirqs.h) \
+    $(wildcard include/config/irq/forced/threading.h) \
+    $(wildcard include/config/generic/irq/probe.h) \
+  include/linux/irqreturn.h \
+  include/linux/irqnr.h \
+  include/uapi/linux/irqnr.h \
+  include/linux/hardirq.h \
+  include/linux/ftrace_irq.h \
+    $(wildcard include/config/ftrace/nmi/enter.h) \
+  include/linux/vtime.h \
+    $(wildcard include/config/virt/cpu/accounting.h) \
+    $(wildcard include/config/virt/cpu/accounting/native.h) \
+    $(wildcard include/config/virt/cpu/accounting/gen.h) \
+    $(wildcard include/config/irq/time/accounting.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hardirq.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irq.h \
+    $(wildcard include/config/sparse/irq.h) \
+    $(wildcard include/config/multi/irq/handler.h) \
+  include/linux/irq_cpustat.h \
+  include/linux/hrtimer.h \
+    $(wildcard include/config/high/res/timers.h) \
+    $(wildcard include/config/timerfd.h) \
+  include/linux/timerqueue.h \
+  include/uapi/linux/rtc.h \
+  include/linux/device.h \
+    $(wildcard include/config/debug/devres.h) \
+    $(wildcard include/config/acpi.h) \
+    $(wildcard include/config/devtmpfs.h) \
+    $(wildcard include/config/sysfs/deprecated.h) \
+  include/linux/kobject.h \
+  include/linux/sysfs.h \
+  include/linux/kobject_ns.h \
+  include/linux/stat.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/stat.h \
+  include/uapi/linux/stat.h \
+  include/linux/uidgid.h \
+    $(wildcard include/config/uidgid/strict/type/checks.h) \
+  include/linux/highuid.h \
+  include/linux/klist.h \
+  include/linux/pinctrl/devinfo.h \
+    $(wildcard include/config/pm.h) \
+  include/linux/pinctrl/consumer.h \
+    $(wildcard include/config/pinconf.h) \
+  include/linux/err.h \
+  include/linux/pm.h \
+    $(wildcard include/config/vt/console/sleep.h) \
+    $(wildcard include/config/pm/runtime.h) \
+    $(wildcard include/config/pm/clk.h) \
+    $(wildcard include/config/pm/generic/domains.h) \
+  include/linux/ratelimit.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/device.h \
+    $(wildcard include/config/dmabounce.h) \
+    $(wildcard include/config/iommu/api.h) \
+    $(wildcard include/config/arm/dma/use/iommu.h) \
+    $(wildcard include/config/arch/omap.h) \
+  include/linux/pm_wakeup.h \
+  include/linux/cdev.h \
+  include/linux/kdev_t.h \
+  include/uapi/linux/kdev_t.h \
+  include/linux/poll.h \
+  include/linux/fs.h \
+    $(wildcard include/config/fs/posix/acl.h) \
+    $(wildcard include/config/security.h) \
+    $(wildcard include/config/quota.h) \
+    $(wildcard include/config/fsnotify.h) \
+    $(wildcard include/config/ima.h) \
+    $(wildcard include/config/epoll.h) \
+    $(wildcard include/config/debug/writecount.h) \
+    $(wildcard include/config/file/locking.h) \
+    $(wildcard include/config/auditsyscall.h) \
+    $(wildcard include/config/block.h) \
+    $(wildcard include/config/fs/xip.h) \
+  include/linux/dcache.h \
+  include/linux/rculist.h \
+  include/linux/rculist_bl.h \
+  include/linux/list_bl.h \
+  include/linux/path.h \
+  include/linux/llist.h \
+    $(wildcard include/config/arch/have/nmi/safe/cmpxchg.h) \
+  include/linux/pid.h \
+  include/linux/capability.h \
+  include/uapi/linux/capability.h \
+  include/linux/semaphore.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/fiemap.h \
+  include/linux/migrate_mode.h \
+  include/linux/percpu-rwsem.h \
+  include/linux/blk_types.h \
+    $(wildcard include/config/blk/cgroup.h) \
+    $(wildcard include/config/blk/dev/integrity.h) \
+  include/uapi/linux/fs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/limits.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/ioctl.h \
+  arch/arm/include/generated/asm/ioctl.h \
+  include/asm-generic/ioctl.h \
+  include/uapi/asm-generic/ioctl.h \
+  include/linux/quota.h \
+    $(wildcard include/config/quota/netlink/interface.h) \
+  include/linux/percpu_counter.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/dqblk_xfs.h \
+  include/linux/dqblk_v1.h \
+  include/linux/dqblk_v2.h \
+  include/linux/dqblk_qtree.h \
+  include/linux/projid.h \
+  include/uapi/linux/quota.h \
+  include/linux/nfs_fs_i.h \
+  include/linux/fcntl.h \
+  include/uapi/linux/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/fcntl.h \
+  include/linux/sysctl.h \
+  include/uapi/linux/sysctl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/uaccess.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/unified.h \
+    $(wildcard include/config/arm/asm/unified.h) \
+  include/uapi/linux/poll.h \
+  arch/arm/include/generated/asm/poll.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/poll.h \
+  include/linux/power/st_lpm_def.h \
+  arch/arm/mach-sti/pm/suspend.h \
+  include/linux/suspend.h \
+    $(wildcard include/config/vt.h) \
+    $(wildcard include/config/suspend.h) \
+    $(wildcard include/config/pm/sleep/debug.h) \
+    $(wildcard include/config/pm/autosleep.h) \
+    $(wildcard include/config/arch/save/page/keys.h) \
+  include/linux/swap.h \
+    $(wildcard include/config/frontswap.h) \
+    $(wildcard include/config/memcg/swap.h) \
+  include/linux/memcontrol.h \
+    $(wildcard include/config/inet.h) \
+    $(wildcard include/config/memcg/kmem.h) \
+  include/linux/cgroup.h \
+    $(wildcard include/config/cgroups.h) \
+  include/linux/sched.h \
+    $(wildcard include/config/sched/debug.h) \
+    $(wildcard include/config/no/hz/common.h) \
+    $(wildcard include/config/lockup/detector.h) \
+    $(wildcard include/config/core/dump/default/elf/headers.h) \
+    $(wildcard include/config/sched/autogroup.h) \
+    $(wildcard include/config/bsd/process/acct.h) \
+    $(wildcard include/config/taskstats.h) \
+    $(wildcard include/config/audit.h) \
+    $(wildcard include/config/inotify/user.h) \
+    $(wildcard include/config/fanotify.h) \
+    $(wildcard include/config/posix/mqueue.h) \
+    $(wildcard include/config/keys.h) \
+    $(wildcard include/config/perf/events.h) \
+    $(wildcard include/config/schedstats.h) \
+    $(wildcard include/config/task/delay/acct.h) \
+    $(wildcard include/config/fair/group/sched.h) \
+    $(wildcard include/config/rt/group/sched.h) \
+    $(wildcard include/config/cgroup/sched.h) \
+    $(wildcard include/config/blk/dev/io/trace.h) \
+    $(wildcard include/config/rcu/boost.h) \
+    $(wildcard include/config/compat/brk.h) \
+    $(wildcard include/config/cc/stackprotector.h) \
+    $(wildcard include/config/sysvipc.h) \
+    $(wildcard include/config/detect/hung/task.h) \
+    $(wildcard include/config/rt/mutexes.h) \
+    $(wildcard include/config/task/xacct.h) \
+    $(wildcard include/config/cpusets.h) \
+    $(wildcard include/config/futex.h) \
+    $(wildcard include/config/fault/injection.h) \
+    $(wildcard include/config/latencytop.h) \
+    $(wildcard include/config/function/graph/tracer.h) \
+    $(wildcard include/config/bcache.h) \
+    $(wildcard include/config/have/unstable/sched/clock.h) \
+    $(wildcard include/config/no/hz/full.h) \
+  include/uapi/linux/sched.h \
+  arch/arm/include/generated/asm/cputime.h \
+  include/asm-generic/cputime.h \
+  include/asm-generic/cputime_jiffies.h \
+  include/linux/sem.h \
+  include/uapi/linux/sem.h \
+  include/linux/ipc.h \
+  include/uapi/linux/ipc.h \
+  arch/arm/include/generated/asm/ipcbuf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/ipcbuf.h \
+  arch/arm/include/generated/asm/sembuf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/sembuf.h \
+  include/linux/signal.h \
+    $(wildcard include/config/old/sigaction.h) \
+  include/uapi/linux/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/signal-defs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/sigcontext.h \
+  arch/arm/include/generated/asm/siginfo.h \
+  include/asm-generic/siginfo.h \
+  include/uapi/asm-generic/siginfo.h \
+  include/linux/proportions.h \
+  include/linux/seccomp.h \
+    $(wildcard include/config/seccomp.h) \
+    $(wildcard include/config/seccomp/filter.h) \
+  include/uapi/linux/seccomp.h \
+  include/linux/rtmutex.h \
+    $(wildcard include/config/debug/rt/mutexes.h) \
+  include/linux/plist.h \
+    $(wildcard include/config/debug/pi/list.h) \
+  include/linux/resource.h \
+  include/uapi/linux/resource.h \
+  arch/arm/include/generated/asm/resource.h \
+  include/asm-generic/resource.h \
+  include/uapi/asm-generic/resource.h \
+  include/linux/task_io_accounting.h \
+    $(wildcard include/config/task/io/accounting.h) \
+  include/linux/latencytop.h \
+  include/linux/cred.h \
+    $(wildcard include/config/debug/credentials.h) \
+  include/linux/key.h \
+  include/linux/selinux.h \
+    $(wildcard include/config/security/selinux.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/cgroupstats.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/taskstats.h \
+  include/linux/prio_heap.h \
+  include/linux/idr.h \
+  include/linux/xattr.h \
+  include/linux/slab.h \
+    $(wildcard include/config/slab/debug.h) \
+    $(wildcard include/config/failslab.h) \
+    $(wildcard include/config/slob.h) \
+    $(wildcard include/config/slab.h) \
+    $(wildcard include/config/slub.h) \
+    $(wildcard include/config/debug/slab.h) \
+  include/linux/slub_def.h \
+    $(wildcard include/config/slub/stats.h) \
+    $(wildcard include/config/slub/debug.h) \
+  include/linux/kmemleak.h \
+    $(wildcard include/config/debug/kmemleak.h) \
+  include/uapi/linux/xattr.h \
+  include/linux/cgroup_subsys.h \
+    $(wildcard include/config/cgroup/debug.h) \
+    $(wildcard include/config/cgroup/cpuacct.h) \
+    $(wildcard include/config/cgroup/device.h) \
+    $(wildcard include/config/cgroup/freezer.h) \
+    $(wildcard include/config/net/cls/cgroup.h) \
+    $(wildcard include/config/cgroup/perf.h) \
+    $(wildcard include/config/netprio/cgroup.h) \
+    $(wildcard include/config/cgroup/hugetlb.h) \
+    $(wildcard include/config/cgroup/bcache.h) \
+  include/linux/jump_label.h \
+    $(wildcard include/config/jump/label.h) \
+  include/linux/node.h \
+    $(wildcard include/config/memory/hotplug/sparse.h) \
+  include/linux/freezer.h \
+  arch/arm/mach-sti/pm/suspend_internal.h \
+  arch/arm/mach-sti/pm/poke_table.h \
+
+arch/arm/mach-sti/pm/suspend_dcps_ddr_off.o: $(deps_arch/arm/mach-sti/pm/suspend_dcps_ddr_off.o)
+
+$(deps_arch/arm/mach-sti/pm/suspend_dcps_ddr_off.o):
diff -urNp a/arch/arm/mach-sti/pm/.suspend_hps.o.cmd b/arch/arm/mach-sti/pm/.suspend_hps.o.cmd
--- a/arch/arm/mach-sti/pm/.suspend_hps.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/.suspend_hps.o.cmd	2019-09-26 21:23:57.928666200 +0100
@@ -0,0 +1,757 @@
+cmd_arch/arm/mach-sti/pm/suspend_hps.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,arch/arm/mach-sti/pm/.suspend_hps.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(suspend_hps)"  -D"KBUILD_MODNAME=KBUILD_STR(suspend_hps)" -c -o arch/arm/mach-sti/pm/suspend_hps.o arch/arm/mach-sti/pm/suspend_hps.c
+
+source_arch/arm/mach-sti/pm/suspend_hps.o := arch/arm/mach-sti/pm/suspend_hps.c
+
+deps_arch/arm/mach-sti/pm/suspend_hps.o := \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/idmap.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable.h \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/arm/lpae.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+    $(wildcard include/config/highpte.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/proc-fns.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue-proc.h \
+    $(wildcard include/config/cpu/arm7tdmi.h) \
+    $(wildcard include/config/cpu/arm720t.h) \
+    $(wildcard include/config/cpu/arm740t.h) \
+    $(wildcard include/config/cpu/arm9tdmi.h) \
+    $(wildcard include/config/cpu/arm920t.h) \
+    $(wildcard include/config/cpu/arm922t.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/cpu/arm925t.h) \
+    $(wildcard include/config/cpu/arm926t.h) \
+    $(wildcard include/config/cpu/arm940t.h) \
+    $(wildcard include/config/cpu/arm946e.h) \
+    $(wildcard include/config/cpu/sa110.h) \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/arm1020.h) \
+    $(wildcard include/config/cpu/arm1020e.h) \
+    $(wildcard include/config/cpu/arm1022.h) \
+    $(wildcard include/config/cpu/arm1026.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/mohawk.h) \
+    $(wildcard include/config/cpu/feroceon.h) \
+    $(wildcard include/config/cpu/v6.h) \
+    $(wildcard include/config/cpu/v6k.h) \
+    $(wildcard include/config/cpu/v7.h) \
+    $(wildcard include/config/cpu/pj4b.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+  include/uapi/linux/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+    $(wildcard include/config/sparsemem.h) \
+  include/asm-generic/getorder.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+    $(wildcard include/config/smp.h) \
+  include/linux/irqflags.h \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  include/linux/typecheck.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/asm-generic/pgtable-nopud.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-hwdef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level.h \
+  include/asm-generic/pgtable.h \
+    $(wildcard include/config/transparent/hugepage.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/arch/uses/numa/prot/none.h) \
+  include/linux/mm_types.h \
+    $(wildcard include/config/split/ptlock/cpus.h) \
+    $(wildcard include/config/have/cmpxchg/double.h) \
+    $(wildcard include/config/have/aligned/struct/page.h) \
+    $(wildcard include/config/want/page/debug/flags.h) \
+    $(wildcard include/config/kmemcheck.h) \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/aio.h) \
+    $(wildcard include/config/mm/owner.h) \
+    $(wildcard include/config/mmu/notifier.h) \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/compaction.h) \
+  include/linux/auxvec.h \
+  include/uapi/linux/auxvec.h \
+  arch/arm/include/generated/asm/auxvec.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/auxvec.h \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  include/linux/spinlock.h \
+    $(wildcard include/config/debug/spinlock.h) \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/preempt.h) \
+    $(wildcard include/config/debug/lock/alloc.h) \
+  include/linux/preempt.h \
+    $(wildcard include/config/debug/preempt.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  include/linux/bug.h \
+    $(wildcard include/config/generic/bug.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  include/linux/kernel.h \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/ring/buffer.h) \
+    $(wildcard include/config/tracing.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+    $(wildcard include/config/outer/cache.h) \
+  include/linux/bottom_half.h \
+  include/linux/spinlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/rwlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/rbtree.h \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/completion.h \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/cpumask.h \
+    $(wildcard include/config/hotplug/cpu.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/bitmap.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/page-debug-flags.h \
+    $(wildcard include/config/page/poisoning.h) \
+    $(wildcard include/config/page/guard.h) \
+    $(wildcard include/config/page/debug/something/else.h) \
+  include/linux/uprobes.h \
+    $(wildcard include/config/arch/supports/uprobes.h) \
+    $(wildcard include/config/uprobes.h) \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/page-flags-layout.h \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/generated/bounds.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/mmu.h \
+    $(wildcard include/config/cpu/has/asid.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cacheflush.h \
+    $(wildcard include/config/smp/on/up.h) \
+    $(wildcard include/config/arm/errata/411920.h) \
+    $(wildcard include/config/cpu/cache/vipt.h) \
+  include/linux/mm.h \
+    $(wildcard include/config/sysctl.h) \
+    $(wildcard include/config/x86.h) \
+    $(wildcard include/config/ppc.h) \
+    $(wildcard include/config/parisc.h) \
+    $(wildcard include/config/metag.h) \
+    $(wildcard include/config/ia64.h) \
+    $(wildcard include/config/stack/growsup.h) \
+    $(wildcard include/config/ksm.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/debug/vm/rb.h) \
+    $(wildcard include/config/proc/fs.h) \
+    $(wildcard include/config/debug/pagealloc.h) \
+    $(wildcard include/config/hibernation.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/hugetlbfs.h) \
+  include/linux/gfp.h \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/zone/dma32.h) \
+    $(wildcard include/config/pm/sleep.h) \
+    $(wildcard include/config/cma.h) \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/seqlock.h \
+  include/linux/nodemask.h \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/memory/hotremove.h) \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/notifier.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/rcutree.h \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+    $(wildcard include/config/sysfs.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  include/linux/mmdebug.h \
+    $(wildcard include/config/debug/vm.h) \
+    $(wildcard include/config/debug/virtual.h) \
+  include/linux/debug_locks.h \
+    $(wildcard include/config/debug/locking/api/selftests.h) \
+  include/linux/range.h \
+  include/linux/bit_spinlock.h \
+  include/linux/shrinker.h \
+  include/linux/page-flags.h \
+    $(wildcard include/config/pageflags/extended.h) \
+    $(wildcard include/config/arch/uses/pg/uncached.h) \
+    $(wildcard include/config/memory/failure.h) \
+    $(wildcard include/config/swap.h) \
+  include/linux/huge_mm.h \
+  include/linux/vmstat.h \
+    $(wildcard include/config/vm/event/counters.h) \
+  include/linux/vm_event_item.h \
+    $(wildcard include/config/migration.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue-cache.h \
+    $(wildcard include/config/cpu/cache/v4.h) \
+    $(wildcard include/config/cpu/cache/v4wb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/shmparam.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cachetype.h \
+    $(wildcard include/config/cpu/cache/vivt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/tlbflush.h \
+    $(wildcard include/config/cpu/tlb/v4wt.h) \
+    $(wildcard include/config/cpu/tlb/fa.h) \
+    $(wildcard include/config/cpu/tlb/v4wbi.h) \
+    $(wildcard include/config/cpu/tlb/feroceon.h) \
+    $(wildcard include/config/cpu/tlb/v4wb.h) \
+    $(wildcard include/config/cpu/tlb/v6.h) \
+    $(wildcard include/config/cpu/tlb/v7.h) \
+    $(wildcard include/config/arm/errata/720789.h) \
+    $(wildcard include/config/arm/errata/798181.h) \
+  include/linux/sched.h \
+    $(wildcard include/config/sched/debug.h) \
+    $(wildcard include/config/no/hz/common.h) \
+    $(wildcard include/config/lockup/detector.h) \
+    $(wildcard include/config/core/dump/default/elf/headers.h) \
+    $(wildcard include/config/sched/autogroup.h) \
+    $(wildcard include/config/virt/cpu/accounting/native.h) \
+    $(wildcard include/config/bsd/process/acct.h) \
+    $(wildcard include/config/taskstats.h) \
+    $(wildcard include/config/audit.h) \
+    $(wildcard include/config/cgroups.h) \
+    $(wildcard include/config/inotify/user.h) \
+    $(wildcard include/config/fanotify.h) \
+    $(wildcard include/config/epoll.h) \
+    $(wildcard include/config/posix/mqueue.h) \
+    $(wildcard include/config/keys.h) \
+    $(wildcard include/config/perf/events.h) \
+    $(wildcard include/config/schedstats.h) \
+    $(wildcard include/config/task/delay/acct.h) \
+    $(wildcard include/config/fair/group/sched.h) \
+    $(wildcard include/config/rt/group/sched.h) \
+    $(wildcard include/config/cgroup/sched.h) \
+    $(wildcard include/config/blk/dev/io/trace.h) \
+    $(wildcard include/config/rcu/boost.h) \
+    $(wildcard include/config/compat/brk.h) \
+    $(wildcard include/config/cc/stackprotector.h) \
+    $(wildcard include/config/virt/cpu/accounting/gen.h) \
+    $(wildcard include/config/sysvipc.h) \
+    $(wildcard include/config/detect/hung/task.h) \
+    $(wildcard include/config/auditsyscall.h) \
+    $(wildcard include/config/rt/mutexes.h) \
+    $(wildcard include/config/block.h) \
+    $(wildcard include/config/task/xacct.h) \
+    $(wildcard include/config/cpusets.h) \
+    $(wildcard include/config/futex.h) \
+    $(wildcard include/config/fault/injection.h) \
+    $(wildcard include/config/latencytop.h) \
+    $(wildcard include/config/function/graph/tracer.h) \
+    $(wildcard include/config/bcache.h) \
+    $(wildcard include/config/have/unstable/sched/clock.h) \
+    $(wildcard include/config/irq/time/accounting.h) \
+    $(wildcard include/config/no/hz/full.h) \
+  include/uapi/linux/sched.h \
+  include/linux/capability.h \
+  include/uapi/linux/capability.h \
+  arch/arm/include/generated/asm/cputime.h \
+  include/asm-generic/cputime.h \
+    $(wildcard include/config/virt/cpu/accounting.h) \
+  include/asm-generic/cputime_jiffies.h \
+  include/linux/sem.h \
+  include/uapi/linux/sem.h \
+  include/linux/ipc.h \
+  include/linux/uidgid.h \
+    $(wildcard include/config/uidgid/strict/type/checks.h) \
+    $(wildcard include/config/user/ns.h) \
+  include/linux/highuid.h \
+  include/uapi/linux/ipc.h \
+  arch/arm/include/generated/asm/ipcbuf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/ipcbuf.h \
+  arch/arm/include/generated/asm/sembuf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/sembuf.h \
+  include/linux/signal.h \
+    $(wildcard include/config/old/sigaction.h) \
+  include/uapi/linux/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/signal-defs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/sigcontext.h \
+  arch/arm/include/generated/asm/siginfo.h \
+  include/asm-generic/siginfo.h \
+  include/uapi/asm-generic/siginfo.h \
+  include/linux/pid.h \
+  include/linux/proportions.h \
+  include/linux/percpu_counter.h \
+  include/linux/seccomp.h \
+    $(wildcard include/config/seccomp.h) \
+    $(wildcard include/config/seccomp/filter.h) \
+  include/uapi/linux/seccomp.h \
+  include/linux/rculist.h \
+  include/linux/rtmutex.h \
+    $(wildcard include/config/debug/rt/mutexes.h) \
+  include/linux/plist.h \
+    $(wildcard include/config/debug/pi/list.h) \
+  include/linux/resource.h \
+  include/uapi/linux/resource.h \
+  arch/arm/include/generated/asm/resource.h \
+  include/asm-generic/resource.h \
+  include/uapi/asm-generic/resource.h \
+  include/linux/hrtimer.h \
+    $(wildcard include/config/high/res/timers.h) \
+    $(wildcard include/config/timerfd.h) \
+  include/linux/timerqueue.h \
+  include/linux/task_io_accounting.h \
+    $(wildcard include/config/task/io/accounting.h) \
+  include/linux/latencytop.h \
+  include/linux/cred.h \
+    $(wildcard include/config/debug/credentials.h) \
+    $(wildcard include/config/security.h) \
+  include/linux/key.h \
+  include/linux/sysctl.h \
+  include/uapi/linux/sysctl.h \
+  include/linux/selinux.h \
+    $(wildcard include/config/security/selinux.h) \
+  include/linux/llist.h \
+    $(wildcard include/config/arch/have/nmi/safe/cmpxchg.h) \
+  include/asm-generic/sections.h \
+  include/linux/io.h \
+    $(wildcard include/config/has/ioport.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/io.h \
+    $(wildcard include/config/need/mach/io/h.h) \
+    $(wildcard include/config/pci.h) \
+    $(wildcard include/config/pcmcia/soc/common.h) \
+    $(wildcard include/config/isa.h) \
+    $(wildcard include/config/pccard.h) \
+  include/asm-generic/pci_iomap.h \
+    $(wildcard include/config/no/generic/pci/ioport/map.h) \
+    $(wildcard include/config/generic/pci/iomap.h) \
+  arch/arm/mach-sti/include/mach/io.h \
+  include/linux/of_address.h \
+    $(wildcard include/config/of/address.h) \
+  include/linux/ioport.h \
+  include/linux/of.h \
+    $(wildcard include/config/sparc.h) \
+    $(wildcard include/config/of/dynamic.h) \
+    $(wildcard include/config/of.h) \
+    $(wildcard include/config/attach/node.h) \
+    $(wildcard include/config/detach/node.h) \
+    $(wildcard include/config/add/property.h) \
+    $(wildcard include/config/remove/property.h) \
+    $(wildcard include/config/update/property.h) \
+    $(wildcard include/config/proc/devicetree.h) \
+  include/linux/kref.h \
+  include/linux/mod_devicetable.h \
+  include/linux/uuid.h \
+  include/uapi/linux/uuid.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/prom.h \
+  include/linux/irq.h \
+    $(wildcard include/config/generic/hardirqs.h) \
+    $(wildcard include/config/generic/pending/irq.h) \
+    $(wildcard include/config/hardirqs/sw/resend.h) \
+  include/linux/irqreturn.h \
+  include/linux/irqnr.h \
+  include/uapi/linux/irqnr.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irq.h \
+    $(wildcard include/config/sparse/irq.h) \
+    $(wildcard include/config/multi/irq/handler.h) \
+  arch/arm/include/generated/asm/irq_regs.h \
+  include/asm-generic/irq_regs.h \
+  include/linux/irqdesc.h \
+    $(wildcard include/config/irq/preflow/fasteoi.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_irq.h \
+  include/linux/irqchip/arm-gic.h \
+  arch/arm/mach-sti/pm/suspend.h \
+  include/linux/suspend.h \
+    $(wildcard include/config/vt.h) \
+    $(wildcard include/config/vt/console/sleep.h) \
+    $(wildcard include/config/suspend.h) \
+    $(wildcard include/config/pm/sleep/debug.h) \
+    $(wildcard include/config/pm/autosleep.h) \
+    $(wildcard include/config/arch/save/page/keys.h) \
+  include/linux/swap.h \
+    $(wildcard include/config/frontswap.h) \
+    $(wildcard include/config/memcg/swap.h) \
+  include/linux/memcontrol.h \
+    $(wildcard include/config/inet.h) \
+    $(wildcard include/config/memcg/kmem.h) \
+  include/linux/cgroup.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/cgroupstats.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/taskstats.h \
+  include/linux/prio_heap.h \
+  include/linux/idr.h \
+  include/linux/xattr.h \
+  include/linux/slab.h \
+    $(wildcard include/config/slab/debug.h) \
+    $(wildcard include/config/failslab.h) \
+    $(wildcard include/config/slob.h) \
+    $(wildcard include/config/slab.h) \
+    $(wildcard include/config/slub.h) \
+    $(wildcard include/config/debug/slab.h) \
+  include/linux/slub_def.h \
+    $(wildcard include/config/slub/stats.h) \
+    $(wildcard include/config/slub/debug.h) \
+  include/linux/kobject.h \
+  include/linux/sysfs.h \
+  include/linux/kobject_ns.h \
+  include/linux/stat.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/stat.h \
+  include/uapi/linux/stat.h \
+  include/linux/kmemleak.h \
+    $(wildcard include/config/debug/kmemleak.h) \
+  include/uapi/linux/xattr.h \
+  include/linux/fs.h \
+    $(wildcard include/config/fs/posix/acl.h) \
+    $(wildcard include/config/quota.h) \
+    $(wildcard include/config/fsnotify.h) \
+    $(wildcard include/config/ima.h) \
+    $(wildcard include/config/debug/writecount.h) \
+    $(wildcard include/config/file/locking.h) \
+    $(wildcard include/config/fs/xip.h) \
+  include/linux/kdev_t.h \
+  include/uapi/linux/kdev_t.h \
+  include/linux/dcache.h \
+  include/linux/rculist_bl.h \
+  include/linux/list_bl.h \
+  include/linux/path.h \
+  include/linux/radix-tree.h \
+  include/linux/semaphore.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/fiemap.h \
+  include/linux/migrate_mode.h \
+  include/linux/percpu-rwsem.h \
+  include/linux/blk_types.h \
+    $(wildcard include/config/blk/cgroup.h) \
+    $(wildcard include/config/blk/dev/integrity.h) \
+  include/uapi/linux/fs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/limits.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/ioctl.h \
+  arch/arm/include/generated/asm/ioctl.h \
+  include/asm-generic/ioctl.h \
+  include/uapi/asm-generic/ioctl.h \
+  include/linux/quota.h \
+    $(wildcard include/config/quota/netlink/interface.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/dqblk_xfs.h \
+  include/linux/dqblk_v1.h \
+  include/linux/dqblk_v2.h \
+  include/linux/dqblk_qtree.h \
+  include/linux/projid.h \
+  include/uapi/linux/quota.h \
+  include/linux/nfs_fs_i.h \
+  include/linux/fcntl.h \
+  include/uapi/linux/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/fcntl.h \
+  include/linux/err.h \
+  include/linux/cgroup_subsys.h \
+    $(wildcard include/config/cgroup/debug.h) \
+    $(wildcard include/config/cgroup/cpuacct.h) \
+    $(wildcard include/config/cgroup/device.h) \
+    $(wildcard include/config/cgroup/freezer.h) \
+    $(wildcard include/config/net/cls/cgroup.h) \
+    $(wildcard include/config/cgroup/perf.h) \
+    $(wildcard include/config/netprio/cgroup.h) \
+    $(wildcard include/config/cgroup/hugetlb.h) \
+    $(wildcard include/config/cgroup/bcache.h) \
+  include/linux/hardirq.h \
+  include/linux/ftrace_irq.h \
+    $(wildcard include/config/ftrace/nmi/enter.h) \
+  include/linux/vtime.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hardirq.h \
+  include/linux/irq_cpustat.h \
+  include/linux/jump_label.h \
+    $(wildcard include/config/jump/label.h) \
+  include/linux/node.h \
+    $(wildcard include/config/memory/hotplug/sparse.h) \
+  include/linux/device.h \
+    $(wildcard include/config/debug/devres.h) \
+    $(wildcard include/config/acpi.h) \
+    $(wildcard include/config/pinctrl.h) \
+    $(wildcard include/config/devtmpfs.h) \
+    $(wildcard include/config/sysfs/deprecated.h) \
+  include/linux/klist.h \
+  include/linux/pinctrl/devinfo.h \
+    $(wildcard include/config/pm.h) \
+  include/linux/pinctrl/consumer.h \
+    $(wildcard include/config/pinconf.h) \
+  include/linux/seq_file.h \
+  include/linux/pinctrl/pinctrl-state.h \
+  include/linux/pm.h \
+    $(wildcard include/config/pm/runtime.h) \
+    $(wildcard include/config/pm/clk.h) \
+    $(wildcard include/config/pm/generic/domains.h) \
+  include/linux/ratelimit.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/device.h \
+    $(wildcard include/config/dmabounce.h) \
+    $(wildcard include/config/iommu/api.h) \
+    $(wildcard include/config/arm/dma/use/iommu.h) \
+    $(wildcard include/config/arch/omap.h) \
+  include/linux/pm_wakeup.h \
+  include/linux/freezer.h \
+  arch/arm/mach-sti/pm/suspend_interface.h \
+  arch/arm/mach-sti/pm/suspend_internal.h \
+  arch/arm/mach-sti/pm/poke_table.h \
+  arch/arm/mach-sti/pm/synopsys_dwc_ddr32.h \
+
+arch/arm/mach-sti/pm/suspend_hps.o: $(deps_arch/arm/mach-sti/pm/suspend_hps.o)
+
+$(deps_arch/arm/mach-sti/pm/suspend_hps.o):
diff -urNp a/arch/arm/mach-sti/pm/Makefile b/arch/arm/mach-sti/pm/Makefile
--- a/arch/arm/mach-sti/pm/Makefile	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/Makefile	2019-09-26 21:23:27.224619300 +0100
@@ -0,0 +1,7 @@
+# STMicroelectronics
+# Makefile for compiling STI platform power code
+
+obj-y +=	pokeloop.o \
+		suspend.o \
+		suspend_asm.o \
+		suspend_hps.o suspend_cps.o suspend_dcps_ddr_off.o
diff -urNp a/arch/arm/mach-sti/pm/built-in.mod.c b/arch/arm/mach-sti/pm/built-in.mod.c
--- a/arch/arm/mach-sti/pm/built-in.mod.c	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/built-in.mod.c	2019-09-26 21:23:59.656669400 +0100
@@ -0,0 +1,19 @@
+#include <linux/module.h>
+#include <linux/vermagic.h>
+#include <linux/compiler.h>
+
+MODULE_INFO(vermagic, VERMAGIC_STRING);
+
+struct module __this_module
+__attribute__((section(".gnu.linkonce.this_module"))) = {
+	.name = KBUILD_MODNAME,
+	.arch = MODULE_ARCH_INIT,
+};
+
+MODULE_INFO(intree, "Y");
+
+static const char __module_depends[]
+__used
+__attribute__((section(".modinfo"))) =
+"depends=";
+
Binary files a/arch/arm/mach-sti/pm/built-in.o and b/arch/arm/mach-sti/pm/built-in.o differ
diff -urNp a/arch/arm/mach-sti/pm/poke_table.h b/arch/arm/mach-sti/pm/poke_table.h
--- a/arch/arm/mach-sti/pm/poke_table.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/poke_table.h	2019-09-26 21:23:27.224619300 +0100
@@ -0,0 +1,105 @@
+/*
+ * -------------------------------------------------------------------------
+ * Copyright (C) 2014  STMicroelectronics
+ * Author: Francesco M. Virlinzi  <francesco.virlinzi@st.com>
+ *	   Sudeep Biswas	  <sudeep.biswas@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License V.2 ONLY.  See linux/COPYING for more information.
+ *
+ * ------------------------------------------------------------------------- */
+#ifndef __STI_POKE_TABLE_H__
+#define __STI_POKE_TABLE_H__
+
+/* Poke table Opcode values */
+#define OP_END_POKES				0
+#define OP_POKE8				1
+#define OP_POKE16				2
+#define OP_POKE32				3
+#define OP_OR8					4
+#define OP_OR16					5
+#define OP_OR32					6
+#define OP_UPDATE8				7
+#define OP_UPDATE16				8
+#define OP_UPDATE32				9
+#define OP_POKE_UPDATE32			10
+#define OP_WHILE_NE8				11
+#define OP_WHILE_NE16				12
+#define OP_WHILE_NE32				13
+#define OP_IF_EQ32				14
+#define OP_IF_GT32				15
+#define OP_ELSE					16
+#define OP_DELAY				17
+#define OP_IF_DEVID_GE				18
+#define OP_IF_DEVID_LE				19
+
+#ifndef __ASSEMBLER__
+
+/* Poke table commands */
+#define POKE8(A, VAL)				{OP_POKE8,  A, VAL}
+#define POKE16(A, VAL)				{OP_POKE16, A, VAL}
+#define POKE32(A, VAL)				{OP_POKE32, A, VAL}
+#define OR8(A, VAL)				{OP_OR8, A, VAL}
+#define OR16(A, VAL)				{OP_OR16, A, VAL}
+#define OR32(A, VAL)				{OP_OR32, A, VAL}
+#define UPDATE8(A, AND, OR)			{OP_UPDATE8, A, AND, OR}
+#define UPDATE16(A, AND, OR)			{OP_UPDATE16, A, AND, OR}
+#define UPDATE32(A, AND, OR)			{OP_UPDATE32, A, AND, OR}
+#define POKE_UPDATE32(A1, A2, AND, SHIFT, OR)	\
+		{OP_POKE_UPDATE32, A1, A2, AND, SHIFT, OR}
+#define WHILE_NE8(A, AND, VAL)			{OP_WHILE_NE8, A, AND, VAL}
+#define WHILE_NE16(A, AND, VAL)			{OP_WHILE_NE16, A, AND, VAL}
+#define WHILE_NE32(A, AND, VAL)			{OP_WHILE_NE32, A, AND, VAL}
+#define IF_EQ32(NESTLEVEL, A, AND, VAL)
+#define IF_GT32(NESTLEVEL, A, AND, VAL)
+#define ELSE(NESTLEVEL)
+#define ENDIF(NESTLEVEL)
+#define DELAY(ITERATIONS)			{OP_DELAY, ITERATIONS}
+#define IF_DEVID_GE(NESTLEVEL, VAL)
+#define IF_DEVID_LE(NESTLEVEL, VAL)
+
+/* poke_operation is the structure encapsulating
+ * a basic poke table entry denoting an operation.
+ * Number of operands depend upon the opcode.
+ * Maximum of 3 operands are there for any opcode.
+ * if any of the opcode uses only 2 operands the last
+ * operand would hold a 0. An opcode of 0 means end of
+ * the poke table.
+ */
+struct poke_operation {
+	long opcode;
+	long operand_1;
+	long operand_2;
+	long operand_3;
+};
+
+/* Poke tbl utility functions, required by both HPS and CPS */
+static inline
+void patch_poke_table_copy(void *des_add, long const *table,
+			   unsigned long ddr_addr,
+			   unsigned long size)
+{
+	int counter = 0;
+	long opcode;
+	long *dest = (long *)des_add;
+
+	while (counter < size) {
+		*dest++ = opcode = table[counter++];
+
+		if (opcode != OP_DELAY)
+			*dest++ = table[counter++] + ddr_addr;
+		else
+			*dest++ = table[counter++];
+
+		*dest++ = table[counter++];
+		*dest++ = table[counter++];
+	}
+}
+
+int sti_pokeloop(const unsigned int *poketbl);
+extern unsigned long sti_pokeloop_sz;
+
+#endif /* __ASSEMBLER__ */
+
+#endif /* __STI_POKE_TABLE_H__ */
+
diff -urNp a/arch/arm/mach-sti/pm/pokeloop.S b/arch/arm/mach-sti/pm/pokeloop.S
--- a/arch/arm/mach-sti/pm/pokeloop.S	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/pokeloop.S	2019-09-26 21:23:27.224619300 +0100
@@ -0,0 +1,100 @@
+/*
+ * -------------------------------------------------------------------------
+ * Copyright (C) 2014  STMicroelectronics
+ * Author: Francesco M. Virlinzi  <francesco.virlinzi@st.com>
+ *	   Sudeep Biswas	  <sudeep.biswas@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License V.2 ONLY.  See linux/COPYING for more information.
+ *
+ * ------------------------------------------------------------------------- */
+
+#include "poke_table.h"
+
+/*
+ * The poke table is a series of long words, in the format:
+ *
+ *	opcode, operand, operand (, operand)*
+ *
+ * An opcode of 0 marks the table end.
+ * In this case it is assumed that an opcode will be followed
+ * by 3 operands. So basically the format is:
+ *	opcode, operand_1, operand_2, operand_3
+ * Inside the poke table each instruction is stored in the above
+ * mentioned format. If any opcode has fewer operands then
+ * the remaining operands will be zero and pokeloop will simply
+ * bypass them before reading/executing the next opcode.
+ */
+
+	.global		sti_pokeloop
+
+	.balign	32
+sti_pokeloop:
+
+do_poking:
+	ldr	r3, [r0], #4	/* opcode */
+	ldr	r2, [r0], #4	/* operand 1 */
+
+/* END_MARKER/RETURN(x) */
+	cmp	r3, #OP_END_POKES
+	bne	do_poke32
+	mov	r0, r2		/* Exit code */
+	bx	lr		/* Return point */
+
+
+/* POKE32(A, VAL) */
+do_poke32:
+	cmp	r3, #OP_POKE32
+	bne	do_or32
+	ldr	r3, [r0], #4	/* read VAL */
+	str	r3, [r2]	/* *A = VAL */
+	add	r0, r0, #4	/* increment to next opcode*/
+	b	do_poking
+
+/* OR32(A, VAL) */
+do_or32:
+	cmp	r3, #OP_OR32
+	bne	do_update32
+	ldr	r3, [r0], #4	/* VAL */
+	ldr	r12, [r2]	/* *A */
+	orr	r3, r3, r12	/* *A | OR */
+	str	r3, [r2]	/* *A |= OR */
+	add	r0, r0, #4	/* increment to next opcode*/
+	b	do_poking
+
+/* UPDATE32(A, and, OR) */
+do_update32:
+	cmp	r3, #OP_UPDATE32
+	bne	do_while_ne32
+	ldr	r3, [r0], #4	/* read and */
+	ldr	r12, [r2]	/* *A */
+	and	r12, r12, r3	/* *A & AND */
+	ldr	r3, [r0], #4	/* read OR */
+	orr	r12, r12, r3	/* (*A & and) | OR */
+	str	r12, [r2]	/* *A = ((*A & and) | OR) */
+	b	do_poking
+
+/* WHILE_NE32(A, and, VAL) */
+do_while_ne32:
+	cmp	r3, #OP_WHILE_NE32
+	bne	do_delay
+1:	ldr	r3, [r0]	/* read and */
+	ldr	r12, [r2]	/* *A */
+	and	r3, r3, r12	/* *A & AND */
+	ldr	r12, [r0, #4]	/* read VAL */
+	cmp	r3, r12		/* if ((*A & and) == VAL) */
+	bne	1b		/* loop if false */
+	add	r0, r0, #8	/* increment to next opcode*/
+	b	do_poking
+
+/* DELAY(ITERATIONS) */
+do_delay:
+1:	subs	r2, r2, #1	/* if (--OPERATIONS == 0) */
+	beq	1b		/* subs should have set Z bit if equal */
+	add	r0, r0, #8
+	b	do_poking
+
+	.balign 4
+.global sti_pokeloop_sz
+sti_pokeloop_sz:
+	.long . - sti_pokeloop
Binary files a/arch/arm/mach-sti/pm/pokeloop.o and b/arch/arm/mach-sti/pm/pokeloop.o differ
diff -urNp a/arch/arm/mach-sti/pm/suspend.c b/arch/arm/mach-sti/pm/suspend.c
--- a/arch/arm/mach-sti/pm/suspend.c	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/suspend.c	2019-09-26 21:23:27.224619300 +0100
@@ -0,0 +1,598 @@
+/*
+ * -------------------------------------------------------------------------
+ * Copyright (C) 2014  STMicroelectronics
+ * Author:	Sudeep Biswas		<sudeep.biswas@st.com>
+ *		Francesco M. Virlinzi	<francesco.virlinzi@st.com>
+ *		Laurent MEUNIER		<laurent.meunier@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License V.2 ONLY.  See linux/COPYING for more information.
+ * ------------------------------------------------------------------------- */
+
+#include <linux/irq.h>
+#include <linux/io.h>
+#include <linux/irqchip/arm-gic.h>
+#include <linux/of.h>
+#include <linux/of_address.h>
+#include <linux/platform_device.h>
+#include <linux/vmalloc.h>
+
+#include "suspend.h"
+#include "suspend_internal.h"
+#include "poke_table.h"
+
+#define L2CC_WAY_MASK			0x10000
+#define L2CC_AUX_CNTRL_REG_OFFSET	0x104
+#define WAY_MASK_SIXTEEN_WAYS		0xffff
+#define WAY_MASK_EIGHT_WAYS		0xff
+#define WAY_SIZE_MASK			0x7
+#define WAY_SIZE_SHIFT			17
+#define MIN_WAY_SIZE			16384
+
+/*
+ * Using PM_SUSPEND_MAX + 1 ensures that the ID given to DCPS
+ * will never conflict with suspend state IDs given by kernel
+ */
+#define DCPS_STATE			(PM_SUSPEND_MAX + 1)
+
+/* List of functions implementing the suspend_ops */
+static int sti_suspend_valid(suspend_state_t state);
+static int sti_suspend_begin(suspend_state_t state);
+static void sti_suspend_prepare(void);
+static int sti_suspend_enter(suspend_state_t state);
+
+/* States definitions */
+/*
+ * Currently three low power suspend modes
+ * are supported: freeze, standby and mem.
+ * freeze support is in-build in kernel and no
+ * support from platform power code is required.
+ * standby and mem require platfrom code support.
+ * They require explicit callback support.
+ * It is to be noted that standby is mapped to HPS
+ * and mem is mapped to CPS.
+ */
+struct sti_hw_state_desc sti_hw_pltf_states[MAX_SOC_LOW_POWER_STATES],
+	sti_hw_states[MAX_SOC_LOW_POWER_STATES] = {
+	{
+		.target_state = PM_SUSPEND_STANDBY,
+		.desc = "HOST PASSIVE STANDBY",
+		.setup = sti_hps_setup,
+		.enter = sti_hps_enter,
+		.clock_state = CLOCK_REDUCED,
+		.ddr_state = DDR_SR,
+		.dcps_enter = NULL,
+	},
+	{
+		.target_state = PM_SUSPEND_MEM,
+		.desc =	"CONTROLLER PASSIVE STANDBY",
+		.setup = sti_cps_setup,
+		.enter = sti_cps_enter,
+		.clock_state = CLOCKS_OFF,
+		.ddr_state = DDR_SR,
+		/*
+		 * sti_cps_dcps_enter is the function provided by CPS
+		 * implementation for entering DCPS. Suspend
+		 * framework calls this function to enter DCPS if a
+		 * DCPS state is not found.
+		 */
+		.dcps_enter = sti_cps_dcps_enter,
+	},
+	{
+		.target_state = DCPS_STATE,
+		.desc = "DCPS DDR OFF",
+		.setup = sti_dcps_ddr_off_setup,
+		.enter = sti_dcps_ddr_off_enter,
+		.clock_state = CLOCKS_OFF,
+		.ddr_state = DDR_OFF,
+	},
+};
+
+struct sti_platform_suspend sti_suspend = {
+	.hw_states = sti_hw_pltf_states,
+	.hw_state_nr = 0,
+	.index = -1,
+	.ops.valid = sti_suspend_valid,
+	.ops.begin = sti_suspend_begin,
+	.ops.enter = sti_suspend_enter,
+};
+
+static const unsigned long suspend_end_table[4] = { OP_END_POKES, 0, 0, 0 };
+
+enum tbl_level {
+	TBL_ENTER,
+	TBL_EXIT
+};
+
+/*
+ * The below object is defined for STiH407 family SoCs.
+ * This will differ for other SoCs such as ORLY, etc.
+ * Support added for only STiH407 family SoCs
+ */
+static const struct sti_low_power_syscfg_info ddr3_syscfg_info = {
+	.ddr3_cfg_offset = 0x160,
+	.ddr3_stat_offset = 0x920,
+};
+
+static const struct sti_low_power_syscfg_info ddr3_syscfg_info_new = {
+	.ddr3_cfg_offset = 0x338,
+	.ddr3_stat_offset = 0x948,
+};
+
+static struct of_device_id suspend_of_match[] = {
+	/* For STiH407 family SoCs */
+	{
+		/* Supporting 407 family SoCs */
+		.compatible = "st,stih407-ddr-controller",
+		.data = &ddr3_syscfg_info,
+	},
+	{
+		.compatible = "st,stih407-ddr-controller_new",
+		.data = &ddr3_syscfg_info_new,
+	},
+	/* Add compatible and data here and in the DT to support other SoCs */
+	{}
+};
+
+static int sti_suspend_valid(suspend_state_t state)
+{
+	int i;
+
+	for (i = 0; i < sti_suspend.hw_state_nr; i++) {
+		/*  check if the right target state */
+		if (state == sti_suspend.hw_states[i].target_state) {
+			pr_info("sti pm: support mode: %s\n",
+				sti_suspend.hw_states[i].desc);
+			return true;
+		}
+	}
+
+	/*  if not found, then not valid must return false */
+	return false;
+}
+
+static int sti_suspend_begin(suspend_state_t state)
+{
+	int i;
+
+	sti_suspend.index = -1;
+
+	for (i = 0; i < sti_suspend.hw_state_nr; i++) {
+		/*  check if the right target state */
+		if (state == sti_suspend.hw_states[i].target_state) {
+			sti_suspend.index = i;
+			return 0;
+		}
+	}
+
+	return -EINVAL;
+}
+
+static void sti_copy_suspend_table(struct sti_suspend_table *table,
+				   void **__va_add,
+				   enum tbl_level level)
+{
+	unsigned long const *tbl_ptr;
+	unsigned long tbl_len_byte;
+
+	if (level == TBL_ENTER) {
+		tbl_ptr = table->enter;
+		tbl_len_byte = table->enter_size;
+	} else {
+		tbl_ptr = table->exit;
+		tbl_len_byte = table->exit_size;
+	}
+
+	/*
+	 * if table->base_address is zero, this means no patching
+	 * of poke table. Poke table is already set.
+	 */
+	if (!table->base_address)
+		memcpy(*__va_add, tbl_ptr, tbl_len_byte);
+	else
+		patch_poke_table_copy(*__va_add, tbl_ptr,
+				      table->base_address,
+				      tbl_len_byte/sizeof(long));
+
+	*__va_add += tbl_len_byte;
+}
+
+static void sti_insert_poke_table_end(void **__va_add)
+{
+	memcpy(*__va_add, suspend_end_table,
+	       ARRAY_SIZE(suspend_end_table) * sizeof(long));
+
+	*__va_add += ARRAY_SIZE(suspend_end_table) * sizeof(long);
+}
+
+/*
+ * enter_dcps is responsible for shutdown of the system
+ * Execution will never return from enter_dcps.
+ * There are two options : Switch off the host domain
+ * with DDR powered off and Switch off the host domain
+ * with DDR in self refresh. In both cases
+ * SBC will be powered, and will snoop for a wake-up
+ * event. If a wake-up is received, the system is rebooted.
+ * enter_dcps will first check for a DCPS state
+ * implementation, if found, it will enter the
+ * state (that should switch off the DDR). Otherwise
+ * if DCPS state is not found, it falls back to
+ * the suspend states. If a suspend state implements
+ * DCPS entry, the path is chosen for execution.
+ */
+void enter_dcps(void)
+{
+	int i = 0;
+	int alt_state_index = -1;
+
+	/* search for the DCPS state */
+	for (; i < sti_suspend.hw_state_nr; i++) {
+		if (sti_suspend.hw_states[i].target_state ==
+			DCPS_STATE) {
+			sti_suspend.index = i;
+			break;
+		}
+
+		/* in parallel search if suspend states implement DCPS entry */
+		if (sti_suspend.hw_states[i].dcps_enter &&
+				alt_state_index == -1)
+				alt_state_index = i;
+	}
+
+	/*
+	 * DCPS state not found, fallback to a suspend state
+	 * that implements DCPS entry, if multiple implements,
+	 * chosen is the first one !
+	 */
+	if (i == sti_suspend.hw_state_nr) {
+		if (alt_state_index == -1)
+			/* fallback failed, DCPS cant be entered, just relax */
+			goto relax;
+
+		sti_suspend.index = alt_state_index;
+		/* enter the first suspend state that implements DCPS entry */
+		sti_suspend.hw_states[sti_suspend.index].
+			dcps_enter(&sti_suspend.hw_states[sti_suspend.index]);
+		/* relax till power dies */
+		goto relax;
+	}
+
+	/* DCPS state found, enter the state */
+	sti_suspend.hw_states[sti_suspend.index].
+		enter(&sti_suspend.hw_states[sti_suspend.index]);
+
+relax:
+	while (1)
+		cpu_relax();
+}
+
+static int sti_get_lockable_size(struct sti_hw_state_desc *state)
+{
+	struct sti_suspend_table *table;
+	int buffer_size = 0;
+
+	buffer_size = sti_suspend_on_buffer_sz + sti_pokeloop_sz;
+
+	list_for_each_entry(table, &state->state_tables, node)
+		buffer_size += table->enter_size + table->exit_size;
+
+	buffer_size += 2 * sizeof(struct poke_operation);
+
+	return buffer_size;
+}
+
+static void sti_prepare(struct sti_hw_state_desc *state)
+{
+	void *__iomem __va_buf = state->buffer_data.sti_buffer_code;
+	unsigned int sz;
+
+	memcpy(state->buffer_data.sti_buffer_code, sti_suspend_on_buffer,
+	       sti_suspend_on_buffer_sz);
+
+	__va_buf += sti_suspend_on_buffer_sz;
+	__va_buf = (void *)L2CC_CACHE_ALIGN((u32)__va_buf);
+
+	state->buffer_data.sti_locking_code = __va_buf;
+
+	memcpy(__va_buf, sti_suspend_lock_code, sti_suspend_lock_code_sz);
+
+	sz = sti_get_lockable_size(state);
+	state->buffer_data.sz = L2CC_CACHE_ALIGN(sz);
+}
+
+static void sti_suspend_prepare(void)
+{
+	int index;
+	struct sti_suspend_table *table;
+	void *__va_buf;
+
+	index = sti_suspend.index;
+
+	pr_info("sti pm: Copying poke table & poke loop to buffer\n");
+	__va_buf = sti_suspend.hw_states[index].cache_buffer;
+
+	/* copy the __pokeloop code in buffer*/
+	sti_suspend.hw_states[index].buffer_data.pokeloop = __va_buf;
+
+	memcpy(__va_buf, sti_pokeloop, sti_pokeloop_sz);
+	__va_buf += sti_pokeloop_sz;
+
+	/* copy the entry_tables in buffer */
+	sti_suspend.hw_states[index].buffer_data.table_enter = __va_buf;
+
+	list_for_each_entry(table,
+			    &sti_suspend.hw_states[index].state_tables,
+			    node) {
+		if (!table->enter)
+			continue;
+
+		sti_copy_suspend_table(table, &__va_buf, TBL_ENTER);
+	}
+
+	sti_insert_poke_table_end(&__va_buf);
+
+	/* copy the exit_data_table in buffer */
+	sti_suspend.hw_states[index].buffer_data.table_exit = __va_buf;
+
+	list_for_each_entry_reverse(table,
+				    &sti_suspend.hw_states[index].
+				    state_tables,
+				    node) {
+		if (!table->exit)
+			continue;
+
+		sti_copy_suspend_table(table, &__va_buf, TBL_EXIT);
+	}
+
+	sti_insert_poke_table_end(&__va_buf);
+
+	sti_suspend.hw_states[index].buffer_data.sti_buffer_code = __va_buf;
+
+	/*
+	 * call prepare() for target state specific code to be
+	 * copied to buffer
+	 */
+	pr_info("sti pm: entering prepare:%s\n",
+		sti_suspend.hw_states[index].desc);
+
+	sti_prepare(&sti_suspend.hw_states[index]);
+}
+
+static int sti_suspend_enter(suspend_state_t state)
+{
+	if (sti_suspend.index == -1 ||
+	    state != sti_suspend.hw_states[sti_suspend.index].target_state)
+			return -EINVAL;
+
+	pr_info("sti pm: entering suspend:%s\n",
+		sti_suspend.hw_states[sti_suspend.index].desc);
+
+	if (!sti_suspend.hw_states[sti_suspend.index].enter) {
+		pr_err("sti pm: state enter() is NULL\n");
+		return -EFAULT;
+	}
+
+	return sti_suspend.hw_states[sti_suspend.index].
+			enter(&sti_suspend.hw_states[sti_suspend.index]);
+}
+
+/*
+ * sti_gic_set_wake is called whenever any driver
+ * that is capable of wakeup calls enable_irq_wakeup().
+ * This simply checks if valid IRQ number is given and
+ * does not require to do anything else. If irq number
+ * is invalid then error is returned.
+ */
+static int sti_gic_set_wake(struct irq_data *d, unsigned int on)
+{
+	if (d->irq <= MAX_GIC_SPI_INT)
+		return 0;
+
+	return -ENXIO;
+}
+
+static int __init sti_suspend_setup(void)
+{
+	int i;
+	int ret = 0;
+	struct device_node *np, *child, *np_ref;
+	unsigned long ddr_pctl_addresses_va[MAX_DDR_PCTL_NUMBER];
+	unsigned long ddr_pctl_addresses_pa[MAX_DDR_PCTL_NUMBER];
+	unsigned int nr_ddr_pctl = 0;
+	const struct of_device_id *match = NULL;
+	struct sti_ddr3_low_power_info lp_info[MAX_DDR_PCTL_NUMBER];
+	void __iomem *cleaner[(2 * MAX_DDR_PCTL_NUMBER) + 1];
+	int cleaner_index = 0;
+	unsigned int lock_code_sz, sz;
+	bool register_suspend_ops = false;
+	bool ddr_sr_ack_pctl = false;
+
+	np = of_find_compatible_node(NULL, NULL, "arm,pl310-cache");
+	if (IS_ERR_OR_NULL(np)) {
+		pr_err("sti pm cps: L2 Cache controller entry not found in DT\n");
+		return -ENODEV;
+	}
+
+	sti_suspend.l2cachebase = of_iomap(np, 0);
+	if (!sti_suspend.l2cachebase) {
+		of_node_put(np);
+		return -ENODEV;
+	}
+
+	cleaner[cleaner_index++] = sti_suspend.l2cachebase;
+
+	of_node_put(np);
+
+	/* Read Cache type register to know the way mask */
+	sti_suspend.l2waymask = readl_relaxed(sti_suspend.l2cachebase +
+						L2CC_AUX_CNTRL_REG_OFFSET);
+
+	if (sti_suspend.l2waymask & L2CC_WAY_MASK)
+		sti_suspend.l2waymask = WAY_MASK_SIXTEEN_WAYS; /* 16 ways */
+	else
+		sti_suspend.l2waymask = WAY_MASK_EIGHT_WAYS; /* 8 ways */
+
+	np = of_find_node_by_name(NULL, "ddr-pctl-controller");
+	if (IS_ERR_OR_NULL(np))
+		goto err;
+
+	for_each_child_of_node(np, child) {
+		struct resource res;
+
+		if (of_address_to_resource(child, 0, &res)) {
+			of_node_put(np);
+			goto err;
+		}
+
+		ddr_pctl_addresses_pa[nr_ddr_pctl] = res.start;
+
+		ddr_pctl_addresses_va[nr_ddr_pctl] = (unsigned int)
+				ioremap(res.start, resource_size(&res));
+
+		if (!ddr_pctl_addresses_va[nr_ddr_pctl]) {
+			of_node_put(np);
+			goto err;
+		}
+		cleaner[cleaner_index++] = (void *)
+					ddr_pctl_addresses_va[nr_ddr_pctl];
+
+		match = of_match_node(suspend_of_match, child);
+		if (!match) {
+			lp_info[nr_ddr_pctl].sysconf_base = 0;
+			nr_ddr_pctl++;
+			continue;
+		}
+
+		np_ref = of_parse_phandle(child, "st,syscfg", 0);
+		if (IS_ERR_OR_NULL(np_ref)) {
+			of_node_put(np);
+			goto err;
+		}
+
+		lp_info[nr_ddr_pctl].sysconf_base = (unsigned int)
+							of_iomap(np_ref, 0);
+
+		if (!lp_info[nr_ddr_pctl].sysconf_base) {
+			of_node_put(np_ref);
+			of_node_put(np);
+			goto err;
+		}
+
+		cleaner[cleaner_index++] = (void *)
+					lp_info[nr_ddr_pctl].sysconf_base;
+
+		of_node_put(np_ref);
+
+		lp_info[nr_ddr_pctl].sysconf_info =
+				*((struct sti_low_power_syscfg_info *)
+				match->data);
+
+		nr_ddr_pctl++;
+	}
+
+	ddr_sr_ack_pctl = of_property_read_bool(np, "st,ddr_sr_ack_pctl");
+
+	of_node_put(np);
+
+	for (i = 0; i < MAX_SOC_LOW_POWER_STATES; i++) {
+		struct sti_hw_state_desc *hw_state = sti_suspend.hw_states;
+		struct page *page;
+
+		hw_state += sti_suspend.hw_state_nr;
+		*hw_state = sti_hw_states[i];
+
+		ret = hw_state->setup(hw_state, ddr_pctl_addresses_va,
+				      nr_ddr_pctl,
+				      lp_info,
+				      ddr_sr_ack_pctl);
+		if (ret)
+			continue;
+
+		sz = sti_get_lockable_size(hw_state);
+
+		lock_code_sz = L2CC_CACHE_ALIGN(sz) + sti_suspend_lock_code_sz;
+		if (lock_code_sz > PAGE_SIZE ||
+		    lock_code_sz > sti_get_l2cc_way_size()) {
+			pr_err("sti : lockablecode + locking code > pagesize/way");
+			continue;
+		}
+
+		page = alloc_page(GFP_KERNEL);
+		hw_state->cache_buffer = (unsigned char *)vmap(&page, 1, VM_MAP,
+						       PAGE_KERNEL_EXEC);
+		if (!hw_state->cache_buffer) {
+			pr_err("sti pm : cache buffer alloc failed in setup\n");
+			continue;
+		}
+
+		sti_suspend.index = sti_suspend.hw_state_nr;
+		sti_suspend_prepare();
+
+		if (hw_state->target_state != DCPS_STATE)
+			register_suspend_ops = true;
+
+		sti_suspend.hw_state_nr++;
+	}
+
+	if (!sti_suspend.hw_state_nr)
+		goto err;
+
+	if (register_suspend_ops)
+		suspend_set_ops(&sti_suspend.ops);
+
+	 /*
+	  * irqchip's irq_set_wake() is called whenever any driver
+	  * that is capable of wakeup calls enable_irq_wakeup()
+	  * If bsp code set this, its fine, otherwise it wont
+	  * work. So for safety we set this from here too. It does
+	  * nothing apart from checking the validity of the irq
+	  * number that can possibly give a wakeup. This
+	  * assignment and the corresponding function can be
+	  * removed if you are sure that somebody set this before
+	  * with a properly written function. Currently in 3.10 kernel
+	  * nobody is setting this. Hence this is done by the power
+	  * code.
+	  */
+	if (!gic_arch_extn.irq_set_wake)
+		gic_arch_extn.irq_set_wake = sti_gic_set_wake;
+
+	pm_power_off = enter_dcps;
+
+	pr_info("sti pm: Suspend and PowerDown support registered\n");
+
+	return 0;
+err:
+	for (i = 0; i < cleaner_index; i++)
+		iounmap(cleaner[i]);
+
+	return -ENODEV;
+}
+
+/*
+ * helper function to calculate l2cc way size
+ */
+unsigned int sti_get_l2cc_way_size(void)
+{
+	u32 l2ccaux_reg;
+	unsigned int way_size_code;
+
+	u32 l2cc_way_size[] = {MIN_WAY_SIZE,
+			       MIN_WAY_SIZE,
+			       2 * MIN_WAY_SIZE,
+			       4 * MIN_WAY_SIZE,
+			       8 * MIN_WAY_SIZE,
+			       16 * MIN_WAY_SIZE,
+			       32 * MIN_WAY_SIZE,
+			       32 * MIN_WAY_SIZE,
+			};
+
+
+	l2ccaux_reg = readl_relaxed(sti_suspend.l2cachebase +
+						L2CC_AUX_CNTRL_REG_OFFSET);
+
+	way_size_code = (l2ccaux_reg >> WAY_SIZE_SHIFT) & WAY_SIZE_MASK;
+
+	return l2cc_way_size[way_size_code];
+}
+
+module_init(sti_suspend_setup);
diff -urNp a/arch/arm/mach-sti/pm/suspend.h b/arch/arm/mach-sti/pm/suspend.h
--- a/arch/arm/mach-sti/pm/suspend.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/suspend.h	2019-09-26 21:23:27.228619300 +0100
@@ -0,0 +1,166 @@
+/*
+ * -------------------------------------------------------------------------
+ * Copyright (C) 2014  STMicroelectronics
+ * Author: Francesco M. Virlinzi  <francesco.virlinzi@st.com>
+ *	   Sudeep Biswas	  <sudeep.biswas@st.com>
+ *	   Laurent MEUNIER	  <laurent.meunier@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License V.2 ONLY.  See linux/COPYING for more information.
+ * ------------------------------------------------------------------------- */
+
+#ifndef __STI_SUSPEND_H__
+#define __STI_SUSPEND_H__
+
+#include <linux/suspend.h>
+#include <linux/list.h>
+
+#define STI_SUSPEND_DESC_LEN 32
+
+#define MAX_SOC_LOW_POWER_STATES 3
+
+#define MAX_GIC_SPI_INT 255
+
+#define MAX_DDR_PCTL_NUMBER 2
+
+/*
+ * Max of 4 TLB entries are lockable in Cortex A9.
+ * This means 4 different memory mapped devices can be
+ * accessed after the DDR is in self-refresh, which
+ * should be enough. This is to avoid pagetable walk
+ * after the DDR is in self-refresh.
+ */
+#define MAX_TLB_LOCK_ENTRY 4
+
+/*  detailed DDR (lmi) possible states */
+enum ddr_low_power_state {
+	DDR_ON,
+	DDR_SR,
+	DDR_OFF
+};
+
+enum clocks_state {
+	CLOCKS_ON,
+	CLOCK_REDUCED,
+	CLOCKS_OFF /* clocks off also means power off */
+};
+
+struct sti_suspend_table {
+	unsigned long base_address;
+	long *enter;
+	unsigned long enter_size;
+	long *exit;
+	unsigned long exit_size;
+	struct list_head node;
+};
+
+/*
+ * struct sti_suspend_buffer_data is used by CPS
+ * entering code in assembly language.
+ * table_enter: virtual address of poke table used for entry
+ * table_exit: virtual address of poke table used for exit
+ * sti_buffer_code: virtual address of code running from cache locked buffer
+ * pokeloop: virtual address of pokeloop code copied to cache locked buffer
+ * sti_locking_code: virtual address of code that locks the buffer in cache
+ * sz: size of the code and data that needs to be locked in cache
+ * nr_tlb_lock: number of TLB entries to be locked in TLB lockdown (max 4)
+ * tlb_lock_addr[]: array containing virtual addresses whose translation is
+ * to be locked in TLB to avoid page table walk after DDR is in self refresh
+ */
+struct sti_suspend_buffer_data {
+	void *table_enter;
+	void *table_exit;
+	void *sti_buffer_code;
+	void *pokeloop;
+	void *sti_locking_code;
+	unsigned long sz;
+	unsigned int nr_tlb_lock;
+	unsigned int power_off;
+	unsigned int tlb_lock_addr[MAX_TLB_LOCK_ENTRY];
+};
+
+/*
+ * struct sti_platform_suspend is the singleton object representing the
+ * suspend framework
+ */
+struct sti_platform_suspend {
+	void __iomem *l2cachebase;
+	u32 l2waymask;
+	struct sti_hw_state_desc *hw_states;
+	int hw_state_nr;
+	int index;
+	struct platform_suspend_ops const ops;
+};
+
+/**
+ * struct sti_low_power_syscfg_info - low power entry fields for secure chip
+ * @ddr3_cfg_offset:	DDR3_0 Config Register offset in SYSCFG_CORE
+ * @ddr3_stat_offset:	DDRSS 0 Status Register offset in SYSCFG_CORE
+ */
+struct sti_low_power_syscfg_info {
+	int ddr3_cfg_offset;
+	int ddr3_stat_offset;
+};
+
+struct sti_ddr3_low_power_info {
+	struct sti_low_power_syscfg_info sysconf_info;
+	unsigned long sysconf_base;
+};
+
+/*
+ * struct sti_hw_state_desc is the structure representing the
+ * low power states. Currently two low power states are supported
+ * namely HPS and CPS. So suspend framework has 2 objects for the
+ * same.
+ */
+struct sti_hw_state_desc {
+	int target_state;
+	char desc[STI_SUSPEND_DESC_LEN];
+	enum ddr_low_power_state ddr_state;
+	enum clocks_state clock_state;
+	struct list_head state_tables;
+	unsigned char *cache_buffer;
+	struct sti_suspend_buffer_data buffer_data;
+
+	int (*setup)(struct sti_hw_state_desc *,
+		     unsigned long *,
+		     unsigned int,
+		     struct sti_ddr3_low_power_info *,
+		     bool);
+
+	int (*enter)(struct sti_hw_state_desc *);
+	int (*prepare)(struct sti_hw_state_desc *);
+	int (*dcps_enter)(struct sti_hw_state_desc *);
+	void *state_private_data;
+};
+
+/* Helper function */
+unsigned int sti_get_l2cc_way_size(void);
+
+/* declaration of the entry functions for HPS mode */
+int sti_hps_setup(struct sti_hw_state_desc *, unsigned long *, unsigned int,
+		  struct sti_ddr3_low_power_info *, bool);
+
+int sti_hps_enter(struct sti_hw_state_desc *);
+
+int sti_hps_prepare(struct sti_hw_state_desc *);
+
+/* declaration of the entry functions for CPS mode */
+int sti_cps_setup(struct sti_hw_state_desc *, unsigned long *, unsigned int,
+		  struct sti_ddr3_low_power_info *, bool);
+int sti_cps_enter(struct sti_hw_state_desc *);
+
+int sti_cps_prepare(struct sti_hw_state_desc *);
+
+int sti_cps_dcps_enter(struct sti_hw_state_desc *);
+
+/*
+ * If DCPS is not implemented as subtype of CPS and hence an independent state
+ * then the following declaration is for the DCPS state
+ */
+int sti_dcps_ddr_off_setup(struct sti_hw_state_desc *, unsigned long *,
+			   unsigned int,
+			   struct sti_ddr3_low_power_info *, bool);
+int sti_dcps_ddr_off_enter(struct sti_hw_state_desc *);
+
+#endif
Binary files a/arch/arm/mach-sti/pm/suspend.o and b/arch/arm/mach-sti/pm/suspend.o differ
diff -urNp a/arch/arm/mach-sti/pm/suspend_asm.S b/arch/arm/mach-sti/pm/suspend_asm.S
--- a/arch/arm/mach-sti/pm/suspend_asm.S	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/suspend_asm.S	2019-09-26 21:23:27.228619300 +0100
@@ -0,0 +1,273 @@
+/*
+ * Copyright (C) 2014  STMicroelectronics
+ * Author: Sudeep Biswas <sudeep.biswas@st.com>
+ *
+ * This file is subject to the terms and conditions of the GNU General Public
+ * License.  See the file "COPYING" in the main directory of this archive
+ * for more details.
+ *
+ */
+
+#include <linux/linkage.h>
+#include <asm/cp15.h>
+
+/* Important offsets in the sti_suspend_buffer_data structure */
+#define POKELOOP_CODE_ADD_OFFSET		0xc
+#define LOCKING_CODE_ADD_OFFSET			0x10
+#define POWER_OFF_OFFSET				0x1c
+#define TLB_LOCK_ENTRIES_ADD_OFFSET		0x20
+
+#define TLB_LOCKDOWN_ENTRY_A9_REG_P_BIT		0x1
+#define TLB_LOCKDOWN_A9_REG_NEXT_ENTRY		0x10000000
+
+#define	L2CC_CLEAN_INVALIDATE_WAY_REG_OFFSET	0x7fc
+#define L2CC_D_LOCKDOWN0_REG_OFFSET		0x900
+#define L2CC_I_LOCKDOWN0_REG_OFFSET		0x904
+
+/* L2CC cache line size is always fixed and it is 32 bytes */
+#define L2CC_LINE_SIZE_BYTES			32
+
+ENTRY(sti_suspend_exec)
+	push	{r4 - r11, lr}
+	ldr	r1, =sti_suspend	@r1 => &sti_suspend
+	ldr	r2, [r1], #4		@r2 => L2 va base, r1 => &way mask
+
+	ldr	r11, [r1]		@r11 => way mask
+	mov	r1, r2			@r1 => L2 base
+
+
+	add	r2, r0, #(LOCKING_CODE_ADD_OFFSET)
+
+	ldm     r2, {r4 - r6}	@r4 => sti_locking_code,r6 => nr_tlb_lock
+	add	r2, r0, #(TLB_LOCK_ENTRIES_ADD_OFFSET)	@r2 => &tlb_lock_addr[]
+
+	/* Invalidate MAIN TLB */
+	mov	r3, #0x0
+	mcr	p15, 0, r3, c8, c3, 0	@Main TLB & Micro TLB invalidated
+	dsb
+	isb
+
+	movs	r5, r6		@r5 = r6
+	beq	exit_raw	@if r6 == 0, no TLB entries to be locked, exit
+
+	/*
+	 * r3 will contain the reg value that locks the next pagetable walk
+	 * results on to the first lockable TLB entry. Incrementing
+	 * r3 by r7 will result in a value in r3 that will lock
+	 * the next pagetable walk reuslts on to the second lockable
+	 * TLB entry and so on. Maximum of four TLB lockdown
+	 * entries are possible
+	 */
+	mov	r3, #(TLB_LOCKDOWN_ENTRY_A9_REG_P_BIT)
+	ldr	r7, =(TLB_LOCKDOWN_A9_REG_NEXT_ENTRY)
+	mov	r10, #0x0
+
+tlb_lock_loop:
+	ldr	r8, [r2], #4	@r8=>next va whose va <-> pa to be locked in TLB
+	dsb
+
+	/*
+	 * Next TLB miss will trigger a page table walk and the resultant
+	 * mapping will be stored in the TLB lockable entry indicated  by r3
+	 */
+	mcr     p15, 0, r3, c10, c0, 0	@r3 => next TLB lockdown address
+	dsb
+	isb
+
+	/*
+	 * Force a dummy read from the va (contained in r8) so that page table
+	 * walk occurs and the resultant va<->pa mapping is locked into
+	 * the next TLB lockdown entry indicated by r3.
+	 * The page table walk will surely occur because TLB is invalidated
+	 * and after the invalidation, this is the first time when the va
+	 * is accessed
+	 */
+	ldr	r9, [r8]
+	dsb
+
+	/*
+	 * Reset TLB allocation behaviour, meaning the next TLB entry to be
+	 * allocated will be from the normal set associative area and NOT
+	 * from the TLB lockdown entries.
+	 * This step need to be done after all lockable entries are
+	 * taken care. This means only once, just outside the tlb_lock_loop.
+	 * But we still do it at the end of each iteration to be sure that
+	 * no stray page table walk happens which results in overwriting a
+	 * required va<->pa mapping corresponding to our vas stored in
+	 * tlb_lock_addr.
+	 */
+	mcr     p15, 0, r10, c10, c0, 0
+	dsb
+	isb
+
+	subs	r5, r5, #1	@decrement r5, if all required entries locked
+	beq	exit_raw	@exit, otherwise jump back to tlb_lock_loop
+
+	add	r3, r3, r7	@r3 => next TLB lockdown entry
+	b	tlb_lock_loop
+
+exit_raw:
+	mov	r6, r4
+
+	/*
+	 * Copy some important L2CC reg offsets in registers before jumping
+	 * to the sti_cps_lock_code, since sti_cps_lock_code cant do that, but
+	 * requires these values.
+	 * These offsets cant be generated using mov instruction & ldr
+	 * must be used. Note that we copy sti_cps_lock_code from
+	 * its assembled virtual address to the cache locked buffer before
+	 * execution.
+	 * Execution of sti_cps_lock_code will fail if we use ldr inside it
+	 * that loads values from literal tables. Note that we dont want to
+	 * copy the literal tables (assembler generated) along with
+	 * sti_cps_lock_code.
+	 * So we all together avoid any implicit usage of literal tables in the
+	 * sti_cps_lock_code code.
+	 */
+
+	ldr     r3, =(L2CC_CLEAN_INVALIDATE_WAY_REG_OFFSET)
+	ldr     r4, =(L2CC_D_LOCKDOWN0_REG_OFFSET)
+	ldr     r5, =(L2CC_I_LOCKDOWN0_REG_OFFSET)
+
+ THUMB( orr     r6, r6, #1 )
+	push {r1, r4, r5}
+	blx	r6
+	pop {r1, r4, r5}
+	mov	r11, #0x0
+	/*
+	 * Unlock all ways.
+	 */
+	str	r11, [r1, r4]
+	str	r11, [r1, r5]
+	pop	{r4 - r11, pc}
+ENDPROC(sti_suspend_exec)
+
+.balign		4
+	/*
+	 * runs the poke tables to low-power the SOC
+	 * Do not add ENDPROC since this is copied in
+	 * buffer and not called directly
+	 */
+ENTRY(sti_suspend_on_buffer)
+        mov     r0, r4          @ r0 = (table entry address)
+        mov     r6, lr          @ save lr on r6
+
+        blx     r7              @ call the poke loop to execute
+
+	tst	r2, #1			@ check poweroff
+1:      wfi
+	bne	1b
+
+        mov     r0, r5          @ r0 = (table exit address)
+        blx     r7              @ call the poke loop to execute
+                                @ the exit_table
+
+        mov     pc, r6          @ return on DRAM
+.balign 4
+ENTRY(sti_suspend_on_buffer_sz)
+	.long	. - sti_suspend_on_buffer
+
+/**
+ * sti_cps_lock_code runs from the cache lockable buffer
+ * The data sequence of the cache lockable buffer is:
+ * |pokeloop|pokedata_for_entry|pokedata_for_exit|sti_cps_on_buffer|
+ * cache line alignment padding|sti_cps_lock_code|
+ * sti_cps_lock_code locks the |pokeloop...|cache line alignment padding|
+ * part of the buffer to the L2 cache. Note that sti_cps_lock_code will
+ * not compete with the code that is been locked
+ * (though it lies in the same buffer) because of two reasons:
+ * (a) The whole relevant buffer i.e.
+ * |pokeloop..|sti_cps_lock_code| can be occupied in a single L2CC way and
+ * (b) sti_cps_lock_code code's physical address is higher than
+ * |pokeloop...|cache line alignment padding|, with the assurance that no
+ * code of sti_cps_lock_code can share any L2CC cache line with
+ * |pokeloop...|cache line alignment padding|. In fact the
+ * |cache line alignment padding| is there just to ensure this.
+ **/
+.balign		4
+ENTRY(sti_suspend_lock_code)
+	add	r2, r0, #(POKELOOP_CODE_ADD_OFFSET)
+
+	/*
+	 * r7 => buffer start address, r9 => total size of the code/data
+	 * starting from buffer start (stored inside r7) to be loaded &
+	 * locked in L2CC way 0
+	 */
+	ldm	r2, {r7 - r9}
+
+	str	r11, [r1, r3]	@load way mask to L2CC_CLEAN_INVALIDATE_WAY_REG
+op_not_complete:
+	ldr	r2, [r1, r3]	@read back L2CC_CLEAN_INVALIDATE_WAY_REG
+	cmp	r2, #0x0	@if 0 => All ways of  L2CC invalidated
+	bne	op_not_complete	@otherwise jump back to op_not_complete
+
+	/*
+	 * change the way mask so that it indicates that we are going to lock
+	 * all the ways of the L2CC except the way 0. For example in case of
+	 * 8 ways L2CC, the original mask value will be 0xff. But after
+	 * changing, it will contain 0xfe.
+	 */
+	sub	r3, r11, #0x1
+
+	/*
+	 * lock all ways except way 0 for data & instruction w.r.t. core0
+	 * access. Other AXI masters are not active at this moment, even if
+	 * the lock by all masters is supported.
+	 */
+	str	r3, [r1, r4]
+	str	r3, [r1, r5]
+
+	/*
+	 * r2 keep track of how many cache lines to be loaded and then after
+	 * locked in L2CC way 0
+	 */
+	mov	r2, #0x0
+preload:
+	/*
+	 * Force access of buffer cache line so that it is loaded in
+	 * L2CC way 0
+	 */
+	pld	[r7, r2]
+	add	r2, r2, #(L2CC_LINE_SIZE_BYTES)	@r2 added by cache line size
+	cmp	r2, r9	@compare r2 and r9, r9 contains total size to be loaded
+	bne	preload	@if not all code loaded, go back to load next cache line
+
+	/*
+	 * r3 indicates that all ways unlocked except way 0
+	 * which will be locked
+	 */
+	mov	r3, #0x1
+
+	/*
+	 * lock way 0 and unlock all other for data & instruction w.r.t. core0
+	 * access. Other AXI masters are not active at this moment, even if
+	 * lock by all masters is supported.
+	 */
+	str	r3, [r1, r4]
+	str	r3, [r1, r5]
+
+	ldm     r0, {r4 - r6}
+	ldr	r2, [r0, #(POWER_OFF_OFFSET)]
+
+ THUMB( orr     r6, r6, #1 )
+ THUMB( orr     r7, r7, #1 )
+	bx	r6	@ call the sti_cps_on_buffer
+			@ placed in the L2CC
+
+.balign 4
+ENTRY(sti_suspend_lock_code_sz)
+	.long	. - sti_suspend_lock_code
+
+/* sti_defrost_kernel is where cpu0 start executing after CPS wakeup */
+ENTRY(sti_defrost_kernel)
+	adr	r3, 1f		@r3 => Current PA
+	ldmia	r3, {r4, r8}	@r4 => Current VA, @r8 => VA of cpu_resume
+	sub	r4, r3, r4	@r4 => Diff of PA - VA
+	add	r8, r8, r4	@r8 => PA of cpu_resume
+
+	bx 	r8	@jump to kernel resume that restore the full ARM context
+ENDPROC(sti_defrost_kernel)
+.balign 4
+	.ltorg		@ask assembler to put the littab near to the above code
+1:	.long .			@this word contains the current VA
+	.long cpu_resume	@this word contains the VA of cpu_resume
Binary files a/arch/arm/mach-sti/pm/suspend_asm.o and b/arch/arm/mach-sti/pm/suspend_asm.o differ
diff -urNp a/arch/arm/mach-sti/pm/suspend_cps.c b/arch/arm/mach-sti/pm/suspend_cps.c
--- a/arch/arm/mach-sti/pm/suspend_cps.c	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/suspend_cps.c	2019-09-26 21:23:27.232619300 +0100
@@ -0,0 +1,567 @@
+/*
+ * -------------------------------------------------------------------------
+ * Copyright (C) 2014  STMicroelectronics
+ * Author: Francesco M. Virlinzi  <francesco.virlinzi@st.com>
+ *	   Sudeep Biswas	  <sudeep.biswas@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License V.2 ONLY.  See linux/COPYING for more information.
+ *
+ * ------------------------------------------------------------------------- */
+
+#include <asm/cacheflush.h>
+#include <asm-generic/sections.h>
+#include <asm/smp_scu.h>
+#include <asm/suspend.h>
+#include <linux/io.h>
+#include <linux/of_gpio.h>
+#include <linux/of_address.h>
+#include <linux/clk.h>
+#include <linux/power/st_lpm.h>
+#include <linux/power/st_lpm_def.h>
+
+#include "suspend.h"
+#include "suspend_internal.h"
+#include "poke_table.h"
+#include "synopsys_dwc_ddr32.h"
+#include "../smp.h"
+
+#define BAUDRATE_VAL_M1(bps, clk)  \
+((((bps * (1 << 14)) + (1 << 13)) / (clk / (1 << 6))))
+#define UART_BAUDRATE		115200
+#define UART_CONFIG_REG_OFFSET	0x0c
+#define UART_TIMEOUT_REG_OFFSET	0x1c
+#define UART_INT_REG_OFFSET	0x10
+#define SCU_CONFIG		0x04
+
+#define DTU_ADDRESS_WIDTH_VAL  ((0<<9) | (3<<6) | (1<<3) | (3<<0))
+#define DTU_CFG_VAL ((127<<16) | (1<<8) | (1<<7) | (63<<1) | (1<<0))
+
+enum cps_tag_mark {UNMARK, MARK};
+
+struct cps_private_data {
+	void __iomem *scu_virtualbase;
+	void __iomem *early_console_base;
+	unsigned long early_console_rate;
+	bool dcps_set;
+};
+
+struct cps_private_data cps_data;
+
+/* Define CPS specific poke tables */
+/* Below poke table is ddr low power operations before system enters CPS */
+static struct poke_operation sti_cps_ddr_lp_enter[] = {
+	UPDATE32(0, ~0x1, 0),
+};
+
+static struct poke_operation sti_cps_ddr_lp_ack[] = {
+	WHILE_NE32(0, 0x1, 0),
+};
+
+/* Below poke table is ddr controller operations before system enters CPS */
+static struct poke_operation sti_cps_ddr_enter[] = {
+	OR32(DDR_DTU_CFG, DDR_DTU_CFG_ENABLE),
+
+	/* Synopsys DDR32: in Self-Refresh=> */
+	POKE32(DDR_SCTL, DDR_SCTL_SLEEP),
+	WHILE_NE32(DDR_STAT, DDR_STAT_MASK, DDR_STAT_LOW_POWER),
+
+	/* PHY Low power state */
+	/* CK output disable */
+	UPDATE32(DDR_PHY_DSGCR, ~DDR_PHY_CKOE, 0),
+
+	/* ODT output disable */
+	UPDATE32(DDR_PHY_DSGCR, ~DDR_PHY_ODTOE, 0),
+
+	/* Disable AC ODTs, and drivers */
+	UPDATE32(DDR_PHY_ACIOCR, ~DDR_PHY_ACIOCR_ACOE, 0),
+	UPDATE32(DDR_PHY_ACIOCR, ~DDR_PHY_ACIOCR_ACODT, 0),
+	OR32(DDR_PHY_ACIOCR, DDR_PHY_ACIOCR_ACPDD),
+	OR32(DDR_PHY_ACIOCR, DDR_PHY_ACIOCR_CSPDD),
+
+	/* Disable clock ODT, and driver */
+	UPDATE32(DDR_PHY_ACIOCR, ~DDR_PHY_ACIOCR_CKODT, 0),
+	OR32(DDR_PHY_ACIOCR, DDR_PHY_ACIOCR_CKPDD),
+
+	/* Disable Data ODT, driver and receiver */
+	OR32(DDR_PHY_DXCCR, DDR_PHY_DXCCR_DXPDD),
+	OR32(DDR_PHY_DXCCR, DDR_PHY_DXCCR_DXPDR),
+	UPDATE32(DDR_PHY_DXCCR, ~DDR_PHY_DXCCR_DXODT, 0),
+};
+
+static struct poke_operation __cps_lmi_retention[] = {
+	/*
+	 * Enable retention mode gpio
+	 * Address and value set in sti_setup_lmi_retention_gpio.
+	 */
+	POKE32(0x0, 0x0),
+};
+
+static struct poke_operation __cps_enter_passive[] = {
+	/*
+	 * Send message 'ENTER_PASSIVE' (0x5)
+	 */
+	POKE32(0x0, LPM_MSG_ENTER_PASSIVE),
+};
+/* End defining poke tables */
+
+static struct sti_suspend_table sti_cps_tables[MAX_SUSPEND_TABLE_SIZE];
+
+/*
+ * sti_cps_marker writes/unwrites a signature and then a CPS wakeup jump
+ * address.
+ * After CPS wakeup PBL checks this signature and then jumps
+ * cpu0 to the CPS wakeup jump address.
+ * In this case CPS wakeup jump address is the physical address of the function
+ * sti_defrost_kernel.
+ */
+static void sti_cps_marker(enum cps_tag_mark enable)
+{
+	int cps_tag_offset;
+	unsigned long jmp_addr = __pa(sti_defrost_kernel);
+
+	const long linux_marker_on[] = {
+			0x7a6f7266,	/* froz */
+			0x6c5f6e65,	/* en_l */
+			0x78756e69 };	/* inux */
+
+	const long linux_marker_off[] = {-2, -2, -2};
+
+	cps_tag_offset = st_lpm_get_dmem_offset(ST_SBC_DMEM_CPS_TAG);
+
+	if (enable) {
+		st_lpm_write_dmem((unsigned char *)linux_marker_on,
+				  ARRAY_SIZE(linux_marker_on) * sizeof(long),
+				  cps_tag_offset);
+		/*
+		 * After writing the CPS signature write the jump address
+		 * in SBC DMEM.
+		 */
+		st_lpm_write_dmem((unsigned char *)&jmp_addr, sizeof(long),
+				  cps_tag_offset +
+				  ARRAY_SIZE(linux_marker_on) * sizeof(long));
+	} else {
+		st_lpm_write_dmem((unsigned char *)linux_marker_off,
+				  ARRAY_SIZE(linux_marker_off) * sizeof(long),
+				  cps_tag_offset);
+	}
+}
+
+static void sti_cps_init_early_console(void __iomem *asc_base,
+				       unsigned long asc_clk)
+{
+	writel(0x1189 & ~0x80, asc_base + UART_CONFIG_REG_OFFSET);/* ctrl */
+	writel(BAUDRATE_VAL_M1(UART_BAUDRATE, asc_clk), asc_base); /* baud */
+	writel(20, asc_base + UART_TIMEOUT_REG_OFFSET);		/* timeout */
+	writel(1, asc_base + UART_INT_REG_OFFSET);		/* int */
+	writel(0x1189, asc_base + UART_CONFIG_REG_OFFSET);	/* ctrl */
+	pr_info("\nsti pm cps: Early console ready\n");
+}
+
+#ifdef CONFIG_SMP
+static void sti_cps_write_pen_release(int val)
+{
+	pen_release = val;
+	smp_wmb(); /* pen_release should be written */
+	__cpuc_flush_dcache_area((void *)&pen_release, sizeof(pen_release));
+	outer_clean_range(__pa(&pen_release), __pa(&pen_release + 1));
+}
+#else
+static inline void sti_cps_write_pen_release(int val) {};
+#endif
+
+int sti_cps_dcps_enter(struct sti_hw_state_desc *state)
+{
+	cps_data.dcps_set = true;
+	return sti_cps_enter(state);
+}
+
+int sti_cps_enter(struct sti_hw_state_desc *state)
+{
+	unsigned long flag;
+	int offset, offset_dtu;
+	int count;
+	unsigned char read_buf[32];
+	int ret;
+
+	struct cps_private_data *cpsdata = ((struct cps_private_data *)state->
+						state_private_data);
+
+	if (state == NULL)
+		return -EINVAL;
+
+	offset = st_lpm_get_dmem_offset(ST_SBC_DMEM_PEN_HOLDING_VAR);
+	offset_dtu = st_lpm_get_dmem_offset(ST_SBC_DMEM_DTU);
+
+	if (!(offset_dtu < 0 || offset < 0
+		|| offset < offset_dtu)) {
+		st_lpm_read_dmem(read_buf, offset - offset_dtu,
+					offset_dtu);
+		count = 0;
+		while (count < (offset - offset_dtu))
+			if (read_buf[count++])
+				break;
+
+		if (count == offset - offset_dtu) {
+			pr_err("CPS entry failed: DTU buffers not assigned\n");
+			return -EINVAL;
+		}
+	}
+
+	/* First check DCPS */
+	if (cpsdata->dcps_set) {
+		/* Flush pending data in dcache */
+		flush_cache_all();
+		pr_info("sti pm cps: System entering DCPS....\n");
+
+		local_irq_disable();
+
+		/* Configure SBC H/w Watchdog to detect SBC F/w hangs */
+		st_lpm_configure_wdt(SBC_FW_HANG_DETECT_TIME_MSEC, 0);
+
+		/* Call to enter DCPS */
+		sti_suspend_exec((long)(&state->buffer_data));
+		/* Control should _NOT_ reach here */
+		BUG();
+	}
+
+	/* Go on from here with CPS */
+	/*
+	 * Initialize the pen to be checked on resume by core 1
+	 */
+	if (num_present_cpus() > 1)
+		sti_cps_write_pen_release(-1);
+
+	local_irq_save(flag);
+	/*
+	 * Write the Linux Frozen Marker in the Main Memory
+	 */
+	sti_cps_marker(MARK);
+
+	/*
+	 * Flush __all__ the caches to avoid some pending write operation
+	 * on the memory is still in D-cache...
+	 */
+	flush_cache_all();
+
+	/* Configure SBC H/w Watchdog to detect SBC F/w hangs */
+	ret = st_lpm_configure_wdt(SBC_FW_HANG_DETECT_TIME_MSEC, 0);
+	if (ret)
+		pr_err("sti pm cps: SBC-WDT setup failed, CPS without recovery\n");
+
+	pr_info("sti pm cps: CPU Going to be Frozen\n");
+
+	/*
+	 * Call the kernel suspend framework API
+	 * After the framework finishes, sti_cps_exec_on_eram
+	 * is called which takes the system to CPS.
+	 * Once a wakeup is received, system is restored and
+	 * execution is started just after this call, as if
+	 * nothing has happened
+	 */
+	cpu_suspend((long)(&state->buffer_data), sti_suspend_exec);
+
+	/* SYSTEM HAS WOKENUP FROM CPS */
+
+	/* First check whether we are running on the correct cpu */
+	if (smp_processor_id())
+		pr_err("sti pm cps: Error: Running on the wrong CPU\n");
+
+	/* Resume the outer cache */
+	outer_resume();
+
+	/*
+	 * remove the marker in memory also if the bootloader already did that
+	 */
+	sti_cps_marker(UNMARK);
+
+	/*
+	 * Here an __early__ console initialization to avoid
+	 * blocking prints.
+	 * This is required if the kernel boots with 'no_console_suspend'
+	 */
+	if (cpsdata->early_console_rate &&
+	    cpsdata->early_console_base)
+		sti_cps_init_early_console(cpsdata->early_console_base,
+					   cpsdata->early_console_rate);
+
+	pr_info("sti pm cps: System woken up from CPS\n");
+
+	/*
+	 * the early_trap_init isn't required because the CPU is already
+	 * running on the correct pgtable where the vectors_page is already
+	 * mapped
+	 */
+	local_irq_restore(flag);
+
+	/*
+	 * Enable the SCU if required
+	 */
+	if (num_present_cpus() > 1) {
+		scu_enable(cpsdata->scu_virtualbase);
+		if (offset >= 0) {
+			unsigned long pa = virt_to_phys(sti_secondary_startup);
+
+			st_lpm_write_dmem((unsigned char *)&pa, 4, offset);
+		}
+	}
+
+	return 0;
+}
+
+int sti_cps_setup(struct sti_hw_state_desc *state,
+		  unsigned long *ddr_pctl_addr,
+		  unsigned int no_pctl,
+		  struct sti_ddr3_low_power_info *ddr_sys_conf,
+		  bool ddr_sr_ack_pctl)
+
+{
+	struct device_node *np, *np_ref;
+	const char *name;
+	int gpio_pin, ret, reg, size_reg, lmi_ret_gpio_offset;
+	unsigned int gpioa, port, port_size;
+	int index = 0, i;
+	struct of_phandle_args args;
+	struct clk *clk;
+	void __iomem *gpio_mem;
+	void __iomem *lpm_mem;
+	unsigned int *tlb_va = state->buffer_data.tlb_lock_addr;
+	unsigned int *nrtlb = &(state->buffer_data.nr_tlb_lock);
+	unsigned int cfg_offset, stat_offset;
+
+	*nrtlb = 0;
+
+	if (state->ddr_state == DDR_ON || state->ddr_state == DDR_OFF)
+		return -EINVAL;
+
+	/*
+	 * Now patching the lmi retention data tbl and SBC mailbox cmd tbl.
+	 * This cmd switches off the core chip, except the SBC itself
+	 */
+	np = of_find_compatible_node(NULL, NULL, "st,lpm");
+	if (IS_ERR_OR_NULL(np))
+		return -ENODEV;
+
+	gpio_pin = of_get_named_gpio(np, "st,lmi-ret-gpio", 0);
+	if (gpio_pin < 0) {
+		of_node_put(np);
+		return -ENODEV;
+	}
+
+	ret = gpio_request(gpio_pin, "lmi-retention");
+	if (ret != 0) {
+		of_node_put(np);
+		return -ENODEV;
+	}
+
+	gpio_direction_output(gpio_pin, 1);
+	ret = of_parse_phandle_with_args(np,
+					 "st,lmi-ret-gpio",
+					 "#gpio-cells",
+					 0,
+					 &args);
+	if (ret != 0) {
+		of_node_put(np);
+		gpio_free(gpio_pin);
+		return -ENODEV;
+	}
+
+	np_ref = args.np;
+	name = of_get_property(np_ref,
+			       "st,bank-name",
+			       NULL);
+
+	of_node_put(np_ref);
+
+	if (!name) {
+		of_node_put(np);
+		gpio_free(gpio_pin);
+		return -ENODEV;
+	}
+
+	ret = kstrtol(name + 3, 0, (long *)&port);
+
+	if (ret != 0) {
+		of_node_put(np);
+		gpio_free(gpio_pin);
+		return ret;
+	}
+
+	np_ref = of_find_node_by_name(NULL,
+				      "pin-controller-sbc");
+
+	if (IS_ERR_OR_NULL(np_ref) ||
+	    of_property_read_u32_index(np_ref,
+				       "ranges",
+				       1,
+				       &gpioa) ||
+	    of_property_read_u32_index(np_ref,
+				       "ranges",
+				       2,
+				       &port_size)) {
+		of_node_put(np);
+		if (!IS_ERR_OR_NULL(np_ref))
+			of_node_put(np_ref);
+
+		gpio_free(gpio_pin);
+		return -ENODEV;
+	}
+
+	of_node_put(np_ref);
+
+	lmi_ret_gpio_offset = port * STI_GPIO_REGS_MAP_SZ;
+	if ((lmi_ret_gpio_offset + STI_GPIO_REGS_MAP_SZ) > port_size) {
+		of_node_put(np);
+		gpio_free(gpio_pin);
+		return -EINVAL;
+	}
+
+	gpioa += lmi_ret_gpio_offset;
+
+	gpio_mem = ioremap_nocache(gpioa, STI_GPIO_REGS_MAP_SZ);
+	if (!gpio_mem) {
+		of_node_put(np);
+		gpio_free(gpio_pin);
+		return -ENODEV;
+	}
+
+	*(((long *)__cps_lmi_retention) + 1) = (unsigned int)
+					(STI_GPIO_REG_CLR_POUT + gpio_mem);
+
+	/* Need to place the GPIO VA->PA mapping to the TLB */
+	tlb_va[(*nrtlb)++] = (unsigned int)(STI_GPIO_REG_CLR_POUT + gpio_mem);
+
+	*(((long *)__cps_lmi_retention) + 2) = 1 << args.args[0];
+
+	lpm_mem = of_iomap(np, 1);
+	if (!lpm_mem) {
+		of_node_put(np);
+		gpio_free(gpio_pin);
+		iounmap(gpio_mem);
+		return -ENODEV;
+	}
+
+	*(((long *)__cps_enter_passive) + 1) = (unsigned int) (lpm_mem + 0x4);
+
+	/* Need to place the GPIO VA->PA mapping to the TLB */
+	tlb_va[(*nrtlb)++] = (unsigned int) (lpm_mem + 0x4);
+
+	of_node_put(np);
+
+	for (i = 0; i < no_pctl; i++) {
+		struct sti_ddr3_low_power_info *temp = &ddr_sys_conf[i];
+
+		if (!temp->sysconf_base)
+			goto err_1;
+		/*
+		 * Security expects one trigger for all the LMIs,
+		 * so done currently only for LMI0, but for new
+		 * SoCs (stih419 and beyond), trigger need to come from all LMIs
+		 */
+		if (ddr_sr_ack_pctl || i == 0) {
+			cfg_offset = temp->sysconf_info.ddr3_cfg_offset;
+			stat_offset = temp->sysconf_info.ddr3_stat_offset;
+
+			populate_suspend_table_entry(&sti_cps_tables[index++],
+					     (long *)sti_cps_ddr_lp_enter,
+					     NULL,
+					     sizeof(sti_cps_ddr_lp_enter),
+					     0,
+					     temp->sysconf_base + cfg_offset);
+
+			populate_suspend_table_entry(&sti_cps_tables[index++],
+					     (long *)sti_cps_ddr_lp_ack,
+					     NULL,
+					     sizeof(sti_cps_ddr_lp_ack),
+					     0,
+					     temp->sysconf_base + stat_offset);
+		}
+		populate_suspend_table_entry(&sti_cps_tables[index++],
+					     (long *)sti_cps_ddr_enter,
+					     NULL,
+					     sizeof(sti_cps_ddr_enter),
+					     0,
+					     ddr_pctl_addr[i]);
+		if (i == 0 && !ddr_sr_ack_pctl)
+			continue;
+
+		if ((*nrtlb) >= MAX_TLB_LOCK_ENTRY)
+			goto err_1;
+
+		tlb_va[(*nrtlb)++] = ddr_pctl_addr[i];
+	}
+
+	populate_suspend_table_entry(&sti_cps_tables[index++],
+				     (long *)__cps_lmi_retention,
+				     NULL,
+				     sizeof(__cps_lmi_retention),
+				     0,
+				     0);
+
+	populate_suspend_table_entry(&sti_cps_tables[index++],
+				     (long *)__cps_enter_passive,
+				     NULL,
+				     sizeof(__cps_enter_passive),
+				     0,
+				     0);
+
+	INIT_LIST_HEAD(&state->state_tables);
+	for (i = 0; i < index; ++i)
+		list_add_tail(&sti_cps_tables[i].node,
+			      &state->state_tables);
+
+	state->buffer_data.power_off = 1;
+
+	/* Read the SCU base and map */
+	np = of_find_compatible_node(NULL, NULL, "arm,cortex-a9-scu");
+	if (IS_ERR_OR_NULL(np)) {
+		pr_err("sti pm cps: SCU entry not found in DT\n");
+		goto err_1;
+	}
+
+	cps_data.scu_virtualbase = of_iomap(np, 0);
+	if (!cps_data.scu_virtualbase) {
+		pr_err("sti pm cps: SCU base remap failed\n");
+		of_node_put(np);
+		goto err_1;
+	}
+	of_node_put(np);
+
+	/*
+	 * Read the console UART physical base address
+	 * and the rate of the clock
+	 */
+	if (of_chosen) {
+		const void *prop = of_get_property(of_chosen,
+						   "linux,stdout-path",
+						   NULL);
+		if (prop)
+			np = of_find_node_by_path(prop);
+
+		if  (!IS_ERR_OR_NULL(np)) {
+			if (!of_property_read_u32_index(np, "reg", 0, &reg))
+				if (!of_property_read_u32_index(np, "reg",
+								1,
+								&size_reg))
+					cps_data.early_console_base =
+						ioremap_nocache(reg, size_reg);
+
+			clk = of_clk_get(np, 0);
+			if (clk)
+				cps_data.early_console_rate = clk_get_rate(clk);
+
+			of_node_put(np);
+		}
+	}
+
+	cps_data.dcps_set = false;
+	state->state_private_data = &cps_data;
+
+	return 0;
+err_1:
+	gpio_free(gpio_pin);
+	iounmap(gpio_mem);
+	iounmap(lpm_mem);
+
+	return -ENODEV;
+}
Binary files a/arch/arm/mach-sti/pm/suspend_cps.o and b/arch/arm/mach-sti/pm/suspend_cps.o differ
diff -urNp a/arch/arm/mach-sti/pm/suspend_dcps_ddr_off.c b/arch/arm/mach-sti/pm/suspend_dcps_ddr_off.c
--- a/arch/arm/mach-sti/pm/suspend_dcps_ddr_off.c	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/suspend_dcps_ddr_off.c	2019-09-26 21:23:27.232619300 +0100
@@ -0,0 +1,186 @@
+/*
+ * -------------------------------------------------------------------------
+ * Copyright (C) 2015  STMicroelectronics
+ * Author: Sudeep Biswas <sudeep.biswas@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License V.2 ONLY.  See linux/COPYING for more information.
+ *
+ * ------------------------------------------------------------------------- */
+
+#include <asm/cacheflush.h>
+#include <linux/io.h>
+#include <linux/of_gpio.h>
+#include <linux/of_address.h>
+#include <linux/power/st_lpm_def.h>
+#include <linux/power/st_lpm.h>
+
+#include "suspend.h"
+#include "suspend_internal.h"
+#include "poke_table.h"
+
+#define STI_PIO_PER_BLOCK 8
+
+static struct poke_operation __dcps_lmi_off[] = {
+	POKE32(0x0, 0x0),
+};
+
+static struct poke_operation __dcps_enter_passive[] = {
+	/*
+	 * Send message 'ENTER_PASSIVE' (0x5)
+	 */
+	POKE32(0x0, LPM_MSG_ENTER_PASSIVE),
+};
+
+static struct sti_suspend_table sti_dcps_tables[MAX_SUSPEND_TABLE_SIZE];
+
+int sti_dcps_ddr_off_enter(struct sti_hw_state_desc *state)
+{
+	/* Flush pending data in dcache */
+	flush_cache_all();
+	pr_info("sti pm dcps: System entering DCPS....\n");
+
+	local_irq_disable();
+
+	/* Configure SBC H/w Watchdog to detect SBC F/w hangs */
+	st_lpm_configure_wdt(SBC_FW_HANG_DETECT_TIME_MSEC, 0);
+
+	/* Call to enter DCPS */
+	sti_suspend_exec((long)(&state->buffer_data));
+	/* Control should _NOT_ reach here */
+	BUG();
+}
+
+int sti_dcps_ddr_off_setup(struct sti_hw_state_desc *state,
+			   unsigned long *ddr_pctl_addr,
+			   unsigned int no_pctl,
+			   struct sti_ddr3_low_power_info *ddr_sys_conf,
+			   bool unused)
+{
+	struct device_node *np;
+	int gpio_pin, ret, poweroff_gpio_offset;
+	unsigned int gpioa, port, port_size;
+	int index = 0, i;
+	void __iomem *gpio_mem;
+	void __iomem *lpm_mem;
+	unsigned int *tlb_va = state->buffer_data.tlb_lock_addr;
+	unsigned int *nrtlb = &(state->buffer_data.nr_tlb_lock);
+
+
+	*nrtlb = 0;
+
+	if (state->ddr_state == DDR_ON || state->ddr_state == DDR_SR)
+		return -EINVAL;
+
+	np = of_find_node_by_name(NULL, "ddr-pctl-controller");
+	if (IS_ERR_OR_NULL(np))
+		return -ENODEV;
+
+	gpio_pin = of_get_named_gpio(np, "st,ddr-poweroff-gpio", 0);
+	if (!gpio_is_valid(gpio_pin)) {
+		of_node_put(np);
+		return -EINVAL;
+	}
+
+	ret = gpio_request(gpio_pin, "ddr-poweroff");
+	if (ret != 0) {
+		of_node_put(np);
+		return ret;
+	}
+
+	gpio_direction_output(gpio_pin, 1);
+
+	of_node_put(np);
+
+	port = gpio_pin / STI_PIO_PER_BLOCK;
+
+	np = of_find_node_by_name(NULL,
+				  "pin-controller-sbc");
+	if (IS_ERR_OR_NULL(np) ||
+	    of_property_read_u32_index(np,
+				       "ranges",
+				       1,
+				       &gpioa) ||
+	    of_property_read_u32_index(np,
+				       "ranges",
+				       2,
+				       &port_size)) {
+		if (!IS_ERR_OR_NULL(np))
+			of_node_put(np);
+
+		gpio_free(gpio_pin);
+		return -ENODEV;
+	}
+
+	of_node_put(np);
+
+	poweroff_gpio_offset = port * STI_GPIO_REGS_MAP_SZ;
+	if ((poweroff_gpio_offset + STI_GPIO_REGS_MAP_SZ) > port_size) {
+		gpio_free(gpio_pin);
+		return -EINVAL;
+	}
+
+	gpioa += poweroff_gpio_offset;
+
+	gpio_mem = ioremap_nocache(gpioa, STI_GPIO_REGS_MAP_SZ);
+
+	if (!gpio_mem) {
+		gpio_free(gpio_pin);
+		return -ENOMEM;
+	}
+
+	*(((long *)__dcps_lmi_off) + 1) = (unsigned int)
+					(STI_GPIO_REG_CLR_POUT + gpio_mem);
+
+	/* Need to place the GPIO VA->PA mapping to the TLB */
+	tlb_va[(*nrtlb)++] = (unsigned int)(STI_GPIO_REG_CLR_POUT + gpio_mem);
+
+	*(((long *)__dcps_lmi_off) + 2) = 1 << (gpio_pin % STI_PIO_PER_BLOCK);
+
+	np = of_find_compatible_node(NULL, NULL, "st,lpm");
+	if (IS_ERR_OR_NULL(np)) {
+		gpio_free(gpio_pin);
+		iounmap(gpio_mem);
+		return -ENODEV;
+	}
+
+	lpm_mem = of_iomap(np, 1);
+	if (!lpm_mem) {
+		of_node_put(np);
+		gpio_free(gpio_pin);
+		iounmap(gpio_mem);
+		return -ENOMEM;
+	}
+
+	*(((long *)__dcps_enter_passive) + 1) = (unsigned int) (lpm_mem + 0x4);
+
+	/* Need to place the lpm VA->PA mapping to the TLB */
+	tlb_va[(*nrtlb)++] = (unsigned int) (lpm_mem + 0x4);
+
+	of_node_put(np);
+
+	/* Below poke will switch off the LMI power */
+	populate_suspend_table_entry(&sti_dcps_tables[index++],
+				     (long *)__dcps_lmi_off,
+				     NULL,
+				     sizeof(__dcps_lmi_off),
+				     0,
+				     0);
+
+	/* Below poke will ask LPM F/w to switch off the host power */
+	populate_suspend_table_entry(&sti_dcps_tables[index++],
+				     (long *)__dcps_enter_passive,
+				     NULL,
+				     sizeof(__dcps_enter_passive),
+				     0,
+				     0);
+
+	INIT_LIST_HEAD(&state->state_tables);
+	for (i = 0; i < index; ++i)
+		list_add_tail(&sti_dcps_tables[i].node,
+			      &state->state_tables);
+
+	state->buffer_data.power_off = 1;
+
+	return 0;
+}
Binary files a/arch/arm/mach-sti/pm/suspend_dcps_ddr_off.o and b/arch/arm/mach-sti/pm/suspend_dcps_ddr_off.o differ
diff -urNp a/arch/arm/mach-sti/pm/suspend_hps.c b/arch/arm/mach-sti/pm/suspend_hps.c
--- a/arch/arm/mach-sti/pm/suspend_hps.c	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/suspend_hps.c	2019-09-26 21:23:27.232619300 +0100
@@ -0,0 +1,529 @@
+ /* -------------------------------------------------------------------------
+ * Copyright (C) 2014  STMicroelectronics
+ * Author: Francesco M. Virlinzi  <francesco.virlinzi@st.com>
+ *	   Sudeep Biswas	  <sudeep.biswas@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License V.2 ONLY.  See linux/COPYING for more information.
+ *
+ * ------------------------------------------------------------------------- */
+
+#include <asm/idmap.h>
+#include <asm/cacheflush.h>
+#include <asm/tlbflush.h>
+#include <asm-generic/sections.h>
+#include <linux/io.h>
+#include <linux/of_address.h>
+#include <linux/irq.h>
+#include <linux/of.h>
+#include <linux/irqchip/arm-gic.h>
+
+#include "suspend.h"
+#include "suspend_interface.h"
+#include "suspend_internal.h"
+#include "poke_table.h"
+#include "synopsys_dwc_ddr32.h"
+
+#define CLKA_PLL_CFG(pll_nr, cfg_nr)	((pll_nr) * 0xc + (cfg_nr) * 0x4)
+#define CLKA_PLL_LOCK_REG(pll_nr)	CLKA_PLL_CFG(pll_nr, 1)
+#define CLKA_PLL_LOCK_STATUS		BIT(31)
+#define CLKA_POWER_CFG			(0x18)
+#define CLKA_SWITCH_CFG(x)		(0x1c + (x) * 0x4)
+#define CLKA_A1_DDR_CLK_ID		5
+
+#define CLKA_FLXGEN_CFG(x)		(0x18 + (x) * 0x4)
+#define CLKA_FLXGEN_PLL_CFG		(0x2a0)
+
+#define STID127_A9_CLK_SELECTION	(0x0)
+#define STID127_A9_PLL_POWER_DOWN	(0x0)
+#define STID127_A9_PLL_LOCK_STATUS	(0x98)
+
+static DEFINE_MUTEX(hps_notify_mutex);
+static LIST_HEAD(hps_notify_list);
+
+/*
+ * gic_iomem_interface	Reg base VA for the CPU interface part of GIC
+ * gic_iomem_dist	Reg base VA for the Distributor part of GIC
+ * eram_base		Physical base address of eram_1
+ */
+struct hps_private_data {
+	void __iomem *gic_iomem_interface;
+	void __iomem *gic_iomem_dist;
+	unsigned int eram_base;
+};
+
+static struct hps_private_data hps_data;
+
+static struct sti_suspend_table sti_hps_tables[MAX_SUSPEND_TABLE_SIZE];
+
+/* Define HPS specific poke tables */
+/* Below poke table is ddr controller operations before system enters HPS */
+static struct poke_operation sti_hps_ddr_enter[] = {
+	/* synopsys_ddr32_in_self_refresh=> */
+
+	/*
+	 * Set the register to enter low power from access state
+	 * (based on paraghaph. 7.1.4)
+	 */
+	POKE32(DDR_SCTL, DDR_SCTL_SLEEP),
+	WHILE_NE32(DDR_STAT, DDR_STAT_MASK, DDR_STAT_LOW_POWER),
+
+	/* PHY Low power state */
+	/* CK output disable */
+	UPDATE32(DDR_PHY_DSGCR, ~DDR_PHY_CKOE, 0),
+
+	/* ODT output disable */
+	UPDATE32(DDR_PHY_DSGCR, ~DDR_PHY_ODTOE, 0),
+
+	/* Disable AC ODTs, and drivers */
+	UPDATE32(DDR_PHY_ACIOCR, ~DDR_PHY_ACIOCR_ACOE, 0),
+	UPDATE32(DDR_PHY_ACIOCR, ~DDR_PHY_ACIOCR_ACODT, 0),
+	OR32(DDR_PHY_ACIOCR, DDR_PHY_ACIOCR_ACPDD),
+	OR32(DDR_PHY_ACIOCR, DDR_PHY_ACIOCR_CSPDD),
+
+	/* Disable clock ODT, and driver */
+	UPDATE32(DDR_PHY_ACIOCR, ~DDR_PHY_ACIOCR_CKODT, 0),
+	OR32(DDR_PHY_ACIOCR, DDR_PHY_ACIOCR_CKPDD),
+
+	/* Disable Data ODT, driver and receiver */
+	OR32(DDR_PHY_DXCCR, DDR_PHY_DXCCR_DXPDD),
+	OR32(DDR_PHY_DXCCR, DDR_PHY_DXCCR_DXPDR),
+	UPDATE32(DDR_PHY_DXCCR, ~DDR_PHY_DXCCR_DXODT, 0),
+
+	/* synopsys_ddr32_phy_standby_enter=> */
+	OR32(DDR_PHY_PLLCR, DDR_PHY_PLLCR_PLLPD), /* DDR_Phy Pll in reset */
+};
+
+/* Below poke table is ddr controller operations after system exits HPS */
+static struct poke_operation sti_hps_ddr_exit[] = {
+	/*
+	 * Synopsys DDR Phy: moving out Standby
+	 * (synopsys_ddr32_phy_standby_exit)=>
+	 */
+	/* DDR_Phy Pll out of reset */
+	UPDATE32(DDR_PHY_PLLCR, ~DDR_PHY_PLLCR_PLLPD, 0),
+	OR32(DDR_PHY_PIR, DDR_PHY_PIR_INIT | DDR_PHY_PIR_PLLINIT),
+
+	/* Waiting for PLLs to be locked */
+	WHILE_NE32(DDR_PHY_PGSR0, DDR_PHY_PLLREADY, DDR_PHY_PLLREADY),
+
+	/* UNDO PHY Low power state */
+	/* CK output enable */
+	OR32(DDR_PHY_DSGCR, DDR_PHY_CKOE),
+
+	/* ODT output enable */
+	OR32(DDR_PHY_DSGCR, DDR_PHY_ODTOE),
+
+	/* Enable AC ODTs, and drivers */
+	OR32(DDR_PHY_ACIOCR, DDR_PHY_ACIOCR_ACOE),
+	OR32(DDR_PHY_ACIOCR, DDR_PHY_ACIOCR_ACODT),
+	UPDATE32(DDR_PHY_ACIOCR, ~DDR_PHY_ACIOCR_ACPDD, 0),
+	UPDATE32(DDR_PHY_ACIOCR, ~DDR_PHY_ACIOCR_CSPDD, 0),
+
+	/* Enable clock ODT, and driver */
+	OR32(DDR_PHY_ACIOCR, DDR_PHY_ACIOCR_CKODT),
+	UPDATE32(DDR_PHY_ACIOCR, ~DDR_PHY_ACIOCR_CKPDD, 0),
+
+	/* Enable Data ODT, driver and receiver */
+	UPDATE32(DDR_PHY_DXCCR, ~DDR_PHY_DXCCR_DXPDD, 0),
+	UPDATE32(DDR_PHY_DXCCR, ~DDR_PHY_DXCCR_DXPDR, 0),
+	OR32(DDR_PHY_DXCCR, DDR_PHY_DXCCR_DXODT),
+
+	/*
+	 * Disables the DDR selfrefresh mode
+	 * (synopsys_ddr32_out_of_self_refresh)=>
+	 */
+	/* From low power to access state (based on paraghaph 7.1.3) */
+	POKE32(DDR_SCTL, DDR_SCTL_WAKEUP),
+	WHILE_NE32(DDR_STAT, DDR_STAT_MASK, DDR_STAT_ACCESS),
+	POKE32(DDR_SCTL, DDR_SCTL_CFG),
+	WHILE_NE32(DDR_STAT, DDR_STAT_MASK, DDR_STAT_CONFIG),
+	POKE32(DDR_SCTL, DDR_SCTL_GO),
+	WHILE_NE32(DDR_STAT, DDR_STAT_MASK, DDR_STAT_ACCESS),
+};
+
+static  struct poke_operation stid127_hps_ddr_pll_enter[] = {
+	/* FIXED
+	 * FIXME: the A1_DDR_CLK_ID could be turned-off (like STiG125) but
+	 * in STiD127 it stuck the system. So it is better and safer to
+	 * keep it on during the suspend phase. It will be fixed later (not
+	 * mandatory).
+	 * Issue : The moment we switch DDR clk to OSC(below line), system hangs
+	 */
+	UPDATE32(CLKA_SWITCH_CFG(0), ~(3 << (CLKA_A1_DDR_CLK_ID * 2)),
+		 0 << (CLKA_A1_DDR_CLK_ID * 2)),
+	OR32(CLKA_POWER_CFG, 0x1),
+};
+
+static  struct poke_operation stid127_hps_ddr_pll_exit[] = {
+	/* turn-on A1.PLLs */
+	POKE32(CLKA_POWER_CFG, 0x0),
+	/* Wait A1.PLLs are locked */
+	WHILE_NE32(CLKA_PLL_LOCK_REG(0), CLKA_PLL_LOCK_STATUS,
+		   CLKA_PLL_LOCK_STATUS),
+
+	UPDATE32(CLKA_SWITCH_CFG(0), ~(3 << (CLKA_A1_DDR_CLK_ID * 2)),
+		 1 << (CLKA_A1_DDR_CLK_ID * 2)),
+};
+
+static struct poke_operation stid127_hps_a9_clk_enter[] = {
+	/* bypass and disable the A9.PLL */
+	OR32(STID127_A9_CLK_SELECTION, 1 << 2),
+	OR32(STID127_A9_PLL_POWER_DOWN, 1),
+};
+
+static struct poke_operation stid127_hps_a9_clk_exit[] = {
+	/* enable, wait and don't bypass the A9.PLL */
+	UPDATE32(STID127_A9_PLL_POWER_DOWN, ~1, 0),
+	WHILE_NE32(STID127_A9_PLL_LOCK_STATUS, 1, 1),
+	UPDATE32(STID127_A9_CLK_SELECTION, ~(1 << 2), 0),
+};
+
+/*
+ * This will read the interrupt number that woken up the
+ * system from HPS. We must write EOI as we read it.
+ * This can be replaced by reading the irq number from
+ * gic global register. In that case, we dont need to write
+ * eoi. Interrupt will be anyway handled by the driver ISR once
+ * we enable the irq bit of cpu0. This will happen before
+ * enabling other cpus.
+ */
+static int sti_get_wake_irq(void *gic_addr)
+{
+	int irq = 0;
+	struct irq_data *d;
+
+	irq = readl(gic_addr + GIC_CPU_INTACK);
+	d = irq_get_irq_data(irq);
+	writel(d->hwirq, gic_addr + GIC_CPU_EOI);
+
+	return irq;
+}
+
+int sti_chk_pend(int wkirq)
+{
+	struct sti_hps_notify *handler;
+
+	list_for_each_entry(handler, &hps_notify_list, list)
+		if (handler->irq == wkirq)
+			return handler->notify();
+
+	/*
+	 * -1 will indicate the caller to check any possible other
+	 * wakeup interrupt handlers. This is because for the current
+	 * wake up interrupt no handler is registered.
+	 */
+	return -1;
+}
+
+static enum sti_hps_notify_ret sti_hps_early_check(int wkirq, void *gic_addr)
+{
+	struct sti_hps_notify *handler;
+	int int_num = 32;
+	int counter = 1;
+	u32 regval, enabled;
+	int i;
+
+	int r;
+	enum sti_hps_notify_ret ret = STI_HPS_RET_OK;
+
+	list_for_each_entry(handler, &hps_notify_list, list) {
+		if (handler->irq == wkirq) {
+			if (handler->notify() == STI_HPS_RET_OK)
+				return STI_HPS_RET_OK;
+			else
+				ret = STI_HPS_RET_AGAIN;
+		}
+	}
+
+	/*
+	 * Check other pending interrupts that can wake up and run
+	 * any associated handler. If any handler returns OK, we
+	 * know that HPS exit is fine and we dont re-enter it
+	 */
+	while (int_num <= MAX_GIC_SPI_INT) {
+		regval = readl(gic_addr + (GIC_DIST_PENDING_SET + counter * 4));
+		enabled = readl(gic_addr + (GIC_DIST_ENABLE_SET + counter * 4));
+
+		if ((regval & enabled) != 0) {
+			for (i = 0; i < 32; i++) {
+				if (((regval >> i) & 0x1) &&
+				    ((int_num + i) != wkirq)) {
+					r = sti_chk_pend(int_num + i);
+					if (r == 0)
+						return STI_HPS_RET_OK;
+					else if (r == 1)
+						ret = STI_HPS_RET_AGAIN;
+				}
+			}
+		}
+		counter++;
+		int_num += 32;
+	}
+
+	return ret;
+}
+
+static struct  sti_hps_notify *__look_for(struct sti_hps_notify *handler)
+{
+	struct sti_hps_notify *p;
+
+	list_for_each_entry(p,  &hps_notify_list, list)
+		if (p == handler || p->irq == handler->irq)
+			return p;
+
+	return NULL;
+}
+
+int sti_hps_register_notify(struct sti_hps_notify *handler)
+{
+	if (!handler || !handler->notify || handler->irq > 255)
+		return -EINVAL;
+
+	mutex_lock(&hps_notify_mutex);
+	if (__look_for(handler)) {
+		mutex_unlock(&hps_notify_mutex);
+		return -EEXIST;
+	}
+
+	list_add(&handler->list, &hps_notify_list);
+	mutex_unlock(&hps_notify_mutex);
+
+	return 0;
+}
+EXPORT_SYMBOL(sti_hps_register_notify);
+
+int sti_hps_unregister_notify(struct sti_hps_notify *handler)
+{
+	if (!handler)
+		return -EINVAL;
+
+	mutex_lock(&hps_notify_mutex);
+	if (!__look_for(handler)) {
+		mutex_unlock(&hps_notify_mutex);
+		return -EINVAL;
+	}
+
+	list_del(&handler->list);
+	mutex_unlock(&hps_notify_mutex);
+
+	return 0;
+}
+EXPORT_SYMBOL(sti_hps_unregister_notify);
+
+int sti_hps_enter(struct sti_hw_state_desc *state)
+{
+	enum sti_hps_notify_ret notify_ret;
+	int wake_irq = 0;
+
+	if (state == NULL)
+		return -EINVAL;
+
+	pr_info("CPU is sleeping\n");
+
+sti_again_hps:
+	if (!list_empty(&state->state_tables)) {
+		/*
+		 * Jump to asm code that will execute the
+		 * poke table to put the system in HPS
+		 */
+		sti_suspend_exec((long)(&state->buffer_data));
+
+		/* SYSTEM HAS WOKENUP FROM HPS */
+	}
+
+	wake_irq = sti_get_wake_irq(((struct hps_private_data *)state->
+				      state_private_data)->gic_iomem_interface);
+
+	notify_ret = sti_hps_early_check(wake_irq,
+					 ((struct hps_private_data *)state->
+					   state_private_data)->gic_iomem_dist);
+	if (notify_ret == STI_HPS_RET_AGAIN) {
+		pr_info("sti pm hps: System woken up from HPS by: %d\n",
+			wake_irq);
+		pr_info("sti pm hps: Suspending again\n");
+		goto sti_again_hps;
+	}
+
+	pr_info("sti pm hps: System woken up from HPS by: %d\n", wake_irq);
+
+	return 0;
+}
+
+int sti_hps_setup(struct sti_hw_state_desc *state, unsigned long *ddr_pctl_addr,
+		  unsigned int no_pctl,
+		  struct sti_ddr3_low_power_info *unused1,
+		  bool unused2)
+{
+	int index = 0;
+	struct device_node *np;
+	unsigned int reg, size_reg;
+	int i, ret = 0;
+	unsigned int *tlb_va = state->buffer_data.tlb_lock_addr;
+	unsigned int *nrtlb = &(state->buffer_data.nr_tlb_lock);
+
+	*nrtlb = 0;
+
+	if (state->ddr_state == DDR_SR) {
+		for (i = 0; i < no_pctl; i++) {
+			populate_suspend_table_entry(&sti_hps_tables[index++],
+						     (long *)sti_hps_ddr_enter,
+						     (long *)sti_hps_ddr_exit,
+						     sizeof(sti_hps_ddr_enter),
+						     sizeof(sti_hps_ddr_exit),
+						     ddr_pctl_addr[i]);
+			if (i == 0)
+				continue;
+
+			/* Need to place VA->PA mapping to the TLB */
+			if (*nrtlb >= MAX_TLB_LOCK_ENTRY)
+				return -E2BIG;
+			tlb_va[(*nrtlb)++] = (unsigned int) (ddr_pctl_addr[i]);
+		}
+
+		if (of_machine_is_compatible("st,stid127")) {
+			np = of_find_node_by_name(NULL, "ddr-pctl-controller");
+			if (IS_ERR_OR_NULL(np))
+				return -ENODEV;
+
+			reg = (unsigned int) of_iomap(np, 0);
+			of_node_put(np);
+			if (!reg)
+				return -ENODEV;
+
+			/* Need to place VA->PA mapping to the TLB */
+			if (*nrtlb >= MAX_TLB_LOCK_ENTRY) {
+				iounmap((void __iomem *)reg);
+				ret = -E2BIG;
+				goto err;
+			}
+			tlb_va[(*nrtlb)++] = (unsigned int) (reg);
+
+			populate_suspend_table_entry(&sti_hps_tables[index++],
+						     (long *)
+						     stid127_hps_ddr_pll_enter,
+						     (long *)
+						     stid127_hps_ddr_pll_exit,
+						     sizeof(
+						     stid127_hps_ddr_pll_enter),
+						     sizeof(
+						     stid127_hps_ddr_pll_exit),
+						     reg);
+
+			np = of_find_node_by_name(NULL, "clockgenA9");
+			if (IS_ERR_OR_NULL(np)) {
+				ret = -ENODEV;
+				goto err;
+			}
+
+			reg = (unsigned int) of_iomap(np, 0);
+			of_node_put(np);
+			if (!reg) {
+				ret = -ENODEV;
+				goto err;
+			}
+
+			/* Need to place VA->PA mapping to the TLB */
+			if (*nrtlb >= MAX_TLB_LOCK_ENTRY) {
+				iounmap((void __iomem *)reg);
+				ret = -E2BIG;
+				goto err;
+			}
+			tlb_va[(*nrtlb)++] = (unsigned int) (reg);
+
+			populate_suspend_table_entry(&sti_hps_tables[index++],
+						     (long *)
+						     stid127_hps_a9_clk_enter,
+						     (long *)
+						     stid127_hps_a9_clk_exit,
+						     sizeof(
+						     stid127_hps_a9_clk_enter),
+						     sizeof(
+						     stid127_hps_a9_clk_exit),
+						     reg);
+		} else if (of_machine_is_compatible("st,stih407") ||
+			   of_machine_is_compatible("st,stih410") ||
+			   of_machine_is_compatible("st,stih416")) {
+
+			return -ENOTSUPP;
+		}
+	} else if (state->ddr_state == DDR_OFF) {
+		pr_info("sti pm hps: DDR_OFF not supported in HPS\n");
+		return -EINVAL;
+	}
+
+	INIT_LIST_HEAD(&state->state_tables);
+	for (i = 0; i < index; ++i)
+		list_add_tail(&sti_hps_tables[i].node,
+			      &state->state_tables);
+
+	state->buffer_data.power_off = 0;
+
+	np = of_find_compatible_node(NULL, NULL, "arm,cortex-a9-gic");
+
+	if (IS_ERR_OR_NULL(np)) {
+		ret = -ENODEV;
+		goto err;
+	}
+
+	if (of_property_read_u32_index(np, "reg", 0, &reg)) {
+		pr_err("sti pm hps: GIC base address (dist.) not found\n");
+		of_node_put(np);
+		ret = -ENODEV;
+		goto err;
+	}
+
+	if (of_property_read_u32_index(np, "reg", 1, &size_reg)) {
+		pr_err("sti pm hps: GIC base size (dist.) not found\n");
+		of_node_put(np);
+		ret = -ENODEV;
+		goto err;
+	}
+
+	hps_data.gic_iomem_dist = ioremap_nocache(reg, size_reg);
+	if (!hps_data.gic_iomem_dist) {
+		pr_err("sti pm hps: GIC dist. base remap failed\n");
+		of_node_put(np);
+		ret = -ENODEV;
+		goto err;
+	}
+
+	if (of_property_read_u32_index(np, "reg", 2, &reg)) {
+		pr_err("sti pm hps: GIC base address (inter.) not found\n");
+		iounmap(hps_data.gic_iomem_dist);
+		of_node_put(np);
+		ret = -ENODEV;
+		goto err;
+	}
+
+	if (of_property_read_u32_index(np, "reg", 3, &size_reg)) {
+		pr_err("sti pm hps: GIC base size (inter.) not found\n");
+		of_node_put(np);
+		iounmap(hps_data.gic_iomem_dist);
+		ret = -ENODEV;
+		goto err;
+	}
+
+	hps_data.gic_iomem_interface = ioremap_nocache(reg, size_reg);
+
+	if (!hps_data.gic_iomem_interface) {
+		pr_err("sti pm hps: GIC cpu interface base remap failed\n");
+		of_node_put(np);
+		iounmap(hps_data.gic_iomem_dist);
+		ret = -ENODEV;
+		goto err;
+	}
+
+	of_node_put(np);
+
+	state->state_private_data = &hps_data;
+
+	return 0;
+
+err:
+	for (i = no_pctl-1; i < (*nrtlb); i++)
+		iounmap((void __iomem *)tlb_va[i]);
+
+	return ret;
+}
+
Binary files a/arch/arm/mach-sti/pm/suspend_hps.o and b/arch/arm/mach-sti/pm/suspend_hps.o differ
diff -urNp a/arch/arm/mach-sti/pm/suspend_interface.h b/arch/arm/mach-sti/pm/suspend_interface.h
--- a/arch/arm/mach-sti/pm/suspend_interface.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/suspend_interface.h	2019-09-26 21:23:27.232619300 +0100
@@ -0,0 +1,54 @@
+/*
+ * -------------------------------------------------------------------------
+ * Copyright (C) 2014  STMicroelectronics
+ * Author: Francesco M. Virlinzi  <francesco.virlinzi@st.com>
+ *	   Sudeep Biswas	  <sudeep.biswas@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License V.2 ONLY.  See linux/COPYING for more information.
+ * ------------------------------------------------------------------------- */
+
+#ifndef __SUSPEND_INTERFACE__
+#define __SUSPEND_INTERFACE__
+
+#include <linux/list.h>
+
+/*
+ * This file exposes interface for registering notification of HPS wakeup
+ * from other kernel modules. Other kernel modules should include this
+ * header file.
+ */
+enum sti_hps_notify_ret {
+	STI_HPS_RET_OK,
+	STI_HPS_RET_AGAIN
+};
+
+/*
+ * sti_hps_notify
+ * irq: The irq number for which if the wakeup happens the callback must be
+ * called sti_hps_notify_ret: the callback fucntion provided by the registering
+ * client driver
+ */
+struct sti_hps_notify {
+	struct list_head list;
+	int irq;
+	enum sti_hps_notify_ret (*notify)(void);
+};
+
+/*
+ * sti_hps_register_notify can be used by drivers to register a callback
+ * that will be called when the system is woken up from hps state,
+ * the argument handler contains a field notify that will be called when
+ * wakeup reason irq numer is same as that of the mentioned in the handler
+ * argument
+ */
+int sti_hps_register_notify(struct sti_hps_notify *notify);
+
+/*
+ * sti_hps_unregister_notify can be used by drivers to unregister a callback
+ * that is intially registered using the sti_register_pm_notify API
+ */
+int sti_hps_unregister_notify(struct sti_hps_notify *notify);
+
+#endif /* __SUSPEND_INTERFACE__ */
+
diff -urNp a/arch/arm/mach-sti/pm/suspend_internal.h b/arch/arm/mach-sti/pm/suspend_internal.h
--- a/arch/arm/mach-sti/pm/suspend_internal.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/suspend_internal.h	2019-09-26 21:23:27.232619300 +0100
@@ -0,0 +1,54 @@
+/*
+ * -------------------------------------------------------------------------
+ * Copyright (C) 2014  STMicroelectronics
+ * Author:	Sudeep Biswas		<sudeep.biswas@st.com>
+ *		Francesco M. Virlinzi	<francesco.virlinzi@st.com>
+ * May be copied or modified under the terms of the GNU General Public
+ * License V.2 ONLY.  See linux/COPYING for more information.
+ * ------------------------------------------------------------------------- */
+
+#ifndef __SUSPEND_INTERNAL__
+#define __SUSPEND_INTERNAL__
+
+/* L2CC cache line size is fixed and always 32 bytes */
+#define L2CC_CACHE_LINE_SIZE	32
+#define L2CC_CACHE_ALIGN(a) \
+(((a) + (L2CC_CACHE_LINE_SIZE - 1)) & (~(L2CC_CACHE_LINE_SIZE - 1)))
+
+/* time to SoC reset if SBC F/w hangs while system is in standby (CPS/DCPS) */
+#define SBC_FW_HANG_DETECT_TIME_MSEC 5000
+
+static inline
+void populate_suspend_table_entry(struct sti_suspend_table *entry,
+				  long *entry_tbl, long *exit_tbl,
+				  int size_entry, int size_exit,
+				  unsigned long base_address)
+{
+	entry->enter = entry_tbl;
+	entry->enter_size = size_entry;
+	entry->exit = exit_tbl;
+	entry->exit_size = size_exit;
+	entry->base_address = base_address;
+}
+
+/* Maximum number of suspend table entries with entry and exit procedures */
+#define MAX_SUSPEND_TABLE_SIZE 6
+
+/* ST GPIO specific constants */
+#define STI_GPIO_REG_CLR_POUT	0x08
+#define STI_GPIO_REGS_MAP_SZ	0x1000
+
+/* specific call declarations */
+int sti_suspend_exec(unsigned long);
+
+int sti_suspend_on_buffer(void);
+extern unsigned long sti_suspend_on_buffer_sz;
+
+int sti_suspend_lock_code(unsigned long);
+extern unsigned long sti_suspend_lock_code_sz;
+
+/* Function that is executed after a CPS wakeup on primary core */
+void sti_defrost_kernel(void);
+
+#endif /* __SUSPEND_INTERNAL__ */
+
diff -urNp a/arch/arm/mach-sti/pm/synopsys_dwc_ddr32.h b/arch/arm/mach-sti/pm/synopsys_dwc_ddr32.h
--- a/arch/arm/mach-sti/pm/synopsys_dwc_ddr32.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm/synopsys_dwc_ddr32.h	2019-09-26 21:23:27.232619300 +0100
@@ -0,0 +1,102 @@
+/*
+ * -------------------------------------------------------------------------
+ * Copyright (C) 2014  STMicroelectronics
+ * Author:	Sudeep Biswas		<sudeep.biswas@st.com>
+ *		Francesco M. Virlinzi	<francesco.virlinzi@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License V.2 ONLY.  See linux/COPYING for more information.
+ * ------------------------------------------------------------------------- */
+
+#ifndef __STI_SYNOPSYS_DWC_DDR32_H__
+#define __STI_SYNOPSYS_DWC_DDR32_H__
+
+/*
+ * Synopsys DWC SDram Protocol Controller
+ * For registers description see:
+ * DesignWare Cores DDR3/2 SDRAM Protocol - Controller -
+ * Databook - Version 2.10a - February 4, 2009'
+ */
+#define DDR_SCTL				0x4
+#define DDR_SCTL_CFG				0x1
+#define DDR_SCTL_GO				0x2
+#define DDR_SCTL_SLEEP				0x3
+#define DDR_SCTL_WAKEUP				0x4
+
+#define DDR_STAT				0x8
+#define DDR_STAT_MASK				0x7
+#define DDR_STAT_CONFIG				0x1
+#define DDR_STAT_ACCESS				0x3
+#define DDR_STAT_LOW_POWER			0x5
+
+#define DDR_DTU_CFG				0x208
+#define DDR_DTU_CFG_ENABLE			0x1
+
+#define DDR_PHY_IOCRV1				0x31C
+/*
+ * Synopsys DWC SDram Phy Controller
+ * For registers description see:
+ * 'DesignWare Cores DDR3/2 SDRAM PHY -
+ *  Databook - February 5, 2009'
+ *
+ * - Table 5.1: PHY Control Register Mapping
+ * and
+ * - Table 5.30: PUB Control Register Mapping
+ */
+#define DDR_PHY_REG(idx)			(0x400 + (idx) * 4)
+
+#define DDR_PHY_PIR				DDR_PHY_REG(1)	/* 0x04 */
+#define DDR_PHY_PIR_INIT			BIT(0)
+#define DDR_PHY_PIR_PLLINIT			BIT(4)
+#define DDR_PHY_PIR_PLL_RESET			BIT(7)
+#define DDR_PHY_PIR_PLL_PD			BIT(8)
+
+#define DDR_PHY_PGCR0				DDR_PHY_REG(2)	/* 0x08 */
+#define DDR_PHY_PGCR1				DDR_PHY_REG(3)	/* 0x0c */
+
+#define DDR_PHY_PGSR0				DDR_PHY_REG(4)	/* 0x10 */
+#define DDR_PHY_PGSR0_IDONE			BIT(0)
+#define DDR_PHY_PGSR0_PLDONE			BIT(1)
+#define DDR_PHY_PGSR0_CAL			BIT(2)
+#define DDR_PHY_PGSR0_APLOCK			BIT(31)
+
+#define DDR_PHY_PLLCR				DDR_PHY_REG(6)	/* 0x18 */
+#define DDR_PHY_PLLCR_PLLPD			BIT(29)
+
+#define DDR_PHY_ACIOCR				DDR_PHY_REG(14)	/* 0x38 */
+#define DDR_PHY_ACIOCR_ACOE		        BIT(1)
+#define DDR_PHY_ACIOCR_ACODT			BIT(2)
+#define DDR_PHY_ACIOCR_ACPDD			BIT(3)
+#define DDR_PHY_ACIOCR_ACPDR			BIT(4)
+#define DDR_PHY_ACIOCR_CKODT			(7 << 5)
+#define DDR_PHY_ACIOCR_CKPDD			(7 << 8)
+#define DDR_PHY_ACIOCR_CSPDD			(15 << 18)
+
+#define DDR_PHY_DXCCR				DDR_PHY_REG(15) /* 0x3C */
+#define DDR_PHY_DXCCR_DXODT			BIT(0)
+#define DDR_PHY_DXCCR_DXPDD			BIT(3)
+#define DDR_PHY_DXCCR_DXPDR			BIT(4)
+
+#define DDR_PHY_DSGCR				DDR_PHY_REG(16) /* 0x40 */
+#define DDR_PHY_CKOE				BIT(28)
+#define DDR_PHY_ODTOE				BIT(29)
+
+#define DDR_PHY_PLLREADY	(DDR_PHY_PGSR0_IDONE | DDR_PHY_PGSR0_PLDONE)
+
+/* DDR PLL Specific */
+#define DDR_PLL_CFG_OFFSET			0x7d8
+#define DDR_PLL_STATUS_OFFSET			0x8e4
+
+/* DDR DTU Specific */
+#define DTUWACTL				0x200
+#define DTURACTL				0x204
+#define DTUWD0					0x210
+#define DTUWD1					0x214
+#define DTUWD2					0x218
+#define DTUWD3					0x21c
+#define DTUAWDT					0x0b0
+#define DTUCFG					0x208
+#define DTUECTL					0x20c
+
+#endif /* __STI_SYNOPSYS_DWC_DDR32_H__ */
+
diff -urNp a/arch/arm/mach-sti/pm_domains.c b/arch/arm/mach-sti/pm_domains.c
--- a/arch/arm/mach-sti/pm_domains.c	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/pm_domains.c	2019-09-26 21:23:27.232619300 +0100
@@ -0,0 +1,256 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics Limited
+ * Authors: Pankaj Dev <pankaj.dev@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ */
+
+#include <linux/err.h>
+#include <linux/slab.h>
+#include <linux/pm_domain.h>
+#include <linux/of_address.h>
+#include <linux/of_platform.h>
+#include <linux/mfd/syscon.h>
+#include <linux/regmap.h>
+#include <linux/pm_runtime.h>
+
+/*
+ * ST specific wrapper around the generic power domain
+ */
+struct st_pm_domain {
+	struct device *dev;
+	struct regmap_field *regfield;
+	struct generic_pm_domain pd;
+	int (*prepare)(struct device *dev);
+	void (*complete)(struct device *dev);
+};
+
+static int st_gate_power(struct generic_pm_domain *domain, bool power_on)
+{
+	struct st_pm_domain *pd = container_of(domain, struct st_pm_domain, pd);
+	int err;
+
+	err = regmap_field_write(pd->regfield, power_on);
+	if (err)
+		dev_err(pd->dev, "IO register not accessible\n");
+
+	return err;
+}
+
+static int st_gate_power_status(struct generic_pm_domain *domain,
+		bool *power_on)
+{
+	struct st_pm_domain *pd = container_of(domain, struct st_pm_domain, pd);
+	unsigned int val;
+	int err;
+
+	err = regmap_field_read(pd->regfield, &val);
+	if (err) {
+		dev_err(pd->dev, "IO register not accessible\n");
+		return err;
+	}
+
+	*power_on = !!val;
+
+	return 0;
+}
+
+static int st_gate_power_on(struct generic_pm_domain *domain)
+{
+	return st_gate_power(domain, true);
+}
+
+static int st_gate_power_off(struct generic_pm_domain *domain)
+{
+	return st_gate_power(domain, false);
+}
+
+static int st_gate_domain_prepare(struct device *dev)
+{
+	struct generic_pm_domain *genpd = dev_to_genpd(dev);
+	struct st_pm_domain *pd = container_of(genpd, struct st_pm_domain, pd);
+
+	pm_runtime_get_sync(dev);
+
+	return pd->prepare(dev);
+}
+
+static void st_gate_domain_complete(struct device *dev)
+{
+	struct generic_pm_domain *genpd = dev_to_genpd(dev);
+	struct st_pm_domain *pd = container_of(genpd, struct st_pm_domain, pd);
+
+	pd->complete(dev);
+
+	pm_runtime_put(dev);
+}
+
+int sti_pd_gate_probe(struct platform_device *pdev)
+{
+	struct device *dev = &pdev->dev;
+	struct device_node *np = dev->of_node;
+	struct st_pm_domain *pd;
+	struct regmap *regmap;
+	struct reg_field regfield;
+	u32 offset, bitpos;
+	bool power_on;
+	int err;
+
+	pd = devm_kzalloc(dev, sizeof(*pd), GFP_KERNEL);
+	if (!pd)
+		return -ENOMEM;
+
+	regmap = syscon_regmap_lookup_by_phandle(np, "st,syscfg");
+	if (IS_ERR(regmap)) {
+		dev_err(dev, "Failed to lookup regmap\n");
+		return PTR_ERR(regmap);
+	}
+
+	err = of_property_read_u32_index(np, "st,syscfg", 1, &offset);
+	if (err) {
+		dev_err(dev, "No syscfg offset specified\n");
+		return err;
+	}
+
+	bitpos = 0;
+	err = of_property_read_u32_index(np, "st,syscfg", 2, &bitpos);
+	if (err && err != -EOVERFLOW) {
+		dev_err(dev, "Failed to parse syscfg bitpos\n");
+		return err;
+	}
+
+	pd->pd.name = kstrdup(np->name, GFP_KERNEL);
+	pd->pd.power_off = st_gate_power_off;
+	pd->pd.power_on = st_gate_power_on;
+
+	regfield.reg = offset;
+	regfield.lsb = regfield.msb = bitpos;
+	pd->regfield = devm_regmap_field_alloc(dev, regmap, regfield);
+	if (IS_ERR(pd->regfield)) {
+		dev_err(dev, "Failed to create reg_field\n");
+		return PTR_ERR(pd->regfield);
+	}
+
+	/* Check the clock status at boot */
+	err = st_gate_power_status(&pd->pd, &power_on);
+	if (err)
+		return err;
+
+	/* Clock status at boot, is_off="!power_on" passed */
+	pm_genpd_init(&pd->pd, NULL, !power_on);
+	of_genpd_add_provider_simple(np, &pd->pd);
+
+	pd->prepare = pd->pd.domain.ops.prepare;
+	pd->complete = pd->pd.domain.ops.complete;
+
+	pd->pd.domain.ops.prepare = st_gate_domain_prepare;
+	pd->pd.domain.ops.complete = st_gate_domain_complete;
+
+	pd->dev = &pdev->dev;
+
+	dev_info(dev, "registered (TP-status:%d)\n", power_on);
+
+	return 0;
+}
+
+static struct of_device_id sti_pd_gate_match[] = {
+	{ .compatible = "st,fcgate-pd" },
+	{ .compatible = "st,core-pd" },
+	{},
+};
+
+static struct platform_driver st_pd_gate_driver = {
+	.probe = sti_pd_gate_probe,
+	.driver = {
+		   .name = "sti-pd-gate",
+		   .owner = THIS_MODULE,
+		   .of_match_table = sti_pd_gate_match,
+	},
+};
+
+int sti_pd_grp_probe(struct platform_device *pdev)
+{
+	struct device *dev = &pdev->dev;
+	struct device_node *np = dev->of_node;
+	struct of_phandle_args pd_args;
+	struct generic_pm_domain *parentd;
+	struct st_pm_domain *pd;
+	int i, nparents, ret;
+
+	pd = devm_kzalloc(dev, sizeof(*pd), GFP_KERNEL);
+	if (!pd)
+		return -ENOMEM;
+
+	pd->pd.name = kstrdup(np->name, GFP_KERNEL);
+
+	pm_genpd_init(&pd->pd, NULL, true);
+	of_genpd_add_provider_simple(np, &pd->pd);
+
+	pd->prepare = pd->pd.domain.ops.prepare;
+	pd->complete = pd->pd.domain.ops.complete;
+
+	pd->pd.domain.ops.prepare = st_gate_domain_prepare;
+	pd->pd.domain.ops.complete = st_gate_domain_complete;
+
+	nparents = of_count_phandle_with_args(np, "power-domains",
+			"#power-domain-cells");
+	if (nparents < 0)
+		return nparents;
+
+	for (i = 0; i < nparents; i++) {
+		ret = of_parse_phandle_with_args(np, "power-domains",
+				"#power-domain-cells",
+				i, &pd_args);
+		if (ret < 0)
+			return ret;
+
+		parentd = of_genpd_get_from_provider(&pd_args);
+		if (IS_ERR(parentd)) {
+			dev_err(dev, "Failed to find pm domain: %ld\n",
+					PTR_ERR(parentd));
+			of_node_put(np);
+			return PTR_ERR(parentd);
+		}
+
+		ret = pm_genpd_add_subdomain(parentd, &pd->pd);
+		if (ret) {
+			dev_err(dev, "Error add sub domain (%d)\n", ret);
+			return ret;
+		}
+	}
+
+	pd->dev = &pdev->dev;
+	dev_info(dev, "registered\n");
+
+	return 0;
+}
+
+static struct of_device_id sti_pd_grp_match[] = {
+	{ .compatible = "st,grp-pd" },
+	{},
+};
+
+static struct platform_driver st_pd_grp_driver = {
+	.probe = sti_pd_grp_probe,
+	.driver = {
+		   .name = "sti-pd-grp",
+		   .owner = THIS_MODULE,
+		   .of_match_table = sti_pd_grp_match,
+	},
+};
+
+static int __init st_pm_init_power_domain(void)
+{
+	int ret;
+
+	ret = platform_driver_register(&st_pd_gate_driver);
+	if (ret)
+		return ret;
+
+	return platform_driver_register(&st_pd_grp_driver);
+}
+arch_initcall(st_pm_init_power_domain);
Binary files a/arch/arm/mach-sti/pm_domains.o and b/arch/arm/mach-sti/pm_domains.o differ
diff -urNp a/arch/arm/mach-sti/smp.h b/arch/arm/mach-sti/smp.h
--- a/arch/arm/mach-sti/smp.h	2015-04-12 23:12:50.000000000 +0100
+++ b/arch/arm/mach-sti/smp.h	2019-09-26 21:23:28.296620800 +0100
@@ -13,5 +13,8 @@
 #define __MACH_STI_SMP_H
 
 extern struct smp_operations	sti_smp_ops;
+void sti_secondary_startup(void);
+int sti_abap_c_start(void);
+extern unsigned int sti_abap_c_size;
 
 #endif
diff -urNp a/arch/arm/mach-sti/st-pmu-syscfg.c b/arch/arm/mach-sti/st-pmu-syscfg.c
--- a/arch/arm/mach-sti/st-pmu-syscfg.c	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/st-pmu-syscfg.c	2019-09-26 21:23:27.232619300 +0100
@@ -0,0 +1,233 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics
+ *
+ * PMU syscfg driver, used in STMicroelectronics devices.
+ *
+ * Author: Christophe Kerello <christophe.kerello@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2, as
+ * published by the Free Software Foundation.
+ */
+
+#include <linux/module.h>
+#include <linux/of.h>
+#include <linux/of_platform.h>
+#include <linux/platform_device.h>
+#include <linux/mfd/syscon.h>
+#include <linux/regmap.h>
+
+/* DUAL CORES platforms configuration is described below */
+/* bit2: pmuirq(0) enable */
+/* bit3: pmuirq(1) enable */
+/* bit[16..14]: pmuirq(0) selection */
+/* bit[19..17]: pmuirq(1) selection */
+#define ST_PMU_DUAL_SYSCFG_MASK	0xfc0ff
+#define ST_PMU_DUAL_SYSCFG_VAL	0xd400c
+
+/* STiH415 */
+#define STIH415_SYSCFG_642	0xa8
+
+/* STiH416 */
+#define STIH416_SYSCFG_7543	0x87c
+
+/* STiH407 */
+#define STIH407_SYSCFG_5102	0x198
+
+/* STiD127 */
+#define STID127_SYSCFG_734	0x88
+
+/* QUAD CORES platforms configuration is described below */
+/* SYSTEM_CONFIG5102 */
+/* bit2: pmuirq(0) enable */
+/* bit3: pmuirq(1) enable */
+/* bit8: pmuirq(0) enable */
+/* bit9: pmuirq(1) enable */
+/* bit[23..20]: pmuirq(0) selection */
+/* bit[27..24]: pmuirq(1) selection */
+/* SYSTEM_CONFIG5103 */
+/* bit[11..8]: pmuirq(3) selection */
+/* bit[15..12]: pmuirq(4) selection */
+#define ST_PMU_QUAD_SYSCFG_MASK_1	0xff0fff
+#define ST_PMU_QUAD_SYSCFG_VAL_1	0x650030c
+#define ST_PMU_QUAD_SYSCFG_MASK_2	0xff00
+#define ST_PMU_QUAD_SYSCFG_VAL_2	0xba00
+/* STiH418 */
+#define STIH418_SYSCFG_5102	0x198
+#define STIH418_SYSCFG_5103	0x19C
+
+struct st_pmu_syscfg_soc_cfg {
+	unsigned int syscfg;
+	unsigned int mask;
+	unsigned int val;
+};
+
+struct st_pmu_syscfg_dev {
+	struct regmap *regmap;
+	struct st_pmu_syscfg_soc_cfg *soc_cfg;
+};
+
+static int st_pmu_syscfg_enable_irq(struct device *dev)
+{
+	struct platform_device *pdev =
+		container_of(dev, struct platform_device, dev);
+	struct st_pmu_syscfg_dev *st_pmu_syscfg = platform_get_drvdata(pdev);
+
+	while ((st_pmu_syscfg->soc_cfg != NULL) &&
+			(st_pmu_syscfg->soc_cfg->syscfg != 0)) {
+		regmap_update_bits(st_pmu_syscfg->regmap,
+				st_pmu_syscfg->soc_cfg->syscfg,
+				st_pmu_syscfg->soc_cfg->mask,
+				st_pmu_syscfg->soc_cfg->val);
+		st_pmu_syscfg->soc_cfg++;
+	}
+	return 0;
+}
+
+static struct st_pmu_syscfg_soc_cfg st_pmu_syscfg_stih415_cfg[] = {
+	{
+		STIH415_SYSCFG_642,
+		ST_PMU_DUAL_SYSCFG_MASK,
+		ST_PMU_DUAL_SYSCFG_VAL
+	},
+	{	0, 0, 0}
+};
+
+static struct st_pmu_syscfg_soc_cfg st_pmu_syscfg_stih416_cfg[] = {
+	{
+		STIH416_SYSCFG_7543,
+		ST_PMU_DUAL_SYSCFG_MASK,
+		ST_PMU_DUAL_SYSCFG_VAL
+	},
+	{	0, 0, 0}
+};
+
+static struct st_pmu_syscfg_soc_cfg st_pmu_syscfg_stih407_cfg[] = {
+	{
+		STIH407_SYSCFG_5102,
+		ST_PMU_DUAL_SYSCFG_MASK,
+		ST_PMU_DUAL_SYSCFG_VAL
+	},
+	{	0, 0, 0}
+};
+
+static struct st_pmu_syscfg_soc_cfg st_pmu_syscfg_stih418_cfg[] = {
+	{
+		STIH418_SYSCFG_5102,
+		ST_PMU_QUAD_SYSCFG_MASK_1,
+		ST_PMU_QUAD_SYSCFG_VAL_1
+	},
+	{
+		STIH418_SYSCFG_5103,
+		ST_PMU_QUAD_SYSCFG_MASK_2,
+		ST_PMU_QUAD_SYSCFG_VAL_2
+	},
+	{	0, 0, 0}
+};
+
+static struct st_pmu_syscfg_soc_cfg st_pmu_syscfg_stid127_cfg[] = {
+	{
+		STID127_SYSCFG_734,
+		ST_PMU_DUAL_SYSCFG_MASK,
+		ST_PMU_DUAL_SYSCFG_VAL
+	},
+	{	0, 0, 0}
+};
+
+static struct of_device_id st_pmu_syscfg_of_match[] = {
+	{
+		.compatible = "st,stih415-pmu-syscfg",
+		.data = (void *) st_pmu_syscfg_stih415_cfg,
+	},
+	{
+		.compatible = "st,stih416-pmu-syscfg",
+		.data = (void *) st_pmu_syscfg_stih416_cfg,
+	},
+	{
+		.compatible = "st,stih407-pmu-syscfg",
+		.data = (void *) st_pmu_syscfg_stih407_cfg,
+	},
+	{
+		.compatible = "st,stih418-pmu-syscfg",
+		.data = (void *) st_pmu_syscfg_stih418_cfg,
+	},
+	{
+		.compatible = "st,stid127-pmu-syscfg",
+		.data = (void *) st_pmu_syscfg_stid127_cfg,
+	},
+	{}
+};
+
+static int st_pmu_syscfg_probe(struct platform_device *pdev)
+{
+	struct device_node *np = pdev->dev.of_node;
+	const struct of_device_id *match;
+	struct device *dev = &pdev->dev;
+	struct st_pmu_syscfg_dev *st_pmu_syscfg;
+	int ret;
+
+	if (!np) {
+		dev_err(dev, "Device tree node not found.\n");
+		return -ENODEV;
+	}
+
+	st_pmu_syscfg = devm_kzalloc(dev, sizeof(struct st_pmu_syscfg_dev),
+					GFP_KERNEL);
+	if (!st_pmu_syscfg)
+		return -ENOMEM;
+
+	match = of_match_device(st_pmu_syscfg_of_match, dev);
+	if (!match)
+		return -ENODEV;
+
+	st_pmu_syscfg->soc_cfg = (struct st_pmu_syscfg_soc_cfg *)match->data;
+
+	st_pmu_syscfg->regmap = syscon_regmap_lookup_by_phandle(np,
+					"st,syscfg");
+	if (IS_ERR(st_pmu_syscfg->regmap)) {
+		dev_err(dev, "No syscfg phandle specified\n");
+		return PTR_ERR(st_pmu_syscfg->regmap);
+	}
+
+	ret = of_platform_populate(np, NULL, NULL, dev);
+	if (ret) {
+		dev_err(dev, "Failed to add pmu device\n");
+		return ret;
+	}
+
+	platform_set_drvdata(pdev, st_pmu_syscfg);
+
+	return st_pmu_syscfg_enable_irq(dev);
+}
+
+#ifdef CONFIG_PM_SLEEP
+static int st_pmu_syscfg_resume(struct device *dev)
+{
+	/* restore syscfg register */
+	return st_pmu_syscfg_enable_irq(dev);
+}
+
+static SIMPLE_DEV_PM_OPS(st_pmu_syscfg_pm_ops, NULL, st_pmu_syscfg_resume);
+#endif /* CONFIG_PM_SLEEP */
+
+static struct platform_driver st_pmu_syscfg_driver = {
+	.probe = st_pmu_syscfg_probe,
+	.driver = {
+		.name = "st_pmu_config",
+#ifdef CONFIG_PM_SLEEP
+		.pm = &st_pmu_syscfg_pm_ops,
+#endif /* CONFIG_PM_SLEEP */
+		.of_match_table = st_pmu_syscfg_of_match,
+	},
+};
+
+static int __init st_pmu_syscfg_init(void)
+{
+	return platform_driver_register(&st_pmu_syscfg_driver);
+}
+
+device_initcall(st_pmu_syscfg_init);
+
+MODULE_AUTHOR("Christophe Kerello <christophe.kerello@st.com>");
+MODULE_DESCRIPTION("STMicroelectronics PMU syscfg driver");
+MODULE_LICENSE("GPL v2");
Binary files a/arch/arm/mach-sti/st-pmu-syscfg.o and b/arch/arm/mach-sti/st-pmu-syscfg.o differ
diff -urNp a/arch/arm/mach-sti/sti.c b/arch/arm/mach-sti/sti.c
--- a/arch/arm/mach-sti/sti.c	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/sti.c	2019-09-26 21:23:27.236619300 +0100
@@ -0,0 +1,48 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics Limited
+ * Author: Srinivas Kandagatla <srinivas.kandagatla@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License Version 2.0 only.  See linux/COPYING for more information.
+ */
+#include <linux/of.h>
+#include <linux/of_platform.h>
+#include <linux/platform_device.h>
+#include <linux/mfd/syscon.h>
+#include <linux/platform_device.h>
+#include <linux/types.h>
+#include <linux/io.h>
+#include <linux/regmap.h>
+#include <linux/clk-provider.h>
+#include <linux/of_gpio.h>
+#include "sti.h"
+
+#define ST_GPIO_PINS_PER_BANK	(8)
+#define TSOUT1_BYTECLK_GPIO (5 * ST_GPIO_PINS_PER_BANK + 0)
+
+/* On stid127-b2112 PIO5[0] (TSOUT1_BYTECLK) goes to CN10 (TSAERROR_TSAERROR).
+ * On b2105, CN29 (NIM3) it is wired to SIS2_ERROR.
+ * This patch is to force TSOUT1_BYTECLK to low for NIM3 connection with
+ * Cannes
+ */
+void __init sti_init_machine_late(void)
+{
+	if (of_machine_is_compatible("st,stid127"))
+		gpio_request_one(TSOUT1_BYTECLK_GPIO,
+				GPIOF_OUT_INIT_LOW, "tsout1_byteclk");
+}
+
+void __init sti_init_machine(void)
+{
+	of_platform_populate(NULL, of_default_bus_match_table, NULL, NULL);
+}
+
+static int sti_register_cpufreqcpu0(void)
+{
+	struct platform_device_info devinfo = { .name = "cpufreq-cpu0", };
+
+	platform_device_register_full(&devinfo);
+	return 0;
+
+}
+late_initcall(sti_register_cpufreqcpu0);
diff -urNp a/arch/arm/mach-sti/sti.h b/arch/arm/mach-sti/sti.h
--- a/arch/arm/mach-sti/sti.h	1970-01-01 01:00:00.000000000 +0100
+++ b/arch/arm/mach-sti/sti.h	2019-09-26 21:23:27.236619300 +0100
@@ -0,0 +1,5 @@
+#ifndef __MACH_STI_H
+#define __MACH_STI_H
+extern void sti_init_machine(void);
+extern void sti_init_machine_late(void);
+#endif /* __MACH_STIH_H */
Binary files a/arch/arm/mach-sti/sti.o and b/arch/arm/mach-sti/sti.o differ
diff -urNp a/drivers/Kconfig b/drivers/Kconfig
--- a/drivers/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/Kconfig	2019-10-04 23:36:36.036123300 +0100
@@ -182,4 +182,6 @@ source "drivers/thunderbolt/Kconfig"
 
 source "drivers/android/Kconfig"
 
+source "drivers/lpm/Kconfig"
+
 endmenu
diff -urNp a/drivers/Makefile b/drivers/Makefile
--- a/drivers/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/Makefile	2019-10-04 09:26:28.081594100 +0100
@@ -165,3 +165,6 @@ obj-$(CONFIG_RAS)		+= ras/
 obj-$(CONFIG_THUNDERBOLT)	+= thunderbolt/
 obj-$(CONFIG_CORESIGHT)		+= coresight/
 obj-$(CONFIG_ANDROID)		+= android/
+
+#LPM Support
+obj-$(CONFIG_ST_LPM)		+= lpm/
diff -urNp a/drivers/base/power/wakeup.c b/drivers/base/power/wakeup.c
--- a/drivers/base/power/wakeup.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/base/power/wakeup.c	2019-10-05 10:25:23.386591100 +0100
@@ -14,6 +14,7 @@
 #include <linux/suspend.h>
 #include <linux/seq_file.h>
 #include <linux/debugfs.h>
+#include <linux/notifier.h>
 #include <trace/events/power.h>
 
 #include "power.h"
@@ -33,6 +34,7 @@ static bool pm_abort_suspend __read_most
  * atomic variable to hold them both.
  */
 static atomic_t combined_event_count = ATOMIC_INIT(0);
+static BLOCKING_NOTIFIER_HEAD(wakeup_source_cb);
 
 #define IN_PROGRESS_BITS	(sizeof(int) * 4)
 #define MAX_IN_PROGRESS		((1 << IN_PROGRESS_BITS) - 1)
@@ -234,6 +236,9 @@ int device_wakeup_enable(struct device *
 	if (ret)
 		wakeup_source_unregister(ws);
 
+	blocking_notifier_call_chain(&wakeup_source_cb, WAKEUP_SOURCE_ADDED,
+		(void *)dev);
+
 	return ret;
 }
 EXPORT_SYMBOL_GPL(device_wakeup_enable);
@@ -270,13 +275,35 @@ int device_wakeup_disable(struct device
 		return -EINVAL;
 
 	ws = device_wakeup_detach(dev);
-	if (ws)
-		wakeup_source_unregister(ws);
+	if (ws) 
+	{
+		blocking_notifier_call_chain(&wakeup_source_cb,
+			WAKEUP_SOURCE_REMOVED, (void *)dev);
 
+		wakeup_source_unregister(ws);
+	}
 	return 0;
 }
 EXPORT_SYMBOL_GPL(device_wakeup_disable);
 
+void wakeup_source_notifier_register(struct notifier_block *nb)
+{
+	if (!nb)
+		return;
+	blocking_notifier_chain_register(&wakeup_source_cb, nb);
+}
+EXPORT_SYMBOL_GPL(wakeup_source_notifier_register);
+
+void wakeup_source_notifier_unregister(struct notifier_block *nb)
+{
+	if (!nb)
+		return;
+	blocking_notifier_chain_unregister(&wakeup_source_cb, nb);
+}
+EXPORT_SYMBOL_GPL(wakeup_source_notifier_unregister);
+
+
+
 /**
  * device_set_wakeup_capable - Set/reset device wakeup capability flag.
  * @dev: Device to handle.
@@ -351,6 +378,29 @@ int device_set_wakeup_enable(struct devi
 }
 EXPORT_SYMBOL_GPL(device_set_wakeup_enable);
 
+/* callback for device_child_may_wakeup */
+static int __device_child_may_wakeup(struct device *dev, void *c)
+{
+	return device_may_wakeup(dev);
+}
+
+/**
+ * device_child_may_wakeup - Check if any of the child devices are wakeup
+ * sources.
+ * @dev: parent device to handle.
+ *
+ * Function to check if any of the children of a given parent are wakeup
+ * sources.
+ *
+ * This function will return true if any one of the children of given parent
+ * are wakeup sources, else it returns false.
+ */
+bool device_child_may_wakeup(struct device *parent)
+{
+	return device_for_each_child(parent, NULL, __device_child_may_wakeup);
+}
+EXPORT_SYMBOL_GPL(device_child_may_wakeup);
+
 /*
  * The functions below use the observation that each wakeup event starts a
  * period in which the system should not be suspended.  The moment this period
diff -urNp a/drivers/clk/clk.c b/drivers/clk/clk.c
--- a/drivers/clk/clk.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/clk/clk.c	2019-10-07 13:28:40.746828300 +0100
@@ -1312,7 +1312,7 @@ static unsigned long clk_recalc(struct c
  *
  * Caller must hold prepare_lock.
  */
-static void __clk_recalc_rates(struct clk_core *clk, unsigned long msg)
+void __clk_recalc_rates(struct clk_core *clk, unsigned long msg)
 {
 	unsigned long old_rate;
 	unsigned long parent_rate = 0;
diff -urNp a/drivers/clk/st/Makefile b/drivers/clk/st/Makefile
--- a/drivers/clk/st/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/clk/st/Makefile	2019-09-26 21:23:27.308619400 +0100
@@ -1 +1 @@
-obj-y += clkgen-mux.o clkgen-pll.o clkgen-fsyn.o clk-flexgen.o
+obj-y += clkgen-mux.o clkgen-pll.o clkgen-fsyn.o clk-flexgen.o soc.o vclk_algos.o
diff -urNp a/drivers/clk/st/built-in.mod.c b/drivers/clk/st/built-in.mod.c
--- a/drivers/clk/st/built-in.mod.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/clk/st/built-in.mod.c	2019-09-26 21:29:50.769895600 +0100
@@ -0,0 +1,19 @@
+#include <linux/module.h>
+#include <linux/vermagic.h>
+#include <linux/compiler.h>
+
+MODULE_INFO(vermagic, VERMAGIC_STRING);
+
+struct module __this_module
+__attribute__((section(".gnu.linkonce.this_module"))) = {
+	.name = KBUILD_MODNAME,
+	.arch = MODULE_ARCH_INIT,
+};
+
+MODULE_INFO(intree, "Y");
+
+static const char __module_depends[]
+__used
+__attribute__((section(".modinfo"))) =
+"depends=";
+
diff -urNp a/drivers/clk/st/clk-flexgen.c b/drivers/clk/st/clk-flexgen.c
--- a/drivers/clk/st/clk-flexgen.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/clk/st/clk-flexgen.c	2019-09-26 21:23:27.308619400 +0100
@@ -6,6 +6,7 @@
  * License terms:  GNU General Public License (GPL), version 2  */
 
 #include <linux/clk-provider.h>
+#include "vclk_algos.h"
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/io.h>
@@ -14,6 +15,31 @@
 #include <linux/of.h>
 #include <linux/of_address.h>
 
+#include "clkgen.h"
+
+#define FLEXGEN_MAX_OUTPUTS 48
+#define FLEXGEN_MAX_PARENT 4
+
+struct clkgen_data_parent_clk {
+	u32 input_id;
+	struct clk *clkp;
+	bool sync;
+};
+
+struct clkgen_data_clk {
+	struct clk *clkp;
+	bool sync;
+};
+
+struct clkgen_data {
+	unsigned long clk_flags;
+	bool clk_mode;
+	unsigned long beat_parents;
+	struct clkgen_data_parent_clk parent_clks[FLEXGEN_MAX_PARENT];
+	struct clkgen_field beatcnt[FLEXGEN_MAX_PARENT];
+	struct clkgen_data_clk clks[FLEXGEN_MAX_OUTPUTS];
+};
+
 struct flexgen {
 	struct clk_hw hw;
 
@@ -27,9 +53,19 @@ struct flexgen {
 	struct clk_gate fgate;
 	/* Final divisor */
 	struct clk_divider fdiv;
+	/* Asynchronous mode control */
+	struct clk_gate sync;
+	/* hw control flags */
+	bool control_mode;
+	/* Beatcnt divisor */
+	unsigned long beat_parents;
+	struct clk_divider beatdiv[FLEXGEN_MAX_PARENT];
+	struct clkgen_data_parent_clk *parents_clks;
+	struct clkgen_data_clk *clks;
 };
 
 #define to_flexgen(_hw) container_of(_hw, struct flexgen, hw)
+#define to_clk_gate(_hw) container_of(_hw, struct clk_gate, hw)
 
 static int flexgen_enable(struct clk_hw *hw)
 {
@@ -37,8 +73,8 @@ static int flexgen_enable(struct clk_hw
 	struct clk_hw *pgate_hw = &flexgen->pgate.hw;
 	struct clk_hw *fgate_hw = &flexgen->fgate.hw;
 
-	__clk_hw_set_clk(pgate_hw, hw);
-	__clk_hw_set_clk(fgate_hw, hw);
+	pgate_hw->clk = hw->clk;
+	fgate_hw->clk = hw->clk;
 
 	clk_gate_ops.enable(pgate_hw);
 
@@ -54,7 +90,7 @@ static void flexgen_disable(struct clk_h
 	struct clk_hw *fgate_hw = &flexgen->fgate.hw;
 
 	/* disable only the final gate */
-	__clk_hw_set_clk(fgate_hw, hw);
+	fgate_hw->clk = hw->clk;
 
 	clk_gate_ops.disable(fgate_hw);
 
@@ -66,7 +102,7 @@ static int flexgen_is_enabled(struct clk
 	struct flexgen *flexgen = to_flexgen(hw);
 	struct clk_hw *fgate_hw = &flexgen->fgate.hw;
 
-	__clk_hw_set_clk(fgate_hw, hw);
+	fgate_hw->clk = hw->clk;
 
 	if (!clk_gate_ops.is_enabled(fgate_hw))
 		return 0;
@@ -74,12 +110,120 @@ static int flexgen_is_enabled(struct clk
 	return 1;
 }
 
+static unsigned long flexgen_recalc_rate(struct clk_hw *hw,
+					 unsigned long parent_rate)
+{
+	struct flexgen *flexgen = to_flexgen(hw);
+	struct clk_hw *pdiv_hw = &flexgen->pdiv.hw;
+	struct clk_hw *fdiv_hw = &flexgen->fdiv.hw;
+	unsigned long mid_rate;
+	struct clk_hw *sync_hw = &flexgen->sync.hw;
+	struct clk_gate *config = to_clk_gate(sync_hw);
+	bool control = flexgen->control_mode;
+	u32 reg;
+
+	pdiv_hw->clk = hw->clk;
+	fdiv_hw->clk = hw->clk;
+
+	if (control) {
+		reg = readl(config->reg);
+		if (((reg & BIT(config->bit_idx)) >> config->bit_idx) !=
+		    !control) {
+			reg &= ~BIT(config->bit_idx);
+			reg |= !control << config->bit_idx;
+			writel(reg, config->reg);
+		}
+	}
+
+	mid_rate = clk_divider_ops.recalc_rate(pdiv_hw, parent_rate);
+
+	return clk_divider_ops.recalc_rate(fdiv_hw, mid_rate);
+}
+
+static bool flexgen_set_parent_max_beatcnt(struct clk_hw *hw,
+		struct clk *clk_parent, bool new_parent)
+{
+	struct flexgen *flexgen = to_flexgen(hw);
+	int i, j;
+	u8 beatdiv = 0;
+	bool beatdiv_update = false;
+	const struct clk_ops *div_ops = &clk_divider_ops;
+
+	for (i = 0; i < flexgen->beat_parents; i++) {
+		struct clk_hw *beatdiv_hw;
+		u8 beatdiv_max = 0;
+		unsigned long prate = __clk_get_rate(clk_parent);
+
+		if (!flexgen->parents_clks[i].sync)
+			continue;
+
+		if (clk_parent != flexgen->parents_clks[i].clkp)
+			continue;
+
+		beatdiv_hw = &flexgen->beatdiv[i].hw;
+		beatdiv = prate / div_ops->recalc_rate(beatdiv_hw, prate);
+
+		/* Search lowest div */
+		beatdiv_max = 1;
+		for (j = 0; j < FLEXGEN_MAX_OUTPUTS; j++) {
+			struct clk *clkp = flexgen->clks[j].clkp;
+			unsigned long nrate;
+			u8 div;
+
+			if (!flexgen->clks[j].sync)
+				continue;
+
+			if (clk_parent != __clk_get_parent(clkp))
+				continue;
+
+			nrate = flexgen_recalc_rate(__clk_get_hw(clkp), prate);
+			div = vclk_best_div(prate, nrate);
+			if (div > beatdiv_max)
+				beatdiv_max = div;
+		}
+
+		if (beatdiv_max != beatdiv) {
+			unsigned long rate = 1;
+
+			div_ops->set_rate(beatdiv_hw, rate, rate * beatdiv_max);
+			beatdiv_update = true;
+		}
+		break;
+
+	}
+
+	/* Not a semi-sync parent, then leave */
+	if (i == flexgen->beat_parents)
+		return false;
+
+	if (beatdiv_update) {
+		for (i = 0; i < FLEXGEN_MAX_OUTPUTS; i++) {
+			struct clk *clkp = flexgen->clks[i].clkp;
+
+			if (flexgen->clks[i].sync &&
+				(clk_parent ==
+				__clk_get_parent(clkp)) &&
+				flexgen_is_enabled(__clk_get_hw(clkp))) {
+					flexgen_disable(__clk_get_hw(clkp));
+					flexgen_enable(__clk_get_hw(clkp));
+			}
+		}
+	} else {
+		if (new_parent && flexgen_is_enabled(hw)) {
+			flexgen_disable(hw);
+			flexgen_enable(hw);
+		}
+	}
+
+	return beatdiv_update;
+}
+
 static u8 flexgen_get_parent(struct clk_hw *hw)
 {
 	struct flexgen *flexgen = to_flexgen(hw);
 	struct clk_hw *mux_hw = &flexgen->mux.hw;
 
-	__clk_hw_set_clk(mux_hw, hw);
+	mux_hw->clk = hw->clk;
 
 	return clk_mux_ops.get_parent(mux_hw);
 }
@@ -88,16 +232,34 @@ static int flexgen_set_parent(struct clk
 {
 	struct flexgen *flexgen = to_flexgen(hw);
 	struct clk_hw *mux_hw = &flexgen->mux.hw;
+	struct clk *clk_parent = NULL;
+	int ret, i;
+	u8 pid;
 
-	__clk_hw_set_clk(mux_hw, hw);
+	mux_hw->clk = hw->clk;
 
-	return clk_mux_ops.set_parent(mux_hw, index);
-}
+	pid = clk_mux_ops.get_parent(mux_hw);
 
-static inline unsigned long
-clk_best_div(unsigned long parent_rate, unsigned long rate)
-{
-	return parent_rate / rate + ((rate > (2*(parent_rate % rate))) ? 0 : 1);
+	ret = clk_mux_ops.set_parent(mux_hw, index);
+	if (ret)
+		return ret;
+
+	if (!flexgen->control_mode)
+		return ret;
+
+	/* find old parent's clock pointer */
+	for (i = 0; i < flexgen->beat_parents; i++)
+		if (pid == flexgen->parents_clks[i].input_id) {
+			clk_parent = flexgen->parents_clks[i].clkp;
+			break;
+		}
+
+	if (clk_parent)
+		flexgen_set_parent_max_beatcnt(hw, clk_parent, false);
+
+	flexgen_set_parent_max_beatcnt(hw, __clk_get_parent(hw->clk), true);
+
+	return ret;
 }
 
 static long flexgen_round_rate(struct clk_hw *hw, unsigned long rate,
@@ -106,30 +268,83 @@ static long flexgen_round_rate(struct cl
 	unsigned long div;
 
 	/* Round div according to exact prate and wished rate */
-	div = clk_best_div(*prate, rate);
+	div = vclk_best_div(*prate, rate);
 
 	if (__clk_get_flags(hw->clk) & CLK_SET_RATE_PARENT) {
 		*prate = rate * div;
 		return rate;
+	} else {
+		return *prate / div;
 	}
-
-	return *prate / div;
 }
 
-unsigned long flexgen_recalc_rate(struct clk_hw *hw,
-		unsigned long parent_rate)
+static bool flexgen_set_max_beatcnt(struct clk_hw *hw, unsigned long rate,
+				unsigned long prate)
 {
 	struct flexgen *flexgen = to_flexgen(hw);
-	struct clk_hw *pdiv_hw = &flexgen->pdiv.hw;
-	struct clk_hw *fdiv_hw = &flexgen->fdiv.hw;
-	unsigned long mid_rate;
+	unsigned long final_div = 0;
+	int i, j;
+	u8 beatdiv = 0;
+	bool beatdiv_update = false;
+	const struct clk_ops *div_ops = &clk_divider_ops;
+
+	final_div = vclk_best_div(prate, rate);
+
+	for (i = 0; i < flexgen->beat_parents; i++) {
+		struct clk *hw_clkp;
+		struct clk_hw *beatdiv_hw;
+		u8 beatdiv_max = 0;
 
-	__clk_hw_set_clk(pdiv_hw, hw);
-	__clk_hw_set_clk(fdiv_hw, hw);
+		if (!flexgen->parents_clks[i].sync)
+			continue;
 
-	mid_rate = clk_divider_ops.recalc_rate(pdiv_hw, parent_rate);
+		hw_clkp = __clk_get_parent(hw->clk);
+		if (hw_clkp != flexgen->parents_clks[i].clkp)
+			continue;
 
-	return clk_divider_ops.recalc_rate(fdiv_hw, mid_rate);
+		beatdiv_hw = &flexgen->beatdiv[i].hw;
+		beatdiv = prate / div_ops->recalc_rate(beatdiv_hw, prate);
+
+		if (final_div > beatdiv) {
+			div_ops->set_rate(beatdiv_hw, rate, rate * final_div);
+			beatdiv_update = true;
+			break;
+		}
+
+		if (final_div == beatdiv)
+			break;
+
+		/* if (final_div < beatdiv) */
+		beatdiv_max = final_div;
+		for (j = 0; j < FLEXGEN_MAX_OUTPUTS; j++) {
+			struct clk *clkp = flexgen->clks[j].clkp;
+			unsigned long nrate;
+			u8 div;
+
+			if (hw->clk == clkp)
+				continue;
+
+			if (!flexgen->clks[j].sync)
+				continue;
+
+			if (hw_clkp != __clk_get_parent(clkp))
+				continue;
+
+			nrate = flexgen_recalc_rate(__clk_get_hw(clkp), prate);
+			div = vclk_best_div(prate, nrate);
+			if (div > beatdiv_max)
+				beatdiv_max = div;
+		}
+
+		if (beatdiv_max != beatdiv) {
+			div_ops->set_rate(beatdiv_hw, rate, rate * beatdiv_max);
+			beatdiv_update = true;
+		}
+		break;
+
+	}
+
+	return beatdiv_update;
 }
 
 static int flexgen_set_rate(struct clk_hw *hw, unsigned long rate,
@@ -138,26 +353,107 @@ static int flexgen_set_rate(struct clk_h
 	struct flexgen *flexgen = to_flexgen(hw);
 	struct clk_hw *pdiv_hw = &flexgen->pdiv.hw;
 	struct clk_hw *fdiv_hw = &flexgen->fdiv.hw;
-	unsigned long div = 0;
-	int ret = 0;
+	struct clk_hw *sync_hw = &flexgen->sync.hw;
+	struct clk_gate *config = to_clk_gate(sync_hw);
+	bool control = flexgen->control_mode;
+	unsigned long pre_div = 0, final_div = 0;
+	unsigned long fmax = BIT(flexgen->fdiv.width);
+	unsigned long pmax = BIT(flexgen->pdiv.width);
+	int ret = 0, i;
+	bool beatdiv_update = false;
+	u32 reg;
+
+	if (rate == flexgen_recalc_rate(hw, parent_rate))
+		return ret;
+
+	pdiv_hw->clk = hw->clk;
+	fdiv_hw->clk = hw->clk;
+
+	final_div = vclk_best_div(parent_rate, rate);
+	pre_div = 1; /* bypass prediv */
+
+	/* Computing predivider & final divider ratios */
+	if (final_div > fmax) {
+		unsigned long f, p, div = final_div;
+
+		final_div = fmax;
+		for (f = fmax; f; f--) {
+			p = div / f;
+			if (!p)
+				continue;
+			if (p > pmax) {
+				if (abs(div - (f * pmax)) <
+				    abs(div - (final_div * pre_div))) {
+					final_div = f;
+					pre_div = pmax;
+				}
+				break;
+			}
+			if (abs(div - (f * p)) <
+			    abs(div - (final_div * pre_div))) {
+				/* Best case */
+				final_div = f;
+				pre_div = p;
+			}
+		}
+	}
 
-	__clk_hw_set_clk(pdiv_hw, hw);
-	__clk_hw_set_clk(fdiv_hw, hw);
+	if (control) {
+		reg = readl(config->reg);
+		reg &= ~BIT(config->bit_idx);
+		reg |= !control << config->bit_idx;
+		writel(reg, config->reg);
 
-	div = clk_best_div(parent_rate, rate);
+		beatdiv_update = flexgen_set_max_beatcnt(hw, rate,
+							 rate * final_div);
+	}
 
 	/*
-	* pdiv is mainly targeted for low freq results, while fdiv
-	* should be used for div <= 64. The other way round can
-	* lead to 'duty cycle' issues.
-	*/
-
-	if (div <= 64) {
-		clk_divider_ops.set_rate(pdiv_hw, parent_rate, parent_rate);
-		ret = clk_divider_ops.set_rate(fdiv_hw, rate, rate * div);
+	 * Prediv is mainly targeted for low freq results, while final_div is
+	 * the first to use for divs < 64.
+	 * The other way could lead to 'duty cycle' issues.
+	 */
+	clk_divider_ops.set_rate(pdiv_hw, rate, rate * pre_div);
+	ret = clk_divider_ops.set_rate(fdiv_hw, rate, rate * final_div);
+
+	pr_debug("%s: requested div=%lu => prediv=%lu, findiv=%lu, sync=%d\n",
+		__clk_get_name(hw->clk), vclk_best_div(parent_rate, rate),
+		pre_div, final_div, control);
+
+	if (!control)
+		return ret;
+
+	if (beatdiv_update) {
+		for (i = 0; i < FLEXGEN_MAX_OUTPUTS; i++) {
+			struct clk *clkp = flexgen->clks[i].clkp;
+
+			if (flexgen->clks[i].sync &&
+			    (__clk_get_parent(hw->clk) ==
+			    __clk_get_parent(clkp)) &&
+			    flexgen_is_enabled(__clk_get_hw(clkp))) {
+					flexgen_disable(__clk_get_hw(clkp));
+					flexgen_enable(__clk_get_hw(clkp));
+			}
+		}
 	} else {
-		clk_divider_ops.set_rate(fdiv_hw, parent_rate, parent_rate);
-		ret = clk_divider_ops.set_rate(pdiv_hw, rate, rate * div);
+		u8 pid;
+		struct clk_hw *mux_hw = &flexgen->mux.hw;
+		struct clk *clk_parent = NULL;
+
+		mux_hw->clk = hw->clk;
+		pid = clk_mux_ops.get_parent(mux_hw);
+
+		for (i = 0; i < flexgen->beat_parents; i++)
+			if (pid == flexgen->parents_clks[i].input_id) {
+				clk_parent = flexgen->parents_clks[i].clkp;
+				break;
+			}
+
+		if (clk_parent && flexgen->parents_clks[i].sync
+		    && flexgen_is_enabled(hw)) {
+				flexgen_disable(hw);
+				flexgen_enable(hw);
+		}
 	}
 
 	return ret;
@@ -174,14 +470,16 @@ static const struct clk_ops flexgen_ops
 	.set_rate = flexgen_set_rate,
 };
 
-struct clk *clk_register_flexgen(const char *name,
-				const char **parent_names, u8 num_parents,
-				void __iomem *reg, spinlock_t *lock, u32 idx,
-				unsigned long flexgen_flags) {
+static struct
+clk *clk_register_flexgen(const char *name,
+			  const char **parent_names, u8 num_parents,
+			  void __iomem *reg, spinlock_t *lock, u32 idx,
+			  unsigned long flexgen_flags,
+			  struct clkgen_data *data) {
 	struct flexgen *fgxbar;
 	struct clk *clk;
 	struct clk_init_data init;
-	u32  xbar_shift;
+	u32  xbar_shift, i;
 	void __iomem *xbar_reg, *fdiv_reg;
 
 	fgxbar = kzalloc(sizeof(struct flexgen), GFP_KERNEL);
@@ -190,7 +488,7 @@ struct clk *clk_register_flexgen(const c
 
 	init.name = name;
 	init.ops = &flexgen_ops;
-	init.flags = CLK_IS_BASIC | flexgen_flags;
+	init.flags = CLK_IS_BASIC | CLK_GET_RATE_NOCACHE | flexgen_flags;
 	init.parent_names = parent_names;
 	init.num_parents = num_parents;
 
@@ -226,16 +524,35 @@ struct clk *clk_register_flexgen(const c
 	fgxbar->fdiv.reg = fdiv_reg;
 	fgxbar->fdiv.width = 6;
 
+	/* Final divider sync config */
+	fgxbar->sync.lock = lock;
+	fgxbar->sync.reg = fdiv_reg;
+	fgxbar->sync.bit_idx = 7;
+
+	fgxbar->control_mode = (data) ? data->clks[idx].sync : false;
+
+	if (fgxbar->control_mode) {
+		/* beatcnt divider config */
+		fgxbar->beat_parents = data->beat_parents;
+		for (i = 0; i < data->beat_parents; i++) {
+			fgxbar->beatdiv[i].lock = lock;
+			fgxbar->beatdiv[i].reg = reg + data->beatcnt[i].offset;
+			fgxbar->beatdiv[i].width = 8;
+			fgxbar->beatdiv[i].shift = 8 * i;
+		}
+		fgxbar->parents_clks = data->parent_clks;
+		fgxbar->clks = data->clks;
+	}
+
 	fgxbar->hw.init = &init;
 
 	clk = clk_register(NULL, &fgxbar->hw);
 	if (IS_ERR(clk))
 		kfree(fgxbar);
 	else
-		pr_debug("%s: parent %s rate %u\n",
-			__clk_get_name(clk),
-			__clk_get_name(clk_get_parent(clk)),
-			(unsigned int)clk_get_rate(clk));
+		pr_debug("%s: parent %s rate %u\n",  __clk_get_name(clk),
+			 __clk_get_name(clk_get_parent(clk)),
+			 (unsigned int)clk_get_rate(clk));
 	return clk;
 }
 
@@ -249,7 +566,7 @@ static const char ** __init flexgen_get_
 	if (WARN_ON(nparents <= 0))
 		return NULL;
 
-	parents = kcalloc(nparents, sizeof(const char *), GFP_KERNEL);
+	parents = kzalloc(nparents * sizeof(const char *), GFP_KERNEL);
 	if (!parents)
 		return NULL;
 
@@ -260,15 +577,151 @@ static const char ** __init flexgen_get_
 	return parents;
 }
 
-void __init st_of_flexgen_setup(struct device_node *np)
+static struct clkgen_data clkgen_d0 = {
+	.clk_flags = CLK_SET_RATE_PARENT,
+	.clk_mode = 0,
+};
+
+static struct clkgen_data clkgen_d2 = {
+	.clk_flags = CLK_SET_RATE_PARENT,
+	.clk_mode = 1,
+	.beat_parents = 4,
+	.parent_clks = { {0, NULL, 1},
+			 {1, NULL, 1},
+			 {6, NULL, 1},
+			 {7, NULL, 0}, },
+	.beatcnt = { CLKGEN_FIELD(0x26c, 0xff, 0),
+		     CLKGEN_FIELD(0x26c, 0xff, 8),
+		     CLKGEN_FIELD(0x26c, 0xff, 16),
+		     CLKGEN_FIELD(0x26c, 0xff, 24) },
+	.clks = { {NULL, 1},
+		  {NULL, 1},
+		  {NULL, 1},
+		  {NULL, 1},
+		  {NULL, 1},
+		  {NULL, 1},
+		  {NULL, 1},
+		  {NULL, 1},
+		  {NULL, 1},
+		  {NULL, 0},
+		  {NULL, 0},
+		  {NULL, 1},
+		  {NULL, 0},
+		  {NULL, 1},
+		  {NULL, 0},
+		  {NULL, 0}, },
+};
+
+static struct clkgen_data clkgen_d2_h418 = {
+	.clk_flags = CLK_SET_RATE_PARENT,
+	.clk_mode = 1,
+	.beat_parents = 4,
+	.parent_clks = { {0, NULL, 1},
+			 {1, NULL, 1},
+			 {6, NULL, 1},
+			 {7, NULL, 0}, },
+	.beatcnt = { CLKGEN_FIELD(0x26c, 0xff, 0),
+		     CLKGEN_FIELD(0x26c, 0xff, 8),
+		     CLKGEN_FIELD(0x26c, 0xff, 16),
+		     CLKGEN_FIELD(0x26c, 0xff, 24) },
+	.clks = { {NULL, 1}, /* CLK_PIX_MAIN_DISP */
+		  {NULL, 0},
+		  {NULL, 0},
+		  {NULL, 0},
+		  {NULL, 0},
+		  {NULL, 1}, /* CLK_TMDS_HDMI_DIV2 */
+		  {NULL, 1}, /* CLK_PIX_AUX_DISP */
+		  {NULL, 1}, /* CLK_DENC */
+		  {NULL, 1}, /* CLK_PIX_HDDAC */
+		  {NULL, 1}, /* CLK_HDDAC */
+		  {NULL, 1}, /* CLK_SDDAC */
+		  {NULL, 1}, /* CLK_PIX_DVO */
+		  {NULL, 1}, /* CLK_DVO */
+		  {NULL, 1}, /* CLK_PIX_HDMI */
+		  {NULL, 1}, /* CLK_TMDS_HDMI */
+		  {NULL, 1}, }, /* CLK_REF_HDMIPHY */
+};
+
+static struct of_device_id flexgen_of_match[] = {
+	{
+		.compatible = "st,stih407-clkgend0",
+		.data = &clkgen_d0,
+	},
+	{
+		.compatible = "st,stih407-clkgend2",
+		.data = &clkgen_d2,
+	},
+	{
+		.compatible = "st,stih418-clkgend2",
+		.data = &clkgen_d2_h418,
+	},
+	{}
+};
+
+struct clkgen_flex_conf {
+	unsigned long flex_flags[FLEXGEN_MAX_OUTPUTS];
+};
+
+static struct clkgen_flex_conf st_flexgen_conf_407_c0 = {
+	.flex_flags = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
+			0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
+			0, 0, 0, 0, 0, 0, 0, 0, 0, CLK_IGNORE_UNUSED,
+			CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED },
+};
+
+static struct clkgen_flex_conf st_flexgen_conf_407_d2 = {
+	.flex_flags = { CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED,
+			CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED,
+			CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED,
+			CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED,
+			CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED,
+			CLK_IGNORE_UNUSED },
+};
+
+static struct clkgen_flex_conf st_flexgen_conf_418_c0 = {
+	.flex_flags = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
+			0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
+			0, 0, 0, 0, 0, 0, 0, 0, 0, CLK_IGNORE_UNUSED,
+			CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED, 0, 0, 0, 0, 0,
+			0, 0, CLK_IGNORE_UNUSED },
+};
+
+static struct of_device_id flexconf_of_match[] = {
+	{
+		.compatible = "st,stih407-flexgen-conf-c0",
+		.data = &st_flexgen_conf_407_c0,
+	},
+	{
+		.compatible = "st,stih407-flexgen-conf-d2",
+		.data = &st_flexgen_conf_407_d2,
+	},
+	{
+		.compatible = "st,stih418-flexgen-conf-c0",
+		.data = &st_flexgen_conf_418_c0,
+	},
+	{}
+};
+
+static void __init st_of_flexgen_setup(struct device_node *np)
 {
 	struct device_node *pnode;
 	void __iomem *reg;
-	struct clk_onecell_data *clk_data;
+	struct clk_onecell_data *clk_data = NULL;
 	const char **parents;
 	int num_parents, i;
-	spinlock_t *rlock = NULL;
-	unsigned long flex_flags = 0;
+	spinlock_t *rlock;
+	const struct of_device_id *match;
+	struct clkgen_data *data = NULL;
+	struct clkgen_flex_conf *conf_data = NULL;
+	unsigned long clk_flags = 0;
+
+	rlock = kzalloc(sizeof(spinlock_t), GFP_KERNEL);
+	if (!rlock) {
+		pr_err("%s: Failed to allocate lock\n", __func__);
+		return;
+	}
+
+	spin_lock_init(rlock);
 
 	pnode = of_get_parent(np);
 	if (!pnode)
@@ -278,10 +731,36 @@ void __init st_of_flexgen_setup(struct d
 	if (!reg)
 		return;
 
+	match = of_match_node(flexconf_of_match, np);
+	if (match)
+		conf_data = (struct clkgen_flex_conf *)match->data;
+
 	parents = flexgen_get_parents(np, &num_parents);
 	if (!parents)
 		return;
 
+	match = of_match_node(flexgen_of_match, np);
+	if (match) {
+		data = (struct clkgen_data *)match->data;
+		clk_flags = data->clk_flags;
+	}
+
+	if (data && data->clk_mode)
+		/* get parent clks */
+		for (i = 0; i < data->beat_parents; i++) {
+			u32 pid = data->parent_clks[i].input_id;
+
+			if (!data->parent_clks[i].sync)
+				continue;
+
+			if (pid >= num_parents)
+				goto err;
+
+			data->parent_clks[i].clkp = __clk_lookup(parents[pid]);
+			if (IS_ERR(data->parent_clks[i].clkp))
+				goto err;
+		}
+
 	clk_data = kzalloc(sizeof(*clk_data), GFP_KERNEL);
 	if (!clk_data)
 		goto err;
@@ -290,22 +769,20 @@ void __init st_of_flexgen_setup(struct d
 			"clock-output-names");
 	if (clk_data->clk_num <= 0) {
 		pr_err("%s: Failed to get number of output clocks (%d)",
-				__func__, clk_data->clk_num);
+		       __func__, clk_data->clk_num);
 		goto err;
 	}
 
-	clk_data->clks = kcalloc(clk_data->clk_num, sizeof(struct clk *),
+	clk_data->clks = kzalloc(clk_data->clk_num * sizeof(struct clk *),
 			GFP_KERNEL);
 	if (!clk_data->clks)
 		goto err;
 
-	rlock = kzalloc(sizeof(spinlock_t), GFP_KERNEL);
-	if (!rlock)
-		goto err;
-
 	for (i = 0; i < clk_data->clk_num; i++) {
 		struct clk *clk;
 		const char *clk_name;
+		unsigned long flags = ((conf_data) ?
+				       conf_data->flex_flags[i] : 0);
 
 		if (of_property_read_string_index(np, "clock-output-names",
 						  i, &clk_name)) {
@@ -319,12 +796,15 @@ void __init st_of_flexgen_setup(struct d
 			continue;
 
 		clk = clk_register_flexgen(clk_name, parents, num_parents,
-					   reg, rlock, i, flex_flags);
+					   reg, rlock, i, clk_flags | flags,
+					   data);
 
 		if (IS_ERR(clk))
 			goto err;
 
 		clk_data->clks[i] = clk;
+		if (data && data->clks[i].sync)
+			data->clks[i].clkp = clk;
 	}
 
 	kfree(parents);
@@ -337,6 +817,146 @@ err:
 		kfree(clk_data->clks);
 	kfree(clk_data);
 	kfree(parents);
-	kfree(rlock);
+	return;
 }
 CLK_OF_DECLARE(flexgen, "st,flexgen", st_of_flexgen_setup);
+
+/*
+ * Implementation for the Flexgen MuxDiv reference clocks
+ * Last 2 entries in "clock-output-names" are 'ext_refclkout0' and
+ * 'ext_refclkout1'. Hence if "flexgen-ref" is used then
+ * last 2 entries need to be defined (either by name or "")
+ */
+#define FLEXGEN_REF_MUX_OFFSET 0x0
+#define FLEXGEN_REF_DIV_OFFSET 0xC
+
+static void __init st_of_flexgen_ref_setup(struct device_node *np)
+{
+	void __iomem *reg;
+	struct clk_onecell_data *clk_data = NULL;
+	const char **parents;
+	int num_parents, i;
+
+	reg = of_iomap(np, 0);
+	if (!reg)
+		return;
+
+	parents = flexgen_get_parents(np, &num_parents);
+	if (!parents)
+		return;
+
+	clk_data = kzalloc(sizeof(*clk_data), GFP_KERNEL);
+	if (!clk_data)
+		goto err;
+
+	clk_data->clk_num = of_property_count_strings(np ,
+			"clock-output-names");
+	if (clk_data->clk_num <= 0) {
+		pr_err("%s: Failed to get number of output clocks (%d)",
+		       __func__, clk_data->clk_num);
+		goto err;
+	}
+
+	clk_data->clks = kzalloc(clk_data->clk_num * sizeof(struct clk *),
+				 GFP_KERNEL);
+	if (!clk_data->clks)
+		goto err;
+
+	for (i = 0; i < clk_data->clk_num; i++) {
+		struct clk *clk;
+		const char *clk_name;
+		struct clk_divider *div;
+		struct clk_mux *mux;
+
+		if (of_property_read_string_index(np, "clock-output-names",
+						  i, &clk_name)) {
+			break;
+		}
+
+		/*
+		 * If we read an empty clock name then the output is unused
+		 */
+		if (*clk_name == '\0')
+			continue;
+
+		if (i < (clk_data->clk_num-2)) {
+			clk = clk_register_mux(NULL, clk_name, parents,
+					       num_parents, 0,
+					       reg + FLEXGEN_REF_MUX_OFFSET,
+					       4 * i, 1, 0, NULL);
+
+			if (IS_ERR(clk))
+				goto err;
+		} else {
+			div = kzalloc(sizeof(struct clk_divider), GFP_KERNEL);
+			if (!div)
+				break;
+
+			mux = kzalloc(sizeof(struct clk_mux), GFP_KERNEL);
+			if (!mux) {
+				kfree(div);
+				break;
+			}
+
+			div->reg = reg + FLEXGEN_REF_DIV_OFFSET;
+			div->shift = 4 * i;
+			div->width = 4;
+
+			mux->reg = reg + FLEXGEN_REF_MUX_OFFSET;
+			mux->shift = 4 * i;
+			mux->mask = 0x1;
+
+			clk = clk_register_composite(NULL, clk_name, parents,
+						     num_parents, &mux->hw,
+						     &clk_mux_ops, &div->hw,
+						     &clk_divider_ops,
+						     NULL, NULL,
+						     CLK_GET_RATE_NOCACHE);
+			if (IS_ERR(clk)) {
+				kfree(div);
+				kfree(mux);
+				goto err;
+			}
+		}
+
+		pr_debug("%s: parent %s rate %u\n",
+			 __clk_get_name(clk),
+			 __clk_get_name(clk_get_parent(clk)),
+			 (unsigned int)clk_get_rate(clk));
+
+		clk_data->clks[i] = clk;
+	}
+
+	kfree(parents);
+	of_clk_add_provider(np, of_clk_src_onecell_get, clk_data);
+
+	return;
+
+err:
+	for (i = 0; i < clk_data->clk_num; i++) {
+		struct clk_composite *composite;
+		struct clk_hw *hw;
+
+		if (!clk_data->clks[i])
+			continue;
+
+		hw = __clk_get_hw(clk_data->clks[i]);
+
+		if (i < (clk_data->clk_num-2)) {
+			kfree(container_of(hw, struct clk_mux, hw));
+		} else {
+			composite = container_of(hw, struct clk_composite, hw);
+			kfree(container_of(composite->rate_hw,
+					   struct clk_divider, hw));
+			kfree(container_of(composite->mux_hw,
+					   struct clk_mux, hw));
+		}
+
+		kfree(clk_data->clks[i]);
+	}
+	if (clk_data)
+		kfree(clk_data->clks);
+	kfree(clk_data);
+	kfree(parents);
+}
+CLK_OF_DECLARE(flexgen_ref, "st,flexgen-ref", st_of_flexgen_ref_setup);
diff -urNp a/drivers/clk/st/clkgen-fsyn.c b/drivers/clk/st/clkgen-fsyn.c
--- a/drivers/clk/st/clkgen-fsyn.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/clk/st/clkgen-fsyn.c	2019-09-26 21:23:27.308619400 +0100
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2014 STMicroelectronics R&D Ltd
+ * Copyright (C) 2013 STMicroelectronics R&D Ltd
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 as
@@ -13,11 +13,22 @@
  * Pankaj Dev <pankaj.dev@st.com>.
  */
 
+#include <linux/kernel.h>
+#include <linux/module.h>
+#include <linux/spinlock.h>
 #include <linux/slab.h>
+#include <linux/io.h>
+#include <linux/math64.h>
+#include <linux/err.h>
+#include <linux/string.h>
+#include <linux/of.h>
 #include <linux/of_address.h>
+#include <linux/regmap.h>
+#include <linux/mfd/syscon.h>
 #include <linux/clk-provider.h>
 
 #include "clkgen.h"
+#include "vclk_algos.h"
 
 /*
  * Maximum input clock to the PLL before we divide it down by 2
@@ -33,86 +44,7 @@
 
 #define QUADFS_MAX_CHAN 4
 
-struct stm_fs {
-	unsigned long ndiv;
-	unsigned long mdiv;
-	unsigned long pe;
-	unsigned long sdiv;
-	unsigned long nsdiv;
-};
-
-static const struct stm_fs fs216c65_rtbl[] = {
-	{ .mdiv = 0x1f, .pe = 0x0,	.sdiv = 0x7,	.nsdiv = 0 },	/* 312.5 Khz */
-	{ .mdiv = 0x17, .pe = 0x25ed,	.sdiv = 0x1,	.nsdiv = 0 },	/* 27    MHz */
-	{ .mdiv = 0x1a, .pe = 0x7b36,	.sdiv = 0x2,	.nsdiv = 1 },	/* 36.87 MHz */
-	{ .mdiv = 0x13, .pe = 0x0,	.sdiv = 0x2,	.nsdiv = 1 },	/* 48    MHz */
-	{ .mdiv = 0x11, .pe = 0x1c72,	.sdiv = 0x1,	.nsdiv = 1 },	/* 108   MHz */
-};
-
-static const struct stm_fs fs432c65_rtbl[] = {
-	{ .mdiv = 0x1f, .pe = 0x0,	.sdiv = 0x7,	.nsdiv = 0 },	/* 625     Khz */
-	{ .mdiv = 0x13, .pe = 0x777c,	.sdiv = 0x4,	.nsdiv = 1 },	/* 25.175  MHz */
-	{ .mdiv = 0x19, .pe = 0x4d35,	.sdiv = 0x2,	.nsdiv = 0 },	/* 25.200  MHz */
-	{ .mdiv = 0x11, .pe = 0x1c72,	.sdiv = 0x4,	.nsdiv = 1 },	/* 27.000  MHz */
-	{ .mdiv = 0x17, .pe = 0x28f5,	.sdiv = 0x2,	.nsdiv = 0 },	/* 27.027  MHz */
-	{ .mdiv = 0x16, .pe = 0x3359,	.sdiv = 0x2,	.nsdiv = 0 },	/* 28.320  MHz */
-	{ .mdiv = 0x1f, .pe = 0x2083,	.sdiv = 0x3,	.nsdiv = 1 },	/* 30.240  MHz */
-	{ .mdiv = 0x1e, .pe = 0x430d,	.sdiv = 0x3,	.nsdiv = 1 },	/* 31.500  MHz */
-	{ .mdiv = 0x17, .pe = 0x0,	.sdiv = 0x3,	.nsdiv = 1 },	/* 40.000  MHz */
-	{ .mdiv = 0x19, .pe = 0x121a,	.sdiv = 0x1,	.nsdiv = 0 },	/* 49.500  MHz */
-	{ .mdiv = 0x13, .pe = 0x6667,	.sdiv = 0x3,	.nsdiv = 1 },	/* 50.000  MHz */
-	{ .mdiv = 0x10, .pe = 0x1ee6,	.sdiv = 0x3,	.nsdiv = 1 },	/* 57.284  MHz */
-	{ .mdiv = 0x1d, .pe = 0x3b14,	.sdiv = 0x2,	.nsdiv = 1 },	/* 65.000  MHz */
-	{ .mdiv = 0x12, .pe = 0x7c65,	.sdiv = 0x1,	.nsdiv = 0 },	/* 71.000  MHz */
-	{ .mdiv = 0x19, .pe = 0xecd,	.sdiv = 0x2,	.nsdiv = 1 },	/* 74.176  MHz */
-	{ .mdiv = 0x19, .pe = 0x121a,	.sdiv = 0x2,	.nsdiv = 1 },	/* 74.250  MHz */
-	{ .mdiv = 0x19, .pe = 0x3334,	.sdiv = 0x2,	.nsdiv = 1 },	/* 75.000  MHz */
-	{ .mdiv = 0x18, .pe = 0x5138,	.sdiv = 0x2,	.nsdiv = 1 },	/* 78.800  MHz */
-	{ .mdiv = 0x1d, .pe = 0x77d,	.sdiv = 0x0,	.nsdiv = 0 },	/* 85.500  MHz */
-	{ .mdiv = 0x1c, .pe = 0x13d5,	.sdiv = 0x0,	.nsdiv = 0 },	/* 88.750  MHz */
-	{ .mdiv = 0x11, .pe = 0x1c72,	.sdiv = 0x2,	.nsdiv = 1 },	/* 108.000 MHz */
-	{ .mdiv = 0x17, .pe = 0x28f5,	.sdiv = 0x0,	.nsdiv = 0 },	/* 108.108 MHz */
-	{ .mdiv = 0x10, .pe = 0x6e26,	.sdiv = 0x2,	.nsdiv = 1 },	/* 118.963 MHz */
-	{ .mdiv = 0x15, .pe = 0x3e63,	.sdiv = 0x0,	.nsdiv = 0 },	/* 119.000 MHz */
-	{ .mdiv = 0x1c, .pe = 0x471d,	.sdiv = 0x1,	.nsdiv = 1 },	/* 135.000 MHz */
-	{ .mdiv = 0x19, .pe = 0xecd,	.sdiv = 0x1,	.nsdiv = 1 },	/* 148.352 MHz */
-	{ .mdiv = 0x19, .pe = 0x121a,	.sdiv = 0x1,	.nsdiv = 1 },	/* 148.500 MHz */
-	{ .mdiv = 0x19, .pe = 0x121a,	.sdiv = 0x0,	.nsdiv = 1 },	/* 297     MHz */
-};
-
-static const struct stm_fs fs660c32_rtbl[] = {
-	{ .mdiv = 0x14, .pe = 0x376b,	.sdiv = 0x4,	.nsdiv = 1 },	/* 25.175  MHz */
-	{ .mdiv = 0x14, .pe = 0x30c3,	.sdiv = 0x4,	.nsdiv = 1 },	/* 25.200  MHz */
-	{ .mdiv = 0x10, .pe = 0x71c7,	.sdiv = 0x4,	.nsdiv = 1 },	/* 27.000  MHz */
-	{ .mdiv = 0x00, .pe = 0x47af,	.sdiv = 0x3,	.nsdiv = 0 },	/* 27.027  MHz */
-	{ .mdiv = 0x0e, .pe = 0x4e1a,	.sdiv = 0x4,	.nsdiv = 1 },	/* 28.320  MHz */
-	{ .mdiv = 0x0b, .pe = 0x534d,	.sdiv = 0x4,	.nsdiv = 1 },	/* 30.240  MHz */
-	{ .mdiv = 0x17, .pe = 0x6fbf,	.sdiv = 0x2,	.nsdiv = 0 },	/* 31.500  MHz */
-	{ .mdiv = 0x01, .pe = 0x0,	.sdiv = 0x4,	.nsdiv = 1 },	/* 40.000  MHz */
-	{ .mdiv = 0x15, .pe = 0x2aab,	.sdiv = 0x3,	.nsdiv = 1 },	/* 49.500  MHz */
-	{ .mdiv = 0x14, .pe = 0x6666,	.sdiv = 0x3,	.nsdiv = 1 },	/* 50.000  MHz */
-	{ .mdiv = 0x1d, .pe = 0x395f,	.sdiv = 0x1,	.nsdiv = 0 },	/* 57.284  MHz */
-	{ .mdiv = 0x08, .pe = 0x4ec5,	.sdiv = 0x3,	.nsdiv = 1 },	/* 65.000  MHz */
-	{ .mdiv = 0x05, .pe = 0x1770,	.sdiv = 0x3,	.nsdiv = 1 },	/* 71.000  MHz */
-	{ .mdiv = 0x03, .pe = 0x4ba7,	.sdiv = 0x3,	.nsdiv = 1 },	/* 74.176  MHz */
-	{ .mdiv = 0x0f, .pe = 0x3426,	.sdiv = 0x1,	.nsdiv = 0 },	/* 74.250  MHz */
-	{ .mdiv = 0x0e, .pe = 0x7777,	.sdiv = 0x1,	.nsdiv = 0 },	/* 75.000  MHz */
-	{ .mdiv = 0x01, .pe = 0x4053,	.sdiv = 0x3,	.nsdiv = 1 },	/* 78.800  MHz */
-	{ .mdiv = 0x09, .pe = 0x15b5,	.sdiv = 0x1,	.nsdiv = 0 },	/* 85.500  MHz */
-	{ .mdiv = 0x1b, .pe = 0x3f19,	.sdiv = 0x2,	.nsdiv = 1 },	/* 88.750  MHz */
-	{ .mdiv = 0x10, .pe = 0x71c7,	.sdiv = 0x2,	.nsdiv = 1 },	/* 108.000 MHz */
-	{ .mdiv = 0x00, .pe = 0x47af,	.sdiv = 0x1,	.nsdiv = 0 },	/* 108.108 MHz */
-	{ .mdiv = 0x0c, .pe = 0x3118,	.sdiv = 0x2,	.nsdiv = 1 },	/* 118.963 MHz */
-	{ .mdiv = 0x0c, .pe = 0x2f54,	.sdiv = 0x2,	.nsdiv = 1 },	/* 119.000 MHz */
-	{ .mdiv = 0x07, .pe = 0xe39,	.sdiv = 0x2,	.nsdiv = 1 },	/* 135.000 MHz */
-	{ .mdiv = 0x03, .pe = 0x4ba7,	.sdiv = 0x2,	.nsdiv = 1 },	/* 148.352 MHz */
-	{ .mdiv = 0x0f, .pe = 0x3426,	.sdiv = 0x0,	.nsdiv = 0 },	/* 148.500 MHz */
-	{ .mdiv = 0x03, .pe = 0x4ba7,	.sdiv = 0x1,	.nsdiv = 1 },	/* 296.704 MHz */
-	{ .mdiv = 0x03, .pe = 0x471c,	.sdiv = 0x1,	.nsdiv = 1 },	/* 297.000 MHz */
-	{ .mdiv = 0x00, .pe = 0x295f,	.sdiv = 0x1,	.nsdiv = 1 },	/* 326.700 MHz */
-	{ .mdiv = 0x1f, .pe = 0x3633,	.sdiv = 0x0,	.nsdiv = 1 },	/* 333.000 MHz */
-	{ .mdiv = 0x1c, .pe = 0x0,	.sdiv = 0x0,	.nsdiv = 1 },	/* 352.000 Mhz */
-};
+#define NSDIV_BIN(nsdiv) ((nsdiv == 1) ? 1:0)
 
 struct clkgen_quadfs_data {
 	bool reset_present;
@@ -122,6 +54,7 @@ struct clkgen_quadfs_data {
 	bool standby_polarity;
 	bool nsdiv_present;
 	bool nrst_present;
+	bool nrst_polarity;
 	struct clkgen_field ndiv;
 	struct clkgen_field ref_bw;
 	struct clkgen_field nreset;
@@ -135,12 +68,12 @@ struct clkgen_quadfs_data {
 	struct clkgen_field pe[QUADFS_MAX_CHAN];
 	struct clkgen_field sdiv[QUADFS_MAX_CHAN];
 	struct clkgen_field nsdiv[QUADFS_MAX_CHAN];
+	u8 fixed_nsdiv[QUADFS_MAX_CHAN];
+
+	struct clkgen_field init_reg1;
 
 	const struct clk_ops *pll_ops;
-	const struct stm_fs *rtbl;
-	u8 rtbl_cnt;
-	int  (*get_rate)(unsigned long , const struct stm_fs *,
-			unsigned long *);
+	const struct clk_ops *fsynth_ops;
 };
 
 static const struct clk_ops st_quadfs_pll_c65_ops;
@@ -149,19 +82,81 @@ static const struct clk_ops st_quadfs_fs
 static const struct clk_ops st_quadfs_fs432c65_ops;
 static const struct clk_ops st_quadfs_fs660c32_ops;
 
-static int clk_fs216c65_get_rate(unsigned long, const struct stm_fs *,
-		unsigned long *);
-static int clk_fs432c65_get_rate(unsigned long, const struct stm_fs *,
-		unsigned long *);
-static int clk_fs660c32_dig_get_rate(unsigned long, const struct stm_fs *,
-		unsigned long *);
 /*
  * Values for all of the standalone instances of this clock
  * generator found in STiH415 and STiH416 SYSCFG register banks. Note
  * that the individual channel standby control bits (nsb) are in the
  * first register along with the PLL control bits.
  */
-static const struct clkgen_quadfs_data st_fs216c65_416 = {
+static struct clkgen_quadfs_data st_fs216c65_B_415 = {
+	/* 415 specific */
+	.npda = CLKGEN_FIELD(0x0, 0x1, 4),
+	.nsb = { CLKGEN_FIELD(0x44, 0x1, 0),
+		 CLKGEN_FIELD(0x44, 0x1, 1),
+		 CLKGEN_FIELD(0x44, 0x1, 2),
+		 CLKGEN_FIELD(0x44, 0x1, 3) },
+	.fixed_nsdiv = {1, 1, 1, 1},
+	.mdiv = { CLKGEN_FIELD(0x4, 0x1f, 0),
+		  CLKGEN_FIELD(0x14, 0x1f, 0),
+		  CLKGEN_FIELD(0x24, 0x1f, 0),
+		  CLKGEN_FIELD(0x34, 0x1f, 0) },
+	.en = { CLKGEN_FIELD(0xc, 0x1, 0),
+		CLKGEN_FIELD(0x1c, 0x1, 0),
+		CLKGEN_FIELD(0x2c, 0x1, 0),
+		CLKGEN_FIELD(0x3c, 0x1, 0) },
+	.ndiv = CLKGEN_FIELD(0x0, 0x1, 0),
+	.bwfilter_present = true,
+	.ref_bw = CLKGEN_FIELD(0x0, 0x3, 1),
+	.pe = { CLKGEN_FIELD(0x8, 0xffff, 0),
+		CLKGEN_FIELD(0x18, 0xffff, 0),
+		CLKGEN_FIELD(0x28, 0xffff, 0),
+		CLKGEN_FIELD(0x38, 0xffff, 0) },
+	.sdiv = { CLKGEN_FIELD(0x10, 0x7, 0),
+		  CLKGEN_FIELD(0x20, 0x7, 0),
+		  CLKGEN_FIELD(0x30, 0x7, 0),
+		  CLKGEN_FIELD(0x40, 0x7, 0) },
+	.reset_present = true,
+	.nreset = CLKGEN_FIELD(0x0, 0x1, 3),
+	/* unlock reg access */
+	.init_reg1 = CLKGEN_FIELD(0xc0de, 0xffff, 0),
+	.pll_ops	= &st_quadfs_pll_c65_ops,
+	.fsynth_ops	= &st_quadfs_fs216c65_ops,
+};
+
+static struct clkgen_quadfs_data st_fs216c65_415 = {
+	/* 415 specific */
+	.npda = CLKGEN_FIELD(0x0, 0x1, 14),
+	.nsb = { CLKGEN_FIELD(0x0, 0x1, 10),
+		 CLKGEN_FIELD(0x0, 0x1, 11),
+		 CLKGEN_FIELD(0x0, 0x1, 12),
+		 CLKGEN_FIELD(0x0, 0x1, 13) },
+	.fixed_nsdiv = {1, 1, 1, 1},
+	.mdiv = { CLKGEN_FIELD(0x4, 0x1f, 0),
+		  CLKGEN_FIELD(0x14, 0x1f, 0),
+		  CLKGEN_FIELD(0x24, 0x1f, 0),
+		  CLKGEN_FIELD(0x34, 0x1f, 0) },
+	.en = { CLKGEN_FIELD(0x10, 0x1, 0),
+		CLKGEN_FIELD(0x20, 0x1, 0),
+		CLKGEN_FIELD(0x30, 0x1, 0),
+		CLKGEN_FIELD(0x40, 0x1, 0) },
+	.ndiv = CLKGEN_FIELD(0x0, 0x1, 15),
+	.bwfilter_present = true,
+	.ref_bw = CLKGEN_FIELD(0x0, 0x3, 16),
+	.pe = { CLKGEN_FIELD(0x8, 0xffff, 0),
+		CLKGEN_FIELD(0x18, 0xffff, 0),
+		CLKGEN_FIELD(0x28, 0xffff, 0),
+		CLKGEN_FIELD(0x38, 0xffff, 0) },
+	.sdiv = { CLKGEN_FIELD(0xC, 0x7, 0),
+		  CLKGEN_FIELD(0x1C, 0x7, 0),
+		  CLKGEN_FIELD(0x2C, 0x7, 0),
+		  CLKGEN_FIELD(0x3C, 0x7, 0) },
+	.reset_present = true,
+	.nreset = CLKGEN_FIELD(0x0, 0x1, 0),
+	.pll_ops	= &st_quadfs_pll_c65_ops,
+	.fsynth_ops	= &st_quadfs_fs216c65_ops,
+};
+
+static struct clkgen_quadfs_data st_fs216c65_416 = {
 	/* 416 specific */
 	.npda	= CLKGEN_FIELD(0x0, 0x1, 14),
 	.nsb	= { CLKGEN_FIELD(0x0, 0x1, 10),
@@ -193,12 +188,10 @@ static const struct clkgen_quadfs_data s
 		    CLKGEN_FIELD(0x2C, 0x7, 0),
 		    CLKGEN_FIELD(0x3C, 0x7, 0) },
 	.pll_ops	= &st_quadfs_pll_c65_ops,
-	.rtbl		= fs216c65_rtbl,
-	.rtbl_cnt	= ARRAY_SIZE(fs216c65_rtbl),
-	.get_rate	= clk_fs216c65_get_rate,
+	.fsynth_ops	= &st_quadfs_fs216c65_ops,
 };
 
-static const struct clkgen_quadfs_data st_fs432c65_416 = {
+static struct clkgen_quadfs_data st_fs432c65_416 = {
 	.npda	= CLKGEN_FIELD(0x0, 0x1, 14),
 	.nsb	= { CLKGEN_FIELD(0x0, 0x1, 10),
 		    CLKGEN_FIELD(0x0, 0x1, 11),
@@ -229,12 +222,70 @@ static const struct clkgen_quadfs_data s
 		    CLKGEN_FIELD(0x2C, 0x7, 0),
 		    CLKGEN_FIELD(0x3C, 0x7, 0) },
 	.pll_ops	= &st_quadfs_pll_c65_ops,
-	.rtbl		= fs432c65_rtbl,
-	.rtbl_cnt	= ARRAY_SIZE(fs432c65_rtbl),
-	.get_rate	= clk_fs432c65_get_rate,
+	.fsynth_ops	= &st_quadfs_fs432c65_ops,
 };
 
-static const struct clkgen_quadfs_data st_fs660c32_E_416 = {
+static struct clkgen_quadfs_data st_fs660c32_E_415 = {
+	.npda = CLKGEN_FIELD(0x0, 0x1, 27),
+	.nsb = { CLKGEN_FIELD(0x4, 0x1, 0),
+		 CLKGEN_FIELD(0x4, 0x1, 1),
+		 CLKGEN_FIELD(0x4, 0x1, 2),
+		 CLKGEN_FIELD(0x4, 0x1, 3) },
+	.fixed_nsdiv = {1, 1, 1, 3},
+	.mdiv = { CLKGEN_FIELD(0x0, 0x1f, 4),
+		  CLKGEN_FIELD(0x0, 0x1f, 9),
+		  CLKGEN_FIELD(0x0, 0x1f, 14),
+		  CLKGEN_FIELD(0x0, 0x1f, 19) },
+	.en = { CLKGEN_FIELD(0x0, 0x1, 0),
+		CLKGEN_FIELD(0x0, 0x1, 1),
+		CLKGEN_FIELD(0x0, 0x1, 2),
+		CLKGEN_FIELD(0x0, 0x1, 3) },
+	.ndiv = CLKGEN_FIELD(0x0, 0x7, 24),
+	.pe = { CLKGEN_FIELD(0x4, 0x7fff, 4),
+		CLKGEN_FIELD(0x8, 0x7fff, 0),
+		CLKGEN_FIELD(0x8, 0x7fff, 15),
+		CLKGEN_FIELD(0xC, 0x7fff, 0) },
+	.sdiv = { CLKGEN_FIELD(0xC, 0xf, 16),
+		  CLKGEN_FIELD(0xC, 0xf, 20),
+		  CLKGEN_FIELD(0xC, 0xf, 24),
+		  CLKGEN_FIELD(0xC, 0xf, 28) },
+	.lockstatus_present = true,
+	.lock_status = CLKGEN_FIELD(0x84, 0x1, 0),
+	.pll_ops	= &st_quadfs_pll_c32_ops,
+	.fsynth_ops	= &st_quadfs_fs660c32_ops,
+};
+
+static struct clkgen_quadfs_data st_fs660c32_F_415 = {
+	.npda = CLKGEN_FIELD(0x0, 0x1, 27),
+	.nsb = { CLKGEN_FIELD(0x4, 0x1, 0),
+		 CLKGEN_FIELD(0x4, 0x1, 1),
+		 CLKGEN_FIELD(0x4, 0x1, 2),
+		 CLKGEN_FIELD(0x4, 0x1, 3) },
+	.fixed_nsdiv = {1, 1, 1, 1},
+	.mdiv = { CLKGEN_FIELD(0x0, 0x1f, 4),
+		  CLKGEN_FIELD(0x0, 0x1f, 9),
+		  CLKGEN_FIELD(0x0, 0x1f, 14),
+		  CLKGEN_FIELD(0x0, 0x1f, 19) },
+	.en = { CLKGEN_FIELD(0x0, 0x1, 0),
+		CLKGEN_FIELD(0x0, 0x1, 1),
+		CLKGEN_FIELD(0x0, 0x1, 2),
+		CLKGEN_FIELD(0x0, 0x1, 3) },
+	.ndiv = CLKGEN_FIELD(0x0, 0x7, 24),
+	.pe = { CLKGEN_FIELD(0x4, 0x7fff, 4),
+		CLKGEN_FIELD(0x8, 0x7fff, 0),
+		CLKGEN_FIELD(0x8, 0x7fff, 15),
+		CLKGEN_FIELD(0xC, 0x7fff, 0) },
+	.sdiv = { CLKGEN_FIELD(0xC, 0xf, 16),
+		  CLKGEN_FIELD(0xC, 0xf, 20),
+		  CLKGEN_FIELD(0xC, 0xf, 24),
+		  CLKGEN_FIELD(0xC, 0xf, 28) },
+	.lockstatus_present = true,
+	.lock_status = CLKGEN_FIELD(0x90, 0x1, 0),
+	.pll_ops	= &st_quadfs_pll_c32_ops,
+	.fsynth_ops	= &st_quadfs_fs660c32_ops,
+};
+
+static struct clkgen_quadfs_data st_fs660c32_E_416 = {
 	.npda	= CLKGEN_FIELD(0x0, 0x1, 14),
 	.nsb	= { CLKGEN_FIELD(0x0, 0x1, 10),
 		    CLKGEN_FIELD(0x0, 0x1, 11),
@@ -265,12 +316,10 @@ static const struct clkgen_quadfs_data s
 	.lockstatus_present = true,
 	.lock_status = CLKGEN_FIELD(0xAC, 0x1, 0),
 	.pll_ops	= &st_quadfs_pll_c32_ops,
-	.rtbl		= fs660c32_rtbl,
-	.rtbl_cnt	= ARRAY_SIZE(fs660c32_rtbl),
-	.get_rate	= clk_fs660c32_dig_get_rate,
+	.fsynth_ops	= &st_quadfs_fs660c32_ops,
 };
 
-static const struct clkgen_quadfs_data st_fs660c32_F_416 = {
+static struct clkgen_quadfs_data st_fs660c32_F_416 = {
 	.npda	= CLKGEN_FIELD(0x0, 0x1, 14),
 	.nsb	= { CLKGEN_FIELD(0x0, 0x1, 10),
 		    CLKGEN_FIELD(0x0, 0x1, 11),
@@ -301,12 +350,10 @@ static const struct clkgen_quadfs_data s
 	.lockstatus_present = true,
 	.lock_status = CLKGEN_FIELD(0xEC, 0x1, 0),
 	.pll_ops	= &st_quadfs_pll_c32_ops,
-	.rtbl		= fs660c32_rtbl,
-	.rtbl_cnt	= ARRAY_SIZE(fs660c32_rtbl),
-	.get_rate	= clk_fs660c32_dig_get_rate,
+	.fsynth_ops	= &st_quadfs_fs660c32_ops,
 };
 
-static const struct clkgen_quadfs_data st_fs660c32_C_407 = {
+static struct clkgen_quadfs_data st_fs660c32_C = {
 	.nrst_present = true,
 	.nrst	= { CLKGEN_FIELD(0x2f0, 0x1, 0),
 		    CLKGEN_FIELD(0x2f0, 0x1, 1),
@@ -340,16 +387,97 @@ static const struct clkgen_quadfs_data s
 		    CLKGEN_FIELD(0x30c, 0xf, 20),
 		    CLKGEN_FIELD(0x310, 0xf, 20) },
 	.lockstatus_present = true,
+	.lock_status = CLKGEN_FIELD(0x2f0, 0x1, 24),
+	.powerup_polarity = 1,
+	.standby_polarity = 1,
+	.pll_ops	= &st_quadfs_pll_c32_ops,
+	.fsynth_ops	= &st_quadfs_fs660c32_ops,
+};
+
+static struct clkgen_quadfs_data st_fs660c32_D = {
+	.nrst_present = true,
+	.nrst	= { CLKGEN_FIELD(0x2a0, 0x1, 0),
+		    CLKGEN_FIELD(0x2a0, 0x1, 1),
+		    CLKGEN_FIELD(0x2a0, 0x1, 2),
+		    CLKGEN_FIELD(0x2a0, 0x1, 3) },
+	.ndiv	= CLKGEN_FIELD(0x2a4, 0x7, 16),
+	.pe	= { CLKGEN_FIELD(0x2b4, 0x7fff, 0),
+		    CLKGEN_FIELD(0x2b8, 0x7fff, 0),
+		    CLKGEN_FIELD(0x2bc, 0x7fff, 0),
+		    CLKGEN_FIELD(0x2c0, 0x7fff, 0) },
+	.sdiv	= { CLKGEN_FIELD(0x2b4, 0xf, 20),
+		    CLKGEN_FIELD(0x2b8, 0xf, 20),
+		    CLKGEN_FIELD(0x2bc, 0xf, 20),
+		    CLKGEN_FIELD(0x2c0, 0xf, 20) },
+	.npda	= CLKGEN_FIELD(0x2a0, 0x1, 12),
+	.nsb	= { CLKGEN_FIELD(0x2a0, 0x1, 8),
+		    CLKGEN_FIELD(0x2a0, 0x1, 9),
+		    CLKGEN_FIELD(0x2a0, 0x1, 10),
+		    CLKGEN_FIELD(0x2a0, 0x1, 11) },
+	.nsdiv_present = true,
+	.nsdiv	= { CLKGEN_FIELD(0x2b4, 0x1, 24),
+		    CLKGEN_FIELD(0x2b8, 0x1, 24),
+		    CLKGEN_FIELD(0x2bc, 0x1, 24),
+		    CLKGEN_FIELD(0x2c0, 0x1, 24) },
+	.mdiv	= { CLKGEN_FIELD(0x2b4, 0x1f, 15),
+		    CLKGEN_FIELD(0x2b8, 0x1f, 15),
+		    CLKGEN_FIELD(0x2bc, 0x1f, 15),
+		    CLKGEN_FIELD(0x2c0, 0x1f, 15) },
+	.en	= { CLKGEN_FIELD(0x2ac, 0x1, 0),
+		    CLKGEN_FIELD(0x2ac, 0x1, 1),
+		    CLKGEN_FIELD(0x2ac, 0x1, 2),
+		    CLKGEN_FIELD(0x2ac, 0x1, 3) },
+	.lockstatus_present = true,
+	.lock_status = CLKGEN_FIELD(0x2A0, 0x1, 24),
+	.powerup_polarity = 1,
+	.standby_polarity = 1,
+	.pll_ops	= &st_quadfs_pll_c32_ops,
+	.fsynth_ops	= &st_quadfs_fs660c32_ops,
+};
+
+static struct clkgen_quadfs_data st_fs660c32_D0_407 = {
+	.nrst_present = true,
+	.nrst	= { CLKGEN_FIELD(0x2a0, 0x1, 0),
+		    CLKGEN_FIELD(0x2a0, 0x1, 1),
+		    CLKGEN_FIELD(0x2a0, 0x1, 2),
+		    CLKGEN_FIELD(0x2a0, 0x1, 3) },
+	.ndiv	= CLKGEN_FIELD(0x2a4, 0x7, 16),
+	.pe	= { CLKGEN_FIELD(0x2b4, 0x7fff, 0),
+		    CLKGEN_FIELD(0x2b8, 0x7fff, 0),
+		    CLKGEN_FIELD(0x2bc, 0x7fff, 0),
+		    CLKGEN_FIELD(0x2c0, 0x7fff, 0) },
+	.sdiv	= { CLKGEN_FIELD(0x2b4, 0xf, 20),
+		    CLKGEN_FIELD(0x2b8, 0xf, 20),
+		    CLKGEN_FIELD(0x2bc, 0xf, 20),
+		    CLKGEN_FIELD(0x2c0, 0xf, 20) },
+	.npda	= CLKGEN_FIELD(0x2a0, 0x1, 12),
+	.nsb	= { CLKGEN_FIELD(0x2a0, 0x1, 8),
+		    CLKGEN_FIELD(0x2a0, 0x1, 9),
+		    CLKGEN_FIELD(0x2a0, 0x1, 10),
+		    CLKGEN_FIELD(0x2a0, 0x1, 11) },
+	.nsdiv_present = true,
+	.fixed_nsdiv = {1, 1, 1, 1},
+	.nsdiv	= { CLKGEN_FIELD(0x2b4, 0x1, 24),
+		    CLKGEN_FIELD(0x2b8, 0x1, 24),
+		    CLKGEN_FIELD(0x2bc, 0x1, 24),
+		    CLKGEN_FIELD(0x2c0, 0x1, 24) },
+	.mdiv	= { CLKGEN_FIELD(0x2b4, 0x1f, 15),
+		    CLKGEN_FIELD(0x2b8, 0x1f, 15),
+		    CLKGEN_FIELD(0x2bc, 0x1f, 15),
+		    CLKGEN_FIELD(0x2c0, 0x1f, 15) },
+	.en	= { CLKGEN_FIELD(0x2ac, 0x1, 0),
+		    CLKGEN_FIELD(0x2ac, 0x1, 1),
+		    CLKGEN_FIELD(0x2ac, 0x1, 2),
+		    CLKGEN_FIELD(0x2ac, 0x1, 3) },
+	.lockstatus_present = true,
 	.lock_status = CLKGEN_FIELD(0x2A0, 0x1, 24),
 	.powerup_polarity = 1,
 	.standby_polarity = 1,
 	.pll_ops	= &st_quadfs_pll_c32_ops,
-	.rtbl		= fs660c32_rtbl,
-	.rtbl_cnt	= ARRAY_SIZE(fs660c32_rtbl),
-	.get_rate	= clk_fs660c32_dig_get_rate,
+	.fsynth_ops	= &st_quadfs_fs660c32_ops,
 };
 
-static const struct clkgen_quadfs_data st_fs660c32_D_407 = {
+static struct clkgen_quadfs_data st_fs660c32_D2_407 = {
 	.nrst_present = true,
 	.nrst	= { CLKGEN_FIELD(0x2a0, 0x1, 0),
 		    CLKGEN_FIELD(0x2a0, 0x1, 1),
@@ -370,6 +498,7 @@ static const struct clkgen_quadfs_data s
 		    CLKGEN_FIELD(0x2a0, 0x1, 10),
 		    CLKGEN_FIELD(0x2a0, 0x1, 11) },
 	.nsdiv_present = true,
+	.fixed_nsdiv = {1, 1, 1, 1},
 	.nsdiv	= { CLKGEN_FIELD(0x2b4, 0x1, 24),
 		    CLKGEN_FIELD(0x2b8, 0x1, 24),
 		    CLKGEN_FIELD(0x2bc, 0x1, 24),
@@ -387,9 +516,102 @@ static const struct clkgen_quadfs_data s
 	.powerup_polarity = 1,
 	.standby_polarity = 1,
 	.pll_ops	= &st_quadfs_pll_c32_ops,
-	.rtbl		= fs660c32_rtbl,
-	.rtbl_cnt	= ARRAY_SIZE(fs660c32_rtbl),
-	.get_rate	= clk_fs660c32_dig_get_rate,};
+	.fsynth_ops	= &st_quadfs_fs660c32_ops,
+};
+
+static struct clkgen_quadfs_data st_fs660c32_TEL_127 = {
+	.nrst_present = true,
+	.nrst_polarity = 1,
+	.nrst	= { CLKGEN_FIELD(0x0, 0x1, 4),
+		    CLKGEN_FIELD(0x0, 0x1, 5),
+		    CLKGEN_FIELD(0x0, 0x1, 6),
+		    CLKGEN_FIELD(0x0, 0x1, 7) },
+	.ndiv	= CLKGEN_FIELD(0x0, 0x7, 1),
+	.pe	= { CLKGEN_FIELD(0x4, 0x7fff, 0),
+		    CLKGEN_FIELD(0x8, 0x7fff, 0),
+		    CLKGEN_FIELD(0xc, 0x7fff, 0),
+		    CLKGEN_FIELD(0x10, 0x7fff, 0) },
+	.sdiv	= { CLKGEN_FIELD(0x4, 0xf, 21),
+		    CLKGEN_FIELD(0x8, 0xf, 21),
+		    CLKGEN_FIELD(0xc, 0xf, 21),
+		    CLKGEN_FIELD(0x10, 0xf, 21) },
+	.npda	= CLKGEN_FIELD(0x20, 0x1, 0),
+	.nsb	= { CLKGEN_FIELD(0x20, 0x1, 1),
+		    CLKGEN_FIELD(0x20, 0x1, 2),
+		    CLKGEN_FIELD(0x20, 0x1, 3),
+		    CLKGEN_FIELD(0x20, 0x1, 4) },
+	.nsdiv_present = true,
+	.nsdiv	= { CLKGEN_FIELD(0x4, 0x1, 26),
+		    CLKGEN_FIELD(0x8, 0x1, 26),
+		    CLKGEN_FIELD(0xc, 0x1, 26),
+		    CLKGEN_FIELD(0x10, 0x1, 26) },
+	.mdiv	= { CLKGEN_FIELD(0x4, 0x1f, 15),
+		    CLKGEN_FIELD(0x8, 0x1f, 15),
+		    CLKGEN_FIELD(0xc, 0x1f, 15),
+		    CLKGEN_FIELD(0x10, 0x1f, 15) },
+	.en	= { CLKGEN_FIELD(0x4, 0x1, 20),
+		    CLKGEN_FIELD(0x8, 0x1, 20),
+		    CLKGEN_FIELD(0xc, 0x1, 20),
+		    CLKGEN_FIELD(0x10, 0x1, 20) },
+	.lockstatus_present = true,
+	.lock_status = CLKGEN_FIELD(0x20, 0x1, 5),
+	.powerup_polarity = 1,
+	.standby_polarity = 1,
+	/* enable output select */
+	.init_reg1 = CLKGEN_FIELD(0x0, 0x1f, 0),
+	.pll_ops	= &st_quadfs_pll_c32_ops,
+	.fsynth_ops	= &st_quadfs_fs660c32_ops,
+};
+
+static struct clkgen_quadfs_data st_fs660c32_B = {
+	.nrst_present = true,
+	.nrst	= { CLKGEN_FIELD(0x2c8, 0x1, 0),
+		    CLKGEN_FIELD(0x2c8, 0x1, 1),
+		    CLKGEN_FIELD(0x2c8, 0x1, 2),
+		    CLKGEN_FIELD(0x2c8, 0x1, 3) },
+	.npda	= CLKGEN_FIELD(0x2c8, 0x1, 12),
+	.nsb	= { CLKGEN_FIELD(0x2c8, 0x1, 8),
+		    CLKGEN_FIELD(0x2c8, 0x1, 9),
+		    CLKGEN_FIELD(0x2c8, 0x1, 10),
+		    CLKGEN_FIELD(0x2c8, 0x1, 11) },
+	.nsdiv_present = true,
+	.nsdiv	= { CLKGEN_FIELD(0x2dc, 0x1, 24),
+		    CLKGEN_FIELD(0x2e0, 0x1, 24),
+		    CLKGEN_FIELD(0x2e4, 0x1, 24),
+		    CLKGEN_FIELD(0x2e8, 0x1, 24) },
+	.mdiv	= { CLKGEN_FIELD(0x2dc, 0x1f, 15),
+		    CLKGEN_FIELD(0x2e0, 0x1f, 15),
+		    CLKGEN_FIELD(0x2e4, 0x1f, 15),
+		    CLKGEN_FIELD(0x2e8, 0x1f, 15) },
+	.en	= { CLKGEN_FIELD(0x2d4, 0x1, 0),
+		    CLKGEN_FIELD(0x2d4, 0x1, 1),
+		    CLKGEN_FIELD(0x2d4, 0x1, 2),
+		    CLKGEN_FIELD(0x2d4, 0x1, 3) },
+	.ndiv	= CLKGEN_FIELD(0x2cc, 0x7, 16),
+	.pe	= { CLKGEN_FIELD(0x2dc, 0x7fff, 0),
+		    CLKGEN_FIELD(0x2e0, 0x7fff, 0),
+		    CLKGEN_FIELD(0x2e4, 0x7fff, 0),
+		    CLKGEN_FIELD(0x2e8, 0x7fff, 0) },
+	.sdiv	= { CLKGEN_FIELD(0x2dc, 0xf, 20),
+		    CLKGEN_FIELD(0x2e0, 0xf, 20),
+		    CLKGEN_FIELD(0x2e4, 0xf, 20),
+		    CLKGEN_FIELD(0x2e8, 0xf, 20) },
+	.lockstatus_present = true,
+	.lock_status = CLKGEN_FIELD(0x2c8, 0x1, 24),
+	.powerup_polarity = 1,
+	.standby_polarity = 1,
+	.pll_ops	= &st_quadfs_pll_c32_ops,
+	.fsynth_ops	= &st_quadfs_fs660c32_ops,
+};
+
+struct clkgen_quadfs_conf {
+	unsigned long pll_clkflags, fsynth_clkflags[QUADFS_MAX_CHAN];
+};
+
+static struct clkgen_quadfs_conf st_fs660c32_conf_D2_407 = {
+	.pll_clkflags = CLK_IGNORE_UNUSED,
+	.fsynth_clkflags = { CLK_IGNORE_UNUSED, CLK_IGNORE_UNUSED },
+};
 
 /**
  * DOC: A Frequency Synthesizer that multiples its input clock by a fixed factor
@@ -436,12 +658,12 @@ static int quadfs_pll_enable(struct clk_
 	if (pll->data->reset_present)
 		CLKGEN_WRITE(pll, nreset, 1);
 
-	/*
-	 * Use a fixed input clock noise bandwidth filter for the moment
-	 */
-	if (pll->data->bwfilter_present)
+	if (pll->data->bwfilter_present) {
+		/*
+		 * Use a fixed input clock noise bandwidth filter for the moment
+		 */
 		CLKGEN_WRITE(pll, ref_bw, PLL_BW_GOODREF);
-
+	}
 
 	CLKGEN_WRITE(pll, ndiv, pll->ndiv);
 
@@ -489,17 +711,7 @@ static int quadfs_pll_is_enabled(struct
 	struct st_clk_quadfs_pll *pll = to_quadfs_pll(hw);
 	u32 npda = CLKGEN_READ(pll, npda);
 
-	return !!npda;
-}
-
-int clk_fs660c32_vco_get_rate(unsigned long input, struct stm_fs *fs,
-			   unsigned long *rate)
-{
-	unsigned long nd = fs->ndiv + 16; /* ndiv value */
-
-	*rate = input * nd;
-
-	return 0;
+	return pll->data->powerup_polarity ? !npda : !!npda;
 }
 
 static unsigned long quadfs_pll_fs660c32_recalc_rate(struct clk_hw *hw,
@@ -507,10 +719,10 @@ static unsigned long quadfs_pll_fs660c32
 {
 	struct st_clk_quadfs_pll *pll = to_quadfs_pll(hw);
 	unsigned long rate = 0;
-	struct stm_fs params;
+	struct vclk_fs params = { .type = VCLK_FS660C32VCO };
 
 	params.ndiv = CLKGEN_READ(pll, ndiv);
-	if (clk_fs660c32_vco_get_rate(parent_rate, &params, &rate))
+	if (vclk_fs_get_rate(parent_rate, &params, &rate))
 		pr_err("%s:%s error calculating rate\n",
 		       __clk_get_name(hw->clk), __func__);
 
@@ -519,48 +731,18 @@ static unsigned long quadfs_pll_fs660c32
 	return rate;
 }
 
-int clk_fs660c32_vco_get_params(unsigned long input,
-				unsigned long output, struct stm_fs *fs)
+static long quadfs_pll_fs660c32_round_rate(struct clk_hw *hw,
+					   unsigned long rate,
+					   unsigned long *prate)
 {
-/* Formula
-   VCO frequency = (fin x ndiv) / pdiv
-   ndiv = VCOfreq * pdiv / fin
-   */
-	unsigned long pdiv = 1, n;
+	struct vclk_fs params = { .type = VCLK_FS660C32VCO };
 
-	/* Output clock range: 384Mhz to 660Mhz */
-	if (output < 384000000 || output > 660000000)
-		return -EINVAL;
+	vclk_fs_get_params(*prate, rate, &params);
+	vclk_fs_get_rate(*prate, &params, &rate);
 
-	if (input > 40000000)
-		/* This means that PDIV would be 2 instead of 1.
-		   Not supported today. */
-		return -EINVAL;
-
-	input /= 1000;
-	output /= 1000;
-
-	n = output * pdiv / input;
-	if (n < 16)
-		n = 16;
-	fs->ndiv = n - 16; /* Converting formula value to reg value */
-
-	return 0;
-}
-
-static long quadfs_pll_fs660c32_round_rate(struct clk_hw *hw, unsigned long rate
-		, unsigned long *prate)
-{
-	struct stm_fs params;
-
-	if (!clk_fs660c32_vco_get_params(*prate, rate, &params))
-		clk_fs660c32_vco_get_rate(*prate, &params, &rate);
-
-	pr_debug("%s: %s new rate %ld [sdiv=0x%x,md=0x%x,pe=0x%x,nsdiv3=%u]\n",
+	pr_debug("%s: %s new rate %ld [ndiv=%u]\n",
 		 __func__, __clk_get_name(hw->clk),
-		 rate, (unsigned int)params.sdiv,
-		 (unsigned int)params.mdiv,
-		 (unsigned int)params.pe, (unsigned int)params.nsdiv);
+		 rate, (unsigned int)params.ndiv);
 
 	return rate;
 }
@@ -569,15 +751,15 @@ static int quadfs_pll_fs660c32_set_rate(
 				unsigned long parent_rate)
 {
 	struct st_clk_quadfs_pll *pll = to_quadfs_pll(hw);
-	struct stm_fs params;
-	long hwrate = 0;
+	struct vclk_fs params = { .type = VCLK_FS660C32VCO };
+	long hwrate;
 	unsigned long flags = 0;
 
 	if (!rate || !parent_rate)
 		return -EINVAL;
 
-	if (!clk_fs660c32_vco_get_params(parent_rate, rate, &params))
-		clk_fs660c32_vco_get_rate(parent_rate, &params, &hwrate);
+	vclk_fs_get_params(parent_rate, rate, &params);
+	vclk_fs_get_rate(parent_rate, &params, &hwrate);
 
 	pr_debug("%s: %s new rate %ld [ndiv=0x%x]\n",
 		 __func__, __clk_get_name(hw->clk),
@@ -616,13 +798,14 @@ static const struct clk_ops st_quadfs_pl
 
 static struct clk * __init st_clk_register_quadfs_pll(
 		const char *name, const char *parent_name,
-		struct clkgen_quadfs_data *quadfs, void __iomem *reg,
+		struct clkgen_quadfs_data *quadfs,
+		struct clkgen_quadfs_conf *conf_data, void __iomem *reg,
 		spinlock_t *lock)
 {
 	struct st_clk_quadfs_pll *pll;
 	struct clk *clk;
 	struct clk_init_data init;
-
+	unsigned long flags = ((conf_data) ? conf_data->pll_clkflags : 0);
 	/*
 	 * Sanity check required pointers.
 	 */
@@ -635,14 +818,14 @@ static struct clk * __init st_clk_regist
 
 	init.name = name;
 	init.ops = quadfs->pll_ops;
-	init.flags = CLK_IS_BASIC;
+	init.flags = CLK_IS_BASIC | CLK_GET_RATE_NOCACHE | flags;
 	init.parent_names = &parent_name;
 	init.num_parents = 1;
 
-	pll->data = quadfs;
-	pll->regs_base = reg;
-	pll->lock = lock;
-	pll->hw.init = &init;
+	pll->data	= quadfs;
+	pll->regs_base	= reg;
+	pll->lock	= lock;
+	pll->hw.init	= &init;
 
 	clk = clk_register(NULL, &pll->hw);
 
@@ -726,12 +909,12 @@ static void quadfs_fsynth_program_rate(s
 	CLKGEN_WRITE(fs, en[fs->chan], 0);
 
 	CLKGEN_WRITE(fs, mdiv[fs->chan], fs->md);
-	CLKGEN_WRITE(fs, pe[fs->chan], fs->pe);
 	CLKGEN_WRITE(fs, sdiv[fs->chan], fs->sdiv);
 
 	if (fs->lock)
 		spin_lock_irqsave(fs->lock, flags);
 
+	CLKGEN_WRITE(fs, pe[fs->chan], fs->pe);
 	if (fs->data->nsdiv_present)
 		CLKGEN_WRITE(fs, nsdiv[fs->chan], fs->nsdiv);
 
@@ -744,8 +927,6 @@ static int quadfs_fsynth_enable(struct c
 	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
 	unsigned long flags = 0;
 
-	pr_debug("%s: %s\n", __func__, __clk_get_name(hw->clk));
-
 	quadfs_fsynth_program_rate(fs);
 
 	if (fs->lock)
@@ -754,12 +935,13 @@ static int quadfs_fsynth_enable(struct c
 	CLKGEN_WRITE(fs, nsb[fs->chan], !fs->data->standby_polarity);
 
 	if (fs->data->nrst_present)
-		CLKGEN_WRITE(fs, nrst[fs->chan], 0);
+		CLKGEN_WRITE(fs, nrst[fs->chan], fs->data->nrst_polarity);
 
 	if (fs->lock)
 		spin_unlock_irqrestore(fs->lock, flags);
 
 	quadfs_fsynth_program_enable(fs);
+	pr_debug("%s: %s\n", __func__, __clk_get_name(hw->clk));
 
 	return 0;
 }
@@ -769,15 +951,15 @@ static void quadfs_fsynth_disable(struct
 	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
 	unsigned long flags = 0;
 
-	pr_debug("%s: %s\n", __func__, __clk_get_name(hw->clk));
-
 	if (fs->lock)
 		spin_lock_irqsave(fs->lock, flags);
 
-	CLKGEN_WRITE(fs, nsb[fs->chan], !fs->data->standby_polarity);
+	CLKGEN_WRITE(fs, nsb[fs->chan], fs->data->standby_polarity);
 
 	if (fs->lock)
 		spin_unlock_irqrestore(fs->lock, flags);
+
+	pr_debug("%s: %s\n", __func__, __clk_get_name(hw->clk));
 }
 
 static int quadfs_fsynth_is_enabled(struct clk_hw *hw)
@@ -791,75 +973,8 @@ static int quadfs_fsynth_is_enabled(stru
 	return fs->data->standby_polarity ? !nsb : !!nsb;
 }
 
-#define P15			(uint64_t)(1 << 15)
-
-static int clk_fs216c65_get_rate(unsigned long input, const struct stm_fs *fs,
-		unsigned long *rate)
-{
-	uint64_t res;
-	unsigned long ns;
-	unsigned long nd = 8; /* ndiv stuck at 0 => val = 8 */
-	unsigned long s;
-	long m;
-
-	m = fs->mdiv - 32;
-	s = 1 << (fs->sdiv + 1);
-	ns = (fs->nsdiv ? 1 : 3);
-
-	res = (uint64_t)(s * ns * P15 * (uint64_t)(m + 33));
-	res = res - (s * ns * fs->pe);
-	*rate = div64_u64(P15 * nd * input * 32, res);
-
-	return 0;
-}
-
-static int clk_fs432c65_get_rate(unsigned long input, const struct stm_fs *fs,
-		unsigned long *rate)
-{
-	uint64_t res;
-	unsigned long nd = 16; /* ndiv value; stuck at 0 (30Mhz input) */
-	long m;
-	unsigned long sd;
-	unsigned long ns;
-
-	m = fs->mdiv - 32;
-	sd = 1 << (fs->sdiv + 1);
-	ns = (fs->nsdiv ? 1 : 3);
-
-	res = (uint64_t)(sd * ns * P15 * (uint64_t)(m + 33));
-	res = res - (sd * ns * fs->pe);
-	*rate = div64_u64(P15 * nd * input * 32, res);
-
-	return 0;
-}
-
-#define P20		(uint64_t)(1 << 20)
-
-static int clk_fs660c32_dig_get_rate(unsigned long input,
-				const struct stm_fs *fs, unsigned long *rate)
-{
-	unsigned long s = (1 << fs->sdiv);
-	unsigned long ns;
-	uint64_t res;
-
-	/*
-	 * 'nsdiv' is a register value ('BIN') which is translated
-	 * to a decimal value according to following rules.
-	 *
-	 *     nsdiv      ns.dec
-	 *       0        3
-	 *       1        1
-	 */
-	ns = (fs->nsdiv == 1) ? 1 : 3;
-
-	res = (P20 * (32 + fs->mdiv) + 32 * fs->pe) * s * ns;
-	*rate = (unsigned long)div64_u64(input * P20 * 32, res);
-
-	return 0;
-}
-
 static int quadfs_fsynt_get_hw_value_for_recalc(struct st_clk_quadfs_fsynth *fs,
-		struct stm_fs *params)
+		struct vclk_fs *params)
 {
 	/*
 	 * Get the initial hardware values for recalc_rate
@@ -868,10 +983,10 @@ static int quadfs_fsynt_get_hw_value_for
 	params->pe	= CLKGEN_READ(fs, pe[fs->chan]);
 	params->sdiv	= CLKGEN_READ(fs, sdiv[fs->chan]);
 
-	if (fs->data->nsdiv_present)
+	if ((fs->data->nsdiv_present) && !fs->data->fixed_nsdiv[fs->chan])
 		params->nsdiv = CLKGEN_READ(fs, nsdiv[fs->chan]);
 	else
-		params->nsdiv = 1;
+		params->nsdiv = NSDIV_BIN(fs->data->fixed_nsdiv[fs->chan]);
 
 	/*
 	 * If All are NULL then assume no clock rate is programmed.
@@ -887,63 +1002,57 @@ static int quadfs_fsynt_get_hw_value_for
 	return 0;
 }
 
-static long quadfs_find_best_rate(struct clk_hw *hw, unsigned long drate,
-				unsigned long prate, struct stm_fs *params)
+static unsigned long quadfs_fs216c65_recalc_rate(struct clk_hw *hw,
+		unsigned long parent_rate)
 {
 	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
-	int (*clk_fs_get_rate)(unsigned long ,
-				const struct stm_fs *, unsigned long *);
-	struct stm_fs prev_params;
-	unsigned long prev_rate, rate = 0;
-	unsigned long diff_rate, prev_diff_rate = ~0;
-	int index;
-
-	clk_fs_get_rate = fs->data->get_rate;
+	unsigned long rate = 0;
+	struct vclk_fs params = { .type = VCLK_FS216C65 };
 
-	for (index = 0; index < fs->data->rtbl_cnt; index++) {
-		prev_rate = rate;
+	if (quadfs_fsynt_get_hw_value_for_recalc(fs, &params))
+		return 0;
 
-		*params = fs->data->rtbl[index];
-		prev_params = *params;
+	if (vclk_fs_get_rate(parent_rate, &params, &rate)) {
+		pr_err("%s:%s error calculating rate\n",
+		       __clk_get_name(hw->clk), __func__);
+	}
 
-		clk_fs_get_rate(prate, &fs->data->rtbl[index], &rate);
+	pr_debug("%s:%s rate %lu\n", __clk_get_name(hw->clk), __func__, rate);
 
-		diff_rate = abs(drate - rate);
+	return rate;
+}
 
-		if (diff_rate > prev_diff_rate) {
-			rate = prev_rate;
-			*params = prev_params;
-			break;
-		}
+static unsigned long quadfs_fs432c65_recalc_rate(struct clk_hw *hw,
+		unsigned long parent_rate)
+{
+	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
+	unsigned long rate = 0;
+	struct vclk_fs params = { .type = VCLK_FS432C65 };
 
-		prev_diff_rate = diff_rate;
+	if (quadfs_fsynt_get_hw_value_for_recalc(fs, &params))
+		return 0;
 
-		if (drate == rate)
-			return rate;
+	if (vclk_fs_get_rate(parent_rate, &params, &rate)) {
+		pr_err("%s:%s error calculating rate\n",
+		       __clk_get_name(hw->clk), __func__);
 	}
 
-
-	if (index == fs->data->rtbl_cnt)
-		*params = prev_params;
+	pr_debug("%s:%s rate %lu\n", __clk_get_name(hw->clk), __func__, rate);
 
 	return rate;
 }
 
-static unsigned long quadfs_recalc_rate(struct clk_hw *hw,
+static unsigned long quadfs_fs660c32_recalc_rate(struct clk_hw *hw,
 		unsigned long parent_rate)
 {
 	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
 	unsigned long rate = 0;
-	struct stm_fs params;
-	int (*clk_fs_get_rate)(unsigned long ,
-				const struct stm_fs *, unsigned long *);
-
-	clk_fs_get_rate = fs->data->get_rate;
+	struct vclk_fs params = { .type = VCLK_FS660C32 };
 
 	if (quadfs_fsynt_get_hw_value_for_recalc(fs, &params))
 		return 0;
 
-	if (clk_fs_get_rate(parent_rate, &params, &rate)) {
+	if (vclk_fs_get_rate(parent_rate, &params, &rate)) {
 		pr_err("%s:%s error calculating rate\n",
 		       __clk_get_name(hw->clk), __func__);
 	}
@@ -953,12 +1062,122 @@ static unsigned long quadfs_recalc_rate(
 	return rate;
 }
 
-static long quadfs_round_rate(struct clk_hw *hw, unsigned long rate,
+static long quadfs_fs216c65_find_best_rate(struct st_clk_quadfs_fsynth *fs,
+					 unsigned long rate,
+					 unsigned long parent_rate,
+					 struct vclk_fs *params)
+{
+	struct vclk_fs params1 = *params;
+	struct vclk_fs params2 = *params;
+	unsigned long rate1, rate2;
+
+	/* Try both solutions for closest match */
+	params1.nsdiv = (fs->data->nsdiv_present && fs->data->fixed_nsdiv[fs->chan]) ?
+			NSDIV_BIN(fs->data->fixed_nsdiv[fs->chan]) : 1;
+	if (!vclk_fs_get_params(parent_rate, rate, &params1))
+		vclk_fs_get_rate(parent_rate, &params1, &rate1);
+
+	if (fs->data->nsdiv_present && !fs->data->fixed_nsdiv[fs->chan]) {
+		params2.nsdiv = 0;
+		if (!vclk_fs_get_params(parent_rate, rate, &params2))
+			vclk_fs_get_rate(parent_rate, &params2, &rate2);
+
+		if (abs(rate1 - rate) <= abs(rate2 - rate)) {
+			rate = rate1;
+			*params = params1;
+		} else {
+			rate = rate2;
+			*params = params2;
+		}
+	} else {
+		rate = rate1;
+		*params = params1;
+	}
+
+	return rate;
+}
+
+static long quadfs_fs432c65_find_best_rate(struct st_clk_quadfs_fsynth *fs,
+					 unsigned long rate,
+					 unsigned long parent_rate,
+					 struct vclk_fs *params)
+{
+	struct vclk_fs params1 = *params;
+	struct vclk_fs params2 = *params;
+	unsigned long rate1, rate2;
+
+	/* Try both solutions for closest match */
+	params1.nsdiv = (fs->data->nsdiv_present && fs->data->fixed_nsdiv[fs->chan]) ?
+			NSDIV_BIN(fs->data->fixed_nsdiv[fs->chan]) : 1;
+	if (!vclk_fs_get_params(parent_rate, rate, &params1))
+		vclk_fs_get_rate(parent_rate, &params1, &rate1);
+
+	if (fs->data->nsdiv_present && !fs->data->fixed_nsdiv[fs->chan]) {
+		params2.nsdiv = 0;
+		if (!vclk_fs_get_params(parent_rate, rate, &params2))
+			vclk_fs_get_rate(parent_rate, &params2, &rate2);
+
+		if (abs(rate1 - rate) <= abs(rate2 - rate)) {
+			rate = rate1;
+			*params = params1;
+		} else {
+			rate = rate2;
+			*params = params2;
+		}
+	} else {
+		rate = rate1;
+		*params = params1;
+	}
+
+	return rate;
+}
+
+static long quadfs_fs660c32_find_best_rate(struct st_clk_quadfs_fsynth *fs,
+					 unsigned long rate,
+					 unsigned long parent_rate,
+					 struct vclk_fs *params)
+{
+	struct vclk_fs params1 = *params;
+	struct vclk_fs params2 = *params;
+	unsigned long rate1, rate2;
+
+	/* Try both solutions for closest match */
+	params1.nsdiv = (fs->data->nsdiv_present && fs->data->fixed_nsdiv[fs->chan]) ?
+			NSDIV_BIN(fs->data->fixed_nsdiv[fs->chan]) : 1;
+	if (!vclk_fs_get_params(parent_rate, rate, &params1))
+		vclk_fs_get_rate(parent_rate, &params1, &rate1);
+
+	if (fs->data->nsdiv_present && !fs->data->fixed_nsdiv[fs->chan]) {
+		params2.nsdiv = 0;
+		if (!vclk_fs_get_params(parent_rate, rate, &params2))
+			vclk_fs_get_rate(parent_rate, &params2,
+						  &rate2);
+
+		if (abs(rate1 - rate) <= abs(rate2 - rate)) {
+			rate = rate1;
+			*params = params1;
+		} else {
+			rate = rate2;
+			*params = params2;
+		}
+	} else {
+		rate = rate1;
+		*params = params1;
+	}
+
+	return rate;
+}
+
+static long quadfs_fs216c65_round_rate(struct clk_hw *hw, unsigned long rate,
 				     unsigned long *prate)
 {
-	struct stm_fs params;
+	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
+	struct vclk_fs params;
+
+	memset(&params, 0, sizeof(struct vclk_fs));
+	params.type = VCLK_FS216C65;
 
-	rate = quadfs_find_best_rate(hw, rate, *prate, &params);
+	rate = quadfs_fs216c65_find_best_rate(fs, rate, *prate, &params);
 
 	pr_debug("%s: %s new rate %ld [sdiv=0x%x,md=0x%x,pe=0x%x,nsdiv3=%u]\n",
 		 __func__, __clk_get_name(hw->clk),
@@ -968,14 +1187,71 @@ static long quadfs_round_rate(struct clk
 	return rate;
 }
 
+static long quadfs_fs432c65_round_rate(struct clk_hw *hw, unsigned long rate,
+				     unsigned long *prate)
+{
+	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
+	struct vclk_fs params;
+
+	memset(&params, 0, sizeof(struct vclk_fs));
+	params.type = VCLK_FS432C65;
+
+	rate = quadfs_fs432c65_find_best_rate(fs, rate, *prate, &params);
+
+	pr_debug("%s: %s new rate %ld [sdiv=0x%x,md=0x%x,pe=0x%x,nsdiv3=%u]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 rate, (unsigned int)params.sdiv, (unsigned int)params.mdiv,
+			 (unsigned int)params.pe, (unsigned int)params.nsdiv);
+
+	return rate;
+}
 
-static void quadfs_program_and_enable(struct st_clk_quadfs_fsynth *fs,
-		struct stm_fs *params)
+static long quadfs_fs660c32_round_rate(struct clk_hw *hw, unsigned long rate,
+				     unsigned long *prate)
 {
-	fs->md = params->mdiv;
-	fs->pe = params->pe;
-	fs->sdiv = params->sdiv;
-	fs->nsdiv = params->nsdiv;
+	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
+	struct vclk_fs params;
+
+	memset(&params, 0, sizeof(struct vclk_fs));
+	params.type = VCLK_FS660C32;
+
+	rate = quadfs_fs660c32_find_best_rate(fs, rate, *prate, &params);
+
+	pr_debug("%s: %s new rate %ld [sdiv=0x%x,md=0x%x,pe=0x%x,nsdiv3=%u]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 rate, (unsigned int)params.sdiv, (unsigned int)params.mdiv,
+			 (unsigned int)params.pe, (unsigned int)params.nsdiv);
+
+	return rate;
+}
+
+static int quadfs_fs216c65_set_rate(struct clk_hw *hw, unsigned long rate,
+				  unsigned long parent_rate)
+{
+	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
+	struct vclk_fs params;
+	long hwrate;
+
+	if (!rate || !parent_rate)
+		return -EINVAL;
+
+	memset(&params, 0, sizeof(struct vclk_fs));
+	params.type = VCLK_FS216C65;
+
+	hwrate = quadfs_fs216c65_find_best_rate(fs, rate, parent_rate, &params);
+
+	pr_debug("%s: %s new rate %ld [sdiv=0x%x,md=0x%x,pe=0x%x,nsdiv3=%u]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 hwrate, (unsigned int)params.sdiv, (unsigned int)params.mdiv,
+			 (unsigned int)params.pe, (unsigned int)params.nsdiv);
+
+	if (!hwrate)
+		return -EINVAL;
+
+	fs->md = params.mdiv;
+	fs->pe = params.pe;
+	fs->sdiv = params.sdiv;
+	fs->nsdiv = params.nsdiv;
 
 	/*
 	 * In some integrations you can only change the fsynth programming when
@@ -983,50 +1259,126 @@ static void quadfs_program_and_enable(st
 	 */
 	quadfs_fsynth_program_rate(fs);
 	quadfs_fsynth_program_enable(fs);
+
+	return 0;
 }
 
-static int quadfs_set_rate(struct clk_hw *hw, unsigned long rate,
+static int quadfs_fs432c65_set_rate(struct clk_hw *hw, unsigned long rate,
 				  unsigned long parent_rate)
 {
 	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
-	struct stm_fs params;
+	struct vclk_fs params;
 	long hwrate;
-	int uninitialized_var(i);
 
 	if (!rate || !parent_rate)
 		return -EINVAL;
 
-	memset(&params, 0, sizeof(struct stm_fs));
+	memset(&params, 0, sizeof(struct vclk_fs));
+	params.type = VCLK_FS432C65;
+
+	hwrate = quadfs_fs432c65_find_best_rate(fs, rate, parent_rate, &params);
+
+	pr_debug("%s: %s new rate %ld [sdiv=0x%x,md=0x%x,pe=0x%x,nsdiv3=%u]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 hwrate, (unsigned int)params.sdiv, (unsigned int)params.mdiv,
+			 (unsigned int)params.pe, (unsigned int)params.nsdiv);
+
+	if (!hwrate)
+		return -EINVAL;
+
+	fs->md = params.mdiv;
+	fs->pe = params.pe;
+	fs->sdiv = params.sdiv;
+	fs->nsdiv = params.nsdiv;
+
+
+	/*
+	 * In some integrations you can only change the fsynth programming when
+	 * the parent entity containing it is enabled.
+	 */
+	quadfs_fsynth_program_rate(fs);
+	quadfs_fsynth_program_enable(fs);
+
+	return 0;
+}
+
+static int quadfs_fs660c32_set_rate(struct clk_hw *hw, unsigned long rate,
+				  unsigned long parent_rate)
+{
+	struct st_clk_quadfs_fsynth *fs = to_quadfs_fsynth(hw);
+	struct vclk_fs params;
+	long hwrate;
+
+
+	if (!rate || !parent_rate)
+		return -EINVAL;
+
+	memset(&params, 0, sizeof(struct vclk_fs));
+	params.type = VCLK_FS660C32;
+
+	hwrate = quadfs_fs660c32_find_best_rate(fs, rate, parent_rate, &params);
+
+	pr_debug("%s: %s new rate %ld [sdiv=0x%x,md=0x%x,pe=0x%x,nsdiv3=%u]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 hwrate, (unsigned int)params.sdiv, (unsigned int)params.mdiv,
+			 (unsigned int)params.pe, (unsigned int)params.nsdiv);
 
-	hwrate = quadfs_find_best_rate(hw, rate, parent_rate, &params);
 	if (!hwrate)
 		return -EINVAL;
 
-	quadfs_program_and_enable(fs, &params);
+	fs->md = params.mdiv;
+	fs->pe = params.pe;
+	fs->sdiv = params.sdiv;
+	fs->nsdiv = params.nsdiv;
+
+	/*
+	 * In some integrations you can only change the fsynth programming when
+	 * the parent entity containing it is enabled.
+	 */
+	quadfs_fsynth_program_rate(fs);
+	quadfs_fsynth_program_enable(fs);
 
 	return 0;
 }
 
+static const struct clk_ops st_quadfs_fs216c65_ops = {
+	.enable		= quadfs_fsynth_enable,
+	.disable	= quadfs_fsynth_disable,
+	.is_enabled	= quadfs_fsynth_is_enabled,
+	.round_rate	= quadfs_fs216c65_round_rate,
+	.set_rate	= quadfs_fs216c65_set_rate,
+	.recalc_rate	= quadfs_fs216c65_recalc_rate,
+};
 
+static const struct clk_ops st_quadfs_fs432c65_ops = {
+	.enable		= quadfs_fsynth_enable,
+	.disable	= quadfs_fsynth_disable,
+	.is_enabled	= quadfs_fsynth_is_enabled,
+	.round_rate	= quadfs_fs432c65_round_rate,
+	.set_rate	= quadfs_fs432c65_set_rate,
+	.recalc_rate	= quadfs_fs432c65_recalc_rate,
+};
 
-static const struct clk_ops st_quadfs_ops = {
+static const struct clk_ops st_quadfs_fs660c32_ops = {
 	.enable		= quadfs_fsynth_enable,
 	.disable	= quadfs_fsynth_disable,
 	.is_enabled	= quadfs_fsynth_is_enabled,
-	.round_rate	= quadfs_round_rate,
-	.set_rate	= quadfs_set_rate,
-	.recalc_rate	= quadfs_recalc_rate,
+	.round_rate	= quadfs_fs660c32_round_rate,
+	.set_rate	= quadfs_fs660c32_set_rate,
+	.recalc_rate	= quadfs_fs660c32_recalc_rate,
 };
 
 static struct clk * __init st_clk_register_quadfs_fsynth(
 		const char *name, const char *parent_name,
-		struct clkgen_quadfs_data *quadfs, void __iomem *reg, u32 chan,
-		spinlock_t *lock)
+		struct clkgen_quadfs_data *quadfs,
+		struct clkgen_quadfs_conf *conf_data, void __iomem *reg,
+		u32 chan, spinlock_t *lock)
 {
 	struct st_clk_quadfs_fsynth *fs;
 	struct clk *clk;
 	struct clk_init_data init;
-
+	unsigned long flags = ((conf_data) ?
+			       conf_data->fsynth_clkflags[chan] : 0);
 	/*
 	 * Sanity check required pointers, note that nsdiv3 is optional.
 	 */
@@ -1038,15 +1390,15 @@ static struct clk * __init st_clk_regist
 		return ERR_PTR(-ENOMEM);
 
 	init.name = name;
-	init.ops = &st_quadfs_ops;
-	init.flags = CLK_GET_RATE_NOCACHE | CLK_IS_BASIC;
+	init.ops = quadfs->fsynth_ops;
+	init.flags = CLK_GET_RATE_NOCACHE | CLK_IS_BASIC | flags;
 	init.parent_names = &parent_name;
 	init.num_parents = 1;
 
-	fs->data = quadfs;
+	fs->data	= quadfs;
 	fs->regs_base = reg;
-	fs->chan = chan;
-	fs->lock = lock;
+	fs->chan	= chan;
+	fs->lock	= lock;
 	fs->hw.init = &init;
 
 	clk = clk_register(NULL, &fs->hw);
@@ -1057,41 +1409,78 @@ static struct clk * __init st_clk_regist
 	return clk;
 }
 
+static struct of_device_id quadfsconf_of_match[] = {
+	{
+		.compatible = "st,stih407-quadfs660-conf-D2",
+		.data = &st_fs660c32_conf_D2_407,
+	},
+	{}
+};
+
 static struct of_device_id quadfs_of_match[] = {
 	{
+		.compatible = "st,stih415-quadfs216-B",
+		.data = (void *)&st_fs216c65_B_415
+	},
+	{
+		.compatible = "st,stih415-quadfs216",
+		.data = (void *)&st_fs216c65_415
+	},
+	{
 		.compatible = "st,stih416-quadfs216",
-		.data = &st_fs216c65_416
+		  .data = (void *)&st_fs216c65_416
 	},
 	{
 		.compatible = "st,stih416-quadfs432",
-		.data = &st_fs432c65_416
+		.data = (void *)&st_fs432c65_416
+	},
+	{
+		.compatible = "st,stih415-quadfs660-E",
+		.data = (void *)&st_fs660c32_E_415
+	},
+	{
+		.compatible = "st,stih415-quadfs660-F",
+		.data = (void *)&st_fs660c32_F_415
 	},
 	{
 		.compatible = "st,stih416-quadfs660-E",
-		.data = &st_fs660c32_E_416
+		.data = (void *)&st_fs660c32_E_416
 	},
 	{
 		.compatible = "st,stih416-quadfs660-F",
-		.data = &st_fs660c32_F_416
+		  .data = (void *)&st_fs660c32_F_416
 	},
 	{
-		.compatible = "st,stih407-quadfs660-C",
-		.data = &st_fs660c32_C_407
+		.compatible = "st,quadfs660-C",
+		.data = (void *)&st_fs660c32_C
 	},
 	{
-		.compatible = "st,stih407-quadfs660-D",
-		.data = &st_fs660c32_D_407
+		.compatible = "st,quadfs660-D",
+		.data = (void *)&st_fs660c32_D
 	},
 	{
-		.compatible = "st,stih407-quadfs660-D",
-		.data = (void *)&st_fs660c32_D_407
+		.compatible = "st,stih407-quadfs660-D0",
+		.data = (void *)&st_fs660c32_D0_407
+	},
+	{
+		.compatible = "st,stih407-quadfs660-D2",
+		.data = (void *)&st_fs660c32_D2_407
+	},
+	{
+		.compatible = "st,stid127-quadfs660-TEL",
+		.data = (void *)&st_fs660c32_TEL_127
+	},
+	{
+		.compatible = "st,quadfs660-B",
+		.data = (void *)&st_fs660c32_B
 	},
 	{}
 };
 
 static void __init st_of_create_quadfs_fsynths(
-		struct device_node *np, const char *pll_name,
-		struct clkgen_quadfs_data *quadfs, void __iomem *reg,
+		struct device_node *np, struct clk *pll,
+		struct clkgen_quadfs_data *quadfs,
+		struct clkgen_quadfs_conf *conf_data, void __iomem *reg,
 		spinlock_t *lock)
 {
 	struct clk_onecell_data *clk_data;
@@ -1101,8 +1490,8 @@ static void __init st_of_create_quadfs_f
 	if (!clk_data)
 		return;
 
-	clk_data->clk_num = QUADFS_MAX_CHAN;
-	clk_data->clks = kzalloc(QUADFS_MAX_CHAN * sizeof(struct clk *),
+	clk_data->clk_num = QUADFS_MAX_CHAN + 1;
+	clk_data->clks = kzalloc((QUADFS_MAX_CHAN + 1) * sizeof(struct clk *),
 				 GFP_KERNEL);
 
 	if (!clk_data->clks) {
@@ -1125,8 +1514,10 @@ static void __init st_of_create_quadfs_f
 		if (*clk_name == '\0')
 			continue;
 
-		clk = st_clk_register_quadfs_fsynth(clk_name, pll_name,
-				quadfs, reg, fschan, lock);
+		clk = st_clk_register_quadfs_fsynth(clk_name,
+						    __clk_get_name(pll),
+						    quadfs, conf_data, reg,
+						    fschan, lock);
 
 		/*
 		 * If there was an error registering this clock output, clean
@@ -1135,11 +1526,13 @@ static void __init st_of_create_quadfs_f
 		if (!IS_ERR(clk)) {
 			clk_data->clks[fschan] = clk;
 			pr_debug("%s: parent %s rate %u\n",
-				__clk_get_name(clk),
-				__clk_get_name(clk_get_parent(clk)),
-				(unsigned int)clk_get_rate(clk));
+				 __clk_get_name(clk),
+				 __clk_get_name(clk_get_parent(clk)),
+				 (unsigned int)clk_get_rate(clk));
 		}
 	}
+	/* Add PLL in last index */
+	clk_data->clks[fschan] = pll;
 
 	of_clk_add_provider(np, of_clk_src_onecell_get, clk_data);
 }
@@ -1149,24 +1542,50 @@ static void __init st_of_quadfs_setup(st
 	const struct of_device_id *match;
 	struct clk *clk;
 	const char *pll_name, *clk_parent_name;
-	void __iomem *reg;
+	void __iomem *reg, *reg1;
+	bool no_vco_name = false;
 	spinlock_t *lock;
+	struct clkgen_quadfs_data *data;
+	struct clkgen_quadfs_conf *conf_data = NULL;
 
 	match = of_match_node(quadfs_of_match, np);
 	if (WARN_ON(!match))
 		return;
+	data = (struct clkgen_quadfs_data *)match->data;
+
+	match = of_match_node(quadfsconf_of_match, np);
+	if (match)
+		conf_data = (struct clkgen_quadfs_conf *)match->data;
 
 	reg = of_iomap(np, 0);
 	if (!reg)
 		return;
 
+	/* initialise additional registers, if present */
+	reg1 = of_iomap(np, 1);
+	if (reg1) {
+		writel((readl(reg1) &
+			~(data->init_reg1.mask << data->init_reg1.shift))
+		       | (data->init_reg1.offset << data->init_reg1.shift),
+		       reg1);
+		iounmap(reg1);
+	}
+
 	clk_parent_name = of_clk_get_parent_name(np, 0);
 	if (!clk_parent_name)
 		return;
 
-	pll_name = kasprintf(GFP_KERNEL, "%s.pll", np->name);
-	if (!pll_name)
-		return;
+	/* Use VCO name is specificed in DT as 4th argument
+	in "clock-output-names" */
+	if (of_property_read_string_index(np, "clock-output-names",
+					  4, &pll_name) || (*pll_name == '\0'))
+		no_vco_name = true;
+
+	if (no_vco_name) {
+		pll_name = kasprintf(GFP_KERNEL, "%s.pll", np->name);
+		if (!pll_name)
+			return;
+	}
 
 	lock = kzalloc(sizeof(*lock), GFP_KERNEL);
 	if (!lock)
@@ -1175,20 +1594,20 @@ static void __init st_of_quadfs_setup(st
 	spin_lock_init(lock);
 
 	clk = st_clk_register_quadfs_pll(pll_name, clk_parent_name,
-			(struct clkgen_quadfs_data *) match->data, reg, lock);
+					 data, conf_data, reg, lock);
 	if (IS_ERR(clk))
 		goto err_exit;
 	else
 		pr_debug("%s: parent %s rate %u\n",
-			__clk_get_name(clk),
-			__clk_get_name(clk_get_parent(clk)),
-			(unsigned int)clk_get_rate(clk));
-
-	st_of_create_quadfs_fsynths(np, pll_name,
-				    (struct clkgen_quadfs_data *)match->data,
-				    reg, lock);
+			 __clk_get_name(clk),
+			 __clk_get_name(clk_get_parent(clk)),
+			 (unsigned int)clk_get_rate(clk));
+
+	st_of_create_quadfs_fsynths(np, clk,
+				    data, conf_data, reg, lock);
 
 err_exit:
-	kfree(pll_name); /* No longer need local copy of the PLL name */
+	if (no_vco_name)
+		kfree(pll_name); /* No longer need local copy of the PLL name */
 }
 CLK_OF_DECLARE(quadfs, "st,quadfs", st_of_quadfs_setup);
diff -urNp a/drivers/clk/st/clkgen-mux.c b/drivers/clk/st/clkgen-mux.c
--- a/drivers/clk/st/clkgen-mux.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/clk/st/clkgen-mux.c	2019-09-26 21:23:27.308619400 +0100
@@ -1,7 +1,7 @@
 /*
- * clkgen-mux.c: ST GEN-MUX Clock driver
+ * clk-gena-mux.c: ST GENA-MUX Clock driver
  *
- * Copyright (C) 2014 STMicroelectronics (R&D) Limited
+ * Copyright (C) 2003-2013 STMicroelectronics (R&D) Limited
  *
  * Authors: Stephen Gallimore <stephen.gallimore@st.com>
  *	    Pankaj Dev <pankaj.dev@st.com>
@@ -13,12 +13,20 @@
  *
  */
 
+#include <linux/clk-provider.h>
+#include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/io.h>
+#include <linux/err.h>
+#include <linux/string.h>
+#include <linux/of.h>
 #include <linux/of_address.h>
-#include <linux/clk-provider.h>
+
+#include "clkgen.h"
 
 static DEFINE_SPINLOCK(clkgena_divmux_lock);
 static DEFINE_SPINLOCK(clkgenf_lock);
+static DEFINE_SPINLOCK(clkgen_doc_lock);
 
 static const char ** __init clkgen_mux_get_parents(struct device_node *np,
 						       int *num_parents)
@@ -94,7 +102,7 @@ static int clkgena_divmux_enable(struct
 	unsigned long timeout;
 	int ret = 0;
 
-	__clk_hw_set_clk(mux_hw, hw);
+	mux_hw->clk = hw->clk;
 
 	ret = clk_mux_ops.set_parent(mux_hw, genamux->muxsel);
 	if (ret)
@@ -116,7 +124,7 @@ static void clkgena_divmux_disable(struc
 	struct clkgena_divmux *genamux = to_clkgena_divmux(hw);
 	struct clk_hw *mux_hw = &genamux->mux.hw;
 
-	__clk_hw_set_clk(mux_hw, hw);
+	mux_hw->clk = hw->clk;
 
 	clk_mux_ops.set_parent(mux_hw, CKGAX_CLKOPSRC_SWITCH_OFF);
 }
@@ -126,23 +134,25 @@ static int clkgena_divmux_is_enabled(str
 	struct clkgena_divmux *genamux = to_clkgena_divmux(hw);
 	struct clk_hw *mux_hw = &genamux->mux.hw;
 
-	__clk_hw_set_clk(mux_hw, hw);
+	mux_hw->clk = hw->clk;
 
-	return (s8)clk_mux_ops.get_parent(mux_hw) > 0;
+	return ((s8)clk_mux_ops.get_parent(mux_hw) >= 0);
 }
 
-u8 clkgena_divmux_get_parent(struct clk_hw *hw)
+static u8 clkgena_divmux_get_parent(struct clk_hw *hw)
 {
 	struct clkgena_divmux *genamux = to_clkgena_divmux(hw);
 	struct clk_hw *mux_hw = &genamux->mux.hw;
 
-	__clk_hw_set_clk(mux_hw, hw);
+	mux_hw->clk = hw->clk;
 
-	genamux->muxsel = clk_mux_ops.get_parent(mux_hw);
-	if ((s8)genamux->muxsel < 0) {
-		pr_debug("%s: %s: Invalid parent, setting to default.\n",
-		      __func__, __clk_get_name(hw->clk));
-		genamux->muxsel = 0;
+	if (genamux->muxsel == CKGAX_CLKOPSRC_SWITCH_OFF) {
+		genamux->muxsel = clk_mux_ops.get_parent(mux_hw);
+		if ((s8)genamux->muxsel < 0) {
+			pr_debug("%s: %s: Invalid parent, setting to default.\n",
+				  __func__, __clk_get_name(hw->clk));
+			genamux->muxsel = 0;
+		}
 	}
 
 	return genamux->muxsel;
@@ -168,13 +178,13 @@ static int clkgena_divmux_set_parent(str
 	return 0;
 }
 
-unsigned long clkgena_divmux_recalc_rate(struct clk_hw *hw,
-		unsigned long parent_rate)
+static unsigned long clkgena_divmux_recalc_rate(struct clk_hw *hw,
+						unsigned long parent_rate)
 {
 	struct clkgena_divmux *genamux = to_clkgena_divmux(hw);
 	struct clk_hw *div_hw = &genamux->div[genamux->muxsel].hw;
 
-	__clk_hw_set_clk(div_hw, hw);
+	div_hw->clk = hw->clk;
 
 	return clk_divider_ops.recalc_rate(div_hw, parent_rate);
 }
@@ -185,7 +195,7 @@ static int clkgena_divmux_set_rate(struc
 	struct clkgena_divmux *genamux = to_clkgena_divmux(hw);
 	struct clk_hw *div_hw = &genamux->div[genamux->muxsel].hw;
 
-	__clk_hw_set_clk(div_hw, hw);
+	div_hw->clk = hw->clk;
 
 	return clk_divider_ops.set_rate(div_hw, rate, parent_rate);
 }
@@ -196,7 +206,7 @@ static long clkgena_divmux_round_rate(st
 	struct clkgena_divmux *genamux = to_clkgena_divmux(hw);
 	struct clk_hw *div_hw = &genamux->div[genamux->muxsel].hw;
 
-	__clk_hw_set_clk(div_hw, hw);
+	div_hw->clk = hw->clk;
 
 	return clk_divider_ops.round_rate(div_hw, rate, prate);
 }
@@ -215,11 +225,12 @@ static const struct clk_ops clkgena_divm
 /**
  * clk_register_genamux - register a genamux clock with the clock framework
  */
-struct clk *clk_register_genamux(const char *name,
-				const char **parent_names, u8 num_parents,
-				void __iomem *reg,
-				const struct clkgena_divmux_data *muxdata,
-				u32 idx)
+static struct clk *clk_register_genamux(const char *name,
+					const char **parent_names,
+					u8 num_parents,
+					void __iomem *reg,
+					const struct clkgena_divmux_data *data,
+					u32 idx)
 {
 	/*
 	 * Fixed constants across all ClockgenA variants
@@ -237,39 +248,41 @@ struct clk *clk_register_genamux(const c
 
 	init.name = name;
 	init.ops = &clkgena_divmux_ops;
-	init.flags = CLK_IS_BASIC;
+	 /* CLK_IGNORE_UNUSED to be removed */
+	init.flags = CLK_IS_BASIC | CLK_GET_RATE_NOCACHE;
 	init.parent_names = parent_names;
 	init.num_parents = num_parents;
 
 	genamux->mux.lock  = &clkgena_divmux_lock;
 	genamux->mux.mask = BIT(mux_width) - 1;
-	genamux->mux.shift = muxdata->mux_start_bit + (idx * mux_width);
+	genamux->mux.shift = data->mux_start_bit + (idx * mux_width);
 	if (genamux->mux.shift > 31) {
 		/*
 		 * We have spilled into the second mux register so
 		 * adjust the register address and the bit shift accordingly
 		 */
-		genamux->mux.reg = reg + muxdata->mux_offset2;
+		genamux->mux.reg = reg + data->mux_offset2;
 		genamux->mux.shift -= 32;
 	} else {
-		genamux->mux.reg   = reg + muxdata->mux_offset;
+		genamux->mux.reg   = reg + data->mux_offset;
 	}
+	genamux->muxsel = CKGAX_CLKOPSRC_SWITCH_OFF;
 
 	for (i = 0; i < NUM_INPUTS; i++) {
 		/*
 		 * Divider config for each input
 		 */
-		void __iomem *divbase = reg + muxdata->div_offsets[i];
+		void __iomem *divbase = reg + data->div_offsets[i];
 		genamux->div[i].width = divider_width;
 		genamux->div[i].reg = divbase + (idx * sizeof(u32));
 
 		/*
 		 * Mux enabled/running feedback register for each input.
 		 */
-		genamux->feedback_reg[i] = reg + muxdata->fb_offsets[i];
+		genamux->feedback_reg[i] = reg + data->fb_offsets[i];
 	}
 
-	genamux->feedback_bit_idx = muxdata->fb_start_bit_idx + idx;
+	genamux->feedback_bit_idx = data->fb_start_bit_idx + idx;
 	genamux->hw.init = &init;
 
 	clk = clk_register(NULL, &genamux->hw);
@@ -341,6 +354,34 @@ static struct clkgena_divmux_data st_div
 	.fb_start_bit_idx = 24,
 };
 
+static struct clkgena_divmux_data st_divmux_c45hs_0 = {
+	.num_outputs = 6,
+	.mux_offset = 0x1c,
+	.mux_start_bit = 0,
+	.div_offsets = { 0x800, 0x900, 0x980 },
+	.fb_offsets = { 0x2c, 0x24, 0x28 },
+	.fb_start_bit_idx = 0,
+};
+
+static struct clkgena_divmux_data st_divmux_c45hs_1 = {
+	.num_outputs = 4,
+	.mux_offset = 0x1c,
+	.mux_start_bit = 12,
+	.div_offsets = { 0x818, 0xa20, 0x998 },
+	.fb_offsets = { 0x2c, 0x24, 0x28 },
+	.fb_start_bit_idx = 6,
+};
+
+static struct clkgena_divmux_data st_divmux_c45ls = {
+	.num_outputs = 22,
+	.mux_offset = 0x1c,
+	.mux_offset2 = 0x20,
+	.mux_start_bit = 20,
+	.div_offsets = { 0x828, 0xa30, 0xb00 },
+	.fb_offsets = { 0x2c, 0x24, 0x28 },
+	.fb_start_bit_idx = 10,
+};
+
 static struct of_device_id clkgena_divmux_of_match[] = {
 	{
 		.compatible = "st,clkgena-divmux-c65-hs",
@@ -366,6 +407,18 @@ static struct of_device_id clkgena_divmu
 		.compatible = "st,clkgena-divmux-c32-odf3",
 		.data = &st_divmux_c32odf3,
 	},
+	{
+		.compatible = "st,clkgena-divmux-c45-hs-0",
+		.data = &st_divmux_c45hs_0,
+	},
+	{
+		.compatible = "st,clkgena-divmux-c45-hs-1",
+		.data = &st_divmux_c45hs_1,
+	},
+	{
+		.compatible = "st,clkgena-divmux-c45-ls",
+		.data = &st_divmux_c45ls,
+	},
 	{}
 };
 
@@ -385,7 +438,7 @@ static void __iomem * __init clkgen_get_
 	return reg;
 }
 
-void __init st_of_clkgena_divmux_setup(struct device_node *np)
+static void __init st_of_clkgena_divmux_setup(struct device_node *np)
 {
 	const struct of_device_id *match;
 	const struct clkgena_divmux_data *data;
@@ -467,25 +520,32 @@ static struct clk_div_table prediv_table
 	{ .div = 0 },
 };
 
-static struct clkgena_prediv_data prediv_c65_data = {
+static struct clkgena_prediv_data prediv_c65_data= {
 	.offset = 0x4c,
 	.shift = 31,
 	.table = prediv_table16,
 };
 
-static struct clkgena_prediv_data prediv_c32_data = {
+static struct clkgena_prediv_data prediv_c32_data= {
 	.offset = 0x50,
 	.shift = 1,
 	.table = prediv_table16,
 };
 
+static struct clkgena_prediv_data prediv_c45_data = {
+	.offset = 0x4c,
+	.shift = 31,
+	.table = prediv_table16,
+};
+
 static struct of_device_id clkgena_prediv_of_match[] = {
 	{ .compatible = "st,clkgena-prediv-c65", .data = &prediv_c65_data },
 	{ .compatible = "st,clkgena-prediv-c32", .data = &prediv_c32_data },
+	{ .compatible = "st,clkgena-prediv-c45", .data = &prediv_c45_data },
 	{}
 };
 
-void __init st_of_clkgena_prediv_setup(struct device_node *np)
+static void __init st_of_clkgena_prediv_setup(struct device_node *np)
 {
 	const struct of_device_id *match;
 	void __iomem *reg;
@@ -513,7 +573,8 @@ void __init st_of_clkgena_prediv_setup(s
 					  0, &clk_name))
 		return;
 
-	clk = clk_register_divider_table(NULL, clk_name, parent_name, 0,
+	clk = clk_register_divider_table(NULL, clk_name, parent_name,
+					 CLK_GET_RATE_NOCACHE,
 					 reg + data->offset, data->shift, 1,
 					 0, data->table, NULL);
 	if (IS_ERR(clk))
@@ -529,6 +590,58 @@ void __init st_of_clkgena_prediv_setup(s
 }
 CLK_OF_DECLARE(clkgenaprediv, "st,clkgena-prediv", st_of_clkgena_prediv_setup);
 
+static int arm_clk_rate_change(struct notifier_block *nb,
+	unsigned long flags, void *data, u8 index_ch)
+{
+	struct clk_notifier_data *cnd = data;
+	struct clk_hw *mux_hw = __clk_get_hw(cnd->clk);
+	int ret;
+
+	if (flags == PRE_RATE_CHANGE)
+		/* Change A9 parent to some clockgen */
+		ret = clk_mux_ops.set_parent(mux_hw,
+					     clk_mux_ops.get_parent(mux_hw)
+						+ index_ch);
+	else
+		/* Change A9 parent back to A9-PLL */
+		ret = clk_mux_ops.set_parent(mux_hw,
+					     clk_mux_ops.get_parent(mux_hw)
+						- index_ch);
+
+	if (ret)
+		return NOTIFY_BAD;
+
+	return NOTIFY_OK;
+}
+
+static int a9_clk_rate_change(struct notifier_block *nb,
+	unsigned long flags, void *data)
+{
+	/*
+	 * select external clock for internal clocking
+	 * by adding 2 (sets CHGCLK bit)
+	 */
+	return arm_clk_rate_change(nb, flags, data, 2);
+}
+
+static struct notifier_block a9_clk_nb = {
+	.notifier_call = a9_clk_rate_change,
+};
+
+static int a5x_clk_rate_change(struct notifier_block *nb,
+	unsigned long flags, void *data)
+{
+	/*
+	 * select external clock for internal clocking
+	 * by adding 1 (sets CHGCLK bit)
+	 */
+	return arm_clk_rate_change(nb, flags, data, 1);
+}
+
+static struct notifier_block a5x_clk_nb = {
+	.notifier_call = a5x_clk_rate_change,
+};
+
 struct clkgen_mux_data {
 	u32 offset;
 	u8 shift;
@@ -536,6 +649,13 @@ struct clkgen_mux_data {
 	spinlock_t *lock;
 	unsigned long clk_flags;
 	u8 mux_flags;
+	struct notifier_block *nb;
+};
+
+static struct clkgen_mux_data clkgen_mux_f_vcc_fvdp_415 = {
+	.offset = 0,
+	.shift = 0,
+	.width = 1,
 };
 
 static struct clkgen_mux_data clkgen_mux_c_vcc_hd_416 = {
@@ -574,6 +694,7 @@ static struct clkgen_mux_data stih415_a9
 	.offset = 0,
 	.shift = 1,
 	.width = 2,
+	.lock = &clkgen_a9_lock,
 };
 static struct clkgen_mux_data stih416_a9_mux_data = {
 	.offset = 0,
@@ -582,12 +703,30 @@ static struct clkgen_mux_data stih416_a9
 };
 static struct clkgen_mux_data stih407_a9_mux_data = {
 	.offset = 0x1a4,
-	.shift = 1,
+	.shift = 0,
 	.width = 2,
+	.nb = &a9_clk_nb,
+};
+static struct clkgen_mux_data st_a5x_mux_pll_data = {
+	.offset = 0x0,
+	.shift = 0,
+	.width = 1,
+	.lock = &clkgen_a9_lock,
+	.nb = &a5x_clk_nb,
+};
+static struct clkgen_mux_data st_a5x_mux_ext_data = {
+	.offset = 0x0,
+	.shift = 16,
+	.width = 1,
+	.lock = &clkgen_a9_lock,
 };
 
 static struct of_device_id mux_of_match[] = {
 	{
+		.compatible = "st,stih415-clkgenf-vcc-fvdp",
+		.data = &clkgen_mux_f_vcc_fvdp_415,
+	},
+	{
 		.compatible = "st,stih416-clkgenc-vcc-hd",
 		.data = &clkgen_mux_c_vcc_hd_416,
 	},
@@ -619,10 +758,18 @@ static struct of_device_id mux_of_match[
 		.compatible = "st,stih407-clkgen-a9-mux",
 		.data = &stih407_a9_mux_data,
 	},
+	{
+		.compatible = "st,clkgen-a5x-pll-mux",
+		.data = &st_a5x_mux_pll_data,
+	},
+	{
+		.compatible = "st,clkgen-a5x-ext-mux",
+		.data = &st_a5x_mux_ext_data,
+	},
 	{}
 };
 
-void __init st_of_clkgen_mux_setup(struct device_node *np)
+static void __init st_of_clkgen_mux_setup(struct device_node *np)
 {
 	const struct of_device_id *match;
 	struct clk *clk;
@@ -660,10 +807,14 @@ void __init st_of_clkgen_mux_setup(struc
 	if (IS_ERR(clk))
 		goto err;
 
+	/* Incase A9 clock then register notifier */
+	if (data->nb)
+		clk_notifier_register(clk, data->nb);
+
 	pr_debug("%s: parent %s rate %u\n",
-			__clk_get_name(clk),
-			__clk_get_name(clk_get_parent(clk)),
-			(unsigned int)clk_get_rate(clk));
+		 __clk_get_name(clk),
+		 __clk_get_name(clk_get_parent(clk)),
+		 (unsigned int)clk_get_rate(clk));
 
 	of_clk_add_provider(np, of_clk_src_simple_get, clk);
 
@@ -685,7 +836,11 @@ struct clkgen_vcc_data {
 	unsigned long clk_flags;
 };
 
-static struct clkgen_vcc_data st_clkgenc_vcc_416 = {
+static struct clkgen_vcc_data st_clkgenf_vcc_415 = {
+	.lock = NULL,
+};
+
+static struct clkgen_vcc_data st_clkgenc_vcc_41x = {
 	.clk_flags = CLK_SET_RATE_PARENT,
 };
 
@@ -694,12 +849,13 @@ static struct clkgen_vcc_data st_clkgenf
 };
 
 static struct of_device_id vcc_of_match[] = {
-	{ .compatible = "st,stih416-clkgenc", .data = &st_clkgenc_vcc_416 },
+	{ .compatible = "st,stih41x-clkgenc", .data = &st_clkgenc_vcc_41x },
+	{ .compatible = "st,stih415-clkgenf", .data = &st_clkgenf_vcc_415 },
 	{ .compatible = "st,stih416-clkgenf", .data = &st_clkgenf_vcc_416 },
 	{}
 };
 
-void __init st_of_clkgen_vcc_setup(struct device_node *np)
+static void __init st_of_clkgen_vcc_setup(struct device_node *np)
 {
 	const struct of_device_id *match;
 	void __iomem *reg;
@@ -786,7 +942,8 @@ void __init st_of_clkgen_vcc_setup(struc
 					     &mux->hw, &clk_mux_ops,
 					     &div->hw, &clk_divider_ops,
 					     &gate->hw, &clk_gate_ops,
-					     data->clk_flags);
+					     data->clk_flags |
+					     CLK_GET_RATE_NOCACHE);
 		if (IS_ERR(clk)) {
 			kfree(gate);
 			kfree(div);
@@ -795,9 +952,9 @@ void __init st_of_clkgen_vcc_setup(struc
 		}
 
 		pr_debug("%s: parent %s rate %u\n",
-			__clk_get_name(clk),
-			__clk_get_name(clk_get_parent(clk)),
-			(unsigned int)clk_get_rate(clk));
+			 __clk_get_name(clk),
+			 __clk_get_name(clk_get_parent(clk)),
+			 (unsigned int)clk_get_rate(clk));
 
 		clk_data->clks[i] = clk;
 	}
@@ -828,3 +985,827 @@ err:
 	kfree(parents);
 }
 CLK_OF_DECLARE(clkgen_vcc, "st,clkgen-vcc", st_of_clkgen_vcc_setup);
+
+/**
+ * DOC: Clock with pre-divider, having 3 ouputs.
+ *      The mux has an input setting which effectively gates its output.
+ *
+ * Traits of this clock:
+ * prepare - clk_(un)prepare only ensures parent is (un)prepared
+ * enable - clk_enable and clk_disable are functional & control gating
+ * rate - set rate is supported
+ */
+
+#define bit_mask(d)	(BIT(d) - 1)
+
+#define CCM_DIV1K_SHIFT 16
+#define CCM_DIV1K_DIVIDER 1000
+#define CCM_DIVX_DIVIDER 256
+
+struct clkgen_ccm_data {
+	u32 update_offset;
+	u8 gatediv_shift, divx_shift;
+	/* lock */
+	spinlock_t *lock;
+};
+
+struct clkgen_ccm {
+	struct clk_hw hw;
+	/* Subclassed divider structures */
+	struct clk_divider div;
+
+	u8 div_val, off_val;
+	u8 prog_shift;
+	u32 prog_offset;
+	/* lock */
+	spinlock_t	*lock;
+};
+
+#define to_clkgen_ccm(_hw) container_of(_hw, struct clkgen_ccm, hw)
+
+static int clkgen_ccm_is_enabled(struct clk_hw *hw)
+{
+	struct clkgen_ccm *ccm = to_clkgen_ccm(hw);
+	u32 regval = (readl(ccm->div.reg) >> ccm->div.shift)
+					& bit_mask(ccm->div.width);
+
+	return (regval != ccm->off_val);
+}
+
+static void clkgen_ccm_xable(struct clk_hw *hw, bool enable)
+{
+	struct clkgen_ccm *ccm = to_clkgen_ccm(hw);
+	u32 regval;
+	unsigned long flags = 0;
+	int is_enabled = clkgen_ccm_is_enabled(hw);
+
+	if (enable ? is_enabled : !is_enabled)
+		return;
+
+	spin_lock_irqsave(ccm->lock, flags);
+
+	regval = readl(ccm->div.reg);
+
+	regval &= ~(bit_mask(ccm->div.width) << ccm->div.shift);
+	writel(regval | ((enable ? ccm->div_val : ccm->off_val)
+			 << ccm->div.shift), ccm->div.reg);
+
+	spin_unlock_irqrestore(ccm->lock, flags);
+	writel(BIT(ccm->prog_shift), ccm->div.reg + ccm->prog_offset);
+}
+
+static int clkgen_ccm_enable(struct clk_hw *hw)
+{
+	clkgen_ccm_xable(hw, true);
+
+	return 0;
+}
+
+static void clkgen_ccm_disable(struct clk_hw *hw)
+{
+	clkgen_ccm_xable(hw, false);
+}
+
+static unsigned long clkgen_ccm_gatediv_recalc_rate(struct clk_hw *hw,
+						    unsigned long parent_rate)
+{
+	struct clkgen_ccm *ccm = to_clkgen_ccm(hw);
+	struct clk_hw *div_hw = &ccm->div.hw;
+	u32 regval = readl(ccm->div.reg);
+
+	if (regval & BIT(CCM_DIV1K_SHIFT))
+		return parent_rate / CCM_DIV1K_DIVIDER;
+
+	if (((regval >> ccm->div.shift)
+		 & bit_mask(ccm->div.width)) == 0x0)	/* Off */
+		return (ccm->div_val == 0) ? 0 : (parent_rate / ccm->div_val);
+
+	ccm->div_val = (regval >> ccm->div.shift) & bit_mask(ccm->div.width);
+
+	return clk_divider_ops.recalc_rate(div_hw, parent_rate);
+}
+
+static unsigned long clkgen_ccm_divx_recalc_rate(struct clk_hw *hw,
+						 unsigned long parent_rate)
+{
+	struct clkgen_ccm *ccm = to_clkgen_ccm(hw);
+	struct clk_hw *div_hw = &ccm->div.hw;
+	u32 regval = (readl(ccm->div.reg) >> ccm->div.shift)
+					& bit_mask(ccm->div.width);
+
+	if (regval == 0x0)
+		return parent_rate / 256;
+
+	if (regval == 0x1)	/* Off */
+		return (ccm->div_val == 1) ? 0 :
+			(parent_rate / ((ccm->div_val == 0x0) ?
+					CCM_DIVX_DIVIDER : ccm->div_val));
+
+	ccm->div_val = regval;
+
+	return clk_divider_ops.recalc_rate(div_hw, parent_rate);
+}
+
+static int clkgen_ccm_gatediv_set_rate(struct clk_hw *hw, unsigned long rate,
+				unsigned long parent_rate)
+{
+	struct clkgen_ccm *ccm = to_clkgen_ccm(hw);
+	struct clk_hw *div_hw = &ccm->div.hw;
+	u32 regval, ret = 0;
+	unsigned long flags = 0;
+
+	if (!rate || !parent_rate)
+		return -EINVAL;
+
+	spin_lock_irqsave(ccm->lock, flags);
+	regval = readl(ccm->div.reg) & ~BIT(CCM_DIV1K_SHIFT);
+
+	if (parent_rate / rate == CCM_DIV1K_DIVIDER) {
+		writel(regval | BIT(CCM_DIV1K_SHIFT), ccm->div.reg);
+		if (clkgen_ccm_is_enabled(hw))
+			writel(BIT(ccm->prog_shift),
+				   ccm->div.reg + ccm->prog_offset);
+		ccm->div_val = 1;
+	} else {
+		writel(regval, ccm->div.reg);
+		if (clkgen_ccm_is_enabled(hw)) {
+			ret = clk_divider_ops.set_rate(div_hw, rate,
+						       parent_rate);
+			if (ret)
+				goto out;
+			writel(BIT(ccm->prog_shift),
+				   ccm->div.reg + ccm->prog_offset);
+		}
+		ccm->div_val = parent_rate / rate;
+	}
+out:
+	spin_unlock_irqrestore(ccm->lock, flags);
+
+	return ret;
+}
+
+static int clkgen_ccm_divx_set_rate(struct clk_hw *hw, unsigned long rate,
+				unsigned long parent_rate)
+{
+	struct clkgen_ccm *ccm = to_clkgen_ccm(hw);
+	struct clk_hw *div_hw = &ccm->div.hw;
+	u32 regval, ret = 0;
+	unsigned long flags = 0;
+
+	if (!rate || !parent_rate)
+		return -EINVAL;
+
+	spin_lock_irqsave(ccm->lock, flags);
+	regval = readl(ccm->div.reg) & ~(bit_mask(ccm->div.width)
+					<< ccm->div.shift);
+
+	if (parent_rate / rate == CCM_DIVX_DIVIDER) {
+		if (clkgen_ccm_is_enabled(hw)) {
+			writel(regval, ccm->div.reg);	/* write 0x0 */
+			writel(BIT(ccm->prog_shift),
+				   ccm->div.reg + ccm->prog_offset);
+		}
+		ccm->div_val = 0;
+	} else {
+		if (clkgen_ccm_is_enabled(hw)) {
+			ret = clk_divider_ops.set_rate(div_hw, rate,
+						       parent_rate);
+			if (ret)
+				goto out;
+			writel(BIT(ccm->prog_shift),
+				   ccm->div.reg + ccm->prog_offset);
+		}
+		ccm->div_val = parent_rate / rate;
+	}
+out:
+	spin_unlock_irqrestore(ccm->lock, flags);
+
+	return ret;
+}
+
+static long clkgen_ccm_gatediv_round_rate(struct clk_hw *hw, unsigned long rate,
+				   unsigned long *prate)
+{
+	struct clkgen_ccm *ccm = to_clkgen_ccm(hw);
+	struct clk_hw *div_hw = &ccm->div.hw;
+
+	if (*prate / rate > 255)
+		return *prate / CCM_DIV1K_DIVIDER;
+
+	return clk_divider_ops.round_rate(div_hw, rate, prate);
+}
+
+static long clkgen_ccm_divx_round_rate(struct clk_hw *hw, unsigned long rate,
+				   unsigned long *prate)
+{
+	struct clkgen_ccm *ccm = to_clkgen_ccm(hw);
+	struct clk_hw *div_hw = &ccm->div.hw;
+
+	if (*prate / rate == 1)
+		return 0;	/* Error */
+
+	if (*prate / rate > 255)
+		return *prate / CCM_DIVX_DIVIDER;
+
+	return clk_divider_ops.round_rate(div_hw, rate, prate);
+}
+
+static const struct clk_ops clkgen_ccm_gatediv_ops = {
+	.enable = clkgen_ccm_enable,
+	.disable = clkgen_ccm_disable,
+	.is_enabled = clkgen_ccm_is_enabled,
+	.round_rate = clkgen_ccm_gatediv_round_rate,
+	.recalc_rate = clkgen_ccm_gatediv_recalc_rate,
+	.set_rate = clkgen_ccm_gatediv_set_rate,
+};
+
+static const struct clk_ops clkgen_ccm_divx_ops = {
+	.enable = clkgen_ccm_enable,
+	.disable = clkgen_ccm_disable,
+	.is_enabled = clkgen_ccm_is_enabled,
+	.round_rate = clkgen_ccm_divx_round_rate,
+	.recalc_rate = clkgen_ccm_divx_recalc_rate,
+	.set_rate = clkgen_ccm_divx_set_rate,
+};
+
+struct ccm_setup_data {
+	u8 shift, width, off_val;
+	const struct clk_ops *ops;
+};
+
+/**
+ * clk_register_divx - register a divx clock with the clock framework
+ */
+static struct clk *clk_register_ccm(const char *name, const char *parent_name,
+				    struct ccm_setup_data *ccm_data,
+				    u32 prog_offset, u8 prog_shift,
+				    void __iomem *reg, spinlock_t *lock)
+{
+	struct clkgen_ccm *ccm;
+	struct clk *clk;
+	struct clk_init_data init;
+
+	ccm = kzalloc(sizeof(*ccm), GFP_KERNEL);
+	if (!ccm)
+		return ERR_PTR(-ENOMEM);
+
+	init.name = name;
+	init.ops = ccm_data->ops;
+	init.flags = CLK_IS_BASIC | CLK_GET_RATE_NOCACHE;
+	init.parent_names = &parent_name;
+	init.num_parents = 1;
+
+	/*
+	 * Divider config
+	 */
+	ccm->div.shift = ccm_data->shift;
+	ccm->div.width = ccm_data->width;
+	ccm->div.reg = reg;
+	ccm->div.flags = CLK_DIVIDER_ONE_BASED;
+
+	ccm->off_val = ccm_data->off_val;
+	ccm->div_val = ccm_data->off_val;
+	ccm->prog_offset = prog_offset;
+	ccm->prog_shift = prog_shift;
+	ccm->lock = lock;
+
+	ccm->hw.init = &init;
+
+	clk = clk_register(NULL, &ccm->hw);
+	if (IS_ERR(clk)) {
+		kfree(ccm);
+		return clk;
+	}
+
+	ccm->div.hw.clk = clk;
+	pr_debug("%s: parent %s rate %lu\n",
+		 __clk_get_name(clk),
+		 __clk_get_name(clk_get_parent(clk)),
+		 clk_get_rate(clk));
+
+	return clk;
+}
+
+static struct ccm_setup_data st_ccm_gatediv = {
+	.shift		= 8,
+	.width		= 8,
+	.off_val	= 0,
+	.ops		= &clkgen_ccm_gatediv_ops
+};
+
+static struct ccm_setup_data st_ccm_divx = {
+	.shift		= 0,
+	.width		= 8,
+	.off_val	= 1,
+	.ops		= &clkgen_ccm_divx_ops
+};
+
+#define CCM_MAX_CHAN 4
+
+static void __init st_of_create_ccm_divclocks(struct device_node *np,
+					      const char *parent_name,
+					      struct clkgen_ccm_data *data,
+					      void __iomem *reg,
+					      spinlock_t *lock)
+{
+	struct clk_onecell_data *clk_data;
+	int ccm_chan;
+
+	clk_data = kzalloc(sizeof(*clk_data), GFP_KERNEL);
+	if (!clk_data)
+		return;
+
+	clk_data->clk_num = CCM_MAX_CHAN;
+	clk_data->clks = kzalloc(clk_data->clk_num * sizeof(struct clk *),
+				 GFP_KERNEL);
+
+	if (!clk_data->clks) {
+		kfree(clk_data);
+		return;
+	}
+
+	for (ccm_chan = 0; ccm_chan < clk_data->clk_num; ccm_chan++) {
+		struct clk *clk;
+		const char *clk_name;
+
+		if (of_property_read_string_index(np, "clock-output-names",
+						  ccm_chan, &clk_name)) {
+			break;
+		}
+
+		/*
+		 * If we read an empty clock name then the channel is unused
+		 */
+		if (*clk_name == '\0')
+			continue;
+
+		if (ccm_chan < 3)
+			clk = clk_register_fixed_factor(NULL, clk_name,
+							parent_name, 0, 1,
+							(1 << ccm_chan));
+		else
+			clk = clk_register_ccm(clk_name, parent_name,
+					       &st_ccm_divx,
+					       data->update_offset,
+					       data->divx_shift, reg, lock);
+
+		/*
+		 * If there was an error registering this clock output, clean
+		 * up and move on to the next one.
+		 */
+		if (!IS_ERR(clk)) {
+			clk_data->clks[ccm_chan] = clk;
+			pr_debug("%s: parent %s rate %u\n",
+				 __clk_get_name(clk),
+				 __clk_get_name(clk_get_parent(clk)),
+				 (unsigned int)clk_get_rate(clk));
+		}
+	}
+
+	of_clk_add_provider(np, of_clk_src_onecell_get, clk_data);
+}
+
+static struct clkgen_ccm_data st_ccm_A_127 = {
+	.update_offset = 0x14,
+	.gatediv_shift = 1,
+	.divx_shift = 0,
+};
+
+static struct clkgen_ccm_data st_ccm_B_127 = {
+	.update_offset = 0x10,
+	.gatediv_shift = 3,
+	.divx_shift = 2,
+};
+
+static struct clkgen_ccm_data st_ccm_D_127 = {
+	.update_offset = 0x8,
+	.gatediv_shift = 7,
+	.divx_shift = 6,
+};
+
+static struct clkgen_ccm_data st_ccm_DOC_A_127 = {
+	.update_offset = 0x14,
+	.gatediv_shift = 1,
+	.divx_shift = 0,
+	.lock = &clkgen_doc_lock,
+};
+
+static struct of_device_id ccm_of_match[] = {
+	{
+		.compatible = "st,stid127-ccm-A",
+		.data = (void *)&st_ccm_A_127
+	},
+	{
+		.compatible = "st,stid127-ccm-B",
+		.data = (void *)&st_ccm_B_127
+	},
+	{
+		.compatible = "st,stid127-ccm-D",
+		.data = (void *)&st_ccm_D_127
+	},
+	{
+		.compatible = "st,stid127-ccm-DOC-A",
+		.data = (void *)&st_ccm_DOC_A_127
+	},
+	{}
+};
+
+static void __init clkgen_ccm_setup(struct device_node *np)
+{
+	const struct of_device_id *match;
+	struct clk *clk;
+	const char *gatediv_name, *clk_parent_name;
+	void __iomem *reg;
+	/* lock */
+	spinlock_t *lock;
+	struct clkgen_ccm_data *data;
+
+	match = of_match_node(ccm_of_match, np);
+	if (WARN_ON(!match))
+		return;
+
+	data = (struct clkgen_ccm_data *)match->data;
+
+	reg = of_iomap(np, 0);
+	if (!reg)
+		return;
+
+	/* select IFE_REF as source */
+	writel(readl(reg) | (1 << 17), reg);
+
+	clk_parent_name = of_clk_get_parent_name(np, 0);
+	if (!clk_parent_name)
+		return;
+
+	gatediv_name = kasprintf(GFP_KERNEL, "%s.gatediv", np->name);
+	if (!gatediv_name)
+		return;
+
+	if (!data->lock) {
+		lock = kzalloc(sizeof(*lock), GFP_KERNEL);
+		if (!lock)
+			goto err_exit;
+
+		spin_lock_init(lock);
+	} else {
+		lock = data->lock;
+	}
+
+	clk = clk_register_ccm(gatediv_name, clk_parent_name, &st_ccm_gatediv,
+			       data->update_offset, data->gatediv_shift, reg,
+			       lock);
+
+	if (IS_ERR(clk)) {
+		if (!data->lock)
+			kfree(lock);
+		goto err_exit;
+	} else {
+		pr_debug("%s: parent %s rate %u\n",
+			 __clk_get_name(clk),
+			 __clk_get_name(clk_get_parent(clk)),
+			 (unsigned int)clk_get_rate(clk));
+	}
+
+	st_of_create_ccm_divclocks(np, gatediv_name,
+				   (struct clkgen_ccm_data *)match->data, reg,
+				   lock);
+
+err_exit:
+	kfree(gatediv_name); /* No longer need local copy of the gatediv name */
+}
+CLK_OF_DECLARE(clkgen_ccm,
+	       "st,clkgen-ccm", clkgen_ccm_setup);
+
+/**
+ * DOC: Clock with pre-divider, having 3 ouputs.
+ *      The mux has an input setting which effectively gates its output.
+ *
+ * Traits of this clock:
+ * prepare - clk_(un)prepare only ensures parent is (un)prepared
+ * enable - clk_enable and clk_disable are functional & control gating
+ * rate - set rate is supported
+ */
+
+#define bit_mask(d)	(BIT(d) - 1)
+
+#define CSM_DIV2_DIVIDER 2
+#define CSM_DIV1K_DIVIDER 1000
+
+struct clkgen_csm {
+	struct clk_hw hw;
+
+	void __iomem *reg_stop, *reg_slow;
+	u8 id;
+	bool stop_val, slow_val;
+	/* lock */
+	spinlock_t	*lock;
+};
+
+#define to_clkgen_csm(_hw) container_of(_hw, struct clkgen_csm, hw)
+
+static int clkgen_csm_is_enabled(struct clk_hw *hw)
+{
+	struct clkgen_csm *csm = to_clkgen_csm(hw);
+
+	/* stop_val = 1, slow_val = 0 ==> clock is stopped */
+
+	return !(readl(csm->reg_stop) & BIT(csm->id)) ||
+		!!(readl(csm->reg_slow) & BIT(csm->id));
+}
+
+static void clkgen_csm_xable(struct clk_hw *hw, bool enable)
+{
+	struct clkgen_csm *csm = to_clkgen_csm(hw);
+	unsigned long flags = 0;
+
+	if (enable ? clkgen_csm_is_enabled(hw) : !clkgen_csm_is_enabled(hw))
+		return;
+
+	spin_lock_irqsave(csm->lock, flags);
+
+	if (enable) {
+		writel((readl(csm->reg_stop) & ~BIT(csm->id)) |
+			(csm->stop_val << csm->id), csm->reg_stop);
+		writel((readl(csm->reg_slow) & ~BIT(csm->id)) |
+			(csm->slow_val << csm->id), csm->reg_slow);
+	} else {
+		writel(readl(csm->reg_stop) | BIT(csm->id), csm->reg_stop);
+		writel(readl(csm->reg_slow) & ~BIT(csm->id), csm->reg_slow);
+	}
+
+	spin_unlock_irqrestore(csm->lock, flags);
+}
+
+static int clkgen_csm_enable(struct clk_hw *hw)
+{
+	clkgen_csm_xable(hw, true);
+
+	return 0;
+}
+
+static void clkgen_csm_disable(struct clk_hw *hw)
+{
+	clkgen_csm_xable(hw, false);
+}
+
+static unsigned long clkgen_csm_recalc_rate(struct clk_hw *hw,
+					    unsigned long parent_rate)
+{
+	struct clkgen_csm *csm = to_clkgen_csm(hw);
+
+	csm->stop_val = (readl(csm->reg_stop) >> csm->id) & 0x1;
+	csm->slow_val = (readl(csm->reg_slow) >> csm->id) & 0x1;
+
+	/* CSM bits config
+	 * stop_val = 0, slow_val = 0 ==> bypass
+	 * stop_val = 0, slow_val = 1 ==> div by 1000 mode
+	 * stop_val = 1, slow_val = 0 ==> clock is stopped
+	 * stop_val = 1, slow_val = 1 ==> div by 2 mode
+	 */
+
+	switch ((csm->stop_val << 1) | csm->slow_val) {
+	case 0:
+		return parent_rate;
+	case 1:
+		return parent_rate / CSM_DIV1K_DIVIDER;
+	case 3:
+		return parent_rate / CSM_DIV2_DIVIDER;
+	default:
+		return 0;
+	}
+}
+
+static int clkgen_csm_set_rate(struct clk_hw *hw, unsigned long rate,
+				unsigned long parent_rate)
+{
+	struct clkgen_csm *csm = to_clkgen_csm(hw);
+	u32 ret = 0;
+	unsigned long flags = 0;
+
+	if (!rate || !parent_rate)
+		return -EINVAL;
+
+	spin_lock_irqsave(csm->lock, flags);
+
+	switch (parent_rate / rate) {
+	case 1:
+		writel(readl(csm->reg_stop) & ~BIT(csm->id), csm->reg_stop);
+		writel(readl(csm->reg_slow) & ~BIT(csm->id), csm->reg_slow);
+		break;
+	case CSM_DIV2_DIVIDER:
+		writel(readl(csm->reg_stop) | BIT(csm->id), csm->reg_stop);
+		writel(readl(csm->reg_slow) | BIT(csm->id), csm->reg_slow);
+		break;
+	case CSM_DIV1K_DIVIDER:
+		writel(readl(csm->reg_stop) & ~BIT(csm->id), csm->reg_stop);
+		writel(readl(csm->reg_slow) | BIT(csm->id), csm->reg_slow);
+		break;
+	default:
+		ret = -EINVAL;
+	}
+
+	spin_unlock_irqrestore(csm->lock, flags);
+
+	return ret;
+}
+
+static long clkgen_csm_round_rate(struct clk_hw *hw, unsigned long rate,
+				   unsigned long *prate)
+{
+	u32 div_factor = *prate / rate;
+
+	if (div_factor > 1) {
+		if (div_factor > 2)
+			return *prate / CSM_DIV1K_DIVIDER;
+
+		return *prate / CSM_DIV2_DIVIDER;
+	}
+
+	return *prate;
+}
+
+static const struct clk_ops clkgen_csm_ops = {
+	.enable = clkgen_csm_enable,
+	.disable = clkgen_csm_disable,
+	.is_enabled = clkgen_csm_is_enabled,
+	.round_rate = clkgen_csm_round_rate,
+	.recalc_rate = clkgen_csm_recalc_rate,
+	.set_rate = clkgen_csm_set_rate,
+};
+
+struct clkgen_csm_data {
+	u32 stop_offset, slow_offset;
+	u8 start_bit;
+};
+
+/**
+ * clk_register_csm - register a csm clock with the clock framework
+ */
+static struct clk *clk_register_csm(const char *name, const char *parent_name,
+				    void __iomem *reg_stop,
+				    void __iomem *reg_slow,
+				    u8 id, spinlock_t *lock)
+{
+	struct clkgen_csm *csm;
+	struct clk *clk;
+	struct clk_init_data init;
+
+	csm = kzalloc(sizeof(*csm), GFP_KERNEL);
+	if (!csm)
+		return ERR_PTR(-ENOMEM);
+
+	init.name = name;
+	init.ops = &clkgen_csm_ops;
+	init.flags = CLK_IS_BASIC | CLK_GET_RATE_NOCACHE;
+	init.parent_names = &parent_name;
+	init.num_parents = 1;
+
+	/*
+	 * CSM config
+	 */
+	csm->reg_stop = reg_stop;
+	csm->reg_slow = reg_slow;
+	csm->id = id;
+	/* initialise with OFF val */
+	csm->stop_val = 1;
+	csm->slow_val = 0;
+	csm->lock = lock;
+
+	csm->hw.init = &init;
+
+	clk = clk_register(NULL, &csm->hw);
+	if (IS_ERR(clk)) {
+		kfree(csm);
+		return clk;
+	}
+
+	pr_debug("%s: parent %s rate %lu\n",
+		 __clk_get_name(clk),
+		 __clk_get_name(clk_get_parent(clk)),
+		 clk_get_rate(clk));
+
+	return clk;
+}
+
+static struct clkgen_csm_data st_csm_AB54_127 = {
+	.stop_offset = 0x0,
+	.slow_offset = 0x4,
+	.start_bit = 20
+};
+
+static struct clkgen_csm_data st_csm_AB216_127 = {
+	.stop_offset = 0x0,
+	.slow_offset = 0x4,
+	.start_bit = 23
+};
+
+static struct clkgen_csm_data st_csm_DE54_127 = {
+	.stop_offset = 0x0,
+	.slow_offset = 0x4,
+	.start_bit = 0
+};
+
+static struct clkgen_csm_data st_csm_DE108_127 = {
+	.stop_offset = 0x0,
+	.slow_offset = 0x4,
+	.start_bit = 16
+};
+
+static struct of_device_id csm_of_match[] = {
+	{
+		.compatible = "st,stid127-csm-AB54",
+		.data = (void *)&st_csm_AB54_127
+	},
+	{
+		.compatible = "st,stid127-csm-AB216",
+		.data = (void *)&st_csm_AB216_127
+	},
+	{
+		.compatible = "st,stid127-csm-DE54",
+		.data = (void *)&st_csm_DE54_127
+	},
+	{
+		.compatible = "st,stid127-csm-DE108",
+		.data = (void *)&st_csm_DE108_127
+	},
+	{}
+};
+
+static void __init clkgen_csm_setup(struct device_node *np)
+{
+	const struct of_device_id *match;
+	const char *clk_parent_name;
+	void __iomem *reg;
+	struct clkgen_csm_data *data;
+	struct clk_onecell_data *clk_data;
+	int csm_chan;
+
+	match = of_match_node(csm_of_match, np);
+	if (WARN_ON(!match))
+		return;
+
+	data = (struct clkgen_csm_data *)match->data;
+
+	reg = of_iomap(np, 0);
+	if (!reg)
+		return;
+
+	clk_parent_name = of_clk_get_parent_name(np, 0);
+	if (!clk_parent_name)
+		return;
+
+	clk_data = kzalloc(sizeof(*clk_data), GFP_KERNEL);
+	if (!clk_data)
+		return;
+
+	clk_data->clk_num = of_property_count_strings(np, "clock-output-names");
+	if (clk_data->clk_num <= 0) {
+		kfree(clk_data);
+		return;
+	}
+
+	clk_data->clks = kzalloc(clk_data->clk_num * sizeof(struct clk *),
+				 GFP_KERNEL);
+
+	if (!clk_data->clks) {
+		kfree(clk_data);
+		return;
+	}
+
+	for (csm_chan = 0; csm_chan < clk_data->clk_num; csm_chan++) {
+		struct clk *clk;
+		const char *clk_name;
+
+		if (of_property_read_string_index(np, "clock-output-names",
+						  csm_chan, &clk_name)) {
+			break;
+		}
+
+		/*
+		 * If we read an empty clock name then the channel is unused
+		 */
+		if (*clk_name == '\0')
+			continue;
+
+		clk = clk_register_csm(clk_name, clk_parent_name,
+					   reg + data->stop_offset,
+					   reg + data->slow_offset,
+					   csm_chan, &clkgen_doc_lock);
+
+		/*
+		 * If there was an error registering this clock output, clean
+		 * up and move on to the next one.
+		 */
+		if (!IS_ERR(clk)) {
+			clk_data->clks[csm_chan] = clk;
+			pr_debug("%s: parent %s rate %u\n",
+				 __clk_get_name(clk),
+				 __clk_get_name(clk_get_parent(clk)),
+				 (unsigned int)clk_get_rate(clk));
+		}
+	}
+
+	of_clk_add_provider(np, of_clk_src_onecell_get, clk_data);
+}
+CLK_OF_DECLARE(clkgen_csm,
+	       "st,clkgen-csm", clkgen_csm_setup);
diff -urNp a/drivers/clk/st/clkgen-pll.c b/drivers/clk/st/clkgen-pll.c
--- a/drivers/clk/st/clkgen-pll.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/clk/st/clkgen-pll.c	2019-10-07 13:59:17.285315000 +0100
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2014 STMicroelectronics (R&D) Limited
+ * Copyright (C) 2003-2013 STMicroelectronics (R&D) Limited
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
@@ -14,13 +14,20 @@
  * Pankaj Dev <pankaj.dev@st.com>.
  */
 
+#include <linux/clk-provider.h>
+#include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/io.h>
+#include <linux/err.h>
+#include <linux/string.h>
+#include <linux/of.h>
 #include <linux/of_address.h>
-#include <linux/clk-provider.h>
 
 #include "clkgen.h"
+#include "vclk_algos.h"
 
 static DEFINE_SPINLOCK(clkgena_c32_odf_lock);
+DEFINE_SPINLOCK(clkgen_a9_lock);
 
 /*
  * Common PLL configuration register bits for PLL800 and PLL1600 C65
@@ -37,38 +44,72 @@ static DEFINE_SPINLOCK(clkgena_c32_odf_l
 #define C32_IDF_MASK (0x7)
 #define C32_ODF_MASK (0x3f)
 #define C32_LDF_MASK (0x7f)
+#define C32_CP_MASK (0x1f)
 
 #define C32_MAX_ODFS (4)
 
+/*
+ * PLL configuration register bits for PLL1600 C45
+ */
+#define C45_NDIV_MASK (0xff)
+#define C45_IDF_MASK (0x7)
+#define C45_ODF_MASK (0x3f)
+#define C45_CP_MASK (0x1f)
+
+/*
+ * PLL configuration register bits for PLL4600 C28
+ */
+#define C28_NDIV_MASK (0xff)
+#define C28_IDF_MASK (0x7)
+#define C28_ODF_MASK (0x3f)
+
 struct clkgen_pll_data {
 	struct clkgen_field pdn_status;
+	bool pdn_polarity;
+	struct clkgen_field pdn_ctrl;
 	struct clkgen_field locked_status;
 	struct clkgen_field mdiv;
 	struct clkgen_field ndiv;
 	struct clkgen_field pdiv;
 	struct clkgen_field idf;
 	struct clkgen_field ldf;
+	bool cp_present;
+	struct clkgen_field cp;
 	unsigned int num_odfs;
 	struct clkgen_field odf[C32_MAX_ODFS];
 	struct clkgen_field odf_gate[C32_MAX_ODFS];
+	bool divenable_present;
+	struct clkgen_field odf_divenable[C32_MAX_ODFS];
+	/* lock */
+	spinlock_t *lock;
 	const struct clk_ops *ops;
+	unsigned long pll_clkflags, odf_clkflags[C32_MAX_ODFS];
 };
 
 static const struct clk_ops st_pll1600c65_ops;
 static const struct clk_ops st_pll800c65_ops;
 static const struct clk_ops stm_pll3200c32_ops;
+static const struct clk_ops stm_pll3200c32_a9_ops;
 static const struct clk_ops st_pll1200c32_ops;
+static const struct clk_ops stm_pll1600c45_phi_a9_ops;
+static const struct clk_ops stm_pll1600c45_ops;
+static const struct clk_ops stm_pll4600c28_ops;
+static const struct clk_ops stm_pll4600c28_a9_ops;
 
-static const struct clkgen_pll_data st_pll1600c65_ax = {
+static struct clkgen_pll_data st_pll1600c65_ax = {
 	.pdn_status	= CLKGEN_FIELD(0x0, 0x1,			19),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x10,	0x1,			0),
 	.locked_status	= CLKGEN_FIELD(0x0, 0x1,			31),
 	.mdiv		= CLKGEN_FIELD(0x0, C65_MDIV_PLL1600_MASK,	0),
 	.ndiv		= CLKGEN_FIELD(0x0, C65_NDIV_MASK,		8),
 	.ops		= &st_pll1600c65_ops
 };
 
-static const struct clkgen_pll_data st_pll800c65_ax = {
+static struct clkgen_pll_data st_pll800c65_ax = {
 	.pdn_status	= CLKGEN_FIELD(0x0,	0x1,			19),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0xC,	0x1,			1),
 	.locked_status	= CLKGEN_FIELD(0x0,	0x1,			31),
 	.mdiv		= CLKGEN_FIELD(0x0,	C65_MDIV_PLL800_MASK,	0),
 	.ndiv		= CLKGEN_FIELD(0x0,	C65_NDIV_MASK,		8),
@@ -76,8 +117,10 @@ static const struct clkgen_pll_data st_p
 	.ops		= &st_pll800c65_ops
 };
 
-static const struct clkgen_pll_data st_pll3200c32_a1x_0 = {
+static struct clkgen_pll_data st_pll3200c32_a1x_0 = {
 	.pdn_status	= CLKGEN_FIELD(0x0,	0x1,			31),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x18,	0x1,			0),
 	.locked_status	= CLKGEN_FIELD(0x4,	0x1,			31),
 	.ndiv		= CLKGEN_FIELD(0x0,	C32_NDIV_MASK,		0x0),
 	.idf		= CLKGEN_FIELD(0x4,	C32_IDF_MASK,		0x0),
@@ -93,8 +136,10 @@ static const struct clkgen_pll_data st_p
 	.ops		= &stm_pll3200c32_ops,
 };
 
-static const struct clkgen_pll_data st_pll3200c32_a1x_1 = {
+static struct clkgen_pll_data st_pll3200c32_a1x_1 = {
 	.pdn_status	= CLKGEN_FIELD(0xC,	0x1,			31),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x18,	0x1,			1),
 	.locked_status	= CLKGEN_FIELD(0x10,	0x1,			31),
 	.ndiv		= CLKGEN_FIELD(0xC,	C32_NDIV_MASK,		0x0),
 	.idf		= CLKGEN_FIELD(0x10,	C32_IDF_MASK,		0x0),
@@ -110,20 +155,46 @@ static const struct clkgen_pll_data st_p
 	.ops		= &stm_pll3200c32_ops,
 };
 
+static struct clkgen_pll_data st_pll1600c45_ax_0 = {
+	.pdn_status	= CLKGEN_FIELD(0x0, 0x1,			31),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x18,	0x1,			0),
+	.locked_status	= CLKGEN_FIELD(0x4, 0x1,			31),
+	.ndiv		= CLKGEN_FIELD(0x0, C45_NDIV_MASK,		0),
+	.idf		= CLKGEN_FIELD(0x4,	C45_IDF_MASK,		0x0),
+	.ops		= &stm_pll1600c45_ops
+};
+
+static struct clkgen_pll_data st_pll1600c45_ax_1 = {
+	.pdn_status	= CLKGEN_FIELD(0xC, 0x1,			31),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x18,	0x1,			1),
+	.locked_status	= CLKGEN_FIELD(0x10, 0x1,			31),
+	.ndiv		= CLKGEN_FIELD(0xC, C45_NDIV_MASK,		0),
+	.idf		= CLKGEN_FIELD(0x10,	C45_IDF_MASK,		0x0),
+	.ops		= &stm_pll1600c45_ops
+};
+
 /* 415 specific */
-static const struct clkgen_pll_data st_pll3200c32_a9_415 = {
+static struct clkgen_pll_data st_pll3200c32_a9_415 = {
 	.pdn_status	= CLKGEN_FIELD(0x0,	0x1,			0),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x0,	0x1,			0),
 	.locked_status	= CLKGEN_FIELD(0x6C,	0x1,			0),
 	.ndiv		= CLKGEN_FIELD(0x0,	C32_NDIV_MASK,		9),
 	.idf		= CLKGEN_FIELD(0x0,	C32_IDF_MASK,		22),
+	.cp_present = true,
+	.cp		= CLKGEN_FIELD(0x0,	C32_CP_MASK,		17),
 	.num_odfs = 1,
 	.odf =		{ CLKGEN_FIELD(0x0,	C32_ODF_MASK,		3) },
 	.odf_gate =	{ CLKGEN_FIELD(0x0,	0x1,			28) },
 	.ops		= &stm_pll3200c32_ops,
 };
 
-static const struct clkgen_pll_data st_pll3200c32_ddr_415 = {
+static struct clkgen_pll_data st_pll3200c32_ddr_415 = {
 	.pdn_status	= CLKGEN_FIELD(0x0,	0x1,			0),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x0,	0x1,			0),
 	.locked_status	= CLKGEN_FIELD(0x100,	0x1,			0),
 	.ndiv		= CLKGEN_FIELD(0x8,	C32_NDIV_MASK,		0),
 	.idf		= CLKGEN_FIELD(0x0,	C32_IDF_MASK,		25),
@@ -135,8 +206,10 @@ static const struct clkgen_pll_data st_p
 	.ops		= &stm_pll3200c32_ops,
 };
 
-static const struct clkgen_pll_data st_pll1200c32_gpu_415 = {
-	.pdn_status	= CLKGEN_FIELD(0x144,	0x1,			3),
+static struct clkgen_pll_data st_pll1200c32_gpu_415 = {
+	.pdn_status	= CLKGEN_FIELD(0x4,	0x1,			0),
+	.pdn_polarity = 0,
+	.pdn_ctrl	= CLKGEN_FIELD(0x4,	0x1,			0),
 	.locked_status	= CLKGEN_FIELD(0x168,	0x1,			0),
 	.ldf		= CLKGEN_FIELD(0x0,	C32_LDF_MASK,		3),
 	.idf		= CLKGEN_FIELD(0x0,	C32_IDF_MASK,		0),
@@ -146,22 +219,30 @@ static const struct clkgen_pll_data st_p
 };
 
 /* 416 specific */
-static const struct clkgen_pll_data st_pll3200c32_a9_416 = {
+static struct clkgen_pll_data st_pll3200c32_a9_416 = {
 	.pdn_status	= CLKGEN_FIELD(0x0,	0x1,			0),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x0,	0x1,			0),
 	.locked_status	= CLKGEN_FIELD(0x6C,	0x1,			0),
 	.ndiv		= CLKGEN_FIELD(0x8,	C32_NDIV_MASK,		0),
 	.idf		= CLKGEN_FIELD(0x0,	C32_IDF_MASK,		25),
+	.cp_present = true,
+	.cp		= CLKGEN_FIELD(0x0,	C32_CP_MASK,		1),
 	.num_odfs = 1,
 	.odf		= { CLKGEN_FIELD(0x8,	C32_ODF_MASK,		8) },
 	.odf_gate	= { CLKGEN_FIELD(0x4,	0x1,			28) },
 	.ops		= &stm_pll3200c32_ops,
 };
 
-static const struct clkgen_pll_data st_pll3200c32_ddr_416 = {
+static struct clkgen_pll_data st_pll3200c32_ddr_416 = {
 	.pdn_status	= CLKGEN_FIELD(0x0,	0x1,			0),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x0,	0x1,			0),
 	.locked_status	= CLKGEN_FIELD(0x10C,	0x1,			0),
 	.ndiv		= CLKGEN_FIELD(0x8,	C32_NDIV_MASK,		0),
 	.idf		= CLKGEN_FIELD(0x0,	C32_IDF_MASK,		25),
+	.cp_present = true,
+	.cp		= CLKGEN_FIELD(0x0,	C32_CP_MASK,		1),
 	.num_odfs = 2,
 	.odf		= { CLKGEN_FIELD(0x8,	C32_ODF_MASK,		8),
 			    CLKGEN_FIELD(0x8,	C32_ODF_MASK,		14) },
@@ -170,8 +251,10 @@ static const struct clkgen_pll_data st_p
 	.ops		= &stm_pll3200c32_ops,
 };
 
-static const struct clkgen_pll_data st_pll1200c32_gpu_416 = {
+static struct clkgen_pll_data st_pll1200c32_gpu_416 = {
 	.pdn_status	= CLKGEN_FIELD(0x8E4,	0x1,			3),
+	.pdn_polarity = 0,
+	.pdn_ctrl	= CLKGEN_FIELD(0x8E4,	0x1,			3),
 	.locked_status	= CLKGEN_FIELD(0x90C,	0x1,			0),
 	.ldf		= CLKGEN_FIELD(0x0,	C32_LDF_MASK,		3),
 	.idf		= CLKGEN_FIELD(0x0,	C32_IDF_MASK,		0),
@@ -180,54 +263,144 @@ static const struct clkgen_pll_data st_p
 	.ops		= &st_pll1200c32_ops,
 };
 
-static const struct clkgen_pll_data st_pll3200c32_407_a0 = {
+static struct clkgen_pll_data st_pll3200c32_407_a0 = {
 	/* 407 A0 */
 	.pdn_status	= CLKGEN_FIELD(0x2a0,	0x1,			8),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x2a0,	0x1,			8),
 	.locked_status	= CLKGEN_FIELD(0x2a0,	0x1,			24),
 	.ndiv		= CLKGEN_FIELD(0x2a4,	C32_NDIV_MASK,		16),
 	.idf		= CLKGEN_FIELD(0x2a4,	C32_IDF_MASK,		0x0),
+	.cp_present = true,
+	.cp		= CLKGEN_FIELD(0x2a0,	C32_CP_MASK,		16),
 	.num_odfs = 1,
 	.odf		= { CLKGEN_FIELD(0x2b4, C32_ODF_MASK,		0) },
 	.odf_gate	= { CLKGEN_FIELD(0x2b4,	0x1,			6) },
 	.ops		= &stm_pll3200c32_ops,
 };
 
-static const struct clkgen_pll_data st_pll3200c32_407_c0_0 = {
-	/* 407 C0 PLL0 */
+static struct clkgen_pll_data st_pll3200c32_cx_0 = {
+	/* C0 PLL0 */
 	.pdn_status	= CLKGEN_FIELD(0x2a0,	0x1,			8),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x2a0,	0x1,			8),
 	.locked_status	= CLKGEN_FIELD(0x2a0,	0x1,			24),
 	.ndiv		= CLKGEN_FIELD(0x2a4,	C32_NDIV_MASK,		16),
 	.idf		= CLKGEN_FIELD(0x2a4,	C32_IDF_MASK,		0x0),
+	.cp_present = true,
+	.cp		= CLKGEN_FIELD(0x2a0,	C32_CP_MASK,		16),
 	.num_odfs = 1,
 	.odf		= { CLKGEN_FIELD(0x2b4, C32_ODF_MASK,		0) },
 	.odf_gate	= { CLKGEN_FIELD(0x2b4, 0x1,			6) },
 	.ops		= &stm_pll3200c32_ops,
 };
 
-static const struct clkgen_pll_data st_pll3200c32_407_c0_1 = {
-	/* 407 C0 PLL1 */
+static struct clkgen_pll_data st_pll3200c32_cx_1 = {
+	/* C0 PLL1 */
 	.pdn_status	= CLKGEN_FIELD(0x2c8,	0x1,			8),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x2c8,	0x1,			8),
 	.locked_status	= CLKGEN_FIELD(0x2c8,	0x1,			24),
 	.ndiv		= CLKGEN_FIELD(0x2cc,	C32_NDIV_MASK,		16),
 	.idf		= CLKGEN_FIELD(0x2cc,	C32_IDF_MASK,		0x0),
+	.cp_present = true,
+	.cp		= CLKGEN_FIELD(0x2c8,	C32_CP_MASK,		16),
 	.num_odfs = 1,
 	.odf		= { CLKGEN_FIELD(0x2dc, C32_ODF_MASK,		0) },
 	.odf_gate	= { CLKGEN_FIELD(0x2dc, 0x1,			6) },
 	.ops		= &stm_pll3200c32_ops,
 };
 
-static const struct clkgen_pll_data st_pll3200c32_407_a9 = {
+static struct clkgen_pll_data st_pll3200c32_407_a9 = {
 	/* 407 A9 */
 	.pdn_status	= CLKGEN_FIELD(0x1a8,	0x1,			0),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x1a8,	0x1,			0),
 	.locked_status	= CLKGEN_FIELD(0x87c,	0x1,			0),
 	.ndiv		= CLKGEN_FIELD(0x1b0,	C32_NDIV_MASK,		0),
 	.idf		= CLKGEN_FIELD(0x1a8,	C32_IDF_MASK,		25),
+	.cp_present = true,
+	.cp		= CLKGEN_FIELD(0x1a8,	C32_CP_MASK,		1),
 	.num_odfs = 1,
 	.odf		= { CLKGEN_FIELD(0x1b0, C32_ODF_MASK,		8) },
 	.odf_gate	= { CLKGEN_FIELD(0x1ac, 0x1,			28) },
+	.ops		= &stm_pll3200c32_a9_ops,
+};
+
+static struct clkgen_pll_data st_pll4600c28_418_a9 = {
+	/* 418 A9 */
+	.pdn_status	= CLKGEN_FIELD(0x1a8,	0x1,			0),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x1a8,	0x1,			0),
+	.locked_status	= CLKGEN_FIELD(0x87c,	0x1,			0),
+	.ndiv		= CLKGEN_FIELD(0x1b0,	C28_NDIV_MASK,		0),
+	.idf		= CLKGEN_FIELD(0x1a8,	C28_IDF_MASK,		25),
+	.num_odfs = 1,
+	.odf		= { CLKGEN_FIELD(0x1b0, C28_ODF_MASK,		8) },
+	.odf_gate	= { CLKGEN_FIELD(0x1ac, 0x1,			28) },
+	.divenable_present = true,
+	.odf_divenable	= { CLKGEN_FIELD(0x1b0, 0x1,	14) },
+	.ops		= &stm_pll4600c28_a9_ops,
+};
+
+/* 127 specific */
+static struct clkgen_pll_data st_pll1600c45_a9_127 = {
+	.pdn_status	= CLKGEN_FIELD(0x0,	0x1,			0),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x0,	0x1,			0),
+	.locked_status	= CLKGEN_FIELD(0x98,	0x1,			0),
+	.ndiv		= CLKGEN_FIELD(0x0,	C45_NDIV_MASK,		9),
+	.idf		= CLKGEN_FIELD(0x0,	C45_IDF_MASK,		22),
+	.cp_present = true,
+	.cp		= CLKGEN_FIELD(0x0,	C45_CP_MASK,		17),
+	.num_odfs = 0,
+	.odf =		{ CLKGEN_FIELD(0x0,	C45_ODF_MASK,		3) },
+	.lock = &clkgen_a9_lock,
+	.ops		= &stm_pll1600c45_phi_a9_ops,
+};
+
+static struct clkgen_pll_data st_pll3200c32_bx = {
+	/* B0 PLL */
+	.pdn_status	= CLKGEN_FIELD(0x2a0,	0x1,			8),
+	.pdn_polarity = 1,
+	.pdn_ctrl	= CLKGEN_FIELD(0x2a0,	0x1,			8),
+	.locked_status	= CLKGEN_FIELD(0x2a0,	0x1,			24),
+	.ndiv		= CLKGEN_FIELD(0x2a4,	C32_NDIV_MASK,		16),
+	.idf		= CLKGEN_FIELD(0x2a4,	C32_IDF_MASK,		0),
+	.cp_present = true,
+	.cp		= CLKGEN_FIELD(0x2a0,	C32_CP_MASK,		16),
+	.num_odfs = 1,
+	.odf		= { CLKGEN_FIELD(0x2b4, C32_ODF_MASK,		0) },
+	.odf_gate	= { CLKGEN_FIELD(0x2b4, 0x1,			6) },
 	.ops		= &stm_pll3200c32_ops,
 };
 
+struct clkgen_pll_conf {
+	unsigned long pll_clkflags, odf_clkflags[C32_MAX_ODFS];
+};
+
+static struct clkgen_pll_conf st_pll3200c32_conf_407_c0_1 = {
+	/* 407 C0 PLL1 */
+	.pll_clkflags = CLK_IGNORE_UNUSED,
+	.odf_clkflags = { CLK_IGNORE_UNUSED },
+};
+
+static struct clkgen_pll_data st_pll4600c28_a5x = {
+	/* A57/53 */
+	.pdn_status     = CLKGEN_FIELD(0x90,    0x1,                    0),
+	.pdn_polarity	= 1,
+	.pdn_ctrl       = CLKGEN_FIELD(0x90,    0x1,                    0),
+	.locked_status  = CLKGEN_FIELD(0xA0,    0x1,                    0),
+	.ndiv		= CLKGEN_FIELD(0x80,    C28_NDIV_MASK,          0),
+	.idf		= CLKGEN_FIELD(0x80,    C28_IDF_MASK,           16),
+	.num_odfs	= 1,
+	.odf            = { CLKGEN_FIELD(0x80, C28_ODF_MASK,            8) },
+	.odf_gate       = { CLKGEN_FIELD(0x90, 0x1,                     5) },
+	.divenable_present = true,
+	.odf_divenable	= { CLKGEN_FIELD(0x80, 0x1,	24) },
+	.ops		= &stm_pll4600c28_a9_ops,
+};
+
 /**
  * DOC: Clock Generated by PLL, rate set and enabled by bootloader
  *
@@ -243,7 +416,9 @@ static const struct clkgen_pll_data st_p
  * and STiH416.
  *
  * @hw: handle between common and hardware-specific interfaces.
+ *
  * @type: PLL instance type.
+ *
  * @regs_base: base of the PLL configuration register(s).
  *
  */
@@ -251,6 +426,13 @@ struct clkgen_pll {
 	struct clk_hw		hw;
 	struct clkgen_pll_data	*data;
 	void __iomem		*regs_base;
+	/* lock */
+	spinlock_t	*lock;
+
+	u32 ndiv;
+	u32 idf;
+	u32 odf;
+	u32 cp;
 };
 
 #define to_clkgen_pll(_hw) container_of(_hw, struct clkgen_pll, hw)
@@ -267,152 +449,524 @@ static int clkgen_pll_is_enabled(struct
 {
 	struct clkgen_pll *pll = to_clkgen_pll(hw);
 	u32 poweroff = CLKGEN_READ(pll, pdn_status);
-	return !poweroff;
+	return (pll->data->pdn_polarity) ? !poweroff : !!poweroff;
 }
 
-unsigned long recalc_stm_pll800c65(struct clk_hw *hw,
-		unsigned long parent_rate)
+static int __clkgen_pll_enable(struct clk_hw *hw)
 {
 	struct clkgen_pll *pll = to_clkgen_pll(hw);
-	unsigned long mdiv, ndiv, pdiv;
-	unsigned long rate;
-	uint64_t res;
+	unsigned long timeout;
+	int ret = 0;
 
-	if (!clkgen_pll_is_enabled(hw) || !clkgen_pll_is_locked(hw))
+	if (clkgen_pll_is_enabled(hw))
 		return 0;
 
-	pdiv = CLKGEN_READ(pll, pdiv);
-	mdiv = CLKGEN_READ(pll, mdiv);
-	ndiv = CLKGEN_READ(pll, ndiv);
+	CLKGEN_WRITE(pll, pdn_ctrl, !pll->data->pdn_polarity);
 
-	if (!mdiv)
-		mdiv++; /* mdiv=0 or 1 => MDIV=1 */
+	timeout = jiffies + msecs_to_jiffies(10);
 
-	res = (uint64_t)2 * (uint64_t)parent_rate * (uint64_t)ndiv;
-	rate = (unsigned long)div64_u64(res, mdiv * (1 << pdiv));
+	while (!clkgen_pll_is_locked(hw)) {
+		if (time_after(jiffies, timeout)) {
+			ret = -ETIMEDOUT;
+			goto out;
+		}
+		cpu_relax();
+	}
+
+	pr_debug("%s:%s enabled\n", __clk_get_name(hw->clk), __func__);
+out:
+	return ret;
+}
+
+static int clkgen_pll_enable(struct clk_hw *hw)
+{
+	struct clkgen_pll *pll = to_clkgen_pll(hw);
+	unsigned long flags = 0;
+	int ret = 0;
+
+	if (pll->lock)
+		spin_lock_irqsave(pll->lock, flags);
+
+	ret = __clkgen_pll_enable(hw);
+
+	if (pll->lock)
+		spin_unlock_irqrestore(pll->lock, flags);
+
+	return ret;
+}
+
+static void __clkgen_pll_disable(struct clk_hw *hw)
+{
+	struct clkgen_pll *pll = to_clkgen_pll(hw);
+
+	if (!clkgen_pll_is_enabled(hw))
+		return;
+
+	CLKGEN_WRITE(pll, pdn_ctrl, pll->data->pdn_polarity);
+
+	pr_debug("%s:%s disabled\n", __clk_get_name(hw->clk), __func__);
+}
+
+static void clkgen_pll_disable(struct clk_hw *hw)
+{
+	struct clkgen_pll *pll = to_clkgen_pll(hw);
+	unsigned long flags = 0;
+
+	if (pll->lock)
+		spin_lock_irqsave(pll->lock, flags);
+
+	__clkgen_pll_disable(hw);
+
+	if (pll->lock)
+		spin_unlock_irqrestore(pll->lock, flags);
+}
+
+static unsigned long recalc_stm_pll800c65(struct clk_hw *hw,
+					  unsigned long parent_rate)
+{
+	struct clkgen_pll *pll = to_clkgen_pll(hw);
+	struct vclk_pll params = { .type = VCLK_PLL800C65 };
+	unsigned long rate;
+
+	params.pdiv = CLKGEN_READ(pll, pdiv);
+	params.mdiv = CLKGEN_READ(pll, mdiv);
+	params.ndiv = CLKGEN_READ(pll, ndiv);
+
+	vclk_pll_get_rate(parent_rate, &params, &rate);
 
 	pr_debug("%s:%s rate %lu\n", __clk_get_name(hw->clk), __func__, rate);
 
 	return rate;
+}
 
+static unsigned long recalc_stm_pll1600c65(struct clk_hw *hw,
+					   unsigned long parent_rate)
+{
+	struct clkgen_pll *pll = to_clkgen_pll(hw);
+	struct vclk_pll params = { .type = VCLK_PLL1600C65 };
+	unsigned long rate;
+
+	params.mdiv = CLKGEN_READ(pll, mdiv);
+	params.ndiv = CLKGEN_READ(pll, ndiv);
+
+	vclk_pll_get_rate(parent_rate, &params, &rate);
+
+	pr_debug("%s:%s rate %lu\n", __clk_get_name(hw->clk), __func__, rate);
+
+	return rate;
 }
 
-unsigned long recalc_stm_pll1600c65(struct clk_hw *hw,
-		unsigned long parent_rate)
+static unsigned long recalc_stm_pll3200c32(struct clk_hw *hw,
+					   unsigned long parent_rate)
 {
 	struct clkgen_pll *pll = to_clkgen_pll(hw);
-	unsigned long mdiv, ndiv;
+	struct vclk_pll params = { .type = VCLK_PLL3200C32 };
 	unsigned long rate;
 
-	if (!clkgen_pll_is_enabled(hw) || !clkgen_pll_is_locked(hw))
+	params.ndiv = CLKGEN_READ(pll, ndiv);
+	params.idf = CLKGEN_READ(pll, idf);
+
+	vclk_pll_get_rate(parent_rate, &params, &rate);
+
+	pr_debug("%s:%s rate %lu\n", __clk_get_name(hw->clk), __func__, rate);
+
+	return rate;
+}
+
+static long round_rate_stm_pll3200c32(struct clk_hw *hw, unsigned long rate,
+		unsigned long *prate)
+{
+	struct vclk_pll params = { .type = VCLK_PLL3200C32 };
+
+	if (!vclk_pll_get_params(*prate, rate, &params)) {
+		vclk_pll_get_rate(*prate, &params, &rate);
+	} else {
+		pr_debug("%s: %s rate %ld Invalid\n", __func__,
+			 __clk_get_name(hw->clk), rate);
 		return 0;
+	}
+
+	pr_debug("%s: %s new rate %ld [ndiv=%u] [idf=%u]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 rate, (unsigned int)params.ndiv,
+		 (unsigned int)params.idf);
+
+	return rate;
+}
+
+static int set_rate_stm_pll3200c32(struct clk_hw *hw, unsigned long rate,
+				unsigned long parent_rate)
+{
+	struct clkgen_pll *pll = to_clkgen_pll(hw);
+	struct vclk_pll params = { .type = VCLK_PLL3200C32 };
+	long hwrate;
+	unsigned long flags = 0;
+
+	if (!rate || !parent_rate)
+		return -EINVAL;
+
+	if (!vclk_pll_get_params(parent_rate, rate, &params)) {
+		vclk_pll_get_rate(parent_rate, &params, &hwrate);
+	} else {
+		pr_debug("%s: %s rate %ld Invalid\n", __func__,
+			 __clk_get_name(hw->clk), rate);
+		return -EINVAL;
+	}
+
+	pr_debug("%s: %s new rate %ld [ndiv=0x%x] [idf=0x%x]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 hwrate, (unsigned int)params.ndiv,
+		 (unsigned int)params.idf);
+
+	if (!hwrate)
+		return -EINVAL;
+
+	pll->ndiv = params.ndiv;
+	pll->idf = params.idf;
+	if (pll->data->cp_present)
+		pll->cp = params.cp;
+
+	if (pll->lock)
+		spin_lock_irqsave(pll->lock, flags);
 
-	mdiv = CLKGEN_READ(pll, mdiv);
-	ndiv = CLKGEN_READ(pll, ndiv);
+	__clkgen_pll_disable(hw);
 
-	if (!mdiv)
-		mdiv = 1;
+	CLKGEN_WRITE(pll, ndiv, pll->ndiv);
+	CLKGEN_WRITE(pll, idf, pll->idf);
+	if (pll->data->cp_present)
+		CLKGEN_WRITE(pll, cp, pll->cp);
 
-	/* Note: input is divided by 1000 to avoid overflow */
-	rate = ((2 * (parent_rate / 1000) * ndiv) / mdiv) * 1000;
+	__clkgen_pll_enable(hw);
+
+	if (pll->lock)
+		spin_unlock_irqrestore(pll->lock, flags);
+
+	return 0;
+}
+
+static unsigned long recalc_stm_pll1200c32(struct clk_hw *hw,
+					   unsigned long parent_rate)
+{
+	struct clkgen_pll *pll = to_clkgen_pll(hw);
+	struct vclk_pll params = { .type = VCLK_PLL1200C32 };
+	unsigned long rate;
+
+	params.odf = CLKGEN_READ(pll, odf[0]);
+	params.ldf = CLKGEN_READ(pll, ldf);
+	params.idf = CLKGEN_READ(pll, idf);
+
+	vclk_pll_get_rate(parent_rate, &params, &rate);
 
 	pr_debug("%s:%s rate %lu\n", __clk_get_name(hw->clk), __func__, rate);
 
 	return rate;
 }
 
-unsigned long recalc_stm_pll3200c32(struct clk_hw *hw,
-		unsigned long parent_rate)
+static unsigned long recalc_stm_pll1600c45(struct clk_hw *hw,
+					   unsigned long parent_rate)
 {
 	struct clkgen_pll *pll = to_clkgen_pll(hw);
-	unsigned long ndiv, idf;
-	unsigned long rate = 0;
-
-	if (!clkgen_pll_is_enabled(hw) || !clkgen_pll_is_locked(hw))
-		return 0;
+	struct vclk_pll params = { .type = VCLK_PLL1600C45 };
+	unsigned long rate;
 
-	ndiv = CLKGEN_READ(pll, ndiv);
-	idf = CLKGEN_READ(pll, idf);
+	params.ndiv = CLKGEN_READ(pll, ndiv);
+	params.idf = CLKGEN_READ(pll, idf);
 
-	if (idf)
-		/* Note: input is divided to avoid overflow */
-		rate = ((2 * (parent_rate/1000) * ndiv) / idf) * 1000;
+	vclk_pll_get_rate(parent_rate, &params, &rate);
 
 	pr_debug("%s:%s rate %lu\n", __clk_get_name(hw->clk), __func__, rate);
 
 	return rate;
 }
 
-unsigned long recalc_stm_pll1200c32(struct clk_hw *hw,
-		unsigned long parent_rate)
+static unsigned long recalc_stm_pll1600c45_phi(struct clk_hw *hw,
+					       unsigned long parent_rate)
 {
 	struct clkgen_pll *pll = to_clkgen_pll(hw);
-	unsigned long odf, ldf, idf;
+	struct vclk_pll params = { .type = VCLK_PLL1600C45PHI };
 	unsigned long rate;
 
-	if (!clkgen_pll_is_enabled(hw) || !clkgen_pll_is_locked(hw))
+	params.odf = CLKGEN_READ(pll, odf[0]);
+	params.ndiv = CLKGEN_READ(pll, ndiv);
+	params.idf = CLKGEN_READ(pll, idf);
+
+	vclk_pll_get_rate(parent_rate, &params, &rate);
+
+	pr_debug("%s:%s rate %lu\n", __clk_get_name(hw->clk), __func__, rate);
+
+	return rate;
+}
+
+static long round_rate_stm_pll1600c45_phi(struct clk_hw *hw, unsigned long rate,
+		unsigned long *prate)
+{
+	struct vclk_pll params = { .type = VCLK_PLL1600C45PHI };
+
+	if (!vclk_pll_get_params(*prate, rate, &params)) {
+		vclk_pll_get_rate(*prate, &params, &rate);
+	} else {
+		pr_debug("%s: %s rate %ld Invalid\n", __func__,
+			 __clk_get_name(hw->clk), rate);
 		return 0;
+	}
+
+	pr_debug("%s: %s new rate %ld [ndiv=%u] [idf=%u] [odf=%u]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 rate, (unsigned int)params.ndiv,
+		 (unsigned int)params.idf, (unsigned int)params.odf);
+
+	return rate;
+}
+
+static int set_rate_stm_pll1600c45_phi(struct clk_hw *hw, unsigned long rate,
+				unsigned long parent_rate)
+{
+	struct clkgen_pll *pll = to_clkgen_pll(hw);
+	struct vclk_pll params = { .type = VCLK_PLL1600C45PHI };
+	long hwrate;
+	unsigned long flags = 0;
+
+	if (!rate || !parent_rate)
+		return -EINVAL;
+
+	if (!vclk_pll_get_params(parent_rate, rate, &params)) {
+		vclk_pll_get_rate(parent_rate, &params, &hwrate);
+	} else {
+		pr_debug("%s: %s rate %ld Invalid\n", __func__,
+			 __clk_get_name(hw->clk), rate);
+		return -EINVAL;
+	}
+
+	pr_debug("%s: %s new rate %ld [ndiv=0x%x] [idf=0x%x] [odf=0x%x]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 hwrate, (unsigned int)params.ndiv,
+		 (unsigned int)params.idf, (unsigned int)params.odf);
+
+	if (!hwrate)
+		return -EINVAL;
 
-	odf = CLKGEN_READ(pll, odf[0]);
-	ldf = CLKGEN_READ(pll, ldf);
-	idf = CLKGEN_READ(pll, idf);
-
-	if (!idf) /* idf==0 means 1 */
-		idf = 1;
-	if (!odf) /* odf==0 means 1 */
-		odf = 1;
+	pll->ndiv = params.ndiv;
+	pll->idf = params.idf;
+	pll->odf = params.odf;
+	if (pll->data->cp_present)
+		pll->cp = params.cp;
 
-	/* Note: input is divided by 1000 to avoid overflow */
-	rate = (((parent_rate / 1000) * ldf) / (odf * idf)) * 1000;
+	if (pll->lock)
+		spin_lock_irqsave(pll->lock, flags);
+
+	 __clkgen_pll_disable(hw);
+
+	CLKGEN_WRITE(pll, ndiv, pll->ndiv);
+	CLKGEN_WRITE(pll, idf, pll->idf);
+	CLKGEN_WRITE(pll, odf[0], pll->odf);
+	if (pll->data->cp_present)
+		CLKGEN_WRITE(pll, cp, pll->cp);
+
+	 __clkgen_pll_enable(hw);
+
+	if (pll->lock)
+		spin_unlock_irqrestore(pll->lock, flags);
+
+	return 0;
+}
+
+static unsigned long recalc_stm_pll4600c28(struct clk_hw *hw,
+					   unsigned long parent_rate)
+{
+	struct clkgen_pll *pll = to_clkgen_pll(hw);
+	struct vclk_pll params = { .type = VCLK_PLL4600C28 };
+	unsigned long rate;
+
+	params.ndiv = CLKGEN_READ(pll, ndiv);
+	params.idf = CLKGEN_READ(pll, idf);
+
+	vclk_pll_get_rate(parent_rate, &params, &rate);
 
 	pr_debug("%s:%s rate %lu\n", __clk_get_name(hw->clk), __func__, rate);
 
 	return rate;
 }
 
+static long round_rate_stm_pll4600c28(struct clk_hw *hw, unsigned long rate,
+				      unsigned long *prate)
+{
+	struct vclk_pll params = { .type = VCLK_PLL4600C28 };
+
+	if (!vclk_pll_get_params(*prate, rate, &params)) {
+		vclk_pll_get_rate(*prate, &params, &rate);
+	} else {
+		pr_debug("%s: %s rate %ld Invalid\n", __func__,
+			 __clk_get_name(hw->clk), rate);
+		return 0;
+	}
+
+	pr_debug("%s: %s new rate %ld [ndiv=%u] [idf=%u]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 rate, (unsigned int)params.ndiv,
+		 (unsigned int)params.idf);
+
+	return rate;
+}
+
+static int set_rate_stm_pll4600c28(struct clk_hw *hw, unsigned long rate,
+				   unsigned long parent_rate)
+{
+	struct clkgen_pll *pll = to_clkgen_pll(hw);
+	struct vclk_pll params = { .type = VCLK_PLL4600C28 };
+	long hwrate;
+	unsigned long flags = 0;
+
+	if (!rate || !parent_rate)
+		return -EINVAL;
+
+	if (!vclk_pll_get_params(parent_rate, rate, &params)) {
+		vclk_pll_get_rate(parent_rate, &params, &hwrate);
+	} else {
+		pr_debug("%s: %s rate %ld Invalid\n", __func__,
+			 __clk_get_name(hw->clk), rate);
+		return -EINVAL;
+	}
+
+	pr_debug("%s: %s new rate %ld [ndiv=0x%x] [idf=0x%x]\n",
+		 __func__, __clk_get_name(hw->clk),
+		 hwrate, (unsigned int)params.ndiv,
+		 (unsigned int)params.idf);
+
+	if (!hwrate)
+		return -EINVAL;
+
+	pll->ndiv = params.ndiv;
+	pll->idf = params.idf;
+
+	if (pll->lock)
+		spin_lock_irqsave(pll->lock, flags);
+
+	 __clkgen_pll_disable(hw);
+
+	CLKGEN_WRITE(pll, ndiv, pll->ndiv);
+	CLKGEN_WRITE(pll, idf, pll->idf);
+
+	 __clkgen_pll_enable(hw);
+
+	if (pll->lock)
+		spin_unlock_irqrestore(pll->lock, flags);
+
+	return 0;
+}
+
+#ifdef CONFIG_PM_SLEEP
+int arm_clock_resume(struct clk_hw *hw)
+{
+	pr_debug("%s: Only update rate: %s\n", __func__,
+			__clk_get_name(hw->clk));
+
+	/* Only update the current ARM clock rate post low power resume */
+	__clk_recalc_rates(hw->core, 0);
+
+	/* Do not set the pre-low power rate, will be done by CPUFreq frmwrk */
+	return 0;
+}
+#endif
+
 static const struct clk_ops st_pll1600c65_ops = {
+	.enable		= clkgen_pll_enable,
+	.disable	= clkgen_pll_disable,
 	.is_enabled	= clkgen_pll_is_enabled,
 	.recalc_rate	= recalc_stm_pll1600c65,
 };
 
 static const struct clk_ops st_pll800c65_ops = {
+	.enable		= clkgen_pll_enable,
+	.disable	= clkgen_pll_disable,
 	.is_enabled	= clkgen_pll_is_enabled,
 	.recalc_rate	= recalc_stm_pll800c65,
 };
 
 static const struct clk_ops stm_pll3200c32_ops = {
+	.enable		= clkgen_pll_enable,
+	.disable	= clkgen_pll_disable,
 	.is_enabled	= clkgen_pll_is_enabled,
 	.recalc_rate	= recalc_stm_pll3200c32,
+	.round_rate	= round_rate_stm_pll3200c32,
+	.set_rate	= set_rate_stm_pll3200c32,
+};
+
+static const struct clk_ops stm_pll3200c32_a9_ops = {
+	.enable		= clkgen_pll_enable,
+	.disable	= clkgen_pll_disable,
+	.is_enabled	= clkgen_pll_is_enabled,
+	.recalc_rate	= recalc_stm_pll3200c32,
+	.round_rate	= round_rate_stm_pll3200c32,
+	.set_rate	= set_rate_stm_pll3200c32,
+#ifdef CONFIG_PM_SLEEP
+	.resume		= arm_clock_resume,
+#endif
 };
 
 static const struct clk_ops st_pll1200c32_ops = {
+	.enable		= clkgen_pll_enable,
+	.disable	= clkgen_pll_disable,
 	.is_enabled	= clkgen_pll_is_enabled,
 	.recalc_rate	= recalc_stm_pll1200c32,
 };
 
+static const struct clk_ops stm_pll1600c45_ops = {
+	.enable		= clkgen_pll_enable,
+	.disable	= clkgen_pll_disable,
+	.is_enabled	= clkgen_pll_is_enabled,
+	.recalc_rate	= recalc_stm_pll1600c45,
+};
+
+static const struct clk_ops stm_pll1600c45_phi_a9_ops = {
+	.enable		= clkgen_pll_enable,
+	.disable	= clkgen_pll_disable,
+	.is_enabled	= clkgen_pll_is_enabled,
+	.recalc_rate	= recalc_stm_pll1600c45_phi,
+	.round_rate	= round_rate_stm_pll1600c45_phi,
+	.set_rate	= set_rate_stm_pll1600c45_phi,
+#ifdef CONFIG_PM_SLEEP
+	.resume		= arm_clock_resume,
+#endif
+};
+
+static const struct clk_ops stm_pll4600c28_a9_ops = {
+	.enable		= clkgen_pll_enable,
+	.disable	= clkgen_pll_disable,
+	.is_enabled	= clkgen_pll_is_enabled,
+	.recalc_rate	= recalc_stm_pll4600c28,
+	.round_rate	= round_rate_stm_pll4600c28,
+	.set_rate	= set_rate_stm_pll4600c28,
+#ifdef CONFIG_PM_SLEEP
+	.resume		= arm_clock_resume,
+#endif
+};
+
 static struct clk * __init clkgen_pll_register(const char *parent_name,
 				struct clkgen_pll_data	*pll_data,
-				void __iomem *reg,
-				const char *clk_name)
+				struct clkgen_pll_conf *conf_data,
+				void __iomem *reg, const char *clk_name,
+				spinlock_t *lock)
 {
 	struct clkgen_pll *pll;
 	struct clk *clk;
 	struct clk_init_data init;
+	unsigned long flags = ((conf_data) ? conf_data->pll_clkflags : 0);
 
 	pll = kzalloc(sizeof(*pll), GFP_KERNEL);
 	if (!pll)
 		return ERR_PTR(-ENOMEM);
 
-	init.name = clk_name;
-	init.ops = pll_data->ops;
+	init.name  = clk_name;
+	init.ops   = pll_data->ops;
 
-	init.flags = CLK_IS_BASIC;
+	init.flags = CLK_IS_BASIC | CLK_GET_RATE_NOCACHE | flags;
 	init.parent_names = &parent_name;
 	init.num_parents  = 1;
 
-	pll->data = pll_data;
+	pll->data      = pll_data;
 	pll->regs_base = reg;
-	pll->hw.init = &init;
+	pll->hw.init   = &init;
+	pll->lock      = lock;
 
 	clk = clk_register(NULL, &pll->hw);
 	if (IS_ERR(clk)) {
@@ -420,15 +974,13 @@ static struct clk * __init clkgen_pll_re
 		return clk;
 	}
 
-	pr_debug("%s: parent %s rate %lu\n",
-			__clk_get_name(clk),
-			__clk_get_name(clk_get_parent(clk)),
-			clk_get_rate(clk));
+	pr_debug("%s: parent %s rate %lu\n", __clk_get_name(clk),
+		 __clk_get_name(clk_get_parent(clk)), clk_get_rate(clk));
 
 	return clk;
 }
 
-static struct clk * __init clkgen_c65_lsdiv_register(const char *parent_name,
+static struct clk * __init clkgen_lsdiv_register(const char *parent_name,
 						     const char *clk_name)
 {
 	struct clk *clk;
@@ -437,10 +989,8 @@ static struct clk * __init clkgen_c65_ls
 	if (IS_ERR(clk))
 		return clk;
 
-	pr_debug("%s: parent %s rate %lu\n",
-			__clk_get_name(clk),
-			__clk_get_name(clk_get_parent(clk)),
-			clk_get_rate(clk));
+	pr_debug("%s: parent %s rate %lu\n", __clk_get_name(clk),
+		 __clk_get_name(clk_get_parent(clk)), clk_get_rate(clk));
 	return clk;
 }
 
@@ -498,8 +1048,9 @@ static void __init clkgena_c65_pll_setup
 	 * PLL0 HS (high speed) output
 	 */
 	clk_data->clks[0] = clkgen_pll_register(parent_name,
-			(struct clkgen_pll_data *) &st_pll1600c65_ax,
-			reg + CLKGENAx_PLL0_OFFSET, clk_name);
+						&st_pll1600c65_ax, NULL,
+						reg + CLKGENAx_PLL0_OFFSET,
+						clk_name, NULL);
 
 	if (IS_ERR(clk_data->clks[0]))
 		goto err;
@@ -512,7 +1063,7 @@ static void __init clkgena_c65_pll_setup
 	 * PLL0 LS (low speed) output, which is a fixed divide by 2 of the
 	 * high speed output.
 	 */
-	clk_data->clks[1] = clkgen_c65_lsdiv_register(__clk_get_name
+	clk_data->clks[1] = clkgen_lsdiv_register(__clk_get_name
 						      (clk_data->clks[0]),
 						      clk_name);
 
@@ -527,8 +1078,9 @@ static void __init clkgena_c65_pll_setup
 	 * PLL1 output
 	 */
 	clk_data->clks[2] = clkgen_pll_register(parent_name,
-			(struct clkgen_pll_data *) &st_pll800c65_ax,
-			reg + CLKGENAx_PLL1_OFFSET, clk_name);
+						&st_pll800c65_ax, NULL,
+						reg + CLKGENAx_PLL1_OFFSET,
+						clk_name, NULL);
 
 	if (IS_ERR(clk_data->clks[2]))
 		goto err;
@@ -543,56 +1095,183 @@ err:
 CLK_OF_DECLARE(clkgena_c65_plls,
 	       "st,clkgena-plls-c65", clkgena_c65_pll_setup);
 
+struct clkgen_odf {
+	struct clk_hw hw;
+	struct clk_ops ops;
+
+	/* ODF gate */
+	struct clk_gate gate;
+	/* ODF divisor */
+	struct clk_divider div;
+	/* ODF divenable */
+	struct clk_gate *diven;
+};
+
+#define to_clkgen_odf(_hw) container_of(_hw, struct clkgen_odf, hw)
+
+static unsigned long clkgen_odf_recalc_rate(struct clk_hw *hw,
+					    unsigned long parent_rate)
+{
+	struct clkgen_odf *odf = to_clkgen_odf(hw);
+	struct clk_hw *rate_hw = &odf->div.hw;
+
+	rate_hw->clk = hw->clk;
+
+	return clk_divider_ops.recalc_rate(rate_hw, parent_rate);
+}
+
+static long clkgen_odf_round_rate(struct clk_hw *hw, unsigned long rate,
+				  unsigned long *prate)
+{
+	struct clkgen_odf *odf = to_clkgen_odf(hw);
+	struct clk_hw *rate_hw = &odf->div.hw;
+
+	rate_hw->clk = hw->clk;
+
+	return clk_divider_ops.round_rate(rate_hw, rate, prate);
+}
+
+static int clkgen_odf_set_rate(struct clk_hw *hw, unsigned long rate,
+			       unsigned long parent_rate)
+{
+	struct clkgen_odf *odf = to_clkgen_odf(hw);
+	struct clk_hw *rate_hw = &odf->div.hw;
+	struct clk_hw *diven_hw = NULL;
+	int ret;
+
+	rate_hw->clk = hw->clk;
+
+	if (odf->diven) {
+		diven_hw = &odf->diven->hw;
+
+		diven_hw->clk = hw->clk;
+		clk_gate_ops.disable(diven_hw);
+	}
+
+	ret = clk_divider_ops.set_rate(rate_hw, rate, parent_rate);
+	if (ret)
+		return ret;
+
+	if (diven_hw)
+		return clk_gate_ops.enable(diven_hw);
+	else
+		return ret;
+}
+
+static int clkgen_odf_is_enabled(struct clk_hw *hw)
+{
+	struct clkgen_odf *odf = to_clkgen_odf(hw);
+	struct clk_hw *gate_hw = &odf->gate.hw;
+
+	gate_hw->clk = hw->clk;
+
+	return clk_gate_ops.is_enabled(gate_hw);
+}
+
+static int clkgen_odf_enable(struct clk_hw *hw)
+{
+	struct clkgen_odf *odf = to_clkgen_odf(hw);
+	struct clk_hw *gate_hw = &odf->gate.hw;
+
+	gate_hw->clk = hw->clk;
+
+	return clk_gate_ops.enable(gate_hw);
+}
+
+static void clkgen_odf_disable(struct clk_hw *hw)
+{
+	struct clkgen_odf *odf = to_clkgen_odf(hw);
+	struct clk_hw *gate_hw = &odf->gate.hw;
+
+	gate_hw->clk = hw->clk;
+
+	clk_gate_ops.disable(gate_hw);
+}
+
+static const struct clk_ops clkgen_odf_ops = {
+	.enable = clkgen_odf_enable,
+	.disable = clkgen_odf_disable,
+	.is_enabled = clkgen_odf_is_enabled,
+	.round_rate = clkgen_odf_round_rate,
+	.recalc_rate = clkgen_odf_recalc_rate,
+	.set_rate = clkgen_odf_set_rate,
+};
+
 static struct clk * __init clkgen_odf_register(const char *parent_name,
 					       void * __iomem reg,
 					       struct clkgen_pll_data *pll_data,
-					       int odf,
+					       struct clkgen_pll_conf
+					       *conf_data, int odf,
 					       spinlock_t *odf_lock,
 					       const char *odf_name)
 {
 	struct clk *clk;
 	unsigned long flags;
-	struct clk_gate *gate;
-	struct clk_divider *div;
-
-	flags = CLK_GET_RATE_NOCACHE | CLK_SET_RATE_GATE;
+	struct clkgen_odf *clkodf;
+	struct clk_init_data init;
 
-	gate = kzalloc(sizeof(*gate), GFP_KERNEL);
-	if (!gate)
+	clkodf = kzalloc(sizeof(*clkodf), GFP_KERNEL);
+	if (!clkodf)
 		return ERR_PTR(-ENOMEM);
 
-	gate->flags = CLK_GATE_SET_TO_DISABLE;
-	gate->reg = reg + pll_data->odf_gate[odf].offset;
-	gate->bit_idx = pll_data->odf_gate[odf].shift;
-	gate->lock = odf_lock;
-
-	div = kzalloc(sizeof(*div), GFP_KERNEL);
-	if (!div) {
-		kfree(gate);
-		return ERR_PTR(-ENOMEM);
+	flags = CLK_GET_RATE_NOCACHE | CLK_SET_RATE_PARENT
+		| ((conf_data) ? conf_data->odf_clkflags[odf] : 0);
+
+	clkodf->gate.flags   = CLK_GATE_SET_TO_DISABLE;
+	clkodf->gate.reg     = reg + pll_data->odf_gate[odf].offset;
+	clkodf->gate.bit_idx = pll_data->odf_gate[odf].shift;
+	clkodf->gate.lock    = odf_lock;
+
+	clkodf->div.flags = CLK_DIVIDER_ONE_BASED | CLK_DIVIDER_ALLOW_ZERO;
+	clkodf->div.reg   = reg + pll_data->odf[odf].offset;
+	clkodf->div.shift = pll_data->odf[odf].shift;
+	clkodf->div.width = fls(pll_data->odf[odf].mask);
+	clkodf->div.lock  = odf_lock;
+
+	if (pll_data->divenable_present) {
+		clkodf->diven = kzalloc(sizeof(*clkodf->diven), GFP_KERNEL);
+		if (!clkodf->diven)
+			return ERR_PTR(-ENOMEM);
+
+		clkodf->diven->reg = reg + pll_data->odf_divenable[odf].offset;
+		clkodf->diven->bit_idx = pll_data->odf_divenable[odf].shift;
+		clkodf->diven->lock    = odf_lock;
 	}
 
-	div->flags = CLK_DIVIDER_ONE_BASED | CLK_DIVIDER_ALLOW_ZERO;
-	div->reg = reg + pll_data->odf[odf].offset;
-	div->shift = pll_data->odf[odf].shift;
-	div->width = fls(pll_data->odf[odf].mask);
-	div->lock = odf_lock;
-
-	clk = clk_register_composite(NULL, odf_name, &parent_name, 1,
-				     NULL, NULL,
-				     &div->hw, &clk_divider_ops,
-				     &gate->hw, &clk_gate_ops,
-				     flags);
-	if (IS_ERR(clk))
+	clkodf->ops = clkgen_odf_ops;
+#ifdef CONFIG_PM_SLEEP
+	if (pll_data->ops->resume)
+		clkodf->ops.resume = pll_data->ops->resume;
+#endif
+
+	init.name = odf_name;
+	init.flags = flags | CLK_IS_BASIC;
+	init.parent_names = &parent_name;
+	init.num_parents = 1;
+	init.ops = &clkodf->ops;
+
+	clkodf->hw.init = &init;
+
+	clk = clk_register(NULL, &clkodf->hw);
+
+	if (IS_ERR(clk)) {
+		kfree(clkodf->diven);
 		return clk;
+	}
 
-	pr_debug("%s: parent %s rate %lu\n",
-			__clk_get_name(clk),
-			__clk_get_name(clk_get_parent(clk)),
-			clk_get_rate(clk));
+	pr_debug("%s: parent %s rate %lu\n", __clk_get_name(clk),
+		 __clk_get_name(clk_get_parent(clk)), clk_get_rate(clk));
 	return clk;
 }
 
+static struct of_device_id c32_pllconf_of_match[] = {
+	{
+		.compatible = "st,stih407-plls-conf-c32-c0_1",
+		.data = &st_pll3200c32_conf_407_c0_1,
+	},
+	{}
+};
+
 static struct of_device_id c32_pll_of_match[] = {
 	{
 		.compatible = "st,plls-c32-a1x-0",
@@ -623,17 +1302,29 @@ static struct of_device_id c32_pll_of_ma
 		.data = &st_pll3200c32_407_a0,
 	},
 	{
-		.compatible = "st,stih407-plls-c32-c0_0",
-		.data = &st_pll3200c32_407_c0_0,
+		.compatible = "st,plls-c32-cx_0",
+		.data = &st_pll3200c32_cx_0,
 	},
 	{
-		.compatible = "st,stih407-plls-c32-c0_1",
-		.data = &st_pll3200c32_407_c0_1,
+		.compatible = "st,plls-c32-cx_1",
+		.data = &st_pll3200c32_cx_1,
 	},
 	{
 		.compatible = "st,stih407-plls-c32-a9",
 		.data = &st_pll3200c32_407_a9,
 	},
+	{
+		.compatible = "st,stih418-plls-c28-a9",
+		.data = &st_pll4600c28_418_a9,
+	},
+	{
+		.compatible = "st,plls-c32-bx",
+		.data = &st_pll3200c32_bx,
+	},
+	{
+		.compatible = "st,plls-c28-a5x",
+		.data = &st_pll4600c28_a5x,
+	},
 	{}
 };
 
@@ -646,6 +1337,7 @@ static void __init clkgen_c32_pll_setup(
 	int num_odfs, odf;
 	struct clk_onecell_data *clk_data;
 	struct clkgen_pll_data	*data;
+	struct clkgen_pll_conf  *conf_data = NULL;
 
 	match = of_match_node(c32_pll_of_match, np);
 	if (!match) {
@@ -653,7 +1345,11 @@ static void __init clkgen_c32_pll_setup(
 		return;
 	}
 
-	data = (struct clkgen_pll_data *) match->data;
+	data = (struct clkgen_pll_data *)match->data;
+
+	match = of_match_node(c32_pllconf_of_match, np);
+	if (match)
+		conf_data = (struct clkgen_pll_conf *)match->data;
 
 	parent_name = of_clk_get_parent_name(np, 0);
 	if (!parent_name)
@@ -663,7 +1359,8 @@ static void __init clkgen_c32_pll_setup(
 	if (!pll_base)
 		return;
 
-	clk = clkgen_pll_register(parent_name, data, pll_base, np->name);
+	clk = clkgen_pll_register(parent_name, data, conf_data, pll_base,
+				  np->name, data->lock);
 	if (IS_ERR(clk))
 		return;
 
@@ -690,7 +1387,7 @@ static void __init clkgen_c32_pll_setup(
 						  odf, &clk_name))
 			return;
 
-		clk = clkgen_odf_register(pll_name, pll_base, data,
+		clk = clkgen_odf_register(pll_name, pll_base, data, conf_data,
 				odf, &clkgena_c32_odf_lock, clk_name);
 		if (IS_ERR(clk))
 			goto err;
@@ -708,7 +1405,7 @@ err:
 }
 CLK_OF_DECLARE(clkgen_c32_pll, "st,clkgen-plls-c32", clkgen_c32_pll_setup);
 
-static struct of_device_id c32_gpu_pll_of_match[] = {
+static struct of_device_id pll_of_match[] = {
 	{
 		.compatible = "st,stih415-gpu-pll-c32",
 		.data = &st_pll1200c32_gpu_415,
@@ -717,10 +1414,13 @@ static struct of_device_id c32_gpu_pll_o
 		.compatible = "st,stih416-gpu-pll-c32",
 		.data = &st_pll1200c32_gpu_416,
 	},
-	{}
+	{
+		.compatible = "st,stid127-a9-plls-c45",
+		.data = &st_pll1600c45_a9_127,
+	},
 };
 
-static void __init clkgengpu_c32_pll_setup(struct device_node *np)
+static void __init clkgen_pll_setup(struct device_node *np)
 {
 	const struct of_device_id *match;
 	struct clk *clk;
@@ -729,7 +1429,7 @@ static void __init clkgengpu_c32_pll_set
 	const char *clk_name;
 	struct clkgen_pll_data	*data;
 
-	match = of_match_node(c32_gpu_pll_of_match, np);
+	match = of_match_node(pll_of_match, np);
 	if (!match) {
 		pr_err("%s: No matching data\n", __func__);
 		return;
@@ -749,15 +1449,101 @@ static void __init clkgengpu_c32_pll_set
 					  0, &clk_name))
 		return;
 
-	/*
-	 * PLL 1200MHz output
-	 */
-	clk = clkgen_pll_register(parent_name, data, reg, clk_name);
+	clk = clkgen_pll_register(parent_name, data, NULL, reg, clk_name,
+				  data->lock);
 
 	if (!IS_ERR(clk))
 		of_clk_add_provider(np, of_clk_src_simple_get, clk);
 
 	return;
 }
-CLK_OF_DECLARE(clkgengpu_c32_pll,
-	       "st,clkgengpu-pll-c32", clkgengpu_c32_pll_setup);
+CLK_OF_DECLARE(clkgen_pll,
+	       "st,clkgen-pll", clkgen_pll_setup);
+
+static struct of_device_id c45_pll_of_match[] = {
+	{
+		.compatible = "st,clkgena-plls-c45-ax-0",
+		.data = &st_pll1600c45_ax_0,
+	},
+	{
+		.compatible = "st,clkgena-plls-c45-ax-1",
+		.data = &st_pll1600c45_ax_1,
+	},
+	{}
+};
+
+static void __init clkgena_c45_pll_setup(struct device_node *np)
+{
+	const struct of_device_id *match;
+	const int num_pll_outputs = 2;
+	struct clk_onecell_data *clk_data;
+	const char *parent_name;
+	void __iomem *reg;
+	const char *clk_name;
+	struct clkgen_pll_data	*data;
+
+	match = of_match_node(c45_pll_of_match, np);
+	if (!match) {
+		pr_err("%s: No matching data\n", __func__);
+		return;
+	}
+
+	data = (struct clkgen_pll_data *)match->data;
+
+	parent_name = of_clk_get_parent_name(np, 0);
+	if (!parent_name)
+		return;
+
+	reg = clkgen_get_register_base(np);
+	if (!reg)
+		return;
+
+	clk_data = kzalloc(sizeof(*clk_data), GFP_KERNEL);
+	if (!clk_data)
+		return;
+
+	clk_data->clk_num = num_pll_outputs;
+	clk_data->clks = kzalloc(clk_data->clk_num * sizeof(struct clk *),
+				 GFP_KERNEL);
+
+	if (!clk_data->clks)
+		goto err;
+
+	if (of_property_read_string_index(np, "clock-output-names",
+					  0, &clk_name))
+		goto err;
+
+	/*
+	 * PLL0 HS (high speed) output
+	 */
+	clk_data->clks[0] = clkgen_pll_register(parent_name,
+						data, NULL, reg, clk_name,
+						data->lock);
+
+	if (IS_ERR(clk_data->clks[0]))
+		goto err;
+
+	if (of_property_read_string_index(np, "clock-output-names",
+					  1, &clk_name))
+		goto err;
+
+	/*
+	 * PLL0 LS (low speed) output, which is a fixed divide by 2 of the
+	 * high speed output.
+	 */
+	clk_data->clks[1] = clkgen_lsdiv_register(__clk_get_name
+						      (clk_data->clks[0]),
+						      clk_name);
+
+	if (IS_ERR(clk_data->clks[1]))
+		goto err;
+
+	of_clk_add_provider(np, of_clk_src_onecell_get, clk_data);
+	return;
+
+err:
+	kfree(clk_data->clks);
+	kfree(clk_data);
+}
+CLK_OF_DECLARE(clkgena_c45_plls,
+	       "st,clkgena-plls-c45", clkgena_c45_pll_setup);
diff -urNp a/drivers/clk/st/clkgen.h b/drivers/clk/st/clkgen.h
--- a/drivers/clk/st/clkgen.h	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/clk/st/clkgen.h	2019-09-26 21:23:27.308619400 +0100
@@ -3,12 +3,14 @@ File  : Clock H/w specific Information
 
 Author: Pankaj Dev <pankaj.dev@st.com>
 
-Copyright (C) 2014 STMicroelectronics
+Copyright (C) 2013 STMicroelectronics
 ************************************************************************/
 
 #ifndef __CLKGEN_INFO_H
 #define __CLKGEN_INFO_H
 
+extern spinlock_t clkgen_a9_lock;
+
 struct clkgen_field {
 	unsigned int offset;
 	unsigned int mask;
diff -urNp a/drivers/clk/st/soc.c b/drivers/clk/st/soc.c
--- a/drivers/clk/st/soc.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/clk/st/soc.c	2019-09-26 21:23:27.312619400 +0100
@@ -0,0 +1,1062 @@
+/*
+ * Copyright (C) ST-Microelectronics SA 2014
+ * Author:  Maxime Coquelin <maxime.coquelin@st.com> for ST-Microelectronics.
+ * License terms:  GNU General Public License (GPL), version 2
+ */
+
+#include <linux/module.h>
+#include <linux/of_platform.h>
+#include <linux/platform_device.h>
+#include <linux/slab.h>
+#include <linux/string.h>
+#include <linux/of.h>
+#include <linux/list.h>
+#include <linux/clk-private.h>
+#include <linux/clk-provider.h>
+#include <linux/syscore_ops.h>
+
+static LIST_HEAD(st_clk_list);
+
+struct st_soc_clk {
+	struct list_head list;
+	struct clk *clk, *pclk, *pclk_save;
+	bool disable_on_resume, restore_on_resume;
+	unsigned long rate_save;
+};
+
+struct st_soc_clk_init {
+	char *name;
+	bool always_on, disable_on_resume, restore_on_resume;
+	char *pclk;
+};
+
+#define SOC_CLK_INIT(_n)		\
+	{				\
+		.name = _n,		\
+		.always_on = false,	\
+	}
+
+#define SOC_CLK_INIT_ALWAYS_ON(_n)	\
+	{				\
+		.name = _n,		\
+		.always_on = true,	\
+	}
+
+#define SOC_CLK_INIT_STDBY_PARENT(_n, _pc)		\
+	{				\
+		.name = _n,	 \
+		.pclk = _pc, \
+	}
+
+#define SOC_CLK_INIT_DIS_ON_RESUME(_n)	\
+	{				\
+		.name = _n,		\
+		.disable_on_resume = true,	\
+	}
+
+#define SOC_CLK_RESTORE_ON_RESUME(_n)	\
+	{				\
+		.name = _n,		\
+		.restore_on_resume = true,	\
+	}
+
+struct st_clk_tree {
+	char *clk;
+	char *pclk;
+	unsigned long rate;
+};
+
+static const struct st_clk_tree *st_clktree;
+static const struct st_clk_tree *st_ext_clktree;
+
+#define CLKTREE_SET(_c, _pc, _r) \
+	{			 \
+		.clk = _c,	 \
+		.pclk = _pc,	 \
+		.rate = _r,	 \
+	}
+
+#define CLKTREE_SET_RATE(__c, __r) \
+	CLKTREE_SET(__c, NULL, __r)
+
+#define CLKTREE_SET_PARENT(__c, __p) \
+	CLKTREE_SET(__c, __p, 0)
+
+static const struct st_clk_tree stih415_clktree[] = {
+	CLKTREE_SET_PARENT("CLK_S_PIX_MAIN", "CLK_M_PIX_MAIN_PIPE"),
+	CLKTREE_SET_PARENT("CLK_S_PIX_AUX", "CLK_M_PIX_AUX_PIPE"),
+	CLKTREE_SET_RATE("CLK_S_THSENS", 996000),
+	{},
+};
+
+static const struct st_soc_clk_init stih415_soc_clks[] = {
+	SOC_CLK_INIT_ALWAYS_ON("CLK_S_ICN_REG_0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLOCKGEN_DDR0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLOCKGEN_DDR1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_S_ICN_IF_0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_S_STAC_PHY"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_S_VTAC_TX_PHY"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_S_ICN_IF_1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICM_DISP"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_CPU"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_ERAM"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_HVA_LMI"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_GPU"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_REG_10"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_STAC_PHY"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_STAC_SYS"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_TS"),
+	{},
+};
+
+static const struct st_clk_tree stih416_clktree[] = {
+	CLKTREE_SET_RATE("CLK_S_C_FS0_CH2", 625000),
+	CLKTREE_SET("CLK_S_THSENS", "CLK_S_C_FS0_CH2", 156250),
+	CLKTREE_SET_RATE("CLOCKGEN_E.pll", 510000000),
+	CLKTREE_SET("CLK_M_MPELPC", "CLOCKGEN_E.pll", 600000),
+	CLKTREE_SET_RATE("CLK_S_C_FS0_CH0", 297000000),
+	CLKTREE_SET_PARENT("CLK_S_VCC_HD", "CLK_S_C_FS0_CH0"),
+	CLKTREE_SET("CLK_S_PIX_MAIN", "CLK_S_VCC_HD", 297000000),
+	CLKTREE_SET_PARENT("CLK_M_F_VCC_HD", "CLK_S_PIX_MAIN"),
+	CLKTREE_SET_PARENT("CLK_M_PIX_MAIN_PIPE", "CLK_M_F_VCC_HD"),
+	CLKTREE_SET("CLK_S_PIX_HDMI", "CLK_S_VCC_HD", 297000000),
+	CLKTREE_SET("CLK_S_HDMI_REJECT_PLL", "CLK_S_VCC_HD", 297000000),
+
+	CLKTREE_SET_RATE("CLK_S_C_VCC_SD", 108000000),
+	CLKTREE_SET("CLK_S_PIX_AUX", "CLK_S_C_VCC_SD", 13500000),
+	CLKTREE_SET_PARENT("CLK_M_F_VCC_SD", "CLK_S_PIX_AUX"),
+	CLKTREE_SET_PARENT("CLK_M_PIX_AUX_PIPE", "CLK_M_F_VCC_SD"),
+	CLKTREE_SET_PARENT("CLK_S_HDDAC", "CLK_S_C_VCC_SD"),
+	CLKTREE_SET_PARENT("CLK_S_PIX_HD", "CLK_S_C_VCC_SD"),
+
+	CLKTREE_SET_PARENT("CLK_S_TMDS_HDMI", "CLK_S_TMDS_FROMPHY"),
+
+	CLKTREE_SET_RATE("CLK_M_HVA_FS", 350000000),
+	CLKTREE_SET_PARENT("CLK_M_HVA", "CLK_M_HVA_FS"),
+	{},
+};
+
+static const struct st_soc_clk_init stih416_soc_clks[] = {
+	SOC_CLK_INIT_ALWAYS_ON("CLK_S_ICN_REG_0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_S_ICN_REG_LP_0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLOCKGEN_DDR0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLOCKGEN_DDR1"),
+	SOC_CLK_INIT("CLK_S_ICN_IF_0"),
+	SOC_CLK_INIT("CLK_S_ICN_IF_2"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_S_STAC_PHY"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_S_ICN_IF_1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_S_STAC_SYS"),
+	SOC_CLK_INIT("CLK_M_ICM_LMI"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_CPU"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_STAC"),
+	SOC_CLK_INIT("CLK_M_TX_ICN_TS"),
+	SOC_CLK_INIT("CLK_M_ICN_REG_12"),
+	SOC_CLK_INIT("CLK_M_ICN_REG_10"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_REG_11"),
+	SOC_CLK_INIT("CLK_M_RX_ICN_TS"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_REG_13"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_STAC_PHY"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_STAC_SYS"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_COMPO"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_REG_14"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_VDP_2"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_TX_ICN_DMU_0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_TX_ICN_DMU_1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_RX_ICN_DMU_0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_RX_ICN_DMU_1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_ST231"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_VP8"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_ICN_BDISP"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_TX_ICN_GPU"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_RX_ICN_GPU"),
+	SOC_CLK_INIT("CLK_M_RX_ICN_VDP_0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_PIX_MAIN_PIPE"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_PIX_AUX_PIPE"),
+	{},
+};
+
+static const struct st_soc_clk_init stih419_soc_clks[] = {
+	SOC_CLK_INIT("CLK_PROC_GDP_COMPO"),
+	SOC_CLK_INIT("CLK_PROC_SC"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_MMC_1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_PROC_SC"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_IC_LMI1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_IC_LMI0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_SBC"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_RX_ICN_DMU"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_RX_ICN_HVA"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_TX_ICN_DMU"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_LMI"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_A9"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_VID_DMU", "CLK_SYSIN"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_TX_ICN_1"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_TX_ICN_HADES", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_RX_ICN_HADES", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_CLUST_HEVC", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_ICN_REG_16", "CLK_SYSIN"),
+	{},
+};
+
+static const struct st_soc_clk_init stih418_soc_clks[] = {
+	SOC_CLK_INIT("CLK_COMPO_DVP"),
+	SOC_CLK_INIT("CLK_PROC_SC"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_MMC_1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_PROC_SC"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_IC_LMI1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_IC_LMI0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_SBC"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_RX_ICN_DMU"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_RX_ICN_HVA"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_TX_ICN_DMU"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_LMI"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_A9"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_VID_DMU", "CLK_SYSIN"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_TX_ICN_1"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_TX_ICN_HADES", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_RX_ICN_HADES", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_CLUST_HEVC", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_ICN_REG_16", "CLK_SYSIN"),
+	{},
+};
+
+static const struct st_clk_tree stih410_ext_clktree[] = {
+
+	/* Clockgen C0 extension */
+	CLKTREE_SET_RATE("CLK_MMC_0", 200000000),
+	{},
+};
+
+static const struct st_clk_tree stih412_ext_clktree[] = {
+
+	/* Clockgen C0 extension */
+	/* Extension for STiH312, STiH412 */
+	CLKTREE_SET("CLK_ICN_GPU", "CLK_S_C0_PLL1_ODF_0", 400000000),
+	{},
+};
+
+static const struct st_soc_clk_init stih410_soc_clks[] = {
+	SOC_CLK_INIT("CLK_FLASH_PROMIP"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_COMPO_DVP"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_MMC_1"),
+	SOC_CLK_INIT("CLK_PROC_STFE"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_IC_LMI0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_SBC"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_RX_ICN_DMU", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_RX_ICN_HVA", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_TX_ICN_DMU", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_ETH_PHY", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_ETH_REF_PHYCLK", "CLK_SYSIN"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_LMI"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_A9"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_EXT2FA9", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_VID_DMU", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_TX_ICN_DISP_1", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_TX_ICN_HADES", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_RX_ICN_HADES", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_CLUST_HADES", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_ICN_REG_16", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_ICN_CPU", "CLK_SYSIN"),
+	{},
+};
+
+static const struct st_clk_tree stih407_clktree[] = {
+	/* Clockgen D0 */
+	CLKTREE_SET_RATE("CLK_S_D0_QUADFS.pll", 660000000),
+	CLKTREE_SET_RATE("CLK_S_D0_FS0_CH0", 50000000),
+	CLKTREE_SET("CLK_PCM_0", "CLK_S_D0_FS0_CH0", 50000000),
+	CLKTREE_SET_RATE("CLK_S_D0_FS0_CH1", 50000000),
+	CLKTREE_SET("CLK_PCM_1", "CLK_S_D0_FS0_CH1", 50000000),
+	CLKTREE_SET_RATE("CLK_S_D0_FS0_CH2", 50000000),
+	CLKTREE_SET("CLK_PCM_2", "CLK_S_D0_FS0_CH2", 50000000),
+	CLKTREE_SET_RATE("CLK_S_D0_FS0_CH3", 50000000),
+	CLKTREE_SET("CLK_SPDIFF", "CLK_S_D0_FS0_CH3", 50000000),
+
+	/* Clockgen D2 */
+	CLKTREE_SET_RATE("CLK_S_D2_QUADFS.pll", 660000000),
+
+	/* Clockgen D3 */
+	CLKTREE_SET_RATE("CLK_S_D3_QUADFS.pll", 660000000),
+	CLKTREE_SET_RATE("CLK_S_D3_FS0_CH0", 27000000),
+	CLKTREE_SET("CLK_STFE_FRC1", "CLK_S_D3_FS0_CH0", 27000000),
+	CLKTREE_SET("CLK_FRC1_REMOTE", "CLK_S_D3_FS0_CH0", 27000000),
+	CLKTREE_SET_RATE("CLK_S_D3_FS0_CH1", 108000000),
+	CLKTREE_SET("CLK_TSOUT_0", "CLK_S_D3_FS0_CH1", 108000000),
+	CLKTREE_SET("CLK_TSOUT_1", "CLK_S_D3_FS0_CH1", 108000000),
+	CLKTREE_SET("CLK_MCHI", "CLK_S_D3_FS0_CH1", 27000000),
+	CLKTREE_SET("CLK_LPC_0", "CLK_SYSIN", 600000),
+
+	/* Clockgen C0 */
+	CLKTREE_SET_RATE("CLK_S_C0_FS0_CH2", 27000000),
+	CLKTREE_SET("CLK_DSS_LPC", "CLK_S_C0_FS0_CH2", 27000000),
+	CLKTREE_SET_RATE("CLK_S_C0_FS0_CH3", 250000000),
+	CLKTREE_SET_RATE("CLK_ETH_REF_PHYCLK", 125000000),
+	CLKTREE_SET_RATE("CLK_ETH_PHY", 125000000),
+	{},
+};
+
+static const struct st_soc_clk_init stih407_soc_clks[] = {
+	SOC_CLK_INIT("CLK_PROC_STFE"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_MMC_1"),
+	SOC_CLK_INIT("CLK_COMPO_DVP"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_IC_LMI0"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_ICN_CPU", "CLK_SYSIN"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_SBC"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_RX_ICN_DMU", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_RX_ICN_HVA", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_TX_ICN_DMU", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_ETH_PHY", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_ETH_REF_PHYCLK", "CLK_SYSIN"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_LMI"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_M_A9"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_EXT2FA9", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_VID_DMU", "CLK_SYSIN"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_TX_ICN_DISP_1", "CLK_SYSIN"),
+	{},
+};
+
+static const struct st_clk_tree stid127_clktree[] = {
+	CLKTREE_SET_RATE("CLK_USB_SRC", 540000000),
+	CLKTREE_SET_RATE("CLK_ETH0", 25000000),
+	CLKTREE_SET_RATE("CLOCKGEN_CCM_USB.gatediv", 540000000),
+	CLKTREE_SET_RATE("CLK_USB_REF", 12000000),
+	CLKTREE_SET_RATE("CLOCKGEN_CCM_LPC.gatediv", 540000),
+	CLKTREE_SET_RATE("CLK_THERMAL_SENSE", 135000),
+	CLKTREE_SET_RATE("CLK_LPC_COMMS", 40000),
+	CLKTREE_SET_RATE("CLK_ZSI", 49152000),
+	CLKTREE_SET_RATE("CLK_FDMA_TEL", 400000000),
+	CLKTREE_SET_RATE("CLOCKGEN_CCM_TEL.gatediv", 49152000),
+	CLKTREE_SET_RATE("CLK_ZSI_APPL", 1024000),
+	CLKTREE_SET_RATE("CLK_DOC_VCO", 540000000),
+	CLKTREE_SET_RATE("CLK_FP", 200000000),
+	CLKTREE_SET_RATE("CLK_D3_XP70", 324000000),
+	CLKTREE_SET_RATE("CLK_IFE", 216000000),
+	{},
+};
+
+static const struct st_soc_clk_init stid127_soc_clks[] = {
+	SOC_CLK_INIT("CLK_FDMA_TEL"),
+	SOC_CLK_INIT("CLK_FP"),
+	SOC_CLK_INIT("CLK_IFE"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_LP_DQAM", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT("CLK_D3_XP70"),
+	SOC_CLK_INIT("CLK_TSOUT_SRC"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_GLOBAL_ROUTER",
+				  "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_ROUTER", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_GLOBAL_NETWORK",
+				  "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_CM_ST40", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_A9_EXT2F", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_MAIN", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_IC_DDR"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_CPU", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_LP", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_LP_CPU", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_DMA", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_LP_ETH", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_PCIE", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_GLOBAL_PCI", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_GLOBAL_PCI_TARG",
+				  "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_LP_D3", "CLK_S_A0_OSC_PREDIV"),
+	SOC_CLK_INIT_STDBY_PARENT("CLK_IC_LP_HD", "CLK_S_A0_OSC_PREDIV"),
+	{},
+};
+
+static const struct st_clk_tree sti8416_clktree[] = {
+	/* Some Part of this configuration might move to Target Pack Later*/
+	CLKTREE_SET("CLK_ST231_DMU_0", "CLK_S_B0_PLL0_ODF_0", 700000000),
+	CLKTREE_SET("CLK_ST231_DMU_1", "CLK_S_B0_PLL0_ODF_0", 700000000),
+	CLKTREE_SET("CLK_VID_DMU_0", "CLK_S_B0_PLL0_ODF_0", 700000000),
+	CLKTREE_SET("CLK_VID_DMU_1", "CLK_S_B0_PLL0_ODF_0", 700000000),
+	CLKTREE_SET("CLK_PP_DMU_0", "CLK_S_B0_PLL0_ODF_0", 280000000),
+	CLKTREE_SET("CLK_PP_DMU_1", "CLK_S_B0_PLL0_ODF_0", 280000000),
+	CLKTREE_SET("CLK_ICN_CAL2", "CLK_S_B0_PLL0_ODF_0", 700000000),
+	CLKTREE_SET("CLK_ICN_VDEC1", "CLK_S_B0_FS0_CH0", 500000000),
+	CLKTREE_SET("CLK_ICN_DISP", "CLK_S_B0_FS0_CH0", 500000000),
+	CLKTREE_SET("CLK_ICN_HSIF", "CLK_S_B0_FS0_CH2", 333000000),
+	CLKTREE_SET("CLK_IC_VDEC1", "CLK_S_B0_FS0_CH2", 333000000),
+	CLKTREE_SET("CLK_VID_VP8", "CLK_S_B0_FS0_CH2", 333000000),
+	CLKTREE_SET("CLK_IC_DISP", "CLK_S_B0_FS0_CH2", 333000000),
+	CLKTREE_SET("CLK_ICN_REG_2", "CLK_S_B0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_ICN_REG_3", "CLK_S_B0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_PWM_0", "CLK_S_B0_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_PWM_1", "CLK_S_B0_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_PROMIP_DISP", "CLK_S_B0_PLL0_ODF_0", 50000000),
+
+	CLKTREE_SET("CLK_PLL_VSAFE", "CLK_S_B1_PLL0_ODF_0", 213000000),
+	CLKTREE_SET("CLK_ICN_NET", "CLK_S_B1_FS0_CH0", 333000000),
+	CLKTREE_SET("CLK_ICN_TS", "CLK_S_B1_FS0_CH0", 333000000),
+	CLKTREE_SET("CLK_ICN_VIDIN", "CLK_S_B1_PLL0_ODF_0", 533000000),
+	CLKTREE_SET("CLK_IC_VIDIN", "CLK_S_B1_FS0_CH0", 333000000),
+	CLKTREE_SET("CLK_ICN_REG_4", "CLK_S_B1_PLL0_ODF_0", 213000000),
+	CLKTREE_SET("CLK_PROC_FVDP_MAIN", "CLK_S_B1_FS0_CH1", 400000000),
+	CLKTREE_SET("CLK_PROC_FVDP_ENC_0", "CLK_S_B1_FS0_CH1", 400000000),
+	CLKTREE_SET("CLK_PROC_FVDP_ENC_1", "CLK_S_B1_FS0_CH1", 400000000),
+	CLKTREE_SET("CLK_VCPU_FVDP_MAIN", "CLK_S_B1_PLL0_ODF_0", 355000000),
+	CLKTREE_SET("CLK_CORE_FP2", "CLK_S_B1_PLL0_ODF_0", 266000000),
+	CLKTREE_SET("CLK_PROC_STBE", "CLK_S_B1_PLL0_ODF_0", 533000000),
+	CLKTREE_SET("CLK_FRC2", "CLK_S_B1_FS0_CH2", 27000000),
+	CLKTREE_SET("CLK_TSOUT_0", "CLK_S_B1_FS0_CH2", 108000000),
+	CLKTREE_SET("CLK_TSOUT_1", "CLK_S_B1_FS0_CH2", 108000000),
+	CLKTREE_SET("CLK_MCHI", "CLK_S_B1_FS0_CH2", 27000000),
+	CLKTREE_SET("CLK_32KB_HSIF", "CLK_SYSIN", 937500),
+	CLKTREE_SET("CLK_EXT_ETH_PHY_25", "CLK_S_B1_FS0_CH3", 25000000),
+	CLKTREE_SET("CLK_ETH_125_50", "CLK_S_B1_FS0_CH3", 125000000),
+	CLKTREE_SET("CLK_PROMIP_NTW", "CLK_S_B1_FS0_CH1", 50000000),
+	CLKTREE_SET("CLK_ETH0_PHY_CLK_INT", "CLK_S_B1_FS0_CH3", 125000000),
+	CLKTREE_SET("CLK_ETH1_PHY_CLK_INT", "CLK_S_B1_FS0_CH3", 125000000),
+	CLKTREE_SET("CLK_ETH2_PHY_CLK_INT", "CLK_S_B1_FS0_CH3", 125000000),
+
+	CLKTREE_SET("CLK_MMC_0", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_NAND", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_FLASH", "CLK_S_C0_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_ICN_BD", "CLK_S_C0_PLL1_ODF_0", 350000000),
+	CLKTREE_SET("CLK_ST231_GP0", "CLK_S_C0_PLL1_ODF_0", 700000000),
+	CLKTREE_SET("CLK_ST231_GP1", "CLK_S_C0_PLL1_ODF_0", 700000000),
+	CLKTREE_SET("CLK_ST231_SEC", "CLK_S_C0_PLL1_ODF_0", 700000000),
+	CLKTREE_SET("CLK_CLUST_HVC", "CLK_S_C0_PLL0_ODF_0", 400000000),
+	CLKTREE_SET("CLK_HWPE_HVC", "CLK_S_C0_PLL0_ODF_0", 400000000),
+	CLKTREE_SET("CLK_FDMA_0_1", "CLK_S_C0_PLL0_ODF_0", 400000000),
+	CLKTREE_SET("CLK_HVA", "CLK_S_C0_PLL1_ODF_0", 350000000),
+	CLKTREE_SET("CLK_GBS", "CLK_S_C0_PLL0_ODF_0", 400000000),
+	CLKTREE_SET("CLK_ICN_CCI", "CLK_S_C0_PLL0_ODF_0", 600000000),
+	CLKTREE_SET("CLK_ICN_L0L1", "CLK_S_C0_PLL1_ODF_0", 700000000),
+	CLKTREE_SET("CLK_ICN_ST231", "CLK_S_C0_FS0_CH0", 500000000),
+	CLKTREE_SET("CLK_ICN_GBS", "CLK_S_C0_FS0_CH0", 500000000),
+	CLKTREE_SET("CLK_ICN_VENC", "CLK_S_C0_FS0_CH0", 500000000),
+	CLKTREE_SET("CLK_ICN_VDEC0", "CLK_S_C0_FS0_CH0", 500000000),
+	CLKTREE_SET("CLK_PROC_JPEG", "CLK_S_C0_PLL1_ODF_0", 350000000),
+	CLKTREE_SET("CLK_ICN_TSIF", "CLK_S_C0_PLL1_ODF_0", 350000000),
+	CLKTREE_SET("CLK_ICN_FH", "CLK_S_C0_PLL1_ODF_0", 350000000),
+	CLKTREE_SET("CLK_ICN_CCL2", "CLK_S_C0_PLL1_ODF_0", 700000000),
+	CLKTREE_SET("CLK_IC_VDEC0", "CLK_S_C0_PLL1_ODF_0", 350000000),
+	CLKTREE_SET("CLK_IC_VENC", "CLK_S_C0_PLL1_ODF_0", 350000000),
+	CLKTREE_SET("CLK_IC_GBS", "CLK_S_C0_PLL1_ODF_0", 350000000),
+	CLKTREE_SET("CLK_ICN_REG_0", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_ICN_REG_1", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_MMC_1", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_MMC_2", "CLK_S_C0_PLL0_ODF_0", 50000000),
+	CLKTREE_SET("CLK_DDR4SS_0_EXT", "CLK_S_C0_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_DDR4SS_1_EXT", "CLK_S_C0_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_TIMER", "CLK_S_C0_FS0_CH2", 100000000),
+	CLKTREE_SET("CLK_PROC_STFE", "CLK_S_C0_FS0_CH0", 250000000),
+	CLKTREE_SET("CLK_ATCLK", "CLK_S_C0_PLL1_ODF_0", 350000000),
+	CLKTREE_SET("CLK_TRACE", "CLK_S_C0_PLL0_ODF_0", 150000000),
+	CLKTREE_SET("CLK_DSS", "CLK_S_C0_FS0_CH3", 36864000),
+	CLKTREE_SET("CLK_FRC_1", "CLK_S_C0_FS0_CH0", 27000000),
+	CLKTREE_SET("CLK_FRC1_PAD", "CLK_S_C0_FS0_CH0", 27000000),
+	CLKTREE_SET("CLK_EXT_A5X", "CLK_S_C0_PLL0_ODF_0", 400000000),
+	CLKTREE_SET("CLK_PMB_A5X", "CLK_S_C0_PLL0_ODF_0", 50000000),
+	CLKTREE_SET("CLK_PMB_GPU", "CLK_S_C0_PLL0_ODF_0", 50000000),
+	CLKTREE_SET("CLK_32KB_BOOTDEV", "CLK_SYSIN", 937500),
+	CLKTREE_SET("CLK_SYS_OUT", "CLK_S_C0_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_PROMIP_CPU", "CLK_S_C0_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_PP_HVC", "CLK_S_C0_PLL0_ODF_0", 400000000),
+	CLKTREE_SET("CLK_FC_VDEC0", "CLK_S_C0_PLL1_ODF_0", 350000000),
+	CLKTREE_SET("CLK_OSC_GPU", "CLK_SYSIN", 30000000),
+
+	CLKTREE_SET("CLK_PCM_0", "CLK_S_D0_FS0_CH0", 50000000),
+	CLKTREE_SET("CLK_PCM_1", "CLK_S_D0_FS0_CH2", 50000000),
+	CLKTREE_SET("CLK_PCM_2", "CLK_S_D0_FS0_CH2", 50000000),
+	CLKTREE_SET("CLK_PCM_3", "CLK_S_D0_FS0_CH3", 50000000),
+	CLKTREE_SET("CLK_PCM_4", "CLK_S_D0_FS0_CH0", 50000000),
+	CLKTREE_SET("CLK_PCMR_0_MASTER", "CLK_SYSIN", 30000000),
+	CLKTREE_SET("CLK_PCMR_1_MASTER", "CLK_SYSIN", 30000000),
+	CLKTREE_SET("CLK_PCMR_2_MASTER", "CLK_SYSIN", 30000000),
+	CLKTREE_SET("CLK_PCMR_3_MASTER", "CLK_SYSIN", 30000000),
+	CLKTREE_SET("CLK_PCMR_4_MASTER", "CLK_SYSIN", 30000000),
+	CLKTREE_SET("CLK_PCM_TELSS", "CLK_S_D0_FS0_CH1", 8192000),
+	CLKTREE_SET("CLK_ZARLINK", "CLK_S_D0_FS0_CH1", 49152000),
+	CLKTREE_SET("CLK_PCMIN0_MCLK_OUT", "CLK_S_D0_FS0_CH0", 50000000),
+	CLKTREE_SET("CLK_PCMIN1_MCLK_OUT", "CLK_S_D0_FS0_CH2", 50000000),
+	CLKTREE_SET("CLK_PCMIN2_MCLK_OUT", "CLK_S_D0_FS0_CH2", 50000000),
+	CLKTREE_SET("CLK_PCMIN3_MCLK_OUT", "CLK_S_D0_FS0_CH3", 50000000),
+	CLKTREE_SET("CLK_PCMIN4_MCLK_OUT", "CLK_S_D0_FS0_CH0", 50000000),
+	CLKTREE_SET("CLK_PCM_0_MCRU", "CLK_S_D0_FS0_CH0", 50000000),
+	CLKTREE_SET("CLK_PCM_1_MCRU", "CLK_S_D0_FS0_CH2", 50000000),
+	CLKTREE_SET("CLK_PCM_2_MCRU", "CLK_S_D0_FS0_CH2", 50000000),
+	CLKTREE_SET("CLK_PCM_3_MCRU", "CLK_S_D0_FS0_CH3", 50000000),
+
+	CLKTREE_SET("CLK_PIX_MAIN_4K", "CLK_S_D1_FS0_CH0", 594000000),
+	CLKTREE_SET("CLK_PIX_HDMI_TX", "CLK_S_D1_FS0_CH0", 594000000),
+	CLKTREE_SET("CLK_PIX_DP_TX", "CLK_S_D1_FS0_CH0", 594000000),
+	CLKTREE_SET("CLK_PIX_MAIN", "CLK_S_D1_FS0_CH0", 297000000),
+	CLKTREE_SET("CLK_PIX_AUX_0", "CLK_S_D1_FS0_CH0", 297000000),
+	CLKTREE_SET("CLK_PIX_AUX_1", "CLK_S_D1_FS0_CH0", 297000000),
+	CLKTREE_SET("CLK_PIX_HDDAC", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_HDDAC", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_DVO", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_PIX_DVO", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_DENC", "CLK_S_D1_FS0_CH1", 27000000),
+	CLKTREE_SET("CLK_SDDAC", "CLK_S_D1_FS0_CH1", 108000000),
+	CLKTREE_SET("CLK_PROC_4K_COMPO", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_VP_0", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_VP_1", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_ALP_0", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_ALP_1", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_CAPT_0", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_CAPT_1", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_GDP_0", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_GDP_1", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_GDP_2", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_GDP_3", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_GDP_4", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_GDP_5", "CLK_S_D1_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PIX_LVDS", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_FRC_0", "CLK_S_D1_FS0_CH1", 27000000),
+	CLKTREE_SET("CLK_FRC_0_PAD", "CLK_S_D1_FS0_CH1", 27000000),
+	CLKTREE_SET("CLK_TMDS", "CLK_S_D1_FS0_CH0", 594000000),
+	CLKTREE_SET("CLK_TMDS_DIV2", "CLK_S_D1_FS0_CH0", 297000000),
+	CLKTREE_SET("CLK_REF_HDMI_PHY", "CLK_S_D1_FS0_CH0", 297000000),
+	CLKTREE_SET("CLK_PIX_LVDS_PLL", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_PROC_COMPO", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_PROC_HQVDP_0", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_IQI_HQVDP_0", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_PROC_HQVDP_1", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_IQI_HQVDP_1", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_FDMA_TELSS", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_FDMA_2", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_FREE_RUN_HDMI_PHASE_REG", "CLK_S_D1_FS0_CH3",
+		    100000000),
+	CLKTREE_SET("CLK_DP_LVDS_CCDS", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_DP_EXT_JE_REF_CLK", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_SCAN_DPTX_AUX_CLK", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_SCAN_DPTX_LSCLK", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_SCAN_UART_DIV_CLK", "CLK_S_D1_FS0_CH3", 400000000),
+	CLKTREE_SET("CLK_SCAN_CLK_PLL_SYSCLK", "CLK_S_D1_FS0_CH3", 400000000),
+
+	CLKTREE_SET("CLK_DP_TX_PLL_REF", "CLK_S_D2_FS0_CH0", 27000000),
+	CLKTREE_SET("CLK_BYPASS_DP_PHY", "CLK_S_D2_FS0_CH0", 27000000),
+	{},
+};
+
+static const struct st_clk_tree stih390_clktree[] = {
+	CLKTREE_SET("CLK_ICN_LMI", "CLK_S_A0_PLL0_ODF_0", 533000000),
+	CLKTREE_SET("CLK_SLIM_CC", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_SPI", "CLK_S_C0_PLL1_ODF_0", 150000000),
+	CLKTREE_SET("CLK_FLASH", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_MMC_0", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_PERIPH_TS", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_EXT2F_A9", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_ICN_TS", "CLK_S_C0_PLL0_ODF_0", 333000000),
+	CLKTREE_SET("CLK_NAND", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_MMC_1", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_ST231_GP_2", "CLK_S_C0_PLL1_ODF_0", 600000000),
+	CLKTREE_SET("CLK_ST231_VDEC", "CLK_S_C0_PLL1_ODF_0", 600000000),
+	CLKTREE_SET("CLK_ST231_GP_0", "CLK_S_C0_PLL1_ODF_0", 600000000),
+	CLKTREE_SET("CLK_ST231_GP_1_AUDIO", "CLK_S_C0_PLL1_ODF_0", 600000000),
+	CLKTREE_SET("CLK_ETH_GMAC_S", "CLK_S_C0_PLL0_ODF_0", 125000000),
+	CLKTREE_SET("CLK_GMAC_S_PHYCLK", "CLK_S_C0_PLL0_ODF_0", 125000000),
+	CLKTREE_SET("CLK_ETH_GMAC_W", "CLK_S_C0_PLL0_ODF_0", 125000000),
+	CLKTREE_SET("CLK_GMAC_W_PHYCLK", "CLK_S_C0_PLL0_ODF_0", 125000000),
+	CLKTREE_SET("CLK_STBE", "CLK_S_C0_PLL1_ODF_0", 400000000),
+	CLKTREE_SET("CLK_HEVC_H264", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_AVSP", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_TIMER_A9", "CLK_S_C0_FS0_CH1", 100000000),
+	CLKTREE_SET("CLK_SLIM_VDEC", "CLK_S_C0_PLL0_ODF_0", 500000000),
+	CLKTREE_SET("CLK_DEC_JPEG", "CLK_S_C0_PLL0_ODF_0", 333000000),
+	CLKTREE_SET("CLK_WIFI", "CLK_S_C0_PLL0_ODF_0", 500000000),
+	CLKTREE_SET("CLK_RX_ICN_L0L1", "CLK_S_C0_PLL1_ODF_0", 600000000),
+	CLKTREE_SET("CLK_FRC_1", "CLK_S_C0_FS0_CH3", 27000000),
+	CLKTREE_SET("CLK_FRC_1_PAD", "CLK_S_C0_FS0_CH3", 27000000),
+	CLKTREE_SET("CLK_DVP_PROC", "CLK_S_C0_PLL1_ODF_0", 400000000),
+	CLKTREE_SET("CLK_TX_ICN_L0L1", "CLK_S_C0_PLL0_ODF_0", 500000000),
+	CLKTREE_SET("CLK_SYS_CLK_OUT", "CLK_S_C0_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_SYSTEM_STFE", "CLK_S_C0_PLL0_ODF_0", 250000000),
+	CLKTREE_SET("CLK_SLIM_FDMA_1", "CLK_S_C0_PLL1_ODF_0", 400000000),
+	CLKTREE_SET("CLK_ATB", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_TRACE", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_BDISP", "CLK_S_C0_PLL1_ODF_0", 600000000),
+	CLKTREE_SET("CLK_PROC_VDP", "CLK_S_C0_PLL0_ODF_0", 333000000),
+	CLKTREE_SET("CLK_DSS", "CLK_S_C0_FS0_CH2", 36864000),
+	CLKTREE_SET("CLK_LPC", "CLK_S_C0_FS0_CH1", 100000000),
+	CLKTREE_SET("CLK_GPU", "CLK_S_C0_PLL0_ODF_0", 500000000),
+	CLKTREE_SET("CLK_ICN_WIFI", "CLK_S_C0_PLL0_ODF_0", 333000000),
+	CLKTREE_SET("CLK_ICN_DISP", "CLK_S_C0_PLL0_ODF_0", 333000000),
+	CLKTREE_SET("CLK_ICN_CPU", "CLK_S_C0_PLL0_ODF_0", 333000000),
+	CLKTREE_SET("CLK_PERIPH_WIFI", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_SLIM_FDMA_0", "CLK_S_C0_PLL1_ODF_0", 400000000),
+	CLKTREE_SET("CLK_PERIPH_DISP", "CLK_S_C0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_PERIPH_CPU", "CLK_S_C0_PLL0_ODF_0", 200000000),
+
+	CLKTREE_SET("CLK_PCM_0", "CLK_S_D0_FS0_CH0", 50000000),
+	CLKTREE_SET("CLK_PCM_1", "CLK_S_D0_FS0_CH1", 50000000),
+	CLKTREE_SET("CLK_PCM_2", "CLK_S_D0_FS0_CH2", 50000000),
+	CLKTREE_SET("CLK_SPDIF", "CLK_S_D0_FS0_CH3", 53000000),
+
+	CLKTREE_SET("CLK_PIX_MAIN_DISP", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_PIX_AUX_DISP", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_PIX_HDDAC", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_HDDAC", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_SDDAC", "CLK_S_D1_FS0_CH1", 108000000),
+	CLKTREE_SET("CLK_PIX_HDMI", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_DENC", "CLK_S_D1_FS0_CH1", 27000000),
+	CLKTREE_SET("CLK_REF_HDMIPHY", "CLK_S_D1_FS0_CH0", 148500000),
+	CLKTREE_SET("CLK_TMDS_HDMI", "CLK_S_D1_FS0_CH4", 225000000),
+	CLKTREE_SET_PARENT("CLK_TMDS_HDMI", "SRCCLKIN_0"),
+	CLKTREE_SET("CLK_PROC_HQVDP", "CLK_S_D1_FS0_CH3", 240000000),
+	CLKTREE_SET("CLK_IQI_HQVDP", "CLK_S_D1_FS0_CH3", 240000000),
+	CLKTREE_SET("CLK_PROC_MIXER", "CLK_S_D1_FS0_CH2", 200000000),
+	CLKTREE_SET("CLK_PROC_GDP_COMPO", "CLK_S_D1_FS0_CH3", 240000000),
+	CLKTREE_SET_PARENT("CLK_PWM", "CLK_SYSIN"),
+	CLKTREE_SET("CLK_FRC_0", "CLK_S_D1_FS0_CH1", 27000000),
+	CLKTREE_SET("CLK_FRC_0_PAD", "CLK_S_D1_FS0_CH1", 27000000),
+	CLKTREE_SET("CLK_FRC_2", "CLK_S_D1_FS0_CH1", 27000000),
+	CLKTREE_SET("CLK_HDMI_PHASE_REG", "CLK_S_D1_FS0_CH2", 100000000),
+	{},
+};
+
+static const struct st_clk_tree stid325_clktree[] = {
+	/* Clockgen B0 */
+	CLKTREE_SET("CLK_ST40", "CLK_S_B0_FS0_CH1", 500000000),
+	CLKTREE_SET("CLK_ST231", "CLK_S_B0_PLL0_ODF_0", 700000000),
+	CLKTREE_SET("CLK_ICN_CPU", "CLK_S_B0_FS0_CH0", 600000000),
+	CLKTREE_SET("CLK_ICN_L0L1", "CLK_S_B0_FS0_CH0", 600000000),
+	CLKTREE_SET("CLK_ICN_ST231_40", "CLK_S_B0_FS0_CH1", 500000000),
+	CLKTREE_SET("CLK_ICN_REG_0", "CLK_S_B0_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_ATCLK", "CLK_S_B0_PLL0_ODF_0", 350000000),
+	CLKTREE_SET("CLK_TRACE", "CLK_S_B0_FS0_CH1", 250000000),
+	CLKTREE_SET("CLK_EXT_A5X", "CLK_S_B0_PLL0_ODF_0", 350000000),
+	CLKTREE_SET("CLK_TIMER_A5X", "CLK_S_B0_FS0_CH3", 100000000),
+	CLKTREE_SET("CLK_TIMER_LPC", "CLK_S_B0_FS0_CH3", 100000000),
+	CLKTREE_SET("CLK_DDR4SS_0_EXT", "CLK_S_B0_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_PMB_A5X", "CLK_S_B0_PLL0_ODF_0", 50000000),
+	CLKTREE_SET("CLK_PROMIP_CPU", "CLK_S_B0_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_30_SATA", "CLK_S_B0_FS0_CH0", 30000000),
+	CLKTREE_SET("CLK_200_SATA", "CLK_S_B0_PLL0_ODF_0", 200000000),
+
+	/* Clockgen B1 */
+	CLKTREE_SET("CLK_SLIM_CC", "CLK_S_B1_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_ICN_BD", "CLK_S_B1_FS0_CH0", 333000000),
+	CLKTREE_SET("CLK_MMC_0", "CLK_S_B1_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_SPI", "CLK_S_B1_FS0_CH3", 150000000),
+	CLKTREE_SET("CLK_SC", "CLK_S_B1_PLL0_ODF_0", 400000000),
+	CLKTREE_SET("CLK_ICN_REG_2", "CLK_S_B1_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_PROC_STFE", "CLK_S_B1_FS0_CH1", 250000000),
+	CLKTREE_SET("CLK_TSOUT_0", "CLK_S_B1_FS0_CH2", 108000000),
+	CLKTREE_SET("CLK_TSOUT_1", "CLK_S_B1_FS0_CH2", 108000000),
+	CLKTREE_SET("CLK_PROMIP_MAC", "CLK_S_B1_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_ICN_CCL2", "CLK_S_B1_FS0_CH0", 333000000),
+	CLKTREE_SET("CLK_ICN_TS", "CLK_S_B1_FS0_CH0", 333000000),
+	CLKTREE_SET("CLK_FDMA", "CLK_S_B1_PLL0_ODF_0", 400000000),
+	CLKTREE_SET("CLK_FLASH", "CLK_S_B1_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_NAND", "CLK_S_B1_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_MMC_1", "CLK_S_B1_PLL0_ODF_0", 200000000),
+	CLKTREE_SET("CLK_ICN_LPM", "CLK_S_B1_PLL0_ODF_0", 100000000),
+	CLKTREE_SET("CLK_BACKUP_TO_CLKGEN_D_1", "CLK_S_B1_FS0_CH0", 333000000),
+
+	/* Clockgen D0 */
+	CLKTREE_SET("CLK_TELSS_FDMA", "CLK_S_D0_FS0_CH2", 400000000),
+	CLKTREE_SET("CLK_PROC_FP3", "CLK_S_D0_FS0_CH1", 250000000),
+	CLKTREE_SET("CLK_ICN_HSIF_NET", "CLK_S_D0_FS0_CH1", 250000000),
+	CLKTREE_SET("CLK_32KB_HSIF", "CLK_SYSIN", 1000000),
+	CLKTREE_SET("CLK_ICN_REG_1", "CLK_S_D0_FS0_CH2", 200000000),
+	CLKTREE_SET("CLK_PCM_TELSS", "CLK_S_D0_FS0_CH0", 8192000),
+	CLKTREE_SET("CLK_ZARLINK", "CLK_S_D0_FS0_CH0", 49152000),
+	CLKTREE_SET("CLK_PROMIP_NTW", "CLK_S_D0_FS0_CH2", 100000000),
+	CLKTREE_SET("CLK_ETH0_PHYCLK_INT", "CLK_S_D0_FS0_CH3", 125000000),
+	CLKTREE_SET("CLK_ETH1_PHYCLK_INT", "CLK_S_D0_FS0_CH3", 125000000),
+	CLKTREE_SET("CLK_ETH2_PHYCLK_INT", "CLK_S_D0_FS0_CH3", 125000000),
+	CLKTREE_SET("CLK_250_TO_CLKGEN_D_1", "CLK_S_D0_FS0_CH1", 250000000),
+
+	/* Clockgen D1 */
+	CLKTREE_SET("CLK_CPU_ECM", "CLK_S_D1_FS0_CH3", 360000000),
+	CLKTREE_SET("CLK_LPC_DS31_PHY", "CLK_S_D1_FS0_CH3", 32000),
+	CLKTREE_SET("CLK_ICN_DS", "CLK_S_D1_FS0_CH3", 360000000),
+	CLKTREE_SET("CLK_ICN_US", "CLK_S_D1_FS0_CH1", 204800000),
+	CLKTREE_SET("CLK_CMCI_DS", "CLK_S_D1_FS0_CH0", 216000000),
+	CLKTREE_SET("CLK_CMCI_US", "CLK_S_D1_FS0_CH1", 102400000),
+	CLKTREE_SET("CLK_D31RX", "CLK_S_D1_FS0_CH0", 432000000),
+	CLKTREE_SET("CLK_COMMON_216", "CLK_S_D1_FS0_CH0", 216000000),
+	CLKTREE_SET("CLK_COMMON_54", "CLK_S_D1_FS0_CH0", 54000000),
+	CLKTREE_SET("CLK_COMMON_PROC", "CLK_S_D1_FS0_CH2", 270000000),
+	CLKTREE_SET("CLK_IC_DS_OFDM", "CLK_250_TO_CLKGEN_D_1", 250000000),
+	CLKTREE_SET("CLK_DS_BRG", "CLK_S_D1_FS0_CH1", 208000000),
+	CLKTREE_SET("CLK_US_BRG", "CLK_S_D1_FS0_CH1", 102400000),
+	CLKTREE_SET("CLK_DSOFDM_PACK_PROC", "CLK_S_D1_FS0_CH0", 432000000),
+	CLKTREE_SET("CLK_DS_MAC", "CLK_S_D1_FS0_CH1", 204800000),
+	CLKTREE_SET("CLK_US_MAC", "CLK_S_D1_FS0_CH0", 216000000),
+	CLKTREE_SET("CLK_DQAM_108", "CLK_S_D1_FS0_CH0", 108000000),
+	CLKTREE_SET("CLK_ICN_REG_3", "CLK_S_D1_FS0_CH0", 216000000),
+	CLKTREE_SET("CLK_ICN_REG_4", "CLK_S_D1_FS0_CH0", 216000000),
+	CLKTREE_SET("CLK_LP_TO_CLKGENB0", "CLK_S_D1_FS0_CH0", 216000000),
+	CLKTREE_SET("CLK_LP_TO_CLKGENB1", "CLK_S_D1_FS0_CH0", 216000000),
+	CLKTREE_SET("CLK_LP_TO_CLKGEND0", "CLK_S_D1_FS0_CH0", 216000000),
+	{},
+};
+
+static const struct st_soc_clk_init sti8416_soc_clks[] = {
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG_2"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG_3"),
+
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG_4"),
+
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG_0"),
+	{},
+};
+
+static const struct st_soc_clk_init stih390_soc_clks[] = {
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_LMI"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_SLIM_CC"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_PERIPH_TS"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_TS"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_STBE"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_RX_ICN_L0L1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_TX_ICN_L0L1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_WIFI"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_DISP"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_CPU"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_PERIPH_WIFI"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_PERIPH_DISP"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_PERIPH_CPU"),
+	{},
+};
+
+static const struct st_soc_clk_init stid325_soc_clks[] = {
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG_0"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG_1"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG_2"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG_3"),
+	SOC_CLK_INIT_ALWAYS_ON("CLK_ICN_REG_4"),
+	{},
+};
+
+struct st_clk_data {
+	const struct st_soc_clk_init *soc_clks;
+	const struct st_clk_tree *clk_tree;
+	const struct st_clk_tree *ext_clk_tree;
+};
+
+static void st_configure_clktree(const struct st_clk_tree *clktree)
+{
+	struct clk *clk, *pclk;
+	int ret;
+
+	if (!clktree)
+		return;
+
+	for (; clktree->clk; clktree++) {
+		clk = __clk_lookup(clktree->clk);
+		if (!clk) {
+			pr_err("%s: %s not found\n", __func__, clktree->clk);
+			continue;
+		}
+
+		pclk = __clk_lookup(clktree->pclk);
+		if (pclk && clk_set_parent(clk, pclk))
+			pr_err("%s: %s Failed to set %s parent\n", __func__,
+			       clktree->clk, clktree->pclk);
+
+		if (clktree->rate) {
+			ret = clk_set_rate(clk, clktree->rate);
+			if (ret)
+				pr_err("%s: %s Failed to set rate\n", __func__,
+				       clktree->clk);
+		}
+	}
+}
+
+static int st_soc_add_clk(struct clk *clk,
+			  const struct st_soc_clk_init *soc_init_clk)
+{
+	struct st_soc_clk *soc_clk;
+
+	soc_clk = kzalloc(sizeof(struct st_soc_clk), GFP_KERNEL);
+	if (!soc_clk)
+		return -ENOMEM;
+
+	soc_clk->clk = clk;
+	soc_clk->disable_on_resume = soc_init_clk->disable_on_resume;
+	soc_clk->restore_on_resume = soc_init_clk->restore_on_resume;
+	if (soc_init_clk->pclk) {
+		soc_clk->pclk = __clk_lookup(soc_init_clk->pclk);
+		if (!soc_clk->pclk) {
+			pr_err("%s: %s not found\n", __func__,
+			       soc_init_clk->pclk);
+			return -ENODEV;
+		}
+	}
+
+	list_add_tail(&soc_clk->list, &st_clk_list);
+
+	return 0;
+}
+
+static int st_soc_clk_init(const struct st_soc_clk_init *init)
+{
+	const struct st_soc_clk_init *soc_clk;
+	int ret = 0;
+
+	if (!init)
+		return 0;
+
+	for (soc_clk = init; soc_clk->name; soc_clk++) {
+		struct clk *clk;
+
+		clk = __clk_lookup(soc_clk->name);
+		if (!clk) {
+			pr_err("%s: %s not found\n", __func__, soc_clk->name);
+			continue;
+		}
+
+		if (!soc_clk->always_on) {
+			ret = st_soc_add_clk(clk, soc_clk);
+			if (ret)
+				return ret;
+		}
+
+		if (soc_clk->disable_on_resume || soc_clk->restore_on_resume)
+			continue;
+
+		ret = clk_prepare_enable(clk);
+		if (ret)
+			pr_err("%s: Fail to enable %s\n", __func__, clk->name);
+	}
+
+	return ret;
+}
+
+static void st_suspend_soc_clks(void)
+{
+	struct st_soc_clk *st_clk;
+	unsigned int cnt;
+
+	list_for_each_entry(st_clk, &st_clk_list, list) {
+		struct clk *clk = st_clk->clk;
+
+		st_clk->rate_save = __clk_get_rate(clk);
+		if (st_clk->pclk) {
+			st_clk->pclk_save = clk_get_parent(clk);
+			cnt = __clk_get_enable_count(clk);
+			if (cnt == 1) {
+				if (clk_set_parent(clk, st_clk->pclk))
+					pr_err("%s:%d: Fail to set parent during suspend %s\n",
+					       __func__, __LINE__, clk->name);
+			} else {
+				pr_warn("%s:%d: Enable count != 1(%d), during suspend %s\n",
+				       __func__, __LINE__, cnt, clk->name);
+			}
+		} else if (st_clk->disable_on_resume ||
+			   st_clk->restore_on_resume) {
+			continue;
+		} else {
+			cnt = __clk_get_enable_count(clk);
+			if (cnt != 1)
+				pr_warn("%s:%d: Enable count != 1(%d), during suspend %s\n",
+				       __func__, __LINE__, cnt, clk->name);
+
+			clk_disable_unprepare(clk);
+		}
+	}
+}
+
+static void st_resume_soc_clks(void)
+{
+	struct st_soc_clk *st_clk;
+	unsigned int cnt, i;
+	bool enabled;
+
+	list_for_each_entry_reverse(st_clk, &st_clk_list, list) {
+		struct clk *clk = st_clk->clk;
+
+		if (st_clk->pclk) {
+			cnt = __clk_get_enable_count(clk);
+			if (cnt == 1) {
+				if (clk_set_parent(clk, st_clk->pclk_save))
+					pr_err("%s:%d: Fail set_parent %s\n",
+					       __func__, __LINE__, clk->name);
+				if (st_clk->rate_save != clk_get_rate(clk))
+					clk_set_rate(clk, st_clk->rate_save);
+			} else {
+				pr_warn("%s:%d: Enable count != 1(%d) %s\n",
+				       __func__, __LINE__, cnt, clk->name);
+			}
+		} else if (st_clk->disable_on_resume) {
+			if (clk->ops->set_parent)
+				clk_set_parent(clk, clk_get_parent(clk));
+			if (st_clk->rate_save != clk_get_rate(clk))
+				clk_set_rate(clk, st_clk->rate_save);
+			cnt = __clk_get_enable_count(clk);
+			enabled = __clk_is_enabled(clk);
+			if (cnt == 0) {
+				pr_debug("%s:%d: Enable count = 0 hwstatus=%d %s\n",
+				       __func__, __LINE__, enabled, clk->name);
+				if (enabled) {
+					if (clk_prepare_enable(clk))
+						pr_err("%s:%d: Fail to enable %s\n",
+						       __func__, __LINE__,
+						       clk->name);
+					else
+						clk_disable_unprepare(clk);
+				}
+			} else {
+				pr_warn("%s:%d: Enable count != 0(%d) hwstatus=%d %s\n",
+					__func__, __LINE__, cnt, enabled,
+					clk->name);
+				if (!enabled) {
+					for (i = 0; i < cnt; i++)
+						clk_disable_unprepare(clk);
+					for (i = 0; i < cnt; i++)
+						clk_prepare_enable(clk);
+				}
+			}
+		} else if (st_clk->restore_on_resume) {
+			if (clk->ops->set_parent)
+				clk_set_parent(clk, clk_get_parent(clk));
+			if (st_clk->rate_save != clk_get_rate(clk))
+				clk_set_rate(clk, st_clk->rate_save);
+		} else {
+			cnt = __clk_get_enable_count(clk);
+			if (cnt != 0)
+				pr_warn("%s:%d: Enable count != 0(%d) %s\n",
+				       __func__, __LINE__, cnt, clk->name);
+
+			if (clk->ops->set_parent)
+				clk_set_parent(clk, clk_get_parent(clk));
+			if (st_clk->rate_save != clk_get_rate(clk))
+				clk_set_rate(clk, st_clk->rate_save);
+			if (clk_prepare_enable(clk))
+				pr_err("%s:%d: Fail to enable %s\n", __func__,
+					   __LINE__, clk->name);
+		}
+	}
+}
+
+static int st_clk_suspend(void)
+{
+	st_suspend_soc_clks();
+
+	return 0;
+}
+
+static void st_clk_resume(void)
+{
+	st_resume_soc_clks();
+}
+
+static struct syscore_ops st_clk_syscore_ops = {
+	.suspend	= st_clk_suspend,
+	.resume		= st_clk_resume,
+};
+
+static int st_clk_probe(struct platform_device *pdev)
+{
+	struct device *dev = &pdev->dev;
+	const struct of_device_id *match;
+	struct st_clk_data *data = NULL;
+	int ret;
+
+	match = of_match_device(dev->driver->of_match_table, dev);
+	if (!match || !match->data)
+		return -EINVAL;
+
+	data = (struct st_clk_data *)match->data;
+	st_clktree = data->clk_tree;
+	st_ext_clktree = data->ext_clk_tree;
+
+	ret = st_soc_clk_init(data->soc_clks);
+	if (ret) {
+		dev_err(dev, "Failed to init clks (%d)\n", ret);
+		return ret;
+	}
+
+	st_configure_clktree(st_clktree);
+	st_configure_clktree(st_ext_clktree);
+	register_syscore_ops(&st_clk_syscore_ops);
+
+	dev_info(dev, "SoC clock tree intialized\n");
+
+	return 0;
+}
+
+static struct st_clk_data stih416_clkdata = {
+	.soc_clks = stih416_soc_clks,
+	.clk_tree = stih416_clktree,
+};
+
+static struct st_clk_data stih314_clkdata = {
+	.soc_clks = stih418_soc_clks,
+};
+
+static struct st_clk_data stih414_clkdata = {
+	.soc_clks = stih418_soc_clks,
+};
+
+static struct st_clk_data stih418_clkdata = {
+	.soc_clks = stih418_soc_clks,
+};
+
+static struct st_clk_data stih419_clkdata = {
+	.soc_clks = stih419_soc_clks,
+};
+
+static struct st_clk_data stih410_clkdata = {
+	.soc_clks = stih410_soc_clks,
+	.clk_tree = stih407_clktree,
+	.ext_clk_tree = stih410_ext_clktree,
+};
+
+static struct st_clk_data stih412_clkdata = {
+	.soc_clks = stih410_soc_clks,
+	.clk_tree = stih407_clktree,
+	.ext_clk_tree = stih412_ext_clktree,
+};
+
+static struct st_clk_data stih407_clkdata = {
+	.soc_clks = stih407_soc_clks,
+	.clk_tree = stih407_clktree,
+};
+
+static struct st_clk_data stid127_clkdata = {
+	.soc_clks = stid127_soc_clks,
+	.clk_tree = stid127_clktree,
+};
+
+static struct st_clk_data sti8416_clkdata = {
+	.soc_clks = sti8416_soc_clks,
+	.clk_tree = sti8416_clktree,
+};
+
+static struct st_clk_data stih390_clkdata = {
+	.soc_clks = stih390_soc_clks,
+	.clk_tree = stih390_clktree,
+};
+
+static struct st_clk_data stid325_clkdata = {
+	.soc_clks = stid325_soc_clks,
+	.clk_tree = stid325_clktree,
+};
+
+static struct of_device_id st_clk_match[] = {
+	{ .compatible = "st,stih416-clk", .data = &stih416_clkdata },
+	{ .compatible = "st,stih314-clk", .data = &stih314_clkdata },
+	{ .compatible = "st,stih414-clk", .data = &stih414_clkdata },
+	{ .compatible = "st,stih418-clk", .data = &stih418_clkdata },
+	{ .compatible = "st,stih419-clk", .data = &stih419_clkdata },
+	{ .compatible = "st,stih410-clk", .data = &stih410_clkdata },
+	{ .compatible = "st,stih412-clk", .data = &stih412_clkdata },
+	{ .compatible = "st,stih407-clk", .data = &stih407_clkdata },
+	{ .compatible = "st,stid127-clk", .data = &stid127_clkdata },
+	{ .compatible = "st,sti8416-clk", .data = &sti8416_clkdata },
+	{ .compatible = "st,stih390-clk", .data = &stih390_clkdata },
+	{ .compatible = "st,stid325-clk", .data = &stid325_clkdata },
+	{},
+};
+
+static struct platform_driver st_clk_driver = {
+	.probe = st_clk_probe,
+	.driver = {
+		.name = "st-clk",
+		.owner = THIS_MODULE,
+		.of_match_table = st_clk_match,
+	},
+};
+
+static int __init st_clk_init(void)
+{
+	return platform_driver_register(&st_clk_driver);
+}
+arch_initcall(st_clk_init);
diff -urNp a/drivers/clk/st/vclk_algos.c b/drivers/clk/st/vclk_algos.c
--- a/drivers/clk/st/vclk_algos.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/clk/st/vclk_algos.c	2019-09-26 21:23:27.312619400 +0100
@@ -0,0 +1,1805 @@
+/*
+ * OS independant validation clock driver
+ * PLL & FS parameters computation algorithms
+ * 2014-15, F. Charpentier, UPD Functional Validation
+ */
+
+/* ----- Modification history (most recent first)----
+23/jul/15 fabrice.charpentier@st.com
+    PLL4600C28 revisited for better reliability (only integer mode so far)
+01/jun/15 fabrice.charpentier@st.com
+    FS660C28 enhanced & checked vs several CannesWifi cases (30 & 40Mhz input)
+11/may/15 fabrice.charpentier@st.com
+    Added FS660C28 prelim support + FS660C32 checks
+06/jan/15 fabrice.charpentier@st.com
+    Resync with boot firmware algos + vclk_pll1600c45_get_params waring fix.
+29/jan/14 fabrice.charpentier@st.com
+    Added PLL4600C28 support. vclk_pll3200c32_get_rate() fix for IDF=0.
+18/sep/13 fabrice.charpentier@st.com
+    vclk_fs660c32_vco_get_rate() out of range checks.
+03/jul/13 fabrice.charpentier@st.com
+    vclk_fs216c65_get_params() bug fix; checks if output is 0
+30/oct/12 fabrice.charpentier@st.com
+    FS660C32 migrated to new API.
+29/oct/12 fabrice.charpentier@st.com
+    FS216C65 & FS432C65 migrated to new API. FS216 enhanced to support
+    variable NSDIV.
+21/sep/12 fabrice.charpentier@st.com, francesco.virlinzi@st.com
+    New API for 800C65, 1200C32, 1600C45, 1600C65 & 3200C32 PLLs.
+04/sep/12 fabrice.charpentier@st.com
+    vclk_pll1600c65_get_rate(); now support IDF=0
+28/aug/12 fabrice.charpentier@st.com
+    PLL1600C45: get_rate() & get_phi_rate() now using 64bit div.
+21/aug/12 fabrice.charpentier@st.com
+    PLL800C65 revisited for better precision & win32 compilation support.
+    Using 64bit div now.
+07/aug/12 fabrice.charpentier@st.com
+    FS660C32 enhancement. Better result for low freqs.
+    FS660C32 & FS432C65 NSDIV search loop & order change.
+    vclk_pll1200c32_get_rate(): added support for "odf==0" & "idf==0".
+30/jul/12 fabrice.charpentier@st.com
+    vclk_pll3200c32_get_params() & vclk_pll1600c45_get_params()
+      charge pump computation bug fixes.
+28/jun/12 fabrice.charpentier@st.com
+    vclk_fs432c65_get_params() bug fix for 64bits division under Linux
+28/jun/12 fabrice.charpentier@st.com
+    vclk_fs216c65_get_params() bug fix for 64bits division under Linux.
+19/jun/12 Ravinder SINGH
+    vclk_pll1600c45_get_phi_params() fix.
+30/apr/12 fabrice.charpentier@st.com
+    FS660C32 fine tuning to get better result.
+26/apr/12 fabrice.charpentier@st.com
+    FS216 & FS432 fine tuning to get better result.
+24/apr/12 fabrice.charpentier@st.com
+    FS216, FS432 & FS660: changed sdiv search order from highest to lowest
+      as recommended by Anand K.
+18/apr/12 fabrice.charpentier@st.com
+    Added FS432C65 algo.
+13/apr/12 fabrice.charpentier@st.com
+    FS216C65 MD order changed to recommended -16 -> -1 then -17.
+05/apr/12 fabrice.charpentier@st.com
+    FS216C65 fully revisited to have 1 algo only for Linux & OS21.
+28/mar/12 fabrice.charpentier@st.com
+    FS660C32 algos merged from Liege required improvements.
+25/nov/11 fabrice.charpentier@st.com
+    Functions rename to support several algos for a same PLL/FS.
+28/oct/11 fabrice.charpentier@st.com
+    Added PLL1600 CMOS045 support for Lille
+27/oct/11 fabrice.charpentier@st.com
+    PLL1200 functions revisited. API changed.
+27/jul/11 fabrice.charpentier@st.com
+    FS660 algo enhancement.
+14/mar/11 fabrice.charpentier@st.com
+    Added PLL1200 functions.
+07/mar/11 fabrice.charpentier@st.com
+    vclk_pll3200c32_get_params() revisited.
+11/mar/10 fabrice.charpentier@st.com
+    vclk_pll800c65_get_params() fully revisited.
+10/dec/09 francesco.virlinzi@st.com
+    vclk_pll1600c65_get_params() now same code for OS21 & Linux.
+13/oct/09 fabrice.charpentier@st.com
+    vclk_fs216c65_get_rate() API changed. Now returns error code.
+30/sep/09 fabrice.charpentier@st.com
+    Introducing vclk_pll800c65_get_rate() & vclk_pll1600c65_get_rate() to
+      replace vclk_pll800_freq() & vclk_pll1600c65_freq().
+*/
+
+#include "vclk_algos.h"
+#include <linux/types.h>
+#include <linux/math64.h>
+
+/*
+ * Prototypes for local functions
+ */
+
+#define P15 (uint64_t)(1 << 15) /* 2 power 15 */
+#define P16 (uint64_t)(1 << 16) /* 2 power 16 */
+#define P17 (uint64_t)(1 << 17) /* 2 power 17 */
+#define P20 (uint64_t)(1 << 20) /* 2 power 20 */
+
+/*
+ * PLL800
+ */
+
+/* ========================================================================
+   Name:    vclk_pll800c65_get_params()
+   Description: Freq to parameters computation for PLL800 CMOS65
+   Input:       input & output freqs (Hz)
+   Output:      updated *mdiv, *ndiv & *pdiv (register values)
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+/*
+ * PLL800 in FS mode computation algo
+ *
+ *           2 * NDIV * Fin
+ * Fout = -----------------     using FS MODE
+ *            MDIV * PDIV
+ *
+ * Rules:
+ *   6.25Mhz <= output <= 800Mhz
+ *   FS mode means 3 <= NDIV <= 255
+ *   1 <= MDIV <= 255
+ *   PDIV: 1, 2, 4, 8, 16 or 32
+ *   1Mhz <= INFIN (input/MDIV) <= 50Mhz
+ *   200Mhz <= FVCO (input*2*N/M) <= 800Mhz
+ *   For better long term jitter select M minimum && P maximum
+ */
+
+static int vclk_pll800c65_get_params(unsigned long input,
+			unsigned long output, struct vclk_pll *pll)
+{
+	unsigned long m, n, p, pi, infin;
+	unsigned long deviation = 0xffffffff;
+	unsigned long new_freq;
+	long new_deviation;
+	uint64_t res;
+	struct vclk_pll temp_pll = {
+		.type = pll->type,
+	};
+
+	/* Output clock range: 6.25Mhz to 800Mhz */
+	if (!pll->no_limits)
+		if (output < 6250000 || output > 800000000)
+			return -1;
+
+	for (m = 1; (m < 255) && deviation; m++) {
+		infin = input / m; /* 1Mhz <= INFIN <= 50Mhz */
+		if (infin < 1000000 || infin > 50000000)
+			continue;
+
+		for (pi = 5; pi <= 5 && deviation; pi--) {
+			p = 1 << pi;
+			res = (uint64_t)m * (uint64_t)p * (uint64_t)output;
+			n = (unsigned long)div64_u64(res, input * 2);
+
+			/* Checks */
+			if (n < 3)
+				break;
+			if (n > 255)
+				continue;
+
+			/* 200Mhz <= FVCO <= 800Mhz */
+			res = div64_u64(res, m);
+			if (res > 800000000)
+				continue;
+			if (res < 200000000)
+				break;
+
+			temp_pll.mdiv = m;
+			temp_pll.ndiv = n;
+			temp_pll.pdiv = pi;
+			vclk_pll_get_rate(input, &temp_pll, &new_freq);
+			new_deviation = new_freq - output;
+			if (new_deviation < 0)
+				new_deviation = -new_deviation;
+			if (new_deviation < deviation) {
+				pll->mdiv = m;
+				pll->ndiv = n;
+				pll->pdiv = pi;
+				deviation = new_deviation;
+			}
+		}
+	}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_pll800c65_get_rate()
+   Description: Convert input/mdiv/ndiv/pvid values to frequency for PLL800
+   Params:      'input' freq (Hz), mdiv/ndiv/pvid values
+   Output:      '*rate' updated
+   Return:      Error code.
+   ======================================================================== */
+
+static int vclk_pll800c65_get_rate(unsigned long input, struct vclk_pll *pll,
+			unsigned long *rate)
+{
+	uint64_t res;
+	unsigned long mdiv = pll->mdiv;
+
+	if (!mdiv)
+		mdiv++;	/* mdiv=0 or 1 => MDIV=1 */
+
+	res = (uint64_t)2 * (uint64_t)input * (uint64_t)pll->ndiv;
+	*rate = (unsigned long)div64_u64(res, mdiv * (1 << pll->pdiv));
+
+	return 0;
+}
+
+/*
+ * PLL1200
+ */
+
+/* ========================================================================
+   Name:    vclk_pll1200c32_get_rate()
+   Description: Convert input/idf/ldf/odf values to PHI output freq.
+		WARNING: Assuming NOT BYPASS.
+   Params:      'input' freq (Hz), idf/ldf/odf REGISTERS values
+   Output:      '*rate' updated with value of PHI output (FVCO/ODF).
+   Return:      Error code.
+   ======================================================================== */
+
+static int vclk_pll1200c32_get_rate(unsigned long input, struct vclk_pll *pll,
+			unsigned long *rate)
+{
+	unsigned long idf = pll->idf, odf = pll->odf;
+
+	if (!idf) /* idf==0 means 1 */
+		idf = 1;
+	if (!odf) /* odf==0 means 1 */
+		odf = 1;
+
+	/* Note: input is divided by 1000 to avoid overflow */
+	*rate = (((input / 1000) * pll->ldf) / (odf * idf)) * 1000;
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_pll1200c32_get_params()
+   Description: PHI freq to parameters computation for PLL1200.
+   Input:       input=input freq (Hz),output=output freq (Hz)
+		WARNING: Output freq is given for PHI (FVCO/ODF).
+   Output:      updated *idf, *ldf, & *odf
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+/* PLL output structure
+ *   FVCO >> Divider (ODF) >> PHI
+ *
+ * PHI = (INFF * LDF) / (ODF * IDF) when BYPASS = L
+ *
+ * Rules:
+ *   9.6Mhz <= input (INFF) <= 350Mhz
+ *   600Mhz <= FVCO <= 1200Mhz
+ *   9.52Mhz <= PHI output <= 1200Mhz
+ *   1 <= i (register value for IDF) <= 7
+ *   8 <= l (register value for LDF) <= 127
+ *   1 <= odf (register value for ODF) <= 63
+ */
+
+static int vclk_pll1200c32_get_params(unsigned long input, unsigned long output,
+			struct vclk_pll *pll)
+{
+	unsigned long i, l, o; /* IDF, LDF, ODF values */
+	unsigned long deviation = 0xffffffff;
+	unsigned long new_freq;
+	long new_deviation;
+
+	/* Output clock range: 9.52Mhz to 1200Mhz */
+	if (!pll->no_limits)
+		if (output < 9520000 || output > 1200000000)
+			return -1;
+
+	/* Computing Output Division Factor */
+	if (output < 600000000) {
+		o = 600000000 / output;
+		if (600000000 % output)
+			o = o + 1;
+	} else {
+		o = 1;
+	}
+
+	input /= 1000;
+	output /= 1000;
+
+	for (i = 1; (i <= 7) && deviation; i++) {
+		l = i * output * o / input;
+
+		/* Checks */
+		if (l < 8)
+			continue;
+		if (l > 127)
+			break;
+
+		new_freq = (input * l) / (i * o);
+		new_deviation = new_freq - output;
+		if (new_deviation < 0)
+			new_deviation = -new_deviation;
+		if (!new_deviation || new_deviation < deviation) {
+			pll->idf = i;
+			pll->ldf = l;
+			pll->odf = o;
+			deviation = new_deviation;
+		}
+	}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+	return 0;
+}
+
+/*
+ * PLL1600
+ * WARNING: 2 types currently supported; CMOS065 & CMOS045
+ */
+
+/* ========================================================================
+   Name:    vclk_pll1600c45_get_rate()
+   Description: Convert input/idf/ndiv REGISTERS values to FVCO frequency
+   Params:      'input' freq (Hz), idf/ndiv REGISTERS values
+   Output:      '*rate' updated with value of FVCO output.
+   Return:      Error code.
+   ======================================================================== */
+
+static int vclk_pll1600c45_get_rate(unsigned long input, struct vclk_pll *pll,
+			unsigned long *rate)
+{
+	unsigned long idf = pll->idf;
+	uint64_t res;
+
+	if (!idf)
+		idf = 1;
+
+	/* FVCO = (INFF*LDF) / (IDF)
+	   LDF = 2*NDIV (if FRAC_CONTROL=L)
+	   => FVCO = INFF * 2 * NDIV / IDF */
+
+	res = (uint64_t)input * (uint64_t)2 * (uint64_t)pll->ndiv;
+	*rate = (unsigned long)div64_u64(res, idf);
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_pll1600c45_get_params(), PL1600 CMOS45
+   Description: FVCO output freq to parameters computation function.
+   Input:       input,output=input/output freqs (Hz)
+   Output:      updated *idf, *ndiv and *cp
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+/*
+ * Spec used: CMOS045_PLL_PG_1600X_A_SSCG_FR_LSHOD25_7M4X0Y2Z_SPECS_1.1.pdf
+ *
+ * Rules:
+ *   4Mhz <= input (INFF) <= 350Mhz
+ *   800Mhz <= VCO freq (FVCO) <= 1800Mhz
+ *   6.35Mhz <= output (PHI) <= 900Mhz
+ *   1 <= IDF (Input Div Factor) <= 7
+ *   8 <= NDIV (Loop Div Factor) <= 225
+ *   1 <= ODF (Output Div Factor) <= 63
+ *
+ * PHI = (INFF*LDF) / (2*IDF*ODF)
+ * FVCO = (INFF*LDF) / (IDF)
+ * LDF = 2*NDIV (if FRAC_CONTROL=L)
+ * => FVCO = INFF * 2 * NDIV / IDF
+ */
+
+static int vclk_pll1600c45_get_params(unsigned long input, unsigned long output,
+		struct vclk_pll *pll)
+{
+	unsigned long i, n;	/* IDF, NDIV values */
+	unsigned long deviation = 0xffffffff, new_deviation;
+	unsigned long new_freq;
+	/* Charge pump table: highest ndiv value for cp=7 to 27 */
+	static const unsigned char cp_table[] = {
+		71, 79, 87, 95, 103, 111, 119, 127, 135, 143,
+		151, 159, 167, 175, 183, 191, 199, 207, 215,
+		223, 225
+	};
+
+	/* Output clock range: 800Mhz to 1800Mhz */
+	if (!pll->no_limits)
+		if (output < 800000000 || output > 1800000000)
+			return -1;
+
+	input /= 1000;
+	output /= 1000;
+
+	for (i = 1; (i <= 7) && deviation; i++) {
+		n = (i * output) / (2 * input);
+
+		/* Checks */
+		if (n < 8)
+			continue;
+		if (n > 225)
+			break;
+
+		new_freq = (input * 2 * n) / i;
+		if (new_freq >= output)
+			new_deviation = new_freq - output;
+		else
+			new_deviation = output - new_freq;
+		if (!new_deviation || new_deviation < deviation) {
+			pll->idf    = i;
+			pll->ndiv   = n;
+			deviation = new_deviation;
+		}
+	}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+
+	/* Computing recommended charge pump value */
+	for (pll->cp = 7; pll->ndiv > cp_table[pll->cp - 7]; (pll->cp)++)
+		;
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_pll1600c45_get_phi_rate()
+   Description: Convert input/idf/ndiv/odf REGISTERS values to frequency
+   Params:      'input' freq (Hz), idf/ndiv/odf REGISTERS values
+   Output:      '*rate' updated with value of PHI output.
+   Return:      Error code.
+   ======================================================================== */
+
+static int vclk_pll1600c45_get_phi_rate(unsigned long input,
+		struct vclk_pll *pll, unsigned long *rate)
+{
+	unsigned long idf = pll->idf, odf = pll->odf;
+	uint64_t res;
+
+	if (!idf)
+		idf = 1;
+	if (!odf)
+		odf = 1;
+
+	/* PHI = (INFF*LDF) / (2*IDF*ODF)
+	   LDF = 2*NDIV (if FRAC_CONTROL=L)
+	   => PHI = (INFF*NDIV) / (IDF*ODF) */
+
+	res = (uint64_t)input * (uint64_t)pll->ndiv;
+	*rate = (unsigned long)div64_u64(res, idf * odf);
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_pll1600c45_get_phi_params()
+   Description: PLL1600 C45 PHI freq computation function
+   Input:       input,output=input/output freqs (Hz)
+   Output:      updated *idf, *ndiv, *odf and *cp
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+static int vclk_pll1600c45_get_phi_params(unsigned long input,
+		unsigned long output, struct vclk_pll *pll)
+{
+	unsigned long o; /* ODF value */
+
+	/* Output clock range: 6.35Mhz to 900Mhz */
+	if (!pll->no_limits)
+		if (output < 6350000 || output > 900000000)
+			return -1;
+
+	/* Computing Output Division Factor */
+	if (output < 400000000) {
+		o = 400000000 / output;
+		if (400000000 % output)
+			o = o + 1;
+	} else {
+		o = 1;
+	}
+	pll->odf = o;
+
+	/* Computing FVCO freq*/
+	output = 2 * output * o;
+
+	return vclk_pll1600c45_get_params(input, output, pll);
+}
+
+/* ========================================================================
+   Name:    vclk_pll1600c65_get_rate()
+   Description: Convert input/mdiv/ndiv values to frequency for PLL1600
+   Params:      'input' freq (Hz), mdiv/ndiv values
+		Info: mdiv also called rdiv, ndiv also called ddiv
+   Output:      '*rate' updated with value of HS output.
+   Return:      Error code.
+   ======================================================================== */
+
+static int vclk_pll1600c65_get_rate(unsigned long input, struct vclk_pll *pll,
+			unsigned long *rate)
+{
+	unsigned long mdiv = pll->mdiv;
+
+	if (!mdiv)
+		mdiv = 1; /* BIN to FORMULA conversion */
+
+	/* Note: input is divided by 1000 to avoid overflow */
+	*rate = ((2 * (input/1000) * pll->ndiv) / mdiv) * 1000;
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_pll1600c65_get_params()
+   Description: Freq to parameters computation for PLL1600 CMOS65
+   Input:       input,output=input/output freqs (Hz)
+   Output:      updated *mdiv (rdiv) & *ndiv (ddiv)
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+/*
+ * Spec used: PLL_PG_1600x_CMOS065LP_SPECS_1.4.pdf
+ *
+ * Rules:
+ *   600Mhz <= output (FVCO) <= 1800Mhz
+ *   1 <= M (also called R) <= 7
+ *   4 <= N <= 255
+ *   4Mhz <= PFDIN (input/M) <= 75Mhz
+ *
+ * FVCO = (INFF*LDF) / IDF
+ * LDF = 2*NDIV
+ * => FVCO = (INFF*2*NDIV) / IDF
+ */
+
+static int vclk_pll1600c65_get_params(unsigned long input, unsigned long output,
+			struct vclk_pll *pll)
+{
+	unsigned long m, n, pfdin;
+	unsigned long deviation = 0xffffffff;
+	unsigned long new_freq;
+	long new_deviation;
+
+	/* FVCO output clock range: 600Mhz to 1800Mhz */
+	if (!pll->no_limits)
+		if (output < 600000000 || output > 1800000000)
+			return -1;
+
+	input /= 1000;
+	output /= 1000;
+
+	for (m = 1; (m <= 7) && deviation; m++) {
+		n = m * output / (input * 2);
+
+		/* Checks */
+		if (n < 4)
+			continue;
+		if (n > 255)
+			break;
+		pfdin = input / m; /* 4Mhz <= PFDIN <= 75Mhz */
+		if (pfdin < 4000 || pfdin > 75000)
+			continue;
+
+		new_freq = (input * 2 * n) / m;
+		new_deviation = new_freq - output;
+		if (new_deviation < 0)
+			new_deviation = -new_deviation;
+		if (!new_deviation || new_deviation < deviation) {
+			pll->mdiv = m;
+			pll->ndiv = n;
+			deviation = new_deviation;
+		}
+	}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+	return 0;
+}
+
+/*
+ * PLL3200 C28
+ */
+
+/* ========================================================================
+   Name:    vclk_pll3200c28_get_rate()
+   Description: Convert parameters to FVCOby2 frequency for PLL3200C28
+   Params:      'input' freq (Hz), idf/ndiv values
+   Output:      '*rate' updated with value of FVCOby2 output (PHIx / 1).
+   Return:      Error code.
+   ======================================================================== */
+
+static int vclk_pll3200c28_get_rate(unsigned long input, struct vclk_pll *pll,
+			unsigned long *rate)
+{
+	uint64_t res;
+
+	if (!pll->idf)
+		pll->idf = 1;
+
+	/*
+	 * INTEGER mode
+	 *   FVCOby2 = (input*4*NDIV) / (2*IDF)
+	 * FRACTIONAL mode
+	 *   FVCOby2 = (input*4*(NDIV+FRACT/P16)) / (2*IDF) => DITHER OFF
+	 *   FVCOby2 = (input*4*(NDIV+FRACT/P16+1/P17)) / (2*IDF) => DITHER ON
+	 */
+
+	if (!pll->mode) { /* INTEGER mode */
+		res = (uint64_t)2 * input * pll->ndiv;
+		*rate = div64_u64(res, pll->idf);
+	} else { /* FRACTIONAL mode (DITHER OFF ONLY) */
+		res = ((uint64_t)(P16 * pll->ndiv) + pll->frac) * 4 * input;
+		*rate = div64_u64(res, (pll->idf * P17));
+	}
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_pll3200c28_get_params()
+   Description: Freq to parameters computation for PLL3200 CMOS28
+   Inputs:
+     input = input freq (Hz)
+     output = FVCOBy2 freq (Hz)
+     pll->no_limits = Set if freq range check to be disabled
+     pll->idf = 0xff if algo to choose, other=frozen value
+   Output:      updated *idf & *ndiv, plus *cp value (charge pump)
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+/* PLL output structure
+ * VCO >> /2 >> FVCOBY2
+ *                 |> Divider (ODF0) >> PHI0
+ *                 |> Divider (ODF1) >> PHI1
+ *                 |> Divider (ODF2) >> PHI2
+ *                 |> Divider (ODF3) >> PHI3
+ *
+ *
+ * Rules:
+ *   4Mhz <= input <= 350Mhz
+ *   800Mhz <= output (FVCOby2) <= 1600Mhz
+ *   1 <= i (register value for IDF) <= 7
+ *   8 <= n (register value for NDIV) <= 200
+ */
+
+static int vclk_pll3200c28_get_params(unsigned long input, unsigned long output,
+			struct vclk_pll *pll)
+{
+	unsigned long i, n, n2; /* IDF & NDIV formula values */
+	unsigned long deviation = 0xffffffff;
+	unsigned long new_freq, new_deviation;
+	/* Charge pump table: highest ndiv value for cp=6 to 25 */
+	static const unsigned char cp_table[] = {
+		48, 56, 64, 72, 80, 88, 96, 104, 112, 120,
+		128, 136, 144, 152, 160, 168, 176, 184, 192, 200
+	};
+	struct vclk_pll pll_tmp = {
+		.type = VCLK_PLL3200C28,
+		.mode = pll->mode
+	};
+	int i_loops;
+
+	/* Output clock range: 800Mhz to 1600Mhz */
+	if (!pll->no_limits)
+		if (output < 800000000 || output > 1600000000)
+			return -1;
+
+	/* IDF can be frozen to given value
+	   0xff => algo to compute
+	   else => value to use
+	 */
+	if (pll->idf != 0xff) {
+		i = pll->idf;
+		i_loops = 1; /* Frozen value => just try once */
+	} else {
+		i = 1;
+		i_loops = 8;
+	}
+
+	if (!pll->mode) { /* INTEGER */
+		for (; (i <= 7) && deviation && i_loops; i++, i_loops--) {
+			n = div64_u64(((uint64_t)i * output), (2 * input));
+
+			/* Checks */
+			if (n < 8)
+				continue;
+			if (n > 200)
+				break;
+
+			pll_tmp.idf = i;
+			/* Checking n & n+1 to cover division rounding */
+			n2 = n + 1;
+			for (; (n <= n2) && deviation; n++) {
+				pll_tmp.ndiv = n;
+				vclk_pll3200c28_get_rate(input, &pll_tmp,
+							 &new_freq);
+				if (new_freq > output)
+					new_deviation = new_freq - output;
+				else
+					new_deviation = output - new_freq;
+				if (!new_deviation || new_deviation <
+				    deviation) {
+					pll->idf  = i;
+					pll->ndiv = n;
+					deviation = new_deviation;
+				}
+			}
+		}
+	} else { /* FRACTIONAL */
+		uint64_t f, f2;
+
+		for (; (i <= 7) && deviation && i_loops; i++, i_loops--) {
+			for (n = 200; (n >= 8) && deviation; n--) {
+
+				f = ((uint64_t)output * i);
+				f2 = ((uint64_t)n * 2 * input);
+				if (f2 > f)
+					continue; /* Invalid */
+				f -= f2;
+				f *= P15;
+				f = div64_u64(f, input);
+
+				if (f > 65535)
+					continue; /* Invalid */
+
+				pll_tmp.idf = i;
+				pll_tmp.ndiv = n;
+				/* Checking f & f+1 to cover division
+				   rounding */
+				f2 = f + 1;
+				for (; (f <= f2) && deviation; f++) {
+					pll_tmp.frac = f;
+					vclk_pll3200c28_get_rate(input,
+								 &pll_tmp,
+								 &new_freq);
+					if (new_freq > output)
+						new_deviation = new_freq -
+								output;
+					else
+						new_deviation = output -
+								new_freq;
+					if (!new_deviation || new_deviation <
+					    deviation) {
+						pll->idf  = i;
+						pll->ndiv = n;
+						pll->frac = f;
+						deviation = new_deviation;
+					}
+				}
+			}
+		}
+	}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+
+	/* Computing recommended charge pump value */
+	for (pll->cp = 6; pll->ndiv > cp_table[pll->cp - 6]; (pll->cp)++)
+		;
+
+	return 0;
+}
+
+/*
+ * PLL3200 C32
+ */
+
+/* ========================================================================
+   Name:    vclk_pll3200c32_get_rate()
+   Description: Convert input/idf/ndiv values to FVCOby2 frequency for PLL3200
+   Params:      'input' freq (Hz), idf/ndiv values
+   Output:      '*rate' updated with value of FVCOby2 output (PHIx / 1).
+   Return:      Error code.
+   ======================================================================== */
+
+static int vclk_pll3200c32_get_rate(unsigned long input, struct vclk_pll *pll,
+			unsigned long *rate)
+{
+	if (!pll->idf)
+		pll->idf = 1;
+
+	/* Note: input is divided to avoid overflow */
+	*rate = ((2 * (input/1000) * pll->ndiv) / pll->idf) * 1000;
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_pll3200c32_get_params()
+   Description: Freq to parameters computation for PLL3200 CMOS32
+   Input:       input=input freq (Hz), output=FVCOBY2 freq (Hz)
+   Output:      updated *idf & *ndiv, plus *cp value (charge pump)
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+/* PLL output structure
+ * VCO >> /2 >> FVCOBY2
+ *                 |> Divider (ODF0) >> PHI0
+ *                 |> Divider (ODF1) >> PHI1
+ *                 |> Divider (ODF2) >> PHI2
+ *                 |> Divider (ODF3) >> PHI3
+ *
+ * FVCOby2 output = (input*4*NDIV) / (2*IDF) (assuming FRAC_CONTROL==L)
+ *
+ * Rules:
+ *   4Mhz <= input <= 350Mhz
+ *   800Mhz <= output (FVCOby2) <= 1600Mhz
+ *   1 <= i (register value for IDF) <= 7
+ *   8 <= n (register value for NDIV) <= 200
+ */
+
+static int vclk_pll3200c32_get_params(unsigned long input, unsigned long output,
+			struct vclk_pll *pll)
+{
+	unsigned long i, n;
+	unsigned long deviation = 0xffffffff;
+	unsigned long new_freq;
+	long new_deviation;
+	/* Charge pump table: highest ndiv value for cp=6 to 25 */
+	static const unsigned char cp_table[] = {
+		48, 56, 64, 72, 80, 88, 96, 104, 112, 120,
+		128, 136, 144, 152, 160, 168, 176, 184, 192
+	};
+
+	/* Output clock range: 800Mhz to 1600Mhz */
+	if (!pll->no_limits)
+		if (output < 800000000 || output > 1600000000)
+			return -1;
+
+	input /= 1000;
+	output /= 1000;
+
+	for (i = 1; (i <= 7) && deviation; i++) {
+		n = i * output / (2 * input);
+
+		/* Checks */
+		if (n < 8)
+			continue;
+		if (n > 200)
+			break;
+
+		new_freq = (input * 2 * n) / i;
+		new_deviation = new_freq - output;
+		if (new_deviation < 0)
+			new_deviation = -new_deviation;
+		if (!new_deviation || new_deviation < deviation) {
+			pll->idf  = i;
+			pll->ndiv = n;
+			deviation = new_deviation;
+		}
+	}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+
+	/* Computing recommended charge pump value */
+	for (pll->cp = 6; pll->ndiv > cp_table[pll->cp-6]; (pll->cp)++)
+		;
+
+	return 0;
+}
+
+/*
+ * PLL4600 C28
+ */
+
+/* ========================================================================
+   Name:    vclk_pll4600c28_get_rate()
+   Description: Convert input/idf/ndiv values to FVCOby2 frequency
+   Params:      'input' freq (Hz), idf/ndiv values
+   Output:      '*rate' updated with value of FVCOby2 output (PHIx / 1).
+   Return:      Error code.
+   ======================================================================== */
+
+static int vclk_pll4600c28_get_rate(unsigned long input, struct vclk_pll *pll,
+			unsigned long *rate)
+{
+	uint64_t val;
+
+	if (!pll->idf)
+		pll->idf = 1;
+
+	val = (uint64_t)input * 2 * pll->ndiv;
+	*rate = div64_u64(val, pll->idf);
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_pll4600c28_get_params()
+   Description: Freq to parameters computation for PLL4600 CMOS28
+   Input:       input=input freq (Hz), output=FVCOBY2 freq (Hz)
+   Output:      updated pll->idf & pll->ndiv
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+/* PLL output structure
+ * FVCO >> /2 >> FVCOBY2 (no output)
+ *                 |> Divider (ODF) >> PHI
+ *
+ * FVCOby2 output = (input * 2 * NDIV) / IDF (assuming FRAC_CONTROL==L)
+ *
+ * Rules:
+ *   4Mhz <= INFF input <= 350Mhz
+ *   4Mhz <= INFIN (INFF / IDF) <= 50Mhz
+ *   1.2Ghz <= FVCOby2 output (PHI w ODF=1) <= 3000Mhz
+ *   1 <= i (register/dec value for IDF) <= 7
+ *   8 <= n (register/dec value for NDIV) <= 246
+ */
+
+static int vclk_pll4600c28_get_params(unsigned long input, unsigned long output,
+			struct vclk_pll *pll)
+{
+	unsigned long i, infin, n, n2;
+	unsigned long deviation = 0xffffffff;
+	unsigned long new_freq, new_deviation;
+	struct vclk_pll pll_tmp = {
+		.type = VCLK_PLL4600C28,
+		.mode = pll->mode
+	};
+
+	/* Output clock range: 1.2Ghz to 3Ghz */
+	if (!pll->no_limits)
+		if (output < 1200000000u || output > 3000000000u)
+			return -1;
+
+	/* For better jitter, IDF should be smallest
+	   and NDIV must be maximum */
+	for (i = 1; (i <= 7) && deviation; i++) {
+		/* INFIN checks */
+		infin = input / i;
+		if (!pll->no_limits)
+			if ((infin < 4000000) || (infin > 50000000))
+				continue;   /* Invalid case */
+
+		n = div64_u64(((uint64_t)i * output), (2 * input));
+
+		/* Checks */
+		if (n < 8)
+			continue;
+		if (n > 246)
+			break;
+
+		pll_tmp.idf = i;
+		/* Checking n & n+1 to cover division rounding */
+		n2 = n + 1;
+		for (; (n <= n2) && deviation; n++) {
+			pll_tmp.ndiv = n;
+			vclk_pll4600c28_get_rate(input, &pll_tmp, &new_freq);
+			if (new_freq > output)
+				new_deviation = new_freq - output;
+			else
+				new_deviation = output - new_freq;
+			if (!new_deviation || new_deviation < deviation) {
+				pll->idf  = i;
+				pll->ndiv = n;
+				deviation = new_deviation;
+			}
+		}
+	}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+
+	return 0;
+}
+
+/*
+ * FS216
+ */
+
+#define FS216_SCALING_FACTOR    4096LL
+
+ /* ========================================================================
+   Name:    vclk_fs216c65_get_rate()
+   Description: Parameters to freq computation for frequency synthesizers.
+   ======================================================================== */
+
+static int vclk_fs216c65_get_rate(unsigned long input,
+		struct vclk_fs *fs, unsigned long *rate)
+{
+	uint64_t res;
+	unsigned long ns; /* nsdiv3 value: 3=0.bin, 1=1.bin */
+	unsigned long nd = 8; /* ndiv stuck at 0 => val = 8 */
+	unsigned long s; /* sdiv value = 1 << (sdiv_bin + 1) */
+	long m;	/* md value (-17 to -1) */
+
+	/* BIN to VAL */
+	m = fs->mdiv - 32;
+	s = 1 << (fs->sdiv + 1);
+	ns = (fs->nsdiv ? 1 : 3);
+
+	res = (uint64_t)(s * ns * P15 * (uint64_t)(m + 33));
+	res = res - (s * ns * fs->pe);
+	*rate = div64_u64(P15 * nd * input * 32, res);
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_fs216c65_get_params()
+   Description: Freq to parameters computation for FS216 C65
+   Input:       input=input freq (Hz), output=output freq (Hz)
+   Output:      updated 'struct vclk_fs *fs'
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+static int vclk_fs216c65_get_params(unsigned long input,
+		unsigned long output, struct vclk_fs *fs)
+{
+	unsigned long nd = 8; /* ndiv value: bin stuck at 0 => value = 8 */
+	unsigned long ns; /* nsdiv3 value: 3=0.bin, 1=1.bin */
+	unsigned long sd; /* sdiv value = 1 << (sdiv_bin_value + 1) */
+	long m;	/* md value (-17 to -1) */
+	uint64_t p, p2;	/* pe value */
+	int si;
+	unsigned long new_freq, new_deviation;
+	/* initial condition to say: "infinite deviation" */
+	unsigned long deviation = 0xffffffff;
+	int stop, ns_search_loop;
+	struct vclk_fs fs_tmp = {
+		.type = VCLK_FS216C65,
+	};
+
+	/* Checks */
+	if (!output)
+		return -1;
+
+	/*
+	 * fs->nsdiv is a register value ('BIN') which is translated
+	 * to a decimal value according to following rules.
+	 * In case nsdiv is hardwired, it must be set to 0xff before calling.
+	 *
+	 * fs->nsdiv      ns.dec
+	 *   0xff     computed by this algo
+	 *     0      3
+	 *     1      1
+	 */
+	if (fs->nsdiv != 0xff) {
+		ns = (fs->nsdiv ? 1 : 3);
+		ns_search_loop = 1;
+	} else {
+		ns = 3;
+		ns_search_loop = 2;
+	}
+
+	for (; (ns < 4) && ns_search_loop; ns -= 2, ns_search_loop--)
+		for (si = 7; (si >= 0) && deviation; si--) {
+			sd = (1 << (si + 1));
+			/* Recommended search order: -16 to -1, then -17 */
+			for (m = -16, stop = 0; !stop && deviation; m++) {
+				if (!m) {
+					m = -17; /* 0 is -17 */
+					stop = 1;
+				}
+				p = P15 * 32 * nd * input *
+					FS216_SCALING_FACTOR;
+				p = div64_u64(p, sd * ns * output *
+					      FS216_SCALING_FACTOR);
+				p2 = P15 * (uint64_t)(m + 33);
+				if (p2 < p)
+					continue; /* p must be >= 0 */
+				p = p2 - p;
+
+				if (p > 32768LL)
+					/* Already too high. Let's move to
+					   next sdiv */
+					break;
+
+				fs_tmp.mdiv = (unsigned long)(m + 32);
+				/* pe fine tuning: ± 2 around computed
+				   pe value */
+				if (p > 2)
+					p2 = p - 2;
+				else
+					p2 = 0;
+				for (; p2 < 32768ll && (p2 < (p + 2)); p2++) {
+					fs_tmp.pe = p2;
+					fs_tmp.sdiv = si;
+					fs_tmp.nsdiv = (ns == 1) ? 1 : 0;
+					vclk_fs216c65_get_rate(input, &fs_tmp,
+							       &new_freq);
+
+					if (new_freq < output)
+						new_deviation = output -
+								new_freq;
+					else
+						new_deviation = new_freq -
+								output;
+					/* Check if this is a better solution */
+					if (new_deviation < deviation) {
+						fs->mdiv = (unsigned long)(m +
+									   32);
+						fs->pe = (unsigned long)p2;
+						fs->sdiv = si;
+						fs->nsdiv = (ns == 1) ? 1 : 0;
+						deviation = new_deviation;
+					}
+				}
+			}
+		}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+
+	return 0;
+}
+
+/*
+ * FS432 C65
+ * Based on "C65_4FS432_25_um.pdf" spec
+ */
+
+/* ========================================================================
+   Name:    vclk_fs432c65_get_rate()
+   Description: Parameters to freq computation for frequency synthesizers.
+   ======================================================================== */
+
+static int vclk_fs432c65_get_rate(unsigned long input, struct vclk_fs *fs,
+		unsigned long *rate)
+{
+	uint64_t res;
+	unsigned long nd = 16; /* ndiv value; stuck at 0 (30Mhz input) */
+	long m;	/* md value (-17 to -1) */
+	unsigned long sd; /* sdiv value = 1 << (sdiv_bin + 1) */
+	unsigned long ns; /* nsdiv3 value */
+
+	/* BIN to VAL */
+	m = fs->mdiv - 32;
+	sd = 1 << (fs->sdiv + 1);
+	ns = (fs->nsdiv ? 1 : 3);
+
+	res = (uint64_t)(sd * ns * P15 * (uint64_t)(m + 33));
+	res = res - (sd * ns * fs->pe);
+	*rate = div64_u64(P15 * nd * input * 32, res);
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_fs432c65_get_params()
+   Description: Freq to parameters computation for FS432 C65
+   Input:       input=input freq (Hz), output=output freq (Hz)
+   Output:      updated *md, *pe, *sdiv, & *nsdiv3
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+#define FS432_SCALING_FACTOR    4096LL
+
+static int vclk_fs432c65_get_params(unsigned long input,
+		unsigned long output, struct vclk_fs *fs)
+{
+	unsigned long nd = 16; /* ndiv value; stuck at 0 (30Mhz input) */
+	unsigned long ns; /* nsdiv3 value */
+	unsigned long sd; /* sdiv value = 1 << (sdiv_bin_value + 1) */
+	long m;	/* md value (-17 to -1) */
+	uint64_t p, p2;	/* pe value */
+	int si;
+	unsigned long new_freq, new_deviation;
+	/* initial condition to say: "infinite deviation" */
+	unsigned long deviation = 0xffffffff;
+	int stop, ns_search_loop;
+	struct vclk_fs fs_tmp = {
+		.type = VCLK_FS432C65,
+	};
+
+	/*
+	 * *nsdiv3 is a register value ('BIN') which is translated
+	 * to a decimal value according to following rules.
+	 * In case nsdiv is hardwired, it must be set to 0xff before calling.
+	 *
+	 *    *nsdiv   ns.dec
+	 *    ff       computed by this algo
+	 *    0        3
+	 *    1        1
+	 */
+	if (fs->nsdiv != 0xff) {
+		ns = (fs->nsdiv ? 1 : 3);
+		ns_search_loop = 1;
+	} else {
+		ns = 3;
+		ns_search_loop = 2;
+	}
+
+	for (; (ns < 4) && ns_search_loop; ns -= 2, ns_search_loop--)
+		for (si = 7; (si >= 0) && deviation; si--) {
+			sd = (1 << (si + 1));
+			/* Recommended search order: -16 to -1, then -17
+			 * (if 24Mhz<input<27Mhz ONLY)
+			 */
+			for (m = -16, stop = 0; !stop && deviation; m++) {
+				if (!m) {
+					/* -17 forbidden with 30Mhz */
+					if (input > 27000000)
+						break;
+					m = -17; /* 0 is -17 */
+					stop = 1;
+				}
+				p = P15 * 32 * nd * input *
+					FS432_SCALING_FACTOR;
+				p = div64_u64(p, sd * ns * output *
+							  FS432_SCALING_FACTOR);
+				p2 = P15 * (uint64_t)(m + 33);
+				if (p2 < p)
+					continue; /* p must be >= 0 */
+
+				p = p2 - p;
+
+				if (p > 32768LL)
+					/* Already too high. Let's move to
+					   next sdiv */
+					break;
+
+				fs_tmp.mdiv = (unsigned long)(m + 32);
+				fs_tmp.pe = (unsigned long)p;
+				fs_tmp.sdiv = si;
+				fs_tmp.nsdiv = (ns == 1) ? 1 : 0;
+				if (vclk_fs432c65_get_rate(input, &fs_tmp,
+							   &new_freq) != 0)
+					continue;
+
+				if (new_freq < output)
+					new_deviation = output - new_freq;
+				else
+					new_deviation = new_freq - output;
+				/* Check if this is a better solution */
+				if (new_deviation < deviation) {
+					fs->mdiv = (unsigned long)(m + 32);
+					fs->pe = (unsigned long)p;
+					fs->sdiv = si;
+					fs->nsdiv = (ns == 1) ? 1 : 0;
+					deviation = new_deviation;
+				}
+			}
+		}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+
+	return 0;
+}
+
+/*
+	FS660 C28
+	Based on "MDSpecs_C28SOI_4FS_660MHZ_LR_EG_5U1X2T8X.v1.2.pdf" spec.
+
+	This FSYN embeds a programmable PLL which then serve the 4 digital
+	blocks
+	For this reason the PLL660 is programmed separately from digital parts.
+
+	clkin
+		=> PLL660
+			=> DIG660_0 => clkout0
+			=> DIG660_1 => clkout1
+			=> DIG660_2 => clkout2
+			=> DIG660_3 => clkout3
+*/
+
+/* ========================================================================
+   Name:    vclk_fs660c28_vco_get_rate()
+   Description: Compute VCO frequency of FS660C28 embedded PLL (PLL660)
+   Input: clkin + ndiv & pdiv registers values
+   Output: updated *rate (Hz)
+   Returns: 0=OK, -1=can't compute with given input+ndiv
+   ======================================================================== */
+
+static int vclk_fs660c28_vco_get_rate(unsigned long input,
+		struct vclk_fs *fs, unsigned long *rate)
+{
+	unsigned long nd = fs->ndiv + 8; /* ndiv value */
+	unsigned long pdiv = 1;	/* Frozen. Not configurable so far */
+
+	/* ndiv: 0x2 to 0xf => formula 10 to 23 */
+	if ((fs->ndiv < 2) || (fs->ndiv > 15))
+		return -1;	/* Invalid NDIV */
+
+	*rate = (input * nd) / pdiv;
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_fs660c28_vco_get_params()
+   Description: Compute FS660 C28 params for embedded PLL660
+   Input:       input=input freq (Hz), output=output freq (Hz)
+   Output:      updated *ndiv (register value). Note that PDIV is frozen to 1.
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+static int vclk_fs660c28_vco_get_params(unsigned long input,
+		unsigned long output, struct vclk_fs *fs)
+{
+	/* Formula
+	 * VCO frequency = (fin x ndiv) / pdiv
+	 * ndiv = VCOfreq * pdiv / fin
+	 */
+	unsigned long pdiv = 1, n;
+
+	/* Output clock range: 384Mhz to 660Mhz with 2% margin */
+	if (!fs->no_limits)
+		if (output < 376320000 || output > 673200000)
+			return -1;
+
+	if (input > 40800000) /* 40Mhz max + 2% */
+		/* This means that PDIV would be 2 instead of 1.
+		   Not supported today. */
+		return -1;
+
+	n = output * pdiv / input;
+	if (n < 10)
+		n = 10;
+	fs->ndiv = n - 8; /* Converting formula value to reg value */
+
+	return 0;
+}
+
+/* ========================================================================
+   Name   : vclk_fs660c28_dig_get_rate()
+   Desc   : Parameters to freq computation for frequency synthesizers.
+   Inputs : input=VCO frequency, nsdiv, md, pe, & sdiv 'BIN' values.
+   Outputs: *rate updated
+   Returns: 0=OK, -1=ERROR
+   ======================================================================== */
+
+static int vclk_fs660c28_dig_get_rate(unsigned long input,
+		struct vclk_fs *fs, unsigned long *rate)
+{
+	/* sdiv value = 1 << sdiv_reg_value */
+	unsigned long s = (1 << fs->sdiv);
+	unsigned long ns;  /* nsdiv value (1 or 3) */
+	uint64_t res;
+
+	/*
+	 * 'nsdiv' is a register value ('BIN') which is translated
+	 * to a decimal value according to following rules.
+	 *
+	 *     nsdiv      ns.dec
+	 *       0        3
+	 *       1        1
+	 */
+	ns = (fs->nsdiv == 1) ? 1 : 3;
+
+	res = ((uint64_t)P20 * (32 + fs->mdiv) + 32 * fs->pe) * s * ns;
+	*rate = (unsigned long)div64_u64(input * P20 * 32, res);
+	return 0;
+}
+
+/*	==========================================================
+	Name  : vclk_fs660c28_dig_get_params()
+	Desc  : Compute params for digital part of FS660
+	Input : fvco=VCO freq, output=requested freq (Hz), *nsdiv
+		   (0/1 if silicon frozen, or 0xff if to be computed).
+	Output: updated *nsdiv, *md, *pe & *sdiv registers values.
+	Return: 0=OK, -1=ERROR
+	========================================================== */
+
+static int vclk_fs660c28_dig_get_params(unsigned long fvco,
+			unsigned long output, struct vclk_fs *fs)
+{
+	int si; /* sdiv_reg (8 downto 0) */
+	unsigned long ns; /* nsdiv value (1 or 3) */
+	unsigned long s; /* sdiv value = 1 << sdiv_reg */
+	unsigned long m; /* md value */
+	unsigned long new_freq, new_deviation;
+	/* initial condition to say: "infinite deviation" */
+	unsigned long deviation = 0xffffffff;
+	uint64_t p, p2; /* pe value */
+	int ns_search_loop; /* How many ns search trials */
+	struct vclk_fs fs_tmp = {
+		.type = VCLK_FS660C28
+	};
+
+	/*
+	 * *nsdiv is a register value ('BIN') which is translated
+	 * to a decimal value according to following rules.
+	 * In case nsdiv is hardwired, it must be set to 0xff before calling.
+	 *
+	 *   nsdiv      ns.dec
+	 *      ff        computed by this algo
+	 *       0        3
+	 *       1        1
+	 */
+	if (fs->nsdiv != 0xff) {
+		ns = (fs->nsdiv ? 1 : 3);
+		ns_search_loop = 1;
+	} else {
+		ns = 3;
+		ns_search_loop = 2;
+	}
+
+	for (; (ns < 4) && ns_search_loop && deviation;
+	     ns -= 2, ns_search_loop--)
+		for (si = 8; (si >= 0) && deviation; si--) {
+			s = (1 << si);
+			for (m = 0; (m < 32) && deviation; m++) {
+				/* printf("vco=%lu ns=%u s=%d m=%d\n", fvco,
+					  ns, s, m); */
+				p = (uint64_t)fvco * P20 * 32;
+				/* printf("  fvco * P20 * 32=%"
+					  PRIu64 "\n", p); */
+				p2 = (32 + m) * ((uint64_t)s * ns * output) *
+					P20;
+				/* printf("  (32 + m) * (s * ns * output) *
+					  P20=%" PRIu64 "\n", p2); */
+				if (p2 > p)
+					continue; /* Invalid */
+				p -= p2;
+				p2 = (uint64_t)s * ns * output * 32;
+				p = div64_u64(p, p2);
+				/* printf("  fvco=%lu ns=%lu s=%lu m=%lu => p=%"
+					  PRIu64 "\n", fvco, ns, s, m, p); */
+
+				if (p > 32767LL)
+					continue;
+
+				fs_tmp.mdiv = m;
+				fs_tmp.sdiv = si;
+				fs_tmp.nsdiv = (ns == 1) ? 1 : 0;
+				/* Checking p & p+1 to cover division
+				   rounding */
+				p2 = p + 1;
+				for (; (p <= p2) && deviation; p++) {
+					fs_tmp.pe = (unsigned long)p;
+					if (vclk_fs660c28_dig_get_rate(fvco,
+						&fs_tmp, &new_freq) != 0)
+						continue;
+					if (new_freq < output)
+						new_deviation = output -
+								new_freq;
+					else
+						new_deviation = new_freq -
+								output;
+					/* if (new_deviation == deviation)
+						printf("SAME out=%lu\n\n",
+						       new_freq); */
+					if (new_deviation < deviation) {
+						/* printf("BEST out=%lu\n\n",
+							  new_freq); */
+						fs->mdiv = m;
+						fs->pe = (unsigned long)p;
+						fs->sdiv = si;
+						fs->nsdiv = (ns == 1) ? 1 : 0;
+						deviation = new_deviation;
+					}
+				}
+			}
+		}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+
+	return 0;
+}
+
+/*
+	FS660 C32
+	Based on C32_4FS_660MHZ_LR_EG_5U1X2T8X_um spec.
+
+	This FSYN embeds a programmable PLL which then
+	serve the 4 digital blocks
+	For this reason the PLL660 is programmed
+	separately from digital parts.
+
+	clkin
+		=> PLL660
+			=> DIG660_0 => clkout0
+			=> DIG660_1 => clkout1
+			=> DIG660_2 => clkout2
+			=> DIG660_3 => clkout3
+*/
+
+/* We use Fixed-point arithmetic in order to avoid "float" functions.*/
+#define SCALING_FACTOR  2048LL
+
+/* ========================================================================
+   Name:    vclk_fs660c32_vco_get_rate()
+   Description: Compute VCO frequency of FS660 embedded PLL (PLL660)
+   Input: ndiv & pdiv registers values
+   Output: updated *rate (Hz)
+   Returns: 0=OK, -1=can't compute with given input+ndiv
+   ======================================================================== */
+
+static int vclk_fs660c32_vco_get_rate(unsigned long input, struct vclk_fs *fs,
+			unsigned long *rate)
+{
+	unsigned long nd = fs->ndiv + 16; /* ndiv value */
+	unsigned long pdiv = 1;	/* Frozen. Not configurable so far */
+
+	/* ndiv: 0x0 to 0x7 => formula 16 to 23 */
+	if (fs->ndiv > 7)
+		return -1;	/* Invalid NDIV */
+
+	*rate = (input * nd) / pdiv;
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_fs660c32_vco_get_params()
+   Description: Compute params for embeded PLL660
+   Input:       input=input freq (Hz), output=output freq (Hz)
+   Output:      updated *ndiv (register value). Note that PDIV is frozen to 1.
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+static int vclk_fs660c32_vco_get_params(unsigned long input,
+			unsigned long output, struct vclk_fs *fs)
+{
+	/* Formula
+	 * VCO frequency = (fin x ndiv) / pdiv
+	 * ndiv = VCOfreq * pdiv / fin
+	 */
+	unsigned long pdiv = 1, n;
+
+	/* Output clock range: 384Mhz to 660Mhz */
+	if (!fs->no_limits)
+		if (output < 384000000 || output > 660000000)
+			return -1;
+
+	if (input > 40000000)
+		/* This means that PDIV would be 2 instead of 1.
+		   Not supported today. */
+		return -1;
+
+	input /= 1000;
+	output /= 1000;
+
+	n = output * pdiv / input;
+	if (n < 16)
+		n = 16;
+	fs->ndiv = n - 16; /* Converting formula value to reg value */
+
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_fs660c32_dig_get_rate()
+   Description: Parameters to freq computation for frequency synthesizers.
+   Inputs:  input=VCO frequency, nsdiv, md, pe, & sdiv 'BIN' values.
+   Outputs: *rate updated
+   ======================================================================== */
+
+static int vclk_fs660c32_dig_get_rate(unsigned long input, struct vclk_fs *fs,
+			  unsigned long *rate)
+{
+	/* sdiv value = 1 << sdiv_reg_value */
+	unsigned long s = (1 << fs->sdiv);
+	unsigned long ns;  /* nsdiv value (1 or 3) */
+	uint64_t res;
+
+	/*
+	 * 'nsdiv' is a register value ('BIN') which is translated
+	 * to a decimal value according to following rules.
+	 *
+	 *     nsdiv      ns.dec
+	 *       0        3
+	 *       1        1
+	 */
+	ns = (fs->nsdiv == 1) ? 1 : 3;
+
+	res = (P20 * (32 + fs->mdiv) + 32 * fs->pe) * s * ns;
+	*rate = (unsigned long)div64_u64(input * P20 * 32, res);
+	return 0;
+}
+
+/* ========================================================================
+   Name:    vclk_fs660c32_dig_get_params()
+   Description: Compute params for digital part of FS660
+   Input:       input=VCO freq, output=requested freq (Hz), *nsdiv
+			(0/1 if silicon frozen, or 0xff if to be computed).
+   Output:      updated *nsdiv, *md, *pe & *sdiv registers values.
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+static int vclk_fs660c32_dig_get_params(unsigned long input,
+		unsigned long output, struct vclk_fs *fs)
+{
+	int si;	/* sdiv_reg (8 downto 0) */
+	unsigned long ns; /* nsdiv value (1 or 3) */
+	unsigned long s; /* sdiv value = 1 << sdiv_reg */
+	unsigned long m; /* md value */
+	unsigned long new_freq, new_deviation;
+	/* initial condition to say: "infinite deviation" */
+	unsigned long deviation = 0xffffffff;
+	uint64_t p, p2;	/* pe value */
+	int ns_search_loop;	/* How many ns search trials */
+	struct vclk_fs fs_tmp = {
+		.type = VCLK_FS660C32
+	};
+
+	/*
+	 * *nsdiv is a register value ('BIN') which is translated
+	 * to a decimal value according to following rules.
+	 * In case nsdiv is hardwired, it must be set to 0xff before calling.
+	 *
+	 *    *nsdiv      ns.dec
+	 *  ff    computed by this algo
+	 *       0        3
+	 *       1        1
+	 */
+	if (fs->nsdiv != 0xff) {
+		ns = (fs->nsdiv ? 1 : 3);
+		ns_search_loop = 1;
+	} else {
+		ns = 3;
+		ns_search_loop = 2;
+	}
+
+	for (; (ns < 4) && ns_search_loop; ns -= 2, ns_search_loop--)
+		for (si = 8; (si >= 0) && deviation; si--) {
+			s = (1 << si);
+			for (m = 0; (m < 32) && deviation; m++) {
+				p = (uint64_t)input * SCALING_FACTOR;
+				p = p - SCALING_FACTOR * ((uint64_t)s *
+					(uint64_t)ns * (uint64_t)output) -
+					((uint64_t)s * (uint64_t)ns *
+					(uint64_t)output) *
+					((uint64_t)m *
+					(SCALING_FACTOR / 32LL));
+				p = p * (P20 / SCALING_FACTOR);
+				p = div64_u64(p, (uint64_t)((uint64_t)s *
+					      (uint64_t)ns *
+					      (uint64_t)output));
+
+				if (p > 32767LL)
+					continue;
+
+				fs_tmp.mdiv = m;
+				fs_tmp.pe = (unsigned long)p;
+				fs_tmp.sdiv = si;
+				fs_tmp.nsdiv = (ns == 1) ? 1 : 0;
+				if (vclk_fs660c32_dig_get_rate(input, &fs_tmp,
+							       &new_freq) != 0)
+					continue;
+				if (new_freq < output)
+					new_deviation = output - new_freq;
+				else
+					new_deviation = new_freq - output;
+				if (new_deviation < deviation) {
+					fs->mdiv = m;
+					fs->pe = (unsigned long)p;
+					fs->sdiv = si;
+					fs->nsdiv = (ns == 1) ? 1 : 0;
+					deviation = new_deviation;
+				}
+			}
+		}
+
+	if (deviation == 0xffffffff) /* No solution found */
+		return -1;
+
+    /* pe fine tuning if deviation not 0: ± 2 around computed pe value */
+	if (deviation) {
+		fs_tmp.mdiv = fs->mdiv;
+		fs_tmp.sdiv = fs->sdiv;
+		fs_tmp.nsdiv = fs->nsdiv;
+		if (fs->pe > 2)
+			p2 = fs->pe - 2;
+		else
+			p2 = 0;
+		for (; p2 < 32768ll && (p2 <= (fs->pe + 2)); p2++) {
+			fs_tmp.pe = (unsigned long)p2;
+			if (vclk_fs660c32_dig_get_rate(input, &fs_tmp,
+						       &new_freq) != 0)
+				continue;
+			if (new_freq < output)
+				new_deviation = output - new_freq;
+			else
+				new_deviation = new_freq - output;
+
+			/* Check if this is a better solution */
+			if (new_deviation < deviation) {
+				fs->pe = (unsigned long)p2;
+				deviation = new_deviation;
+			}
+		}
+	}
+
+	return 0;
+}
+
+/*
+ * Exported functions
+ */
+
+/* ========================================================================
+   Name:    vclk_pll_get_params
+   Description: Generic freq to parameters computation function
+   Returns:     0=OK
+   ======================================================================== */
+
+int vclk_pll_get_params(unsigned long input, unsigned long output,
+						struct vclk_pll *pll)
+{
+	switch (pll->type) {
+	case VCLK_PLL800C65:
+		return vclk_pll800c65_get_params(input, output, pll);
+	case VCLK_PLL1200C32:
+		return vclk_pll1200c32_get_params(input, output, pll);
+	case VCLK_PLL1600C45:
+		return vclk_pll1600c45_get_params(input, output, pll);
+	case VCLK_PLL1600C45PHI:
+		return vclk_pll1600c45_get_phi_params(input, output, pll);
+	case VCLK_PLL1600C65:
+		return vclk_pll1600c65_get_params(input, output, pll);
+	case VCLK_PLL3200C28:
+		return vclk_pll3200c28_get_params(input, output, pll);
+	case VCLK_PLL3200C32:
+		return vclk_pll3200c32_get_params(input, output, pll);
+	case VCLK_PLL4600C28:
+		return vclk_pll4600c28_get_params(input, output, pll);
+	default:
+		break;
+	}
+
+	return -1;
+}
+
+/* ========================================================================
+   Name:    vclk_pll_get_params
+   Description: Generic parameters to freq computation function
+   Returns:     0=OK
+   ======================================================================== */
+
+int vclk_pll_get_rate(unsigned long input, struct vclk_pll *pll,
+					  unsigned long *output)
+{
+	switch (pll->type) {
+	case VCLK_PLL800C65:
+		return vclk_pll800c65_get_rate(input, pll, output);
+	case VCLK_PLL1200C32:
+		return vclk_pll1200c32_get_rate(input, pll, output);
+	case VCLK_PLL1600C45:
+		return vclk_pll1600c45_get_rate(input, pll, output);
+	case VCLK_PLL1600C45PHI:
+		return vclk_pll1600c45_get_phi_rate(input, pll, output);
+	case VCLK_PLL1600C65:
+		return vclk_pll1600c65_get_rate(input, pll, output);
+	case VCLK_PLL3200C28:
+		return vclk_pll3200c28_get_rate(input, pll, output);
+	case VCLK_PLL3200C32:
+		return vclk_pll3200c32_get_rate(input, pll, output);
+	case VCLK_PLL4600C28:
+		return vclk_pll4600c28_get_rate(input, pll, output);
+	default:
+		break;
+	}
+
+	return -1;
+}
+
+/* ========================================================================
+   Name:    vclk_fs_get_params
+   Description: Generic freq to parameters computation function
+   Returns:     0=OK
+   ======================================================================== */
+
+int vclk_fs_get_params(unsigned long input, unsigned long output,
+					   struct vclk_fs *fs)
+{
+	switch (fs->type) {
+	case VCLK_FS216C65:
+		return vclk_fs216c65_get_params(input, output, fs);
+	case VCLK_FS432C65:
+		return vclk_fs432c65_get_params(input, output, fs);
+	case VCLK_FS660C28VCO:
+		return vclk_fs660c28_vco_get_params(input, output, fs);
+	case VCLK_FS660C28:
+		return vclk_fs660c28_dig_get_params(input, output, fs);
+	case VCLK_FS660C32VCO:
+		return vclk_fs660c32_vco_get_params(input, output, fs);
+	case VCLK_FS660C32:
+		return vclk_fs660c32_dig_get_params(input, output, fs);
+	default:
+		break;
+	}
+
+	return -1;
+}
+
+/* ========================================================================
+   Name:    vclk_fs_get_params
+   Description: Generic parameters to freq computation function
+   Returns:     0=OK
+   ======================================================================== */
+
+int vclk_fs_get_rate(unsigned long input, struct vclk_fs *fs,
+					 unsigned long *output)
+{
+	switch (fs->type) {
+	case VCLK_FS216C65:
+		return vclk_fs216c65_get_rate(input, fs, output);
+	case VCLK_FS432C65:
+		return vclk_fs432c65_get_rate(input, fs, output);
+	case VCLK_FS660C28VCO:
+		return vclk_fs660c28_vco_get_rate(input, fs, output);
+	case VCLK_FS660C28:
+		return vclk_fs660c28_dig_get_rate(input, fs, output);
+	case VCLK_FS660C32VCO:
+		return vclk_fs660c32_vco_get_rate(input, fs, output);
+	case VCLK_FS660C32:
+		return vclk_fs660c32_dig_get_rate(input, fs, output);
+	default:
+		break;
+	}
+
+	return -1;
+}
diff -urNp a/drivers/clk/st/vclk_algos.h b/drivers/clk/st/vclk_algos.h
--- a/drivers/clk/st/vclk_algos.h	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/clk/st/vclk_algos.h	2019-09-26 21:23:27.316619500 +0100
@@ -0,0 +1,114 @@
+/*
+ * OS independant Validation clock driver
+ * PLL & FS parameters computation algorithms
+ * 2012-15, F. Charpentier, UPD Functional Validation
+ */
+
+#ifndef __VCLK_ALGOS_H
+#define __VCLK_ALGOS_H
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+enum vclk_pll_type {
+	VCLK_PLL800C65,
+	VCLK_PLL1200C32,
+	VCLK_PLL1600C45,
+	VCLK_PLL1600C45PHI,
+	VCLK_PLL1600C65,
+	VCLK_PLL3200C28,    /* Supports FRACTIONAL mode */
+	VCLK_PLL3200C32,
+	VCLK_PLL4600C28,
+};
+
+struct vclk_pll {
+	enum vclk_pll_type type;
+
+	unsigned short mdiv;
+	unsigned short ndiv;
+	unsigned short pdiv;
+
+	unsigned short odf;
+	unsigned short idf;
+	unsigned short ldf;
+	unsigned short cp;
+	unsigned short frac;    /* FRAC_INPUT */
+
+	char no_limits;         /* Disable out of range check */
+	char mode;              /* 0=integer (default), 1=fractional */
+};
+
+enum vclk_fs_type {
+	VCLK_FS216C65,
+	VCLK_FS432C65,
+	VCLK_FS660C28VCO,   /* VCO out */
+	VCLK_FS660C28,      /* DIG out */
+	VCLK_FS660C32VCO,   /* VCO out */
+	VCLK_FS660C32       /* DIG out */
+};
+
+struct vclk_fs {
+	enum vclk_fs_type type;
+
+	unsigned long ndiv;
+	unsigned long mdiv;
+	unsigned long pe;
+	unsigned long sdiv;
+	unsigned long nsdiv;
+
+	char no_limits;      /* Disable out of range check */
+};
+
+/* ========================================================================
+   Name:    vclk_pll_get_params()
+   Description: Freq to parameters computation for PLLs
+   Input:       input=input freq (Hz), output=output freq (Hz)
+   Output:      updated 'struct vclk_pll *pll'
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+int vclk_pll_get_params(unsigned long input, unsigned long output,
+	struct vclk_pll *pll);
+
+int vclk_pll_get_rate(unsigned long input, struct vclk_pll *pll,
+	unsigned long *output);
+
+/* ========================================================================
+   Name:    vclk_fs_get_params()
+   Description: Freq to parameters computation for FSs
+   Input:       input=input freq (Hz), output=output freq (Hz)
+   Output:      updated 'struct vclk_fs *fs'
+   Return:      0=OK, -1=ERROR
+   ======================================================================== */
+
+int vclk_fs_get_params(unsigned long input, unsigned long output,
+	struct vclk_fs *fs);
+
+int vclk_fs_get_rate(unsigned long input, struct vclk_fs *fs,
+	unsigned long *output);
+
+/* ========================================================================
+   Name:        clk_best_div
+   Description: Returned closest div factor
+   Returns:     Best div factor
+   ======================================================================== */
+
+static inline unsigned long
+vclk_best_div(unsigned long parent_rate, unsigned long rate)
+{
+	unsigned long div;
+
+	if (rate > parent_rate)
+		div = 1;
+	else
+		div = parent_rate / rate +
+			((rate > (2 * (parent_rate % rate))) ? 0 : 1);
+	return div;
+}
+
+#ifdef __cplusplus
+}
+#endif
+
+#endif /* #ifndef __VCLK_ALGOS_H */
diff -urNp a/drivers/clocksource/Kconfig b/drivers/clocksource/Kconfig
--- a/drivers/clocksource/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/clocksource/Kconfig	2019-10-07 11:42:50.994354700 +0100
@@ -162,6 +162,22 @@ config CLKSRC_SAMSUNG_PWM
 	  for all devicetree enabled platforms. This driver will be
 	  needed only on systems that do not have the Exynos MCT available.
 
+config ST_LPC_CLOCK
+	bool
+	depends on ARCH_STI
+	select CLKSRC_OF if OF
+	help
+	  Enable this option to use the Low Power controller timer
+	  as clock source.
+
+config CLKSRC_LPC_TIMER_SCHED_CLOCK
+	bool
+	depends on ST_LPC_CLOCK
+	default y
+	help
+	 Use  Low Power controller timer clock source as sched_clock
+
+
 config FSL_FTM_TIMER
 	bool
 	help
diff -urNp a/drivers/clocksource/Makefile b/drivers/clocksource/Makefile
--- a/drivers/clocksource/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/clocksource/Makefile	2019-10-07 11:40:53.358228100 +0100
@@ -45,6 +45,7 @@ obj-$(CONFIG_MTK_TIMER)		+= mtk_timer.o
 obj-$(CONFIG_ARM_ARCH_TIMER)		+= arm_arch_timer.o
 obj-$(CONFIG_ARM_GLOBAL_TIMER)		+= arm_global_timer.o
 obj-$(CONFIG_CLKSRC_METAG_GENERIC)	+= metag_generic.o
+obj-$(CONFIG_ST_LPC_CLOCK)		+= st_lpc.o
 obj-$(CONFIG_ARCH_HAS_TICK_BROADCAST)	+= dummy_timer.o
 obj-$(CONFIG_ARCH_KEYSTONE)		+= timer-keystone.o
 obj-$(CONFIG_ARCH_INTEGRATOR_AP)	+= timer-integrator-ap.o
diff -urNp a/drivers/clocksource/st_lpc.c b/drivers/clocksource/st_lpc.c
--- a/drivers/clocksource/st_lpc.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/clocksource/st_lpc.c	2019-10-07 14:55:45.997742300 +0100
@@ -0,0 +1,156 @@
+/*
+ * This driver implements a Clocksource using the Low Power Timer in
+ * the Low Power Controller (LPC) in some STMicroelectronics
+ * STi series SoCs
+ *
+ * Copyright (C) 2014 STMicroelectronics Limited
+ * Author: Francesco Virlinzi <francesco.virlinzi@st.com>
+ * Author: Ajit Pal Singh <ajitpal.singh@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License Version 2.0 only.  See linux/COPYING for more information.
+ */
+
+#include <linux/clocksource.h>
+#include <linux/init.h>
+#include <linux/of_address.h>
+#include <linux/slab.h>
+#include <linux/clk.h>
+#include <asm/sched_clock.h>
+
+/* Low Power Timer */
+#define LPC_LPT_LSB_OFF		0x400
+#define LPC_LPT_MSB_OFF		0x404
+#define LPC_LPT_START_OFF	0x408
+
+struct st_lpc {
+	struct clk *clk;
+	void __iomem *iomem_cs;
+};
+
+static struct st_lpc *st_lpc;
+
+static u64 notrace st_lpc_counter_read(void)
+{
+	u64 counter;
+	u32 lower;
+	u32 upper, old_upper;
+
+	upper = readl_relaxed(st_lpc->iomem_cs + LPC_LPT_MSB_OFF);
+	do {
+		old_upper = upper;
+		lower = readl_relaxed(st_lpc->iomem_cs + LPC_LPT_LSB_OFF);
+		upper = readl_relaxed(st_lpc->iomem_cs + LPC_LPT_MSB_OFF);
+	} while (upper != old_upper);
+
+	counter = upper;
+	counter <<= 32;
+	counter |= lower;
+	return counter;
+}
+
+static cycle_t st_lpc_clocksource_read(struct clocksource *cs)
+{
+	return st_lpc_counter_read();
+}
+
+static void st_lpc_clocksource_reset(struct clocksource *cs)
+{
+	writel(0, st_lpc->iomem_cs + LPC_LPT_START_OFF);
+	writel(0, st_lpc->iomem_cs + LPC_LPT_MSB_OFF);
+	writel(0, st_lpc->iomem_cs + LPC_LPT_LSB_OFF);
+	writel(1, st_lpc->iomem_cs + LPC_LPT_START_OFF);
+}
+
+static struct clocksource st_lpc_clocksource = {
+	.name   = "st-lpc clocksource",
+	.rating = 301,
+	.read   = st_lpc_clocksource_read,
+	.mask   = CLOCKSOURCE_MASK(64),
+	.flags  = CLOCK_SOURCE_IS_CONTINUOUS,
+};
+
+#ifdef CONFIG_CLKSRC_LPC_TIMER_SCHED_CLOCK
+static u32 notrace st_lpc_sched_clock_read(void)
+{
+	return st_lpc_counter_read();
+}
+#endif
+
+static int __init st_lpc_clocksource_init(void)
+{
+	unsigned long rate;
+
+	st_lpc_clocksource_reset(&st_lpc_clocksource);
+
+	rate = clk_get_rate(st_lpc->clk);
+#ifdef CONFIG_CLKSRC_LPC_TIMER_SCHED_CLOCK
+	//setup_sched_clock(st_lpc_sched_clock_read, 32, rate);
+#endif
+	clocksource_register_hz(&st_lpc_clocksource, rate);
+
+	return 0;
+}
+
+static int st_lpc_setup_clk(struct device_node *np)
+{
+	char *clk_name = "lpc_clk";
+	struct clk *clk;
+	int ret;
+
+	clk = of_clk_get_by_name(np, clk_name);
+	if (IS_ERR(clk)) {
+		pr_err("st-lpc: unable to get lpc clock\n");
+		ret = PTR_ERR(clk);
+		return ret;
+	}
+
+	if (clk_prepare_enable(clk)) {
+		pr_err("st-lpc: %s could not be enabled\n", clk_name);
+		return -EINVAL;
+	}
+
+	if (!clk_get_rate(clk)) {
+		pr_err("st-lpc: Unable to get clock rate\n");
+		clk_disable_unprepare(clk);
+		return -EINVAL;
+	}
+
+	pr_info("st-lpc: %s running @ %lu Hz\n",
+		clk_name, clk_get_rate(clk));
+
+	st_lpc->clk = clk;
+
+	return 0;
+}
+
+static void __init st_lpc_of_register(struct device_node *np)
+{
+	st_lpc = kzalloc(sizeof(*st_lpc), GFP_KERNEL);
+	if (!st_lpc) {
+		pr_err("st-lpc: No memory available\n");
+		return;
+	}
+
+	st_lpc->iomem_cs = of_iomap(np, 0);
+	if (!st_lpc->iomem_cs) {
+		pr_err("st-lpc: Unable to map iomem\n");
+		goto err_0;
+	}
+
+	if (st_lpc_setup_clk(np))
+		goto err_1;
+
+	st_lpc_clocksource_init();
+
+	pr_info("st-lpc: clocksource initialised: iomem: %p\n",
+		st_lpc->iomem_cs);
+	return;
+err_1:
+	iounmap(st_lpc->iomem_cs);
+err_0:
+	kfree(st_lpc);
+	return;
+}
+
+CLOCKSOURCE_OF_DECLARE(st_lpc, "st,st_lpc_timer", st_lpc_of_register);
diff -urNp a/drivers/cpufreq/cpufreq_ondemand.c b/drivers/cpufreq/cpufreq_ondemand.c
--- a/drivers/cpufreq/cpufreq_ondemand.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/cpufreq/cpufreq_ondemand.c	2019-10-07 11:38:33.524307300 +0100
@@ -24,7 +24,7 @@
 #define MAX_SAMPLING_DOWN_FACTOR		(100000)
 #define MICRO_FREQUENCY_UP_THRESHOLD		(95)
 #define MICRO_FREQUENCY_MIN_SAMPLE_RATE		(10000)
-#define MIN_FREQUENCY_UP_THRESHOLD		(11)
+#define MIN_FREQUENCY_UP_THRESHOLD		(1)
 #define MAX_FREQUENCY_UP_THRESHOLD		(100)
 
 static DEFINE_PER_CPU(struct od_cpu_dbs_info_s, od_cpu_dbs_info);
diff -urNp a/drivers/cpuidle/Makefile b/drivers/cpuidle/Makefile
--- a/drivers/cpuidle/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/cpuidle/Makefile	2019-10-07 11:32:27.439499900 +0100
@@ -13,6 +13,7 @@ obj-$(CONFIG_ARM_BIG_LITTLE_CPUIDLE)	+=
 obj-$(CONFIG_ARM_CLPS711X_CPUIDLE)	+= cpuidle-clps711x.o
 obj-$(CONFIG_ARM_HIGHBANK_CPUIDLE)	+= cpuidle-calxeda.o
 obj-$(CONFIG_ARM_KIRKWOOD_CPUIDLE)	+= cpuidle-kirkwood.o
+obj-$(CONFIG_ARCH_STI_CPUIDLE)		+= cpuidle-st.o
 obj-$(CONFIG_ARM_ZYNQ_CPUIDLE)		+= cpuidle-zynq.o
 obj-$(CONFIG_ARM_U8500_CPUIDLE)         += cpuidle-ux500.o
 obj-$(CONFIG_ARM_AT91_CPUIDLE)          += cpuidle-at91.o
diff -urNp a/drivers/cpuidle/cpuidle-st.c b/drivers/cpuidle/cpuidle-st.c
--- a/drivers/cpuidle/cpuidle-st.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/cpuidle/cpuidle-st.c	2019-09-26 21:23:27.324619500 +0100
@@ -0,0 +1,63 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics
+ *
+ * CPU idle - ST SoCs
+ *
+ * Author : Olivier Bideau <olivier.bideau@st.com>
+ *
+ * This file is licensed under the terms of the GNU General Public
+ * License version 2.  This program is licensed "as is" without any
+ * warranty of any kind, whether express or implied.
+ *
+ * The cpu idle currently implements one idle state :
+ * #1 wait-for-interrupt
+ *
+ */
+
+#include <linux/cpuidle.h>
+#include <linux/module.h>
+#include <linux/platform_device.h>
+#include <linux/of.h>
+#include <asm/cpuidle.h>
+
+static struct cpuidle_driver st_idle_driver = {
+	.name = "st_idle",
+	.states = {
+		ARM_CPUIDLE_WFI_STATE,
+	},
+	.state_count = 1,
+};
+
+static int st_cpuidle_probe(struct platform_device *pdev)
+{
+	return cpuidle_register(&st_idle_driver, NULL);
+}
+
+int st_cpuidle_remove(struct platform_device *pdev)
+{
+	cpuidle_unregister(&st_idle_driver);
+	return 0;
+}
+
+static struct of_device_id st_cpuidle_of_match[] = {
+	{
+		.compatible = "st,cpuidle",
+	},
+};
+
+static struct platform_driver st_cpuidle_driver = {
+	.probe = st_cpuidle_probe,
+	.remove = st_cpuidle_remove,
+	.driver = {
+		   .name = "st_cpuidle",
+		   .owner = THIS_MODULE,
+		   .of_match_table = st_cpuidle_of_match,
+		   },
+};
+
+module_platform_driver(st_cpuidle_driver);
+
+MODULE_AUTHOR("Olivier Bideau <olivier.bideau@st.com>");
+MODULE_DESCRIPTION("ST cpu idle driver");
+MODULE_LICENSE("GPL v2");
+MODULE_ALIAS("platform:st-cpuidle");
diff -urNp a/drivers/gpio/Kconfig b/drivers/gpio/Kconfig
--- a/drivers/gpio/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/gpio/Kconfig	2019-10-03 20:04:51.937353700 +0100
@@ -955,6 +955,18 @@ config GPIO_VIPERBOARD
           River Tech's viperboard.h for detailed meaning
           of the module parameters.
 
+config GPIO_ST_FAKE
+	tristate "ST Fake GPIO driver"
+	select MFD_SYSCON
+	help
+	  Create a fake gpio controller to simulate gpios with a register
+
+config GPIO_ST_WAKEUP
+	bool "ST Wakeup GPIO support"
+	depends on ARCH_STI && ST_LPM
+	help
+	  Enable support of ST LPM PIO wakeup configuration
+
 config GPIO_DLN2
 	tristate "Diolan DLN2 GPIO support"
 	depends on MFD_DLN2
diff -urNp a/drivers/gpio/Makefile b/drivers/gpio/Makefile
--- a/drivers/gpio/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/gpio/Makefile	2019-10-03 20:05:48.416631500 +0100
@@ -108,6 +108,8 @@ obj-$(CONFIG_GPIO_WM8994)	+= gpio-wm8994
 obj-$(CONFIG_GPIO_XGENE)	+= gpio-xgene.o
 obj-$(CONFIG_GPIO_XGENE_SB)	+= gpio-xgene-sb.o
 obj-$(CONFIG_GPIO_XILINX)	+= gpio-xilinx.o
+obj-$(CONFIG_GPIO_ST_FAKE) 	+= gpio-st-fake.o
+obj-$(CONFIG_GPIO_ST_WAKEUP)	+= gpio-st-wakeup.o
 obj-$(CONFIG_GPIO_XTENSA)	+= gpio-xtensa.o
 obj-$(CONFIG_GPIO_ZEVIO)	+= gpio-zevio.o
 obj-$(CONFIG_GPIO_ZYNQ)		+= gpio-zynq.o
diff -urNp a/drivers/gpio/gpio-st-fake.c b/drivers/gpio/gpio-st-fake.c
--- a/drivers/gpio/gpio-st-fake.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/gpio/gpio-st-fake.c	2019-09-26 21:23:27.344619500 +0100
@@ -0,0 +1,232 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics
+ *
+ * Fake gpio driver to simulate GPIOs with any system register.
+ *
+ * Author: Seraphin Bonnaffe <seraphin.bonnaffe@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2, as
+ * published by the Free Software Foundation.
+ */
+
+#include <linux/kernel.h>
+#include <linux/module.h>
+#include <linux/gpio.h>
+#include <linux/of.h>
+#include <linux/of_platform.h>
+#include <linux/platform_device.h>
+#include <linux/mfd/syscon.h>
+#include <linux/regmap.h>
+
+#define FGPIO_REG_INDEX		1
+#define FGPIO_SIZE_INDEX	2
+#define FGPIO_PER_BYTE		8
+#define FGPIO_SINGLE_REG_SIZE	32
+
+struct st_fakegpio {
+	struct gpio_chip chip;
+	struct regmap *gpio_regmap;
+	unsigned int ctrl_reg;
+	unsigned int ctrl_reg_size;
+	unsigned int *dir;
+};
+
+static int st_fakegpio_get(struct gpio_chip *gc, unsigned pin)
+{
+	struct st_fakegpio *fgpio = container_of(gc, struct st_fakegpio, chip);
+	unsigned int offset, bitnum, regval;
+	int ret;
+
+	offset = pin / FGPIO_SINGLE_REG_SIZE;
+	bitnum = pin % FGPIO_SINGLE_REG_SIZE;
+
+	ret = regmap_read(fgpio->gpio_regmap, fgpio->ctrl_reg + offset,
+			  &regval);
+	if (ret) {
+		dev_err(gc->dev, "failed to read register %x: %d\n",
+			fgpio->ctrl_reg + offset, ret);
+		return ret;
+	}
+
+	return !!(regval & BIT(bitnum));
+}
+
+static void st_fakegpio_set(struct gpio_chip *gc, unsigned pin, int val)
+{
+	struct st_fakegpio *fgpio = container_of(gc, struct st_fakegpio, chip);
+	unsigned int offset, regval, bitnum;
+	int ret;
+
+	offset = pin / FGPIO_SINGLE_REG_SIZE;
+	bitnum = pin % FGPIO_SINGLE_REG_SIZE;
+
+	ret = regmap_read(fgpio->gpio_regmap, fgpio->ctrl_reg + offset,
+			  &regval);
+	if (ret)
+		dev_err(gc->dev, "failed to read register %x: %d\n",
+			fgpio->ctrl_reg + offset, ret);
+
+	if (val)
+		set_bit(bitnum, (long unsigned *) &regval);
+	else
+		clear_bit(bitnum, (long unsigned *) &regval);
+
+	ret = regmap_write(fgpio->gpio_regmap, fgpio->ctrl_reg + offset,
+			   regval);
+	if (ret < 0)
+		dev_err(gc->dev, "failed to write register %x: %d\n",
+			fgpio->ctrl_reg + offset, ret);
+}
+
+static int st_fakegpio_direction_input(struct gpio_chip *gc, unsigned pin)
+{
+	struct st_fakegpio *fgpio = container_of(gc, struct st_fakegpio, chip);
+	unsigned int offset, bitnum;
+
+	if (pin > gc->ngpio)
+		return -EINVAL;
+
+	offset = pin / FGPIO_SINGLE_REG_SIZE;
+	bitnum = pin % FGPIO_SINGLE_REG_SIZE;
+
+	set_bit(bitnum, (long unsigned *) &fgpio->dir[offset]);
+
+	return 0;
+}
+
+static int st_fakegpio_direction_output(struct gpio_chip *gc,
+					 unsigned pin, int val)
+{
+	struct st_fakegpio *fgpio = container_of(gc, struct st_fakegpio, chip);
+	unsigned int offset, bitnum;
+
+	if (pin > gc->ngpio)
+		return -EINVAL;
+
+	offset = pin / FGPIO_SINGLE_REG_SIZE;
+	bitnum = pin % FGPIO_SINGLE_REG_SIZE;
+
+	clear_bit(bitnum, (long unsigned *) &fgpio->dir[offset]);
+
+	return 0;
+}
+
+static int st_fakegpio_get_direction(struct gpio_chip *gc, unsigned pin)
+{
+	struct st_fakegpio *fgpio = container_of(gc, struct st_fakegpio, chip);
+	unsigned int offset, bitnum;
+
+	if (pin > gc->ngpio)
+		return -EINVAL;
+
+	offset = pin / FGPIO_SINGLE_REG_SIZE;
+	bitnum = pin % FGPIO_SINGLE_REG_SIZE;
+
+	return !!(fgpio->dir[offset] & BIT(bitnum));
+}
+
+static int st_fakegpio_probe(struct platform_device *pdev)
+{
+	struct device_node *np = pdev->dev.of_node;
+	struct st_fakegpio *fgpio;
+	unsigned int cells;
+	int ret;
+
+	fgpio = devm_kzalloc(&pdev->dev, sizeof(struct st_fakegpio),
+			     GFP_KERNEL);
+	if (!fgpio)
+		return -ENOMEM;
+
+	/* Get register details from DT */
+	fgpio->gpio_regmap =
+		syscon_regmap_lookup_by_phandle(np, "st,syscfg");
+
+	if (IS_ERR(fgpio->gpio_regmap)) {
+		dev_info(&pdev->dev, "No syscon phandle specified\n");
+		return -EINVAL;
+	}
+
+	ret = of_property_read_u32_index(np, "st,syscfg", FGPIO_REG_INDEX,
+					 &fgpio->ctrl_reg);
+	if (ret) {
+		dev_err(&pdev->dev, "Reg offset required as syscon args\n");
+		return ret;
+	}
+
+	ret = of_property_read_u32_index(np, "st,syscfg",
+					 FGPIO_SIZE_INDEX,
+					 &fgpio->ctrl_reg_size);
+	if (ret) {
+		dev_err(&pdev->dev, "Reg size required as syscon args\n");
+		return ret;
+	}
+
+	/* Fill-in private gpiochip struct */
+	fgpio->chip.label = "fake gpio";
+	fgpio->chip.owner = THIS_MODULE;
+	fgpio->chip.get	= st_fakegpio_get;
+	fgpio->chip.set	= st_fakegpio_set;
+	fgpio->chip.direction_input = st_fakegpio_direction_input;
+	fgpio->chip.direction_output = st_fakegpio_direction_output;
+	fgpio->chip.get_direction = st_fakegpio_get_direction;
+	fgpio->chip.ngpio = fgpio->ctrl_reg_size * FGPIO_PER_BYTE;
+	fgpio->chip.can_sleep = 0;
+	fgpio->chip.dev	= &pdev->dev;
+	fgpio->chip.base = -1;
+	fgpio->chip.of_node = np;
+
+	/* Allocate direction */
+	cells = (fgpio->chip.ngpio / FGPIO_SINGLE_REG_SIZE) + 1;
+	fgpio->dir = devm_kzalloc(&pdev->dev, cells * sizeof(unsigned int),
+				  GFP_KERNEL);
+	if (!fgpio->dir)
+		return -ENOMEM;
+
+	ret = gpiochip_add(&fgpio->chip);
+	if (ret) {
+		dev_err(&pdev->dev, "unable to add gpiochip: %d\n", ret);
+		return ret;
+	}
+
+	platform_set_drvdata(pdev, fgpio);
+
+	return 0;
+}
+
+static int st_fakegpio_remove(struct platform_device *pdev)
+{
+	struct st_fakegpio *fgpio = platform_get_drvdata(pdev);
+	int ret;
+
+	ret = gpiochip_remove(&fgpio->chip);
+	if (ret < 0) {
+		dev_err(fgpio->chip.dev,
+			"unable to remove gpiochip: %d\n", ret);
+		return ret;
+	}
+
+	return 0;
+}
+
+static struct of_device_id st_fakegpio_match[] = {
+	{ .compatible = "st,fake-gpio", },
+	{},
+};
+MODULE_DEVICE_TABLE(of, st_fakegpio_match);
+
+static struct platform_driver st_fakegpio_driver = {
+	.driver = {
+		.name = "ST fake gpio",
+		.owner = THIS_MODULE,
+		.of_match_table = st_fakegpio_match,
+	},
+	.probe = st_fakegpio_probe,
+	.remove = st_fakegpio_remove,
+};
+
+module_platform_driver(st_fakegpio_driver);
+
+MODULE_AUTHOR("Seraphin Bonnaffe <seraphin.bonnaffe@st.com>");
+MODULE_DESCRIPTION("STMicroelectronics Fake GPIO driver");
+MODULE_LICENSE("GPL v2");
diff -urNp a/drivers/gpio/gpio-st-wakeup.c b/drivers/gpio/gpio-st-wakeup.c
--- a/drivers/gpio/gpio-st-wakeup.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/gpio/gpio-st-wakeup.c	2019-09-26 21:23:27.344619500 +0100
@@ -0,0 +1,288 @@
+/*
+ * Driver for GPIO lines capable of generating external interrupts.
+ *
+ * Copyright 2014 David Paris <david.paris@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include <linux/module.h>
+#include <linux/pm.h>
+#include <linux/of_platform.h>
+#include <linux/of_gpio.h>
+#include <linux/of_irq.h>
+#include <linux/power/st_lpm.h>
+
+#define ST_GPIO_PINS_PER_BANK	8
+
+struct st_wakeup_pins_drvdata {
+	struct st_wkpin_data *wkpins_data;
+	int nwkpins;
+};
+
+struct st_wkpin_data {
+	struct st_lpm_pio_setting pio_settings;
+	int irq;
+};
+
+static irqreturn_t st_gpio_wakeup_isr(int irq)
+{
+	return IRQ_HANDLED;
+}
+
+static int st_wakeup_get_devtree_child_data(struct device *dev,
+					    struct device_node *pp)
+{
+	struct st_wakeup_pins_drvdata *drvdata = dev_get_drvdata(dev);
+	struct st_lpm_pio_setting *pio_settings;
+	struct resource irq_res;
+	int *irq, error, gpio;
+	static int i;
+	u32 reg;
+	unsigned int gpio_flags;
+	u32 irq_flags = IRQF_NO_SUSPEND;
+
+	pio_settings = &drvdata->wkpins_data[i].pio_settings;
+	irq = &drvdata->wkpins_data[i++].irq;
+
+	if (of_property_read_u32(pp, "st,pio_use", &reg)) {
+		dev_err(dev, "Error with st,pio_use property\n");
+		return -ENODEV;
+	}
+
+	pio_settings->pio_use = reg;
+
+	/* In case of EXT_IT pio use, pio_pin is the number of the
+	 * ext_it line (0, 1 or 2)
+	 */
+	if (pio_settings->pio_use == ST_LPM_PIO_EXT_IT) {
+		if (of_property_read_u32(pp, "st,ext_it_num", &reg)) {
+			dev_err(dev, "st,ext_it_num to be defined (0 to 2)\n");
+			return -ENODEV;
+		}
+
+		pio_settings->pio_pin = reg;
+
+		*irq = of_irq_to_resource(pp, 0, &irq_res);
+		if (!*irq) {
+			dev_err(dev, "IRQ missing or invalid\n");
+			return -EINVAL;
+		}
+
+		irq_flags = irq_flags | (irq_res.flags & (~IORESOURCE_IRQ));
+	} else {
+		gpio = of_get_gpio(pp, 0);
+		if (gpio < 0) {
+			error = gpio;
+			if (error != -EPROBE_DEFER)
+				dev_err(dev, "Failed to get gpio, error: %d\n",
+					error);
+			return error;
+		}
+
+		pio_settings->pio_bank = gpio / ST_GPIO_PINS_PER_BANK;
+		pio_settings->pio_pin = gpio % ST_GPIO_PINS_PER_BANK;
+
+		if (of_property_read_u32(pp, "st,pio_dir", &reg)) {
+			dev_err(dev, "No st,pio_dir property\n");
+			return -ENODEV;
+		}
+
+		pio_settings->pio_direction = reg;
+
+		pio_settings->interrupt_enabled =
+			of_property_read_bool(pp, "st,int_enabled");
+
+		if (!pio_settings->interrupt_enabled) {
+			if (of_property_read_u32(pp, "st,pio_level", &reg)) {
+				dev_err(dev, "No st,pio_level property\n");
+				return -ENODEV;
+			}
+			pio_settings->pio_level = reg;
+
+			irq_flags = pio_settings->pio_level ?
+				IRQF_TRIGGER_HIGH : IRQF_TRIGGER_LOW;
+		}
+
+		if (!pio_settings->pio_direction == GPIOF_DIR_OUT)
+			gpio_flags = pio_settings->pio_level ?
+			GPIOF_OUT_INIT_HIGH : GPIOF_OUT_INIT_LOW;
+		else
+			gpio_flags = GPIOF_IN;
+
+		error = gpio_request_one(gpio, gpio_flags, "gpio-wakeup");
+		if (error < 0) {
+			dev_err(dev, "Failed to request GPIO %d, error %d\n",
+				gpio, error);
+			return error;
+		}
+
+		*irq = gpio_to_irq(gpio);
+		if (*irq < 0) {
+			error = *irq;
+			dev_err(dev, "Unable to get irq number for GPIO %d, error %d\n",
+				gpio, error);
+			return error;
+		}
+	}
+
+	error = request_any_context_irq(*irq, (irq_handler_t)st_gpio_wakeup_isr,
+					irq_flags, dev->kobj.name, NULL);
+	if (error < 0) {
+		dev_err(dev, "Unable to claim irq %d; error %d\n", *irq, error);
+		return error;
+	}
+
+	return 0;
+}
+
+static int st_wakeup_pins_get_devtree_drvdata(struct device *dev)
+{
+	struct device_node *node, *pp;
+	struct st_wakeup_pins_drvdata *drvdata = dev_get_drvdata(dev);
+	int nwkpins;
+
+	node = dev->of_node;
+	if (!node)
+		return -ENODEV;
+
+	nwkpins = of_get_child_count(node);
+	if (nwkpins == 0)
+		return -ENODEV;
+
+	drvdata->wkpins_data = devm_kzalloc(dev, nwkpins *
+			sizeof(struct st_wkpin_data), GFP_KERNEL);
+	if (!drvdata->wkpins_data)
+		return -ENOMEM;
+
+	if (pinctrl_pm_select_default_state(dev))
+		return -ENODEV;
+
+	for_each_child_of_node(node, pp)
+		st_wakeup_get_devtree_child_data(dev, pp);
+
+	drvdata->nwkpins = nwkpins;
+
+	return 0;
+}
+
+static int st_wakeup_pins_restore_pins_config(void *dev)
+{
+	struct st_wakeup_pins_drvdata *drvdata;
+	int i;
+
+	drvdata = dev_get_drvdata(dev);
+
+	for (i = 0; i < drvdata->nwkpins; i++)
+		st_lpm_setup_pio(&drvdata->wkpins_data[i].pio_settings);
+
+	return 0;
+}
+
+static struct of_device_id st_wakeup_pins_of_match[] = {
+	{ .compatible = "st,wakeup-pins", },
+	{ },
+};
+MODULE_DEVICE_TABLE(of, st_wakeup_pins_of_match);
+
+static int st_wakeup_pins_probe(struct platform_device *pdev)
+{
+	struct device *dev = &pdev->dev;
+	struct st_wakeup_pins_drvdata *drvdata;
+	int i, err = 0;
+
+	drvdata = devm_kzalloc(dev, sizeof(struct st_wakeup_pins_drvdata),
+			       GFP_KERNEL);
+
+	if (drvdata) {
+		platform_set_drvdata(pdev, drvdata);
+	} else {
+		dev_err(dev, "Error while requesting driver data memory\n");
+		return PTR_ERR(drvdata);
+	}
+
+	err = st_wakeup_pins_get_devtree_drvdata(dev);
+	if (err) {
+		dev_err(dev, "Error while getting DT data\n");
+		return err;
+	}
+
+	for (i = 0; i < drvdata->nwkpins; i++)
+		st_lpm_setup_pio(&drvdata->wkpins_data[i].pio_settings);
+
+	device_init_wakeup(&pdev->dev, true);
+
+	st_lpm_register_callback(ST_LPM_GPIO_WAKEUP,
+				 st_wakeup_pins_restore_pins_config,
+				 (void *)&pdev->dev);
+
+	return 0;
+}
+
+static int st_wakeup_pins_remove(struct platform_device *pdev)
+{
+	device_init_wakeup(&pdev->dev, false);
+
+	return 0;
+}
+
+#ifdef CONFIG_PM_SLEEP
+static int st_wakeup_pins_suspend(struct device *dev)
+{
+	struct st_wakeup_pins_drvdata *drvdata = dev_get_drvdata(dev);
+	int i;
+
+	for (i = 0; i < drvdata->nwkpins; i++)
+		enable_irq_wake(drvdata->wkpins_data[i].irq);
+
+	return 0;
+}
+
+static int st_wakeup_pins_resume(struct device *dev)
+{
+	struct st_wakeup_pins_drvdata *drvdata = dev_get_drvdata(dev);
+	int i;
+
+	for (i = 0; i < drvdata->nwkpins; i++)
+		disable_irq_wake(drvdata->wkpins_data[i].irq);
+
+	return 0;
+}
+
+static SIMPLE_DEV_PM_OPS(st_wakeup_pins_pm_ops, st_wakeup_pins_suspend,
+			 st_wakeup_pins_resume);
+#define DEV_PM_OPS	(&st_wakeup_pins_pm_ops)
+#else
+#define DEV_PM_OPS	NULL
+#endif
+
+static struct platform_driver st_wakeup_pins_device_driver = {
+	.probe		= st_wakeup_pins_probe,
+	.remove		= st_wakeup_pins_remove,
+	.driver		= {
+		.name	= "st-wakeup-pins",
+		.owner	= THIS_MODULE,
+		.pm	= DEV_PM_OPS,
+		.of_match_table = of_match_ptr(st_wakeup_pins_of_match),
+	}
+};
+
+static int __init st_wakeup_pins_init(void)
+{
+	return platform_driver_register(&st_wakeup_pins_device_driver);
+}
+
+static void __exit st_wakeup_pins_exit(void)
+{
+	platform_driver_unregister(&st_wakeup_pins_device_driver);
+}
+
+module_init(st_wakeup_pins_init);
+module_exit(st_wakeup_pins_exit);
+
+MODULE_LICENSE("GPL");
+MODULE_AUTHOR("David Paris <david.paris@st.com>");
+MODULE_DESCRIPTION("ST driver for wakeup pins");
+MODULE_ALIAS("platform:st-wakeup-pins");
diff -urNp a/drivers/gpio/gpiolib.c b/drivers/gpio/gpiolib.c
--- a/drivers/gpio/gpiolib.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/gpio/gpiolib.c	2019-10-04 08:38:48.896888600 +0100
@@ -322,32 +322,35 @@ static void gpiochip_irqchip_remove(stru
  *
  * A gpio_chip with any GPIOs still requested may not be removed.
  */
-void gpiochip_remove(struct gpio_chip *chip)
+int gpiochip_remove(struct gpio_chip *chip)
 {
 	unsigned long	flags;
+	int		status = 0;
 	unsigned	id;
 
 	gpiochip_unexport(chip);
 
-	gpiochip_irqchip_remove(chip);
+	spin_lock_irqsave(&gpio_lock, flags);
 
-	acpi_gpiochip_remove(chip);
 	gpiochip_remove_pin_ranges(chip);
 	of_gpiochip_remove(chip);
 
-	spin_lock_irqsave(&gpio_lock, flags);
 	for (id = 0; id < chip->ngpio; id++) {
-		if (test_bit(FLAG_REQUESTED, &chip->desc[id].flags))
-			dev_crit(chip->dev, "REMOVING GPIOCHIP WITH GPIOS STILL REQUESTED\n");
+		if (test_bit(FLAG_REQUESTED, &chip->desc[id].flags)) {
+			status = -EBUSY;
+			break;
+		}
+	}
+	if (status == 0) {
+		for (id = 0; id < chip->ngpio; id++)
+			chip->desc[id].chip = NULL;
+
+		list_del(&chip->list);
 	}
-	for (id = 0; id < chip->ngpio; id++)
-		chip->desc[id].chip = NULL;
 
-	list_del(&chip->list);
 	spin_unlock_irqrestore(&gpio_lock, flags);
 
-	kfree(chip->desc);
-	chip->desc = NULL;
+	return status;
 }
 EXPORT_SYMBOL_GPL(gpiochip_remove);
 
diff -urNp a/drivers/lpm/.built-in.o.cmd b/drivers/lpm/.built-in.o.cmd
--- a/drivers/lpm/.built-in.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/lpm/.built-in.o.cmd	2019-09-26 21:30:38.742135800 +0100
@@ -0,0 +1 @@
+cmd_drivers/lpm/built-in.o :=  /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-ld -EL    -r -o drivers/lpm/built-in.o drivers/lpm/st_lpm_mb.o drivers/lpm/st_lpm_com.o ; scripts/mod/modpost drivers/lpm/built-in.o
diff -urNp a/drivers/lpm/.st_lpm_com.o.cmd b/drivers/lpm/.st_lpm_com.o.cmd
--- a/drivers/lpm/.st_lpm_com.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/lpm/.st_lpm_com.o.cmd	2019-09-26 21:30:38.722135700 +0100
@@ -0,0 +1,566 @@
+cmd_drivers/lpm/st_lpm_com.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,drivers/lpm/.st_lpm_com.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(st_lpm_com)"  -D"KBUILD_MODNAME=KBUILD_STR(st_lpm_com)" -c -o drivers/lpm/st_lpm_com.o drivers/lpm/st_lpm_com.c
+
+source_drivers/lpm/st_lpm_com.o := drivers/lpm/st_lpm_com.c
+
+deps_drivers/lpm/st_lpm_com.o := \
+    $(wildcard include/config/cec/wu/reason.h) \
+  include/linux/module.h \
+    $(wildcard include/config/sysfs.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/unused/symbols.h) \
+    $(wildcard include/config/module/sig.h) \
+    $(wildcard include/config/generic/bug.h) \
+    $(wildcard include/config/kallsyms.h) \
+    $(wildcard include/config/smp.h) \
+    $(wildcard include/config/tracepoints.h) \
+    $(wildcard include/config/tracing.h) \
+    $(wildcard include/config/event/tracing.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+    $(wildcard include/config/module/unload.h) \
+    $(wildcard include/config/constructors.h) \
+    $(wildcard include/config/debug/set/module/ronx.h) \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  include/linux/stat.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/stat.h \
+  include/uapi/linux/stat.h \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  include/linux/kernel.h \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/ring/buffer.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modversions.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+  include/linux/irqflags.h \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  include/linux/typecheck.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+    $(wildcard include/config/arm/lpae.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/seqlock.h \
+  include/linux/spinlock.h \
+    $(wildcard include/config/debug/spinlock.h) \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/preempt.h) \
+    $(wildcard include/config/debug/lock/alloc.h) \
+  include/linux/preempt.h \
+    $(wildcard include/config/debug/preempt.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  include/linux/bug.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+    $(wildcard include/config/outer/cache.h) \
+  include/linux/bottom_half.h \
+  include/linux/spinlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/rwlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/sa110.h) \
+    $(wildcard include/config/cpu/v6.h) \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/uidgid.h \
+    $(wildcard include/config/uidgid/strict/type/checks.h) \
+    $(wildcard include/config/user/ns.h) \
+  include/linux/highuid.h \
+  include/linux/kmod.h \
+  include/linux/gfp.h \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/zone/dma32.h) \
+    $(wildcard include/config/pm/sleep.h) \
+    $(wildcard include/config/cma.h) \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/compaction.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/sparsemem.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/linux/nodemask.h \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/bitmap.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/page-flags-layout.h \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+  include/generated/bounds.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+  include/asm-generic/getorder.h \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/memory/hotremove.h) \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/notifier.h \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/hotplug/cpu.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/cpumask.h \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/completion.h \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/rcutree.h \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  include/linux/mmdebug.h \
+    $(wildcard include/config/debug/vm.h) \
+    $(wildcard include/config/debug/virtual.h) \
+  include/linux/sysctl.h \
+    $(wildcard include/config/sysctl.h) \
+  include/linux/rbtree.h \
+  include/uapi/linux/sysctl.h \
+  include/linux/elf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/elf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/user.h \
+  include/uapi/linux/elf.h \
+    $(wildcard include/config/st/elf/extensions.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/elf-em.h \
+  include/linux/kobject.h \
+  include/linux/sysfs.h \
+  include/linux/kobject_ns.h \
+  include/linux/kref.h \
+  include/linux/moduleparam.h \
+    $(wildcard include/config/alpha.h) \
+    $(wildcard include/config/ia64.h) \
+    $(wildcard include/config/ppc64.h) \
+  include/linux/tracepoint.h \
+  include/linux/static_key.h \
+  include/linux/jump_label.h \
+    $(wildcard include/config/jump/label.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/module.h \
+    $(wildcard include/config/arm/unwind.h) \
+  include/asm-generic/module.h \
+    $(wildcard include/config/have/mod/arch/specific.h) \
+    $(wildcard include/config/modules/use/elf/rel.h) \
+    $(wildcard include/config/modules/use/elf/rela.h) \
+  include/linux/slab.h \
+    $(wildcard include/config/slab/debug.h) \
+    $(wildcard include/config/kmemcheck.h) \
+    $(wildcard include/config/failslab.h) \
+    $(wildcard include/config/slob.h) \
+    $(wildcard include/config/slab.h) \
+    $(wildcard include/config/slub.h) \
+    $(wildcard include/config/debug/slab.h) \
+  include/linux/slub_def.h \
+    $(wildcard include/config/slub/stats.h) \
+    $(wildcard include/config/memcg/kmem.h) \
+    $(wildcard include/config/slub/debug.h) \
+  include/linux/kmemleak.h \
+    $(wildcard include/config/debug/kmemleak.h) \
+  arch/arm/include/generated/asm/unaligned.h \
+  include/asm-generic/unaligned.h \
+  include/linux/unaligned/le_struct.h \
+  include/linux/unaligned/packed_struct.h \
+  include/linux/unaligned/be_byteshift.h \
+  include/linux/unaligned/generic.h \
+  include/linux/delay.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/delay.h \
+  include/linux/power/st_lpm.h \
+    $(wildcard include/config/cec/wu/custom/msg.h) \
+    $(wildcard include/config/cec/version.h) \
+    $(wildcard include/config/cec/device/vendor/id.h) \
+    $(wildcard include/config/st/lpm.h) \
+  include/linux/rtc.h \
+    $(wildcard include/config/rtc/intf/dev/uie/emul.h) \
+    $(wildcard include/config/rtc/hctosys/device.h) \
+  include/linux/interrupt.h \
+    $(wildcard include/config/generic/hardirqs.h) \
+    $(wildcard include/config/irq/forced/threading.h) \
+    $(wildcard include/config/generic/irq/probe.h) \
+    $(wildcard include/config/proc/fs.h) \
+  include/linux/irqreturn.h \
+  include/linux/irqnr.h \
+  include/uapi/linux/irqnr.h \
+  include/linux/hardirq.h \
+  include/linux/ftrace_irq.h \
+    $(wildcard include/config/ftrace/nmi/enter.h) \
+  include/linux/vtime.h \
+    $(wildcard include/config/virt/cpu/accounting.h) \
+    $(wildcard include/config/virt/cpu/accounting/native.h) \
+    $(wildcard include/config/virt/cpu/accounting/gen.h) \
+    $(wildcard include/config/irq/time/accounting.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hardirq.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irq.h \
+    $(wildcard include/config/sparse/irq.h) \
+    $(wildcard include/config/multi/irq/handler.h) \
+  include/linux/irq_cpustat.h \
+  include/linux/hrtimer.h \
+    $(wildcard include/config/high/res/timers.h) \
+    $(wildcard include/config/timerfd.h) \
+  include/linux/timerqueue.h \
+  include/uapi/linux/rtc.h \
+  include/linux/device.h \
+    $(wildcard include/config/debug/devres.h) \
+    $(wildcard include/config/acpi.h) \
+    $(wildcard include/config/pinctrl.h) \
+    $(wildcard include/config/devtmpfs.h) \
+    $(wildcard include/config/sysfs/deprecated.h) \
+  include/linux/ioport.h \
+  include/linux/klist.h \
+  include/linux/pinctrl/devinfo.h \
+    $(wildcard include/config/pm.h) \
+  include/linux/pinctrl/consumer.h \
+    $(wildcard include/config/pinconf.h) \
+  include/linux/err.h \
+  include/linux/seq_file.h \
+  include/linux/pinctrl/pinctrl-state.h \
+  include/linux/pm.h \
+    $(wildcard include/config/vt/console/sleep.h) \
+    $(wildcard include/config/pm/runtime.h) \
+    $(wildcard include/config/pm/clk.h) \
+    $(wildcard include/config/pm/generic/domains.h) \
+  include/linux/ratelimit.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/device.h \
+    $(wildcard include/config/dmabounce.h) \
+    $(wildcard include/config/iommu/api.h) \
+    $(wildcard include/config/arm/dma/use/iommu.h) \
+    $(wildcard include/config/arch/omap.h) \
+  include/linux/pm_wakeup.h \
+  include/linux/cdev.h \
+  include/linux/kdev_t.h \
+  include/uapi/linux/kdev_t.h \
+  include/linux/poll.h \
+  include/linux/fs.h \
+    $(wildcard include/config/fs/posix/acl.h) \
+    $(wildcard include/config/security.h) \
+    $(wildcard include/config/quota.h) \
+    $(wildcard include/config/fsnotify.h) \
+    $(wildcard include/config/ima.h) \
+    $(wildcard include/config/epoll.h) \
+    $(wildcard include/config/debug/writecount.h) \
+    $(wildcard include/config/file/locking.h) \
+    $(wildcard include/config/auditsyscall.h) \
+    $(wildcard include/config/block.h) \
+    $(wildcard include/config/fs/xip.h) \
+    $(wildcard include/config/migration.h) \
+  include/linux/dcache.h \
+  include/linux/rculist.h \
+  include/linux/rculist_bl.h \
+  include/linux/list_bl.h \
+  include/linux/bit_spinlock.h \
+  include/linux/path.h \
+  include/linux/llist.h \
+    $(wildcard include/config/arch/have/nmi/safe/cmpxchg.h) \
+  include/linux/radix-tree.h \
+  include/linux/pid.h \
+  include/linux/capability.h \
+  include/uapi/linux/capability.h \
+  include/linux/semaphore.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/fiemap.h \
+  include/linux/shrinker.h \
+  include/linux/migrate_mode.h \
+  include/linux/percpu-rwsem.h \
+  include/linux/blk_types.h \
+    $(wildcard include/config/blk/cgroup.h) \
+    $(wildcard include/config/blk/dev/integrity.h) \
+  include/uapi/linux/fs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/limits.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/ioctl.h \
+  arch/arm/include/generated/asm/ioctl.h \
+  include/asm-generic/ioctl.h \
+  include/uapi/asm-generic/ioctl.h \
+  include/linux/quota.h \
+    $(wildcard include/config/quota/netlink/interface.h) \
+  include/linux/percpu_counter.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/dqblk_xfs.h \
+  include/linux/dqblk_v1.h \
+  include/linux/dqblk_v2.h \
+  include/linux/dqblk_qtree.h \
+  include/linux/projid.h \
+  include/uapi/linux/quota.h \
+  include/linux/nfs_fs_i.h \
+  include/linux/fcntl.h \
+  include/uapi/linux/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/uaccess.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/unified.h \
+    $(wildcard include/config/arm/asm/unified.h) \
+  include/uapi/linux/poll.h \
+  arch/arm/include/generated/asm/poll.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/poll.h \
+  include/linux/power/st_lpm_def.h \
+    $(wildcard include/config/1/offset.h) \
+  include/linux/power/st_lpm_def.h \
+
+drivers/lpm/st_lpm_com.o: $(deps_drivers/lpm/st_lpm_com.o)
+
+$(deps_drivers/lpm/st_lpm_com.o):
diff -urNp a/drivers/lpm/.st_lpm_mb.o.cmd b/drivers/lpm/.st_lpm_mb.o.cmd
--- a/drivers/lpm/.st_lpm_mb.o.cmd	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/lpm/.st_lpm_mb.o.cmd	2019-09-26 21:30:37.862131400 +0100
@@ -0,0 +1,720 @@
+cmd_drivers/lpm/st_lpm_mb.o := /starkl/outputs/starkl-b2264-default/buildroot/host/usr/bin/arm-linux-gcc -Wp,-MD,drivers/lpm/.st_lpm_mb.o.d  -nostdinc -isystem /starkl/toolchain/usr/bin/../lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include -Iarch/arm/include/generated  -Iinclude -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi -Iarch/arm/include/generated/uapi -I/starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi -Iinclude/generated/uapi -include /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/linux/kconfig.h -D__KERNEL__ -mlittle-endian -Iarch/arm/mach-sti/include -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -O2 -fno-dwarf2-cfi-asm -fno-omit-frame-pointer -mapcs -mno-sched-prolog -fstack-protector -fno-ipa-sra -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables -marm -D__LINUX_ARM_ARCH__=7 -march=armv7-a -msoft-float -Uarm -Wframe-larger-than=2048 -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -fno-var-tracking-assignments -g -pg -fno-ipa-cp -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO    -D"KBUILD_STR(s)=\#s" -D"KBUILD_BASENAME=KBUILD_STR(st_lpm_mb)"  -D"KBUILD_MODNAME=KBUILD_STR(st_lpm_mb)" -c -o drivers/lpm/st_lpm_mb.o drivers/lpm/st_lpm_mb.c
+
+source_drivers/lpm/st_lpm_mb.o := drivers/lpm/st_lpm_mb.c
+
+deps_drivers/lpm/st_lpm_mb.o := \
+    $(wildcard include/config/offset.h) \
+    $(wildcard include/config/general/sbc/traces.h) \
+    $(wildcard include/config/1/offset.h) \
+    $(wildcard include/config/sbc/fw/loaded/by/pbl.h) \
+    $(wildcard include/config/debug/fs.h) \
+    $(wildcard include/config/pm/sleep.h) \
+  include/linux/platform_device.h \
+    $(wildcard include/config/suspend.h) \
+    $(wildcard include/config/hibernate/callbacks.h) \
+  include/linux/device.h \
+    $(wildcard include/config/debug/devres.h) \
+    $(wildcard include/config/acpi.h) \
+    $(wildcard include/config/pinctrl.h) \
+    $(wildcard include/config/numa.h) \
+    $(wildcard include/config/cma.h) \
+    $(wildcard include/config/devtmpfs.h) \
+    $(wildcard include/config/printk.h) \
+    $(wildcard include/config/dynamic/debug.h) \
+    $(wildcard include/config/sysfs/deprecated.h) \
+  include/linux/ioport.h \
+    $(wildcard include/config/memory/hotremove.h) \
+  include/linux/compiler.h \
+    $(wildcard include/config/sparse/rcu/pointer.h) \
+    $(wildcard include/config/trace/branch/profiling.h) \
+    $(wildcard include/config/profile/all/branches.h) \
+    $(wildcard include/config/enable/must/check.h) \
+    $(wildcard include/config/enable/warn/deprecated.h) \
+    $(wildcard include/config/kprobes.h) \
+  include/linux/compiler-gcc.h \
+    $(wildcard include/config/arch/supports/optimized/inlining.h) \
+    $(wildcard include/config/optimize/inlining.h) \
+  include/linux/compiler-gcc4.h \
+    $(wildcard include/config/arch/use/builtin/bswap.h) \
+  include/linux/types.h \
+    $(wildcard include/config/uid16.h) \
+    $(wildcard include/config/lbdaf.h) \
+    $(wildcard include/config/arch/dma/addr/t/64bit.h) \
+    $(wildcard include/config/phys/addr/t/64bit.h) \
+    $(wildcard include/config/64bit.h) \
+  include/uapi/linux/types.h \
+  arch/arm/include/generated/asm/types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/types.h \
+  include/asm-generic/int-ll64.h \
+  include/uapi/asm-generic/int-ll64.h \
+  arch/arm/include/generated/asm/bitsperlong.h \
+  include/asm-generic/bitsperlong.h \
+  include/uapi/asm-generic/bitsperlong.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/posix_types.h \
+  include/linux/stddef.h \
+  include/uapi/linux/stddef.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/posix_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/posix_types.h \
+  include/linux/kobject.h \
+  include/linux/list.h \
+    $(wildcard include/config/debug/list.h) \
+  include/linux/poison.h \
+    $(wildcard include/config/illegal/pointer/value.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/const.h \
+  include/linux/sysfs.h \
+    $(wildcard include/config/debug/lock/alloc.h) \
+    $(wildcard include/config/sysfs.h) \
+  include/linux/errno.h \
+  include/uapi/linux/errno.h \
+  arch/arm/include/generated/asm/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/errno-base.h \
+  include/linux/lockdep.h \
+    $(wildcard include/config/lockdep.h) \
+    $(wildcard include/config/lock/stat.h) \
+    $(wildcard include/config/trace/irqflags.h) \
+    $(wildcard include/config/prove/locking.h) \
+    $(wildcard include/config/prove/rcu.h) \
+  include/linux/kobject_ns.h \
+  include/linux/atomic.h \
+    $(wildcard include/config/arch/has/atomic/or.h) \
+    $(wildcard include/config/generic/atomic64.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/atomic.h \
+    $(wildcard include/config/smp.h) \
+    $(wildcard include/config/arm/lpae.h) \
+  include/linux/irqflags.h \
+    $(wildcard include/config/irqsoff/tracer.h) \
+    $(wildcard include/config/preempt/tracer.h) \
+    $(wildcard include/config/trace/irqflags/support.h) \
+  include/linux/typecheck.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irqflags.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/ptrace.h \
+    $(wildcard include/config/arm/thumb.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/ptrace.h \
+    $(wildcard include/config/cpu/endian/be8.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/hwcap.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/barrier.h \
+    $(wildcard include/config/cpu/32v6k.h) \
+    $(wildcard include/config/cpu/xsc3.h) \
+    $(wildcard include/config/cpu/fa526.h) \
+    $(wildcard include/config/arch/has/barriers.h) \
+    $(wildcard include/config/arm/dma/mem/bufferable.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/outercache.h \
+    $(wildcard include/config/outer/cache/sync.h) \
+    $(wildcard include/config/outer/cache.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cmpxchg.h \
+    $(wildcard include/config/cpu/sa1100.h) \
+    $(wildcard include/config/cpu/sa110.h) \
+    $(wildcard include/config/cpu/v6.h) \
+  include/asm-generic/cmpxchg-local.h \
+  include/asm-generic/atomic-long.h \
+  include/linux/stat.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/stat.h \
+  include/uapi/linux/stat.h \
+  include/linux/time.h \
+    $(wildcard include/config/arch/uses/gettimeoffset.h) \
+  include/linux/cache.h \
+    $(wildcard include/config/arch/has/cache/line/size.h) \
+  include/linux/kernel.h \
+    $(wildcard include/config/preempt/voluntary.h) \
+    $(wildcard include/config/debug/atomic/sleep.h) \
+    $(wildcard include/config/ring/buffer.h) \
+    $(wildcard include/config/tracing.h) \
+    $(wildcard include/config/ftrace/mcount/record.h) \
+  /starkl/toolchain/usr/lib/gcc/arm-starkl-linux-gnueabihf/4.9.4/include/stdarg.h \
+  include/linux/linkage.h \
+  include/linux/stringify.h \
+  include/linux/export.h \
+    $(wildcard include/config/have/underscore/symbol/prefix.h) \
+    $(wildcard include/config/modules.h) \
+    $(wildcard include/config/modversions.h) \
+    $(wildcard include/config/unused/symbols.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/linkage.h \
+  include/linux/bitops.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bitops.h \
+  include/asm-generic/bitops/non-atomic.h \
+  include/asm-generic/bitops/fls64.h \
+  include/asm-generic/bitops/sched.h \
+  include/asm-generic/bitops/hweight.h \
+  include/asm-generic/bitops/arch_hweight.h \
+  include/asm-generic/bitops/const_hweight.h \
+  include/asm-generic/bitops/lock.h \
+  include/asm-generic/bitops/le.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/byteorder.h \
+  include/linux/byteorder/little_endian.h \
+  include/uapi/linux/byteorder/little_endian.h \
+  include/linux/swab.h \
+  include/uapi/linux/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/swab.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/swab.h \
+  include/linux/byteorder/generic.h \
+  include/asm-generic/bitops/ext2-atomic-setbit.h \
+  include/linux/log2.h \
+    $(wildcard include/config/arch/has/ilog2/u32.h) \
+    $(wildcard include/config/arch/has/ilog2/u64.h) \
+  include/linux/printk.h \
+    $(wildcard include/config/early/printk.h) \
+  include/linux/init.h \
+    $(wildcard include/config/broken/rodata.h) \
+  include/linux/kern_levels.h \
+  include/linux/dynamic_debug.h \
+  include/uapi/linux/kernel.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/sysinfo.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/div64.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/compiler.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/bug.h \
+    $(wildcard include/config/bug.h) \
+    $(wildcard include/config/thumb2/kernel.h) \
+    $(wildcard include/config/debug/bugverbose.h) \
+    $(wildcard include/config/arch/sti.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/opcodes.h \
+    $(wildcard include/config/cpu/endian/be32.h) \
+  include/asm-generic/bug.h \
+    $(wildcard include/config/generic/bug.h) \
+    $(wildcard include/config/generic/bug/relative/pointers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/cache.h \
+    $(wildcard include/config/arm/l1/cache/shift.h) \
+    $(wildcard include/config/aeabi.h) \
+  include/linux/seqlock.h \
+  include/linux/spinlock.h \
+    $(wildcard include/config/debug/spinlock.h) \
+    $(wildcard include/config/generic/lockbreak.h) \
+    $(wildcard include/config/preempt.h) \
+  include/linux/preempt.h \
+    $(wildcard include/config/debug/preempt.h) \
+    $(wildcard include/config/context/tracking.h) \
+    $(wildcard include/config/preempt/count.h) \
+    $(wildcard include/config/preempt/notifiers.h) \
+  include/linux/thread_info.h \
+    $(wildcard include/config/compat.h) \
+    $(wildcard include/config/debug/stack/usage.h) \
+  include/linux/bug.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/thread_info.h \
+    $(wildcard include/config/crunch.h) \
+    $(wildcard include/config/arm/thumbee.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/fpstate.h \
+    $(wildcard include/config/vfpv3.h) \
+    $(wildcard include/config/iwmmxt.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/domain.h \
+    $(wildcard include/config/io/36.h) \
+    $(wildcard include/config/cpu/use/domains.h) \
+  include/linux/bottom_half.h \
+  include/linux/spinlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock_types.h \
+  include/linux/rwlock_types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/spinlock.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/processor.h \
+    $(wildcard include/config/have/hw/breakpoint.h) \
+    $(wildcard include/config/mmu.h) \
+    $(wildcard include/config/arm/errata/754327.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hw_breakpoint.h \
+  include/linux/rwlock.h \
+  include/linux/spinlock_api_smp.h \
+    $(wildcard include/config/inline/spin/lock.h) \
+    $(wildcard include/config/inline/spin/lock/bh.h) \
+    $(wildcard include/config/inline/spin/lock/irq.h) \
+    $(wildcard include/config/inline/spin/lock/irqsave.h) \
+    $(wildcard include/config/inline/spin/trylock.h) \
+    $(wildcard include/config/inline/spin/trylock/bh.h) \
+    $(wildcard include/config/uninline/spin/unlock.h) \
+    $(wildcard include/config/inline/spin/unlock/bh.h) \
+    $(wildcard include/config/inline/spin/unlock/irq.h) \
+    $(wildcard include/config/inline/spin/unlock/irqrestore.h) \
+  include/linux/rwlock_api_smp.h \
+    $(wildcard include/config/inline/read/lock.h) \
+    $(wildcard include/config/inline/write/lock.h) \
+    $(wildcard include/config/inline/read/lock/bh.h) \
+    $(wildcard include/config/inline/write/lock/bh.h) \
+    $(wildcard include/config/inline/read/lock/irq.h) \
+    $(wildcard include/config/inline/write/lock/irq.h) \
+    $(wildcard include/config/inline/read/lock/irqsave.h) \
+    $(wildcard include/config/inline/write/lock/irqsave.h) \
+    $(wildcard include/config/inline/read/trylock.h) \
+    $(wildcard include/config/inline/write/trylock.h) \
+    $(wildcard include/config/inline/read/unlock.h) \
+    $(wildcard include/config/inline/write/unlock.h) \
+    $(wildcard include/config/inline/read/unlock/bh.h) \
+    $(wildcard include/config/inline/write/unlock/bh.h) \
+    $(wildcard include/config/inline/read/unlock/irq.h) \
+    $(wildcard include/config/inline/write/unlock/irq.h) \
+    $(wildcard include/config/inline/read/unlock/irqrestore.h) \
+    $(wildcard include/config/inline/write/unlock/irqrestore.h) \
+  include/linux/math64.h \
+  include/uapi/linux/time.h \
+  include/linux/uidgid.h \
+    $(wildcard include/config/uidgid/strict/type/checks.h) \
+    $(wildcard include/config/user/ns.h) \
+  include/linux/highuid.h \
+  include/linux/kref.h \
+  include/linux/mutex.h \
+    $(wildcard include/config/debug/mutexes.h) \
+    $(wildcard include/config/mutex/spin/on/owner.h) \
+    $(wildcard include/config/have/arch/mutex/cpu/relax.h) \
+  include/linux/wait.h \
+  arch/arm/include/generated/asm/current.h \
+  include/asm-generic/current.h \
+  include/uapi/linux/wait.h \
+  include/linux/klist.h \
+  include/linux/pinctrl/devinfo.h \
+    $(wildcard include/config/pm.h) \
+  include/linux/pinctrl/consumer.h \
+    $(wildcard include/config/pinconf.h) \
+  include/linux/err.h \
+  include/linux/seq_file.h \
+  include/linux/string.h \
+    $(wildcard include/config/binary/printf.h) \
+  include/uapi/linux/string.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/string.h \
+  include/linux/cpumask.h \
+    $(wildcard include/config/cpumask/offstack.h) \
+    $(wildcard include/config/hotplug/cpu.h) \
+    $(wildcard include/config/debug/per/cpu/maps.h) \
+    $(wildcard include/config/disable/obsolete/cpumask/functions.h) \
+  include/linux/threads.h \
+    $(wildcard include/config/nr/cpus.h) \
+    $(wildcard include/config/base/small.h) \
+  include/linux/bitmap.h \
+  include/linux/nodemask.h \
+    $(wildcard include/config/highmem.h) \
+    $(wildcard include/config/movable/node.h) \
+  include/linux/numa.h \
+    $(wildcard include/config/nodes/shift.h) \
+  include/linux/pinctrl/pinctrl-state.h \
+  include/linux/pm.h \
+    $(wildcard include/config/vt/console/sleep.h) \
+    $(wildcard include/config/pm/runtime.h) \
+    $(wildcard include/config/pm/clk.h) \
+    $(wildcard include/config/pm/generic/domains.h) \
+  include/linux/workqueue.h \
+    $(wildcard include/config/debug/objects/work.h) \
+    $(wildcard include/config/freezer.h) \
+  include/linux/timer.h \
+    $(wildcard include/config/timer/stats.h) \
+    $(wildcard include/config/debug/objects/timers.h) \
+  include/linux/ktime.h \
+    $(wildcard include/config/ktime/scalar.h) \
+  include/linux/jiffies.h \
+  include/linux/timex.h \
+  include/uapi/linux/timex.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/param.h \
+  arch/arm/include/generated/asm/param.h \
+  include/asm-generic/param.h \
+    $(wildcard include/config/hz.h) \
+  include/uapi/asm-generic/param.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/timex.h \
+    $(wildcard include/config/arch/multiplatform.h) \
+  include/linux/debugobjects.h \
+    $(wildcard include/config/debug/objects.h) \
+    $(wildcard include/config/debug/objects/free.h) \
+  include/linux/completion.h \
+  include/linux/ratelimit.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/device.h \
+    $(wildcard include/config/dmabounce.h) \
+    $(wildcard include/config/iommu/api.h) \
+    $(wildcard include/config/arm/dma/use/iommu.h) \
+    $(wildcard include/config/arch/omap.h) \
+  include/linux/pm_wakeup.h \
+  include/linux/mod_devicetable.h \
+  include/linux/uuid.h \
+  include/uapi/linux/uuid.h \
+  include/linux/module.h \
+    $(wildcard include/config/module/sig.h) \
+    $(wildcard include/config/kallsyms.h) \
+    $(wildcard include/config/tracepoints.h) \
+    $(wildcard include/config/event/tracing.h) \
+    $(wildcard include/config/module/unload.h) \
+    $(wildcard include/config/constructors.h) \
+    $(wildcard include/config/debug/set/module/ronx.h) \
+  include/linux/kmod.h \
+  include/linux/gfp.h \
+    $(wildcard include/config/zone/dma.h) \
+    $(wildcard include/config/zone/dma32.h) \
+  include/linux/mmzone.h \
+    $(wildcard include/config/force/max/zoneorder.h) \
+    $(wildcard include/config/memory/isolation.h) \
+    $(wildcard include/config/memcg.h) \
+    $(wildcard include/config/compaction.h) \
+    $(wildcard include/config/memory/hotplug.h) \
+    $(wildcard include/config/sparsemem.h) \
+    $(wildcard include/config/have/memblock/node/map.h) \
+    $(wildcard include/config/discontigmem.h) \
+    $(wildcard include/config/flat/node/mem/map.h) \
+    $(wildcard include/config/no/bootmem.h) \
+    $(wildcard include/config/numa/balancing.h) \
+    $(wildcard include/config/have/memory/present.h) \
+    $(wildcard include/config/have/memoryless/nodes.h) \
+    $(wildcard include/config/need/node/memmap/size.h) \
+    $(wildcard include/config/need/multiple/nodes.h) \
+    $(wildcard include/config/have/arch/early/pfn/to/nid.h) \
+    $(wildcard include/config/flatmem.h) \
+    $(wildcard include/config/sparsemem/extreme.h) \
+    $(wildcard include/config/have/arch/pfn/valid.h) \
+    $(wildcard include/config/nodes/span/other/nodes.h) \
+    $(wildcard include/config/holes/in/zone.h) \
+    $(wildcard include/config/arch/has/holes/memorymodel.h) \
+  include/linux/pageblock-flags.h \
+    $(wildcard include/config/hugetlb/page.h) \
+    $(wildcard include/config/hugetlb/page/size/variable.h) \
+  include/linux/page-flags-layout.h \
+    $(wildcard include/config/sparsemem/vmemmap.h) \
+  include/generated/bounds.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/page.h \
+    $(wildcard include/config/cpu/copy/v4wt.h) \
+    $(wildcard include/config/cpu/copy/v4wb.h) \
+    $(wildcard include/config/cpu/copy/feroceon.h) \
+    $(wildcard include/config/cpu/copy/fa.h) \
+    $(wildcard include/config/cpu/xscale.h) \
+    $(wildcard include/config/cpu/copy/v6.h) \
+    $(wildcard include/config/kuser/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/glue.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/pgtable-2level-types.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/memory.h \
+    $(wildcard include/config/need/mach/memory/h.h) \
+    $(wildcard include/config/page/offset.h) \
+    $(wildcard include/config/dram/size.h) \
+    $(wildcard include/config/dram/base.h) \
+    $(wildcard include/config/have/tcm.h) \
+    $(wildcard include/config/phys/offset.h) \
+    $(wildcard include/config/arm/patch/phys/virt.h) \
+    $(wildcard include/config/virt/to/bus.h) \
+  include/linux/sizes.h \
+  include/asm-generic/memory_model.h \
+  include/asm-generic/getorder.h \
+  include/linux/memory_hotplug.h \
+    $(wildcard include/config/have/arch/nodedata/extension.h) \
+    $(wildcard include/config/have/bootmem/info/node.h) \
+  include/linux/notifier.h \
+  include/linux/rwsem.h \
+    $(wildcard include/config/rwsem/generic/spinlock.h) \
+  include/linux/rwsem-spinlock.h \
+  include/linux/srcu.h \
+  include/linux/rcupdate.h \
+    $(wildcard include/config/rcu/torture/test.h) \
+    $(wildcard include/config/tree/rcu.h) \
+    $(wildcard include/config/tree/preempt/rcu.h) \
+    $(wildcard include/config/rcu/trace.h) \
+    $(wildcard include/config/preempt/rcu.h) \
+    $(wildcard include/config/rcu/user/qs.h) \
+    $(wildcard include/config/tiny/rcu.h) \
+    $(wildcard include/config/tiny/preempt/rcu.h) \
+    $(wildcard include/config/debug/objects/rcu/head.h) \
+    $(wildcard include/config/rcu/nocb/cpu.h) \
+  include/linux/rcutree.h \
+  include/linux/topology.h \
+    $(wildcard include/config/sched/smt.h) \
+    $(wildcard include/config/sched/mc.h) \
+    $(wildcard include/config/sched/book.h) \
+    $(wildcard include/config/use/percpu/numa/node/id.h) \
+  include/linux/smp.h \
+    $(wildcard include/config/use/generic/smp/helpers.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/smp.h \
+  include/linux/percpu.h \
+    $(wildcard include/config/need/per/cpu/embed/first/chunk.h) \
+    $(wildcard include/config/need/per/cpu/page/first/chunk.h) \
+    $(wildcard include/config/have/setup/per/cpu/area.h) \
+  include/linux/pfn.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/percpu.h \
+  include/asm-generic/percpu.h \
+  include/linux/percpu-defs.h \
+    $(wildcard include/config/debug/force/weak/per/cpu.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/topology.h \
+    $(wildcard include/config/arm/cpu/topology.h) \
+  include/asm-generic/topology.h \
+  include/linux/mmdebug.h \
+    $(wildcard include/config/debug/vm.h) \
+    $(wildcard include/config/debug/virtual.h) \
+  include/linux/sysctl.h \
+    $(wildcard include/config/sysctl.h) \
+  include/linux/rbtree.h \
+  include/uapi/linux/sysctl.h \
+  include/linux/elf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/elf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/user.h \
+  include/uapi/linux/elf.h \
+    $(wildcard include/config/st/elf/extensions.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/elf-em.h \
+  include/linux/moduleparam.h \
+    $(wildcard include/config/alpha.h) \
+    $(wildcard include/config/ia64.h) \
+    $(wildcard include/config/ppc64.h) \
+  include/linux/tracepoint.h \
+  include/linux/static_key.h \
+  include/linux/jump_label.h \
+    $(wildcard include/config/jump/label.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/module.h \
+    $(wildcard include/config/arm/unwind.h) \
+  include/asm-generic/module.h \
+    $(wildcard include/config/have/mod/arch/specific.h) \
+    $(wildcard include/config/modules/use/elf/rel.h) \
+    $(wildcard include/config/modules/use/elf/rela.h) \
+  include/linux/interrupt.h \
+    $(wildcard include/config/generic/hardirqs.h) \
+    $(wildcard include/config/irq/forced/threading.h) \
+    $(wildcard include/config/generic/irq/probe.h) \
+    $(wildcard include/config/proc/fs.h) \
+  include/linux/irqreturn.h \
+  include/linux/irqnr.h \
+  include/uapi/linux/irqnr.h \
+  include/linux/hardirq.h \
+  include/linux/ftrace_irq.h \
+    $(wildcard include/config/ftrace/nmi/enter.h) \
+  include/linux/vtime.h \
+    $(wildcard include/config/virt/cpu/accounting.h) \
+    $(wildcard include/config/virt/cpu/accounting/native.h) \
+    $(wildcard include/config/virt/cpu/accounting/gen.h) \
+    $(wildcard include/config/irq/time/accounting.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/hardirq.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/irq.h \
+    $(wildcard include/config/sparse/irq.h) \
+    $(wildcard include/config/multi/irq/handler.h) \
+  include/linux/irq_cpustat.h \
+  include/linux/hrtimer.h \
+    $(wildcard include/config/high/res/timers.h) \
+    $(wildcard include/config/timerfd.h) \
+  include/linux/timerqueue.h \
+  include/linux/delay.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/delay.h \
+  include/linux/io.h \
+    $(wildcard include/config/has/ioport.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/io.h \
+    $(wildcard include/config/need/mach/io/h.h) \
+    $(wildcard include/config/pci.h) \
+    $(wildcard include/config/pcmcia/soc/common.h) \
+    $(wildcard include/config/isa.h) \
+    $(wildcard include/config/pccard.h) \
+  include/asm-generic/pci_iomap.h \
+    $(wildcard include/config/no/generic/pci/ioport/map.h) \
+    $(wildcard include/config/generic/pci/iomap.h) \
+  arch/arm/mach-sti/include/mach/io.h \
+  include/linux/slab.h \
+    $(wildcard include/config/slab/debug.h) \
+    $(wildcard include/config/kmemcheck.h) \
+    $(wildcard include/config/failslab.h) \
+    $(wildcard include/config/slob.h) \
+    $(wildcard include/config/slab.h) \
+    $(wildcard include/config/slub.h) \
+    $(wildcard include/config/debug/slab.h) \
+  include/linux/slub_def.h \
+    $(wildcard include/config/slub/stats.h) \
+    $(wildcard include/config/memcg/kmem.h) \
+    $(wildcard include/config/slub/debug.h) \
+  include/linux/kmemleak.h \
+    $(wildcard include/config/debug/kmemleak.h) \
+  include/linux/sched.h \
+    $(wildcard include/config/sched/debug.h) \
+    $(wildcard include/config/no/hz/common.h) \
+    $(wildcard include/config/lockup/detector.h) \
+    $(wildcard include/config/core/dump/default/elf/headers.h) \
+    $(wildcard include/config/sched/autogroup.h) \
+    $(wildcard include/config/bsd/process/acct.h) \
+    $(wildcard include/config/taskstats.h) \
+    $(wildcard include/config/audit.h) \
+    $(wildcard include/config/cgroups.h) \
+    $(wildcard include/config/inotify/user.h) \
+    $(wildcard include/config/fanotify.h) \
+    $(wildcard include/config/epoll.h) \
+    $(wildcard include/config/posix/mqueue.h) \
+    $(wildcard include/config/keys.h) \
+    $(wildcard include/config/perf/events.h) \
+    $(wildcard include/config/schedstats.h) \
+    $(wildcard include/config/task/delay/acct.h) \
+    $(wildcard include/config/fair/group/sched.h) \
+    $(wildcard include/config/rt/group/sched.h) \
+    $(wildcard include/config/cgroup/sched.h) \
+    $(wildcard include/config/blk/dev/io/trace.h) \
+    $(wildcard include/config/rcu/boost.h) \
+    $(wildcard include/config/compat/brk.h) \
+    $(wildcard include/config/cc/stackprotector.h) \
+    $(wildcard include/config/sysvipc.h) \
+    $(wildcard include/config/detect/hung/task.h) \
+    $(wildcard include/config/auditsyscall.h) \
+    $(wildcard include/config/rt/mutexes.h) \
+    $(wildcard include/config/block.h) \
+    $(wildcard include/config/task/xacct.h) \
+    $(wildcard include/config/cpusets.h) \
+    $(wildcard include/config/futex.h) \
+    $(wildcard include/config/fault/injection.h) \
+    $(wildcard include/config/latencytop.h) \
+    $(wildcard include/config/function/graph/tracer.h) \
+    $(wildcard include/config/uprobes.h) \
+    $(wildcard include/config/bcache.h) \
+    $(wildcard include/config/have/unstable/sched/clock.h) \
+    $(wildcard include/config/no/hz/full.h) \
+    $(wildcard include/config/stack/growsup.h) \
+    $(wildcard include/config/mm/owner.h) \
+  include/uapi/linux/sched.h \
+  include/linux/capability.h \
+  include/uapi/linux/capability.h \
+  include/linux/mm_types.h \
+    $(wildcard include/config/split/ptlock/cpus.h) \
+    $(wildcard include/config/have/cmpxchg/double.h) \
+    $(wildcard include/config/have/aligned/struct/page.h) \
+    $(wildcard include/config/want/page/debug/flags.h) \
+    $(wildcard include/config/aio.h) \
+    $(wildcard include/config/mmu/notifier.h) \
+    $(wildcard include/config/transparent/hugepage.h) \
+  include/linux/auxvec.h \
+  include/uapi/linux/auxvec.h \
+  arch/arm/include/generated/asm/auxvec.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/auxvec.h \
+  include/linux/page-debug-flags.h \
+    $(wildcard include/config/page/poisoning.h) \
+    $(wildcard include/config/page/guard.h) \
+    $(wildcard include/config/page/debug/something/else.h) \
+  include/linux/uprobes.h \
+    $(wildcard include/config/arch/supports/uprobes.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/mmu.h \
+    $(wildcard include/config/cpu/has/asid.h) \
+  arch/arm/include/generated/asm/cputime.h \
+  include/asm-generic/cputime.h \
+  include/asm-generic/cputime_jiffies.h \
+  include/linux/sem.h \
+  include/uapi/linux/sem.h \
+  include/linux/ipc.h \
+  include/uapi/linux/ipc.h \
+  arch/arm/include/generated/asm/ipcbuf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/ipcbuf.h \
+  arch/arm/include/generated/asm/sembuf.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/sembuf.h \
+  include/linux/signal.h \
+    $(wildcard include/config/old/sigaction.h) \
+  include/uapi/linux/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/signal.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/signal-defs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/sigcontext.h \
+  arch/arm/include/generated/asm/siginfo.h \
+  include/asm-generic/siginfo.h \
+  include/uapi/asm-generic/siginfo.h \
+  include/linux/pid.h \
+  include/linux/proportions.h \
+  include/linux/percpu_counter.h \
+  include/linux/seccomp.h \
+    $(wildcard include/config/seccomp.h) \
+    $(wildcard include/config/seccomp/filter.h) \
+  include/uapi/linux/seccomp.h \
+  include/linux/rculist.h \
+  include/linux/rtmutex.h \
+    $(wildcard include/config/debug/rt/mutexes.h) \
+  include/linux/plist.h \
+    $(wildcard include/config/debug/pi/list.h) \
+  include/linux/resource.h \
+  include/uapi/linux/resource.h \
+  arch/arm/include/generated/asm/resource.h \
+  include/asm-generic/resource.h \
+  include/uapi/asm-generic/resource.h \
+  include/linux/task_io_accounting.h \
+    $(wildcard include/config/task/io/accounting.h) \
+  include/linux/latencytop.h \
+  include/linux/cred.h \
+    $(wildcard include/config/debug/credentials.h) \
+    $(wildcard include/config/security.h) \
+  include/linux/key.h \
+  include/linux/selinux.h \
+    $(wildcard include/config/security/selinux.h) \
+  include/linux/llist.h \
+    $(wildcard include/config/arch/have/nmi/safe/cmpxchg.h) \
+  include/linux/firmware.h \
+    $(wildcard include/config/fw/loader.h) \
+  arch/arm/include/generated/asm/unaligned.h \
+  include/asm-generic/unaligned.h \
+  include/linux/unaligned/le_struct.h \
+  include/linux/unaligned/packed_struct.h \
+  include/linux/unaligned/be_byteshift.h \
+  include/linux/unaligned/generic.h \
+  include/linux/of.h \
+    $(wildcard include/config/sparc.h) \
+    $(wildcard include/config/of/dynamic.h) \
+    $(wildcard include/config/of.h) \
+    $(wildcard include/config/attach/node.h) \
+    $(wildcard include/config/detach/node.h) \
+    $(wildcard include/config/add/property.h) \
+    $(wildcard include/config/remove/property.h) \
+    $(wildcard include/config/update/property.h) \
+    $(wildcard include/config/proc/devicetree.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/prom.h \
+  include/linux/of_gpio.h \
+    $(wildcard include/config/of/gpio.h) \
+  include/linux/gpio.h \
+    $(wildcard include/config/gpiolib.h) \
+    $(wildcard include/config/arch/have/custom/gpio/h.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/gpio.h \
+    $(wildcard include/config/arch/nr/gpio.h) \
+    $(wildcard include/config/need/mach/gpio/h.h) \
+  include/asm-generic/gpio.h \
+    $(wildcard include/config/gpio/sysfs.h) \
+  include/linux/pinctrl/pinctrl.h \
+  include/linux/radix-tree.h \
+  include/linux/power/st_lpm.h \
+    $(wildcard include/config/cec/wu/reason.h) \
+    $(wildcard include/config/cec/wu/custom/msg.h) \
+    $(wildcard include/config/cec/version.h) \
+    $(wildcard include/config/cec/device/vendor/id.h) \
+    $(wildcard include/config/st/lpm.h) \
+  include/linux/rtc.h \
+    $(wildcard include/config/rtc/intf/dev/uie/emul.h) \
+    $(wildcard include/config/rtc/hctosys/device.h) \
+  include/uapi/linux/rtc.h \
+  include/linux/cdev.h \
+  include/linux/kdev_t.h \
+  include/uapi/linux/kdev_t.h \
+  include/linux/poll.h \
+  include/linux/fs.h \
+    $(wildcard include/config/fs/posix/acl.h) \
+    $(wildcard include/config/quota.h) \
+    $(wildcard include/config/fsnotify.h) \
+    $(wildcard include/config/ima.h) \
+    $(wildcard include/config/debug/writecount.h) \
+    $(wildcard include/config/file/locking.h) \
+    $(wildcard include/config/fs/xip.h) \
+    $(wildcard include/config/migration.h) \
+  include/linux/dcache.h \
+  include/linux/rculist_bl.h \
+  include/linux/list_bl.h \
+  include/linux/bit_spinlock.h \
+  include/linux/path.h \
+  include/linux/semaphore.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/fiemap.h \
+  include/linux/shrinker.h \
+  include/linux/migrate_mode.h \
+  include/linux/percpu-rwsem.h \
+  include/linux/blk_types.h \
+    $(wildcard include/config/blk/cgroup.h) \
+    $(wildcard include/config/blk/dev/integrity.h) \
+  include/uapi/linux/fs.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/limits.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/ioctl.h \
+  arch/arm/include/generated/asm/ioctl.h \
+  include/asm-generic/ioctl.h \
+  include/uapi/asm-generic/ioctl.h \
+  include/linux/quota.h \
+    $(wildcard include/config/quota/netlink/interface.h) \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/linux/dqblk_xfs.h \
+  include/linux/dqblk_v1.h \
+  include/linux/dqblk_v2.h \
+  include/linux/dqblk_qtree.h \
+  include/linux/projid.h \
+  include/uapi/linux/quota.h \
+  include/linux/nfs_fs_i.h \
+  include/linux/fcntl.h \
+  include/uapi/linux/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/uapi/asm/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/fcntl.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/uaccess.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/arch/arm/include/asm/unified.h \
+    $(wildcard include/config/arm/asm/unified.h) \
+  include/uapi/linux/poll.h \
+  arch/arm/include/generated/asm/poll.h \
+  /starkl/outputs/starkl-b2264-default/buildroot/build/linux-3.10.92/include/uapi/asm-generic/poll.h \
+  include/linux/power/st_lpm_def.h \
+  include/linux/power/st_lpm_def.h \
+  include/linux/of_platform.h \
+    $(wildcard include/config/of/device.h) \
+    $(wildcard include/config/of/address.h) \
+  include/linux/of_device.h \
+  include/linux/debugfs.h \
+
+drivers/lpm/st_lpm_mb.o: $(deps_drivers/lpm/st_lpm_mb.o)
+
+$(deps_drivers/lpm/st_lpm_mb.o):
diff -urNp a/drivers/lpm/Kconfig b/drivers/lpm/Kconfig
--- a/drivers/lpm/Kconfig	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/lpm/Kconfig	2019-09-26 21:23:27.360619500 +0100
@@ -0,0 +1,27 @@
+config ST_LPM
+	bool "LPM on STMicroelectronics STi series of SoCs"
+	depends on ARCH_STI
+	help
+	  Support for LPM driver on STMicroelectronics STi series
+	  of SoCs.
+	  Enable this config parameter for enabling ST LPM driver
+	  in the kernel.
+
+config SBC_FW_LOADED_BY_PBL
+	bool "Support for SBC Fw loaded by PBL"
+	depends on ST_LPM
+	default n
+	help
+	  Support for SBC Fw being loaded by PBL.
+	  Enable this config parameter to make the ST LPM driver
+	  not loading the SBC Fw.
+
+config GENERAL_SBC_TRACES
+	bool "Support for General SBC traces trough LPM driver"
+	depends on ST_LPM
+	default n
+	help
+	  SBC Traces can be sent to host through LPM mailbox. This
+	  will allow to trace SBC Fw without need to recompile it.
+	  This CONFIG allows GENERAL SBC Fw traces by default when
+	  SBC Fw is loaded and booted.
diff -urNp a/drivers/lpm/Makefile b/drivers/lpm/Makefile
--- a/drivers/lpm/Makefile	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/lpm/Makefile	2019-09-26 21:23:27.360619500 +0100
@@ -0,0 +1,3 @@
+# Makefile for building the STI LPM driver
+
+obj-$(CONFIG_ST_LPM)	:= st_lpm_mb.o st_lpm_com.o
diff -urNp a/drivers/lpm/built-in.mod.c b/drivers/lpm/built-in.mod.c
--- a/drivers/lpm/built-in.mod.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/lpm/built-in.mod.c	2019-09-26 21:30:38.742135800 +0100
@@ -0,0 +1,19 @@
+#include <linux/module.h>
+#include <linux/vermagic.h>
+#include <linux/compiler.h>
+
+MODULE_INFO(vermagic, VERMAGIC_STRING);
+
+struct module __this_module
+__attribute__((section(".gnu.linkonce.this_module"))) = {
+	.name = KBUILD_MODNAME,
+	.arch = MODULE_ARCH_INIT,
+};
+
+MODULE_INFO(intree, "Y");
+
+static const char __module_depends[]
+__used
+__attribute__((section(".modinfo"))) =
+"depends=";
+
Binary files a/drivers/lpm/built-in.o and b/drivers/lpm/built-in.o differ
diff -urNp a/drivers/lpm/st_lpm_com.c b/drivers/lpm/st_lpm_com.c
--- a/drivers/lpm/st_lpm_com.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/lpm/st_lpm_com.c	2019-09-26 21:23:27.364619500 +0100
@@ -0,0 +1,1163 @@
+/*
+ * This driver implements communication with Standby Controller
+ * in some STMicroelectronics devices
+ *
+ * Copyright (C) 2014 STMicroelectronics Limited
+ *
+ * Contributor:Francesco Virlinzi <francesco.virlinzi@st.com>
+ * Author:Pooja Agarwal <pooja.agarwal@st.com>
+ * Author:Udit Kumar <udit-dlh.kumar@st.com>
+ * Author:Sudeep Biswas <sudeep.biswas@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License Version 2.0 only.  See linux/COPYING for more information.
+ */
+
+
+#include <linux/module.h>
+#include <linux/slab.h>
+#include <asm/unaligned.h>
+#include <linux/delay.h>
+#include <linux/mutex.h>
+#include <linux/power/st_lpm.h>
+#include <linux/power/st_lpm_def.h>
+
+
+static struct st_lpm_ops *st_lpm_ops;
+static void *st_lpm_private_data;
+
+static DEFINE_MUTEX(st_lpm_mutex);
+
+/*a Set of LPM callbacks and datas */
+struct st_lpm_callback {
+	int (*fn)(void *);
+	void *data;
+};
+static struct st_lpm_callback st_lpm_callbacks[ST_LPM_MAX];
+
+int st_lpm_get_command_data_size(unsigned char command_id)
+{
+	static const unsigned char size[] = {
+	[LPM_MSG_NOP]		= LPM_MSG_NOP_SIZE,
+	[LPM_MSG_VER]		= LPM_MSG_VER_SIZE,
+	[LPM_MSG_READ_RTC]	= LPM_MSG_READ_RTC_SIZE,
+	[LPM_MSG_SET_TRIM]	= LPM_MSG_SET_TRIM_SIZE,
+	[LPM_MSG_ENTER_PASSIVE] = LPM_MSG_ENTER_PASSIVE_SIZE,
+	[LPM_MSG_SET_WDT]	= LPM_MSG_SET_WDT_SIZE,
+	[LPM_MSG_SET_RTC]	= LPM_MSG_SET_RTC_SIZE,
+	[LPM_MSG_SET_FP]	= LPM_MSG_SET_FP_SIZE,
+	[LPM_MSG_SET_TIMER]	= LPM_MSG_SET_TIMER_SIZE,
+	[LPM_MSG_GET_STATUS]	= LPM_MSG_GET_STATUS_SIZE,
+	[LPM_MSG_GEN_RESET]	= LPM_MSG_GEN_RESET_SIZE,
+	[LPM_MSG_SET_WUD]	= LPM_MSG_SET_WUD_SIZE,
+	[LPM_MSG_GET_WUD]	= LPM_MSG_GET_WUD_SIZE,
+	[LPM_MSG_LGWR_OFFSET]	= LPM_MSG_LGWR_OFFSET_SIZE,
+	[LPM_MSG_SET_PIO]	= LPM_MSG_SET_PIO_SIZE,
+	[LPM_MSG_SET_ADV_FEA]	= LPM_MSG_SET_ADV_FEA_SIZE,
+	[LPM_MSG_SET_KEY_SCAN]	= LPM_MSG_SET_KEY_SCAN_SIZE,
+	[LPM_MSG_CEC_ADDR]	= LPM_MSG_CEC_ADDR_SIZE,
+	[LPM_MSG_CEC_PARAMS]	= LPM_MSG_CEC_PARAMS_SIZE,
+	[LPM_MSG_CEC_SET_OSD_NAME] = LPM_MSG_CEC_SET_OSD_NAME_SIZE,
+	[LPM_MSG_SET_IR]	= LPM_MSG_SET_IR_SIZE,
+	[LPM_MSG_GET_IRQ]	= LPM_MSG_GET_IRQ_SIZE,
+	[LPM_MSG_TRACE_DATA]	= LPM_MSG_TRACE_DATA_SIZE,
+	[LPM_MSG_BKBD_READ]	= LPM_MSG_BKBD_READ_SIZE,
+	[LPM_MSG_BKBD_WRITE]	= LPM_MSG_BKBD_WRITE_SIZE,
+	[LPM_MSG_REPLY]		= LPM_MSG_REPLY_SIZE,
+	[LPM_MSG_ERR]		= LPM_MSG_ERR_SIZE,
+	[LPM_MSG_EDID_INFO]	= LPM_MSG_EDID_INFO_SIZE,
+	};
+
+	if (command_id > LPM_MSG_ERR)
+		return -EINVAL;
+	return size[command_id];
+}
+
+static inline int st_lpm_ops_exchange_msg(
+	struct lpm_message *command,
+	struct lpm_message *response)
+{
+	if (!st_lpm_ops || !st_lpm_ops->exchange_msg)
+		return -EINVAL;
+
+	return st_lpm_ops->exchange_msg(command,
+		response, st_lpm_private_data);
+}
+
+static inline int st_lpm_ops_write_bulk(u16 size, const char *msg)
+{
+	if (!st_lpm_ops || !st_lpm_ops->write_bulk)
+		return -EINVAL;
+
+	return st_lpm_ops->write_bulk(size, msg,
+		st_lpm_private_data, NULL);
+}
+
+static inline int st_lpm_ops_read_bulk(u16 size,
+	u16 offset, char *msg)
+{
+	if (!st_lpm_ops || !st_lpm_ops->read_bulk)
+		return -EINVAL;
+	return st_lpm_ops->read_bulk(size, offset, msg,
+		st_lpm_private_data);
+}
+
+static inline int st_lpm_ops_config_reboot(enum st_lpm_config_reboot_type type)
+{
+	if (!st_lpm_ops || !st_lpm_ops->config_reboot)
+		return -EINVAL;
+	return st_lpm_ops->config_reboot(type, st_lpm_private_data);
+}
+
+int st_lpm_set_ops(struct st_lpm_ops *ops, void *private_data)
+{
+	if (!ops)
+		return -EINVAL;
+	mutex_lock(&st_lpm_mutex);
+	if (st_lpm_ops) {
+		mutex_unlock(&st_lpm_mutex);
+		return -EBUSY;
+	}
+	st_lpm_ops = ops;
+	st_lpm_private_data = private_data;
+	mutex_unlock(&st_lpm_mutex);
+	return 0;
+}
+
+/**
+ * st_lpm_write_edid()	To write the EDID Info to SBC-DMEM
+ * @data		byte array to write
+ * @block_num		Block number to write
+ *
+ * Return - 0 on success
+ * Return -  negative error code on failure.
+ */
+int st_lpm_write_edid(unsigned char *data, u8 block_num)
+{
+	if (!st_lpm_ops || !st_lpm_ops->write_edid || !data)
+		return -EINVAL;
+
+	return st_lpm_ops->write_edid(data, block_num, st_lpm_private_data);
+}
+EXPORT_SYMBOL(st_lpm_write_edid);
+
+/**
+ * st_lpm_read_edid()	To read EDID Info from SBC-DMEM
+ * @data		byte array to write
+ * @block_num		Block number to read
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_read_edid(unsigned char *data, u8 block_num)
+{
+	if (!st_lpm_ops || !st_lpm_ops->read_edid || !data)
+		return -EINVAL;
+
+	return st_lpm_ops->read_edid(data, block_num, st_lpm_private_data);
+}
+EXPORT_SYMBOL(st_lpm_read_edid);
+
+/*
+ * st_lpm_setup_tracedata - Set trace data parameters
+ * @trace_modules - peripherals for which trace data to be enabled
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+
+int st_lpm_setup_tracedata(u16 trace_modules)
+{
+	if (!st_lpm_ops || !st_lpm_ops->setup_tracedata)
+		return -EINVAL;
+
+	return st_lpm_ops->setup_tracedata(trace_modules, st_lpm_private_data);
+}
+EXPORT_SYMBOL(st_lpm_setup_tracedata);
+
+/**
+ * st_lpm_write_dmem()	To write to SBC-DMEM
+ * @data		byte array to write
+ * @size		number of bytes to write
+ * @offset		offset in DMEM where to start write from
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_write_dmem(unsigned char *data, unsigned int size,
+		      int offset)
+{
+	if (!st_lpm_ops || !st_lpm_ops->write_bulk || !data)
+		return -EINVAL;
+
+	if (offset < 0)
+		return -EINVAL;
+
+	return st_lpm_ops->write_bulk(size, data, st_lpm_private_data, &offset);
+}
+EXPORT_SYMBOL(st_lpm_write_dmem);
+
+/**
+ * st_lpm_read_dmem()	To read from SBC-DMEM
+ * @data		byte array to read into
+ * @size		number of bytes to read
+ * @offset		offset in DMEM where to start read from
+ *
+ * Return - 0 on success
+ * Return -  negative error code on failure.
+ */
+int st_lpm_read_dmem(unsigned char *data, unsigned int size,
+		     int offset)
+{
+	if (!st_lpm_ops || !st_lpm_ops->read_bulk || !data)
+		return -EINVAL;
+
+	if (offset < 0)
+		return -EINVAL;
+
+	return st_lpm_ops->read_bulk(size, offset, data, st_lpm_private_data);
+}
+EXPORT_SYMBOL(st_lpm_read_dmem);
+
+/**
+ * st_lpm_get_dmem_offset()	To get offset inside SBC-DMEM
+ * @offset_type			type of the offset that is wanted
+ *
+ * Return - 0 on success
+ * Return -  negative error code on failure.
+ */
+int st_lpm_get_dmem_offset(enum st_lpm_sbc_dmem_offset_type offset_type)
+{
+	if (!st_lpm_ops || !st_lpm_ops->get_dmem_offset)
+		return -EINVAL;
+
+	return st_lpm_ops->get_dmem_offset(offset_type, st_lpm_private_data);
+}
+EXPORT_SYMBOL(st_lpm_get_dmem_offset);
+
+/**
+ * st_lpm_get_version() - To get version of driver and firmware
+ * @driver_version:	driver version
+ * @fw_version:		firmware version
+ *
+ * This function will return firmware and driver version in parameters.
+ *
+ * Return - 0 on success
+ * Return -  negative error code on failure.
+ */
+int st_lpm_get_version(struct st_lpm_version *driver_version,
+	struct st_lpm_version *fw_version)
+{
+	int ret = 0;
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_VER,
+	};
+
+	/* Check parameters */
+	if (unlikely(!driver_version || !fw_version))
+		return -EINVAL;
+
+	ret = st_lpm_ops_exchange_msg(&command, &response);
+
+	if (ret)
+		return ret;
+
+	/* Copy the firmware version in paramater */
+	fw_version->major_comm_protocol = response.buf[0] >> 4;
+	fw_version->minor_comm_protocol = response.buf[0] & 0x0F;
+	fw_version->major_soft = response.buf[1] >> 4;
+	fw_version->minor_soft = response.buf[1] & 0x0F;
+	fw_version->patch_soft = response.buf[2] >> 4;
+	fw_version->month = response.buf[2] & 0x0F;
+	memcpy(&fw_version->day, &response.buf[3], 3);
+
+	driver_version->major_comm_protocol = LPM_MAJOR_PROTO_VER;
+	driver_version->minor_comm_protocol = LPM_MINOR_PROTO_VER;
+	driver_version->major_soft = LPM_MAJOR_SOFT_VER;
+	driver_version->minor_soft = LPM_MINOR_SOFT_VER;
+	driver_version->patch_soft = LPM_PATCH_SOFT_VER;
+	driver_version->month = LPM_BUILD_MONTH;
+	driver_version->day = LPM_BUILD_DAY;
+	driver_version->year = LPM_BUILD_YEAR;
+
+	return ret;
+}
+EXPORT_SYMBOL(st_lpm_get_version);
+
+/**
+ * st_lpm_setup_ir() - To set ir key setup
+ * @num_keys:		Number of IR keys
+ * @ir_key_info:	Information of IR keys
+ *
+ * This function will configure IR information on SBC firmware.
+ * User needs to pass on which IR keys wakeup is required and
+ * the expected pattern for those keys.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+*/
+int st_lpm_setup_ir(u8 num_keys, struct st_lpm_ir_keyinfo *ir_key_info)
+{
+	struct st_lpm_ir_keyinfo *this_key;
+	u16 ir_size;
+	char *buf, *org_buf;
+	int count, i, err = 0;
+
+	for (count = 0; count < num_keys; count++) {
+		struct st_lpm_ir_key *key_info;
+		this_key = ir_key_info;
+
+		ir_key_info++;
+		key_info = &this_key->ir_key;
+		/* Check key crediantials */
+		if (unlikely(this_key->time_period == 0 ||
+			     key_info->num_patterns >= 64))
+			return -EINVAL;
+
+		ir_size = key_info->num_patterns*2 + 12;
+		buf = kmalloc(ir_size, GFP_KERNEL);
+		if (!buf)
+			return -ENOMEM;
+
+		org_buf = buf;
+
+		/* Fill buffer */
+		*buf++ = LPM_MSG_SET_IR;
+		*buf++ = 0;
+		*buf++ = this_key->ir_id & 0xF;
+		*buf++ = ir_size;
+		*buf++ = this_key->time_period & 0xFF;
+		*buf++ = (this_key->time_period >> 8) & 0xFF;
+		*buf++ = this_key->time_out & 0xFF;
+		*buf++ = (this_key->time_out >> 8) & 0xFF;
+
+		if (!this_key->tolerance)
+			this_key->tolerance = 10;
+
+		*buf++ = this_key->tolerance;
+		*buf++ = key_info->key_index & 0xF;
+		*buf++ = key_info->num_patterns;
+		/* Now compress the actual data and copy */
+		buf = org_buf + 12;
+
+		for (i = 0; i < key_info->num_patterns; i++) {
+			key_info->fifo[i].mark /= this_key->time_period;
+			*buf++ = key_info->fifo[i].mark;
+			key_info->fifo[i].symbol /=  this_key->time_period;
+			*buf++ = key_info->fifo[i].symbol;
+		}
+
+		err = st_lpm_ops_write_bulk(ir_size, org_buf);
+		kfree(org_buf);
+
+		if (err < 0)
+			break;
+	}
+
+	return err;
+}
+EXPORT_SYMBOL(st_lpm_setup_ir);
+
+/**
+ * st_lpm_get_wakeup_info() - To get additional info about wakeup device
+ * @wakeupdevice:	wakeup device id
+ * @validsize:		read valid size will be returned
+ * @datasize:		data size to read
+ * @data:		data pointer
+ *
+ * This API will return additional data for wakeup device if required.
+ *
+ * Return - 0 on success if data read from SBC is <= datasize
+ * Return - 1 if data available with SBC is > datasize
+ * Return - negative error on failure
+*/
+int st_lpm_get_wakeup_info(enum st_lpm_wakeup_devices wakeupdevice,
+			s16 *validsize, u16 datasize, char *data)
+{
+	int err = 0;
+	unsigned short offset;
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_GET_IRQ,
+	};
+
+	command.buf[0] = wakeupdevice;
+	command.buf[1] = (wakeupdevice & 0xFF00) >> 8;
+
+	/* Copy size requested */
+	put_unaligned_le16(datasize, &command.buf[2]);
+	err = st_lpm_ops_exchange_msg(&command, &response);
+	if (unlikely(err < 0))
+		goto exit;
+
+	/* Two response are possible*/
+	if (response.command_id == LPM_MSG_BKBD_READ) {
+		/*
+		 * If SBC replied to read response from its DMEM then
+		 * get the offset to read from SBC memory.
+		 */
+		offset = get_unaligned_le32(&response.buf[2]);
+
+		/* Get valid size from SBC */
+		st_lpm_ops_read_bulk(2, offset + 2, (char *)validsize);
+
+		/* Check if bit#15 is set */
+		if (*validsize < 0) {
+			pr_err("st lpm: Error data size not valid\n");
+			err = -EINVAL;
+			goto exit;
+		}
+
+		/*
+		 * Below condition is not possible
+		 * SBC have to provide data less than or equal to datasize
+		 * Added below check, if some bug pops up in firmware
+		 */
+		if (unlikely(*validsize > datasize)) {
+			pr_err("st lpm: more data than allowed\n");
+			err = -EINVAL;
+			goto exit;
+		}
+		st_lpm_ops_read_bulk(*validsize, offset + 4, data);
+
+	} else {
+		*validsize = get_unaligned_le16(response.buf);
+		/* Check if bit#15 is set in mailbox */
+		if (*validsize < 0) {
+			pr_err("st lpm: Error data size not valid\n");
+			err = -EINVAL;
+			goto exit;
+		}
+
+		/*
+		 * Below condition is not possible
+		 * SBC have to provide data less than or equal to datasize
+		 * Added below check, if some bug pops up in firmware
+		 */
+		if (unlikely(*validsize > datasize)) {
+			pr_err("st lpm: more data than allowed\n");
+			err = -EINVAL;
+			goto exit;
+		}
+		/* Copy data to user */
+		memcpy(data, &response.buf[2], *validsize);
+	}
+exit:
+	return err;
+}
+EXPORT_SYMBOL(st_lpm_get_wakeup_info);
+
+/**
+ * st_lpm_configure_wdt - Set watchdog timeout for Standby Controller
+ * @time_in_ms:	timeout in milli second
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_configure_wdt(u16 time_in_ms, u8 wdt_type)
+{
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_SET_WDT,
+	};
+
+	if (!time_in_ms)
+		return -EINVAL;
+
+	put_unaligned_le16(time_in_ms, command.buf);
+	command.buf[2] = wdt_type;
+
+	return st_lpm_ops_exchange_msg(&command, &response);
+}
+EXPORT_SYMBOL(st_lpm_configure_wdt);
+
+/**
+ * st_lpm_get_fw_state - Get the SBC firmware status
+ * @fw_state:	enum for firmware status
+ *
+ * Firmware status will be returned in passed parameter.
+ *
+ * Return - 0 on success
+ * Return - negative  error code on failure.
+ */
+int st_lpm_get_fw_state(enum st_lpm_sbc_state *fw_state)
+{
+	int ret = 0;
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_GET_STATUS,
+	};
+
+	if (!fw_state)
+		return -EINVAL;
+
+	ret = st_lpm_ops_exchange_msg(&command, &response);
+
+	if (likely(ret == 0))
+		*fw_state = response.buf[0];
+
+	return ret;
+}
+EXPORT_SYMBOL(st_lpm_get_fw_state);
+
+/**
+ * st_lpm_reset() - To reset part of full SOC
+ * @reset_type:	type of reset
+ *
+ * Return - 0 on success
+ * Return - negative error on failure
+ */
+int st_lpm_reset(enum st_lpm_reset_type reset_type)
+{
+	int ret = 0;
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_GEN_RESET,
+	};
+
+	command.buf[0] = reset_type;
+	ret = st_lpm_ops_exchange_msg(&command, &response);
+
+	if (!ret && reset_type == ST_LPM_SBC_RESET) {
+		int i = 0;
+		enum st_lpm_sbc_state fw_state;
+		/* Wait till 1 second to get response from firmware */
+		for (i = 0; i < 10; ++i) {
+			ret = st_lpm_get_fw_state(&fw_state);
+			if (!ret)
+				break;
+			mdelay(100);
+		}
+	}
+	return ret;
+}
+EXPORT_SYMBOL(st_lpm_reset);
+
+/**
+ * st_lpm_set_wakeup_device - To set wakeup devices
+ * @devices:	All enabled wakeup devices
+ *
+ * In older protocol version wakeup devices were limited to 8,
+ * whereas new protocol version supports upto 10 wakeup devices.
+ * Therefore two different message were used to set wakeup devices,
+ * driver checks firmware version and send wakeup device accordingly.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_set_wakeup_device(u16 devices)
+{
+	struct st_lpm_adv_feature feature;
+	feature.feature_name = ST_LPM_WU_TRIGGERS;
+	put_unaligned_le16(devices, feature.params.set_params);
+
+	return st_lpm_set_adv_feature(1, &feature);
+}
+EXPORT_SYMBOL(st_lpm_set_wakeup_device);
+
+/**
+ * st_lpm_set_wakeup_time - To set wakeup time
+ * @timeout:	Timeout in seconds after which wakeup is required
+ *
+ * Wakeup will be done after current time + timeout
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_set_wakeup_time(u32 timeout)
+{
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_SET_TIMER,
+	};
+
+	timeout = cpu_to_le32(timeout);
+	/* Copy timeout into message */
+	memcpy(command.buf, &timeout, 4);
+
+	return st_lpm_ops_exchange_msg(&command, &response);
+}
+EXPORT_SYMBOL(st_lpm_set_wakeup_time);
+
+/**
+ * st_lpm_set_rtc - To set rtc time for standby controller
+ * @new_rtc:	rtc value
+ *
+ * SBC can display RTC clock when in standby mode using this RTC value,
+ * This RTC will act as base for RTC hardware of SBC.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_set_rtc(struct rtc_time *new_rtc)
+{
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_SET_RTC,
+	};
+
+	/* Copy received values of rtc into message */
+	if (new_rtc->tm_year >= MIN_RTC_YEAR &&
+	    new_rtc->tm_year <= MAX_RTC_YEAR)
+		command.buf[5] = new_rtc->tm_year - MIN_RTC_YEAR;
+	else
+		return  -EINVAL;
+
+	command.buf[4] = new_rtc->tm_mon;
+	command.buf[3] = new_rtc->tm_mday;
+	command.buf[2] = new_rtc->tm_sec;
+	command.buf[1] = new_rtc->tm_min;
+	command.buf[0] = new_rtc->tm_hour;
+
+	return st_lpm_ops_exchange_msg(&command, &response);
+}
+EXPORT_SYMBOL(st_lpm_set_rtc);
+
+int st_lpm_cec_set_osd_name(struct st_lpm_cec_osd_msg *params)
+{
+	int len = 0;
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_CEC_SET_OSD_NAME,
+	};
+
+	if (!params)
+		return -EINVAL;
+
+	command.buf[0] = params->size;
+
+	if (command.buf[0] > ST_LPM_CEC_MAX_OSD_NAME_LENGTH)
+		return -EINVAL;
+
+	if (command.buf[0] < ST_LPM_CEC_MAX_OSD_NAME_LENGTH)
+		len = command.buf[0];
+	else if (command.buf[0] == ST_LPM_CEC_MAX_OSD_NAME_LENGTH)
+		len = command.buf[0]-1;
+
+	memcpy(&command.buf[1], &params->name, len);
+	if (command.buf[0] == ST_LPM_CEC_MAX_OSD_NAME_LENGTH)
+		command.transaction_id =
+			params->name[ST_LPM_CEC_MAX_OSD_NAME_LENGTH-1];
+
+	return st_lpm_ops_exchange_msg(&command, &response);
+}
+EXPORT_SYMBOL(st_lpm_cec_set_osd_name);
+
+int st_lpm_get_rtc(struct rtc_time *new_rtc)
+{
+	int err = 0, hours, t1;
+	unsigned long time_in_sec;
+	struct rtc_time time;
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_READ_RTC,
+	};
+
+	if (!new_rtc)
+		return -EINVAL;
+
+	err = st_lpm_ops_exchange_msg(&command, &response);
+
+	if (err >= 0 && (response.command_id & LPM_MSG_REPLY)) {
+		hours = (response.buf[9] << 24) |
+			(response.buf[8] << 16) |
+			(response.buf[7] << 8)  |
+			(response.buf[6]);
+
+		t1 = (((hours * 60) + response.buf[1]) * 60 +
+				response.buf[2]);
+
+		time.tm_year = response.buf[12] + MIN_RTC_YEAR;
+		time.tm_mon = response.buf[11];
+		time.tm_mday = response.buf[10];
+		time.tm_hour = 0;
+		time.tm_min = 0;
+		time.tm_sec = 0;
+		time_in_sec = mktime(time.tm_year, time.tm_mon, time.tm_mday,
+				time.tm_hour, time.tm_min, time.tm_sec);
+		time_in_sec += t1;
+		rtc_time_to_tm(time_in_sec , new_rtc);
+	}
+
+	return err;
+}
+EXPORT_SYMBOL(st_lpm_get_rtc);
+
+int stm_lpm_get_standby_time(u32 *time)
+{
+	int err;
+	struct st_lpm_adv_feature feature = {0};
+
+	err = st_lpm_get_adv_feature(0, 0, &feature);
+	if (likely(err == 0))
+		memcpy((char *)time, &feature.params.get_params[6], 4);
+
+	return err;
+}
+EXPORT_SYMBOL(stm_lpm_get_standby_time);
+
+/**
+ * st_lpm_get_wakeup_device - To get wake devices
+ * @wakeup_device:	wakeup device
+ *
+ * This function will return wakeup device because of which SBC has
+ * woken up the SOC.
+ * In older protocol version wakeup devices were limited to 8,
+ * whereas new Protocol version supports upto 10 wakeup devices.
+ * Therefore two different message were used to get wakeup device.
+ * Driver checks firmware version and send wakeup device accordingly.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_get_wakeup_device(enum st_lpm_wakeup_devices *wakeup_device)
+{
+	int err = 0;
+	struct st_lpm_adv_feature  feature = {0};
+
+	if (unlikely(wakeup_device == NULL))
+		return -EINVAL;
+
+	err = st_lpm_get_adv_feature(0, 0, &feature);
+
+	if (!err) {
+		*wakeup_device = feature.params.get_params[5] << 8;
+		*wakeup_device |= feature.params.get_params[4];
+	}
+
+	return err;
+}
+EXPORT_SYMBOL(st_lpm_get_wakeup_device);
+
+/**
+ * st_lpm_setup_fp - To set front panel information for SBC
+ * @fp_setting:	Front panel setting
+ *
+ * This function will set front panel setting.
+ * By default host CPU is assumed to control the front panel.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_setup_fp(struct st_lpm_fp_setting *fp_setting)
+{
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_SET_FP,
+	};
+
+	if (unlikely(fp_setting == NULL))
+		return -EINVAL;
+
+	command.buf[0] = (fp_setting->owner & OWNER_MASK)
+		| (fp_setting->am_pm & 1) << 2
+		| (fp_setting->brightness & NIBBLE_MASK) << 4;
+
+	return st_lpm_ops_exchange_msg(&command, &response);
+}
+EXPORT_SYMBOL(st_lpm_setup_fp);
+
+/**
+ * st_lpm_setup_pio - To inform SBC about PIO Use
+ * @pio_setting:	pio_setting
+ *
+ * This function will inform SBC about PIO use,
+ * driver running on Host must configure the PIO.
+ * SBC will not do any configuration for PIO.
+ * GPIO can be used as power control for board,
+ * gpio interrupt, external interrupt, Phy WOL wakeup.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_setup_pio(struct st_lpm_pio_setting *pio_setting)
+{
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_SET_PIO,
+	};
+
+	if (unlikely(pio_setting == NULL ||
+		(pio_setting->pio_direction &&
+		 pio_setting->interrupt_enabled)))
+		return -EINVAL;
+
+	command.buf[0] = pio_setting->pio_bank;
+	if (pio_setting->pio_use == ST_LPM_PIO_EXT_IT)
+		command.buf[0] = 0xFF;
+
+	pio_setting->pio_pin &= NIBBLE_MASK;
+	command.buf[1] = pio_setting->pio_level << PIO_LEVEL_SHIFT |
+		 pio_setting->interrupt_enabled <<  PIO_IT_SHIFT |
+		 pio_setting->pio_direction << PIO_DIRECTION_SHIFT |
+		 pio_setting->pio_disable << PIO_DISABLE_SHIFT |
+		 pio_setting->pio_pin;
+	command.buf[2] = pio_setting->pio_use;
+	command.buf[3] = pio_setting->ctrlpiolevel << PIO_CONTROL_SHIFT |
+		 pio_setting->stdbyorwake;
+
+	return st_lpm_ops_exchange_msg(&command, &response);
+}
+EXPORT_SYMBOL(st_lpm_setup_pio);
+
+/**
+ * st_lpm_setup_keyscan - To inform SBC about wakeup key of Keyscan
+ * @key_data:	Keyscan Key info
+ *
+ * This function will inform SBC about keyscan key
+ * on which SBC will wakeup.
+ * Driver running on Host must configure the Keyscan IP.
+ * SBC will not do any configuration.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_setup_keyscan(u16 key_data)
+{
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_SET_KEY_SCAN,
+	};
+
+	memcpy(command.buf, &key_data, 2);
+
+	return  st_lpm_ops_exchange_msg(&command, &response);
+}
+EXPORT_SYMBOL(st_lpm_setup_keyscan);
+
+/**
+ * st_lpm_set_adv_feature - Set advance feature of SBC
+ * @enabled:	If feature needs to enabled
+ *		pass 1 for enabling, 0 disabling
+ * @feature:	Feature type and its parameters.
+ *		Features can be :
+ *		SBC VCORE External without parameter.
+ *		SBC Low voltage detect with value of voltage.
+ *		SBC clock selection(external, AGC or 32K).
+ *		SBC RTC source 32K_TCXO or 32K_OSC
+ *		SBC Wakeup triggers.
+ *
+ * This function will enable/disable selected feature on SBC
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_set_adv_feature(u8 enabled, struct st_lpm_adv_feature *feature)
+{
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_SET_ADV_FEA,
+	};
+	int ret;
+
+	if (unlikely(feature == NULL))
+		return -EINVAL;
+
+	memcpy(&command.buf[2], feature->params.set_params, 12);
+	command.buf[0] = feature->feature_name;
+	command.buf[1] = enabled;
+
+	/*
+	 * No response expected from  SBC in case it is
+	 * set to IDLE mode
+	 */
+	if (feature->feature_name == ST_LPM_SBC_IDLE)
+		ret = st_lpm_ops_exchange_msg(&command, NULL);
+	else
+		ret = st_lpm_ops_exchange_msg(&command, &response);
+
+	return ret;
+}
+EXPORT_SYMBOL(st_lpm_set_adv_feature);
+
+/**
+ * st_lpm_get_adv_feature - To get current/supported features of SBC
+ * @all_features:	If required to get all features.
+ *			pass 1 to get all supported features by SBC.
+ *			pass 0 to get all current enabled feature of SBC.
+ * @features:		structure to get features of SBC
+ *
+ * Supported or currently  enabled features will be returned in get_params
+ * field of features argument.
+ * get_params[0-3] are bit map for each feature. Bit map 0-3 is reserved
+ * get_params[4-5] are bit map for wakeup triggers.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_get_adv_feature(bool all_features, bool custom_feature,
+			struct st_lpm_adv_feature *features)
+{
+	int err = 0;
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_GET_ADV_FEA,
+	};
+
+	if (unlikely(!features))
+		return -EINVAL;
+
+	if (all_features == true)
+		command.buf[0] = BIT(0);
+
+	if (custom_feature)
+		command.buf[0] |= BIT(7);
+
+	err = st_lpm_ops_exchange_msg(&command, &response);
+	if (likely(!err))
+		memcpy(features->params.get_params, response.buf, 10);
+
+	return err;
+}
+EXPORT_SYMBOL(st_lpm_get_adv_feature);
+
+/**
+ * st_lpm_setup_fp_pio - To setup frontpanel long press GPIO
+ * @pio_setting:		PIO data
+ * @long_press_delay:		Delay to detect long presss
+ * @default_reset_delay:	Default delay to do SOC reset
+ *
+ * This function will inform SBC about long press GPIO and its delays
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_setup_fp_pio(struct st_lpm_pio_setting *pio_setting,
+			u32 long_press_delay, u32 default_reset_delay)
+{
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_SET_PIO,
+	};
+
+	if (!pio_setting ||
+	    (pio_setting->pio_direction && pio_setting->interrupt_enabled) ||
+	    pio_setting->pio_use != ST_LPM_PIO_FP_PIO)
+		return -EINVAL;
+
+	command.buf[0] = pio_setting->pio_bank;
+
+	pio_setting->pio_pin &= NIBBLE_MASK;
+	command.buf[1] = pio_setting->pio_level << PIO_LEVEL_SHIFT |
+		pio_setting->interrupt_enabled <<  PIO_IT_SHIFT |
+		pio_setting->pio_direction << PIO_DIRECTION_SHIFT |
+		pio_setting->pio_disable << PIO_DISABLE_SHIFT |
+		pio_setting->pio_pin;
+
+	command.buf[2] = pio_setting->pio_use;
+
+	/*msg[3,4,5] are reserved */
+	memcpy(&command.buf[6], &long_press_delay, 4);
+	memcpy(&command.buf[10], &default_reset_delay, 4);
+
+	return st_lpm_ops_exchange_msg(&command, &response);
+}
+EXPORT_SYMBOL(st_lpm_setup_fp_pio);
+
+/**
+ * st_lpm_setup_power_on_delay - To setup delay on wakeup
+ * @de_bounce_delay:	this is button de bounce delay.
+ * @dc_stability_delay:	this is DC stability delay
+ *
+ * This function will inform SBC about delays on detecting valid wakeup
+ * If this is not called, SBC will use default delay
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_setup_power_on_delay(u16 de_bounce_delay,
+				u16 dc_stable_delay)
+{
+	struct st_lpm_adv_feature feature;
+	feature.feature_name = ST_LPM_DE_BOUNCE;
+
+	put_unaligned_le16(de_bounce_delay, feature.params.set_params);
+	st_lpm_set_adv_feature(1, &feature);
+	feature.feature_name = ST_LPM_DC_STABLE;
+	put_unaligned_le16(dc_stable_delay, feature.params.set_params);
+
+	return st_lpm_set_adv_feature(1, &feature);
+}
+EXPORT_SYMBOL(st_lpm_setup_power_on_delay);
+
+/**
+ * st_lpm_setup_rtc_calibration_time -
+ *	To setup the RTC calibration time in min
+ * @cal_time:	Calibration time in minutes.
+ *
+ * This function will inform SBC about the RTC calibration time
+ * If this is not called, SBC will use default time (5 min)
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_setup_rtc_calibration_time(u8 cal_time)
+{
+	struct st_lpm_adv_feature feature;
+	feature.feature_name = ST_LPM_RTC_CALIBRATION_TIME;
+
+	feature.params.set_params[0] = cal_time;
+
+	return st_lpm_set_adv_feature(1, &feature);
+}
+EXPORT_SYMBOL(st_lpm_setup_rtc_calibration_time);
+
+/**
+ * st_lpm_set_cec_addr - to set CEC address for SBC
+ * @addr:	CEC's physical and logical address
+ *
+ * This function will inform SBC about CEC phy and logical addresses
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_set_cec_addr(struct st_lpm_cec_address *addr)
+{
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_CEC_ADDR,
+	};
+
+	if (unlikely(!addr))
+		return -EINVAL;
+
+	put_unaligned_le16(addr->phy_addr, command.buf);
+	put_unaligned_le16(addr->logical_addr, &command.buf[2]);
+
+	return st_lpm_ops_exchange_msg(&command, &response);
+}
+EXPORT_SYMBOL(st_lpm_set_cec_addr);
+
+/**
+ * st_lpm_cec_config - configure SBC for CEC WU or custom message
+ * @use:	WU reason or custom message
+ * @params:	Data associated with use
+ *
+ * This function will inform SBC about CEC WU or custom message
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+int st_lpm_cec_config(enum st_lpm_cec_select use,
+			union st_lpm_cec_params *params)
+{
+	struct lpm_message response = {0};
+	struct lpm_message command = {
+		.command_id = LPM_MSG_CEC_PARAMS,
+	};
+
+	if (unlikely(NULL == params))
+		return -EINVAL;
+
+	command.buf[0] = use;
+	if (use == ST_LPM_CONFIG_CEC_WU_REASON)
+		command.buf[1] = params->cec_wu_reasons;
+	else {
+		command.buf[1] = params->cec_msg.index;
+		command.buf[2] = params->cec_msg.size;
+		memcpy(&command.buf[3],
+			&params->cec_msg.opcode, command.buf[2]);
+	}
+
+	return st_lpm_ops_exchange_msg(&command, &response);
+}
+EXPORT_SYMBOL(st_lpm_cec_config);
+
+int st_lpm_poweroff(void)
+{
+	struct lpm_message command = {
+		.command_id = LPM_MSG_ENTER_PASSIVE,
+	};
+
+	return st_lpm_ops_exchange_msg(&command, NULL);
+};
+EXPORT_SYMBOL(st_lpm_poweroff);
+
+int st_lpm_config_reboot(enum st_lpm_config_reboot_type type)
+{
+	switch (type) {
+	case ST_LPM_REBOOT_WITH_DDR_SELF_REFRESH:
+	case ST_LPM_REBOOT_WITH_DDR_OFF:
+		return st_lpm_ops_config_reboot(type);
+	break;
+	default:
+		pr_err("%s: configuration NOT supported!\n", __func__);
+	}
+	return -EINVAL;
+}
+EXPORT_SYMBOL(st_lpm_config_reboot);
+
+int st_lpm_sbc_ir_enable(bool enable)
+{
+	if (!st_lpm_ops || !st_lpm_ops->ir_enable)
+		return -EINVAL;
+
+	st_lpm_ops->ir_enable(enable, st_lpm_private_data);
+
+	return 0;
+}
+EXPORT_SYMBOL(st_lpm_sbc_ir_enable);
+
+/**
+ * st_lpm_register_callback - to register user callback
+ *
+ * This function will configure user's callback for long press PIO
+ */
+int st_lpm_register_callback(enum st_lpm_callback_type type,
+	int (*fnc)(void *), void *data)
+{
+	int ret = 0;
+	if (type >= ST_LPM_MAX)
+		return -EINVAL;
+
+	mutex_lock(&st_lpm_mutex);
+
+	if (!st_lpm_callbacks[type].fn) {
+		st_lpm_callbacks[type].fn = fnc;
+		st_lpm_callbacks[type].data = data;
+	} else {
+		ret = -EBUSY;
+	}
+	mutex_unlock(&st_lpm_mutex);
+
+	return ret;
+}
+EXPORT_SYMBOL(st_lpm_register_callback);
+
+int st_lpm_notify(enum st_lpm_callback_type type)
+{
+	struct st_lpm_callback *cb;
+
+	if (type >= ST_LPM_MAX)
+		return -EINVAL;
+
+	cb = &st_lpm_callbacks[type];
+	if (cb->fn)
+		return cb->fn(cb->data);
+
+	return 0;
+}
+EXPORT_SYMBOL(st_lpm_notify);
+
+int st_lpm_reload_fw_prepare(void)
+{
+	if (!st_lpm_ops || !st_lpm_ops->reload_fw_prepare)
+		return -EINVAL;
+
+	st_lpm_ops->reload_fw_prepare(st_lpm_private_data);
+
+	return 0;
+}
+EXPORT_SYMBOL(st_lpm_reload_fw_prepare);
+
+int st_start_loaded_fw(void)
+{
+	if (!st_lpm_ops || !st_lpm_ops->start_loaded_fw)
+		return -EINVAL;
+
+	st_lpm_ops->start_loaded_fw(st_lpm_private_data);
+
+	return 0;
+}
+EXPORT_SYMBOL(st_start_loaded_fw);
Binary files a/drivers/lpm/st_lpm_com.o and b/drivers/lpm/st_lpm_com.o differ
diff -urNp a/drivers/lpm/st_lpm_mb.c b/drivers/lpm/st_lpm_mb.c
--- a/drivers/lpm/st_lpm_mb.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/lpm/st_lpm_mb.c	2019-09-26 21:23:27.364619500 +0100
@@ -0,0 +1,1924 @@
+/*
+ * This driver implements communication with internal Standby Controller
+ * over mailbox interface in some STMicroelectronics devices.
+ *
+ * Copyright (C) 2014 STMicroelectronics Limited.
+ *
+ * Contributor:Francesco Virlinzi <francesco.virlinzi@st.com>
+ * Author:Pooja Agarwal <pooja.agarwal@st.com>
+ * Author:Udit Kumar <udit-dlh.kumar@st.com>
+ * Author:Sudeep Biswas <sudeep.biswas@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License Version 2.0 only.  See linux/COPYING for more information.
+ */
+
+#include <linux/platform_device.h>
+#include <linux/module.h>
+#include <linux/interrupt.h>
+#include <linux/delay.h>
+#include <linux/io.h>
+#include <linux/slab.h>
+#include <linux/sched.h>
+#include <linux/firmware.h>
+#include <linux/elf.h>
+#include <asm/unaligned.h>
+#include <linux/of.h>
+#include <linux/of_gpio.h>
+#include <linux/power/st_lpm.h>
+#include <linux/power/st_lpm_def.h>
+#include <linux/of_platform.h>
+#include <linux/debugfs.h>
+
+static const struct st_lpm_wkup_dev_name wkup_dev_name_tab[] = {
+	{ST_LPM_WAKEUP_IR, "ir"},
+	{ST_LPM_WAKEUP_CEC, "cec"},
+	{ST_LPM_WAKEUP_FRP, "frp"},
+	{ST_LPM_WAKEUP_WOL, "wol"},
+	{ST_LPM_WAKEUP_RTC, "rtc"},
+	{ST_LPM_WAKEUP_ASC, "asc"},
+	{ST_LPM_WAKEUP_NMI, "nmi"},
+	{ST_LPM_WAKEUP_HPD, "hpd"},
+	{ST_LPM_WAKEUP_PIO, "pio"},
+	{ST_LPM_WAKEUP_EXT, "ext"},
+	{ST_LPM_WAKEUP_CUST, "cust"}
+};
+
+static const struct st_lpm_trace_module_names
+			trace_module_tab[MAX_TRACE_MODULE_NUM] = {
+	{ST_LPM_TRACE_IR, "IR"},
+	{ST_LPM_TRACE_CEC, "CEC"},
+	{ST_LPM_TRACE_PWM, "PWM"},
+	{ST_LPM_TRACE_WOL, "WOL"},
+	{ST_LPM_TRACE_RTC, "RTC"},
+	{ST_LPM_TRACE_ASC, "ASC"},
+	{ST_LPM_TRACE_TIMER, "TIMER"},
+	{ST_LPM_TRACE_CUSTOM, "CUSTOM"},
+	{ST_LPM_TRACE_PIO, "PIO"},
+	{ST_LPM_TRACE_I2C, "I2C"},
+	{ST_LPM_TRACE_EDID, "EDID"},
+	{ST_LPM_TRACE_KEYSCN, "KEYSCN"},
+	{ST_LPM_TRACE_SPI, "SPI"},
+	{ST_LPM_TRACE_GENERAL, "GENERAL"},
+};
+
+enum lpm_services {
+	LPM_FW_RELOAD,
+	LPM_CUST_FEAT,
+	LPM_EDID,
+	LPM_SBC_TRACES,
+	LPM_SBC_TRACES_IN_SUSPEND
+};
+
+static struct st_lpm_version lpm_fw_ver_vs_services[] = {
+	 /* Since LPM Fw v1.2.0 */
+	[LPM_FW_RELOAD] = {.major_soft = 1, .minor_soft = 2, .patch_soft = 0},
+	 /* Since LPM Fw v1.4.0 */
+	[LPM_CUST_FEAT] = {.major_soft = 1, .minor_soft = 4, .patch_soft = 0},
+	/* Since LPM Fw v1.4.2 */
+	[LPM_EDID] = {.major_soft = 1, .minor_soft = 4,	.patch_soft = 2},
+	/* Since LPM Fw v1.8.0 */
+	[LPM_SBC_TRACES] = {.major_soft = 1, .minor_soft = 8, .patch_soft = 0},
+	/* Since LPM Fw v1.8.1 */
+	[LPM_SBC_TRACES_IN_SUSPEND] = {
+		.major_soft = 1, .minor_soft = 8, .patch_soft = 1},
+};
+
+static bool lpm_check_fw_version(struct st_lpm_version *fw_ver,
+				 enum lpm_services service)
+{
+	struct st_lpm_version *service_version;
+
+	service_version = &lpm_fw_ver_vs_services[service];
+
+	if (fw_ver->major_soft > service_version->major_soft)
+		return true;
+	else if (fw_ver->major_soft < service_version->major_soft)
+		return false;
+	else
+		if (fw_ver->minor_soft > service_version->minor_soft)
+			return true;
+		else if (fw_ver->minor_soft < service_version->minor_soft)
+			return false;
+		else
+			if (fw_ver->patch_soft > service_version->patch_soft)
+				return true;
+			else if (fw_ver->patch_soft <
+					service_version->patch_soft)
+				return false;
+			else
+				return true;
+}
+
+/**
+ * st_lpm_driver_data - Local struct of driver
+ * @iomem_base[2]:		memory region mapped by driver
+ *				iomem_base[0] is SBC program and data
+ *				base address
+ *				size of iomem_base[0] is 0xA0000
+ *				iomem_base[1] is SBC mailbox address
+ *				size of iomem_base[1] is 0x400
+ *				iomem_base[2] is SBC config reg mapped in
+ *				sysconf
+ *
+ * @fw_reply_msg:		reply message from firmware
+ * @fw_request_msg:		firmware request message
+ * @fw_name:			Name of firmware
+ * @reply_from_sbc:		reply from SBC, true in case reply received
+ * @wait_queue:			wait queue
+ * @mutex:			message protection mutex
+ * @glbtransaction_id:		global transaction id used in communication
+ * @sbc_state:			State of SBC firmware
+ * @power_on_gpio:		the gpio pin number assinged by gpio lib for
+ *				power on/off pin
+ * @trigger_level:		the trigger level for power on/off pin
+ * @pmem_offset:		the progam section of the f/w to be loaded here
+ *				this is different for different chip.
+ *				Read from DT
+ * @dev:			the device object. Required to store here for
+ *				using in dev_*
+ */
+struct st_lpm_driver_data {
+	void * __iomem iomem_base[3];
+	struct lpm_message fw_reply_msg;
+	struct lpm_message fw_request_msg;
+	char fw_name[30];
+	int reply_from_sbc;
+	wait_queue_head_t wait_queue;
+	struct mutex mutex;
+	unsigned char glbtransaction_id;
+	enum st_lpm_sbc_state sbc_state;
+	unsigned int power_on_gpio;
+	unsigned int trigger_level;
+	unsigned int pmem_offset;
+	unsigned int const *data_ptr;
+	struct notifier_block wakeup_cb;
+	u16 wakeup_bitmap;
+	struct mutex fwlock;
+	bool fwstatus;
+	struct device *dev;
+	struct st_lpm_version fw_ver;
+	const struct firmware *fw;
+	u16 trace_data_value;
+};
+
+
+/* To write 32 bit data into LPM */
+#define lpm_write32(drv, index, offset, value)	iowrite32(value,	\
+			(drv)->iomem_base[index] + offset)
+
+/* To read 32 bit data into LPM */
+#define lpm_read32(drv, idx, offset)	ioread32(			\
+			(drv)->iomem_base[idx] + offset)
+
+/*
+ * For internal standby controller
+ * Various offset of LPM IP, These offsets are w.r.t LPM memory resources.
+ * There are three LPM memory resources used
+ * first is for SBC PMEM,
+ * second is for SBC mailbox,
+ * third is for SBC configuration registers.
+ */
+/* Marker in elf file to indicate writing to program area */
+#define SBC_PRG_MEMORY_ELF_MARKER	0x00400000
+
+/* SBC mailbox offset as seen by Host w.r.t mem source 2 */
+#define SBC_MBX_OFFSET		0x0
+
+/* SBC configuration register offset as seen on Host w.r.t mem source 3 */
+#define SBC_CONFIG_OFFSET	0x0
+
+/*
+ * Mailbox registers to be written by host,
+ * SBC firmware will read below registers to get host message.
+ * There are four such registers in mailbox each of 4 bytes.
+ */
+#define MBX_WRITE_STATUS(i)	(SBC_MBX_OFFSET + (i) * 0x4)
+
+/*
+ * Mailbox registers to be read by host,
+ * SBC firmware will write below registers to send message.
+ * There are four such registers in mailbox each of 4 bytes.
+ */
+#define MBX_READ_STATUS(i)	(SBC_MBX_OFFSET + 0x100 + (i) * 0x4)
+
+/* To clear mailbox interrupt status */
+#define MBX_READ_CLR_STATUS1	(SBC_MBX_OFFSET + 0x144)
+
+/* To enable/disable mailbox interrupt on Host :RW */
+#define MBX_INT_ENABLE		(SBC_MBX_OFFSET + 0x164)
+/* To enable mailbox interrupt on Host : WO only set allowed */
+#define MBX_INT_SET_ENABLE	(SBC_MBX_OFFSET + 0x184)
+
+/* To disable mailbox interrupt on Host : WO only clear allowed */
+#define MBX_INT_CLR_ENABLE	(SBC_MBX_OFFSET + 0x1A4)
+
+/*
+ * From host there are three type of message can be send to SBC
+ * No reply expected from SBC i.e. reset SBC, Passive standby
+ * Reply is expected from SBC i.e. get version etc.
+ * Reply is expected but interrupts are disabled
+ */
+#define SBC_REPLY_NO		0x0
+#define SBC_REPLY_YES		0x1
+#define SBC_REPLY_NO_IRQ	0x2
+
+/* Value to be set by SBC-Fw in EXIT_CPS register when exiting form CPS */
+#define CPS_EXIT_EXIT_CPS	0x9b
+
+/* Value to be set by SBC-Fw in EXIT_CPS register when exiting other than CPS */
+#define DEFAULT_EXIT_CPS	0xb8
+
+static int lpm_config_reboot(enum st_lpm_config_reboot_type type, void *data)
+{
+	struct st_lpm_adv_feature feature;
+
+	feature.feature_name = ST_LPM_SET_EXIT_CPS;
+
+	switch (type) {
+	case ST_LPM_REBOOT_WITH_DDR_SELF_REFRESH:
+	/*
+	 * Exit_CPS:
+	 * [7:1] == 7b1001101:
+	 *	DDRs in self-refresh
+	 * [0] == 1b1:
+	 *	DDRs in self-refresh (back compatibility)
+	 */
+		feature.params.set_params[0] = CPS_EXIT_EXIT_CPS;
+		break;
+
+	case ST_LPM_REBOOT_WITH_DDR_OFF:
+	/*
+	 * Exit_CPS:
+	 * [9:8] == 2b11:
+	 *	DDRs are powered off
+	 */
+		feature.params.set_params[0] = DEFAULT_EXIT_CPS;
+		break;
+	}
+
+	st_lpm_set_adv_feature(1, &feature);
+
+	return 0;
+}
+
+static void lpm_configure_power_on_gpio(struct st_lpm_driver_data *lpm_drv)
+{
+	int err = 0;
+
+	if (lpm_drv->power_on_gpio >= 0) {
+		struct st_lpm_pio_setting pio_setting = {
+			.pio_bank = lpm_drv->power_on_gpio / 8,
+			.pio_pin = lpm_drv->power_on_gpio % 8,
+			.pio_level = lpm_drv->trigger_level ?
+				ST_LPM_PIO_LOW : ST_LPM_PIO_HIGH,
+			.pio_use = ST_LPM_PIO_POWER,
+			.pio_direction = 1,
+			.interrupt_enabled = 0,
+			.pio_disable = 0,
+			.stdbyorwake = 0,
+			.ctrlpiolevel = 0,
+		};
+
+		err = st_lpm_setup_pio(&pio_setting);
+		if (err < 0)
+			dev_warn(lpm_drv->dev,
+				"Setup power_on gpio failed: err = %d\n", err);
+	}
+}
+
+static int lpm_exchange_msg(struct lpm_message *command,
+	struct lpm_message *response, void *private_data);
+
+/*
+ * lpm_setup_tracedata - Set trace data parameters
+ * @trace_modules - peripherals for which trace data to be enabled
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+static int lpm_setup_tracedata(u16 trace_modules, void *data)
+{
+	struct st_lpm_driver_data *lpm_drv = data;
+	struct lpm_message command = {0};
+	struct lpm_message response = {0};
+	struct st_lpm_version *service_version;
+
+	if (!lpm_check_fw_version(&lpm_drv->fw_ver, LPM_SBC_TRACES)) {
+		service_version = &lpm_fw_ver_vs_services[LPM_SBC_TRACES];
+
+		dev_warn(lpm_drv->dev,
+			 "This LPM Fw does not support SBC traces service\n");
+		dev_warn(lpm_drv->dev,
+			 "SBC traces service available from LPM Fw v%d.%d.%d\n",
+			 service_version->major_soft,
+			 service_version->minor_soft,
+			 service_version->patch_soft);
+
+		return -EINVAL;
+	}
+
+	lpm_drv->trace_data_value = trace_modules;
+
+	command.command_id = LPM_MSG_TRACE_DATA;
+	command.buf[0] = trace_modules & 0xFF;
+	command.buf[1] = (trace_modules >> 8) & 0xFF;
+
+	return lpm_exchange_msg(&command, &response, lpm_drv);
+}
+
+static void lpm_sec_init(struct st_lpm_driver_data *lpm_drv)
+{
+	struct st_lpm_version driver_ver;
+	int err = 0;
+	const char *acg_calib;
+
+	dev_dbg(lpm_drv->dev, "SBC Firmware is running\n");
+
+	/* Print firmware version information */
+	err = st_lpm_get_version(&driver_ver, &lpm_drv->fw_ver);
+
+	if (err >= 0) {
+		dev_info(lpm_drv->dev, "LPM: firmware ver %d.%d.%d",
+			 lpm_drv->fw_ver.major_soft,
+			 lpm_drv->fw_ver.minor_soft,
+			 lpm_drv->fw_ver.patch_soft);
+		dev_info(lpm_drv->dev,
+			 "(%02d-%02d-20%02d)\n", lpm_drv->fw_ver.day,
+			 lpm_drv->fw_ver.month, lpm_drv->fw_ver.year);
+	}
+
+	/*
+	 * Request default value of EXIT_CPS, to be set while
+	 * exiting from non-CPS warm reset cases, such as
+	 * manual reset exit, WDT exit, shutdown exit.
+	 */
+	lpm_config_reboot(ST_LPM_REBOOT_WITH_DDR_OFF, lpm_drv);
+
+	lpm_configure_power_on_gpio(lpm_drv);
+
+	if (!of_property_read_string(lpm_drv->dev->of_node, "st,acg_calib",
+			&acg_calib) && !strcmp("off", acg_calib))
+		st_lpm_setup_rtc_calibration_time(0);
+
+#ifdef CONFIG_GENERAL_SBC_TRACES
+	lpm_setup_tracedata(ST_LPM_TRACE_GENERAL, lpm_drv);
+#endif
+}
+
+
+/**
+ * lpm_isr() - Mailbox ISR
+ * @this_irq:	irq
+ * @params:	Parameters
+ *
+ * This ISR is invoked when there is some message from SBC.
+ * Message could be reply or some request.
+ * If this a request then such message will be posted to a work queue.
+ */
+static irqreturn_t lpm_isr(int this_irq, void *params)
+{
+	struct st_lpm_driver_data *lpm_drv =
+		(struct st_lpm_driver_data *)params;
+	u32 msg_read[4], i;
+	struct lpm_message *msg, *msg_p;
+
+	/*
+	 * Read the data from mailbox
+	 * SBC will always be in little endian mode
+	 * if host is in big endian then reverse int
+	 */
+	lpm_drv->reply_from_sbc = 0;
+
+	for (i = 0; i < 4; i++) {
+		msg_read[i] = lpm_read32(lpm_drv, 1, MBX_READ_STATUS(1 + i));
+		msg_read[i] = cpu_to_le32(msg_read[i]);
+		}
+	/* Copy first message to check if it's reply from SBC or request */
+	msg_p = (struct lpm_message *)msg_read;
+
+	if (msg_p->command_id == LPM_MSG_INFORM_HOST) {
+		if (msg_p->buf[0] == ST_LPM_ALARM_TIMER) {
+			st_lpm_notify(ST_LPM_RTC);
+
+			/* Clear mail box */
+			lpm_write32(lpm_drv, 1, MBX_READ_CLR_STATUS1,
+					0xFFFFFFFF);
+
+			/* No more action needed in this case
+			 * SBC is not waiting or requesting anything
+			 */
+			return IRQ_HANDLED;
+		}
+	}
+
+	/* Check if reply from SBC or request from SBC */
+	if ((msg_p->command_id & LPM_MSG_REPLY) ||
+			(msg_p->command_id == LPM_MSG_BKBD_READ)) {
+		msg = &lpm_drv->fw_reply_msg;
+		lpm_drv->reply_from_sbc = 1;
+	} else {
+		msg = &lpm_drv->fw_request_msg;
+	}
+
+	/* Copy mailbox data into local structure */
+	memcpy(msg, &msg_read, 16);
+
+	/* Clear mail box */
+	lpm_write32(lpm_drv, 1, MBX_READ_CLR_STATUS1, 0xFFFFFFFF);
+
+	if (lpm_drv->reply_from_sbc != 1)
+		return IRQ_WAKE_THREAD;
+
+	wake_up_interruptible(&lpm_drv->wait_queue);
+
+	return IRQ_HANDLED;
+}
+
+static irqreturn_t lpm_threaded_isr(int this_irq, void *params)
+{
+	struct st_lpm_driver_data *lpm_drv =
+		(struct st_lpm_driver_data *)params;
+	int err = 0;
+	struct lpm_message command;
+	struct lpm_message *msg_p;
+	char *buf = command.buf;
+	u8 length;
+	u32 offset;
+	char data[128];
+
+	msg_p = &lpm_drv->fw_request_msg;
+	dev_dbg(lpm_drv->dev, "Send reply to firmware\nrecd command id %x\n",
+		msg_p->command_id);
+
+	switch (msg_p->command_id) {
+	case LPM_MSG_VER:
+		/* In case firmware requested driver version*/
+		buf[0] = (LPM_MAJOR_PROTO_VER << 4) | LPM_MINOR_PROTO_VER;
+		buf[1] = (LPM_MAJOR_SOFT_VER << 4) | LPM_MINOR_SOFT_VER;
+		buf[2] = (LPM_PATCH_SOFT_VER << 4) | LPM_BUILD_MONTH;
+		buf[3] = LPM_BUILD_DAY;
+		buf[4] = LPM_BUILD_YEAR;
+		command.command_id = LPM_MSG_VER | LPM_MSG_REPLY;
+		break;
+	case LPM_MSG_INFORM_HOST:
+		if (msg_p->buf[0] == ST_LPM_LONG_PIO_PRESS) {
+			err = st_lpm_notify(ST_LPM_FP_PIO_PRESS);
+			if (err >= 0) {
+				memcpy(&command.buf[2], &err, 4);
+				command.command_id = LPM_MSG_INFORM_HOST |
+					LPM_MSG_REPLY;
+				break;
+			} else {
+				dev_dbg(lpm_drv->dev,
+					"PIO Reset callback error reported (%d)\n",
+					err);
+			}
+		}
+
+		if (msg_p->buf[0] == ST_LPM_ALARM_TIMER)
+			return IRQ_HANDLED;
+
+		if (msg_p->buf[0] == ST_LPM_TRACE_DATA) {
+			length = msg_p->buf[1];
+			offset = get_unaligned_le32(&(msg_p->buf[2]));
+			memset(data, 0, 128);
+			memcpy_fromio(data, lpm_drv->iomem_base[0] +
+					DATA_OFFSET + offset, length);
+			dev_info(lpm_drv->dev, "SBC f/w traces:%s\n", data);
+			return IRQ_HANDLED;
+		}
+	default:
+		/* Send reply to SBC as error*/
+		buf[0] = msg_p->command_id;
+		buf[1] = -EINVAL;
+		command.command_id = LPM_MSG_ERR;
+		break;
+	}
+
+	command.transaction_id = msg_p->transaction_id;
+
+	lpm_exchange_msg(&command, NULL, lpm_drv);
+	msg_p->command_id = 0;
+	return IRQ_HANDLED;
+}
+
+/**
+ * lpm_send_msg() - Send mailbox message
+ * @msg:	message pointer
+ * @msg_size:	message size
+ *
+ * Return - 0 if firmware is running
+ * Return - -EREMOTEIO either firmware is not loaded or not running
+ */
+static int lpm_send_msg(struct st_lpm_driver_data *lpm_drv,
+	struct lpm_message *msg, unsigned char msg_size)
+{
+	int err = 0, count;
+	u32 *tmp_i = (u32 *)msg;
+
+	/* Check if firmware is loaded or not */
+	if (!(lpm_drv->sbc_state == ST_LPM_SBC_RUNNING ||
+	      lpm_drv->sbc_state == ST_LPM_SBC_BOOT))
+		return -EREMOTEIO;
+
+	/*
+	 * Write data to mailbox, covert data into LE format.
+	 * also mailbox is 4 byte deep, we need to write 4 byte always
+	 *
+	 * First byte of message is used to generate interrupt as well as
+	 * serve as command id.
+	 * Therefore first four byte of message part are written at last.
+	 */
+	for (count = (msg_size + 1) / 4; count >= 0; count--) {
+		*(tmp_i + count) = cpu_to_le32(*(tmp_i + count));
+		lpm_write32(lpm_drv, 1, (MBX_WRITE_STATUS(1 + count)),
+				    *(tmp_i + count));
+	}
+
+	return err;
+}
+
+/**
+ * lpm_get_response() - To get SBC response
+ * @response:	response of SBC
+ *
+ * This function is to get SBC response in polling mode
+ * This will be called when interrupts are disabled and we
+ * still need to get response from SBC.
+ *
+ * Return - 0 on success
+ * Return - 1 when SBC firmware is not responding
+ */
+static int lpm_get_response(struct st_lpm_driver_data *lpm_drv,
+	struct lpm_message *response)
+{
+	int count, i;
+	u32 msg_read1[4];
+
+	/* Poll time of 1 Second is good enough to see SBC reply */
+	for (count = 0; count < 100; count++) {
+		msg_read1[0] = lpm_read32(lpm_drv, 1, MBX_READ_STATUS(1));
+		msg_read1[0] = cpu_to_le32(msg_read1[0]);
+		/* If we received a reply then break the loop */
+		if (msg_read1[0] & 0xFF)
+			break;
+		mdelay(10);
+	}
+
+	/* If no reply within 1 second then firmware is not responding */
+	if (count == 100) {
+		dev_err(lpm_drv->dev, "count %d value %x\n",
+				count, msg_read1[0]);
+		return 1;
+	}
+
+	/* Get other data from mailbox */
+	for (i = 1; i < 4; i++) {
+		msg_read1[i] = lpm_read32(lpm_drv, 1, MBX_READ_STATUS(1 + i));
+		msg_read1[i] = cpu_to_le32(msg_read1[i]);
+	}
+	/* Copy data received from mailbox*/
+	memcpy(&lpm_drv->fw_reply_msg, (void *)msg_read1, 16);
+	lpm_write32(lpm_drv, 1, MBX_READ_CLR_STATUS1, 0xFFFFFFFF);
+
+	return 0;
+}
+
+/**
+ * lpm_exchange_msg() - Internal function  used for message exchange with SBC
+ * @send_msg:	message to send
+ * @response:	response from SBC firmware
+ *
+ * This function can be called in three contexts
+ * One when reply from SBC is expected for this command
+ * Second when reply from SBC is not expected
+ * Third when called from interrupt disabled but reply is expected
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+*/
+static int lpm_exchange_msg(struct lpm_message *command,
+	struct lpm_message *response, void *data)
+{
+	struct st_lpm_driver_data *lpm_drv = data;
+	struct lpm_message lpm_msg = {0};
+	int err = 0, data_size;
+	int reply_type =  SBC_REPLY_YES;
+
+	dev_dbg(lpm_drv->dev, "%s\n", __func__);
+
+	/*
+	 * Lock the mailbox, prevent other caller to access MB write
+	 * In case API is called with interrupt disabled from Linux PM
+	 * try to lock mutex.
+	 */
+	if (irqs_disabled()) {
+		err = mutex_trylock(&lpm_drv->mutex);
+		reply_type = SBC_REPLY_NO_IRQ;
+		if (!err)
+			return -EAGAIN;
+	} else {
+		mutex_lock(&lpm_drv->mutex);
+		if (response == NULL)
+			reply_type = SBC_REPLY_NO;
+	}
+
+	lpm_msg.command_id = command->command_id;
+
+	if (lpm_msg.command_id & LPM_MSG_REPLY || command->transaction_id)
+		lpm_msg.transaction_id = command->transaction_id;
+	else
+		lpm_msg.transaction_id = lpm_drv->glbtransaction_id++;
+
+	/* Copy data into mailbox message */
+	data_size = st_lpm_get_command_data_size(command->command_id);
+	if (data_size)
+		memcpy(lpm_msg.buf, command->buf, data_size);
+
+	/* Print message information for debug purpose */
+	dev_dbg(lpm_drv->dev, "Sending msg {%x, %x}\n", lpm_msg.command_id,
+		lpm_msg.transaction_id);
+
+	lpm_drv->reply_from_sbc = 0;
+
+	/* Send message to mailbox write */
+	err = lpm_send_msg(lpm_drv, &lpm_msg, data_size);
+
+	if (unlikely(err < 0)) {
+		dev_err(lpm_drv->dev, "firmware not loaded\n");
+		goto exit_fun;
+	}
+
+	switch (reply_type) {
+	case SBC_REPLY_NO_IRQ:
+		err = lpm_get_response(lpm_drv, response);
+		if (err) /* f/w timed out to give a response */
+			err = -ETIMEDOUT;
+		break;
+	case  SBC_REPLY_YES:
+		/*
+		 * wait for response here
+		 * In case of signal, we can get negative value
+		 * In such case wait till timeout or response from SBC
+		 */
+		do {
+			err = wait_event_interruptible_timeout(
+				lpm_drv->wait_queue,
+				lpm_drv->reply_from_sbc == 1,
+				msecs_to_jiffies(100));
+		} while (err < 0);
+
+		if (err == 0) /* means, wait ended because of timeout */
+			err = -ETIMEDOUT;
+		/*
+		 * if err is major than 0, this means condition evaluated to
+		 * true before timeout occurred. But that means there is no
+		 * error.
+		 */
+		if (err > 0)
+			err = 0;
+		break;
+	case SBC_REPLY_NO:
+		goto exit_fun;
+		break;
+	}
+
+	dev_dbg(lpm_drv->dev, "recd reply  %x {%x, %x }\n", err,
+		lpm_drv->fw_reply_msg.command_id,
+	lpm_drv->fw_reply_msg.transaction_id);
+
+	if (unlikely(err ==  -ETIMEDOUT)) {
+		dev_err(lpm_drv->dev, "f/w is not responding\n");
+		err = -EAGAIN;
+		goto exit_fun;
+	}
+
+	BUG_ON(!(lpm_drv->fw_reply_msg.command_id & LPM_MSG_REPLY));
+
+	memcpy(response, &lpm_drv->fw_reply_msg,
+	       sizeof(struct lpm_message));
+
+	if (lpm_msg.transaction_id == lpm_drv->fw_reply_msg.transaction_id) {
+		if (response->command_id == LPM_MSG_ERR) {
+			dev_err(lpm_drv->dev,
+				"Firmware error code %d\n", response->buf[1]);
+			/*
+			 * Firmware does not support this command
+			 * therefore firmware gave error.
+			 * In such cases, return EREMOTEIO as firmware error
+			 * code is not yet decided.
+			 * To Do
+			 * conversion of firmware error code into Linux world
+			 */
+			err = -EREMOTEIO;
+		}
+		/* There is possibility we might get response for large msg. */
+		if (response->command_id == LPM_MSG_BKBD_READ)
+			dev_dbg(lpm_drv->dev, "Got in reply a big message\n");
+	} else {
+		/*
+		 * Different trans id is expected from SBC as big messages are
+		 * encapsulated into LPM_MSG_BKBD_WRIRE message.
+		 */
+		dev_dbg(lpm_drv->dev,
+			"Received ID %x\n", response->transaction_id);
+	}
+
+exit_fun:
+	mutex_unlock(&lpm_drv->mutex);
+
+	return err;
+}
+
+/**
+ * lpm_send_big_message() - To send big message over SBC DMEM
+ * @size:	size of message
+ * @offset:	offset
+ * @sbc_msg:	buffer pointer
+ *
+ * This function is used to send large messages(>LPM_MAX_MSG_DATA)
+ * using SBC DMEM.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+ */
+static int lpm_write_bulk(u16 size, const char *sbc_msg, void *data,
+			  int *offset_dmem)
+{
+	struct st_lpm_driver_data *lpm_drv = data;
+	int err = 0;
+	unsigned int offset;
+	struct lpm_message command = {
+		.command_id = LPM_MSG_LGWR_OFFSET,
+	};
+	struct lpm_message response = {0};
+
+	if (!offset_dmem) {
+		put_unaligned_le16(size, command.buf);
+
+		err = lpm_exchange_msg(&command, &response, lpm_drv);
+
+		if (err)
+			return err;
+
+		/* Get the offset in SBC memory */
+		offset = get_unaligned_le32(&response.buf[2]);
+	} else {
+		offset = *offset_dmem;
+	}
+
+	/* Copy message in SBC memory */
+	if (size == sizeof(unsigned long))
+		writel(*((unsigned long *)sbc_msg),
+		       lpm_drv->iomem_base[0] + DATA_OFFSET + offset);
+	else
+		memcpy_toio(lpm_drv->iomem_base[0] + DATA_OFFSET + offset,
+			    sbc_msg, size);
+
+	if (!offset_dmem) {
+		/* Send this big message */
+		put_unaligned_le16(size, command.buf);
+		put_unaligned_le32(offset, &command.buf[2]);
+		command.command_id = LPM_MSG_BKBD_WRITE;
+		return lpm_exchange_msg(&command, &response, lpm_drv);
+	}
+
+	return 0;
+}
+
+static int lpm_read_bulk(u16 size, u16 offset, char *msg, void *data)
+{
+	struct st_lpm_driver_data *lpm_drv = data;
+
+	memcpy_fromio(msg,
+		offset + DATA_OFFSET + lpm_drv->iomem_base[0], size);
+
+	return 0;
+}
+
+/**
+ * lpm_write_edid_info() - To send edid info over SBC DMEM
+ * @edid_buf:	EDID info buffer pointer
+ * @block_num:	Block number to read
+ * @data:	pointer the the st_lpm_driver_data structure
+ *
+ * This function is used to send EDID info message to LPM
+ * using SBC DMEM.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+*/
+static int lpm_write_edid_info(u8 *edid_buf, u8 block_num, void *data)
+{
+	struct st_lpm_driver_data *lpm_drv = data;
+	int err = 0;
+	u32 offset;
+	struct lpm_message command = {0};
+	struct lpm_message response = {0};
+
+	if (!lpm_check_fw_version(&lpm_drv->fw_ver, LPM_EDID)) {
+		dev_warn(lpm_drv->dev,
+			 "This LPM Fw does not support EDID service\n");
+		return -EINVAL;
+	}
+
+	if (block_num > ST_LPM_EDID_MAX_BLK_NUM) {
+		dev_err(lpm_drv->dev, "Block number is out of range\n");
+		return -EINVAL;
+	}
+
+	/* Request an offset to copy EDID info to SBC */
+	command.command_id = LPM_MSG_LGWR_OFFSET;
+	put_unaligned_le16(ST_LPM_EDID_BLK_SIZE, command.buf);
+
+	err = lpm_exchange_msg(&command, &response, lpm_drv);
+	if (err)
+		return err;
+
+	offset = get_unaligned_le32(&response.buf[2]);
+
+	/* Copy message in SBC memory */
+	memcpy_toio(lpm_drv->iomem_base[0] + DATA_OFFSET + offset,
+		    (const void *)edid_buf, ST_LPM_EDID_BLK_SIZE);
+
+	/* Inform SBC EDID Info are available for copy
+	 * to EDID Info SBC DMEM dedicated space
+	 */
+	command.command_id = LPM_MSG_EDID_INFO,
+	command.buf[0] = ST_LPM_EDID_BLK_SIZE;
+	command.buf[1] = block_num;
+	put_unaligned_le32(offset, &command.buf[2]);
+	err = lpm_exchange_msg(&command, &response, lpm_drv);
+	if (err || response.buf[0] != 0 ||
+	    response.buf[1] != command.buf[1])
+		return -EIO;
+
+	/* Send the 0xFF block number to indicates end of EDID info */
+	command.command_id = LPM_MSG_EDID_INFO,
+	command.buf[0] = ST_LPM_EDID_BLK_SIZE;
+	command.buf[1] = ST_LPM_EDID_BLK_END;
+	command.buf[2] = 0;
+	err = lpm_exchange_msg(&command, &response, lpm_drv);
+	if (err || response.buf[0] != 0 ||
+	    response.buf[1] != ST_LPM_EDID_BLK_END)
+		return -EIO;
+
+	return 0;
+}
+
+/**
+ * lpm_read_edid_info() - To send edid info over SBC DMEM
+ * @edid_buf:	EDID info buffer pointer
+ * @block_num:	Block number to read
+ * @data:	Pointer to the st_lpm_driver_data structure
+ *
+ * This function is used to request EDID info message from LPM
+ * REMARK: As EDID read will return 4 * 128Byte of data,
+ * edid_buf should point on a memory zone big enough to store
+ * these EDID info data.
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+*/
+static int lpm_read_edid_info(u8 *edid_buf, u8 block_num, void *data)
+{
+	struct st_lpm_driver_data *lpm_drv = data;
+	int err = 0;
+	u32 offset;
+	struct lpm_message command = {0};
+	struct lpm_message response = {0};
+
+	if (!lpm_check_fw_version(&lpm_drv->fw_ver, LPM_EDID)) {
+		dev_warn(lpm_drv->dev,
+			 "This LPM Fw does not support EDID service\n");
+		return -EINVAL;
+	}
+
+	if (block_num > ST_LPM_EDID_MAX_BLK_NUM) {
+		dev_err(lpm_drv->dev, "Block number is out of range\n");
+		return -EINVAL;
+	}
+
+	/* Send the EDID message to inform SBC EDID info are available */
+	command.command_id = LPM_MSG_EDID_INFO,
+	command.buf[0] = 0;
+	command.buf[1] = block_num;
+	err = lpm_exchange_msg(&command, &response, lpm_drv);
+	if (err || response.buf[0] != ST_LPM_EDID_BLK_SIZE ||
+	    response.buf[1] != command.buf[1])
+		return -EIO;
+	offset = get_unaligned_le32(&response.buf[2]);
+	memcpy_fromio(edid_buf, lpm_drv->iomem_base[0] + DATA_OFFSET + offset,
+		      ST_LPM_EDID_BLK_SIZE);
+
+	return 0;
+}
+
+/**
+ * lpm_reload_fw_prepare() - To prepare SBC for Fw reload
+ * @data:	Pointer to the st_lpm_driver_data structure
+ *
+ * This function is used to prepare SBC in order to reload its Fw
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+*/
+static int lpm_reload_fw_prepare(void *data)
+{
+	struct st_lpm_driver_data *lpm_drv = data;
+	struct st_lpm_adv_feature feature;
+	int err = 0, i = 0;
+	u32 power_status;
+
+	if (!lpm_check_fw_version(&lpm_drv->fw_ver, LPM_FW_RELOAD)) {
+		dev_warn(lpm_drv->dev, "FW reload not supported\n");
+		return -EOPNOTSUPP;
+	}
+
+	dev_dbg(lpm_drv->dev, "Go for SBC IDLE\n");
+
+	mutex_lock(&lpm_drv->fwlock);
+
+	/* Put SBC in Idle mode for reload operation */
+	feature.feature_name = ST_LPM_SBC_IDLE;
+	feature.params.set_params[0] = 0x55;
+	feature.params.set_params[1] = 0xAA;
+
+	st_lpm_set_adv_feature(1, &feature);
+
+	/* Wait till SBC is in IDLE */
+	do {
+		power_status = readl(lpm_drv->iomem_base[2] + LPM_POWER_STATUS);
+	} while (((power_status & XP70_IDLE_MODE) == 0) && (i++ < 1000));
+
+	if (power_status == 0) {
+		dev_info(lpm_drv->dev, "Failed to put SBC in Idle\n");
+		mutex_unlock(&lpm_drv->fwlock);
+		return -ETIMEDOUT;
+	}
+
+	dev_dbg(lpm_drv->dev, "SBC is in IDLE\n");
+
+	/* Exit SBC from Idle mode to load new Fw data */
+	writel(BIT(1), lpm_drv->iomem_base[2]);
+
+	i = 0;
+
+	/* Wait SBC comes out of Idle */
+	do {
+		power_status = readl(lpm_drv->iomem_base[2] + LPM_POWER_STATUS);
+	} while (((power_status & XP70_IDLE_MODE) != 0) && (i++ < 1000));
+
+	if (power_status != 0) {
+		dev_info(lpm_drv->dev, "SBC not ready for new Fw\n");
+		mutex_unlock(&lpm_drv->fwlock);
+		return -ETIMEDOUT;
+	}
+
+	lpm_drv->fwstatus = false;
+
+	mutex_unlock(&lpm_drv->fwlock);
+
+	dev_dbg(lpm_drv->dev, "SBC is ready for new Fw\n");
+
+	return err;
+}
+
+/**
+ * lpm_start_loaded_fw() - To start SBC for loaded Fw
+ * @data:	Pointer to the st_lpm_driver_data structure
+ *
+ * This function is used to start SBC after a Fw has been loaded
+ *
+ * Return - 0 on success
+ * Return - negative error code on failure.
+*/
+static int lpm_start_loaded_fw(void *data)
+{
+	struct st_lpm_driver_data *lpm_drv = data;
+	int err, i;
+
+	dev_info(lpm_drv->dev, "Booting SBC Firmware...\n");
+
+	mutex_lock(&lpm_drv->fwlock);
+
+	writel(3, lpm_drv->iomem_base[2]);
+	mdelay(10);
+	writel(1, lpm_drv->iomem_base[2]);
+
+	lpm_drv->sbc_state = ST_LPM_SBC_BOOT;
+	lpm_write32(lpm_drv, 1, MBX_INT_SET_ENABLE, 0xFF);
+
+	/* get response from firmware */
+	for (i = 0; i < 10; i++) {
+		mdelay(100);
+		err = st_lpm_get_fw_state(&lpm_drv->sbc_state);
+		if (err == 0 && lpm_drv->sbc_state == ST_LPM_SBC_RUNNING)
+			break;
+	}
+
+	if (err) {
+		dev_err(lpm_drv->dev, "Failed to start SBC Fw\n");
+		mutex_unlock(&lpm_drv->fwlock);
+		return err;
+	}
+
+	lpm_drv->fwstatus = true;
+
+	lpm_sec_init(lpm_drv);
+
+	st_lpm_notify(ST_LPM_GPIO_WAKEUP);
+
+	mutex_unlock(&lpm_drv->fwlock);
+
+	dev_info(lpm_drv->dev, "SBC Fw booted.\n");
+
+	return 0;
+}
+
+static int lpm_offset_dmem(enum st_lpm_sbc_dmem_offset_type type, void *data)
+{
+	struct st_lpm_driver_data *lpm_drv = data;
+
+	if (!lpm_drv->data_ptr)
+		return -EINVAL;
+
+	return  lpm_drv->data_ptr[type];
+}
+
+static void lpm_ir_enable(bool enable, void *data)
+{
+	struct st_lpm_driver_data *lpm_drv = data;
+	u32 lpm_config_1 = lpm_read32(lpm_drv, 2, LPM_CONFIG_1_OFFSET);
+
+	if (enable)
+		lpm_config_1 |= IRB_ENABLE;
+	else
+		lpm_config_1 &= ~IRB_ENABLE;
+
+	lpm_write32(lpm_drv, 2, LPM_CONFIG_1_OFFSET, lpm_config_1);
+}
+
+static struct st_lpm_ops st_lpm_mb_ops = {
+	.exchange_msg = lpm_exchange_msg,
+	.write_bulk = lpm_write_bulk,
+	.read_bulk = lpm_read_bulk,
+	.get_dmem_offset = lpm_offset_dmem,
+	.config_reboot = lpm_config_reboot,
+	.ir_enable = lpm_ir_enable,
+	.write_edid = lpm_write_edid_info,
+	.read_edid = lpm_read_edid_info,
+	.reload_fw_prepare = lpm_reload_fw_prepare,
+	.start_loaded_fw = lpm_start_loaded_fw,
+	.setup_tracedata = lpm_setup_tracedata,
+};
+
+static struct of_device_id lpm_child_match_table[] = {
+	{ .compatible = "st,rtc-sbc", },
+	{ .compatible = "st,wakeup-pins", },
+	{ }
+};
+
+#ifndef CONFIG_SBC_FW_LOADED_BY_PBL
+static int lpm_load_fw(struct st_lpm_driver_data *lpm_drv)
+{
+	int i;
+	struct elf64_hdr *ehdr;
+	struct elf64_phdr *phdr;
+	const u8 *elf_data;
+
+	signed long offset;
+	unsigned long size, add;
+	int dmem_offset;
+
+	const struct firmware *fw = lpm_drv->fw;
+
+	if (unlikely(!lpm_drv->fw)) {
+		dev_info(lpm_drv->dev, "LPM Firmware not found.");
+		dev_info(lpm_drv->dev, "Controller Passive Standby not operational.");
+		dev_info(lpm_drv->dev, "Use sysfs FW trigger to load and activate LPM Firmware\n");
+		return -EINVAL;
+	}
+
+	dev_info(lpm_drv->dev, "SBC Fw %s Found, Loading ...\n",
+		 lpm_drv->fw_name);
+
+	mutex_lock(&lpm_drv->fwlock);
+
+	/**
+	 * Now load the different sections of the elf to the appropriate device
+	 * addresses.
+	 */
+	elf_data = fw->data;
+	ehdr = (struct elf64_hdr *)elf_data;
+	phdr = (struct elf64_phdr *)(elf_data + ehdr->e_phoff);
+
+	dmem_offset = lpm_drv->data_ptr[ST_SBC_DMEM_PEN_HOLDING_VAR];
+
+	for (i = 0; i < ehdr->e_phnum; i++, phdr++) {
+		if (phdr->p_type != PT_LOAD)
+			continue;
+
+		if (phdr->p_paddr != SBC_PRG_MEMORY_ELF_MARKER) {
+			size =  phdr->p_memsz;
+			add = phdr->p_paddr;
+			if (add < dmem_offset && (dmem_offset < (add + size))) {
+				dmem_offset += DMEM_PEN_HOLDING_CODE_SZ;
+				offset = DATA_OFFSET + dmem_offset;
+				memcpy_toio(lpm_drv->iomem_base[0] + offset,
+					elf_data + phdr->p_offset + dmem_offset,
+					size - dmem_offset);
+				continue;
+			}
+			offset = DATA_OFFSET + phdr->p_paddr;
+		} else
+			offset = lpm_drv->pmem_offset;
+
+		size = phdr->p_memsz;
+
+		memcpy_toio(lpm_drv->iomem_base[0] + offset,
+			    elf_data + phdr->p_offset, size);
+	}
+
+	mutex_unlock(&lpm_drv->fwlock);
+
+	dev_info(lpm_drv->dev, "SBC Fw %s loaded.\n", lpm_drv->fw_name);
+	return 0;
+}
+
+static int lpm_firmware_cb(const struct firmware *fw,
+		struct st_lpm_driver_data *lpm_drv)
+{
+	int err = 1;
+
+	lpm_drv->fw = fw;
+
+	err = lpm_load_fw(lpm_drv);
+	if (err >= 0)
+		err = lpm_start_loaded_fw(lpm_drv);
+
+	if (err >= 0)
+		of_platform_populate(lpm_drv->dev->of_node,
+				     lpm_child_match_table,
+				     NULL, lpm_drv->dev);
+
+	release_firmware(lpm_drv->fw);
+	return err;
+}
+#endif
+
+static ssize_t st_lpm_show_version(struct device *dev,
+				struct device_attribute *attr, char *buf)
+{
+	struct st_lpm_version driver_ver;
+	struct st_lpm_version fw_ver;
+	int err = 0;
+
+	dev_dbg(dev, "SBC st_lpm_show_version\n");
+
+	/* Print firmware version information */
+	err = st_lpm_get_version(&driver_ver, &fw_ver);
+
+	if (err < 0)
+		return 0;
+
+	return snprintf(buf, PAGE_SIZE, "%d.%d.%d (%02d-%02d-20%02d)\n",
+			 fw_ver.major_soft,
+			 fw_ver.minor_soft,
+			 fw_ver.patch_soft,
+			 fw_ver.day,
+			 fw_ver.month,
+			 fw_ver.year);
+}
+
+
+static ssize_t st_lpm_show_wakeup(struct device *dev,
+				struct device_attribute *attr, char *buf)
+{
+	int i;
+	char data[2] = {0, 0};
+	char wkup_dev_name[50] = "";
+	enum st_lpm_wakeup_devices wakeup_device = 0;
+	s16 ValidSize;
+
+	if (st_lpm_get_wakeup_device(&wakeup_device) < 0)
+		dev_err(dev, "<%s> firmware not responding\n", __func__);
+
+	if (ST_LPM_WAKEUP_PIO & wakeup_device)
+		if (st_lpm_get_wakeup_info(ST_LPM_WAKEUP_PIO, &ValidSize,
+					   2, data) < 0)
+			dev_err(dev, "<%s> trigger data message failed\n",
+					__func__);
+
+	for (i = 0; i < sizeof(wkup_dev_name_tab) /
+			sizeof(struct st_lpm_wkup_dev_name); i++) {
+		if (wkup_dev_name_tab[i].index & wakeup_device) {
+			snprintf(wkup_dev_name, sizeof(wkup_dev_name) - 1, "%s",
+				 wkup_dev_name_tab[i].name);
+		}
+	}
+
+	return snprintf(buf, PAGE_SIZE, "{%s} 0x%x 0x%x\n", wkup_dev_name,
+			data[0], data[1]);
+}
+
+#ifndef CONFIG_SBC_FW_LOADED_BY_PBL
+static ssize_t st_lpm_load_fw(struct device *dev,
+				struct device_attribute *attr,
+				const char *buf, size_t count)
+{
+	struct st_lpm_driver_data *lpm_drv = dev_get_drvdata(dev);
+	int ret;
+	bool first_load = true;
+
+	ret = snprintf(lpm_drv->fw_name, count, "%s", buf);
+
+	BUG_ON(ret >= sizeof(lpm_drv->fw_name));
+
+	dev_info(lpm_drv->dev, "About to load new firmware (%s)\n",
+			 lpm_drv->fw_name);
+
+	/* Check if fw exits before switching SBC to Idle Mode */
+	ret = request_firmware(&lpm_drv->fw, lpm_drv->fw_name, lpm_drv->dev);
+	if (ret) {
+		dev_warn(lpm_drv->dev, "LPM Fw %s not found, abort\n",
+			lpm_drv->fw_name);
+		goto exit;
+	}
+
+	if (lpm_drv->fwstatus) {
+		ret = lpm_reload_fw_prepare(lpm_drv);
+		if (ret < 0)
+			goto exit;
+
+		first_load = false;
+	}
+
+	ret = lpm_load_fw(lpm_drv);
+	if (ret >= 0)
+		ret = lpm_start_loaded_fw(lpm_drv);
+
+	if (ret >= 0) {
+		if (first_load)
+			of_platform_populate(lpm_drv->dev->of_node,
+					     lpm_child_match_table,
+					     NULL, lpm_drv->dev);
+
+		ret = count;
+	}
+
+exit:
+	release_firmware(lpm_drv->fw);
+	return ret;
+}
+
+static DEVICE_ATTR(loadfw, S_IWUSR, NULL, st_lpm_load_fw);
+#endif
+
+#ifdef CONFIG_DEBUG_FS
+static int lpm_trace_data_config_show(struct seq_file *s, void *unused)
+{
+	struct st_lpm_driver_data *lpm_drv = s->private;
+	int i;
+
+	dev_info(lpm_drv->dev, "Current trace config:\n");
+	for (i = 0; i < 16; i++) {
+		if (lpm_drv->trace_data_value & trace_module_tab[i].index)
+			dev_info(lpm_drv->dev, "%s\n",
+				 trace_module_tab[i].name);
+	}
+
+	return 0;
+}
+
+static int lpm_trace_data_config_open(struct inode *inode, struct file *file)
+{
+	return single_open(file, lpm_trace_data_config_show, inode->i_private);
+}
+
+static ssize_t lpm_trace_data_config_write(struct file *file,
+					   const char __user *ubuf,
+					   size_t count, loff_t *ppos)
+{
+	struct seq_file	*s = file->private_data;
+	struct st_lpm_driver_data *lpm_drv = s->private;
+	int ret;
+	unsigned int trace_module;
+
+	ret = sscanf(ubuf, "0x%X", &trace_module);
+
+	if (!ret)
+		dev_info(lpm_drv->dev, "Format should be 0xABCD\n");
+
+	/* Mask TIMER traces as it produces SBC Fw not responding */
+	lpm_setup_tracedata(trace_module & ~ST_LPM_TRACE_TIMER, lpm_drv);
+
+	return count;
+}
+
+static const struct file_operations lpm_trace_data_config_fops = {
+	.open			= lpm_trace_data_config_open,
+	.write			= lpm_trace_data_config_write,
+	.read			= seq_read,
+	.llseek			= seq_lseek,
+	.release		= single_release,
+};
+#endif
+
+static DEVICE_ATTR(wakeup, S_IRUGO, st_lpm_show_wakeup, NULL);
+static DEVICE_ATTR(version, S_IRUGO, st_lpm_show_version, NULL);
+
+static int st_sbc_get_devtree_pdata(struct device *dev,
+				    struct st_sbc_platform_data *pdata,
+				    struct st_lpm_driver_data *lpm_drv)
+{
+	int result;
+	struct device_node *node;
+	enum of_gpio_flags flags;
+	const char *fw_name;
+
+	node = dev->of_node;
+	if (node == NULL)
+		return -ENODEV;
+
+	memset(pdata, 0, sizeof(*pdata));
+
+	if (!of_find_property(node, "gpios", NULL)) {
+		dev_err(dev, "LPM without power-on-gpio\n");
+		return -ENODEV;
+	}
+
+	result = of_get_gpio_flags(node, 0, &flags);
+	if (result < 0)
+		return result;
+
+	pdata->gpio = (unsigned int)result;
+	pdata->trigger_level = !(flags & OF_GPIO_ACTIVE_LOW);
+
+	if (of_property_read_string(node, "st,fw_name", &fw_name))
+		return -ENODEV;
+
+	result = snprintf(lpm_drv->fw_name, sizeof(lpm_drv->fw_name),
+			  "%s", fw_name);
+
+	BUG_ON(result >= sizeof(lpm_drv->fw_name));
+
+	return 0;
+}
+
+#ifdef CONFIG_PM_SLEEP
+static void st_lpm_check_wakeup_device(
+	struct st_lpm_driver_data *lpm_drv,
+	struct device *dev, unsigned int enable)
+{
+	int bit = 0;
+
+	pr_info("sti: -> device %s as wakeup %s\n", dev_name(dev),
+		(enable ? "enabled" : "disabled"));
+
+	if (strstr(dev_name(dev), "rc"))
+		bit = ST_LPM_WAKEUP_IR;
+	else if (strstr(dev_name(dev), "dwmac"))
+		bit = ST_LPM_WAKEUP_WOL;
+	else if (strstr(dev_name(dev), "st-keyscan"))
+		bit = ST_LPM_WAKEUP_FRP;
+	else if (strstr(dev_name(dev), "ttyAS"))
+		bit = ST_LPM_WAKEUP_ASC;
+	else if (strstr(dev_name(dev), "rtc_sbc"))
+		bit = ST_LPM_WAKEUP_RTC;
+	else if (strstr(dev_name(dev), "stm_cec"))
+		bit = ST_LPM_WAKEUP_CEC;
+	else if (strstr(dev_name(dev), "gpio_keys"))
+		bit = ST_LPM_WAKEUP_PIO;
+	else if (strstr(dev_name(dev), "st_wakeup_pin.pio"))
+		bit = ST_LPM_WAKEUP_PIO;
+	else if (strstr(dev_name(dev), "st_wakeup_pin.ext_it"))
+		bit = ST_LPM_WAKEUP_EXT;
+	else if (strstr(dev_name(dev), "hdmi"))
+		bit = ST_LPM_WAKEUP_HPD;
+	else {
+		dev_dbg(lpm_drv->dev,
+			"%s: device wakeup not managed via lpm\n",
+			dev_name(dev));
+		return;
+	}
+
+	if (enable)
+		lpm_drv->wakeup_bitmap |= bit;
+	else
+		lpm_drv->wakeup_bitmap &= ~bit;
+}
+
+static int sti_wakeup_notifier(struct notifier_block *nb,
+	unsigned long action, void *data)
+{
+	struct st_lpm_driver_data *lpm_drv =
+		container_of(nb, struct st_lpm_driver_data, wakeup_cb);
+	struct device *dev = data;
+
+	switch (action) {
+	case WAKEUP_SOURCE_ADDED:
+	case WAKEUP_SOURCE_REMOVED:
+		st_lpm_check_wakeup_device(lpm_drv, dev,
+			action == WAKEUP_SOURCE_ADDED ? 1UL : 0UL);
+		break;
+	}
+
+	return NOTIFY_OK;
+}
+#else
+static inline int sti_wakeup_notifier(struct notifier_block *nb,
+	unsigned long action, void *data)
+{
+	return NOTIFY_OK;
+}
+#endif
+
+static int st_lpm_probe(struct platform_device *pdev)
+{
+	struct st_lpm_driver_data *lpm_drv;
+	const struct st_sbc_platform_data *pdata = pdev->dev.platform_data;
+	struct st_sbc_platform_data alt_pdata;
+	struct resource *res;
+	int err = 0;
+	int count = 0;
+	u32 confreg;
+	unsigned long offset_dtu, offset_penholding;
+#ifdef CONFIG_DEBUG_FS
+	struct dentry *root;
+#endif
+
+	dev_dbg(&pdev->dev, "st lpm probe\n");
+
+	lpm_drv = devm_kzalloc(&pdev->dev, sizeof(struct st_lpm_driver_data),
+				GFP_KERNEL);
+	if (unlikely(lpm_drv == NULL)) {
+		dev_err(lpm_drv->dev, "%s: Request memory failed\n", __func__);
+		return -ENOMEM;
+	}
+
+	lpm_drv->dev = &pdev->dev;
+	if (!pdata) {
+		err = st_sbc_get_devtree_pdata(&pdev->dev, &alt_pdata, lpm_drv);
+		if (err)
+			return err;
+		pdata = &alt_pdata;
+	}
+
+	lpm_drv->data_ptr = of_match_node(pdev->dev.driver->of_match_table,
+			 pdev->dev.of_node)->data;
+
+	lpm_drv->power_on_gpio = pdata->gpio;
+	lpm_drv->trigger_level = pdata->trigger_level;
+
+	err = devm_gpio_request(&pdev->dev, lpm_drv->power_on_gpio,
+				"lpm_power_on_gpio");
+	if (err) {
+		dev_err(lpm_drv->dev, "%s: gpio_request failed\n", __func__);
+		return err;
+	}
+
+	err = gpio_direction_output(lpm_drv->power_on_gpio,
+			lpm_drv->trigger_level);
+	if (err) {
+		dev_err(lpm_drv->dev, "%s: gpio_direction_output failed\n",
+				__func__);
+		return err;
+	}
+
+	for (count = 0; count < 3; count++) {
+		res = platform_get_resource(pdev, IORESOURCE_MEM, count);
+		if (!res)
+			return -ENODEV;
+
+		dev_dbg(lpm_drv->dev,
+			"mem:SBC res->start %x %x\n", res->start, res->end);
+		if (!devm_request_mem_region(&pdev->dev, res->start,
+					     resource_size(res), "st-lpm")) {
+			dev_err(lpm_drv->dev, "%s: Request mem 0x%x region failed\n",
+			       __func__, res->start);
+			return -ENOMEM;
+		}
+
+		lpm_drv->iomem_base[count] = devm_ioremap_nocache(&pdev->dev,
+							res->start,
+							resource_size(res));
+		if (!lpm_drv->iomem_base[count]) {
+			dev_err(lpm_drv->dev, "%s: Request iomem 0x%x region failed\n",
+			       __func__, (unsigned int)res->start);
+			return -ENOMEM;
+		}
+		dev_dbg(lpm_drv->dev,
+			"lpm_add %x\n", (u32)lpm_drv->iomem_base[count]);
+	}
+
+	/* Read the pmem_offset from DT */
+	res = platform_get_resource_byname(pdev, IORESOURCE_MEM, "pmem");
+	if (!res)
+		return -ENODEV;
+
+	lpm_drv->pmem_offset = res->start;
+
+	/* Irq request */
+	res = platform_get_resource(pdev, IORESOURCE_IRQ, 0);
+	if (!res) {
+		dev_err(lpm_drv->dev, "%s irq resource %x not provided\n",
+			__func__, res->start);
+		return -ENODEV;
+	}
+
+	/* Semaphore initialization */
+	init_waitqueue_head(&lpm_drv->wait_queue);
+	mutex_init(&lpm_drv->mutex);
+
+	mutex_init(&lpm_drv->fwlock);
+
+	/*
+	 * Work struct init
+	 * lpm does not need dedicate work queue
+	 * use default queue
+	 */
+	if (devm_request_threaded_irq(&pdev->dev, res->start, lpm_isr,
+		lpm_threaded_isr, IRQF_NO_SUSPEND,
+		"st-lpm", (void *)lpm_drv) < 0) {
+		dev_err(lpm_drv->dev, "%s: Request stlpm irq not done\n",
+			__func__);
+		return -ENODEV;
+	}
+
+	/*set driver specific data */
+	platform_set_drvdata(pdev, lpm_drv);
+
+	/*
+	 * Program Mailbox for interrupt enable
+	 */
+	lpm_write32(lpm_drv, 1, MBX_INT_SET_ENABLE, 0xFF);
+	lpm_drv->sbc_state = ST_LPM_SBC_BOOT;
+
+	/* register wakeup notifier */
+	lpm_drv->wakeup_cb.notifier_call = sti_wakeup_notifier;
+	wakeup_source_notifier_register(&lpm_drv->wakeup_cb);
+
+	st_lpm_set_ops(&st_lpm_mb_ops, (void *)lpm_drv);
+
+	/* Check whether the f/w is  running */
+	confreg = readl(lpm_drv->iomem_base[2]);
+	if (confreg & BIT(0)) { /* SBC Fw is booted */
+		err = st_lpm_get_fw_state(&lpm_drv->sbc_state);
+
+		if (!err && lpm_drv->sbc_state == ST_LPM_SBC_RUNNING) {
+			lpm_drv->fwstatus = true;
+			lpm_sec_init(lpm_drv);
+			of_platform_populate(lpm_drv->dev->of_node,
+					     lpm_child_match_table,
+					     NULL, lpm_drv->dev);
+		} else {
+			dev_err(lpm_drv->dev,
+				"SBC Fw is not responding... Abort\n");
+			dev_info(lpm_drv->dev,
+				"Controller Passive Standby not operational.");
+			dev_info(lpm_drv->dev,
+				"Use sysfs FW trigger to load and activate LPM Firmware\n");
+		}
+	} else {
+#ifdef CONFIG_SBC_FW_LOADED_BY_PBL
+		dev_dbg(lpm_drv->dev, "SBC Firmware loaded but not booted\n");
+		err = lpm_start_loaded_fw(lpm_drv);
+		if (err) {
+			dev_err(lpm_drv->dev, "Failed to start SBC Fw\n");
+			return err;
+		}
+
+		of_platform_populate(lpm_drv->dev->of_node,
+				     lpm_child_match_table,
+				     NULL, lpm_drv->dev);
+
+#else
+		dev_dbg(lpm_drv->dev, "SBC Firmware loading requested\n");
+		/* Initiate the loading of the device f/w */
+		err = request_firmware_nowait(THIS_MODULE, 1, lpm_drv->fw_name,
+					      &pdev->dev, GFP_KERNEL,
+					      (struct st_lpm_driver_data *)
+					      lpm_drv,
+					      (void *)lpm_firmware_cb);
+		if (err)
+			return err;
+#endif
+	}
+
+	err = device_create_file(&pdev->dev, &dev_attr_wakeup);
+	if (err) {
+		dev_err(&pdev->dev, "Cannot create wakeup sysfs entry\n");
+		return err;
+	}
+
+	err = device_create_file(&pdev->dev, &dev_attr_version);
+	if (err) {
+		dev_err(&pdev->dev, "Cannot create version sysfs entry\n");
+		return err;
+	}
+
+#ifndef CONFIG_SBC_FW_LOADED_BY_PBL
+	err = device_create_file(&pdev->dev, &dev_attr_loadfw);
+	if (err) {
+		dev_err(&pdev->dev, "Cannot create loadfw sysfs entry\n");
+		return err;
+	}
+#endif
+
+#ifdef CONFIG_DEBUG_FS
+	root = debugfs_create_dir(dev_name(&pdev->dev), NULL);
+	if (!root)
+		return -ENOMEM;
+
+	if (!debugfs_create_file("trace_config", S_IRUGO | S_IWUSR, root,
+				 lpm_drv, &lpm_trace_data_config_fops))
+		return -ENOMEM;
+#endif
+	offset_dtu = st_lpm_get_dmem_offset(ST_SBC_DMEM_DTU);
+	offset_penholding = st_lpm_get_dmem_offset(ST_SBC_DMEM_PEN_HOLDING_VAR);
+	if (!(offset_dtu < 0 || offset_penholding < 0
+		|| offset_penholding < offset_dtu))
+		memset(lpm_drv->iomem_base[0] + DATA_OFFSET + offset_dtu,
+			0,
+			offset_penholding - offset_dtu);
+
+	return 0;
+}
+
+/**
+ * st_lpm_remove() - To free used resources
+ * @pdev:	device pointer
+ * Return code 0
+ */
+
+static int  st_lpm_remove(struct platform_device *pdev)
+{
+	struct st_lpm_driver_data *lpm_drv =
+		platform_get_drvdata(pdev);
+
+	dev_dbg(lpm_drv->dev, "st_lpm_remove\n");
+
+	return 0;
+}
+
+/*
+ * data array storing chip specific SBC-DMEM offsets
+ * currently defined only for 407 family SoCs
+ * [0] = offset of dtu buffer address in SBC-DMEM
+ * [1] = offset of CPS Tag in SBC-DMEM
+ * [2] = offset of pen holding variable in SBC-DMEM
+ */
+unsigned int stih407_family_lpm_data[] = {0x94, 0x84, 0xa4};
+unsigned int stih418_lpm_data[] = {0x98, 0x88, 0xb8};
+
+static struct of_device_id st_lpm_match[] = {
+	{
+		.compatible = "st,stih418-lpm",
+		.data = stih418_lpm_data,
+	},
+	{
+		.compatible = "st,stih407-family-lpm",
+		.data = stih407_family_lpm_data,
+	},
+	{
+		.compatible = "st,lpm",
+		.data = NULL,
+	},
+	{},
+};
+MODULE_DEVICE_TABLE(of, st_lpm_match);
+
+#ifdef IR_WAKEUP_KEY_SET
+static void st_lpm_setup_ir_init(void)
+{
+	static struct st_lpm_ir_keyinfo ir_key[2] = {
+	[0] = {
+		.ir_id = 8,
+		.time_period = 560,
+		.tolerance = 30,
+		.ir_key.key_index = 0x0,
+		.ir_key.num_patterns = 33,
+		.ir_key.fifo = {
+			[0] = {
+				.mark = 8960,
+				.symbol = 13440,
+			},
+			[1 ... 8] = {
+				.mark = 560,
+				.symbol = 1120,
+			},
+			[9 ... 15] = {
+				.mark = 560,
+				.symbol = 560 * 4,
+			},
+			[16 ... 24] = {
+				.mark = 560,
+				.symbol = 1120,
+			},
+			[25 ... 32] = {
+				.mark = 560,
+				.symbol = 560 * 4,
+			},
+			[33] = {
+				.mark = 560,
+				.symbol = 560 * 2,
+			},
+		},
+	},
+
+	[1] = {
+		.ir_id = 0x7,
+		.time_period = 900,
+		.tolerance = 30,
+		.ir_key.key_index = 0x2,
+		.ir_key.num_patterns = 10,
+		.ir_key.fifo = {
+			[0] = {
+				.mark = 900,
+				.symbol = 1800,
+			},
+			[1] = {
+				.mark = 1800,
+				.symbol = 2700,
+			},
+			[2] = {
+				.mark = 900,
+				.symbol = 2700,
+			},
+			[3] = {
+				.mark = 1800,
+				.symbol = 2700,
+			},
+			[4 ... 6] = {
+				.mark = 900,
+				.symbol = 1800,
+			},
+			[7] = {
+				.mark = 900,
+				.symbol = 2700,
+			},
+			[8] = {
+				.mark = 900,
+				.symbol = 1800,
+			},
+			[9] = {
+				.mark = 1800,
+				.symbol = 2700,
+			},
+		},
+		},
+	};
+	static int st_lpm_setup_ir_done_once;
+
+	if (st_lpm_setup_ir_done_once)
+		return;
+	/*
+	 * Work around for IR Red key wakeup
+	 * This workaround will be removed, once
+	 * proper IR module is written and loaded
+	 */
+	st_lpm_setup_ir(ARRAY_SIZE(ir_key), ir_key);
+	st_lpm_setup_ir_done_once = 1;
+}
+#else
+static void st_lpm_setup_ir_init(void)
+{
+}
+#endif
+
+#ifdef CONFIG_PM_SLEEP
+static int st_lpm_pm_suspend(struct device *dev)
+{
+	struct st_lpm_driver_data *lpm_drv = dev_get_drvdata(dev);
+	struct st_lpm_version *version;
+	u16 current_traces;
+
+	st_lpm_setup_ir_init();
+
+	if (!lpm_drv->wakeup_bitmap) {
+		/* don't suspend without wakeup device */
+		pr_err("No device is able to wakeup\n");
+		return -EINVAL;
+	}
+	st_lpm_set_wakeup_device(lpm_drv->wakeup_bitmap);
+
+	if (lpm_drv->trace_data_value &&
+	    !lpm_check_fw_version(&lpm_drv->fw_ver, LPM_SBC_TRACES_IN_SUSPEND)) {
+		version = &lpm_fw_ver_vs_services[LPM_SBC_TRACES_IN_SUSPEND];
+
+		dev_warn(lpm_drv->dev,
+			 "This LPM Fw does not support SBC traces during suspend\n");
+		dev_warn(lpm_drv->dev,
+			 "SBC traces during suspend available from LPM Fw v%d.%d.%d\n",
+			 version->major_soft, version->minor_soft,
+			 version->patch_soft);
+
+		current_traces = lpm_drv->trace_data_value;
+		lpm_setup_tracedata(0x0, lpm_drv);
+		lpm_drv->trace_data_value = current_traces;
+	}
+
+	lpm_config_reboot(ST_LPM_REBOOT_WITH_DDR_SELF_REFRESH, lpm_drv);
+
+	return 0;
+}
+
+static int st_lpm_pm_resume(struct device *dev)
+{
+	struct st_lpm_driver_data *lpm_drv = dev_get_drvdata(dev);
+
+	if (lpm_drv->trace_data_value &&
+	    !lpm_check_fw_version(&lpm_drv->fw_ver, LPM_SBC_TRACES_IN_SUSPEND))
+		lpm_setup_tracedata(lpm_drv->trace_data_value, lpm_drv);
+
+	/*
+	 * Request default value of EXIT_CPS, to be set while
+	 * exiting from non-CPS warm reset cases, such as
+	 * manual reset exit, WDT exit, shutdown exit.
+	 */
+	lpm_config_reboot(ST_LPM_REBOOT_WITH_DDR_OFF, lpm_drv);
+
+	return 0;
+}
+
+SIMPLE_DEV_PM_OPS(st_lpm_pm_ops, st_lpm_pm_suspend, st_lpm_pm_resume);
+#define ST_LPM_PM_OPS		(&st_lpm_pm_ops)
+#else
+#define ST_LPM_PM_OPS		NULL
+#endif
+
+static void st_lpm_shutdown(struct platform_device *pdev)
+{
+	struct st_lpm_driver_data *lpm_drv =
+		platform_get_drvdata(pdev);
+
+	static unsigned char reset_buf[] = LPM_DMEM_PEN_HOLD_VAR_RESET;
+	struct st_lpm_version *version;
+	u16 current_traces;
+	int offset;
+
+	st_lpm_setup_ir_init();
+
+	st_lpm_set_wakeup_device(lpm_drv->wakeup_bitmap);
+
+	if (lpm_drv->trace_data_value &&
+	    !lpm_check_fw_version(&lpm_drv->fw_ver, LPM_SBC_TRACES_IN_SUSPEND)) {
+		version = &lpm_fw_ver_vs_services[LPM_SBC_TRACES_IN_SUSPEND];
+
+		dev_warn(lpm_drv->dev,
+			 "This LPM Fw does not support SBC traces during suspend\n");
+		dev_warn(lpm_drv->dev,
+			 "SBC traces during suspend available from LPM Fw v%d.%d.%d\n",
+			 version->major_soft, version->minor_soft,
+			 version->patch_soft);
+
+		current_traces = lpm_drv->trace_data_value;
+		lpm_setup_tracedata(0x0, lpm_drv);
+		lpm_drv->trace_data_value = current_traces;
+	}
+
+	lpm_config_reboot(ST_LPM_REBOOT_WITH_DDR_OFF, lpm_drv);
+	offset = st_lpm_get_dmem_offset(ST_SBC_DMEM_PEN_HOLDING_VAR);
+	if (offset >= 0)
+		st_lpm_write_dmem(reset_buf, 4, offset);
+}
+
+static struct platform_driver st_lpm_driver = {
+	.driver = {
+		.name = "st-lpm",
+		.owner = THIS_MODULE,
+		.pm = ST_LPM_PM_OPS,
+		.of_match_table = of_match_ptr(st_lpm_match),
+	},
+	.probe = st_lpm_probe,
+	.remove = st_lpm_remove,
+	.shutdown = st_lpm_shutdown,
+};
+
+static int __init st_lpm_init(void)
+{
+	int err = 0;
+
+	err = platform_driver_register(&st_lpm_driver);
+	if (err)
+		pr_err("st-lpm driver fails on registrating (%x)\n" , err);
+	else
+		pr_info("st-lpm driver registered\n");
+
+	return err;
+}
+
+void __exit st_lpm_exit(void)
+{
+	pr_info("st-lpm driver removed\n");
+	platform_driver_unregister(&st_lpm_driver);
+}
+
+module_init(st_lpm_init);
+module_exit(st_lpm_exit);
+
+MODULE_AUTHOR("STMicroelectronics  <www.st.com>");
+MODULE_DESCRIPTION("lpm device driver for STMicroelectronics devices");
+MODULE_LICENSE("GPL");
Binary files a/drivers/lpm/st_lpm_mb.o and b/drivers/lpm/st_lpm_mb.o differ
diff -urNp a/drivers/regulator/Kconfig b/drivers/regulator/Kconfig
--- a/drivers/regulator/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/regulator/Kconfig	2019-10-05 22:10:00.259445000 +0100
@@ -693,6 +693,13 @@ config REGULATOR_TPS65910
 	help
 	  This driver supports TPS65910/TPS65911 voltage regulator chips.
 
+
+config REGULATOR_ST_PWM
+	tristate "STMicroelectronics PWM voltage regulator"
+	depends on ARCH_STI
+	help
+	 This driver supports ST's PWM controlled voltage regulators.
+
 config REGULATOR_TPS65912
 	tristate "TI TPS65912 Power regulator"
 	depends on (MFD_TPS65912_I2C || MFD_TPS65912_SPI)
@@ -750,5 +757,12 @@ config REGULATOR_WM8994
 	  This driver provides support for the voltage regulators on the
 	  WM8994 CODEC.
 
+config REGULATOR_ST_FLASHSS
+	tristate "STMicroelectronics FlashSS regulator"
+	depends on ARCH_STI && OF
+	help
+	  This driver provides support for the voltage regulators available
+	  inside the FlashSS embedded in some ST SoCs: e.g. STiH407/STiH410
+	  and STi8416.
 endif
 
diff -urNp a/drivers/regulator/Makefile b/drivers/regulator/Makefile
--- a/drivers/regulator/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/regulator/Makefile	2019-10-05 22:11:52.530087400 +0100
@@ -75,6 +75,7 @@ obj-$(CONFIG_REGULATOR_RT5033)	+= rt5033
 obj-$(CONFIG_REGULATOR_S2MPA01) += s2mpa01.o
 obj-$(CONFIG_REGULATOR_S2MPS11) += s2mps11.o
 obj-$(CONFIG_REGULATOR_S5M8767) += s5m8767.o
+obj-$(CONFIG_REGULATOR_ST_PWM) += st-pwm.o
 obj-$(CONFIG_REGULATOR_SKY81452) += sky81452-regulator.o
 obj-$(CONFIG_REGULATOR_STW481X_VMMC) += stw481x-vmmc.o
 obj-$(CONFIG_REGULATOR_TI_ABB) += ti-abb-regulator.o
@@ -98,6 +99,8 @@ obj-$(CONFIG_REGULATOR_WM831X) += wm831x
 obj-$(CONFIG_REGULATOR_WM8350) += wm8350-regulator.o
 obj-$(CONFIG_REGULATOR_WM8400) += wm8400-regulator.o
 obj-$(CONFIG_REGULATOR_WM8994) += wm8994-regulator.o
+obj-$(CONFIG_REGULATOR_ST_FLASHSS) += st-flashss.o
+
 
 
 ccflags-$(CONFIG_REGULATOR_DEBUG) += -DDEBUG
diff -urNp a/drivers/regulator/st-flashss.c b/drivers/regulator/st-flashss.c
--- a/drivers/regulator/st-flashss.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/regulator/st-flashss.c	2019-10-06 11:02:29.739262700 +0100
@@ -0,0 +1,280 @@
+/*
+ * ST regulator driver for flashSS vsense
+ *
+ * This is a small driver to manage the voltage regulator inside the ST flash
+ * sub-system that is used for configuring MMC, NAND, SPI voltages.
+ *
+ * Copyright(C) 2014 STMicroelectronics Ltd
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify it
+ * under  the terms of the GNU General  Public License as published by the
+ * Free Software Foundation;  either version 2 of the License, or (at your
+ * option) any later version.
+ */
+#include <linux/module.h>
+#include <linux/io.h>
+#include <linux/of.h>
+#include <linux/of_device.h>
+#include <linux/platform_device.h>
+#include <linux/regulator/driver.h>
+#include <linux/regulator/machine.h>
+#include <linux/regulator/of_regulator.h>
+
+/* FlashSS voltage VSENSE TOP CONFIG register defines */
+#define TOP_VSENSE_CONFIG_REG_PSW_EMMC		BIT(0)
+#define TOP_VSENSE_CONFIG_ENB_REG_PSW_EMMC	BIT(1)
+#define TOP_VSENSE_CONFIG_REG_PSW_NAND		BIT(8)
+#define TOP_VSENSE_CONFIG_ENB_REG_PSW_NAND	BIT(9)
+#define TOP_VSENSE_CONFIG_REG_PSW_SPI		BIT(16)
+#define TOP_VSENSE_CONFIG_ENB_REG_PSW_SPI	BIT(17)
+#define TOP_VSENSE_CONFIG_LATCHED_PSW_EMMC	BIT(24)
+#define TOP_VSENSE_CONFIG_LATCHED_PSW_NAND	BIT(25)
+#define TOP_VSENSE_CONFIG_LATCHED_PSW_SPI	BIT(26)
+
+struct st_vsense {
+	char *name;
+	struct device *dev;
+	u8 n_voltages;			/* number of supported voltages */
+	void __iomem *ioaddr;		/* TOP config base address */
+	unsigned int en_psw_mask;	/* Mask/enable vdd for each device */
+	unsigned int psw_mask;		/* Power sel mask for VDD */
+	unsigned int latched_mask;	/* Latched mask for VDD */
+};
+
+static const unsigned int st_type_voltages[] = {
+	1800000,
+	3300000,
+};
+
+const struct st_vsense st_vsense_data[] = {
+	{
+		.en_psw_mask = TOP_VSENSE_CONFIG_ENB_REG_PSW_EMMC,
+		.psw_mask = TOP_VSENSE_CONFIG_REG_PSW_EMMC,
+		.latched_mask = TOP_VSENSE_CONFIG_LATCHED_PSW_EMMC,
+	}, {
+		.en_psw_mask = TOP_VSENSE_CONFIG_ENB_REG_PSW_NAND,
+		.psw_mask = TOP_VSENSE_CONFIG_REG_PSW_NAND,
+		.latched_mask = TOP_VSENSE_CONFIG_LATCHED_PSW_NAND,
+	}, {
+		.en_psw_mask = TOP_VSENSE_CONFIG_ENB_REG_PSW_SPI,
+		.psw_mask = TOP_VSENSE_CONFIG_REG_PSW_SPI,
+		.latched_mask = TOP_VSENSE_CONFIG_LATCHED_PSW_SPI,
+	},
+};
+
+/* Get the value of Sensed-PSW of eMMC/NAND/SPI Pads */
+static int st_get_voltage_sel(struct regulator_dev *dev)
+{
+	struct st_vsense *vsense = rdev_get_drvdata(dev);
+	void __iomem *ioaddr = vsense->ioaddr;
+	int sel = 0;
+	u32 value = readl_relaxed(ioaddr);
+
+	if (value & vsense->latched_mask)
+		sel = 1;
+
+	dev_dbg(vsense->dev, "%s, selection %d (0x%08x)\n", vsense->name, sel,
+		readl_relaxed(ioaddr));
+
+	return sel;
+}
+
+static int st_set_voltage_sel(struct regulator_dev *dev, unsigned int selector)
+{
+	struct st_vsense *vsense = rdev_get_drvdata(dev);
+	void __iomem *ioaddr = vsense->ioaddr;
+	unsigned value = readl_relaxed(ioaddr);
+	unsigned int voltage;
+
+	voltage = st_type_voltages[selector];
+
+	value |= vsense->en_psw_mask;
+	if (voltage == 3300000)
+		value |= vsense->psw_mask;
+	else
+		value &= ~vsense->psw_mask;
+
+	writel_relaxed(value, ioaddr);
+
+	dev_dbg(vsense->dev, "%s, required voltage %d (vsense_conf 0x%08x)\n",
+		vsense->name, voltage,
+		readl_relaxed(ioaddr));
+
+	return 0;
+}
+
+static struct regulator_ops st_ops = {
+	.get_voltage_sel = st_get_voltage_sel,
+	.set_voltage_sel = st_set_voltage_sel,
+	.list_voltage = regulator_list_voltage_table,
+};
+
+static struct of_device_id of_st_match_tbl[] = {
+	{.compatible = "st,vqmmc", .data = &st_vsense_data[0]},
+	{.compatible = "st,vnand", .data = &st_vsense_data[1]},
+	{.compatible = "st,vspi", .data = &st_vsense_data[2]},
+	{ /* end */ }
+};
+
+static void st_get_satinize_powerup_voltage(struct st_vsense *vsense)
+{
+	void __iomem *ioaddr = vsense->ioaddr;
+	u32 value = readl_relaxed(ioaddr);
+
+	dev_dbg(vsense->dev, "Initial start-up value: (0x%08x)\n", value);
+
+	/* Sanitize voltage values forcing what is provided from start-up */
+	if (value & TOP_VSENSE_CONFIG_LATCHED_PSW_EMMC)
+		value |= TOP_VSENSE_CONFIG_REG_PSW_EMMC;
+	else
+		value &= ~TOP_VSENSE_CONFIG_REG_PSW_EMMC;
+
+	if (value & TOP_VSENSE_CONFIG_LATCHED_PSW_NAND)
+		value |= TOP_VSENSE_CONFIG_REG_PSW_NAND;
+	else
+		value &= ~TOP_VSENSE_CONFIG_REG_PSW_NAND;
+
+	if (value & TOP_VSENSE_CONFIG_LATCHED_PSW_SPI)
+		value |= TOP_VSENSE_CONFIG_REG_PSW_SPI;
+	else
+		value &= ~TOP_VSENSE_CONFIG_REG_PSW_SPI;
+
+	writel_relaxed(value, ioaddr);
+
+	dev_dbg(vsense->dev, "Sanitized value: (0x%08x)\n", value);
+}
+
+static int st_vsense_probe(struct platform_device *pdev)
+{
+	struct device *dev = &pdev->dev;
+	struct device_node *np = dev->of_node;
+	struct st_vsense *vsense;
+	const struct of_device_id *device;
+	struct resource *res;
+	struct regulator_desc *rdesc;
+	struct regulator_dev *rdev;
+	struct regulator_config config = { };
+
+	vsense = devm_kzalloc(dev, sizeof(*vsense), GFP_KERNEL);
+	if (!vsense)
+		return -ENOMEM;
+
+	vsense->dev = dev;
+
+	res = platform_get_resource(pdev, IORESOURCE_MEM, 0);
+	vsense->ioaddr = devm_ioremap_resource(dev, res);
+	if (IS_ERR(vsense->ioaddr))
+		return PTR_ERR(vsense->ioaddr);
+
+	rdesc = devm_kzalloc(dev, sizeof(*rdesc), GFP_KERNEL);
+	if (!rdesc)
+		return -ENOMEM;
+
+	device = of_match_device(of_st_match_tbl, &pdev->dev);
+	if (!device)
+		return -ENODEV;
+
+	if (device->data) {
+		const struct st_vsense *data = device->data;
+		vsense->en_psw_mask = data->en_psw_mask;
+		vsense->psw_mask = data->psw_mask;
+		vsense->latched_mask = data->latched_mask;
+	} else
+		return -ENODEV;
+
+	if (of_property_read_string(np, "regulator-name",
+				    (const char **)&vsense->name))
+		return -EINVAL;
+
+	memset(rdesc, 0, sizeof(*rdesc));
+	rdesc->name = vsense->name;
+	rdesc->ops = &st_ops;
+	rdesc->type = REGULATOR_VOLTAGE;
+	rdesc->owner = THIS_MODULE;
+	rdesc->n_voltages = ARRAY_SIZE(st_type_voltages);
+	rdesc->volt_table = st_type_voltages;
+	config.dev = &pdev->dev;
+	config.driver_data = vsense;
+	config.of_node = np;
+
+	config.init_data = of_get_regulator_init_data(&pdev->dev, np, rdesc);
+	if (!config.init_data) {
+		dev_err(dev, "Failed to parse regulator init data\n");
+		return -ENOMEM;
+	}
+
+	/* register regulator */
+	rdev = regulator_register(rdesc, &config);
+	if (IS_ERR(rdev)) {
+		dev_err(dev, "failed to register %s\n", rdesc->name);
+		return PTR_ERR(rdev);
+	}
+
+	platform_set_drvdata(pdev, rdev);
+
+	dev_info(dev, "%s  vsense voltage regulator registered\n", rdesc->name);
+	st_get_satinize_powerup_voltage(vsense);
+
+	return 0;
+}
+
+static int st_vsense_remove(struct platform_device *pdev)
+{
+	struct regulator_dev *rdev = platform_get_drvdata(pdev);
+
+	regulator_unregister(rdev);
+
+	return 0;
+}
+
+#ifdef CONFIG_PM_SLEEP
+static int st_vsense_resume(struct device *dev)
+{
+	struct regulator_dev *rdev = dev_get_drvdata(dev);
+	struct st_vsense *vsense = rdev_get_drvdata(rdev);
+
+	st_get_satinize_powerup_voltage(vsense);
+
+	return 0;
+}
+#endif
+
+#ifdef CONFIG_PM
+static const struct dev_pm_ops st_vsense_pm_ops = {
+	SET_SYSTEM_SLEEP_PM_OPS(NULL, st_vsense_resume)
+};
+
+#define ST_VSENSE_PM_OPS	(&st_vsense_pm_ops)
+#else
+#define ST_VSENSE_PM_OPS	NULL
+#endif
+
+static struct platform_driver st_vsense_driver = {
+	.driver = {
+		   .name = "st-vsense",
+		   .owner = THIS_MODULE,
+		   .of_match_table = of_st_match_tbl,
+		   .pm	= ST_VSENSE_PM_OPS,
+		   },
+	.probe = st_vsense_probe,
+	.remove = st_vsense_remove,
+};
+
+static int __init st_vsense_init(void)
+{
+	return platform_driver_register(&st_vsense_driver);
+}
+
+subsys_initcall(st_vsense_init);
+
+static void __exit st_vsense_cleanup(void)
+{
+	platform_driver_unregister(&st_vsense_driver);
+}
+
+module_exit(st_vsense_cleanup);
+
+MODULE_AUTHOR("Giuseppe Cavallaro <peppe.cavallaro@st.com>");
+MODULE_DESCRIPTION("ST voltage regulator driver for vsense flashSS");
+MODULE_LICENSE("GPL v2");
diff -urNp a/drivers/regulator/st-pwm.c b/drivers/regulator/st-pwm.c
--- a/drivers/regulator/st-pwm.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/regulator/st-pwm.c	2019-10-06 10:42:41.208462800 +0100
@@ -0,0 +1,183 @@
+/*
+ * Regulator driver for ST's PWM Regulators
+ *
+ * Copyright (C) 2014 - STMicroelectronics Inc.
+ *
+ * Author: Lee Jones <lee.jones@linaro.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include <linux/module.h>
+#include <linux/init.h>
+#include <linux/err.h>
+#include <linux/regulator/driver.h>
+#include <linux/regulator/machine.h>
+#include <linux/regulator/of_regulator.h>
+#include <linux/of.h>
+#include <linux/of_device.h>
+#include <linux/pwm.h>
+#include <linux/delay.h>
+
+#define ST_MAX_PWM_CODE		255
+
+struct st_pwm_regulator_data {
+	struct regulator_dev *regulator;
+	struct pwm_device *pwm;
+	bool enabled;
+	int volt_uV;
+};
+
+static int st_pwm_voltage_to_duty_cycle(struct regulator_dev *regdev,
+					int volt_mV)
+{
+	int a;
+	int pwm_code;
+	int min_mV = regdev->constraints->min_uV / 1000;
+	int max_mV = regdev->constraints->max_uV / 1000;
+	int vdiff = min_mV - max_mV;
+
+	a = ST_MAX_PWM_CODE - min_mV * ST_MAX_PWM_CODE / vdiff;
+	pwm_code = a + ST_MAX_PWM_CODE * volt_mV / vdiff;
+
+	if (pwm_code < 0)
+		pwm_code = 0;
+	if (pwm_code > ST_MAX_PWM_CODE)
+		pwm_code = ST_MAX_PWM_CODE;
+
+	return pwm_code * 100 / ST_MAX_PWM_CODE;
+}
+
+static int st_pwm_regulator_get_voltage(struct regulator_dev *regdev)
+{
+	struct st_pwm_regulator_data *drvdata = rdev_get_drvdata(regdev);
+
+	return drvdata->volt_uV;
+}
+
+static int st_pwm_regulator_set_voltage(struct regulator_dev *regdev,
+					int min_uV,
+					int max_uV,
+					unsigned *selector)
+{
+	int ret;
+	struct st_pwm_regulator_data *drvdata = rdev_get_drvdata(regdev);
+	int duty_cycle = st_pwm_voltage_to_duty_cycle(regdev, min_uV / 1000);
+
+	ret = pwm_config(drvdata->pwm,
+			 (drvdata->pwm->period / 100) * duty_cycle,
+			 drvdata->pwm->period);
+	if (ret) {
+		dev_err(&regdev->dev, "Failed to configure PWM\n");
+		return ret;
+	}
+
+	ret = pwm_enable(drvdata->pwm);
+	if (ret) {
+		dev_err(&regdev->dev, "Failed to enable PWM\n");
+		return ret;
+	}
+	drvdata->volt_uV = min_uV;
+
+	/*
+	 * Delay required by PWM regulator to settle to the new voltage.
+	 * TODO: Calibrate this delay w.r.t. to the delay introduced
+	 * by body biasing
+	 */
+	usleep_range(10000, 10050);
+
+	return 0;
+}
+
+static struct regulator_ops st_pwm_regulator_voltage_ops = {
+	.get_voltage = st_pwm_regulator_get_voltage,
+	.set_voltage = st_pwm_regulator_set_voltage,
+};
+
+static struct of_device_id st_pwm_of_match[] = {
+	{ .compatible = "st,pwm-regulator" },
+	{ },
+};
+MODULE_DEVICE_TABLE(of, st_pwm_of_match);
+
+static int st_pwm_regulator_probe(struct platform_device *pdev)
+{
+	struct regulator_desc *desc;
+	struct st_pwm_regulator_data *drvdata;
+	struct regulator_config config = { };
+	struct device *dev = &pdev->dev;
+	struct device_node *np = dev->of_node;
+
+	if (!np) {
+		dev_err(dev, "Device Tree node missing\n");
+		return -EINVAL;
+	}
+
+	desc = devm_kzalloc(dev, sizeof(*desc), GFP_KERNEL);
+	if (!desc)
+		return -ENOMEM;
+
+	desc->name = dev_name(dev);
+	desc->ops = &st_pwm_regulator_voltage_ops,
+	desc->type = REGULATOR_VOLTAGE,
+	desc->owner = THIS_MODULE,
+	desc->supply_name = "pwm",
+	desc->continuous_voltage_range = true,
+
+	drvdata = devm_kzalloc(dev, sizeof(*drvdata), GFP_KERNEL);
+	if (!drvdata)
+		return -ENOMEM;
+
+	config.init_data = of_get_regulator_init_data(dev, np, desc);
+	if (!config.init_data)
+		return -ENOMEM;
+
+	config.of_node = np;
+	config.dev = dev;
+	config.driver_data = drvdata;
+
+	drvdata->pwm = devm_pwm_get(dev, NULL);
+	if (IS_ERR(drvdata->pwm)) {
+		dev_err(dev, "Failed to get PWM\n");
+		return PTR_ERR(drvdata->pwm);
+	}
+
+	drvdata->regulator = regulator_register(desc, &config);
+	if (IS_ERR(drvdata->regulator)) {
+		dev_err(dev, "Failed to register regulator %s\n",
+			desc->name);
+		return PTR_ERR(drvdata->regulator);
+	}
+
+	platform_set_drvdata(pdev, drvdata);
+
+	return 0;
+}
+
+static int st_pwm_regulator_remove(struct platform_device *pdev)
+{
+	struct st_pwm_regulator_data *drvdata = platform_get_drvdata(pdev);
+
+	regulator_unregister(drvdata->regulator);
+
+	return 0;
+}
+
+static struct platform_driver st_pwm_regulator_driver = {
+	.driver = {
+		.name		= "st-pwm-regulator",
+		.owner		= THIS_MODULE,
+		.of_match_table = of_match_ptr(st_pwm_of_match),
+	},
+	.probe = st_pwm_regulator_probe,
+	.remove = st_pwm_regulator_remove,
+};
+
+module_platform_driver(st_pwm_regulator_driver);
+
+MODULE_LICENSE("GPL");
+MODULE_AUTHOR("Lee Jones <lee.jones@linaro.org>");
+MODULE_DESCRIPTION("ST PWM Regulator Driver");
+MODULE_ALIAS("platform:st_pwm-regulator");
diff -urNp a/drivers/reset/sti/Kconfig b/drivers/reset/sti/Kconfig
--- a/drivers/reset/sti/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/reset/sti/Kconfig	2019-09-26 21:23:27.624619900 +0100
@@ -16,4 +16,20 @@ config STIH407_RESET
 	bool
 	select STI_RESET_SYSCFG
 
+config STID127_RESET
+	bool
+	select STI_RESET_SYSCFG
+
+config STI8416_RESET
+	bool
+	select STI_RESET_SYSCFG
+
+config STIH390_RESET
+	bool
+	select STI_RESET_SYSCFG
+
+config STID325_RESET
+	bool
+	select STI_RESET_SYSCFG
+
 endif
diff -urNp a/drivers/reset/sti/Makefile b/drivers/reset/sti/Makefile
--- a/drivers/reset/sti/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/reset/sti/Makefile	2019-09-26 21:23:27.624619900 +0100
@@ -3,3 +3,7 @@ obj-$(CONFIG_STI_RESET_SYSCFG) += reset-
 obj-$(CONFIG_STIH415_RESET) += reset-stih415.o
 obj-$(CONFIG_STIH416_RESET) += reset-stih416.o
 obj-$(CONFIG_STIH407_RESET) += reset-stih407.o
+obj-$(CONFIG_STID127_RESET) += reset-stid127.o
+obj-$(CONFIG_STI8416_RESET) += reset-sti8416.o
+obj-$(CONFIG_STIH390_RESET) += reset-stih390.o
+obj-$(CONFIG_STID325_RESET) += reset-stid325.o
\ No newline at end of file
diff -urNp a/drivers/reset/sti/built-in.mod.c b/drivers/reset/sti/built-in.mod.c
--- a/drivers/reset/sti/built-in.mod.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/reset/sti/built-in.mod.c	2019-09-26 21:34:55.795623700 +0100
@@ -0,0 +1,19 @@
+#include <linux/module.h>
+#include <linux/vermagic.h>
+#include <linux/compiler.h>
+
+MODULE_INFO(vermagic, VERMAGIC_STRING);
+
+struct module __this_module
+__attribute__((section(".gnu.linkonce.this_module"))) = {
+	.name = KBUILD_MODNAME,
+	.arch = MODULE_ARCH_INIT,
+};
+
+MODULE_INFO(intree, "Y");
+
+static const char __module_depends[]
+__used
+__attribute__((section(".modinfo"))) =
+"depends=";
+
diff -urNp a/drivers/reset/sti/reset-sti8416.c b/drivers/reset/sti/reset-sti8416.c
--- a/drivers/reset/sti/reset-sti8416.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/reset/sti/reset-sti8416.c	2019-09-26 21:23:27.624619900 +0100
@@ -0,0 +1,232 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ */
+#include <linux/module.h>
+#include <linux/of.h>
+#include <linux/of_platform.h>
+#include <linux/platform_device.h>
+
+#include <dt-bindings/reset-controller/sti8416-resets.h>
+
+#include "reset-syscfg.h"
+
+static const char syscfg_fc8_net[] = "st,sti8416-fc8-net-syscfg";
+static const char syscfg_fc11_bootdev[] = "st,sti8416-fc11-bootdev-syscfg";
+static const char syscfg_fc7_hsif[] = "st,sti8416-fc7-hsif-syscfg";
+static const char syscfg_vsafe_lpm[] = "st,sti8416-sdp-fc1-vsafe-syscfg";
+
+/*
+ * Powerdown is controlled by clk_en bit in the CLK_RST system config register.
+ * This means that there is no powerdown_req but the powerdown_ack can be
+ * available from the specific area for some IPs.
+ * By default clk_en is set.
+ */
+#define STI8416_PDN_FC7(_bit, clk_rst_reg, specific_status_reg, _stat) \
+	_SYSCFG_RST_CH(syscfg_fc7_hsif, clk_rst_reg, _bit, \
+		       specific_status_reg, _stat)
+#define STI8416_PDN_FC11(_bit, clk_rst_reg, specific_status_reg, _stat) \
+	_SYSCFG_RST_CH(syscfg_fc11_bootdev, clk_rst_reg, _bit, \
+		       specific_status_reg, _stat)
+
+#define SYSCFG_7478	0x130138	/* POWER_DOWN_STATUS */
+
+/*
+ * SYNP MAC PDN is an exception: it is managed by using gmac_0_powerdown_req
+ * and the status is taken by looking at the gmac_0_powerdown_ack.
+ * It is also possible for this IP to manage the PDN using the clk_en but w/o
+ * taking care about the status
+ */
+#define SYSCFG_8401	0x130004	/* GMAC0_CTRL */
+#define SYSCFG_8450	0x138000	/* GMAC0_STATUS */
+#define STI8416_PDN_GMAC0(_bit, _stat) \
+	_SYSCFG_RST_CH(syscfg_fc8_net, SYSCFG_8401, _bit, SYSCFG_8450, _stat)
+
+static const struct syscfg_reset_channel_data sti8416_powerdowns[] = {
+
+	/* FC7 HSIF - USB3 (rear side) */
+	[STI8416_FC7_USB3_CLKEN_POWERDOWN] =
+	    STI8416_PDN_FC7(16, USB3_0_CLK_RST, SYSCFG_7478, 8),
+
+	/* USB2 (rear side) */
+	[STI8416_FC7_USB2_CLKEN_POWERDOWN] =
+	    STI8416_PDN_FC7(16, USB2_0_CLK_RST, SYSCFG_7478, 6),
+	[STI8416_FC7_SATA_0_CLKEN_POWERDOWN] =
+	    STI8416_PDN_FC7(17, PCIE_SATA_0_CLK_RST, SYSCFG_7478, 0),
+	[STI8416_FC7_PCIE_0_CLKEN_POWERDOWN] =
+	    STI8416_PDN_FC7(16, PCIE_SATA_0_CLK_RST, SYSCFG_7478, 1),
+	[STI8416_FC7_SATA_1_CLKEN_POWERDOWN] =
+	    STI8416_PDN_FC7(17, PCIE_SATA_1_CLK_RST, SYSCFG_7478, 2),
+	[STI8416_FC7_PCIE_1_CLKEN_POWERDOWN] =
+	    STI8416_PDN_FC7(16, PCIE_SATA_1_CLK_RST, SYSCFG_7478, 3),
+	[STI8416_FC7_PCIE_2_CLKEN_POWERDOWN] =
+	    STI8416_PDN_FC7(16, PCIE_2_CLK_RST, SYSCFG_7478, 5),
+	[STI8416_FC7_MEDIALB_POWERDOWN] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, MLB_0_CLK_RST, 16),
+
+	/* FC8 Networking */
+	[STI8416_FC8_GMAC0_POWERDOWN] = STI8416_PDN_GMAC0(0, 2),
+	[STI8416_FC8_CLKEN_FP2_0_POWERDOWN] =
+	    SYSCFG_SRST(syscfg_fc8_net, FP2_0_CLK_RST, 16),
+
+	/* FC11 Bootdev */
+	[STI8416_FC11_USB3_CLKEN_POWERDOWN] =
+	    STI8416_PDN_FC11(16, USB3_1_CLK_RST, SYSCFG_7478, 2),
+	[STI8416_FC11_USB2_CLKEN_POWERDOWN] =
+	    STI8416_PDN_FC11(16, USB2_1_CLK_RST, SYSCFG_7478, 0),
+	[STI8416_FC11_FLASH_CLKEN_POWERDOWN] =
+	    STI8416_PDN_FC11(16, FLASHSS_BOOT_0_RST, SYSCFG_7478, 4),
+	[STI8416_FC11_SDEMMC0_CLKEN_POWERDOWN] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SDEMMC_0_CLK_RST, 16),
+	[STI8416_FC11_SDEMMC1_CLKEN_POWERDOWN] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SDEMMC_1_CLK_RST, 16),
+};
+
+/* Reset definitions. */
+#define LPM_CONFIG_1    0x4	/* Softreset IRB & SBC UART */
+static const struct syscfg_reset_channel_data sti8416_softresets[] = {
+
+	/* FC7 HSIF - USB3 (rear side) */
+	[STI8416_FC7_USB3_1_PHY_USB2_CALIB_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, USB3_0_CLK_RST, 3),
+	[STI8416_FC7_USB3_1_PHY_USB2_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, USB3_0_CLK_RST, 2),
+	[STI8416_FC7_USB3_1_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, USB3_0_CLK_RST, 0),
+
+	/* USB2 (rear side) */
+	[STI8416_FC7_USB2_1_PHY_CALIB_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, USB2_0_CLK_RST, 2),
+	[STI8416_FC7_USB2_1_PHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, USB2_0_CLK_RST, 1),
+	[STI8416_FC7_USB2_1_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, USB2_0_CLK_RST, 0),
+
+	[STI8416_FC7_PCIE_SATA_0_MIPHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_0_CLK_RST, 4),
+	[STI8416_FC7_SATA_0_PMALIVE_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_0_CLK_RST, 3),
+	[STI8416_FC7_SATA_0_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_0_CLK_RST, 2),
+	[STI8416_FC7_PCIE_0_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_0_CLK_RST, 1),
+	[STI8416_FC7_PCIE_SATA_0_HARDRESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_0_CLK_RST, 0),
+
+	[STI8416_FC7_PCIE_SATA_1_MIPHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_1_CLK_RST, 4),
+	[STI8416_FC7_SATA_1_PMALIVE_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_1_CLK_RST, 3),
+	[STI8416_FC7_SATA_1_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_1_CLK_RST, 2),
+	[STI8416_FC7_PCIE_1_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_1_CLK_RST, 1),
+	[STI8416_FC7_PCIE_SATA_1_HARDRESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_1_CLK_RST, 0),
+
+	[STI8416_FC7_PCIE_2_MIPHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_SATA_1_CLK_RST, 2),
+	[STI8416_FC7_PCIE_2_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_2_CLK_RST, 1),
+	[STI8416_FC7_PCIE_2_HARDRESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, PCIE_2_CLK_RST, 0),
+
+	[STI8416_FC7_MEDIALB_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, MLB_0_CLK_RST, 0),
+
+	/* FC8 Networking */
+	[STI8416_FC8_FP2_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc8_net, FP2_0_CLK_RST, 0),
+	[STI8416_FC8_GMAC_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc8_net, GMAC_0_CLK_RST, 0),
+
+	/* FC11 Bootdev */
+
+	/* USB3 front  - PHY reset of calibration block */
+	[STI8416_FC11_USB3_1_PHY_USB2_CALIB_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, USB3_1_CLK_RST, 3),
+	/* USB2 PHY reset of USB3 subsys */
+	[STI8416_FC11_USB3_1_PHY_USB2_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, USB3_1_CLK_RST, 2),
+	/* USB2 PHY reset of USB3 subsys */
+	[STI8416_FC11_USB3_1_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, USB3_1_CLK_RST, 0),
+
+	/* USB2 front */
+	[STI8416_FC11_USB2_1_PHY_CALIB_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, USB2_1_CLK_RST, 2),
+	[STI8416_FC11_USB2_1_PHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, USB2_1_CLK_RST, 1),
+	[STI8416_FC11_USB2_1_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, USB2_1_CLK_RST, 0),
+
+	/* FLASH NAND RESET */
+	[STI8416_FC11_FLASH_PHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, FLASHSS_BOOT_0_RST, 1),
+	[STI8416_FC11_FLASH_SUBSYSTEM_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, FLASHSS_BOOT_0_RST, 0),
+
+	/* MMC0 RESET */
+	[STI8416_FC11_SDEMMC0_PHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SDEMMC_0_CLK_RST, 1),
+	[STI8416_FC11_SDEMMC0_HARD_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SDEMMC_0_CLK_RST, 0),
+
+	/* MMC1 RESET */
+	[STI8416_FC11_SDEMMC1_PHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SDEMMC_1_CLK_RST, 1),
+	[STI8416_FC11_SDEMMC1_HARD_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SDEMMC_1_CLK_RST, 0),
+
+	/* FC1 VSAFE WAKEUP SS (LPM CONFIG) */
+	[STI8416_FC1_IRB_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_vsafe_lpm, LPM_CONFIG_1, 6),
+	[STI8416_FC1_KEYSCAN_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_vsafe_lpm, LPM_CONFIG_1, 8),
+	[STI8416_FC1_UART0_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_vsafe_lpm, LPM_CONFIG_1, 11),
+	[STI8416_FC1_UART1_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_vsafe_lpm, LPM_CONFIG_1, 12),
+};
+
+static struct syscfg_reset_controller_data sti8416_powerdown_controller = {
+	.wait_for_ack = true,
+	.nr_channels = ARRAY_SIZE(sti8416_powerdowns),
+	.channels = sti8416_powerdowns,
+};
+
+static struct syscfg_reset_controller_data sti8416_softreset_controller = {
+	.wait_for_ack = false,
+	.active_low = true,
+	.nr_channels = ARRAY_SIZE(sti8416_softresets),
+	.channels = sti8416_softresets,
+};
+
+static struct of_device_id sti8416_reset_match[] = {
+	{.compatible = "st,sti8416-powerdown",
+	 .data = &sti8416_powerdown_controller,},
+	{.compatible = "st,sti8416-softreset",
+	 .data = &sti8416_softreset_controller,},
+	{},
+};
+
+static struct platform_driver sti8416_reset_driver = {
+	.probe = syscfg_reset_probe,
+	.driver = {
+		   .name = "reset-sti8416",
+		   .owner = THIS_MODULE,
+		   .of_match_table = sti8416_reset_match,
+		   },
+};
+
+static int __init sti8416_reset_init(void)
+{
+	return platform_driver_register(&sti8416_reset_driver);
+}
+
+arch_initcall(sti8416_reset_init);
diff -urNp a/drivers/reset/sti/reset-stid127.c b/drivers/reset/sti/reset-stid127.c
--- a/drivers/reset/sti/reset-stid127.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/reset/sti/reset-stid127.c	2019-09-26 21:23:27.628619900 +0100
@@ -0,0 +1,112 @@
+/*
+ * Copyright (C) 2013 STMicroelectronics (R&D) Limited
+ * Author: Alexandre Torgue <alexandre.torgue@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ */
+#include <linux/module.h>
+#include <linux/of.h>
+#include <linux/of_platform.h>
+#include <linux/platform_device.h>
+
+#include <dt-bindings/reset-controller/stid127-resets.h>
+
+#include "reset-syscfg.h"
+
+/*
+ * STiD127 Peripheral powerdown definitions.
+ */
+static const char stid127_hd[] = "st,stid127-hd-syscfg";
+#define SYSCFG_925	0x64 /* Powerdown request for USB0 */
+#define SYSSTAT_937	0x94 /* Powerdown status for USB0 */
+
+#define STID127_PDN_USB0\
+	_SYSCFG_RST_CH(stid127_hd, SYSCFG_925, 0, SYSSTAT_937, 0)
+
+static const char stid127_south[] = "st,stid127-south-syscfg";
+#define SYSCFG_263	0xfc /* Powerdown request for PCIE1 */
+#define SYSSTAT_278	0x138 /* Powerdown status for PCIE1 */
+
+#define STID127_PDN_PCIE1\
+	_SYSCFG_RST_CH(stid127_south, SYSCFG_263, 4, SYSSTAT_278, 3)
+
+#define SYSCFG_267	0x10c /* Powerdown request for PCIE0 */
+#define SYSSTAT_280	0x140 /* Powerdown status for PCIE0 */
+
+#define STID127_PDN_PCIE0\
+	_SYSCFG_RST_CH(stid127_south, SYSCFG_267, 4, SYSSTAT_280, 3)
+
+#define SYSCFG_284	0x150 /* Powerdown request for KEYSCAN */
+#define SYSSTAT_285	0x154 /* Powerdown status for KEYSCAN */
+
+#define STID127_PDN_KEYSCAN\
+	_SYSCFG_RST_CH(stid127_south, SYSCFG_284, 0, SYSSTAT_285, 0)
+
+#define SYSCFG_286	0x158 /* Powerdown request for ETH0 */
+#define SYSSTAT_287	0x15c /* Powerdown status for ETH0 */
+
+#define STID127_PDN_ETH0\
+	_SYSCFG_RST_CH(stid127_south, SYSCFG_286, 0, SYSSTAT_287, 2)
+
+static const char stid127_cpu[] = "st,stid127-cpu-syscfg";
+
+#define SYSCFG706	0x18
+#define SYSCFG707	0x1c
+#define SYSCFG_731	0x7c /* CPU soft reset */
+
+static const struct syscfg_reset_channel_data stid127_powerdowns[] = {
+	[STID127_USB0_POWERDOWN]	= STID127_PDN_USB0,
+	[STID127_PCIE0_POWERDOWN]	= STID127_PDN_PCIE0,
+	[STID127_PCIE1_POWERDOWN]	= STID127_PDN_PCIE1,
+	[STID127_KEYSCAN_POWERDOWN]	= STID127_PDN_KEYSCAN,
+	[STID127_ETH0_POWERDOWN]	= STID127_PDN_ETH0,
+};
+
+static const struct syscfg_reset_channel_data stid127_softresets[] = {
+	[STID127_ETH0_SOFTRESET] = SYSCFG_SRST(stid127_south, SYSCFG_286, 1),
+	[STID127_USB0_SOFTRESET] = SYSCFG_SRST(stid127_cpu, SYSCFG707, 24),
+	[STID127_ST40_MANRESET] = SYSCFG_SRST(stid127_cpu, SYSCFG_731, 4),
+	[STID127_ST40_PWRRESET] = SYSCFG_SRST(stid127_cpu, SYSCFG_731, 2),
+	[STID127_PCIE0_SOFTRESET] = SYSCFG_SRST(stid127_cpu, SYSCFG707, 18),
+	[STID127_PCIE1_SOFTRESET] = SYSCFG_SRST(stid127_cpu, SYSCFG707, 20),
+	[STID127_FP_SOFTRESET] = SYSCFG_SRST(stid127_cpu, SYSCFG706, 28),
+};
+
+static struct syscfg_reset_controller_data stid127_powerdown_controller = {
+	.wait_for_ack	= true,
+	.nr_channels	= ARRAY_SIZE(stid127_powerdowns),
+	.channels	= stid127_powerdowns,
+};
+
+static struct syscfg_reset_controller_data stid127_softreset_controller = {
+	.wait_for_ack = false,
+	.active_low = true,
+	.nr_channels = ARRAY_SIZE(stid127_softresets),
+	.channels = stid127_softresets,
+};
+
+static struct of_device_id stid127_reset_match[] = {
+	{ .compatible = "st,stid127-powerdown",
+	  .data = &stid127_powerdown_controller, },
+	{ .compatible = "st,stid127-softreset",
+	  .data = &stid127_softreset_controller, },
+	{},
+};
+
+static struct platform_driver stid127_reset_driver = {
+	.probe = syscfg_reset_probe,
+	.driver = {
+		.name = "reset-stid127",
+		.owner = THIS_MODULE,
+		.of_match_table = stid127_reset_match,
+	},
+};
+
+static int __init stid127_reset_init(void)
+{
+	return platform_driver_register(&stid127_reset_driver);
+}
+arch_initcall(stid127_reset_init);
diff -urNp a/drivers/reset/sti/reset-stid325.c b/drivers/reset/sti/reset-stid325.c
--- a/drivers/reset/sti/reset-stid325.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/reset/sti/reset-stid325.c	2019-09-26 21:23:27.628619900 +0100
@@ -0,0 +1,176 @@
+/*
+ * Copyright (C) 2015 STMicroelectronics (R&D) Limited
+ * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ */
+#include <linux/module.h>
+#include <linux/of.h>
+#include <linux/of_platform.h>
+#include <linux/platform_device.h>
+
+#include <dt-bindings/reset-controller/stid325-resets.h>
+
+#include "reset-syscfg.h"
+
+static const char syscfg_fc8_net[] = "st,stid325-fc8-networking-syscfg";
+static const char syscfg_fc11_bootdev[] = "st,stid325-fc11-bootdev-syscfg";
+static const char syscfg_fc7_hsif[] = "st,stid325-fc7-hsif-syscfg";
+static const char syscfg_fc1_lpm[] = "st,stid325-fc1-lpm_config";
+
+/*
+ * Powerdown is controlled by clk_en bit in the CLK_RST system config register.
+ * This means that there is no powerdown_req but the powerdown_ack can be
+ * available from the specific area for some IPs.
+ * By default clk_en is set.
+ */
+#define STID325_PDN_FC7(_bit, clk_rst_reg, specific_status_reg, _stat) \
+	_SYSCFG_RST_CH(syscfg_fc7_hsif, clk_rst_reg, _bit, \
+		       specific_status_reg, _stat)
+#define STID325_PDN_FC11(_bit, clk_rst_reg, specific_status_reg, _stat) \
+	_SYSCFG_RST_CH(syscfg_fc11_bootdev, clk_rst_reg, _bit, \
+		       specific_status_reg, _stat)
+
+#define SYSCFG_7478	0x130138	/* POWER_DOWN_STATUS */
+
+static const struct syscfg_reset_channel_data stid325_powerdowns[] = {
+
+	/* FC7 HSIF */
+	[STID325_FC7_USB3_POWERDOWN_REQ] =
+	    STID325_PDN_FC7(16, 0x0, SYSCFG_7478, 6),
+	/* PCIe0 SATA0 combo */
+	[STID325_FC7_SATA_0_POWERDOWN_REQ] =
+	    STID325_PDN_FC7(17, 0x20000, SYSCFG_7478, 0),
+	[STID325_FC7_PCIE_0_POWERDOWN_REQ] =
+	    STID325_PDN_FC7(16, 0x20000, SYSCFG_7478, 1),
+	/* PCIe 1 and 2 */
+	[STID325_FC7_PCIE_1_POWERDOWN_REQ] =
+	    STID325_PDN_FC7(16, 0x30000, SYSCFG_7478, 3),
+	[STID325_FC7_PCIE_2_POWERDOWN_REQ] =
+	    STID325_PDN_FC7(16, 0x40000, SYSCFG_7478, 5),
+
+	/* FC8 Networking */
+	[STID325_FC8_CLKEN_FP3_0_CLK_EN] = SYSCFG_SRST(syscfg_fc8_net, 0x0, 16),
+	[STID325_FC8_CLKEN_TELSS_0_CLK_EN] =
+	    SYSCFG_SRST(syscfg_fc8_net, 0x20000, 16),
+
+	/* FC11 Bootdev */
+	[STID325_FC11_FLASH_CLKEN_NAND_CLK_EN] =
+	    STID325_PDN_FC11(16, 0x20000, SYSCFG_7478, 4),
+	[STID325_FC11_SDEMMC0_CLKEN_CLK_EN] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, 0x50000, 16),
+	[STID325_FC11_SDEMMC1_CLKEN_CLK_EN] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, 0x60000, 16),
+};
+
+/* Reset definitions. */
+#define LPM_CONFIG_1    0x4	/* Softreset IRB & SBC UART ... */
+
+static const struct syscfg_reset_channel_data stid325_softresets[] = {
+
+	/* FC7: HSIF USB3 */
+	[STID325_FC7_USB3_PHY_USB2_CALIB_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x0, 3),
+	[STID325_FC7_USB3_PHY_USB2_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x0, 2),
+	[STID325_FC7_USB3_RESET] = SYSCFG_SRST(syscfg_fc7_hsif, 0x0, 0),
+
+	/* FC7: PCI0/SATA0 */
+	[STID325_FC7_PCIE_SATA_0_MIPHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x20000, 4),
+	[STID325_FC7_SATA_0_PMALIVE_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x20000, 3),
+	[STID325_FC7_SATA_0_RESET] = SYSCFG_SRST(syscfg_fc7_hsif, 0x20000, 2),
+	[STID325_FC7_PCIE_0_RESET] = SYSCFG_SRST(syscfg_fc7_hsif, 0x20000, 1),
+	[STID325_FC7_PCIE_SATA_0_HARDRESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x20000, 0),
+
+	/* FC7: PCI 1 and 2 */
+	[STID325_FC7_PCIE_1_MIPHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x30000, 2),
+	[STID325_FC7_PCIE_1_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x30000, 1),
+	[STID325_FC7_PCIE_1_HARDRESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x30000, 0),
+
+	[STID325_FC7_PCIE_2_MIPHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x40000, 2),
+	[STID325_FC7_PCIE_2_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x40000, 1),
+	[STID325_FC7_PCIE_2_HARDRESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, 0x40000, 0),
+
+	/* FC8: Networking */
+	[STID325_FC8_FP3_SOFTRESET] = SYSCFG_SRST(syscfg_fc8_net, 0x0, 0),
+	[STID325_FC8_TELSS_SOFTRESET] = SYSCFG_SRST(syscfg_fc8_net, 0x20000, 0),
+
+	/* FC11 Bootdev */
+
+	/* FLASH NAND RESET */
+	[STID325_FC11_FLASH_PHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, 0x20000, 1),
+	[STID325_FC11_FLASH_SUBSYSTEM_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, 0x20000, 0),
+
+	/* MMC0 RESET */
+	[STID325_FC11_SDEMMC0_PHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, 0x50000, 1),
+	[STID325_FC11_SDEMMC0_HARD_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, 0x50000, 0),
+
+	/* MMC1 RESET */
+	[STID325_FC11_SDEMMC1_PHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, 0x60000, 1),
+	[STID325_FC11_SDEMMC1_HARD_RESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, 0x60000, 0),
+
+	/* FC1 WAKEUP SS (LPM CONFIG) */
+	[STID325_FC1_IRB_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc1_lpm, LPM_CONFIG_1, 6),
+	[STID325_FC1_KEYSCAN_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc1_lpm, LPM_CONFIG_1, 8),
+	[STID325_FC1_UART0_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc1_lpm, LPM_CONFIG_1, 11),
+	[STID325_FC1_UART1_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc1_lpm, LPM_CONFIG_1, 12),
+};
+
+static struct syscfg_reset_controller_data stid325_powerdown_controller = {
+	.wait_for_ack = true,
+	.nr_channels = ARRAY_SIZE(stid325_powerdowns),
+	.channels = stid325_powerdowns,
+};
+
+static struct syscfg_reset_controller_data stid325_softreset_controller = {
+	.wait_for_ack = false,
+	.active_low = true,
+	.nr_channels = ARRAY_SIZE(stid325_softresets),
+	.channels = stid325_softresets,
+};
+
+static struct of_device_id stid325_reset_match[] = {
+	{.compatible = "st,stid325-powerdown",
+	 .data = &stid325_powerdown_controller,},
+	{.compatible = "st,stid325-softreset",
+	 .data = &stid325_softreset_controller,},
+	{},
+};
+
+static struct platform_driver stid325_reset_driver = {
+	.probe = syscfg_reset_probe,
+	.driver = {
+		   .name = "reset-stid325",
+		   .owner = THIS_MODULE,
+		   .of_match_table = stid325_reset_match,
+		   },
+};
+
+static int __init stid325_reset_init(void)
+{
+	return platform_driver_register(&stid325_reset_driver);
+}
+
+arch_initcall(stid325_reset_init);
diff -urNp a/drivers/reset/sti/reset-stih390.c b/drivers/reset/sti/reset-stih390.c
--- a/drivers/reset/sti/reset-stih390.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/reset/sti/reset-stih390.c	2019-09-26 21:23:27.628619900 +0100
@@ -0,0 +1,210 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics (R&D) Limited
+ * Author: Alexandre Torgue <alexandre.torgue@st.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ */
+#include <linux/module.h>
+#include <linux/of.h>
+#include <linux/of_platform.h>
+#include <linux/platform_device.h>
+
+#include <dt-bindings/reset-controller/stih390-resets.h>
+
+#include "reset-syscfg.h"
+
+static const char syscfg_fc0_backbone[] = "st,stih390-syscfg-fc0-backbone";
+static const char syscfg_fc1_vsafe[] = "st,stih390-syscfg-fc1-vsafe";
+static const char syscfg_fc2_wifi[] = "st,stih390-syscfg-fc2-wifi";
+static const char syscfg_fc3_vdec[] = "st,stih390-syscfg-fc3-vdec";
+static const char syscfg_fc6_display[] = "st,stih390-syscfg-fc6-display";
+static const char syscfg_fc7_hsif[] = "st,stih390-syscfg-fc7-hsif";
+static const char syscfg_fc9_st231ss[] = "st,stih390-syscfg-fc9-st231ss";
+static const char syscfg_fc10_gpu[] = "st,stih390-syscfg-fc10-gpu";
+static const char syscfg_fc11_bootdev[] = "st,stih390-syscfg-fc11-bootdev";
+static const char syscfg_fc13_ts[] = "st,stih390-syscfg-fc13-ts";
+
+/*
+ * Powerdown is controlled by clk_en bit in the CLK_RST system config register.
+ * This means that there is no powerdown_req but the powerdown_ack can be
+ * available from the specific area for some IPs.
+ * By default clk_en is set.
+ */
+#define STIH390_PDN_FC7(_bit, clk_rst_reg, specific_status_reg, _stat) \
+	_SYSCFG_RST_CH(syscfg_fc7_hsif, clk_rst_reg, _bit, \
+		       specific_status_reg, _stat)
+
+/* PowerDown definitions */
+static const struct syscfg_reset_channel_data stih390_powerdowns[] = {
+	/* FC7 HSIF */
+	[STIH390_FC7_USB3_0_POWERDOWN_REQ] =
+	    STIH390_PDN_FC7(0, SYSCFG_7000, SYSCFG_7478, 8),
+	[STIH390_FC7_USB2_0_POWERDOWN_REQ] =
+	    STIH390_PDN_FC7(0, SYSCFG_7010, SYSCFG_7478, 6),
+	[STIH390_FC7_GMAC0_POWERDOWN_REQ] =
+	    STIH390_PDN_FC7(0, SYSCFG_7411, SYSCFG_7456, 2),
+};
+
+/* Reset definitions. */
+static const struct syscfg_reset_channel_data stih390_softresets[] = {
+
+	/* FC0 BACKBONE */
+	[STIH390_FC0_A9_SOFTRESET]
+	     SYSCFG_SRST(syscfg_fc0_backbone, SYSCFG_0000, 0),
+
+	/* FC1 VSAFE */
+	[STIH390_FC1_CM4_HRESET] =
+	     SYSCFG_SRST(syscfg_fc1_vsafe, SYSCFG_1000, 0),
+	[STIH390_FC1_CM4_SYSRESET] =
+	     SYSCFG_SRST(syscfg_fc1_vsafe, SYSCFG_1000, 1),
+	[STIH390_FC1_WAKEUP_0_RESET] =
+	     SYSCFG_SRST(syscfg_fc1_vsafe, SYSCFG_1010, 0),
+	[STIH390_FC1_PIO_0_RESET] =
+	     SYSCFG_SRST(syscfg_fc1_vsafe, SYSCFG_1030, 0),
+	[STIH390_FC1_THS_1_RESET] =
+	     SYSCFG_SRST(syscfg_fc1_vsafe, SYSCFG_1060, 0),
+
+	/* FC2 WIFI */
+	[STIH390_FC2_GMAC_W_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc2_wifi, SYSCFG_2000, 0),
+	[STIH390_FC2_WIFI_TOP_WRAPPER_SS_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc2_wifi, SYSCFG_2010, 0),
+
+	/* FC3 VDEC */
+	[STIH390_FC3_C8VDEC_TOP_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc3_vdec, SYSCFG_3000, 0),
+	[STIH390_FC3_C8HAD_PP_SUPERTOP_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc3_vdec, SYSCFG_3001, 0),
+	[STIH390_FC3_C8JPG_TOP_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc3_vdec, SYSCFG_3002, 0),
+	[STIH390_FC3_ST231_DMU0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc3_vdec, SYSCFG_3003, 0),
+	[STIH390_FC3_MBX_DMU0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc3_vdec, SYSCFG_3004, 0),
+
+	/* FC 4,5 RESERVED */
+
+	/* FC6 DISPLAY */
+	[STIH390_FC6_BDISP_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6000, 0),
+	[STIH390_FC6_HQVDP_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6001, 0),
+	[STIH390_FC6_VDP_AUX_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6002, 0),
+	[STIH390_FC6_COMPO_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6003, 0),
+	[STIH390_FC6_HDTVOUT_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6004, 0),
+	[STIH390_FC6_HDMI_TX_PHY_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6005, 0),
+	[STIH390_FC6_DVPIN_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6006, 0),
+	[STIH390_FC6_HDMI_RX_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6007, 0),
+	[STIH390_FC6_FDMA_0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6008, 0),
+	[STIH390_FC6_UPLAYER_1_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6009, 0),
+	[STIH390_FC6_UREADER_1_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6010, 0),
+	[STIH390_FC6_FDMA_1_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6011, 0),
+	[STIH390_FC6_UPLAYER_2_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6012, 0),
+	[STIH390_FC6_UPLAYER_3_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc6_display, SYSCFG_6013, 0),
+
+	/* FC7 HSIF */
+	[STIH390_FC7_USB3_PHY_USB2_CALIB_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, SYSCFG_7000, 3),
+	[STIH390_FC7_USB3_PHY_USB2_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, SYSCFG_7000, 2),
+	[STIH390_FC7_USB3_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, SYSCFG_7000, 0),
+	[STIH390_FC7_USB2_PHY_CALIB_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, SYSCFG_7010, 2),
+	[STIH390_FC7_USB2_PHY_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, SYSCFG_7010, 1),
+	[STIH390_FC7_USB2_RESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, SYSCFG_7010, 0),
+	[STIH390_FC7_GMAC_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc7_hsif, SYSCFG_7060, 0),
+
+	/* FC 8 RESERVED */
+
+	/* FC9 ST231SS */
+	[STIH390_FC9_ST231_SEC_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc9_st231ss, SYSCFG_9000, 0),
+	[STIH390_FC9_ST231_GP0_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc9_st231ss, SYSCFG_9010, 0),
+	[STIH390_FC9_ST231_GP1_SOFTRESET] =
+	     SYSCFG_SRST(syscfg_fc9_st231ss, SYSCFG_9020, 0),
+
+	/* FC10 GPU */
+	[STIH390_FC10_MALI400_0_HARDRESET] =
+	     SYSCFG_SRST(syscfg_fc10_gpu, SYSCFG_10000, 0),
+	[STIH390_FC10_THS_GLUE_GPU_HARDRESET] =
+	     SYSCFG_SRST(syscfg_fc10_gpu, SYSCFG_10010, 0),
+
+	/* FC11 BOOTDEV */
+	[STIH390_FC11_FLASHSS_BOOT_0_HARDRESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SYSCFG_11003, 0),
+	[STIH390_FC11_FLASH_PHY_0_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SYSCFG_11003, 1),
+	[STIH390_FC11_FLASH_PIOMUX_0_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SYSCFG_11004, 0),
+	[STIH390_FC11_FLASH_BANK_PIO_0_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SYSCFG_11005, 0),
+	[STIH390_FC11_SDEMMC_0_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc11_bootdev, SYSCFG_11006, 0),
+
+	/* FC12 RESERVED */
+
+	/* FC13 TS */
+	[STIH390_FC13_STFE_0_SOFTRESET] =
+	    SYSCFG_SRST(syscfg_fc13_ts, SYSCFG_13000, 0),
+
+	/* FC14 RESERVED */
+
+	/* FC15 A9 : NO softreset for FC15*/
+};
+
+static struct syscfg_reset_controller_data stih390_powerdown_controller = {
+	.wait_for_ack = true,
+	.nr_channels = ARRAY_SIZE(stih390_powerdowns),
+	.channels = stih390_powerdowns,
+};
+
+static struct syscfg_reset_controller_data stih390_softreset_controller = {
+	.wait_for_ack = false,
+	.active_low = true,
+	.nr_channels = ARRAY_SIZE(stih390_softresets),
+	.channels = stih390_softresets,
+};
+
+static struct of_device_id stih390_reset_match[] = {
+	{.compatible = "st,stih390-powerdown",
+	 .data = &stih390_powerdown_controller,},
+	{.compatible = "st,stih390-softreset",
+	 .data = &stih390_softreset_controller,},
+	{},
+};
+
+static struct platform_driver stih390_reset_driver = {
+	.probe = syscfg_reset_probe,
+	.driver = {
+		   .name = "reset-stih390",
+		   .owner = THIS_MODULE,
+		   .of_match_table = stih390_reset_match,
+		   },
+};
+
+static int __init stih390_reset_init(void)
+{
+	return platform_driver_register(&stih390_reset_driver);
+}
+
+arch_initcall(stih390_reset_init);
diff -urNp a/drivers/reset/sti/reset-stih407.c b/drivers/reset/sti/reset-stih407.c
--- a/drivers/reset/sti/reset-stih407.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/reset/sti/reset-stih407.c	2019-09-26 21:23:27.632619900 +0100
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2014 STMicroelectronics (R&D) Limited
+ * Copyright (C) 2013 STMicroelectronics (R&D) Limited
  * Author: Giuseppe Cavallaro <peppe.cavallaro@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
@@ -11,10 +11,14 @@
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
+
 #include <dt-bindings/reset-controller/stih407-resets.h>
+
 #include "reset-syscfg.h"
 
-/* STiH407 Peripheral powerdown definitions. */
+/*
+ * STiH407 Peripheral powerdown definitions.
+ */
 static const char stih407_core[] = "st,stih407-core-syscfg";
 static const char stih407_sbc_reg[] = "st,stih407-sbc-reg-syscfg";
 static const char stih407_lpm[] = "st,stih407-lpm-syscfg";
@@ -34,9 +38,10 @@ static const char stih407_lpm[] = "st,st
 #define SYSSTAT_5501	0x7d4
 
 /* Ethernet powerdown/status/reset */
-#define SYSCFG_4032	0x80
-#define SYSSTAT_4520	0x820
-#define SYSCFG_4002	0x8
+#define	SYSCFG_4032	0x80
+#define	SYSSTAT_4520	0x820
+
+#define	SYSCFG_4002	0x8
 
 static const struct syscfg_reset_channel_data stih407_powerdowns[] = {
 	[STIH407_EMISS_POWERDOWN] = STIH407_PDN_0(1),
@@ -52,102 +57,97 @@ static const struct syscfg_reset_channel
 };
 
 /* Reset Generator control 0/1 */
-#define SYSCFG_5131	0x20c
-#define SYSCFG_5132	0x210
+#define	SYSCFG_5128	0x200
+#define	SYSCFG_5131	0x20c
+#define	SYSCFG_5132	0x210
 
-#define LPM_SYSCFG_1	0x4	/* Softreset IRB & SBC UART */
-
-#define STIH407_SRST_CORE(_reg, _bit) \
-	_SYSCFG_RST_CH_NO_ACK(stih407_core, _reg, _bit)
-
-#define STIH407_SRST_SBC(_reg, _bit) \
-	_SYSCFG_RST_CH_NO_ACK(stih407_sbc_reg, _reg, _bit)
-
-#define STIH407_SRST_LPM(_reg, _bit) \
-	_SYSCFG_RST_CH_NO_ACK(stih407_lpm, _reg, _bit)
+#define LPM_SYSCFG_1    0x4	/* Softreset IRB & SBC UART */
 
 static const struct syscfg_reset_channel_data stih407_softresets[] = {
-	[STIH407_ETH1_SOFTRESET] = STIH407_SRST_SBC(SYSCFG_4002, 4),
-	[STIH407_MMC1_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 3),
-	[STIH407_USB2_PORT0_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 28),
-	[STIH407_USB2_PORT1_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 29),
-	[STIH407_PICOPHY_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 30),
-	[STIH407_IRB_SOFTRESET] = STIH407_SRST_LPM(LPM_SYSCFG_1, 6),
-	[STIH407_PCIE0_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 6),
-	[STIH407_PCIE1_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 15),
-	[STIH407_SATA0_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 7),
-	[STIH407_SATA1_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 16),
-	[STIH407_MIPHY0_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 4),
-	[STIH407_MIPHY1_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 13),
-	[STIH407_MIPHY2_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 22),
-	[STIH407_SATA0_PWR_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 5),
-	[STIH407_SATA1_PWR_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 14),
-	[STIH407_DELTA_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5131, 3),
-	[STIH407_BLITTER_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5131, 10),
-	[STIH407_HDTVOUT_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5131, 11),
-	[STIH407_HDQVDP_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5131, 12),
-	[STIH407_VDP_AUX_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5131, 14),
-	[STIH407_COMPO_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5131, 15),
-	[STIH407_HDMI_TX_PHY_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5131, 21),
-	[STIH407_JPEG_DEC_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5131, 23),
-	[STIH407_VP8_DEC_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5131, 24),
-	[STIH407_GPU_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5131, 30),
-	[STIH407_HVA_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 0),
-	[STIH407_ERAM_HVA_SOFTRESET] = STIH407_SRST_CORE(SYSCFG_5132, 1),
-	[STIH407_LPM_SOFTRESET] = STIH407_SRST_SBC(SYSCFG_4002, 2),
-	[STIH407_KEYSCAN_SOFTRESET] = STIH407_SRST_LPM(LPM_SYSCFG_1, 8),
+	[STIH407_ETH1_SOFTRESET] = SYSCFG_SRST(stih407_sbc_reg, SYSCFG_4002, 4),
+	[STIH407_MMC1_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 3),
+	[STIH407_USB2_PORT0_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132,
+						     28),
+	[STIH407_USB2_PORT1_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132,
+						     29),
+	[STIH407_PICOPHY_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132,
+						  30),
+	[STIH407_IRB_SOFTRESET] = SYSCFG_SRST(stih407_lpm, LPM_SYSCFG_1, 6),
+	[STIH407_PCIE0_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 6),
+	[STIH407_PCIE1_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 15),
+	[STIH407_SATA0_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 7),
+	[STIH407_SATA1_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 16),
+	[STIH407_MIPHY0_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 4),
+	[STIH407_MIPHY1_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 13),
+	[STIH407_MIPHY2_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 22),
+	[STIH407_SATA0_PWR_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 5),
+	[STIH407_SATA1_PWR_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 14),
+	[STIH407_DELTA_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 3),
+	[STIH407_BLITTER_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 10),
+	[STIH407_HDTVOUT_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 11),
+	[STIH407_HDQVDP_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 12),
+	[STIH407_VDP_AUX_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 14),
+	[STIH407_COMPO_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 15),
+	[STIH407_HDMI_TX_PHY_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 21),
+	[STIH407_JPEG_DEC_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 23),
+	[STIH407_VP8_DEC_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 24),
+	[STIH407_GPU_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 30),
+	[STIH407_HVA_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 0),
+	[STIH407_ERAM_HVA_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5132, 1),
+	[STIH407_LPM_SOFTRESET] = SYSCFG_SRST(stih407_sbc_reg, SYSCFG_4002, 2),
+	[STIH407_KEYSCAN_SOFTRESET] = SYSCFG_SRST(stih407_lpm, LPM_SYSCFG_1, 8),
+	[STIH407_ST231_AUD_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 26),
+	[STIH407_ST231_DMU_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 27),
+	[STIH407_ST231_GP0_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5131, 28),
+	[STIH407_ST231_GP1_SOFTRESET] = SYSCFG_SRST(stih407_core, SYSCFG_5128, 2),
 };
 
 /* PicoPHY reset/control */
 #define SYSCFG_5061	0x0f4
 
 static const struct syscfg_reset_channel_data stih407_picophyresets[] = {
-	[STIH407_PICOPHY0_RESET] = STIH407_SRST_CORE(SYSCFG_5061, 5),
-	[STIH407_PICOPHY1_RESET] = STIH407_SRST_CORE(SYSCFG_5061, 6),
-	[STIH407_PICOPHY2_RESET] = STIH407_SRST_CORE(SYSCFG_5061, 7),
+	[STIH407_PICOPHY0_RESET] = SYSCFG_SRST(stih407_core, SYSCFG_5061, 5),
+	[STIH407_PICOPHY1_RESET] = SYSCFG_SRST(stih407_core, SYSCFG_5061, 6),
+	[STIH407_PICOPHY2_RESET] = SYSCFG_SRST(stih407_core, SYSCFG_5061, 7),
 };
 
-static const struct syscfg_reset_controller_data stih407_powerdown_controller = {
+static struct syscfg_reset_controller_data stih407_powerdown_controller = {
 	.wait_for_ack = true,
 	.nr_channels = ARRAY_SIZE(stih407_powerdowns),
 	.channels = stih407_powerdowns,
 };
 
-static const struct syscfg_reset_controller_data stih407_softreset_controller = {
+static struct syscfg_reset_controller_data stih407_softreset_controller = {
 	.wait_for_ack = false,
 	.active_low = true,
 	.nr_channels = ARRAY_SIZE(stih407_softresets),
 	.channels = stih407_softresets,
 };
 
-static const struct syscfg_reset_controller_data stih407_picophyreset_controller = {
+static struct syscfg_reset_controller_data stih407_picophyreset_controller = {
 	.wait_for_ack = false,
 	.nr_channels = ARRAY_SIZE(stih407_picophyresets),
 	.channels = stih407_picophyresets,
 };
 
+
 static struct of_device_id stih407_reset_match[] = {
-	{
-		.compatible = "st,stih407-powerdown",
-		.data = &stih407_powerdown_controller,
-	},
-	{
-		.compatible = "st,stih407-softreset",
-		.data = &stih407_softreset_controller,
-	},
-	{
-		.compatible = "st,stih407-picophyreset",
-		.data = &stih407_picophyreset_controller,
-	},
-	{ /* sentinel */ },
+	{.compatible = "st,stih407-powerdown",
+	 .data = &stih407_powerdown_controller,},
+	{.compatible = "st,stih407-softreset",
+	 .data = &stih407_softreset_controller,},
+	{.compatible = "st,stih407-picophyreset",
+	 .data = &stih407_picophyreset_controller,},
+	{},
 };
 
 static struct platform_driver stih407_reset_driver = {
 	.probe = syscfg_reset_probe,
 	.driver = {
-		.name = "reset-stih407",
-		.of_match_table = stih407_reset_match,
-	},
+		   .name = "reset-stih407",
+		   .owner = THIS_MODULE,
+		   .of_match_table = stih407_reset_match,
+		   },
 };
 
 static int __init stih407_reset_init(void)
diff -urNp a/drivers/reset/sti/reset-stih415.c b/drivers/reset/sti/reset-stih415.c
--- a/drivers/reset/sti/reset-stih415.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/reset/sti/reset-stih415.c	2019-09-26 21:23:27.636619900 +0100
@@ -1,7 +1,6 @@
 /*
  * Copyright (C) 2013 STMicroelectronics (R&D) Limited
  * Author: Stephen Gallimore <stephen.gallimore@st.com>
- * Author: Srinivas Kandagatla <srinivas.kandagatla@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
@@ -31,18 +30,6 @@ static const char stih415_lpm[] = "st,st
 #define STIH415_PDN_REAR(_cntl, _stat) \
 	_SYSCFG_RST_CH(stih415_rear, SYSCFG_336, _cntl, SYSSTAT_384, _stat)
 
-#define STIH415_SRST_REAR(_reg, _bit) \
-	_SYSCFG_RST_CH_NO_ACK(stih415_rear, _reg, _bit)
-
-#define STIH415_SRST_SBC(_reg, _bit) \
-	_SYSCFG_RST_CH_NO_ACK(stih415_sbc, _reg, _bit)
-
-#define STIH415_SRST_FRONT(_reg, _bit) \
-	_SYSCFG_RST_CH_NO_ACK(stih415_front, _reg, _bit)
-
-#define STIH415_SRST_LPM(_reg, _bit) \
-	_SYSCFG_RST_CH_NO_ACK(stih415_lpm, _reg, _bit)
-
 #define SYSCFG_114	0x38 /* Powerdown request EMI/NAND/Keyscan */
 #define SYSSTAT_187	0x15c /* Powerdown status EMI/NAND/Keyscan */
 
@@ -67,13 +54,13 @@ static const struct syscfg_reset_channel
 };
 
 static const struct syscfg_reset_channel_data stih415_softresets[] = {
-	[STIH415_ETH0_SOFTRESET] = STIH415_SRST_FRONT(SYSCFG_166, 0),
-	[STIH415_ETH1_SOFTRESET] = STIH415_SRST_SBC(SYSCFG_31, 0),
-	[STIH415_IRB_SOFTRESET]	 = STIH415_SRST_LPM(LPM_SYSCFG_1, 6),
-	[STIH415_USB0_SOFTRESET] = STIH415_SRST_REAR(SYSCFG_376, 9),
-	[STIH415_USB1_SOFTRESET] = STIH415_SRST_REAR(SYSCFG_376, 10),
-	[STIH415_USB2_SOFTRESET] = STIH415_SRST_REAR(SYSCFG_376, 11),
-	[STIH415_KEYSCAN_SOFTRESET] = STIH415_SRST_LPM(LPM_SYSCFG_1, 8),
+	[STIH415_ETH0_SOFTRESET] = SYSCFG_SRST(stih415_front, SYSCFG_166, 0),
+	[STIH415_ETH1_SOFTRESET] = SYSCFG_SRST(stih415_sbc, SYSCFG_31, 0),
+	[STIH415_IRB_SOFTRESET]	 = SYSCFG_SRST(stih415_lpm, LPM_SYSCFG_1, 6),
+	[STIH415_USB0_SOFTRESET] = SYSCFG_SRST(stih415_rear, SYSCFG_376, 9),
+	[STIH415_USB1_SOFTRESET] = SYSCFG_SRST(stih415_rear, SYSCFG_376, 10),
+	[STIH415_USB2_SOFTRESET] = SYSCFG_SRST(stih415_rear, SYSCFG_376, 11),
+	[STIH415_KEYSCAN_SOFTRESET] = SYSCFG_SRST(stih415_lpm, LPM_SYSCFG_1, 8),
 };
 
 static struct syscfg_reset_controller_data stih415_powerdown_controller = {
@@ -101,6 +88,7 @@ static struct platform_driver stih415_re
 	.probe = syscfg_reset_probe,
 	.driver = {
 		.name = "reset-stih415",
+		.owner = THIS_MODULE,
 		.of_match_table = stih415_reset_match,
 	},
 };
diff -urNp a/drivers/reset/sti/reset-stih416.c b/drivers/reset/sti/reset-stih416.c
--- a/drivers/reset/sti/reset-stih416.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/reset/sti/reset-stih416.c	2019-09-26 21:23:27.636619900 +0100
@@ -1,7 +1,6 @@
 /*
  * Copyright (C) 2013 STMicroelectronics (R&D) Limited
  * Author: Stephen Gallimore <stephen.gallimore@st.com>
- * Author: Srinivas Kandagatla <srinivas.kandagatla@st.com>
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
@@ -45,21 +44,7 @@ static const char stih416_cpu[] = "st,st
 #define SYSCFG_2553	0x8a4 /* Softreset SATA0/1, PCIE0/1 */
 #define SYSCFG_7563	0x8cc /* MPE softresets 0 */
 #define SYSCFG_7564	0x8d0 /* MPE softresets 1 */
-
-#define STIH416_SRST_CPU(_reg, _bit) \
-	 _SYSCFG_RST_CH_NO_ACK(stih416_cpu, _reg, _bit)
-
-#define STIH416_SRST_FRONT(_reg, _bit) \
-	 _SYSCFG_RST_CH_NO_ACK(stih416_front, _reg, _bit)
-
-#define STIH416_SRST_REAR(_reg, _bit) \
-	 _SYSCFG_RST_CH_NO_ACK(stih416_rear, _reg, _bit)
-
-#define STIH416_SRST_LPM(_reg, _bit) \
-	 _SYSCFG_RST_CH_NO_ACK(stih416_lpm, _reg, _bit)
-
-#define STIH416_SRST_SBC(_reg, _bit) \
-	 _SYSCFG_RST_CH_NO_ACK(stih416_sbc, _reg, _bit)
+#define SYSCFG_502	0x7d8 /* LPM softresets  */
 
 static const struct syscfg_reset_channel_data stih416_powerdowns[] = {
 	[STIH416_EMISS_POWERDOWN]	= STIH416_PDN_FRONT(0),
@@ -76,35 +61,36 @@ static const struct syscfg_reset_channel
 };
 
 static const struct syscfg_reset_channel_data stih416_softresets[] = {
-	[STIH416_ETH0_SOFTRESET] = STIH416_SRST_FRONT(SYSCFG_1539, 0),
-	[STIH416_ETH1_SOFTRESET] = STIH416_SRST_SBC(SYSCFG_510, 0),
-	[STIH416_IRB_SOFTRESET]	 = STIH416_SRST_LPM(LPM_SYSCFG_1, 6),
-	[STIH416_USB0_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2552, 9),
-	[STIH416_USB1_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2552, 10),
-	[STIH416_USB2_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2552, 11),
-	[STIH416_USB3_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2552, 28),
-	[STIH416_SATA0_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2553, 7),
-	[STIH416_SATA1_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2553, 3),
-	[STIH416_PCIE0_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2553, 15),
-	[STIH416_PCIE1_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2553, 2),
-	[STIH416_AUD_DAC_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2553, 14),
-	[STIH416_HDTVOUT_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2552, 5),
-	[STIH416_VTAC_M_RX_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2552, 25),
-	[STIH416_VTAC_A_RX_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2552, 26),
-	[STIH416_SYNC_HD_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2553, 5),
-	[STIH416_SYNC_SD_SOFTRESET] = STIH416_SRST_REAR(SYSCFG_2553, 6),
-	[STIH416_BLITTER_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7563, 10),
-	[STIH416_GPU_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7563, 11),
-	[STIH416_VTAC_M_TX_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7563, 18),
-	[STIH416_VTAC_A_TX_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7563, 19),
-	[STIH416_VTG_AUX_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7563, 21),
-	[STIH416_JPEG_DEC_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7563, 23),
-	[STIH416_HVA_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7564, 2),
-	[STIH416_COMPO_M_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7564, 3),
-	[STIH416_COMPO_A_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7564, 4),
-	[STIH416_VP8_DEC_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7564, 10),
-	[STIH416_VTG_MAIN_SOFTRESET] = STIH416_SRST_CPU(SYSCFG_7564, 16),
-	[STIH416_KEYSCAN_SOFTRESET] = STIH416_SRST_LPM(LPM_SYSCFG_1, 8),
+	[STIH416_ETH0_SOFTRESET] = SYSCFG_SRST(stih416_front, SYSCFG_1539, 0),
+	[STIH416_ETH1_SOFTRESET] = SYSCFG_SRST(stih416_sbc, SYSCFG_510, 0),
+	[STIH416_IRB_SOFTRESET]	 = SYSCFG_SRST(stih416_lpm, LPM_SYSCFG_1, 6),
+	[STIH416_USB0_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2552, 9),
+	[STIH416_USB1_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2552, 10),
+	[STIH416_USB2_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2552, 11),
+	[STIH416_USB3_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2552, 28),
+	[STIH416_SATA0_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2553, 7),
+	[STIH416_SATA1_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2553, 3),
+	[STIH416_PCIE0_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2553, 15),
+	[STIH416_PCIE1_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2553, 2),
+	[STIH416_AUD_DAC_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2553, 14),
+	[STIH416_HDTVOUT_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2552, 5),
+	[STIH416_VTAC_M_RX_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2552, 25),
+	[STIH416_VTAC_A_RX_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2552, 26),
+	[STIH416_SYNC_HD_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2553, 5),
+	[STIH416_SYNC_SD_SOFTRESET] = SYSCFG_SRST(stih416_rear, SYSCFG_2553, 6),
+	[STIH416_BLITTER_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7563, 10),
+	[STIH416_GPU_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7563, 11),
+	[STIH416_VTAC_M_TX_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7563, 18),
+	[STIH416_VTAC_A_TX_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7563, 19),
+	[STIH416_VTG_AUX_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7563, 21),
+	[STIH416_JPEG_DEC_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7563, 23),
+	[STIH416_HVA_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7564, 2),
+	[STIH416_COMPO_M_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7564, 3),
+	[STIH416_COMPO_A_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7564, 4),
+	[STIH416_VP8_DEC_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7564, 10),
+	[STIH416_VTG_MAIN_SOFTRESET] = SYSCFG_SRST(stih416_cpu, SYSCFG_7564, 16),
+	[STIH416_KEYSCAN_SOFTRESET] = SYSCFG_SRST(stih416_lpm, LPM_SYSCFG_1, 8),
+	[STIH416_LPM_SOFTRESET] = SYSCFG_SRST(stih416_sbc, SYSCFG_502, 2),
 };
 
 static struct syscfg_reset_controller_data stih416_powerdown_controller = {
@@ -132,6 +118,7 @@ static struct platform_driver stih416_re
 	.probe = syscfg_reset_probe,
 	.driver = {
 		.name = "reset-stih416",
+		.owner = THIS_MODULE,
 		.of_match_table = stih416_reset_match,
 	},
 };
diff -urNp a/drivers/reset/sti/reset-syscfg.c b/drivers/reset/sti/reset-syscfg.c
--- a/drivers/reset/sti/reset-syscfg.c	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/reset/sti/reset-syscfg.c	2019-09-26 21:23:27.636619900 +0100
@@ -110,10 +110,33 @@ static int syscfg_reset_dev(struct reset
 	return syscfg_reset_deassert(rcdev, idx);
 }
 
+static int syscfg_reset_status(struct reset_controller_dev *rcdev,
+			       unsigned long idx)
+{
+	struct syscfg_reset_controller *rst = to_syscfg_reset_controller(rcdev);
+	const struct syscfg_reset_channel *ch;
+	u32 ret_val = 0;
+	int err;
+
+	if (idx >= rcdev->nr_resets)
+		return -EINVAL;
+
+	ch = &rst->channels[idx];
+	if (ch->ack)
+		err = regmap_field_read(ch->ack, &ret_val);
+	else
+		err = regmap_field_read(ch->reset, &ret_val);
+	if (err)
+		return err;
+
+	return rst->active_low ? !ret_val : !!ret_val;
+}
+
 static struct reset_control_ops syscfg_reset_ops = {
 	.reset    = syscfg_reset_dev,
 	.assert   = syscfg_reset_assert,
 	.deassert = syscfg_reset_deassert,
+	.status   = syscfg_reset_status,
 };
 
 static int syscfg_reset_controller_register(struct device *dev,
diff -urNp a/drivers/reset/sti/reset-syscfg.h b/drivers/reset/sti/reset-syscfg.h
--- a/drivers/reset/sti/reset-syscfg.h	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/reset/sti/reset-syscfg.h	2019-09-26 21:23:27.636619900 +0100
@@ -34,7 +34,7 @@ struct syscfg_reset_channel_data {
 	  .reset	= REG_FIELD(_rr, _rb, _rb),	\
 	  .ack		= REG_FIELD(_ar, _ab, _ab), }
 
-#define _SYSCFG_RST_CH_NO_ACK(_c, _rr, _rb)		\
+#define SYSCFG_SRST(_c, _rr, _rb)		\
 	{ .compatible	= _c,			\
 	  .reset	= REG_FIELD(_rr, _rb, _rb), }
 
diff -urNp a/drivers/rtc/Kconfig b/drivers/rtc/Kconfig
--- a/drivers/rtc/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/rtc/Kconfig	2019-10-07 11:28:04.259738300 +0100
@@ -1390,6 +1390,33 @@ config RTC_DRV_PCAP
 	  If you say Y here you will get support for the RTC found on
 	  the PCAP2 ASIC used on some Motorola phones.
 
+config RTC_DRV_ST_LPC
+	tristate "STMicroelectronics LPC RTC device driver"
+	depends on ARM && ARCH_STI
+	depends on OF
+	help
+	  If you say yes here you get support for the
+	  STMicroelectronics Low Power Controller (LPC) based RTC.
+	  !!! BE CARREFUL !!!
+	  This driver shares hardware resources with watchdog part of the
+	  LPC. Both lpc rtc driver and lpc watchdog driver cannot be
+	  used together.
+
+	  This driver can also be built as a module. If so, the module
+	  will be called rtc-st-lpc.
+
+config RTC_DRV_ST_SBC
+	tristate "STMicroelectronics SBC RTC device driver"
+	depends on ARM && ARCH_STI && ST_LPM
+	default n
+	help
+	  If you say yes here you get support for the
+	  STMicroelectronics Standby Controller (SBC) based RTC.
+
+	  This driver can also be built as a module. If so, the module
+	  will be called rtc-st-sbc.
+
+
 config RTC_DRV_MC13XXX
 	depends on MFD_MC13XXX
 	tristate "Freescale MC13xxx RTC"
diff -urNp a/drivers/rtc/Makefile b/drivers/rtc/Makefile
--- a/drivers/rtc/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/rtc/Makefile	2019-10-07 11:26:52.548069100 +0100
@@ -132,6 +132,8 @@ obj-$(CONFIG_RTC_DRV_SNVS)	+= rtc-snvs.o
 obj-$(CONFIG_RTC_DRV_SPEAR)	+= rtc-spear.o
 obj-$(CONFIG_RTC_DRV_STARFIRE)	+= rtc-starfire.o
 obj-$(CONFIG_RTC_DRV_STK17TA8)	+= rtc-stk17ta8.o
+obj-$(CONFIG_RTC_DRV_ST_LPC)	+= rtc-st-lpc.o
+obj-$(CONFIG_RTC_DRV_ST_SBC)	+= rtc-st-sbc.o
 obj-$(CONFIG_RTC_DRV_STMP)	+= rtc-stmp3xxx.o
 obj-$(CONFIG_RTC_DRV_SUN4V)	+= rtc-sun4v.o
 obj-$(CONFIG_RTC_DRV_SUN6I)	+= rtc-sun6i.o
diff -urNp a/drivers/rtc/rtc-st-lpc.c b/drivers/rtc/rtc-st-lpc.c
--- a/drivers/rtc/rtc-st-lpc.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/rtc/rtc-st-lpc.c	2019-09-26 21:23:27.636619900 +0100
@@ -0,0 +1,341 @@
+/*
+ * This driver implements a RTC using the Low Power Timer in
+ * the Low Power Controller (LPC) in some STMicroelectronics devices.
+ *
+ * See ADCS 2001950 for more details on the hardware.
+ *
+ * Copyright (C) 2009 STMicroelectronics Limited
+ * Copyright (C) 2010 STMicroelectronics Limited
+ * Copyright (C) 2013 STMicroelectronics Limited
+ * Author: Stuart Menefy <stuart.menefy@@st.com>
+ * Author: Francesco Virlinzi <francesco.virlinzi@st.com>
+ * Author: David Paris <david.paris@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License GPLv2.  See linux/COPYING for more information.
+ */
+
+#include <linux/module.h>
+#include <linux/kernel.h>
+#include <linux/rtc.h>
+#include <linux/delay.h>
+#include <linux/init.h>
+#include <linux/platform_device.h>
+#include <linux/io.h>
+#include <linux/irq.h>
+#include <linux/clk.h>
+#include <linux/of.h>
+#include <linux/of_irq.h>
+
+/* Low Power Timer */
+#define LPC_LPT_LSB_OFF		0x400
+#define LPC_LPT_MSB_OFF		0x404
+#define LPC_LPT_START_OFF	0x408
+/* Low Power Alarm */
+#define LPC_LPA_LSB_OFF		0x410
+#define LPC_LPA_MSB_OFF		0x414
+#define LPC_LPA_START_OFF	0x418
+/* LPC as WDT */
+#define LPC_WDT_OFF		0x510
+#define LPC_WDT_FLAG_OFF	0x514
+
+struct st_rtc {
+	struct rtc_device *rtc_dev;
+	void __iomem *ioaddr;
+	struct resource *res;
+	struct clk *clk;
+	short irq;
+	bool irq_enabled:1;
+	spinlock_t lock;
+	struct rtc_wkalrm alarm;
+};
+
+static void st_rtc_set_hw_alarm(struct st_rtc *rtc,
+		unsigned long msb, unsigned long  lsb)
+{
+	unsigned long flags;
+
+	spin_lock_irqsave(&rtc->lock, flags);
+
+	writel(1, rtc->ioaddr + LPC_WDT_OFF);
+
+	writel(msb, rtc->ioaddr + LPC_LPA_MSB_OFF);
+	writel(lsb, rtc->ioaddr + LPC_LPA_LSB_OFF);
+	writel(1, rtc->ioaddr + LPC_LPA_START_OFF);
+
+	writel(0, rtc->ioaddr + LPC_WDT_OFF);
+
+	spin_unlock_irqrestore(&rtc->lock, flags);
+}
+
+static irqreturn_t st_rtc_isr(int this_irq, void *data)
+{
+	struct st_rtc *rtc = (struct st_rtc *)data;
+
+	rtc_update_irq(rtc->rtc_dev, 1, RTC_AF);
+
+	return IRQ_HANDLED;
+}
+
+static int st_rtc_read_time(struct device *dev, struct rtc_time *tm)
+{
+	struct st_rtc *rtc = dev_get_drvdata(dev);
+	unsigned long long lpt;
+	unsigned long lpt_lsb, lpt_msb;
+	unsigned long flags;
+
+	spin_lock_irqsave(&rtc->lock, flags);
+
+	do {
+		lpt_msb = readl(rtc->ioaddr + LPC_LPT_MSB_OFF);
+		lpt_lsb = readl(rtc->ioaddr + LPC_LPT_LSB_OFF);
+	} while (readl(rtc->ioaddr + LPC_LPT_MSB_OFF) != lpt_msb);
+
+	spin_unlock_irqrestore(&rtc->lock, flags);
+
+	lpt = ((unsigned long long)lpt_msb << 32) | lpt_lsb;
+	do_div(lpt, clk_get_rate(rtc->clk));
+	rtc_time_to_tm(lpt, tm);
+
+	return 0;
+}
+
+static int st_rtc_set_time(struct device *dev, struct rtc_time *tm)
+{
+	struct st_rtc *rtc = dev_get_drvdata(dev);
+	unsigned long secs, flags;
+	int ret;
+	unsigned long long lpt;
+
+	ret = rtc_tm_to_time(tm, &secs);
+	if (ret != 0)
+		return ret;
+
+	lpt = (unsigned long long)secs * clk_get_rate(rtc->clk);
+
+	spin_lock_irqsave(&rtc->lock, flags);
+
+	writel(lpt >> 32, rtc->ioaddr + LPC_LPT_MSB_OFF);
+	writel(lpt, rtc->ioaddr + LPC_LPT_LSB_OFF);
+	writel(1, rtc->ioaddr + LPC_LPT_START_OFF);
+
+	spin_unlock_irqrestore(&rtc->lock, flags);
+
+	return 0;
+}
+
+static int st_rtc_read_alarm(struct device *dev, struct rtc_wkalrm *wkalrm)
+{
+	struct st_rtc *rtc = dev_get_drvdata(dev);
+	unsigned long flags;
+
+	spin_lock_irqsave(&rtc->lock, flags);
+
+	memcpy(wkalrm, &rtc->alarm, sizeof(struct rtc_wkalrm));
+
+	spin_unlock_irqrestore(&rtc->lock, flags);
+
+	return 0;
+}
+
+static int st_rtc_alarm_irq_enable(struct device *dev, unsigned int enabled)
+{
+	struct st_rtc *rtc = dev_get_drvdata(dev);
+
+	if (enabled && !rtc->irq_enabled) {
+		enable_irq(rtc->irq);
+		rtc->irq_enabled = 1;
+	} else if (!enabled && rtc->irq_enabled) {
+		disable_irq(rtc->irq);
+		rtc->irq_enabled = 0;
+	}
+
+	return 0;
+}
+
+static int st_rtc_set_alarm(struct device *dev, struct rtc_wkalrm *t)
+{
+	struct st_rtc *rtc = dev_get_drvdata(dev);
+	struct rtc_time now;
+	unsigned long now_secs;
+	unsigned long alarm_secs;
+	unsigned long long lpa;
+
+	st_rtc_read_time(dev, &now);
+	rtc_tm_to_time(&now, &now_secs);
+	rtc_tm_to_time(&t->time, &alarm_secs);
+
+	if (now_secs > alarm_secs)
+		return -EINVAL; /* invalid alarm time */
+
+	memcpy(&rtc->alarm, t, sizeof(struct rtc_wkalrm));
+
+	alarm_secs -= now_secs; /* now many secs to fire */
+	lpa = (unsigned long long)alarm_secs * clk_get_rate(rtc->clk);
+
+	st_rtc_set_hw_alarm(rtc, lpa >> 32, lpa);
+
+	st_rtc_alarm_irq_enable(dev, t->enabled);
+
+	return 0;
+}
+
+static struct rtc_class_ops st_rtc_ops = {
+	.read_time = st_rtc_read_time,
+	.set_time = st_rtc_set_time,
+	.read_alarm = st_rtc_read_alarm,
+	.set_alarm = st_rtc_set_alarm,
+	.alarm_irq_enable = st_rtc_alarm_irq_enable,
+};
+
+#ifdef CONFIG_PM
+static int st_rtc_suspend(struct device *dev)
+{
+	struct st_rtc *rtc = dev_get_drvdata(dev);
+
+	if (device_may_wakeup(dev))
+		return 0;
+
+	writel(1, rtc->ioaddr + LPC_WDT_OFF);
+	writel(0, rtc->ioaddr + LPC_LPA_START_OFF);
+	writel(0, rtc->ioaddr + LPC_WDT_OFF);
+
+	return 0;
+}
+
+static int st_rtc_resume(struct device *dev)
+{
+	struct st_rtc *rtc = dev_get_drvdata(dev);
+
+	rtc_alarm_irq_enable(rtc->rtc_dev, 0);
+
+	/*
+	 * clean 'rtc->alarm' to allow a new
+	 * a new .set_alarm to the upper RTC layer
+	 */
+	memset(&rtc->alarm, 0, sizeof(struct rtc_wkalrm));
+
+	writel(0, rtc->ioaddr + LPC_LPA_MSB_OFF);
+	writel(0, rtc->ioaddr + LPC_LPA_LSB_OFF);
+	writel(1, rtc->ioaddr + LPC_WDT_OFF);
+	writel(1, rtc->ioaddr + LPC_LPA_START_OFF);
+	writel(0, rtc->ioaddr + LPC_WDT_OFF);
+
+	return 0;
+}
+
+SIMPLE_DEV_PM_OPS(st_rtc_pm_ops, st_rtc_suspend, st_rtc_resume);
+#define ST_LPC_RTC_PM	(&st_rtc_pm_ops)
+#else
+#define ST_LPC_RTC_PM	NULL
+#endif
+
+static int st_rtc_probe(struct platform_device *pdev)
+{
+	struct device_node *np = pdev->dev.of_node;
+	struct st_rtc *rtc;
+	struct resource *res;
+	int ret = 0;
+	struct rtc_time tm_check;
+
+	rtc = devm_kzalloc(&pdev->dev, sizeof(struct st_rtc), GFP_KERNEL);
+	if (unlikely(!rtc))
+		return -ENOMEM;
+
+	spin_lock_init(&rtc->lock);
+
+	res = platform_get_resource(pdev, IORESOURCE_MEM, 0);
+	rtc->ioaddr = devm_ioremap_resource(&pdev->dev, res);
+	if (IS_ERR(rtc->ioaddr)) {
+		pr_err("%s Ioremap resource not done\n", __func__);
+		return PTR_ERR(rtc->ioaddr);
+	}
+
+	rtc->irq = irq_of_parse_and_map(np, 0);
+	if (!rtc->irq) {
+		dev_err(&pdev->dev, "IRQ missing or invalid\n");
+		return -EINVAL;
+	}
+
+	ret = devm_request_irq(&pdev->dev, rtc->irq, st_rtc_isr, 0,
+			pdev->name, rtc);
+	if (ret) {
+		dev_err(&pdev->dev, "Failed to request irq %i\n", rtc->irq);
+		return ret;
+	}
+
+	enable_irq_wake(rtc->irq);
+	disable_irq(rtc->irq);
+
+	rtc->clk = of_clk_get_by_name(np, "lpc_rtc");
+	if (IS_ERR(rtc->clk)) {
+		dev_err(&pdev->dev, "Unable to request clock\n");
+		return PTR_ERR(rtc->clk);
+	}
+
+	clk_prepare_enable(rtc->clk);
+
+	device_set_wakeup_capable(&pdev->dev, 1);
+
+	platform_set_drvdata(pdev, rtc);
+
+	/*
+	 * The RTC-LPC is able to manage date.year > 2038
+	 * but currently the kernel can not manage this date!
+	 * If the RTC-LPC has a date.year > 2038 then
+	 * it's set to the epoch "Jan 1st 2000"
+	 */
+	st_rtc_read_time(&pdev->dev, &tm_check);
+
+	if (tm_check.tm_year >=  (2038 - 1900)) {
+		memset(&tm_check, 0, sizeof(tm_check));
+		tm_check.tm_year = 100;
+		tm_check.tm_mday = 1;
+		st_rtc_set_time(&pdev->dev, &tm_check);
+	}
+
+	rtc->rtc_dev = rtc_device_register("st-lpc-rtc", &pdev->dev,
+					   &st_rtc_ops, THIS_MODULE);
+	if (IS_ERR(rtc->rtc_dev)) {
+		clk_disable_unprepare(rtc->clk);
+		ret = PTR_ERR(rtc->rtc_dev);
+	}
+
+	return ret;
+}
+
+static int st_rtc_remove(struct platform_device *pdev)
+{
+	struct st_rtc *rtc = platform_get_drvdata(pdev);
+
+	if (likely(rtc->rtc_dev))
+		rtc_device_unregister(rtc->rtc_dev);
+
+	return 0;
+}
+
+static struct of_device_id st_rtc_match[] = {
+	{
+		.compatible = "st,lpc-rtc",
+	},
+	{},
+};
+
+MODULE_DEVICE_TABLE(of, st_rtc_match);
+
+static struct platform_driver st_rtc_platform_driver = {
+	.driver = {
+		.name = "st-lpc-rtc",
+		.owner = THIS_MODULE,
+		.pm = ST_LPC_RTC_PM,
+		.of_match_table = of_match_ptr(st_rtc_match),
+	},
+	.probe = st_rtc_probe,
+	.remove = st_rtc_remove,
+};
+
+module_platform_driver(st_rtc_platform_driver);
+
+MODULE_DESCRIPTION("STMicroelectronics LPC RTC driver");
+MODULE_AUTHOR("Stuart Menefy <stuart.menefy@st.com>");
+MODULE_LICENSE("GPLv2");
diff -urNp a/drivers/rtc/rtc-st-sbc.c b/drivers/rtc/rtc-st-sbc.c
--- a/drivers/rtc/rtc-st-sbc.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/rtc/rtc-st-sbc.c	2019-09-26 21:23:27.636619900 +0100
@@ -0,0 +1,257 @@
+/*
+ * This driver implements a RTC for the Low Power Mode
+ * in some STMicroelectronics devices.
+ *
+ * Copyright (C) 2014 STMicroelectronics Limited
+ * Author: Satbir Singh <satbir.singh@st.com>
+ * Author: David Paris <david.paris@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License version 2.  See linux/COPYING for more information.
+ */
+
+#include <linux/module.h>
+#include <linux/kernel.h>
+#include <linux/rtc.h>
+#include <linux/delay.h>
+#include <linux/init.h>
+#include <linux/platform_device.h>
+#include <linux/of.h>
+#include <linux/power/st_lpm.h>
+
+struct st_sbc_rtc {
+	struct rtc_device *rtc_dev;
+	struct rtc_wkalrm alarm;
+	struct rtc_time tm_cur;
+};
+
+static int st_sbc_rtc_alarm_callback(void *data)
+{
+	struct device *dev = (struct device *)data;
+	struct st_sbc_rtc *rtc = dev_get_drvdata(dev);
+
+	dev_dbg(dev, "%s - SBC Alarm rang\n", __func__);
+	rtc_update_irq(rtc->rtc_dev, 1, RTC_AF);
+	rtc->alarm.enabled = 0;
+	return 0;
+}
+
+static int st_sbc_rtc_set_time(struct device *dev, struct rtc_time *tm)
+{
+	int ret = 0;
+	struct st_sbc_rtc *rtc = dev_get_drvdata(dev);
+
+	tm->tm_year = tm->tm_year + 1900;
+	tm->tm_mon = tm->tm_mon + 1;
+
+	memcpy(&rtc->tm_cur, tm, sizeof(rtc->tm_cur));
+
+	return st_lpm_set_rtc(tm);
+}
+
+static int st_sbc_rtc_read_time(struct device *dev, struct rtc_time *tm)
+{
+	struct st_sbc_rtc *rtc = dev_get_drvdata(dev);
+
+	st_lpm_get_rtc(tm);
+
+	memcpy(&rtc->tm_cur, tm, sizeof(rtc->tm_cur));
+
+	return 0;
+}
+
+static int st_sbc_rtc_read_alarm(struct device *dev, struct rtc_wkalrm *wkalrm)
+{
+	struct st_sbc_rtc *rtc = dev_get_drvdata(dev);
+
+	memcpy(wkalrm, &rtc->alarm, sizeof(struct rtc_wkalrm));
+
+	return 0;
+}
+
+static int st_sbc_rtc_set_alarm(struct device *dev, struct rtc_wkalrm *t)
+{
+	int ret = 0;
+	unsigned long lpt_alarm, lpt_cur;
+	struct st_sbc_rtc *rtc = dev_get_drvdata(dev);
+	struct rtc_time tm;
+
+	rtc_tm_to_time(&t->time, &lpt_alarm);
+	st_sbc_rtc_read_time(dev, &tm);
+	rtc_tm_to_time(&tm, &lpt_cur);
+	lpt_alarm = lpt_alarm - lpt_cur;
+	rtc_time_to_tm(lpt_alarm, &t->time);
+
+	memcpy(&rtc->alarm, t, sizeof(struct rtc_wkalrm));
+
+	ret = st_lpm_set_wakeup_time(lpt_alarm);
+	if (ret < 0)
+		return ret;
+
+	device_set_wakeup_enable(dev, true);
+
+	/*
+	 * In active mode, SBC F/w will notify
+	 * RTC alarm expiry event to host (kernel),
+	 * only if RTC wake-up is set for wakeup
+	 * in SBC F/w.
+	 * Note that device_set_wakeup_enable() call
+	 * will trigger the same effect (through
+	 * lpm driver suspend routine) only when the
+	 * system is trying to enter CPS.
+	 */
+	st_lpm_set_wakeup_device(ST_LPM_WAKEUP_RTC);
+
+	return 0;
+}
+
+static struct rtc_class_ops st_sbc_rtc_ops = {
+	.read_time = st_sbc_rtc_read_time,
+	.set_time = st_sbc_rtc_set_time,
+	.read_alarm = st_sbc_rtc_read_alarm,
+	.set_alarm = st_sbc_rtc_set_alarm,
+};
+
+static int st_sbc_rtc_probe(struct platform_device *pdev)
+{
+	int ret = -ENODEV;
+	struct st_sbc_rtc *rtc;
+#ifdef CONFIG_RTC_HCTOSYS
+	struct rtc_device *hctosys_rtc;
+	struct rtc_time tm;
+	struct timespec tv = {
+		.tv_nsec = NSEC_PER_SEC >> 1,
+	};
+#endif
+
+	rtc = devm_kzalloc(&pdev->dev,
+		sizeof(struct st_sbc_rtc), GFP_KERNEL);
+	if (unlikely(!rtc))
+		return -ENOMEM;
+
+	device_set_wakeup_capable(&pdev->dev, true);
+
+	platform_set_drvdata(pdev, rtc);
+
+	rtc->rtc_dev = rtc_device_register("rtc-st-sbc", &pdev->dev,
+		&st_sbc_rtc_ops, THIS_MODULE);
+	if (IS_ERR(rtc->rtc_dev)) {
+		device_set_wakeup_capable(&pdev->dev, false);
+		return PTR_ERR(rtc->rtc_dev);
+	}
+
+	ret = st_lpm_register_callback(ST_LPM_RTC, st_sbc_rtc_alarm_callback,
+			(void *)&pdev->dev);
+
+#ifdef CONFIG_RTC_HCTOSYS
+	hctosys_rtc = rtc_class_open(CONFIG_RTC_HCTOSYS_DEVICE);
+
+	if (hctosys_rtc == NULL) {
+		pr_err("%s: unable to open rtc device (%s)\n",
+				__FILE__, CONFIG_RTC_HCTOSYS_DEVICE);
+		return -ENODEV;
+	}
+
+	if (!strcmp(hctosys_rtc->name, rtc->rtc_dev->name)) {
+		ret = rtc_read_time(rtc->rtc_dev, &tm);
+		if (ret) {
+			dev_err(rtc->rtc_dev->dev.parent,
+			"hctosys: unable to read the hardware clock\n");
+			goto error;
+		}
+
+		ret = rtc_valid_tm(&tm);
+		if (ret) {
+			dev_err(rtc->rtc_dev->dev.parent,
+					"hctosys: invalid date/time\n");
+			goto error;
+		}
+
+		rtc_tm_to_time(&tm, &tv.tv_sec);
+
+		ret = do_settimeofday(&tv);
+
+		dev_info(rtc->rtc_dev->dev.parent,
+				"Setting system clock to %d-%02d-%02d %02d:%02d:%02d UTC\n",
+				tm.tm_year + 1900, tm.tm_mon + 1, tm.tm_mday,
+				tm.tm_hour, tm.tm_min, tm.tm_sec);
+	}
+
+error:
+	rtc_class_close(hctosys_rtc);
+#endif
+
+	return ret;
+}
+
+static int st_sbc_rtc_remove(struct platform_device *pdev)
+{
+	struct st_sbc_rtc *rtc = platform_get_drvdata(pdev);
+
+	rtc_device_unregister(rtc->rtc_dev);
+	device_init_wakeup(&pdev->dev, false);
+
+	return 0;
+}
+
+#ifdef CONFIG_PM
+static int st_sbc_rtc_suspend(struct device *dev)
+{
+	return 0;
+}
+static int st_sbc_rtc_resume(struct device *dev)
+{
+	struct st_sbc_rtc *rtc = dev_get_drvdata(dev);
+
+	device_set_wakeup_enable(dev, false);
+	rtc_update_irq(rtc->rtc_dev, 1, RTC_AF);
+
+	return 0;
+}
+
+static const struct dev_pm_ops st_sbc_rtc_pm_ops = {
+	.suspend = st_sbc_rtc_suspend,
+	.resume = st_sbc_rtc_resume,
+};
+
+#define ST_SBC_RTC_PM_OPS  (&st_sbc_rtc_pm_ops)
+#else
+#define ST_SBC_RTC_PM_OPS  NULL
+#endif
+
+static struct of_device_id st_sbc_rtc_match[] = {
+	{
+		.compatible = "st,rtc-sbc",
+	},
+	{},
+};
+MODULE_DEVICE_TABLE(of, st_sbc_rtc_match);
+
+static struct platform_driver st_rtc_platform_driver = {
+	.driver = {
+		.name = "rtc-st-sbc",
+		.owner = THIS_MODULE,
+		.pm = ST_SBC_RTC_PM_OPS,
+		.of_match_table = of_match_ptr(st_sbc_rtc_match),
+	},
+	.probe = st_sbc_rtc_probe,
+	.remove = st_sbc_rtc_remove,
+};
+
+static int __init st_sbc_rtc_init(void)
+{
+	return platform_driver_register(&st_rtc_platform_driver);
+}
+
+void __exit st_sbc_rtc_exit(void)
+{
+	pr_info("ST RTC SBC driver removed\n");
+	platform_driver_unregister(&st_rtc_platform_driver);
+}
+
+module_init(st_sbc_rtc_init);
+module_exit(st_sbc_rtc_exit);
+
+MODULE_DESCRIPTION("STMicroelectronics SBC RTC driver");
+MODULE_AUTHOR("david.paris@st.com");
+MODULE_LICENSE("GPLv2");
diff -urNp a/drivers/watchdog/Kconfig b/drivers/watchdog/Kconfig
--- a/drivers/watchdog/Kconfig	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/watchdog/Kconfig	2019-10-07 11:22:41.949649800 +0100
@@ -515,6 +515,21 @@ config MEDIATEK_WATCHDOG
 	  To compile this driver as a module, choose M here: the
 	  module will be called mtk_wdt.
 
+config ST_LPC_WATCHDOG
+	tristate "STMicroelectronics LPC watchdog"
+	depends on ARCH_STI
+	select WATCHDOG_CORE
+	help
+	  Say Y here to include Watchdog timer support for the watchdog
+	  existing in the LPC of STMicroelectronics SOCs.
+	  !!! BE CARREFUL !!!
+	  This driver shares hardware resources with RTC Alarm part of the
+	  LPC. Both lpc watchdog driver and lpc rtc driver cannot be
+	  used together.
+
+	  To compile this driver as a module, choose M here: the
+	  module will be called st-lpc-wdt.
+
 # AVR32 Architecture
 
 config AT32AP700X_WDT
diff -urNp a/drivers/watchdog/Makefile b/drivers/watchdog/Makefile
--- a/drivers/watchdog/Makefile	2015-04-12 23:12:50.000000000 +0100
+++ b/drivers/watchdog/Makefile	2019-10-07 14:56:35.958709900 +0100
@@ -56,6 +56,7 @@ obj-$(CONFIG_TS72XX_WATCHDOG) += ts72xx_
 obj-$(CONFIG_IMX2_WDT) += imx2_wdt.o
 obj-$(CONFIG_UX500_WATCHDOG) += ux500_wdt.o
 obj-$(CONFIG_RETU_WATCHDOG) += retu_wdt.o
+#obj-$(CONFIG_ST_LPC_WATCHDOG) += st_lpc_wdt.o
 obj-$(CONFIG_BCM2835_WDT) += bcm2835_wdt.o
 obj-$(CONFIG_MOXART_WDT) += moxart_wdt.o
 obj-$(CONFIG_SIRFSOC_WATCHDOG) += sirfsoc_wdt.o
diff -urNp a/drivers/watchdog/st-lpc-wdt.c b/drivers/watchdog/st-lpc-wdt.c
--- a/drivers/watchdog/st-lpc-wdt.c	1970-01-01 01:00:00.000000000 +0100
+++ b/drivers/watchdog/st-lpc-wdt.c	2019-10-07 11:20:39.883181000 +0100
@@ -0,0 +1 @@
+/* * st-lpc-wdt.c * * Copyright (C) STMicroelectronics SA 2013 * Author:  David Paris <david.paris@st.com> for STMicroelectronics. * License terms:  GNU General Public License (GPL), version 2 */#include <linux/module.h>#include <linux/kernel.h>#include <linux/watchdog.h>#include <linux/init.h>#include <linux/platform_device.h>#include <linux/io.h>#include <linux/clk.h>#include <linux/of.h>#include <linux/of_platform.h>#include <linux/regmap.h>#include <linux/mfd/syscon.h>/* Low Power Alarm */#define LPC_LPA_LSB_OFF		0x410#define LPC_LPA_START_OFF	0x418/* LPC as WDT */#define LPC_WDT_OFF		0x510#define WATCHDOG_MIN		1#define WATCHDOG_MAX32		4294967 /* 32bit resolution */#define WDT_ENABLE		1#define WDT_DISABLE		0#define STID127_SYSCFG_CPU(num)		((num - 700)*4)#define STIH415_SYSCFG_SYSTEM(num)	((num - 600)*4)#define STIH416_SYSCFG_CPU(num)		(2000 + ((num - 7500)*4))#define STIH407_SYSCFG_CORE(num)	((num - 5000)*4)struct cpurst_syscfg {	struct regmap *syscfg;	unsigned int type;	unsigned int type_msk;	unsigned int mask;	unsigned int mask_msk;};struct st_lpc_wdt {	void __iomem *ioaddr;	struct cpurst_syscfg *cpurst;	struct clk *clk;	int rst_type;} lpc_wdt;static struct cpurst_syscfg stid127_cpurst = {	.type = STID127_SYSCFG_CPU(701),	.type_msk = BIT(2),	.mask = STID127_SYSCFG_CPU(700),	.mask_msk = BIT(2),};static struct cpurst_syscfg stih415_cpurst = {	.type = STIH415_SYSCFG_SYSTEM(646),	.type_msk = BIT(6),	.mask = STIH415_SYSCFG_SYSTEM(645),	.mask_msk = BIT(7),};static struct cpurst_syscfg stih416_cpurst = {	.type = STIH416_SYSCFG_CPU(7547),	.type_msk = BIT(6),	.mask = STIH416_SYSCFG_CPU(7546),	.mask_msk = BIT(7),};static struct cpurst_syscfg stih407_cpurst = {	.mask = STIH407_SYSCFG_CORE(5129),	.mask_msk = BIT(19),};static struct of_device_id st_lpc_wdt_match[] = {	{		.compatible = "st,stih407-lpc-wdt",		.data = (void *)&stih407_cpurst,	},	{		.compatible = "st,stih416-lpc-wdt",		.data = (void *)&stih416_cpurst,	},	{		.compatible = "st,stih415-lpc-wdt",		.data = (void *)&stih415_cpurst,	},	{		.compatible = "st,stid127-lpc-wdt",		.data = (void *)&stid127_cpurst,	},	{},};MODULE_DEVICE_TABLE(of, st_lpc_wdt_match);/* * st_lpc_wdt_setup: * Configure how LPC watchdog interrupt acts on platform *	enable: 0: No platform reboot when watchdog occurs *		1: Platform will reboot when watchdog occurs */static void st_lpc_wdt_setup(bool enable){	/*	 * Here we choose type of watchdog reset	 * 0: Cold 1: Warm	 */	if (lpc_wdt.cpurst->type) {		regmap_update_bits(lpc_wdt.cpurst->syscfg,				lpc_wdt.cpurst->type,				lpc_wdt.cpurst->type_msk,				lpc_wdt.rst_type);	}	/*	 * Here we mask/unmask watchdog reset	 */	regmap_update_bits(lpc_wdt.cpurst->syscfg,			lpc_wdt.cpurst->mask,			lpc_wdt.cpurst->mask_msk,			!enable);}/* * st_lpc_wdt_load_timer: * API to load the watchdog timeout value in the LPA down counter *	timeout: watchdog timeout in seconds */static void st_lpc_wdt_load_timer(unsigned int timeout){	timeout *= clk_get_rate(lpc_wdt.clk);	/*	 * Write only LSB as timeout in Watchdog	 * framework is 32bits only	 */	writel_relaxed(timeout, lpc_wdt.ioaddr + LPC_LPA_LSB_OFF);	writel_relaxed(1, lpc_wdt.ioaddr + LPC_LPA_START_OFF);}/* * st_lpc_wdt_start: * API to start to LPA downcounting *	wdd: the watchdog to start */static int st_lpc_wdt_start(struct watchdog_device *wdd){	writel_relaxed(1, lpc_wdt.ioaddr + LPC_WDT_OFF);	return 0;}/* * st_lpc_wdt_stop: * API to stop to LPA downcounting *	wdd: the watchdog to stop */static int st_lpc_wdt_stop(struct watchdog_device *wdd){	writel_relaxed(0, lpc_wdt.ioaddr + LPC_WDT_OFF);	return 0;}/* * st_lpc_wdt_set_timeout: * API calls by watchdog framework to load the watchdog * timeout value. *	wdd: the watchdog device to configure *	timeout: the watchdog timeout in seconds */static int st_lpc_wdt_set_timeout(struct watchdog_device *wdd,				 unsigned int timeout){	wdd->timeout = timeout;	st_lpc_wdt_load_timer(timeout);	return 0;}/* * st_lpc_wdt_keep_alive: * API to kick the watchdog *	wdd: the watchdog device to kick */static int st_lpc_wdt_keepalive(struct watchdog_device *wdd){	st_lpc_wdt_load_timer(wdd->timeout);	return 0;}static const struct watchdog_info lpc_wdt_info = {	.options = WDIOF_SETTIMEOUT | WDIOF_KEEPALIVEPING | WDIOF_MAGICCLOSE,	.identity = "ST LPC WDT",};static const struct watchdog_ops lpc_wdt_ops = {	.owner = THIS_MODULE,	.start = st_lpc_wdt_start,	.stop  = st_lpc_wdt_stop,	.ping  = st_lpc_wdt_keepalive,	.set_timeout = st_lpc_wdt_set_timeout,};static struct watchdog_device lpc_wdt_dev = {	.info = &lpc_wdt_info,	.ops = &lpc_wdt_ops,	.min_timeout = WATCHDOG_MIN,	.max_timeout = WATCHDOG_MAX32,};#ifdef CONFIG_PM_SLEEPstatic int st_lpc_wdt_suspend(struct device *dev){	/*	 * Stop watchdog during suspend	 */	if (watchdog_active(&lpc_wdt_dev))		st_lpc_wdt_stop(&lpc_wdt_dev);	st_lpc_wdt_setup(WDT_DISABLE);	return 0;}static int st_lpc_wdt_resume(struct device *dev){	st_lpc_wdt_setup(WDT_ENABLE);	/*	 * Re-start watchdog if it was active before suspend	 */	if (watchdog_active(&lpc_wdt_dev)) {		st_lpc_wdt_load_timer(lpc_wdt_dev.timeout);		st_lpc_wdt_start(&lpc_wdt_dev);	}	return 0;}SIMPLE_DEV_PM_OPS(st_lpc_wdt_pm_ops, st_lpc_wdt_suspend, st_lpc_wdt_resume);#define ST_LPC_WDT_PM	(&st_lpc_wdt_pm_ops)#else#define ST_LPC_WDT_PM	NULL#endifstatic int st_lpc_wdt_probe(struct platform_device *pdev){	struct device_node *np = pdev->dev.of_node;	struct device *dev = &pdev->dev;	const struct of_device_id *match;	struct resource *res;	int ret = 0;	const char *rst_type;	res = platform_get_resource(pdev, IORESOURCE_MEM, 0);	lpc_wdt.ioaddr = devm_ioremap_resource(&pdev->dev, res);	if (IS_ERR(lpc_wdt.ioaddr)) {		pr_err("%s Ioremap resource not done\n", __func__);		return PTR_ERR(lpc_wdt.ioaddr);	}	match = of_match_device(st_lpc_wdt_match, dev);	lpc_wdt.cpurst = (struct cpurst_syscfg *)match->data;	lpc_wdt.cpurst->syscfg =		syscon_regmap_lookup_by_phandle(np, "st,syscfg");	if (IS_ERR(lpc_wdt.cpurst->syscfg)) {		dev_err(dev, "No syscfg phandle specified\n");		return PTR_ERR(lpc_wdt.cpurst->syscfg);	}	lpc_wdt.clk = of_clk_get_by_name(np, "lpc_wdt");	if (IS_ERR(lpc_wdt.clk)) {		dev_err(dev, "Unable to request clock\n");		return PTR_ERR(lpc_wdt.clk);	}	clk_prepare_enable(lpc_wdt.clk);	ret = of_property_read_string(dev->of_node, "st,rst_type", &rst_type);	if (ret >= 0) {		if (!strcmp(rst_type, "warm"))			lpc_wdt.rst_type = 1;		else			lpc_wdt.rst_type = 0;	}	platform_set_drvdata(pdev, &lpc_wdt);	watchdog_set_nowayout(&lpc_wdt_dev, WATCHDOG_NOWAYOUT);	ret = watchdog_register_device(&lpc_wdt_dev);	if (ret) {		dev_err(dev, "Unable to register device\n");		clk_disable_unprepare(lpc_wdt.clk);		return ret;	}	/* Init Watchdog timeout with value in DT */	watchdog_init_timeout(&lpc_wdt_dev, 0, dev);	st_lpc_wdt_setup(WDT_ENABLE);	dev_info(dev, "LPC Watchdog driver registered, reset type is %s",			lpc_wdt.rst_type ? "warm" : "cold");	return ret;}static int st_lpc_wdt_remove(struct platform_device *pdev){	if (watchdog_active(&lpc_wdt_dev))		st_lpc_wdt_stop(&lpc_wdt_dev);	st_lpc_wdt_setup(WDT_DISABLE);	watchdog_unregister_device(&lpc_wdt_dev);	return 0;}static struct platform_driver st_lpc_wdt_driver = {	.probe		= st_lpc_wdt_probe,	.remove		= st_lpc_wdt_remove,	.driver		= {		.name	= "st-lpc-wdt",		.owner	= THIS_MODULE,		.pm	= ST_LPC_WDT_PM,		.of_match_table = of_match_ptr(st_lpc_wdt_match),	},};module_platform_driver(st_lpc_wdt_driver);MODULE_AUTHOR("David PARIS <david.paris@st.com>");MODULE_DESCRIPTION("ST LPC Watchdog Driver");MODULE_LICENSE("GPLv2");
\ No newline at end of file
diff -urNp a/include/dt-bindings/gpio/gpio-st-wakeup.h b/include/dt-bindings/gpio/gpio-st-wakeup.h
--- a/include/dt-bindings/gpio/gpio-st-wakeup.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/dt-bindings/gpio/gpio-st-wakeup.h	2019-09-26 21:23:27.708620000 +0100
@@ -0,0 +1,20 @@
+/*
+ * gpio-st-wakeup.h
+ *
+ * Copyright (C) STMicroelectronics SA 2014
+ * Author: David PARIS <david.paris@st.com> for STMicroelectronics.
+ * License terms:  GNU General Public License (GPL), version 2
+ */
+
+#ifndef _DT_BINDINGS_GPIO_GPIO_ST_WAKEUP_H
+#define _DT_BINDINGS_GPIO_GPIO_ST_WAKEUP_H
+
+#define GPIO_AS_INPUT 0
+#define GPIO_AS_OUTPUT 1
+#define GPIO_ACTIVE_HIGH 1
+#define GPIO_ACTIVE_LOW 0
+#define PIO_WAKEUP_MODE 3
+#define EXT_IT_WAKEUP_MODE 4
+#define PIO_FP_WAKEUP_MODE 6
+
+#endif
diff -urNp a/include/dt-bindings/phy/phy-miphy28lp.h b/include/dt-bindings/phy/phy-miphy28lp.h
--- a/include/dt-bindings/phy/phy-miphy28lp.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/dt-bindings/phy/phy-miphy28lp.h	2019-09-26 21:23:27.708620000 +0100
@@ -0,0 +1,12 @@
+/*
+ * This header provides constants for the phy framework
+ * based on the STMicroelectronics miph28lp.
+ */
+#ifndef _DT_BINDINGS_PHY_MIPHY28LP
+#define _DT_BINDINGS_PHY_MIPHY28LP
+
+#define MIPHY28LP_SATA		0
+#define MIPHY28LP_PCIE		1
+#define MIPHY28LP_USB3		2
+
+#endif /* _DT_BINDINGS_PHY_MIPHY28LP */
diff -urNp a/include/dt-bindings/pinctrl/st-pincfg.h b/include/dt-bindings/pinctrl/st-pincfg.h
--- a/include/dt-bindings/pinctrl/st-pincfg.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/dt-bindings/pinctrl/st-pincfg.h	2019-09-26 21:23:27.708620000 +0100
@@ -0,0 +1,81 @@
+/*
+ * This header provides constants for ST pin configuration.
+ */
+
+#ifndef _DT_BINDINGS_ST_PINCFG_H_
+#define _DT_BINDINGS_ST_PINCFG_H_
+
+/* Alternate functions */
+#define ALT1	1
+#define ALT2	2
+#define ALT3	3
+#define ALT4	4
+#define ALT5	5
+#define ALT6	6
+#define ALT7	7
+
+/* Output enable */
+#define OE			(1 << 27)
+/* Pull Up */
+#define PU			(1 << 26)
+/* Open Drain */
+#define OD			(1 << 25)
+#define RT			(1 << 23)
+#define INVERTCLK		(1 << 22)
+#define CLKNOTDATA		(1 << 21)
+#define DOUBLE_EDGE		(1 << 20)
+#define CLK_A			(0 << 18)
+#define CLK_B			(1 << 18)
+#define CLK_C			(2 << 18)
+#define CLK_D			(3 << 18)
+
+/* User-frendly defines for Pin Direction */
+		/* oe = 0, pu = 0, od = 0 */
+#define IN			(0)
+		/* oe = 0, pu = 1, od = 0 */
+#define IN_PU			(PU)
+		/* oe = 1, pu = 0, od = 0 */
+#define OUT			(OE)
+		/* oe = 1, pu = 0, od = 1 */
+#define BIDIR			(OE | OD)
+		/* oe = 1, pu = 1, od = 1 */
+#define BIDIR_PU		(OE | PU | OD)
+
+/* RETIME_TYPE */
+/*
+ * B Mode
+ * Bypass retime with optional delay parameter
+ */
+#define BYPASS		(0)
+/*
+ * R0, R1, R0D, R1D modes
+ * single-edge data non inverted clock, retime data with clk
+ */
+#define SE_NICLK_IO	(RT)
+/*
+ * RIV0, RIV1, RIV0D, RIV1D modes
+ * single-edge data inverted clock, retime data with clk
+ */
+#define SE_ICLK_IO	(RT | INVERTCLK)
+/*
+ * R0E, R1E, R0ED, R1ED modes
+ * double-edge data, retime data with clk
+ */
+#define DE_IO		(RT | DOUBLE_EDGE)
+/*
+ * CIV0, CIV1 modes with inverted clock
+ * Retiming the clk pins will park clock & reduce the noise within the core.
+ */
+#define ICLK		(RT | CLKNOTDATA | INVERTCLK)
+/*
+ * CLK0, CLK1 modes with non-inverted clock
+ * Retiming the clk pins will park clock & reduce the noise within the core.
+ */
+#define NICLK		(RT | CLKNOTDATA)
+/*
+ * CIV0, CIV1 modes with inverted clock
+ * No retime data with clk.
+ */
+#define ICLK_NO_RT      (CLKNOTDATA | INVERTCLK)
+
+#endif /* _DT_BINDINGS_ST_PINCFG_H_ */
diff -urNp a/include/dt-bindings/reset-controller/sti8416-resets.h b/include/dt-bindings/reset-controller/sti8416-resets.h
--- a/include/dt-bindings/reset-controller/sti8416-resets.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/dt-bindings/reset-controller/sti8416-resets.h	2019-09-26 21:23:27.708620000 +0100
@@ -0,0 +1,144 @@
+/*
+ * This header provides constants for the reset controller
+ * based peripheral powerdown requests on the STMicroelectronics
+ * STI8416 SoC.
+ */
+#ifndef _DT_BINDINGS_RESET_CONTROLLER_STI8416
+#define _DT_BINDINGS_RESET_CONTROLLER_STI8416
+
+/* Syscfg offsets */
+/* FC2 TS */
+#define STBE_CLK_RST		0x0
+
+/* FC3 VDEC0 */
+#define HADES_0_CLK_RST		0x0
+
+/* FC4 VDEC1 */
+#define DMU_0_CLK_RST		0x0
+#define DMU_1_CLK_RST		0x10000
+#define G1_0_CLK_RST		0x20000
+#define ST231_DMU0_CLK_RST	0x30000
+#define ST231_DMU1_CLK_RST	0x40000
+#define ERAM_DMU_CLK_RST	0x50000
+
+/* FC5 VENC */
+#define HVA_0_CLK_RST		0x0
+#define HVA_RAM_CLK_RST		0x20000
+
+/* FC6 DISPLAY */
+#define TELSS_0_CLK_RST		0x0
+#define HDVDP_0_CLK_RST		0x10000
+#define HDVDP_1_CLK_RST		0x20000
+#define COMPO_0_CLK_RST		0x30000
+#define HDTVOUT_0_CLK_RST	0x40000
+#define FDMA_2_CLK_RST		0x80000
+#define AUDIO_PLAYERS_CLK_RST	0x90000
+#define AUDIO_READERS_CLK_RST	0xA0000
+
+/* FC7 HSIF */
+#define USB3_0_CLK_RST		0x0
+#define USB2_0_CLK_RST		0x10000
+#define PCIE_SATA_0_CLK_RST	0x20000
+#define PCIE_SATA_1_CLK_RST	0x30000
+#define PCIE_2_CLK_RST		0x40000
+#define	MLB_0_CLK_RST		0x50000
+
+/* FC8 NETWORK */
+#define FP2_0_CLK_RST		0x0
+#define GMAC_0_CLK_RST		0x10000
+
+/* FC10 GPU */
+#define GFX_0_CLK_RST		0x0
+#define GFX_SMMU_0_CLK_RST	0x10000
+#define GFX_0_PLL_OBS		0x20000
+
+/* FC11 BOOTDEV */
+#define USB3_1_CLK_RST		0x0
+#define USB2_1_CLK_RST		0x10000
+#define FLASHSS_BOOT_0_RST	0x20000
+#define SDEMMC_0_CLK_RST	0x50000
+#define SDEMMC_1_CLK_RST	0x60000
+
+/* FC12 VDIN */
+#define HDMI_DP_RX_SS_0_CLK_RST	0x0
+#define VXI_0_CLK_RST		0x10000
+#define FVDP_CLK_RST		0x20000
+#define FVDP_ENC_0_CLK_RST	0x30000
+#define FVDP_ENC_1_CLK_RST	0x40000
+
+/* FC13 TSIF */
+#define STFE_0_CLK_RST		0x0
+#define FDMA_0_CLK_RST		0x10000
+#define FDMA_1_CLK_RST		0x20000
+#define SFC_0_CLK_RST		0x30000
+#define SFC_1_CLK_RST		0x40000
+
+/* FC14 GBS */
+#define GBS_0_CLK_RST		0x0
+#define JPGDEC_0_CLK_RST	0x10000
+
+/* FC15 CSEM */
+#define NIC301_0_CLK_RST	0x0
+#define DEBUG_CLK_RST		0x20000
+#define ATB_CLK_RST		0x30000
+#define TRACE_CLK_RST		0x40000
+#define STBUS2AXI_CLK_RST	0x50000
+
+/* Reset defines */
+#define STI8416_FC7_USB3_1_PHY_USB2_CALIB_RESET	0
+#define STI8416_FC7_USB3_1_PHY_USB2_RESET	1
+#define STI8416_FC7_USB3_1_RESET		2
+#define STI8416_FC7_USB2_1_PHY_CALIB_RESET	3
+#define STI8416_FC7_USB2_1_PHY_RESET		4
+#define STI8416_FC7_USB2_1_RESET		5
+#define STI8416_FC7_PCIE_SATA_0_MIPHY_RESET	6
+#define STI8416_FC7_SATA_0_PMALIVE_RESET	7
+#define STI8416_FC7_SATA_0_RESET		8
+#define STI8416_FC7_PCIE_0_RESET		9
+#define STI8416_FC7_PCIE_SATA_0_HARDRESET	10
+#define STI8416_FC7_PCIE_SATA_1_MIPHY_RESET	11
+#define STI8416_FC7_SATA_1_PMALIVE_RESET	12
+#define STI8416_FC7_SATA_1_RESET		13
+#define STI8416_FC7_PCIE_1_RESET		14
+#define STI8416_FC7_PCIE_SATA_1_HARDRESET	15
+#define STI8416_FC7_PCIE_2_MIPHY_RESET		16
+#define STI8416_FC7_PCIE_2_SOFTRESET		17
+#define STI8416_FC7_PCIE_2_HARDRESET		18
+#define STI8416_FC7_MEDIALB_RESET		19
+#define STI8416_FC8_FP2_SOFTRESET		20
+#define STI8416_FC8_GMAC_SOFTRESET		21
+#define STI8416_FC11_USB3_1_PHY_USB2_CALIB_RESET	22
+#define STI8416_FC11_USB3_1_PHY_USB2_RESET	23
+#define STI8416_FC11_USB3_1_RESET		24
+#define STI8416_FC11_USB2_1_PHY_CALIB_RESET	25
+#define STI8416_FC11_USB2_1_PHY_RESET		26
+#define STI8416_FC11_USB2_1_RESET		27
+#define STI8416_FC11_FLASH_PHY_RESET		28
+#define STI8416_FC11_FLASH_SUBSYSTEM_RESET	29
+#define STI8416_FC11_SDEMMC0_PHY_RESET		30
+#define STI8416_FC11_SDEMMC0_HARD_RESET		31
+#define STI8416_FC11_SDEMMC1_PHY_RESET		32
+#define STI8416_FC11_SDEMMC1_HARD_RESET		33
+#define STI8416_FC1_IRB_SOFTRESET		34
+#define STI8416_FC1_KEYSCAN_SOFTRESET		35
+#define STI8416_FC1_UART0_SOFTRESET		36
+#define STI8416_FC1_UART1_SOFTRESET		37
+
+/* PowerDown defines */
+#define STI8416_FC7_USB3_CLKEN_POWERDOWN	0
+#define STI8416_FC7_USB2_CLKEN_POWERDOWN	1
+#define STI8416_FC7_SATA_0_CLKEN_POWERDOWN	2
+#define STI8416_FC7_PCIE_0_CLKEN_POWERDOWN	3
+#define STI8416_FC7_SATA_1_CLKEN_POWERDOWN	4
+#define STI8416_FC7_PCIE_1_CLKEN_POWERDOWN	5
+#define STI8416_FC7_PCIE_2_CLKEN_POWERDOWN	6
+#define STI8416_FC7_MEDIALB_POWERDOWN		7
+#define STI8416_FC8_GMAC0_POWERDOWN		8
+#define STI8416_FC8_CLKEN_FP2_0_POWERDOWN	9
+#define STI8416_FC11_USB3_CLKEN_POWERDOWN	10
+#define STI8416_FC11_USB2_CLKEN_POWERDOWN	11
+#define STI8416_FC11_FLASH_CLKEN_POWERDOWN	12
+#define STI8416_FC11_SDEMMC0_CLKEN_POWERDOWN	13
+#define STI8416_FC11_SDEMMC1_CLKEN_POWERDOWN	14
+
+#endif /* _DT_BINDINGS_RESET_CONTROLLER_STI8416 */
diff -urNp a/include/dt-bindings/reset-controller/stid127-resets.h b/include/dt-bindings/reset-controller/stid127-resets.h
--- a/include/dt-bindings/reset-controller/stid127-resets.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/dt-bindings/reset-controller/stid127-resets.h	2019-09-26 21:23:27.712620000 +0100
@@ -0,0 +1,23 @@
+/*
+ * This header provides constants for the reset controller
+ * based peripheral powerdown requests on the STMicroelectronics
+ * STiD127 SoC.
+ */
+#ifndef _DT_BINDINGS_RESET_CONTROLLER_STID127
+#define _DT_BINDINGS_RESET_CONTROLLER_STID127
+
+#define STID127_USB0_POWERDOWN		0
+#define STID127_PCIE0_POWERDOWN		1
+#define STID127_PCIE1_POWERDOWN		2
+#define STID127_KEYSCAN_POWERDOWN	3
+#define STID127_ETH0_POWERDOWN		4
+
+#define STID127_ETH0_SOFTRESET		0
+#define STID127_USB0_SOFTRESET		1
+#define STID127_ST40_MANRESET		2
+#define STID127_ST40_PWRRESET		3
+#define STID127_PCIE0_SOFTRESET		4
+#define STID127_PCIE1_SOFTRESET		5
+#define STID127_FP_SOFTRESET		6
+
+#endif /* _DT_BINDINGS_RESET_CONTROLLER_STID127 */
diff -urNp a/include/dt-bindings/reset-controller/stid325-resets.h b/include/dt-bindings/reset-controller/stid325-resets.h
--- a/include/dt-bindings/reset-controller/stid325-resets.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/dt-bindings/reset-controller/stid325-resets.h	2019-09-26 21:23:27.712620000 +0100
@@ -0,0 +1,64 @@
+/*
+ * This header provides constants for the reset controller
+ * based peripheral powerdown requests on the STMicroelectronics
+ * STiD325 SoC.
+ */
+#ifndef _DT_BINDINGS_RESET_CONTROLLER_STID325
+#define _DT_BINDINGS_RESET_CONTROLLER_STID325
+
+/* Reset defines */
+/* FC7: HSIF USB3 */
+#define STID325_FC7_USB3_PHY_USB2_CALIB_RESET	0
+#define STID325_FC7_USB3_PHY_USB2_RESET		1
+#define STID325_FC7_USB3_RESET			2
+/* FC7: PCI0/SATA0 */
+#define STID325_FC7_PCIE_SATA_0_MIPHY_RESET	3
+#define STID325_FC7_SATA_0_PMALIVE_RESET	4
+#define STID325_FC7_SATA_0_RESET		5
+#define STID325_FC7_PCIE_0_RESET		6
+#define STID325_FC7_PCIE_SATA_0_HARDRESET	7
+/* FC7: PCI 1 and 2 */
+#define STID325_FC7_PCIE_1_MIPHY_RESET		8
+#define STID325_FC7_PCIE_1_SOFTRESET		9
+#define STID325_FC7_PCIE_1_HARDRESET		10
+#define STID325_FC7_PCIE_2_MIPHY_RESET		11
+#define STID325_FC7_PCIE_2_SOFTRESET		12
+#define STID325_FC7_PCIE_2_HARDRESET		13
+/* FC8: Networking */
+#define STID325_FC8_FP3_SOFTRESET		14
+#define STID325_FC8_TELSS_SOFTRESET		15
+/* FC11 Bootdev */
+/* FLASH NAND RESET */
+#define STID325_FC11_FLASH_PHY_RESET		16
+#define STID325_FC11_FLASH_SUBSYSTEM_RESET	17
+/* MMC0 RESET */
+#define STID325_FC11_SDEMMC0_PHY_RESET		18
+#define STID325_FC11_SDEMMC0_HARD_RESET		19
+/* MMC1 RESET */
+#define STID325_FC11_SDEMMC1_PHY_RESET		20
+#define STID325_FC11_SDEMMC1_HARD_RESET		21
+/* FC1 WAKEUP SS (LPM CONFIG) */
+#define STID325_FC1_IRB_SOFTRESET		22
+#define STID325_FC1_KEYSCAN_SOFTRESET		23
+#define STID325_FC1_UART0_SOFTRESET		24
+#define STID325_FC1_UART1_SOFTRESET		25
+
+
+/* PowerDown defines */
+/* FC7 HSIF */
+#define STID325_FC7_USB3_POWERDOWN_REQ		0
+/* PCIe0 SATA0 combo */
+#define STID325_FC7_SATA_0_POWERDOWN_REQ	1
+#define STID325_FC7_PCIE_0_POWERDOWN_REQ	2
+/* PCIe 1 and 2 */
+#define STID325_FC7_PCIE_1_POWERDOWN_REQ	3
+#define STID325_FC7_PCIE_2_POWERDOWN_REQ	4
+/* FC8 Networking */
+#define STID325_FC8_CLKEN_FP3_0_CLK_EN		5
+#define STID325_FC8_CLKEN_TELSS_0_CLK_EN	6
+/* FC11 Bootdev */
+#define STID325_FC11_FLASH_CLKEN_NAND_CLK_EN	7
+#define STID325_FC11_SDEMMC0_CLKEN_CLK_EN	8
+#define STID325_FC11_SDEMMC1_CLKEN_CLK_EN	9
+
+#endif /* _DT_BINDINGS_RESET_CONTROLLER_STID325 */
diff -urNp a/include/dt-bindings/reset-controller/stih390-resets.h b/include/dt-bindings/reset-controller/stih390-resets.h
--- a/include/dt-bindings/reset-controller/stih390-resets.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/dt-bindings/reset-controller/stih390-resets.h	2019-09-26 21:23:27.716620000 +0100
@@ -0,0 +1,150 @@
+/*
+ * This header provides constants for the reset controller
+ * based peripheral powerdown requests on the STMicroelectronics
+ * STIH390 SoC.
+ */
+#ifndef _DT_BINDINGS_RESET_CONTROLLER_STIH390
+#define _DT_BINDINGS_RESET_CONTROLLER_STIH390
+
+/* Sysconf registers */
+
+/* FC0 BACKBONE */
+#define SYSCFG_0000	0x0		/* A9 software reset */
+
+/* FC1 VSAFE */
+#define SYSCFG_1000	0x0		/* reset of ARMM4 sub-system */
+#define SYSCFG_1010	0x10000		/* reset of Wake up peripherals */
+#define SYSCFG_1030	0x30000		/* reset of 10bank PIO */
+#define SYSCFG_1060	0x70000		/* reset of thermal sensor logic */
+
+/* FC2 WIFI */
+#define SYSCFG_2000	0x0		/* GMAC_W soft reset control */
+#define SYSCFG_2010	0x10000		/* WIFI soft reset control */
+
+/* FC3 VDEC */
+#define SYSCFG_3000	0x0		/* Controls C8VDEC_TOP_0 IP resets */
+#define SYSCFG_3001	0x10000		/* Controls PP IP  resets */
+#define SYSCFG_3002	0x20000		/* Controls JPGDEG  IP resets */
+#define SYSCFG_3003	0x30000		/* Controls ST231_DMU0 IP resets */
+#define SYSCFG_3004	0x40000		/* Controls MailBox IP resets */
+
+/* FC6 DISPLAY */
+#define SYSCFG_6000	0x0		/* HQVDP_0 resets */
+#define SYSCFG_6001	0x10000		/* VDP AUX resets */
+#define SYSCFG_6002	0x20000		/* Compo resets */
+#define SYSCFG_6003	0x30000		/* HDTVOUT resets  */
+#define SYSCFG_6004	0x40000		/* FDMA_0 resets */
+#define SYSCFG_6005	0x50000		/* FDMA_1 resets */
+#define SYSCFG_6006	0x60000		/* Uniperipheral players 1 resets */
+#define SYSCFG_6007	0x70000		/* Uniperipheral players 2 resets */
+#define SYSCFG_6008	0x80000		/* Uniperipheral players 3 resets */
+#define SYSCFG_6009	0x90000		/* Uniperipheral readers resets */
+#define SYSCFG_6010	0xA0000		/* BDISP resets */
+#define SYSCFG_6011	0xB0000		/* HDMI RX resets */
+#define SYSCFG_6012	0xC0000		/* HDMI Rx PHY resets */
+#define SYSCFG_6013	0xD0000		/* DVP resets */
+#define SYSCFG_6014	0xE0000		/* HDMI Tx PHY resets */
+
+/* FC7 HSIF */
+#define SYSCFG_7000	0x0		/* Control USB3_0 hard resets */
+#define SYSCFG_7010	0x10000		/* Control USB2_0 hard resets */
+#define SYSCFG_7060	0x60000		/* GMAC_S_0 soft reset control */
+#define SYSCFG_7411	0x13002c	/* GMAC0 CTRL */
+#define SYSCFG_7456	0x1300e0	/* GMAC0 POWER_DOWN_STATUS  */
+#define SYSCFG_7478	0x130138	/* High Speed Links powerdown status */
+
+/* FC9 ST231SS */
+#define SYSCFG_9000	0x0		/* Control ST231 SECURE rese */
+#define SYSCFG_9010	0x10000		/* Control ST231 GP 0 reset */
+#define SYSCFG_9020	0x20000		/* Control ST231 GP 1 reset */
+
+/* FC10 GPU */
+#define SYSCFG_10000	0x0		/* MALI400 IP main hard reset */
+#define SYSCFG_10010	0x10000		/* Thermal Sensor main hard rerset */
+
+/* FC11 BOOTDEV */
+#define SYSCFG_11003	0x20000		/* Control flashss hard resets */
+#define SYSCFG_11004	0x30000		/* Control flash piomux hard resets */
+#define SYSCFG_11005	0x40000		/* flash bank pio hard resets */
+#define SYSCFG_11006	0x50000		/* Control SD3.0/SDIO hard resets */
+#define SYSCFG_11008	0x70000		/* Control flashss nand clock enable */
+#define SYSCFG_11009	0x80000		/* Control flashss spi clock enable */
+#define SYSCFG_11010	0x90000		/* Control flashss emmc clock enable */
+
+/* FC13 TS */
+#define SYSCFG_13000	0x0		/*  Controls STFE_0 IP resets*/
+#define SYSCFG_13008	0x80000		/* Controls stbe_0 ip clock gating */
+
+/* FC15 ARMCores */
+#define SYSCFG_15000	0x0		/* Net axi interconnect clock gating */
+#define SYSCFG_15001	0x10000		/* APB/AXI clock gating*/
+#define SYSCFG_15002	0x20000		/* ATB clock gating */
+#define SYSCFG_15003	0x30000		/* Traceclkin clock gating */
+#define SYSCFG_15004	0x40000		/* STBus clock gating */
+
+/* Reset defines */
+
+/* FC0 BACKBONE */
+#define STIH390_FC0_A9_SOFTRESET		0
+/* FC1 VSAFE */
+#define STIH390_FC1_CM4_HRESET			1
+#define STIH390_FC1_CM4_SYSRESET		2
+#define STIH390_FC1_WAKEUP_0_RESET		3
+#define STIH390_FC1_PIO_0_RESET			4
+#define STIH390_FC1_THS_1_RESET			5
+/* FC2 WIFI */
+#define STIH390_FC2_GMAC_W_0_SOFTRESET		6
+#define STIH390_FC2_WIFI_TOP_WRAPPER_SS_SOFTRESET 7
+/* FC3 VDEC */
+#define STIH390_FC3_C8VDEC_TOP_0_SOFTRESET	8
+#define STIH390_FC3_C8HAD_PP_SUPERTOP_0_SOFTRESET 9
+#define STIH390_FC3_C8JPG_TOP_0_SOFTRESET	10
+#define STIH390_FC3_ST231_DMU0_SOFTRESET	11
+#define STIH390_FC3_MBX_DMU0_SOFTRESET		12
+/* FC6 DISPLAY */
+#define STIH390_FC6_BDISP_0_SOFTRESET		13
+#define STIH390_FC6_HQVDP_0_SOFTRESET		14
+#define STIH390_FC6_VDP_AUX_0_SOFTRESET		15
+#define STIH390_FC6_COMPO_0_SOFTRESET		16
+#define STIH390_FC6_HDTVOUT_0_SOFTRESET		17
+#define STIH390_FC6_HDMI_TX_PHY_SOFTRESET	18
+#define STIH390_FC6_DVPIN_0_SOFTRESET		19
+#define STIH390_FC6_HDMI_RX_SOFTRESET		20
+#define STIH390_FC6_FDMA_0_SOFTRESET		21
+#define STIH390_FC6_UPLAYER_1_SOFTRESET		22
+#define STIH390_FC6_UREADER_1_SOFTRESET		23
+#define STIH390_FC6_FDMA_1_SOFTRESET		24
+#define STIH390_FC6_UPLAYER_2_SOFTRESET		25
+#define STIH390_FC6_UPLAYER_3_SOFTRESET		26
+/* FC7 HSIF */
+#define STIH390_FC7_USB3_PHY_USB2_CALIB_RESET	27
+#define STIH390_FC7_USB3_PHY_USB2_RESET		28
+#define STIH390_FC7_USB3_RESET			29
+#define STIH390_FC7_USB2_PHY_CALIB_RESET	30
+#define STIH390_FC7_USB2_PHY_RESET		31
+#define STIH390_FC7_USB2_RESET			32
+#define STIH390_FC7_GMAC_SOFTRESET		33
+/* FC9 ST231SS */
+#define STIH390_FC9_ST231_SEC_SOFTRESET		34
+#define STIH390_FC9_ST231_GP0_SOFTRESET		35
+#define STIH390_FC9_ST231_GP1_SOFTRESET		36
+/* FC10 GPU */
+#define STIH390_FC10_MALI400_0_HARDRESET	37
+#define STIH390_FC10_THS_GLUE_GPU_HARDRESET	38
+/* FC11 Bootdev */
+#define STIH390_FC11_FLASHSS_BOOT_0_HARDRESET	39
+#define STIH390_FC11_FLASH_PHY_0_SOFTRESET	40
+#define STIH390_FC11_FLASH_PIOMUX_0_SOFTRESET	41
+#define STIH390_FC11_FLASH_BANK_PIO_0_SOFTRESET	42
+#define STIH390_FC11_SDEMMC_0_SOFTRESET		43
+/* FC13 TS */
+#define STIH390_FC13_STFE_0_SOFTRESET		44
+
+/* PowerDown defines */
+
+/* FC7 HSIF */
+#define STIH390_FC7_USB3_0_POWERDOWN_REQ	0
+#define STIH390_FC7_USB2_0_POWERDOWN_REQ	1
+#define STIH390_FC7_GMAC0_POWERDOWN_REQ		2
+
+#endif /* _DT_BINDINGS_RESET_CONTROLLER_STIH390 */
diff -urNp a/include/dt-bindings/reset-controller/stih407-resets.h b/include/dt-bindings/reset-controller/stih407-resets.h
--- a/include/dt-bindings/reset-controller/stih407-resets.h	2015-04-12 23:12:50.000000000 +0100
+++ b/include/dt-bindings/reset-controller/stih407-resets.h	2019-09-26 21:23:27.716620000 +0100
@@ -11,8 +11,7 @@
 #define STIH407_NAND_POWERDOWN		1
 
 /* Synp GMAC PowerDown */
-#define STIH407_ETH1_POWERDOWN		2
-
+#define	STIH407_ETH1_POWERDOWN		2
 /* Powerdown requests control 1 */
 #define STIH407_USB3_POWERDOWN		3
 #define STIH407_USB2_PORT1_POWERDOWN	4
@@ -23,39 +22,43 @@
 #define STIH407_SATA0_POWERDOWN		9
 
 /* Reset defines */
-#define STIH407_ETH1_SOFTRESET		0
-#define STIH407_MMC1_SOFTRESET		1
-#define STIH407_PICOPHY_SOFTRESET	2
-#define STIH407_IRB_SOFTRESET		3
-#define STIH407_PCIE0_SOFTRESET		4
-#define STIH407_PCIE1_SOFTRESET		5
-#define STIH407_SATA0_SOFTRESET		6
-#define STIH407_SATA1_SOFTRESET		7
-#define STIH407_MIPHY0_SOFTRESET	8
-#define STIH407_MIPHY1_SOFTRESET	9
-#define STIH407_MIPHY2_SOFTRESET	10
-#define STIH407_SATA0_PWR_SOFTRESET	11
-#define STIH407_SATA1_PWR_SOFTRESET	12
-#define STIH407_DELTA_SOFTRESET		13
-#define STIH407_BLITTER_SOFTRESET	14
-#define STIH407_HDTVOUT_SOFTRESET	15
-#define STIH407_HDQVDP_SOFTRESET	16
-#define STIH407_VDP_AUX_SOFTRESET	17
-#define STIH407_COMPO_SOFTRESET		18
-#define STIH407_HDMI_TX_PHY_SOFTRESET	19
-#define STIH407_JPEG_DEC_SOFTRESET	20
-#define STIH407_VP8_DEC_SOFTRESET	21
-#define STIH407_GPU_SOFTRESET		22
-#define STIH407_HVA_SOFTRESET		23
-#define STIH407_ERAM_HVA_SOFTRESET	24
-#define STIH407_LPM_SOFTRESET		25
-#define STIH407_KEYSCAN_SOFTRESET	26
-#define STIH407_USB2_PORT0_SOFTRESET	27
-#define STIH407_USB2_PORT1_SOFTRESET	28
+#define	STIH407_ETH1_SOFTRESET		0
+#define	STIH407_MMC1_SOFTRESET		1
+#define	STIH407_PICOPHY_SOFTRESET	2
+#define	STIH407_IRB_SOFTRESET		3
+#define	STIH407_PCIE0_SOFTRESET		4
+#define	STIH407_PCIE1_SOFTRESET		5
+#define	STIH407_SATA0_SOFTRESET		6
+#define	STIH407_SATA1_SOFTRESET		7
+#define	STIH407_MIPHY0_SOFTRESET	8
+#define	STIH407_MIPHY1_SOFTRESET	9
+#define	STIH407_MIPHY2_SOFTRESET	10
+#define	STIH407_SATA0_PWR_SOFTRESET	11
+#define	STIH407_SATA1_PWR_SOFTRESET	12
+#define	STIH407_DELTA_SOFTRESET		13
+#define	STIH407_BLITTER_SOFTRESET	14
+#define	STIH407_HDTVOUT_SOFTRESET	15
+#define	STIH407_HDQVDP_SOFTRESET	16
+#define	STIH407_VDP_AUX_SOFTRESET	17
+#define	STIH407_COMPO_SOFTRESET		18
+#define	STIH407_HDMI_TX_PHY_SOFTRESET	19
+#define	STIH407_JPEG_DEC_SOFTRESET	20
+#define	STIH407_VP8_DEC_SOFTRESET	21
+#define	STIH407_GPU_SOFTRESET		22
+#define	STIH407_HVA_SOFTRESET		23
+#define	STIH407_ERAM_HVA_SOFTRESET	24
+#define	STIH407_LPM_SOFTRESET		25
+#define	STIH407_KEYSCAN_SOFTRESET	26
+#define	STIH407_USB2_PORT0_SOFTRESET	27
+#define	STIH407_USB2_PORT1_SOFTRESET	28
+#define STIH407_ST231_AUD_SOFTRESET	29
+#define STIH407_ST231_DMU_SOFTRESET	30
+#define STIH407_ST231_GP0_SOFTRESET	31
+#define STIH407_ST231_GP1_SOFTRESET	32
 
 /* Picophy reset defines */
-#define STIH407_PICOPHY0_RESET		0
-#define STIH407_PICOPHY1_RESET		1
-#define STIH407_PICOPHY2_RESET		2
+#define	STIH407_PICOPHY0_RESET	0
+#define	STIH407_PICOPHY1_RESET	1
+#define	STIH407_PICOPHY2_RESET	2
 
 #endif /* _DT_BINDINGS_RESET_CONTROLLER_STIH407 */
diff -urNp a/include/dt-bindings/reset-controller/stih416-resets.h b/include/dt-bindings/reset-controller/stih416-resets.h
--- a/include/dt-bindings/reset-controller/stih416-resets.h	2015-04-12 23:12:50.000000000 +0100
+++ b/include/dt-bindings/reset-controller/stih416-resets.h	2019-09-26 21:23:27.716620000 +0100
@@ -47,5 +47,6 @@
 #define STIH416_VP8_DEC_SOFTRESET	26
 #define STIH416_VTG_MAIN_SOFTRESET	27
 #define STIH416_KEYSCAN_SOFTRESET	28
+#define STIH416_LPM_SOFTRESET		29
 
 #endif /* _DT_BINDINGS_RESET_CONTROLLER_STIH416 */
diff -urNp a/include/dt-bindings/st/flashss.h b/include/dt-bindings/st/flashss.h
--- a/include/dt-bindings/st/flashss.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/dt-bindings/st/flashss.h	2019-09-26 21:23:27.716620000 +0100
@@ -0,0 +1,13 @@
+/*
+ * This header provides constants for the Flash Sub-System
+ * based on the STMicroelectronics
+ */
+#ifndef _DT_BINDINGS_ST_FLASHSS
+#define _DT_BINDINGS_ST_FLASHSS
+
+/* Define the flashSS Core speification versions available on STi SoCs */
+#define FLASHSS_CORE_VERSION_3_0	3
+#define FLASHSS_CORE_VERSION_2_0	2
+#define FLASHSS_CORE_VERSION_1_6	1
+
+#endif /* _DT_BINDINGS_ST_FLASHSS */
diff -urNp a/include/linux/clk-private.h b/include/linux/clk-private.h
--- a/include/linux/clk-private.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/linux/clk-private.h	2019-09-26 21:23:27.720620000 +0100
@@ -0,0 +1,209 @@
+/*
+ *  linux/include/linux/clk-private.h
+ *
+ *  Copyright (c) 2010-2011 Jeremy Kerr <jeremy.kerr@canonical.com>
+ *  Copyright (C) 2011-2012 Linaro Ltd <mturquette@linaro.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+#ifndef __LINUX_CLK_PRIVATE_H
+#define __LINUX_CLK_PRIVATE_H
+
+#include <linux/clk-provider.h>
+#include <linux/list.h>
+
+/*
+ * WARNING: Do not include clk-private.h from any file that implements struct
+ * clk_ops.  Doing so is a layering violation!
+ *
+ * This header exists only to allow for statically initialized clock data.  Any
+ * static clock data must be defined in a separate file from the logic that
+ * implements the clock operations for that same data.
+ */
+
+#ifdef CONFIG_COMMON_CLK
+
+struct clk {
+	const char		*name;
+	const struct clk_ops	*ops;
+	struct clk_hw		*hw;
+	struct clk		*parent;
+	const char		**parent_names;
+	struct clk		**parents;
+	u8			num_parents;
+	unsigned long		rate;
+	unsigned long		new_rate;
+	unsigned long		flags;
+	unsigned int		enable_count;
+	unsigned int		prepare_count;
+	struct hlist_head	children;
+	struct hlist_node	child_node;
+	unsigned int		notifier_count;
+#ifdef CONFIG_DEBUG_FS
+	struct dentry		*dentry;
+#endif
+};
+
+/*
+ * DOC: Basic clock implementations common to many platforms
+ *
+ * Each basic clock hardware type is comprised of a structure describing the
+ * clock hardware, implementations of the relevant callbacks in struct clk_ops,
+ * unique flags for that hardware type, a registration function and an
+ * alternative macro for static initialization
+ */
+
+#define DEFINE_CLK(_name, _ops, _flags, _parent_names,		\
+		_parents)					\
+	static struct clk _name = {				\
+		.name = #_name,					\
+		.ops = &_ops,					\
+		.hw = &_name##_hw.hw,				\
+		.parent_names = _parent_names,			\
+		.num_parents = ARRAY_SIZE(_parent_names),	\
+		.parents = _parents,				\
+		.flags = _flags | CLK_IS_BASIC,			\
+	}
+
+#define DEFINE_CLK_FIXED_RATE(_name, _flags, _rate,		\
+				_fixed_rate_flags)		\
+	static struct clk _name;				\
+	static const char *_name##_parent_names[] = {};		\
+	static struct clk_fixed_rate _name##_hw = {		\
+		.hw = {						\
+			.clk = &_name,				\
+		},						\
+		.fixed_rate = _rate,				\
+		.flags = _fixed_rate_flags,			\
+	};							\
+	DEFINE_CLK(_name, clk_fixed_rate_ops, _flags,		\
+			_name##_parent_names, NULL);
+
+#define DEFINE_CLK_GATE(_name, _parent_name, _parent_ptr,	\
+				_flags, _reg, _bit_idx,		\
+				_gate_flags, _lock)		\
+	static struct clk _name;				\
+	static const char *_name##_parent_names[] = {		\
+		_parent_name,					\
+	};							\
+	static struct clk *_name##_parents[] = {		\
+		_parent_ptr,					\
+	};							\
+	static struct clk_gate _name##_hw = {			\
+		.hw = {						\
+			.clk = &_name,				\
+		},						\
+		.reg = _reg,					\
+		.bit_idx = _bit_idx,				\
+		.flags = _gate_flags,				\
+		.lock = _lock,					\
+	};							\
+	DEFINE_CLK(_name, clk_gate_ops, _flags,			\
+			_name##_parent_names, _name##_parents);
+
+#define _DEFINE_CLK_DIVIDER(_name, _parent_name, _parent_ptr,	\
+				_flags, _reg, _shift, _width,	\
+				_divider_flags, _table, _lock)	\
+	static struct clk _name;				\
+	static const char *_name##_parent_names[] = {		\
+		_parent_name,					\
+	};							\
+	static struct clk *_name##_parents[] = {		\
+		_parent_ptr,					\
+	};							\
+	static struct clk_divider _name##_hw = {		\
+		.hw = {						\
+			.clk = &_name,				\
+		},						\
+		.reg = _reg,					\
+		.shift = _shift,				\
+		.width = _width,				\
+		.flags = _divider_flags,			\
+		.table = _table,				\
+		.lock = _lock,					\
+	};							\
+	DEFINE_CLK(_name, clk_divider_ops, _flags,		\
+			_name##_parent_names, _name##_parents);
+
+#define DEFINE_CLK_DIVIDER(_name, _parent_name, _parent_ptr,	\
+				_flags, _reg, _shift, _width,	\
+				_divider_flags, _lock)		\
+	_DEFINE_CLK_DIVIDER(_name, _parent_name, _parent_ptr,	\
+				_flags, _reg, _shift, _width,	\
+				_divider_flags, NULL, _lock)
+
+#define DEFINE_CLK_DIVIDER_TABLE(_name, _parent_name,		\
+				_parent_ptr, _flags, _reg,	\
+				_shift, _width, _divider_flags,	\
+				_table, _lock)			\
+	_DEFINE_CLK_DIVIDER(_name, _parent_name, _parent_ptr,	\
+				_flags, _reg, _shift, _width,	\
+				_divider_flags, _table, _lock)	\
+
+#define DEFINE_CLK_MUX(_name, _parent_names, _parents, _flags,	\
+				_reg, _shift, _width,		\
+				_mux_flags, _lock)		\
+	static struct clk _name;				\
+	static struct clk_mux _name##_hw = {			\
+		.hw = {						\
+			.clk = &_name,				\
+		},						\
+		.reg = _reg,					\
+		.shift = _shift,				\
+		.mask = BIT(_width) - 1,			\
+		.flags = _mux_flags,				\
+		.lock = _lock,					\
+	};							\
+	DEFINE_CLK(_name, clk_mux_ops, _flags, _parent_names,	\
+			_parents);
+
+#define DEFINE_CLK_FIXED_FACTOR(_name, _parent_name,		\
+				_parent_ptr, _flags,		\
+				_mult, _div)			\
+	static struct clk _name;				\
+	static const char *_name##_parent_names[] = {		\
+		_parent_name,					\
+	};							\
+	static struct clk *_name##_parents[] = {		\
+		_parent_ptr,					\
+	};							\
+	static struct clk_fixed_factor _name##_hw = {		\
+		.hw = {						\
+			.clk = &_name,				\
+		},						\
+		.mult = _mult,					\
+		.div = _div,					\
+	};							\
+	DEFINE_CLK(_name, clk_fixed_factor_ops, _flags,		\
+			_name##_parent_names, _name##_parents);
+
+/**
+ * __clk_init - initialize the data structures in a struct clk
+ * @dev:	device initializing this clk, placeholder for now
+ * @clk:	clk being initialized
+ *
+ * Initializes the lists in struct clk, queries the hardware for the
+ * parent and rate and sets them both.
+ *
+ * Any struct clk passed into __clk_init must have the following members
+ * populated:
+ * 	.name
+ * 	.ops
+ * 	.hw
+ * 	.parent_names
+ * 	.num_parents
+ * 	.flags
+ *
+ * It is not necessary to call clk_register if __clk_init is used directly with
+ * statically initialized clock data.
+ *
+ * Returns 0 on success, otherwise an error code.
+ */
+int __clk_init(struct device *dev, struct clk *clk);
+
+struct clk *__clk_register(struct device *dev, struct clk_hw *hw);
+
+#endif /* CONFIG_COMMON_CLK */
+#endif /* CLK_PRIVATE_H */
diff -urNp a/include/linux/clk-provider.h b/include/linux/clk-provider.h
--- a/include/linux/clk-provider.h	2015-04-12 23:12:50.000000000 +0100
+++ b/include/linux/clk-provider.h	2019-10-07 15:16:30.539594900 +0100
@@ -150,6 +150,17 @@ struct dentry;
  *		directory is provided as an argument.  Called with
  *		prepare_lock held.  Returns 0 on success, -EERROR otherwise.
  *
+ * @suspend:	Called (if defined) when the system is about to enter
+ *		Suspend. Framework defined __clk_suspend is called, if
+ *		this callback is not defined. Optionally the driver could
+ *		also call __clk_suspend inside this callback.
+ *		Returns 0 on success, -EERROR otherwise.
+ *
+ * @resume:	Called (if defined) when the system is about to exit
+ *		Suspend. Framework defined __clk_resume is called, if
+ *		this callback is not defined. Optionally the driver could
+ *		also call __clk_resume inside this callback.
+ *		Returns 0 on success, -EERROR otherwise.
  *
  * The clk_enable/clk_disable and clk_prepare/clk_unprepare pairs allow
  * implementations to split any work between atomic (enable) and sleepable
@@ -194,6 +205,10 @@ struct clk_ops {
 	int		(*set_phase)(struct clk_hw *hw, int degrees);
 	void		(*init)(struct clk_hw *hw);
 	int		(*debug_init)(struct clk_hw *hw, struct dentry *dentry);
+#ifdef CONFIG_PM_SLEEP
+	int             (*suspend)(struct clk_hw *hw);
+	int             (*resume)(struct clk_hw *hw);
+#endif
 };
 
 /**
@@ -595,12 +610,21 @@ static inline void __clk_hw_set_clk(stru
 	dst->clk = src->clk;
 	dst->core = src->core;
 }
+#ifdef CONFIG_PM_SLEEP
+int __clk_suspend(struct clk *clk);
+int __clk_resume(struct clk *clk);
+#endif
+
 
 /*
  * FIXME clock api without lock protection
  */
+int __clk_prepare(struct clk *clk);
+void __clk_unprepare(struct clk *clk);
+void __clk_reparent(struct clk *clk, struct clk *new_parent);
+void __clk_recalc_rates(struct clk_core *clk, unsigned long msg);
 unsigned long __clk_round_rate(struct clk *clk, unsigned long rate);
-
+ 
 struct of_device_id;
 
 typedef void (*of_clk_init_cb_t)(struct device_node *);
diff -urNp a/include/linux/gpio/driver.h b/include/linux/gpio/driver.h
--- a/include/linux/gpio/driver.h	2015-04-12 23:12:50.000000000 +0100
+++ b/include/linux/gpio/driver.h	2019-10-04 08:40:41.511743100 +0100
@@ -148,7 +148,7 @@ extern const char *gpiochip_is_requested
 
 /* add/remove chips */
 extern int gpiochip_add(struct gpio_chip *chip);
-extern void gpiochip_remove(struct gpio_chip *chip);
+extern int gpiochip_remove(struct gpio_chip *chip);
 extern struct gpio_chip *gpiochip_find(void *data,
 			      int (*match)(struct gpio_chip *chip, void *data));
 
diff -urNp a/include/linux/pm_wakeup.h b/include/linux/pm_wakeup.h
--- a/include/linux/pm_wakeup.h	2015-04-12 23:12:50.000000000 +0100
+++ b/include/linux/pm_wakeup.h	2019-10-05 00:18:13.559861400 +0100
@@ -93,6 +93,7 @@ extern int device_wakeup_disable(struct
 extern void device_set_wakeup_capable(struct device *dev, bool capable);
 extern int device_init_wakeup(struct device *dev, bool val);
 extern int device_set_wakeup_enable(struct device *dev, bool enable);
+bool device_child_may_wakeup(struct device *parent);
 extern void __pm_stay_awake(struct wakeup_source *ws);
 extern void pm_stay_awake(struct device *dev);
 extern void __pm_relax(struct wakeup_source *ws);
@@ -100,6 +101,11 @@ extern void pm_relax(struct device *dev)
 extern void __pm_wakeup_event(struct wakeup_source *ws, unsigned int msec);
 extern void pm_wakeup_event(struct device *dev, unsigned int msec);
 
+
+#define WAKEUP_SOURCE_ADDED		0x1
+#define WAKEUP_SOURCE_REMOVED		0x2
+extern void wakeup_source_notifier_register(struct notifier_block *nb);
+extern void wakeup_source_notifier_unregister(struct notifier_block *nb);
 #else /* !CONFIG_PM_SLEEP */
 
 static inline void device_set_wakeup_capable(struct device *dev, bool capable)
@@ -177,6 +183,11 @@ static inline void __pm_wakeup_event(str
 
 static inline void pm_wakeup_event(struct device *dev, unsigned int msec) {}
 
+static inline void wakeup_source_notifier_register(struct notifier_block *nb)
+{};
+
+extern inline void wakeup_source_notifier_unregister(struct notifier_block *nb)
+{};
 #endif /* !CONFIG_PM_SLEEP */
 
 static inline void wakeup_source_init(struct wakeup_source *ws,
diff -urNp a/include/linux/power/st_lpm.h b/include/linux/power/st_lpm.h
--- a/include/linux/power/st_lpm.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/linux/power/st_lpm.h	2019-09-26 21:23:27.760620100 +0100
@@ -0,0 +1,595 @@
+/*
+ * Interface file for st lpm driver
+ *
+ * Copyright (C) 2014 STMicroelectronics Limited
+ *
+ * Contributor:Francesco Virlinzi <francesco.virlinzi@st.com>
+ * Author:Pooja Agarwal <pooja.agarwal@st.com>
+ * Author:Udit Kumar <udit-dlh.kumar@st.com>
+ * Author:Sudeep Biswas <sudeep.biswas@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License Version 2.0 only.  See linux/COPYING for more information.
+ */
+
+#ifndef __LPM_H
+#define __LPM_H
+
+#include <linux/rtc.h>
+#include "st_lpm_def.h"
+
+/**
+ * enum st_lpm_wakeup_devices- define wakeup devices
+ * One bit for each wakeup device
+ */
+enum st_lpm_wakeup_devices {
+	ST_LPM_WAKEUP_IR	=	BIT(0),
+	ST_LPM_WAKEUP_CEC	=	BIT(1),
+	ST_LPM_WAKEUP_FRP	=	BIT(2),
+	ST_LPM_WAKEUP_WOL	=	BIT(3),
+	ST_LPM_WAKEUP_RTC	=	BIT(4),
+	ST_LPM_WAKEUP_ASC	=	BIT(5),
+	ST_LPM_WAKEUP_NMI	=	BIT(6),
+	ST_LPM_WAKEUP_HPD	=	BIT(7),
+	ST_LPM_WAKEUP_PIO	=	BIT(8),
+	ST_LPM_WAKEUP_EXT	=	BIT(9),
+	ST_LPM_WAKEUP_MANUAL_RST =	BIT(10),
+	ST_LPM_WAKEUP_SW_WDT_RST =	BIT(11),
+	ST_LPM_WAKEUP_CUST	=	BIT(15)
+};
+
+struct st_lpm_wkup_dev_name {
+	unsigned int index;
+	char name[5];
+};
+
+struct st_sbc_platform_data {
+	unsigned gpio;
+	unsigned trigger_level;
+};
+
+/**
+ * enum st_lpm_reset_type - define reset type
+ * @ST_LPM_SOC_RESET:	SOC reset
+ * @ST_LPM_SBC_RESET:	Only SBC reset
+ * @ST_LPM_BOOT_RESET:	reset SBC and stay in bootloader
+ */
+enum st_lpm_reset_type {
+	ST_LPM_SOC_RESET,
+	ST_LPM_SBC_RESET = BIT(0),
+	ST_LPM_BOOT_RESET = BIT(1),
+	ST_LPM_HOST_RESET = BIT(2)
+};
+
+/**
+ * enum st_lpm_sbc_state - defines SBC state
+ * @ST_LPM_SBC_BOOT:	SBC waiting in bootloader
+ * @ST_LPM_SBC_RUNNING:	SBC is running
+ * @ST_LPM_SBC_STANDBY:	Entering into standby
+ */
+enum st_lpm_sbc_state {
+	ST_LPM_SBC_BOOT		=	1,
+	ST_LPM_SBC_RUNNING	=	4,
+	ST_LPM_SBC_STANDBY	=	5
+};
+
+/**
+ * struct st_lpm_version - define version information
+ * @major_comm_protocol:	Supported Major protocol version
+ * @minor_comm_protocol:	Supported Minor protocol version
+ * @major_soft:			Major software version
+ * @minor_soft:			Minor software version
+ * @patch_soft:			Software patch version
+ * @month:			Software build month version
+ * @day:			Software build day
+ * @year:			Software build year
+ * @custom_id:			Used for customizing fw by FAE
+ *
+ * Same struct is used for firmware and driver version information
+ */
+struct st_lpm_version {
+	char major_comm_protocol;
+	char minor_comm_protocol;
+	char major_soft;
+	char minor_soft;
+	char patch_soft;
+	char month;
+	char day;
+	char year;
+	char custom_id;
+};
+
+/**
+ * struct st_lpm_fp_setting - define front panel setting
+ * @owner:	Owner of front panel
+ *		when 0 - SBC firmware will be owner in standby
+ *		when 1 - SBC firmware always own frontpanel display
+ *		when 2 - Host will always own front panel
+ * @am_pm:	AM/PM indicator, when 0 clock will be displayed in 24 hrs format
+ * @brightness:	brightness of display, [0-3] bits are used max value is 15
+ * This is to inform SBC how front panel display will be used
+ */
+struct st_lpm_fp_setting {
+	char owner;
+	char am_pm;
+	char brightness;
+};
+
+enum st_lpm_pio_level {
+/* Interrupt/Power off  will be generated when bit goes 1 to 0*/
+	ST_LPM_PIO_LOW,
+/* Interrupt/Power off  will be generated when bit goes 0 to 1*/
+	ST_LPM_PIO_HIGH
+};
+
+enum st_lpm_pio_direction {
+	ST_LPM_PIO_INPUT,
+	ST_LPM_PIO_OUTPUT
+};
+
+/**
+ * enum st_lpm_pio_use - to define how pio can be used
+ * @ST_LPM_PIO_POWER:		PIO used for power control
+ * @ST_LPM_PIO_ETH_MDINT:	PIO used for phy WOL
+ * @ST_LPM_PIO_WAKEUP:		PIO used as GPIO interrupt for wakeup
+ * @ST_LPM_PIO_EXT_IT:		PIO used as external interrupt
+ * @ST_LPM_PIO_OTHER:		Reserved
+ */
+enum st_lpm_pio_use {
+	ST_LPM_PIO_POWER = 1,
+	ST_LPM_PIO_ETH_MDINT,
+	ST_LPM_PIO_WAKEUP,
+	ST_LPM_PIO_EXT_IT,
+	ST_LPM_PIO_OTHER,
+	ST_LPM_PIO_FP_PIO,
+};
+
+/**
+ * struct st_lpm_pio_setting - define PIO use
+ * @pio_bank:		pio bank number
+ * @pio_pin:		pio pin number, valid values [0-7]
+ * @pio_direction:	direction of PIO
+ *			0 means, pio is used as input.
+ *			1 means, pio is used as output.
+ * @interrupt_enabled:	If interrupt on this PIO is enabled
+ *			0 means, interrupts are disabled.
+ *			1 means, interrupt are enabled.
+ *			This must be set to 0 when pio is used as output.
+ * @pio_level:		PIO level high or low.
+ *			0 means, Interrupt/Power off will be done when
+ *			PIO goes low.
+ *			1 means, Interrupt/Power off will be done when
+ *			PIO goes high.
+ * @pio_disable:	1 means disable pio setting
+ * @pio_use:		use of this pio
+ * @StdbyOrWake		0 means standby control(LED) pio and
+ *			1 means wakeup control(LED) pio
+ * @CtrlPioLevel	1 high - 0 low
+ *
+ */
+struct st_lpm_pio_setting {
+	char pio_bank;
+	char pio_pin;
+	bool pio_direction;
+	bool interrupt_enabled;
+	bool pio_level;
+	bool pio_disable;
+	enum st_lpm_pio_use  pio_use;
+	bool stdbyorwake;
+	bool ctrlpiolevel;
+};
+
+/**
+ * enum st_lpm_adv_feature_name - Define name of advance feature of SBC
+ * @ST_LPM_USE_EXT_VCORE:	feature is external VCORE for SBC
+ * @ST_LPM_USE_INT_VOLT_DETECT:	internal low voltage detect
+ * @ST_LPM_EXT_CLOCK:		external clock
+ * @ST_LPM_RTC_SOURCE:		RTC source for SBC
+ * @ST_LPM_WU_TRIGGERS:		wakeup triggers
+ * @ST_LPM_DE_BOUNCE:		Delay for power de bounce
+ * @ST_LPM_DC_STABLE:		Delay need for DC stability
+ */
+enum st_lpm_adv_feature_name {
+	ST_LPM_USE_EXT_VCORE = 1,
+	ST_LPM_USE_INT_VOLT_DETECT,
+	ST_LPM_EXT_CLOCK,
+	ST_LPM_RTC_SOURCE,
+	ST_LPM_WU_TRIGGERS,
+	ST_LPM_DE_BOUNCE,
+	ST_LPM_DC_STABLE,
+	ST_LPM_SBC_IDLE,
+	ST_LPM_RTC_CALIBRATION_TIME,
+	ST_LPM_SET_EXIT_CPS,
+	ST_LPM_SBC_USER_CUSTOM_MSG = 0x40,
+};
+
+/**
+ * struct st_lpm_adv_feature - define advance feature struct
+ * @feature_name:	Name of feature
+ * @set_params:	Used to set feature on SBC
+ *
+ *		when features is ST_LPM_USE_EXT_VCORE,
+ *		set_params[0] = 0 means External Vcore not selected
+ *		set_params[0] = 1 means External Vcore selected
+ *		set_params[1] is unused
+ *
+ *		when features is ST_LPM_USE_INT_VOLT_DETECT
+ *		set_params[0] is voltage value to detect low voltage
+ *		i..e for 3.3V use 33 and for 3.0V use 20
+ *		set_params[1] is unused
+ *
+ *		when features is ST_LPM_EXT_CLOCK
+ *		set_params[0] = 1 means external
+ *		set_params[0] = 2 means external ACG
+ *		set_params[0] = 3 means Track_32K
+ *		set_params[1] is unused
+ *
+ *		when features is ST_LPM_RTC_SOURCE
+ *		set_params[0] = 1 means RTC_32K_TCXO
+ *		set_params[0] = 2 means external ACG
+ *		set_params[0] = 3 means RTC_32K_OSC
+ *		set_params[1] is unused
+ *
+ *		when features is ST_LPM_WU_TRIGGERS
+ *		set_params[0-1] is bit map for each wakeup trigger
+ *		as defined in enum st_lpm_wakeup_devices
+ *
+ *		when features is ST_LPM_DE_BOUNCE
+ *		set_params[0-1] is debounce delay in ms
+ *
+ *		when features is ST_LPM_DC_STABLE
+ *		set_params[0-1] is delay in ms for DC stability
+ *
+ * @get_params: Used to get advance feature of SBC
+ *		get_params[0-3] is feature set supported by SBC, TBD
+ *		get_params[4-5] is wakeup triggers
+ */
+struct st_lpm_adv_feature {
+	enum st_lpm_adv_feature_name feature_name;
+	union {
+		unsigned char set_params[12];
+		unsigned char get_params[10];
+	} params;
+};
+
+/* defines  MAX depth for IR FIFO */
+#define MAX_IR_FIFO_DEPTH	64
+
+#define MIN_RTC_YEAR 2000
+#define MAX_RTC_YEAR 2255
+
+/**
+ * struct st_lpm_ir_fifo - define one element of IR fifo
+ * @mark:	Mark time
+ * @symbol:	Symbol time
+ */
+struct st_lpm_ir_fifo {
+	u16 mark;
+	u16 symbol;
+};
+
+/**
+ * sturct st_lpm_ir_key - define raw data for IR key
+ * @key_index:		Key Index acts as key identifier
+ * @num_patterns:	Number of mark/symbol pattern define this key
+ * @fifo:		Place holder for mark/symbol data
+ *
+ * Max value of fifo is kept 64, which is max value of IR IP
+ */
+struct st_lpm_ir_key {
+	u8 key_index;
+	u8 num_patterns;
+	struct st_lpm_ir_fifo fifo[MAX_IR_FIFO_DEPTH];
+};
+
+/**
+ * struct st_lpm_ir_keyinfo - define a IR key along with another info
+ * @ir_id:	Id of IR hardware, use id 0 for first IR, 1 for second IR
+ *		use id 0x80 for first UHF and 0x81 for second so on
+ * @time_period:Time period for this key , this is dependent on protocol
+ * @time_out:	Time out period for this key
+ * @tolerance:	Expected tolerance in IR key from standard value
+ * @ir_key:	IR key data
+ */
+struct st_lpm_ir_keyinfo {
+	u8 ir_id;
+	u16 time_period;
+	u16 time_out;
+	u8 tolerance;
+	struct st_lpm_ir_key ir_key;
+};
+
+/**
+ * struct st_lpm_cec_address - define CEC address
+ * @phy_addr :	physical address
+ *		phy_addr is U16 which are represented as a.b.c.d
+ *		here in a.b.c.d each a.b.c or d is > 0 and <= f
+ *		So pack these four character into U16 before sending
+ *		1.0.0.0 means send 1, 1.3.0.0 mean send 0x31
+ * @logical_addr:	logical address
+ *			This is bit field, for each 15 address
+ */
+struct st_lpm_cec_address {
+	u16 phy_addr;
+	u16 logical_addr;
+};
+
+/**
+ * enum st_lpm_cec_select
+ * @ST_LPM_CONFIG_CEC_WU_REASON: Enabled disable CEC WU reason
+ * @ST_LPM_CONFIG_CEC_WU_CUSTOM_MSG Set Custom message for CEC WU
+ */
+enum st_lpm_cec_select {
+	ST_LPM_CONFIG_CEC_WU_REASON = 1,
+	ST_LPM_CONFIG_CEC_WU_CUSTOM_MSG,
+	ST_LPM_CONFIG_CEC_VERSION,
+	ST_LPM_CONFIG_CEC_DEVICE_VENDOR_ID,
+};
+
+/**
+ * enum st_lpm_cec_wu_reason - Define CEC WU reason
+ * @ST_LPM_CEC_WU_STREAM_PATH : opcode 0x86
+ * @ST_LPM_CEC_WU_USER_POWER  : opcode 0x44, oprand 0x40
+ * @ST_LPM_CEC_WU_STREAM_POWER_ON : opcode 0x44, oprand 0x6B
+ * @ST_LPM_CEC_WU_STREAM_POWER_TOGGLE : opcode 0x44, oprand 0x6D
+ * @ST_LPM_CEC_WU_USER_MSG : user defined message
+ */
+enum st_lpm_cec_wu_reason {
+	ST_LPM_CEC_WU_STREAM_PATH		= BIT(0),
+	ST_LPM_CEC_WU_USER_POWER		= BIT(1),
+	ST_LPM_CEC_WU_STREAM_POWER_ON		= BIT(2),
+	ST_LPM_CEC_WU_STREAM_POWER_TOGGLE	= BIT(3),
+	ST_LPM_CEC_WU_USER_MSG			= BIT(4),
+};
+
+/**
+ * enum st_lpm_sbc_dmem_offset_type - Define offsets inside SBC-DMEM
+ * @ST_SBC_DMEM_DTU : offset for DTU buffer
+ * @ST_SBC_DMEM_CPS_TAG : offset for CPS Tag
+ * @ST_SBC_DMEM_PEN_HOLDING_VAR : offset for pen holding variable
+ */
+enum st_lpm_sbc_dmem_offset_type {
+	ST_SBC_DMEM_DTU,
+	ST_SBC_DMEM_CPS_TAG,
+	ST_SBC_DMEM_PEN_HOLDING_VAR,
+};
+
+/**
+ * struct st_lpm_cec_custom_msg - Define CEC custom message
+ * @size : size of message
+ * @opcode : opcode
+ * @oprand : oprand
+ */
+struct st_lpm_cec_custom_msg {
+	u8 index;
+	u8 size;
+	u8 opcode;
+	u8 oprand[10];
+};
+
+enum st_lpm_inform_host_event {
+	ST_LPM_LONG_PIO_PRESS = 1,
+	ST_LPM_ALARM_TIMER,
+	ST_LPM_TRACE_DATA,
+};
+
+#define ST_LPM_CEC_MAX_OSD_NAME_LENGTH	14
+
+struct st_lpm_cec_osd_msg {
+	u8 size;
+	u8 name[ST_LPM_CEC_MAX_OSD_NAME_LENGTH];
+};
+
+#define ST_LPM_EDID_BLK_SIZE		128
+#define ST_LPM_EDID_MAX_BLK_NUM		3
+#define ST_LPM_EDID_BLK_END		0xFF
+
+/**
+ * enum st_lpm_trace_mask- define module mask for which trace data is needed
+ */
+#define MAX_MODULE_NAME_SIZE	8
+#define MAX_TRACE_MODULE_NUM	16
+
+enum st_lpm_trace_mask {
+	ST_LPM_TRACE_IR = BIT(0),
+	ST_LPM_TRACE_CEC = BIT(1),
+	ST_LPM_TRACE_PWM = BIT(2),
+	ST_LPM_TRACE_WOL = BIT(3),
+	ST_LPM_TRACE_RTC = BIT(4),
+	ST_LPM_TRACE_ASC = BIT(5),
+	ST_LPM_TRACE_TIMER = BIT(6),
+	ST_LPM_TRACE_CUSTOM = BIT(7),
+	ST_LPM_TRACE_PIO = BIT(8),
+	ST_LPM_TRACE_I2C = BIT(9),
+	ST_LPM_TRACE_EDID = BIT(10),
+	ST_LPM_TRACE_KEYSCN = BIT(11),
+	ST_LPM_TRACE_SPI = BIT(12),
+	ST_LPM_TRACE_GENERAL = BIT(13)
+};
+
+struct st_lpm_trace_module_names {
+	enum st_lpm_trace_mask index;
+	char name[MAX_MODULE_NAME_SIZE];
+};
+
+/**
+ * union st_lpm_cec_params - to define CEC params
+ * @cec_wu_reasons :	Bit field for each CEC wakeup device
+ *			Bits should be set as per enum st_lpm_cec_wu_reason
+ * @cec_msg :		user defined CEC message
+ */
+union st_lpm_cec_params {
+	u8 cec_wu_reasons;
+	struct st_lpm_cec_custom_msg cec_msg;
+};
+
+int st_lpm_configure_wdt(u16 time_in_ms, u8 wdt_type);
+
+#ifdef CONFIG_ST_LPM
+int st_lpm_get_fw_state(enum st_lpm_sbc_state *fw_state);
+#else
+static inline int st_lpm_get_fw_state(enum st_lpm_sbc_state *fw_state)
+{
+	return -EINVAL;
+}
+#endif
+
+int st_lpm_get_wakeup_device(enum st_lpm_wakeup_devices *wakeupdevice);
+
+int st_lpm_get_wakeup_info(enum st_lpm_wakeup_devices wakeupdevice,
+	s16 *validsize, u16 datasize, char  *data);
+
+int st_lpm_write_edid(u8 *data, u8 block_num);
+
+int st_lpm_read_edid(u8 *data, u8 block_num);
+
+int st_lpm_write_dmem(unsigned char *data, unsigned int size,
+		      int offset);
+
+int st_lpm_read_dmem(unsigned char *data, unsigned int size,
+		     int offset);
+
+int st_lpm_get_dmem_offset(enum st_lpm_sbc_dmem_offset_type offset_type);
+
+int st_lpm_get_version(struct st_lpm_version *drv_ver,
+	struct st_lpm_version *fw_ver);
+
+int st_lpm_reset(enum st_lpm_reset_type reset_type);
+
+int st_lpm_setup_fp(struct st_lpm_fp_setting *fp_setting);
+
+int st_lpm_setup_ir(u8 num_keys, struct st_lpm_ir_keyinfo *keys);
+
+int st_lpm_set_rtc(struct rtc_time *new_rtc);
+
+int st_lpm_get_rtc(struct rtc_time *new_rtc);
+
+int st_lpm_set_wakeup_device(u16  wakeup_devices);
+
+int st_lpm_set_wakeup_time(u32 timeout);
+
+int st_lpm_setup_pio(struct st_lpm_pio_setting *pio_setting);
+
+int st_lpm_setup_keyscan(u16 key_data);
+
+int st_lpm_set_adv_feature(u8 enabled, struct st_lpm_adv_feature *feature);
+
+int st_lpm_get_adv_feature(bool all_features, bool custom_feature,
+				struct st_lpm_adv_feature *feature);
+
+enum st_lpm_callback_type {
+	ST_LPM_FP_PIO_PRESS,
+	ST_LPM_RTC,
+	ST_LPM_GPIO_WAKEUP,
+	ST_LPM_MAX, /* to mark the max allowed */
+};
+
+/* to register user reset function */
+int st_lpm_register_callback(enum st_lpm_callback_type type,
+	int (*func)(void *), void *data);
+
+int st_lpm_notify(enum st_lpm_callback_type type);
+
+int st_lpm_reload_fw_prepare(void);
+
+int st_start_loaded_fw(void);
+
+/**
+ * function - st_lpm_setup_fp_pio
+ * function to inform SBC about FP PIO
+ * This PIO is used to detect FP PIO Long press as defined in
+ * long_press_delay in ms.
+ * After detecting GP PIO long press SBC will send message to
+ * Host to invoke call back st_lpm_reset_notifier_fn.
+ * If no reply from host then SBC will reset the SOC after
+ * delay specified in default_reset_delay ms.
+ * if st_lpm_reset_notifier_fn specify some other time then
+ * SBC will reset SOC after that delay ms.
+ */
+int st_lpm_setup_fp_pio(struct st_lpm_pio_setting *pio_setting,
+			u32 long_press_delay, u32 default_reset_delay);
+
+int st_lpm_setup_power_on_delay(u16 de_bounce_delay, u16 dc_stability_delay);
+
+int st_lpm_setup_rtc_calibration_time(u8 cal_time);
+
+int st_lpm_set_cec_addr(struct st_lpm_cec_address *addr);
+
+int st_lpm_cec_set_osd_name(struct st_lpm_cec_osd_msg *params);
+
+int st_lpm_cec_config(enum st_lpm_cec_select use,
+			union st_lpm_cec_params *params);
+
+int st_lpm_get_rtc(struct rtc_time *new_rtc);
+
+/*
+ * Maximum size of message data that can be send in Not Bulk mode,
+ */
+#define LPM_MAX_MSG_DATA	14
+
+int st_lpm_get_command_data_size(unsigned char command_id);
+
+/**
+ * enum st_lpm_config_reboot_type - Define DDR state while booting
+ * @ST_LPM_REBOOT_WITH_DDR_SELF_REFRESH
+ * @ST_LPM_REBOOT_WITH_DDR_OFF
+ */
+enum st_lpm_config_reboot_type {
+	ST_LPM_REBOOT_WITH_DDR_SELF_REFRESH,
+	ST_LPM_REBOOT_WITH_DDR_OFF,
+};
+
+int st_lpm_config_reboot(enum st_lpm_config_reboot_type type);
+
+int st_lpm_sbc_ir_enable(bool enable);
+
+int st_lpm_poweroff(void);
+
+int st_lpm_setup_tracedata(u16 trace_modules);
+
+/**
+ * lpm_message - LPM message for cross CPU communication
+ * @command_id: Command ID
+ * @transaction_id:     Transaction id
+ * @msg_data:   Message data associated with this command
+ *
+ * Normally each message is less than 16 bytes
+ * Any message more than 16 bytes considered as big message
+ *
+ * In case of internal SBC, where size of mailbox is 16 byte
+ * If message is large then 16 bytes then direct write to SBC memory is done
+ *
+ */
+
+struct lpm_message {
+	unsigned char command_id;
+	unsigned char transaction_id;
+	unsigned char buf[LPM_MAX_MSG_DATA];
+} __packed;
+
+struct st_lpm_ops {
+	int (*exchange_msg)(struct lpm_message *cmd,
+		struct lpm_message *response, void *private_data);
+	int (*write_bulk)(u16 size, const char *msg, void *private_data,
+			  int *offset_dmem);
+	int (*read_bulk)(u16 size, u16 offset, char *msg, void *private_data);
+	int (*get_dmem_offset)(enum st_lpm_sbc_dmem_offset_type offset_type,
+			       void *private_data);
+	int (*config_reboot)(enum st_lpm_config_reboot_type type,
+		void *private_data);
+	void (*ir_enable)(bool enable, void *private_data);
+
+	int (*write_edid)(u8 *edid_buf, u8 block_num, void *data);
+
+	int (*read_edid)(u8 *edid_buf, u8 block_num, void *data);
+
+	int (*reload_fw_prepare)(void *data);
+
+	int (*start_loaded_fw)(void *data);
+
+	int (*setup_tracedata)(u16 trace_modules, void *data);
+};
+
+int st_lpm_set_ops(struct st_lpm_ops *ops, void *private_data);
+
+#endif /* __LPM_H */
diff -urNp a/include/linux/power/st_lpm_def.h b/include/linux/power/st_lpm_def.h
--- a/include/linux/power/st_lpm_def.h	1970-01-01 01:00:00.000000000 +0100
+++ b/include/linux/power/st_lpm_def.h	2019-09-26 21:23:27.760620100 +0100
@@ -0,0 +1,233 @@
+/*
+ * Copyright (C) 2014 STMicroelectronics Limited
+ *
+ * Contributor:Francesco Virlinzi <francesco.virlinzi@st.com>
+ * Author:Pooja Agarwal <pooja.agarwal@st.com>
+ * Author:Udit Kumar <udit-dlh.kumar@st.com>
+ * Author:Sudeep Biswas <sudeep.biswas@st.com>
+ *
+ * May be copied or modified under the terms of the GNU General Public
+ * License Version 2.0 only.  See linux/COPYING for more information.
+ */
+
+#ifndef __LPM_DEF_H_
+#define __LPM_DEF_H_
+/*
+ * LPM protocol has following architecture
+ * |	byte0	|	byte1	|	byte2	|	byte3	|
+ * |	cmd id	|	transid	|	msgdata	|	msgdata	|
+ *
+ * cmd id is command id
+ * transid is Transaction ID
+ * msgdata is data part of message
+ * msg data size can vary depending upon command
+ *
+ * In case of internal SBC, communication will be done using mailbox.
+ * mailbox has depth of 16 bytes.
+ * When message is greater than 16 bytes, such messages are treated as big
+ * messages and will be send by directly writing into DMEM of SBC.
+ *
+ * In case of external SBC (7108), which is connected with SOC via i2c
+ * communication will be done using i2c bus.
+ *
+ * Internal and external standby controllers expect message in
+ * little endian mode
+ */
+
+/* Message command ids */
+
+/* No operation */
+#define LPM_MSG_NOP		0x0
+#define LPM_MSG_NOP_SIZE	0x0
+
+/* Command id to retrieve version number */
+#define LPM_MSG_VER		0x1
+#define LPM_MSG_VER_SIZE	0x5
+
+/* Command id to read current RTC value */
+#define LPM_MSG_READ_RTC	0x3
+#define LPM_MSG_READ_RTC_SIZE	1
+
+/* Command id to trim RTC */
+#define LPM_MSG_SET_TRIM	0x4
+#define LPM_MSG_SET_TRIM_SIZE	0x0
+
+/* Command id to enter in passive standby mode */
+#define LPM_MSG_ENTER_PASSIVE	0x5
+#define LPM_MSG_ENTER_PASSIVE_SIZE	0x0
+
+/* Command id  to set watch dog timeout of SBC */
+#define LPM_MSG_SET_WDT		0x6
+#define LPM_MSG_SET_WDT_SIZE	3
+
+/* Command id  to set new RTC value for SBC */
+#define LPM_MSG_SET_RTC		0x7
+#define LPM_MSG_SET_RTC_SIZE	6
+
+/* Command id  to configure frontpanel display */
+#define LPM_MSG_SET_FP		0x8
+#define LPM_MSG_SET_FP_SIZE	1
+
+/* Command id to set wakeup time */
+#define LPM_MSG_SET_TIMER	0x9
+#define LPM_MSG_SET_TIMER_SIZE	4
+
+/* Command id to get status of SBC CPU */
+#define LPM_MSG_GET_STATUS	0xA
+#define LPM_MSG_GET_STATUS_SIZE	0x1
+
+/* Command id to generate reset */
+#define LPM_MSG_GEN_RESET	0xB
+#define LPM_MSG_GEN_RESET_SIZE	0x1
+
+/* Command id to set wakeup device */
+#define LPM_MSG_SET_WUD		0xC
+#define LPM_MSG_SET_WUD_SIZE	0x0
+
+/* Command id to get wakeup device */
+#define LPM_MSG_GET_WUD		0xD
+#define LPM_MSG_GET_WUD_SIZE	0x0
+
+/* Command id to offset in SBC memory */
+#define LPM_MSG_LGWR_OFFSET	0x10
+#define LPM_MSG_LGWR_OFFSET_SIZE	0x2
+
+/* Command id to inform PIO setting */
+#define LPM_MSG_SET_PIO		0x11
+#define LPM_MSG_SET_PIO_SIZE	14
+
+/* Command id to get advance features */
+#define LPM_MSG_GET_ADV_FEA	0x12
+#define LPM_MSG_GET_ADV_FEA_SIZE	1
+
+/* Command id to set advance features */
+#define LPM_MSG_SET_ADV_FEA	0x13
+#define LPM_MSG_SET_ADV_FEA_SIZE	4
+
+/* Command id to set key scan data */
+#define LPM_MSG_SET_KEY_SCAN	0x14
+#define LPM_MSG_SET_KEY_SCAN_SIZE	2
+
+/*command id for CEC addresses*/
+#define LPM_MSG_CEC_ADDR	0x15
+#define LPM_MSG_CEC_ADDR_SIZE	4
+
+/*command id for CEC params */
+#define LPM_MSG_CEC_PARAMS	0x16
+#define LPM_MSG_CEC_PARAMS_SIZE	14
+
+/*command id for CEC Set OSD Name */
+#define LPM_MSG_CEC_SET_OSD_NAME  0x19
+#define LPM_MSG_CEC_SET_OSD_NAME_SIZE  14
+
+#define LPM_MSG_INFORM_HOST 0x17
+
+/*
+ * Command id to set IR information on SBC CPU,
+ * these are IR keys on which SBC will do wakeup.
+ */
+#define LPM_MSG_SET_IR		0x41
+#define LPM_MSG_SET_IR_SIZE	0x0
+
+/* Command id to get data associated with some wakeup device */
+#define LPM_MSG_GET_IRQ		0x42
+#define LPM_MSG_GET_IRQ_SIZE	0x3
+
+/*
+ * Command id to inform trace data of SBC,
+ * SBC can send trace data to host using this command
+ */
+#define LPM_MSG_TRACE_DATA	0x43
+#define LPM_MSG_TRACE_DATA_SIZE	0x2
+
+/* Command id to read message from SBC memory */
+#define LPM_MSG_BKBD_READ	0x44
+#define LPM_MSG_BKBD_READ_SIZE	0x0
+
+/* Command id inform SBC that write to SBC memory is done */
+#define LPM_MSG_BKBD_WRITE	0x45
+#define LPM_MSG_BKBD_WRITE_SIZE	0x6
+
+/* Command id inform SBC that write to SBC memory is done */
+#define LPM_MSG_EDID_INFO	0x46
+#define LPM_MSG_EDID_INFO_SIZE	0x6
+
+/* Bit-7 of command id used to mark reply from other CPU */
+#define LPM_MSG_REPLY		0x80
+#define LPM_MSG_REPLY_SIZE	0x0
+
+/* Command for error */
+#define LPM_MSG_ERR		0x82
+#define LPM_MSG_ERR_SIZE	0x0
+
+/*
+ * Version number of driver , this has following fields
+ * protocol major and minor number
+ * software major, minor and patch number
+ * software release build, month, day and year
+ */
+#define LPM_MAJOR_PROTO_VER	1
+#define LPM_MINOR_PROTO_VER	7
+#define LPM_MAJOR_SOFT_VER	2
+#define LPM_MINOR_SOFT_VER	1
+#define LPM_PATCH_SOFT_VER      0
+#define LPM_BUILD_MONTH         07
+#define LPM_BUILD_DAY           31
+#define LPM_BUILD_YEAR          14
+
+/* Used to mask a byte */
+#define BYTE_MASK		0xFF
+
+/* For FP setting, mask to get owner's 2 bits */
+#define OWNER_MASK		0x3
+
+/* For FP setting, mask to brightness of LED 's 4 bits */
+#define NIBBLE_MASK		0xF
+
+/**
+ * Mask for PIO level, interrupt and  direction
+ * Bit 7 is used for level
+ * bit 6 is used for interrupt and
+ * bit 5 is used for direction of PIO
+ * bit 4 is used for disabling PIO
+ */
+#define PIO_LEVEL_SHIFT		7
+#define PIO_IT_SHIFT		6
+#define PIO_DIRECTION_SHIFT	5
+#define PIO_DISABLE_SHIFT	4
+#define PIO_CONTROL_SHIFT	1
+
+/* Message send to SBC does not have msg data */
+#define MSG_ZERO_SIZE		0
+
+/* Transaction id will be generated by lpm itself */
+#define MSG_ID_AUTO		0
+
+/* Bit 6 of lpm_config_1 SBC register is to manage IRB enable */
+#define IRB_ENABLE		BIT(6)
+#define LPM_CONFIG_1_OFFSET	0x4
+
+/* DMEM related stuff */
+/* SBC data memory offset as seen by Host w.r.t mem resource 1 */
+#define DATA_OFFSET			0x010000
+
+/* SBC DMEM memory required for the holding pen code */
+#define DMEM_PEN_HOLDING_CODE_SZ	0x80
+
+/*
+ * The below define is required for platsmp.c
+ * because at that time LPM driver is not initialized
+ * and hence cant return the offsets dynamically
+ */
+#define PEN_HOLD_VAR_OFFSET_418		0xb8
+
+#define PEN_HOLD_VAR_OFFSET_4xx		0xa4
+
+/* Common reset buff data, applied to SBC pen holding var to set it to ~0 */
+#define LPM_DMEM_PEN_HOLD_VAR_RESET	{0xFF, 0xFF, 0xFF, 0xFF}
+
+#define LPM_POWER_STATUS 0x48
+#define XP70_IDLE_MODE 0xF
+
+#endif /*__LPM_DEF_H*/
+
